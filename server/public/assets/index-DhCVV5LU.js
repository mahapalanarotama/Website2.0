var Ste=Object.defineProperty;var OL=n=>{throw TypeError(n)};var Ete=(n,e,t)=>e in n?Ste(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var rg=(n,e,t)=>Ete(n,typeof e!="symbol"?e+"":e,t),WC=(n,e,t)=>e.has(n)||OL("Cannot "+t);var ge=(n,e,t)=>(WC(n,e,"read from private field"),t?t.call(n):e.get(n)),vn=(n,e,t)=>e.has(n)?OL("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),jt=(n,e,t,r)=>(WC(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Zn=(n,e,t)=>(WC(n,e,"access private method"),t);var Bw=(n,e,t,r)=>({set _(i){jt(n,e,i,t)},get _(){return ge(n,e,r)}});function bte(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Ate=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function y3(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var u9={exports:{}},pA={},h9={exports:{}},Xn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_=Symbol.for("react.element"),Tte=Symbol.for("react.portal"),Cte=Symbol.for("react.fragment"),Mte=Symbol.for("react.strict_mode"),Ite=Symbol.for("react.profiler"),Pte=Symbol.for("react.provider"),Rte=Symbol.for("react.context"),Nte=Symbol.for("react.forward_ref"),Dte=Symbol.for("react.suspense"),kte=Symbol.for("react.memo"),Ote=Symbol.for("react.lazy"),LL=Symbol.iterator;function Lte(n){return n===null||typeof n!="object"?null:(n=LL&&n[LL]||n["@@iterator"],typeof n=="function"?n:null)}var d9={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f9=Object.assign,p9={};function Dv(n,e,t){this.props=n,this.context=e,this.refs=p9,this.updater=t||d9}Dv.prototype.isReactComponent={};Dv.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Dv.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function m9(){}m9.prototype=Dv.prototype;function x3(n,e,t){this.props=n,this.context=e,this.refs=p9,this.updater=t||d9}var _3=x3.prototype=new m9;_3.constructor=x3;f9(_3,Dv.prototype);_3.isPureReactComponent=!0;var FL=Array.isArray,g9=Object.prototype.hasOwnProperty,w3={current:null},v9={key:!0,ref:!0,__self:!0,__source:!0};function y9(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)g9.call(e,r)&&!v9.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:h_,type:n,key:s,ref:o,props:i,_owner:w3.current}}function Fte(n,e){return{$$typeof:h_,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function S3(n){return typeof n=="object"&&n!==null&&n.$$typeof===h_}function Bte(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var BL=/\/+/g;function GC(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Bte(""+n.key):e.toString(36)}function _E(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case h_:case Tte:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+GC(o,0):r,FL(i)?(t="",n!=null&&(t=n.replace(BL,"$&/")+"/"),_E(i,e,t,"",function(c){return c})):i!=null&&(S3(i)&&(i=Fte(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(BL,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",FL(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+GC(s,a);o+=_E(s,e,t,l,i)}else if(l=Lte(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+GC(s,a++),o+=_E(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Uw(n,e,t){if(n==null)return n;var r=[],i=0;return _E(n,r,"","",function(s){return e.call(t,s,i++)}),r}function Ute(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ko={current:null},wE={transition:null},jte={ReactCurrentDispatcher:Ko,ReactCurrentBatchConfig:wE,ReactCurrentOwner:w3};function x9(){throw Error("act(...) is not supported in production builds of React.")}Xn.Children={map:Uw,forEach:function(n,e,t){Uw(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Uw(n,function(){e++}),e},toArray:function(n){return Uw(n,function(e){return e})||[]},only:function(n){if(!S3(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Xn.Component=Dv;Xn.Fragment=Cte;Xn.Profiler=Ite;Xn.PureComponent=x3;Xn.StrictMode=Mte;Xn.Suspense=Dte;Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jte;Xn.act=x9;Xn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=f9({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=w3.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)g9.call(e,l)&&!v9.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:h_,type:n.type,key:i,ref:s,props:r,_owner:o}};Xn.createContext=function(n){return n={$$typeof:Rte,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Pte,_context:n},n.Consumer=n};Xn.createElement=y9;Xn.createFactory=function(n){var e=y9.bind(null,n);return e.type=n,e};Xn.createRef=function(){return{current:null}};Xn.forwardRef=function(n){return{$$typeof:Nte,render:n}};Xn.isValidElement=S3;Xn.lazy=function(n){return{$$typeof:Ote,_payload:{_status:-1,_result:n},_init:Ute}};Xn.memo=function(n,e){return{$$typeof:kte,type:n,compare:e===void 0?null:e}};Xn.startTransition=function(n){var e=wE.transition;wE.transition={};try{n()}finally{wE.transition=e}};Xn.unstable_act=x9;Xn.useCallback=function(n,e){return Ko.current.useCallback(n,e)};Xn.useContext=function(n){return Ko.current.useContext(n)};Xn.useDebugValue=function(){};Xn.useDeferredValue=function(n){return Ko.current.useDeferredValue(n)};Xn.useEffect=function(n,e){return Ko.current.useEffect(n,e)};Xn.useId=function(){return Ko.current.useId()};Xn.useImperativeHandle=function(n,e,t){return Ko.current.useImperativeHandle(n,e,t)};Xn.useInsertionEffect=function(n,e){return Ko.current.useInsertionEffect(n,e)};Xn.useLayoutEffect=function(n,e){return Ko.current.useLayoutEffect(n,e)};Xn.useMemo=function(n,e){return Ko.current.useMemo(n,e)};Xn.useReducer=function(n,e,t){return Ko.current.useReducer(n,e,t)};Xn.useRef=function(n){return Ko.current.useRef(n)};Xn.useState=function(n){return Ko.current.useState(n)};Xn.useSyncExternalStore=function(n,e,t){return Ko.current.useSyncExternalStore(n,e,t)};Xn.useTransition=function(){return Ko.current.useTransition()};Xn.version="18.3.1";h9.exports=Xn;var O=h9.exports;const fn=y3(O),E3=bte({__proto__:null,default:fn},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vte=O,zte=Symbol.for("react.element"),Hte=Symbol.for("react.fragment"),Wte=Object.prototype.hasOwnProperty,Gte=Vte.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$te={key:!0,ref:!0,__self:!0,__source:!0};function _9(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Wte.call(e,r)&&!$te.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:zte,type:n,key:s,ref:o,props:i,_owner:Gte.current}}pA.Fragment=Hte;pA.jsx=_9;pA.jsxs=_9;u9.exports=pA;var m=u9.exports,w9={exports:{}},Ja={},S9={exports:{}},E9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(X,ce){var oe=X.length;X.push(ce);e:for(;0<oe;){var fe=oe-1>>>1,De=X[fe];if(0<i(De,ce))X[fe]=ce,X[oe]=De,oe=fe;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ce=X[0],oe=X.pop();if(oe!==ce){X[0]=oe;e:for(var fe=0,De=X.length,We=De>>>1;fe<We;){var Qe=2*(fe+1)-1,ve=X[Qe],Ie=Qe+1,we=X[Ie];if(0>i(ve,oe))Ie<De&&0>i(we,ve)?(X[fe]=we,X[Ie]=oe,fe=Ie):(X[fe]=ve,X[Qe]=oe,fe=Qe);else if(Ie<De&&0>i(we,oe))X[fe]=we,X[Ie]=oe,fe=Ie;else break e}}return ce}function i(X,ce){var oe=X.sortIndex-ce.sortIndex;return oe!==0?oe:X.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,p=!1,v=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(X){for(var ce=t(c);ce!==null;){if(ce.callback===null)r(c);else if(ce.startTime<=X)r(c),ce.sortIndex=ce.expirationTime,e(l,ce);else break;ce=t(c)}}function M(X){if(_=!1,b(X),!v)if(t(l)!==null)v=!0,se(k);else{var ce=t(c);ce!==null&&le(M,ce.startTime-X)}}function k(X,ce){v=!1,_&&(_=!1,x(N),N=-1),p=!0;var oe=f;try{for(b(ce),h=t(l);h!==null&&(!(h.expirationTime>ce)||X&&!U());){var fe=h.callback;if(typeof fe=="function"){h.callback=null,f=h.priorityLevel;var De=fe(h.expirationTime<=ce);ce=n.unstable_now(),typeof De=="function"?h.callback=De:h===t(l)&&r(l),b(ce)}else r(l);h=t(l)}if(h!==null)var We=!0;else{var Qe=t(c);Qe!==null&&le(M,Qe.startTime-ce),We=!1}return We}finally{h=null,f=oe,p=!1}}var B=!1,P=null,N=-1,R=5,I=-1;function U(){return!(n.unstable_now()-I<R)}function H(){if(P!==null){var X=n.unstable_now();I=X;var ce=!0;try{ce=P(!0,X)}finally{ce?W():(B=!1,P=null)}}else B=!1}var W;if(typeof E=="function")W=function(){E(H)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,te=K.port2;K.port1.onmessage=H,W=function(){te.postMessage(null)}}else W=function(){S(H,0)};function se(X){P=X,B||(B=!0,W())}function le(X,ce){N=S(function(){X(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){v||p||(v=!0,se(k))},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(X){switch(f){case 1:case 2:case 3:var ce=3;break;default:ce=f}var oe=f;f=ce;try{return X()}finally{f=oe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,ce){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var oe=f;f=X;try{return ce()}finally{f=oe}},n.unstable_scheduleCallback=function(X,ce,oe){var fe=n.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?fe+oe:fe):oe=fe,X){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=oe+De,X={id:u++,callback:ce,priorityLevel:X,startTime:oe,expirationTime:De,sortIndex:-1},oe>fe?(X.sortIndex=oe,e(c,X),t(l)===null&&X===t(c)&&(_?(x(N),N=-1):_=!0,le(M,oe-fe))):(X.sortIndex=De,e(l,X),v||p||(v=!0,se(k))),X},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(X){var ce=f;return function(){var oe=f;f=ce;try{return X.apply(this,arguments)}finally{f=oe}}}})(E9);S9.exports=E9;var Xte=S9.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qte=O,Ya=Xte;function dt(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var b9=new Set,nx={};function Im(n,e){ev(n,e),ev(n+"Capture",e)}function ev(n,e){for(nx[n]=e,n=0;n<e.length;n++)b9.add(e[n])}var fh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),SP=Object.prototype.hasOwnProperty,Yte=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,UL={},jL={};function Kte(n){return SP.call(jL,n)?!0:SP.call(UL,n)?!1:Yte.test(n)?jL[n]=!0:(UL[n]=!0,!1)}function Zte(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Qte(n,e,t,r){if(e===null||typeof e>"u"||Zte(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zo(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ws={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ws[n]=new Zo(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ws[e]=new Zo(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ws[n]=new Zo(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ws[n]=new Zo(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ws[n]=new Zo(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ws[n]=new Zo(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ws[n]=new Zo(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ws[n]=new Zo(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ws[n]=new Zo(n,5,!1,n.toLowerCase(),null,!1,!1)});var b3=/[\-:]([a-z])/g;function A3(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(b3,A3);Ws[e]=new Zo(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(b3,A3);Ws[e]=new Zo(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(b3,A3);Ws[e]=new Zo(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ws[n]=new Zo(n,1,!1,n.toLowerCase(),null,!1,!1)});Ws.xlinkHref=new Zo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ws[n]=new Zo(n,1,!1,n.toLowerCase(),null,!0,!0)});function T3(n,e,t,r){var i=Ws.hasOwnProperty(e)?Ws[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Qte(e,t,i,r)&&(t=null),r||i===null?Kte(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Ih=qte.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jw=Symbol.for("react.element"),Wg=Symbol.for("react.portal"),Gg=Symbol.for("react.fragment"),C3=Symbol.for("react.strict_mode"),EP=Symbol.for("react.profiler"),A9=Symbol.for("react.provider"),T9=Symbol.for("react.context"),M3=Symbol.for("react.forward_ref"),bP=Symbol.for("react.suspense"),AP=Symbol.for("react.suspense_list"),I3=Symbol.for("react.memo"),Sd=Symbol.for("react.lazy"),C9=Symbol.for("react.offscreen"),VL=Symbol.iterator;function by(n){return n===null||typeof n!="object"?null:(n=VL&&n[VL]||n["@@iterator"],typeof n=="function"?n:null)}var xi=Object.assign,$C;function t1(n){if($C===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);$C=e&&e[1]||""}return`
`+$C+n}var XC=!1;function qC(n,e){if(!n||XC)return"";XC=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{XC=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?t1(n):""}function Jte(n){switch(n.tag){case 5:return t1(n.type);case 16:return t1("Lazy");case 13:return t1("Suspense");case 19:return t1("SuspenseList");case 0:case 2:case 15:return n=qC(n.type,!1),n;case 11:return n=qC(n.type.render,!1),n;case 1:return n=qC(n.type,!0),n;default:return""}}function TP(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Gg:return"Fragment";case Wg:return"Portal";case EP:return"Profiler";case C3:return"StrictMode";case bP:return"Suspense";case AP:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case T9:return(n.displayName||"Context")+".Consumer";case A9:return(n._context.displayName||"Context")+".Provider";case M3:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case I3:return e=n.displayName||null,e!==null?e:TP(n.type)||"Memo";case Sd:e=n._payload,n=n._init;try{return TP(n(e))}catch{}}return null}function ene(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return TP(e);case 8:return e===C3?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hf(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function M9(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tne(n){var e=M9(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Vw(n){n._valueTracker||(n._valueTracker=tne(n))}function I9(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=M9(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function lb(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function CP(n,e){var t=e.checked;return xi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function zL(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=hf(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function P9(n,e){e=e.checked,e!=null&&T3(n,"checked",e,!1)}function MP(n,e){P9(n,e);var t=hf(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?IP(n,e.type,t):e.hasOwnProperty("defaultValue")&&IP(n,e.type,hf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function HL(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function IP(n,e,t){(e!=="number"||lb(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var n1=Array.isArray;function w0(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+hf(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function PP(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(dt(91));return xi({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function WL(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(dt(92));if(n1(t)){if(1<t.length)throw Error(dt(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:hf(t)}}function R9(n,e){var t=hf(e.value),r=hf(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function GL(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function N9(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function RP(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?N9(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var zw,D9=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(zw=zw||document.createElement("div"),zw.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zw.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function rx(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var E1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nne=["Webkit","ms","Moz","O"];Object.keys(E1).forEach(function(n){nne.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),E1[e]=E1[n]})});function k9(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||E1.hasOwnProperty(n)&&E1[n]?(""+e).trim():e+"px"}function O9(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=k9(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var rne=xi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function NP(n,e){if(e){if(rne[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(dt(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(dt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(dt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(dt(62))}}function DP(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kP=null;function P3(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var OP=null,S0=null,E0=null;function $L(n){if(n=p_(n)){if(typeof OP!="function")throw Error(dt(280));var e=n.stateNode;e&&(e=xA(e),OP(n.stateNode,n.type,e))}}function L9(n){S0?E0?E0.push(n):E0=[n]:S0=n}function F9(){if(S0){var n=S0,e=E0;if(E0=S0=null,$L(n),e)for(n=0;n<e.length;n++)$L(e[n])}}function B9(n,e){return n(e)}function U9(){}var YC=!1;function j9(n,e,t){if(YC)return n(e,t);YC=!0;try{return B9(n,e,t)}finally{YC=!1,(S0!==null||E0!==null)&&(U9(),F9())}}function ix(n,e){var t=n.stateNode;if(t===null)return null;var r=xA(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(dt(231,e,typeof t));return t}var LP=!1;if(fh)try{var Ay={};Object.defineProperty(Ay,"passive",{get:function(){LP=!0}}),window.addEventListener("test",Ay,Ay),window.removeEventListener("test",Ay,Ay)}catch{LP=!1}function ine(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var b1=!1,cb=null,ub=!1,FP=null,sne={onError:function(n){b1=!0,cb=n}};function one(n,e,t,r,i,s,o,a,l){b1=!1,cb=null,ine.apply(sne,arguments)}function ane(n,e,t,r,i,s,o,a,l){if(one.apply(this,arguments),b1){if(b1){var c=cb;b1=!1,cb=null}else throw Error(dt(198));ub||(ub=!0,FP=c)}}function Pm(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function V9(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function XL(n){if(Pm(n)!==n)throw Error(dt(188))}function lne(n){var e=n.alternate;if(!e){if(e=Pm(n),e===null)throw Error(dt(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return XL(i),n;if(s===r)return XL(i),e;s=s.sibling}throw Error(dt(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(dt(189))}}if(t.alternate!==r)throw Error(dt(190))}if(t.tag!==3)throw Error(dt(188));return t.stateNode.current===t?n:e}function z9(n){return n=lne(n),n!==null?H9(n):null}function H9(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=H9(n);if(e!==null)return e;n=n.sibling}return null}var W9=Ya.unstable_scheduleCallback,qL=Ya.unstable_cancelCallback,cne=Ya.unstable_shouldYield,une=Ya.unstable_requestPaint,Fi=Ya.unstable_now,hne=Ya.unstable_getCurrentPriorityLevel,R3=Ya.unstable_ImmediatePriority,G9=Ya.unstable_UserBlockingPriority,hb=Ya.unstable_NormalPriority,dne=Ya.unstable_LowPriority,$9=Ya.unstable_IdlePriority,mA=null,nu=null;function fne(n){if(nu&&typeof nu.onCommitFiberRoot=="function")try{nu.onCommitFiberRoot(mA,n,void 0,(n.current.flags&128)===128)}catch{}}var uc=Math.clz32?Math.clz32:gne,pne=Math.log,mne=Math.LN2;function gne(n){return n>>>=0,n===0?32:31-(pne(n)/mne|0)|0}var Hw=64,Ww=4194304;function r1(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function db(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=r1(a):(s&=o,s!==0&&(r=r1(s)))}else o=t&~i,o!==0?r=r1(o):s!==0&&(r=r1(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-uc(e),i=1<<t,r|=n[t],e&=~i;return r}function vne(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yne(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-uc(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=vne(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function BP(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function X9(){var n=Hw;return Hw<<=1,!(Hw&4194240)&&(Hw=64),n}function KC(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function d_(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-uc(e),n[e]=t}function xne(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-uc(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function N3(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-uc(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Cr=0;function q9(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Y9,D3,K9,Z9,Q9,UP=!1,Gw=[],Gd=null,$d=null,Xd=null,sx=new Map,ox=new Map,Ad=[],_ne="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function YL(n,e){switch(n){case"focusin":case"focusout":Gd=null;break;case"dragenter":case"dragleave":$d=null;break;case"mouseover":case"mouseout":Xd=null;break;case"pointerover":case"pointerout":sx.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ox.delete(e.pointerId)}}function Ty(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=p_(e),e!==null&&D3(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function wne(n,e,t,r,i){switch(e){case"focusin":return Gd=Ty(Gd,n,e,t,r,i),!0;case"dragenter":return $d=Ty($d,n,e,t,r,i),!0;case"mouseover":return Xd=Ty(Xd,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return sx.set(s,Ty(sx.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ox.set(s,Ty(ox.get(s)||null,n,e,t,r,i)),!0}return!1}function J9(n){var e=Np(n.target);if(e!==null){var t=Pm(e);if(t!==null){if(e=t.tag,e===13){if(e=V9(t),e!==null){n.blockedOn=e,Q9(n.priority,function(){K9(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function SE(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=jP(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);kP=r,t.target.dispatchEvent(r),kP=null}else return e=p_(t),e!==null&&D3(e),n.blockedOn=t,!1;e.shift()}return!0}function KL(n,e,t){SE(n)&&t.delete(e)}function Sne(){UP=!1,Gd!==null&&SE(Gd)&&(Gd=null),$d!==null&&SE($d)&&($d=null),Xd!==null&&SE(Xd)&&(Xd=null),sx.forEach(KL),ox.forEach(KL)}function Cy(n,e){n.blockedOn===e&&(n.blockedOn=null,UP||(UP=!0,Ya.unstable_scheduleCallback(Ya.unstable_NormalPriority,Sne)))}function ax(n){function e(i){return Cy(i,n)}if(0<Gw.length){Cy(Gw[0],n);for(var t=1;t<Gw.length;t++){var r=Gw[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Gd!==null&&Cy(Gd,n),$d!==null&&Cy($d,n),Xd!==null&&Cy(Xd,n),sx.forEach(e),ox.forEach(e),t=0;t<Ad.length;t++)r=Ad[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Ad.length&&(t=Ad[0],t.blockedOn===null);)J9(t),t.blockedOn===null&&Ad.shift()}var b0=Ih.ReactCurrentBatchConfig,fb=!0;function Ene(n,e,t,r){var i=Cr,s=b0.transition;b0.transition=null;try{Cr=1,k3(n,e,t,r)}finally{Cr=i,b0.transition=s}}function bne(n,e,t,r){var i=Cr,s=b0.transition;b0.transition=null;try{Cr=4,k3(n,e,t,r)}finally{Cr=i,b0.transition=s}}function k3(n,e,t,r){if(fb){var i=jP(n,e,t,r);if(i===null)oM(n,e,r,pb,t),YL(n,r);else if(wne(i,n,e,t,r))r.stopPropagation();else if(YL(n,r),e&4&&-1<_ne.indexOf(n)){for(;i!==null;){var s=p_(i);if(s!==null&&Y9(s),s=jP(n,e,t,r),s===null&&oM(n,e,r,pb,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else oM(n,e,r,null,t)}}var pb=null;function jP(n,e,t,r){if(pb=null,n=P3(r),n=Np(n),n!==null)if(e=Pm(n),e===null)n=null;else if(t=e.tag,t===13){if(n=V9(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return pb=n,null}function e7(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hne()){case R3:return 1;case G9:return 4;case hb:case dne:return 16;case $9:return 536870912;default:return 16}default:return 16}}var jd=null,O3=null,EE=null;function t7(){if(EE)return EE;var n,e=O3,t=e.length,r,i="value"in jd?jd.value:jd.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return EE=i.slice(n,1<r?1-r:void 0)}function bE(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function $w(){return!0}function ZL(){return!1}function el(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$w:ZL,this.isPropagationStopped=ZL,this}return xi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=$w)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=$w)},persist:function(){},isPersistent:$w}),e}var kv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},L3=el(kv),f_=xi({},kv,{view:0,detail:0}),Ane=el(f_),ZC,QC,My,gA=xi({},f_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:F3,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==My&&(My&&n.type==="mousemove"?(ZC=n.screenX-My.screenX,QC=n.screenY-My.screenY):QC=ZC=0,My=n),ZC)},movementY:function(n){return"movementY"in n?n.movementY:QC}}),QL=el(gA),Tne=xi({},gA,{dataTransfer:0}),Cne=el(Tne),Mne=xi({},f_,{relatedTarget:0}),JC=el(Mne),Ine=xi({},kv,{animationName:0,elapsedTime:0,pseudoElement:0}),Pne=el(Ine),Rne=xi({},kv,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Nne=el(Rne),Dne=xi({},kv,{data:0}),JL=el(Dne),kne={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},One={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lne={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fne(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Lne[n])?!!e[n]:!1}function F3(){return Fne}var Bne=xi({},f_,{key:function(n){if(n.key){var e=kne[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=bE(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?One[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:F3,charCode:function(n){return n.type==="keypress"?bE(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?bE(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Une=el(Bne),jne=xi({},gA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eF=el(jne),Vne=xi({},f_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:F3}),zne=el(Vne),Hne=xi({},kv,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wne=el(Hne),Gne=xi({},gA,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$ne=el(Gne),Xne=[9,13,27,32],B3=fh&&"CompositionEvent"in window,A1=null;fh&&"documentMode"in document&&(A1=document.documentMode);var qne=fh&&"TextEvent"in window&&!A1,n7=fh&&(!B3||A1&&8<A1&&11>=A1),tF=" ",nF=!1;function r7(n,e){switch(n){case"keyup":return Xne.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function i7(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var $g=!1;function Yne(n,e){switch(n){case"compositionend":return i7(e);case"keypress":return e.which!==32?null:(nF=!0,tF);case"textInput":return n=e.data,n===tF&&nF?null:n;default:return null}}function Kne(n,e){if($g)return n==="compositionend"||!B3&&r7(n,e)?(n=t7(),EE=O3=jd=null,$g=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return n7&&e.locale!=="ko"?null:e.data;default:return null}}var Zne={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rF(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Zne[n.type]:e==="textarea"}function s7(n,e,t,r){L9(r),e=mb(e,"onChange"),0<e.length&&(t=new L3("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var T1=null,lx=null;function Qne(n){g7(n,0)}function vA(n){var e=Yg(n);if(I9(e))return n}function Jne(n,e){if(n==="change")return e}var o7=!1;if(fh){var eM;if(fh){var tM="oninput"in document;if(!tM){var iF=document.createElement("div");iF.setAttribute("oninput","return;"),tM=typeof iF.oninput=="function"}eM=tM}else eM=!1;o7=eM&&(!document.documentMode||9<document.documentMode)}function sF(){T1&&(T1.detachEvent("onpropertychange",a7),lx=T1=null)}function a7(n){if(n.propertyName==="value"&&vA(lx)){var e=[];s7(e,lx,n,P3(n)),j9(Qne,e)}}function ere(n,e,t){n==="focusin"?(sF(),T1=e,lx=t,T1.attachEvent("onpropertychange",a7)):n==="focusout"&&sF()}function tre(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return vA(lx)}function nre(n,e){if(n==="click")return vA(e)}function rre(n,e){if(n==="input"||n==="change")return vA(e)}function ire(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var pc=typeof Object.is=="function"?Object.is:ire;function cx(n,e){if(pc(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!SP.call(e,i)||!pc(n[i],e[i]))return!1}return!0}function oF(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function aF(n,e){var t=oF(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=oF(t)}}function l7(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?l7(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function c7(){for(var n=window,e=lb();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=lb(n.document)}return e}function U3(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function sre(n){var e=c7(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&l7(t.ownerDocument.documentElement,t)){if(r!==null&&U3(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=aF(t,s);var o=aF(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ore=fh&&"documentMode"in document&&11>=document.documentMode,Xg=null,VP=null,C1=null,zP=!1;function lF(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;zP||Xg==null||Xg!==lb(r)||(r=Xg,"selectionStart"in r&&U3(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),C1&&cx(C1,r)||(C1=r,r=mb(VP,"onSelect"),0<r.length&&(e=new L3("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Xg)))}function Xw(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var qg={animationend:Xw("Animation","AnimationEnd"),animationiteration:Xw("Animation","AnimationIteration"),animationstart:Xw("Animation","AnimationStart"),transitionend:Xw("Transition","TransitionEnd")},nM={},u7={};fh&&(u7=document.createElement("div").style,"AnimationEvent"in window||(delete qg.animationend.animation,delete qg.animationiteration.animation,delete qg.animationstart.animation),"TransitionEvent"in window||delete qg.transitionend.transition);function yA(n){if(nM[n])return nM[n];if(!qg[n])return n;var e=qg[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in u7)return nM[n]=e[t];return n}var h7=yA("animationend"),d7=yA("animationiteration"),f7=yA("animationstart"),p7=yA("transitionend"),m7=new Map,cF="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cf(n,e){m7.set(n,e),Im(e,[n])}for(var rM=0;rM<cF.length;rM++){var iM=cF[rM],are=iM.toLowerCase(),lre=iM[0].toUpperCase()+iM.slice(1);Cf(are,"on"+lre)}Cf(h7,"onAnimationEnd");Cf(d7,"onAnimationIteration");Cf(f7,"onAnimationStart");Cf("dblclick","onDoubleClick");Cf("focusin","onFocus");Cf("focusout","onBlur");Cf(p7,"onTransitionEnd");ev("onMouseEnter",["mouseout","mouseover"]);ev("onMouseLeave",["mouseout","mouseover"]);ev("onPointerEnter",["pointerout","pointerover"]);ev("onPointerLeave",["pointerout","pointerover"]);Im("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Im("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Im("onBeforeInput",["compositionend","keypress","textInput","paste"]);Im("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Im("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Im("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var i1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cre=new Set("cancel close invalid load scroll toggle".split(" ").concat(i1));function uF(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,ane(r,e,void 0,n),n.currentTarget=null}function g7(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;uF(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;uF(i,a,c),s=l}}}if(ub)throw n=FP,ub=!1,FP=null,n}function Kr(n,e){var t=e[XP];t===void 0&&(t=e[XP]=new Set);var r=n+"__bubble";t.has(r)||(v7(e,n,2,!1),t.add(r))}function sM(n,e,t){var r=0;e&&(r|=4),v7(t,n,r,e)}var qw="_reactListening"+Math.random().toString(36).slice(2);function ux(n){if(!n[qw]){n[qw]=!0,b9.forEach(function(t){t!=="selectionchange"&&(cre.has(t)||sM(t,!1,n),sM(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[qw]||(e[qw]=!0,sM("selectionchange",!1,e))}}function v7(n,e,t,r){switch(e7(e)){case 1:var i=Ene;break;case 4:i=bne;break;default:i=k3}t=i.bind(null,e,t,n),i=void 0,!LP||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function oM(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Np(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}j9(function(){var c=s,u=P3(t),h=[];e:{var f=m7.get(n);if(f!==void 0){var p=L3,v=n;switch(n){case"keypress":if(bE(t)===0)break e;case"keydown":case"keyup":p=Une;break;case"focusin":v="focus",p=JC;break;case"focusout":v="blur",p=JC;break;case"beforeblur":case"afterblur":p=JC;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=QL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Cne;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=zne;break;case h7:case d7:case f7:p=Pne;break;case p7:p=Wne;break;case"scroll":p=Ane;break;case"wheel":p=$ne;break;case"copy":case"cut":case"paste":p=Nne;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=eF}var _=(e&4)!==0,S=!_&&n==="scroll",x=_?f!==null?f+"Capture":null:f;_=[];for(var E=c,b;E!==null;){b=E;var M=b.stateNode;if(b.tag===5&&M!==null&&(b=M,x!==null&&(M=ix(E,x),M!=null&&_.push(hx(E,M,b)))),S)break;E=E.return}0<_.length&&(f=new p(f,v,null,t,u),h.push({event:f,listeners:_}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&t!==kP&&(v=t.relatedTarget||t.fromElement)&&(Np(v)||v[ph]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(v=t.relatedTarget||t.toElement,p=c,v=v?Np(v):null,v!==null&&(S=Pm(v),v!==S||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=c),p!==v)){if(_=QL,M="onMouseLeave",x="onMouseEnter",E="mouse",(n==="pointerout"||n==="pointerover")&&(_=eF,M="onPointerLeave",x="onPointerEnter",E="pointer"),S=p==null?f:Yg(p),b=v==null?f:Yg(v),f=new _(M,E+"leave",p,t,u),f.target=S,f.relatedTarget=b,M=null,Np(u)===c&&(_=new _(x,E+"enter",v,t,u),_.target=b,_.relatedTarget=S,M=_),S=M,p&&v)t:{for(_=p,x=v,E=0,b=_;b;b=ig(b))E++;for(b=0,M=x;M;M=ig(M))b++;for(;0<E-b;)_=ig(_),E--;for(;0<b-E;)x=ig(x),b--;for(;E--;){if(_===x||x!==null&&_===x.alternate)break t;_=ig(_),x=ig(x)}_=null}else _=null;p!==null&&hF(h,f,p,_,!1),v!==null&&S!==null&&hF(h,S,v,_,!0)}}e:{if(f=c?Yg(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=Jne;else if(rF(f))if(o7)k=rre;else{k=tre;var B=ere}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=nre);if(k&&(k=k(n,c))){s7(h,k,t,u);break e}B&&B(n,f,c),n==="focusout"&&(B=f._wrapperState)&&B.controlled&&f.type==="number"&&IP(f,"number",f.value)}switch(B=c?Yg(c):window,n){case"focusin":(rF(B)||B.contentEditable==="true")&&(Xg=B,VP=c,C1=null);break;case"focusout":C1=VP=Xg=null;break;case"mousedown":zP=!0;break;case"contextmenu":case"mouseup":case"dragend":zP=!1,lF(h,t,u);break;case"selectionchange":if(ore)break;case"keydown":case"keyup":lF(h,t,u)}var P;if(B3)e:{switch(n){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else $g?r7(n,t)&&(N="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(N="onCompositionStart");N&&(n7&&t.locale!=="ko"&&($g||N!=="onCompositionStart"?N==="onCompositionEnd"&&$g&&(P=t7()):(jd=u,O3="value"in jd?jd.value:jd.textContent,$g=!0)),B=mb(c,N),0<B.length&&(N=new JL(N,n,null,t,u),h.push({event:N,listeners:B}),P?N.data=P:(P=i7(t),P!==null&&(N.data=P)))),(P=qne?Yne(n,t):Kne(n,t))&&(c=mb(c,"onBeforeInput"),0<c.length&&(u=new JL("onBeforeInput","beforeinput",null,t,u),h.push({event:u,listeners:c}),u.data=P))}g7(h,e)})}function hx(n,e,t){return{instance:n,listener:e,currentTarget:t}}function mb(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ix(n,t),s!=null&&r.unshift(hx(n,s,i)),s=ix(n,e),s!=null&&r.push(hx(n,s,i))),n=n.return}return r}function ig(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function hF(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=ix(t,s),l!=null&&o.unshift(hx(t,l,a))):i||(l=ix(t,s),l!=null&&o.push(hx(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var ure=/\r\n?/g,hre=/\u0000|\uFFFD/g;function dF(n){return(typeof n=="string"?n:""+n).replace(ure,`
`).replace(hre,"")}function Yw(n,e,t){if(e=dF(e),dF(n)!==e&&t)throw Error(dt(425))}function gb(){}var HP=null,WP=null;function GP(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $P=typeof setTimeout=="function"?setTimeout:void 0,dre=typeof clearTimeout=="function"?clearTimeout:void 0,fF=typeof Promise=="function"?Promise:void 0,fre=typeof queueMicrotask=="function"?queueMicrotask:typeof fF<"u"?function(n){return fF.resolve(null).then(n).catch(pre)}:$P;function pre(n){setTimeout(function(){throw n})}function aM(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),ax(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);ax(e)}function qd(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function pF(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ov=Math.random().toString(36).slice(2),Xc="__reactFiber$"+Ov,dx="__reactProps$"+Ov,ph="__reactContainer$"+Ov,XP="__reactEvents$"+Ov,mre="__reactListeners$"+Ov,gre="__reactHandles$"+Ov;function Np(n){var e=n[Xc];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ph]||t[Xc]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=pF(n);n!==null;){if(t=n[Xc])return t;n=pF(n)}return e}n=t,t=n.parentNode}return null}function p_(n){return n=n[Xc]||n[ph],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Yg(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(dt(33))}function xA(n){return n[dx]||null}var qP=[],Kg=-1;function Mf(n){return{current:n}}function ei(n){0>Kg||(n.current=qP[Kg],qP[Kg]=null,Kg--)}function Hr(n,e){Kg++,qP[Kg]=n.current,n.current=e}var df={},Eo=Mf(df),Ea=Mf(!1),am=df;function tv(n,e){var t=n.type.contextTypes;if(!t)return df;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function ba(n){return n=n.childContextTypes,n!=null}function vb(){ei(Ea),ei(Eo)}function mF(n,e,t){if(Eo.current!==df)throw Error(dt(168));Hr(Eo,e),Hr(Ea,t)}function y7(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(dt(108,ene(n)||"Unknown",i));return xi({},t,r)}function yb(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||df,am=Eo.current,Hr(Eo,n),Hr(Ea,Ea.current),!0}function gF(n,e,t){var r=n.stateNode;if(!r)throw Error(dt(169));t?(n=y7(n,e,am),r.__reactInternalMemoizedMergedChildContext=n,ei(Ea),ei(Eo),Hr(Eo,n)):ei(Ea),Hr(Ea,t)}var Qu=null,_A=!1,lM=!1;function x7(n){Qu===null?Qu=[n]:Qu.push(n)}function vre(n){_A=!0,x7(n)}function If(){if(!lM&&Qu!==null){lM=!0;var n=0,e=Cr;try{var t=Qu;for(Cr=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Qu=null,_A=!1}catch(i){throw Qu!==null&&(Qu=Qu.slice(n+1)),W9(R3,If),i}finally{Cr=e,lM=!1}}return null}var Zg=[],Qg=0,xb=null,_b=0,vl=[],yl=0,lm=null,rh=1,ih="";function yp(n,e){Zg[Qg++]=_b,Zg[Qg++]=xb,xb=n,_b=e}function _7(n,e,t){vl[yl++]=rh,vl[yl++]=ih,vl[yl++]=lm,lm=n;var r=rh;n=ih;var i=32-uc(r)-1;r&=~(1<<i),t+=1;var s=32-uc(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,rh=1<<32-uc(e)+i|t<<i|r,ih=s+n}else rh=1<<s|t<<i|r,ih=n}function j3(n){n.return!==null&&(yp(n,1),_7(n,1,0))}function V3(n){for(;n===xb;)xb=Zg[--Qg],Zg[Qg]=null,_b=Zg[--Qg],Zg[Qg]=null;for(;n===lm;)lm=vl[--yl],vl[yl]=null,ih=vl[--yl],vl[yl]=null,rh=vl[--yl],vl[yl]=null}var Ha=null,ja=null,oi=!1,tc=null;function w7(n,e){var t=wl(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function vF(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ha=n,ja=qd(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ha=n,ja=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=lm!==null?{id:rh,overflow:ih}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=wl(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ha=n,ja=null,!0):!1;default:return!1}}function YP(n){return(n.mode&1)!==0&&(n.flags&128)===0}function KP(n){if(oi){var e=ja;if(e){var t=e;if(!vF(n,e)){if(YP(n))throw Error(dt(418));e=qd(t.nextSibling);var r=Ha;e&&vF(n,e)?w7(r,t):(n.flags=n.flags&-4097|2,oi=!1,Ha=n)}}else{if(YP(n))throw Error(dt(418));n.flags=n.flags&-4097|2,oi=!1,Ha=n}}}function yF(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ha=n}function Kw(n){if(n!==Ha)return!1;if(!oi)return yF(n),oi=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!GP(n.type,n.memoizedProps)),e&&(e=ja)){if(YP(n))throw S7(),Error(dt(418));for(;e;)w7(n,e),e=qd(e.nextSibling)}if(yF(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(dt(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ja=qd(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ja=null}}else ja=Ha?qd(n.stateNode.nextSibling):null;return!0}function S7(){for(var n=ja;n;)n=qd(n.nextSibling)}function nv(){ja=Ha=null,oi=!1}function z3(n){tc===null?tc=[n]:tc.push(n)}var yre=Ih.ReactCurrentBatchConfig;function Iy(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(dt(309));var r=t.stateNode}if(!r)throw Error(dt(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(dt(284));if(!t._owner)throw Error(dt(290,n))}return n}function Zw(n,e){throw n=Object.prototype.toString.call(e),Error(dt(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function xF(n){var e=n._init;return e(n._payload)}function E7(n){function e(x,E){if(n){var b=x.deletions;b===null?(x.deletions=[E],x.flags|=16):b.push(E)}}function t(x,E){if(!n)return null;for(;E!==null;)e(x,E),E=E.sibling;return null}function r(x,E){for(x=new Map;E!==null;)E.key!==null?x.set(E.key,E):x.set(E.index,E),E=E.sibling;return x}function i(x,E){return x=Qd(x,E),x.index=0,x.sibling=null,x}function s(x,E,b){return x.index=b,n?(b=x.alternate,b!==null?(b=b.index,b<E?(x.flags|=2,E):b):(x.flags|=2,E)):(x.flags|=1048576,E)}function o(x){return n&&x.alternate===null&&(x.flags|=2),x}function a(x,E,b,M){return E===null||E.tag!==6?(E=mM(b,x.mode,M),E.return=x,E):(E=i(E,b),E.return=x,E)}function l(x,E,b,M){var k=b.type;return k===Gg?u(x,E,b.props.children,M,b.key):E!==null&&(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Sd&&xF(k)===E.type)?(M=i(E,b.props),M.ref=Iy(x,E,b),M.return=x,M):(M=RE(b.type,b.key,b.props,null,x.mode,M),M.ref=Iy(x,E,b),M.return=x,M)}function c(x,E,b,M){return E===null||E.tag!==4||E.stateNode.containerInfo!==b.containerInfo||E.stateNode.implementation!==b.implementation?(E=gM(b,x.mode,M),E.return=x,E):(E=i(E,b.children||[]),E.return=x,E)}function u(x,E,b,M,k){return E===null||E.tag!==7?(E=Jp(b,x.mode,M,k),E.return=x,E):(E=i(E,b),E.return=x,E)}function h(x,E,b){if(typeof E=="string"&&E!==""||typeof E=="number")return E=mM(""+E,x.mode,b),E.return=x,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case jw:return b=RE(E.type,E.key,E.props,null,x.mode,b),b.ref=Iy(x,null,E),b.return=x,b;case Wg:return E=gM(E,x.mode,b),E.return=x,E;case Sd:var M=E._init;return h(x,M(E._payload),b)}if(n1(E)||by(E))return E=Jp(E,x.mode,b,null),E.return=x,E;Zw(x,E)}return null}function f(x,E,b,M){var k=E!==null?E.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:a(x,E,""+b,M);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case jw:return b.key===k?l(x,E,b,M):null;case Wg:return b.key===k?c(x,E,b,M):null;case Sd:return k=b._init,f(x,E,k(b._payload),M)}if(n1(b)||by(b))return k!==null?null:u(x,E,b,M,null);Zw(x,b)}return null}function p(x,E,b,M,k){if(typeof M=="string"&&M!==""||typeof M=="number")return x=x.get(b)||null,a(E,x,""+M,k);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case jw:return x=x.get(M.key===null?b:M.key)||null,l(E,x,M,k);case Wg:return x=x.get(M.key===null?b:M.key)||null,c(E,x,M,k);case Sd:var B=M._init;return p(x,E,b,B(M._payload),k)}if(n1(M)||by(M))return x=x.get(b)||null,u(E,x,M,k,null);Zw(E,M)}return null}function v(x,E,b,M){for(var k=null,B=null,P=E,N=E=0,R=null;P!==null&&N<b.length;N++){P.index>N?(R=P,P=null):R=P.sibling;var I=f(x,P,b[N],M);if(I===null){P===null&&(P=R);break}n&&P&&I.alternate===null&&e(x,P),E=s(I,E,N),B===null?k=I:B.sibling=I,B=I,P=R}if(N===b.length)return t(x,P),oi&&yp(x,N),k;if(P===null){for(;N<b.length;N++)P=h(x,b[N],M),P!==null&&(E=s(P,E,N),B===null?k=P:B.sibling=P,B=P);return oi&&yp(x,N),k}for(P=r(x,P);N<b.length;N++)R=p(P,x,N,b[N],M),R!==null&&(n&&R.alternate!==null&&P.delete(R.key===null?N:R.key),E=s(R,E,N),B===null?k=R:B.sibling=R,B=R);return n&&P.forEach(function(U){return e(x,U)}),oi&&yp(x,N),k}function _(x,E,b,M){var k=by(b);if(typeof k!="function")throw Error(dt(150));if(b=k.call(b),b==null)throw Error(dt(151));for(var B=k=null,P=E,N=E=0,R=null,I=b.next();P!==null&&!I.done;N++,I=b.next()){P.index>N?(R=P,P=null):R=P.sibling;var U=f(x,P,I.value,M);if(U===null){P===null&&(P=R);break}n&&P&&U.alternate===null&&e(x,P),E=s(U,E,N),B===null?k=U:B.sibling=U,B=U,P=R}if(I.done)return t(x,P),oi&&yp(x,N),k;if(P===null){for(;!I.done;N++,I=b.next())I=h(x,I.value,M),I!==null&&(E=s(I,E,N),B===null?k=I:B.sibling=I,B=I);return oi&&yp(x,N),k}for(P=r(x,P);!I.done;N++,I=b.next())I=p(P,x,N,I.value,M),I!==null&&(n&&I.alternate!==null&&P.delete(I.key===null?N:I.key),E=s(I,E,N),B===null?k=I:B.sibling=I,B=I);return n&&P.forEach(function(H){return e(x,H)}),oi&&yp(x,N),k}function S(x,E,b,M){if(typeof b=="object"&&b!==null&&b.type===Gg&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case jw:e:{for(var k=b.key,B=E;B!==null;){if(B.key===k){if(k=b.type,k===Gg){if(B.tag===7){t(x,B.sibling),E=i(B,b.props.children),E.return=x,x=E;break e}}else if(B.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Sd&&xF(k)===B.type){t(x,B.sibling),E=i(B,b.props),E.ref=Iy(x,B,b),E.return=x,x=E;break e}t(x,B);break}else e(x,B);B=B.sibling}b.type===Gg?(E=Jp(b.props.children,x.mode,M,b.key),E.return=x,x=E):(M=RE(b.type,b.key,b.props,null,x.mode,M),M.ref=Iy(x,E,b),M.return=x,x=M)}return o(x);case Wg:e:{for(B=b.key;E!==null;){if(E.key===B)if(E.tag===4&&E.stateNode.containerInfo===b.containerInfo&&E.stateNode.implementation===b.implementation){t(x,E.sibling),E=i(E,b.children||[]),E.return=x,x=E;break e}else{t(x,E);break}else e(x,E);E=E.sibling}E=gM(b,x.mode,M),E.return=x,x=E}return o(x);case Sd:return B=b._init,S(x,E,B(b._payload),M)}if(n1(b))return v(x,E,b,M);if(by(b))return _(x,E,b,M);Zw(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,E!==null&&E.tag===6?(t(x,E.sibling),E=i(E,b),E.return=x,x=E):(t(x,E),E=mM(b,x.mode,M),E.return=x,x=E),o(x)):t(x,E)}return S}var rv=E7(!0),b7=E7(!1),wb=Mf(null),Sb=null,Jg=null,H3=null;function W3(){H3=Jg=Sb=null}function G3(n){var e=wb.current;ei(wb),n._currentValue=e}function ZP(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function A0(n,e){Sb=n,H3=Jg=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(wa=!0),n.firstContext=null)}function Ml(n){var e=n._currentValue;if(H3!==n)if(n={context:n,memoizedValue:e,next:null},Jg===null){if(Sb===null)throw Error(dt(308));Jg=n,Sb.dependencies={lanes:0,firstContext:n}}else Jg=Jg.next=n;return e}var Dp=null;function $3(n){Dp===null?Dp=[n]:Dp.push(n)}function A7(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,$3(e)):(t.next=i.next,i.next=t),e.interleaved=t,mh(n,r)}function mh(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ed=!1;function X3(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function T7(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ah(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Yd(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,or&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,mh(n,t)}return i=r.interleaved,i===null?(e.next=e,$3(r)):(e.next=i.next,i.next=e),r.interleaved=e,mh(n,t)}function AE(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,N3(n,t)}}function _F(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Eb(n,e,t,r){var i=n.updateQueue;Ed=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,_=a;switch(f=e,p=t,_.tag){case 1:if(v=_.payload,typeof v=="function"){h=v.call(p,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,f=typeof v=="function"?v.call(p,h,f):v,f==null)break e;h=xi({},h,f);break e;case 2:Ed=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);um|=o,n.lanes=o,n.memoizedState=h}}function wF(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(dt(191,i));i.call(r)}}}var m_={},ru=Mf(m_),fx=Mf(m_),px=Mf(m_);function kp(n){if(n===m_)throw Error(dt(174));return n}function q3(n,e){switch(Hr(px,e),Hr(fx,n),Hr(ru,m_),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:RP(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=RP(e,n)}ei(ru),Hr(ru,e)}function iv(){ei(ru),ei(fx),ei(px)}function C7(n){kp(px.current);var e=kp(ru.current),t=RP(e,n.type);e!==t&&(Hr(fx,n),Hr(ru,t))}function Y3(n){fx.current===n&&(ei(ru),ei(fx))}var pi=Mf(0);function bb(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cM=[];function K3(){for(var n=0;n<cM.length;n++)cM[n]._workInProgressVersionPrimary=null;cM.length=0}var TE=Ih.ReactCurrentDispatcher,uM=Ih.ReactCurrentBatchConfig,cm=0,yi=null,ss=null,bs=null,Ab=!1,M1=!1,mx=0,xre=0;function so(){throw Error(dt(321))}function Z3(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!pc(n[t],e[t]))return!1;return!0}function Q3(n,e,t,r,i,s){if(cm=s,yi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,TE.current=n===null||n.memoizedState===null?Ere:bre,n=t(r,i),M1){s=0;do{if(M1=!1,mx=0,25<=s)throw Error(dt(301));s+=1,bs=ss=null,e.updateQueue=null,TE.current=Are,n=t(r,i)}while(M1)}if(TE.current=Tb,e=ss!==null&&ss.next!==null,cm=0,bs=ss=yi=null,Ab=!1,e)throw Error(dt(300));return n}function J3(){var n=mx!==0;return mx=0,n}function Vc(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bs===null?yi.memoizedState=bs=n:bs=bs.next=n,bs}function Il(){if(ss===null){var n=yi.alternate;n=n!==null?n.memoizedState:null}else n=ss.next;var e=bs===null?yi.memoizedState:bs.next;if(e!==null)bs=e,ss=n;else{if(n===null)throw Error(dt(310));ss=n,n={memoizedState:ss.memoizedState,baseState:ss.baseState,baseQueue:ss.baseQueue,queue:ss.queue,next:null},bs===null?yi.memoizedState=bs=n:bs=bs.next=n}return bs}function gx(n,e){return typeof e=="function"?e(n):e}function hM(n){var e=Il(),t=e.queue;if(t===null)throw Error(dt(311));t.lastRenderedReducer=n;var r=ss,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((cm&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,yi.lanes|=u,um|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,pc(r,e.memoizedState)||(wa=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,yi.lanes|=s,um|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function dM(n){var e=Il(),t=e.queue;if(t===null)throw Error(dt(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);pc(s,e.memoizedState)||(wa=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function M7(){}function I7(n,e){var t=yi,r=Il(),i=e(),s=!pc(r.memoizedState,i);if(s&&(r.memoizedState=i,wa=!0),r=r.queue,eD(N7.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||bs!==null&&bs.memoizedState.tag&1){if(t.flags|=2048,vx(9,R7.bind(null,t,r,i,e),void 0,null),Ts===null)throw Error(dt(349));cm&30||P7(t,e,i)}return i}function P7(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=yi.updateQueue,e===null?(e={lastEffect:null,stores:null},yi.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function R7(n,e,t,r){e.value=t,e.getSnapshot=r,D7(e)&&k7(n)}function N7(n,e,t){return t(function(){D7(e)&&k7(n)})}function D7(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!pc(n,t)}catch{return!0}}function k7(n){var e=mh(n,1);e!==null&&hc(e,n,1,-1)}function SF(n){var e=Vc();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gx,lastRenderedState:n},e.queue=n,n=n.dispatch=Sre.bind(null,yi,n),[e.memoizedState,n]}function vx(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=yi.updateQueue,e===null?(e={lastEffect:null,stores:null},yi.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function O7(){return Il().memoizedState}function CE(n,e,t,r){var i=Vc();yi.flags|=n,i.memoizedState=vx(1|e,t,void 0,r===void 0?null:r)}function wA(n,e,t,r){var i=Il();r=r===void 0?null:r;var s=void 0;if(ss!==null){var o=ss.memoizedState;if(s=o.destroy,r!==null&&Z3(r,o.deps)){i.memoizedState=vx(e,t,s,r);return}}yi.flags|=n,i.memoizedState=vx(1|e,t,s,r)}function EF(n,e){return CE(8390656,8,n,e)}function eD(n,e){return wA(2048,8,n,e)}function L7(n,e){return wA(4,2,n,e)}function F7(n,e){return wA(4,4,n,e)}function B7(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function U7(n,e,t){return t=t!=null?t.concat([n]):null,wA(4,4,B7.bind(null,e,n),t)}function tD(){}function j7(n,e){var t=Il();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Z3(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function V7(n,e){var t=Il();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Z3(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function z7(n,e,t){return cm&21?(pc(t,e)||(t=X9(),yi.lanes|=t,um|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,wa=!0),n.memoizedState=t)}function _re(n,e){var t=Cr;Cr=t!==0&&4>t?t:4,n(!0);var r=uM.transition;uM.transition={};try{n(!1),e()}finally{Cr=t,uM.transition=r}}function H7(){return Il().memoizedState}function wre(n,e,t){var r=Zd(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},W7(n))G7(e,t);else if(t=A7(n,e,t,r),t!==null){var i=qo();hc(t,n,r,i),$7(t,e,r)}}function Sre(n,e,t){var r=Zd(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(W7(n))G7(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,pc(a,o)){var l=e.interleaved;l===null?(i.next=i,$3(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=A7(n,e,i,r),t!==null&&(i=qo(),hc(t,n,r,i),$7(t,e,r))}}function W7(n){var e=n.alternate;return n===yi||e!==null&&e===yi}function G7(n,e){M1=Ab=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function $7(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,N3(n,t)}}var Tb={readContext:Ml,useCallback:so,useContext:so,useEffect:so,useImperativeHandle:so,useInsertionEffect:so,useLayoutEffect:so,useMemo:so,useReducer:so,useRef:so,useState:so,useDebugValue:so,useDeferredValue:so,useTransition:so,useMutableSource:so,useSyncExternalStore:so,useId:so,unstable_isNewReconciler:!1},Ere={readContext:Ml,useCallback:function(n,e){return Vc().memoizedState=[n,e===void 0?null:e],n},useContext:Ml,useEffect:EF,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,CE(4194308,4,B7.bind(null,e,n),t)},useLayoutEffect:function(n,e){return CE(4194308,4,n,e)},useInsertionEffect:function(n,e){return CE(4,2,n,e)},useMemo:function(n,e){var t=Vc();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Vc();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=wre.bind(null,yi,n),[r.memoizedState,n]},useRef:function(n){var e=Vc();return n={current:n},e.memoizedState=n},useState:SF,useDebugValue:tD,useDeferredValue:function(n){return Vc().memoizedState=n},useTransition:function(){var n=SF(!1),e=n[0];return n=_re.bind(null,n[1]),Vc().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=yi,i=Vc();if(oi){if(t===void 0)throw Error(dt(407));t=t()}else{if(t=e(),Ts===null)throw Error(dt(349));cm&30||P7(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,EF(N7.bind(null,r,s,n),[n]),r.flags|=2048,vx(9,R7.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Vc(),e=Ts.identifierPrefix;if(oi){var t=ih,r=rh;t=(r&~(1<<32-uc(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=mx++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=xre++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},bre={readContext:Ml,useCallback:j7,useContext:Ml,useEffect:eD,useImperativeHandle:U7,useInsertionEffect:L7,useLayoutEffect:F7,useMemo:V7,useReducer:hM,useRef:O7,useState:function(){return hM(gx)},useDebugValue:tD,useDeferredValue:function(n){var e=Il();return z7(e,ss.memoizedState,n)},useTransition:function(){var n=hM(gx)[0],e=Il().memoizedState;return[n,e]},useMutableSource:M7,useSyncExternalStore:I7,useId:H7,unstable_isNewReconciler:!1},Are={readContext:Ml,useCallback:j7,useContext:Ml,useEffect:eD,useImperativeHandle:U7,useInsertionEffect:L7,useLayoutEffect:F7,useMemo:V7,useReducer:dM,useRef:O7,useState:function(){return dM(gx)},useDebugValue:tD,useDeferredValue:function(n){var e=Il();return ss===null?e.memoizedState=n:z7(e,ss.memoizedState,n)},useTransition:function(){var n=dM(gx)[0],e=Il().memoizedState;return[n,e]},useMutableSource:M7,useSyncExternalStore:I7,useId:H7,unstable_isNewReconciler:!1};function Yl(n,e){if(n&&n.defaultProps){e=xi({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function QP(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:xi({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var SA={isMounted:function(n){return(n=n._reactInternals)?Pm(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=qo(),i=Zd(n),s=ah(r,i);s.payload=e,t!=null&&(s.callback=t),e=Yd(n,s,i),e!==null&&(hc(e,n,i,r),AE(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=qo(),i=Zd(n),s=ah(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Yd(n,s,i),e!==null&&(hc(e,n,i,r),AE(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=qo(),r=Zd(n),i=ah(t,r);i.tag=2,e!=null&&(i.callback=e),e=Yd(n,i,r),e!==null&&(hc(e,n,r,t),AE(e,n,r))}};function bF(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!cx(t,r)||!cx(i,s):!0}function X7(n,e,t){var r=!1,i=df,s=e.contextType;return typeof s=="object"&&s!==null?s=Ml(s):(i=ba(e)?am:Eo.current,r=e.contextTypes,s=(r=r!=null)?tv(n,i):df),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=SA,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function AF(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&SA.enqueueReplaceState(e,e.state,null)}function JP(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},X3(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ml(s):(s=ba(e)?am:Eo.current,i.context=tv(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(QP(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&SA.enqueueReplaceState(i,i.state,null),Eb(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function sv(n,e){try{var t="",r=e;do t+=Jte(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function fM(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function eR(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Tre=typeof WeakMap=="function"?WeakMap:Map;function q7(n,e,t){t=ah(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Mb||(Mb=!0,uR=r),eR(n,e)},t}function Y7(n,e,t){t=ah(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){eR(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){eR(n,e),typeof r!="function"&&(Kd===null?Kd=new Set([this]):Kd.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function TF(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Tre;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=jre.bind(null,n,e,t),e.then(n,n))}function CF(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function MF(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ah(-1,1),e.tag=2,Yd(t,e,1))),t.lanes|=1),n)}var Cre=Ih.ReactCurrentOwner,wa=!1;function Wo(n,e,t,r){e.child=n===null?b7(e,null,t,r):rv(e,n.child,t,r)}function IF(n,e,t,r,i){t=t.render;var s=e.ref;return A0(e,i),r=Q3(n,e,t,r,s,i),t=J3(),n!==null&&!wa?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,gh(n,e,i)):(oi&&t&&j3(e),e.flags|=1,Wo(n,e,r,i),e.child)}function PF(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!cD(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,K7(n,e,s,r,i)):(n=RE(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:cx,t(o,r)&&n.ref===e.ref)return gh(n,e,i)}return e.flags|=1,n=Qd(s,r),n.ref=e.ref,n.return=e,e.child=n}function K7(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(cx(s,r)&&n.ref===e.ref)if(wa=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(wa=!0);else return e.lanes=n.lanes,gh(n,e,i)}return tR(n,e,t,r,i)}function Z7(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Hr(t0,Ba),Ba|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Hr(t0,Ba),Ba|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Hr(t0,Ba),Ba|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Hr(t0,Ba),Ba|=r;return Wo(n,e,i,t),e.child}function Q7(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function tR(n,e,t,r,i){var s=ba(t)?am:Eo.current;return s=tv(e,s),A0(e,i),t=Q3(n,e,t,r,s,i),r=J3(),n!==null&&!wa?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,gh(n,e,i)):(oi&&r&&j3(e),e.flags|=1,Wo(n,e,t,i),e.child)}function RF(n,e,t,r,i){if(ba(t)){var s=!0;yb(e)}else s=!1;if(A0(e,i),e.stateNode===null)ME(n,e),X7(e,t,r),JP(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Ml(c):(c=ba(t)?am:Eo.current,c=tv(e,c));var u=t.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&AF(e,o,r,c),Ed=!1;var f=e.memoizedState;o.state=f,Eb(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Ea.current||Ed?(typeof u=="function"&&(QP(e,t,u,r),l=e.memoizedState),(a=Ed||bF(e,t,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,T7(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Yl(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Ml(l):(l=ba(t)?am:Eo.current,l=tv(e,l));var p=t.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&AF(e,o,r,l),Ed=!1,f=e.memoizedState,o.state=f,Eb(e,r,o,i);var v=e.memoizedState;a!==h||f!==v||Ea.current||Ed?(typeof p=="function"&&(QP(e,t,p,r),v=e.memoizedState),(c=Ed||bF(e,t,c,r,f,v,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),r=!1)}return nR(n,e,t,r,s,i)}function nR(n,e,t,r,i,s){Q7(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&gF(e,t,!1),gh(n,e,s);r=e.stateNode,Cre.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=rv(e,n.child,null,s),e.child=rv(e,null,a,s)):Wo(n,e,a,s),e.memoizedState=r.state,i&&gF(e,t,!0),e.child}function J7(n){var e=n.stateNode;e.pendingContext?mF(n,e.pendingContext,e.pendingContext!==e.context):e.context&&mF(n,e.context,!1),q3(n,e.containerInfo)}function NF(n,e,t,r,i){return nv(),z3(i),e.flags|=256,Wo(n,e,t,r),e.child}var rR={dehydrated:null,treeContext:null,retryLane:0};function iR(n){return{baseLanes:n,cachePool:null,transitions:null}}function ez(n,e,t){var r=e.pendingProps,i=pi.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Hr(pi,i&1),n===null)return KP(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=AA(o,r,0,null),n=Jp(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=iR(t),e.memoizedState=rR,n):nD(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Mre(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Qd(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Qd(a,s):(s=Jp(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?iR(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=rR,r}return s=n.child,n=s.sibling,r=Qd(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function nD(n,e){return e=AA({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Qw(n,e,t,r){return r!==null&&z3(r),rv(e,n.child,null,t),n=nD(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Mre(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=fM(Error(dt(422))),Qw(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=AA({mode:"visible",children:r.children},i,0,null),s=Jp(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&rv(e,n.child,null,o),e.child.memoizedState=iR(o),e.memoizedState=rR,s);if(!(e.mode&1))return Qw(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(dt(419)),r=fM(s,r,void 0),Qw(n,e,o,r)}if(a=(o&n.childLanes)!==0,wa||a){if(r=Ts,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,mh(n,i),hc(r,n,i,-1))}return lD(),r=fM(Error(dt(421))),Qw(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=Vre.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,ja=qd(i.nextSibling),Ha=e,oi=!0,tc=null,n!==null&&(vl[yl++]=rh,vl[yl++]=ih,vl[yl++]=lm,rh=n.id,ih=n.overflow,lm=e),e=nD(e,r.children),e.flags|=4096,e)}function DF(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),ZP(n.return,e,t)}function pM(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function tz(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Wo(n,e,r.children,t),r=pi.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&DF(n,t,e);else if(n.tag===19)DF(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Hr(pi,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&bb(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),pM(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&bb(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}pM(e,!0,t,null,s);break;case"together":pM(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ME(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function gh(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),um|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(dt(153));if(e.child!==null){for(n=e.child,t=Qd(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Qd(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Ire(n,e,t){switch(e.tag){case 3:J7(e),nv();break;case 5:C7(e);break;case 1:ba(e.type)&&yb(e);break;case 4:q3(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Hr(wb,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Hr(pi,pi.current&1),e.flags|=128,null):t&e.child.childLanes?ez(n,e,t):(Hr(pi,pi.current&1),n=gh(n,e,t),n!==null?n.sibling:null);Hr(pi,pi.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return tz(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Hr(pi,pi.current),r)break;return null;case 22:case 23:return e.lanes=0,Z7(n,e,t)}return gh(n,e,t)}var nz,sR,rz,iz;nz=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};sR=function(){};rz=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,kp(ru.current);var s=null;switch(t){case"input":i=CP(n,i),r=CP(n,r),s=[];break;case"select":i=xi({},i,{value:void 0}),r=xi({},r,{value:void 0}),s=[];break;case"textarea":i=PP(n,i),r=PP(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=gb)}NP(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(nx.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(nx.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Kr("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};iz=function(n,e,t,r){t!==r&&(e.flags|=4)};function Py(n,e){if(!oi)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function oo(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Pre(n,e,t){var r=e.pendingProps;switch(V3(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oo(e),null;case 1:return ba(e.type)&&vb(),oo(e),null;case 3:return r=e.stateNode,iv(),ei(Ea),ei(Eo),K3(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Kw(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tc!==null&&(fR(tc),tc=null))),sR(n,e),oo(e),null;case 5:Y3(e);var i=kp(px.current);if(t=e.type,n!==null&&e.stateNode!=null)rz(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(dt(166));return oo(e),null}if(n=kp(ru.current),Kw(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Xc]=e,r[dx]=s,n=(e.mode&1)!==0,t){case"dialog":Kr("cancel",r),Kr("close",r);break;case"iframe":case"object":case"embed":Kr("load",r);break;case"video":case"audio":for(i=0;i<i1.length;i++)Kr(i1[i],r);break;case"source":Kr("error",r);break;case"img":case"image":case"link":Kr("error",r),Kr("load",r);break;case"details":Kr("toggle",r);break;case"input":zL(r,s),Kr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Kr("invalid",r);break;case"textarea":WL(r,s),Kr("invalid",r)}NP(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Yw(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Yw(r.textContent,a,n),i=["children",""+a]):nx.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Kr("scroll",r)}switch(t){case"input":Vw(r),HL(r,s,!0);break;case"textarea":Vw(r),GL(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=gb)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=N9(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Xc]=e,n[dx]=r,nz(n,e,!1,!1),e.stateNode=n;e:{switch(o=DP(t,r),t){case"dialog":Kr("cancel",n),Kr("close",n),i=r;break;case"iframe":case"object":case"embed":Kr("load",n),i=r;break;case"video":case"audio":for(i=0;i<i1.length;i++)Kr(i1[i],n);i=r;break;case"source":Kr("error",n),i=r;break;case"img":case"image":case"link":Kr("error",n),Kr("load",n),i=r;break;case"details":Kr("toggle",n),i=r;break;case"input":zL(n,r),i=CP(n,r),Kr("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=xi({},r,{value:void 0}),Kr("invalid",n);break;case"textarea":WL(n,r),i=PP(n,r),Kr("invalid",n);break;default:i=r}NP(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?O9(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&D9(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&rx(n,l):typeof l=="number"&&rx(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(nx.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Kr("scroll",n):l!=null&&T3(n,s,l,o))}switch(t){case"input":Vw(n),HL(n,r,!1);break;case"textarea":Vw(n),GL(n);break;case"option":r.value!=null&&n.setAttribute("value",""+hf(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?w0(n,!!r.multiple,s,!1):r.defaultValue!=null&&w0(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=gb)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return oo(e),null;case 6:if(n&&e.stateNode!=null)iz(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(dt(166));if(t=kp(px.current),kp(ru.current),Kw(e)){if(r=e.stateNode,t=e.memoizedProps,r[Xc]=e,(s=r.nodeValue!==t)&&(n=Ha,n!==null))switch(n.tag){case 3:Yw(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Yw(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Xc]=e,e.stateNode=r}return oo(e),null;case 13:if(ei(pi),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(oi&&ja!==null&&e.mode&1&&!(e.flags&128))S7(),nv(),e.flags|=98560,s=!1;else if(s=Kw(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(dt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(dt(317));s[Xc]=e}else nv(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;oo(e),s=!1}else tc!==null&&(fR(tc),tc=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||pi.current&1?cs===0&&(cs=3):lD())),e.updateQueue!==null&&(e.flags|=4),oo(e),null);case 4:return iv(),sR(n,e),n===null&&ux(e.stateNode.containerInfo),oo(e),null;case 10:return G3(e.type._context),oo(e),null;case 17:return ba(e.type)&&vb(),oo(e),null;case 19:if(ei(pi),s=e.memoizedState,s===null)return oo(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Py(s,!1);else{if(cs!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=bb(n),o!==null){for(e.flags|=128,Py(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Hr(pi,pi.current&1|2),e.child}n=n.sibling}s.tail!==null&&Fi()>ov&&(e.flags|=128,r=!0,Py(s,!1),e.lanes=4194304)}else{if(!r)if(n=bb(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Py(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!oi)return oo(e),null}else 2*Fi()-s.renderingStartTime>ov&&t!==1073741824&&(e.flags|=128,r=!0,Py(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Fi(),e.sibling=null,t=pi.current,Hr(pi,r?t&1|2:t&1),e):(oo(e),null);case 22:case 23:return aD(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ba&1073741824&&(oo(e),e.subtreeFlags&6&&(e.flags|=8192)):oo(e),null;case 24:return null;case 25:return null}throw Error(dt(156,e.tag))}function Rre(n,e){switch(V3(e),e.tag){case 1:return ba(e.type)&&vb(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return iv(),ei(Ea),ei(Eo),K3(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Y3(e),null;case 13:if(ei(pi),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(dt(340));nv()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ei(pi),null;case 4:return iv(),null;case 10:return G3(e.type._context),null;case 22:case 23:return aD(),null;case 24:return null;default:return null}}var Jw=!1,go=!1,Nre=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function e0(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Ii(n,e,r)}else t.current=null}function oR(n,e,t){try{t()}catch(r){Ii(n,e,r)}}var kF=!1;function Dre(n,e){if(HP=fb,n=c7(),U3(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=n,f=null;t:for(;;){for(var p;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===n)break t;if(f===t&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(WP={focusedElem:n,selectionRange:t},fb=!1,Ft=e;Ft!==null;)if(e=Ft,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Ft=n;else for(;Ft!==null;){e=Ft;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,S=v.memoizedState,x=e.stateNode,E=x.getSnapshotBeforeUpdate(e.elementType===e.type?_:Yl(e.type,_),S);x.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(dt(163))}}catch(M){Ii(e,e.return,M)}if(n=e.sibling,n!==null){n.return=e.return,Ft=n;break}Ft=e.return}return v=kF,kF=!1,v}function I1(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&oR(e,t,s)}i=i.next}while(i!==r)}}function EA(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function aR(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function sz(n){var e=n.alternate;e!==null&&(n.alternate=null,sz(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Xc],delete e[dx],delete e[XP],delete e[mre],delete e[gre])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function oz(n){return n.tag===5||n.tag===3||n.tag===4}function OF(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||oz(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function lR(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=gb));else if(r!==4&&(n=n.child,n!==null))for(lR(n,e,t),n=n.sibling;n!==null;)lR(n,e,t),n=n.sibling}function cR(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(cR(n,e,t),n=n.sibling;n!==null;)cR(n,e,t),n=n.sibling}var Os=null,ec=!1;function id(n,e,t){for(t=t.child;t!==null;)az(n,e,t),t=t.sibling}function az(n,e,t){if(nu&&typeof nu.onCommitFiberUnmount=="function")try{nu.onCommitFiberUnmount(mA,t)}catch{}switch(t.tag){case 5:go||e0(t,e);case 6:var r=Os,i=ec;Os=null,id(n,e,t),Os=r,ec=i,Os!==null&&(ec?(n=Os,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Os.removeChild(t.stateNode));break;case 18:Os!==null&&(ec?(n=Os,t=t.stateNode,n.nodeType===8?aM(n.parentNode,t):n.nodeType===1&&aM(n,t),ax(n)):aM(Os,t.stateNode));break;case 4:r=Os,i=ec,Os=t.stateNode.containerInfo,ec=!0,id(n,e,t),Os=r,ec=i;break;case 0:case 11:case 14:case 15:if(!go&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&oR(t,e,o),i=i.next}while(i!==r)}id(n,e,t);break;case 1:if(!go&&(e0(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Ii(t,e,a)}id(n,e,t);break;case 21:id(n,e,t);break;case 22:t.mode&1?(go=(r=go)||t.memoizedState!==null,id(n,e,t),go=r):id(n,e,t);break;default:id(n,e,t)}}function LF(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Nre),e.forEach(function(r){var i=zre.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function zl(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Os=a.stateNode,ec=!1;break e;case 3:Os=a.stateNode.containerInfo,ec=!0;break e;case 4:Os=a.stateNode.containerInfo,ec=!0;break e}a=a.return}if(Os===null)throw Error(dt(160));az(s,o,i),Os=null,ec=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ii(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)lz(e,n),e=e.sibling}function lz(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(zl(e,n),Bc(n),r&4){try{I1(3,n,n.return),EA(3,n)}catch(_){Ii(n,n.return,_)}try{I1(5,n,n.return)}catch(_){Ii(n,n.return,_)}}break;case 1:zl(e,n),Bc(n),r&512&&t!==null&&e0(t,t.return);break;case 5:if(zl(e,n),Bc(n),r&512&&t!==null&&e0(t,t.return),n.flags&32){var i=n.stateNode;try{rx(i,"")}catch(_){Ii(n,n.return,_)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&P9(i,s),DP(a,o);var c=DP(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?O9(i,h):u==="dangerouslySetInnerHTML"?D9(i,h):u==="children"?rx(i,h):T3(i,u,h,c)}switch(a){case"input":MP(i,s);break;case"textarea":R9(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?w0(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?w0(i,!!s.multiple,s.defaultValue,!0):w0(i,!!s.multiple,s.multiple?[]:"",!1))}i[dx]=s}catch(_){Ii(n,n.return,_)}}break;case 6:if(zl(e,n),Bc(n),r&4){if(n.stateNode===null)throw Error(dt(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(_){Ii(n,n.return,_)}}break;case 3:if(zl(e,n),Bc(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{ax(e.containerInfo)}catch(_){Ii(n,n.return,_)}break;case 4:zl(e,n),Bc(n);break;case 13:zl(e,n),Bc(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(sD=Fi())),r&4&&LF(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(go=(c=go)||u,zl(e,n),go=c):zl(e,n),Bc(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(Ft=n,u=n.child;u!==null;){for(h=Ft=u;Ft!==null;){switch(f=Ft,p=f.child,f.tag){case 0:case 11:case 14:case 15:I1(4,f,f.return);break;case 1:e0(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,t=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(_){Ii(r,t,_)}}break;case 5:e0(f,f.return);break;case 22:if(f.memoizedState!==null){BF(h);continue}}p!==null?(p.return=f,Ft=p):BF(h)}u=u.sibling}e:for(u=null,h=n;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=k9("display",o))}catch(_){Ii(n,n.return,_)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(_){Ii(n,n.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:zl(e,n),Bc(n),r&4&&LF(n);break;case 21:break;default:zl(e,n),Bc(n)}}function Bc(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(oz(t)){var r=t;break e}t=t.return}throw Error(dt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(rx(i,""),r.flags&=-33);var s=OF(n);cR(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=OF(n);lR(n,a,o);break;default:throw Error(dt(161))}}catch(l){Ii(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function kre(n,e,t){Ft=n,cz(n)}function cz(n,e,t){for(var r=(n.mode&1)!==0;Ft!==null;){var i=Ft,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Jw;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||go;a=Jw;var c=go;if(Jw=o,(go=l)&&!c)for(Ft=i;Ft!==null;)o=Ft,l=o.child,o.tag===22&&o.memoizedState!==null?UF(i):l!==null?(l.return=o,Ft=l):UF(i);for(;s!==null;)Ft=s,cz(s),s=s.sibling;Ft=i,Jw=a,go=c}FF(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ft=s):FF(n)}}function FF(n){for(;Ft!==null;){var e=Ft;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:go||EA(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!go)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Yl(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&wF(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}wF(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&ax(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(dt(163))}go||e.flags&512&&aR(e)}catch(f){Ii(e,e.return,f)}}if(e===n){Ft=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ft=t;break}Ft=e.return}}function BF(n){for(;Ft!==null;){var e=Ft;if(e===n){Ft=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ft=t;break}Ft=e.return}}function UF(n){for(;Ft!==null;){var e=Ft;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{EA(4,e)}catch(l){Ii(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ii(e,i,l)}}var s=e.return;try{aR(e)}catch(l){Ii(e,s,l)}break;case 5:var o=e.return;try{aR(e)}catch(l){Ii(e,o,l)}}}catch(l){Ii(e,e.return,l)}if(e===n){Ft=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ft=a;break}Ft=e.return}}var Ore=Math.ceil,Cb=Ih.ReactCurrentDispatcher,rD=Ih.ReactCurrentOwner,bl=Ih.ReactCurrentBatchConfig,or=0,Ts=null,Gi=null,Vs=0,Ba=0,t0=Mf(0),cs=0,yx=null,um=0,bA=0,iD=0,P1=null,ya=null,sD=0,ov=1/0,Zu=null,Mb=!1,uR=null,Kd=null,eS=!1,Vd=null,Ib=0,R1=0,hR=null,IE=-1,PE=0;function qo(){return or&6?Fi():IE!==-1?IE:IE=Fi()}function Zd(n){return n.mode&1?or&2&&Vs!==0?Vs&-Vs:yre.transition!==null?(PE===0&&(PE=X9()),PE):(n=Cr,n!==0||(n=window.event,n=n===void 0?16:e7(n.type)),n):1}function hc(n,e,t,r){if(50<R1)throw R1=0,hR=null,Error(dt(185));d_(n,t,r),(!(or&2)||n!==Ts)&&(n===Ts&&(!(or&2)&&(bA|=t),cs===4&&Td(n,Vs)),Aa(n,r),t===1&&or===0&&!(e.mode&1)&&(ov=Fi()+500,_A&&If()))}function Aa(n,e){var t=n.callbackNode;yne(n,e);var r=db(n,n===Ts?Vs:0);if(r===0)t!==null&&qL(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&qL(t),e===1)n.tag===0?vre(jF.bind(null,n)):x7(jF.bind(null,n)),fre(function(){!(or&6)&&If()}),t=null;else{switch(q9(r)){case 1:t=R3;break;case 4:t=G9;break;case 16:t=hb;break;case 536870912:t=$9;break;default:t=hb}t=vz(t,uz.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function uz(n,e){if(IE=-1,PE=0,or&6)throw Error(dt(327));var t=n.callbackNode;if(T0()&&n.callbackNode!==t)return null;var r=db(n,n===Ts?Vs:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Pb(n,r);else{e=r;var i=or;or|=2;var s=dz();(Ts!==n||Vs!==e)&&(Zu=null,ov=Fi()+500,Qp(n,e));do try{Bre();break}catch(a){hz(n,a)}while(!0);W3(),Cb.current=s,or=i,Gi!==null?e=0:(Ts=null,Vs=0,e=cs)}if(e!==0){if(e===2&&(i=BP(n),i!==0&&(r=i,e=dR(n,i))),e===1)throw t=yx,Qp(n,0),Td(n,r),Aa(n,Fi()),t;if(e===6)Td(n,r);else{if(i=n.current.alternate,!(r&30)&&!Lre(i)&&(e=Pb(n,r),e===2&&(s=BP(n),s!==0&&(r=s,e=dR(n,s))),e===1))throw t=yx,Qp(n,0),Td(n,r),Aa(n,Fi()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(dt(345));case 2:xp(n,ya,Zu);break;case 3:if(Td(n,r),(r&130023424)===r&&(e=sD+500-Fi(),10<e)){if(db(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){qo(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=$P(xp.bind(null,n,ya,Zu),e);break}xp(n,ya,Zu);break;case 4:if(Td(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-uc(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Fi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ore(r/1960))-r,10<r){n.timeoutHandle=$P(xp.bind(null,n,ya,Zu),r);break}xp(n,ya,Zu);break;case 5:xp(n,ya,Zu);break;default:throw Error(dt(329))}}}return Aa(n,Fi()),n.callbackNode===t?uz.bind(null,n):null}function dR(n,e){var t=P1;return n.current.memoizedState.isDehydrated&&(Qp(n,e).flags|=256),n=Pb(n,e),n!==2&&(e=ya,ya=t,e!==null&&fR(e)),n}function fR(n){ya===null?ya=n:ya.push.apply(ya,n)}function Lre(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!pc(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Td(n,e){for(e&=~iD,e&=~bA,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-uc(e),r=1<<t;n[t]=-1,e&=~r}}function jF(n){if(or&6)throw Error(dt(327));T0();var e=db(n,0);if(!(e&1))return Aa(n,Fi()),null;var t=Pb(n,e);if(n.tag!==0&&t===2){var r=BP(n);r!==0&&(e=r,t=dR(n,r))}if(t===1)throw t=yx,Qp(n,0),Td(n,e),Aa(n,Fi()),t;if(t===6)throw Error(dt(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,xp(n,ya,Zu),Aa(n,Fi()),null}function oD(n,e){var t=or;or|=1;try{return n(e)}finally{or=t,or===0&&(ov=Fi()+500,_A&&If())}}function hm(n){Vd!==null&&Vd.tag===0&&!(or&6)&&T0();var e=or;or|=1;var t=bl.transition,r=Cr;try{if(bl.transition=null,Cr=1,n)return n()}finally{Cr=r,bl.transition=t,or=e,!(or&6)&&If()}}function aD(){Ba=t0.current,ei(t0)}function Qp(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,dre(t)),Gi!==null)for(t=Gi.return;t!==null;){var r=t;switch(V3(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vb();break;case 3:iv(),ei(Ea),ei(Eo),K3();break;case 5:Y3(r);break;case 4:iv();break;case 13:ei(pi);break;case 19:ei(pi);break;case 10:G3(r.type._context);break;case 22:case 23:aD()}t=t.return}if(Ts=n,Gi=n=Qd(n.current,null),Vs=Ba=e,cs=0,yx=null,iD=bA=um=0,ya=P1=null,Dp!==null){for(e=0;e<Dp.length;e++)if(t=Dp[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Dp=null}return n}function hz(n,e){do{var t=Gi;try{if(W3(),TE.current=Tb,Ab){for(var r=yi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ab=!1}if(cm=0,bs=ss=yi=null,M1=!1,mx=0,rD.current=null,t===null||t.return===null){cs=1,yx=e,Gi=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Vs,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=CF(o);if(p!==null){p.flags&=-257,MF(p,o,a,s,e),p.mode&1&&TF(s,c,e),e=p,l=c;var v=e.updateQueue;if(v===null){var _=new Set;_.add(l),e.updateQueue=_}else v.add(l);break e}else{if(!(e&1)){TF(s,c,e),lD();break e}l=Error(dt(426))}}else if(oi&&a.mode&1){var S=CF(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),MF(S,o,a,s,e),z3(sv(l,a));break e}}s=l=sv(l,a),cs!==4&&(cs=2),P1===null?P1=[s]:P1.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=q7(s,l,e);_F(s,x);break e;case 1:a=l;var E=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Kd===null||!Kd.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=Y7(s,a,e);_F(s,M);break e}}s=s.return}while(s!==null)}pz(t)}catch(k){e=k,Gi===t&&t!==null&&(Gi=t=t.return);continue}break}while(!0)}function dz(){var n=Cb.current;return Cb.current=Tb,n===null?Tb:n}function lD(){(cs===0||cs===3||cs===2)&&(cs=4),Ts===null||!(um&268435455)&&!(bA&268435455)||Td(Ts,Vs)}function Pb(n,e){var t=or;or|=2;var r=dz();(Ts!==n||Vs!==e)&&(Zu=null,Qp(n,e));do try{Fre();break}catch(i){hz(n,i)}while(!0);if(W3(),or=t,Cb.current=r,Gi!==null)throw Error(dt(261));return Ts=null,Vs=0,cs}function Fre(){for(;Gi!==null;)fz(Gi)}function Bre(){for(;Gi!==null&&!cne();)fz(Gi)}function fz(n){var e=gz(n.alternate,n,Ba);n.memoizedProps=n.pendingProps,e===null?pz(n):Gi=e,rD.current=null}function pz(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Rre(t,e),t!==null){t.flags&=32767,Gi=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{cs=6,Gi=null;return}}else if(t=Pre(t,e,Ba),t!==null){Gi=t;return}if(e=e.sibling,e!==null){Gi=e;return}Gi=e=n}while(e!==null);cs===0&&(cs=5)}function xp(n,e,t){var r=Cr,i=bl.transition;try{bl.transition=null,Cr=1,Ure(n,e,t,r)}finally{bl.transition=i,Cr=r}return null}function Ure(n,e,t,r){do T0();while(Vd!==null);if(or&6)throw Error(dt(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(dt(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(xne(n,s),n===Ts&&(Gi=Ts=null,Vs=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||eS||(eS=!0,vz(hb,function(){return T0(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=bl.transition,bl.transition=null;var o=Cr;Cr=1;var a=or;or|=4,rD.current=null,Dre(n,t),lz(t,n),sre(WP),fb=!!HP,WP=HP=null,n.current=t,kre(t),une(),or=a,Cr=o,bl.transition=s}else n.current=t;if(eS&&(eS=!1,Vd=n,Ib=i),s=n.pendingLanes,s===0&&(Kd=null),fne(t.stateNode),Aa(n,Fi()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Mb)throw Mb=!1,n=uR,uR=null,n;return Ib&1&&n.tag!==0&&T0(),s=n.pendingLanes,s&1?n===hR?R1++:(R1=0,hR=n):R1=0,If(),null}function T0(){if(Vd!==null){var n=q9(Ib),e=bl.transition,t=Cr;try{if(bl.transition=null,Cr=16>n?16:n,Vd===null)var r=!1;else{if(n=Vd,Vd=null,Ib=0,or&6)throw Error(dt(331));var i=or;for(or|=4,Ft=n.current;Ft!==null;){var s=Ft,o=s.child;if(Ft.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ft=c;Ft!==null;){var u=Ft;switch(u.tag){case 0:case 11:case 15:I1(8,u,s)}var h=u.child;if(h!==null)h.return=u,Ft=h;else for(;Ft!==null;){u=Ft;var f=u.sibling,p=u.return;if(sz(u),u===c){Ft=null;break}if(f!==null){f.return=p,Ft=f;break}Ft=p}}}var v=s.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var S=_.sibling;_.sibling=null,_=S}while(_!==null)}}Ft=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ft=o;else e:for(;Ft!==null;){if(s=Ft,s.flags&2048)switch(s.tag){case 0:case 11:case 15:I1(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Ft=x;break e}Ft=s.return}}var E=n.current;for(Ft=E;Ft!==null;){o=Ft;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Ft=b;else e:for(o=E;Ft!==null;){if(a=Ft,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:EA(9,a)}}catch(k){Ii(a,a.return,k)}if(a===o){Ft=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,Ft=M;break e}Ft=a.return}}if(or=i,If(),nu&&typeof nu.onPostCommitFiberRoot=="function")try{nu.onPostCommitFiberRoot(mA,n)}catch{}r=!0}return r}finally{Cr=t,bl.transition=e}}return!1}function VF(n,e,t){e=sv(t,e),e=q7(n,e,1),n=Yd(n,e,1),e=qo(),n!==null&&(d_(n,1,e),Aa(n,e))}function Ii(n,e,t){if(n.tag===3)VF(n,n,t);else for(;e!==null;){if(e.tag===3){VF(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Kd===null||!Kd.has(r))){n=sv(t,n),n=Y7(e,n,1),e=Yd(e,n,1),n=qo(),e!==null&&(d_(e,1,n),Aa(e,n));break}}e=e.return}}function jre(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=qo(),n.pingedLanes|=n.suspendedLanes&t,Ts===n&&(Vs&t)===t&&(cs===4||cs===3&&(Vs&130023424)===Vs&&500>Fi()-sD?Qp(n,0):iD|=t),Aa(n,e)}function mz(n,e){e===0&&(n.mode&1?(e=Ww,Ww<<=1,!(Ww&130023424)&&(Ww=4194304)):e=1);var t=qo();n=mh(n,e),n!==null&&(d_(n,e,t),Aa(n,t))}function Vre(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),mz(n,t)}function zre(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(dt(314))}r!==null&&r.delete(e),mz(n,t)}var gz;gz=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ea.current)wa=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return wa=!1,Ire(n,e,t);wa=!!(n.flags&131072)}else wa=!1,oi&&e.flags&1048576&&_7(e,_b,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ME(n,e),n=e.pendingProps;var i=tv(e,Eo.current);A0(e,t),i=Q3(null,e,r,n,i,t);var s=J3();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ba(r)?(s=!0,yb(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,X3(e),i.updater=SA,e.stateNode=i,i._reactInternals=e,JP(e,r,n,t),e=nR(null,e,r,!0,s,t)):(e.tag=0,oi&&s&&j3(e),Wo(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(ME(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Wre(r),n=Yl(r,n),i){case 0:e=tR(null,e,r,n,t);break e;case 1:e=RF(null,e,r,n,t);break e;case 11:e=IF(null,e,r,n,t);break e;case 14:e=PF(null,e,r,Yl(r.type,n),t);break e}throw Error(dt(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yl(r,i),tR(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yl(r,i),RF(n,e,r,i,t);case 3:e:{if(J7(e),n===null)throw Error(dt(387));r=e.pendingProps,s=e.memoizedState,i=s.element,T7(n,e),Eb(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=sv(Error(dt(423)),e),e=NF(n,e,r,t,i);break e}else if(r!==i){i=sv(Error(dt(424)),e),e=NF(n,e,r,t,i);break e}else for(ja=qd(e.stateNode.containerInfo.firstChild),Ha=e,oi=!0,tc=null,t=b7(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(nv(),r===i){e=gh(n,e,t);break e}Wo(n,e,r,t)}e=e.child}return e;case 5:return C7(e),n===null&&KP(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,GP(r,i)?o=null:s!==null&&GP(r,s)&&(e.flags|=32),Q7(n,e),Wo(n,e,o,t),e.child;case 6:return n===null&&KP(e),null;case 13:return ez(n,e,t);case 4:return q3(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=rv(e,null,r,t):Wo(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yl(r,i),IF(n,e,r,i,t);case 7:return Wo(n,e,e.pendingProps,t),e.child;case 8:return Wo(n,e,e.pendingProps.children,t),e.child;case 12:return Wo(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Hr(wb,r._currentValue),r._currentValue=o,s!==null)if(pc(s.value,o)){if(s.children===i.children&&!Ea.current){e=gh(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ah(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),ZP(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(dt(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),ZP(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Wo(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,A0(e,t),i=Ml(i),r=r(i),e.flags|=1,Wo(n,e,r,t),e.child;case 14:return r=e.type,i=Yl(r,e.pendingProps),i=Yl(r.type,i),PF(n,e,r,i,t);case 15:return K7(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yl(r,i),ME(n,e),e.tag=1,ba(r)?(n=!0,yb(e)):n=!1,A0(e,t),X7(e,r,i),JP(e,r,i,t),nR(null,e,r,!0,n,t);case 19:return tz(n,e,t);case 22:return Z7(n,e,t)}throw Error(dt(156,e.tag))};function vz(n,e){return W9(n,e)}function Hre(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wl(n,e,t,r){return new Hre(n,e,t,r)}function cD(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Wre(n){if(typeof n=="function")return cD(n)?1:0;if(n!=null){if(n=n.$$typeof,n===M3)return 11;if(n===I3)return 14}return 2}function Qd(n,e){var t=n.alternate;return t===null?(t=wl(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function RE(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")cD(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Gg:return Jp(t.children,i,s,e);case C3:o=8,i|=8;break;case EP:return n=wl(12,t,e,i|2),n.elementType=EP,n.lanes=s,n;case bP:return n=wl(13,t,e,i),n.elementType=bP,n.lanes=s,n;case AP:return n=wl(19,t,e,i),n.elementType=AP,n.lanes=s,n;case C9:return AA(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case A9:o=10;break e;case T9:o=9;break e;case M3:o=11;break e;case I3:o=14;break e;case Sd:o=16,r=null;break e}throw Error(dt(130,n==null?n:typeof n,""))}return e=wl(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Jp(n,e,t,r){return n=wl(7,n,r,e),n.lanes=t,n}function AA(n,e,t,r){return n=wl(22,n,r,e),n.elementType=C9,n.lanes=t,n.stateNode={isHidden:!1},n}function mM(n,e,t){return n=wl(6,n,null,e),n.lanes=t,n}function gM(n,e,t){return e=wl(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Gre(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=KC(0),this.expirationTimes=KC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=KC(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function uD(n,e,t,r,i,s,o,a,l){return n=new Gre(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=wl(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},X3(s),n}function $re(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wg,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function yz(n){if(!n)return df;n=n._reactInternals;e:{if(Pm(n)!==n||n.tag!==1)throw Error(dt(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ba(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(dt(171))}if(n.tag===1){var t=n.type;if(ba(t))return y7(n,t,e)}return e}function xz(n,e,t,r,i,s,o,a,l){return n=uD(t,r,!0,n,i,s,o,a,l),n.context=yz(null),t=n.current,r=qo(),i=Zd(t),s=ah(r,i),s.callback=e??null,Yd(t,s,i),n.current.lanes=i,d_(n,i,r),Aa(n,r),n}function TA(n,e,t,r){var i=e.current,s=qo(),o=Zd(i);return t=yz(t),e.context===null?e.context=t:e.pendingContext=t,e=ah(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Yd(i,e,o),n!==null&&(hc(n,i,o,s),AE(n,i,o)),o}function Rb(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function zF(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function hD(n,e){zF(n,e),(n=n.alternate)&&zF(n,e)}function Xre(){return null}var _z=typeof reportError=="function"?reportError:function(n){console.error(n)};function dD(n){this._internalRoot=n}CA.prototype.render=dD.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(dt(409));TA(n,e,null,null)};CA.prototype.unmount=dD.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;hm(function(){TA(null,n,null,null)}),e[ph]=null}};function CA(n){this._internalRoot=n}CA.prototype.unstable_scheduleHydration=function(n){if(n){var e=Z9();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ad.length&&e!==0&&e<Ad[t].priority;t++);Ad.splice(t,0,n),t===0&&J9(n)}};function fD(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function MA(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function HF(){}function qre(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Rb(o);s.call(c)}}var o=xz(e,r,n,0,null,!1,!1,"",HF);return n._reactRootContainer=o,n[ph]=o.current,ux(n.nodeType===8?n.parentNode:n),hm(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Rb(l);a.call(c)}}var l=uD(n,0,!1,null,null,!1,!1,"",HF);return n._reactRootContainer=l,n[ph]=l.current,ux(n.nodeType===8?n.parentNode:n),hm(function(){TA(e,l,t,r)}),l}function IA(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Rb(o);a.call(l)}}TA(e,o,n,i)}else o=qre(t,e,n,i,r);return Rb(o)}Y9=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=r1(e.pendingLanes);t!==0&&(N3(e,t|1),Aa(e,Fi()),!(or&6)&&(ov=Fi()+500,If()))}break;case 13:hm(function(){var r=mh(n,1);if(r!==null){var i=qo();hc(r,n,1,i)}}),hD(n,1)}};D3=function(n){if(n.tag===13){var e=mh(n,134217728);if(e!==null){var t=qo();hc(e,n,134217728,t)}hD(n,134217728)}};K9=function(n){if(n.tag===13){var e=Zd(n),t=mh(n,e);if(t!==null){var r=qo();hc(t,n,e,r)}hD(n,e)}};Z9=function(){return Cr};Q9=function(n,e){var t=Cr;try{return Cr=n,e()}finally{Cr=t}};OP=function(n,e,t){switch(e){case"input":if(MP(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=xA(r);if(!i)throw Error(dt(90));I9(r),MP(r,i)}}}break;case"textarea":R9(n,t);break;case"select":e=t.value,e!=null&&w0(n,!!t.multiple,e,!1)}};B9=oD;U9=hm;var Yre={usingClientEntryPoint:!1,Events:[p_,Yg,xA,L9,F9,oD]},Ry={findFiberByHostInstance:Np,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kre={bundleType:Ry.bundleType,version:Ry.version,rendererPackageName:Ry.rendererPackageName,rendererConfig:Ry.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ih.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=z9(n),n===null?null:n.stateNode},findFiberByHostInstance:Ry.findFiberByHostInstance||Xre,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tS.isDisabled&&tS.supportsFiber)try{mA=tS.inject(Kre),nu=tS}catch{}}Ja.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yre;Ja.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fD(e))throw Error(dt(200));return $re(n,e,null,t)};Ja.createRoot=function(n,e){if(!fD(n))throw Error(dt(299));var t=!1,r="",i=_z;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=uD(n,1,!1,null,null,t,!1,r,i),n[ph]=e.current,ux(n.nodeType===8?n.parentNode:n),new dD(e)};Ja.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(dt(188)):(n=Object.keys(n).join(","),Error(dt(268,n)));return n=z9(e),n=n===null?null:n.stateNode,n};Ja.flushSync=function(n){return hm(n)};Ja.hydrate=function(n,e,t){if(!MA(e))throw Error(dt(200));return IA(null,n,e,!0,t)};Ja.hydrateRoot=function(n,e,t){if(!fD(n))throw Error(dt(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=_z;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=xz(e,null,n,1,t??null,i,!1,s,o),n[ph]=e.current,ux(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new CA(e)};Ja.render=function(n,e,t){if(!MA(e))throw Error(dt(200));return IA(null,n,e,!1,t)};Ja.unmountComponentAtNode=function(n){if(!MA(n))throw Error(dt(40));return n._reactRootContainer?(hm(function(){IA(null,null,n,!1,function(){n._reactRootContainer=null,n[ph]=null})}),!0):!1};Ja.unstable_batchedUpdates=oD;Ja.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!MA(t))throw Error(dt(200));if(n==null||n._reactInternals===void 0)throw Error(dt(38));return IA(n,e,t,!1,r)};Ja.version="18.3.1-next-f1338f8080-20240426";function wz(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wz)}catch(n){console.error(n)}}wz(),w9.exports=Ja;var Pf=w9.exports;const Zre=y3(Pf);var Sz,WF=Pf;Sz=WF.createRoot,WF.hydrateRoot;const Qre=()=>{};var GF={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ez=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Jre=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bz={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(t[u],t[h],t[f],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ez(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Jre(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const h=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new eie;const f=s<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const v=c<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class eie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tie=function(n){const e=Ez(n);return bz.encodeByteArray(e,!0)},Nb=function(n){return tie(n).replace(/\./g,"")},Az=function(n){try{return bz.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rie=()=>nie().__FIREBASE_DEFAULTS__,iie=()=>{if(typeof process>"u"||typeof GF>"u")return;const n=GF.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},sie=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Az(n[1]);return e&&JSON.parse(e)},PA=()=>{try{return Qre()||rie()||iie()||sie()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Tz=n=>{var e,t;return(t=(e=PA())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},oie=n=>{const e=Tz(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Cz=()=>{var n;return(n=PA())===null||n===void 0?void 0:n.config},Mz=n=>{var e;return(e=PA())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Iz(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lie(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Nb(JSON.stringify(t)),Nb(JSON.stringify(o)),""].join(".")}const N1={};function cie(){const n={prod:[],emulator:[]};for(const e of Object.keys(N1))N1[e]?n.emulator.push(e):n.prod.push(e);return n}function uie(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let $F=!1;function Pz(n,e){if(typeof window>"u"||typeof document>"u"||!Lv(window.location.host)||N1[n]===e||N1[n]||$F)return;N1[n]=e;function t(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=cie().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{$F=!0,o()},f}function u(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=uie(r),p=t("text"),v=document.getElementById(p)||document.createElement("span"),_=t("learnmore"),S=document.getElementById(_)||document.createElement("a"),x=t("preprendIcon"),E=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const b=f.element;a(b),u(S,_);const M=c();l(E,x),b.append(E,v,S,M),document.body.appendChild(b)}s?(v.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hie(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bo())}function die(){var n;const e=(n=PA())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fie(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Rz(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function pie(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mie(){const n=bo();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function gie(){return!die()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nz(){try{return typeof indexedDB=="object"}catch{return!1}}function Dz(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function vie(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yie="FirebaseError";class wc extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=yie,Object.setPrototypeOf(this,wc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rm.prototype.create)}}class Rm{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?xie(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new wc(i,a,r)}}function xie(n,e){return n.replace(_ie,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const _ie=/\{\$([^}]+)}/g;function wie(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ff(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(XF(s)&&XF(o)){if(!ff(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function XF(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function s1(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function o1(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Sie(n,e){const t=new Eie(n,e);return t.subscribe.bind(t)}class Eie{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");bie(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=vM),i.error===void 0&&(i.error=vM),i.complete===void 0&&(i.complete=vM);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bie(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function vM(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aie=1e3,Tie=2,Cie=4*60*60*1e3,Mie=.5;function qF(n,e=Aie,t=Tie){const r=e*Math.pow(t,n),i=Math.round(Mie*r*(Math.random()-.5)*2);return Math.min(Cie,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(n){return n&&n._delegate?n._delegate:n}class mc{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iie=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new aie;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Rie(e))try{this.getOrInitializeService({instanceIdentifier:_p})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=_p){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_p){return this.instances.has(e)}getOptions(e=_p){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Pie(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_p){return this.component?this.component.multipleInstances?e:_p:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Pie(n){return n===_p?void 0:n}function Rie(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nie{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Iie(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qn||(qn={}));const Die={debug:qn.DEBUG,verbose:qn.VERBOSE,info:qn.INFO,warn:qn.WARN,error:qn.ERROR,silent:qn.SILENT},kie=qn.INFO,Oie={[qn.DEBUG]:"log",[qn.VERBOSE]:"log",[qn.INFO]:"info",[qn.WARN]:"warn",[qn.ERROR]:"error"},Lie=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=Oie[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class RA{constructor(e){this.name=e,this._logLevel=kie,this._logHandler=Lie,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Die[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qn.DEBUG,...e),this._logHandler(this,qn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qn.VERBOSE,...e),this._logHandler(this,qn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qn.INFO,...e),this._logHandler(this,qn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qn.WARN,...e),this._logHandler(this,qn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qn.ERROR,...e),this._logHandler(this,qn.ERROR,...e)}}const Fie=(n,e)=>e.some(t=>n instanceof t);let YF,KF;function Bie(){return YF||(YF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Uie(){return KF||(KF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kz=new WeakMap,pR=new WeakMap,Oz=new WeakMap,yM=new WeakMap,pD=new WeakMap;function jie(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Jd(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&kz.set(t,n)}).catch(()=>{}),pD.set(e,n),e}function Vie(n){if(pR.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});pR.set(n,e)}let mR={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return pR.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Oz.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Jd(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function zie(n){mR=n(mR)}function Hie(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(xM(this),e,...t);return Oz.set(r,e.sort?e.sort():[e]),Jd(r)}:Uie().includes(n)?function(...e){return n.apply(xM(this),e),Jd(kz.get(this))}:function(...e){return Jd(n.apply(xM(this),e))}}function Wie(n){return typeof n=="function"?Hie(n):(n instanceof IDBTransaction&&Vie(n),Fie(n,Bie())?new Proxy(n,mR):n)}function Jd(n){if(n instanceof IDBRequest)return jie(n);if(yM.has(n))return yM.get(n);const e=Wie(n);return e!==n&&(yM.set(n,e),pD.set(e,n)),e}const xM=n=>pD.get(n);function Lz(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Jd(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Jd(o.result),l.oldVersion,l.newVersion,Jd(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Gie=["get","getKey","getAll","getAllKeys","count"],$ie=["put","add","delete","clear"],_M=new Map;function ZF(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(_M.get(e))return _M.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=$ie.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Gie.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return _M.set(e,s),s}zie(n=>({...n,get:(e,t,r)=>ZF(e,t)||n.get(e,t,r),has:(e,t)=>!!ZF(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xie{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(qie(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function qie(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gR="@firebase/app",QF="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=new RA("@firebase/app"),Yie="@firebase/app-compat",Kie="@firebase/analytics-compat",Zie="@firebase/analytics",Qie="@firebase/app-check-compat",Jie="@firebase/app-check",ese="@firebase/auth",tse="@firebase/auth-compat",nse="@firebase/database",rse="@firebase/data-connect",ise="@firebase/database-compat",sse="@firebase/functions",ose="@firebase/functions-compat",ase="@firebase/installations",lse="@firebase/installations-compat",cse="@firebase/messaging",use="@firebase/messaging-compat",hse="@firebase/performance",dse="@firebase/performance-compat",fse="@firebase/remote-config",pse="@firebase/remote-config-compat",mse="@firebase/storage",gse="@firebase/storage-compat",vse="@firebase/firestore",yse="@firebase/ai",xse="@firebase/firestore-compat",_se="firebase",wse="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="[DEFAULT]",Sse={[gR]:"fire-core",[Yie]:"fire-core-compat",[Zie]:"fire-analytics",[Kie]:"fire-analytics-compat",[Jie]:"fire-app-check",[Qie]:"fire-app-check-compat",[ese]:"fire-auth",[tse]:"fire-auth-compat",[nse]:"fire-rtdb",[rse]:"fire-data-connect",[ise]:"fire-rtdb-compat",[sse]:"fire-fn",[ose]:"fire-fn-compat",[ase]:"fire-iid",[lse]:"fire-iid-compat",[cse]:"fire-fcm",[use]:"fire-fcm-compat",[hse]:"fire-perf",[dse]:"fire-perf-compat",[fse]:"fire-rc",[pse]:"fire-rc-compat",[mse]:"fire-gcs",[gse]:"fire-gcs-compat",[vse]:"fire-fst",[xse]:"fire-fst-compat",[yse]:"fire-vertex","fire-js":"fire-js",[_se]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=new Map,Ese=new Map,yR=new Map;function JF(n,e){try{n.container.addComponent(e)}catch(t){vh.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function vu(n){const e=n.name;if(yR.has(e))return vh.debug(`There were multiple attempts to register component ${e}.`),!1;yR.set(e,n);for(const t of Db.values())JF(t,n);for(const t of Ese.values())JF(t,n);return!0}function Nm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ic(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bse={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ef=new Rm("app","Firebase",bse);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ase{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ef.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=wse;function Fz(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:vR,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ef.create("bad-app-name",{appName:String(i)});if(t||(t=Cz()),!t)throw ef.create("no-options");const s=Db.get(i);if(s){if(ff(t,s.options)&&ff(r,s.config))return s;throw ef.create("duplicate-app",{appName:i})}const o=new Nie(i);for(const l of yR.values())o.addComponent(l);const a=new Ase(t,r,o);return Db.set(i,a),a}function mD(n=vR){const e=Db.get(n);if(!e&&n===vR&&Cz())return Fz();if(!e)throw ef.create("no-app",{appName:n});return e}function Al(n,e,t){var r;let i=(r=Sse[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vh.warn(a.join(" "));return}vu(new mc(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tse="firebase-heartbeat-database",Cse=1,xx="firebase-heartbeat-store";let wM=null;function Bz(){return wM||(wM=Lz(Tse,Cse,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(xx)}catch(t){console.warn(t)}}}}).catch(n=>{throw ef.create("idb-open",{originalErrorMessage:n.message})})),wM}async function Mse(n){try{const t=(await Bz()).transaction(xx),r=await t.objectStore(xx).get(Uz(n));return await t.done,r}catch(e){if(e instanceof wc)vh.warn(e.message);else{const t=ef.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vh.warn(t.message)}}}async function e8(n,e){try{const r=(await Bz()).transaction(xx,"readwrite");await r.objectStore(xx).put(e,Uz(n)),await r.done}catch(t){if(t instanceof wc)vh.warn(t.message);else{const r=ef.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});vh.warn(r.message)}}}function Uz(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ise=1024,Pse=30;class Rse{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Dse(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=t8();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Pse){const o=kse(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){vh.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=t8(),{heartbeatsToSend:r,unsentEntries:i}=Nse(this._heartbeatsCache.heartbeats),s=Nb(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return vh.warn(t),""}}}function t8(){return new Date().toISOString().substring(0,10)}function Nse(n,e=Ise){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),n8(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),n8(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Dse{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nz()?Dz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Mse(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return e8(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return e8(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function n8(n){return Nb(JSON.stringify({version:2,heartbeats:n})).length}function kse(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ose(n){vu(new mc("platform-logger",e=>new Xie(e),"PRIVATE")),vu(new mc("heartbeat",e=>new Rse(e),"PRIVATE")),Al(gR,QF,n),Al(gR,QF,"esm2017"),Al("fire-js","")}Ose("");var Lse="firebase",Fse="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Al(Lse,Fse,"app");var qc=function(){return qc=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},qc.apply(this,arguments)};function v_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Bse(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}function jz(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Use=jz,Vz=new Rm("auth","Firebase",jz());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=new RA("@firebase/auth");function jse(n,...e){kb.logLevel<=qn.WARN&&kb.warn(`Auth (${Fv}): ${n}`,...e)}function NE(n,...e){kb.logLevel<=qn.ERROR&&kb.error(`Auth (${Fv}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(n,...e){throw gD(n,...e)}function iu(n,...e){return gD(n,...e)}function zz(n,e,t){const r=Object.assign(Object.assign({},Use()),{[e]:t});return new Rm("auth","Firebase",r).create(e,{appName:n.name})}function tf(n){return zz(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gD(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Vz.create(n,...e)}function mn(n,e,...t){if(!n)throw gD(e,...t)}function sh(n){const e="INTERNAL ASSERTION FAILED: "+n;throw NE(e),new Error(e)}function yh(n,e){n||sh(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Vse(){return r8()==="http:"||r8()==="https:"}function r8(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zse(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Vse()||Rz()||"connection"in navigator)?navigator.onLine:!0}function Hse(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,t){this.shortDelay=e,this.longDelay=t,yh(t>e,"Short delay should be less than long delay!"),this.isMobile=hie()||pie()}get(){return zse()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(n,e){yh(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wse={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gse=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$se=new y_(3e4,6e4);function Dm(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Rf(n,e,t,r,i={}){return Wz(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=g_(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return fie()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&Lv(n.emulatorConfig.host)&&(c.credentials="include"),Hz.fetch()(await Gz(n,n.config.apiHost,t,a),c)})}async function Wz(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Wse),e);try{const i=new qse(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw nS(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw nS(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw nS(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw nS(n,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw zz(n,u,c);gc(n,u)}}catch(i){if(i instanceof wc)throw i;gc(n,"network-request-failed",{message:String(i)})}}async function NA(n,e,t,r,i={}){const s=await Rf(n,e,t,r,i);return"mfaPendingCredential"in s&&gc(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function Gz(n,e,t,r){const i=`${e}${t}?${r}`,s=n,o=s.config.emulator?vD(n.config,i):`${n.config.apiScheme}://${i}`;return Gse.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function Xse(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qse{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(iu(this.auth,"network-request-failed")),$se.get())})}}function nS(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=iu(n,e,r);return i.customData._tokenResponse=t,i}function i8(n){return n!==void 0&&n.enterprise!==void 0}class Yse{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Xse(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Kse(n,e){return Rf(n,"GET","/v2/recaptchaConfig",Dm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zse(n,e){return Rf(n,"POST","/v1/accounts:delete",e)}async function Ob(n,e){return Rf(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Qse(n,e=!1){const t=Gs(n),r=await t.getIdToken(e),i=yD(r);mn(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:D1(SM(i.auth_time)),issuedAtTime:D1(SM(i.iat)),expirationTime:D1(SM(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function SM(n){return Number(n)*1e3}function yD(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return NE("JWT malformed, contained fewer than 3 sections"),null;try{const i=Az(t);return i?JSON.parse(i):(NE("Failed to decode base64 JWT payload"),null)}catch(i){return NE("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function s8(n){const e=yD(n);return mn(e,"internal-error"),mn(typeof e.exp<"u","internal-error"),mn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _x(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof wc&&Jse(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Jse({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eoe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=D1(this.lastLoginAt),this.creationTime=D1(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lb(n){var e;const t=n.auth,r=await n.getIdToken(),i=await _x(n,Ob(t,{idToken:r}));mn(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?$z(s.providerUserInfo):[],a=noe(n.providerData,o),l=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new _R(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,h)}async function toe(n){const e=Gs(n);await Lb(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function noe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function $z(n){return n.map(e=>{var{providerId:t}=e,r=v_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function roe(n,e){const t=await Wz(n,{},async()=>{const r=g_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await Gz(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return n.emulatorConfig&&Lv(n.emulatorConfig.host)&&(l.credentials="include"),Hz.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ioe(n,e){return Rf(n,"POST","/v2/accounts:revokeToken",Dm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){mn(e.idToken,"internal-error"),mn(typeof e.idToken<"u","internal-error"),mn(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):s8(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){mn(e.length!==0,"internal-error");const t=s8(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(mn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await roe(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new C0;return r&&(mn(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(mn(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(mn(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new C0,this.toJSON())}_performRefresh(){return sh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(n,e){mn(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ac{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=v_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eoe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _R(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await _x(this,this.stsTokenManager.getToken(this.auth,e));return mn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Qse(this,e)}reload(){return toe(this)}_assign(e){this!==e&&(mn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ac(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){mn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Lb(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ic(this.auth.app))return Promise.reject(tf(this.auth));const e=await this.getIdToken();return await _x(this,Zse(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,c,u;const h=(r=t.displayName)!==null&&r!==void 0?r:void 0,f=(i=t.email)!==null&&i!==void 0?i:void 0,p=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=t.photoURL)!==null&&o!==void 0?o:void 0,_=(a=t.tenantId)!==null&&a!==void 0?a:void 0,S=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=t.createdAt)!==null&&c!==void 0?c:void 0,E=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:b,emailVerified:M,isAnonymous:k,providerData:B,stsTokenManager:P}=t;mn(b&&P,e,"internal-error");const N=C0.fromJSON(this.name,P);mn(typeof b=="string",e,"internal-error"),sd(h,e.name),sd(f,e.name),mn(typeof M=="boolean",e,"internal-error"),mn(typeof k=="boolean",e,"internal-error"),sd(p,e.name),sd(v,e.name),sd(_,e.name),sd(S,e.name),sd(x,e.name),sd(E,e.name);const R=new ac({uid:b,auth:e,email:f,emailVerified:M,displayName:h,isAnonymous:k,photoURL:v,phoneNumber:p,tenantId:_,stsTokenManager:N,createdAt:x,lastLoginAt:E});return B&&Array.isArray(B)&&(R.providerData=B.map(I=>Object.assign({},I))),S&&(R._redirectEventId=S),R}static async _fromIdTokenResponse(e,t,r=!1){const i=new C0;i.updateFromServerResponse(t);const s=new ac({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Lb(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];mn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?$z(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new C0;a.updateFromIdToken(r);const l=new ac({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new _R(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8=new Map;function oh(n){yh(n instanceof Function,"Expected a class definition");let e=o8.get(n);return e?(yh(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,o8.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Xz.type="NONE";const a8=Xz;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(n,e,t){return`firebase:${n}:${e}:${t}`}class M0{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=DE(this.userKey,i.apiKey,s),this.fullPersistenceKey=DE("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ob(this.auth,{idToken:e}).catch(()=>{});return t?ac._fromGetAccountInfoResponse(this.auth,t,e):null}return ac._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new M0(oh(a8),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||oh(a8);const o=DE(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=await c._get(o);if(u){let h;if(typeof u=="string"){const f=await Ob(e,{idToken:u}).catch(()=>{});if(!f)break;h=await ac._fromGetAccountInfoResponse(e,f,u)}else h=ac._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new M0(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new M0(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l8(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zz(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qz(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jz(e))return"Blackberry";if(eH(e))return"Webos";if(Yz(e))return"Safari";if((e.includes("chrome/")||Kz(e))&&!e.includes("edge/"))return"Chrome";if(Qz(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qz(n=bo()){return/firefox\//i.test(n)}function Yz(n=bo()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Kz(n=bo()){return/crios\//i.test(n)}function Zz(n=bo()){return/iemobile/i.test(n)}function Qz(n=bo()){return/android/i.test(n)}function Jz(n=bo()){return/blackberry/i.test(n)}function eH(n=bo()){return/webos/i.test(n)}function xD(n=bo()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function soe(n=bo()){var e;return xD(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ooe(){return mie()&&document.documentMode===10}function tH(n=bo()){return xD(n)||Qz(n)||eH(n)||Jz(n)||/windows phone/i.test(n)||Zz(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nH(n,e=[]){let t;switch(n){case"Browser":t=l8(bo());break;case"Worker":t=`${l8(bo())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fv}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aoe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function loe(n,e={}){return Rf(n,"GET","/v2/passwordPolicy",Dm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const coe=6;class uoe{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:coe,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hoe{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new c8(this),this.idTokenSubscription=new c8(this),this.beforeStateQueue=new aoe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vz,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=oh(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await M0.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ob(this,{idToken:e}),r=await ac._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ic(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return mn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Lb(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Hse()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ic(this.app))return Promise.reject(tf(this));const t=e?Gs(e):null;return t&&mn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&mn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ic(this.app)?Promise.reject(tf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ic(this.app)?Promise.reject(tf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(oh(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await loe(this),t=new uoe(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Rm("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await ioe(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&oh(e)||this._popupRedirectResolver;mn(t,this,"argument-error"),this.redirectPersistenceManager=await M0.create(this,[oh(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(mn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return mn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nH(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(ic(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&jse(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Bv(n){return Gs(n)}class c8{constructor(e){this.auth=e,this.observer=null,this.addObserver=Sie(t=>this.observer=t)}get next(){return mn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DA={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function doe(n){DA=n}function rH(n){return DA.loadJS(n)}function foe(){return DA.recaptchaEnterpriseScript}function poe(){return DA.gapiScript}function moe(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class goe{constructor(){this.enterprise=new voe}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class voe{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const yoe="recaptcha-enterprise",iH="NO_RECAPTCHA";class xoe{constructor(e){this.type=yoe,this.auth=Bv(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{Kse(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new Yse(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;i8(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(iH)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new goe().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&i8(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=foe();l.length!==0&&(l+=a),rH(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function u8(n,e,t,r=!1,i=!1){const s=new xoe(n);let o;if(i)o=iH;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function h8(n,e,t,r,i){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await u8(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await u8(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _oe(n,e){const t=Nm(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(ff(s,e??{}))return i;gc(i,"already-initialized")}return t.initialize({options:e})}function woe(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(oh);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Soe(n,e,t){const r=Bv(n);mn(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=sH(e),{host:o,port:a}=Eoe(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){mn(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),mn(ff(c,r.config.emulator)&&ff(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Lv(o)?(Iz(`${s}//${o}${l}`),Pz("Auth",!0)):boe()}function sH(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Eoe(n){const e=sH(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:d8(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:d8(o)}}}function d8(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function boe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return sh("not implemented")}_getIdTokenResponse(e){return sh("not implemented")}_linkToIdToken(e,t){return sh("not implemented")}_getReauthenticationResolver(e){return sh("not implemented")}}async function Aoe(n,e){return Rf(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Toe(n,e){return NA(n,"POST","/v1/accounts:signInWithPassword",Dm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Coe(n,e){return NA(n,"POST","/v1/accounts:signInWithEmailLink",Dm(n,e))}async function Moe(n,e){return NA(n,"POST","/v1/accounts:signInWithEmailLink",Dm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx extends _D{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new wx(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new wx(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return h8(e,t,"signInWithPassword",Toe);case"emailLink":return Coe(e,{email:this._email,oobCode:this._password});default:gc(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return h8(e,r,"signUpPassword",Aoe);case"emailLink":return Moe(e,{idToken:t,email:this._email,oobCode:this._password});default:gc(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I0(n,e){return NA(n,"POST","/v1/accounts:signInWithIdp",Dm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ioe="http://localhost";class dm extends _D{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new dm(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gc("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=v_(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new dm(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return I0(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,I0(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,I0(e,t)}buildRequest(){const e={requestUri:Ioe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=g_(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Poe(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Roe(n){const e=s1(o1(n)).link,t=e?s1(o1(e)).deep_link_id:null,r=s1(o1(n)).deep_link_id;return(r?s1(o1(r)).link:null)||r||t||e||n}class wD{constructor(e){var t,r,i,s,o,a;const l=s1(o1(e)),c=(t=l.apiKey)!==null&&t!==void 0?t:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,h=Poe((i=l.mode)!==null&&i!==void 0?i:null);mn(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=Roe(e);try{return new wD(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(){this.providerId=Uv.PROVIDER_ID}static credential(e,t){return wx._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=wD.parseLink(t);return mn(r,"argument-error"),wx._fromEmailAndCode(e,r.code,r.tenantId)}}Uv.PROVIDER_ID="password";Uv.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Uv.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_ extends oH{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd extends x_{constructor(){super("facebook.com")}static credential(e){return dm._fromParams({providerId:Cd.PROVIDER_ID,signInMethod:Cd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cd.credentialFromTaggedObject(e)}static credentialFromError(e){return Cd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cd.credential(e.oauthAccessToken)}catch{return null}}}Cd.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cd.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md extends x_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return dm._fromParams({providerId:Md.PROVIDER_ID,signInMethod:Md.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Md.credentialFromTaggedObject(e)}static credentialFromError(e){return Md.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Md.credential(t,r)}catch{return null}}}Md.GOOGLE_SIGN_IN_METHOD="google.com";Md.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends x_{constructor(){super("github.com")}static credential(e){return dm._fromParams({providerId:Id.PROVIDER_ID,signInMethod:Id.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Id.credentialFromTaggedObject(e)}static credentialFromError(e){return Id.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Id.credential(e.oauthAccessToken)}catch{return null}}}Id.GITHUB_SIGN_IN_METHOD="github.com";Id.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd extends x_{constructor(){super("twitter.com")}static credential(e,t){return dm._fromParams({providerId:Pd.PROVIDER_ID,signInMethod:Pd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Pd.credentialFromTaggedObject(e)}static credentialFromError(e){return Pd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Pd.credential(t,r)}catch{return null}}}Pd.TWITTER_SIGN_IN_METHOD="twitter.com";Pd.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await ac._fromIdTokenResponse(e,r,i),o=f8(r);return new av({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=f8(r);return new av({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function f8(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb extends wc{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Fb.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Fb(e,t,r,i)}}function aH(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Fb._fromErrorAndOperation(n,s,e,r):s})}async function Noe(n,e,t=!1){const r=await _x(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return av._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Doe(n,e,t=!1){const{auth:r}=n;if(ic(r.app))return Promise.reject(tf(r));const i="reauthenticate";try{const s=await _x(n,aH(r,i,e,n),t);mn(s.idToken,r,"internal-error");const o=yD(s.idToken);mn(o,r,"internal-error");const{sub:a}=o;return mn(n.uid===a,r,"user-mismatch"),av._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&gc(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lH(n,e,t=!1){if(ic(n.app))return Promise.reject(tf(n));const r="signIn",i=await aH(n,r,e),s=await av._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function koe(n,e){return lH(Bv(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ooe(n){const e=Bv(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function SD(n,e,t){return ic(n.app)?Promise.reject(tf(n)):koe(Gs(n),Uv.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ooe(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Loe(n,e){return Gs(n).setPersistence(e)}function Foe(n,e,t,r){return Gs(n).onIdTokenChanged(e,t,r)}function Boe(n,e,t){return Gs(n).beforeAuthStateChanged(e,t)}function ED(n,e,t,r){return Gs(n).onAuthStateChanged(e,t,r)}const Bb="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bb,"1"),this.storage.removeItem(Bb),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uoe=1e3,joe=10;class uH extends cH{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tH(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);ooe()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,joe):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Uoe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}uH.type="LOCAL";const hH=uH;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH extends cH{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}dH.type="SESSION";const fH=dH;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Voe(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new kA(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(t.origin,s)),l=await Voe(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kA.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zoe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=bD("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(){return window}function Hoe(n){su().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pH(){return typeof su().WorkerGlobalScope<"u"&&typeof su().importScripts=="function"}async function Woe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Goe(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function $oe(){return pH()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mH="firebaseLocalStorageDb",Xoe=1,Ub="firebaseLocalStorage",gH="fbase_key";class __{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function OA(n,e){return n.transaction([Ub],e?"readwrite":"readonly").objectStore(Ub)}function qoe(){const n=indexedDB.deleteDatabase(mH);return new __(n).toPromise()}function wR(){const n=indexedDB.open(mH,Xoe);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Ub,{keyPath:gH})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Ub)?e(r):(r.close(),await qoe(),e(await wR()))})})}async function p8(n,e,t){const r=OA(n,!0).put({[gH]:e,value:t});return new __(r).toPromise()}async function Yoe(n,e){const t=OA(n,!1).get(e),r=await new __(t).toPromise();return r===void 0?null:r.value}function m8(n,e){const t=OA(n,!0).delete(e);return new __(t).toPromise()}const Koe=800,Zoe=3;class vH{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wR(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Zoe)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pH()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kA._getInstance($oe()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Woe(),!this.activeServiceWorker)return;this.sender=new zoe(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Goe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wR();return await p8(e,Bb,"1"),await m8(e,Bb),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>p8(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Yoe(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>m8(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=OA(i,!1).getAll();return new __(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Koe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vH.type="LOCAL";const Qoe=vH;new y_(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Joe(n,e){return e?oh(e):(mn(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD extends _D{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return I0(e,this._buildIdpRequest())}_linkToIdToken(e,t){return I0(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return I0(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eae(n){return lH(n.auth,new AD(n),n.bypassAuthState)}function tae(n){const{auth:e,user:t}=n;return mn(t,e,"internal-error"),Doe(t,new AD(n),n.bypassAuthState)}async function nae(n){const{auth:e,user:t}=n;return mn(t,e,"internal-error"),Noe(t,new AD(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yH{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eae;case"linkViaPopup":case"linkViaRedirect":return nae;case"reauthViaPopup":case"reauthViaRedirect":return tae;default:gc(this.auth,"internal-error")}}resolve(e){yh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rae=new y_(2e3,1e4);class n0 extends yH{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,n0.currentPopupAction&&n0.currentPopupAction.cancel(),n0.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return mn(e,this.auth,"internal-error"),e}async onExecution(){yh(this.filter.length===1,"Popup operations only handle one event");const e=bD();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(iu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(iu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n0.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(iu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rae.get())};e()}}n0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iae="pendingRedirect",kE=new Map;class sae extends yH{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=kE.get(this.auth._key());if(!e){try{const r=await oae(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}kE.set(this.auth._key(),e)}return this.bypassAuthState||kE.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oae(n,e){const t=cae(e),r=lae(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function aae(n,e){kE.set(n._key(),e)}function lae(n){return oh(n._redirectPersistence)}function cae(n){return DE(iae,n.config.apiKey,n.name)}async function uae(n,e,t=!1){if(ic(n.app))return Promise.reject(tf(n));const r=Bv(n),i=Joe(r,e),o=await new sae(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hae=10*60*1e3;class dae{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fae(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!xH(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(iu(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hae&&this.cachedEventUids.clear(),this.cachedEventUids.has(g8(e))}saveEventToCache(e){this.cachedEventUids.add(g8(e)),this.lastProcessedEventTime=Date.now()}}function g8(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function xH({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fae(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xH(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pae(n,e={}){return Rf(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mae=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gae=/^https?/;async function vae(n){if(n.config.emulator)return;const{authorizedDomains:e}=await pae(n);for(const t of e)try{if(yae(t))return}catch{}gc(n,"unauthorized-domain")}function yae(n){const e=xR(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!gae.test(t))return!1;if(mae.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xae=new y_(3e4,6e4);function v8(){const n=su().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function _ae(n){return new Promise((e,t)=>{var r,i,s;function o(){v8(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v8(),t(iu(n,"network-request-failed"))},timeout:xae.get()})}if(!((i=(r=su().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=su().gapi)===null||s===void 0)&&s.load)o();else{const a=moe("iframefcb");return su()[a]=()=>{gapi.load?o():t(iu(n,"network-request-failed"))},rH(`${poe()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw OE=null,e})}let OE=null;function wae(n){return OE=OE||_ae(n),OE}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sae=new y_(5e3,15e3),Eae="__/auth/iframe",bae="emulator/auth/iframe",Aae={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tae=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cae(n){const e=n.config;mn(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?vD(e,bae):`https://${n.config.authDomain}/${Eae}`,r={apiKey:e.apiKey,appName:n.name,v:Fv},i=Tae.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${g_(r).slice(1)}`}async function Mae(n){const e=await wae(n),t=su().gapi;return mn(t,n,"internal-error"),e.open({where:document.body,url:Cae(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Aae,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=iu(n,"network-request-failed"),a=su().setTimeout(()=>{s(o)},Sae.get());function l(){su().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iae={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Pae=500,Rae=600,Nae="_blank",Dae="http://localhost";class y8{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kae(n,e,t,r=Pae,i=Rae){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Iae),{width:r.toString(),height:i.toString(),top:s,left:o}),c=bo().toLowerCase();t&&(a=Kz(c)?Nae:t),qz(c)&&(e=e||Dae,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[p,v])=>`${f}${p}=${v},`,"");if(soe(c)&&a!=="_self")return Oae(e||"",a),new y8(null);const h=window.open(e||"",a,u);mn(h,n,"popup-blocked");try{h.focus()}catch{}return new y8(h)}function Oae(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lae="__/auth/handler",Fae="emulator/auth/handler",Bae=encodeURIComponent("fac");async function x8(n,e,t,r,i,s){mn(n.config.authDomain,n,"auth-domain-config-required"),mn(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Fv,eventId:i};if(e instanceof oH){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",wie(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof x_){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await n._getAppCheckToken(),c=l?`#${Bae}=${encodeURIComponent(l)}`:"";return`${Uae(n)}?${g_(a).slice(1)}${c}`}function Uae({config:n}){return n.emulator?vD(n,Fae):`https://${n.authDomain}/${Lae}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM="webStorageSupport";class jae{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fH,this._completeRedirectFn=uae,this._overrideRedirectResult=aae}async _openPopup(e,t,r,i){var s;yh((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await x8(e,t,r,xR(),i);return kae(e,o,bD())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await x8(e,t,r,xR(),i);return Hoe(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(yh(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Mae(e),r=new dae(e);return t.register("authEvent",i=>(mn(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(EM,{type:EM},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[EM];o!==void 0&&t(!!o),gc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vae(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return tH()||Yz()||xD()}}const Vae=jae;var _8="@firebase/auth",w8="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zae{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){mn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hae(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Wae(n){vu(new mc("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;mn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nH(n)},c=new hoe(r,i,s,l);return woe(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),vu(new mc("auth-internal",e=>{const t=Bv(e.getProvider("auth").getImmediate());return(r=>new zae(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Al(_8,w8,Hae(n)),Al(_8,w8,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gae=5*60,$ae=Mz("authIdTokenMaxAge")||Gae;let S8=null;const Xae=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>$ae)return;const i=t==null?void 0:t.token;S8!==i&&(S8=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function qae(n=mD()){const e=Nm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=_oe(n,{popupRedirectResolver:Vae,persistence:[Qoe,hH,fH]}),r=Mz("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Xae(s.toString());Boe(t,o,()=>o(t.currentUser)),Foe(t,a=>o(a))}}const i=Tz("auth");return i&&Soe(t,`http://${i}`),t}function Yae(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}doe({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=iu("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Yae().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Wae("Browser");var E8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nf,_H;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,N){function R(){}R.prototype=N.prototype,P.D=N.prototype,P.prototype=new R,P.prototype.constructor=P,P.C=function(I,U,H){for(var W=Array(arguments.length-2),K=2;K<arguments.length;K++)W[K-2]=arguments[K];return N.prototype[U].apply(I,W)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,N,R){R||(R=0);var I=Array(16);if(typeof N=="string")for(var U=0;16>U;++U)I[U]=N.charCodeAt(R++)|N.charCodeAt(R++)<<8|N.charCodeAt(R++)<<16|N.charCodeAt(R++)<<24;else for(U=0;16>U;++U)I[U]=N[R++]|N[R++]<<8|N[R++]<<16|N[R++]<<24;N=P.g[0],R=P.g[1],U=P.g[2];var H=P.g[3],W=N+(H^R&(U^H))+I[0]+3614090360&4294967295;N=R+(W<<7&4294967295|W>>>25),W=H+(U^N&(R^U))+I[1]+3905402710&4294967295,H=N+(W<<12&4294967295|W>>>20),W=U+(R^H&(N^R))+I[2]+606105819&4294967295,U=H+(W<<17&4294967295|W>>>15),W=R+(N^U&(H^N))+I[3]+3250441966&4294967295,R=U+(W<<22&4294967295|W>>>10),W=N+(H^R&(U^H))+I[4]+4118548399&4294967295,N=R+(W<<7&4294967295|W>>>25),W=H+(U^N&(R^U))+I[5]+1200080426&4294967295,H=N+(W<<12&4294967295|W>>>20),W=U+(R^H&(N^R))+I[6]+2821735955&4294967295,U=H+(W<<17&4294967295|W>>>15),W=R+(N^U&(H^N))+I[7]+4249261313&4294967295,R=U+(W<<22&4294967295|W>>>10),W=N+(H^R&(U^H))+I[8]+1770035416&4294967295,N=R+(W<<7&4294967295|W>>>25),W=H+(U^N&(R^U))+I[9]+2336552879&4294967295,H=N+(W<<12&4294967295|W>>>20),W=U+(R^H&(N^R))+I[10]+4294925233&4294967295,U=H+(W<<17&4294967295|W>>>15),W=R+(N^U&(H^N))+I[11]+2304563134&4294967295,R=U+(W<<22&4294967295|W>>>10),W=N+(H^R&(U^H))+I[12]+1804603682&4294967295,N=R+(W<<7&4294967295|W>>>25),W=H+(U^N&(R^U))+I[13]+4254626195&4294967295,H=N+(W<<12&4294967295|W>>>20),W=U+(R^H&(N^R))+I[14]+2792965006&4294967295,U=H+(W<<17&4294967295|W>>>15),W=R+(N^U&(H^N))+I[15]+1236535329&4294967295,R=U+(W<<22&4294967295|W>>>10),W=N+(U^H&(R^U))+I[1]+4129170786&4294967295,N=R+(W<<5&4294967295|W>>>27),W=H+(R^U&(N^R))+I[6]+3225465664&4294967295,H=N+(W<<9&4294967295|W>>>23),W=U+(N^R&(H^N))+I[11]+643717713&4294967295,U=H+(W<<14&4294967295|W>>>18),W=R+(H^N&(U^H))+I[0]+3921069994&4294967295,R=U+(W<<20&4294967295|W>>>12),W=N+(U^H&(R^U))+I[5]+3593408605&4294967295,N=R+(W<<5&4294967295|W>>>27),W=H+(R^U&(N^R))+I[10]+38016083&4294967295,H=N+(W<<9&4294967295|W>>>23),W=U+(N^R&(H^N))+I[15]+3634488961&4294967295,U=H+(W<<14&4294967295|W>>>18),W=R+(H^N&(U^H))+I[4]+3889429448&4294967295,R=U+(W<<20&4294967295|W>>>12),W=N+(U^H&(R^U))+I[9]+568446438&4294967295,N=R+(W<<5&4294967295|W>>>27),W=H+(R^U&(N^R))+I[14]+3275163606&4294967295,H=N+(W<<9&4294967295|W>>>23),W=U+(N^R&(H^N))+I[3]+4107603335&4294967295,U=H+(W<<14&4294967295|W>>>18),W=R+(H^N&(U^H))+I[8]+1163531501&4294967295,R=U+(W<<20&4294967295|W>>>12),W=N+(U^H&(R^U))+I[13]+2850285829&4294967295,N=R+(W<<5&4294967295|W>>>27),W=H+(R^U&(N^R))+I[2]+4243563512&4294967295,H=N+(W<<9&4294967295|W>>>23),W=U+(N^R&(H^N))+I[7]+1735328473&4294967295,U=H+(W<<14&4294967295|W>>>18),W=R+(H^N&(U^H))+I[12]+2368359562&4294967295,R=U+(W<<20&4294967295|W>>>12),W=N+(R^U^H)+I[5]+4294588738&4294967295,N=R+(W<<4&4294967295|W>>>28),W=H+(N^R^U)+I[8]+2272392833&4294967295,H=N+(W<<11&4294967295|W>>>21),W=U+(H^N^R)+I[11]+1839030562&4294967295,U=H+(W<<16&4294967295|W>>>16),W=R+(U^H^N)+I[14]+4259657740&4294967295,R=U+(W<<23&4294967295|W>>>9),W=N+(R^U^H)+I[1]+2763975236&4294967295,N=R+(W<<4&4294967295|W>>>28),W=H+(N^R^U)+I[4]+1272893353&4294967295,H=N+(W<<11&4294967295|W>>>21),W=U+(H^N^R)+I[7]+4139469664&4294967295,U=H+(W<<16&4294967295|W>>>16),W=R+(U^H^N)+I[10]+3200236656&4294967295,R=U+(W<<23&4294967295|W>>>9),W=N+(R^U^H)+I[13]+681279174&4294967295,N=R+(W<<4&4294967295|W>>>28),W=H+(N^R^U)+I[0]+3936430074&4294967295,H=N+(W<<11&4294967295|W>>>21),W=U+(H^N^R)+I[3]+3572445317&4294967295,U=H+(W<<16&4294967295|W>>>16),W=R+(U^H^N)+I[6]+76029189&4294967295,R=U+(W<<23&4294967295|W>>>9),W=N+(R^U^H)+I[9]+3654602809&4294967295,N=R+(W<<4&4294967295|W>>>28),W=H+(N^R^U)+I[12]+3873151461&4294967295,H=N+(W<<11&4294967295|W>>>21),W=U+(H^N^R)+I[15]+530742520&4294967295,U=H+(W<<16&4294967295|W>>>16),W=R+(U^H^N)+I[2]+3299628645&4294967295,R=U+(W<<23&4294967295|W>>>9),W=N+(U^(R|~H))+I[0]+4096336452&4294967295,N=R+(W<<6&4294967295|W>>>26),W=H+(R^(N|~U))+I[7]+1126891415&4294967295,H=N+(W<<10&4294967295|W>>>22),W=U+(N^(H|~R))+I[14]+2878612391&4294967295,U=H+(W<<15&4294967295|W>>>17),W=R+(H^(U|~N))+I[5]+4237533241&4294967295,R=U+(W<<21&4294967295|W>>>11),W=N+(U^(R|~H))+I[12]+1700485571&4294967295,N=R+(W<<6&4294967295|W>>>26),W=H+(R^(N|~U))+I[3]+2399980690&4294967295,H=N+(W<<10&4294967295|W>>>22),W=U+(N^(H|~R))+I[10]+4293915773&4294967295,U=H+(W<<15&4294967295|W>>>17),W=R+(H^(U|~N))+I[1]+2240044497&4294967295,R=U+(W<<21&4294967295|W>>>11),W=N+(U^(R|~H))+I[8]+1873313359&4294967295,N=R+(W<<6&4294967295|W>>>26),W=H+(R^(N|~U))+I[15]+4264355552&4294967295,H=N+(W<<10&4294967295|W>>>22),W=U+(N^(H|~R))+I[6]+2734768916&4294967295,U=H+(W<<15&4294967295|W>>>17),W=R+(H^(U|~N))+I[13]+1309151649&4294967295,R=U+(W<<21&4294967295|W>>>11),W=N+(U^(R|~H))+I[4]+4149444226&4294967295,N=R+(W<<6&4294967295|W>>>26),W=H+(R^(N|~U))+I[11]+3174756917&4294967295,H=N+(W<<10&4294967295|W>>>22),W=U+(N^(H|~R))+I[2]+718787259&4294967295,U=H+(W<<15&4294967295|W>>>17),W=R+(H^(U|~N))+I[9]+3951481745&4294967295,P.g[0]=P.g[0]+N&4294967295,P.g[1]=P.g[1]+(U+(W<<21&4294967295|W>>>11))&4294967295,P.g[2]=P.g[2]+U&4294967295,P.g[3]=P.g[3]+H&4294967295}r.prototype.u=function(P,N){N===void 0&&(N=P.length);for(var R=N-this.blockSize,I=this.B,U=this.h,H=0;H<N;){if(U==0)for(;H<=R;)i(this,P,H),H+=this.blockSize;if(typeof P=="string"){for(;H<N;)if(I[U++]=P.charCodeAt(H++),U==this.blockSize){i(this,I),U=0;break}}else for(;H<N;)if(I[U++]=P[H++],U==this.blockSize){i(this,I),U=0;break}}this.h=U,this.o+=N},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var N=1;N<P.length-8;++N)P[N]=0;var R=8*this.o;for(N=P.length-8;N<P.length;++N)P[N]=R&255,R/=256;for(this.u(P),P=Array(16),N=R=0;4>N;++N)for(var I=0;32>I;I+=8)P[R++]=this.g[N]>>>I&255;return P};function s(P,N){var R=a;return Object.prototype.hasOwnProperty.call(R,P)?R[P]:R[P]=N(P)}function o(P,N){this.h=N;for(var R=[],I=!0,U=P.length-1;0<=U;U--){var H=P[U]|0;I&&H==N||(R[U]=H,I=!1)}this.g=R}var a={};function l(P){return-128<=P&&128>P?s(P,function(N){return new o([N|0],0>N?-1:0)}):new o([P|0],0>P?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return h;if(0>P)return S(c(-P));for(var N=[],R=1,I=0;P>=R;I++)N[I]=P/R|0,R*=4294967296;return new o(N,0)}function u(P,N){if(P.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(P.charAt(0)=="-")return S(u(P.substring(1),N));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=c(Math.pow(N,8)),I=h,U=0;U<P.length;U+=8){var H=Math.min(8,P.length-U),W=parseInt(P.substring(U,U+H),N);8>H?(H=c(Math.pow(N,H)),I=I.j(H).add(c(W))):(I=I.j(R),I=I.add(c(W)))}return I}var h=l(0),f=l(1),p=l(16777216);n=o.prototype,n.m=function(){if(_(this))return-S(this).m();for(var P=0,N=1,R=0;R<this.g.length;R++){var I=this.i(R);P+=(0<=I?I:4294967296+I)*N,N*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(v(this))return"0";if(_(this))return"-"+S(this).toString(P);for(var N=c(Math.pow(P,6)),R=this,I="";;){var U=M(R,N).g;R=x(R,U.j(N));var H=((0<R.g.length?R.g[0]:R.h)>>>0).toString(P);if(R=U,v(R))return H+I;for(;6>H.length;)H="0"+H;I=H+I}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function v(P){if(P.h!=0)return!1;for(var N=0;N<P.g.length;N++)if(P.g[N]!=0)return!1;return!0}function _(P){return P.h==-1}n.l=function(P){return P=x(this,P),_(P)?-1:v(P)?0:1};function S(P){for(var N=P.g.length,R=[],I=0;I<N;I++)R[I]=~P.g[I];return new o(R,~P.h).add(f)}n.abs=function(){return _(this)?S(this):this},n.add=function(P){for(var N=Math.max(this.g.length,P.g.length),R=[],I=0,U=0;U<=N;U++){var H=I+(this.i(U)&65535)+(P.i(U)&65535),W=(H>>>16)+(this.i(U)>>>16)+(P.i(U)>>>16);I=W>>>16,H&=65535,W&=65535,R[U]=W<<16|H}return new o(R,R[R.length-1]&-2147483648?-1:0)};function x(P,N){return P.add(S(N))}n.j=function(P){if(v(this)||v(P))return h;if(_(this))return _(P)?S(this).j(S(P)):S(S(this).j(P));if(_(P))return S(this.j(S(P)));if(0>this.l(p)&&0>P.l(p))return c(this.m()*P.m());for(var N=this.g.length+P.g.length,R=[],I=0;I<2*N;I++)R[I]=0;for(I=0;I<this.g.length;I++)for(var U=0;U<P.g.length;U++){var H=this.i(I)>>>16,W=this.i(I)&65535,K=P.i(U)>>>16,te=P.i(U)&65535;R[2*I+2*U]+=W*te,E(R,2*I+2*U),R[2*I+2*U+1]+=H*te,E(R,2*I+2*U+1),R[2*I+2*U+1]+=W*K,E(R,2*I+2*U+1),R[2*I+2*U+2]+=H*K,E(R,2*I+2*U+2)}for(I=0;I<N;I++)R[I]=R[2*I+1]<<16|R[2*I];for(I=N;I<2*N;I++)R[I]=0;return new o(R,0)};function E(P,N){for(;(P[N]&65535)!=P[N];)P[N+1]+=P[N]>>>16,P[N]&=65535,N++}function b(P,N){this.g=P,this.h=N}function M(P,N){if(v(N))throw Error("division by zero");if(v(P))return new b(h,h);if(_(P))return N=M(S(P),N),new b(S(N.g),S(N.h));if(_(N))return N=M(P,S(N)),new b(S(N.g),N.h);if(30<P.g.length){if(_(P)||_(N))throw Error("slowDivide_ only works with positive integers.");for(var R=f,I=N;0>=I.l(P);)R=k(R),I=k(I);var U=B(R,1),H=B(I,1);for(I=B(I,2),R=B(R,2);!v(I);){var W=H.add(I);0>=W.l(P)&&(U=U.add(R),H=W),I=B(I,1),R=B(R,1)}return N=x(P,U.j(N)),new b(U,N)}for(U=h;0<=P.l(N);){for(R=Math.max(1,Math.floor(P.m()/N.m())),I=Math.ceil(Math.log(R)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),H=c(R),W=H.j(N);_(W)||0<W.l(P);)R-=I,H=c(R),W=H.j(N);v(H)&&(H=f),U=U.add(H),P=x(P,W)}return new b(U,P)}n.A=function(P){return M(this,P).h},n.and=function(P){for(var N=Math.max(this.g.length,P.g.length),R=[],I=0;I<N;I++)R[I]=this.i(I)&P.i(I);return new o(R,this.h&P.h)},n.or=function(P){for(var N=Math.max(this.g.length,P.g.length),R=[],I=0;I<N;I++)R[I]=this.i(I)|P.i(I);return new o(R,this.h|P.h)},n.xor=function(P){for(var N=Math.max(this.g.length,P.g.length),R=[],I=0;I<N;I++)R[I]=this.i(I)^P.i(I);return new o(R,this.h^P.h)};function k(P){for(var N=P.g.length+1,R=[],I=0;I<N;I++)R[I]=P.i(I)<<1|P.i(I-1)>>>31;return new o(R,P.h)}function B(P,N){var R=N>>5;N%=32;for(var I=P.g.length-R,U=[],H=0;H<I;H++)U[H]=0<N?P.i(H+R)>>>N|P.i(H+R+1)<<32-N:P.i(H+R);return new o(U,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_H=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,nf=o}).apply(typeof E8<"u"?E8:typeof self<"u"?self:typeof window<"u"?window:{});var rS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wH,a1,SH,LE,SR,EH,bH,AH;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(A,V,G){return A==Array.prototype||A==Object.prototype||(A[V]=G.value),A};function t(A){A=[typeof globalThis=="object"&&globalThis,A,typeof window=="object"&&window,typeof self=="object"&&self,typeof rS=="object"&&rS];for(var V=0;V<A.length;++V){var G=A[V];if(G&&G.Math==Math)return G}throw Error("Cannot find global object")}var r=t(this);function i(A,V){if(V)e:{var G=r;A=A.split(".");for(var Q=0;Q<A.length-1;Q++){var Ee=A[Q];if(!(Ee in G))break e;G=G[Ee]}A=A[A.length-1],Q=G[A],V=V(Q),V!=Q&&V!=null&&e(G,A,{configurable:!0,writable:!0,value:V})}}function s(A,V){A instanceof String&&(A+="");var G=0,Q=!1,Ee={next:function(){if(!Q&&G<A.length){var Le=G++;return{value:V(Le,A[Le]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return Ee[Symbol.iterator]=function(){return Ee},Ee}i("Array.prototype.values",function(A){return A||function(){return s(this,function(V,G){return G})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(A){var V=typeof A;return V=V!="object"?V:A?Array.isArray(A)?"array":V:"null",V=="array"||V=="object"&&typeof A.length=="number"}function c(A){var V=typeof A;return V=="object"&&A!=null||V=="function"}function u(A,V,G){return A.call.apply(A.bind,arguments)}function h(A,V,G){if(!A)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var Ee=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ee,Q),A.apply(V,Ee)}}return function(){return A.apply(V,arguments)}}function f(A,V,G){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,f.apply(null,arguments)}function p(A,V){var G=Array.prototype.slice.call(arguments,1);return function(){var Q=G.slice();return Q.push.apply(Q,arguments),A.apply(this,Q)}}function v(A,V){function G(){}G.prototype=V.prototype,A.aa=V.prototype,A.prototype=new G,A.prototype.constructor=A,A.Qb=function(Q,Ee,Le){for(var ht=Array(arguments.length-2),Wn=2;Wn<arguments.length;Wn++)ht[Wn-2]=arguments[Wn];return V.prototype[Ee].apply(Q,ht)}}function _(A){const V=A.length;if(0<V){const G=Array(V);for(let Q=0;Q<V;Q++)G[Q]=A[Q];return G}return[]}function S(A,V){for(let G=1;G<arguments.length;G++){const Q=arguments[G];if(l(Q)){const Ee=A.length||0,Le=Q.length||0;A.length=Ee+Le;for(let ht=0;ht<Le;ht++)A[Ee+ht]=Q[ht]}else A.push(Q)}}class x{constructor(V,G){this.i=V,this.j=G,this.h=0,this.g=null}get(){let V;return 0<this.h?(this.h--,V=this.g,this.g=V.next,V.next=null):V=this.i(),V}}function E(A){return/^[\s\xa0]*$/.test(A)}function b(){var A=a.navigator;return A&&(A=A.userAgent)?A:""}function M(A){return M[" "](A),A}M[" "]=function(){};var k=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function B(A,V,G){for(const Q in A)V.call(G,A[Q],Q,A)}function P(A,V){for(const G in A)V.call(void 0,A[G],G,A)}function N(A){const V={};for(const G in A)V[G]=A[G];return V}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(A,V){let G,Q;for(let Ee=1;Ee<arguments.length;Ee++){Q=arguments[Ee];for(G in Q)A[G]=Q[G];for(let Le=0;Le<R.length;Le++)G=R[Le],Object.prototype.hasOwnProperty.call(Q,G)&&(A[G]=Q[G])}}function U(A){var V=1;A=A.split(":");const G=[];for(;0<V&&A.length;)G.push(A.shift()),V--;return A.length&&G.push(A.join(":")),G}function H(A){a.setTimeout(()=>{throw A},0)}function W(){var A=ce;let V=null;return A.g&&(V=A.g,A.g=A.g.next,A.g||(A.h=null),V.next=null),V}class K{constructor(){this.h=this.g=null}add(V,G){const Q=te.get();Q.set(V,G),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var te=new x(()=>new se,A=>A.reset());class se{constructor(){this.next=this.g=this.h=null}set(V,G){this.h=V,this.g=G,this.next=null}reset(){this.next=this.g=this.h=null}}let le,X=!1,ce=new K,oe=()=>{const A=a.Promise.resolve(void 0);le=()=>{A.then(fe)}};var fe=()=>{for(var A;A=W();){try{A.h.call(A.g)}catch(G){H(G)}var V=te;V.j(A),100>V.h&&(V.h++,A.next=V.g,V.g=A)}X=!1};function De(){this.s=this.s,this.C=this.C}De.prototype.s=!1,De.prototype.ma=function(){this.s||(this.s=!0,this.N())},De.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function We(A,V){this.type=A,this.g=this.target=V,this.defaultPrevented=!1}We.prototype.h=function(){this.defaultPrevented=!0};var Qe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var A=!1,V=Object.defineProperty({},"passive",{get:function(){A=!0}});try{const G=()=>{};a.addEventListener("test",G,V),a.removeEventListener("test",G,V)}catch{}return A}();function ve(A,V){if(We.call(this,A?A.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,A){var G=this.type=A.type,Q=A.changedTouches&&A.changedTouches.length?A.changedTouches[0]:null;if(this.target=A.target||A.srcElement,this.g=V,V=A.relatedTarget){if(k){e:{try{M(V.nodeName);var Ee=!0;break e}catch{}Ee=!1}Ee||(V=null)}}else G=="mouseover"?V=A.fromElement:G=="mouseout"&&(V=A.toElement);this.relatedTarget=V,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0),this.button=A.button,this.key=A.key||"",this.ctrlKey=A.ctrlKey,this.altKey=A.altKey,this.shiftKey=A.shiftKey,this.metaKey=A.metaKey,this.pointerId=A.pointerId||0,this.pointerType=typeof A.pointerType=="string"?A.pointerType:Ie[A.pointerType]||"",this.state=A.state,this.i=A,A.defaultPrevented&&ve.aa.h.call(this)}}v(ve,We);var Ie={2:"touch",3:"pen",4:"mouse"};ve.prototype.h=function(){ve.aa.h.call(this);var A=this.i;A.preventDefault?A.preventDefault():A.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),tt=0;function Ke(A,V,G,Q,Ee){this.listener=A,this.proxy=null,this.src=V,this.type=G,this.capture=!!Q,this.ha=Ee,this.key=++tt,this.da=this.fa=!1}function Me(A){A.da=!0,A.listener=null,A.proxy=null,A.src=null,A.ha=null}function Ye(A){this.src=A,this.g={},this.h=0}Ye.prototype.add=function(A,V,G,Q,Ee){var Le=A.toString();A=this.g[Le],A||(A=this.g[Le]=[],this.h++);var ht=ne(A,V,Q,Ee);return-1<ht?(V=A[ht],G||(V.fa=!1)):(V=new Ke(V,this.src,Le,!!Q,Ee),V.fa=G,A.push(V)),V};function Pe(A,V){var G=V.type;if(G in A.g){var Q=A.g[G],Ee=Array.prototype.indexOf.call(Q,V,void 0),Le;(Le=0<=Ee)&&Array.prototype.splice.call(Q,Ee,1),Le&&(Me(V),A.g[G].length==0&&(delete A.g[G],A.h--))}}function ne(A,V,G,Q){for(var Ee=0;Ee<A.length;++Ee){var Le=A[Ee];if(!Le.da&&Le.listener==V&&Le.capture==!!G&&Le.ha==Q)return Ee}return-1}var Be="closure_lm_"+(1e6*Math.random()|0),Re={};function qe(A,V,G,Q,Ee){if(Array.isArray(V)){for(var Le=0;Le<V.length;Le++)qe(A,V[Le],G,Q,Ee);return null}return G=me(G),A&&A[we]?A.K(V,G,c(Q)?!!Q.capture:!1,Ee):ze(A,V,G,!1,Q,Ee)}function ze(A,V,G,Q,Ee,Le){if(!V)throw Error("Invalid event type");var ht=c(Ee)?!!Ee.capture:!!Ee,Wn=ee(A);if(Wn||(A[Be]=Wn=new Ye(A)),G=Wn.add(V,G,Q,ht,Le),G.proxy)return G;if(Q=J(),G.proxy=Q,Q.src=A,Q.listener=G,A.addEventListener)Qe||(Ee=ht),Ee===void 0&&(Ee=!1),A.addEventListener(V.toString(),Q,Ee);else if(A.attachEvent)A.attachEvent(rt(V.toString()),Q);else if(A.addListener&&A.removeListener)A.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return G}function J(){function A(G){return V.call(A.src,A.listener,G)}const V=pt;return A}function be(A,V,G,Q,Ee){if(Array.isArray(V))for(var Le=0;Le<V.length;Le++)be(A,V[Le],G,Q,Ee);else Q=c(Q)?!!Q.capture:!!Q,G=me(G),A&&A[we]?(A=A.i,V=String(V).toString(),V in A.g&&(Le=A.g[V],G=ne(Le,G,Q,Ee),-1<G&&(Me(Le[G]),Array.prototype.splice.call(Le,G,1),Le.length==0&&(delete A.g[V],A.h--)))):A&&(A=ee(A))&&(V=A.g[V.toString()],A=-1,V&&(A=ne(V,G,Q,Ee)),(G=-1<A?V[A]:null)&&Fe(G))}function Fe(A){if(typeof A!="number"&&A&&!A.da){var V=A.src;if(V&&V[we])Pe(V.i,A);else{var G=A.type,Q=A.proxy;V.removeEventListener?V.removeEventListener(G,Q,A.capture):V.detachEvent?V.detachEvent(rt(G),Q):V.addListener&&V.removeListener&&V.removeListener(Q),(G=ee(V))?(Pe(G,A),G.h==0&&(G.src=null,V[Be]=null)):Me(A)}}}function rt(A){return A in Re?Re[A]:Re[A]="on"+A}function pt(A,V){if(A.da)A=!0;else{V=new ve(V,this);var G=A.listener,Q=A.ha||A.src;A.fa&&Fe(A),A=G.call(Q,V)}return A}function ee(A){return A=A[Be],A instanceof Ye?A:null}var q="__closure_events_fn_"+(1e9*Math.random()>>>0);function me(A){return typeof A=="function"?A:(A[q]||(A[q]=function(V){return A.handleEvent(V)}),A[q])}function pe(){De.call(this),this.i=new Ye(this),this.M=this,this.F=null}v(pe,De),pe.prototype[we]=!0,pe.prototype.removeEventListener=function(A,V,G,Q){be(this,A,V,G,Q)};function Ve(A,V){var G,Q=A.F;if(Q)for(G=[];Q;Q=Q.F)G.push(Q);if(A=A.M,Q=V.type||V,typeof V=="string")V=new We(V,A);else if(V instanceof We)V.target=V.target||A;else{var Ee=V;V=new We(Q,A),I(V,Ee)}if(Ee=!0,G)for(var Le=G.length-1;0<=Le;Le--){var ht=V.g=G[Le];Ee=Ue(ht,Q,!0,V)&&Ee}if(ht=V.g=A,Ee=Ue(ht,Q,!0,V)&&Ee,Ee=Ue(ht,Q,!1,V)&&Ee,G)for(Le=0;Le<G.length;Le++)ht=V.g=G[Le],Ee=Ue(ht,Q,!1,V)&&Ee}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var A=this.i,V;for(V in A.g){for(var G=A.g[V],Q=0;Q<G.length;Q++)Me(G[Q]);delete A.g[V],A.h--}}this.F=null},pe.prototype.K=function(A,V,G,Q){return this.i.add(String(A),V,!1,G,Q)},pe.prototype.L=function(A,V,G,Q){return this.i.add(String(A),V,!0,G,Q)};function Ue(A,V,G,Q){if(V=A.i.g[String(V)],!V)return!0;V=V.concat();for(var Ee=!0,Le=0;Le<V.length;++Le){var ht=V[Le];if(ht&&!ht.da&&ht.capture==G){var Wn=ht.listener,ui=ht.ha||ht.src;ht.fa&&Pe(A.i,ht),Ee=Wn.call(ui,Q)!==!1&&Ee}}return Ee&&!Q.defaultPrevented}function Mt(A,V,G){if(typeof A=="function")G&&(A=f(A,G));else if(A&&typeof A.handleEvent=="function")A=f(A.handleEvent,A);else throw Error("Invalid listener argument");return 2147483647<Number(V)?-1:a.setTimeout(A,V||0)}function lt(A){A.g=Mt(()=>{A.g=null,A.i&&(A.i=!1,lt(A))},A.l);const V=A.h;A.h=null,A.m.apply(null,V)}class bt extends De{constructor(V,G){super(),this.m=V,this.l=G,this.h=null,this.i=!1,this.g=null}j(V){this.h=arguments,this.g?this.i=!0:lt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wt(A){De.call(this),this.h=A,this.g={}}v(wt,De);var st=[];function mt(A){B(A.g,function(V,G){this.g.hasOwnProperty(G)&&Fe(V)},A),A.g={}}wt.prototype.N=function(){wt.aa.N.call(this),mt(this)},wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wt=a.JSON.stringify,ue=a.JSON.parse,Te=class{stringify(A){return a.JSON.stringify(A,void 0)}parse(A){return a.JSON.parse(A,void 0)}};function ut(){}ut.prototype.h=null;function he(A){return A.h||(A.h=A.i())}function Je(){}var ot={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gt(){We.call(this,"d")}v(gt,We);function at(){We.call(this,"c")}v(at,We);var Xe={},xt=null;function Bt(){return xt=xt||new pe}Xe.La="serverreachability";function Cn(A){We.call(this,Xe.La,A)}v(Cn,We);function xn(A){const V=Bt();Ve(V,new Cn(V))}Xe.STAT_EVENT="statevent";function $r(A,V){We.call(this,Xe.STAT_EVENT,A),this.stat=V}v($r,We);function Kn(A){const V=Bt();Ve(V,new $r(V,A))}Xe.Ma="timingevent";function Au(A,V){We.call(this,Xe.Ma,A),this.size=V}v(Au,We);function Cs(A,V){if(typeof A!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){A()},V)}function Jo(){this.g=!0}Jo.prototype.xa=function(){this.g=!1};function Zi(A,V,G,Q,Ee,Le){A.info(function(){if(A.g)if(Le)for(var ht="",Wn=Le.split("&"),ui=0;ui<Wn.length;ui++){var zn=Wn[ui].split("=");if(1<zn.length){var lr=zn[0];zn=zn[1];var Gn=lr.split("_");ht=2<=Gn.length&&Gn[1]=="type"?ht+(lr+"="+zn+"&"):ht+(lr+"=redacted&")}}else ht=null;else ht=Le;return"XMLHTTP REQ ("+Q+") [attempt "+Ee+"]: "+V+`
`+G+`
`+ht})}function Gt(A,V,G,Q,Ee,Le,ht){A.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+Ee+"]: "+V+`
`+G+`
`+Le+" "+ht})}function Ui(A,V,G,Q){A.info(function(){return"XMLHTTP TEXT ("+V+"): "+Dl(A,G)+(Q?" "+Q:"")})}function Tu(A,V){A.info(function(){return"TIMEOUT: "+V})}Jo.prototype.info=function(){};function Dl(A,V){if(!A.g)return V;if(!V)return null;try{var G=JSON.parse(V);if(G){for(A=0;A<G.length;A++)if(Array.isArray(G[A])){var Q=G[A];if(!(2>Q.length)){var Ee=Q[1];if(Array.isArray(Ee)&&!(1>Ee.length)){var Le=Ee[0];if(Le!="noop"&&Le!="stop"&&Le!="close")for(var ht=1;ht<Ee.length;ht++)Ee[ht]=""}}}}return Wt(G)}catch{return V}}var tl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bc;function Co(){}v(Co,ut),Co.prototype.g=function(){return new XMLHttpRequest},Co.prototype.i=function(){return{}},bc=new Co;function Mo(A,V,G,Q){this.j=A,this.i=V,this.l=G,this.R=Q||1,this.U=new wt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Cu}function Cu(){this.i=null,this.g="",this.h=!1}var Dh={},Mu={};function Z(A,V,G){A.L=1,A.v=Pi(dn(V)),A.m=G,A.P=!0,xe(A,null)}function xe(A,V){A.F=Date.now(),_e(A),A.A=dn(A.v);var G=A.A,Q=A.R;Array.isArray(Q)||(Q=[String(Q)]),kh(G.i,"t",Q),A.C=0,G=A.j.J,A.h=new Cu,A.g=ku(A.j,G?V:null,!A.m),0<A.O&&(A.M=new bt(f(A.Y,A,A.g),A.O)),V=A.U,G=A.g,Q=A.ca;var Ee="readystatechange";Array.isArray(Ee)||(Ee&&(st[0]=Ee.toString()),Ee=st);for(var Le=0;Le<Ee.length;Le++){var ht=qe(G,Ee[Le],Q||V.handleEvent,!1,V.h||V);if(!ht)break;V.g[ht.key]=ht}V=A.H?N(A.H):{},A.m?(A.u||(A.u="POST"),V["Content-Type"]="application/x-www-form-urlencoded",A.g.ea(A.A,A.u,A.m,V)):(A.u="GET",A.g.ea(A.A,A.u,null,V)),xn(),Zi(A.i,A.u,A.A,A.l,A.R,A.m)}Mo.prototype.ca=function(A){A=A.target;const V=this.M;V&&Nr(A)==3?V.j():this.Y(A)},Mo.prototype.Y=function(A){try{if(A==this.g)e:{const Gn=Nr(this.g);var V=this.g.Ba();const Si=this.g.Z();if(!(3>Gn)&&(Gn!=3||this.g&&(this.h.h||this.g.oa()||Mc(this.g)))){this.J||Gn!=4||V==7||(V==8||0>=Si?xn(3):xn(2)),yt(this);var G=this.g.Z();this.X=G;t:if(ke(this)){var Q=Mc(this.g);A="";var Ee=Q.length,Le=Nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_t(this),Tt(this);var ht="";break t}this.h.i=new a.TextDecoder}for(V=0;V<Ee;V++)this.h.h=!0,A+=this.h.i.decode(Q[V],{stream:!(Le&&V==Ee-1)});Q.length=0,this.h.g+=A,this.C=0,ht=this.h.g}else ht=this.g.oa();if(this.o=G==200,Gt(this.i,this.u,this.A,this.l,this.R,Gn,G),this.o){if(this.T&&!this.K){t:{if(this.g){var Wn,ui=this.g;if((Wn=ui.g?ui.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Wn)){var zn=Wn;break t}}zn=null}if(G=zn)Ui(this.i,this.l,G,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kt(this,G);else{this.o=!1,this.s=3,Kn(12),_t(this),Tt(this);break e}}if(this.P){G=!0;let _n;for(;!this.J&&this.C<ht.length;)if(_n=Oe(this,ht),_n==Mu){Gn==4&&(this.s=4,Kn(14),G=!1),Ui(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==Dh){this.s=4,Kn(15),Ui(this.i,this.l,ht,"[Invalid Chunk]"),G=!1;break}else Ui(this.i,this.l,_n,null),Kt(this,_n);if(ke(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gn!=4||ht.length!=0||this.h.h||(this.s=1,Kn(16),G=!1),this.o=this.o&&G,!G)Ui(this.i,this.l,ht,"[Invalid Chunked Response]"),_t(this),Tt(this);else if(0<ht.length&&!this.W){this.W=!0;var lr=this.j;lr.g==this&&lr.ba&&!lr.M&&(lr.j.info("Great, no buffering proxy detected. Bytes received: "+ht.length),eo(lr),lr.M=!0,Kn(11))}}else Ui(this.i,this.l,ht,null),Kt(this,ht);Gn==4&&_t(this),this.o&&!this.J&&(Gn==4?jh(this.j,this):(this.o=!1,_e(this)))}else Fh(this.g),G==400&&0<ht.indexOf("Unknown SID")?(this.s=3,Kn(12)):(this.s=0,Kn(13)),_t(this),Tt(this)}}}catch{}finally{}};function ke(A){return A.g?A.u=="GET"&&A.L!=2&&A.j.Ca:!1}function Oe(A,V){var G=A.C,Q=V.indexOf(`
`,G);return Q==-1?Mu:(G=Number(V.substring(G,Q)),isNaN(G)?Dh:(Q+=1,Q+G>V.length?Mu:(V=V.slice(Q,Q+G),A.C=Q+G,V)))}Mo.prototype.cancel=function(){this.J=!0,_t(this)};function _e(A){A.S=Date.now()+A.I,ct(A,A.I)}function ct(A,V){if(A.B!=null)throw Error("WatchDog timer not null");A.B=Cs(f(A.ba,A),V)}function yt(A){A.B&&(a.clearTimeout(A.B),A.B=null)}Mo.prototype.ba=function(){this.B=null;const A=Date.now();0<=A-this.S?(Tu(this.i,this.A),this.L!=2&&(xn(),Kn(17)),_t(this),this.s=2,Tt(this)):ct(this,this.S-A)};function Tt(A){A.j.G==0||A.J||jh(A.j,A)}function _t(A){yt(A);var V=A.M;V&&typeof V.ma=="function"&&V.ma(),A.M=null,mt(A.U),A.g&&(V=A.g,A.g=null,V.abort(),V.ma())}function Kt(A,V){try{var G=A.j;if(G.G!=0&&(G.g==A||Lt(G.h,A))){if(!A.K&&Lt(G.h,A)&&G.G==3){try{var Q=G.Da.g.parse(V)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var Ee=Q;if(Ee[0]==0){e:if(!G.u){if(G.g)if(G.g.F+3e3<A.F)Bl(G),Nu(G);else break e;Du(G),Kn(18)}}else G.za=Ee[1],0<G.za-G.T&&37500>Ee[2]&&G.F&&G.v==0&&!G.C&&(G.C=Cs(f(G.Za,G),6e3));if(1>=Vt(G.h)&&G.ca){try{G.ca()}catch{}G.ca=void 0}}else rl(G,11)}else if((A.K||G.g==A)&&Bl(G),!E(V))for(Ee=G.Da.g.parse(V),V=0;V<Ee.length;V++){let zn=Ee[V];if(G.T=zn[0],zn=zn[1],G.G==2)if(zn[0]=="c"){G.K=zn[1],G.ia=zn[2];const lr=zn[3];lr!=null&&(G.la=lr,G.j.info("VER="+G.la));const Gn=zn[4];Gn!=null&&(G.Aa=Gn,G.j.info("SVER="+G.Aa));const Si=zn[5];Si!=null&&typeof Si=="number"&&0<Si&&(Q=1.5*Si,G.L=Q,G.j.info("backChannelRequestTimeoutMs_="+Q)),Q=G;const _n=A.g;if(_n){const il=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(il){var Le=Q.h;Le.g||il.indexOf("spdy")==-1&&il.indexOf("quic")==-1&&il.indexOf("h2")==-1||(Le.j=Le.l,Le.g=new Set,Le.h&&(Pt(Le,Le.h),Le.h=null))}if(Q.D){const Ei=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;Ei&&(Q.ya=Ei,$t(Q.I,Q.D,Ei))}}G.G=3,G.l&&G.l.ua(),G.ba&&(G.R=Date.now()-A.F,G.j.info("Handshake RTT: "+G.R+"ms")),Q=G;var ht=A;if(Q.qa=Nc(Q,Q.J?Q.ia:null,Q.W),ht.K){un(Q.h,ht);var Wn=ht,ui=Q.L;ui&&(Wn.I=ui),Wn.B&&(yt(Wn),_e(Wn)),Q.g=ht}else Po(Q);0<G.i.length&&nl(G)}else zn[0]!="stop"&&zn[0]!="close"||rl(G,7);else G.G==3&&(zn[0]=="stop"||zn[0]=="close"?zn[0]=="stop"?rl(G,7):Ic(G):zn[0]!="noop"&&G.l&&G.l.ta(zn),G.v=0)}}xn(4)}catch{}}var Xt=class{constructor(A,V){this.g=A,this.map=V}};function kt(A){this.l=A||10,a.PerformanceNavigationTiming?(A=a.performance.getEntriesByType("navigation"),A=0<A.length&&(A[0].nextHopProtocol=="hq"||A[0].nextHopProtocol=="h2")):A=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=A?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ot(A){return A.h?!0:A.g?A.g.size>=A.j:!1}function Vt(A){return A.h?1:A.g?A.g.size:0}function Lt(A,V){return A.h?A.h==V:A.g?A.g.has(V):!1}function Pt(A,V){A.g?A.g.add(V):A.h=V}function un(A,V){A.h&&A.h==V?A.h=null:A.g&&A.g.has(V)&&A.g.delete(V)}kt.prototype.cancel=function(){if(this.i=Rt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const A of this.g.values())A.cancel();this.g.clear()}};function Rt(A){if(A.h!=null)return A.i.concat(A.h.D);if(A.g!=null&&A.g.size!==0){let V=A.i;for(const G of A.g.values())V=V.concat(G.D);return V}return _(A.i)}function Ln(A){if(A.V&&typeof A.V=="function")return A.V();if(typeof Map<"u"&&A instanceof Map||typeof Set<"u"&&A instanceof Set)return Array.from(A.values());if(typeof A=="string")return A.split("");if(l(A)){for(var V=[],G=A.length,Q=0;Q<G;Q++)V.push(A[Q]);return V}V=[],G=0;for(Q in A)V[G++]=A[Q];return V}function tn(A){if(A.na&&typeof A.na=="function")return A.na();if(!A.V||typeof A.V!="function"){if(typeof Map<"u"&&A instanceof Map)return Array.from(A.keys());if(!(typeof Set<"u"&&A instanceof Set)){if(l(A)||typeof A=="string"){var V=[];A=A.length;for(var G=0;G<A;G++)V.push(G);return V}V=[],G=0;for(const Q in A)V[G++]=Q;return V}}}function qt(A,V){if(A.forEach&&typeof A.forEach=="function")A.forEach(V,void 0);else if(l(A)||typeof A=="string")Array.prototype.forEach.call(A,V,void 0);else for(var G=tn(A),Q=Ln(A),Ee=Q.length,Le=0;Le<Ee;Le++)V.call(void 0,Q[Le],G&&G[Le],A)}var Jn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wi(A,V){if(A){A=A.split("&");for(var G=0;G<A.length;G++){var Q=A[G].indexOf("="),Ee=null;if(0<=Q){var Le=A[G].substring(0,Q);Ee=A[G].substring(Q+1)}else Le=A[G];V(Le,Ee?decodeURIComponent(Ee.replace(/\+/g," ")):"")}}}function li(A){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,A instanceof li){this.h=A.h,dr(this,A.j),this.o=A.o,this.g=A.g,ni(this,A.s),this.l=A.l;var V=A.i,G=new Ll;G.i=V.i,V.g&&(G.g=new Map(V.g),G.h=V.h),Mr(this,G),this.m=A.m}else A&&(V=String(A).match(Jn))?(this.h=!1,dr(this,V[1]||"",!0),this.o=ri(V[2]||""),this.g=ri(V[3]||"",!0),ni(this,V[4]),this.l=ri(V[5]||"",!0),Mr(this,V[6]||"",!0),this.m=ri(V[7]||"")):(this.h=!1,this.i=new Ll(null,this.h))}li.prototype.toString=function(){var A=[],V=this.j;V&&A.push(Ms(V,Tc,!0),":");var G=this.g;return(G||V=="file")&&(A.push("//"),(V=this.o)&&A.push(Ms(V,Tc,!0),"@"),A.push(encodeURIComponent(String(G)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),G=this.s,G!=null&&A.push(":",String(G))),(G=this.l)&&(this.g&&G.charAt(0)!="/"&&A.push("/"),A.push(Ms(G,G.charAt(0)=="/"?Iu:jf,!0))),(G=this.i.toString())&&A.push("?",G),(G=this.m)&&A.push("#",Ms(G,Ol)),A.join("")};function dn(A){return new li(A)}function dr(A,V,G){A.j=G?ri(V,!0):V,A.j&&(A.j=A.j.replace(/:$/,""))}function ni(A,V){if(V){if(V=Number(V),isNaN(V)||0>V)throw Error("Bad port number "+V);A.s=V}else A.s=null}function Mr(A,V,G){V instanceof Ll?(A.i=V,ea(A.i,A.h)):(G||(V=Ms(V,Cc)),A.i=new Ll(V,A.h))}function $t(A,V,G){A.i.set(V,G)}function Pi(A){return $t(A,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),A}function ri(A,V){return A?V?decodeURI(A.replace(/%25/g,"%2525")):decodeURIComponent(A):""}function Ms(A,V,G){return typeof A=="string"?(A=encodeURI(A).replace(V,Ac),G&&(A=A.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A):null}function Ac(A){return A=A.charCodeAt(0),"%"+(A>>4&15).toString(16)+(A&15).toString(16)}var Tc=/[#\/\?@]/g,jf=/[#\?:]/g,Iu=/[#\?]/g,Cc=/[#\?@]/g,Ol=/#/g;function Ll(A,V){this.h=this.g=null,this.i=A||null,this.j=!!V}function Is(A){A.g||(A.g=new Map,A.h=0,A.i&&wi(A.i,function(V,G){A.add(decodeURIComponent(V.replace(/\+/g," ")),G)}))}n=Ll.prototype,n.add=function(A,V){Is(this),this.i=null,A=sn(this,A);var G=this.g.get(A);return G||this.g.set(A,G=[]),G.push(V),this.h+=1,this};function Vn(A,V){Is(A),V=sn(A,V),A.g.has(V)&&(A.i=null,A.h-=A.g.get(V).length,A.g.delete(V))}function Pu(A,V){return Is(A),V=sn(A,V),A.g.has(V)}n.forEach=function(A,V){Is(this),this.g.forEach(function(G,Q){G.forEach(function(Ee){A.call(V,Ee,Q,this)},this)},this)},n.na=function(){Is(this);const A=Array.from(this.g.values()),V=Array.from(this.g.keys()),G=[];for(let Q=0;Q<V.length;Q++){const Ee=A[Q];for(let Le=0;Le<Ee.length;Le++)G.push(V[Q])}return G},n.V=function(A){Is(this);let V=[];if(typeof A=="string")Pu(this,A)&&(V=V.concat(this.g.get(sn(this,A))));else{A=Array.from(this.g.values());for(let G=0;G<A.length;G++)V=V.concat(A[G])}return V},n.set=function(A,V){return Is(this),this.i=null,A=sn(this,A),Pu(this,A)&&(this.h-=this.g.get(A).length),this.g.set(A,[V]),this.h+=1,this},n.get=function(A,V){return A?(A=this.V(A),0<A.length?String(A[0]):V):V};function kh(A,V,G){Vn(A,V),0<G.length&&(A.i=null,A.g.set(sn(A,V),_(G)),A.h+=G.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const A=[],V=Array.from(this.g.keys());for(var G=0;G<V.length;G++){var Q=V[G];const Le=encodeURIComponent(String(Q)),ht=this.V(Q);for(Q=0;Q<ht.length;Q++){var Ee=Le;ht[Q]!==""&&(Ee+="="+encodeURIComponent(String(ht[Q]))),A.push(Ee)}}return this.i=A.join("&")};function sn(A,V){return V=String(V),A.j&&(V=V.toLowerCase()),V}function ea(A,V){V&&!A.j&&(Is(A),A.i=null,A.g.forEach(function(G,Q){var Ee=Q.toLowerCase();Q!=Ee&&(Vn(this,Q),kh(this,Ee,G))},A)),A.j=V}function mr(A,V){const G=new Jo;if(a.Image){const Q=new Image;Q.onload=p(qs,G,"TestLoadImage: loaded",!0,V,Q),Q.onerror=p(qs,G,"TestLoadImage: error",!1,V,Q),Q.onabort=p(qs,G,"TestLoadImage: abort",!1,V,Q),Q.ontimeout=p(qs,G,"TestLoadImage: timeout",!1,V,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=A}else V(!1)}function ci(A,V){const G=new Jo,Q=new AbortController,Ee=setTimeout(()=>{Q.abort(),qs(G,"TestPingServer: timeout",!1,V)},1e4);fetch(A,{signal:Q.signal}).then(Le=>{clearTimeout(Ee),Le.ok?qs(G,"TestPingServer: ok",!0,V):qs(G,"TestPingServer: server error",!1,V)}).catch(()=>{clearTimeout(Ee),qs(G,"TestPingServer: error",!1,V)})}function qs(A,V,G,Q,Ee){try{Ee&&(Ee.onload=null,Ee.onerror=null,Ee.onabort=null,Ee.ontimeout=null),Q(G)}catch{}}function Vf(){this.g=new Te}function Ru(A,V,G){const Q=G||"";try{qt(A,function(Ee,Le){let ht=Ee;c(Ee)&&(ht=Wt(Ee)),V.push(Q+Le+"="+encodeURIComponent(ht))})}catch(Ee){throw V.push(Q+"type="+encodeURIComponent("_badmap")),Ee}}function ta(A){this.l=A.Ub||null,this.j=A.eb||!1}v(ta,ut),ta.prototype.g=function(){return new Pa(this.l,this.j)},ta.prototype.i=function(A){return function(){return A}}({});function Pa(A,V){pe.call(this),this.D=A,this.o=V,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Pa,pe),n=Pa.prototype,n.open=function(A,V){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=A,this.A=V,this.readyState=1,Io(this)},n.send=function(A){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const V={headers:this.u,method:this.B,credentials:this.m,cache:void 0};A&&(V.body=A),(this.D||a).fetch(new Request(this.A,V)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xr(this)),this.readyState=0},n.Sa=function(A){if(this.g&&(this.l=A,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=A.headers,this.readyState=2,Io(this)),this.g&&(this.readyState=3,Io(this),this.g)))if(this.responseType==="arraybuffer")A.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in A){if(this.j=A.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qi(this)}else A.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qi(A){A.j.read().then(A.Pa.bind(A)).catch(A.ga.bind(A))}n.Pa=function(A){if(this.g){if(this.o&&A.value)this.response.push(A.value);else if(!this.o){var V=A.value?A.value:new Uint8Array(0);(V=this.v.decode(V,{stream:!A.done}))&&(this.response=this.responseText+=V)}A.done?Xr(this):Io(this),this.readyState==3&&Qi(this)}},n.Ra=function(A){this.g&&(this.response=this.responseText=A,Xr(this))},n.Qa=function(A){this.g&&(this.response=A,Xr(this))},n.ga=function(){this.g&&Xr(this)};function Xr(A){A.readyState=4,A.l=null,A.j=null,A.v=null,Io(A)}n.setRequestHeader=function(A,V){this.u.append(A,V)},n.getResponseHeader=function(A){return this.h&&this.h.get(A.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const A=[],V=this.h.entries();for(var G=V.next();!G.done;)G=G.value,A.push(G[0]+": "+G[1]),G=V.next();return A.join(`\r
`)};function Io(A){A.onreadystatechange&&A.onreadystatechange.call(A)}Object.defineProperty(Pa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(A){this.m=A?"include":"same-origin"}});function Ys(A){let V="";return B(A,function(G,Q){V+=Q,V+=":",V+=G,V+=`\r
`}),V}function Ks(A,V,G){e:{for(Q in G){var Q=!1;break e}Q=!0}Q||(G=Ys(G),typeof A=="string"?G!=null&&encodeURIComponent(String(G)):$t(A,V,G))}function wr(A){pe.call(this),this.headers=new Map,this.o=A||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(wr,pe);var Oh=/^https?$/i,Lh=["POST","PUT"];n=wr.prototype,n.Ha=function(A){this.J=A},n.ea=function(A,V,G,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+A);V=V?V.toUpperCase():"GET",this.D=A,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bc.g(),this.v=this.o?he(this.o):he(bc),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(V,String(A),!0),this.B=!1}catch(Le){Gm(this,Le);return}if(A=G||"",G=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var Ee in Q)G.set(Ee,Q[Ee]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const Le of Q.keys())G.set(Le,Q.get(Le));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(G.keys()).find(Le=>Le.toLowerCase()=="content-type"),Ee=a.FormData&&A instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Lh,V,void 0))||Q||Ee||G.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Le,ht]of G)this.g.setRequestHeader(Le,ht);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qs(this),this.u=!0,this.g.send(A),this.u=!1}catch(Le){Gm(this,Le)}};function Gm(A,V){A.h=!1,A.g&&(A.j=!0,A.g.abort(),A.j=!1),A.l=V,A.m=5,Zs(A),Fl(A)}function Zs(A){A.A||(A.A=!0,Ve(A,"complete"),Ve(A,"error"))}n.abort=function(A){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=A||7,Ve(this,"complete"),Ve(this,"abort"),Fl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fl(this,!0)),wr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Fn(this):this.bb())},n.bb=function(){Fn(this)};function Fn(A){if(A.h&&typeof o<"u"&&(!A.v[1]||Nr(A)!=4||A.Z()!=2)){if(A.u&&Nr(A)==4)Mt(A.Ea,0,A);else if(Ve(A,"readystatechange"),Nr(A)==4){A.h=!1;try{const ht=A.Z();e:switch(ht){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var V=!0;break e;default:V=!1}var G;if(!(G=V)){var Q;if(Q=ht===0){var Ee=String(A.D).match(Jn)[1]||null;!Ee&&a.self&&a.self.location&&(Ee=a.self.location.protocol.slice(0,-1)),Q=!Oh.test(Ee?Ee.toLowerCase():"")}G=Q}if(G)Ve(A,"complete"),Ve(A,"success");else{A.m=6;try{var Le=2<Nr(A)?A.g.statusText:""}catch{Le=""}A.l=Le+" ["+A.Z()+"]",Zs(A)}}finally{Fl(A)}}}}function Fl(A,V){if(A.g){Qs(A);const G=A.g,Q=A.v[0]?()=>{}:null;A.g=null,A.v=null,V||Ve(A,"ready");try{G.onreadystatechange=Q}catch{}}}function Qs(A){A.I&&(a.clearTimeout(A.I),A.I=null)}n.isActive=function(){return!!this.g};function Nr(A){return A.g?A.g.readyState:0}n.Z=function(){try{return 2<Nr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(A){if(this.g){var V=this.g.responseText;return A&&V.indexOf(A)==0&&(V=V.substring(A.length)),ue(V)}};function Mc(A){try{if(!A.g)return null;if("response"in A.g)return A.g.response;switch(A.H){case"":case"text":return A.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in A.g)return A.g.mozResponseArrayBuffer}return null}catch{return null}}function Fh(A){const V={};A=(A.g&&2<=Nr(A)&&A.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<A.length;Q++){if(E(A[Q]))continue;var G=U(A[Q]);const Ee=G[0];if(G=G[1],typeof G!="string")continue;G=G.trim();const Le=V[Ee]||[];V[Ee]=Le,Le.push(G)}P(V,function(Q){return Q.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Js(A,V,G){return G&&G.internalChannelParams&&G.internalChannelParams[A]||V}function Bh(A){this.Aa=0,this.i=[],this.j=new Jo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Js("failFast",!1,A),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Js("baseRetryDelayMs",5e3,A),this.cb=Js("retryDelaySeedMs",1e4,A),this.Wa=Js("forwardChannelMaxRetries",2,A),this.wa=Js("forwardChannelRequestTimeoutMs",2e4,A),this.pa=A&&A.xmlHttpFactory||void 0,this.Xa=A&&A.Tb||void 0,this.Ca=A&&A.useFetchStreams||!1,this.L=void 0,this.J=A&&A.supportsCrossDomainXhr||!1,this.K="",this.h=new kt(A&&A.concurrentRequestLimit),this.Da=new Vf,this.P=A&&A.fastHandshake||!1,this.O=A&&A.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=A&&A.Rb||!1,A&&A.xa&&this.j.xa(),A&&A.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&A&&A.detectBufferingProxy||!1,this.ja=void 0,A&&A.longPollingTimeout&&0<A.longPollingTimeout&&(this.ja=A.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Bh.prototype,n.la=8,n.G=1,n.connect=function(A,V,G,Q){Kn(0),this.W=A,this.H=V||{},G&&Q!==void 0&&(this.H.OSID=G,this.H.OAID=Q),this.F=this.X,this.I=Nc(this,null,this.W),nl(this)};function Ic(A){if(Uh(A),A.G==3){var V=A.U++,G=dn(A.I);if($t(G,"SID",A.K),$t(G,"RID",V),$t(G,"TYPE","terminate"),ms(A,G),V=new Mo(A,A.j,V),V.L=2,V.v=Pi(dn(G)),G=!1,a.navigator&&a.navigator.sendBeacon)try{G=a.navigator.sendBeacon(V.v.toString(),"")}catch{}!G&&a.Image&&(new Image().src=V.v,G=!0),G||(V.g=ku(V.j,null),V.g.ea(V.v)),V.F=Date.now(),_e(V)}zf(A)}function Nu(A){A.g&&(eo(A),A.g.cancel(),A.g=null)}function Uh(A){Nu(A),A.u&&(a.clearTimeout(A.u),A.u=null),Bl(A),A.h.cancel(),A.s&&(typeof A.s=="number"&&a.clearTimeout(A.s),A.s=null)}function nl(A){if(!Ot(A.h)&&!A.s){A.s=!0;var V=A.Ga;le||oe(),X||(le(),X=!0),ce.add(V,A),A.B=0}}function Pc(A,V){return Vt(A.h)>=A.h.j-(A.s?1:0)?!1:A.s?(A.i=V.D.concat(A.i),!0):A.G==1||A.G==2||A.B>=(A.Va?0:A.Wa)?!1:(A.s=Cs(f(A.Ga,A,V),Rc(A,A.B)),A.B++,!0)}n.Ga=function(A){if(this.s)if(this.s=null,this.G==1){if(!A){this.U=Math.floor(1e5*Math.random()),A=this.U++;const Ee=new Mo(this,this.j,A);let Le=this.o;if(this.S&&(Le?(Le=N(Le),I(Le,this.S)):Le=this.S),this.m!==null||this.O||(Ee.H=Le,Le=null),this.P)e:{for(var V=0,G=0;G<this.i.length;G++){t:{var Q=this.i[G];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(V+=Q,4096<V){V=G;break e}if(V===4096||G===this.i.length-1){V=G+1;break e}}V=1e3}else V=1e3;V=na(this,Ee,V),G=dn(this.I),$t(G,"RID",A),$t(G,"CVER",22),this.D&&$t(G,"X-HTTP-Session-Id",this.D),ms(this,G),Le&&(this.O?V="headers="+encodeURIComponent(String(Ys(Le)))+"&"+V:this.m&&Ks(G,this.m,Le)),Pt(this.h,Ee),this.Ua&&$t(G,"TYPE","init"),this.P?($t(G,"$req",V),$t(G,"SID","null"),Ee.T=!0,Z(Ee,G,null)):Z(Ee,G,V),this.G=2}}else this.G==3&&(A?Fr(this,A):this.i.length==0||Ot(this.h)||Fr(this))};function Fr(A,V){var G;V?G=V.l:G=A.U++;const Q=dn(A.I);$t(Q,"SID",A.K),$t(Q,"RID",G),$t(Q,"AID",A.T),ms(A,Q),A.m&&A.o&&Ks(Q,A.m,A.o),G=new Mo(A,A.j,G,A.B+1),A.m===null&&(G.H=A.o),V&&(A.i=V.D.concat(A.i)),V=na(A,G,1e3),G.I=Math.round(.5*A.wa)+Math.round(.5*A.wa*Math.random()),Pt(A.h,G),Z(G,Q,V)}function ms(A,V){A.H&&B(A.H,function(G,Q){$t(V,Q,G)}),A.l&&qt({},function(G,Q){$t(V,Q,G)})}function na(A,V,G){G=Math.min(A.i.length,G);var Q=A.l?f(A.l.Na,A.l,A):null;e:{var Ee=A.i;let Le=-1;for(;;){const ht=["count="+G];Le==-1?0<G?(Le=Ee[0].g,ht.push("ofs="+Le)):Le=0:ht.push("ofs="+Le);let Wn=!0;for(let ui=0;ui<G;ui++){let zn=Ee[ui].g;const lr=Ee[ui].map;if(zn-=Le,0>zn)Le=Math.max(0,Ee[ui].g-100),Wn=!1;else try{Ru(lr,ht,"req"+zn+"_")}catch{Q&&Q(lr)}}if(Wn){Q=ht.join("&");break e}}}return A=A.i.splice(0,G),V.D=A,Q}function Po(A){if(!A.g&&!A.u){A.Y=1;var V=A.Fa;le||oe(),X||(le(),X=!0),ce.add(V,A),A.v=0}}function Du(A){return A.g||A.u||3<=A.v?!1:(A.Y++,A.u=Cs(f(A.Fa,A),Rc(A,A.v)),A.v++,!0)}n.Fa=function(){if(this.u=null,Ro(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var A=2*this.R;this.j.info("BP detection timer enabled: "+A),this.A=Cs(f(this.ab,this),A)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kn(10),Nu(this),Ro(this))};function eo(A){A.A!=null&&(a.clearTimeout(A.A),A.A=null)}function Ro(A){A.g=new Mo(A,A.j,"rpc",A.Y),A.m===null&&(A.g.H=A.o),A.g.O=0;var V=dn(A.qa);$t(V,"RID","rpc"),$t(V,"SID",A.K),$t(V,"AID",A.T),$t(V,"CI",A.F?"0":"1"),!A.F&&A.ja&&$t(V,"TO",A.ja),$t(V,"TYPE","xmlhttp"),ms(A,V),A.m&&A.o&&Ks(V,A.m,A.o),A.L&&(A.g.I=A.L);var G=A.g;A=A.ia,G.L=1,G.v=Pi(dn(V)),G.m=null,G.P=!0,xe(G,A)}n.Za=function(){this.C!=null&&(this.C=null,Nu(this),Du(this),Kn(19))};function Bl(A){A.C!=null&&(a.clearTimeout(A.C),A.C=null)}function jh(A,V){var G=null;if(A.g==V){Bl(A),eo(A),A.g=null;var Q=2}else if(Lt(A.h,V))G=V.D,un(A.h,V),Q=1;else return;if(A.G!=0){if(V.o)if(Q==1){G=V.m?V.m.length:0,V=Date.now()-V.F;var Ee=A.B;Q=Bt(),Ve(Q,new Au(Q,G)),nl(A)}else Po(A);else if(Ee=V.s,Ee==3||Ee==0&&0<V.X||!(Q==1&&Pc(A,V)||Q==2&&Du(A)))switch(G&&0<G.length&&(V=A.h,V.i=V.i.concat(G)),Ee){case 1:rl(A,5);break;case 4:rl(A,10);break;case 3:rl(A,6);break;default:rl(A,2)}}}function Rc(A,V){let G=A.Ta+Math.floor(Math.random()*A.cb);return A.isActive()||(G*=2),G*V}function rl(A,V){if(A.j.info("Error code "+V),V==2){var G=f(A.fb,A),Q=A.Xa;const Ee=!Q;Q=new li(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||dr(Q,"https"),Pi(Q),Ee?mr(Q.toString(),G):ci(Q.toString(),G)}else Kn(2);A.G=0,A.l&&A.l.sa(V),zf(A),Uh(A)}n.fb=function(A){A?(this.j.info("Successfully pinged google.com"),Kn(2)):(this.j.info("Failed to ping google.com"),Kn(1))};function zf(A){if(A.G=0,A.ka=[],A.l){const V=Rt(A.h);(V.length!=0||A.i.length!=0)&&(S(A.ka,V),S(A.ka,A.i),A.h.i.length=0,_(A.i),A.i.length=0),A.l.ra()}}function Nc(A,V,G){var Q=G instanceof li?dn(G):new li(G);if(Q.g!="")V&&(Q.g=V+"."+Q.g),ni(Q,Q.s);else{var Ee=a.location;Q=Ee.protocol,V=V?V+"."+Ee.hostname:Ee.hostname,Ee=+Ee.port;var Le=new li(null);Q&&dr(Le,Q),V&&(Le.g=V),Ee&&ni(Le,Ee),G&&(Le.l=G),Q=Le}return G=A.D,V=A.ya,G&&V&&$t(Q,G,V),$t(Q,"VER",A.la),ms(A,Q),Q}function ku(A,V,G){if(V&&!A.J)throw Error("Can't create secondary domain capable XhrIo object.");return V=A.Ca&&!A.pa?new wr(new ta({eb:G})):new wr(A.pa),V.Ha(A.J),V}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vh(){}n=Vh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Dc(){}Dc.prototype.g=function(A,V){return new Ri(A,V)};function Ri(A,V){pe.call(this),this.g=new Bh(V),this.l=A,this.h=V&&V.messageUrlParams||null,A=V&&V.messageHeaders||null,V&&V.clientProtocolHeaderRequired&&(A?A["X-Client-Protocol"]="webchannel":A={"X-Client-Protocol":"webchannel"}),this.g.o=A,A=V&&V.initMessageHeaders||null,V&&V.messageContentType&&(A?A["X-WebChannel-Content-Type"]=V.messageContentType:A={"X-WebChannel-Content-Type":V.messageContentType}),V&&V.va&&(A?A["X-WebChannel-Client-Profile"]=V.va:A={"X-WebChannel-Client-Profile":V.va}),this.g.S=A,(A=V&&V.Sb)&&!E(A)&&(this.g.m=A),this.v=V&&V.supportsCrossDomainXhr||!1,this.u=V&&V.sendRawJson||!1,(V=V&&V.httpSessionIdParam)&&!E(V)&&(this.g.D=V,A=this.h,A!==null&&V in A&&(A=this.h,V in A&&delete A[V])),this.j=new Ji(this)}v(Ri,pe),Ri.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ri.prototype.close=function(){Ic(this.g)},Ri.prototype.o=function(A){var V=this.g;if(typeof A=="string"){var G={};G.__data__=A,A=G}else this.u&&(G={},G.__data__=Wt(A),A=G);V.i.push(new Xt(V.Ya++,A)),V.G==3&&nl(V)},Ri.prototype.N=function(){this.g.l=null,delete this.j,Ic(this.g),delete this.g,Ri.aa.N.call(this)};function ra(A){gt.call(this),A.__headers__&&(this.headers=A.__headers__,this.statusCode=A.__status__,delete A.__headers__,delete A.__status__);var V=A.__sm__;if(V){e:{for(const G in V){A=G;break e}A=void 0}(this.i=A)&&(A=this.i,V=V!==null&&A in V?V[A]:void 0),this.data=V}else this.data=A}v(ra,gt);function Ul(){at.call(this),this.status=1}v(Ul,at);function Ji(A){this.g=A}v(Ji,Vh),Ji.prototype.ua=function(){Ve(this.g,"a")},Ji.prototype.ta=function(A){Ve(this.g,new ra(A))},Ji.prototype.sa=function(A){Ve(this.g,new Ul)},Ji.prototype.ra=function(){Ve(this.g,"b")},Dc.prototype.createWebChannel=Dc.prototype.g,Ri.prototype.send=Ri.prototype.o,Ri.prototype.open=Ri.prototype.m,Ri.prototype.close=Ri.prototype.close,AH=function(){return new Dc},bH=function(){return Bt()},EH=Xe,SR={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tl.NO_ERROR=0,tl.TIMEOUT=8,tl.HTTP_ERROR=6,LE=tl,kl.COMPLETE="complete",SH=kl,Je.EventType=ot,ot.OPEN="a",ot.CLOSE="b",ot.ERROR="c",ot.MESSAGE="d",pe.prototype.listen=pe.prototype.K,a1=Je,wr.prototype.listenOnce=wr.prototype.L,wr.prototype.getLastError=wr.prototype.Ka,wr.prototype.getLastErrorCode=wr.prototype.Ba,wr.prototype.getStatus=wr.prototype.Z,wr.prototype.getResponseJson=wr.prototype.Oa,wr.prototype.getResponseText=wr.prototype.oa,wr.prototype.send=wr.prototype.ea,wr.prototype.setWithCredentials=wr.prototype.Ha,wH=wr}).apply(typeof rS<"u"?rS:typeof self<"u"?self:typeof window<"u"?window:{});const b8="@firebase/firestore",A8="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mo=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};mo.UNAUTHENTICATED=new mo(null),mo.GOOGLE_CREDENTIALS=new mo("google-credentials-uid"),mo.FIRST_PARTY=new mo("first-party-uid"),mo.MOCK_USER=new mo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jv="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm=new RA("@firebase/firestore");function Lg(){return fm.logLevel}function Nt(n,...e){if(fm.logLevel<=qn.DEBUG){const t=e.map(TD);fm.debug(`Firestore (${jv}): ${n}`,...t)}}function xh(n,...e){if(fm.logLevel<=qn.ERROR){const t=e.map(TD);fm.error(`Firestore (${jv}): ${n}`,...t)}}function pf(n,...e){if(fm.logLevel<=qn.WARN){const t=e.map(TD);fm.warn(`Firestore (${jv}): ${n}`,...t)}}function TD(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,TH(n,r,t)}function TH(n,e,t){let r=`FIRESTORE (${jv}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw xh(r),new Error(r)}function _r(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||TH(e,i,r)}function En(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ct extends wc{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CH{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kae{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mo.UNAUTHENTICATED))}shutdown(){}}class Zae{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Qae{constructor(e){this.t=e,this.currentUser=mo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_r(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new lh;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new lh,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new lh)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_r(typeof r.accessToken=="string",31837,{l:r}),new CH(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _r(e===null||typeof e=="string",2055,{h:e}),new mo(e)}}class Jae{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=mo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ele{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Jae(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(mo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class T8{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tle{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ic(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_r(this.o===void 0,3512);const r=s=>{s.error!=null&&Nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Nt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new T8(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_r(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new T8(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nle(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MH(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=nle(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function jn(n,e){return n<e?-1:n>e?1:0}function ER(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return jn(r,i);{const s=MH(),o=rle(s.encode(C8(n,t)),s.encode(C8(e,t)));return o!==0?o:jn(r,i)}}t+=r>65535?2:1}return jn(n.length,e.length)}function C8(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function rle(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return jn(n[t],e[t]);return jn(n.length,e.length)}function lv(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8="__name__";class zc{constructor(e,t,r){t===void 0?t=0:t>e.length&&gn(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&gn(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return zc.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=zc.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return jn(e.length,t.length)}static compareSegments(e,t){const r=zc.isNumericId(e),i=zc.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?zc.extractNumericId(e).compare(zc.extractNumericId(t)):ER(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return nf.fromString(e.substring(4,e.length-2))}}class Vr extends zc{construct(e,t,r){return new Vr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ct(et.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Vr(t)}static emptyPath(){return new Vr([])}}const ile=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Us extends zc{construct(e,t,r){return new Us(e,t,r)}static isValidIdentifier(e){return ile.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Us.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===M8}static keyField(){return new Us([M8])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ct(et.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Ct(et.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ct(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ct(et.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Us(t)}static emptyPath(){return new Us([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.path=e}static fromPath(e){return new en(Vr.fromString(e))}static fromName(e){return new en(Vr.fromString(e).popFirst(5))}static empty(){return new en(Vr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Vr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Vr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new en(new Vr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IH(n,e,t){if(!t)throw new Ct(et.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sle(n,e,t,r){if(e===!0&&r===!0)throw new Ct(et.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function I8(n){if(!en.isDocumentKey(n))throw new Ct(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function P8(n){if(en.isDocumentKey(n))throw new Ct(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function PH(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function LA(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":gn(12329,{type:typeof n})}function _h(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ct(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=LA(n);throw new Ct(et.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ole(n,e){if(e<=0)throw new Ct(et.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(n,e){const t={typeString:n};return e&&(t.value=e),t}function w_(n,e){if(!PH(n))throw new Ct(et.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new Ct(et.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R8=-62135596800,N8=1e6;class zr{static now(){return zr.fromMillis(Date.now())}static fromDate(e){return zr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*N8);return new zr(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ct(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ct(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<R8)throw new Ct(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ct(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/N8}_compareTo(e){return this.seconds===e.seconds?jn(this.nanoseconds,e.nanoseconds):jn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:zr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(w_(e,zr._jsonSchema))return new zr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-R8;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}zr._jsonSchemaVersion="firestore/timestamp/1.0",zr._jsonSchema={type:qi("string",zr._jsonSchemaVersion),seconds:qi("number"),nanoseconds:qi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{static fromTimestamp(e){return new Sn(e)}static min(){return new Sn(new zr(0,0))}static max(){return new Sn(new zr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=-1;function ale(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Sn.fromTimestamp(r===1e9?new zr(t+1,0):new zr(t,r));return new mf(i,en.empty(),e)}function lle(n){return new mf(n.readTime,n.key,Sx)}class mf{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new mf(Sn.min(),en.empty(),Sx)}static max(){return new mf(Sn.max(),en.empty(),Sx)}}function cle(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=en.comparator(n.documentKey,e.documentKey),t!==0?t:jn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ule="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hle{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vv(n){if(n.code!==et.FAILED_PRECONDITION||n.message!==ule)throw n;Nt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new nt((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof nt?t:nt.resolve(t)}catch(t){return nt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):nt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):nt.reject(t)}static resolve(e){return new nt((t,r)=>{t(e)})}static reject(e){return new nt((t,r)=>{r(e)})}static waitFor(e){return new nt((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=nt.resolve(!1);for(const r of e)t=t.next(i=>i?nt.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new nt((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new nt((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function dle(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zv(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}FA.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=-1;function BA(n){return n==null}function jb(n){return n===0&&1/n==-1/0}function fle(n){return typeof n=="number"&&Number.isInteger(n)&&!jb(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RH="";function ple(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=D8(e)),e=mle(n.get(t),e);return D8(e)}function mle(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case RH:t+="";break;default:t+=s}}return t}function D8(n){return n+RH+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k8(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function km(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function NH(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t){this.comparator=e,this.root=t||Fs.EMPTY}insert(e,t){return new _i(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fs.BLACK,null,null))}remove(e){return new _i(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new iS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new iS(this.root,e,this.comparator,!1)}getReverseIterator(){return new iS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new iS(this.root,e,this.comparator,!0)}}class iS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fs{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Fs.RED,this.left=i??Fs.EMPTY,this.right=s??Fs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Fs(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Fs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Fs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw gn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw gn(27949);return e+(this.isRed()?0:1)}}Fs.EMPTY=null,Fs.RED=!0,Fs.BLACK=!1;Fs.EMPTY=new class{constructor(){this.size=0}get key(){throw gn(57766)}get value(){throw gn(16141)}get color(){throw gn(16727)}get left(){throw gn(29726)}get right(){throw gn(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Fs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.comparator=e,this.data=new _i(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new O8(this.data.getIterator())}getIteratorFrom(e){return new O8(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ds)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ds(this.comparator);return t.data=e,t}}class O8{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e){this.fields=e,e.sort(Us.comparator)}static empty(){return new lc([])}unionWith(e){let t=new ds(Us.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new lc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lv(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DH extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new DH("Invalid base64 string: "+s):s}}(e);return new $s(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new $s(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$s.EMPTY_BYTE_STRING=new $s("");const gle=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gf(n){if(_r(!!n,39018),typeof n=="string"){let e=0;const t=gle.exec(n);if(_r(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Li(n.seconds),nanos:Li(n.nanos)}}function Li(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function vf(n){return typeof n=="string"?$s.fromBase64String(n):$s.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kH="server_timestamp",OH="__type__",LH="__previous_value__",FH="__local_write_time__";function ID(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[OH])===null||t===void 0?void 0:t.stringValue)===kH}function UA(n){const e=n.mapValue.fields[LH];return ID(e)?UA(e):e}function Ex(n){const e=gf(n.mapValue.fields[FH].timestampValue);return new zr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vle{constructor(e,t,r,i,s,o,a,l,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const Vb="(default)";class bx{constructor(e,t){this.projectId=e,this.database=t||Vb}static empty(){return new bx("","")}get isDefaultDatabase(){return this.database===Vb}isEqual(e){return e instanceof bx&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BH="__type__",yle="__max__",sS={mapValue:{}},UH="__vector__",zb="value";function yf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ID(n)?4:_le(n)?9007199254740991:xle(n)?10:11:gn(28295,{value:n})}function yu(n,e){if(n===e)return!0;const t=yf(n);if(t!==yf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ex(n).isEqual(Ex(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=gf(i.timestampValue),a=gf(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return vf(i.bytesValue).isEqual(vf(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Li(i.geoPointValue.latitude)===Li(s.geoPointValue.latitude)&&Li(i.geoPointValue.longitude)===Li(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Li(i.integerValue)===Li(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Li(i.doubleValue),a=Li(s.doubleValue);return o===a?jb(o)===jb(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return lv(n.arrayValue.values||[],e.arrayValue.values||[],yu);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(k8(o)!==k8(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!yu(o[l],a[l])))return!1;return!0}(n,e);default:return gn(52216,{left:n})}}function Ax(n,e){return(n.values||[]).find(t=>yu(t,e))!==void 0}function cv(n,e){if(n===e)return 0;const t=yf(n),r=yf(e);if(t!==r)return jn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return jn(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Li(s.integerValue||s.doubleValue),l=Li(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return L8(n.timestampValue,e.timestampValue);case 4:return L8(Ex(n),Ex(e));case 5:return ER(n.stringValue,e.stringValue);case 6:return function(s,o){const a=vf(s),l=vf(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=jn(a[c],l[c]);if(u!==0)return u}return jn(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=jn(Li(s.latitude),Li(o.latitude));return a!==0?a:jn(Li(s.longitude),Li(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return F8(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const h=s.fields||{},f=o.fields||{},p=(a=h[zb])===null||a===void 0?void 0:a.arrayValue,v=(l=f[zb])===null||l===void 0?void 0:l.arrayValue,_=jn(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0);return _!==0?_:F8(p,v)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===sS.mapValue&&o===sS.mapValue)return 0;if(s===sS.mapValue)return 1;if(o===sS.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=ER(l[h],u[h]);if(f!==0)return f;const p=cv(a[l[h]],c[u[h]]);if(p!==0)return p}return jn(l.length,u.length)}(n.mapValue,e.mapValue);default:throw gn(23264,{le:t})}}function L8(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return jn(n,e);const t=gf(n),r=gf(e),i=jn(t.seconds,r.seconds);return i!==0?i:jn(t.nanos,r.nanos)}function F8(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=cv(t[i],r[i]);if(s)return s}return jn(t.length,r.length)}function uv(n){return bR(n)}function bR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=gf(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return vf(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return en.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=bR(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${bR(t.fields[o])}`;return i+"}"}(n.mapValue):gn(61005,{value:n})}function FE(n){switch(yf(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=UA(n);return e?16+FE(e):16;case 5:return 2*n.stringValue.length;case 6:return vf(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+FE(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return km(r.fields,(s,o)=>{i+=s.length+FE(o)}),i}(n.mapValue);default:throw gn(13486,{value:n})}}function B8(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function AR(n){return!!n&&"integerValue"in n}function PD(n){return!!n&&"arrayValue"in n}function U8(n){return!!n&&"nullValue"in n}function j8(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function BE(n){return!!n&&"mapValue"in n}function xle(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[BH])===null||t===void 0?void 0:t.stringValue)===UH}function k1(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return km(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=k1(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=k1(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _le(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===yle}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e){this.value=e}static empty(){return new xl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!BE(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=k1(t)}setAll(e){let t=Us.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=k1(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());BE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];BE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){km(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new xl(k1(this.value))}}function jH(n){const e=[];return km(n.fields,(t,r)=>{const i=new Us([t]);if(BE(r)){const s=jH(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new lc(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new vo(e,0,Sn.min(),Sn.min(),Sn.min(),xl.empty(),0)}static newFoundDocument(e,t,r,i){return new vo(e,1,t,Sn.min(),r,i,0)}static newNoDocument(e,t){return new vo(e,2,t,Sn.min(),Sn.min(),xl.empty(),0)}static newUnknownDocument(e,t){return new vo(e,3,t,Sn.min(),Sn.min(),xl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Sn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Sn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vo&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,t){this.position=e,this.inclusive=t}}function V8(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=en.comparator(en.fromName(o.referenceValue),t.key):r=cv(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function z8(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!yu(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t="asc"){this.field=e,this.dir=t}}function wle(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{}class $i extends VH{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ele(e,t,r):t==="array-contains"?new Tle(e,r):t==="in"?new Cle(e,r):t==="not-in"?new Mle(e,r):t==="array-contains-any"?new Ile(e,r):new $i(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new ble(e,r):new Ale(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(cv(t,this.value)):t!==null&&yf(this.value)===yf(t)&&this.matchesComparison(cv(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return gn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vc extends VH{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new vc(e,t)}matches(e){return zH(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function zH(n){return n.op==="and"}function HH(n){return Sle(n)&&zH(n)}function Sle(n){for(const e of n.filters)if(e instanceof vc)return!1;return!0}function TR(n){if(n instanceof $i)return n.field.canonicalString()+n.op.toString()+uv(n.value);if(HH(n))return n.filters.map(e=>TR(e)).join(",");{const e=n.filters.map(t=>TR(t)).join(",");return`${n.op}(${e})`}}function WH(n,e){return n instanceof $i?function(r,i){return i instanceof $i&&r.op===i.op&&r.field.isEqual(i.field)&&yu(r.value,i.value)}(n,e):n instanceof vc?function(r,i){return i instanceof vc&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&WH(o,i.filters[a]),!0):!1}(n,e):void gn(19439)}function GH(n){return n instanceof $i?function(t){return`${t.field.canonicalString()} ${t.op} ${uv(t.value)}`}(n):n instanceof vc?function(t){return t.op.toString()+" {"+t.getFilters().map(GH).join(" ,")+"}"}(n):"Filter"}class Ele extends $i{constructor(e,t,r){super(e,t,r),this.key=en.fromName(r.referenceValue)}matches(e){const t=en.comparator(e.key,this.key);return this.matchesComparison(t)}}class ble extends $i{constructor(e,t){super(e,"in",t),this.keys=$H("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ale extends $i{constructor(e,t){super(e,"not-in",t),this.keys=$H("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $H(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>en.fromName(r.referenceValue))}class Tle extends $i{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return PD(t)&&Ax(t.arrayValue,this.value)}}class Cle extends $i{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ax(this.value.arrayValue,t)}}class Mle extends $i{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ax(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ax(this.value.arrayValue,t)}}class Ile extends $i{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!PD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ax(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ple{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}}function H8(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Ple(n,e,t,r,i,s,o)}function RD(n){const e=En(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>TR(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),BA(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>uv(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>uv(r)).join(",")),e.Pe=t}return e.Pe}function ND(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!wle(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!WH(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!z8(n.startAt,e.startAt)&&z8(n.endAt,e.endAt)}function CR(n){return en.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Rle(n,e,t,r,i,s,o,a){return new Hv(n,e,t,r,i,s,o,a)}function DD(n){return new Hv(n)}function W8(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function XH(n){return n.collectionGroup!==null}function O1(n){const e=En(n);if(e.Te===null){e.Te=[];const t=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ds(Us.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Tx(s,r))}),t.has(Us.keyField().canonicalString())||e.Te.push(new Tx(Us.keyField(),r))}return e.Te}function ou(n){const e=En(n);return e.Ie||(e.Ie=Nle(e,O1(n))),e.Ie}function Nle(n,e){if(n.limitType==="F")return H8(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Tx(i.field,s)});const t=n.endAt?new Hb(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Hb(n.startAt.position,n.startAt.inclusive):null;return H8(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function MR(n,e){const t=n.filters.concat([e]);return new Hv(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Wb(n,e,t){return new Hv(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jA(n,e){return ND(ou(n),ou(e))&&n.limitType===e.limitType}function qH(n){return`${RD(ou(n))}|lt:${n.limitType}`}function Fg(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>GH(i)).join(", ")}]`),BA(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>uv(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>uv(i)).join(",")),`Target(${r})`}(ou(n))}; limitType=${n.limitType})`}function VA(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):en.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of O1(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=V8(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,O1(r),i)||r.endAt&&!function(o,a,l){const c=V8(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,O1(r),i))}(n,e)}function Dle(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function YH(n){return(e,t)=>{let r=!1;for(const i of O1(n)){const s=kle(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function kle(n,e,t){const r=n.field.isKeyField()?en.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?cv(l,c):gn(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return gn(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){km(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return NH(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ole=new _i(en.comparator);function wh(){return Ole}const KH=new _i(en.comparator);function l1(...n){let e=KH;for(const t of n)e=e.insert(t.key,t);return e}function ZH(n){let e=KH;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Op(){return L1()}function QH(){return L1()}function L1(){return new Om(n=>n.toString(),(n,e)=>n.isEqual(e))}const Lle=new _i(en.comparator),Fle=new ds(en.comparator);function Yn(...n){let e=Fle;for(const t of n)e=e.add(t);return e}const Ble=new ds(jn);function Ule(){return Ble}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jb(e)?"-0":e}}function JH(n){return{integerValue:""+n}}function jle(n,e){return fle(e)?JH(e):kD(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(){this._=void 0}}function Vle(n,e,t){return n instanceof Gb?function(i,s){const o={fields:{[OH]:{stringValue:kH},[FH]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ID(s)&&(s=UA(s)),s&&(o.fields[LH]=s),{mapValue:o}}(t,e):n instanceof Cx?tW(n,e):n instanceof Mx?nW(n,e):function(i,s){const o=eW(i,s),a=G8(o)+G8(i.Ee);return AR(o)&&AR(i.Ee)?JH(a):kD(i.serializer,a)}(n,e)}function zle(n,e,t){return n instanceof Cx?tW(n,e):n instanceof Mx?nW(n,e):t}function eW(n,e){return n instanceof $b?function(r){return AR(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Gb extends zA{}class Cx extends zA{constructor(e){super(),this.elements=e}}function tW(n,e){const t=rW(e);for(const r of n.elements)t.some(i=>yu(i,r))||t.push(r);return{arrayValue:{values:t}}}class Mx extends zA{constructor(e){super(),this.elements=e}}function nW(n,e){let t=rW(e);for(const r of n.elements)t=t.filter(i=>!yu(i,r));return{arrayValue:{values:t}}}class $b extends zA{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function G8(n){return Li(n.integerValue||n.doubleValue)}function rW(n){return PD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Hle(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Cx&&i instanceof Cx||r instanceof Mx&&i instanceof Mx?lv(r.elements,i.elements,yu):r instanceof $b&&i instanceof $b?yu(r.Ee,i.Ee):r instanceof Gb&&i instanceof Gb}(n.transform,e.transform)}class Wle{constructor(e,t){this.version=e,this.transformResults=t}}class dc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dc}static exists(e){return new dc(void 0,e)}static updateTime(e){return new dc(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function UE(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}let HA=class{};function iW(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new OD(n.key,dc.none()):new S_(n.key,n.data,dc.none());{const t=n.data,r=xl.empty();let i=new ds(Us.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Lm(n.key,r,new lc(i.toArray()),dc.none())}}function Gle(n,e,t){n instanceof S_?function(i,s,o){const a=i.value.clone(),l=X8(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Lm?function(i,s,o){if(!UE(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=X8(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(sW(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function F1(n,e,t,r){return n instanceof S_?function(s,o,a,l){if(!UE(s.precondition,o))return a;const c=s.value.clone(),u=q8(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof Lm?function(s,o,a,l){if(!UE(s.precondition,o))return a;const c=q8(s.fieldTransforms,l,o),u=o.data;return u.setAll(sW(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(s,o,a){return UE(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function $le(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=eW(r.transform,i||null);s!=null&&(t===null&&(t=xl.empty()),t.set(r.field,s))}return t||null}function $8(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&lv(r,i,(s,o)=>Hle(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class S_ extends HA{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Lm extends HA{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function sW(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function X8(n,e,t){const r=new Map;_r(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,zle(o,a,t[i]))}return r}function q8(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Vle(s,o,e))}return r}class OD extends HA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xle extends HA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qle{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Gle(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=F1(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=F1(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=QH();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=iW(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Sn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yn())}isEqual(e){return this.batchId===e.batchId&&lv(this.mutations,e.mutations,(t,r)=>$8(t,r))&&lv(this.baseMutations,e.baseMutations,(t,r)=>$8(t,r))}}class LD{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){_r(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return Lle}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new LD(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yle=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kle{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hi,er;function Zle(n){switch(n){case et.OK:return gn(64938);case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0;default:return gn(15467,{code:n})}}function oW(n){if(n===void 0)return xh("GRPC error has no .code"),et.UNKNOWN;switch(n){case Hi.OK:return et.OK;case Hi.CANCELLED:return et.CANCELLED;case Hi.UNKNOWN:return et.UNKNOWN;case Hi.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case Hi.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case Hi.INTERNAL:return et.INTERNAL;case Hi.UNAVAILABLE:return et.UNAVAILABLE;case Hi.UNAUTHENTICATED:return et.UNAUTHENTICATED;case Hi.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case Hi.NOT_FOUND:return et.NOT_FOUND;case Hi.ALREADY_EXISTS:return et.ALREADY_EXISTS;case Hi.PERMISSION_DENIED:return et.PERMISSION_DENIED;case Hi.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case Hi.ABORTED:return et.ABORTED;case Hi.OUT_OF_RANGE:return et.OUT_OF_RANGE;case Hi.UNIMPLEMENTED:return et.UNIMPLEMENTED;case Hi.DATA_LOSS:return et.DATA_LOSS;default:return gn(39323,{code:n})}}(er=Hi||(Hi={}))[er.OK=0]="OK",er[er.CANCELLED=1]="CANCELLED",er[er.UNKNOWN=2]="UNKNOWN",er[er.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",er[er.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",er[er.NOT_FOUND=5]="NOT_FOUND",er[er.ALREADY_EXISTS=6]="ALREADY_EXISTS",er[er.PERMISSION_DENIED=7]="PERMISSION_DENIED",er[er.UNAUTHENTICATED=16]="UNAUTHENTICATED",er[er.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",er[er.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",er[er.ABORTED=10]="ABORTED",er[er.OUT_OF_RANGE=11]="OUT_OF_RANGE",er[er.UNIMPLEMENTED=12]="UNIMPLEMENTED",er[er.INTERNAL=13]="INTERNAL",er[er.UNAVAILABLE=14]="UNAVAILABLE",er[er.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qle=new nf([4294967295,4294967295],0);function Y8(n){const e=MH().encode(n),t=new _H;return t.update(e),new Uint8Array(t.digest())}function K8(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new nf([t,r],0),new nf([i,s],0)]}class FD{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new c1(`Invalid padding: ${t}`);if(r<0)throw new c1(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new c1(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new c1(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=nf.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(nf.fromNumber(r)));return i.compare(Qle)===1&&(i=new nf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Y8(e),[r,i]=K8(t);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new FD(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const t=Y8(e),[r,i]=K8(t);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);this.we(o)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class c1 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,E_.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new WA(Sn.min(),i,new _i(jn),wh(),Yn())}}class E_{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new E_(r,t,Yn(),Yn(),Yn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}}class aW{constructor(e,t){this.targetId=e,this.De=t}}class lW{constructor(e,t,r=$s.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Z8{constructor(){this.ve=0,this.Ce=Q8(),this.Fe=$s.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Yn(),t=Yn(),r=Yn();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:gn(38017,{changeType:s})}}),new E_(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Q8()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,_r(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Jle{constructor(e){this.We=e,this.Ge=new Map,this.ze=wh(),this.je=oS(),this.Je=oS(),this.He=new _i(jn)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:gn(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){const t=e.targetId,r=e.De.count,i=this.st(t);if(i){const s=i.target;if(CR(s))if(r===0){const o=new en(s.path);this.Xe(t,o,vo.newNoDocument(o,Sn.min()))}else _r(r===1,20013,{expectedCount:r});else{const o=this.ot(t);if(o!==r){const a=this._t(e),l=a?this.ut(a,e,o):1;if(l!==0){this.rt(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,c)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=vf(r).toUint8Array()}catch(l){if(l instanceof DH)return pf("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new FD(o,i,s)}catch(l){return pf(l instanceof c1?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),i++)}),i}Pt(e){const t=new Map;this.Ge.forEach((s,o)=>{const a=this.st(o);if(a){if(s.current&&CR(a.target)){const l=new en(a.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,vo.newNoDocument(l,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let r=Yn();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.st(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));const i=new WA(e,t,this.He,this.ze,r);return this.ze=wh(),this.je=oS(),this.Je=oS(),this.He=new _i(jn),i}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Z8,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new ds(jn),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new ds(jn),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Nt("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Z8),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function oS(){return new _i(en.comparator)}function Q8(){return new _i(en.comparator)}const ece={asc:"ASCENDING",desc:"DESCENDING"},tce={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nce={and:"AND",or:"OR"};class rce{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function IR(n,e){return n.useProto3Json||BA(e)?e:{value:e}}function Xb(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cW(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ice(n,e){return Xb(n,e.toTimestamp())}function au(n){return _r(!!n,49232),Sn.fromTimestamp(function(t){const r=gf(t);return new zr(r.seconds,r.nanos)}(n))}function BD(n,e){return PR(n,e).canonicalString()}function PR(n,e){const t=function(i){return new Vr(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function uW(n){const e=Vr.fromString(n);return _r(mW(e),10190,{key:e.toString()}),e}function RR(n,e){return BD(n.databaseId,e.path)}function bM(n,e){const t=uW(e);if(t.get(1)!==n.databaseId.projectId)throw new Ct(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ct(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new en(dW(t))}function hW(n,e){return BD(n.databaseId,e)}function sce(n){const e=uW(n);return e.length===4?Vr.emptyPath():dW(e)}function NR(n){return new Vr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dW(n){return _r(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function J8(n,e,t){return{name:RR(n,e),fields:t.value.mapValue.fields}}function oce(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:gn(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(_r(u===void 0||typeof u=="string",58123),$s.fromBase64String(u||"")):(_r(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),$s.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?et.UNKNOWN:oW(c.code);return new Ct(u,c.message||"")}(o);t=new lW(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=bM(n,r.document.name),s=au(r.document.updateTime),o=r.document.createTime?au(r.document.createTime):Sn.min(),a=new xl({mapValue:{fields:r.document.fields}}),l=vo.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];t=new jE(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=bM(n,r.document),s=r.readTime?au(r.readTime):Sn.min(),o=vo.newNoDocument(i,s),a=r.removedTargetIds||[];t=new jE([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=bM(n,r.document),s=r.removedTargetIds||[];t=new jE([],s,i,null)}else{if(!("filter"in e))return gn(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Kle(i,s),a=r.targetId;t=new aW(a,o)}}return t}function ace(n,e){let t;if(e instanceof S_)t={update:J8(n,e.key,e.value)};else if(e instanceof OD)t={delete:RR(n,e.key)};else if(e instanceof Lm)t={update:J8(n,e.key,e.data),updateMask:gce(e.fieldMask)};else{if(!(e instanceof Xle))return gn(16599,{Rt:e.type});t={verify:RR(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Gb)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Cx)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Mx)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $b)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw gn(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:ice(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:gn(27497)}(n,e.precondition)),t}function lce(n,e){return n&&n.length>0?(_r(e!==void 0,14353),n.map(t=>function(i,s){let o=i.updateTime?au(i.updateTime):au(s);return o.isEqual(Sn.min())&&(o=au(s)),new Wle(o,i.transformResults||[])}(t,e))):[]}function cce(n,e){return{documents:[hW(n,e.path)]}}function uce(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=hW(n,i);const s=function(c){if(c.length!==0)return pW(vc.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:Bg(f.field),direction:fce(f.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=IR(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{Vt:t,parent:i}}function hce(n){let e=sce(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){_r(r===1,65062);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(h){const f=fW(h);return f instanceof vc&&HH(f)?f.getFilters():[f]}(t.where));let o=[];t.orderBy&&(o=function(h){return h.map(f=>function(v){return new Tx(Ug(v.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(t.orderBy));let a=null;t.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,BA(f)?null:f}(t.limit));let l=null;t.startAt&&(l=function(h){const f=!!h.before,p=h.values||[];return new Hb(p,f)}(t.startAt));let c=null;return t.endAt&&(c=function(h){const f=!h.before,p=h.values||[];return new Hb(p,f)}(t.endAt)),Rle(e,i,o,s,a,"F",l,c)}function dce(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gn(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fW(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ug(t.unaryFilter.field);return $i.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ug(t.unaryFilter.field);return $i.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ug(t.unaryFilter.field);return $i.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ug(t.unaryFilter.field);return $i.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return gn(61313);default:return gn(60726)}}(n):n.fieldFilter!==void 0?function(t){return $i.create(Ug(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return gn(58110);default:return gn(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return vc.create(t.compositeFilter.filters.map(r=>fW(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return gn(1026)}}(t.compositeFilter.op))}(n):gn(30097,{filter:n})}function fce(n){return ece[n]}function pce(n){return tce[n]}function mce(n){return nce[n]}function Bg(n){return{fieldPath:n.canonicalString()}}function Ug(n){return Us.fromServerFormat(n.fieldPath)}function pW(n){return n instanceof $i?function(t){if(t.op==="=="){if(j8(t.value))return{unaryFilter:{field:Bg(t.field),op:"IS_NAN"}};if(U8(t.value))return{unaryFilter:{field:Bg(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(j8(t.value))return{unaryFilter:{field:Bg(t.field),op:"IS_NOT_NAN"}};if(U8(t.value))return{unaryFilter:{field:Bg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bg(t.field),op:pce(t.op),value:t.value}}}(n):n instanceof vc?function(t){const r=t.getFilters().map(i=>pW(i));return r.length===1?r[0]:{compositeFilter:{op:mce(t.op),filters:r}}}(n):gn(54877,{filter:n})}function gce(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function mW(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,t,r,i,s=Sn.min(),o=Sn.min(),a=$s.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new zd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vce{constructor(e){this.gt=e}}function yce(n){const e=hce({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Wb(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xce{constructor(){this.Dn=new _ce}addToCollectionParentIndex(e,t){return this.Dn.add(t),nt.resolve()}getCollectionParents(e,t){return nt.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return nt.resolve()}deleteFieldIndex(e,t){return nt.resolve()}deleteAllFieldIndexes(e){return nt.resolve()}createTargetIndexes(e,t){return nt.resolve()}getDocumentsMatchingTarget(e,t){return nt.resolve(null)}getIndexType(e,t){return nt.resolve(0)}getFieldIndexes(e,t){return nt.resolve([])}getNextCollectionGroupToUpdate(e){return nt.resolve(null)}getMinOffset(e,t){return nt.resolve(mf.min())}getMinOffsetFromCollectionGroup(e,t){return nt.resolve(mf.min())}updateCollectionGroup(e,t,r){return nt.resolve()}updateIndexEntries(e,t){return nt.resolve()}}class _ce{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ds(Vr.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ds(Vr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gW=41943040;class ma{static withCacheSize(e){return new ma(e,ma.DEFAULT_COLLECTION_PERCENTILE,ma.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ma.DEFAULT_COLLECTION_PERCENTILE=10,ma.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ma.DEFAULT=new ma(gW,ma.DEFAULT_COLLECTION_PERCENTILE,ma.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ma.DISABLED=new ma(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new hv(0)}static ur(){return new hv(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6="LruGarbageCollector",wce=1048576;function n6([n,e],[t,r]){const i=jn(n,t);return i===0?jn(e,r):i}class Sce{constructor(e){this.Tr=e,this.buffer=new ds(n6),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();n6(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ece{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Nt(t6,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zv(t)?Nt(t6,"Ignoring IndexedDB error during garbage collection: ",t):await Vv(t)}await this.Rr(3e5)})}}class bce{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return nt.resolve(FA.ue);const r=new Sce(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Nt("LruGarbageCollector","Garbage collection skipped; disabled"),nt.resolve(e6)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Nt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),e6):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Nt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Lg()<=qn.DEBUG&&Nt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),nt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function Ace(n,e){return new bce(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tce{constructor(){this.changes=new Om(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vo.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?nt.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cce{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mce{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&F1(r.mutation,i,lc.empty(),zr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Yn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Yn()){const i=Op();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=l1();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Op();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Yn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=wh();const o=L1(),a=function(){return L1()}();return t.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Lm)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),F1(u.mutation,c,u.mutation.getFieldMask(),zr.now())):o.set(c.key,lc.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var h;return a.set(c,new Cce(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){const r=L1();let i=new _i((o,a)=>o-a),s=Yn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=r.get(l)||lc.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||Yn()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=QH();u.forEach(f=>{if(!s.has(f)){const p=iW(t.get(f),r.get(f));p!==null&&h.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return nt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return en.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):XH(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):nt.resolve(Op());let a=Sx,l=s;return o.next(c=>nt.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?nt.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Yn())).next(u=>({batchId:a,changes:ZH(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new en(t)).next(r=>{let i=l1();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=l1();return this.indexManager.getCollectionParents(e,s).next(a=>nt.forEach(a,l=>{const c=function(h,f){return new Hv(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,vo.newInvalidDocument(u)))});let a=l1();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&F1(u.mutation,c,lc.empty(),zr.now()),VA(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ice{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return nt.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:au(i.createTime)}}(t)),nt.resolve()}getNamedQuery(e,t){return nt.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:yce(i.bundledQuery),readTime:au(i.readTime)}}(t)),nt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pce{constructor(){this.overlays=new _i(en.comparator),this.kr=new Map}getOverlay(e,t){return nt.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Op();return nt.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),nt.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),nt.resolve()}getOverlaysForCollection(e,t,r){const i=Op(),s=t.length+1,o=new en(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return nt.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new _i((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Op(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Op(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return nt.resolve(a)}wt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Yle(t,r));let s=this.kr.get(t);s===void 0&&(s=Yn(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rce{constructor(){this.sessionToken=$s.EMPTY_BYTE_STRING}getSessionToken(e){return nt.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,nt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(){this.qr=new ds(Es.Qr),this.$r=new ds(Es.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Es(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Es(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new en(new Vr([])),r=new Es(t,e),i=new Es(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new en(new Vr([])),r=new Es(t,e),i=new Es(t,e+1);let s=Yn();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Es(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Es{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return en.comparator(e.key,t.key)||jn(e.Hr,t.Hr)}static Ur(e,t){return jn(e.Hr,t.Hr)||en.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nce{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new ds(Es.Qr)}checkEmpty(e){return nt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new qle(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.Yr=this.Yr.add(new Es(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return nt.resolve(o)}lookupMutationBatch(e,t){return nt.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Xr(r),s=i<0?0:i;return nt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return nt.resolve(this.mutationQueue.length===0?MD:this.er-1)}getAllMutationBatches(e){return nt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Es(t,0),i=new Es(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{const a=this.Zr(o.Hr);s.push(a)}),nt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ds(jn);return t.forEach(i=>{const s=new Es(i,0),o=new Es(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),nt.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;en.isDocumentKey(s)||(s=s.child(""));const o=new Es(new en(s),0);let a=new ds(jn);return this.Yr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Hr)),!0)},o),nt.resolve(this.ei(a))}ei(e){const t=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){_r(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return nt.forEach(t.mutations,i=>{const s=new Es(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new Es(t,0),i=this.Yr.firstAfterOrEqual(r);return nt.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,nt.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dce{constructor(e){this.ni=e,this.docs=function(){return new _i(en.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return nt.resolve(r?r.document.mutableCopy():vo.newInvalidDocument(t))}getEntries(e,t){let r=wh();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():vo.newInvalidDocument(i))}),nt.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=wh();const o=t.path,a=new en(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||cle(lle(u),r)<=0||(i.has(u.key)||VA(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return nt.resolve(s)}getAllFromCollectionGroup(e,t,r,i){gn(9500)}ri(e,t){return nt.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new kce(this)}getSize(e){return nt.resolve(this.size)}}class kce extends Tce{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),nt.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oce{constructor(e){this.persistence=e,this.ii=new Om(t=>RD(t),ND),this.lastRemoteSnapshotVersion=Sn.min(),this.highestTargetId=0,this.si=0,this.oi=new UD,this.targetCount=0,this._i=hv.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),nt.resolve()}getLastRemoteSnapshotVersion(e){return nt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return nt.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),nt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),nt.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new hv(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,nt.resolve()}updateTargetData(e,t){return this.hr(t),nt.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,nt.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),nt.waitFor(s).next(()=>i)}getTargetCount(e){return nt.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return nt.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),nt.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),nt.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),nt.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return nt.resolve(r)}containsKey(e,t){return nt.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vW{constructor(e,t){this.ai={},this.overlays={},this.ui=new FA(0),this.ci=!1,this.ci=!0,this.li=new Rce,this.referenceDelegate=e(this),this.hi=new Oce(this),this.indexManager=new xce,this.remoteDocumentCache=function(i){return new Dce(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new vce(t),this.Ti=new Ice(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Pce,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new Nce(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){Nt("MemoryPersistence","Starting transaction:",e);const i=new Lce(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return nt.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class Lce extends hle{constructor(e){super(),this.currentSequenceNumber=e}}class jD{constructor(e){this.persistence=e,this.Ai=new UD,this.Ri=null}static Vi(e){return new jD(e)}get mi(){if(this.Ri)return this.Ri;throw gn(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),nt.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),nt.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),nt.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nt.forEach(this.mi,r=>{const i=en.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,Sn.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return nt.or([()=>nt.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class qb{constructor(e,t){this.persistence=e,this.gi=new Om(r=>ple(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Ace(this,t)}static Vi(e,t){return new qb(e,t)}Ii(){}di(e){return nt.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return nt.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?nt.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Sn.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),nt.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),nt.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),nt.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),nt.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=FE(e.data.value)),t}Sr(e,t,r){return nt.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.gi.get(t);return nt.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Yn(),i=Yn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new VD(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fce{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bce{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return gie()?8:dle(bo())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Fce;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Lg()<=qn.DEBUG&&Nt("QueryEngine","SDK will not create cache indexes for query:",Fg(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),nt.resolve()):(Lg()<=qn.DEBUG&&Nt("QueryEngine","Query:",Fg(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Lg()<=qn.DEBUG&&Nt("QueryEngine","The SDK decides to create cache indexes for query:",Fg(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ou(t))):nt.resolve())}ps(e,t){if(W8(t))return nt.resolve(null);let r=ou(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Wb(t,null,"F"),r=ou(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Yn(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.bs(t,a);return this.Ds(t,c,o,l.readTime)?this.ps(e,Wb(t,null,"F")):this.vs(e,c,t,l)}))})))}ys(e,t,r,i){return W8(t)||i.isEqual(Sn.min())?nt.resolve(null):this.gs.getDocuments(e,r).next(s=>{const o=this.bs(t,s);return this.Ds(t,o,r,i)?nt.resolve(null):(Lg()<=qn.DEBUG&&Nt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fg(t)),this.vs(e,o,t,ale(i,Sx)).next(a=>a))})}bs(e,t){let r=new ds(YH(e));return t.forEach((i,s)=>{VA(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return Lg()<=qn.DEBUG&&Nt("QueryEngine","Using full collection scan to execute query:",Fg(t)),this.gs.getDocumentsMatchingQuery(e,t,mf.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD="LocalStore",Uce=3e8;class jce{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new _i(jn),this.Ms=new Om(s=>RD(s),ND),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Mce(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function Vce(n,e,t,r){return new jce(n,e,t,r)}async function yW(n,e){const t=En(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Yn();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({Bs:c,removedBatchIds:o,addedBatchIds:a}))})})}function zce(n,e){const t=En(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,f=h.keys();let p=nt.resolve();return f.forEach(v=>{p=p.next(()=>u.getEntry(l,v)).next(_=>{const S=c.docVersions.get(v);_r(S!==null,48541),_.version.compareTo(S)<0&&(h.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),u.addEntry(_)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Yn();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function xW(n){const e=En(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Hce(n,e){const t=En(n),r=e.snapshotVersion;let i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;const a=[];e.targetChanges.forEach((u,h)=>{const f=i.get(h);if(!f)return;a.push(t.hi.removeMatchingKeys(s,u.removedDocuments,h).next(()=>t.hi.addMatchingKeys(s,u.addedDocuments,h)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken($s.EMPTY_BYTE_STRING,Sn.min()).withLastLimboFreeSnapshotVersion(Sn.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(h,p),function(_,S,x){return _.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=Uce?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(f,p,u)&&a.push(t.hi.updateTargetData(s,p))});let l=wh(),c=Yn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(Wce(s,o,e.documentUpdates).next(u=>{l=u.Ls,c=u.ks})),!r.isEqual(Sn.min())){const u=t.hi.getLastRemoteSnapshotVersion(s).next(h=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return nt.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.Fs=i,s))}function Wce(n,e,t){let r=Yn(),i=Yn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=wh();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Sn.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Nt(zD,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ls:o,ks:i}})}function Gce(n,e){const t=En(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=MD),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $ce(n,e){const t=En(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(s=>s?(i=s,nt.resolve(i)):t.hi.allocateTargetId(r).next(o=>(i=new zd(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function DR(n,e,t){const r=En(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!zv(o))throw o;Nt(zD,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function r6(n,e,t){const r=En(n);let i=Sn.min(),s=Yn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=En(l),f=h.Ms.get(u);return f!==void 0?nt.resolve(h.Fs.get(f)):h.hi.getTargetData(c,u)}(r,o,ou(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:Sn.min(),t?s:Yn())).next(a=>(Xce(r,Dle(e),a),{documents:a,qs:s})))}function Xce(n,e,t){let r=n.xs.get(e)||Sn.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.xs.set(e,r)}class i6{constructor(){this.activeTargetIds=Ule()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qce{constructor(){this.Fo=new i6,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new i6,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yce{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6="ConnectivityMonitor";class o6{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Nt(s6,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Nt(s6,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aS=null;function kR(){return aS===null?aS=function(){return 268435456+Math.round(2147483648*Math.random())}():aS++,"0x"+aS.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM="RestConnection",Kce={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Zce{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Vb?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){const o=kR(),a=this.Go(e,t.toUriEncodedString());Nt(AM,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,s);const{host:c}=new URL(a),u=Lv(c);return this.jo(e,a,l,r,u).then(h=>(Nt(AM,`Received RPC '${e}' ${o}: `,h),h),h=>{throw pf(AM,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jv}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){const r=Kce[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qce{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="WebChannelConnection";class Jce extends Zce{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){const o=kR();return new Promise((a,l)=>{const c=new wH;c.setWithCredentials(!0),c.listenOnce(SH.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case LE.NO_ERROR:const h=c.getResponseJson();Nt(ao,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case LE.TIMEOUT:Nt(ao,`RPC '${e}' ${o} timed out`),l(new Ct(et.DEADLINE_EXCEEDED,"Request time out"));break;case LE.HTTP_ERROR:const f=c.getStatus();if(Nt(ao,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const v=p==null?void 0:p.error;if(v&&v.status&&v.message){const _=function(x){const E=x.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(E)>=0?E:et.UNKNOWN}(v.status);l(new Ct(_,v.message))}else l(new Ct(et.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Ct(et.UNAVAILABLE,"Connection failed."));break;default:gn(9055,{c_:e,streamId:o,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{Nt(ao,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(i);Nt(ao,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",u,r,15)})}P_(e,t,r){const i=kR(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=AH(),a=bH(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=s.join("");Nt(ao,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);this.T_(h);let f=!1,p=!1;const v=new Qce({Ho:S=>{p?Nt(ao,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(f||(Nt(ao,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),Nt(ao,`RPC '${e}' stream ${i} sending:`,S),h.send(S))},Yo:()=>h.close()}),_=(S,x,E)=>{S.listen(x,b=>{try{E(b)}catch(M){setTimeout(()=>{throw M},0)}})};return _(h,a1.EventType.OPEN,()=>{p||(Nt(ao,`RPC '${e}' stream ${i} transport opened.`),v.s_())}),_(h,a1.EventType.CLOSE,()=>{p||(p=!0,Nt(ao,`RPC '${e}' stream ${i} transport closed`),v.__(),this.I_(h))}),_(h,a1.EventType.ERROR,S=>{p||(p=!0,pf(ao,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),v.__(new Ct(et.UNAVAILABLE,"The operation could not be completed")))}),_(h,a1.EventType.MESSAGE,S=>{var x;if(!p){const E=S.data[0];_r(!!E,16349);const b=E,M=(b==null?void 0:b.error)||((x=b[0])===null||x===void 0?void 0:x.error);if(M){Nt(ao,`RPC '${e}' stream ${i} received error:`,M);const k=M.status;let B=function(R){const I=Hi[R];if(I!==void 0)return oW(I)}(k),P=M.message;B===void 0&&(B=et.INTERNAL,P="Unknown error status: "+k+" with message "+M.message),p=!0,v.__(new Ct(B,P)),h.close()}else Nt(ao,`RPC '${e}' stream ${i} received:`,E),v.a_(E)}}),_(a,EH.STAT_EVENT,S=>{S.stat===SR.PROXY?Nt(ao,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===SR.NOPROXY&&Nt(ao,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.o_()},0),v}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function TM(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(n){return new rce(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _W{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&Nt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6="PersistentStream";class wW{constructor(e,t,r,i,s,o,a,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new _W(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===et.RESOURCE_EXHAUSTED?(xh(t.toString()),xh("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{const i=new Ct(et.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Nt(a6,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Nt(a6,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eue extends wW{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=oce(this.serializer,e),r=function(s){if(!("targetChange"in s))return Sn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Sn.min():o.readTime?au(o.readTime):Sn.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=NR(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=CR(l)?{documents:cce(s,l)}:{query:uce(s,l).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=cW(s,o.resumeToken);const c=IR(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Sn.min())>0){a.readTime=Xb(s,o.snapshotVersion.toTimestamp());const c=IR(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=dce(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=NR(this.serializer),t.removeTarget=e,this.k_(t)}}class tue extends wW{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return _r(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_r(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){_r(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=lce(e.writeResults,e.commitTime),r=au(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=NR(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ace(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nue{}class rue extends nue{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Ct(et.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,PR(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ct(et.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,PR(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ct(et.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class iue{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xh(t),this._a=!1):Nt("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="RemoteStore";class sue{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Fm(this)&&(Nt(pm,"Restarting streams for network reachability change."),await async function(l){const c=En(l);c.Ia.add(4),await b_(c),c.Aa.set("Unknown"),c.Ia.delete(4),await $A(c)}(this))})}),this.Aa=new iue(r,i)}}async function $A(n){if(Fm(n))for(const e of n.da)await e(!0)}async function b_(n){for(const e of n.da)await e(!1)}function SW(n,e){const t=En(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),$D(t)?GD(t):Wv(t).x_()&&WD(t,e))}function HD(n,e){const t=En(n),r=Wv(t);t.Ta.delete(e),r.x_()&&EW(t,e),t.Ta.size===0&&(r.x_()?r.B_():Fm(t)&&t.Aa.set("Unknown"))}function WD(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Sn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wv(n).H_(e)}function EW(n,e){n.Ra.$e(e),Wv(n).Y_(e)}function GD(n){n.Ra=new Jle({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Wv(n).start(),n.Aa.aa()}function $D(n){return Fm(n)&&!Wv(n).M_()&&n.Ta.size>0}function Fm(n){return En(n).Ia.size===0}function bW(n){n.Ra=void 0}async function oue(n){n.Aa.set("Online")}async function aue(n){n.Ta.forEach((e,t)=>{WD(n,e)})}async function lue(n,e){bW(n),$D(n)?(n.Aa.la(e),GD(n)):n.Aa.set("Unknown")}async function cue(n,e,t){if(n.Aa.set("Online"),e instanceof lW&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))}(n,e)}catch(r){Nt(pm,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yb(n,r)}else if(e instanceof jE?n.Ra.Ye(e):e instanceof aW?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Sn.min()))try{const r=await xW(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.Ra.Pt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.Ta.get(c);u&&s.Ta.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.Ta.get(l);if(!u)return;s.Ta.set(l,u.withResumeToken($s.EMPTY_BYTE_STRING,u.snapshotVersion)),EW(s,l);const h=new zd(u.target,l,c,u.sequenceNumber);WD(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){Nt(pm,"Failed to raise snapshot:",r),await Yb(n,r)}}async function Yb(n,e,t){if(!zv(e))throw e;n.Ia.add(1),await b_(n),n.Aa.set("Offline"),t||(t=()=>xW(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Nt(pm,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await $A(n)})}function AW(n,e){return e().catch(t=>Yb(n,t,e))}async function XA(n){const e=En(n),t=xf(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:MD;for(;uue(e);)try{const i=await Gce(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,hue(e,i)}catch(i){await Yb(e,i)}TW(e)&&CW(e)}function uue(n){return Fm(n)&&n.Pa.length<10}function hue(n,e){n.Pa.push(e);const t=xf(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function TW(n){return Fm(n)&&!xf(n).M_()&&n.Pa.length>0}function CW(n){xf(n).start()}async function due(n){xf(n).na()}async function fue(n){const e=xf(n);for(const t of n.Pa)e.X_(t.mutations)}async function pue(n,e,t){const r=n.Pa.shift(),i=LD.from(r,e,t);await AW(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await XA(n)}async function mue(n,e){e&&xf(n).Z_&&await async function(r,i){if(function(o){return Zle(o)&&o!==et.ABORTED}(i.code)){const s=r.Pa.shift();xf(r).N_(),await AW(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await XA(r)}}(n,e),TW(n)&&CW(n)}async function l6(n,e){const t=En(n);t.asyncQueue.verifyOperationInProgress(),Nt(pm,"RemoteStore received new credentials");const r=Fm(t);t.Ia.add(3),await b_(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await $A(t)}async function gue(n,e){const t=En(n);e?(t.Ia.delete(2),await $A(t)):e||(t.Ia.add(2),await b_(t),t.Aa.set("Unknown"))}function Wv(n){return n.Va||(n.Va=function(t,r,i){const s=En(t);return s.ia(),new eue(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Zo:oue.bind(null,n),e_:aue.bind(null,n),n_:lue.bind(null,n),J_:cue.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),$D(n)?GD(n):n.Aa.set("Unknown")):(await n.Va.stop(),bW(n))})),n.Va}function xf(n){return n.ma||(n.ma=function(t,r,i){const s=En(t);return s.ia(),new tue(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:due.bind(null,n),n_:mue.bind(null,n),ea:fue.bind(null,n),ta:pue.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await XA(n)):(await n.ma.stop(),n.Pa.length>0&&(Nt(pm,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new lh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new XD(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ct(et.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qD(n,e){if(xh("AsyncQueue",`${e}: ${n}`),zv(n))return new Ct(et.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{static emptySet(e){return new P0(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||en.comparator(t.key,r.key):(t,r)=>en.comparator(t.key,r.key),this.keyedMap=l1(),this.sortedSet=new _i(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof P0)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new P0;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(){this.fa=new _i(en.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):gn(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class dv{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new dv(e,t,P0.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jA(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vue{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class yue{constructor(){this.queries=u6(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const i=En(t),s=i.queries;i.queries=u6(),s.forEach((o,a)=>{for(const l of a.wa)l.onError(r)})})(this,new Ct(et.ABORTED,"Firestore shutting down"))}}function u6(){return new Om(n=>qH(n),jA)}async function MW(n,e){const t=En(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new vue,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await t.onListen(i,!0);break;case 1:s.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=qD(o,`Initialization of query '${Fg(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&YD(t)}async function IW(n,e){const t=En(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function xue(n,e){const t=En(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&YD(t)}function _ue(n,e,t){const r=En(n),i=r.queries.get(e);if(i)for(const s of i.wa)s.onError(t);r.queries.delete(e)}function YD(n){n.Da.forEach(e=>{e.next()})}var OR,h6;(h6=OR||(OR={})).Fa="default",h6.Cache="cache";class PW{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new dv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=dv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==OR.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RW{constructor(e){this.key=e}}class NW{constructor(e){this.key=e}}class wue{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Yn(),this.mutatedKeys=Yn(),this.Xa=YH(e),this.eu=new P0(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new c6,i=t?t.eu:this.eu;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const f=i.get(u),p=VA(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let S=!1;f&&p?f.data.isEqual(p.data)?v!==_&&(r.track({type:3,doc:p}),S=!0):this.iu(f,p)||(r.track({type:2,doc:p}),S=!0,(l&&this.Xa(p,l)>0||c&&this.Xa(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),S=!0):f&&!p&&(r.track({type:1,doc:f}),S=!0,(l||c)&&(a=!0)),S&&(p?(o=o.add(p),s=_?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((u,h)=>function(p,v){const _=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gn(20277,{At:S})}};return _(p)-_(v)}(u.type,h.type)||this.Xa(u.doc,h.doc)),this.su(r),i=i!=null&&i;const a=t&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,c=l!==this.Ya;return this.Ya=l,o.length!==0||c?{snapshot:new dv(this.query,e.eu,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new c6,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Yn(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new NW(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new RW(r))}),t}uu(e){this.Ha=e.qs,this.Za=Yn();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return dv.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const KD="SyncEngine";class Sue{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Eue{constructor(e){this.key=e,this.lu=!1}}class bue{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Om(a=>qH(a),jA),this.Tu=new Map,this.Iu=new Set,this.du=new _i(en.comparator),this.Eu=new Map,this.Au=new UD,this.Ru={},this.Vu=new Map,this.mu=hv.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function Aue(n,e,t=!0){const r=BW(n);let i;const s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await DW(r,e,t,!0),i}async function Tue(n,e){const t=BW(n);await DW(t,e,!0,!1)}async function DW(n,e,t,r){const i=await $ce(n.localStore,ou(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await Cue(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&SW(n.remoteStore,i),a}async function Cue(n,e,t,r,i){n.gu=(h,f,p)=>async function(_,S,x,E){let b=S.view.nu(x);b.Ds&&(b=await r6(_.localStore,S.query,!1).then(({documents:P})=>S.view.nu(P,b)));const M=E&&E.targetChanges.get(S.targetId),k=E&&E.targetMismatches.get(S.targetId)!=null,B=S.view.applyChanges(b,_.isPrimaryClient,M,k);return f6(_,S.targetId,B._u),B.snapshot}(n,h,f,p);const s=await r6(n.localStore,e,!0),o=new wue(e,s.qs),a=o.nu(s.documents),l=E_.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(a,n.isPrimaryClient,l);f6(n,t,c._u);const u=new Sue(e,t,o);return n.Pu.set(e,u),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),c.snapshot}async function Mue(n,e,t){const r=En(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!jA(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await DR(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&HD(r.remoteStore,i.targetId),LR(r,i.targetId)}).catch(Vv)):(LR(r,i.targetId),await DR(r.localStore,i.targetId,!0))}async function Iue(n,e){const t=En(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),HD(t.remoteStore,r.targetId))}async function Pue(n,e,t){const r=Fue(n);try{const i=await function(o,a){const l=En(o),c=zr.now(),u=a.reduce((p,v)=>p.add(v.key),Yn());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let v=wh(),_=Yn();return l.Os.getEntries(p,u).next(S=>{v=S,v.forEach((x,E)=>{E.isValidDocument()||(_=_.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,v)).next(S=>{h=S;const x=[];for(const E of a){const b=$le(E,h.get(E.key).overlayedDocument);b!=null&&x.push(new Lm(E.key,b,jH(b.value.mapValue),dc.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,x,a)}).next(S=>{f=S;const x=S.applyToLocalDocumentSet(h,_);return l.documentOverlayCache.saveOverlays(p,S.batchId,x)})}).then(()=>({batchId:f.batchId,changes:ZH(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ru[o.currentUser.toKey()];c||(c=new _i(jn)),c=c.insert(a,l),o.Ru[o.currentUser.toKey()]=c}(r,i.batchId,t),await A_(r,i.changes),await XA(r.remoteStore)}catch(i){const s=qD(i,"Failed to persist write");t.reject(s)}}async function kW(n,e){const t=En(n);try{const r=await Hce(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Eu.get(s);o&&(_r(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?_r(o.lu,14607):i.removedDocuments.size>0&&(_r(o.lu,42227),o.lu=!1))}),await A_(t,r,e)}catch(r){await Vv(r)}}function d6(n,e,t){const r=En(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Pu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=En(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const f of h.wa)f.va(a)&&(c=!0)}),c&&YD(l)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Rue(n,e,t){const r=En(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Eu.get(e),s=i&&i.key;if(s){let o=new _i(en.comparator);o=o.insert(s,vo.newNoDocument(s,Sn.min()));const a=Yn().add(s),l=new WA(Sn.min(),new Map,new _i(jn),o,a);await kW(r,l),r.du=r.du.remove(s),r.Eu.delete(e),ZD(r)}else await DR(r.localStore,e,!1).then(()=>LR(r,e,t)).catch(Vv)}async function Nue(n,e){const t=En(n),r=e.batch.batchId;try{const i=await zce(t.localStore,e);LW(t,r,null),OW(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await A_(t,i)}catch(i){await Vv(i)}}async function Due(n,e,t){const r=En(n);try{const i=await function(o,a){const l=En(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(_r(h!==null,37113),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);LW(r,e,t),OW(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await A_(r,i)}catch(i){await Vv(i)}}function OW(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function LW(n,e,t){const r=En(n);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function LR(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||FW(n,r)})}function FW(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(HD(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),ZD(n))}function f6(n,e,t){for(const r of t)r instanceof RW?(n.Au.addReference(r.key,e),kue(n,r)):r instanceof NW?(Nt(KD,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||FW(n,r.key)):gn(19791,{yu:r})}function kue(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(Nt(KD,"New document in limbo: "+t),n.Iu.add(r),ZD(n))}function ZD(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new en(Vr.fromString(e)),r=n.mu.next();n.Eu.set(r,new Eue(t)),n.du=n.du.insert(t,r),SW(n.remoteStore,new zd(ou(DD(t.path)),r,"TargetPurposeLimboResolution",FA.ue))}}async function A_(n,e,t){const r=En(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,l)=>{o.push(r.gu(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const h=c?!c.fromCache:(u=t==null?void 0:t.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=VD.Es(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.hu.J_(i),await async function(l,c){const u=En(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>nt.forEach(c,f=>nt.forEach(f.Is,p=>u.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>nt.forEach(f.ds,p=>u.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!zv(h))throw h;Nt(zD,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const p=u.Fs.get(f),v=p.snapshotVersion,_=p.withLastLimboFreeSnapshotVersion(v);u.Fs=u.Fs.insert(f,_)}}}(r.localStore,s))}async function Oue(n,e){const t=En(n);if(!t.currentUser.isEqual(e)){Nt(KD,"User change. New user:",e.toKey());const r=await yW(t.localStore,e);t.currentUser=e,function(s,o){s.Vu.forEach(a=>{a.forEach(l=>{l.reject(new Ct(et.CANCELLED,o))})}),s.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await A_(t,r.Bs)}}function Lue(n,e){const t=En(n),r=t.Eu.get(e);if(r&&r.lu)return Yn().add(r.key);{let i=Yn();const s=t.Tu.get(e);if(!s)return i;for(const o of s){const a=t.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function BW(n){const e=En(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=kW.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lue.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Rue.bind(null,e),e.hu.J_=xue.bind(null,e.eventManager),e.hu.pu=_ue.bind(null,e.eventManager),e}function Fue(n){const e=En(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nue.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Due.bind(null,e),e}class Kb{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=GA(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Vce(this.persistence,new Bce,e.initialUser,this.serializer)}Du(e){return new vW(jD.Vi,this.serializer)}bu(e){return new qce}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kb.provider={build:()=>new Kb};class Bue extends Kb{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){_r(this.persistence.referenceDelegate instanceof qb,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Ece(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?ma.withCacheSize(this.cacheSizeBytes):ma.DEFAULT;return new vW(r=>qb.Vi(r,t),this.serializer)}}class FR{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>d6(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Oue.bind(null,this.syncEngine),await gue(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yue}()}createDatastore(e){const t=GA(e.databaseInfo.databaseId),r=function(s){return new Jce(s)}(e.databaseInfo);return function(s,o,a,l){return new rue(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new sue(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>d6(this.syncEngine,t,0),function(){return o6.C()?new o6:new Yce}())}createSyncEngine(e,t){return function(i,s,o,a,l,c,u){const h=new bue(i,s,o,a,l,c);return u&&(h.fu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=En(i);Nt(pm,"RemoteStore shutting down."),s.Ia.add(5),await b_(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}FR.provider={build:()=>new FR};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):xh("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="FirestoreClient";class Uue{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=mo.UNAUTHENTICATED,this.clientId=CD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Nt(_f,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Nt(_f,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=qD(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function CM(n,e){n.asyncQueue.verifyOperationInProgress(),Nt(_f,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await yW(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{pf("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{Nt("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{pf("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function p6(n,e){n.asyncQueue.verifyOperationInProgress();const t=await jue(n);Nt(_f,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>l6(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>l6(e.remoteStore,i)),n._onlineComponents=e}async function jue(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Nt(_f,"Using user provided OfflineComponentProvider");try{await CM(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===et.FAILED_PRECONDITION||i.code===et.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;pf("Error using user provided cache. Falling back to memory cache: "+t),await CM(n,new Kb)}}else Nt(_f,"Using default OfflineComponentProvider"),await CM(n,new Bue(void 0));return n._offlineComponents}async function jW(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Nt(_f,"Using user provided OnlineComponentProvider"),await p6(n,n._uninitializedComponentsProvider._online)):(Nt(_f,"Using default OnlineComponentProvider"),await p6(n,new FR))),n._onlineComponents}function Vue(n){return jW(n).then(e=>e.syncEngine)}async function VW(n){const e=await jW(n),t=e.eventManager;return t.onListen=Aue.bind(null,e.syncEngine),t.onUnlisten=Mue.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Tue.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Iue.bind(null,e.syncEngine),t}function zue(n,e,t={}){const r=new lh;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new UW({next:f=>{u.Ou(),o.enqueueAndForget(()=>IW(s,h));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new Ct(et.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new Ct(et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new PW(DD(a.path),u,{includeMetadataChanges:!0,ka:!0});return MW(s,h)}(await VW(n),n.asyncQueue,e,t,r)),r.promise}function Hue(n,e,t={}){const r=new lh;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new UW({next:f=>{u.Ou(),o.enqueueAndForget(()=>IW(s,h)),f.fromCache&&l.source==="server"?c.reject(new Ct(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new PW(a,u,{includeMetadataChanges:!0,ka:!0});return MW(s,h)}(await VW(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zW(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HW="firestore.googleapis.com",g6=!0;class v6{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ct(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=HW,this.ssl=g6}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:g6;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gW;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wce)throw new Ct(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sle("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zW((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ct(et.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ct(et.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ct(et.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qA{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new v6({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ct(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ct(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new v6(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Kae;switch(r.type){case"firstParty":return new ele(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ct(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=m6.get(t);r&&(Nt("ComponentProvider","Removing Datastore"),m6.delete(t),r.terminate())}(this),Promise.resolve()}}function Wue(n,e,t,r={}){var i;n=_h(n,qA);const s=Lv(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;s&&(Iz(`https://${l}`),Pz("Firestore",!0)),o.host!==HW&&o.host!==l&&pf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!ff(c,a)&&(n._setSettings(c),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=mo.MOCK_USER;else{u=lie(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Ct(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new mo(f)}n._authCredentials=new Zae(new CH(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gv=class WW{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new WW(this.firestore,e,this._query)}};class Yi{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yi(this.firestore,e,this._key)}toJSON(){return{type:Yi._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(w_(t,Yi._jsonSchema))return new Yi(e,r||null,new en(Vr.fromString(t.referencePath)))}}Yi._jsonSchemaVersion="firestore/documentReference/1.0",Yi._jsonSchema={type:qi("string",Yi._jsonSchemaVersion),referencePath:qi("string")};class rf extends Gv{constructor(e,t,r){super(e,t,DD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yi(this.firestore,null,new en(e))}withConverter(e){return new rf(this.firestore,e,this._path)}}function fi(n,e,...t){if(n=Gs(n),IH("collection","path",e),n instanceof qA){const r=Vr.fromString(e,...t);return P8(r),new rf(n,null,r)}{if(!(n instanceof Yi||n instanceof rf))throw new Ct(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Vr.fromString(e,...t));return P8(r),new rf(n.firestore,null,r)}}function si(n,e,...t){if(n=Gs(n),arguments.length===1&&(e=CD.newId()),IH("doc","path",e),n instanceof qA){const r=Vr.fromString(e,...t);return I8(r),new Yi(n,null,new en(r))}{if(!(n instanceof Yi||n instanceof rf))throw new Ct(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Vr.fromString(e,...t));return I8(r),new Yi(n.firestore,n instanceof rf?n.converter:null,new en(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6="AsyncQueue";class x6{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new _W(this,"async_queue_retry"),this.oc=()=>{const r=TM();r&&Nt(y6,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=TM();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=TM();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new lh;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!zv(e))throw e;Nt(y6,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,xh("INTERNAL UNHANDLED ERROR: ",_6(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const i=XD.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&gn(47125,{hc:_6(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function _6(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class $v extends qA{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new x6,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new x6(e),this._firestoreClient=void 0,await e}}}function Gue(n,e){const t=typeof n=="object"?n:mD(),r=typeof n=="string"?n:Vb,i=Nm(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=oie("firestore");s&&Wue(i,...s)}return i}function QD(n){if(n._terminated)throw new Ct(et.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||$ue(n),n._firestoreClient}function $ue(n){var e,t,r;const i=n._freezeSettings(),s=function(a,l,c,u){return new vle(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,zW(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Uue(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _l($s.fromBase64String(e))}catch(t){throw new Ct(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _l($s.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_l._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(w_(e,_l._jsonSchema))return _l.fromBase64String(e.bytes)}}_l._jsonSchemaVersion="firestore/bytes/1.0",_l._jsonSchema={type:qi("string",_l._jsonSchemaVersion),bytes:qi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ct(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Us(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GW{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ct(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ct(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return jn(this._lat,e._lat)||jn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:lu._jsonSchemaVersion}}static fromJSON(e){if(w_(e,lu._jsonSchema))return new lu(e.latitude,e.longitude)}}lu._jsonSchemaVersion="firestore/geoPoint/1.0",lu._jsonSchema={type:qi("string",lu._jsonSchemaVersion),latitude:qi("number"),longitude:qi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:cu._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(w_(e,cu._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new cu(e.vectorValues);throw new Ct(et.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}cu._jsonSchemaVersion="firestore/vectorValue/1.0",cu._jsonSchema={type:qi("string",cu._jsonSchemaVersion),vectorValues:qi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xue=/^__.*__$/;class que{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Lm(e,this.data,this.fieldMask,t,this.fieldTransforms):new S_(e,this.data,t,this.fieldTransforms)}}function $W(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gn(40011,{Ec:n})}}class ek{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new ek(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Zb(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if($W(this.Ec)&&Xue.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Yue{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||GA(e)}Dc(e,t,r,i=!1){return new ek({Ec:e,methodName:t,bc:r,path:Us.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tk(n){const e=n._freezeSettings(),t=GA(n._databaseId);return new Yue(n._databaseId,!!e.ignoreUndefinedProperties,t)}function XW(n,e,t,r,i,s={}){const o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);KW("Data must be an object, but it was:",o,r);const a=qW(r,o);let l,c;if(s.merge)l=new lc(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const f=Zue(e,h,t);if(!o.contains(f))throw new Ct(et.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Jue(u,f)||u.push(f)}l=new lc(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new que(new xl(a),l,c)}function Kue(n,e,t,r=!1){return nk(t,n.Dc(r?4:3,e))}function nk(n,e){if(YW(n=Gs(n)))return KW("Unsupported field value:",e,n),qW(n,e);if(n instanceof GW)return function(r,i){if(!$W(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=nk(a,i.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Gs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jle(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=zr.fromDate(r);return{timestampValue:Xb(i.serializer,s)}}if(r instanceof zr){const s=new zr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xb(i.serializer,s)}}if(r instanceof lu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _l)return{bytesValue:cW(i.serializer,r._byteString)};if(r instanceof Yi){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:BD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof cu)return function(o,a){return{mapValue:{fields:{[BH]:{stringValue:UH},[zb]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.wc("VectorValues must only contain numeric values.");return kD(a.serializer,c)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${LA(r)}`)}(n,e)}function qW(n,e){const t={};return NH(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):km(n,(r,i)=>{const s=nk(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function YW(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof zr||n instanceof lu||n instanceof _l||n instanceof Yi||n instanceof GW||n instanceof cu)}function KW(n,e,t){if(!YW(t)||!PH(t)){const r=LA(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Zue(n,e,t){if((e=Gs(e))instanceof JD)return e._internalPath;if(typeof e=="string")return ZW(n,e);throw Zb("Field path arguments must be of type string or ",n,!1,void 0,t)}const Que=new RegExp("[~\\*/\\[\\]]");function ZW(n,e,t){if(e.search(Que)>=0)throw Zb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new JD(...e.split("."))._internalPath}catch{throw Zb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Zb(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Ct(et.INVALID_ARGUMENT,a+n+l)}function Jue(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QW{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Yi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ehe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(YA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ehe extends QW{data(){return super.data()}}function YA(n,e){return typeof e=="string"?ZW(n,e):e instanceof JD?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function the(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ct(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rk{}class ik extends rk{}function sk(n,e,...t){let r=[];e instanceof rk&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof ok).length,a=s.filter(l=>l instanceof KA).length;if(o>1||o>0&&a>0)throw new Ct(et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class KA extends ik{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new KA(e,t,r)}_apply(e){const t=this._parse(e);return eG(e._query,t),new Gv(e.firestore,e.converter,MR(e._query,t))}_parse(e){const t=tk(e.firestore);return function(s,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Ct(et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){S6(h,u);const v=[];for(const _ of h)v.push(w6(l,s,_));f={arrayValue:{values:v}}}else f=w6(l,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||S6(h,u),f=Kue(a,o,h,u==="in"||u==="not-in");return $i.create(c,u,f)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function nhe(n,e,t){const r=e,i=YA("where",n);return KA._create(i,r,t)}class ok extends rk{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ok(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:vc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)eG(o,l),o=MR(o,l)}(e._query,t),new Gv(e.firestore,e.converter,MR(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ak extends ik{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ak(e,t)}_apply(e){const t=function(i,s,o){if(i.startAt!==null)throw new Ct(et.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ct(et.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tx(s,o)}(e._query,this._field,this._direction);return new Gv(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Hv(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function rhe(n,e="asc"){const t=e,r=YA("orderBy",n);return ak._create(r,t)}class lk extends ik{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new lk(e,t,r)}_apply(e){return new Gv(e.firestore,e.converter,Wb(e._query,this._limit,this._limitType))}}function JW(n){return ole("limit",n),lk._create("limit",n,"F")}function w6(n,e,t){if(typeof(t=Gs(t))=="string"){if(t==="")throw new Ct(et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XH(e)&&t.indexOf("/")!==-1)throw new Ct(et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Vr.fromString(t));if(!en.isDocumentKey(r))throw new Ct(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return B8(n,new en(r))}if(t instanceof Yi)return B8(n,t._key);throw new Ct(et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${LA(t)}.`)}function S6(n,e){if(!Array.isArray(n)||n.length===0)throw new Ct(et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eG(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ct(et.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ct(et.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class ihe{convertValue(e,t="none"){switch(yf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Li(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw gn(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return km(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[zb].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Li(o.doubleValue));return new cu(s)}convertGeoPoint(e){return new lu(Li(e.latitude),Li(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=UA(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ex(e));default:return null}}convertTimestamp(e){const t=gf(e);return new zr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Vr.fromString(e);_r(mW(r),9688,{name:e});const i=new bx(r.get(1),r.get(3)),s=new en(r.popFirst(5));return i.isEqual(t)||xh(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tG(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class u1{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class em extends QW{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new VE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(YA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ct(et.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=em._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}em._jsonSchemaVersion="firestore/documentSnapshot/1.0",em._jsonSchema={type:qi("string",em._jsonSchemaVersion),bundleSource:qi("string","DocumentSnapshot"),bundleName:qi("string"),bundle:qi("string")};class VE extends em{data(e={}){return super.data(e)}}class R0{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new u1(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new VE(this._firestore,this._userDataWriter,r.key,r,new u1(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ct(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new VE(i._firestore,i._userDataWriter,a.doc.key,a.doc,new u1(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new VE(i._firestore,i._userDataWriter,a.doc.key,a.doc,new u1(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:she(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ct(et.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=R0._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=CD.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function she(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gn(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(n){n=_h(n,Yi);const e=_h(n.firestore,$v);return zue(QD(e),n._key).then(t=>ohe(e,n,t))}R0._jsonSchemaVersion="firestore/querySnapshot/1.0",R0._jsonSchema={type:qi("string",R0._jsonSchemaVersion),bundleSource:qi("string","QuerySnapshot"),bundleName:qi("string"),bundle:qi("string")};class nG extends ihe{constructor(e){super(),this.firestore=e}convertBytes(e){return new _l(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yi(this.firestore,null,t)}}function Ss(n){n=_h(n,Gv);const e=_h(n.firestore,$v),t=QD(e),r=new nG(e);return the(n._query),Hue(t,n._query).then(i=>new R0(e,r,n,i))}function Fa(n,e,t){n=_h(n,Yi);const r=_h(n.firestore,$v),i=tG(n.converter,e,t);return ck(r,[XW(tk(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,dc.none())])}function Ny(n){return ck(_h(n.firestore,$v),[new OD(n._key,dc.none())])}function zE(n,e){const t=_h(n.firestore,$v),r=si(n),i=tG(n.converter,e);return ck(t,[XW(tk(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,dc.exists(!1))]).then(()=>r)}function ck(n,e){return function(r,i){const s=new lh;return r.asyncQueue.enqueueAndForget(async()=>Pue(await Vue(r),i,s)),s.promise}(QD(n),e)}function ohe(n,e,t){const r=t.docs.get(e._key),i=new nG(n);return new em(n,i,e._key,r,new u1(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){jv=i})(Fv),vu(new mc("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new $v(new Qae(r.getProvider("auth-internal")),new tle(o,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ct(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bx(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Al(b8,A8,e),Al(b8,A8,"esm2017")})();const rG="@firebase/installations",uk="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iG=1e4,sG=`w:${uk}`,oG="FIS_v2",ahe="https://firebaseinstallations.googleapis.com/v1",lhe=60*60*1e3,che="installations",uhe="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hhe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},mm=new Rm(che,uhe,hhe);function aG(n){return n instanceof wc&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lG({projectId:n}){return`${ahe}/projects/${n}/installations`}function cG(n){return{token:n.token,requestStatus:2,expiresIn:fhe(n.expiresIn),creationTime:Date.now()}}async function uG(n,e){const r=(await e.json()).error;return mm.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function hG({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function dhe(n,{refreshToken:e}){const t=hG(n);return t.append("Authorization",phe(e)),t}async function dG(n){const e=await n();return e.status>=500&&e.status<600?n():e}function fhe(n){return Number(n.replace("s","000"))}function phe(n){return`${oG} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mhe({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=lG(n),i=hG(n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:t,authVersion:oG,appId:n.appId,sdkVersion:sG},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await dG(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:cG(c.authToken)}}else throw await uG("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fG(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ghe(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vhe=/^[cdef][\w-]{21}$/,BR="";function yhe(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=xhe(n);return vhe.test(t)?t:BR}catch{return BR}}function xhe(n){return ghe(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pG=new Map;function mG(n,e){const t=ZA(n);gG(t,e),_he(t,e)}function gG(n,e){const t=pG.get(n);if(t)for(const r of t)r(e)}function _he(n,e){const t=whe();t&&t.postMessage({key:n,fid:e}),She()}let Lp=null;function whe(){return!Lp&&"BroadcastChannel"in self&&(Lp=new BroadcastChannel("[Firebase] FID Change"),Lp.onmessage=n=>{gG(n.data.key,n.data.fid)}),Lp}function She(){pG.size===0&&Lp&&(Lp.close(),Lp=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ehe="firebase-installations-database",bhe=1,gm="firebase-installations-store";let MM=null;function hk(){return MM||(MM=Lz(Ehe,bhe,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(gm)}}})),MM}async function Qb(n,e){const t=ZA(n),i=(await hk()).transaction(gm,"readwrite"),s=i.objectStore(gm),o=await s.get(t);return await s.put(e,t),await i.done,(!o||o.fid!==e.fid)&&mG(n,e.fid),e}async function vG(n){const e=ZA(n),r=(await hk()).transaction(gm,"readwrite");await r.objectStore(gm).delete(e),await r.done}async function QA(n,e){const t=ZA(n),i=(await hk()).transaction(gm,"readwrite"),s=i.objectStore(gm),o=await s.get(t),a=e(o);return a===void 0?await s.delete(t):await s.put(a,t),await i.done,a&&(!o||o.fid!==a.fid)&&mG(n,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(n){let e;const t=await QA(n.appConfig,r=>{const i=Ahe(r),s=The(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===BR?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Ahe(n){const e=n||{fid:yhe(),registrationStatus:0};return yG(e)}function The(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(mm.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Che(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Mhe(n)}:{installationEntry:e}}async function Che(n,e){try{const t=await mhe(n,e);return Qb(n.appConfig,t)}catch(t){throw aG(t)&&t.customData.serverCode===409?await vG(n.appConfig):await Qb(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function Mhe(n){let e=await E6(n.appConfig);for(;e.registrationStatus===1;)await fG(100),e=await E6(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await dk(n);return r||t}return e}function E6(n){return QA(n,e=>{if(!e)throw mm.create("installation-not-found");return yG(e)})}function yG(n){return Ihe(n)?{fid:n.fid,registrationStatus:0}:n}function Ihe(n){return n.registrationStatus===1&&n.registrationTime+iG<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Phe({appConfig:n,heartbeatServiceProvider:e},t){const r=Rhe(n,t),i=dhe(n,t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:sG,appId:n.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await dG(()=>fetch(r,a));if(l.ok){const c=await l.json();return cG(c)}else throw await uG("Generate Auth Token",l)}function Rhe(n,{fid:e}){return`${lG(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(n,e=!1){let t;const r=await QA(n.appConfig,s=>{if(!xG(s))throw mm.create("not-registered");const o=s.authToken;if(!e&&khe(o))return s;if(o.requestStatus===1)return t=Nhe(n,e),s;{if(!navigator.onLine)throw mm.create("app-offline");const a=Lhe(s);return t=Dhe(n,a),a}});return t?await t:r.authToken}async function Nhe(n,e){let t=await b6(n.appConfig);for(;t.authToken.requestStatus===1;)await fG(100),t=await b6(n.appConfig);const r=t.authToken;return r.requestStatus===0?fk(n,e):r}function b6(n){return QA(n,e=>{if(!xG(e))throw mm.create("not-registered");const t=e.authToken;return Fhe(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Dhe(n,e){try{const t=await Phe(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Qb(n.appConfig,r),t}catch(t){if(aG(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await vG(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Qb(n.appConfig,r)}throw t}}function xG(n){return n!==void 0&&n.registrationStatus===2}function khe(n){return n.requestStatus===2&&!Ohe(n)}function Ohe(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+lhe}function Lhe(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function Fhe(n){return n.requestStatus===1&&n.requestTime+iG<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bhe(n){const e=n,{installationEntry:t,registrationPromise:r}=await dk(e);return r?r.catch(console.error):fk(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uhe(n,e=!1){const t=n;return await jhe(t),(await fk(t,e)).token}async function jhe(n){const{registrationPromise:e}=await dk(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vhe(n){if(!n||!n.options)throw IM("App Configuration");if(!n.name)throw IM("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw IM(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function IM(n){return mm.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _G="installations",zhe="installations-internal",Hhe=n=>{const e=n.getProvider("app").getImmediate(),t=Vhe(e),r=Nm(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Whe=n=>{const e=n.getProvider("app").getImmediate(),t=Nm(e,_G).getImmediate();return{getId:()=>Bhe(t),getToken:i=>Uhe(t,i)}};function Ghe(){vu(new mc(_G,Hhe,"PUBLIC")),vu(new mc(zhe,Whe,"PRIVATE"))}Ghe();Al(rG,uk);Al(rG,uk,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="analytics",$he="firebase_id",Xhe="origin",qhe=60*1e3,Yhe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pk="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new RA("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Khe={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Wa=new Rm("analytics","Analytics",Khe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zhe(n){if(!n.startsWith(pk)){const e=Wa.create("invalid-gtag-resource",{gtagURL:n});return Ta.warn(e.message),""}return n}function wG(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Qhe(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function Jhe(n,e){const t=Qhe("firebase-js-sdk-policy",{createScriptURL:Zhe}),r=document.createElement("script"),i=`${pk}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function ede(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function tde(n,e,t,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await wG(t)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){Ta.error(a)}n("config",i,s)}async function nde(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await wG(t);for(const l of o){const c=a.find(h=>h.measurementId===l),u=c&&e[c.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),n("event",r,i||{})}catch(s){Ta.error(s)}}function rde(n,e,t,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await nde(n,e,t,a,l)}else if(s==="config"){const[a,l]=o;await tde(n,e,t,r,a,l)}else if(s==="consent"){const[a,l]=o;n("consent",a,l)}else if(s==="get"){const[a,l,c]=o;n("get",a,l,c)}else if(s==="set"){const[a]=o;n("set",a)}else n(s,...o)}catch(a){Ta.error(a)}}return i}function ide(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=rde(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}function sde(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(pk)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ode=30,ade=1e3;class lde{constructor(e={},t=ade){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const SG=new lde;function cde(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function ude(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:cde(r)},s=Yhe.replace("{app-id}",t),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Wa.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function hde(n,e=SG,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw Wa.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Wa.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new pde;return setTimeout(async()=>{a.abort()},qhe),EG({appId:r,apiKey:i,measurementId:s},o,a,e)}async function EG(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=SG){var s;const{appId:o,measurementId:a}=n;try{await dde(r,e)}catch(l){if(a)return Ta.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await ude(n);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!fde(c)){if(i.deleteThrottleMetadata(o),a)return Ta.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?qF(t,i.intervalMillis,ode):qF(t,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:t+1};return i.setThrottleMetadata(o,h),Ta.debug(`Calling attemptFetch again in ${u} millis`),EG(n,h,r,i)}}function dde(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Wa.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function fde(n){if(!(n instanceof wc)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class pde{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function mde(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});n("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gde(){if(Nz())try{await Dz()}catch(n){return Ta.warn(Wa.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Ta.warn(Wa.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function vde(n,e,t,r,i,s,o){var a;const l=hde(n);l.then(p=>{t[p.measurementId]=p.appId,n.options.measurementId&&p.measurementId!==n.options.measurementId&&Ta.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>Ta.error(p)),e.push(l);const c=gde().then(p=>{if(p)return r.getId()}),[u,h]=await Promise.all([l,c]);sde(s)||Jhe(s,u.measurementId),i("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[Xhe]="firebase",f.update=!0,h!=null&&(f[$he]=h),i("config",u.measurementId,f),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yde{constructor(e){this.app=e}_delete(){return delete B1[this.app.options.appId],Promise.resolve()}}let B1={},A6=[];const T6={};let PM="dataLayer",xde="gtag",C6,bG,M6=!1;function _de(){const n=[];if(Rz()&&n.push("This is a browser extension environment."),vie()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Wa.create("invalid-analytics-context",{errorInfo:e});Ta.warn(t.message)}}function wde(n,e,t){_de();const r=n.options.appId;if(!r)throw Wa.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Ta.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Wa.create("no-api-key");if(B1[r]!=null)throw Wa.create("already-exists",{id:r});if(!M6){ede(PM);const{wrappedGtag:s,gtagCore:o}=ide(B1,A6,T6,PM,xde);bG=s,C6=o,M6=!0}return B1[r]=vde(n,A6,T6,e,C6,PM,t),new yde(n)}function Sde(n=mD()){n=Gs(n);const e=Nm(n,Jb);return e.isInitialized()?e.getImmediate():Ede(n)}function Ede(n,e={}){const t=Nm(n,Jb);if(t.isInitialized()){const i=t.getImmediate();if(ff(e,t.getOptions()))return i;throw Wa.create("already-initialized")}return t.initialize({options:e})}function bde(n,e,t,r){n=Gs(n),mde(bG,B1[n.app.options.appId],e,t,r).catch(i=>Ta.error(i))}const I6="@firebase/analytics",P6="0.10.17";function Ade(){vu(new mc(Jb,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return wde(r,i,t)},"PUBLIC")),vu(new mc("analytics-internal",n,"PRIVATE")),Al(I6,P6),Al(I6,P6,"esm2017");function n(e){try{const t=e.getProvider(Jb).getImmediate();return{logEvent:(r,i,s)=>bde(t,r,i,s)}}catch(t){throw Wa.create("interop-component-reg-failed",{reason:t})}}}Ade();const Tde={apiKey:"AIzaSyBe-XLmVRiMs844VxR1_awMzGEGARb6Xmk",authDomain:"website-mpn-65e8d.firebaseapp.com",projectId:"website-mpn-65e8d",storageBucket:"website-mpn-65e8d.firebasestorage.app",messagingSenderId:"798271486726",appId:"1:798271486726:web:0d0e0178a963804f627c87",measurementId:"G-KSVPVC1Z9D"},mk=Fz(Tde),sf=qae(mk);Loe(sf,hH).catch(n=>{console.warn("Auth persistence configuration failed:",n)});const wn=Gue(mk);let Cde=null;if(typeof window<"u")try{localStorage.getItem("cookieConsent")==="true"&&(Cde=Sde(mk))}catch(n){console.warn("Analytics disabled due to cookie/storage restrictions:",n)}console.log("Firebase initialized successfully");function AG(){const[n,e]=O.useState([]),[t,r]=O.useState(!0);return O.useEffect(()=>{(async()=>{r(!0);const o=fi(wn,"struktur_kepengurusan"),a=await Ss(o);e(a.docs.map(l=>l.data())),r(!1)})()},[]),{pengurus:n,loading:t,saveStruktur:async s=>{r(!0);const o=fi(wn,"struktur_kepengurusan");await Promise.all(s.map(a=>Fa(si(o,a.jabatan),a))),e(s),r(!1)}}}function C_(n,e){return e||(e=n.slice(0)),n.raw=e,n}var Mde=function(){function n(t){var r=this;this._insertTag=function(i){r.container.insertBefore(i,r.tags.length===0?r.insertionPoint?r.insertionPoint.nextSibling:r.prepend?r.container.firstChild:r.before:r.tags[r.tags.length-1].nextSibling),r.tags.push(i)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var o=document.createElement("style");return o.setAttribute("data-emotion",s.key),s.nonce!==void 0&&o.setAttribute("nonce",s.nonce),o.appendChild(document.createTextNode("")),o.setAttribute("data-s",""),o}(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=function(s){if(s.sheet)return s.sheet;for(var o=0;o<document.styleSheets.length;o++)if(document.styleSheets[o].ownerNode===s)return document.styleSheets[o]}(r);try{i.insertRule(t,i.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach(function(t){return t.parentNode&&t.parentNode.removeChild(t)}),this.tags=[],this.ctr=0},n}(),ha="-ms-",Ur="-webkit-",Ide=Math.abs,JA=String.fromCharCode,Pde=Object.assign;function TG(n){return n.trim()}function vr(n,e,t){return n.replace(e,t)}function UR(n,e){return n.indexOf(e)}function fa(n,e){return 0|n.charCodeAt(e)}function Ix(n,e,t){return n.slice(e,t)}function $c(n){return n.length}function gk(n){return n.length}function lS(n,e){return e.push(n),n}var eT=1,fv=1,CG=0,Ca=0,Wi=0,Xv="";function tT(n,e,t,r,i,s,o){return{value:n,root:e,parent:t,type:r,props:i,children:s,line:eT,column:fv,length:o,return:""}}function Dy(n,e){return Pde(tT("",null,null,"",null,null,0),n,{length:-n.length},e)}function Rde(){return Wi=Ca>0?fa(Xv,--Ca):0,fv--,Wi===10&&(fv=1,eT--),Wi}function Ga(){return Wi=Ca<CG?fa(Xv,Ca++):0,fv++,Wi===10&&(fv=1,eT++),Wi}function uu(){return fa(Xv,Ca)}function HE(){return Ca}function M_(n,e){return Ix(Xv,n,e)}function Px(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function MG(n){return eT=fv=1,CG=$c(Xv=n),Ca=0,[]}function IG(n){return Xv="",n}function WE(n){return TG(M_(Ca-1,jR(n===91?n+2:n===40?n+1:n)))}function Nde(n){for(;(Wi=uu())&&Wi<33;)Ga();return Px(n)>2||Px(Wi)>3?"":" "}function Dde(n,e){for(;--e&&Ga()&&!(Wi<48||Wi>102||Wi>57&&Wi<65||Wi>70&&Wi<97););return M_(n,HE()+(e<6&&uu()==32&&Ga()==32))}function jR(n){for(;Ga();)switch(Wi){case n:return Ca;case 34:case 39:n!==34&&n!==39&&jR(Wi);break;case 40:n===41&&jR(n);break;case 92:Ga()}return Ca}function kde(n,e){for(;Ga()&&n+Wi!==57&&(n+Wi!==84||uu()!==47););return"/*"+M_(e,Ca-1)+"*"+JA(n===47?n:Ga())}function Ode(n){for(;!Px(uu());)Ga();return M_(n,Ca)}function Lde(n){return IG(GE("",null,null,null,[""],n=MG(n),0,[0],n))}function GE(n,e,t,r,i,s,o,a,l){for(var c=0,u=0,h=o,f=0,p=0,v=0,_=1,S=1,x=1,E=0,b="",M=i,k=s,B=r,P=b;S;)switch(v=E,E=Ga()){case 40:if(v!=108&&P.charCodeAt(h-1)==58){UR(P+=vr(WE(E),"&","&\f"),"&\f")!=-1&&(x=-1);break}case 34:case 39:case 91:P+=WE(E);break;case 9:case 10:case 13:case 32:P+=Nde(v);break;case 92:P+=Dde(HE()-1,7);continue;case 47:switch(uu()){case 42:case 47:lS(Fde(kde(Ga(),HE()),e,t),l);break;default:P+="/"}break;case 123*_:a[c++]=$c(P)*x;case 125*_:case 59:case 0:switch(E){case 0:case 125:S=0;case 59+u:p>0&&$c(P)-h&&lS(p>32?N6(P+";",r,t,h-1):N6(vr(P," ","")+";",r,t,h-2),l);break;case 59:P+=";";default:if(lS(B=R6(P,e,t,c,u,i,a,b,M=[],k=[],h),s),E===123)if(u===0)GE(P,e,B,B,M,s,h,a,k);else switch(f){case 100:case 109:case 115:GE(n,B,B,r&&lS(R6(n,B,B,0,0,i,a,b,i,M=[],h),k),i,k,h,a,r?M:k);break;default:GE(P,B,B,B,[""],k,0,a,k)}}c=u=p=0,_=x=1,b=P="",h=o;break;case 58:h=1+$c(P),p=v;default:if(_<1){if(E==123)--_;else if(E==125&&_++==0&&Rde()==125)continue}switch(P+=JA(E),E*_){case 38:x=u>0?1:(P+="\f",-1);break;case 44:a[c++]=($c(P)-1)*x,x=1;break;case 64:uu()===45&&(P+=WE(Ga())),f=uu(),u=h=$c(b=P+=Ode(HE())),E++;break;case 45:v===45&&$c(P)==2&&(_=0)}}return s}function R6(n,e,t,r,i,s,o,a,l,c,u){for(var h=i-1,f=i===0?s:[""],p=gk(f),v=0,_=0,S=0;v<r;++v)for(var x=0,E=Ix(n,h+1,h=Ide(_=o[v])),b=n;x<p;++x)(b=TG(_>0?f[x]+" "+E:vr(E,/&\f/g,f[x])))&&(l[S++]=b);return tT(n,e,t,i===0?"rule":a,l,c,u)}function Fde(n,e,t){return tT(n,e,t,"comm",JA(Wi),Ix(n,2,-2),0)}function N6(n,e,t,r){return tT(n,e,t,"decl",Ix(n,0,r),Ix(n,r+1,-1),r)}function PG(n,e){switch(function(t,r){return(((r<<2^fa(t,0))<<2^fa(t,1))<<2^fa(t,2))<<2^fa(t,3)}(n,e)){case 5103:return Ur+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ur+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Ur+n+"-moz-"+n+ha+n+n;case 6828:case 4268:return Ur+n+ha+n+n;case 6165:return Ur+n+ha+"flex-"+n+n;case 5187:return Ur+n+vr(n,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+n;case 5443:return Ur+n+ha+"flex-item-"+vr(n,/flex-|-self/,"")+n;case 4675:return Ur+n+ha+"flex-line-pack"+vr(n,/align-content|flex-|-self/,"")+n;case 5548:return Ur+n+ha+vr(n,"shrink","negative")+n;case 5292:return Ur+n+ha+vr(n,"basis","preferred-size")+n;case 6060:return Ur+"box-"+vr(n,"-grow","")+Ur+n+ha+vr(n,"grow","positive")+n;case 4554:return Ur+vr(n,/([^-])(transform)/g,"$1-webkit-$2")+n;case 6187:return vr(vr(vr(n,/(zoom-|grab)/,Ur+"$1"),/(image-set)/,Ur+"$1"),n,"")+n;case 5495:case 3959:return vr(n,/(image-set\([^]*)/,Ur+"$1$`$1");case 4968:return vr(vr(n,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ur+n+n;case 4095:case 3583:case 4068:case 2532:return vr(n,/(.+)-inline(.+)/,Ur+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if($c(n)-1-e>6)switch(fa(n,e+1)){case 109:if(fa(n,e+4)!==45)break;case 102:return vr(n,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1-moz-"+(fa(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~UR(n,"stretch")?PG(vr(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(fa(n,e+1)!==115)break;case 6444:switch(fa(n,$c(n)-3-(~UR(n,"!important")&&10))){case 107:return vr(n,":",":"+Ur)+n;case 101:return vr(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ur+(fa(n,14)===45?"inline-":"")+"box$3$1"+Ur+"$2$3$1"+ha+"$2box$3")+n}break;case 5936:switch(fa(n,e+11)){case 114:return Ur+n+ha+vr(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Ur+n+ha+vr(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Ur+n+ha+vr(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return Ur+n+ha+n+n}return n}function N0(n,e){for(var t="",r=gk(n),i=0;i<r;i++)t+=e(n[i],i,n,e)||"";return t}function Bde(n,e,t,r){switch(n.type){case"@import":case"decl":return n.return=n.return||n.value;case"comm":return"";case"@keyframes":return n.return=n.value+"{"+N0(n.children,r)+"}";case"rule":n.value=n.props.join(",")}return $c(t=N0(n.children,r))?n.return=n.value+"{"+t+"}":""}function Ude(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var jde=function(n,e,t){for(var r=0,i=0;r=i,i=uu(),r===38&&i===12&&(e[t]=1),!Px(i);)Ga();return M_(n,Ca)},D6=new WeakMap,Vde=function(n){if(n.type==="rule"&&n.parent&&!(n.length<1)){for(var e=n.value,t=n.parent,r=n.column===t.column&&n.line===t.line;t.type!=="rule";)if(!(t=t.parent))return;if((n.props.length!==1||e.charCodeAt(0)===58||D6.get(t))&&!r){D6.set(n,!0);for(var i=[],s=function(u,h){return IG(function(f,p){var v=-1,_=44;do switch(Px(_)){case 0:_===38&&uu()===12&&(p[v]=1),f[v]+=jde(Ca-1,p,v);break;case 2:f[v]+=WE(_);break;case 4:if(_===44){f[++v]=uu()===58?"&\f":"",p[v]=f[v].length;break}default:f[v]+=JA(_)}while(_=Ga());return f}(MG(u),h))}(e,i),o=t.props,a=0,l=0;a<s.length;a++)for(var c=0;c<o.length;c++,l++)n.props[l]=i[a]?s[a].replace(/&\f/g,o[c]):o[c]+" "+s[a]}}},zde=function(n){if(n.type==="decl"){var e=n.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(n.return="",n.value="")}},Hde=[function(n,e,t,r){if(n.length>-1&&!n.return)switch(n.type){case"decl":n.return=PG(n.value,n.length);break;case"@keyframes":return N0([Dy(n,{value:vr(n.value,"@","@"+Ur)})],r);case"rule":if(n.length)return function(i,s){return i.map(s).join("")}(n.props,function(i){switch(function(s,o){return(s=/(::plac\w+|:read-\w+)/.exec(s))?s[0]:s}(i)){case":read-only":case":read-write":return N0([Dy(n,{props:[vr(i,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return N0([Dy(n,{props:[vr(i,/:(plac\w+)/,":-webkit-input-$1")]}),Dy(n,{props:[vr(i,/:(plac\w+)/,":-moz-$1")]}),Dy(n,{props:[vr(i,/:(plac\w+)/,ha+"input-$1")]})],r)}return""})}}],Wde={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Gde=/[A-Z]|^ms/g,$de=/_EMO_([^_]+?)_([^]*?)_EMO_/g,RG=function(n){return n.charCodeAt(1)===45},k6=function(n){return n!=null&&typeof n!="boolean"},RM=Ude(function(n){return RG(n)?n:n.replace(Gde,"-$&").toLowerCase()}),O6=function(n,e){switch(n){case"animation":case"animationName":if(typeof e=="string")return e.replace($de,function(t,r,i){return Hd={name:r,styles:i,next:Hd},r})}return Wde[n]===1||RG(n)||typeof e!="number"||e===0?e:e+"px"};function e2(n,e,t){if(t==null)return"";if(t.__emotion_styles!==void 0)return t;switch(typeof t){case"boolean":return"";case"object":if(t.anim===1)return Hd={name:t.name,styles:t.styles,next:Hd},t.name;if(t.styles!==void 0){var r=t.next;if(r!==void 0)for(;r!==void 0;)Hd={name:r.name,styles:r.styles,next:Hd},r=r.next;var i=t.styles+";";return i}return function(o,a,l){var c="";if(Array.isArray(l))for(var u=0;u<l.length;u++)c+=e2(o,a,l[u])+";";else for(var h in l){var f=l[h];if(typeof f!="object")a!=null&&a[f]!==void 0?c+=h+"{"+a[f]+"}":k6(f)&&(c+=RM(h)+":"+O6(h,f)+";");else if(!Array.isArray(f)||typeof f[0]!="string"||a!=null&&a[f[0]]!==void 0){var p=e2(o,a,f);switch(h){case"animation":case"animationName":c+=RM(h)+":"+p+";";break;default:c+=h+"{"+p+"}"}}else for(var v=0;v<f.length;v++)k6(f[v])&&(c+=RM(h)+":"+O6(h,f[v])+";")}return c}(n,e,t)}if(e==null)return t;var s=e[t];return s!==void 0?s:t}var Hd,L6=/label:\s*([^\s;\n{]+)\s*(;|$)/g,NM=function(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,i="";Hd=void 0;var s=n[0];s==null||s.raw===void 0?(r=!1,i+=e2(t,e,s)):i+=s[0];for(var o=1;o<n.length;o++)i+=e2(t,e,n[o]),r&&(i+=s[o]);L6.lastIndex=0;for(var a,l="";(a=L6.exec(i))!==null;)l+="-"+a[1];var c=function(u){for(var h,f=0,p=0,v=u.length;v>=4;++p,v-=4)h=1540483477*(65535&(h=255&u.charCodeAt(p)|(255&u.charCodeAt(++p))<<8|(255&u.charCodeAt(++p))<<16|(255&u.charCodeAt(++p))<<24))+(59797*(h>>>16)<<16),f=1540483477*(65535&(h^=h>>>24))+(59797*(h>>>16)<<16)^1540483477*(65535&f)+(59797*(f>>>16)<<16);switch(v){case 3:f^=(255&u.charCodeAt(p+2))<<16;case 2:f^=(255&u.charCodeAt(p+1))<<8;case 1:f=1540483477*(65535&(f^=255&u.charCodeAt(p)))+(59797*(f>>>16)<<16)}return(((f=1540483477*(65535&(f^=f>>>13))+(59797*(f>>>16)<<16))^f>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:Hd}};function NG(n,e,t){var r="";return t.split(" ").forEach(function(i){n[i]!==void 0?e.push(n[i]+";"):r+=i+" "}),r}var Xde=function(n,e,t){(function(s,o,a){var l=s.key+"-"+o.name;s.registered[l]===void 0&&(s.registered[l]=o.styles)})(n,e);var r=n.key+"-"+e.name;if(n.inserted[e.name]===void 0){var i=e;do n.insert(e===i?"."+r:"",i,n.sheet,!0),i=i.next;while(i!==void 0)}};function F6(n,e){if(n.inserted[e.name]===void 0)return n.insert("",e,n.sheet,!0)}function B6(n,e,t){var r=[],i=NG(n,r,t);return r.length<2?t:i+e(r)}var U6,j6,V6,z6,H6,qde=function n(e){for(var t="",r=0;r<e.length;r++){var i=e[r];if(i!=null){var s=void 0;switch(typeof i){case"boolean":break;case"object":if(Array.isArray(i))s=n(i);else for(var o in s="",i)i[o]&&o&&(s&&(s+=" "),s+=o);break;default:s=i}s&&(t&&(t+=" "),t+=s)}}return t},DG=function(n){var e=function(r){var i=r.key;if(i==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(x){x.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(x),x.setAttribute("data-s",""))})}var o=r.stylisPlugins||Hde,a,l,c={},u=[];a=r.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(x){for(var E=x.getAttribute("data-emotion").split(" "),b=1;b<E.length;b++)c[E[b]]=!0;u.push(x)});var h=[Vde,zde],f,p,v=[Bde,(p=function(x){f.insert(x)},function(x){x.root||(x=x.return)&&p(x)})],_=function(x){var E=gk(x);return function(b,M,k,B){for(var P="",N=0;N<E;N++)P+=x[N](b,M,k,B)||"";return P}}(h.concat(o,v));l=function(x,E,b,M){f=b,N0(Lde(x?x+"{"+E.styles+"}":E.styles),_),M&&(S.inserted[E.name]=!0)};var S={key:i,sheet:new Mde({key:i,container:a,nonce:r.nonce,speedy:r.speedy,prepend:r.prepend,insertionPoint:r.insertionPoint}),nonce:r.nonce,inserted:c,registered:{},insert:l};return S.sheet.hydrate(u),S}({key:"css"});e.sheet.speedy=function(r){this.isSpeedy=r},e.compat=!0;var t=function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=NM(i,e.registered,void 0);return Xde(e,o),e.key+"-"+o.name};return{css:t,cx:function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return B6(e.registered,t,qde(i))},injectGlobal:function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=NM(i,e.registered);F6(e,o)},keyframes:function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=NM(i,e.registered),a="animation-"+o.name;return F6(e,{name:o.name,styles:"@keyframes "+a+"{"+o.styles+"}"}),a},hydrate:function(r){r.forEach(function(i){e.inserted[i]=!0})},flush:function(){e.registered={},e.inserted={},e.sheet.flush()},sheet:e.sheet,cache:e,getRegisteredStyles:NG.bind(null,e.registered),merge:B6.bind(null,e.registered,t)}}(),Yde=DG.cx,I_=DG.css,kG=I_(U6||(U6=C_([`
  content: '';
  position: absolute;
  top: 0;
  height: var(--tree-line-height);
  box-sizing: border-box;
`]))),Kde=I_(j6||(j6=C_([`
  display: flex;
  padding-inline-start: 0;
  margin: 0;
  padding-top: var(--tree-line-height);
  position: relative;

  ::before {
    `,`;
    left: calc(50% - var(--tree-line-width) / 2);
    width: 0;
    border-left: var(--tree-line-width) var(--tree-node-line-style)
      var(--tree-line-color);
  }
`])),kG),Zde=I_(V6||(V6=C_([`
  flex: auto;
  text-align: center;
  list-style-type: none;
  position: relative;
  padding: var(--tree-line-height) var(--tree-node-padding) 0
    var(--tree-node-padding);
`]))),Qde=I_(z6||(z6=C_([`
  ::before,
  ::after {
    `,`;
    right: 50%;
    width: 50%;
    border-top: var(--tree-line-width) var(--tree-node-line-style)
      var(--tree-line-color);
  }
  ::after {
    left: 50%;
    border-left: var(--tree-line-width) var(--tree-node-line-style)
      var(--tree-line-color);
  }

  :only-of-type {
    padding: 0;
    ::after,
    :before {
      display: none;
    }
  }

  :first-of-type {
    ::before {
      border: 0 none;
    }
    ::after {
      border-radius: var(--tree-line-border-radius) 0 0 0;
    }
  }

  :last-of-type {
    ::before {
      border-right: var(--tree-line-width) var(--tree-node-line-style)
        var(--tree-line-color);
      border-radius: 0 var(--tree-line-border-radius) 0 0;
    }
    ::after {
      border: 0 none;
    }
  }
`])),kG);function jg(n){var e=n.children,t=n.label;return O.createElement("li",{className:Yde(Zde,Qde,n.className)},t,O.Children.count(e)>0&&O.createElement("ul",{className:Kde},e))}function Jde(n){var e=n.children,t=n.label,r=n.lineHeight,i=r===void 0?"20px":r,s=n.lineWidth,o=s===void 0?"1px":s,a=n.lineColor,l=a===void 0?"black":a,c=n.nodePadding,u=c===void 0?"5px":c,h=n.lineStyle,f=h===void 0?"solid":h,p=n.lineBorderRadius,v=p===void 0?"5px":p;return O.createElement("ul",{className:I_(H6||(H6=C_([`
        padding-inline-start: 0;
        margin: 0;
        display: flex;

        --line-height: `,`;
        --line-width: `,`;
        --line-color: `,`;
        --line-border-radius: `,`;
        --line-style: `,`;
        --node-padding: `,`;

        --tree-line-height: var(--line-height, 20px);
        --tree-line-width: var(--line-width, 1px);
        --tree-line-color: var(--line-color, black);
        --tree-line-border-radius: var(--line-border-radius, 5px);
        --tree-node-line-style: var(--line-style, solid);
        --tree-node-padding: var(--node-padding, 5px);
      `])),i,o,l,v,f,u)},O.createElement(jg,{label:t},e))}function efe(){var r,i,s,o,a;const{pengurus:n,loading:e}=AG(),t=l=>n.find(c=>c.jabatan===l&&c.aktif!==!1);return m.jsxs("div",{className:"max-w-4xl mx-auto py-10 px-4",children:[m.jsx("h1",{className:"text-3xl font-bold mb-8 text-center text-primary drop-shadow",children:"Struktur Kepengurusan"}),e?m.jsx("div",{className:"text-center py-10 text-gray-400",children:"Memuat data..."}):m.jsx("div",{className:"flex flex-col items-center w-full",children:m.jsxs(Jde,{lineWidth:"2px",lineColor:"#3b82f6",lineBorderRadius:"8px",label:m.jsxs("div",{className:"rounded-xl shadow-lg p-4 border border-primary bg-white text-center",children:[m.jsx("span",{className:"font-semibold text-lg text-gray-700",children:"Ketua Umum"}),m.jsx("br",{}),m.jsx("span",{className:"block text-primary text-xl font-bold",children:((r=t("Ketua Umum"))==null?void 0:r.nama)||m.jsx("span",{className:"text-gray-400 italic",children:"Belum diisi"})})]}),children:[m.jsx(jg,{label:m.jsxs("div",{className:"rounded-xl shadow-lg p-4 border border-accent bg-white text-center",children:[m.jsx("span",{className:"font-semibold text-lg text-gray-700",children:"Dewan Penasehat Organisasi"}),m.jsx("br",{}),m.jsx("span",{className:"block text-primary text-xl font-bold",children:((i=t("Dewan Penasehat Organisasi"))==null?void 0:i.nama)||m.jsx("span",{className:"text-gray-400 italic",children:"Belum diisi"})})]})}),m.jsx(jg,{label:m.jsxs("div",{className:"rounded-xl shadow-lg p-4 border border-primary bg-white text-center",children:[m.jsx("span",{className:"font-semibold text-lg text-gray-700",children:"Sekretaris"}),m.jsx("br",{}),m.jsx("span",{className:"block text-primary text-xl font-bold",children:((s=t("Sekretaris"))==null?void 0:s.nama)||m.jsx("span",{className:"text-gray-400 italic",children:"Belum diisi"})})]})}),m.jsx(jg,{label:m.jsxs("div",{className:"rounded-xl shadow-lg p-4 border border-primary bg-white text-center",children:[m.jsx("span",{className:"font-semibold text-lg text-gray-700",children:"Bendahara"}),m.jsx("br",{}),m.jsx("span",{className:"block text-primary text-xl font-bold",children:((o=t("Bendahara"))==null?void 0:o.nama)||m.jsx("span",{className:"text-gray-400 italic",children:"Belum diisi"})})]})}),m.jsx(jg,{label:m.jsxs("div",{className:"rounded-xl shadow-lg p-4 border border-primary bg-white text-center",children:[m.jsx("span",{className:"font-semibold text-lg text-gray-700",children:"Wakil Ketua Umum"}),m.jsx("br",{}),m.jsx("span",{className:"block text-primary text-xl font-bold",children:((a=t("Wakil Ketua Umum"))==null?void 0:a.nama)||m.jsx("span",{className:"text-gray-400 italic",children:"Belum diisi"})})]})}),m.jsx(jg,{label:m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:["Kepala Bidang I (Pendidikan dan Pelatihan)","Kepala Bidang II (Publikasi, Dokumentasi, dan Humas)","Kepala Bidang III (Inventaris)","Kepala Bidang IV (Penelitian & Pengembangan)"].map(l=>{var c;return m.jsxs("div",{className:"rounded-xl shadow-lg p-4 border border-primary bg-white text-center",children:[m.jsx("span",{className:"font-semibold text-lg text-gray-700",children:l}),m.jsx("br",{}),m.jsx("span",{className:"block text-primary text-xl font-bold",children:((c=t(l))==null?void 0:c.nama)||m.jsx("span",{className:"text-gray-400 italic",children:"Belum diisi"})})]},l)})})})]})})]})}const tfe=["Dewan Penasehat Organisasi","Ketua Umum","Wakil Ketua Umum","Sekretaris","Bendahara","Kepala Bidang I (Pendidikan dan Pelatihan)","Kepala Bidang II (Publikasi, Dokumentasi, dan Humas)","Kepala Bidang III (Inventaris)","Kepala Bidang IV (Penelitian & Pengembangan)"];function nfe(){const{pengurus:n,loading:e,saveStruktur:t}=AG(),[r,i]=O.useState([]);O.useEffect(()=>{i(n)},[n]);const s=(l,c)=>{i(u=>u.map(h=>h.jabatan===l?{...h,nama:c}:h))},o=l=>{i(c=>c.map(u=>u.jabatan===l?{...u,aktif:!u.aktif}:u))},a=()=>{t(r)};return m.jsxs("div",{className:"max-w-4xl mx-auto py-10 px-4",children:[m.jsx("h1",{className:"text-3xl font-bold mb-8 text-center text-primary drop-shadow",children:"Edit Struktur Kepengurusan"}),m.jsx("div",{className:"grid gap-6",children:tfe.map((l,c)=>{const u=r.find(h=>h.jabatan===l);return m.jsxs("div",{className:`rounded-xl shadow-lg p-6 flex flex-col sm:flex-row items-center justify-between border-l-4 ${c===0?"border-accent":"border-primary"} bg-gradient-to-r from-white via-gray-50 to-white gap-4`,children:[m.jsx("span",{className:"font-semibold text-lg sm:text-xl text-gray-700",children:l}),m.jsx("input",{type:"text",className:"border rounded px-3 py-2 w-48",value:(u==null?void 0:u.nama)||"",onChange:h=>s(l,h.target.value),placeholder:"Nama Pengurus"}),l==="Wakil Ketua Umum"&&m.jsx("button",{className:`px-3 py-1 rounded transition-all duration-200 shadow ${(u==null?void 0:u.aktif)===!1?"bg-gray-300 text-gray-600":"bg-primary text-white"}`,onClick:()=>o(l),children:(u==null?void 0:u.aktif)===!1?"Nonaktifkan":"Aktifkan"})]},l)})}),m.jsx("div",{className:"flex justify-center mt-8",children:m.jsx("button",{className:"bg-primary text-white px-6 py-2 rounded font-bold shadow-lg text-lg",onClick:a,disabled:e,children:e?"Menyimpan...":"Simpan Perubahan"})})]})}const OG="main",LG="meta";async function vk(){const n=si(wn,LG,OG),e=await T_(n);return e.exists()?e.data():null}async function rfe(n){const e=si(wn,LG,OG);await Fa(e,n,{merge:!0})}const nc=[{imageUrl:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/anggota%20mahapala%20narotama.jpg",alt:"Anggota Mahapala Narotama",title:"Kebersamaan adalah simbol Kekuatan",description:"Bergabunglah dalam misi kami untuk melindungi lingkungan dan eksplorasi alam."},{imageUrl:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/eksplorasi%20alam.jpg",alt:"Pendidikan Rimba Gunung Mahapala Narotama",title:"Petualangan Tanpa Batas",description:"Eksplorasi keindahan alam Indonesia bersama Mahapala Narotama."},{imageUrl:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/panjat%20tebing.png",alt:"Pendidikan Panjat Tebing Mahapala Narotama",title:"Keseruan dalam Berpetualang",description:"Kami berkomitmen untuk pendidikan lingkungan dan pelestarian alam."}],FG="main",BG="homepage";async function UG(){const n=si(wn,BG,FG),e=await T_(n);if(e.exists()){const t=e.data();if(Array.isArray(t.carouselContent)&&t.carouselContent.length>0){const r=t.carouselContent.filter(i=>!nc.some(s=>s.title===i.title));return[...nc,...r]}}return await VR(nc),[...nc]}async function VR(n){const e=si(wn,BG,FG);await Fa(e,{carouselContent:n},{merge:!0})}const jG="devlog";async function dl(n){await zE(fi(wn,jG),{...n,createdAt:zr.now()})}async function ife(){const n=sk(fi(wn,jG),rhe("createdAt","desc"));return(await Ss(n)).docs.map(t=>{var i,s;const r=t.data();return{action:r.action,detail:r.detail,user:r.user,createdAt:((s=(i=r.createdAt)==null?void 0:i.toDate)==null?void 0:s.call(i))||new Date}})}const W6={title:"Mahapala Narotama - Organisasi Pecinta Alam | MPN | UKM Narotama",description:"Mahapala Narotama (MPN) adalah UKM Pecinta Alam Universitas Narotama Surabaya. Info kegiatan, pembelajaran, dan anggota Mahapala Narotama.",keywords:"Mahapala Narotama, mahapala narotama, MPN, ukm narotama, mahapalanarotama, organisasi pecinta alam, mapala, mahasiswa, surabaya, universitas narotama",image:"https://opengraph.b-cdn.net/production/images/e0842583-257e-46c1-9055-1c49ee456d3f.jpg?token=p3fN6dOPVL12p7_4AZrWfifa4bvHLMnndwMwNRQCpwg&height=900&width=1200&expires=33285527673",favicon:"/favicon.ico",faviconFallback:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/favicon.ico",faviconPng:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/favicon.png",googleFormUrl:"",googleFormDownloadUrl:""};function sfe(){const[n,e]=O.useState(W6),[t,r]=O.useState(!1),[i,s]=O.useState(!1),[o,a]=O.useState(n),[l,c]=O.useState(!1),[u,h]=O.useState(null),[f,p]=O.useState(""),[v,_]=O.useState(""),[S,x]=O.useState(""),[E,b]=O.useState(!0),[M,k]=O.useState("meta"),[B,P]=O.useState([]),[N,R]=O.useState(!1),[I,U]=O.useState(null),[H,W]=O.useState(null),[K,te]=O.useState(!1);O.useEffect(()=>{M==="homepage"&&u&&(R(!0),UG().then(Me=>{const Ye=(Me||[]).filter(Pe=>!nc.some(ne=>ne.title===Pe.title));P([...nc,...Ye]),R(!1)}))},[M,u]);const se=(Me,Ye)=>{U(Me),W(Ye),te(!0)},le=()=>{U({imageUrl:"",alt:"",title:"",description:""}),W(null),te(!0)},X=Me=>{if(window.confirm("Hapus slide ini?")){let Ye=[...B];Ye.splice(Me,1),Ye.length<nc.length&&(Ye=[...nc]),P(Ye),VR(Ye)}},ce=()=>{if(!I)return;let Me=[...B];H===null?Me.push(I):Me[H]=I;const Ye=Me.filter(Pe=>!nc.some(ne=>ne.title===Pe.title));Me=[...nc,...Ye],P(Me),VR(Me),te(!1),U(null),W(null)},[oe,fe]=O.useState([]),[De,We]=O.useState(!1);O.useEffect(()=>{const Me=ED(sf,Ye=>{h(Ye),b(!1)});return()=>Me()},[]),O.useEffect(()=>{u&&vk().then(Me=>{Me&&(e(Me),a(Me))})},[u]),O.useEffect(()=>{M==="logadmin"&&(We(!0),ife().then(Me=>{fe(Me),We(!1)}))},[M]);const Qe=Me=>{a({...o,[Me.target.name]:Me.target.value})},ve=()=>{s(!0),a(n)},Ie=()=>{c(!0)},we=async()=>{await rfe(o),e(o),s(!1),c(!1),u!=null&&u.email&&await dl({action:"Edit Meta",detail:"Meta diubah melalui halaman developer",user:u.email})},tt=()=>{c(!1)},Ke=async Me=>{Me.preventDefault(),x("");try{await SD(sf,f,v)}catch(Ye){Ye.code==="auth/invalid-credential"?x("Email / Password Salah!"):x("Login gagal: "+Ye.message)}};return E?m.jsx("div",{className:"text-center py-20",children:"Loading..."}):u?m.jsxs("div",{className:"max-w-2xl mx-auto py-10 px-4",children:[m.jsx("h1",{className:"text-3xl font-extrabold mb-8 text-center text-primary",children:"Developer Tools"}),m.jsxs("div",{className:"mb-6 flex gap-2 border-b border-blue-200",children:[m.jsx("button",{className:`px-4 py-2 font-semibold rounded-t-lg ${M==="meta"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-500"}`,onClick:()=>k("meta"),children:"Meta"}),m.jsx("button",{className:`px-4 py-2 font-semibold rounded-t-lg ${M==="logadmin"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-500"}`,onClick:()=>k("logadmin"),children:"Log Admin"}),m.jsx("button",{className:`px-4 py-2 font-semibold rounded-t-lg ${M==="homepage"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-500"}`,onClick:()=>k("homepage"),children:"Homepage"})]}),m.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-green-50 rounded-2xl shadow-lg p-8 border border-blue-100 min-h-[400px]",children:[M==="homepage"&&m.jsxs(m.Fragment,{children:[m.jsxs("h2",{className:"font-bold text-xl mb-4 text-blue-900 flex items-center gap-2",children:[m.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-blue-600",children:[m.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),m.jsx("path",{d:"M3 9h18"}),m.jsx("path",{d:"M9 21V9"})]}),"Homepage Carousel Editor"]}),N?m.jsx("div",{className:"text-center py-10 text-gray-500",children:"Memuat data carousel..."}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"flex justify-end mb-4",children:m.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded shadow",onClick:le,children:"Tambah Slide"})}),B.length===0?m.jsx("div",{className:"text-center text-gray-400 py-10",children:"Belum ada data carousel."}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full text-sm",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-blue-100 text-blue-900",children:[m.jsx("th",{className:"p-2",children:"Gambar"}),m.jsx("th",{className:"p-2",children:"Alt"}),m.jsx("th",{className:"p-2",children:"Judul"}),m.jsx("th",{className:"p-2",children:"Deskripsi"}),m.jsx("th",{className:"p-2",children:"Aksi"})]})}),m.jsx("tbody",{children:B.map((Me,Ye)=>m.jsxs("tr",{className:"border-b last:border-b-0",children:[m.jsx("td",{className:"p-2",children:m.jsx("img",{src:Me.imageUrl,alt:Me.alt,className:"h-16 w-28 object-cover rounded"})}),m.jsx("td",{className:"p-2 max-w-xs truncate",children:Me.alt}),m.jsx("td",{className:"p-2 max-w-xs truncate",children:Me.title}),m.jsx("td",{className:"p-2 max-w-xs truncate",children:Me.description}),m.jsxs("td",{className:"p-2 flex gap-2",children:[m.jsx("button",{className:"bg-yellow-400 hover:bg-yellow-500 text-white px-3 py-1 rounded",onClick:()=>se(Me,Ye),children:"Edit"}),m.jsx("button",{className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded",onClick:()=>X(Ye),children:"Hapus"})]})]},Ye))})]})}),K&&m.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/40 z-50",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[m.jsxs("h3",{className:"font-bold text-lg mb-4",children:[H===null?"Tambah":"Edit"," Slide Carousel"]}),m.jsxs("div",{className:"grid gap-3 mb-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium mb-1",children:"Gambar (URL)"}),m.jsx("input",{className:"w-full border rounded p-2",value:(I==null?void 0:I.imageUrl)||"",onChange:Me=>U({...I,imageUrl:Me.target.value}),placeholder:"https://..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium mb-1",children:"Alt"}),m.jsx("input",{className:"w-full border rounded p-2",value:(I==null?void 0:I.alt)||"",onChange:Me=>U({...I,alt:Me.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium mb-1",children:"Judul"}),m.jsx("input",{className:"w-full border rounded p-2",value:(I==null?void 0:I.title)||"",onChange:Me=>U({...I,title:Me.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium mb-1",children:"Deskripsi"}),m.jsx("textarea",{className:"w-full border rounded p-2",value:(I==null?void 0:I.description)||"",onChange:Me=>U({...I,description:Me.target.value})})]})]}),m.jsxs("div",{className:"flex gap-2 justify-end",children:[m.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded",onClick:ce,children:"Simpan"}),m.jsx("button",{className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded",onClick:()=>{te(!1),U(null),W(null)},children:"Batal"})]})]})})]})]}),M==="meta"&&m.jsxs(m.Fragment,{children:[m.jsxs("h2",{className:"font-bold text-xl mb-4 text-blue-900 flex items-center gap-2",children:[m.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-blue-600",children:[m.jsx("path",{d:"M16 18v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),m.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Meta Head Editor"]}),i?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"flex justify-end mb-2",children:m.jsx("button",{className:"text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1 rounded shadow border border-gray-300",type:"button",onClick:()=>a(W6),children:"Kembalikan ke Default"})}),m.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium mb-1",children:"Title"}),m.jsx("input",{className:"w-full border rounded p-2",name:"title",value:o.title,onChange:Qe})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium mb-1",children:"Description"}),m.jsx("textarea",{className:"w-full border rounded p-2",name:"description",value:o.description,onChange:Qe})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium mb-1",children:"Keywords"}),m.jsx("input",{className:"w-full border rounded p-2",name:"keywords",value:o.keywords,onChange:Qe})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium mb-1",children:"Image (og:image)"}),m.jsx("input",{className:"w-full border rounded p-2",name:"image",value:o.image,onChange:Qe})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium mb-1",children:"Favicon (ico)"}),m.jsx("input",{className:"w-full border rounded p-2",name:"favicon",value:o.favicon,onChange:Qe})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium mb-1",children:"Favicon Fallback (ico)"}),m.jsx("input",{className:"w-full border rounded p-2",name:"faviconFallback",value:o.faviconFallback,onChange:Qe})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium mb-1",children:"Favicon PNG"}),m.jsx("input",{className:"w-full border rounded p-2",name:"faviconPng",value:o.faviconPng,onChange:Qe})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium mb-1",children:"Link Google Formulir Pendaftaran"}),m.jsx("input",{className:"w-full border rounded p-2",name:"googleFormUrl",value:o.googleFormUrl||"",onChange:Qe,placeholder:"https://docs.google.com/forms/..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium mb-1",children:"Link Download Formulir (editable)"}),m.jsx("input",{className:"w-full border rounded p-2",name:"googleFormDownloadUrl",value:o.googleFormDownloadUrl||"",onChange:Qe,placeholder:"https://.../formulir.docx"})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded shadow",onClick:Ie,type:"button",children:"Simpan"}),m.jsx("button",{className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded",onClick:()=>s(!1),type:"button",children:"Batal"})]}),l&&m.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/40 z-50",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-sm w-full",children:[m.jsx("h3",{className:"font-bold text-lg mb-2",children:"Konfirmasi Simpan"}),m.jsx("p",{className:"mb-4",children:"Apakah Anda yakin ingin menyimpan perubahan meta tag?"}),m.jsxs("div",{className:"flex gap-2 justify-end",children:[m.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded",onClick:we,children:"Ya, Simpan"}),m.jsx("button",{className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded",onClick:tt,children:"Batal"})]})]})}),t&&m.jsx("div",{className:"mt-6 bg-gray-50 p-4 rounded border text-xs overflow-x-auto",children:m.jsx("code",{children:`
<!-- Meta Preview -->
<title>${n.title}</title>
<meta name="description" content="${n.description}" />
<meta name="keywords" content="${n.keywords}" />
<meta property="og:title" content="${n.title}" />
<meta property="og:description" content="${n.description}" />
<meta property="og:image" content="${n.image}" />
<link rel="icon" href="${n.favicon}" type="image/x-icon" />
<link rel="icon" type="image/x-icon" href="${n.faviconFallback}" />
<link rel="icon" type="image/png" href="${n.faviconPng}" />
                      `})})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid grid-cols-1 gap-3 mb-4",children:[m.jsxs("div",{className:"truncate max-w-full",children:[m.jsx("span",{className:"font-semibold",children:"Title:"})," ",n.title]}),m.jsxs("div",{className:"truncate max-w-full",children:[m.jsx("span",{className:"font-semibold",children:"Description:"})," ",n.description]}),m.jsxs("div",{className:"truncate max-w-full",children:[m.jsx("span",{className:"font-semibold",children:"Keywords:"})," ",n.keywords]}),m.jsxs("div",{className:"truncate max-w-full",children:[m.jsx("span",{className:"font-semibold",children:"Image:"})," ",m.jsx("a",{href:n.image,className:"text-blue-600 underline",target:"_blank",rel:"noopener noreferrer",children:n.image})]}),m.jsxs("div",{className:"truncate max-w-full",children:[m.jsx("span",{className:"font-semibold",children:"Favicon:"})," ",m.jsx("a",{href:n.favicon,className:"text-blue-600 underline",target:"_blank",rel:"noopener noreferrer",children:n.favicon})]}),m.jsxs("div",{className:"truncate max-w-full",children:[m.jsx("span",{className:"font-semibold",children:"Favicon Fallback:"})," ",m.jsx("a",{href:n.faviconFallback,className:"text-blue-600 underline",target:"_blank",rel:"noopener noreferrer",children:n.faviconFallback})]}),m.jsxs("div",{className:"truncate max-w-full",children:[m.jsx("span",{className:"font-semibold",children:"Favicon PNG:"})," ",m.jsx("a",{href:n.faviconPng,className:"text-blue-600 underline",target:"_blank",rel:"noopener noreferrer",children:n.faviconPng})]}),m.jsxs("div",{className:"truncate max-w-full",children:[m.jsx("span",{className:"font-semibold",children:"Link Google Formulir Pendaftaran:"})," ",m.jsx("a",{href:n.googleFormUrl,className:"text-blue-600 underline",target:"_blank",rel:"noopener noreferrer",children:n.googleFormUrl})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded shadow",onClick:ve,children:"Edit"}),m.jsxs("button",{className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded",onClick:()=>r(!t),children:[t?"Sembunyikan":"Lihat"," Meta Tag Preview"]})]})]})]}),M==="logadmin"&&m.jsxs(m.Fragment,{children:[m.jsxs("h2",{className:"font-bold text-xl mb-4 text-blue-900 flex items-center gap-2",children:[m.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-blue-600",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("path",{d:"M12 6v6l4 2"})]}),"Log Admin"]}),De?m.jsx("div",{className:"text-center py-10 text-gray-500",children:"Memuat log..."}):oe.length===0?m.jsx("div",{className:"text-center py-10 text-gray-400",children:"Belum ada aktivitas."}):m.jsxs("div",{className:"overflow-x-auto overflow-y-auto max-h-96 scrollbar-thin scrollbar-thumb-blue-200 scrollbar-track-blue-50 rounded-lg",children:[m.jsxs("table",{className:"w-full min-w-[700px] text-sm font-mono bg-[#181c20] text-[#e0e6ef] rounded-lg shadow-lg",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-[#23272e] text-[#7dd3fc]",children:[m.jsx("th",{className:"p-2 text-left font-mono",children:"Waktu"}),m.jsx("th",{className:"p-2 text-left font-mono",children:"User"}),m.jsx("th",{className:"p-2 text-left font-mono",children:"Aksi"}),m.jsx("th",{className:"p-2 text-left font-mono",children:"Detail"})]})}),m.jsx("tbody",{children:oe.map((Me,Ye)=>m.jsxs("tr",{className:"border-b border-[#23272e] last:border-b-0 hover:bg-[#23272e] transition",children:[m.jsx("td",{className:"p-2 whitespace-nowrap text-[#a3e635]",children:Me.createdAt.toLocaleString()}),m.jsx("td",{className:"p-2 whitespace-nowrap text-[#38bdf8]",children:Me.user}),m.jsx("td",{className:"p-2 whitespace-nowrap font-bold "+(Me.action.toLowerCase().includes("edit")?"text-yellow-400":Me.action.toLowerCase().includes("hapus")?"text-red-400":Me.action.toLowerCase().includes("tambah")?"text-green-400":"text-[#e0e6ef]"),children:Me.action}),m.jsx("td",{className:"p-2 text-[#e0e6ef]",children:Me.detail})]},Ye))})]}),m.jsx("div",{className:"flex items-center justify-center mt-2",children:m.jsx("span",{className:"text-xs text-blue-300 font-mono",children:"Geser ke kanan  untuk melihat detail log >>"})})]})]})]})]}):m.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-green-50",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 w-full max-w-sm",children:[m.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Login Developer"}),m.jsxs("form",{onSubmit:Ke,className:"space-y-4",children:[m.jsx("input",{className:"w-full border rounded p-2",type:"email",placeholder:"Email",value:f,onChange:Me=>p(Me.target.value),required:!0}),m.jsx("input",{className:"w-full border rounded p-2",type:"password",placeholder:"Password",value:v,onChange:Me=>_(Me.target.value),required:!0}),S&&m.jsx("div",{className:"text-red-600 text-sm",children:S}),m.jsx("button",{className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",type:"submit",children:"Login"})]})]})})}function ofe(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,r,i,s,o=[],a="",l=n.split("/");for(l[0]||l.shift();i=l.shift();)t=i[0],t==="*"?(o.push(t),a+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(r=i.indexOf("?",1),s=i.indexOf(".",1),o.push(i.substring(1,~r?r:~s?s:i.length)),a+=~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(a+=(~r?"?":"")+"\\"+i.substring(s))):a+="/"+i;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var VG={exports:{}},zG={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pv=O;function afe(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var lfe=typeof Object.is=="function"?Object.is:afe,cfe=pv.useState,ufe=pv.useEffect,hfe=pv.useLayoutEffect,dfe=pv.useDebugValue;function ffe(n,e){var t=e(),r=cfe({inst:{value:t,getSnapshot:e}}),i=r[0].inst,s=r[1];return hfe(function(){i.value=t,i.getSnapshot=e,DM(i)&&s({inst:i})},[n,t,e]),ufe(function(){return DM(i)&&s({inst:i}),n(function(){DM(i)&&s({inst:i})})},[n]),dfe(t),t}function DM(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!lfe(n,t)}catch{return!0}}function pfe(n,e){return e()}var mfe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?pfe:ffe;zG.useSyncExternalStore=pv.useSyncExternalStore!==void 0?pv.useSyncExternalStore:mfe;VG.exports=zG;var gfe=VG.exports;const vfe=E3.useInsertionEffect,yfe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xfe=yfe?O.useLayoutEffect:O.useEffect,_fe=vfe||xfe,HG=n=>{const e=O.useRef([n,(...t)=>e[0](...t)]).current;return _fe(()=>{e[0]=n}),e[1]},wfe="popstate",yk="pushState",xk="replaceState",Sfe="hashchange",G6=[wfe,yk,xk,Sfe],Efe=n=>{for(const e of G6)addEventListener(e,n);return()=>{for(const e of G6)removeEventListener(e,n)}},WG=(n,e)=>gfe.useSyncExternalStore(Efe,n,e),bfe=()=>location.search,Afe=({ssrSearch:n=""}={})=>WG(bfe,()=>n),$6=()=>location.pathname,Tfe=({ssrPath:n}={})=>WG($6,n?()=>n:$6),Cfe=(n,{replace:e=!1,state:t=null}={})=>history[e?xk:yk](t,"",n),Mfe=(n={})=>[Tfe(n),Cfe],X6=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[X6]>"u"){for(const n of[yk,xk]){const e=history[n];history[n]=function(){const t=e.apply(this,arguments),r=new Event(n);return r.arguments=arguments,dispatchEvent(r),t}}Object.defineProperty(window,X6,{value:!0})}const Ife=(n,e)=>e.toLowerCase().indexOf(n.toLowerCase())?"~"+e:e.slice(n.length)||"/",GG=(n="")=>n==="/"?"":n,Pfe=(n,e)=>n[0]==="~"?n.slice(1):GG(e)+n,Rfe=(n="",e)=>Ife(q6(GG(n)),q6(e)),q6=n=>{try{return decodeURI(n)}catch{return n}},$G={hook:Mfe,searchHook:Afe,parser:ofe,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:n=>n},XG=O.createContext($G),P_=()=>O.useContext(XG),qG={},YG=O.createContext(qG),KG=()=>O.useContext(YG),nT=n=>{const[e,t]=n.hook(n);return[Rfe(n.base,e),HG((r,i)=>t(Pfe(r,n.base),i))]},R_=()=>nT(P_()),ZG=(n,e,t,r)=>{const{pattern:i,keys:s}=e instanceof RegExp?{keys:!1,pattern:e}:n(e||"*",r),o=i.exec(t)||[],[a,...l]=o;return a!==void 0?[!0,(()=>{const c=s!==!1?Object.fromEntries(s.map((h,f)=>[h,l[f]])):o.groups;let u={...l};return c&&Object.assign(u,c),u})(),...r?[a]:[]]:[!1,null]},Nfe=({children:n,...e})=>{var u,h;const t=P_(),r=e.hook?$G:t;let i=r;const[s,o]=((u=e.ssrPath)==null?void 0:u.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=s),e.hrefs=e.hrefs??((h=e.hook)==null?void 0:h.hrefs);let a=O.useRef({}),l=a.current,c=l;for(let f in r){const p=f==="base"?r[f]+(e[f]||""):e[f]||r[f];l===c&&p!==c[f]&&(a.current=c={...c}),c[f]=p,(p!==r[f]||p!==i[f])&&(i=c)}return O.createElement(XG.Provider,{value:i,children:n})},Y6=({children:n,component:e},t)=>e?O.createElement(e,{params:t}):typeof n=="function"?n(t):n,Dfe=n=>{let e=O.useRef(qG);const t=e.current;return e.current=Object.keys(n).length!==Object.keys(t).length||Object.entries(n).some(([r,i])=>i!==t[r])?n:t},ys=({path:n,nest:e,match:t,...r})=>{const i=P_(),[s]=nT(i),[o,a,l]=t??ZG(i.parser,n,s,e),c=Dfe({...KG(),...a});if(!o)return null;const u=l?O.createElement(Nfe,{base:l},Y6(r,c)):Y6(r,c);return O.createElement(YG.Provider,{value:c,children:u})},Va=O.forwardRef((n,e)=>{const t=P_(),[r,i]=nT(t),{to:s="",href:o=s,onClick:a,asChild:l,children:c,className:u,replace:h,state:f,...p}=n,v=HG(S=>{S.ctrlKey||S.metaKey||S.altKey||S.shiftKey||S.button!==0||(a==null||a(S),S.defaultPrevented||(S.preventDefault(),i(o,n)))}),_=t.hrefs(o[0]==="~"?o.slice(1):t.base+o,t);return l&&O.isValidElement(c)?O.cloneElement(c,{onClick:v,href:_}):O.createElement("a",{...p,onClick:v,href:_,className:u!=null&&u.call?u(r===o):u,children:c,ref:e})}),QG=n=>Array.isArray(n)?n.flatMap(e=>QG(e&&e.type===O.Fragment?e.props.children:e)):[n],kfe=({children:n,location:e})=>{const t=P_(),[r]=nT(t);for(const i of QG(n)){let s=0;if(O.isValidElement(i)&&(s=ZG(t.parser,i.props.path,e||r,i.props.nest))[0])return O.cloneElement(i,{match:s})}return null},Ofe=1,Lfe=1e6;let kM=0;function Ffe(){return kM=(kM+1)%Number.MAX_SAFE_INTEGER,kM.toString()}const OM=new Map,K6=n=>{if(OM.has(n))return;const e=setTimeout(()=>{OM.delete(n),U1({type:"REMOVE_TOAST",toastId:n})},Lfe);OM.set(n,e)},Bfe=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,Ofe)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?K6(t):n.toasts.forEach(r=>{K6(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},$E=[];let XE={toasts:[]};function U1(n){XE=Bfe(XE,n),$E.forEach(e=>{e(XE)})}function Ufe({...n}){const e=Ffe(),t=i=>U1({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>U1({type:"DISMISS_TOAST",toastId:e});return U1({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function JG(){const[n,e]=O.useState(XE);return O.useEffect(()=>($E.push(e),()=>{const t=$E.indexOf(e);t>-1&&$E.splice(t,1)}),[n]),{...n,toast:Ufe,dismiss:t=>U1({type:"DISMISS_TOAST",toastId:t})}}function cn(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Z6(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function e$(...n){return e=>{let t=!1;const r=n.map(i=>{const s=Z6(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Z6(n[i],null)}}}}function Rr(...n){return O.useCallback(e$(...n),n)}function jfe(n,e){const t=O.createContext(e),r=s=>{const{children:o,...a}=s,l=O.useMemo(()=>a,Object.values(a));return m.jsx(t.Provider,{value:l,children:o})};r.displayName=n+"Provider";function i(s){const o=O.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[r,i]}function Ph(n,e=[]){let t=[];function r(s,o){const a=O.createContext(o),l=t.length;t=[...t,o];const c=h=>{var x;const{scope:f,children:p,...v}=h,_=((x=f==null?void 0:f[n])==null?void 0:x[l])||a,S=O.useMemo(()=>v,Object.values(v));return m.jsx(_.Provider,{value:S,children:p})};c.displayName=s+"Provider";function u(h,f){var _;const p=((_=f==null?void 0:f[n])==null?void 0:_[l])||a,v=O.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=t.map(o=>O.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return O.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,Vfe(i,...e)]}function Vfe(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return O.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function mv(n){const e=Hfe(n),t=O.forwardRef((r,i)=>{const{children:s,...o}=r,a=O.Children.toArray(s),l=a.find(Wfe);if(l){const c=l.props.children,u=a.map(h=>h===l?O.Children.count(c)>1?O.Children.only(null):O.isValidElement(c)?c.props.children:null:h);return m.jsx(e,{...o,ref:i,children:O.isValidElement(c)?O.cloneElement(c,void 0,u):null})}return m.jsx(e,{...o,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}var zfe=mv("Slot");function Hfe(n){const e=O.forwardRef((t,r)=>{const{children:i,...s}=t;if(O.isValidElement(i)){const o=$fe(i),a=Gfe(s,i.props);return i.type!==O.Fragment&&(a.ref=r?e$(r,o):o),O.cloneElement(i,a)}return O.Children.count(i)>1?O.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var t$=Symbol("radix.slottable");function n$(n){const e=({children:t})=>m.jsx(m.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=t$,e}function Wfe(n){return O.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===t$}function Gfe(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function $fe(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function _k(n){const e=n+"CollectionProvider",[t,r]=Ph(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=_=>{const{scope:S,children:x}=_,E=fn.useRef(null),b=fn.useRef(new Map).current;return m.jsx(i,{scope:S,itemMap:b,collectionRef:E,children:x})};o.displayName=e;const a=n+"CollectionSlot",l=mv(a),c=fn.forwardRef((_,S)=>{const{scope:x,children:E}=_,b=s(a,x),M=Rr(S,b.collectionRef);return m.jsx(l,{ref:M,children:E})});c.displayName=a;const u=n+"CollectionItemSlot",h="data-radix-collection-item",f=mv(u),p=fn.forwardRef((_,S)=>{const{scope:x,children:E,...b}=_,M=fn.useRef(null),k=Rr(S,M),B=s(u,x);return fn.useEffect(()=>(B.itemMap.set(M,{ref:M,...b}),()=>void B.itemMap.delete(M))),m.jsx(f,{[h]:"",ref:k,children:E})});p.displayName=u;function v(_){const S=s(n+"CollectionConsumer",_);return fn.useCallback(()=>{const E=S.collectionRef.current;if(!E)return[];const b=Array.from(E.querySelectorAll(`[${h}]`));return Array.from(S.itemMap.values()).sort((B,P)=>b.indexOf(B.ref.current)-b.indexOf(P.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},v,r]}var Xfe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],On=Xfe.reduce((n,e)=>{const t=mv(`Primitive.${e}`),r=O.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function r$(n,e){n&&Pf.flushSync(()=>n.dispatchEvent(e))}function Pl(n){const e=O.useRef(n);return O.useEffect(()=>{e.current=n}),O.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function qfe(n,e=globalThis==null?void 0:globalThis.document){const t=Pl(n);O.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var Yfe="DismissableLayer",zR="dismissableLayer.update",Kfe="dismissableLayer.pointerDownOutside",Zfe="dismissableLayer.focusOutside",Q6,i$=O.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),N_=O.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=n,c=O.useContext(i$),[u,h]=O.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=O.useState({}),v=Rr(e,P=>h(P)),_=Array.from(c.layers),[S]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=_.indexOf(S),E=u?_.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,M=E>=x,k=Jfe(P=>{const N=P.target,R=[...c.branches].some(I=>I.contains(N));!M||R||(i==null||i(P),o==null||o(P),P.defaultPrevented||a==null||a())},f),B=epe(P=>{const N=P.target;[...c.branches].some(I=>I.contains(N))||(s==null||s(P),o==null||o(P),P.defaultPrevented||a==null||a())},f);return qfe(P=>{E===c.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&a&&(P.preventDefault(),a()))},f),O.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Q6=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),J6(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Q6)}},[u,f,t,c]),O.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),J6())},[u,c]),O.useEffect(()=>{const P=()=>p({});return document.addEventListener(zR,P),()=>document.removeEventListener(zR,P)},[]),m.jsx(On.div,{...l,ref:v,style:{pointerEvents:b?M?"auto":"none":void 0,...n.style},onFocusCapture:cn(n.onFocusCapture,B.onFocusCapture),onBlurCapture:cn(n.onBlurCapture,B.onBlurCapture),onPointerDownCapture:cn(n.onPointerDownCapture,k.onPointerDownCapture)})});N_.displayName=Yfe;var Qfe="DismissableLayerBranch",s$=O.forwardRef((n,e)=>{const t=O.useContext(i$),r=O.useRef(null),i=Rr(e,r);return O.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),m.jsx(On.div,{...n,ref:i})});s$.displayName=Qfe;function Jfe(n,e=globalThis==null?void 0:globalThis.document){const t=Pl(n),r=O.useRef(!1),i=O.useRef(()=>{});return O.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){o$(Kfe,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function epe(n,e=globalThis==null?void 0:globalThis.document){const t=Pl(n),r=O.useRef(!1);return O.useEffect(()=>{const i=s=>{s.target&&!r.current&&o$(Zfe,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function J6(){const n=new CustomEvent(zR);document.dispatchEvent(n)}function o$(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?r$(i,s):i.dispatchEvent(s)}var tpe=N_,npe=s$,Xs=globalThis!=null&&globalThis.document?O.useLayoutEffect:()=>{},rpe="Portal",rT=O.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[i,s]=O.useState(!1);Xs(()=>s(!0),[]);const o=t||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Zre.createPortal(m.jsx(On.div,{...r,ref:e}),o):null});rT.displayName=rpe;function ipe(n,e){return O.useReducer((t,r)=>e[t][r]??t,n)}var Bm=n=>{const{present:e,children:t}=n,r=spe(e),i=typeof t=="function"?t({present:r.isPresent}):O.Children.only(t),s=Rr(r.ref,ope(i));return typeof t=="function"||r.isPresent?O.cloneElement(i,{ref:s}):null};Bm.displayName="Presence";function spe(n){const[e,t]=O.useState(),r=O.useRef(null),i=O.useRef(n),s=O.useRef("none"),o=n?"mounted":"unmounted",[a,l]=ipe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return O.useEffect(()=>{const c=cS(r.current);s.current=a==="mounted"?c:"none"},[a]),Xs(()=>{const c=r.current,u=i.current;if(u!==n){const f=s.current,p=cS(c);n?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),Xs(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=p=>{const _=cS(r.current).includes(p.animationName);if(p.target===e&&_&&(l("ANIMATION_END"),!i.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},f=p=>{p.target===e&&(s.current=cS(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:O.useCallback(c=>{r.current=c?getComputedStyle(c):null,t(c)},[])}}function cS(n){return(n==null?void 0:n.animationName)||"none"}function ope(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var ape=E3[" useInsertionEffect ".trim().toString()]||Xs;function gv({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,s,o]=lpe({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:i;{const u=O.useRef(n!==void 0);O.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=O.useCallback(u=>{var h;if(a){const f=cpe(u)?u(n):u;f!==n&&((h=o.current)==null||h.call(o,f))}else s(u)},[a,n,s,o]);return[l,c]}function lpe({defaultProp:n,onChange:e}){const[t,r]=O.useState(n),i=O.useRef(t),s=O.useRef(e);return ape(()=>{s.current=e},[e]),O.useEffect(()=>{var o;i.current!==t&&((o=s.current)==null||o.call(s,t),i.current=t)},[t,i]),[t,r,s]}function cpe(n){return typeof n=="function"}var a$=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),upe="VisuallyHidden",iT=O.forwardRef((n,e)=>m.jsx(On.span,{...n,ref:e,style:{...a$,...n.style}}));iT.displayName=upe;var hpe=iT,wk="ToastProvider",[Sk,dpe,fpe]=_k("Toast"),[l$,HFe]=Ph("Toast",[fpe]),[ppe,sT]=l$(wk),c$=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=n,[a,l]=O.useState(null),[c,u]=O.useState(0),h=O.useRef(!1),f=O.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${wk}\`. Expected non-empty \`string\`.`),m.jsx(Sk.Provider,{scope:e,children:m.jsx(ppe,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:O.useCallback(()=>u(p=>p+1),[]),onToastRemove:O.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};c$.displayName=wk;var u$="ToastViewport",mpe=["F8"],HR="toast.viewportPause",WR="toast.viewportResume",h$=O.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=mpe,label:i="Notifications ({hotkey})",...s}=n,o=sT(u$,t),a=dpe(t),l=O.useRef(null),c=O.useRef(null),u=O.useRef(null),h=O.useRef(null),f=Rr(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;O.useEffect(()=>{const S=x=>{var b;r.length!==0&&r.every(M=>x[M]||x.code===M)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[r]),O.useEffect(()=>{const S=l.current,x=h.current;if(v&&S&&x){const E=()=>{if(!o.isClosePausedRef.current){const B=new CustomEvent(HR);x.dispatchEvent(B),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const B=new CustomEvent(WR);x.dispatchEvent(B),o.isClosePausedRef.current=!1}},M=B=>{!S.contains(B.relatedTarget)&&b()},k=()=>{S.contains(document.activeElement)||b()};return S.addEventListener("focusin",E),S.addEventListener("focusout",M),S.addEventListener("pointermove",E),S.addEventListener("pointerleave",k),window.addEventListener("blur",E),window.addEventListener("focus",b),()=>{S.removeEventListener("focusin",E),S.removeEventListener("focusout",M),S.removeEventListener("pointermove",E),S.removeEventListener("pointerleave",k),window.removeEventListener("blur",E),window.removeEventListener("focus",b)}}},[v,o.isClosePausedRef]);const _=O.useCallback(({tabbingDirection:S})=>{const E=a().map(b=>{const M=b.ref.current,k=[M,...Mpe(M)];return S==="forwards"?k:k.reverse()});return(S==="forwards"?E.reverse():E).flat()},[a]);return O.useEffect(()=>{const S=h.current;if(S){const x=E=>{var k,B,P;const b=E.altKey||E.ctrlKey||E.metaKey;if(E.key==="Tab"&&!b){const N=document.activeElement,R=E.shiftKey;if(E.target===S&&R){(k=c.current)==null||k.focus();return}const H=_({tabbingDirection:R?"backwards":"forwards"}),W=H.findIndex(K=>K===N);LM(H.slice(W+1))?E.preventDefault():R?(B=c.current)==null||B.focus():(P=u.current)==null||P.focus()}};return S.addEventListener("keydown",x),()=>S.removeEventListener("keydown",x)}},[a,_]),m.jsxs(npe,{ref:l,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&m.jsx(GR,{ref:c,onFocusFromOutsideViewport:()=>{const S=_({tabbingDirection:"forwards"});LM(S)}}),m.jsx(Sk.Slot,{scope:t,children:m.jsx(On.ol,{tabIndex:-1,...s,ref:f})}),v&&m.jsx(GR,{ref:u,onFocusFromOutsideViewport:()=>{const S=_({tabbingDirection:"backwards"});LM(S)}})]})});h$.displayName=u$;var d$="ToastFocusProxy",GR=O.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=sT(d$,t);return m.jsx(iT,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});GR.displayName=d$;var D_="Toast",gpe="toast.swipeStart",vpe="toast.swipeMove",ype="toast.swipeCancel",xpe="toast.swipeEnd",f$=O.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...o}=n,[a,l]=gv({prop:r,defaultProp:i??!0,onChange:s,caller:D_});return m.jsx(Bm,{present:t||a,children:m.jsx(Spe,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Pl(n.onPause),onResume:Pl(n.onResume),onSwipeStart:cn(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:cn(n.onSwipeMove,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:cn(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:cn(n.onSwipeEnd,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});f$.displayName=D_;var[_pe,wpe]=l$(D_,{onClose(){}}),Spe=O.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...v}=n,_=sT(D_,t),[S,x]=O.useState(null),E=Rr(e,K=>x(K)),b=O.useRef(null),M=O.useRef(null),k=i||_.duration,B=O.useRef(0),P=O.useRef(k),N=O.useRef(0),{onToastAdd:R,onToastRemove:I}=_,U=Pl(()=>{var te;(S==null?void 0:S.contains(document.activeElement))&&((te=_.viewport)==null||te.focus()),o()}),H=O.useCallback(K=>{!K||K===1/0||(window.clearTimeout(N.current),B.current=new Date().getTime(),N.current=window.setTimeout(U,K))},[U]);O.useEffect(()=>{const K=_.viewport;if(K){const te=()=>{H(P.current),c==null||c()},se=()=>{const le=new Date().getTime()-B.current;P.current=P.current-le,window.clearTimeout(N.current),l==null||l()};return K.addEventListener(HR,se),K.addEventListener(WR,te),()=>{K.removeEventListener(HR,se),K.removeEventListener(WR,te)}}},[_.viewport,k,l,c,H]),O.useEffect(()=>{s&&!_.isClosePausedRef.current&&H(k)},[s,k,_.isClosePausedRef,H]),O.useEffect(()=>(R(),()=>I()),[R,I]);const W=O.useMemo(()=>S?_$(S):null,[S]);return _.viewport?m.jsxs(m.Fragment,{children:[W&&m.jsx(Epe,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:W}),m.jsx(_pe,{scope:t,onClose:U,children:Pf.createPortal(m.jsx(Sk.ItemSlot,{scope:t,children:m.jsx(tpe,{asChild:!0,onEscapeKeyDown:cn(a,()=>{_.isFocusedToastEscapeKeyDownRef.current||U(),_.isFocusedToastEscapeKeyDownRef.current=!1}),children:m.jsx(On.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":_.swipeDirection,...v,ref:E,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:cn(n.onKeyDown,K=>{K.key==="Escape"&&(a==null||a(K.nativeEvent),K.nativeEvent.defaultPrevented||(_.isFocusedToastEscapeKeyDownRef.current=!0,U()))}),onPointerDown:cn(n.onPointerDown,K=>{K.button===0&&(b.current={x:K.clientX,y:K.clientY})}),onPointerMove:cn(n.onPointerMove,K=>{if(!b.current)return;const te=K.clientX-b.current.x,se=K.clientY-b.current.y,le=!!M.current,X=["left","right"].includes(_.swipeDirection),ce=["left","up"].includes(_.swipeDirection)?Math.min:Math.max,oe=X?ce(0,te):0,fe=X?0:ce(0,se),De=K.pointerType==="touch"?10:2,We={x:oe,y:fe},Qe={originalEvent:K,delta:We};le?(M.current=We,uS(vpe,h,Qe,{discrete:!1})):e5(We,_.swipeDirection,De)?(M.current=We,uS(gpe,u,Qe,{discrete:!1}),K.target.setPointerCapture(K.pointerId)):(Math.abs(te)>De||Math.abs(se)>De)&&(b.current=null)}),onPointerUp:cn(n.onPointerUp,K=>{const te=M.current,se=K.target;if(se.hasPointerCapture(K.pointerId)&&se.releasePointerCapture(K.pointerId),M.current=null,b.current=null,te){const le=K.currentTarget,X={originalEvent:K,delta:te};e5(te,_.swipeDirection,_.swipeThreshold)?uS(xpe,p,X,{discrete:!0}):uS(ype,f,X,{discrete:!0}),le.addEventListener("click",ce=>ce.preventDefault(),{once:!0})}})})})}),_.viewport)})]}):null}),Epe=n=>{const{__scopeToast:e,children:t,...r}=n,i=sT(D_,e),[s,o]=O.useState(!1),[a,l]=O.useState(!1);return Tpe(()=>o(!0)),O.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:m.jsx(rT,{asChild:!0,children:m.jsx(iT,{...r,children:s&&m.jsxs(m.Fragment,{children:[i.label," ",t]})})})},bpe="ToastTitle",p$=O.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return m.jsx(On.div,{...r,ref:e})});p$.displayName=bpe;var Ape="ToastDescription",m$=O.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return m.jsx(On.div,{...r,ref:e})});m$.displayName=Ape;var g$="ToastAction",v$=O.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?m.jsx(x$,{altText:t,asChild:!0,children:m.jsx(Ek,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${g$}\`. Expected non-empty \`string\`.`),null)});v$.displayName=g$;var y$="ToastClose",Ek=O.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=wpe(y$,t);return m.jsx(x$,{asChild:!0,children:m.jsx(On.button,{type:"button",...r,ref:e,onClick:cn(n.onClick,i.onClose)})})});Ek.displayName=y$;var x$=O.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return m.jsx(On.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function _$(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Cpe(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(..._$(r))}}),e}function uS(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?r$(i,s):i.dispatchEvent(s)}var e5=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function Tpe(n=()=>{}){const e=Pl(n);Xs(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function Cpe(n){return n.nodeType===n.ELEMENT_NODE}function Mpe(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function LM(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var Ipe=c$,w$=h$,S$=f$,E$=p$,b$=m$,A$=v$,T$=Ek;function C$(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=C$(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function M$(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=C$(n))&&(r&&(r+=" "),r+=e);return r}const t5=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,n5=M$,oT=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return n5(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=t==null?void 0:t[c],h=s==null?void 0:s[c];if(u===null)return null;const f=t5(u)||t5(h);return i[c][f]}),a=t&&Object.entries(t).reduce((c,u)=>{let[h,f]=u;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:h,className:f,...p}=u;return Object.entries(p).every(v=>{let[_,S]=v;return Array.isArray(S)?S.includes({...s,...a}[_]):{...s,...a}[_]===S})?[...c,h,f]:c},[]);return n5(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ppe=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),I$=(...n)=>n.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rpe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Npe=O.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>O.createElement("svg",{ref:l,...Rpe,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:I$("lucide",i),...a},[...o.map(([c,u])=>O.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=(n,e)=>{const t=O.forwardRef(({className:r,...i},s)=>O.createElement(Npe,{ref:s,iconNode:e,className:I$(`lucide-${Ppe(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dpe=Pn("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=Pn("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=Pn("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kpe=Pn("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$=Pn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ope=Pn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=Pn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lpe=Pn("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=Pn("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=Pn("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=Pn("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fpe=Pn("Cross",[["path",{d:"M11 2a2 2 0 0 0-2 2v5H4a2 2 0 0 0-2 2v2c0 1.1.9 2 2 2h5v5c0 1.1.9 2 2 2h2a2 2 0 0 0 2-2v-5h5a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-5V4a2 2 0 0 0-2-2h-2z",key:"1t5g7j"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bpe=Pn("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upe=Pn("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jpe=Pn("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vpe=Pn("IdCard",[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zpe=Pn("ImagePlus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hpe=Pn("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=Pn("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wpe=Pn("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gpe=Pn("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $pe=Pn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=Pn("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=Pn("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=Pn("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xpe=Pn("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qpe=Pn("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ype=Pn("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=Pn("PencilLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=Pn("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=Pn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=Pn("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kpe=Pn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zpe=Pn("Tent",[["path",{d:"M3.5 21 14 3",key:"1szst5"}],["path",{d:"M20.5 21 10 3",key:"1310c3"}],["path",{d:"M15.5 21 12 15l-3.5 6",key:"1ddtfw"}],["path",{d:"M2 21h20",key:"1nyx9w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=Pn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qpe=Pn("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jpe=Pn("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eme=Pn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=Pn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tme=Pn("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=Pn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nme=Pn("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),Tk="-",rme=n=>{const e=sme(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(Tk);return a[0]===""&&a.length!==1&&a.shift(),F$(a,e)||ime(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},F$=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?F$(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=n.join(Tk);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},s5=/^\[(.+)\]$/,ime=n=>{if(s5.test(n)){const e=s5.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},sme=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return ame(Object.entries(n.classGroups),t).forEach(([s,o])=>{$R(o,r,s,e)}),r},$R=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const s=i===""?e:o5(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(ome(i)){$R(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,o])=>{$R(o,o5(e,s),t,r)})})},o5=(n,e)=>{let t=n;return e.split(Tk).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},ome=n=>n.isThemeGetter,ame=(n,e)=>e?n.map(([t,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[t,i]}):n,lme=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){t.has(s)?t.set(s,o):i(s,o)}}},B$="!",cme=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let c=0,u=0,h;for(let S=0;S<a.length;S++){let x=a[S];if(c===0){if(x===i&&(r||a.slice(S,S+s)===e)){l.push(a.slice(u,S)),u=S+s;continue}if(x==="/"){h=S;continue}}x==="["?c++:x==="]"&&c--}const f=l.length===0?a:a.substring(u),p=f.startsWith(B$),v=p?f.substring(1):f,_=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:_}};return t?a=>t({className:a,parseClassName:o}):o},ume=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},hme=n=>({cache:lme(n.cacheSize),parseClassName:cme(n),...rme(n)}),dme=/\s+/,fme=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=n.trim().split(dme);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=t(c);let v=!!p,_=r(v?f.substring(0,p):f);if(!_){if(!v){a=c+(a.length>0?" "+a:a);continue}if(_=r(f),!_){a=c+(a.length>0?" "+a:a);continue}v=!1}const S=ume(u).join(":"),x=h?S+B$:S,E=x+_;if(s.includes(E))continue;s.push(E);const b=i(_,v);for(let M=0;M<b.length;++M){const k=b[M];s.push(x+k)}a=c+(a.length>0?" "+a:a)}return a};function pme(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=U$(e))&&(r&&(r+=" "),r+=t);return r}const U$=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=U$(n[r]))&&(t&&(t+=" "),t+=e);return t};function mme(n,...e){let t,r,i,s=o;function o(l){const c=e.reduce((u,h)=>h(u),n());return t=hme(c),r=t.cache.get,i=t.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=fme(l,t);return i(l,u),u}return function(){return s(pme.apply(null,arguments))}}const Yr=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},j$=/^\[(?:([a-z-]+):)?(.+)\]$/i,gme=/^\d+\/\d+$/,vme=new Set(["px","full","screen"]),yme=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xme=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_me=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,wme=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Sme=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,zu=n=>D0(n)||vme.has(n)||gme.test(n),od=n=>qv(n,"length",Pme),D0=n=>!!n&&!Number.isNaN(Number(n)),FM=n=>qv(n,"number",D0),Oy=n=>!!n&&Number.isInteger(Number(n)),Eme=n=>n.endsWith("%")&&D0(n.slice(0,-1)),Rn=n=>j$.test(n),ad=n=>yme.test(n),bme=new Set(["length","size","percentage"]),Ame=n=>qv(n,bme,V$),Tme=n=>qv(n,"position",V$),Cme=new Set(["image","url"]),Mme=n=>qv(n,Cme,Nme),Ime=n=>qv(n,"",Rme),Ly=()=>!0,qv=(n,e,t)=>{const r=j$.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},Pme=n=>xme.test(n)&&!_me.test(n),V$=()=>!1,Rme=n=>wme.test(n),Nme=n=>Sme.test(n),Dme=()=>{const n=Yr("colors"),e=Yr("spacing"),t=Yr("blur"),r=Yr("brightness"),i=Yr("borderColor"),s=Yr("borderRadius"),o=Yr("borderSpacing"),a=Yr("borderWidth"),l=Yr("contrast"),c=Yr("grayscale"),u=Yr("hueRotate"),h=Yr("invert"),f=Yr("gap"),p=Yr("gradientColorStops"),v=Yr("gradientColorStopPositions"),_=Yr("inset"),S=Yr("margin"),x=Yr("opacity"),E=Yr("padding"),b=Yr("saturate"),M=Yr("scale"),k=Yr("sepia"),B=Yr("skew"),P=Yr("space"),N=Yr("translate"),R=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto",Rn,e],H=()=>[Rn,e],W=()=>["",zu,od],K=()=>["auto",D0,Rn],te=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],se=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],X=()=>["start","end","center","between","around","evenly","stretch"],ce=()=>["","0",Rn],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],fe=()=>[D0,Rn];return{cacheSize:500,separator:":",theme:{colors:[Ly],spacing:[zu,od],blur:["none","",ad,Rn],brightness:fe(),borderColor:[n],borderRadius:["none","","full",ad,Rn],borderSpacing:H(),borderWidth:W(),contrast:fe(),grayscale:ce(),hueRotate:fe(),invert:ce(),gap:H(),gradientColorStops:[n],gradientColorStopPositions:[Eme,od],inset:U(),margin:U(),opacity:fe(),padding:H(),saturate:fe(),scale:fe(),sepia:ce(),skew:fe(),space:H(),translate:H()},classGroups:{aspect:[{aspect:["auto","square","video",Rn]}],container:["container"],columns:[{columns:[ad]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...te(),Rn]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Oy,Rn]}],basis:[{basis:U()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Rn]}],grow:[{grow:ce()}],shrink:[{shrink:ce()}],order:[{order:["first","last","none",Oy,Rn]}],"grid-cols":[{"grid-cols":[Ly]}],"col-start-end":[{col:["auto",{span:["full",Oy,Rn]},Rn]}],"col-start":[{"col-start":K()}],"col-end":[{"col-end":K()}],"grid-rows":[{"grid-rows":[Ly]}],"row-start-end":[{row:["auto",{span:[Oy,Rn]},Rn]}],"row-start":[{"row-start":K()}],"row-end":[{"row-end":K()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Rn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Rn]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...X()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...X(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...X(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Rn,e]}],"min-w":[{"min-w":[Rn,e,"min","max","fit"]}],"max-w":[{"max-w":[Rn,e,"none","full","min","max","fit","prose",{screen:[ad]},ad]}],h:[{h:[Rn,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Rn,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Rn,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Rn,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ad,od]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",FM]}],"font-family":[{font:[Ly]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Rn]}],"line-clamp":[{"line-clamp":["none",D0,FM]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",zu,Rn]}],"list-image":[{"list-image":["none",Rn]}],"list-style-type":[{list:["none","disc","decimal",Rn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",zu,od]}],"underline-offset":[{"underline-offset":["auto",zu,Rn]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Rn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Rn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...te(),Tme]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ame]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Mme]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...se(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:se()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...se()]}],"outline-offset":[{"outline-offset":[zu,Rn]}],"outline-w":[{outline:[zu,od]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[zu,od]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",ad,Ime]}],"shadow-color":[{shadow:[Ly]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ad,Rn]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Rn]}],duration:[{duration:fe()}],ease:[{ease:["linear","in","out","in-out",Rn]}],delay:[{delay:fe()}],animate:[{animate:["none","spin","ping","pulse","bounce",Rn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[M]}],"scale-x":[{"scale-x":[M]}],"scale-y":[{"scale-y":[M]}],rotate:[{rotate:[Oy,Rn]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[B]}],"skew-y":[{"skew-y":[B]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Rn]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Rn]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Rn]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[zu,od,FM]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},kme=mme(Dme);function Jt(...n){return kme(M$(n))}const Ome=Ipe,z$=O.forwardRef(({className:n,...e},t)=>m.jsx(w$,{ref:t,className:Jt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));z$.displayName=w$.displayName;const Lme=oT("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),H$=O.forwardRef(({className:n,variant:e,...t},r)=>m.jsx(S$,{ref:r,className:Jt(Lme({variant:e}),n),...t}));H$.displayName=S$.displayName;const Fme=O.forwardRef(({className:n,...e},t)=>m.jsx(A$,{ref:t,className:Jt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));Fme.displayName=A$.displayName;const W$=O.forwardRef(({className:n,...e},t)=>m.jsx(T$,{ref:t,className:Jt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:m.jsx(lT,{className:"h-4 w-4"})}));W$.displayName=T$.displayName;const G$=O.forwardRef(({className:n,...e},t)=>m.jsx(E$,{ref:t,className:Jt("text-sm font-semibold",n),...e}));G$.displayName=E$.displayName;const $$=O.forwardRef(({className:n,...e},t)=>m.jsx(b$,{ref:t,className:Jt("text-sm opacity-90",n),...e}));$$.displayName=b$.displayName;function Bme(){const{toasts:n}=JG();return m.jsxs(Ome,{children:[n.map(function({id:e,title:t,description:r,action:i,...s}){return m.jsxs(H$,{...s,children:[m.jsxs("div",{className:"grid gap-1",children:[t&&m.jsx(G$,{children:t}),r&&m.jsx($$,{children:r})]}),i,m.jsx(W$,{})]},e)}),m.jsx(z$,{})]})}var Ume=E3[" useId ".trim().toString()]||(()=>{}),jme=0;function of(n){const[e,t]=O.useState(Ume());return Xs(()=>{t(r=>r??String(jme++))},[n]),e?`radix-${e}`:""}const Vme=["top","right","bottom","left"],wf=Math.min,Ua=Math.max,t2=Math.round,dS=Math.floor,hu=n=>({x:n,y:n}),zme={left:"right",right:"left",bottom:"top",top:"bottom"},Hme={start:"end",end:"start"};function XR(n,e,t){return Ua(n,wf(e,t))}function Sh(n,e){return typeof n=="function"?n(e):n}function Eh(n){return n.split("-")[0]}function Yv(n){return n.split("-")[1]}function Ck(n){return n==="x"?"y":"x"}function Mk(n){return n==="y"?"height":"width"}const Wme=new Set(["top","bottom"]);function Qc(n){return Wme.has(Eh(n))?"y":"x"}function Ik(n){return Ck(Qc(n))}function Gme(n,e,t){t===void 0&&(t=!1);const r=Yv(n),i=Ik(n),s=Mk(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=n2(o)),[o,n2(o)]}function $me(n){const e=n2(n);return[qR(n),e,qR(e)]}function qR(n){return n.replace(/start|end/g,e=>Hme[e])}const a5=["left","right"],l5=["right","left"],Xme=["top","bottom"],qme=["bottom","top"];function Yme(n,e,t){switch(n){case"top":case"bottom":return t?e?l5:a5:e?a5:l5;case"left":case"right":return e?Xme:qme;default:return[]}}function Kme(n,e,t,r){const i=Yv(n);let s=Yme(Eh(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(qR)))),s}function n2(n){return n.replace(/left|right|bottom|top/g,e=>zme[e])}function Zme(n){return{top:0,right:0,bottom:0,left:0,...n}}function X$(n){return typeof n!="number"?Zme(n):{top:n,right:n,bottom:n,left:n}}function r2(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function c5(n,e,t){let{reference:r,floating:i}=n;const s=Qc(e),o=Ik(e),a=Mk(o),l=Eh(e),c=s==="y",u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-i.width,y:h};break;default:p={x:r.x,y:r.y}}switch(Yv(e)){case"start":p[o]-=f*(t&&c?-1:1);break;case"end":p[o]+=f*(t&&c?-1:1);break}return p}const Qme=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:u,y:h}=c5(c,r,l),f=r,p={},v=0;for(let _=0;_<a.length;_++){const{name:S,fn:x}=a[_],{x:E,y:b,data:M,reset:k}=await x({x:u,y:h,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:c,platform:o,elements:{reference:n,floating:e}});u=E??u,h=b??h,p={...p,[S]:{...p[S],...M}},k&&v<=50&&(v++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):k.rects),{x:u,y:h}=c5(c,f,l)),_=-1)}return{x:u,y:h,placement:f,strategy:i,middlewareData:p}};async function Nx(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=Sh(e,n),v=X$(p),S=a[f?h==="floating"?"reference":"floating":h],x=r2(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(S)))==null||t?S:S.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),E=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),M=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},k=r2(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:b,strategy:l}):E);return{top:(x.top-k.top+v.top)/M.y,bottom:(k.bottom-x.bottom+v.bottom)/M.y,left:(x.left-k.left+v.left)/M.x,right:(k.right-x.right+v.right)/M.x}}const Jme=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Sh(n,e)||{};if(c==null)return{};const h=X$(u),f={x:t,y:r},p=Ik(i),v=Mk(p),_=await o.getDimensions(c),S=p==="y",x=S?"top":"left",E=S?"bottom":"right",b=S?"clientHeight":"clientWidth",M=s.reference[v]+s.reference[p]-f[p]-s.floating[v],k=f[p]-s.reference[p],B=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let P=B?B[b]:0;(!P||!await(o.isElement==null?void 0:o.isElement(B)))&&(P=a.floating[b]||s.floating[v]);const N=M/2-k/2,R=P/2-_[v]/2-1,I=wf(h[x],R),U=wf(h[E],R),H=I,W=P-_[v]-U,K=P/2-_[v]/2+N,te=XR(H,K,W),se=!l.arrow&&Yv(i)!=null&&K!==te&&s.reference[v]/2-(K<H?I:U)-_[v]/2<0,le=se?K<H?K-H:K-W:0;return{[p]:f[p]+le,data:{[p]:te,centerOffset:K-te-le,...se&&{alignmentOffset:le}},reset:se}}}),ege=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:_=!0,...S}=Sh(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const x=Eh(i),E=Qc(a),b=Eh(a)===a,M=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(b||!_?[n2(a)]:$me(a)),B=v!=="none";!f&&B&&k.push(...Kme(a,_,v,M));const P=[a,...k],N=await Nx(e,S),R=[];let I=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&R.push(N[x]),h){const K=Gme(i,o,M);R.push(N[K[0]],N[K[1]])}if(I=[...I,{placement:i,overflows:R}],!R.every(K=>K<=0)){var U,H;const K=(((U=s.flip)==null?void 0:U.index)||0)+1,te=P[K];if(te&&(!(h==="alignment"?E!==Qc(te):!1)||I.every(X=>Qc(X.placement)===E?X.overflows[0]>0:!0)))return{data:{index:K,overflows:I},reset:{placement:te}};let se=(H=I.filter(le=>le.overflows[0]<=0).sort((le,X)=>le.overflows[1]-X.overflows[1])[0])==null?void 0:H.placement;if(!se)switch(p){case"bestFit":{var W;const le=(W=I.filter(X=>{if(B){const ce=Qc(X.placement);return ce===E||ce==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(ce=>ce>0).reduce((ce,oe)=>ce+oe,0)]).sort((X,ce)=>X[1]-ce[1])[0])==null?void 0:W[0];le&&(se=le);break}case"initialPlacement":se=a;break}if(i!==se)return{reset:{placement:se}}}return{}}}};function u5(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function h5(n){return Vme.some(e=>n[e]>=0)}const tge=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=Sh(n,e);switch(r){case"referenceHidden":{const s=await Nx(e,{...i,elementContext:"reference"}),o=u5(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:h5(o)}}}case"escaped":{const s=await Nx(e,{...i,altBoundary:!0}),o=u5(s,t.floating);return{data:{escapedOffsets:o,escaped:h5(o)}}}default:return{}}}}},q$=new Set(["left","top"]);async function nge(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Eh(t),a=Yv(t),l=Qc(t)==="y",c=q$.has(o)?-1:1,u=s&&l?-1:1,h=Sh(e,n);let{mainAxis:f,crossAxis:p,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof v=="number"&&(p=a==="end"?v*-1:v),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const rge=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await nge(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},ige=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:S=>{let{x,y:E}=S;return{x,y:E}}},...l}=Sh(n,e),c={x:t,y:r},u=await Nx(e,l),h=Qc(Eh(i)),f=Ck(h);let p=c[f],v=c[h];if(s){const S=f==="y"?"top":"left",x=f==="y"?"bottom":"right",E=p+u[S],b=p-u[x];p=XR(E,p,b)}if(o){const S=h==="y"?"top":"left",x=h==="y"?"bottom":"right",E=v+u[S],b=v-u[x];v=XR(E,v,b)}const _=a.fn({...e,[f]:p,[h]:v});return{..._,data:{x:_.x-t,y:_.y-r,enabled:{[f]:s,[h]:o}}}}}},sge=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Sh(n,e),u={x:t,y:r},h=Qc(i),f=Ck(h);let p=u[f],v=u[h];const _=Sh(a,e),S=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(l){const b=f==="y"?"height":"width",M=s.reference[f]-s.floating[b]+S.mainAxis,k=s.reference[f]+s.reference[b]-S.mainAxis;p<M?p=M:p>k&&(p=k)}if(c){var x,E;const b=f==="y"?"width":"height",M=q$.has(Eh(i)),k=s.reference[h]-s.floating[b]+(M&&((x=o.offset)==null?void 0:x[h])||0)+(M?0:S.crossAxis),B=s.reference[h]+s.reference[b]+(M?0:((E=o.offset)==null?void 0:E[h])||0)-(M?S.crossAxis:0);v<k?v=k:v>B&&(v=B)}return{[f]:p,[h]:v}}}},oge=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Sh(n,e),u=await Nx(e,c),h=Eh(i),f=Yv(i),p=Qc(i)==="y",{width:v,height:_}=s.floating;let S,x;h==="top"||h==="bottom"?(S=h,x=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=h,S=f==="end"?"top":"bottom");const E=_-u.top-u.bottom,b=v-u.left-u.right,M=wf(_-u[S],E),k=wf(v-u[x],b),B=!e.middlewareData.shift;let P=M,N=k;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(N=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=E),B&&!f){const I=Ua(u.left,0),U=Ua(u.right,0),H=Ua(u.top,0),W=Ua(u.bottom,0);p?N=v-2*(I!==0||U!==0?I+U:Ua(u.left,u.right)):P=_-2*(H!==0||W!==0?H+W:Ua(u.top,u.bottom))}await l({...e,availableWidth:N,availableHeight:P});const R=await o.getDimensions(a.floating);return v!==R.width||_!==R.height?{reset:{rects:!0}}:{}}}};function cT(){return typeof window<"u"}function Kv(n){return Y$(n)?(n.nodeName||"").toLowerCase():"#document"}function $a(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Su(n){var e;return(e=(Y$(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Y$(n){return cT()?n instanceof Node||n instanceof $a(n).Node:!1}function yc(n){return cT()?n instanceof Element||n instanceof $a(n).Element:!1}function xu(n){return cT()?n instanceof HTMLElement||n instanceof $a(n).HTMLElement:!1}function d5(n){return!cT()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof $a(n).ShadowRoot}const age=new Set(["inline","contents"]);function O_(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=xc(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!age.has(i)}const lge=new Set(["table","td","th"]);function cge(n){return lge.has(Kv(n))}const uge=[":popover-open",":modal"];function uT(n){return uge.some(e=>{try{return n.matches(e)}catch{return!1}})}const hge=["transform","translate","scale","rotate","perspective"],dge=["transform","translate","scale","rotate","perspective","filter"],fge=["paint","layout","strict","content"];function Pk(n){const e=Rk(),t=yc(n)?xc(n):n;return hge.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||dge.some(r=>(t.willChange||"").includes(r))||fge.some(r=>(t.contain||"").includes(r))}function pge(n){let e=Sf(n);for(;xu(e)&&!vv(e);){if(Pk(e))return e;if(uT(e))return null;e=Sf(e)}return null}function Rk(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const mge=new Set(["html","body","#document"]);function vv(n){return mge.has(Kv(n))}function xc(n){return $a(n).getComputedStyle(n)}function hT(n){return yc(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Sf(n){if(Kv(n)==="html")return n;const e=n.assignedSlot||n.parentNode||d5(n)&&n.host||Su(n);return d5(e)?e.host:e}function K$(n){const e=Sf(n);return vv(e)?n.ownerDocument?n.ownerDocument.body:n.body:xu(e)&&O_(e)?e:K$(e)}function Dx(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=K$(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=$a(i);if(s){const a=YR(o);return e.concat(o,o.visualViewport||[],O_(i)?i:[],a&&t?Dx(a):[])}return e.concat(i,Dx(i,[],t))}function YR(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Z$(n){const e=xc(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=xu(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=t2(t)!==s||t2(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function Nk(n){return yc(n)?n:n.contextElement}function k0(n){const e=Nk(n);if(!xu(e))return hu(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=Z$(e);let o=(s?t2(t.width):t.width)/r,a=(s?t2(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const gge=hu(0);function Q$(n){const e=$a(n);return!Rk()||!e.visualViewport?gge:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function vge(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==$a(n)?!1:e}function vm(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=Nk(n);let o=hu(1);e&&(r?yc(r)&&(o=k0(r)):o=k0(n));const a=vge(s,t,r)?Q$(s):hu(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(s){const f=$a(s),p=r&&yc(r)?$a(r):r;let v=f,_=YR(v);for(;_&&r&&p!==v;){const S=k0(_),x=_.getBoundingClientRect(),E=xc(_),b=x.left+(_.clientLeft+parseFloat(E.paddingLeft))*S.x,M=x.top+(_.clientTop+parseFloat(E.paddingTop))*S.y;l*=S.x,c*=S.y,u*=S.x,h*=S.y,l+=b,c+=M,v=$a(_),_=YR(v)}}return r2({width:u,height:h,x:l,y:c})}function Dk(n,e){const t=hT(n).scrollLeft;return e?e.left+t:vm(Su(n)).left+t}function J$(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:Dk(n,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function yge(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=Su(r),a=e?uT(e.floating):!1;if(r===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},c=hu(1);const u=hu(0),h=xu(r);if((h||!h&&!s)&&((Kv(r)!=="body"||O_(o))&&(l=hT(r)),xu(r))){const p=vm(r);c=k0(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const f=o&&!h&&!s?J$(o,l,!0):hu(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:t.y*c.y-l.scrollTop*c.y+u.y+f.y}}function xge(n){return Array.from(n.getClientRects())}function _ge(n){const e=Su(n),t=hT(n),r=n.ownerDocument.body,i=Ua(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Ua(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+Dk(n);const a=-t.scrollTop;return xc(r).direction==="rtl"&&(o+=Ua(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function wge(n,e){const t=$a(n),r=Su(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=Rk();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}const Sge=new Set(["absolute","fixed"]);function Ege(n,e){const t=vm(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=xu(n)?k0(n):hu(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function f5(n,e,t){let r;if(e==="viewport")r=wge(n,t);else if(e==="document")r=_ge(Su(n));else if(yc(e))r=Ege(e,t);else{const i=Q$(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return r2(r)}function eX(n,e){const t=Sf(n);return t===e||!yc(t)||vv(t)?!1:xc(t).position==="fixed"||eX(t,e)}function bge(n,e){const t=e.get(n);if(t)return t;let r=Dx(n,[],!1).filter(a=>yc(a)&&Kv(a)!=="body"),i=null;const s=xc(n).position==="fixed";let o=s?Sf(n):n;for(;yc(o)&&!vv(o);){const a=xc(o),l=Pk(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&Sge.has(i.position)||O_(o)&&!l&&eX(n,o))?r=r.filter(u=>u!==o):i=a,o=Sf(o)}return e.set(n,r),r}function Age(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?uT(e)?[]:bge(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,u)=>{const h=f5(e,u,i);return c.top=Ua(h.top,c.top),c.right=wf(h.right,c.right),c.bottom=wf(h.bottom,c.bottom),c.left=Ua(h.left,c.left),c},f5(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Tge(n){const{width:e,height:t}=Z$(n);return{width:e,height:t}}function Cge(n,e,t){const r=xu(e),i=Su(e),s=t==="fixed",o=vm(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=hu(0);function c(){l.x=Dk(i)}if(r||!r&&!s)if((Kv(e)!=="body"||O_(i))&&(a=hT(e)),r){const p=vm(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else i&&c();s&&!r&&i&&c();const u=i&&!r&&!s?J$(i,a):hu(0),h=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function BM(n){return xc(n).position==="static"}function p5(n,e){if(!xu(n)||xc(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Su(n)===t&&(t=t.ownerDocument.body),t}function tX(n,e){const t=$a(n);if(uT(n))return t;if(!xu(n)){let i=Sf(n);for(;i&&!vv(i);){if(yc(i)&&!BM(i))return i;i=Sf(i)}return t}let r=p5(n,e);for(;r&&cge(r)&&BM(r);)r=p5(r,e);return r&&vv(r)&&BM(r)&&!Pk(r)?t:r||pge(n)||t}const Mge=async function(n){const e=this.getOffsetParent||tX,t=this.getDimensions,r=await t(n.floating);return{reference:Cge(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Ige(n){return xc(n).direction==="rtl"}const Pge={convertOffsetParentRelativeRectToViewportRelativeRect:yge,getDocumentElement:Su,getClippingRect:Age,getOffsetParent:tX,getElementRects:Mge,getClientRects:xge,getDimensions:Tge,getScale:k0,isElement:yc,isRTL:Ige};function nX(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function Rge(n,e){let t=null,r;const i=Su(n);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=n.getBoundingClientRect(),{left:u,top:h,width:f,height:p}=c;if(a||e(),!f||!p)return;const v=dS(h),_=dS(i.clientWidth-(u+f)),S=dS(i.clientHeight-(h+p)),x=dS(u),b={rootMargin:-v+"px "+-_+"px "+-S+"px "+-x+"px",threshold:Ua(0,wf(1,l))||1};let M=!0;function k(B){const P=B[0].intersectionRatio;if(P!==l){if(!M)return o();P?o(!1,P):r=setTimeout(()=>{o(!1,1e-7)},1e3)}P===1&&!nX(c,n.getBoundingClientRect())&&o(),M=!1}try{t=new IntersectionObserver(k,{...b,root:i.ownerDocument})}catch{t=new IntersectionObserver(k,b)}t.observe(n)}return o(!0),s}function Nge(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Nk(n),u=i||s?[...c?Dx(c):[],...Dx(e)]:[];u.forEach(x=>{i&&x.addEventListener("scroll",t,{passive:!0}),s&&x.addEventListener("resize",t)});const h=c&&a?Rge(c,t):null;let f=-1,p=null;o&&(p=new ResizeObserver(x=>{let[E]=x;E&&E.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),t()}),c&&!l&&p.observe(c),p.observe(e));let v,_=l?vm(n):null;l&&S();function S(){const x=vm(n);_&&!nX(_,x)&&t(),_=x,v=requestAnimationFrame(S)}return t(),()=>{var x;u.forEach(E=>{i&&E.removeEventListener("scroll",t),s&&E.removeEventListener("resize",t)}),h==null||h(),(x=p)==null||x.disconnect(),p=null,l&&cancelAnimationFrame(v)}}const Dge=rge,kge=ige,Oge=ege,Lge=oge,Fge=tge,m5=Jme,Bge=sge,Uge=(n,e,t)=>{const r=new Map,i={platform:Pge,...t},s={...i.platform,_c:r};return Qme(n,e,{...i,platform:s})};var jge=typeof document<"u",Vge=function(){},qE=jge?O.useLayoutEffect:Vge;function i2(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!i2(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!i2(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function rX(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function g5(n,e){const t=rX(n);return Math.round(e*t)/t}function UM(n){const e=O.useRef(n);return qE(()=>{e.current=n}),e}function zge(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,h]=O.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=O.useState(r);i2(f,r)||p(r);const[v,_]=O.useState(null),[S,x]=O.useState(null),E=O.useCallback(X=>{X!==B.current&&(B.current=X,_(X))},[]),b=O.useCallback(X=>{X!==P.current&&(P.current=X,x(X))},[]),M=s||v,k=o||S,B=O.useRef(null),P=O.useRef(null),N=O.useRef(u),R=l!=null,I=UM(l),U=UM(i),H=UM(c),W=O.useCallback(()=>{if(!B.current||!P.current)return;const X={placement:e,strategy:t,middleware:f};U.current&&(X.platform=U.current),Uge(B.current,P.current,X).then(ce=>{const oe={...ce,isPositioned:H.current!==!1};K.current&&!i2(N.current,oe)&&(N.current=oe,Pf.flushSync(()=>{h(oe)}))})},[f,e,t,U,H]);qE(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,h(X=>({...X,isPositioned:!1})))},[c]);const K=O.useRef(!1);qE(()=>(K.current=!0,()=>{K.current=!1}),[]),qE(()=>{if(M&&(B.current=M),k&&(P.current=k),M&&k){if(I.current)return I.current(M,k,W);W()}},[M,k,W,I,R]);const te=O.useMemo(()=>({reference:B,floating:P,setReference:E,setFloating:b}),[E,b]),se=O.useMemo(()=>({reference:M,floating:k}),[M,k]),le=O.useMemo(()=>{const X={position:t,left:0,top:0};if(!se.floating)return X;const ce=g5(se.floating,u.x),oe=g5(se.floating,u.y);return a?{...X,transform:"translate("+ce+"px, "+oe+"px)",...rX(se.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ce,top:oe}},[t,a,se.floating,u.x,u.y]);return O.useMemo(()=>({...u,update:W,refs:te,elements:se,floatingStyles:le}),[u,W,te,se,le])}const Hge=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?m5({element:r.current,padding:i}).fn(t):{}:r?m5({element:r,padding:i}).fn(t):{}}}},Wge=(n,e)=>({...Dge(n),options:[n,e]}),Gge=(n,e)=>({...kge(n),options:[n,e]}),$ge=(n,e)=>({...Bge(n),options:[n,e]}),Xge=(n,e)=>({...Oge(n),options:[n,e]}),qge=(n,e)=>({...Lge(n),options:[n,e]}),Yge=(n,e)=>({...Fge(n),options:[n,e]}),Kge=(n,e)=>({...Hge(n),options:[n,e]});var Zge="Arrow",iX=O.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return m.jsx(On.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});iX.displayName=Zge;var Qge=iX;function Jge(n){const[e,t]=O.useState(void 0);return Xs(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var kk="Popper",[sX,dT]=Ph(kk),[e0e,oX]=sX(kk),aX=n=>{const{__scopePopper:e,children:t}=n,[r,i]=O.useState(null);return m.jsx(e0e,{scope:e,anchor:r,onAnchorChange:i,children:t})};aX.displayName=kk;var lX="PopperAnchor",cX=O.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=oX(lX,t),o=O.useRef(null),a=Rr(e,o);return O.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:m.jsx(On.div,{...i,ref:a})});cX.displayName=lX;var Ok="PopperContent",[t0e,n0e]=sX(Ok),uX=O.forwardRef((n,e)=>{var we,tt,Ke,Me,Ye,Pe;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:v,..._}=n,S=oX(Ok,t),[x,E]=O.useState(null),b=Rr(e,ne=>E(ne)),[M,k]=O.useState(null),B=Jge(M),P=(B==null?void 0:B.width)??0,N=(B==null?void 0:B.height)??0,R=r+(s!=="center"?"-"+s:""),I=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},U=Array.isArray(c)?c:[c],H=U.length>0,W={padding:I,boundary:U.filter(i0e),altBoundary:H},{refs:K,floatingStyles:te,placement:se,isPositioned:le,middlewareData:X}=zge({strategy:"fixed",placement:R,whileElementsMounted:(...ne)=>Nge(...ne,{animationFrame:p==="always"}),elements:{reference:S.anchor},middleware:[Wge({mainAxis:i+N,alignmentAxis:o}),l&&Gge({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?$ge():void 0,...W}),l&&Xge({...W}),qge({...W,apply:({elements:ne,rects:Be,availableWidth:Re,availableHeight:qe})=>{const{width:ze,height:J}=Be.reference,be=ne.floating.style;be.setProperty("--radix-popper-available-width",`${Re}px`),be.setProperty("--radix-popper-available-height",`${qe}px`),be.setProperty("--radix-popper-anchor-width",`${ze}px`),be.setProperty("--radix-popper-anchor-height",`${J}px`)}}),M&&Kge({element:M,padding:a}),s0e({arrowWidth:P,arrowHeight:N}),f&&Yge({strategy:"referenceHidden",...W})]}),[ce,oe]=fX(se),fe=Pl(v);Xs(()=>{le&&(fe==null||fe())},[le,fe]);const De=(we=X.arrow)==null?void 0:we.x,We=(tt=X.arrow)==null?void 0:tt.y,Qe=((Ke=X.arrow)==null?void 0:Ke.centerOffset)!==0,[ve,Ie]=O.useState();return Xs(()=>{x&&Ie(window.getComputedStyle(x).zIndex)},[x]),m.jsx("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...te,transform:le?te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[(Me=X.transformOrigin)==null?void 0:Me.x,(Ye=X.transformOrigin)==null?void 0:Ye.y].join(" "),...((Pe=X.hide)==null?void 0:Pe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:m.jsx(t0e,{scope:t,placedSide:ce,onArrowChange:k,arrowX:De,arrowY:We,shouldHideArrow:Qe,children:m.jsx(On.div,{"data-side":ce,"data-align":oe,..._,ref:b,style:{..._.style,animation:le?void 0:"none"}})})})});uX.displayName=Ok;var hX="PopperArrow",r0e={top:"bottom",right:"left",bottom:"top",left:"right"},dX=O.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=n0e(hX,r),o=r0e[s.placedSide];return m.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:m.jsx(Qge,{...i,ref:t,style:{...i.style,display:"block"}})})});dX.displayName=hX;function i0e(n){return n!==null}var s0e=n=>({name:"transformOrigin",options:n,fn(e){var S,x,E;const{placement:t,rects:r,middlewareData:i}=e,o=((S=i.arrow)==null?void 0:S.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,u]=fX(t),h={start:"0%",center:"50%",end:"100%"}[u],f=(((x=i.arrow)==null?void 0:x.x)??0)+a/2,p=(((E=i.arrow)==null?void 0:E.y)??0)+l/2;let v="",_="";return c==="bottom"?(v=o?h:`${f}px`,_=`${-l}px`):c==="top"?(v=o?h:`${f}px`,_=`${r.floating.height+l}px`):c==="right"?(v=`${-l}px`,_=o?h:`${p}px`):c==="left"&&(v=`${r.floating.width+l}px`,_=o?h:`${p}px`),{data:{x:v,y:_}}}});function fX(n){const[e,t="center"]=n.split("-");return[e,t]}var o0e=aX,pX=cX,mX=uX,gX=dX,[fT,WFe]=Ph("Tooltip",[dT]),Lk=dT(),vX="TooltipProvider",a0e=700,v5="tooltip.open",[l0e,yX]=fT(vX),xX=n=>{const{__scopeTooltip:e,delayDuration:t=a0e,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=n,o=O.useRef(!0),a=O.useRef(!1),l=O.useRef(0);return O.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),m.jsx(l0e,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:O.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:O.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:O.useCallback(c=>{a.current=c},[]),disableHoverableContent:i,children:s})};xX.displayName=vX;var _X="Tooltip",[GFe,pT]=fT(_X),KR="TooltipTrigger",c0e=O.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=pT(KR,t),s=yX(KR,t),o=Lk(t),a=O.useRef(null),l=Rr(e,a,i.onTriggerChange),c=O.useRef(!1),u=O.useRef(!1),h=O.useCallback(()=>c.current=!1,[]);return O.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),m.jsx(pX,{asChild:!0,...o,children:m.jsx(On.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:cn(n.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:cn(n.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:cn(n.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:cn(n.onFocus,()=>{c.current||i.onOpen()}),onBlur:cn(n.onBlur,i.onClose),onClick:cn(n.onClick,i.onClose)})})});c0e.displayName=KR;var u0e="TooltipPortal",[$Fe,h0e]=fT(u0e,{forceMount:void 0}),yv="TooltipContent",wX=O.forwardRef((n,e)=>{const t=h0e(yv,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=pT(yv,n.__scopeTooltip);return m.jsx(Bm,{present:r||o.open,children:o.disableHoverableContent?m.jsx(SX,{side:i,...s,ref:e}):m.jsx(d0e,{side:i,...s,ref:e})})}),d0e=O.forwardRef((n,e)=>{const t=pT(yv,n.__scopeTooltip),r=yX(yv,n.__scopeTooltip),i=O.useRef(null),s=Rr(e,i),[o,a]=O.useState(null),{trigger:l,onClose:c}=t,u=i.current,{onPointerInTransitChange:h}=r,f=O.useCallback(()=>{a(null),h(!1)},[h]),p=O.useCallback((v,_)=>{const S=v.currentTarget,x={x:v.clientX,y:v.clientY},E=v0e(x,S.getBoundingClientRect()),b=y0e(x,E),M=x0e(_.getBoundingClientRect()),k=w0e([...b,...M]);a(k),h(!0)},[h]);return O.useEffect(()=>()=>f(),[f]),O.useEffect(()=>{if(l&&u){const v=S=>p(S,u),_=S=>p(S,l);return l.addEventListener("pointerleave",v),u.addEventListener("pointerleave",_),()=>{l.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",_)}}},[l,u,p,f]),O.useEffect(()=>{if(o){const v=_=>{const S=_.target,x={x:_.clientX,y:_.clientY},E=(l==null?void 0:l.contains(S))||(u==null?void 0:u.contains(S)),b=!_0e(x,o);E?f():b&&(f(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,u,o,c,f]),m.jsx(SX,{...n,ref:s})}),[f0e,p0e]=fT(_X,{isInside:!1}),m0e=n$("TooltipContent"),SX=O.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=pT(yv,t),c=Lk(t),{onClose:u}=l;return O.useEffect(()=>(document.addEventListener(v5,u),()=>document.removeEventListener(v5,u)),[u]),O.useEffect(()=>{if(l.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(l.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,u]),m.jsx(N_,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:m.jsxs(mX,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[m.jsx(m0e,{children:r}),m.jsx(f0e,{scope:t,isInside:!0,children:m.jsx(hpe,{id:l.contentId,role:"tooltip",children:i||r})})]})})});wX.displayName=yv;var EX="TooltipArrow",g0e=O.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=Lk(t);return p0e(EX,t).isInside?null:m.jsx(gX,{...i,...r,ref:e})});g0e.displayName=EX;function v0e(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function y0e(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function x0e(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function _0e(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,h=l.x,f=l.y;u>r!=f>r&&t<(h-c)*(r-u)/(f-u)+c&&(i=!i)}return i}function w0e(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),S0e(e)}function S0e(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var E0e=xX,bX=wX;const b0e=E0e,A0e=O.forwardRef(({className:n,sideOffset:e=4,...t},r)=>m.jsx(bX,{ref:r,sideOffset:e,className:Jt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...t}));A0e.displayName=bX.displayName;const Tl=O.forwardRef(({className:n,...e},t)=>m.jsx("div",{ref:t,className:Jt("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));Tl.displayName="Card";const O0=O.forwardRef(({className:n,...e},t)=>m.jsx("div",{ref:t,className:Jt("flex flex-col space-y-1.5 p-6",n),...e}));O0.displayName="CardHeader";const j1=O.forwardRef(({className:n,...e},t)=>m.jsx("div",{ref:t,className:Jt("text-2xl font-semibold leading-none tracking-tight",n),...e}));j1.displayName="CardTitle";const YE=O.forwardRef(({className:n,...e},t)=>m.jsx("div",{ref:t,className:Jt("text-sm text-muted-foreground",n),...e}));YE.displayName="CardDescription";const du=O.forwardRef(({className:n,...e},t)=>m.jsx("div",{ref:t,className:Jt("p-6 pt-0",n),...e}));du.displayName="CardContent";const AX=O.forwardRef(({className:n,...e},t)=>m.jsx("div",{ref:t,className:Jt("flex items-center p-6 pt-0",n),...e}));AX.displayName="CardFooter";function T0e(){return m.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:m.jsx(Tl,{className:"w-full max-w-md mx-4",children:m.jsxs(du,{className:"pt-6",children:[m.jsxs("div",{className:"flex mb-4 gap-2",children:[m.jsx(k$,{className:"h-8 w-8 text-red-500"}),m.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),m.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const C0e="/assets/backsound-Dx6NPs6j.mp3",M0e="/assets/backsound1-BBcioZr7.mp3",y5=[{src:C0e,label:"Backsound 1"},{src:M0e,label:"Backsound 2"}];let og=null;function I0e(){const n=O.useRef(null),[e,t]=O.useState(!1),[r,i]=O.useState(0),[s,o]=O.useState(!1),a=O.useRef(null),l=()=>{n.current&&(e?n.current.pause():n.current.play(),t(!e))},c=u=>{const h=parseInt(u.target.value,10);i(h),document.cookie=`backsound_selected=${h}; path=/; max-age=31536000`,setTimeout(()=>{n.current&&(n.current.currentTime=0,e&&n.current.play())},100),a.current&&clearTimeout(a.current),a.current=setTimeout(()=>o(!1),5e3)};return O.useEffect(()=>{const u=document.cookie.match(/backsound_selected=(\d+)/);if(u&&i(Number(u[1])),n.current){if(og&&og!==n.current)try{og.pause()}catch{}og=n.current}if(n.current&&!e){const h=n.current.play();h!==void 0&&h.then(()=>t(!0)).catch(()=>{})}return()=>{n.current&&n.current.pause(),a.current&&clearTimeout(a.current),og===n.current&&(og=null)}},[]),m.jsxs("div",{className:"fixed bottom-6 left-6 z-50 flex flex-col items-center group select-none",children:[s&&m.jsx("div",{className:"mb-2 animate-fade-in",children:m.jsx("select",{className:"rounded px-2 py-1 text-sm border border-green-400 bg-white shadow",value:r,onChange:c,autoFocus:!0,onBlur:()=>o(!1),children:y5.map((u,h)=>m.jsx("option",{value:h,children:u.label},u.label))})}),m.jsxs("div",{className:`w-16 h-16 rounded-full bg-gradient-to-tr from-green-300 to-green-700 shadow-lg flex items-center justify-center border-4 border-white transition-transform duration-700 ${e?"animate-spin-slow":""}`,style:{boxShadow:"0 4px 24px 0 rgba(34,139,34,0.15)"},onClick:()=>{o(!0),a.current&&clearTimeout(a.current),a.current=setTimeout(()=>o(!1),5e3)},title:e?"Pause backsound":"Putar backsound",children:[m.jsx("img",{src:"https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=200&q=80",alt:"Piringan Backsound Hutan",className:"w-12 h-12 rounded-full object-cover pointer-events-none",style:{filter:"brightness(0.95) contrast(1.1)"}}),m.jsx("button",{className:"absolute w-8 h-8 flex items-center justify-center rounded-full bg-white/80 shadow group-hover:bg-white/90 transition top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2","aria-label":e?"Pause backsound":"Putar backsound",tabIndex:0,onClick:u=>{u.stopPropagation(),l()},children:e?m.jsxs("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[m.jsx("rect",{x:"6",y:"5",width:"4",height:"14",rx:"1"}),m.jsx("rect",{x:"14",y:"5",width:"4",height:"14",rx:"1"})]}):m.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:m.jsx("polygon",{points:"6,4 20,12 6,20 6,4"})})})]}),m.jsx("audio",{ref:n,src:y5[r].src,loop:!0,preload:"auto",onPlay:()=>t(!0),onPause:()=>t(!1),style:{display:"none"},onLoadedMetadata:()=>{if(n.current&&(n.current.volume=.6,!e)){const u=n.current.play();u!==void 0&&u.then(()=>t(!0)).catch(()=>{})}}}),m.jsx("span",{className:"mt-2 text-xs text-green-900 bg-white/80 px-2 py-0.5 rounded shadow opacity-0 group-hover:opacity-100 transition",children:e?"Sedang diputar":"Klik untuk backsound"})]})}const Fk=oT("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),zt=O.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const o=r?zfe:"button";return m.jsx(o,{className:Jt(Fk({variant:e,size:t,className:n})),ref:s,...i})});zt.displayName="Button";function P0e(){const[n,e]=O.useState(!1),[t]=R_();O.useEffect(()=>{e(!1)},[t]);const r=()=>e(!n),i=[{href:"/",label:"Beranda"},{href:"/kegiatan",label:"Kegiatan"},{href:"/pembelajaran",label:"Pembelajaran"},{href:"/sejarah",label:"Sejarah"},{href:"/pendaftaran",label:"Informasi Pendaftaran"},{href:"/scan-anggota",label:m.jsxs("span",{className:"flex items-center gap-2",children:[m.jsx(Ak,{className:"w-5 h-5"})," Anggota"]})}];return m.jsxs("header",{className:"sticky top-0 z-50 transition-all duration-300 bg-white shadow-lg",children:[m.jsxs("div",{className:"relative",children:[m.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[m.jsxs(Va,{href:"/",className:"flex items-center gap-3 group",children:[m.jsx("img",{src:"https://raw.githubusercontent.com/mahapalanarotama/mahapalanarotama.github.io/refs/heads/main/Img/Logo%20Mpn.png",alt:"Logo Mahapala",className:"w-10 h-10 rounded-full shadow-md border-2 border-primary bg-white animate-navbar-logo",style:{background:"white"}}),m.jsxs("span",{className:"font-heading font-bold text-2xl tracking-widest text-primary drop-shadow-lg animate-navbar-logo",children:["MAHAPALA ",m.jsx("span",{className:"text-accent font-bold drop-shadow-md",children:"NAROTAMA"})]})]}),m.jsx("nav",{className:"hidden md:flex space-x-6",children:i.map(s=>m.jsxs(Va,{href:s.href,className:`relative px-2 py-1 font-medium transition group/nav ${t===s.href?"text-accent":"text-primary hover:text-accent"} animate-navbar-link`,children:[m.jsx("span",{className:"relative z-10",children:s.label}),m.jsx("span",{className:`absolute left-0 bottom-0 w-full h-0.5 bg-accent rounded transition-all duration-300 scale-x-0 group-hover/nav:scale-x-100 ${t===s.href?"scale-x-100":""}`})]},s.href))}),m.jsx(zt,{variant:"ghost",size:"icon",className:"md:hidden text-primary",onClick:r,"aria-label":"Menu",children:m.jsx(qpe,{className:"h-6 w-6"})})]}),m.jsx("div",{className:"absolute left-0 right-0 top-0 h-8 overflow-hidden pointer-events-none select-none",children:m.jsxs("div",{className:"absolute left-0 top-0 w-full h-full flex gap-8 animate-clouds",children:[m.jsx("div",{className:"w-16 h-8 bg-white rounded-full opacity-70 blur-sm animate-cloud-move",style:{animationDelay:"0s"}}),m.jsx("div",{className:"w-24 h-10 bg-white rounded-full opacity-60 blur-md animate-cloud-move",style:{animationDelay:"2s"}}),m.jsx("div",{className:"w-20 h-8 bg-white rounded-full opacity-50 blur animate-cloud-move",style:{animationDelay:"4s"}})]})})]}),n&&m.jsx("div",{className:"md:hidden bg-white animate-navbar-mobile rounded-b-2xl shadow-2xl",children:m.jsxs("div",{className:"container mx-auto px-4 py-2 flex flex-col space-y-2",children:[m.jsx("div",{className:"flex justify-end",children:m.jsx(zt,{variant:"ghost",size:"icon",className:"text-primary",onClick:r,"aria-label":"Close menu",children:m.jsx(lT,{className:"h-6 w-6"})})}),i.map(s=>m.jsx(Va,{href:s.href,children:m.jsx("a",{className:`block text-lg font-semibold py-2 px-4 rounded transition-all duration-300 hover:bg-accent/20 hover:text-accent ${t===s.href?"text-accent bg-accent/10":"text-primary"}`,children:s.label})},s.href))]})})]})}var TX={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},x5=fn.createContext&&fn.createContext(TX),R0e=["attr","size","title"];function N0e(n,e){if(n==null)return{};var t=D0e(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function D0e(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function s2(){return s2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},s2.apply(this,arguments)}function _5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function o2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_5(Object(t),!0).forEach(function(r){k0e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function k0e(n,e,t){return e=O0e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function O0e(n){var e=L0e(n,"string");return typeof e=="symbol"?e:e+""}function L0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function CX(n){return n&&n.map((e,t)=>fn.createElement(e.tag,o2({key:t},e.attr),CX(e.child)))}function F0e(n){return e=>fn.createElement(B0e,s2({attr:o2({},n.attr)},e),CX(n.child))}function B0e(n){var e=t=>{var{attr:r,size:i,title:s}=n,o=N0e(n,R0e),a=i||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),fn.createElement("svg",s2({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:l,style:o2(o2({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&fn.createElement("title",null,s),n.children)};return x5!==void 0?fn.createElement(x5.Consumer,null,t=>e(t)):e(TX)}function U0e(n){return F0e({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"},child:[]}]})(n)}function j0e(){const n=new Date().getFullYear();return m.jsx("footer",{className:"bg-gray-800 text-white pt-12 pb-6",children:m.jsxs("div",{className:"container mx-auto px-4",children:[m.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-8",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-heading text-xl font-bold mb-4",children:"Tentang Kami"}),m.jsx("p",{className:"text-gray-300 mb-4",children:"Mahapala Narotama adalah organisasi yang bergerak di bidang eksplorasi alam dan pelestarian lingkungan."}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("a",{href:"https://www.instagram.com/mahapalanarotama?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition","aria-label":"Instagram",children:m.jsx(aT,{className:"h-5 w-5"})}),m.jsx("a",{href:"https://www.youtube.com/@mahapalanarotama1216",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition","aria-label":"YouTube",children:m.jsx(nme,{className:"h-5 w-5"})}),m.jsx("a",{href:"https://tiktok.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition","aria-label":"TikTok",children:m.jsx(U0e,{className:"h-5 w-5"})})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-heading text-xl font-bold mb-4",children:"Link Terkait"}),m.jsxs("ul",{className:"space-y-2",children:[m.jsx("li",{children:m.jsx("a",{href:"https://narotama.ac.id",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition",children:"Universitas Narotama"})}),m.jsx("li",{children:m.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition",children:"MAPALA Indonesia"})}),m.jsx("li",{children:m.jsx(Va,{href:"/kegiatan",className:"text-gray-300 hover:text-white transition",children:"Daftar Kegiatan"})}),m.jsx("li",{children:m.jsx(Va,{href:"/kegiatan",className:"text-gray-300 hover:text-white transition",children:"Galeri Foto"})})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-heading text-xl font-bold mb-4",children:"Hubungi Kami"}),m.jsxs("address",{className:"not-italic text-gray-300",children:[m.jsxs("p",{className:"mb-2 flex items-center",children:[m.jsx(O$,{className:"h-5 w-5 mr-2",strokeWidth:2}),m.jsx("span",{children:"Jl. Arief Rachman Hakim No. 51, Klampis Ngasem, Sukolilo, Kota Surabaya, Jawa Timur"})]}),m.jsxs("p",{className:"mb-2 flex items-center",children:[m.jsx(k_,{className:"h-5 w-5 mr-2",strokeWidth:2}),m.jsx("span",{children:"(031) 34133 2882"})]}),m.jsxs("p",{className:"flex items-center",children:[m.jsx(Rx,{className:"h-5 w-5 mr-2",strokeWidth:2}),m.jsx("span",{children:"ukm.mahapala@narotama.ac.id"})]})]})]})]}),m.jsx("div",{className:"border-t border-gray-700 pt-6",children:m.jsxs("p",{className:"text-center text-gray-400 text-sm",children:[" ",n," Mahapala Narotama. All rights reserved."]})})]})})}var jM="focusScope.autoFocusOnMount",VM="focusScope.autoFocusOnUnmount",w5={bubbles:!1,cancelable:!0},V0e="FocusScope",Bk=O.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=n,[a,l]=O.useState(null),c=Pl(i),u=Pl(s),h=O.useRef(null),f=Rr(e,_=>l(_)),p=O.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;O.useEffect(()=>{if(r){let _=function(b){if(p.paused||!a)return;const M=b.target;a.contains(M)?h.current=M:xd(h.current,{select:!0})},S=function(b){if(p.paused||!a)return;const M=b.relatedTarget;M!==null&&(a.contains(M)||xd(h.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const k of b)k.removedNodes.length>0&&xd(a)};document.addEventListener("focusin",_),document.addEventListener("focusout",S);const E=new MutationObserver(x);return a&&E.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",S),E.disconnect()}}},[r,a,p.paused]),O.useEffect(()=>{if(a){E5.add(p);const _=document.activeElement;if(!a.contains(_)){const x=new CustomEvent(jM,w5);a.addEventListener(jM,c),a.dispatchEvent(x),x.defaultPrevented||(z0e(X0e(MX(a)),{select:!0}),document.activeElement===_&&xd(a))}return()=>{a.removeEventListener(jM,c),setTimeout(()=>{const x=new CustomEvent(VM,w5);a.addEventListener(VM,u),a.dispatchEvent(x),x.defaultPrevented||xd(_??document.body,{select:!0}),a.removeEventListener(VM,u),E5.remove(p)},0)}}},[a,c,u,p]);const v=O.useCallback(_=>{if(!t&&!r||p.paused)return;const S=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,x=document.activeElement;if(S&&x){const E=_.currentTarget,[b,M]=H0e(E);b&&M?!_.shiftKey&&x===M?(_.preventDefault(),t&&xd(b,{select:!0})):_.shiftKey&&x===b&&(_.preventDefault(),t&&xd(M,{select:!0})):x===E&&_.preventDefault()}},[t,r,p.paused]);return m.jsx(On.div,{tabIndex:-1,...o,ref:f,onKeyDown:v})});Bk.displayName=V0e;function z0e(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(xd(r,{select:e}),document.activeElement!==t)return}function H0e(n){const e=MX(n),t=S5(e,n),r=S5(e.reverse(),n);return[t,r]}function MX(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function S5(n,e){for(const t of n)if(!W0e(t,{upTo:e}))return t}function W0e(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function G0e(n){return n instanceof HTMLInputElement&&"select"in n}function xd(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&G0e(n)&&e&&n.select()}}var E5=$0e();function $0e(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=b5(n,e),n.unshift(e)},remove(e){var t;n=b5(n,e),(t=n[0])==null||t.resume()}}}function b5(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function X0e(n){return n.filter(e=>e.tagName!=="A")}var zM=0;function IX(){O.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??A5()),document.body.insertAdjacentElement("beforeend",n[1]??A5()),zM++,()=>{zM===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),zM--}},[])}function A5(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var KE="right-scroll-bar-position",ZE="width-before-scroll-bar",q0e="with-scroll-bars-hidden",Y0e="--removed-body-scroll-bar-size";function HM(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function K0e(n,e){var t=O.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var Z0e=typeof window<"u"?O.useLayoutEffect:O.useEffect,T5=new WeakMap;function Q0e(n,e){var t=K0e(null,function(r){return n.forEach(function(i){return HM(i,r)})});return Z0e(function(){var r=T5.get(t);if(r){var i=new Set(r),s=new Set(n),o=t.current;i.forEach(function(a){s.has(a)||HM(a,null)}),s.forEach(function(a){i.has(a)||HM(a,o)})}T5.set(t,n)},[n]),t}function J0e(n){return n}function eve(n,e){e===void 0&&(e=J0e);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(s){var o=e(s,r);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;t.length;){var o=t;t=[],o.forEach(s)}t={push:function(a){return s(a)},filter:function(){return t}}},assignMedium:function(s){r=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(s),o=t}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return i}function tve(n){n===void 0&&(n={});var e=eve(null);return e.options=qc({async:!0,ssr:!1},n),e}var PX=function(n){var e=n.sideCar,t=v_(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return O.createElement(r,qc({},t))};PX.isSideCarExport=!0;function nve(n,e){return n.useMedium(e),PX}var RX=tve(),WM=function(){},mT=O.forwardRef(function(n,e){var t=O.useRef(null),r=O.useState({onScrollCapture:WM,onWheelCapture:WM,onTouchMoveCapture:WM}),i=r[0],s=r[1],o=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,u=n.enabled,h=n.shards,f=n.sideCar,p=n.noRelative,v=n.noIsolation,_=n.inert,S=n.allowPinchZoom,x=n.as,E=x===void 0?"div":x,b=n.gapMode,M=v_(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,B=Q0e([t,e]),P=qc(qc({},M),i);return O.createElement(O.Fragment,null,u&&O.createElement(k,{sideCar:RX,removeScrollBar:c,shards:h,noRelative:p,noIsolation:v,inert:_,setCallbacks:s,allowPinchZoom:!!S,lockRef:t,gapMode:b}),o?O.cloneElement(O.Children.only(a),qc(qc({},P),{ref:B})):O.createElement(E,qc({},P,{className:l,ref:B}),a))});mT.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};mT.classNames={fullWidth:ZE,zeroRight:KE};var rve=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ive(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=rve();return e&&n.setAttribute("nonce",e),n}function sve(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function ove(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var ave=function(){var n=0,e=null;return{add:function(t){n==0&&(e=ive())&&(sve(e,t),ove(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},lve=function(){var n=ave();return function(e,t){O.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},NX=function(){var n=lve(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},cve={left:0,top:0,right:0,gap:0},GM=function(n){return parseInt(n||"",10)||0},uve=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[GM(t),GM(r),GM(i)]},hve=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return cve;var e=uve(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},dve=NX(),L0="data-scroll-locked",fve=function(n,e,t,r){var i=n.left,s=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(q0e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(L0,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(KE,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(ZE,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(KE," .").concat(KE,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ZE," .").concat(ZE,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(L0,`] {
    `).concat(Y0e,": ").concat(a,`px;
  }
`)},C5=function(){var n=parseInt(document.body.getAttribute(L0)||"0",10);return isFinite(n)?n:0},pve=function(){O.useEffect(function(){return document.body.setAttribute(L0,(C5()+1).toString()),function(){var n=C5()-1;n<=0?document.body.removeAttribute(L0):document.body.setAttribute(L0,n.toString())}},[])},mve=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;pve();var s=O.useMemo(function(){return hve(i)},[i]);return O.createElement(dve,{styles:fve(s,!e,i,t?"":"!important")})},ZR=!1;if(typeof window<"u")try{var fS=Object.defineProperty({},"passive",{get:function(){return ZR=!0,!0}});window.addEventListener("test",fS,fS),window.removeEventListener("test",fS,fS)}catch{ZR=!1}var ag=ZR?{passive:!1}:!1,gve=function(n){return n.tagName==="TEXTAREA"},DX=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!gve(n)&&t[e]==="visible")},vve=function(n){return DX(n,"overflowY")},yve=function(n){return DX(n,"overflowX")},M5=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=kX(n,r);if(i){var s=OX(n,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},xve=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},_ve=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},kX=function(n,e){return n==="v"?vve(e):yve(e)},OX=function(n,e){return n==="v"?xve(e):_ve(e)},wve=function(n,e){return n==="h"&&e==="rtl"?-1:1},Sve=function(n,e,t,r,i){var s=wve(n,window.getComputedStyle(e).direction),o=s*r,a=t.target,l=e.contains(a),c=!1,u=o>0,h=0,f=0;do{if(!a)break;var p=OX(n,a),v=p[0],_=p[1],S=p[2],x=_-S-s*v;(v||x)&&kX(n,a)&&(h+=x,f+=v);var E=a.parentNode;a=E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE?E.host:E}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(h)<1||!u&&Math.abs(f)<1)&&(c=!0),c},pS=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},I5=function(n){return[n.deltaX,n.deltaY]},P5=function(n){return n&&"current"in n?n.current:n},Eve=function(n,e){return n[0]===e[0]&&n[1]===e[1]},bve=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},Ave=0,lg=[];function Tve(n){var e=O.useRef([]),t=O.useRef([0,0]),r=O.useRef(),i=O.useState(Ave++)[0],s=O.useState(NX)[0],o=O.useRef(n);O.useEffect(function(){o.current=n},[n]),O.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var _=Bse([n.lockRef.current],(n.shards||[]).map(P5),!0).filter(Boolean);return _.forEach(function(S){return S.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),_.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var a=O.useCallback(function(_,S){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!o.current.allowPinchZoom;var x=pS(_),E=t.current,b="deltaX"in _?_.deltaX:E[0]-x[0],M="deltaY"in _?_.deltaY:E[1]-x[1],k,B=_.target,P=Math.abs(b)>Math.abs(M)?"h":"v";if("touches"in _&&P==="h"&&B.type==="range")return!1;var N=M5(P,B);if(!N)return!0;if(N?k=P:(k=P==="v"?"h":"v",N=M5(P,B)),!N)return!1;if(!r.current&&"changedTouches"in _&&(b||M)&&(r.current=k),!k)return!0;var R=r.current||k;return Sve(R,S,_,R==="h"?b:M)},[]),l=O.useCallback(function(_){var S=_;if(!(!lg.length||lg[lg.length-1]!==s)){var x="deltaY"in S?I5(S):pS(S),E=e.current.filter(function(k){return k.name===S.type&&(k.target===S.target||S.target===k.shadowParent)&&Eve(k.delta,x)})[0];if(E&&E.should){S.cancelable&&S.preventDefault();return}if(!E){var b=(o.current.shards||[]).map(P5).filter(Boolean).filter(function(k){return k.contains(S.target)}),M=b.length>0?a(S,b[0]):!o.current.noIsolation;M&&S.cancelable&&S.preventDefault()}}},[]),c=O.useCallback(function(_,S,x,E){var b={name:_,delta:S,target:x,should:E,shadowParent:Cve(x)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(M){return M!==b})},1)},[]),u=O.useCallback(function(_){t.current=pS(_),r.current=void 0},[]),h=O.useCallback(function(_){c(_.type,I5(_),_.target,a(_,n.lockRef.current))},[]),f=O.useCallback(function(_){c(_.type,pS(_),_.target,a(_,n.lockRef.current))},[]);O.useEffect(function(){return lg.push(s),n.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,ag),document.addEventListener("touchmove",l,ag),document.addEventListener("touchstart",u,ag),function(){lg=lg.filter(function(_){return _!==s}),document.removeEventListener("wheel",l,ag),document.removeEventListener("touchmove",l,ag),document.removeEventListener("touchstart",u,ag)}},[]);var p=n.removeScrollBar,v=n.inert;return O.createElement(O.Fragment,null,v?O.createElement(s,{styles:bve(i)}):null,p?O.createElement(mve,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function Cve(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const Mve=nve(RX,Tve);var Uk=O.forwardRef(function(n,e){return O.createElement(mT,qc({},n,{ref:e,sideCar:Mve}))});Uk.classNames=mT.classNames;var Ive=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},cg=new WeakMap,mS=new WeakMap,gS={},$M=0,LX=function(n){return n&&(n.host||LX(n.parentNode))},Pve=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=LX(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},Rve=function(n,e,t,r){var i=Pve(e,Array.isArray(n)?n:[n]);gS[t]||(gS[t]=new WeakMap);var s=gS[t],o=[],a=new Set,l=new Set(i),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};i.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(r),v=p!==null&&p!=="false",_=(cg.get(f)||0)+1,S=(s.get(f)||0)+1;cg.set(f,_),s.set(f,S),o.push(f),_===1&&v&&mS.set(f,!0),S===1&&f.setAttribute(t,"true"),v||f.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return u(e),a.clear(),$M++,function(){o.forEach(function(h){var f=cg.get(h)-1,p=s.get(h)-1;cg.set(h,f),s.set(h,p),f||(mS.has(h)||h.removeAttribute(r),mS.delete(h)),p||h.removeAttribute(t)}),$M--,$M||(cg=new WeakMap,cg=new WeakMap,mS=new WeakMap,gS={})}},FX=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=Ive(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),Rve(r,i,t,"aria-hidden")):function(){return null}},gT="Dialog",[BX,UX]=Ph(gT),[Nve,Sc]=BX(gT),jX=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=n,a=O.useRef(null),l=O.useRef(null),[c,u]=gv({prop:r,defaultProp:i??!1,onChange:s,caller:gT});return m.jsx(Nve,{scope:e,triggerRef:a,contentRef:l,contentId:of(),titleId:of(),descriptionId:of(),open:c,onOpenChange:u,onOpenToggle:O.useCallback(()=>u(h=>!h),[u]),modal:o,children:t})};jX.displayName=gT;var VX="DialogTrigger",zX=O.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Sc(VX,t),s=Rr(e,i.triggerRef);return m.jsx(On.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":zk(i.open),...r,ref:s,onClick:cn(n.onClick,i.onOpenToggle)})});zX.displayName=VX;var jk="DialogPortal",[Dve,HX]=BX(jk,{forceMount:void 0}),WX=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,s=Sc(jk,e);return m.jsx(Dve,{scope:e,forceMount:t,children:O.Children.map(r,o=>m.jsx(Bm,{present:t||s.open,children:m.jsx(rT,{asChild:!0,container:i,children:o})}))})};WX.displayName=jk;var a2="DialogOverlay",GX=O.forwardRef((n,e)=>{const t=HX(a2,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=Sc(a2,n.__scopeDialog);return s.modal?m.jsx(Bm,{present:r||s.open,children:m.jsx(Ove,{...i,ref:e})}):null});GX.displayName=a2;var kve=mv("DialogOverlay.RemoveScroll"),Ove=O.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Sc(a2,t);return m.jsx(Uk,{as:kve,allowPinchZoom:!0,shards:[i.contentRef],children:m.jsx(On.div,{"data-state":zk(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ym="DialogContent",$X=O.forwardRef((n,e)=>{const t=HX(ym,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=Sc(ym,n.__scopeDialog);return m.jsx(Bm,{present:r||s.open,children:s.modal?m.jsx(Lve,{...i,ref:e}):m.jsx(Fve,{...i,ref:e})})});$X.displayName=ym;var Lve=O.forwardRef((n,e)=>{const t=Sc(ym,n.__scopeDialog),r=O.useRef(null),i=Rr(e,t.contentRef,r);return O.useEffect(()=>{const s=r.current;if(s)return FX(s)},[]),m.jsx(XX,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:cn(n.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:cn(n.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:cn(n.onFocusOutside,s=>s.preventDefault())})}),Fve=O.forwardRef((n,e)=>{const t=Sc(ym,n.__scopeDialog),r=O.useRef(!1),i=O.useRef(!1);return m.jsx(XX,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=n.onCloseAutoFocus)==null||o.call(n,s),s.defaultPrevented||(r.current||(a=t.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=n.onInteractOutside)==null||l.call(n,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=t.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),XX=O.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=n,a=Sc(ym,t),l=O.useRef(null),c=Rr(e,l);return IX(),m.jsxs(m.Fragment,{children:[m.jsx(Bk,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:m.jsx(N_,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":zk(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx(Uve,{titleId:a.titleId}),m.jsx(Vve,{contentRef:l,descriptionId:a.descriptionId})]})]})}),Vk="DialogTitle",qX=O.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Sc(Vk,t);return m.jsx(On.h2,{id:i.titleId,...r,ref:e})});qX.displayName=Vk;var YX="DialogDescription",KX=O.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Sc(YX,t);return m.jsx(On.p,{id:i.descriptionId,...r,ref:e})});KX.displayName=YX;var ZX="DialogClose",QX=O.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Sc(ZX,t);return m.jsx(On.button,{type:"button",...r,ref:e,onClick:cn(n.onClick,()=>i.onOpenChange(!1))})});QX.displayName=ZX;function zk(n){return n?"open":"closed"}var JX="DialogTitleWarning",[Bve,eq]=jfe(JX,{contentName:ym,titleName:Vk,docsSlug:"dialog"}),Uve=({titleId:n})=>{const e=eq(JX),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return O.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},jve="DialogDescriptionWarning",Vve=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${eq(jve).contentName}}.`;return O.useEffect(()=>{var s;const i=(s=n.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},tq=jX,zve=zX,nq=WX,Hk=GX,Wk=$X,Gk=qX,$k=KX,Xk=QX;const Nf=tq,Hve=nq,rq=O.forwardRef(({className:n,...e},t)=>m.jsx(Hk,{ref:t,className:Jt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));rq.displayName=Hk.displayName;const Rh=O.forwardRef(({className:n,children:e,...t},r)=>m.jsxs(Hve,{children:[m.jsx(rq,{}),m.jsxs(Wk,{ref:r,className:Jt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,m.jsxs(Xk,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[m.jsx(lT,{className:"h-4 w-4"}),m.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Rh.displayName=Wk.displayName;const qk=({className:n,...e})=>m.jsx("div",{className:Jt("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});qk.displayName="DialogHeader";const Yk=({className:n,...e})=>m.jsx("div",{className:Jt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});Yk.displayName="DialogFooter";const Kk=O.forwardRef(({className:n,...e},t)=>m.jsx(Gk,{ref:t,className:Jt("text-lg font-semibold leading-none tracking-tight",n),...e}));Kk.displayName=Gk.displayName;const Zk=O.forwardRef(({className:n,...e},t)=>m.jsx($k,{ref:t,className:Jt("text-sm text-muted-foreground",n),...e}));Zk.displayName=$k.displayName;function Wve(){const[n,e]=O.useState(!1);O.useEffect(()=>{localStorage.getItem("cookieConsent")||e(!0)},[]);const t=()=>{localStorage.setItem("cookieConsent","true"),e(!1)},r=()=>{localStorage.setItem("cookieConsent","false"),e(!1)};return m.jsx(Nf,{open:n,onOpenChange:e,children:m.jsxs(Rh,{className:"sm:max-w-[425px]",children:[m.jsxs(qk,{children:[m.jsx(Kk,{children:"Cookie Preferences"}),m.jsx(Zk,{children:"We use cookies to enhance your browsing experience, serve personalized content, and analyze our traffic. This website uses necessary cookies for functionality and third-party cookies for analytics and social media features."})]}),m.jsx("div",{className:"grid gap-4 py-4",children:m.jsxs("div",{className:"space-y-2",children:[m.jsx("h4",{className:"font-medium",children:"We use cookies for:"}),m.jsxs("ul",{className:"list-disc pl-5 text-sm text-muted-foreground",children:[m.jsx("li",{children:"Essential website functionality"}),m.jsx("li",{children:"Authentication and security"}),m.jsx("li",{children:"Analytics and performance"}),m.jsx("li",{children:"Social media integration"})]})]})}),m.jsxs(Yk,{children:[m.jsx(zt,{variant:"outline",onClick:r,children:"Essential Only"}),m.jsx(zt,{onClick:t,children:"Accept All"})]})]})})}function Gve({children:n}){const{toast:e}=JG();O.useEffect(()=>{t()},[]);const t=async()=>{try{const s="test";document.cookie=`thirdPartyTest=${s}; SameSite=None; Secure`,document.cookie.includes("thirdPartyTest")||e({title:"Cookie Settings",description:"Beberapa fitur mungkin tidak optimal karena cookie pihak ketiga diblokir. Namun, aplikasi tetap dapat digunakan.",duration:7e3})}catch(s){console.warn("Gagal cek cookie pihak ketiga:",s)}},[r]=R_(),i=["/admin","/developer","/offline","/sejarahAdmin"].some(s=>r.startsWith(s));return m.jsxs("div",{className:"flex flex-col min-h-screen",children:[m.jsx(P0e,{}),m.jsx("main",{className:"flex-grow",children:n}),m.jsx(j0e,{}),m.jsx(Wve,{}),!i&&m.jsx(I0e,{})]})}const $ve=oT("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",penuh:"border-transparent bg-green-700 text-white",muda:"border-transparent bg-green-200 text-green-900"}},defaultVariants:{variant:"default"}});function Go({className:n,variant:e,...t}){return m.jsx("div",{className:Jt($ve({variant:e}),n),...t})}function Ka(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function xm(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}const iq=6048e5,Xve=864e5;let qve={};function L_(){return qve}function kx(n,e){var a,l,c,u;const t=L_(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=Ka(n),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function l2(n){return kx(n,{weekStartsOn:1})}function sq(n){const e=Ka(n),t=e.getFullYear(),r=xm(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const i=l2(r),s=xm(n,0);s.setFullYear(t,0,4),s.setHours(0,0,0,0);const o=l2(s);return e.getTime()>=i.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function R5(n){const e=Ka(n);return e.setHours(0,0,0,0),e}function N5(n){const e=Ka(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function oq(n,e){const t=R5(n),r=R5(e),i=+t-N5(t),s=+r-N5(r);return Math.round((i-s)/Xve)}function Yve(n){const e=sq(n),t=xm(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),l2(t)}function Kve(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Zve(n){if(!Kve(n)&&typeof n!="number")return!1;const e=Ka(n);return!isNaN(Number(e))}function Qve(n,e){const t=Ka(n),r=Ka(e),i=D5(t,r),s=Math.abs(oq(t,r));t.setDate(t.getDate()-i*s);const o=+(D5(t,r)===-i),a=i*(s-o);return a===0?0:a}function D5(n,e){const t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Jve(n){const e=Ka(n),t=xm(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const eye={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tye=(n,e,t)=>{let r;const i=eye[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function F0(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const nye={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rye={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},iye={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sye={date:F0({formats:nye,defaultWidth:"full"}),time:F0({formats:rye,defaultWidth:"full"}),dateTime:F0({formats:iye,defaultWidth:"full"})},oye={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},aye=(n,e,t,r)=>oye[n];function Yc(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):o;i=n.formattingValues[a]||n.formattingValues[o]}else{const o=n.defaultWidth,a=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[a]||n.values[o]}const s=n.argumentCallback?n.argumentCallback(e):e;return i[s]}}const lye={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cye={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},uye={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},hye={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},fye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pye=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},mye={ordinalNumber:pye,era:Yc({values:lye,defaultWidth:"wide"}),quarter:Yc({values:cye,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Yc({values:uye,defaultWidth:"wide"}),day:Yc({values:hye,defaultWidth:"wide"}),dayPeriod:Yc({values:dye,defaultWidth:"wide",formattingValues:fye,defaultFormattingWidth:"wide"})};function Kc(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?vye(a,h=>h.test(o)):gye(a,h=>h.test(o));let c;c=n.valueCallback?n.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function gye(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function vye(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function aq(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],s=e.match(n.parsePattern);if(!s)return null;let o=n.valueCallback?n.valueCallback(s[0]):s[0];o=t.valueCallback?t.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const yye=/^(\d+)(th|st|nd|rd)?/i,xye=/\d+/i,_ye={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},wye={any:[/^b/i,/^(a|c)/i]},Sye={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Eye={any:[/1/i,/2/i,/3/i,/4/i]},bye={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Aye={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Tye={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Cye={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Mye={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Iye={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Pye={ordinalNumber:aq({matchPattern:yye,parsePattern:xye,valueCallback:n=>parseInt(n,10)}),era:Kc({matchPatterns:_ye,defaultMatchWidth:"wide",parsePatterns:wye,defaultParseWidth:"any"}),quarter:Kc({matchPatterns:Sye,defaultMatchWidth:"wide",parsePatterns:Eye,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Kc({matchPatterns:bye,defaultMatchWidth:"wide",parsePatterns:Aye,defaultParseWidth:"any"}),day:Kc({matchPatterns:Tye,defaultMatchWidth:"wide",parsePatterns:Cye,defaultParseWidth:"any"}),dayPeriod:Kc({matchPatterns:Mye,defaultMatchWidth:"any",parsePatterns:Iye,defaultParseWidth:"any"})},Rye={code:"en-US",formatDistance:tye,formatLong:sye,formatRelative:aye,localize:mye,match:Pye,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Nye(n){const e=Ka(n);return oq(e,Jve(e))+1}function Dye(n){const e=Ka(n),t=+l2(e)-+Yve(e);return Math.round(t/iq)+1}function lq(n,e){var u,h,f,p;const t=Ka(n),r=t.getFullYear(),i=L_(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=xm(n,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=kx(o,e),l=xm(n,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=kx(l,e);return t.getTime()>=a.getTime()?r+1:t.getTime()>=c.getTime()?r:r-1}function kye(n,e){var a,l,c,u;const t=L_(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=lq(n,e),s=xm(n,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),kx(s,e)}function Oye(n,e){const t=Ka(n),r=+kx(t,e)-+kye(t,e);return Math.round(r/iq)+1}function Tr(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const ld={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Tr(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Tr(t+1,2)},d(n,e){return Tr(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Tr(n.getHours()%12||12,e.length)},H(n,e){return Tr(n.getHours(),e.length)},m(n,e){return Tr(n.getMinutes(),e.length)},s(n,e){return Tr(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return Tr(i,e.length)}},ug={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},k5={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return ld.y(n,e)},Y:function(n,e,t,r){const i=lq(n,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Tr(o,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):Tr(s,e.length)},R:function(n,e){const t=sq(n);return Tr(t,e.length)},u:function(n,e){const t=n.getFullYear();return Tr(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Tr(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Tr(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return ld.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Tr(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=Oye(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Tr(i,e.length)},I:function(n,e,t){const r=Dye(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Tr(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):ld.d(n,e)},D:function(n,e,t){const r=Nye(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Tr(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Tr(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Tr(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Tr(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=ug.noon:r===0?i=ug.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=ug.evening:r>=12?i=ug.afternoon:r>=4?i=ug.morning:i=ug.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return ld.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):ld.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Tr(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Tr(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):ld.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):ld.s(n,e)},S:function(n,e){return ld.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return L5(r);case"XXXX":case"XX":return wp(r);case"XXXXX":case"XXX":default:return wp(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return L5(r);case"xxxx":case"xx":return wp(r);case"xxxxx":case"xxx":default:return wp(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+O5(r,":");case"OOOO":default:return"GMT"+wp(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+O5(r,":");case"zzzz":default:return"GMT"+wp(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return Tr(r,e.length)},T:function(n,e,t){const r=n.getTime();return Tr(r,e.length)}};function O5(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),s=r%60;return s===0?t+String(i):t+String(i)+e+Tr(s,2)}function L5(n,e){return n%60===0?(n>0?"-":"+")+Tr(Math.abs(n)/60,2):wp(n,e)}function wp(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Tr(Math.trunc(r/60),2),s=Tr(r%60,2);return t+i+e+s}const F5=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},cq=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Lye=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return F5(n,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",F5(r,e)).replace("{{time}}",cq(i,e))},Fye={p:cq,P:Lye},Bye=/^D+$/,Uye=/^Y+$/,jye=["D","DD","YY","YYYY"];function Vye(n){return Bye.test(n)}function zye(n){return Uye.test(n)}function Hye(n,e,t){const r=Wye(n,e,t);if(console.warn(r),jye.includes(n))throw new RangeError(r)}function Wye(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Gye=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$ye=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Xye=/^'([^]*?)'?$/,qye=/''/g,Yye=/[a-zA-Z]/;function Qk(n,e,t){var u,h,f,p,v,_,S,x;const r=L_(),i=(t==null?void 0:t.locale)??r.locale??Rye,s=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(f=r.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=(t==null?void 0:t.weekStartsOn)??((_=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:_.weekStartsOn)??r.weekStartsOn??((x=(S=r.locale)==null?void 0:S.options)==null?void 0:x.weekStartsOn)??0,a=Ka(n);if(!Zve(a))throw new RangeError("Invalid time value");let l=e.match($ye).map(E=>{const b=E[0];if(b==="p"||b==="P"){const M=Fye[b];return M(E,i.formatLong)}return E}).join("").match(Gye).map(E=>{if(E==="''")return{isToken:!1,value:"'"};const b=E[0];if(b==="'")return{isToken:!1,value:Kye(E)};if(k5[b])return{isToken:!0,value:E};if(b.match(Yye))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:E}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(E=>{if(!E.isToken)return E.value;const b=E.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&zye(b)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&Vye(b))&&Hye(b,e,String(n));const M=k5[b[0]];return M(a,b,i.localize,c)}).join("")}function Kye(n){const e=n.match(Xye);return e?e[1].replace(qye,"'"):n}function Zye(){return Object.assign({},L_())}const Qye={lessThanXSeconds:{one:"kurang dari 1 detik",other:"kurang dari {{count}} detik"},xSeconds:{one:"1 detik",other:"{{count}} detik"},halfAMinute:"setengah menit",lessThanXMinutes:{one:"kurang dari 1 menit",other:"kurang dari {{count}} menit"},xMinutes:{one:"1 menit",other:"{{count}} menit"},aboutXHours:{one:"sekitar 1 jam",other:"sekitar {{count}} jam"},xHours:{one:"1 jam",other:"{{count}} jam"},xDays:{one:"1 hari",other:"{{count}} hari"},aboutXWeeks:{one:"sekitar 1 minggu",other:"sekitar {{count}} minggu"},xWeeks:{one:"1 minggu",other:"{{count}} minggu"},aboutXMonths:{one:"sekitar 1 bulan",other:"sekitar {{count}} bulan"},xMonths:{one:"1 bulan",other:"{{count}} bulan"},aboutXYears:{one:"sekitar 1 tahun",other:"sekitar {{count}} tahun"},xYears:{one:"1 tahun",other:"{{count}} tahun"},overXYears:{one:"lebih dari 1 tahun",other:"lebih dari {{count}} tahun"},almostXYears:{one:"hampir 1 tahun",other:"hampir {{count}} tahun"}},Jye=(n,e,t)=>{let r;const i=Qye[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"dalam waktu "+r:r+" yang lalu":r},e1e={full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"d/M/yyyy"},t1e={full:"HH.mm.ss",long:"HH.mm.ss",medium:"HH.mm",short:"HH.mm"},n1e={full:"{{date}} 'pukul' {{time}}",long:"{{date}} 'pukul' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},r1e={date:F0({formats:e1e,defaultWidth:"full"}),time:F0({formats:t1e,defaultWidth:"full"}),dateTime:F0({formats:n1e,defaultWidth:"full"})},i1e={lastWeek:"eeee 'lalu pukul' p",yesterday:"'Kemarin pukul' p",today:"'Hari ini pukul' p",tomorrow:"'Besok pukul' p",nextWeek:"eeee 'pukul' p",other:"P"},s1e=(n,e,t,r)=>i1e[n],o1e={narrow:["SM","M"],abbreviated:["SM","M"],wide:["Sebelum Masehi","Masehi"]},a1e={narrow:["1","2","3","4"],abbreviated:["K1","K2","K3","K4"],wide:["Kuartal ke-1","Kuartal ke-2","Kuartal ke-3","Kuartal ke-4"]},l1e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"],wide:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]},c1e={narrow:["M","S","S","R","K","J","S"],short:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],abbreviated:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],wide:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},u1e={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},h1e={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},d1e=(n,e)=>"ke-"+Number(n),f1e={ordinalNumber:d1e,era:Yc({values:o1e,defaultWidth:"wide"}),quarter:Yc({values:a1e,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Yc({values:l1e,defaultWidth:"wide"}),day:Yc({values:c1e,defaultWidth:"wide"}),dayPeriod:Yc({values:u1e,defaultWidth:"wide",formattingValues:h1e,defaultFormattingWidth:"wide"})},p1e=/^ke-(\d+)?/i,m1e=/\d+/i,g1e={narrow:/^(sm|m)/i,abbreviated:/^(s\.?\s?m\.?|s\.?\s?e\.?\s?u\.?|m\.?|e\.?\s?u\.?)/i,wide:/^(sebelum masehi|sebelum era umum|masehi|era umum)/i},v1e={any:[/^s/i,/^(m|e)/i]},y1e={narrow:/^[1234]/i,abbreviated:/^K-?\s[1234]/i,wide:/^Kuartal ke-?\s?[1234]/i},x1e={any:[/1/i,/2/i,/3/i,/4/i]},_1e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|mei|jun|jul|agt|sep|okt|nov|des)/i,wide:/^(januari|februari|maret|april|mei|juni|juli|agustus|september|oktober|november|desember)/i},w1e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^ma/i,/^ap/i,/^me/i,/^jun/i,/^jul/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},S1e={narrow:/^[srkjm]/i,short:/^(min|sen|sel|rab|kam|jum|sab)/i,abbreviated:/^(min|sen|sel|rab|kam|jum|sab)/i,wide:/^(minggu|senin|selasa|rabu|kamis|jumat|sabtu)/i},E1e={narrow:[/^m/i,/^s/i,/^s/i,/^r/i,/^k/i,/^j/i,/^s/i],any:[/^m/i,/^sen/i,/^sel/i,/^r/i,/^k/i,/^j/i,/^sa/i]},b1e={narrow:/^(a|p|tengah m|tengah h|(di(\swaktu)?) (pagi|siang|sore|malam))/i,any:/^([ap]\.?\s?m\.?|tengah malam|tengah hari|(di(\swaktu)?) (pagi|siang|sore|malam))/i},A1e={any:{am:/^a/i,pm:/^pm/i,midnight:/^tengah m/i,noon:/^tengah h/i,morning:/pagi/i,afternoon:/siang/i,evening:/sore/i,night:/malam/i}},T1e={ordinalNumber:aq({matchPattern:p1e,parsePattern:m1e,valueCallback:n=>parseInt(n,10)}),era:Kc({matchPatterns:g1e,defaultMatchWidth:"wide",parsePatterns:v1e,defaultParseWidth:"any"}),quarter:Kc({matchPatterns:y1e,defaultMatchWidth:"wide",parsePatterns:x1e,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Kc({matchPatterns:_1e,defaultMatchWidth:"wide",parsePatterns:w1e,defaultParseWidth:"any"}),day:Kc({matchPatterns:S1e,defaultMatchWidth:"wide",parsePatterns:E1e,defaultParseWidth:"any"}),dayPeriod:Kc({matchPatterns:b1e,defaultMatchWidth:"any",parsePatterns:A1e,defaultParseWidth:"any"})},uq={code:"id",formatDistance:Jye,formatLong:r1e,formatRelative:s1e,localize:f1e,match:T1e,options:{weekStartsOn:1,firstWeekContainsDate:1}};function hq({activity:n}){const e=Qk(new Date(n.date),"d MMMM yyyy",{locale:uq}),t=r=>{switch(r.toLowerCase()){case"ekspedisi":return"default";case"konservasi":return"outline";case"edukasi":return"secondary";default:return"default"}};return m.jsxs(Tl,{className:"h-full flex flex-col bg-white rounded-lg overflow-hidden shadow-md hover:shadow-lg transition",children:[m.jsx("div",{className:"relative h-48 overflow-hidden",children:m.jsx("img",{src:n.imageUrl||"https://images.unsplash.com/photo-1511632765486-a01980e01a18?auto=format&fit=crop&w=800&h=450",alt:n.title,className:"w-full h-full object-cover transition hover:scale-105 duration-500"})}),m.jsxs(du,{className:"flex-grow p-5",children:[m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsx("span",{className:"text-sm text-gray-500",children:e}),m.jsx(Go,{variant:t(n.category),children:n.category})]}),m.jsx("h3",{className:"font-heading text-lg font-semibold mb-2",children:n.title}),m.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:n.description})]}),m.jsx(AX,{className:"pt-0 px-5 pb-5",children:m.jsx(Va,{href:`/kegiatan/${n.id}`,className:"text-primary font-medium hover:text-secondary transition",children:"Selengkapnya "})})]})}function dq({module:n}){const e=t=>{switch(t.toLowerCase()){case"map":case"map-marked-alt":return m.jsx(L$,{className:"h-5 w-5"});case"campground":case"tent":return m.jsx(Zpe,{className:"h-5 w-5"});case"first-aid":case"medkit":return m.jsx(Fpe,{className:"h-5 w-5"});case"compass":return m.jsx(r5,{className:"h-5 w-5"});case"mountain":return m.jsx(Ype,{className:"h-5 w-5"});case"leaf":return m.jsx(Wpe,{className:"h-5 w-5"});case"water":case"droplets":return m.jsx(Upe,{className:"h-5 w-5"});case"wind":return m.jsx(tme,{className:"h-5 w-5"});default:return m.jsx(r5,{className:"h-5 w-5"})}};return m.jsx(Tl,{className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition h-full",children:m.jsxs(du,{className:"p-0",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx("span",{className:"bg-primary/10 text-primary p-3 rounded-full mr-4",children:e(n.icon)}),m.jsx("h3",{className:"font-heading text-lg font-semibold",children:n.title})]}),m.jsx("p",{className:"text-gray-600 mb-4",children:n.description}),m.jsxs("a",{href:n.link,className:"inline-flex items-center text-primary hover:text-secondary transition",target:"_blank",rel:"noopener noreferrer",children:[m.jsx("span",{className:"mr-2",children:"Pelajari"}),m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]})})}var F_=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_m=typeof window>"u"||"Deno"in globalThis;function ga(){}function C1e(n,e){return typeof n=="function"?n(e):n}function QR(n){return typeof n=="number"&&n>=0&&n!==1/0}function fq(n,e){return Math.max(n+(e||0)-Date.now(),0)}function af(n,e){return typeof n=="function"?n(e):n}function gl(n,e){return typeof n=="function"?n(e):n}function B5(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==Jk(o,e.options))return!1}else if(!Lx(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function U5(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(Ox(e.options.mutationKey)!==Ox(s))return!1}else if(!Lx(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function Jk(n,e){return((e==null?void 0:e.queryKeyHashFn)||Ox)(n)}function Ox(n){return JSON.stringify(n,(e,t)=>eN(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function Lx(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Lx(n[t],e[t])):!1}function pq(n,e){if(n===e)return n;const t=j5(n)&&j5(e);if(t||eN(n)&&eN(e)){const r=t?n:Object.keys(n),i=r.length,s=t?e:Object.keys(e),o=s.length,a=t?[]:{},l=new Set(r);let c=0;for(let u=0;u<o;u++){const h=t?u:s[u];(!t&&l.has(h)||t)&&n[h]===void 0&&e[h]===void 0?(a[h]=void 0,c++):(a[h]=pq(n[h],e[h]),a[h]===n[h]&&n[h]!==void 0&&c++)}return i===o&&c===i?n:a}return e}function JR(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function j5(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function eN(n){if(!V5(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!V5(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function V5(n){return Object.prototype.toString.call(n)==="[object Object]"}function M1e(n){return new Promise(e=>{setTimeout(e,n)})}function tN(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?pq(n,e):e}function I1e(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function P1e(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var eO=Symbol();function mq(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===eO?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function R1e(n,e){return typeof n=="function"?n(...e):!!n}var Hp,Nd,z0,t9,N1e=(t9=class extends F_{constructor(){super();vn(this,Hp);vn(this,Nd);vn(this,z0);jt(this,z0,e=>{if(!_m&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ge(this,Nd)||this.setEventListener(ge(this,z0))}onUnsubscribe(){var e;this.hasListeners()||((e=ge(this,Nd))==null||e.call(this),jt(this,Nd,void 0))}setEventListener(e){var t;jt(this,z0,e),(t=ge(this,Nd))==null||t.call(this),jt(this,Nd,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ge(this,Hp)!==e&&(jt(this,Hp,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof ge(this,Hp)=="boolean"?ge(this,Hp):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Hp=new WeakMap,Nd=new WeakMap,z0=new WeakMap,t9),tO=new N1e,H0,Dd,W0,n9,D1e=(n9=class extends F_{constructor(){super();vn(this,H0,!0);vn(this,Dd);vn(this,W0);jt(this,W0,e=>{if(!_m&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){ge(this,Dd)||this.setEventListener(ge(this,W0))}onUnsubscribe(){var e;this.hasListeners()||((e=ge(this,Dd))==null||e.call(this),jt(this,Dd,void 0))}setEventListener(e){var t;jt(this,W0,e),(t=ge(this,Dd))==null||t.call(this),jt(this,Dd,e(this.setOnline.bind(this)))}setOnline(e){ge(this,H0)!==e&&(jt(this,H0,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ge(this,H0)}},H0=new WeakMap,Dd=new WeakMap,W0=new WeakMap,n9),c2=new D1e;function nN(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function k1e(n){return Math.min(1e3*2**n,3e4)}function gq(n){return(n??"online")==="online"?c2.isOnline():!0}var vq=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function XM(n){return n instanceof vq}function yq(n){let e=!1,t=0,r=!1,i;const s=nN(),o=_=>{var S;r||(f(new vq(_)),(S=n.abort)==null||S.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>tO.isFocused()&&(n.networkMode==="always"||c2.isOnline())&&n.canRun(),u=()=>gq(n.networkMode)&&n.canRun(),h=_=>{var S;r||(r=!0,(S=n.onSuccess)==null||S.call(n,_),i==null||i(),s.resolve(_))},f=_=>{var S;r||(r=!0,(S=n.onError)==null||S.call(n,_),i==null||i(),s.reject(_))},p=()=>new Promise(_=>{var S;i=x=>{(r||c())&&_(x)},(S=n.onPause)==null||S.call(n)}).then(()=>{var _;i=void 0,r||(_=n.onContinue)==null||_.call(n)}),v=()=>{if(r)return;let _;const S=t===0?n.initialPromise:void 0;try{_=S??n.fn()}catch(x){_=Promise.reject(x)}Promise.resolve(_).then(h).catch(x=>{var B;if(r)return;const E=n.retry??(_m?0:3),b=n.retryDelay??k1e,M=typeof b=="function"?b(t,x):b,k=E===!0||typeof E=="number"&&t<E||typeof E=="function"&&E(t,x);if(e||!k){f(x);return}t++,(B=n.onFail)==null||B.call(n,t,x),M1e(M).then(()=>c()?void 0:p()).then(()=>{e?f(x):v()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?v():p().then(v),s)}}var O1e=n=>setTimeout(n,0);function L1e(){let n=[],e=0,t=a=>{a()},r=a=>{a()},i=O1e;const s=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var Bs=L1e(),Wp,r9,xq=(r9=class{constructor(){vn(this,Wp)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),QR(this.gcTime)&&jt(this,Wp,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(_m?1/0:5*60*1e3))}clearGcTimeout(){ge(this,Wp)&&(clearTimeout(ge(this,Wp)),jt(this,Wp,void 0))}},Wp=new WeakMap,r9),G0,Gp,ml,$p,fo,a_,Xp,Ql,Yu,i9,F1e=(i9=class extends xq{constructor(e){super();vn(this,Ql);vn(this,G0);vn(this,Gp);vn(this,ml);vn(this,$p);vn(this,fo);vn(this,a_);vn(this,Xp);jt(this,Xp,!1),jt(this,a_,e.defaultOptions),this.setOptions(e.options),this.observers=[],jt(this,$p,e.client),jt(this,ml,ge(this,$p).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,jt(this,G0,B1e(this.options)),this.state=e.state??ge(this,G0),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ge(this,fo))==null?void 0:e.promise}setOptions(e){this.options={...ge(this,a_),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ge(this,ml).remove(this)}setData(e,t){const r=tN(this.state.data,e,this.options);return Zn(this,Ql,Yu).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){Zn(this,Ql,Yu).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,i;const t=(r=ge(this,fo))==null?void 0:r.promise;return(i=ge(this,fo))==null||i.cancel(e),t?t.then(ga).catch(ga):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ge(this,G0))}isActive(){return this.observers.some(e=>gl(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===eO||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>af(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!fq(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=ge(this,fo))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=ge(this,fo))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ge(this,ml).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(ge(this,fo)&&(ge(this,Xp)?ge(this,fo).cancel({revert:!0}):ge(this,fo).cancelRetry()),this.scheduleGc()),ge(this,ml).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Zn(this,Ql,Yu).call(this,{type:"invalidate"})}fetch(e,t){var c,u,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(ge(this,fo))return ge(this,fo).continueRetry(),ge(this,fo).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(jt(this,Xp,!0),r.signal)})},s=()=>{const f=mq(this.options,t),v=(()=>{const _={client:ge(this,$p),queryKey:this.queryKey,meta:this.meta};return i(_),_})();return jt(this,Xp,!1),this.options.persister?this.options.persister(f,v,this):f(v)},a=(()=>{const f={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:ge(this,$p),state:this.state,fetchFn:s};return i(f),f})();(c=this.options.behavior)==null||c.onFetch(a,this),jt(this,Gp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Zn(this,Ql,Yu).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta});const l=f=>{var p,v,_,S;XM(f)&&f.silent||Zn(this,Ql,Yu).call(this,{type:"error",error:f}),XM(f)||((v=(p=ge(this,ml).config).onError)==null||v.call(p,f,this),(S=(_=ge(this,ml).config).onSettled)==null||S.call(_,this.state.data,f,this)),this.scheduleGc()};return jt(this,fo,yq({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var p,v,_,S;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(x){l(x);return}(v=(p=ge(this,ml).config).onSuccess)==null||v.call(p,f,this),(S=(_=ge(this,ml).config).onSettled)==null||S.call(_,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,p)=>{Zn(this,Ql,Yu).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{Zn(this,Ql,Yu).call(this,{type:"pause"})},onContinue:()=>{Zn(this,Ql,Yu).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),ge(this,fo).start()}},G0=new WeakMap,Gp=new WeakMap,ml=new WeakMap,$p=new WeakMap,fo=new WeakMap,a_=new WeakMap,Xp=new WeakMap,Ql=new WeakSet,Yu=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,..._q(r.data,this.options),fetchMeta:e.meta??null};case"success":return jt(this,Gp,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return XM(i)&&i.revert&&ge(this,Gp)?{...ge(this,Gp),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Bs.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ge(this,ml).notify({query:this,type:"updated",action:e})})},i9);function _q(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:gq(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function B1e(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Hc,s9,U1e=(s9=class extends F_{constructor(e={}){super();vn(this,Hc);this.config=e,jt(this,Hc,new Map)}build(e,t,r){const i=t.queryKey,s=t.queryHash??Jk(i,t);let o=this.get(s);return o||(o=new F1e({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){ge(this,Hc).has(e.queryHash)||(ge(this,Hc).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=ge(this,Hc).get(e.queryHash);t&&(e.destroy(),t===e&&ge(this,Hc).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Bs.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ge(this,Hc).get(e)}getAll(){return[...ge(this,Hc).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>B5(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>B5(e,r)):t}notify(e){Bs.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Bs.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Bs.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Hc=new WeakMap,s9),Wc,zo,qp,Gc,_d,o9,j1e=(o9=class extends xq{constructor(e){super();vn(this,Gc);vn(this,Wc);vn(this,zo);vn(this,qp);this.mutationId=e.mutationId,jt(this,zo,e.mutationCache),jt(this,Wc,[]),this.state=e.state||V1e(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ge(this,Wc).includes(e)||(ge(this,Wc).push(e),this.clearGcTimeout(),ge(this,zo).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){jt(this,Wc,ge(this,Wc).filter(t=>t!==e)),this.scheduleGc(),ge(this,zo).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ge(this,Wc).length||(this.state.status==="pending"?this.scheduleGc():ge(this,zo).remove(this))}continue(){var e;return((e=ge(this,qp))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,o,a,l,c,u,h,f,p,v,_,S,x,E,b,M,k,B,P,N;const t=()=>{Zn(this,Gc,_d).call(this,{type:"continue"})};jt(this,qp,yq({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(R,I)=>{Zn(this,Gc,_d).call(this,{type:"failed",failureCount:R,error:I})},onPause:()=>{Zn(this,Gc,_d).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ge(this,zo).canRun(this)}));const r=this.state.status==="pending",i=!ge(this,qp).canStart();try{if(r)t();else{Zn(this,Gc,_d).call(this,{type:"pending",variables:e,isPaused:i}),await((o=(s=ge(this,zo).config).onMutate)==null?void 0:o.call(s,e,this));const I=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));I!==this.state.context&&Zn(this,Gc,_d).call(this,{type:"pending",context:I,variables:e,isPaused:i})}const R=await ge(this,qp).start();return await((u=(c=ge(this,zo).config).onSuccess)==null?void 0:u.call(c,R,e,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,R,e,this.state.context)),await((v=(p=ge(this,zo).config).onSettled)==null?void 0:v.call(p,R,null,this.state.variables,this.state.context,this)),await((S=(_=this.options).onSettled)==null?void 0:S.call(_,R,null,e,this.state.context)),Zn(this,Gc,_d).call(this,{type:"success",data:R}),R}catch(R){try{throw await((E=(x=ge(this,zo).config).onError)==null?void 0:E.call(x,R,e,this.state.context,this)),await((M=(b=this.options).onError)==null?void 0:M.call(b,R,e,this.state.context)),await((B=(k=ge(this,zo).config).onSettled)==null?void 0:B.call(k,void 0,R,this.state.variables,this.state.context,this)),await((N=(P=this.options).onSettled)==null?void 0:N.call(P,void 0,R,e,this.state.context)),R}finally{Zn(this,Gc,_d).call(this,{type:"error",error:R})}}finally{ge(this,zo).runNext(this)}}},Wc=new WeakMap,zo=new WeakMap,qp=new WeakMap,Gc=new WeakSet,_d=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Bs.batch(()=>{ge(this,Wc).forEach(r=>{r.onMutationUpdate(e)}),ge(this,zo).notify({mutation:this,type:"updated",action:e})})},o9);function V1e(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var eh,Jl,l_,a9,z1e=(a9=class extends F_{constructor(e={}){super();vn(this,eh);vn(this,Jl);vn(this,l_);this.config=e,jt(this,eh,new Set),jt(this,Jl,new Map),jt(this,l_,0)}build(e,t,r){const i=new j1e({mutationCache:this,mutationId:++Bw(this,l_)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){ge(this,eh).add(e);const t=vS(e);if(typeof t=="string"){const r=ge(this,Jl).get(t);r?r.push(e):ge(this,Jl).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ge(this,eh).delete(e)){const t=vS(e);if(typeof t=="string"){const r=ge(this,Jl).get(t);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&ge(this,Jl).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=vS(e);if(typeof t=="string"){const r=ge(this,Jl).get(t),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const t=vS(e);if(typeof t=="string"){const i=(r=ge(this,Jl).get(t))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Bs.batch(()=>{ge(this,eh).forEach(e=>{this.notify({type:"removed",mutation:e})}),ge(this,eh).clear(),ge(this,Jl).clear()})}getAll(){return Array.from(ge(this,eh))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>U5(t,r))}findAll(e={}){return this.getAll().filter(t=>U5(e,t))}notify(e){Bs.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Bs.batch(()=>Promise.all(e.map(t=>t.continue().catch(ga))))}},eh=new WeakMap,Jl=new WeakMap,l_=new WeakMap,a9);function vS(n){var e;return(e=n.options.scope)==null?void 0:e.id}function z5(n){return{onFetch:(e,t)=>{var u,h,f,p,v;const r=e.options,i=(f=(h=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,s=((p=e.state.data)==null?void 0:p.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let _=!1;const S=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?_=!0:e.signal.addEventListener("abort",()=>{_=!0}),e.signal)})},x=mq(e.options,e.fetchOptions),E=async(b,M,k)=>{if(_)return Promise.reject();if(M==null&&b.pages.length)return Promise.resolve(b);const P=(()=>{const U={client:e.client,queryKey:e.queryKey,pageParam:M,direction:k?"backward":"forward",meta:e.options.meta};return S(U),U})(),N=await x(P),{maxPages:R}=e.options,I=k?P1e:I1e;return{pages:I(b.pages,N,R),pageParams:I(b.pageParams,M,R)}};if(i&&s.length){const b=i==="backward",M=b?H1e:H5,k={pages:s,pageParams:o},B=M(r,k);a=await E(k,B,b)}else{const b=n??s.length;do{const M=l===0?o[0]??r.initialPageParam:H5(r,a);if(l>0&&M==null)break;a=await E(a,M),l++}while(l<b)}return a};e.options.persister?e.fetchFn=()=>{var _,S;return(S=(_=e.options).persister)==null?void 0:S.call(_,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function H5(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function H1e(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Ci,kd,Od,$0,X0,Ld,q0,Y0,l9,W1e=(l9=class{constructor(n={}){vn(this,Ci);vn(this,kd);vn(this,Od);vn(this,$0);vn(this,X0);vn(this,Ld);vn(this,q0);vn(this,Y0);jt(this,Ci,n.queryCache||new U1e),jt(this,kd,n.mutationCache||new z1e),jt(this,Od,n.defaultOptions||{}),jt(this,$0,new Map),jt(this,X0,new Map),jt(this,Ld,0)}mount(){Bw(this,Ld)._++,ge(this,Ld)===1&&(jt(this,q0,tO.subscribe(async n=>{n&&(await this.resumePausedMutations(),ge(this,Ci).onFocus())})),jt(this,Y0,c2.subscribe(async n=>{n&&(await this.resumePausedMutations(),ge(this,Ci).onOnline())})))}unmount(){var n,e;Bw(this,Ld)._--,ge(this,Ld)===0&&((n=ge(this,q0))==null||n.call(this),jt(this,q0,void 0),(e=ge(this,Y0))==null||e.call(this),jt(this,Y0,void 0))}isFetching(n){return ge(this,Ci).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return ge(this,kd).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ge(this,Ci).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=ge(this,Ci).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(af(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return ge(this,Ci).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=ge(this,Ci).get(r.queryHash),s=i==null?void 0:i.state.data,o=C1e(e,s);if(o!==void 0)return ge(this,Ci).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return Bs.batch(()=>ge(this,Ci).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ge(this,Ci).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=ge(this,Ci);Bs.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=ge(this,Ci);return Bs.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Bs.batch(()=>ge(this,Ci).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(ga).catch(ga)}invalidateQueries(n,e={}){return Bs.batch(()=>(ge(this,Ci).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Bs.batch(()=>ge(this,Ci).findAll(n).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(ga)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(ga)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=ge(this,Ci).build(this,e);return t.isStaleByTime(af(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(ga).catch(ga)}fetchInfiniteQuery(n){return n.behavior=z5(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(ga).catch(ga)}ensureInfiniteQueryData(n){return n.behavior=z5(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return c2.isOnline()?ge(this,kd).resumePausedMutations():Promise.resolve()}getQueryCache(){return ge(this,Ci)}getMutationCache(){return ge(this,kd)}getDefaultOptions(){return ge(this,Od)}setDefaultOptions(n){jt(this,Od,n)}setQueryDefaults(n,e){ge(this,$0).set(Ox(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...ge(this,$0).values()],t={};return e.forEach(r=>{Lx(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){ge(this,X0).set(Ox(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...ge(this,X0).values()],t={};return e.forEach(r=>{Lx(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...ge(this,Od).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Jk(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===eO&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...ge(this,Od).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){ge(this,Ci).clear(),ge(this,kd).clear()}},Ci=new WeakMap,kd=new WeakMap,Od=new WeakMap,$0=new WeakMap,X0=new WeakMap,Ld=new WeakMap,q0=new WeakMap,Y0=new WeakMap,l9),pa,Qn,c_,Ho,Yp,K0,Fd,Bd,u_,Z0,Q0,Kp,Zp,Ud,J0,xr,h1,rN,iN,sN,oN,aN,lN,cN,wq,c9,G1e=(c9=class extends F_{constructor(e,t){super();vn(this,xr);vn(this,pa);vn(this,Qn);vn(this,c_);vn(this,Ho);vn(this,Yp);vn(this,K0);vn(this,Fd);vn(this,Bd);vn(this,u_);vn(this,Z0);vn(this,Q0);vn(this,Kp);vn(this,Zp);vn(this,Ud);vn(this,J0,new Set);this.options=t,jt(this,pa,e),jt(this,Bd,null),jt(this,Fd,nN()),this.options.experimental_prefetchInRender||ge(this,Fd).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ge(this,Qn).addObserver(this),W5(ge(this,Qn),this.options)?Zn(this,xr,h1).call(this):this.updateResult(),Zn(this,xr,oN).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return uN(ge(this,Qn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return uN(ge(this,Qn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Zn(this,xr,aN).call(this),Zn(this,xr,lN).call(this),ge(this,Qn).removeObserver(this)}setOptions(e){const t=this.options,r=ge(this,Qn);if(this.options=ge(this,pa).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof gl(this.options.enabled,ge(this,Qn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Zn(this,xr,cN).call(this),ge(this,Qn).setOptions(this.options),t._defaulted&&!JR(this.options,t)&&ge(this,pa).getQueryCache().notify({type:"observerOptionsUpdated",query:ge(this,Qn),observer:this});const i=this.hasListeners();i&&G5(ge(this,Qn),r,this.options,t)&&Zn(this,xr,h1).call(this),this.updateResult(),i&&(ge(this,Qn)!==r||gl(this.options.enabled,ge(this,Qn))!==gl(t.enabled,ge(this,Qn))||af(this.options.staleTime,ge(this,Qn))!==af(t.staleTime,ge(this,Qn)))&&Zn(this,xr,rN).call(this);const s=Zn(this,xr,iN).call(this);i&&(ge(this,Qn)!==r||gl(this.options.enabled,ge(this,Qn))!==gl(t.enabled,ge(this,Qn))||s!==ge(this,Ud))&&Zn(this,xr,sN).call(this,s)}getOptimisticResult(e){const t=ge(this,pa).getQueryCache().build(ge(this,pa),e),r=this.createResult(t,e);return X1e(this,r)&&(jt(this,Ho,r),jt(this,K0,this.options),jt(this,Yp,ge(this,Qn).state)),r}getCurrentResult(){return ge(this,Ho)}trackResult(e,t){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),t==null||t(i),Reflect.get(r,i))})}trackProp(e){ge(this,J0).add(e)}getCurrentQuery(){return ge(this,Qn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=ge(this,pa).defaultQueryOptions(e),r=ge(this,pa).getQueryCache().build(ge(this,pa),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return Zn(this,xr,h1).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),ge(this,Ho)))}createResult(e,t){var R;const r=ge(this,Qn),i=this.options,s=ge(this,Ho),o=ge(this,Yp),a=ge(this,K0),c=e!==r?e.state:ge(this,c_),{state:u}=e;let h={...u},f=!1,p;if(t._optimisticResults){const I=this.hasListeners(),U=!I&&W5(e,t),H=I&&G5(e,r,t,i);(U||H)&&(h={...h,..._q(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:_,status:S}=h;p=h.data;let x=!1;if(t.placeholderData!==void 0&&p===void 0&&S==="pending"){let I;s!=null&&s.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData)?(I=s.data,x=!0):I=typeof t.placeholderData=="function"?t.placeholderData((R=ge(this,Q0))==null?void 0:R.state.data,ge(this,Q0)):t.placeholderData,I!==void 0&&(S="success",p=tN(s==null?void 0:s.data,I,t),f=!0)}if(t.select&&p!==void 0&&!x)if(s&&p===(o==null?void 0:o.data)&&t.select===ge(this,u_))p=ge(this,Z0);else try{jt(this,u_,t.select),p=t.select(p),p=tN(s==null?void 0:s.data,p,t),jt(this,Z0,p),jt(this,Bd,null)}catch(I){jt(this,Bd,I)}ge(this,Bd)&&(v=ge(this,Bd),p=ge(this,Z0),_=Date.now(),S="error");const E=h.fetchStatus==="fetching",b=S==="pending",M=S==="error",k=b&&E,B=p!==void 0,N={status:S,fetchStatus:h.fetchStatus,isPending:b,isSuccess:S==="success",isError:M,isInitialLoading:k,isLoading:k,data:p,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:_,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:E,isRefetching:E&&!b,isLoadingError:M&&!B,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:M&&B,isStale:nO(e,t),refetch:this.refetch,promise:ge(this,Fd),isEnabled:gl(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const I=W=>{N.status==="error"?W.reject(N.error):N.data!==void 0&&W.resolve(N.data)},U=()=>{const W=jt(this,Fd,N.promise=nN());I(W)},H=ge(this,Fd);switch(H.status){case"pending":e.queryHash===r.queryHash&&I(H);break;case"fulfilled":(N.status==="error"||N.data!==H.value)&&U();break;case"rejected":(N.status!=="error"||N.error!==H.reason)&&U();break}}return N}updateResult(){const e=ge(this,Ho),t=this.createResult(ge(this,Qn),this.options);if(jt(this,Yp,ge(this,Qn).state),jt(this,K0,this.options),ge(this,Yp).data!==void 0&&jt(this,Q0,ge(this,Qn)),JR(t,e))return;jt(this,Ho,t);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!ge(this,J0).size)return!0;const o=new Set(s??ge(this,J0));return this.options.throwOnError&&o.add("error"),Object.keys(ge(this,Ho)).some(a=>{const l=a;return ge(this,Ho)[l]!==e[l]&&o.has(l)})};Zn(this,xr,wq).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Zn(this,xr,oN).call(this)}},pa=new WeakMap,Qn=new WeakMap,c_=new WeakMap,Ho=new WeakMap,Yp=new WeakMap,K0=new WeakMap,Fd=new WeakMap,Bd=new WeakMap,u_=new WeakMap,Z0=new WeakMap,Q0=new WeakMap,Kp=new WeakMap,Zp=new WeakMap,Ud=new WeakMap,J0=new WeakMap,xr=new WeakSet,h1=function(e){Zn(this,xr,cN).call(this);let t=ge(this,Qn).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(ga)),t},rN=function(){Zn(this,xr,aN).call(this);const e=af(this.options.staleTime,ge(this,Qn));if(_m||ge(this,Ho).isStale||!QR(e))return;const r=fq(ge(this,Ho).dataUpdatedAt,e)+1;jt(this,Kp,setTimeout(()=>{ge(this,Ho).isStale||this.updateResult()},r))},iN=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ge(this,Qn)):this.options.refetchInterval)??!1},sN=function(e){Zn(this,xr,lN).call(this),jt(this,Ud,e),!(_m||gl(this.options.enabled,ge(this,Qn))===!1||!QR(ge(this,Ud))||ge(this,Ud)===0)&&jt(this,Zp,setInterval(()=>{(this.options.refetchIntervalInBackground||tO.isFocused())&&Zn(this,xr,h1).call(this)},ge(this,Ud)))},oN=function(){Zn(this,xr,rN).call(this),Zn(this,xr,sN).call(this,Zn(this,xr,iN).call(this))},aN=function(){ge(this,Kp)&&(clearTimeout(ge(this,Kp)),jt(this,Kp,void 0))},lN=function(){ge(this,Zp)&&(clearInterval(ge(this,Zp)),jt(this,Zp,void 0))},cN=function(){const e=ge(this,pa).getQueryCache().build(ge(this,pa),this.options);if(e===ge(this,Qn))return;const t=ge(this,Qn);jt(this,Qn,e),jt(this,c_,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},wq=function(e){Bs.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(ge(this,Ho))}),ge(this,pa).getQueryCache().notify({query:ge(this,Qn),type:"observerResultsUpdated"})})},c9);function $1e(n,e){return gl(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function W5(n,e){return $1e(n,e)||n.state.data!==void 0&&uN(n,e,e.refetchOnMount)}function uN(n,e,t){if(gl(e.enabled,n)!==!1&&af(e.staleTime,n)!=="static"){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&nO(n,e)}return!1}function G5(n,e,t,r){return(n!==e||gl(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&nO(n,t)}function nO(n,e){return gl(e.enabled,n)!==!1&&n.isStaleByTime(af(e.staleTime,n))}function X1e(n,e){return!JR(n.getCurrentResult(),e)}var Sq=O.createContext(void 0),q1e=n=>{const e=O.useContext(Sq);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Y1e=({client:n,children:e})=>(O.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),m.jsx(Sq.Provider,{value:n,children:e})),Eq=O.createContext(!1),K1e=()=>O.useContext(Eq);Eq.Provider;function Z1e(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var Q1e=O.createContext(Z1e()),J1e=()=>O.useContext(Q1e),exe=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},txe=n=>{O.useEffect(()=>{n.clearReset()},[n])},nxe=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:i})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(i&&n.data===void 0||R1e(t,[n.error,r])),rxe=n=>{if(n.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),t=n.staleTime;n.staleTime=typeof t=="function"?(...r)=>e(t(...r)):e(t),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},ixe=(n,e)=>n.isLoading&&n.isFetching&&!e,sxe=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,$5=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function oxe(n,e,t){var h,f,p,v,_;const r=K1e(),i=J1e(),s=q1e(),o=s.defaultQueryOptions(n);(f=(h=s.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",rxe(o),exe(o,i),txe(i);const a=!s.getQueryCache().get(o.queryHash),[l]=O.useState(()=>new e(s,o)),c=l.getOptimisticResult(o),u=!r&&n.subscribed!==!1;if(O.useSyncExternalStore(O.useCallback(S=>{const x=u?l.subscribe(Bs.batchCalls(S)):ga;return l.updateResult(),x},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),O.useEffect(()=>{l.setOptions(o)},[o,l]),sxe(o,c))throw $5(o,l,i);if(nxe({result:c,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((v=(p=s.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||v.call(p,o,c),o.experimental_prefetchInRender&&!_m&&ixe(c,r)){const S=a?$5(o,l,i):(_=s.getQueryCache().get(o.queryHash))==null?void 0:_.promise;S==null||S.catch(ga).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function vT(n,e){return oxe(n,G1e)}const axe=n=>{var t,r;const e=n.data();return{id:n.id,title:e.title||"",description:e.description||"",date:e.date?typeof e.date=="string"?e.date:((r=(t=e.date)==null?void 0:t.toDate)==null?void 0:r.call(t))??"":"",imageUrl:e.imageUrl||"",category:e.category||""}},lxe=async n=>{const e=fi(wn,"activities");let r=(await Ss(e)).docs.filter(i=>{const s=i.data();return!("deletedAt"in s)||s.deletedAt===null});return r=r.sort((i,s)=>{const o=i.data().date?new Date(i.data().date).getTime():0;return(s.data().date?new Date(s.data().date).getTime():0)-o}),n&&(r=r.slice(0,n)),r.map(axe)},rO=n=>vT({queryKey:["activities",n],queryFn:()=>lxe(n)}),cxe=async n=>{let e=fi(wn,"learnings"),t=n?sk(e,JW(n)):e;return(await Ss(t)).docs.map(i=>{const s=i.data();return{id:i.id,title:s.title||"",description:s.description||"",icon:s.icon||"",link:s.link||""}})},bq=n=>vT({queryKey:["learningModules",n],queryFn:()=>cxe(n)}),uxe=n=>{const e=n.data();return{id:n.id,title:e.title||"",description:e.description||"",imageUrl:e.imageUrl||"",activityId:e.activityId||null,createdAt:e.createdAt||null,updatedAt:e.updatedAt||null}},hxe=async()=>{const n=fi(wn,"gallerys");return(await Ss(n)).docs.filter(t=>{const r=t.data();return!("deletedAt"in r)||r.deletedAt===null}).map(uxe)},Aq=()=>vT({queryKey:["gallery"],queryFn:hxe});function dxe(n){return Object.prototype.toString.call(n)==="[object Object]"}function X5(n){return dxe(n)||Array.isArray(n)}function fxe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function iO(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;const i=JSON.stringify(Object.keys(n.breakpoints||{})),s=JSON.stringify(Object.keys(e.breakpoints||{}));return i!==s?!1:t.every(o=>{const a=n[o],l=e[o];return typeof a=="function"?`${a}`==`${l}`:!X5(a)||!X5(l)?a===l:iO(a,l)})}function q5(n){return n.concat().sort((e,t)=>e.name>t.name?1:-1).map(e=>e.options)}function pxe(n,e){if(n.length!==e.length)return!1;const t=q5(n),r=q5(e);return t.every((i,s)=>{const o=r[s];return iO(i,o)})}function sO(n){return typeof n=="number"}function hN(n){return typeof n=="string"}function yT(n){return typeof n=="boolean"}function Y5(n){return Object.prototype.toString.call(n)==="[object Object]"}function mi(n){return Math.abs(n)}function oO(n){return Math.sign(n)}function V1(n,e){return mi(n-e)}function mxe(n,e){if(n===0||e===0||mi(n)<=mi(e))return 0;const t=V1(mi(n),mi(e));return mi(t/n)}function gxe(n){return Math.round(n*100)/100}function Fx(n){return Bx(n).map(Number)}function fc(n){return n[B_(n)]}function B_(n){return Math.max(0,n.length-1)}function aO(n,e){return e===B_(n)}function K5(n,e=0){return Array.from(Array(n),(t,r)=>e+r)}function Bx(n){return Object.keys(n)}function Tq(n,e){return[n,e].reduce((t,r)=>(Bx(r).forEach(i=>{const s=t[i],o=r[i],a=Y5(s)&&Y5(o);t[i]=a?Tq(s,o):o}),t),{})}function dN(n,e){return typeof e.MouseEvent<"u"&&n instanceof e.MouseEvent}function vxe(n,e){const t={start:r,center:i,end:s};function r(){return 0}function i(l){return s(l)/2}function s(l){return e-l}function o(l,c){return hN(n)?t[n](l):n(e,l,c)}return{measure:o}}function Ux(){let n=[];function e(i,s,o,a={passive:!0}){let l;if("addEventListener"in i)i.addEventListener(s,o,a),l=()=>i.removeEventListener(s,o,a);else{const c=i;c.addListener(o),l=()=>c.removeListener(o)}return n.push(l),r}function t(){n=n.filter(i=>i())}const r={add:e,clear:t};return r}function yxe(n,e,t,r){const i=Ux(),s=1e3/60;let o=null,a=0,l=0;function c(){i.add(n,"visibilitychange",()=>{n.hidden&&v()})}function u(){p(),i.clear()}function h(S){if(!l)return;o||(o=S,t(),t());const x=S-o;for(o=S,a+=x;a>=s;)t(),a-=s;const E=a/s;r(E),l&&(l=e.requestAnimationFrame(h))}function f(){l||(l=e.requestAnimationFrame(h))}function p(){e.cancelAnimationFrame(l),o=null,a=0,l=0}function v(){o=null,a=0}return{init:c,destroy:u,start:f,stop:p,update:t,render:r}}function xxe(n,e){const t=e==="rtl",r=n==="y",i=r?"y":"x",s=r?"x":"y",o=!r&&t?-1:1,a=u(),l=h();function c(v){const{height:_,width:S}=v;return r?_:S}function u(){return r?"top":t?"right":"left"}function h(){return r?"bottom":t?"left":"right"}function f(v){return v*o}return{scroll:i,cross:s,startEdge:a,endEdge:l,measureSize:c,direction:f}}function wm(n=0,e=0){const t=mi(n-e);function r(c){return c<n}function i(c){return c>e}function s(c){return r(c)||i(c)}function o(c){return s(c)?r(c)?n:e:c}function a(c){return t?c-t*Math.ceil((c-e)/t):c}return{length:t,max:e,min:n,constrain:o,reachedAny:s,reachedMax:i,reachedMin:r,removeOffset:a}}function Cq(n,e,t){const{constrain:r}=wm(0,n),i=n+1;let s=o(e);function o(f){return t?mi((i+f)%i):r(f)}function a(){return s}function l(f){return s=o(f),h}function c(f){return u().set(a()+f)}function u(){return Cq(n,a(),t)}const h={get:a,set:l,add:c,clone:u};return h}function _xe(n,e,t,r,i,s,o,a,l,c,u,h,f,p,v,_,S,x,E){const{cross:b,direction:M}=n,k=["INPUT","SELECT","TEXTAREA"],B={passive:!1},P=Ux(),N=Ux(),R=wm(50,225).constrain(p.measure(20)),I={mouse:300,touch:400},U={mouse:500,touch:600},H=v?43:25;let W=!1,K=0,te=0,se=!1,le=!1,X=!1,ce=!1;function oe(Pe){if(!E)return;function ne(Re){(yT(E)||E(Pe,Re))&&Ie(Re)}const Be=e;P.add(Be,"dragstart",Re=>Re.preventDefault(),B).add(Be,"touchmove",()=>{},B).add(Be,"touchend",()=>{}).add(Be,"touchstart",ne).add(Be,"mousedown",ne).add(Be,"touchcancel",tt).add(Be,"contextmenu",tt).add(Be,"click",Ke,!0)}function fe(){P.clear(),N.clear()}function De(){const Pe=ce?t:e;N.add(Pe,"touchmove",we,B).add(Pe,"touchend",tt).add(Pe,"mousemove",we,B).add(Pe,"mouseup",tt)}function We(Pe){const ne=Pe.nodeName||"";return k.includes(ne)}function Qe(){return(v?U:I)[ce?"mouse":"touch"]}function ve(Pe,ne){const Be=h.add(oO(Pe)*-1),Re=u.byDistance(Pe,!v).distance;return v||mi(Pe)<R?Re:S&&ne?Re*.5:u.byIndex(Be.get(),0).distance}function Ie(Pe){const ne=dN(Pe,r);ce=ne,X=v&&ne&&!Pe.buttons&&W,W=V1(i.get(),o.get())>=2,!(ne&&Pe.button!==0)&&(We(Pe.target)||(se=!0,s.pointerDown(Pe),c.useFriction(0).useDuration(0),i.set(o),De(),K=s.readPoint(Pe),te=s.readPoint(Pe,b),f.emit("pointerDown")))}function we(Pe){if(!dN(Pe,r)&&Pe.touches.length>=2)return tt(Pe);const Be=s.readPoint(Pe),Re=s.readPoint(Pe,b),qe=V1(Be,K),ze=V1(Re,te);if(!le&&!ce&&(!Pe.cancelable||(le=qe>ze,!le)))return tt(Pe);const J=s.pointerMove(Pe);qe>_&&(X=!0),c.useFriction(.3).useDuration(.75),a.start(),i.add(M(J)),Pe.preventDefault()}function tt(Pe){const Be=u.byDistance(0,!1).index!==h.get(),Re=s.pointerUp(Pe)*Qe(),qe=ve(M(Re),Be),ze=mxe(Re,qe),J=H-10*ze,be=x+ze/50;le=!1,se=!1,N.clear(),c.useDuration(J).useFriction(be),l.distance(qe,!v),ce=!1,f.emit("pointerUp")}function Ke(Pe){X&&(Pe.stopPropagation(),Pe.preventDefault(),X=!1)}function Me(){return se}return{init:oe,destroy:fe,pointerDown:Me}}function wxe(n,e){let r,i;function s(h){return h.timeStamp}function o(h,f){const v=`client${(f||n.scroll)==="x"?"X":"Y"}`;return(dN(h,e)?h:h.touches[0])[v]}function a(h){return r=h,i=h,o(h)}function l(h){const f=o(h)-o(i),p=s(h)-s(r)>170;return i=h,p&&(r=h),f}function c(h){if(!r||!i)return 0;const f=o(i)-o(r),p=s(h)-s(r),v=s(h)-s(i)>170,_=f/p;return p&&!v&&mi(_)>.1?_:0}return{pointerDown:a,pointerMove:l,pointerUp:c,readPoint:o}}function Sxe(){function n(t){const{offsetTop:r,offsetLeft:i,offsetWidth:s,offsetHeight:o}=t;return{top:r,right:i+s,bottom:r+o,left:i,width:s,height:o}}return{measure:n}}function Exe(n){function e(r){return n*(r/100)}return{measure:e}}function bxe(n,e,t,r,i,s,o){const a=[n].concat(r);let l,c,u=[],h=!1;function f(S){return i.measureSize(o.measure(S))}function p(S){if(!s)return;c=f(n),u=r.map(f);function x(E){for(const b of E){if(h)return;const M=b.target===n,k=r.indexOf(b.target),B=M?c:u[k],P=f(M?n:r[k]);if(mi(P-B)>=.5){S.reInit(),e.emit("resize");break}}}l=new ResizeObserver(E=>{(yT(s)||s(S,E))&&x(E)}),t.requestAnimationFrame(()=>{a.forEach(E=>l.observe(E))})}function v(){h=!0,l&&l.disconnect()}return{init:p,destroy:v}}function Axe(n,e,t,r,i,s){let o=0,a=0,l=i,c=s,u=n.get(),h=0;function f(){const B=r.get()-n.get(),P=!l;let N=0;return P?(o=0,t.set(r),n.set(r),N=B):(t.set(n),o+=B/l,o*=c,u+=o,n.add(o),N=u-h),a=oO(N),h=u,k}function p(){const B=r.get()-e.get();return mi(B)<.001}function v(){return l}function _(){return a}function S(){return o}function x(){return b(i)}function E(){return M(s)}function b(B){return l=B,k}function M(B){return c=B,k}const k={direction:_,duration:v,velocity:S,seek:f,settled:p,useBaseFriction:E,useBaseDuration:x,useFriction:M,useDuration:b};return k}function Txe(n,e,t,r,i){const s=i.measure(10),o=i.measure(50),a=wm(.1,.99);let l=!1;function c(){return!(l||!n.reachedAny(t.get())||!n.reachedAny(e.get()))}function u(p){if(!c())return;const v=n.reachedMin(e.get())?"min":"max",_=mi(n[v]-e.get()),S=t.get()-e.get(),x=a.constrain(_/o);t.subtract(S*x),!p&&mi(S)<s&&(t.set(n.constrain(t.get())),r.useDuration(25).useBaseFriction())}function h(p){l=!p}return{shouldConstrain:c,constrain:u,toggleActive:h}}function Cxe(n,e,t,r,i){const s=wm(-e+n,0),o=h(),a=u(),l=f();function c(v,_){return V1(v,_)<=1}function u(){const v=o[0],_=fc(o),S=o.lastIndexOf(v),x=o.indexOf(_)+1;return wm(S,x)}function h(){return t.map((v,_)=>{const{min:S,max:x}=s,E=s.constrain(v),b=!_,M=aO(t,_);return b?x:M||c(S,E)?S:c(x,E)?x:E}).map(v=>parseFloat(v.toFixed(3)))}function f(){if(e<=n+i)return[s.max];if(r==="keepSnaps")return o;const{min:v,max:_}=a;return o.slice(v,_)}return{snapsContained:l,scrollContainLimit:a}}function Mxe(n,e,t){const r=e[0],i=t?r-n:fc(e);return{limit:wm(i,r)}}function Ixe(n,e,t,r){const s=e.min+.1,o=e.max+.1,{reachedMin:a,reachedMax:l}=wm(s,o);function c(f){return f===1?l(t.get()):f===-1?a(t.get()):!1}function u(f){if(!c(f))return;const p=n*(f*-1);r.forEach(v=>v.add(p))}return{loop:u}}function Pxe(n){const{max:e,length:t}=n;function r(s){const o=s-e;return t?o/-t:0}return{get:r}}function Rxe(n,e,t,r,i){const{startEdge:s,endEdge:o}=n,{groupSlides:a}=i,l=h().map(e.measure),c=f(),u=p();function h(){return a(r).map(_=>fc(_)[o]-_[0][s]).map(mi)}function f(){return r.map(_=>t[s]-_[s]).map(_=>-mi(_))}function p(){return a(c).map(_=>_[0]).map((_,S)=>_+l[S])}return{snaps:c,snapsAligned:u}}function Nxe(n,e,t,r,i,s){const{groupSlides:o}=i,{min:a,max:l}=r,c=u();function u(){const f=o(s),p=!n||e==="keepSnaps";return t.length===1?[s]:p?f:f.slice(a,l).map((v,_,S)=>{const x=!_,E=aO(S,_);if(x){const b=fc(S[0])+1;return K5(b)}if(E){const b=B_(s)-fc(S)[0]+1;return K5(b,fc(S)[0])}return v})}return{slideRegistry:c}}function Dxe(n,e,t,r,i){const{reachedAny:s,removeOffset:o,constrain:a}=r;function l(v){return v.concat().sort((_,S)=>mi(_)-mi(S))[0]}function c(v){const _=n?o(v):a(v),S=e.map((E,b)=>({diff:u(E-_,0),index:b})).sort((E,b)=>mi(E.diff)-mi(b.diff)),{index:x}=S[0];return{index:x,distance:_}}function u(v,_){const S=[v,v+t,v-t];if(!n)return v;if(!_)return l(S);const x=S.filter(E=>oO(E)===_);return x.length?l(x):fc(S)-t}function h(v,_){const S=e[v]-i.get(),x=u(S,_);return{index:v,distance:x}}function f(v,_){const S=i.get()+v,{index:x,distance:E}=c(S),b=!n&&s(S);if(!_||b)return{index:x,distance:v};const M=e[x]-E,k=v+u(M,0);return{index:x,distance:k}}return{byDistance:f,byIndex:h,shortcut:u}}function kxe(n,e,t,r,i,s,o){function a(h){const f=h.distance,p=h.index!==e.get();s.add(f),f&&(r.duration()?n.start():(n.update(),n.render(1),n.update())),p&&(t.set(e.get()),e.set(h.index),o.emit("select"))}function l(h,f){const p=i.byDistance(h,f);a(p)}function c(h,f){const p=e.clone().set(h),v=i.byIndex(p.get(),f);a(v)}return{distance:l,index:c}}function Oxe(n,e,t,r,i,s,o,a){const l={passive:!0,capture:!0};let c=0;function u(p){if(!a)return;function v(_){if(new Date().getTime()-c>10)return;o.emit("slideFocusStart"),n.scrollLeft=0;const E=t.findIndex(b=>b.includes(_));sO(E)&&(i.useDuration(0),r.index(E,0),o.emit("slideFocus"))}s.add(document,"keydown",h,!1),e.forEach((_,S)=>{s.add(_,"focus",x=>{(yT(a)||a(p,x))&&v(S)},l)})}function h(p){p.code==="Tab"&&(c=new Date().getTime())}return{init:u}}function d1(n){let e=n;function t(){return e}function r(l){e=o(l)}function i(l){e+=o(l)}function s(l){e-=o(l)}function o(l){return sO(l)?l:l.get()}return{get:t,set:r,add:i,subtract:s}}function Mq(n,e){const t=n.scroll==="x"?o:a,r=e.style;let i=null,s=!1;function o(f){return`translate3d(${f}px,0px,0px)`}function a(f){return`translate3d(0px,${f}px,0px)`}function l(f){if(s)return;const p=gxe(n.direction(f));p!==i&&(r.transform=t(p),i=p)}function c(f){s=!f}function u(){s||(r.transform="",e.getAttribute("style")||e.removeAttribute("style"))}return{clear:u,to:l,toggleActive:c}}function Lxe(n,e,t,r,i,s,o,a,l){const u=Fx(i),h=Fx(i).reverse(),f=x().concat(E());function p(P,N){return P.reduce((R,I)=>R-i[I],N)}function v(P,N){return P.reduce((R,I)=>p(R,N)>0?R.concat([I]):R,[])}function _(P){return s.map((N,R)=>({start:N-r[R]+.5+P,end:N+e-.5+P}))}function S(P,N,R){const I=_(N);return P.map(U=>{const H=R?0:-t,W=R?t:0,K=R?"end":"start",te=I[U][K];return{index:U,loopPoint:te,slideLocation:d1(-1),translate:Mq(n,l[U]),target:()=>a.get()>te?H:W}})}function x(){const P=o[0],N=v(h,P);return S(N,t,!1)}function E(){const P=e-o[0]-1,N=v(u,P);return S(N,-t,!0)}function b(){return f.every(({index:P})=>{const N=u.filter(R=>R!==P);return p(N,e)<=.1})}function M(){f.forEach(P=>{const{target:N,translate:R,slideLocation:I}=P,U=N();U!==I.get()&&(R.to(U),I.set(U))})}function k(){f.forEach(P=>P.translate.clear())}return{canLoop:b,clear:k,loop:M,loopPoints:f}}function Fxe(n,e,t){let r,i=!1;function s(l){if(!t)return;function c(u){for(const h of u)if(h.type==="childList"){l.reInit(),e.emit("slidesChanged");break}}r=new MutationObserver(u=>{i||(yT(t)||t(l,u))&&c(u)}),r.observe(n,{childList:!0})}function o(){r&&r.disconnect(),i=!0}return{init:s,destroy:o}}function Bxe(n,e,t,r){const i={};let s=null,o=null,a,l=!1;function c(){a=new IntersectionObserver(v=>{l||(v.forEach(_=>{const S=e.indexOf(_.target);i[S]=_}),s=null,o=null,t.emit("slidesInView"))},{root:n.parentElement,threshold:r}),e.forEach(v=>a.observe(v))}function u(){a&&a.disconnect(),l=!0}function h(v){return Bx(i).reduce((_,S)=>{const x=parseInt(S),{isIntersecting:E}=i[x];return(v&&E||!v&&!E)&&_.push(x),_},[])}function f(v=!0){if(v&&s)return s;if(!v&&o)return o;const _=h(v);return v&&(s=_),v||(o=_),_}return{init:c,destroy:u,get:f}}function Uxe(n,e,t,r,i,s){const{measureSize:o,startEdge:a,endEdge:l}=n,c=t[0]&&i,u=v(),h=_(),f=t.map(o),p=S();function v(){if(!c)return 0;const E=t[0];return mi(e[a]-E[a])}function _(){if(!c)return 0;const E=s.getComputedStyle(fc(r));return parseFloat(E.getPropertyValue(`margin-${l}`))}function S(){return t.map((E,b,M)=>{const k=!b,B=aO(M,b);return k?f[b]+u:B?f[b]+h:M[b+1][a]-E[a]}).map(mi)}return{slideSizes:f,slideSizesWithGaps:p,startGap:u,endGap:h}}function jxe(n,e,t,r,i,s,o,a,l){const{startEdge:c,endEdge:u,direction:h}=n,f=sO(t);function p(x,E){return Fx(x).filter(b=>b%E===0).map(b=>x.slice(b,b+E))}function v(x){return x.length?Fx(x).reduce((E,b,M)=>{const k=fc(E)||0,B=k===0,P=b===B_(x),N=i[c]-s[k][c],R=i[c]-s[b][u],I=!r&&B?h(o):0,U=!r&&P?h(a):0,H=mi(R-U-(N+I));return M&&H>e+l&&E.push(b),P&&E.push(x.length),E},[]).map((E,b,M)=>{const k=Math.max(M[b-1]||0);return x.slice(k,E)}):[]}function _(x){return f?p(x,t):v(x)}return{groupSlides:_}}function Vxe(n,e,t,r,i,s,o){const{align:a,axis:l,direction:c,startIndex:u,loop:h,duration:f,dragFree:p,dragThreshold:v,inViewThreshold:_,slidesToScroll:S,skipSnaps:x,containScroll:E,watchResize:b,watchSlides:M,watchDrag:k,watchFocus:B}=s,P=2,N=Sxe(),R=N.measure(e),I=t.map(N.measure),U=xxe(l,c),H=U.measureSize(R),W=Exe(H),K=vxe(a,H),te=!h&&!!E,se=h||!!E,{slideSizes:le,slideSizesWithGaps:X,startGap:ce,endGap:oe}=Uxe(U,R,I,t,se,i),fe=jxe(U,H,S,h,R,I,ce,oe,P),{snaps:De,snapsAligned:We}=Rxe(U,K,R,I,fe),Qe=-fc(De)+fc(X),{snapsContained:ve,scrollContainLimit:Ie}=Cxe(H,Qe,We,E,P),we=te?ve:We,{limit:tt}=Mxe(Qe,we,h),Ke=Cq(B_(we),u,h),Me=Ke.clone(),Ye=Fx(t),Pe=({dragHandler:lt,scrollBody:bt,scrollBounds:wt,options:{loop:st}})=>{st||wt.constrain(lt.pointerDown()),bt.seek()},ne=({scrollBody:lt,translate:bt,location:wt,offsetLocation:st,previousLocation:mt,scrollLooper:Wt,slideLooper:ue,dragHandler:Te,animation:ut,eventHandler:he,scrollBounds:Je,options:{loop:ot}},gt)=>{const at=lt.settled(),Xe=!Je.shouldConstrain(),xt=ot?at:at&&Xe,Bt=xt&&!Te.pointerDown();Bt&&ut.stop();const Cn=wt.get()*gt+mt.get()*(1-gt);st.set(Cn),ot&&(Wt.loop(lt.direction()),ue.loop()),bt.to(st.get()),Bt&&he.emit("settle"),xt||he.emit("scroll")},Be=yxe(r,i,()=>Pe(Mt),lt=>ne(Mt,lt)),Re=.68,qe=we[Ke.get()],ze=d1(qe),J=d1(qe),be=d1(qe),Fe=d1(qe),rt=Axe(ze,be,J,Fe,f,Re),pt=Dxe(h,we,Qe,tt,Fe),ee=kxe(Be,Ke,Me,rt,pt,Fe,o),q=Pxe(tt),me=Ux(),pe=Bxe(e,t,o,_),{slideRegistry:Ve}=Nxe(te,E,we,Ie,fe,Ye),Ue=Oxe(n,t,Ve,ee,rt,me,o,B),Mt={ownerDocument:r,ownerWindow:i,eventHandler:o,containerRect:R,slideRects:I,animation:Be,axis:U,dragHandler:_xe(U,n,r,i,Fe,wxe(U,i),ze,Be,ee,rt,pt,Ke,o,W,p,v,x,Re,k),eventStore:me,percentOfView:W,index:Ke,indexPrevious:Me,limit:tt,location:ze,offsetLocation:be,previousLocation:J,options:s,resizeHandler:bxe(e,o,i,t,U,b,N),scrollBody:rt,scrollBounds:Txe(tt,be,Fe,rt,W),scrollLooper:Ixe(Qe,tt,be,[ze,be,J,Fe]),scrollProgress:q,scrollSnapList:we.map(q.get),scrollSnaps:we,scrollTarget:pt,scrollTo:ee,slideLooper:Lxe(U,H,Qe,le,X,De,we,be,t),slideFocus:Ue,slidesHandler:Fxe(e,o,M),slidesInView:pe,slideIndexes:Ye,slideRegistry:Ve,slidesToScroll:fe,target:Fe,translate:Mq(U,e)};return Mt}function zxe(){let n={},e;function t(c){e=c}function r(c){return n[c]||[]}function i(c){return r(c).forEach(u=>u(e,c)),l}function s(c,u){return n[c]=r(c).concat([u]),l}function o(c,u){return n[c]=r(c).filter(h=>h!==u),l}function a(){n={}}const l={init:t,emit:i,off:o,on:s,clear:a};return l}const Hxe={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function Wxe(n){function e(s,o){return Tq(s,o||{})}function t(s){const o=s.breakpoints||{},a=Bx(o).filter(l=>n.matchMedia(l).matches).map(l=>o[l]).reduce((l,c)=>e(l,c),{});return e(s,a)}function r(s){return s.map(o=>Bx(o.breakpoints||{})).reduce((o,a)=>o.concat(a),[]).map(n.matchMedia)}return{mergeOptions:e,optionsAtMedia:t,optionsMediaQueries:r}}function Gxe(n){let e=[];function t(s,o){return e=o.filter(({options:a})=>n.optionsAtMedia(a).active!==!1),e.forEach(a=>a.init(s,n)),o.reduce((a,l)=>Object.assign(a,{[l.name]:l}),{})}function r(){e=e.filter(s=>s.destroy())}return{init:t,destroy:r}}function u2(n,e,t){const r=n.ownerDocument,i=r.defaultView,s=Wxe(i),o=Gxe(s),a=Ux(),l=zxe(),{mergeOptions:c,optionsAtMedia:u,optionsMediaQueries:h}=s,{on:f,off:p,emit:v}=l,_=U;let S=!1,x,E=c(Hxe,u2.globalOptions),b=c(E),M=[],k,B,P;function N(){const{container:Ye,slides:Pe}=b;B=(hN(Ye)?n.querySelector(Ye):Ye)||n.children[0];const Be=hN(Pe)?B.querySelectorAll(Pe):Pe;P=[].slice.call(Be||B.children)}function R(Ye){const Pe=Vxe(n,B,P,r,i,Ye,l);if(Ye.loop&&!Pe.slideLooper.canLoop()){const ne=Object.assign({},Ye,{loop:!1});return R(ne)}return Pe}function I(Ye,Pe){S||(E=c(E,Ye),b=u(E),M=Pe||M,N(),x=R(b),h([E,...M.map(({options:ne})=>ne)]).forEach(ne=>a.add(ne,"change",U)),b.active&&(x.translate.to(x.location.get()),x.animation.init(),x.slidesInView.init(),x.slideFocus.init(Me),x.eventHandler.init(Me),x.resizeHandler.init(Me),x.slidesHandler.init(Me),x.options.loop&&x.slideLooper.loop(),B.offsetParent&&P.length&&x.dragHandler.init(Me),k=o.init(Me,M)))}function U(Ye,Pe){const ne=fe();H(),I(c({startIndex:ne},Ye),Pe),l.emit("reInit")}function H(){x.dragHandler.destroy(),x.eventStore.clear(),x.translate.clear(),x.slideLooper.clear(),x.resizeHandler.destroy(),x.slidesHandler.destroy(),x.slidesInView.destroy(),x.animation.destroy(),o.destroy(),a.clear()}function W(){S||(S=!0,a.clear(),H(),l.emit("destroy"),l.clear())}function K(Ye,Pe,ne){!b.active||S||(x.scrollBody.useBaseFriction().useDuration(Pe===!0?0:b.duration),x.scrollTo.index(Ye,ne||0))}function te(Ye){const Pe=x.index.add(1).get();K(Pe,Ye,-1)}function se(Ye){const Pe=x.index.add(-1).get();K(Pe,Ye,1)}function le(){return x.index.add(1).get()!==fe()}function X(){return x.index.add(-1).get()!==fe()}function ce(){return x.scrollSnapList}function oe(){return x.scrollProgress.get(x.offsetLocation.get())}function fe(){return x.index.get()}function De(){return x.indexPrevious.get()}function We(){return x.slidesInView.get()}function Qe(){return x.slidesInView.get(!1)}function ve(){return k}function Ie(){return x}function we(){return n}function tt(){return B}function Ke(){return P}const Me={canScrollNext:le,canScrollPrev:X,containerNode:tt,internalEngine:Ie,destroy:W,off:p,on:f,emit:v,plugins:ve,previousScrollSnap:De,reInit:_,rootNode:we,scrollNext:te,scrollPrev:se,scrollProgress:oe,scrollSnapList:ce,scrollTo:K,selectedScrollSnap:fe,slideNodes:Ke,slidesInView:We,slidesNotInView:Qe};return I(e,t),setTimeout(()=>l.emit("init"),0),Me}u2.globalOptions=void 0;function lO(n={},e=[]){const t=O.useRef(n),r=O.useRef(e),[i,s]=O.useState(),[o,a]=O.useState(),l=O.useCallback(()=>{i&&i.reInit(t.current,r.current)},[i]);return O.useEffect(()=>{iO(t.current,n)||(t.current=n,l())},[n,l]),O.useEffect(()=>{pxe(r.current,e)||(r.current=e,l())},[e,l]),O.useEffect(()=>{if(fxe()&&o){u2.globalOptions=lO.globalOptions;const c=u2(o,t.current,r.current);return s(c),()=>c.destroy()}else s(void 0)},[o,s]),[a,i]}lO.globalOptions=void 0;const Iq=O.createContext(null);function xT(){const n=O.useContext(Iq);if(!n)throw new Error("useCarousel must be used within a <Carousel />");return n}const Pq=O.forwardRef(({orientation:n="horizontal",opts:e,setApi:t,plugins:r,className:i,children:s,...o},a)=>{const[l,c]=lO({...e,axis:n==="horizontal"?"x":"y"},r),[u,h]=O.useState(!1),[f,p]=O.useState(!1),v=O.useCallback(E=>{E&&(h(E.canScrollPrev()),p(E.canScrollNext()))},[]),_=O.useCallback(()=>{c==null||c.scrollPrev()},[c]),S=O.useCallback(()=>{c==null||c.scrollNext()},[c]),x=O.useCallback(E=>{E.key==="ArrowLeft"?(E.preventDefault(),_()):E.key==="ArrowRight"&&(E.preventDefault(),S())},[_,S]);return O.useEffect(()=>{!c||!t||t(c)},[c,t]),O.useEffect(()=>{if(c)return v(c),c.on("reInit",v),c.on("select",v),()=>{c==null||c.off("select",v)}},[c,v]),m.jsx(Iq.Provider,{value:{carouselRef:l,api:c,opts:e,orientation:n||((e==null?void 0:e.axis)==="y"?"vertical":"horizontal"),scrollPrev:_,scrollNext:S,canScrollPrev:u,canScrollNext:f},children:m.jsx("div",{ref:a,onKeyDownCapture:x,className:Jt("relative",i),role:"region","aria-roledescription":"carousel",...o,children:s})})});Pq.displayName="Carousel";const Rq=O.forwardRef(({className:n,...e},t)=>{const{carouselRef:r,orientation:i}=xT();return m.jsx("div",{ref:r,className:"overflow-hidden",children:m.jsx("div",{ref:t,className:Jt("flex",i==="horizontal"?"-ml-4":"-mt-4 flex-col",n),...e})})});Rq.displayName="CarouselContent";const Nq=O.forwardRef(({className:n,...e},t)=>{const{orientation:r}=xT();return m.jsx("div",{ref:t,role:"group","aria-roledescription":"slide",className:Jt("min-w-0 shrink-0 grow-0 basis-full",r==="horizontal"?"pl-4":"pt-4",n),...e})});Nq.displayName="CarouselItem";const Dq=O.forwardRef(({className:n,variant:e="outline",size:t="icon",...r},i)=>{const{orientation:s,scrollPrev:o,canScrollPrev:a}=xT();return m.jsxs(zt,{ref:i,variant:e,size:t,className:Jt("absolute  h-8 w-8 rounded-full",s==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",n),disabled:!a,onClick:o,...r,children:[m.jsx(Dpe,{className:"h-4 w-4"}),m.jsx("span",{className:"sr-only",children:"Previous slide"})]})});Dq.displayName="CarouselPrevious";const kq=O.forwardRef(({className:n,variant:e="outline",size:t="icon",...r},i)=>{const{orientation:s,scrollNext:o,canScrollNext:a}=xT();return m.jsxs(zt,{ref:i,variant:e,size:t,className:Jt("absolute h-8 w-8 rounded-full",s==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",n),disabled:!a,onClick:o,...r,children:[m.jsx(P$,{className:"h-4 w-4"}),m.jsx("span",{className:"sr-only",children:"Next slide"})]})});kq.displayName="CarouselNext";const $xe={active:!0,breakpoints:{},delay:4e3,jump:!1,playOnInit:!0,stopOnFocusIn:!0,stopOnInteraction:!0,stopOnMouseEnter:!1,stopOnLastSnap:!1,rootNode:null};function Xxe(n,e){const t=n.scrollSnapList();return typeof e=="number"?t.map(()=>e):e(t,n)}function qxe(n,e){const t=n.rootNode();return e&&e(t)||t}function cO(n={}){let e,t,r,i,s=null,o=0,a=!1,l=!1,c=!1,u=!1;function h(K,te){t=K;const{mergeOptions:se,optionsAtMedia:le}=te,X=se($xe,cO.globalOptions),ce=se(X,n);if(e=le(ce),t.scrollSnapList().length<=1)return;u=e.jump,r=!1,i=Xxe(t,e.delay);const{eventStore:oe,ownerDocument:fe}=t.internalEngine(),De=!!t.internalEngine().options.watchDrag,We=qxe(t,e.rootNode);oe.add(fe,"visibilitychange",x),De&&t.on("pointerDown",b),De&&!e.stopOnInteraction&&t.on("pointerUp",M),e.stopOnMouseEnter&&oe.add(We,"mouseenter",k),e.stopOnMouseEnter&&!e.stopOnInteraction&&oe.add(We,"mouseleave",B),e.stopOnFocusIn&&t.on("slideFocusStart",S),e.stopOnFocusIn&&!e.stopOnInteraction&&oe.add(t.containerNode(),"focusout",_),e.playOnInit&&_()}function f(){t.off("pointerDown",b).off("pointerUp",M).off("slideFocusStart",S),S(),r=!0,a=!1}function p(){const{ownerWindow:K}=t.internalEngine();K.clearTimeout(o),o=K.setTimeout(U,i[t.selectedScrollSnap()]),s=new Date().getTime(),t.emit("autoplay:timerset")}function v(){const{ownerWindow:K}=t.internalEngine();K.clearTimeout(o),o=0,s=null,t.emit("autoplay:timerstopped")}function _(){if(!r){if(E()){c=!0;return}a||t.emit("autoplay:play"),p(),a=!0}}function S(){r||(a&&t.emit("autoplay:stop"),v(),a=!1)}function x(){if(E())return c=a,S();c&&_()}function E(){const{ownerDocument:K}=t.internalEngine();return K.visibilityState==="hidden"}function b(){l||S()}function M(){l||_()}function k(){l=!0,S()}function B(){l=!1,_()}function P(K){typeof K<"u"&&(u=K),_()}function N(){a&&S()}function R(){a&&_()}function I(){return a}function U(){const{index:K}=t.internalEngine(),te=K.clone().add(1).get(),se=t.scrollSnapList().length-1,le=e.stopOnLastSnap&&te===se;if(t.canScrollNext()?t.scrollNext(u):t.scrollTo(0,u),t.emit("autoplay:select"),le)return S();_()}function H(){if(!s)return null;const K=i[t.selectedScrollSnap()],te=new Date().getTime()-s;return K-te}return{name:"autoplay",options:n,init:h,destroy:f,play:P,stop:N,reset:R,isPlaying:I,timeUntilNext:H}}cO.globalOptions=void 0;function Yxe(){const n=new Date,e=n.getMonth()>0||n.getMonth()===0&&n.getDate()>26?n.getFullYear()+1:n.getFullYear();return new Date(e,0,26,0,0,0,0)}function Kxe(){const e=new Date;return(e.getMonth()>0||e.getMonth()===0&&e.getDate()>26?e.getFullYear()+1:e.getFullYear())-2017}function Zxe({open:n,onClose:e}){const[t,r]=O.useState(null);return O.useEffect(()=>{function i(){const o=new Date,l=Yxe().getTime()-o.getTime();if(l<=0)return{days:0,hours:0,minutes:0,seconds:0};const c=Math.floor(l/(1e3*60*60*24)),u=Math.floor(l/(1e3*60*60)%24),h=Math.floor(l/(1e3*60)%60),f=Math.floor(l/1e3%60);return{days:c,hours:u,minutes:h,seconds:f}}r(i());const s=setInterval(()=>{r(i())},1e3);return()=>clearInterval(s)},[]),n?m.jsxs(Nf,{open:n,onOpenChange:e,children:[m.jsxs(Rh,{className:"max-w-md w-full p-0 overflow-visible bg-gradient-to-br from-yellow-50 to-pink-100 border-4 border-yellow-300 relative shadow-2xl rounded-2xl animate-fadeIn",children:[m.jsx("div",{className:"pointer-events-none absolute inset-0 z-10",children:[...Array(30)].map((i,s)=>m.jsx("span",{className:"absolute rounded-full opacity-80 animate-confetti",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,width:`${8+Math.random()*12}px`,height:`${8+Math.random()*12}px`,background:`hsl(${Math.random()*360},90%,70%)`,animationDelay:`${Math.random()*2}s`}},s))}),m.jsxs("div",{className:"relative z-20 flex flex-col items-center justify-center py-10 px-6",children:[m.jsx("div",{className:"mb-4",children:m.jsxs("svg",{className:"mx-auto h-16 w-16 text-yellow-400 drop-shadow-lg animate-bounce",fill:"none",viewBox:"0 0 48 48",stroke:"currentColor",children:[m.jsx("circle",{cx:"24",cy:"24",r:"22",strokeWidth:"4",className:"stroke-yellow-300 fill-yellow-100"}),m.jsx("path",{d:"M16 32c2-2 6-2 8 0m8-8c-2 2-6 2-8 0",strokeWidth:"2",className:"stroke-pink-400"}),m.jsx("circle",{cx:"18",cy:"20",r:"2",className:"fill-pink-400"}),m.jsx("circle",{cx:"30",cy:"20",r:"2",className:"fill-pink-400"})]})}),m.jsxs("h2",{className:"text-2xl font-bold text-yellow-700 mb-2 drop-shadow",children:["Perayaan Ulang Tahun Mahapala Narotama ke-",Kxe()]}),m.jsxs("p",{className:"text-lg text-gray-700 mb-4",children:["Menuju hari ulang tahun organisasi pada ",m.jsx("b",{children:"26 Januari"}),"!"]}),t?m.jsxs("div",{className:"mb-6 text-3xl font-mono flex justify-center gap-3 text-pink-600",children:[m.jsxs("span",{children:[t.days," ",m.jsx("span",{className:"text-xs font-normal text-gray-500",children:"hari"})]}),m.jsx("span",{children:":"}),m.jsxs("span",{children:[String(t.hours).padStart(2,"0"),m.jsx("span",{className:"text-xs font-normal text-gray-500",children:"j"})]}),m.jsx("span",{children:":"}),m.jsxs("span",{children:[String(t.minutes).padStart(2,"0"),m.jsx("span",{className:"text-xs font-normal text-gray-500",children:"m"})]}),m.jsx("span",{children:":"}),m.jsxs("span",{children:[String(t.seconds).padStart(2,"0"),m.jsx("span",{className:"text-xs font-normal text-gray-500",children:"d"})]})]}):m.jsx("p",{className:"mb-6",children:"Menghitung..."}),m.jsx(zt,{onClick:e,className:"mt-2 bg-pink-500 hover:bg-pink-600 text-white font-bold shadow-lg rounded-full px-6 py-2",children:"Tutup"})]})]}),m.jsx("style",{children:`
        @keyframes confetti {
          0% { transform: translateY(-40px) scale(1) rotate(0deg); opacity: 1; }
          100% { transform: translateY(400px) scale(0.7) rotate(360deg); opacity: 0.7; }
        }
        .animate-confetti {
          animation: confetti 2.5s linear infinite;
        }
        .animate-fadeIn {
          animation: fadeIn 0.7s cubic-bezier(.4,0,.2,1);
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]}):null}function Qxe({text:n,speed:e=50}){const[t,r]=O.useState(""),i=O.useRef(null);return O.useEffect(()=>{r("");let s=0;return i.current&&clearInterval(i.current),i.current=setInterval(()=>{r(o=>s<n.length?o+n.charAt(s++):(i.current&&clearInterval(i.current),o))},e),()=>{i.current&&clearInterval(i.current)}},[n,e]),m.jsx("span",{children:t})}const Oq=O.createContext({});function Jxe(n){const e=O.useRef(null);return e.current===null&&(e.current=n()),e.current}const uO=O.createContext(null),Lq=O.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function e_e(n=!0){const e=O.useContext(uO);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,s=O.useId();O.useEffect(()=>{n&&i(s)},[n]);const o=O.useCallback(()=>n&&r&&r(s),[s,r,n]);return!t&&r?[!1,o]:[!0]}const hO=typeof window<"u",t_e=hO?O.useLayoutEffect:O.useEffect,Xa=n=>n;let Fq=Xa;function dO(n){let e;return()=>(e===void 0&&(e=n()),e)}const xv=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},ch=n=>n*1e3,uh=n=>n/1e3,n_e={useManualTiming:!1};function r_e(n){let e=new Set,t=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),n()),c(o)}const l={schedule:(c,u=!1,h=!1)=>{const p=h&&r?e:t;return u&&s.add(c),p.has(c)||p.add(c),c},cancel:c=>{t.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,t]=[t,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const yS=["read","resolveKeyframes","update","preRender","render","postRender"],i_e=40;function Bq(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=yS.reduce((x,E)=>(x[E]=r_e(s),x),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:h,postRender:f}=o,p=()=>{const x=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(x-i.timestamp,i_e),1),i.timestamp=x,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),h.process(i),f.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(p))},v=()=>{t=!0,r=!0,i.isProcessing||n(p)};return{schedule:yS.reduce((x,E)=>{const b=o[E];return x[E]=(M,k=!1,B=!1)=>(t||v(),b.schedule(M,k,B)),x},{}),cancel:x=>{for(let E=0;E<yS.length;E++)o[yS[E]].cancel(x)},state:i,steps:o}}const{schedule:ti,cancel:Ef,state:Ls,steps:qM}=Bq(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xa,!0),Uq=O.createContext({strict:!1}),Z5={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_v={};for(const n in Z5)_v[n]={isEnabled:e=>Z5[n].some(t=>!!e[t])};function s_e(n){for(const e in n)_v[e]={..._v[e],...n[e]}}const o_e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function h2(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||o_e.has(n)}let jq=n=>!h2(n);function a_e(n){n&&(jq=e=>e.startsWith("on")?!h2(e):n(e))}try{a_e(require("@emotion/is-prop-valid").default)}catch{}function l_e(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(jq(i)||t===!0&&h2(i)||!e&&!h2(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function c_e(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,i)=>i==="create"?n:(e.has(i)||e.set(i,n(i)),e.get(i))})}const _T=O.createContext({});function jx(n){return typeof n=="string"||Array.isArray(n)}function wT(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const fO=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pO=["initial",...fO];function ST(n){return wT(n.animate)||pO.some(e=>jx(n[e]))}function Vq(n){return!!(ST(n)||n.variants)}function u_e(n,e){if(ST(n)){const{initial:t,animate:r}=n;return{initial:t===!1||jx(t)?t:void 0,animate:jx(r)?r:void 0}}return n.inherit!==!1?e:{}}function h_e(n){const{initial:e,animate:t}=u_e(n,O.useContext(_T));return O.useMemo(()=>({initial:e,animate:t}),[Q5(e),Q5(t)])}function Q5(n){return Array.isArray(n)?n.join(" "):n}const d_e=Symbol.for("motionComponentSymbol");function r0(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function f_e(n,e,t){return O.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):r0(t)&&(t.current=r))},[e])}const mO=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),p_e="framerAppearId",zq="data-"+mO(p_e),{schedule:gO}=Bq(queueMicrotask,!1),Hq=O.createContext({});function m_e(n,e,t,r,i){var s,o;const{visualElement:a}=O.useContext(_T),l=O.useContext(Uq),c=O.useContext(uO),u=O.useContext(Lq).reducedMotion,h=O.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,p=O.useContext(Hq);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&g_e(h.current,t,i,p);const v=O.useRef(!1);O.useInsertionEffect(()=>{f&&v.current&&f.update(t,c)});const _=t[zq],S=O.useRef(!!_&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,_))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,_)));return t_e(()=>{f&&(v.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),gO.render(f.render),S.current&&f.animationState&&f.animationState.animateChanges())}),O.useEffect(()=>{f&&(!S.current&&f.animationState&&f.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)===null||x===void 0||x.call(window,_)}),S.current=!1))}),f}function g_e(n,e,t,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:Wq(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&r0(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function Wq(n){if(n)return n.options.allowProjection!==!1?n.projection:Wq(n.parent)}function v_e({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){var s,o;n&&s_e(n);function a(c,u){let h;const f={...O.useContext(Lq),...c,layoutId:y_e(c)},{isStatic:p}=f,v=h_e(c),_=r(c,p);if(!p&&hO){x_e();const S=__e(f);h=S.MeasureLayout,v.visualElement=m_e(i,_,f,e,S.ProjectionNode)}return m.jsxs(_T.Provider,{value:v,children:[h&&v.visualElement?m.jsx(h,{visualElement:v.visualElement,...f}):null,t(i,c,f_e(_,v.visualElement,u),_,p,v.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=O.forwardRef(a);return l[d_e]=i,l}function y_e({layoutId:n}){const e=O.useContext(Oq).id;return e&&n!==void 0?e+"-"+n:n}function x_e(n,e){O.useContext(Uq).strict}function __e(n){const{drag:e,layout:t}=_v;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const w_e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function vO(n){return typeof n!="string"||n.includes("-")?!1:!!(w_e.indexOf(n)>-1||/[A-Z]/u.test(n))}function J5(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function yO(n,e,t,r){if(typeof e=="function"){const[i,s]=J5(r);e=e(t!==void 0?t:n.custom,i,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,s]=J5(r);e=e(t!==void 0?t:n.custom,i,s)}return e}const fN=n=>Array.isArray(n),S_e=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),E_e=n=>fN(n)?n[n.length-1]||0:n,xo=n=>!!(n&&n.getVelocity);function QE(n){const e=xo(n)?n.get():n;return S_e(e)?e.toValue():e}function b_e({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,i,s){const o={latestValues:A_e(r,i,s,n),renderState:e()};return t&&(o.onMount=a=>t({props:r,current:a,...o}),o.onUpdate=a=>t(a)),o}const Gq=n=>(e,t)=>{const r=O.useContext(_T),i=O.useContext(uO),s=()=>b_e(n,e,r,i);return t?s():Jxe(s)};function A_e(n,e,t,r){const i={},s=r(n,{});for(const f in s)i[f]=QE(s[f]);let{initial:o,animate:a}=n;const l=ST(n),c=Vq(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=t?t.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!wT(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const v=yO(n,f[p]);if(v){const{transitionEnd:_,transition:S,...x}=v;for(const E in x){let b=x[E];if(Array.isArray(b)){const M=u?b.length-1:0;b=b[M]}b!==null&&(i[E]=b)}for(const E in _)i[E]=_[E]}}}return i}const Zv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Um=new Set(Zv),$q=n=>e=>typeof e=="string"&&e.startsWith(n),Xq=$q("--"),T_e=$q("var(--"),xO=n=>T_e(n)?C_e.test(n.split("/*")[0].trim()):!1,C_e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,qq=(n,e)=>e&&typeof n=="number"?e.transform(n):n,bh=(n,e,t)=>t>e?e:t<n?n:t,Qv={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Vx={...Qv,transform:n=>bh(0,1,n)},xS={...Qv,default:1},U_=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),wd=U_("deg"),fu=U_("%"),hn=U_("px"),M_e=U_("vh"),I_e=U_("vw"),eB={...fu,parse:n=>fu.parse(n)/100,transform:n=>fu.transform(n*100)},P_e={borderWidth:hn,borderTopWidth:hn,borderRightWidth:hn,borderBottomWidth:hn,borderLeftWidth:hn,borderRadius:hn,radius:hn,borderTopLeftRadius:hn,borderTopRightRadius:hn,borderBottomRightRadius:hn,borderBottomLeftRadius:hn,width:hn,maxWidth:hn,height:hn,maxHeight:hn,top:hn,right:hn,bottom:hn,left:hn,padding:hn,paddingTop:hn,paddingRight:hn,paddingBottom:hn,paddingLeft:hn,margin:hn,marginTop:hn,marginRight:hn,marginBottom:hn,marginLeft:hn,backgroundPositionX:hn,backgroundPositionY:hn},R_e={rotate:wd,rotateX:wd,rotateY:wd,rotateZ:wd,scale:xS,scaleX:xS,scaleY:xS,scaleZ:xS,skew:wd,skewX:wd,skewY:wd,distance:hn,translateX:hn,translateY:hn,translateZ:hn,x:hn,y:hn,z:hn,perspective:hn,transformPerspective:hn,opacity:Vx,originX:eB,originY:eB,originZ:hn},tB={...Qv,transform:Math.round},_O={...P_e,...R_e,zIndex:tB,size:hn,fillOpacity:Vx,strokeOpacity:Vx,numOctaves:tB},N_e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},D_e=Zv.length;function k_e(n,e,t){let r="",i=!0;for(let s=0;s<D_e;s++){const o=Zv[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const c=qq(a,_O[o]);if(!l){i=!1;const u=N_e[o]||o;r+=`${u}(${c}) `}t&&(e[o]=c)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function wO(n,e,t){const{style:r,vars:i,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(Um.has(l)){o=!0;continue}else if(Xq(l)){i[l]=c;continue}else{const u=qq(c,_O[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||t?r.transform=k_e(e,n.transform,t):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const O_e={offset:"stroke-dashoffset",array:"stroke-dasharray"},L_e={offset:"strokeDashoffset",array:"strokeDasharray"};function F_e(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?O_e:L_e;n[s.offset]=hn.transform(-r);const o=hn.transform(e),a=hn.transform(t);n[s.array]=`${o} ${a}`}function nB(n,e,t){return typeof n=="string"?n:hn.transform(e+t*n)}function B_e(n,e,t){const r=nB(e,n.x,n.width),i=nB(t,n.y,n.height);return`${r} ${i}`}function SO(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h){if(wO(n,c,h),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:f,style:p,dimensions:v}=n;f.transform&&(v&&(p.transform=f.transform),delete f.transform),v&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=B_e(v,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),t!==void 0&&(f.y=t),r!==void 0&&(f.scale=r),o!==void 0&&F_e(f,o,a,l,!1)}const EO=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Yq=()=>({...EO(),attrs:{}}),bO=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Kq(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const Zq=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Qq(n,e,t,r){Kq(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(Zq.has(i)?i:mO(i),e.attrs[i])}const d2={};function U_e(n){Object.assign(d2,n)}function Jq(n,{layout:e,layoutId:t}){return Um.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!d2[n]||n==="opacity")}function AO(n,e,t){var r;const{style:i}=n,s={};for(const o in i)(xo(i[o])||e.style&&xo(e.style[o])||Jq(o,n)||((r=t==null?void 0:t.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function eY(n,e,t){const r=AO(n,e,t);for(const i in n)if(xo(n[i])||xo(e[i])){const s=Zv.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}function j_e(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const rB=["x","y","width","height","cx","cy","r"],V_e={useVisualState:Gq({scrapeMotionValuesFromProps:eY,createRenderState:Yq,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:i})=>{if(!t)return;let s=!!n.drag;if(!s){for(const a in i)if(Um.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<rB.length;a++){const l=rB[a];n[l]!==e[l]&&(o=!0)}o&&ti.read(()=>{j_e(t,r),ti.render(()=>{SO(r,i,bO(t.tagName),n.transformTemplate),Qq(t,r)})})}})},z_e={useVisualState:Gq({scrapeMotionValuesFromProps:AO,createRenderState:EO})};function tY(n,e,t){for(const r in e)!xo(e[r])&&!Jq(r,t)&&(n[r]=e[r])}function H_e({transformTemplate:n},e){return O.useMemo(()=>{const t=EO();return wO(t,e,n),Object.assign({},t.vars,t.style)},[e])}function W_e(n,e){const t=n.style||{},r={};return tY(r,t,n),Object.assign(r,H_e(n,e)),r}function G_e(n,e){const t={},r=W_e(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}function $_e(n,e,t,r){const i=O.useMemo(()=>{const s=Yq();return SO(s,e,bO(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};tY(s,n.style,n),i.style={...s,...i.style}}return i}function X_e(n=!1){return(t,r,i,{latestValues:s},o)=>{const l=(vO(t)?$_e:G_e)(r,s,o,t),c=l_e(r,typeof t=="string",n),u=t!==O.Fragment?{...c,...l,ref:i}:{},{children:h}=r,f=O.useMemo(()=>xo(h)?h.get():h,[h]);return O.createElement(t,{...u,children:f})}}function q_e(n,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...vO(r)?V_e:z_e,preloadedFeatures:n,useRender:X_e(i),createVisualElement:e,Component:r};return v_e(o)}}function nY(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function ET(n,e,t){const r=n.getProps();return yO(r,e,t!==void 0?t:r.custom,n)}const Y_e=dO(()=>window.ScrollTimeline!==void 0);class K_e{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(i=>{if(Y_e()&&i.attachTimeline)return i.attachTimeline(e);if(typeof t=="function")return t(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Z_e extends K_e{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function TO(n,e){return n?n[e]||n.default||n:void 0}const pN=2e4;function rY(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<pN;)e+=t,r=n.next(e);return e>=pN?1/0:e}function CO(n){return typeof n=="function"}function iB(n,e){n.timeline=e,n.onfinish=null}const MO=n=>Array.isArray(n)&&typeof n[0]=="number",Q_e={linearEasing:void 0};function J_e(n,e){const t=dO(n);return()=>{var r;return(r=Q_e[e])!==null&&r!==void 0?r:t()}}const f2=J_e(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),iY=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)r+=n(xv(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function sY(n){return!!(typeof n=="function"&&f2()||!n||typeof n=="string"&&(n in mN||f2())||MO(n)||Array.isArray(n)&&n.every(sY))}const f1=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,mN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:f1([0,.65,.55,1]),circOut:f1([.55,0,1,.45]),backIn:f1([.31,.01,.66,-.59]),backOut:f1([.33,1.53,.69,.99])};function oY(n,e){if(n)return typeof n=="function"&&f2()?iY(n,e):MO(n)?f1(n):Array.isArray(n)?n.map(t=>oY(t,e)||mN.easeOut):mN[n]}const Xl={x:!1,y:!1};function aY(){return Xl.x||Xl.y}function ewe(n,e,t){var r;if(n instanceof Element)return[n];if(typeof n=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function lY(n,e){const t=ewe(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function sB(n){return e=>{e.pointerType==="touch"||aY()||n(e)}}function twe(n,e,t={}){const[r,i,s]=lY(n,t),o=sB(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=sB(h=>{c(h),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const cY=(n,e)=>e?n===e?!0:cY(n,e.parentElement):!1,IO=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,nwe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function rwe(n){return nwe.has(n.tagName)||n.tabIndex!==-1}const p1=new WeakSet;function oB(n){return e=>{e.key==="Enter"&&n(e)}}function YM(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const iwe=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=oB(()=>{if(p1.has(t))return;YM(t,"down");const i=oB(()=>{YM(t,"up")}),s=()=>YM(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function aB(n){return IO(n)&&!aY()}function swe(n,e,t={}){const[r,i,s]=lY(n,t),o=a=>{const l=a.currentTarget;if(!aB(a)||p1.has(l))return;p1.add(l);const c=e(a),u=(p,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),!(!aB(p)||!p1.has(l))&&(p1.delete(l),typeof c=="function"&&c(p,{success:v}))},h=p=>{u(p,t.useGlobalTarget||cY(l,p.target))},f=p=>{u(p,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{!rwe(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>iwe(c,i),i)}),s}function owe(n){return n==="x"||n==="y"?Xl[n]?null:(Xl[n]=!0,()=>{Xl[n]=!1}):Xl.x||Xl.y?null:(Xl.x=Xl.y=!0,()=>{Xl.x=Xl.y=!1})}const uY=new Set(["width","height","top","left","right","bottom",...Zv]);let JE;function awe(){JE=void 0}const pu={now:()=>(JE===void 0&&pu.set(Ls.isProcessing||n_e.useManualTiming?Ls.timestamp:performance.now()),JE),set:n=>{JE=n,queueMicrotask(awe)}};function PO(n,e){n.indexOf(e)===-1&&n.push(e)}function RO(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class NO{constructor(){this.subscriptions=[]}add(e){return PO(this.subscriptions,e),()=>RO(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function hY(n,e){return e?n*(1e3/e):0}const lB=30,lwe=n=>!isNaN(parseFloat(n));class cwe{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=pu.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=pu.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=lwe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new NO);const r=this.events[e].add(t);return e==="change"?()=>{r(),ti.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=pu.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>lB)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,lB);return hY(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function zx(n,e){return new cwe(n,e)}function uwe(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,zx(t))}function hwe(n,e){const t=ET(n,e);let{transitionEnd:r={},transition:i={},...s}=t||{};s={...s,...r};for(const o in s){const a=E_e(s[o]);uwe(n,o,a)}}function dwe(n){return!!(xo(n)&&n.add)}function gN(n,e){const t=n.getValue("willChange");if(dwe(t))return t.add(e)}function dY(n){return n.props[zq]}const fY=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,fwe=1e-7,pwe=12;function mwe(n,e,t,r,i){let s,o,a=0;do o=e+(t-e)/2,s=fY(o,r,i)-n,s>0?t=o:e=o;while(Math.abs(s)>fwe&&++a<pwe);return o}function j_(n,e,t,r){if(n===e&&t===r)return Xa;const i=s=>mwe(s,0,1,n,t);return s=>s===0||s===1?s:fY(i(s),e,r)}const pY=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,mY=n=>e=>1-n(1-e),gY=j_(.33,1.53,.69,.99),DO=mY(gY),vY=pY(DO),yY=n=>(n*=2)<1?.5*DO(n):.5*(2-Math.pow(2,-10*(n-1))),kO=n=>1-Math.sin(Math.acos(n)),xY=mY(kO),_Y=pY(kO),wY=n=>/^0[^.\s]+$/u.test(n);function gwe(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||wY(n):!0}const z1=n=>Math.round(n*1e5)/1e5,OO=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function vwe(n){return n==null}const ywe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,LO=(n,e)=>t=>!!(typeof t=="string"&&ywe.test(t)&&t.startsWith(n)||e&&!vwe(t)&&Object.prototype.hasOwnProperty.call(t,e)),SY=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(OO);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},xwe=n=>bh(0,255,n),KM={...Qv,transform:n=>Math.round(xwe(n))},Fp={test:LO("rgb","red"),parse:SY("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+KM.transform(n)+", "+KM.transform(e)+", "+KM.transform(t)+", "+z1(Vx.transform(r))+")"};function _we(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const vN={test:LO("#"),parse:_we,transform:Fp.transform},i0={test:LO("hsl","hue"),parse:SY("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+fu.transform(z1(e))+", "+fu.transform(z1(t))+", "+z1(Vx.transform(r))+")"},po={test:n=>Fp.test(n)||vN.test(n)||i0.test(n),parse:n=>Fp.test(n)?Fp.parse(n):i0.test(n)?i0.parse(n):vN.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Fp.transform(n):i0.transform(n)},wwe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Swe(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(OO))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(wwe))===null||t===void 0?void 0:t.length)||0)>0}const EY="number",bY="color",Ewe="var",bwe="var(",cB="${}",Awe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Hx(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(Awe,l=>(po.test(l)?(r.color.push(s),i.push(bY),t.push(po.parse(l))):l.startsWith(bwe)?(r.var.push(s),i.push(Ewe),t.push(l)):(r.number.push(s),i.push(EY),t.push(parseFloat(l))),++s,cB)).split(cB);return{values:t,split:a,indexes:r,types:i}}function AY(n){return Hx(n).values}function TY(n){const{split:e,types:t}=Hx(n),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=t[o];a===EY?s+=z1(i[o]):a===bY?s+=po.transform(i[o]):s+=i[o]}return s}}const Twe=n=>typeof n=="number"?0:n;function Cwe(n){const e=AY(n);return TY(n)(e.map(Twe))}const bf={test:Swe,parse:AY,createTransformer:TY,getAnimatableNone:Cwe},Mwe=new Set(["brightness","contrast","saturate","opacity"]);function Iwe(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(OO)||[];if(!r)return n;const i=t.replace(r,"");let s=Mwe.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const Pwe=/\b([a-z-]*)\(.*?\)/gu,yN={...bf,getAnimatableNone:n=>{const e=n.match(Pwe);return e?e.map(Iwe).join(" "):n}},Rwe={..._O,color:po,backgroundColor:po,outlineColor:po,fill:po,stroke:po,borderColor:po,borderTopColor:po,borderRightColor:po,borderBottomColor:po,borderLeftColor:po,filter:yN,WebkitFilter:yN},FO=n=>Rwe[n];function CY(n,e){let t=FO(n);return t!==yN&&(t=bf),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Nwe=new Set(["auto","none","0"]);function Dwe(n,e,t){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!Nwe.has(s)&&Hx(s).values.length&&(i=n[r]),r++}if(i&&t)for(const s of e)n[s]=CY(t,i)}const uB=n=>n===Qv||n===hn,hB=(n,e)=>parseFloat(n.split(", ")[e]),dB=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return hB(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?hB(s[1],n):0}},kwe=new Set(["x","y","z"]),Owe=Zv.filter(n=>!kwe.has(n));function Lwe(n){const e=[];return Owe.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const wv={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:dB(4,13),y:dB(5,14)};wv.translateX=wv.x;wv.translateY=wv.y;const tm=new Set;let xN=!1,_N=!1;function MY(){if(_N){const n=Array.from(tm).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=Lwe(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}_N=!1,xN=!1,tm.forEach(n=>n.complete()),tm.clear()}function IY(){tm.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(_N=!0)})}function Fwe(){IY(),MY()}class BO{constructor(e,t,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(tm.add(this),xN||(xN=!0,ti.read(IY),ti.resolveKeyframes(MY))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const l=r.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),tm.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,tm.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const PY=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),Bwe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Uwe(n){const e=Bwe.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function RY(n,e,t=1){const[r,i]=Uwe(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return PY(o)?parseFloat(o):o}return xO(i)?RY(i,e,t+1):i}const NY=n=>e=>e.test(n),jwe={test:n=>n==="auto",parse:n=>n},DY=[Qv,hn,fu,wd,I_e,M_e,jwe],fB=n=>DY.find(NY(n));class kY extends BO{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),xO(c))){const u=RY(c,t.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!uY.has(r)||e.length!==2)return;const[i,s]=e,o=fB(i),a=fB(s);if(o!==a)if(uB(o)&&uB(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)gwe(e[i])&&r.push(i);r.length&&Dwe(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wv[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=wv[r](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const pB=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(bf.test(n)||n==="0")&&!n.startsWith("url("));function Vwe(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function zwe(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=pB(i,e),a=pB(s,e);return!o||!a?!1:Vwe(n)||(t==="spring"||CO(t))&&r}const Hwe=n=>n!==null;function bT(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(Hwe),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const Wwe=40;class OY{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=pu.now(),this.options={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Wwe?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Fwe(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=pu.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!zwe(e,r,i,s))if(o)this.options.duration=0;else{l&&l(bT(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,t);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...u},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const gi=(n,e,t)=>n+(e-n)*t;function ZM(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Gwe({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,o=0;if(!e)i=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;i=ZM(l,a,n+1/3),s=ZM(l,a,n),o=ZM(l,a,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function p2(n,e){return t=>t>0?e:n}const QM=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},$we=[vN,Fp,i0],Xwe=n=>$we.find(e=>e.test(n));function mB(n){const e=Xwe(n);if(!e)return!1;let t=e.parse(n);return e===i0&&(t=Gwe(t)),t}const gB=(n,e)=>{const t=mB(n),r=mB(e);if(!t||!r)return p2(n,e);const i={...t};return s=>(i.red=QM(t.red,r.red,s),i.green=QM(t.green,r.green,s),i.blue=QM(t.blue,r.blue,s),i.alpha=gi(t.alpha,r.alpha,s),Fp.transform(i))},qwe=(n,e)=>t=>e(n(t)),V_=(...n)=>n.reduce(qwe),wN=new Set(["none","hidden"]);function Ywe(n,e){return wN.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Kwe(n,e){return t=>gi(n,e,t)}function UO(n){return typeof n=="number"?Kwe:typeof n=="string"?xO(n)?p2:po.test(n)?gB:Jwe:Array.isArray(n)?LY:typeof n=="object"?po.test(n)?gB:Zwe:p2}function LY(n,e){const t=[...n],r=t.length,i=n.map((s,o)=>UO(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)t[o]=i[o](s);return t}}function Zwe(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=UO(n[i])(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}}function Qwe(n,e){var t;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][i[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;r[s]=l,i[o]++}return r}const Jwe=(n,e)=>{const t=bf.createTransformer(e),r=Hx(n),i=Hx(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?wN.has(n)&&!i.values.length||wN.has(e)&&!r.values.length?Ywe(n,e):V_(LY(Qwe(r,i),i.values),t):p2(n,e)};function FY(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?gi(n,e,t):UO(n)(n,e)}const eSe=5;function BY(n,e,t){const r=Math.max(e-eSe,0);return hY(t-n(r),e-r)}const Mi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},JM=.001;function tSe({duration:n=Mi.duration,bounce:e=Mi.bounce,velocity:t=Mi.velocity,mass:r=Mi.mass}){let i,s,o=1-e;o=bh(Mi.minDamping,Mi.maxDamping,o),n=bh(Mi.minDuration,Mi.maxDuration,uh(n)),o<1?(i=c=>{const u=c*o,h=u*n,f=u-t,p=SN(c,o),v=Math.exp(-h);return JM-f/p*v},s=c=>{const h=c*o*n,f=h*t+t,p=Math.pow(o,2)*Math.pow(c,2)*n,v=Math.exp(-h),_=SN(Math.pow(c,2),o);return(-i(c)+JM>0?-1:1)*((f-p)*v)/_}):(i=c=>{const u=Math.exp(-c*n),h=(c-t)*n+1;return-JM+u*h},s=c=>{const u=Math.exp(-c*n),h=(t-c)*(n*n);return u*h});const a=5/n,l=rSe(i,s,a);if(n=ch(n),isNaN(l))return{stiffness:Mi.stiffness,damping:Mi.damping,duration:n};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:n}}}const nSe=12;function rSe(n,e,t){let r=t;for(let i=1;i<nSe;i++)r=r-n(r)/e(r);return r}function SN(n,e){return n*Math.sqrt(1-e*e)}const iSe=["duration","bounce"],sSe=["stiffness","damping","mass"];function vB(n,e){return e.some(t=>n[t]!==void 0)}function oSe(n){let e={velocity:Mi.velocity,stiffness:Mi.stiffness,damping:Mi.damping,mass:Mi.mass,isResolvedFromDuration:!1,...n};if(!vB(n,sSe)&&vB(n,iSe))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,s=2*bh(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Mi.mass,stiffness:i,damping:s}}else{const t=tSe(n);e={...e,...t,mass:Mi.mass},e.isResolvedFromDuration=!0}return e}function UY(n=Mi.visualDuration,e=Mi.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:h,velocity:f,isResolvedFromDuration:p}=oSe({...t,velocity:-uh(t.velocity||0)}),v=f||0,_=c/(2*Math.sqrt(l*u)),S=o-s,x=uh(Math.sqrt(l/u)),E=Math.abs(S)<5;r||(r=E?Mi.restSpeed.granular:Mi.restSpeed.default),i||(i=E?Mi.restDelta.granular:Mi.restDelta.default);let b;if(_<1){const k=SN(x,_);b=B=>{const P=Math.exp(-_*x*B);return o-P*((v+_*x*S)/k*Math.sin(k*B)+S*Math.cos(k*B))}}else if(_===1)b=k=>o-Math.exp(-x*k)*(S+(v+x*S)*k);else{const k=x*Math.sqrt(_*_-1);b=B=>{const P=Math.exp(-_*x*B),N=Math.min(k*B,300);return o-P*((v+_*x*S)*Math.sinh(N)+k*S*Math.cosh(N))/k}}const M={calculatedDuration:p&&h||null,next:k=>{const B=b(k);if(p)a.done=k>=h;else{let P=0;_<1&&(P=k===0?ch(v):BY(b,k,B));const N=Math.abs(P)<=r,R=Math.abs(o-B)<=i;a.done=N&&R}return a.value=a.done?o:B,a},toString:()=>{const k=Math.min(rY(M),pN),B=iY(P=>M.next(k*P).value,k,30);return k+"ms "+B}};return M}function yB({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=n[0],f={done:!1,value:h},p=N=>a!==void 0&&N<a||l!==void 0&&N>l,v=N=>a===void 0?l:l===void 0||Math.abs(a-N)<Math.abs(l-N)?a:l;let _=t*e;const S=h+_,x=o===void 0?S:o(S);x!==S&&(_=x-h);const E=N=>-_*Math.exp(-N/r),b=N=>x+E(N),M=N=>{const R=E(N),I=b(N);f.done=Math.abs(R)<=c,f.value=f.done?x:I};let k,B;const P=N=>{p(f.value)&&(k=N,B=UY({keyframes:[f.value,v(f.value)],velocity:BY(b,N,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return P(0),{calculatedDuration:null,next:N=>{let R=!1;return!B&&k===void 0&&(R=!0,M(N),P(N)),k!==void 0&&N>=k?B.next(N-k):(!R&&M(N),f)}}}const aSe=j_(.42,0,1,1),lSe=j_(0,0,.58,1),jY=j_(.42,0,.58,1),cSe=n=>Array.isArray(n)&&typeof n[0]!="number",uSe={linear:Xa,easeIn:aSe,easeInOut:jY,easeOut:lSe,circIn:kO,circInOut:_Y,circOut:xY,backIn:DO,backInOut:vY,backOut:gY,anticipate:yY},xB=n=>{if(MO(n)){Fq(n.length===4);const[e,t,r,i]=n;return j_(e,t,r,i)}else if(typeof n=="string")return uSe[n];return n};function hSe(n,e,t){const r=[],i=t||FY,s=n.length-1;for(let o=0;o<s;o++){let a=i(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Xa:e;a=V_(l,a)}r.push(a)}return r}function dSe(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(Fq(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=hSe(e,r,i),l=a.length,c=u=>{if(o&&u<n[0])return e[0];let h=0;if(l>1)for(;h<n.length-2&&!(u<n[h+1]);h++);const f=xv(n[h],n[h+1],u);return a[h](f)};return t?u=>c(bh(n[0],n[s-1],u)):c}function fSe(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=xv(0,e,r);n.push(gi(t,1,i))}}function pSe(n){const e=[0];return fSe(e,n.length-1),e}function mSe(n,e){return n.map(t=>t*e)}function gSe(n,e){return n.map(()=>e||jY).splice(0,n.length-1)}function m2({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=cSe(r)?r.map(xB):xB(r),s={done:!1,value:e[0]},o=mSe(t&&t.length===e.length?t:pSe(e),n),a=dSe(o,e,{ease:Array.isArray(i)?i:gSe(e,i)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const vSe=n=>{const e=({timestamp:t})=>n(t);return{start:()=>ti.update(e,!0),stop:()=>Ef(e),now:()=>Ls.isProcessing?Ls.timestamp:pu.now()}},ySe={decay:yB,inertia:yB,tween:m2,keyframes:m2,spring:UY},xSe=n=>n/100;class jO extends OY{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||BO,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,t,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=CO(t)?t:ySe[t]||m2;let l,c;a!==m2&&typeof e[0]!="number"&&(l=V_(xSe,FY(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=rY(u));const{calculatedDuration:h}=u,f=h+i,p=f*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:f,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:N}=this.options;return{done:!0,value:N[N.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:h}=r;if(this.startTime===null)return s.next(0);const{delay:f,repeat:p,repeatType:v,repeatDelay:_,onUpdate:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const x=this.currentTime-f*(this.speed>=0?1:-1),E=this.speed>=0?x<0:x>u;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let b=this.currentTime,M=s;if(p){const N=Math.min(this.currentTime,u)/h;let R=Math.floor(N),I=N%1;!I&&N>=1&&(I=1),I===1&&R--,R=Math.min(R,p+1),!!(R%2)&&(v==="reverse"?(I=1-I,_&&(I-=_/h)):v==="mirror"&&(M=o)),b=bh(0,1,I)*h}const k=E?{done:!1,value:l[0]}:M.next(b);a&&(k.value=a(k.value));let{done:B}=k;!E&&c!==null&&(B=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&B);return P&&i!==void 0&&(k.value=bT(l,this.options,i)),S&&S(k.value),P&&this.finish(),k}get duration(){const{resolved:e}=this;return e?uh(e.calculatedDuration):0}get time(){return uh(this.currentTime)}set time(e){e=ch(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=uh(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=vSe,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const _Se=new Set(["opacity","clipPath","filter","transform"]);function wSe(n,e,t,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:t};l&&(c.offset=l);const u=oY(a,i);return Array.isArray(u)&&(c.easing=u),n.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const SSe=dO(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),g2=10,ESe=2e4;function bSe(n){return CO(n.type)||n.type==="spring"||!sY(n.ease)}function ASe(n,e){const t=new jO({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const i=[];let s=0;for(;!r.done&&s<ESe;)r=t.sample(s),i.push(r.value),s+=g2;return{times:void 0,keyframes:i,duration:s-g2,ease:"linear"}}const VY={anticipate:yY,backInOut:vY,circInOut:_Y};function TSe(n){return n in VY}class _B extends OY{constructor(e){super(e);const{name:t,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new kY(s,(o,a)=>this.onKeyframesResolved(o,a),t,r,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&f2()&&TSe(s)&&(s=VY[s]),bSe(this.options)){const{onComplete:h,onUpdate:f,motionValue:p,element:v,..._}=this.options,S=ASe(e,_);e=S.keyframes,e.length===1&&(e[1]=e[0]),r=S.duration,i=S.times,s=S.ease,o="keyframes"}const u=wSe(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(iB(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:h}=this.options;a.set(bT(e,this.options,t)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return uh(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return uh(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=ch(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Xa;const{animation:r}=t;iB(r,e)}return Xa}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:h,element:f,...p}=this.options,v=new jO({...p,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),_=ch(this.time);c.setWithVelocity(v.sample(_-g2).value,v.sample(_).value,g2)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return SSe()&&r&&_Se.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const CSe={type:"spring",stiffness:500,damping:25,restSpeed:10},MSe=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),ISe={type:"keyframes",duration:.8},PSe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},RSe=(n,{keyframes:e})=>e.length>2?ISe:Um.has(n)?n.startsWith("scale")?MSe(e[1]):CSe:PSe;function NSe({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const VO=(n,e,t,r={},i,s)=>o=>{const a=TO(r,n)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-ch(l);let u={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:i};NSe(a)||(u={...u,...RSe(n,u)}),u.duration&&(u.duration=ch(u.duration)),u.repeatDelay&&(u.repeatDelay=ch(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!s&&e.get()!==void 0){const f=bT(u.keyframes,a);if(f!==void 0)return ti.update(()=>{u.onUpdate(f),u.onComplete()}),new Z_e([])}return!s&&_B.supports(u)?new _B(u):new jO(u)};function DSe({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function zY(n,e,{delay:t=0,transitionOverride:r,type:i}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=i&&n.animationState&&n.animationState.getState()[i];for(const h in l){const f=n.getValue(h,(s=n.latestValues[h])!==null&&s!==void 0?s:null),p=l[h];if(p===void 0||u&&DSe(u,h))continue;const v={delay:t,...TO(o||{},h)};let _=!1;if(window.MotionHandoffAnimation){const x=dY(n);if(x){const E=window.MotionHandoffAnimation(x,h,ti);E!==null&&(v.startTime=E,_=!0)}}gN(n,h),f.start(VO(h,f,p,n.shouldReduceMotion&&uY.has(h)?{type:!1}:v,n,_));const S=f.animation;S&&c.push(S)}return a&&Promise.all(c).then(()=>{ti.update(()=>{a&&hwe(n,a)})}),c}function EN(n,e,t={}){var r;const i=ET(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const o=i?()=>Promise.all(zY(n,i,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=s;return kSe(n,e,u+c,h,f,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(t.delay)])}function kSe(n,e,t=0,r=0,i=1,s){const o=[],a=(n.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(n.variantChildren).sort(OSe).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(EN(c,e,{...s,delay:t+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function OSe(n,e){return n.sortNodePosition(e)}function LSe(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>EN(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=EN(n,e,t);else{const i=typeof e=="function"?ET(n,e,t.custom):e;r=Promise.all(zY(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const FSe=pO.length;function HY(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?HY(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<FSe;t++){const r=pO[t],i=n.props[r];(jx(i)||i===!1)&&(e[r]=i)}return e}const BSe=[...fO].reverse(),USe=fO.length;function jSe(n){return e=>Promise.all(e.map(({animation:t,options:r})=>LSe(n,t,r)))}function VSe(n){let e=jSe(n),t=wB(),r=!0;const i=l=>(c,u)=>{var h;const f=ET(n,u,l==="exit"?(h=n.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:p,transitionEnd:v,..._}=f;c={...c,..._,...v}}return c};function s(l){e=l(n)}function o(l){const{props:c}=n,u=HY(n.parent)||{},h=[],f=new Set;let p={},v=1/0;for(let S=0;S<USe;S++){const x=BSe[S],E=t[x],b=c[x]!==void 0?c[x]:u[x],M=jx(b),k=x===l?E.isActive:null;k===!1&&(v=S);let B=b===u[x]&&b!==c[x]&&M;if(B&&r&&n.manuallyAnimateOnMount&&(B=!1),E.protectedKeys={...p},!E.isActive&&k===null||!b&&!E.prevProp||wT(b)||typeof b=="boolean")continue;const P=zSe(E.prevProp,b);let N=P||x===l&&E.isActive&&!B&&M||S>v&&M,R=!1;const I=Array.isArray(b)?b:[b];let U=I.reduce(i(x),{});k===!1&&(U={});const{prevResolvedValues:H={}}=E,W={...H,...U},K=le=>{N=!0,f.has(le)&&(R=!0,f.delete(le)),E.needsAnimating[le]=!0;const X=n.getValue(le);X&&(X.liveStyle=!1)};for(const le in W){const X=U[le],ce=H[le];if(p.hasOwnProperty(le))continue;let oe=!1;fN(X)&&fN(ce)?oe=!nY(X,ce):oe=X!==ce,oe?X!=null?K(le):f.add(le):X!==void 0&&f.has(le)?K(le):E.protectedKeys[le]=!0}E.prevProp=b,E.prevResolvedValues=U,E.isActive&&(p={...p,...U}),r&&n.blockInitialAnimation&&(N=!1),N&&(!(B&&P)||R)&&h.push(...I.map(le=>({animation:le,options:{type:x}})))}if(f.size){const S={};f.forEach(x=>{const E=n.getBaseTarget(x),b=n.getValue(x);b&&(b.liveStyle=!0),S[x]=E??null}),h.push({animation:S})}let _=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(h):Promise.resolve()}function a(l,c){var u;if(t[l].isActive===c)return Promise.resolve();(u=n.variantChildren)===null||u===void 0||u.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),t[l].isActive=c;const h=o(l);for(const f in t)t[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=wB(),r=!0}}}function zSe(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!nY(e,n):!1}function tp(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function wB(){return{animate:tp(!0),whileInView:tp(),whileHover:tp(),whileTap:tp(),whileDrag:tp(),whileFocus:tp(),exit:tp()}}class Df{constructor(e){this.isMounted=!1,this.node=e}update(){}}class HSe extends Df{constructor(e){super(e),e.animationState||(e.animationState=VSe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();wT(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let WSe=0;class GSe extends Df{constructor(){super(...arguments),this.id=WSe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const $Se={animation:{Feature:HSe},exit:{Feature:GSe}};function Wx(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function z_(n){return{point:{x:n.pageX,y:n.pageY}}}const XSe=n=>e=>IO(e)&&n(e,z_(e));function H1(n,e,t,r){return Wx(n,e,XSe(t),r)}const SB=(n,e)=>Math.abs(n-e);function qSe(n,e){const t=SB(n.x,e.x),r=SB(n.y,e.y);return Math.sqrt(t**2+r**2)}class WY{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=tI(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=qSe(h.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:v}=h,{timestamp:_}=Ls;this.history.push({...v,timestamp:_});const{onStart:S,onMove:x}=this.handlers;f||(S&&S(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=eI(f,this.transformPagePoint),ti.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:p,onSessionEnd:v,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=tI(h.type==="pointercancel"?this.lastMoveEventInfo:eI(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,S),v&&v(h,S)},!IO(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const o=z_(e),a=eI(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Ls;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=t;u&&u(e,tI(a,this.history)),this.removeListeners=V_(H1(this.contextWindow,"pointermove",this.handlePointerMove),H1(this.contextWindow,"pointerup",this.handlePointerUp),H1(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ef(this.updatePoint)}}function eI(n,e){return e?{point:e(n.point)}:n}function EB(n,e){return{x:n.x-e.x,y:n.y-e.y}}function tI({point:n},e){return{point:n,delta:EB(n,GY(e)),offset:EB(n,YSe(e)),velocity:KSe(e,.1)}}function YSe(n){return n[0]}function GY(n){return n[n.length-1]}function KSe(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=GY(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>ch(e)));)t--;if(!r)return{x:0,y:0};const s=uh(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const $Y=1e-4,ZSe=1-$Y,QSe=1+$Y,XY=.01,JSe=0-XY,eEe=0+XY;function Za(n){return n.max-n.min}function tEe(n,e,t){return Math.abs(n-e)<=t}function bB(n,e,t,r=.5){n.origin=r,n.originPoint=gi(e.min,e.max,n.origin),n.scale=Za(t)/Za(e),n.translate=gi(t.min,t.max,n.origin)-n.originPoint,(n.scale>=ZSe&&n.scale<=QSe||isNaN(n.scale))&&(n.scale=1),(n.translate>=JSe&&n.translate<=eEe||isNaN(n.translate))&&(n.translate=0)}function W1(n,e,t,r){bB(n.x,e.x,t.x,r?r.originX:void 0),bB(n.y,e.y,t.y,r?r.originY:void 0)}function AB(n,e,t){n.min=t.min+e.min,n.max=n.min+Za(e)}function nEe(n,e,t){AB(n.x,e.x,t.x),AB(n.y,e.y,t.y)}function TB(n,e,t){n.min=e.min-t.min,n.max=n.min+Za(e)}function G1(n,e,t){TB(n.x,e.x,t.x),TB(n.y,e.y,t.y)}function rEe(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?gi(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?gi(t,n,r.max):Math.min(n,t)),n}function CB(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function iEe(n,{top:e,left:t,bottom:r,right:i}){return{x:CB(n.x,t,i),y:CB(n.y,e,r)}}function MB(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function sEe(n,e){return{x:MB(n.x,e.x),y:MB(n.y,e.y)}}function oEe(n,e){let t=.5;const r=Za(n),i=Za(e);return i>r?t=xv(e.min,e.max-r,n.min):r>i&&(t=xv(n.min,n.max-i,e.min)),bh(0,1,t)}function aEe(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const bN=.35;function lEe(n=bN){return n===!1?n=0:n===!0&&(n=bN),{x:IB(n,"left","right"),y:IB(n,"top","bottom")}}function IB(n,e,t){return{min:PB(n,e),max:PB(n,t)}}function PB(n,e){return typeof n=="number"?n:n[e]||0}const RB=()=>({translate:0,scale:1,origin:0,originPoint:0}),s0=()=>({x:RB(),y:RB()}),NB=()=>({min:0,max:0}),ki=()=>({x:NB(),y:NB()});function fl(n){return[n("x"),n("y")]}function qY({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function cEe({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function uEe(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function nI(n){return n===void 0||n===1}function AN({scale:n,scaleX:e,scaleY:t}){return!nI(n)||!nI(e)||!nI(t)}function Sp(n){return AN(n)||YY(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function YY(n){return DB(n.x)||DB(n.y)}function DB(n){return n&&n!=="0%"}function v2(n,e,t){const r=n-t,i=e*r;return t+i}function kB(n,e,t,r,i){return i!==void 0&&(n=v2(n,i,r)),v2(n,t,r)+e}function TN(n,e=0,t=1,r,i){n.min=kB(n.min,e,t,r,i),n.max=kB(n.max,e,t,r,i)}function KY(n,{x:e,y:t}){TN(n.x,e.translate,e.scale,e.originPoint),TN(n.y,t.translate,t.scale,t.originPoint)}const OB=.999999999999,LB=1.0000000000001;function hEe(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&a0(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,KY(n,o)),r&&Sp(s.latestValues)&&a0(n,s.latestValues))}e.x<LB&&e.x>OB&&(e.x=1),e.y<LB&&e.y>OB&&(e.y=1)}function o0(n,e){n.min=n.min+e,n.max=n.max+e}function FB(n,e,t,r,i=.5){const s=gi(n.min,n.max,i);TN(n,e,t,s,r)}function a0(n,e){FB(n.x,e.x,e.scaleX,e.scale,e.originX),FB(n.y,e.y,e.scaleY,e.scale,e.originY)}function ZY(n,e){return qY(uEe(n.getBoundingClientRect(),e))}function dEe(n,e,t){const r=ZY(n,t),{scroll:i}=e;return i&&(o0(r.x,i.offset.x),o0(r.y,i.offset.y)),r}const QY=({current:n})=>n?n.ownerDocument.defaultView:null,fEe=new WeakMap;class pEe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ki(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(z_(u).point)},s=(u,h)=>{const{drag:f,dragPropagation:p,onDragStart:v}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=owe(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fl(S=>{let x=this.getAxisMotionValue(S).get()||0;if(fu.test(x)){const{projection:E}=this.visualElement;if(E&&E.layout){const b=E.layout.layoutBox[S];b&&(x=Za(b)*(parseFloat(x)/100))}}this.originPoint[S]=x}),v&&ti.postRender(()=>v(u,h)),gN(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:v,onDrag:_}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:S}=h;if(p&&this.currentDirection===null){this.currentDirection=mEe(S),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,S),this.updateAxis("y",h.point,S),this.visualElement.render(),_&&_(u,h)},a=(u,h)=>this.stop(u,h),l=()=>fl(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new WY(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:QY(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&ti.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!_S(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=rEe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&r0(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=iEe(i.layoutBox,t):this.constraints=!1,this.elastic=lEe(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&fl(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=aEe(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!r0(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=dEe(r,i.root,this.visualElement.getTransformPagePoint());let o=sEe(i.layout.layoutBox,s);if(t){const a=t(cEe(o));this.hasMutatedConstraints=!!a,a&&(o=qY(a))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=fl(u=>{if(!_S(u,t,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const f=i?200:1e6,p=i?40:1e7,v={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return gN(this.visualElement,e),r.start(VO(e,r,0,t,this.visualElement,!1))}stopAnimation(){fl(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){fl(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){fl(t=>{const{drag:r}=this.getProps();if(!_S(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[t];s.set(e[t]-gi(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!r0(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};fl(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=oEe({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),fl(o=>{if(!_S(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(gi(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;fEe.set(this.visualElement,this);const e=this.visualElement.current,t=H1(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();r0(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ti.read(r);const o=Wx(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(fl(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=bN,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function _S(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function mEe(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class gEe extends Df{constructor(e){super(e),this.removeGroupControls=Xa,this.removeListeners=Xa,this.controls=new pEe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xa}unmount(){this.removeGroupControls(),this.removeListeners()}}const BB=n=>(e,t)=>{n&&ti.postRender(()=>n(e,t))};class vEe extends Df{constructor(){super(...arguments),this.removePointerDownListener=Xa}onPointerDown(e){this.session=new WY(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:QY(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:BB(e),onStart:BB(t),onMove:r,onEnd:(s,o)=>{delete this.session,i&&ti.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=H1(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const eb={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function UB(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Fy={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(hn.test(n))n=parseFloat(n);else return n;const t=UB(n,e.target.x),r=UB(n,e.target.y);return`${t}% ${r}%`}},yEe={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=bf.parse(n);if(i.length>5)return r;const s=bf.createTransformer(n),o=typeof i[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=gi(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class xEe extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;U_e(_Ee),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),eb.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ti.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),gO.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function JY(n){const[e,t]=e_e(),r=O.useContext(Oq);return m.jsx(xEe,{...n,layoutGroup:r,switchLayoutGroup:O.useContext(Hq),isPresent:e,safeToRemove:t})}const _Ee={borderRadius:{...Fy,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fy,borderTopRightRadius:Fy,borderBottomLeftRadius:Fy,borderBottomRightRadius:Fy,boxShadow:yEe};function wEe(n,e,t){const r=xo(n)?n:zx(n);return r.start(VO("",r,e,t)),r.animation}function SEe(n){return n instanceof SVGElement&&n.tagName!=="svg"}const EEe=(n,e)=>n.depth-e.depth;class bEe{constructor(){this.children=[],this.isDirty=!1}add(e){PO(this.children,e),this.isDirty=!0}remove(e){RO(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(EEe),this.isDirty=!1,this.children.forEach(e)}}function AEe(n,e){const t=pu.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(Ef(r),n(s-e))};return ti.read(r,!0),()=>Ef(r)}const eK=["TopLeft","TopRight","BottomLeft","BottomRight"],TEe=eK.length,jB=n=>typeof n=="string"?parseFloat(n):n,VB=n=>typeof n=="number"||hn.test(n);function CEe(n,e,t,r,i,s){i?(n.opacity=gi(0,t.opacity!==void 0?t.opacity:1,MEe(r)),n.opacityExit=gi(e.opacity!==void 0?e.opacity:1,0,IEe(r))):s&&(n.opacity=gi(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let o=0;o<TEe;o++){const a=`border${eK[o]}Radius`;let l=zB(e,a),c=zB(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||VB(l)===VB(c)?(n[a]=Math.max(gi(jB(l),jB(c),r),0),(fu.test(c)||fu.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=gi(e.rotate||0,t.rotate||0,r))}function zB(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const MEe=tK(0,.5,xY),IEe=tK(.5,.95,Xa);function tK(n,e,t){return r=>r<n?0:r>e?1:t(xv(n,e,r))}function HB(n,e){n.min=e.min,n.max=e.max}function ul(n,e){HB(n.x,e.x),HB(n.y,e.y)}function WB(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function GB(n,e,t,r,i){return n-=e,n=v2(n,1/t,r),i!==void 0&&(n=v2(n,1/i,r)),n}function PEe(n,e=0,t=1,r=.5,i,s=n,o=n){if(fu.test(e)&&(e=parseFloat(e),e=gi(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=gi(s.min,s.max,r);n===s&&(a-=e),n.min=GB(n.min,e,t,a,i),n.max=GB(n.max,e,t,a,i)}function $B(n,e,[t,r,i],s,o){PEe(n,e[t],e[r],e[i],e.scale,s,o)}const REe=["x","scaleX","originX"],NEe=["y","scaleY","originY"];function XB(n,e,t,r){$B(n.x,e,REe,t?t.x:void 0,r?r.x:void 0),$B(n.y,e,NEe,t?t.y:void 0,r?r.y:void 0)}function qB(n){return n.translate===0&&n.scale===1}function nK(n){return qB(n.x)&&qB(n.y)}function YB(n,e){return n.min===e.min&&n.max===e.max}function DEe(n,e){return YB(n.x,e.x)&&YB(n.y,e.y)}function KB(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function rK(n,e){return KB(n.x,e.x)&&KB(n.y,e.y)}function ZB(n){return Za(n.x)/Za(n.y)}function QB(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class kEe{constructor(){this.members=[]}add(e){PO(this.members,e),e.scheduleRender()}remove(e){if(RO(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function OEe(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:f,skewX:p,skewY:v}=t;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),v&&(r+=`skewY(${v}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Ep={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},m1=typeof window<"u"&&window.MotionDebug!==void 0,rI=["","X","Y","Z"],LEe={visibility:"hidden"},JB=1e3;let FEe=0;function iI(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function iK(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=dY(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",ti,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&iK(r)}function sK({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=FEe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,m1&&(Ep.totalNodes=Ep.resolvedTargetDeltas=Ep.recalculatedProjection=0),this.nodes.forEach(jEe),this.nodes.forEach(GEe),this.nodes.forEach($Ee),this.nodes.forEach(VEe),m1&&window.MotionDebug.record(Ep)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new bEe)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new NO),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=SEe(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let h;const f=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=AEe(f,250),eb.hasAnimatedSinceResize&&(eb.hasAnimatedSinceResize=!1,this.nodes.forEach(tU))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||u.getDefaultTransition()||ZEe,{onLayoutAnimationStart:S,onLayoutAnimationComplete:x}=u.getProps(),E=!this.targetLayout||!rK(this.targetLayout,v)||p,b=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||f&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,b);const M={...TO(_,"layout"),onPlay:S,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M)}else f||tU(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ef(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(XEe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&iK(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(eU);return}this.isUpdating||this.nodes.forEach(HEe),this.isUpdating=!1,this.nodes.forEach(WEe),this.nodes.forEach(BEe),this.nodes.forEach(UEe),this.clearAllSnapshots();const a=pu.now();Ls.delta=bh(0,1e3/60,a-Ls.timestamp),Ls.timestamp=a,Ls.isProcessing=!0,qM.update.process(Ls),qM.preRender.process(Ls),qM.render.process(Ls),Ls.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,gO.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(zEe),this.sharedNodes.forEach(qEe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ti.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ti.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ki(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!nK(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Sp(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),QEe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return ki();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(JEe))){const{scroll:u}=this.root;u&&(o0(l.x,u.offset.x),o0(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=ki();if(ul(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:f}=u;u!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&ul(l,o),o0(l.x,h.offset.x),o0(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=ki();ul(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&a0(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Sp(u.latestValues)&&a0(l,u.latestValues)}return Sp(this.latestValues)&&a0(l,this.latestValues),l}removeTransform(o){const a=ki();ul(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Sp(c.latestValues))continue;AN(c.latestValues)&&c.updateSnapshot();const u=ki(),h=c.measurePageBox();ul(u,h),XB(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Sp(this.latestValues)&&XB(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ls.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Ls.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ki(),this.relativeTargetOrigin=ki(),G1(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),ul(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ki(),this.targetWithTransforms=ki()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),nEe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ul(this.target,this.layout.layoutBox),KY(this.target,this.targetDelta)):ul(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ki(),this.relativeTargetOrigin=ki(),G1(this.relativeTargetOrigin,this.target,p.target),ul(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}m1&&Ep.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||AN(this.parent.latestValues)||YY(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ls.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;ul(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;hEe(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ki());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(WB(this.prevProjectionDelta.x,this.projectionDelta.x),WB(this.prevProjectionDelta.y,this.projectionDelta.y)),W1(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!QB(this.projectionDelta.x,this.prevProjectionDelta.x)||!QB(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),m1&&Ep.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=s0(),this.projectionDelta=s0(),this.projectionDeltaWithTransform=s0()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=s0();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=ki(),p=l?l.source:void 0,v=this.layout?this.layout.source:void 0,_=p!==v,S=this.getStack(),x=!S||S.members.length<=1,E=!!(_&&!x&&this.options.crossfade===!0&&!this.path.some(KEe));this.animationProgress=0;let b;this.mixTargetDelta=M=>{const k=M/1e3;nU(h.x,o.x,k),nU(h.y,o.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(G1(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),YEe(this.relativeTarget,this.relativeTargetOrigin,f,k),b&&DEe(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=ki()),ul(b,this.relativeTarget)),_&&(this.animationValues=u,CEe(u,c,this.latestValues,k,E,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ef(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ti.update(()=>{eb.hasAnimatedSinceResize=!0,this.currentAnimation=wEe(0,JB,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(JB),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&oK(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ki();const h=Za(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=Za(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}ul(a,l),a0(a,u),W1(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new kEe),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&iI("z",o,c,this.animationValues);for(let u=0;u<rI.length;u++)iI(`rotate${rI[u]}`,o,c,this.animationValues),iI(`skew${rI[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return LEe;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=QE(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=QE(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Sp(this.latestValues)&&(_.transform=u?u({},""):"none",this.hasProjected=!1),_}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=OEe(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:p,y:v}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${v.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const _ in d2){if(f[_]===void 0)continue;const{correct:S,applyTo:x}=d2[_],E=c.transform==="none"?f[_]:S(f[_],h);if(x){const b=x.length;for(let M=0;M<b;M++)c[x[M]]=E}else c[_]=E}return this.options.layoutId&&(c.pointerEvents=h===this?QE(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(eU),this.root.sharedNodes.clear()}}}function BEe(n){n.updateLayout()}function UEe(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?fl(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],p=Za(f);f.min=r[h].min,f.max=f.min+p}):oK(s,t.layoutBox,r)&&fl(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],p=Za(r[h]);f.max=f.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+p)});const a=s0();W1(a,r,t.layoutBox);const l=s0();o?W1(l,n.applyTransform(i,!0),t.measuredBox):W1(l,r,t.layoutBox);const c=!nK(a);let u=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const v=ki();G1(v,t.layoutBox,f.layoutBox);const _=ki();G1(_,r,p.layoutBox),rK(v,_)||(u=!0),h.options.layoutRoot&&(n.relativeTarget=_,n.relativeTargetOrigin=v,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function jEe(n){m1&&Ep.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function VEe(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function zEe(n){n.clearSnapshot()}function eU(n){n.clearMeasurements()}function HEe(n){n.isLayoutDirty=!1}function WEe(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function tU(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function GEe(n){n.resolveTargetDelta()}function $Ee(n){n.calcProjection()}function XEe(n){n.resetSkewAndRotation()}function qEe(n){n.removeLeadSnapshot()}function nU(n,e,t){n.translate=gi(e.translate,0,t),n.scale=gi(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function rU(n,e,t,r){n.min=gi(e.min,t.min,r),n.max=gi(e.max,t.max,r)}function YEe(n,e,t,r){rU(n.x,e.x,t.x,r),rU(n.y,e.y,t.y,r)}function KEe(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const ZEe={duration:.45,ease:[.4,0,.1,1]},iU=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),sU=iU("applewebkit/")&&!iU("chrome/")?Math.round:Xa;function oU(n){n.min=sU(n.min),n.max=sU(n.max)}function QEe(n){oU(n.x),oU(n.y)}function oK(n,e,t){return n==="position"||n==="preserve-aspect"&&!tEe(ZB(e),ZB(t),.2)}function JEe(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const ebe=sK({attachResizeListener:(n,e)=>Wx(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sI={current:void 0},aK=sK({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!sI.current){const n=new ebe({});n.mount(window),n.setOptions({layoutScroll:!0}),sI.current=n}return sI.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),tbe={pan:{Feature:vEe},drag:{Feature:gEe,ProjectionNode:aK,MeasureLayout:JY}};function aU(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=r[i];s&&ti.postRender(()=>s(e,z_(e)))}class nbe extends Df{mount(){const{current:e}=this.node;e&&(this.unmount=twe(e,t=>(aU(this.node,t,"Start"),r=>aU(this.node,r,"End"))))}unmount(){}}class rbe extends Df{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=V_(Wx(this.node.current,"focus",()=>this.onFocus()),Wx(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function lU(n,e,t){const{props:r}=n;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=r[i];s&&ti.postRender(()=>s(e,z_(e)))}class ibe extends Df{mount(){const{current:e}=this.node;e&&(this.unmount=swe(e,t=>(lU(this.node,t,"Start"),(r,{success:i})=>lU(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const CN=new WeakMap,oI=new WeakMap,sbe=n=>{const e=CN.get(n.target);e&&e(n)},obe=n=>{n.forEach(sbe)};function abe({root:n,...e}){const t=n||document;oI.has(t)||oI.set(t,{});const r=oI.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(obe,{root:n,...e})),r[i]}function lbe(n,e,t){const r=abe(e);return CN.set(n,t),r.observe(n),()=>{CN.delete(n),r.unobserve(n)}}const cbe={some:0,all:1};class ube extends Df{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:cbe[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=c?u:h;f&&f(l)};return lbe(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(hbe(e,t))&&this.startObserver()}unmount(){}}function hbe({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const dbe={inView:{Feature:ube},tap:{Feature:ibe},focus:{Feature:rbe},hover:{Feature:nbe}},fbe={layout:{ProjectionNode:aK,MeasureLayout:JY}},MN={current:null},lK={current:!1};function pbe(){if(lK.current=!0,!!hO)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>MN.current=n.matches;n.addListener(e),e()}else MN.current=!1}const mbe=[...DY,po,bf],gbe=n=>mbe.find(NY(n)),cU=new WeakMap;function vbe(n,e,t){for(const r in e){const i=e[r],s=t[r];if(xo(i))n.addValue(r,i);else if(xo(s))n.addValue(r,zx(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const o=n.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=n.getStaticValue(r);n.addValue(r,zx(o!==void 0?o:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const uU=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ybe{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=BO,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=pu.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,ti.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=ST(t),this.isVariantNode=Vq(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(t,{},this);for(const p in f){const v=f[p];l[p]!==void 0&&xo(v)&&v.set(l[p],!1)}}mount(e){this.current=e,cU.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),lK.current||pbe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:MN.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){cU.delete(this.current),this.projection&&this.projection.unmount(),Ef(this.notifyUpdate),Ef(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Um.has(e),i=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&ti.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in _v){const t=_v[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ki()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<uU.length;r++){const i=uU[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=vbe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=zx(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(PY(i)||wY(i))?i=parseFloat(i):!gbe(i)&&bf.test(t)&&(i=CY(e,t)),this.setBaseTarget(e,xo(i)?i.get():i)),xo(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=yO(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!xo(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new NO),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class cK extends ybe{constructor(){super(...arguments),this.KeyframeResolver=kY}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;xo(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function xbe(n){return window.getComputedStyle(n)}class _be extends cK{constructor(){super(...arguments),this.type="html",this.renderInstance=Kq}readValueFromInstance(e,t){if(Um.has(t)){const r=FO(t);return r&&r.default||0}else{const r=xbe(e),i=(Xq(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return ZY(e,t)}build(e,t,r){wO(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return AO(e,t,r)}}class wbe extends cK{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ki}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Um.has(t)){const r=FO(t);return r&&r.default||0}return t=Zq.has(t)?t:mO(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return eY(e,t,r)}build(e,t,r){SO(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,i){Qq(e,t,r,i)}mount(e){this.isSVGTag=bO(e.tagName),super.mount(e)}}const Sbe=(n,e)=>vO(n)?new wbe(e):new _be(e,{allowProjection:n!==O.Fragment}),Ebe=q_e({...$Se,...dbe,...tbe,...fbe},Sbe),yr=c_e(Ebe);function bbe(){const{data:n,isLoading:e}=rO(3),{data:t}=bq(3),{data:r,isLoading:i}=Aq(),[s,o]=O.useState(!1),[a,l]=O.useState(!1),[c,u]=O.useState(null),[h,f]=O.useState(!0);O.useEffect(()=>{let _=!0;return UG().then(S=>{_&&(u(S),f(!1))}),()=>{_=!1}},[]),O.useEffect(()=>{const _=new Date;((()=>{const b=_.getMonth()>0||_.getMonth()===0&&_.getDate()>26?_.getFullYear()+1:_.getFullYear();return new Date(b,0,26,0,0,0,0)})().getTime()-_.getTime())/(1e3*60*60*24)<=31&&!sessionStorage.getItem("hideBirthdayPopup")&&l(!0)},[]);const p=()=>{l(!1),sessionStorage.setItem("hideBirthdayPopup","1")},v=t||[];return O.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),m.jsxs(m.Fragment,{children:[m.jsx(Zxe,{open:a,onClose:p}),m.jsx(yr.section,{className:"py-8 sm:py-16 bg-white",initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.7},children:m.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[m.jsxs(yr.div,{className:"text-center mb-12",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.2,duration:.7},children:[m.jsx("h1",{className:"font-heading text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:m.jsx(Qxe,{text:"Selamat Datang di Website Resmi Organisasi Mahasiswa Pecinta Alam Universitas Narotama Surabaya",speed:30})}),m.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Menjelajahi alam, berbagi pengetahuan, dan menjaga kelestarian lingkungan."})]}),m.jsx(yr.div,{className:"relative rounded-xl overflow-hidden shadow-xl",initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},transition:{delay:.4,duration:.7},children:h?m.jsx("div",{className:"h-96 flex items-center justify-center text-gray-400",children:"Memuat carousel..."}):m.jsxs(Pq,{opts:{align:"start",loop:!0},className:"w-full",plugins:[cO({delay:5e3})],children:[m.jsx(Rq,{children:(c&&c.length>0?c:nc).map((_,S)=>m.jsx(Nq,{children:m.jsxs("div",{className:"relative h-96",children:[m.jsx("img",{src:_.imageUrl,alt:_.alt,className:"w-full h-full object-cover"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end",children:m.jsxs("div",{className:"p-6 text-white",children:[m.jsx("h2",{className:"font-heading text-2xl font-bold mb-2",children:_.title}),m.jsx("p",{className:"text-gray-200",children:_.description})]})})]})},S))}),m.jsxs("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-2",children:[m.jsx(Dq,{className:"relative -left-0 translate-y-0 bg-white/20 hover:bg-white/40"}),m.jsx(kq,{className:"relative -right-0 translate-y-0 bg-white/20 hover:bg-white/40"})]})]})})]})}),m.jsx(yr.section,{id:"info-organisasi",className:"py-8 sm:py-16 bg-gray-50",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7},children:m.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[m.jsx("h2",{className:"font-heading text-3xl font-bold text-center mb-12",children:"Informasi Organisasi"}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[m.jsx("h3",{className:"font-heading text-xl font-semibold text-primary mb-4",children:"Sejarah"}),m.jsx("p",{className:"text-gray-700 mb-4 text-justify indent-8",children:"Mahapala Narotama adalah Unit Kegiatan Mahasiswa Pecinta Alam di Universitas Narotama, Surabaya yang berdiri sejak tahun 2016. Organisasi ini berperan aktif dalam mengadakan kegiatan alam bebas dan konservasi lingkungan, serta turut serta dalam pengabdian masyarakat. Mahapala Narotama juga berperan dalam meningkatkan kesadaran akan pentingnya pelestarian alam dan lingkungan hidup di kalangan mahasiswa dan masyarakat umum."}),m.jsx("p",{className:"text-gray-700 mb-4 text-justify indent-8",children:'Universitas Narotama sendiri didirikan pada tahun 1981 oleh Yayasan Pawiyatan Gita Patria. Nama "Narotama" diambil dari seorang tokoh sejarah, Mahapatih dari Prabu Airlangga, yang dikenal sebagai guru ilmu kenegaraan, agama, dan kedigdayaan. Sejak awal berdirinya, universitas ini memiliki komitmen kuat dalam bidang pendidikan dan pengabdian kepada masyarakat.'}),m.jsx("p",{className:"text-gray-700 mb-4 text-justify indent-8",children:"Mahapala Narotama, sebagai bagian integral dari universitas, telah menunjukkan dedikasi dalam berbagai kegiatan, termasuk pendakian, ekspedisi, dan program konservasi. Mereka juga aktif dalam kolaborasi dengan organisasi lain untuk meningkatkan dampak positif terhadap lingkungan dan masyarakat."}),m.jsx("p",{className:"text-gray-700 mb-4 text-justify indent-8",children:"Dengan semangat yang terus berkobar, Mahapala Narotama berkomitmen untuk melanjutkan peranannya dalam menjaga kelestarian alam dan meningkatkan kesadaran lingkungan di kalangan generasi muda."})]}),m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[m.jsx("h3",{className:"font-heading text-xl font-semibold text-primary mb-4",children:"Visi & Misi"}),m.jsxs("div",{className:"mb-4",children:[m.jsx("h4",{className:"font-heading font-medium mb-2",children:"Visi:"}),m.jsx("p",{className:"text-gray-700 text-justify",children:"Membangun kembali semangat kebersamaan dan keaktifan anggota untuk menjadikan organisasi Mahapala sebagai wadah yang solid, aktif, dan berprestasi di bidang kepecintaalaman."})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-heading font-medium mb-2",children:"Misi:"}),m.jsxs("ul",{className:"text-gray-700 list-disc pl-5 space-y-1",children:[m.jsx("li",{children:"Membangun dan memperkuat ikatan antaranggota dalam organisasi mahasiswa pecinta alam,"}),m.jsx("li",{children:"Meningkatkan keterlibatan anggota melalui kegiatan berbasis kolaborasi,"}),m.jsx("li",{children:"Menghidupkan kembali program kerja yang relevan dan inovatif,"}),m.jsx("li",{children:"Melakukan rekrutmen anggota baru secara masif dan strategis,"}),m.jsx("li",{children:"Membangun budaya komunikasi yang transparan dan terbuka."})]})]})]})]})]})}),m.jsx(yr.section,{id:"kegiatan",className:"py-8 sm:py-16 bg-white",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7},children:m.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[m.jsx("h2",{className:"font-heading text-3xl font-bold text-center mb-4",children:"Kegiatan Terbaru"}),m.jsx("p",{className:"text-center text-gray-600 mb-12 max-w-2xl mx-auto",children:"Dokumentasi berbagai kegiatan yang telah dilaksanakan oleh Mahapala Narotama dalam menjalankan misi pelestarian dan eksplorasi alam."}),e?m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(_=>m.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-md animate-pulse",children:[m.jsx("div",{className:"w-full h-48 bg-gray-300"}),m.jsxs("div",{className:"p-5",children:[m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsx("div",{className:"h-4 bg-gray-300 rounded w-24"}),m.jsx("div",{className:"h-6 bg-gray-300 rounded w-16"})]}),m.jsx("div",{className:"h-6 bg-gray-300 rounded w-3/4 mb-2"}),m.jsx("div",{className:"h-4 bg-gray-300 rounded w-full mb-4"}),m.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/3"})]})]},_))}):m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:n==null?void 0:n.map(_=>m.jsx(hq,{activity:{..._,date:typeof _.date=="string"?_.date:_.date.toISOString()}},_.id))}),m.jsx("div",{className:"text-center mt-10",children:m.jsx(Va,{href:"/kegiatan",children:m.jsx(zt,{children:"Lihat Semua Kegiatan"})})})]})}),m.jsx(yr.section,{id:"pembelajaran",className:"py-8 sm:py-16 bg-gray-50",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7},children:m.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[m.jsx("h2",{className:"font-heading text-3xl font-bold text-center mb-4",children:"Pembelajaran"}),m.jsx("p",{className:"text-center text-gray-600 mb-12 max-w-2xl mx-auto",children:"Materi dan panduan kegiatan alam bebas yang dapat diakses oleh seluruh anggota Mahapala Narotama."}),m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:v.map(_=>m.jsx(dq,{module:_},_.id+_.title))}),m.jsx("div",{className:"text-center mt-10",children:m.jsx(Va,{href:"/pembelajaran",children:m.jsx(zt,{children:"Lihat Semua Pembelajaran"})})})]})}),m.jsx(yr.section,{className:"py-8 sm:py-16 bg-white",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7},children:m.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[m.jsx("h2",{className:"font-heading text-3xl font-bold text-center mb-4",children:"Galeri Kegiatan"}),m.jsx("p",{className:"text-center text-gray-600 mb-10 max-w-2xl mx-auto",children:"Sekilas dokumentasi kegiatan yang telah dilaksanakan oleh anggota Mahapala Narotama"}),i?m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(_=>m.jsx("div",{className:"bg-gray-200 h-48 rounded-lg animate-pulse"},_))}):r&&r.length>0?m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:r.slice(0,4).map(_=>m.jsxs("div",{className:"relative group overflow-hidden rounded-lg",children:[m.jsx("img",{src:_.imageUrl,alt:_.title,className:"w-full h-full object-cover transition group-hover:scale-110"}),m.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition flex items-center justify-center",children:m.jsxs("div",{children:[m.jsx("p",{className:"text-white text-sm text-center font-medium p-2",children:_.title}),_.description&&m.jsx("p",{className:"text-white text-xs text-center p-1",children:_.description})]})})]},_.id))}):m.jsx("div",{className:"text-center text-gray-500 py-10",children:"Tidak ada data galeri."}),m.jsx("div",{className:"text-center mt-10",children:m.jsx(Va,{href:"/galeri",children:m.jsx(zt,{children:"Lihat Galeri Lengkap"})})})]})}),m.jsxs("section",{className:"py-8 sm:py-16 bg-primary text-white",children:[m.jsxs("div",{className:"container mx-auto px-2 sm:px-4 text-center",children:[m.jsx("h2",{className:"font-heading text-3xl font-bold mb-4",children:"Bergabung dengan Mahapala Narotama"}),m.jsx("p",{className:"text-lg mb-8 max-w-2xl mx-auto",children:"Mari bergabung dalam misi kami untuk melestarikan alam dan mengeksplorasi keindahan Indonesia. Kami membuka pendaftaran anggota baru setiap awal tahun akademik."}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[m.jsx(Va,{href:"/pendaftaran",children:m.jsx(zt,{variant:"secondary",className:"bg-white text-primary hover:bg-gray-100",children:"Informasi Pendaftaran"})}),m.jsx(zt,{variant:"outline",className:"bg-transparent border-2 border-white text-white hover:bg-white/10",onClick:_=>{_.preventDefault(),o(!0)},children:"Hubungi Kami"})]})]}),m.jsx(Nf,{open:s,onOpenChange:o,children:m.jsx(Rh,{className:"max-w-xs w-full p-0 rounded-xl",children:m.jsxs("div",{className:"p-6 flex flex-col items-center gap-4",children:[m.jsx("h2",{className:"font-heading text-lg font-bold mb-2",children:"Hubungi Kami"}),m.jsxs("div",{className:"flex gap-6 justify-center",children:[m.jsx("a",{href:"https://instagram.com/mahapalanarotama",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary hover:scale-110 transition-transform",title:"Instagram",children:m.jsx(aT,{size:36})}),m.jsx("a",{href:"https://wa.me/6281234567890",target:"_blank",rel:"noopener noreferrer",className:"hover:text-green-600 hover:scale-110 transition-transform",title:"WhatsApp",children:m.jsx(k_,{size:36})}),m.jsx("a",{href:"mailto:ukm.mahapala@narotama.ac.id",className:"hover:text-blue-600 hover:scale-110 transition-transform",title:"Email",children:m.jsx(Rx,{size:36})})]}),m.jsxs("div",{className:"text-center text-xs text-gray-500 mt-2",children:["Instagram: @mahapalanarotama",m.jsx("br",{}),"WhatsApp: 0812-3456-7890",m.jsx("br",{}),"Email: ukm.mahapala@narotama.ac.id"]})]})})})]})]})}function hU(n,[e,t]){return Math.min(t,Math.max(e,n))}var Abe=O.createContext(void 0);function zO(n){const e=O.useContext(Abe);return n||e||"ltr"}function Tbe(n){const e=O.useRef({value:n,previous:n});return O.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var Cbe=[" ","Enter","ArrowUp","ArrowDown"],Mbe=[" ","Enter"],Sm="Select",[AT,TT,Ibe]=_k(Sm),[Jv,qFe]=Ph(Sm,[Ibe,dT]),CT=dT(),[Pbe,kf]=Jv(Sm),[Rbe,Nbe]=Jv(Sm),uK=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:h,disabled:f,required:p,form:v}=n,_=CT(e),[S,x]=O.useState(null),[E,b]=O.useState(null),[M,k]=O.useState(!1),B=zO(c),[P,N]=gv({prop:r,defaultProp:i??!1,onChange:s,caller:Sm}),[R,I]=gv({prop:o,defaultProp:a,onChange:l,caller:Sm}),U=O.useRef(null),H=S?v||!!S.closest("form"):!0,[W,K]=O.useState(new Set),te=Array.from(W).map(se=>se.props.value).join(";");return m.jsx(o0e,{..._,children:m.jsxs(Pbe,{required:p,scope:e,trigger:S,onTriggerChange:x,valueNode:E,onValueNodeChange:b,valueNodeHasChildren:M,onValueNodeHasChildrenChange:k,contentId:of(),value:R,onValueChange:I,open:P,onOpenChange:N,dir:B,triggerPointerDownPosRef:U,disabled:f,children:[m.jsx(AT.Provider,{scope:e,children:m.jsx(Rbe,{scope:n.__scopeSelect,onNativeOptionAdd:O.useCallback(se=>{K(le=>new Set(le).add(se))},[]),onNativeOptionRemove:O.useCallback(se=>{K(le=>{const X=new Set(le);return X.delete(se),X})},[]),children:t})}),H?m.jsxs(kK,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:h,value:R,onChange:se=>I(se.target.value),disabled:f,form:v,children:[R===void 0?m.jsx("option",{value:""}):null,Array.from(W)]},te):null]})})};uK.displayName=Sm;var hK="SelectTrigger",dK=O.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,s=CT(t),o=kf(hK,t),a=o.disabled||r,l=Rr(e,o.onTriggerChange),c=TT(t),u=O.useRef("touch"),[h,f,p]=LK(_=>{const S=c().filter(b=>!b.disabled),x=S.find(b=>b.value===o.value),E=FK(S,_,x);E!==void 0&&o.onValueChange(E.value)}),v=_=>{a||(o.onOpenChange(!0),p()),_&&(o.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return m.jsx(pX,{asChild:!0,...s,children:m.jsx(On.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":OK(o.value)?"":void 0,...i,ref:l,onClick:cn(i.onClick,_=>{_.currentTarget.focus(),u.current!=="mouse"&&v(_)}),onPointerDown:cn(i.onPointerDown,_=>{u.current=_.pointerType;const S=_.target;S.hasPointerCapture(_.pointerId)&&S.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(v(_),_.preventDefault())}),onKeyDown:cn(i.onKeyDown,_=>{const S=h.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&f(_.key),!(S&&_.key===" ")&&Cbe.includes(_.key)&&(v(),_.preventDefault())})})})});dK.displayName=hK;var fK="SelectValue",pK=O.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:s,placeholder:o="",...a}=n,l=kf(fK,t),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,h=Rr(e,l.onValueNodeChange);return Xs(()=>{c(u)},[c,u]),m.jsx(On.span,{...a,ref:h,style:{pointerEvents:"none"},children:OK(l.value)?m.jsx(m.Fragment,{children:o}):s})});pK.displayName=fK;var Dbe="SelectIcon",mK=O.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return m.jsx(On.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});mK.displayName=Dbe;var kbe="SelectPortal",gK=n=>m.jsx(rT,{asChild:!0,...n});gK.displayName=kbe;var Em="SelectContent",vK=O.forwardRef((n,e)=>{const t=kf(Em,n.__scopeSelect),[r,i]=O.useState();if(Xs(()=>{i(new DocumentFragment)},[]),!t.open){const s=r;return s?Pf.createPortal(m.jsx(yK,{scope:n.__scopeSelect,children:m.jsx(AT.Slot,{scope:n.__scopeSelect,children:m.jsx("div",{children:n.children})})}),s):null}return m.jsx(xK,{...n,ref:e})});vK.displayName=Em;var ql=10,[yK,Of]=Jv(Em),Obe="SelectContentImpl",Lbe=mv("SelectContent.RemoveScroll"),xK=O.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:v,hideWhenDetached:_,avoidCollisions:S,...x}=n,E=kf(Em,t),[b,M]=O.useState(null),[k,B]=O.useState(null),P=Rr(e,we=>M(we)),[N,R]=O.useState(null),[I,U]=O.useState(null),H=TT(t),[W,K]=O.useState(!1),te=O.useRef(!1);O.useEffect(()=>{if(b)return FX(b)},[b]),IX();const se=O.useCallback(we=>{const[tt,...Ke]=H().map(Pe=>Pe.ref.current),[Me]=Ke.slice(-1),Ye=document.activeElement;for(const Pe of we)if(Pe===Ye||(Pe==null||Pe.scrollIntoView({block:"nearest"}),Pe===tt&&k&&(k.scrollTop=0),Pe===Me&&k&&(k.scrollTop=k.scrollHeight),Pe==null||Pe.focus(),document.activeElement!==Ye))return},[H,k]),le=O.useCallback(()=>se([N,b]),[se,N,b]);O.useEffect(()=>{W&&le()},[W,le]);const{onOpenChange:X,triggerPointerDownPosRef:ce}=E;O.useEffect(()=>{if(b){let we={x:0,y:0};const tt=Me=>{var Ye,Pe;we={x:Math.abs(Math.round(Me.pageX)-(((Ye=ce.current)==null?void 0:Ye.x)??0)),y:Math.abs(Math.round(Me.pageY)-(((Pe=ce.current)==null?void 0:Pe.y)??0))}},Ke=Me=>{we.x<=10&&we.y<=10?Me.preventDefault():b.contains(Me.target)||X(!1),document.removeEventListener("pointermove",tt),ce.current=null};return ce.current!==null&&(document.addEventListener("pointermove",tt),document.addEventListener("pointerup",Ke,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",tt),document.removeEventListener("pointerup",Ke,{capture:!0})}}},[b,X,ce]),O.useEffect(()=>{const we=()=>X(!1);return window.addEventListener("blur",we),window.addEventListener("resize",we),()=>{window.removeEventListener("blur",we),window.removeEventListener("resize",we)}},[X]);const[oe,fe]=LK(we=>{const tt=H().filter(Ye=>!Ye.disabled),Ke=tt.find(Ye=>Ye.ref.current===document.activeElement),Me=FK(tt,we,Ke);Me&&setTimeout(()=>Me.ref.current.focus())}),De=O.useCallback((we,tt,Ke)=>{const Me=!te.current&&!Ke;(E.value!==void 0&&E.value===tt||Me)&&(R(we),Me&&(te.current=!0))},[E.value]),We=O.useCallback(()=>b==null?void 0:b.focus(),[b]),Qe=O.useCallback((we,tt,Ke)=>{const Me=!te.current&&!Ke;(E.value!==void 0&&E.value===tt||Me)&&U(we)},[E.value]),ve=r==="popper"?IN:_K,Ie=ve===IN?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:v,hideWhenDetached:_,avoidCollisions:S}:{};return m.jsx(yK,{scope:t,content:b,viewport:k,onViewportChange:B,itemRefCallback:De,selectedItem:N,onItemLeave:We,itemTextRefCallback:Qe,focusSelectedItem:le,selectedItemText:I,position:r,isPositioned:W,searchRef:oe,children:m.jsx(Uk,{as:Lbe,allowPinchZoom:!0,children:m.jsx(Bk,{asChild:!0,trapped:E.open,onMountAutoFocus:we=>{we.preventDefault()},onUnmountAutoFocus:cn(i,we=>{var tt;(tt=E.trigger)==null||tt.focus({preventScroll:!0}),we.preventDefault()}),children:m.jsx(N_,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:we=>we.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:m.jsx(ve,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:we=>we.preventDefault(),...x,...Ie,onPlaced:()=>K(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:cn(x.onKeyDown,we=>{const tt=we.ctrlKey||we.altKey||we.metaKey;if(we.key==="Tab"&&we.preventDefault(),!tt&&we.key.length===1&&fe(we.key),["ArrowUp","ArrowDown","Home","End"].includes(we.key)){let Me=H().filter(Ye=>!Ye.disabled).map(Ye=>Ye.ref.current);if(["ArrowUp","End"].includes(we.key)&&(Me=Me.slice().reverse()),["ArrowUp","ArrowDown"].includes(we.key)){const Ye=we.target,Pe=Me.indexOf(Ye);Me=Me.slice(Pe+1)}setTimeout(()=>se(Me)),we.preventDefault()}})})})})})})});xK.displayName=Obe;var Fbe="SelectItemAlignedPosition",_K=O.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,s=kf(Em,t),o=Of(Em,t),[a,l]=O.useState(null),[c,u]=O.useState(null),h=Rr(e,P=>u(P)),f=TT(t),p=O.useRef(!1),v=O.useRef(!0),{viewport:_,selectedItem:S,selectedItemText:x,focusSelectedItem:E}=o,b=O.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&_&&S&&x){const P=s.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),R=s.valueNode.getBoundingClientRect(),I=x.getBoundingClientRect();if(s.dir!=="rtl"){const Ye=I.left-N.left,Pe=R.left-Ye,ne=P.left-Pe,Be=P.width+ne,Re=Math.max(Be,N.width),qe=window.innerWidth-ql,ze=hU(Pe,[ql,Math.max(ql,qe-Re)]);a.style.minWidth=Be+"px",a.style.left=ze+"px"}else{const Ye=N.right-I.right,Pe=window.innerWidth-R.right-Ye,ne=window.innerWidth-P.right-Pe,Be=P.width+ne,Re=Math.max(Be,N.width),qe=window.innerWidth-ql,ze=hU(Pe,[ql,Math.max(ql,qe-Re)]);a.style.minWidth=Be+"px",a.style.right=ze+"px"}const U=f(),H=window.innerHeight-ql*2,W=_.scrollHeight,K=window.getComputedStyle(c),te=parseInt(K.borderTopWidth,10),se=parseInt(K.paddingTop,10),le=parseInt(K.borderBottomWidth,10),X=parseInt(K.paddingBottom,10),ce=te+se+W+X+le,oe=Math.min(S.offsetHeight*5,ce),fe=window.getComputedStyle(_),De=parseInt(fe.paddingTop,10),We=parseInt(fe.paddingBottom,10),Qe=P.top+P.height/2-ql,ve=H-Qe,Ie=S.offsetHeight/2,we=S.offsetTop+Ie,tt=te+se+we,Ke=ce-tt;if(tt<=Qe){const Ye=U.length>0&&S===U[U.length-1].ref.current;a.style.bottom="0px";const Pe=c.clientHeight-_.offsetTop-_.offsetHeight,ne=Math.max(ve,Ie+(Ye?We:0)+Pe+le),Be=tt+ne;a.style.height=Be+"px"}else{const Ye=U.length>0&&S===U[0].ref.current;a.style.top="0px";const ne=Math.max(Qe,te+_.offsetTop+(Ye?De:0)+Ie)+Ke;a.style.height=ne+"px",_.scrollTop=tt-Qe+_.offsetTop}a.style.margin=`${ql}px 0`,a.style.minHeight=oe+"px",a.style.maxHeight=H+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,s.trigger,s.valueNode,a,c,_,S,x,s.dir,r]);Xs(()=>b(),[b]);const[M,k]=O.useState();Xs(()=>{c&&k(window.getComputedStyle(c).zIndex)},[c]);const B=O.useCallback(P=>{P&&v.current===!0&&(b(),E==null||E(),v.current=!1)},[b,E]);return m.jsx(Ube,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:B,children:m.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:m.jsx(On.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});_K.displayName=Fbe;var Bbe="SelectPopperPosition",IN=O.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=ql,...s}=n,o=CT(t);return m.jsx(mX,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});IN.displayName=Bbe;var[Ube,HO]=Jv(Em,{}),PN="SelectViewport",wK=O.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...i}=n,s=Of(PN,t),o=HO(PN,t),a=Rr(e,s.onViewportChange),l=O.useRef(0);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),m.jsx(AT.Slot,{scope:t,children:m.jsx(On.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:cn(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const p=Math.abs(l.current-u.scrollTop);if(p>0){const v=window.innerHeight-ql*2,_=parseFloat(h.style.minHeight),S=parseFloat(h.style.height),x=Math.max(_,S);if(x<v){const E=x+p,b=Math.min(v,E),M=E-b;h.style.height=b+"px",h.style.bottom==="0px"&&(u.scrollTop=M>0?M:0,h.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});wK.displayName=PN;var SK="SelectGroup",[jbe,Vbe]=Jv(SK),zbe=O.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=of();return m.jsx(jbe,{scope:t,id:i,children:m.jsx(On.div,{role:"group","aria-labelledby":i,...r,ref:e})})});zbe.displayName=SK;var EK="SelectLabel",bK=O.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Vbe(EK,t);return m.jsx(On.div,{id:i.id,...r,ref:e})});bK.displayName=EK;var y2="SelectItem",[Hbe,AK]=Jv(y2),TK=O.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:s,...o}=n,a=kf(y2,t),l=Of(y2,t),c=a.value===r,[u,h]=O.useState(s??""),[f,p]=O.useState(!1),v=Rr(e,E=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,E,r,i)}),_=of(),S=O.useRef("touch"),x=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return m.jsx(Hbe,{scope:t,value:r,disabled:i,textId:_,isSelected:c,onItemTextChange:O.useCallback(E=>{h(b=>b||((E==null?void 0:E.textContent)??"").trim())},[]),children:m.jsx(AT.ItemSlot,{scope:t,value:r,disabled:i,textValue:u,children:m.jsx(On.div,{role:"option","aria-labelledby":_,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:v,onFocus:cn(o.onFocus,()=>p(!0)),onBlur:cn(o.onBlur,()=>p(!1)),onClick:cn(o.onClick,()=>{S.current!=="mouse"&&x()}),onPointerUp:cn(o.onPointerUp,()=>{S.current==="mouse"&&x()}),onPointerDown:cn(o.onPointerDown,E=>{S.current=E.pointerType}),onPointerMove:cn(o.onPointerMove,E=>{var b;S.current=E.pointerType,i?(b=l.onItemLeave)==null||b.call(l):S.current==="mouse"&&E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:cn(o.onPointerLeave,E=>{var b;E.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:cn(o.onKeyDown,E=>{var M;((M=l.searchRef)==null?void 0:M.current)!==""&&E.key===" "||(Mbe.includes(E.key)&&x(),E.key===" "&&E.preventDefault())})})})})});TK.displayName=y2;var g1="SelectItemText",CK=O.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...s}=n,o=kf(g1,t),a=Of(g1,t),l=AK(g1,t),c=Nbe(g1,t),[u,h]=O.useState(null),f=Rr(e,x=>h(x),l.onItemTextChange,x=>{var E;return(E=a.itemTextRefCallback)==null?void 0:E.call(a,x,l.value,l.disabled)}),p=u==null?void 0:u.textContent,v=O.useMemo(()=>m.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:_,onNativeOptionRemove:S}=c;return Xs(()=>(_(v),()=>S(v)),[_,S,v]),m.jsxs(m.Fragment,{children:[m.jsx(On.span,{id:l.textId,...s,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Pf.createPortal(s.children,o.valueNode):null]})});CK.displayName=g1;var MK="SelectItemIndicator",IK=O.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return AK(MK,t).isSelected?m.jsx(On.span,{"aria-hidden":!0,...r,ref:e}):null});IK.displayName=MK;var RN="SelectScrollUpButton",PK=O.forwardRef((n,e)=>{const t=Of(RN,n.__scopeSelect),r=HO(RN,n.__scopeSelect),[i,s]=O.useState(!1),o=Rr(e,r.onScrollButtonChange);return Xs(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),i?m.jsx(NK,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});PK.displayName=RN;var NN="SelectScrollDownButton",RK=O.forwardRef((n,e)=>{const t=Of(NN,n.__scopeSelect),r=HO(NN,n.__scopeSelect),[i,s]=O.useState(!1),o=Rr(e,r.onScrollButtonChange);return Xs(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),i?m.jsx(NK,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});RK.displayName=NN;var NK=O.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...i}=n,s=Of("SelectScrollButton",t),o=O.useRef(null),a=TT(t),l=O.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return O.useEffect(()=>()=>l(),[l]),Xs(()=>{var u;const c=a().find(h=>h.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),m.jsx(On.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:cn(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:cn(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:cn(i.onPointerLeave,()=>{l()})})}),Wbe="SelectSeparator",DK=O.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return m.jsx(On.div,{"aria-hidden":!0,...r,ref:e})});DK.displayName=Wbe;var DN="SelectArrow",Gbe=O.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=CT(t),s=kf(DN,t),o=Of(DN,t);return s.open&&o.position==="popper"?m.jsx(gX,{...i,...r,ref:e}):null});Gbe.displayName=DN;var $be="SelectBubbleInput",kK=O.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const i=O.useRef(null),s=Rr(r,i),o=Tbe(e);return O.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const h=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(h)}},[o,e]),m.jsx(On.select,{...t,style:{...a$,...t.style},ref:s,defaultValue:e})});kK.displayName=$be;function OK(n){return n===""||n===void 0}function LK(n){const e=Pl(n),t=O.useRef(""),r=O.useRef(0),i=O.useCallback(o=>{const a=t.current+o;e(a),function l(c){t.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=O.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return O.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,s]}function FK(n,e,t){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let o=Xbe(n,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==t?l:void 0}function Xbe(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var qbe=uK,BK=dK,Ybe=pK,Kbe=mK,Zbe=gK,UK=vK,Qbe=wK,jK=bK,VK=TK,Jbe=CK,e2e=IK,zK=PK,HK=RK,WK=DK;const GK=qbe,$K=Ybe,WO=O.forwardRef(({className:n,children:e,...t},r)=>m.jsxs(BK,{ref:r,className:Jt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,m.jsx(Kbe,{asChild:!0,children:m.jsx(D$,{className:"h-4 w-4 opacity-50"})})]}));WO.displayName=BK.displayName;const XK=O.forwardRef(({className:n,...e},t)=>m.jsx(zK,{ref:t,className:Jt("flex cursor-default items-center justify-center py-1",n),...e,children:m.jsx(Lpe,{className:"h-4 w-4"})}));XK.displayName=zK.displayName;const qK=O.forwardRef(({className:n,...e},t)=>m.jsx(HK,{ref:t,className:Jt("flex cursor-default items-center justify-center py-1",n),...e,children:m.jsx(D$,{className:"h-4 w-4"})}));qK.displayName=HK.displayName;const GO=O.forwardRef(({className:n,children:e,position:t="popper",...r},i)=>m.jsx(Zbe,{children:m.jsxs(UK,{ref:i,className:Jt("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[m.jsx(XK,{}),m.jsx(Qbe,{className:Jt("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),m.jsx(qK,{})]})}));GO.displayName=UK.displayName;const t2e=O.forwardRef(({className:n,...e},t)=>m.jsx(jK,{ref:t,className:Jt("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));t2e.displayName=jK.displayName;const B0=O.forwardRef(({className:n,children:e,...t},r)=>m.jsxs(VK,{ref:r,className:Jt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[m.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m.jsx(e2e,{children:m.jsx(Ope,{className:"h-4 w-4"})})}),m.jsx(Jbe,{children:e})]}));B0.displayName=VK.displayName;const n2e=O.forwardRef(({className:n,...e},t)=>m.jsx(WK,{ref:t,className:Jt("-mx-1 my-1 h-px bg-muted",n),...e}));n2e.displayName=WK.displayName;const ii=O.forwardRef(({className:n,type:e,...t},r)=>m.jsx("input",{type:e,className:Jt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));ii.displayName="Input";function yo({className:n,...e}){return m.jsx("div",{className:Jt("animate-pulse rounded-md bg-muted",n),...e})}function r2e(){const[n,e]=O.useState("all"),[t,r]=O.useState(""),{data:i,isLoading:s}=rO(),o=i?Array.from(new Set(i.map(l=>(l.category||"").trim()).filter(Boolean))):[],a=i==null?void 0:i.filter(l=>{var h,f;const c=n==="all"?!0:(l.category||"").toLowerCase()===n.toLowerCase(),u=t?((h=l.title)==null?void 0:h.toLowerCase().includes(t.toLowerCase()))||((f=l.description)==null?void 0:f.toLowerCase().includes(t.toLowerCase())):!0;return c&&u});return m.jsx(m.Fragment,{children:m.jsx("section",{className:"py-12 bg-white",children:m.jsxs("div",{className:"container mx-auto px-4",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsx("h1",{className:"font-heading text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:"Kegiatan Mahapala Narotama"}),m.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Eksplorasi alam, konservasi lingkungan, dan berbagi pengetahuan bersama Mahapala Narotama"})]}),m.jsx("div",{className:"max-w-4xl mx-auto mb-10",children:m.jsx("div",{className:"bg-gray-50 p-6 rounded-lg shadow-md",children:m.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Cari Kegiatan"}),m.jsx(ii,{id:"search",placeholder:"Cari judul atau deskripsi kegiatan...",value:t,onChange:l=>r(l.target.value)})]}),m.jsxs("div",{className:"w-full md:w-48",children:[m.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategori"}),m.jsxs(GK,{value:n,onValueChange:e,children:[m.jsx(WO,{id:"category",children:m.jsx($K,{placeholder:"Semua Kategori"})}),m.jsxs(GO,{className:"bg-white",children:[m.jsx(B0,{value:"all",children:"Semua Kategori"}),o.map(l=>m.jsx(B0,{value:l,children:l},l))]})]})]})]})})}),s?m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(l=>m.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-md animate-pulse",children:[m.jsx(yo,{className:"w-full h-48"}),m.jsxs("div",{className:"p-5",children:[m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsx(yo,{className:"h-4 w-24"}),m.jsx(yo,{className:"h-6 w-16"})]}),m.jsx(yo,{className:"h-6 w-3/4 mb-2"}),m.jsx(yo,{className:"h-4 w-full mb-4"}),m.jsx(yo,{className:"h-4 w-1/3"})]})]},l))}):a&&a.length>0?m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(l=>{var c;return m.jsx(hq,{activity:{...l,date:typeof l.date=="string"?l.date:((c=l.date)==null?void 0:c.toISOString())??""}},l.id)})}):m.jsxs("div",{className:"text-center py-8",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Tidak ada kegiatan ditemukan"}),m.jsx("p",{className:"text-gray-500",children:"Coba ubah filter atau kata kunci pencarian Anda"})]})]})})})}function i2e(){const[n,e]=O.useState(""),{data:t,isLoading:r}=bq(),i=t||[],s=i.filter(o=>n?o.title.toLowerCase().includes(n.toLowerCase())||o.description.toLowerCase().includes(n.toLowerCase()):!0);return m.jsx(m.Fragment,{children:m.jsx("section",{className:"py-12 bg-white",children:m.jsxs("div",{className:"container mx-auto px-4",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsx("h1",{className:"font-heading text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:"Pembelajaran Mahapala Narotama"}),m.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Materi dan panduan kegiatan alam bebas yang dapat diakses oleh seluruh anggota Mahapala Narotama"})]}),m.jsx("div",{className:"max-w-md mx-auto mb-10",children:m.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg shadow-md",children:[m.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cari Materi"}),m.jsx(ii,{id:"search",placeholder:"Cari judul atau deskripsi materi...",value:n,onChange:o=>e(o.target.value)})]})}),r&&i.length===0?m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(o=>m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-pulse",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx(yo,{className:"h-12 w-12 rounded-full mr-4"}),m.jsx(yo,{className:"h-6 w-3/4"})]}),m.jsx(yo,{className:"h-4 w-full mb-2"}),m.jsx(yo,{className:"h-4 w-full mb-2"}),m.jsx(yo,{className:"h-4 w-2/3 mb-4"}),m.jsx(yo,{className:"h-4 w-24"})]},o))}):s&&s.length>0?m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map(o=>m.jsx(dq,{module:o},o.id+o.title))}):m.jsxs("div",{className:"text-center py-8",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Tidak ada materi pembelajaran ditemukan"}),m.jsx("p",{className:"text-gray-500",children:"Coba ubah kata kunci pencarian Anda"})]})]})})})}const s2e=n=>{const e=n.data();return{id:isNaN(Number(n.id))?Math.floor(Math.random()*1e6):Number(n.id),fullName:e.namalengkap||"",fieldName:e.namalapangan||"",batchName:e.namaangkatan||"",batchYear:e.tahun||0,registrationNumber:e.nomorregistrasi||"",membershipStatus:e.keanggotaan||"Tidak Aktif",photoUrl:e.foto||"",qrCode:e.url||"",email:e.email||"",phone:e.phone||"",gender:e.gender||""}},o2e=async()=>{try{const n=fi(wn,"anggota"),e=await Ss(n);return e.empty?(console.log("No members found"),[]):e.docs.map(s2e)}catch(n){throw console.error("Error fetching members:",n),n}},YK=async(n,e)=>{const t=fi(wn,"anggota"),r=sk(t,nhe(n,"==",e),JW(1)),i=await Ss(r);if(i.empty)return null;const o=i.docs[0].data();return{fullName:o.namalengkap||"",fieldName:o.namalapangan||"",batchName:o.namaangkatan||"",batchYear:o.tahun||0,registrationNumber:o.nomorregistrasi||"",membershipStatus:o.keanggotaan||"Tidak Aktif",photoUrl:o.foto||"",statusMahasiswa:o.statusMahasiswa||""}},a2e=n=>vT({queryKey:["members",n],queryFn:()=>o2e()});var l2e=Object.defineProperty,x2=Object.getOwnPropertySymbols,KK=Object.prototype.hasOwnProperty,ZK=Object.prototype.propertyIsEnumerable,dU=(n,e,t)=>e in n?l2e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,kN=(n,e)=>{for(var t in e||(e={}))KK.call(e,t)&&dU(n,t,e[t]);if(x2)for(var t of x2(e))ZK.call(e,t)&&dU(n,t,e[t]);return n},ON=(n,e)=>{var t={};for(var r in n)KK.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&x2)for(var r of x2(n))e.indexOf(r)<0&&ZK.call(n,r)&&(t[r]=n[r]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var bm;(n=>{const e=class $n{constructor(l,c,u,h){if(this.version=l,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],l<$n.MIN_VERSION||l>$n.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=l*4+17;let f=[];for(let v=0;v<this.size;v++)f.push(!1);for(let v=0;v<this.size;v++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const p=this.addEccAndInterleave(u);if(this.drawCodewords(p),h==-1){let v=1e9;for(let _=0;_<8;_++){this.applyMask(_),this.drawFormatBits(_);const S=this.getPenaltyScore();S<v&&(h=_,v=S),this.applyMask(_)}}i(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(l,c){const u=n.QrSegment.makeSegments(l);return $n.encodeSegments(u,c)}static encodeBinary(l,c){const u=n.QrSegment.makeBytes(l);return $n.encodeSegments([u],c)}static encodeSegments(l,c,u=1,h=40,f=-1,p=!0){if(!($n.MIN_VERSION<=u&&u<=h&&h<=$n.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let v,_;for(v=u;;v++){const b=$n.getNumDataCodewords(v,c)*8,M=o.getTotalBits(l,v);if(M<=b){_=M;break}if(v>=h)throw new RangeError("Data too long")}for(const b of[$n.Ecc.MEDIUM,$n.Ecc.QUARTILE,$n.Ecc.HIGH])p&&_<=$n.getNumDataCodewords(v,b)*8&&(c=b);let S=[];for(const b of l){t(b.mode.modeBits,4,S),t(b.numChars,b.mode.numCharCountBits(v),S);for(const M of b.getData())S.push(M)}i(S.length==_);const x=$n.getNumDataCodewords(v,c)*8;i(S.length<=x),t(0,Math.min(4,x-S.length),S),t(0,(8-S.length%8)%8,S),i(S.length%8==0);for(let b=236;S.length<x;b^=253)t(b,8,S);let E=[];for(;E.length*8<S.length;)E.push(0);return S.forEach((b,M)=>E[M>>>3]|=b<<7-(M&7)),new $n(v,c,E,f)}getModule(l,c){return 0<=l&&l<this.size&&0<=c&&c<this.size&&this.modules[c][l]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const l=this.getAlignmentPatternPositions(),c=l.length;for(let u=0;u<c;u++)for(let h=0;h<c;h++)u==0&&h==0||u==0&&h==c-1||u==c-1&&h==0||this.drawAlignmentPattern(l[u],l[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(l){const c=this.errorCorrectionLevel.formatBits<<3|l;let u=c;for(let f=0;f<10;f++)u=u<<1^(u>>>9)*1335;const h=(c<<10|u)^21522;i(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,r(h,f));this.setFunctionModule(8,7,r(h,6)),this.setFunctionModule(8,8,r(h,7)),this.setFunctionModule(7,8,r(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,r(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,r(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,r(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let l=this.version;for(let u=0;u<12;u++)l=l<<1^(l>>>11)*7973;const c=this.version<<12|l;i(c>>>18==0);for(let u=0;u<18;u++){const h=r(c,u),f=this.size-11+u%3,p=Math.floor(u/3);this.setFunctionModule(f,p,h),this.setFunctionModule(p,f,h)}}drawFinderPattern(l,c){for(let u=-4;u<=4;u++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(u)),p=l+h,v=c+u;0<=p&&p<this.size&&0<=v&&v<this.size&&this.setFunctionModule(p,v,f!=2&&f!=4)}}drawAlignmentPattern(l,c){for(let u=-2;u<=2;u++)for(let h=-2;h<=2;h++)this.setFunctionModule(l+h,c+u,Math.max(Math.abs(h),Math.abs(u))!=1)}setFunctionModule(l,c,u){this.modules[c][l]=u,this.isFunction[c][l]=!0}addEccAndInterleave(l){const c=this.version,u=this.errorCorrectionLevel;if(l.length!=$n.getNumDataCodewords(c,u))throw new RangeError("Invalid argument");const h=$n.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c],f=$n.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c],p=Math.floor($n.getNumRawDataModules(c)/8),v=h-p%h,_=Math.floor(p/h);let S=[];const x=$n.reedSolomonComputeDivisor(f);for(let b=0,M=0;b<h;b++){let k=l.slice(M,M+_-f+(b<v?0:1));M+=k.length;const B=$n.reedSolomonComputeRemainder(k,x);b<v&&k.push(0),S.push(k.concat(B))}let E=[];for(let b=0;b<S[0].length;b++)S.forEach((M,k)=>{(b!=_-f||k>=v)&&E.push(M[b])});return i(E.length==p),E}drawCodewords(l){if(l.length!=Math.floor($n.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const p=u-f,_=(u+1&2)==0?this.size-1-h:h;!this.isFunction[_][p]&&c<l.length*8&&(this.modules[_][p]=r(l[c>>>3],7-(c&7)),c++)}}i(c==l.length*8)}applyMask(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let u=0;u<this.size;u++){let h;switch(l){case 0:h=(u+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=u%3==0;break;case 3:h=(u+c)%3==0;break;case 4:h=(Math.floor(u/3)+Math.floor(c/2))%2==0;break;case 5:h=u*c%2+u*c%3==0;break;case 6:h=(u*c%2+u*c%3)%2==0;break;case 7:h=((u+c)%2+u*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][u]&&h&&(this.modules[c][u]=!this.modules[c][u])}}getPenaltyScore(){let l=0;for(let f=0;f<this.size;f++){let p=!1,v=0,_=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[f][S]==p?(v++,v==5?l+=$n.PENALTY_N1:v>5&&l++):(this.finderPenaltyAddHistory(v,_),p||(l+=this.finderPenaltyCountPatterns(_)*$n.PENALTY_N3),p=this.modules[f][S],v=1);l+=this.finderPenaltyTerminateAndCount(p,v,_)*$n.PENALTY_N3}for(let f=0;f<this.size;f++){let p=!1,v=0,_=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[S][f]==p?(v++,v==5?l+=$n.PENALTY_N1:v>5&&l++):(this.finderPenaltyAddHistory(v,_),p||(l+=this.finderPenaltyCountPatterns(_)*$n.PENALTY_N3),p=this.modules[S][f],v=1);l+=this.finderPenaltyTerminateAndCount(p,v,_)*$n.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let p=0;p<this.size-1;p++){const v=this.modules[f][p];v==this.modules[f][p+1]&&v==this.modules[f+1][p]&&v==this.modules[f+1][p+1]&&(l+=$n.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((p,v)=>p+(v?1:0),c);const u=this.size*this.size,h=Math.ceil(Math.abs(c*20-u*10)/u)-1;return i(0<=h&&h<=9),l+=h*$n.PENALTY_N4,i(0<=l&&l<=2568888),l}getAlignmentPatternPositions(){if(this.version==1)return[];{const l=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(l*2-2))*2;let u=[6];for(let h=this.size-7;u.length<l;h-=c)u.splice(1,0,h);return u}}static getNumRawDataModules(l){if(l<$n.MIN_VERSION||l>$n.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*l+128)*l+64;if(l>=2){const u=Math.floor(l/7)+2;c-=(25*u-10)*u-55,l>=7&&(c-=36)}return i(208<=c&&c<=29648),c}static getNumDataCodewords(l,c){return Math.floor($n.getNumRawDataModules(l)/8)-$n.ECC_CODEWORDS_PER_BLOCK[c.ordinal][l]*$n.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][l]}static reedSolomonComputeDivisor(l){if(l<1||l>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<l-1;h++)c.push(0);c.push(1);let u=1;for(let h=0;h<l;h++){for(let f=0;f<c.length;f++)c[f]=$n.reedSolomonMultiply(c[f],u),f+1<c.length&&(c[f]^=c[f+1]);u=$n.reedSolomonMultiply(u,2)}return c}static reedSolomonComputeRemainder(l,c){let u=c.map(h=>0);for(const h of l){const f=h^u.shift();u.push(0),c.forEach((p,v)=>u[v]^=$n.reedSolomonMultiply(p,f))}return u}static reedSolomonMultiply(l,c){if(l>>>8||c>>>8)throw new RangeError("Byte out of range");let u=0;for(let h=7;h>=0;h--)u=u<<1^(u>>>7)*285,u^=(c>>>h&1)*l;return i(u>>>8==0),u}finderPenaltyCountPatterns(l){const c=l[1];i(c<=this.size*3);const u=c>0&&l[2]==c&&l[3]==c*3&&l[4]==c&&l[5]==c;return(u&&l[0]>=c*4&&l[6]>=c?1:0)+(u&&l[6]>=c*4&&l[0]>=c?1:0)}finderPenaltyTerminateAndCount(l,c,u){return l&&(this.finderPenaltyAddHistory(c,u),c=0),c+=this.size,this.finderPenaltyAddHistory(c,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(l,c){c[0]==0&&(l+=this.size),c.pop(),c.unshift(l)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(a,l,c){if(l<0||l>31||a>>>l)throw new RangeError("Value out of range");for(let u=l-1;u>=0;u--)c.push(a>>>u&1)}function r(a,l){return(a>>>l&1)!=0}function i(a){if(!a)throw new Error("Assertion error")}const s=class Ti{constructor(l,c,u){if(this.mode=l,this.numChars=c,this.bitData=u,c<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(l){let c=[];for(const u of l)t(u,8,c);return new Ti(Ti.Mode.BYTE,l.length,c)}static makeNumeric(l){if(!Ti.isNumeric(l))throw new RangeError("String contains non-numeric characters");let c=[];for(let u=0;u<l.length;){const h=Math.min(l.length-u,3);t(parseInt(l.substring(u,u+h),10),h*3+1,c),u+=h}return new Ti(Ti.Mode.NUMERIC,l.length,c)}static makeAlphanumeric(l){if(!Ti.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],u;for(u=0;u+2<=l.length;u+=2){let h=Ti.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u))*45;h+=Ti.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u+1)),t(h,11,c)}return u<l.length&&t(Ti.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u)),6,c),new Ti(Ti.Mode.ALPHANUMERIC,l.length,c)}static makeSegments(l){return l==""?[]:Ti.isNumeric(l)?[Ti.makeNumeric(l)]:Ti.isAlphanumeric(l)?[Ti.makeAlphanumeric(l)]:[Ti.makeBytes(Ti.toUtf8ByteArray(l))]}static makeEci(l){let c=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)t(l,8,c);else if(l<16384)t(2,2,c),t(l,14,c);else if(l<1e6)t(6,3,c),t(l,21,c);else throw new RangeError("ECI assignment value out of range");return new Ti(Ti.Mode.ECI,0,c)}static isNumeric(l){return Ti.NUMERIC_REGEX.test(l)}static isAlphanumeric(l){return Ti.ALPHANUMERIC_REGEX.test(l)}getData(){return this.bitData.slice()}static getTotalBits(l,c){let u=0;for(const h of l){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;u+=4+f+h.bitData.length}return u}static toUtf8ByteArray(l){l=encodeURI(l);let c=[];for(let u=0;u<l.length;u++)l.charAt(u)!="%"?c.push(l.charCodeAt(u)):(c.push(parseInt(l.substring(u+1,u+3),16)),u+=2);return c}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=s;n.QrSegment=s})(bm||(bm={}));(n=>{(e=>{const t=class{constructor(i,s){this.ordinal=i,this.formatBits=s}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(bm||(bm={}));(n=>{(e=>{const t=class{constructor(i,s){this.modeBits=i,this.numBitsCharCount=s}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(bm||(bm={}));var l0=bm;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var c2e={L:l0.QrCode.Ecc.LOW,M:l0.QrCode.Ecc.MEDIUM,Q:l0.QrCode.Ecc.QUARTILE,H:l0.QrCode.Ecc.HIGH},QK=128,JK="L",eZ="#FFFFFF",tZ="#000000",nZ=!1,rZ=1,u2e=4,h2e=0,d2e=.1;function iZ(n,e=0){const t=[];return n.forEach(function(r,i){let s=null;r.forEach(function(o,a){if(!o&&s!==null){t.push(`M${s+e} ${i+e}h${a-s}v1H${s+e}z`),s=null;return}if(a===r.length-1){if(!o)return;s===null?t.push(`M${a+e},${i+e} h1v1H${a+e}z`):t.push(`M${s+e},${i+e} h${a+1-s}v1H${s+e}z`);return}o&&s===null&&(s=a)})}),t.join("")}function sZ(n,e){return n.slice().map((t,r)=>r<e.y||r>=e.y+e.h?t:t.map((i,s)=>s<e.x||s>=e.x+e.w?i:!1))}function f2e(n,e,t,r){if(r==null)return null;const i=n.length+t*2,s=Math.floor(e*d2e),o=i/e,a=(r.width||s)*o,l=(r.height||s)*o,c=r.x==null?n.length/2-a/2:r.x*o,u=r.y==null?n.length/2-l/2:r.y*o,h=r.opacity==null?1:r.opacity;let f=null;if(r.excavate){let v=Math.floor(c),_=Math.floor(u),S=Math.ceil(a+c-v),x=Math.ceil(l+u-_);f={x:v,y:_,w:S,h:x}}const p=r.crossOrigin;return{x:c,y:u,h:l,w:a,excavation:f,opacity:h,crossOrigin:p}}function p2e(n,e){return e!=null?Math.max(Math.floor(e),0):n?u2e:h2e}function oZ({value:n,level:e,minVersion:t,includeMargin:r,marginSize:i,imageSettings:s,size:o,boostLevel:a}){let l=fn.useMemo(()=>{const v=(Array.isArray(n)?n:[n]).reduce((_,S)=>(_.push(...l0.QrSegment.makeSegments(S)),_),[]);return l0.QrCode.encodeSegments(v,c2e[e],t,void 0,void 0,a)},[n,e,t,a]);const{cells:c,margin:u,numCells:h,calculatedImageSettings:f}=fn.useMemo(()=>{let p=l.getModules();const v=p2e(r,i),_=p.length+v*2,S=f2e(p,o,v,s);return{cells:p,margin:v,numCells:_,calculatedImageSettings:S}},[l,o,s,r,i]);return{qrcode:l,margin:u,cells:c,numCells:h,calculatedImageSettings:f}}var m2e=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),g2e=fn.forwardRef(function(e,t){const r=e,{value:i,size:s=QK,level:o=JK,bgColor:a=eZ,fgColor:l=tZ,includeMargin:c=nZ,minVersion:u=rZ,boostLevel:h,marginSize:f,imageSettings:p}=r,_=ON(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:S}=_,x=ON(_,["style"]),E=p==null?void 0:p.src,b=fn.useRef(null),M=fn.useRef(null),k=fn.useCallback(K=>{b.current=K,typeof t=="function"?t(K):t&&(t.current=K)},[t]),[B,P]=fn.useState(!1),{margin:N,cells:R,numCells:I,calculatedImageSettings:U}=oZ({value:i,level:o,minVersion:u,boostLevel:h,includeMargin:c,marginSize:f,imageSettings:p,size:s});fn.useEffect(()=>{if(b.current!=null){const K=b.current,te=K.getContext("2d");if(!te)return;let se=R;const le=M.current,X=U!=null&&le!==null&&le.complete&&le.naturalHeight!==0&&le.naturalWidth!==0;X&&U.excavation!=null&&(se=sZ(R,U.excavation));const ce=window.devicePixelRatio||1;K.height=K.width=s*ce;const oe=s/I*ce;te.scale(oe,oe),te.fillStyle=a,te.fillRect(0,0,I,I),te.fillStyle=l,m2e?te.fill(new Path2D(iZ(se,N))):R.forEach(function(fe,De){fe.forEach(function(We,Qe){We&&te.fillRect(Qe+N,De+N,1,1)})}),U&&(te.globalAlpha=U.opacity),X&&te.drawImage(le,U.x+N,U.y+N,U.w,U.h)}}),fn.useEffect(()=>{P(!1)},[E]);const H=kN({height:s,width:s},S);let W=null;return E!=null&&(W=fn.createElement("img",{src:E,key:E,style:{display:"none"},onLoad:()=>{P(!0)},ref:M,crossOrigin:U==null?void 0:U.crossOrigin})),fn.createElement(fn.Fragment,null,fn.createElement("canvas",kN({style:H,height:s,width:s,ref:k,role:"img"},x)),W)});g2e.displayName="QRCodeCanvas";var aZ=fn.forwardRef(function(e,t){const r=e,{value:i,size:s=QK,level:o=JK,bgColor:a=eZ,fgColor:l=tZ,includeMargin:c=nZ,minVersion:u=rZ,boostLevel:h,title:f,marginSize:p,imageSettings:v}=r,_=ON(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:S,cells:x,numCells:E,calculatedImageSettings:b}=oZ({value:i,level:o,minVersion:u,boostLevel:h,includeMargin:c,marginSize:p,imageSettings:v,size:s});let M=x,k=null;v!=null&&b!=null&&(b.excavation!=null&&(M=sZ(x,b.excavation)),k=fn.createElement("image",{href:v.src,height:b.h,width:b.w,x:b.x+S,y:b.y+S,preserveAspectRatio:"none",opacity:b.opacity,crossOrigin:b.crossOrigin}));const B=iZ(M,S);return fn.createElement("svg",kN({height:s,width:s,viewBox:`0 0 ${E} ${E}`,ref:t,role:"img"},_),!!f&&fn.createElement("title",null,f),fn.createElement("path",{fill:a,d:`M0,0 h${E}v${E}H0z`,shapeRendering:"crispEdges"}),fn.createElement("path",{fill:l,d:B,shapeRendering:"crispEdges"}),k)});aZ.displayName="QRCodeSVG";function v2e({member:n}){const[e,t]=O.useState(!1),r=()=>{t(!0);const s=document.getElementById("printable-card"),o=document.body.innerHTML;s&&(document.body.innerHTML=s.innerHTML,window.print(),document.body.innerHTML=o,t(!1),window.location.reload())},i=JSON.stringify({id:n.id,name:n.fullName,registrationNumber:n.registrationNumber,status:n.membershipStatus});return m.jsxs("div",{className:"max-w-md mx-auto",children:[m.jsx(Tl,{className:"mb-4 border-2 border-primary overflow-hidden",children:m.jsxs("div",{id:"printable-card",children:[m.jsxs(O0,{className:"bg-primary text-white p-4 flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-heading font-bold",children:"MAHAPALA NAROTAMA"}),m.jsx("p",{className:"text-xs",children:"Universitas Narotama Surabaya"})]}),m.jsx("div",{className:"text-right",children:m.jsxs("p",{className:"text-xs",children:["ID: ",n.registrationNumber]})})]}),m.jsxs(du,{className:"p-4",children:[m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"mr-4",children:m.jsx("div",{className:"w-24 h-32 bg-gray-200 rounded-md flex items-center justify-center",children:n.photoUrl?m.jsx("img",{src:n.photoUrl,alt:n.fullName,className:"w-full h-full object-cover rounded-md"}):m.jsx(eme,{className:"h-10 w-10 text-gray-400"})})}),m.jsx("div",{className:"flex-1",children:m.jsx("table",{className:"w-full text-sm",children:m.jsxs("tbody",{children:[m.jsxs("tr",{children:[m.jsx("td",{className:"py-1 font-medium",children:"Nama"}),m.jsxs("td",{className:"py-1",children:[": ",n.fullName]})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"py-1 font-medium",children:"Nama Lapangan"}),m.jsxs("td",{className:"py-1",children:[": ",n.fieldName]})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"py-1 font-medium",children:"Angkatan"}),m.jsxs("td",{className:"py-1",children:[": ",n.batchName," ",n.batchYear]})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"py-1 font-medium",children:"Status"}),m.jsxs("td",{className:"py-1",children:[":",m.jsx("span",{className:`${n.membershipStatus==="Aktif"?"text-green-600":"text-amber-600"} font-medium ml-1`,children:n.membershipStatus})]})]})]})})})]}),m.jsx("div",{className:"mt-4 flex justify-center",children:m.jsx("div",{className:"p-2 bg-white rounded-md",children:m.jsx(aZ,{value:i,size:128})})})]})]})}),m.jsx("div",{className:"mt-4 flex justify-center",children:m.jsxs(zt,{onClick:r,disabled:e,className:"gap-2",children:[m.jsx(bk,{className:"h-4 w-4"}),"Cetak Kartu"]})})]})}const c0=O.forwardRef(({className:n,...e},t)=>m.jsx("div",{className:"relative w-full overflow-auto",children:m.jsx("table",{ref:t,className:Jt("w-full caption-bottom text-sm",n),...e})}));c0.displayName="Table";const u0=O.forwardRef(({className:n,...e},t)=>m.jsx("thead",{ref:t,className:Jt("[&_tr]:border-b",n),...e}));u0.displayName="TableHeader";const h0=O.forwardRef(({className:n,...e},t)=>m.jsx("tbody",{ref:t,className:Jt("[&_tr:last-child]:border-0",n),...e}));h0.displayName="TableBody";const y2e=O.forwardRef(({className:n,...e},t)=>m.jsx("tfoot",{ref:t,className:Jt("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...e}));y2e.displayName="TableFooter";const Kl=O.forwardRef(({className:n,...e},t)=>m.jsx("tr",{ref:t,className:Jt("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...e}));Kl.displayName="TableRow";const Or=O.forwardRef(({className:n,...e},t)=>m.jsx("th",{ref:t,className:Jt("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...e}));Or.displayName="TableHead";const Lr=O.forwardRef(({className:n,...e},t)=>m.jsx("td",{ref:t,className:Jt("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...e}));Lr.displayName="TableCell";const x2e=O.forwardRef(({className:n,...e},t)=>m.jsx("caption",{ref:t,className:Jt("mt-4 text-sm text-muted-foreground",n),...e}));x2e.displayName="TableCaption";function hg({value:n,duration:e=1e3,className:t=""}){const[r,i]=O.useState(0),s=O.useRef(),o=O.useRef(),a=O.useRef(0);return O.useEffect(()=>{a.current=0,i(0);function l(c){o.current||(o.current=c);const u=Math.min((c-o.current)/e,1);i(Math.floor(u*(n-a.current)+a.current)),u<1?s.current=requestAnimationFrame(l):i(n)}return s.current=requestAnimationFrame(l),()=>{s.current&&cancelAnimationFrame(s.current),o.current=void 0}},[n,e]),m.jsx("span",{className:t,children:r.toLocaleString()})}function _2e({open:n,onClose:e,frontUrl:t,backUrl:r,fullName:i}){const[s,o]=O.useState(!0);O.useEffect(()=>{n&&o(!0)},[n]);const a=()=>{const l=new URLSearchParams({frontUrl:t,backUrl:r,fullName:i});window.open(`/member-card-3d?${l.toString()}`,"_blank")};return n?m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:[m.jsx("div",{className:"absolute inset-0",onClick:e}),m.jsxs("div",{className:"relative z-10 rounded-2xl overflow-hidden shadow-2xl bg-white/10 p-6 flex flex-col items-center",children:[m.jsxs("div",{className:"w-[340px] h-[220px] mb-4",style:{perspective:1200},children:[m.jsxs("div",{className:`relative w-full h-full transition-transform duration-700 [transform-style:preserve-3d] ${s?"":"[transform:rotateY(180deg)]"}`,children:[m.jsx("img",{src:t,alt:i+" - depan",className:"absolute w-full h-full object-cover rounded-2xl shadow-lg bg-white [backface-visibility:hidden]",style:{backfaceVisibility:"hidden",aspectRatio:"340/220"}}),m.jsx("img",{src:r,alt:i+" - belakang",className:"absolute w-full h-full object-cover rounded-2xl shadow-lg bg-white [backface-visibility:hidden]",style:{transform:"rotateY(180deg)",backfaceVisibility:"hidden",aspectRatio:"340/220"}})]}),m.jsx("button",{className:"absolute top-2 right-2 bg-white/80 hover:bg-white rounded-full p-2 shadow",title:"Tampilkan 3D Fullscreen",onClick:a,children:m.jsx(Xpe,{className:"w-5 h-5 text-gray-700"})})]}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx(zt,{variant:"secondary",onClick:()=>o(!s),children:s?"Lihat Belakang":"Lihat Depan"}),m.jsx(zt,{variant:"outline",onClick:e,children:"Tutup"})]})]})]}):null}function w2e({onClose:n}){const[e,t]=O.useState(null);return O.useEffect(()=>{function r(){const o=new Date,a=o.getMonth()>0||o.getMonth()===0&&o.getDate()>26?o.getFullYear()+1:o.getFullYear();return new Date(a,0,26,0,0,0,0)}function i(){const o=new Date,l=r().getTime()-o.getTime();if(l<=0)return{days:0,hours:0,minutes:0,seconds:0};const c=Math.floor(l/(1e3*60*60*24)),u=Math.floor(l/(1e3*60*60)%24),h=Math.floor(l/(1e3*60)%60),f=Math.floor(l/1e3%60);return{days:c,hours:u,minutes:h,seconds:f}}t(i());const s=setInterval(()=>{t(i())},1e3);return()=>clearInterval(s)},[]),m.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/40",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-sm w-full text-center",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Countdown Ulang Tahun"}),e?m.jsxs("div",{className:"mb-4 text-2xl font-mono flex justify-center gap-2",children:[m.jsxs("span",{children:[e.days," ",m.jsx("span",{className:"text-xs font-normal",children:"hari"})]}),m.jsx("span",{children:":"}),m.jsxs("span",{children:[String(e.hours).padStart(2,"0"),m.jsx("span",{className:"text-xs font-normal",children:"j"})]}),m.jsx("span",{children:":"}),m.jsxs("span",{children:[String(e.minutes).padStart(2,"0"),m.jsx("span",{className:"text-xs font-normal",children:"m"})]}),m.jsx("span",{children:":"}),m.jsxs("span",{children:[String(e.seconds).padStart(2,"0"),m.jsx("span",{className:"text-xs font-normal",children:"d"})]})]}):m.jsx("p",{className:"mb-4",children:"Menghitung..."}),m.jsxs("p",{className:"mb-4",children:["Menuju ulang tahun ",m.jsx("b",{children:"Mahapala Narotama"})," yang ke"," ",(()=>{const r=new Date;return(r.getMonth()>0||r.getMonth()===0&&r.getDate()>26?r.getFullYear()+1:r.getFullYear())-2017})()," ","pada tanggal 26 Januari ",(()=>{const r=new Date;return r.getMonth()>0||r.getMonth()===0&&r.getDate()>26?r.getFullYear()+1:r.getFullYear()})()]}),m.jsx(zt,{onClick:n,children:"Tutup"})]})})}function S2e(){const[n,e]=O.useState("fullName"),[t,r]=O.useState(""),[i,s]=O.useState(!0),[o,a]=O.useState(null),[l,c]=O.useState({open:!1,photoUrl:"",fullName:"",zoom:!1}),[u,h]=O.useState({open:!1,frontUrl:"",backUrl:"",fullName:""}),[f,p]=O.useState(!1),{data:v,isLoading:_}=a2e(),S=()=>{},x=()=>{a(null),s(!0)},E=v==null?void 0:v.filter(K=>{if(!t)return!0;const te=t.toLowerCase();switch(n){case"fullName":return K.fullName.toLowerCase().includes(te);case"batchYear":return K.batchYear.toString().includes(te);case"registrationNumber":return K.registrationNumber.toLowerCase().includes(te);default:return!0}}),b=v==null?void 0:v.find(K=>K.id===o),M=new Date(2017,0,26),k=new Date,B=k.getFullYear()-M.getFullYear(),P=k.getMonth()-M.getMonth(),N=k.getDate()-M.getDate();let R=`${B} tahun`;P>0||P===0&&N>=0?R=`${B} tahun
${P>=0?P:12+P} bulan`:B>0&&(R=`${B-1} tahun
${12+P} bulan`);const I=(v==null?void 0:v.length)||0,U=v?Array.from(new Set(v.map(K=>K.batchName))).length:0,H=v?v.filter(K=>(K.gender||"").toLowerCase()==="laki-laki"||(K.gender||"").toLowerCase()==="l"||(K.gender||"").toLowerCase()==="male").length:0,W=v?v.filter(K=>(K.gender||"").toLowerCase()==="perempuan"||(K.gender||"").toLowerCase()==="p"||(K.gender||"").toLowerCase()==="female").length:0;return m.jsx(m.Fragment,{children:m.jsx("section",{id:"kartu-anggota",className:"py-8 sm:py-12 bg-white",children:m.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[m.jsxs("div",{className:"grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7 gap-3 sm:gap-4 mb-6 sm:mb-10 text-center",children:[m.jsxs("div",{className:"bg-green-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full relative",children:[m.jsx("button",{type:"button",className:"absolute top-2 right-2 p-1 rounded-full hover:bg-green-100 transition","aria-label":"Lihat hitung mundur ulang tahun",onClick:()=>p(!0),children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-pink-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7c0-1.105.895-2 2-2s2 .895 2 2"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7c0-1.105-.895-2-2-2s-2 .895-2 2"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v2"})]})}),m.jsx("span",{className:"text-xs text-gray-500 mb-1",children:"Umur Organisasi"}),m.jsx("span",{className:"text-2xl font-bold text-green-700 whitespace-pre-line",children:R}),m.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Sejak 26 Januari 2017"}),f&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:[m.jsx("div",{className:"absolute inset-0",onClick:()=>p(!1)}),m.jsxs("div",{className:"relative z-10 bg-white rounded-xl shadow-lg p-8 flex flex-col items-center min-w-[320px]",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-pink-500 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7c0-1.105.895-2 2-2s2 .895 2 2"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7c0-1.105-.895-2-2-2s-2 .895-2 2"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v2"})]}),m.jsx(w2e,{name:"Organisasi",onClose:()=>p(!1)}),m.jsx(zt,{className:"mt-4",variant:"outline",onClick:()=>p(!1),children:"Tutup"})]})]})]}),m.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full",children:[m.jsx("span",{className:"text-s text-gray-500 mb-1",children:"Jumlah Anggota"}),m.jsx(hg,{value:I,className:"text-2xl font-bold text-blue-700"}),m.jsx("span",{className:"text-s text-gray-400 mt-1",children:"Total anggota terdaftar"})]}),m.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full",children:[m.jsx("span",{className:"text-s text-gray-500 mb-1",children:"Jumlah Angkatan"}),m.jsx(hg,{value:U,className:"text-2xl font-bold text-yellow-700"}),m.jsx("span",{className:"text-s text-gray-400 mt-1",children:"Total Angkatan"})]}),m.jsxs("div",{className:"bg-emerald-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full",children:[m.jsx("span",{className:"text-s text-gray-500 mb-1",children:"Anggota Penuh"}),m.jsx(hg,{value:v?v.filter(K=>K.membershipStatus==="Anggota Penuh").length:0,className:"text-2xl font-bold text-emerald-700"}),m.jsx("span",{className:"text-s text-gray-400 mt-1",children:"Total anggota penuh"})]}),m.jsxs("div",{className:"bg-lime-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full",children:[m.jsx("span",{className:"text-s text-gray-500 mb-1",children:"Anggota Muda"}),m.jsx(hg,{value:v?v.filter(K=>K.membershipStatus==="Anggota Muda").length:0,className:"text-2xl font-bold text-lime-700"}),m.jsx("span",{className:"text-s text-gray-400 mt-1",children:"Total anggota muda"})]}),m.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full",children:[m.jsx("span",{className:"text-s text-gray-500 mb-1",children:"Anggota Laki-laki"}),m.jsx(hg,{value:H,className:"text-2xl font-bold text-indigo-700"}),m.jsx("span",{className:"text-s text-gray-400 mt-1",children:"Total anggota laki-laki"})]}),m.jsxs("div",{className:"bg-pink-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full",children:[m.jsx("span",{className:"text-s text-gray-500 mb-1",children:"Anggota Perempuan"}),m.jsx(hg,{value:W,className:"text-2xl font-bold text-pink-700"}),m.jsx("span",{className:"text-s text-gray-400 mt-1",children:"Total anggota perempuan"})]})]}),i?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"max-w-3xl mx-auto mb-8 sm:mb-10 bg-gray-50 p-3 sm:p-6 rounded-lg shadow-md",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("p",{className:"text-gray-700 mb-4",children:"Masukkan informasi anggota untuk pencarian:"}),m.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[m.jsx("div",{className:"flex-1",children:m.jsxs(GK,{value:n,onValueChange:e,children:[m.jsx(WO,{children:m.jsx($K,{placeholder:"Pilih Tipe Pencarian"})}),m.jsxs(GO,{className:"bg-white",children:[m.jsx(B0,{value:"fullName",children:"Nama Lengkap"}),m.jsx(B0,{value:"batchYear",children:"Tahun Angkatan"}),m.jsx(B0,{value:"registrationNumber",children:"Nomor Registrasi"})]})]})}),m.jsx("div",{className:"flex-1",children:m.jsx(ii,{placeholder:"Masukkan kata kunci...",value:t,onChange:K=>r(K.target.value)})}),m.jsxs(zt,{onClick:S,className:"gap-2",children:[m.jsx(Kpe,{className:"h-4 w-4"}),"Cari"]})]})]}),m.jsx("div",{className:"text-sm text-gray-500",children:m.jsxs("p",{className:"flex items-center gap-1",children:[m.jsx("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Data anggota hanya dapat diakses oleh pihak yang berwenang. Hasil pencarian akan menampilkan informasi dasar anggota."]})})]}),t?m.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow-md",children:_?m.jsx("div",{className:"p-8",children:m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx(yo,{className:"h-8 w-full"}),m.jsx(yo,{className:"h-8 w-full"}),m.jsx(yo,{className:"h-8 w-full"}),m.jsx(yo,{className:"h-8 w-full"})]})}):E&&E.length>0?m.jsxs(c0,{className:"min-w-[600px] text-xs sm:text-sm md:text-base",children:[m.jsx(u0,{children:m.jsxs(Kl,{children:[m.jsx(Or,{children:"Nama Lengkap"}),m.jsx(Or,{children:"Nama Lapangan"}),m.jsx(Or,{children:"Nama Angkatan"}),m.jsx(Or,{children:"Tahun Angkatan"}),m.jsx(Or,{children:"No. Registrasi"}),m.jsx(Or,{children:"Keanggotaan"}),m.jsx(Or,{children:"Aksi"})]})}),m.jsx(h0,{children:E.map(K=>m.jsxs(Kl,{children:[m.jsx(Lr,{className:"font-medium",children:K.fullName}),m.jsx(Lr,{children:K.fieldName}),m.jsx(Lr,{children:K.batchName}),m.jsx(Lr,{children:K.batchYear}),m.jsx(Lr,{children:K.registrationNumber}),m.jsx(Lr,{children:K.membershipStatus==="Anggota Penuh"?m.jsx(Go,{variant:"penuh",children:"Anggota Penuh"}):K.membershipStatus==="Anggota Muda"?m.jsx(Go,{variant:"muda",children:"Anggota Muda"}):m.jsx(Go,{children:K.membershipStatus})}),m.jsxs(Lr,{className:"flex space-x-2",children:[m.jsx(zt,{variant:"outline",size:"icon",onClick:()=>c({open:!0,photoUrl:K.photoUrl||"",fullName:K.fullName}),className:"text-primary hover:text-primary-foreground hover:bg-primary",disabled:!K.photoUrl,children:m.jsx(Vpe,{className:"h-4 w-4"})}),m.jsx(zt,{variant:"outline",size:"icon",onClick:()=>h({open:!0,frontUrl:K.photoUrl||"",backUrl:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/back.png",fullName:K.fullName}),className:"text-primary hover:text-primary-foreground hover:bg-primary",disabled:!K.photoUrl,children:m.jsx("span",{className:"font-bold",children:"3D"})})]})]},K.id))})]}):m.jsxs("div",{className:"text-center py-8",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Tidak ada anggota ditemukan"}),m.jsx("p",{className:"text-gray-500",children:"Coba ubah kata kunci pencarian Anda"})]})}):m.jsxs("div",{className:"text-center py-8",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Masukkan kata kunci untuk mencari anggota"}),m.jsx("p",{className:"text-gray-500",children:"Anda dapat mencari berdasarkan nama, tahun angkatan, atau nomor registrasi"})]}),m.jsx(Nf,{open:l.open,onOpenChange:K=>c(te=>({...te,open:K})),children:m.jsx(Rh,{className:"flex flex-col items-center max-w-full p-2 sm:p-6",children:l.photoUrl&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"relative overflow-hidden rounded border mt-3 mb-4 bg-white w-full max-w-[480px] h-[220px] sm:h-[300px] flex items-center justify-center cursor-zoom-in",style:{maxWidth:"95vw",maxHeight:"70vh"},tabIndex:0,onClick:K=>{K.stopPropagation(),c(te=>({...te,zoom:!0}))},onKeyDown:K=>{(K.key==="Enter"||K.key===" ")&&c(te=>({...te,zoom:!0}))},"aria-label":"Perbesar gambar",children:[m.jsx("img",{src:l.photoUrl,alt:l.fullName,className:"object-contain w-full h-full",style:{aspectRatio:"3/2",maxHeight:"100%",maxWidth:"100%"}}),m.jsx("span",{className:"absolute bottom-2 right-2 bg-black/60 text-white text-xs px-2 py-1 rounded pointer-events-none",children:"Klik untuk zoom"})]}),m.jsx(zt,{variant:"default",className:"w-full",onClick:async()=>{try{const te=await(await fetch(l.photoUrl,{mode:"cors"})).blob(),se=window.URL.createObjectURL(te),le=document.createElement("a");le.href=se,le.download=l.photoUrl.split("/").pop()||"kartu-anggota.jpg",document.body.appendChild(le),le.click(),document.body.removeChild(le),window.URL.revokeObjectURL(se)}catch{window.open(l.photoUrl,"_blank")}},children:"Unduh Kartu"}),l.zoom&&m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",onClick:()=>c(K=>({...K,zoom:!1})),children:m.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg p-2 sm:p-4",style:{maxWidth:"98vw",maxHeight:"95vh"},onClick:K=>K.stopPropagation(),children:[m.jsx("img",{src:l.photoUrl,alt:l.fullName,className:"object-contain",style:{maxHeight:"80vh",maxWidth:"95vw"}}),m.jsx(zt,{variant:"outline",className:"absolute top-2 right-2",onClick:()=>c(K=>({...K,zoom:!1})),children:"Tutup"})]})})]})})}),m.jsx(_2e,{open:u.open,onClose:()=>h(K=>({...K,open:!1})),frontUrl:u.frontUrl,backUrl:u.backUrl,fullName:u.fullName})]}):m.jsx(m.Fragment,{children:m.jsxs("div",{className:"mb-6",children:[m.jsx(zt,{variant:"outline",onClick:x,className:"mb-8",children:" Kembali ke Pencarian"}),b&&m.jsx(v2e,{member:{...b,id:String(b.id)}})]})})]})})})}function E2e(){const[n,e]=O.useState("general"),[t,r]=O.useState(""),[i,s]=O.useState("");O.useEffect(()=>{vk().then(u=>{u!=null&&u.googleFormUrl&&r(u.googleFormUrl),u!=null&&u.googleFormDownloadUrl&&s(u.googleFormDownloadUrl)})},[]);const[o,a]=O.useState(!1);O.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);const l={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},c={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return m.jsxs(m.Fragment,{children:[m.jsx("section",{className:"py-8 sm:py-12 bg-white",children:m.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[m.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[m.jsxs("h1",{className:"font-heading text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800 mb-3 sm:mb-4 relative inline-block",children:["Informasi Pendaftaran Anggota Baru",m.jsx("span",{className:"absolute -bottom-2 left-0 w-full h-1 bg-primary rounded-full"})]}),m.jsx("p",{className:"text-base sm:text-lg text-gray-600 max-w-3xl mx-auto mt-4 sm:mt-6",children:"Bergabunglah dengan Mahapala Narotama dan jadilah bagian dari komunitas yang peduli terhadap pelestarian lingkungan dan eksplorasi alam."})]}),m.jsx("div",{className:"mb-6 sm:mb-8 flex overflow-x-auto scrollbar-hide",children:m.jsxs("div",{className:"max-w-4xl mx-auto flex space-x-1 p-1 bg-gray-100 rounded-lg w-full",children:[m.jsx(zt,{variant:n==="general"?"default":"ghost",onClick:()=>e("general"),className:"flex-1 whitespace-nowrap",children:"Informasi Umum"}),m.jsx(zt,{variant:n==="requirements"?"default":"ghost",onClick:()=>e("requirements"),className:"flex-1 whitespace-nowrap",children:"Persyaratan"}),m.jsx(zt,{variant:n==="timeline"?"default":"ghost",onClick:()=>e("timeline"),className:"flex-1 whitespace-nowrap",children:"Tahapan Seleksi"}),m.jsx(zt,{variant:n==="faq"?"default":"ghost",onClick:()=>e("faq"),className:"flex-1 whitespace-nowrap",children:"FAQ"})]})}),m.jsxs("div",{className:"max-w-4xl mx-auto",children:[n==="general"&&m.jsxs(yr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"bg-white p-6 rounded-lg shadow-md",children:[m.jsx("h3",{className:"font-heading text-xl font-semibold mb-4",children:"Informasi Umum Pendaftaran"}),m.jsx("p",{className:"text-gray-700 mb-4",children:"Mahapala Narotama membuka pendaftaran anggota baru untuk mahasiswa aktif Universitas Narotama yang memiliki minat dan kepedulian pada alam, lingkungan, dan kegiatan outdoor. Pendaftaran dilaksanakan setahun sekali pada awal tahun akademik."}),m.jsx("p",{className:"text-gray-700 mb-4",children:"Sebagai anggota Mahapala Narotama, Anda akan memiliki kesempatan untuk:"}),m.jsxs(yr.ul,{className:"space-y-3 mb-6 pl-6",variants:l,initial:"hidden",animate:"show",children:[m.jsxs(yr.li,{variants:c,className:"flex items-start",children:[m.jsx(sg,{className:"text-primary min-w-5 h-5 mr-2 mt-0.5"}),m.jsx("span",{children:"Mengikuti berbagai ekspedisi dan pendakian gunung di Indonesia"})]}),m.jsxs(yr.li,{variants:c,className:"flex items-start",children:[m.jsx(sg,{className:"text-primary min-w-5 h-5 mr-2 mt-0.5"}),m.jsx("span",{children:"Berpartisipasi dalam program konservasi dan pelestarian lingkungan"})]}),m.jsxs(yr.li,{variants:c,className:"flex items-start",children:[m.jsx(sg,{className:"text-primary min-w-5 h-5 mr-2 mt-0.5"}),m.jsx("span",{children:"Mempelajari keterampilan survival, navigasi, pertolongan pertama, panjat tebing"})]}),m.jsxs(yr.li,{variants:c,className:"flex items-start",children:[m.jsx(sg,{className:"text-primary min-w-5 h-5 mr-2 mt-0.5"}),m.jsx("span",{children:"Membangun jaringan dengan komunitas pecinta alam di seluruh Indonesia"})]}),m.jsxs(yr.li,{variants:c,className:"flex items-start",children:[m.jsx(sg,{className:"text-primary min-w-5 h-5 mr-2 mt-0.5"}),m.jsx("span",{children:"Mengembangkan kemampuan kepemimpinan dan kerja sama tim"})]})]}),m.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-400 p-4 mb-6",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx(k$,{className:"h-5 w-5 text-amber-400"})}),m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-amber-700",children:"Pendaftaran hanya dibuka selama periode yang ditentukan. Pastikan Anda melengkapi semua persyaratan dan mengikuti seluruh tahapan seleksi."})})]})}),m.jsx("div",{className:"mt-6 flex justify-center",children:m.jsx("a",{href:t||void 0,target:"_blank",rel:"noopener noreferrer",children:m.jsxs(zt,{className:"gap-2",disabled:!t,children:["Daftar Sekarang ",m.jsx(P$,{className:"h-4 w-4"})]})})})]}),n==="requirements"&&m.jsxs(yr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"bg-white p-6 rounded-lg shadow-md",children:[m.jsx("h3",{className:"font-heading text-xl font-semibold mb-4",children:"Persyaratan Pendaftaran"}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h4",{className:"font-medium text-lg mb-2",children:"Persyaratan Umum"}),m.jsxs("ul",{className:"space-y-2 pl-6 list-disc text-gray-700",children:[m.jsx("li",{children:"Mahasiswa aktif Universitas Narotama (dibuktikan dengan kartu mahasiswa)"}),m.jsx("li",{children:"Minimal semester 1 dan maksimal semester 5"}),m.jsx("li",{children:"Sehat jasmani dan rohani (dibuktikan dengan surat keterangan sehat)"}),m.jsx("li",{children:"Memiliki minat dalam kegiatan alam terbuka"}),m.jsx("li",{children:"Bersedia mengikuti seluruh rangkaian proses seleksi"}),m.jsx("li",{children:"Mendapat izin dari orang tua/wali (dibuktikan dengan surat pernyataan)"})]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h4",{className:"font-medium text-lg mb-2",children:"Dokumen Pendaftaran"}),m.jsxs("ul",{className:"space-y-2 pl-6 list-disc text-gray-700",children:[m.jsx("li",{children:"Formulir pendaftaran yang telah diisi lengkap"}),m.jsx("li",{children:"Pas foto berwarna ukuran 3x4 (1 lembar)"}),m.jsx("li",{children:"Fotokopi Kartu Mahasiswa"}),m.jsx("li",{children:"Surat keterangan sehat dari dokter"}),m.jsx("li",{children:"Surat pernyataan kesediaan mengikuti seleksi"}),m.jsx("li",{children:"Surat izin orang tua/wali"}),m.jsx("li",{children:"Essay singkat tentang motivasi bergabung dengan Mahapala (maksimal 1 halaman)"})]})]}),m.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[m.jsx("h4",{className:"font-medium text-lg mb-2",children:"Biaya Pendaftaran"}),m.jsx("p",{className:"text-gray-700 mb-2",children:"Biaya pendaftaran: Rp 250.000,-"}),m.jsx("p",{className:"text-gray-700 mb-2",children:"Biaya tersebut mencakup:"}),m.jsxs("ul",{className:"space-y-1 pl-6 list-disc text-gray-700",children:[m.jsx("li",{children:"Administrasi pendaftaran"}),m.jsx("li",{children:"Kit pendaftaran (formulir, modul, dan atribut)"}),m.jsx("li",{children:"Biaya Transportasi dan Tiket masuk"}),m.jsx("li",{children:"Biaya operasional diklat dasar"})]}),m.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"*Pembayaran dapat dilakukan melalui transfer bank atau tunai saat pendaftaran"})]}),m.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx(sg,{className:"h-5 w-5 text-green-400"})}),m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-green-700",children:'Semua dokumen persyaratan dikumpulkan dalam bentuk hardcopy pada saat pendaftaran dan softcopy dikirim ke email ukm.mahapala@narotama.ac.id dengan subjek "PENDAFTARANCAANG2025_[NAMA]_[NIM]"'})})]})})]}),n==="timeline"&&m.jsxs(yr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"bg-white p-6 rounded-lg shadow-md",children:[m.jsx("h3",{className:"font-heading text-xl font-semibold mb-4",children:"Timeline Pendaftaran & Seleksi"}),m.jsxs("div",{className:"relative ml-6 pl-8 border-l-2 border-primary/30 space-y-10",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute -left-[41px] border-4 border-white rounded-full bg-primary h-6 w-6"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-gray-500",children:"15 Agustus - 30 September 2025"}),m.jsx("h4",{className:"font-medium text-gray-800",children:"Pendaftaran Online dan Offline"}),m.jsx("p",{className:"text-gray-600 text-sm",children:"Pengisian formulir pendaftaran dan pengumpulan berkas persyaratan"})]})]}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute -left-[41px] border-4 border-white rounded-full bg-primary h-6 w-6"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-gray-500",children:"05 - 07 Oktober 2025"}),m.jsx("h4",{className:"font-medium text-gray-800",children:"Tes Tertulis & Wawancara"}),m.jsx("p",{className:"text-gray-600 text-sm",children:"Tes pengetahuan umum dan wawancara motivasi"})]})]}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute -left-[41px] border-4 border-white rounded-full bg-primary h-6 w-6"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-gray-500",children:"07 Oktober 2025"}),m.jsx("h4",{className:"font-medium text-gray-800",children:"Pengumuman Hasil Seleksi"}),m.jsx("p",{className:"text-gray-600 text-sm",children:"Pengumuman calon anggota yang lolos seleksi"})]})]}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute -left-[41px] border-4 border-white rounded-full bg-primary h-6 w-6"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-gray-500",children:"08 Oktober - 13 November 2025"}),m.jsx("h4",{className:"font-medium text-gray-800",children:"Pra Diklat"}),m.jsx("p",{className:"text-gray-600 text-sm",children:"Pelatihan dan Pembekalan Materi serta fisik"})]})]}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute -left-[41px] border-4 border-white rounded-full bg-primary h-6 w-6"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-gray-500",children:"15 - 17 November 2025"}),m.jsx("h4",{className:"font-medium text-gray-800",children:"Diklat Dasar"}),m.jsx("p",{className:"text-gray-600 text-sm",children:"Pelatihan dasar kepencintaalaman dan team building"})]})]}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute -left-[41px] border-4 border-white rounded-full bg-primary h-6 w-6"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-gray-500",children:"17 November 2025"}),m.jsx("h4",{className:"font-medium text-gray-800",children:"Pelantikan Anggota Baru"}),m.jsx("p",{className:"text-gray-600 text-sm",children:"Upacara pelantikan dan penyematan Scraft Kuning anggota baru"})]})]})]})]}),n==="faq"&&m.jsxs(yr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"bg-white p-6 rounded-lg shadow-md",children:[m.jsx("h3",{className:"font-heading text-xl font-semibold mb-6",children:"Pertanyaan Umum (FAQ)"}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-lg text-primary",children:"Apakah harus memiliki pengalaman kegiatan outdoor sebelumnya?"}),m.jsx("p",{className:"text-gray-700 mt-2",children:"Tidak, Anda tidak harus memiliki pengalaman kegiatan outdoor sebelumnya. Mahapala Narotama akan memberikan pelatihan dasar untuk semua anggota baru. Yang terpenting adalah minat dan komitmen untuk belajar."})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-lg text-primary",children:"Apakah ada persyaratan fisik tertentu?"}),m.jsx("p",{className:"text-gray-700 mt-2",children:"Tidak ada persyaratan fisik khusus, namun Anda diharapkan dalam kondisi sehat dan siap mengikuti rangkaian kegiatan outdoor yang mungkin membutuhkan stamina dan ketahanan fisik. Latihan fisik dasar akan diberikan selama proses seleksi."})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-lg text-primary",children:"Berapa banyak waktu yang perlu diluangkan jika menjadi anggota Mahapala?"}),m.jsx("p",{className:"text-gray-700 mt-2",children:"Sebagai anggota Mahapala, Anda diharapkan dapat menghadiri pertemuan rutin mingguan (2-3 jam) dan berpartisipasi dalam kegiatan bulanan (biasanya pada akhir pekan). Kegiatan ekspedisi atau pendakian biasanya dilakukan pada masa liburan semester."})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-lg text-primary",children:"Berapa biaya yang diperlukan setelah menjadi anggota?"}),m.jsx("p",{className:"text-gray-700 mt-2",children:"Anggota Mahapala akan dikenakan iuran bulanan sebesar Rp 25.000,- yang digunakan untuk operasional organisasi. Untuk kegiatan-kegiatan tertentu seperti ekspedisi atau pendakian, akan ada biaya tambahan yang besarnya tergantung pada jenis dan lokasi kegiatan."})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-lg text-primary",children:"Apakah perlu memiliki perlengkapan outdoor sendiri?"}),m.jsx("p",{className:"text-gray-700 mt-2",children:"Untuk tahap awal, Anda tidak perlu memiliki semua perlengkapan outdoor. Mahapala memiliki beberapa perlengkapan yang dapat dipinjam oleh anggota. Seiring berjalannya waktu, Anda dapat secara bertahap melengkapi perlengkapan pribadi."})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-lg text-primary",children:"Apakah saya bisa mengikuti kegiatan Mahapala sambil aktif di organisasi lain?"}),m.jsx("p",{className:"text-gray-700 mt-2",children:"Tidak disarankan, Tetapi Anda tetap bisa aktif di organisasi lain. Namun, perlu diingat bahwa sebagai anggota Mahapala, Anda diharapkan dapat berkomitmen untuk berpartisipasi dalam kegiatan-kegiatan penting dan memenuhi tanggung jawab sebagai anggota."})]})]}),m.jsxs("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[m.jsx("h4",{className:"font-medium text-center mb-3",children:"Masih punya pertanyaan lain?"}),m.jsx("p",{className:"text-gray-700 text-center mb-4",children:"Jika Anda memiliki pertanyaan lain yang belum terjawab, jangan ragu untuk menghubungi kami."}),m.jsx("div",{className:"flex justify-center",children:m.jsxs(zt,{variant:"outline",className:"gap-2",onClick:()=>a(!0),children:[m.jsx(Rx,{className:"h-4 w-4"})," Hubungi Kami"]})})]})]})]}),m.jsx(yr.div,{className:"max-w-4xl mx-auto mb-16",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5},children:m.jsxs("div",{className:"bg-gradient-to-br from-primary/5 to-primary/10 p-8 rounded-xl shadow-md",children:[m.jsxs("div",{className:"flex flex-col md:flex-row justify-between mb-10 space-y-4 md:space-y-0",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h2",{className:"text-2xl font-heading font-bold text-gray-800 mb-2",children:"Periode Pendaftaran 2025"}),m.jsx("p",{className:"text-gray-600",children:"Pendaftaran anggota baru Mahapala tahun 2025"})]}),m.jsx("div",{children:m.jsx("a",{href:i||"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/main/assets/form%20pendaftaran%20anggota.docx",download:"formulir_pendaftaran_ukm_mahapala_narotama_2025.docx",children:m.jsx(zt,{className:"gap-2 bg-primary hover:bg-primary/90",asChild:!0,children:m.jsxs("span",{children:[m.jsx(Bpe,{size:16}),"Unduh Formulir"]})})})})]}),m.jsxs("div",{className:"mb-8",children:[m.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[m.jsx("div",{className:"bg-primary text-white p-3 rounded-full",children:m.jsx(N$,{size:20})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium text-lg",children:"Jadwal Pendaftaran"}),m.jsx("p",{className:"text-gray-600",children:"15 Agustus - 30 September 2025"})]})]}),m.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[m.jsx("div",{className:"bg-primary text-white p-3 rounded-full",children:m.jsx(Ak,{size:20})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium text-lg",children:"Kuota Anggota"}),m.jsx("p",{className:"text-gray-600",children:"Maksimal 50 mahasiswa baru"})]})]}),m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx("div",{className:"bg-primary text-white p-3 rounded-full",children:m.jsx(jpe,{size:20})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium text-lg",children:"Persyaratan Utama"}),m.jsx("p",{className:"text-gray-600",children:"Mahasiswa aktif Universitas Narotama"})]})]})]})]})}),m.jsxs("div",{className:"mt-16",children:[m.jsx("h3",{className:"font-heading text-2xl font-bold text-center mb-8",children:"Kontak Informasi Pendaftaran"}),m.jsxs("div",{className:"grid md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[m.jsxs(Tl,{className:"hover:shadow-lg transition duration-300",children:[m.jsxs(O0,{className:"pb-2",children:[m.jsx(j1,{className:"text-lg",children:"Sekretariat"}),m.jsx(YE,{children:"Kesekretariatan Mahapala Narotama"})]}),m.jsxs(du,{children:[m.jsx("p",{className:"text-sm",children:"Ruang BEM (D3.01), Gedung D Lt. 3, Universitas Narotama"}),m.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Senin - Jumat, 09:00 - 16:00 WIB"})]})]}),m.jsxs(Tl,{className:"hover:shadow-lg transition duration-300",children:[m.jsxs(O0,{className:"pb-2",children:[m.jsx(j1,{className:"text-lg",children:"Narahubung"}),m.jsx(YE,{children:"Informasi Pendaftaran"})]}),m.jsxs(du,{children:[m.jsx("p",{className:"text-sm",children:"Yuan (Koordinator): 081234567890"}),m.jsx("p",{className:"text-sm",children:"Nadia (Sekretaris): 089876543210"})]})]}),m.jsxs(Tl,{className:"hover:shadow-lg transition duration-300",children:[m.jsxs(O0,{className:"pb-2",children:[m.jsx(j1,{className:"text-lg",children:"Media Sosial"}),m.jsx(YE,{children:"Ikuti kami untuk update"})]}),m.jsxs(du,{children:[m.jsx("p",{className:"text-sm",children:"Instagram: @mahapalanarotama"}),m.jsx("p",{className:"text-sm",children:"YouTube: @mahapalanarotama1216"})]})]})]})]})]})}),m.jsx(Nf,{open:o,onOpenChange:a,children:m.jsx(Rh,{className:"max-w-xs w-full p-0 rounded-xl",children:m.jsxs("div",{className:"p-6 flex flex-col items-center gap-4",children:[m.jsx("h2",{className:"font-heading text-lg font-bold mb-2",children:"Hubungi Kami"}),m.jsxs("div",{className:"flex gap-6 justify-center",children:[m.jsx("a",{href:"https://instagram.com/mahapalanarotama",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary hover:scale-110 transition-transform",title:"Instagram",children:m.jsx(aT,{size:36})}),m.jsx("a",{href:"https://wa.me/6281234567890",target:"_blank",rel:"noopener noreferrer",className:"hover:text-green-600 hover:scale-110 transition-transform",title:"WhatsApp",children:m.jsx(k_,{size:36})}),m.jsx("a",{href:"mailto:ukm.mahapala@narotama.ac.id",className:"hover:text-blue-600 hover:scale-110 transition-transform",title:"Email",children:m.jsx(Rx,{size:36})})]}),m.jsxs("div",{className:"text-center text-xs text-gray-500 mt-2",children:["Instagram: @mahapalanarotama",m.jsx("br",{}),"WhatsApp: 0812-3456-7890",m.jsx("br",{}),"Email: ukm.mahapala@narotama.ac.id"]})]})})})]})}function b2e({open:n,onOpenChange:e,imageUrl:t,alt:r}){const i=fn.useRef(null),s=()=>{i.current&&i.current.requestFullscreen&&i.current.requestFullscreen()};return m.jsx(Nf,{open:n,onOpenChange:e,children:m.jsxs(Rh,{className:"max-w-2xl w-full p-0 rounded-xl bg-black/90 flex flex-col items-center relative",children:[m.jsx("button",{className:"absolute top-2 right-2 z-10 bg-white/80 hover:bg-white rounded-full p-1 shadow",onClick:()=>e(!1),"aria-label":"Tutup",children:m.jsx(lT,{size:24})}),m.jsxs("div",{className:"flex flex-col items-center w-full",children:[m.jsx("img",{ref:i,src:t,alt:r||"Preview",className:"max-h-[70vh] w-auto max-w-full rounded-xl object-contain bg-black cursor-zoom-in",onClick:s,style:{margin:"auto"}}),m.jsx("button",{className:"mt-4 px-4 py-2 rounded bg-white/80 hover:bg-white text-black font-semibold shadow",onClick:s,children:"Perbesar / Fullscreen"})]})]})})}function A2e(){const{data:n,isLoading:e}=Aq(),[t,r]=O.useState(!1),[i,s]=O.useState(null);return m.jsx("section",{className:"py-10 sm:py-16 bg-gradient-to-br from-white via-blue-50 to-blue-100 min-h-screen",children:m.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[m.jsxs(yr.div,{className:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6,type:"spring"},children:[m.jsx("h1",{className:"font-heading text-2xl sm:text-3xl md:text-4xl font-bold text-center sm:text-left bg-gradient-to-r from-primary to-blue-600 bg-clip-text text-transparent drop-shadow-lg",children:"Galeri Kegiatan"}),m.jsxs("div",{className:"flex gap-2 w-full sm:w-auto justify-center",children:[m.jsx(Va,{href:"/",children:m.jsx(zt,{variant:"outline",className:"w-full sm:w-auto shadow-md hover:scale-105 transition-transform",children:"Kembali ke Beranda"})}),m.jsx(zt,{variant:"default",className:"w-full sm:w-auto shadow-md hover:scale-105 transition-transform bg-gradient-to-r from-primary to-blue-600 text-white",onClick:o=>{o.preventDefault(),r(!0)},children:"Hubungi Kami"})]})]}),e?m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 md:gap-6 animate-pulse",children:[...Array(9)].map((o,a)=>m.jsx("div",{className:"bg-gray-200 h-40 sm:h-56 md:h-64 rounded-xl"},a))}):n&&n.length>0?m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 sm:gap-3 md:gap-4 auto-rows-[120px] sm:auto-rows-[180px] md:auto-rows-[220px]",children:n.map((o,a)=>m.jsxs("div",{className:"relative overflow-hidden rounded-xl shadow-lg group border border-gray-100 bg-white hover:shadow-2xl transition-all duration-300 flex flex-col justify-end "+(a%7===0?"md:row-span-2 md:col-span-2 h-[120px] md:h-[320px]":a%5===0?"md:row-span-2 h-[120px] md:h-[320px]":"h-[120px] md:h-full"),style:{cursor:o.imageUrl?"pointer":"default"},onClick:()=>o.imageUrl&&s(o.imageUrl),children:[o.imageUrl?m.jsx("img",{src:o.imageUrl,alt:o.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",loading:"lazy"}):m.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center text-gray-400",children:"Tidak ada gambar"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition flex items-end justify-center pointer-events-none",children:m.jsxs("div",{className:"w-full p-2 pb-4 text-white text-center bg-gradient-to-t from-black/60 to-transparent rounded-b-xl",children:[m.jsx("h3",{className:"font-bold text-base mb-1 drop-shadow-lg line-clamp-1",children:o.title}),o.description&&m.jsx("p",{className:"text-xs line-clamp-2 drop-shadow",children:o.description})]})})]},o.id))}):m.jsxs(m.Fragment,{children:[m.jsx(b2e,{open:!!i,onOpenChange:o=>s(o?i:null),imageUrl:i||""}),m.jsx("div",{className:"text-center text-gray-500 py-20",children:n&&n.length===0?"Tidak ada data galeri.":null})]}),m.jsx(Nf,{open:t,onOpenChange:r,children:m.jsx(Rh,{className:"max-w-xs w-full p-0 rounded-xl",children:m.jsxs("div",{className:"p-6 flex flex-col items-center gap-4",children:[m.jsx("h2",{className:"font-heading text-lg font-bold mb-2",children:"Hubungi Kami"}),m.jsxs("div",{className:"flex gap-6 justify-center",children:[m.jsx("a",{href:"https://instagram.com/mahapalanarotama",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary hover:scale-110 transition-transform",title:"Instagram",children:m.jsx(aT,{size:36})}),m.jsx("a",{href:"https://wa.me/6281234567890",target:"_blank",rel:"noopener noreferrer",className:"hover:text-green-600 hover:scale-110 transition-transform",title:"WhatsApp",children:m.jsx(k_,{size:36})}),m.jsx("a",{href:"mailto:ukm.mahapala@narotama.ac.id",className:"hover:text-blue-600 hover:scale-110 transition-transform",title:"Email",children:m.jsx(Rx,{size:36})})]}),m.jsxs("div",{className:"text-center text-xs text-gray-500 mt-2",children:["Instagram: @mahapalanarotama",m.jsx("br",{}),"WhatsApp: 0812-3456-7890",m.jsx("br",{}),"Email: ukm.mahapala@narotama.ac.id"]})]})})})]})})}function fU(n,e,t){const r=Zye(),i=M2e(n,t.timeZone,t.locale??r.locale);return"formatToParts"in i?T2e(i,e):C2e(i,e)}function T2e(n,e){const t=n.formatToParts(e);for(let r=t.length-1;r>=0;--r)if(t[r].type==="timeZoneName")return t[r].value}function C2e(n,e){const t=n.format(e).replace(/\u200E/g,""),r=/ [\w-+ ]+$/.exec(t);return r?r[0].substr(1):""}function M2e(n,e,t){return new Intl.DateTimeFormat(t?[t.code,"en-US"]:void 0,{timeZone:e,timeZoneName:n})}function I2e(n,e){const t=k2e(e);return"formatToParts"in t?R2e(t,n):N2e(t,n)}const P2e={year:0,month:1,day:2,hour:3,minute:4,second:5};function R2e(n,e){try{const t=n.formatToParts(e),r=[];for(let i=0;i<t.length;i++){const s=P2e[t[i].type];s!==void 0&&(r[s]=parseInt(t[i].value,10))}return r}catch(t){if(t instanceof RangeError)return[NaN];throw t}}function N2e(n,e){const t=n.format(e),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(t);return[parseInt(r[3],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10)]}const aI={},pU=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),D2e=pU==="06/25/2014, 00:00:00"||pU==="06/25/2014 00:00:00";function k2e(n){return aI[n]||(aI[n]=D2e?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:n,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),aI[n]}function lZ(n,e,t,r,i,s,o){const a=new Date(0);return a.setUTCFullYear(n,e,t),a.setUTCHours(r,i,s,o),a}const mU=36e5,O2e=6e4,lI={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function $O(n,e,t){if(!n)return 0;let r=lI.timezoneZ.exec(n);if(r)return 0;let i,s;if(r=lI.timezoneHH.exec(n),r)return i=parseInt(r[1],10),gU(i)?-(i*mU):NaN;if(r=lI.timezoneHHMM.exec(n),r){i=parseInt(r[2],10);const o=parseInt(r[3],10);return gU(i,o)?(s=Math.abs(i)*mU+o*O2e,r[1]==="+"?-s:s):NaN}if(B2e(n)){e=new Date(e||Date.now());const o=t?e:L2e(e),a=LN(o,n);return-(t?a:F2e(e,a,n))}return NaN}function L2e(n){return lZ(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())}function LN(n,e){const t=I2e(n,e),r=lZ(t[0],t[1]-1,t[2],t[3]%24,t[4],t[5],0).getTime();let i=n.getTime();const s=i%1e3;return i-=s>=0?s:1e3+s,r-i}function F2e(n,e,t){let i=n.getTime()-e;const s=LN(new Date(i),t);if(e===s)return e;i-=s-e;const o=LN(new Date(i),t);return s===o?s:Math.max(s,o)}function gU(n,e){return-23<=n&&n<=23&&(e==null||0<=e&&e<=59)}const vU={};function B2e(n){if(vU[n])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:n}),vU[n]=!0,!0}catch{return!1}}const U2e=60*1e3,j2e={X:function(n,e,t){const r=cI(t.timeZone,n);if(r===0)return"Z";switch(e){case"X":return yU(r);case"XXXX":case"XX":return Vg(r);case"XXXXX":case"XXX":default:return Vg(r,":")}},x:function(n,e,t){const r=cI(t.timeZone,n);switch(e){case"x":return yU(r);case"xxxx":case"xx":return Vg(r);case"xxxxx":case"xxx":default:return Vg(r,":")}},O:function(n,e,t){const r=cI(t.timeZone,n);switch(e){case"O":case"OO":case"OOO":return"GMT"+V2e(r,":");case"OOOO":default:return"GMT"+Vg(r,":")}},z:function(n,e,t){switch(e){case"z":case"zz":case"zzz":return fU("short",n,t);case"zzzz":default:return fU("long",n,t)}}};function cI(n,e){const t=n?$O(n,e,!0)/U2e:(e==null?void 0:e.getTimezoneOffset())??0;if(Number.isNaN(t))throw new RangeError("Invalid time zone specified: "+n);return t}function _2(n,e){const t=n<0?"-":"";let r=Math.abs(n).toString();for(;r.length<e;)r="0"+r;return t+r}function Vg(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=_2(Math.floor(r/60),2),s=_2(Math.floor(r%60),2);return t+i+e+s}function yU(n,e){return n%60===0?(n>0?"-":"+")+_2(Math.abs(n)/60,2):Vg(n,e)}function V2e(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),s=r%60;return s===0?t+String(i):t+String(i)+e+_2(s,2)}function xU(n){const e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),+n-+e}const z2e=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,uI=36e5,_U=6e4,H2e=2,$o={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:z2e};function cZ(n,e={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(n===null)return new Date(NaN);const t=e.additionalDigits==null?H2e:Number(e.additionalDigits);if(t!==2&&t!==1&&t!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]")return new Date(n.getTime());if(typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]")return new Date(n);if(Object.prototype.toString.call(n)!=="[object String]")return new Date(NaN);const r=W2e(n),{year:i,restDateString:s}=G2e(r.date,t),o=$2e(s,i);if(o===null||isNaN(o.getTime()))return new Date(NaN);if(o){const a=o.getTime();let l=0,c;if(r.time&&(l=X2e(r.time),l===null||isNaN(l)))return new Date(NaN);if(r.timeZone||e.timeZone){if(c=$O(r.timeZone||e.timeZone,new Date(a+l)),isNaN(c))return new Date(NaN)}else c=xU(new Date(a+l)),c=xU(new Date(a+l+c));return new Date(a+l+c)}else return new Date(NaN)}function W2e(n){const e={};let t=$o.dateTimePattern.exec(n),r;if(t?(e.date=t[1],r=t[3]):(t=$o.datePattern.exec(n),t?(e.date=t[1],r=t[2]):(e.date=null,r=n)),r){const i=$o.timeZone.exec(r);i?(e.time=r.replace(i[1],""),e.timeZone=i[1].trim()):e.time=r}return e}function G2e(n,e){if(n){const t=$o.YYY[e],r=$o.YYYYY[e];let i=$o.YYYY.exec(n)||r.exec(n);if(i){const s=i[1];return{year:parseInt(s,10),restDateString:n.slice(s.length)}}if(i=$o.YY.exec(n)||t.exec(n),i){const s=i[1];return{year:parseInt(s,10)*100,restDateString:n.slice(s.length)}}}return{year:null}}function $2e(n,e){if(e===null)return null;let t,r,i;if(!n||!n.length)return t=new Date(0),t.setUTCFullYear(e),t;let s=$o.MM.exec(n);if(s)return t=new Date(0),r=parseInt(s[1],10)-1,SU(e,r)?(t.setUTCFullYear(e,r),t):new Date(NaN);if(s=$o.DDD.exec(n),s){t=new Date(0);const o=parseInt(s[1],10);return K2e(e,o)?(t.setUTCFullYear(e,0,o),t):new Date(NaN)}if(s=$o.MMDD.exec(n),s){t=new Date(0),r=parseInt(s[1],10)-1;const o=parseInt(s[2],10);return SU(e,r,o)?(t.setUTCFullYear(e,r,o),t):new Date(NaN)}if(s=$o.Www.exec(n),s)return i=parseInt(s[1],10)-1,EU(i)?wU(e,i):new Date(NaN);if(s=$o.WwwD.exec(n),s){i=parseInt(s[1],10)-1;const o=parseInt(s[2],10)-1;return EU(i,o)?wU(e,i,o):new Date(NaN)}return null}function X2e(n){let e,t,r=$o.HH.exec(n);if(r)return e=parseFloat(r[1].replace(",",".")),hI(e)?e%24*uI:NaN;if(r=$o.HHMM.exec(n),r)return e=parseInt(r[1],10),t=parseFloat(r[2].replace(",",".")),hI(e,t)?e%24*uI+t*_U:NaN;if(r=$o.HHMMSS.exec(n),r){e=parseInt(r[1],10),t=parseInt(r[2],10);const i=parseFloat(r[3].replace(",","."));return hI(e,t,i)?e%24*uI+t*_U+i*1e3:NaN}return null}function wU(n,e,t){e=e||0,t=t||0;const r=new Date(0);r.setUTCFullYear(n,0,4);const i=r.getUTCDay()||7,s=e*7+t+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const q2e=[31,28,31,30,31,30,31,31,30,31,30,31],Y2e=[31,29,31,30,31,30,31,31,30,31,30,31];function uZ(n){return n%400===0||n%4===0&&n%100!==0}function SU(n,e,t){if(e<0||e>11)return!1;if(t!=null){if(t<1)return!1;const r=uZ(n);if(r&&t>Y2e[e]||!r&&t>q2e[e])return!1}return!0}function K2e(n,e){if(e<1)return!1;const t=uZ(n);return!(t&&e>366||!t&&e>365)}function EU(n,e){return!(n<0||n>52||e!=null&&(e<0||e>6))}function hI(n,e,t){return!(n<0||n>=25||e!=null&&(e<0||e>=60)||t!=null&&(t<0||t>=60))}const Z2e=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function Q2e(n,e,t={}){e=String(e);const r=e.match(Z2e);if(r){const i=cZ(t.originalDate||n,t);e=r.reduce(function(s,o){if(o[0]==="'")return s;const a=s.indexOf(o),l=s[a-1]==="'",c=s.replace(o,"'"+j2e[o[0]](i,o,t)+"'");return l?c.substring(0,a-1)+c.substring(a+1):c},e)}return Qk(n,e,t)}function J2e(n,e,t){n=cZ(n,t);const r=$O(e,n,!0),i=new Date(n.getTime()-r),s=new Date(0);return s.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),s.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),s}var dI="rovingFocusGroup.onEntryFocus",eAe={bubbles:!1,cancelable:!0},H_="RovingFocusGroup",[FN,hZ,tAe]=_k(H_),[nAe,dZ]=Ph(H_,[tAe]),[rAe,iAe]=nAe(H_),fZ=O.forwardRef((n,e)=>m.jsx(FN.Provider,{scope:n.__scopeRovingFocusGroup,children:m.jsx(FN.Slot,{scope:n.__scopeRovingFocusGroup,children:m.jsx(sAe,{...n,ref:e})})}));fZ.displayName=H_;var sAe=O.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=n,f=O.useRef(null),p=Rr(e,f),v=zO(s),[_,S]=gv({prop:o,defaultProp:a??null,onChange:l,caller:H_}),[x,E]=O.useState(!1),b=Pl(c),M=hZ(t),k=O.useRef(!1),[B,P]=O.useState(0);return O.useEffect(()=>{const N=f.current;if(N)return N.addEventListener(dI,b),()=>N.removeEventListener(dI,b)},[b]),m.jsx(rAe,{scope:t,orientation:r,dir:v,loop:i,currentTabStopId:_,onItemFocus:O.useCallback(N=>S(N),[S]),onItemShiftTab:O.useCallback(()=>E(!0),[]),onFocusableItemAdd:O.useCallback(()=>P(N=>N+1),[]),onFocusableItemRemove:O.useCallback(()=>P(N=>N-1),[]),children:m.jsx(On.div,{tabIndex:x||B===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...n.style},onMouseDown:cn(n.onMouseDown,()=>{k.current=!0}),onFocus:cn(n.onFocus,N=>{const R=!k.current;if(N.target===N.currentTarget&&R&&!x){const I=new CustomEvent(dI,eAe);if(N.currentTarget.dispatchEvent(I),!I.defaultPrevented){const U=M().filter(se=>se.focusable),H=U.find(se=>se.active),W=U.find(se=>se.id===_),te=[H,W,...U].filter(Boolean).map(se=>se.ref.current);gZ(te,u)}}k.current=!1}),onBlur:cn(n.onBlur,()=>E(!1))})})}),pZ="RovingFocusGroupItem",mZ=O.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=n,l=of(),c=s||l,u=iAe(pZ,t),h=u.currentTabStopId===c,f=hZ(t),{onFocusableItemAdd:p,onFocusableItemRemove:v,currentTabStopId:_}=u;return O.useEffect(()=>{if(r)return p(),()=>v()},[r,p,v]),m.jsx(FN.ItemSlot,{scope:t,id:c,focusable:r,active:i,children:m.jsx(On.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:cn(n.onMouseDown,S=>{r?u.onItemFocus(c):S.preventDefault()}),onFocus:cn(n.onFocus,()=>u.onItemFocus(c)),onKeyDown:cn(n.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){u.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const x=lAe(S,u.orientation,u.dir);if(x!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let b=f().filter(M=>M.focusable).map(M=>M.ref.current);if(x==="last")b.reverse();else if(x==="prev"||x==="next"){x==="prev"&&b.reverse();const M=b.indexOf(S.currentTarget);b=u.loop?cAe(b,M+1):b.slice(M+1)}setTimeout(()=>gZ(b))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:_!=null}):o})})});mZ.displayName=pZ;var oAe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function aAe(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function lAe(n,e,t){const r=aAe(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return oAe[r]}function gZ(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function cAe(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var uAe=fZ,hAe=mZ,MT="Tabs",[dAe,ZFe]=Ph(MT,[dZ]),vZ=dZ(),[fAe,XO]=dAe(MT),yZ=O.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=n,u=zO(a),[h,f]=gv({prop:r,onChange:i,defaultProp:s??"",caller:MT});return m.jsx(fAe,{scope:t,baseId:of(),value:h,onValueChange:f,orientation:o,dir:u,activationMode:l,children:m.jsx(On.div,{dir:u,"data-orientation":o,...c,ref:e})})});yZ.displayName=MT;var xZ="TabsList",_Z=O.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...i}=n,s=XO(xZ,t),o=vZ(t);return m.jsx(uAe,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:m.jsx(On.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});_Z.displayName=xZ;var wZ="TabsTrigger",SZ=O.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:i=!1,...s}=n,o=XO(wZ,t),a=vZ(t),l=AZ(o.baseId,r),c=TZ(o.baseId,r),u=r===o.value;return m.jsx(hAe,{asChild:!0,...a,focusable:!i,active:u,children:m.jsx(On.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:cn(n.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:cn(n.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:cn(n.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!i&&h&&o.onValueChange(r)})})})});SZ.displayName=wZ;var EZ="TabsContent",bZ=O.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:i,children:s,...o}=n,a=XO(EZ,t),l=AZ(a.baseId,r),c=TZ(a.baseId,r),u=r===a.value,h=O.useRef(u);return O.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),m.jsx(Bm,{present:i||u,children:({present:f})=>m.jsx(On.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...n.style,animationDuration:h.current?"0s":void 0},children:f&&s})})});bZ.displayName=EZ;function AZ(n,e){return`${n}-trigger-${e}`}function TZ(n,e){return`${n}-content-${e}`}var pAe=yZ,CZ=_Z,MZ=SZ,IZ=bZ;const mAe=pAe,PZ=O.forwardRef(({className:n,...e},t)=>m.jsx(CZ,{ref:t,className:Jt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));PZ.displayName=CZ.displayName;const bp=O.forwardRef(({className:n,...e},t)=>m.jsx(MZ,{ref:t,className:Jt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));bp.displayName=MZ.displayName;const Ap=O.forwardRef(({className:n,...e},t)=>m.jsx(IZ,{ref:t,className:Jt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));Ap.displayName=IZ.displayName;var gAe="Label",RZ=O.forwardRef((n,e)=>m.jsx(On.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));RZ.displayName=gAe;var NZ=RZ;const vAe=oT("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Zr=O.forwardRef(({className:n,...e},t)=>m.jsx(NZ,{ref:t,className:Jt(vAe(),n),...e}));Zr.displayName=NZ.displayName;var DZ="AlertDialog",[yAe,QFe]=Ph(DZ,[UX]),Nh=UX(),kZ=n=>{const{__scopeAlertDialog:e,...t}=n,r=Nh(e);return m.jsx(tq,{...r,...t,modal:!0})};kZ.displayName=DZ;var xAe="AlertDialogTrigger",_Ae=O.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=Nh(t);return m.jsx(zve,{...i,...r,ref:e})});_Ae.displayName=xAe;var wAe="AlertDialogPortal",OZ=n=>{const{__scopeAlertDialog:e,...t}=n,r=Nh(e);return m.jsx(nq,{...r,...t})};OZ.displayName=wAe;var SAe="AlertDialogOverlay",LZ=O.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=Nh(t);return m.jsx(Hk,{...i,...r,ref:e})});LZ.displayName=SAe;var U0="AlertDialogContent",[EAe,bAe]=yAe(U0),AAe=n$("AlertDialogContent"),FZ=O.forwardRef((n,e)=>{const{__scopeAlertDialog:t,children:r,...i}=n,s=Nh(t),o=O.useRef(null),a=Rr(e,o),l=O.useRef(null);return m.jsx(Bve,{contentName:U0,titleName:BZ,docsSlug:"alert-dialog",children:m.jsx(EAe,{scope:t,cancelRef:l,children:m.jsxs(Wk,{role:"alertdialog",...s,...i,ref:a,onOpenAutoFocus:cn(i.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[m.jsx(AAe,{children:r}),m.jsx(CAe,{contentRef:o})]})})})});FZ.displayName=U0;var BZ="AlertDialogTitle",UZ=O.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=Nh(t);return m.jsx(Gk,{...i,...r,ref:e})});UZ.displayName=BZ;var jZ="AlertDialogDescription",VZ=O.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=Nh(t);return m.jsx($k,{...i,...r,ref:e})});VZ.displayName=jZ;var TAe="AlertDialogAction",zZ=O.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=Nh(t);return m.jsx(Xk,{...i,...r,ref:e})});zZ.displayName=TAe;var HZ="AlertDialogCancel",WZ=O.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,{cancelRef:i}=bAe(HZ,t),s=Nh(t),o=Rr(e,i);return m.jsx(Xk,{...s,...r,ref:o})});WZ.displayName=HZ;var CAe=({contentRef:n})=>{const e=`\`${U0}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${U0}\` by passing a \`${jZ}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${U0}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return O.useEffect(()=>{var r;document.getElementById((r=n.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,n]),null},MAe=kZ,IAe=OZ,GZ=LZ,$Z=FZ,XZ=zZ,qZ=WZ,YZ=UZ,KZ=VZ;const PAe=MAe,RAe=IAe,ZZ=O.forwardRef(({className:n,...e},t)=>m.jsx(GZ,{className:Jt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e,ref:t}));ZZ.displayName=GZ.displayName;const QZ=O.forwardRef(({className:n,...e},t)=>m.jsxs(RAe,{children:[m.jsx(ZZ,{}),m.jsx($Z,{ref:t,className:Jt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...e})]}));QZ.displayName=$Z.displayName;const JZ=({className:n,...e})=>m.jsx("div",{className:Jt("flex flex-col space-y-2 text-center sm:text-left",n),...e});JZ.displayName="AlertDialogHeader";const eQ=({className:n,...e})=>m.jsx("div",{className:Jt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});eQ.displayName="AlertDialogFooter";const tQ=O.forwardRef(({className:n,...e},t)=>m.jsx(YZ,{ref:t,className:Jt("text-lg font-semibold",n),...e}));tQ.displayName=YZ.displayName;const nQ=O.forwardRef(({className:n,...e},t)=>m.jsx(KZ,{ref:t,className:Jt("text-sm text-muted-foreground",n),...e}));nQ.displayName=KZ.displayName;const rQ=O.forwardRef(({className:n,...e},t)=>m.jsx(XZ,{ref:t,className:Jt(Fk(),n),...e}));rQ.displayName=XZ.displayName;const iQ=O.forwardRef(({className:n,...e},t)=>m.jsx(qZ,{ref:t,className:Jt(Fk({variant:"outline"}),"mt-2 sm:mt-0",n),...e}));iQ.displayName=qZ.displayName;const BN=O.forwardRef(({className:n,...e},t)=>m.jsx("textarea",{className:Jt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...e}));BN.displayName="Textarea";function NAe({open:n,onOpenChange:e,onSubmit:t,type:r,isEditing:i=!1,initialData:s={},activities:o=[],loading:a=!1,error:l}){const c=r==="activity"?s:null,u=r==="gallery"?s:null,h=r==="member"?s:null,f=b=>({fullName:b.namalengkap||b.fullName||"",fieldName:b.namalapangan||b.fieldName||"",batchName:b.namaangkatan||b.batchName||"",batchYear:b.tahun||b.batchYear||new Date().getFullYear(),registrationNumber:b.nomorregistrasi||b.registrationNumber||"",membershipStatus:b.keanggotaan||b.membershipStatus||"Anggota Muda",photoUrl:b.foto||b.photoUrl||"",email:b.email||"",phone:b.phone||"",gender:b.gender||"",statusMahasiswa:b.statusMahasiswa||"",url:b.url||"",updateat:b.updateat||"",id:b.id||""}),[p,v]=O.useState(r==="activity"?{title:(c==null?void 0:c.title)||"",description:(c==null?void 0:c.description)||"",date:(c==null?void 0:c.date)||"",category:(c==null?void 0:c.category)||"",imageUrl:(c==null?void 0:c.imageUrl)||""}:r==="gallery"?{title:(u==null?void 0:u.title)||"",description:(u==null?void 0:u.description)||"",imageUrl:(u==null?void 0:u.imageUrl)||"",activityId:(u==null?void 0:u.activityId)||""}:f(h||{})),[_,S]=O.useState("");O.useEffect(()=>{r==="activity"?v({title:(s==null?void 0:s.title)||"",description:(s==null?void 0:s.description)||"",date:(s==null?void 0:s.date)||"",category:(s==null?void 0:s.category)||"",imageUrl:(s==null?void 0:s.imageUrl)||""}):r==="gallery"?v({title:(s==null?void 0:s.title)||"",description:(s==null?void 0:s.description)||"",imageUrl:(s==null?void 0:s.imageUrl)||"",activityId:(s==null?void 0:s.activityId)||""}):r==="member"&&v(f(s||{}))},[s,r,i,n]),O.useEffect(()=>{async function b(){if(r==="member"&&n&&!i){const k=(await Ss(fi(wn,"anggota"))).docs.map(P=>parseInt(P.id,10)).filter(P=>!isNaN(P)),B=k.length>0?Math.max(...k)+1:1;S(String(B)),v(P=>({...P,id:String(B)}))}}b()},[r,n,i]);const x=async b=>{b.preventDefault(),r==="member"?await t({namalengkap:p.fullName||"",namalapangan:p.fieldName||"",namaangkatan:p.batchName||"",tahun:p.batchYear||new Date().getFullYear(),nomorregistrasi:p.registrationNumber||"",keanggotaan:p.membershipStatus||"Anggota Muda",foto:p.photoUrl||"",email:p.email||"",phone:p.phone||"",gender:p.gender||"",statusMahasiswa:p.statusMahasiswa,url:p.url||"",updateat:new Date().toISOString(),id:p.id||""}):i&&r==="gallery"&&(s!=null&&s.id)?await t({title:p.title||"",description:p.description||"",imageUrl:p.imageUrl||"",activityId:p.activityId||"",createdAt:p.createdAt||null,...r==="gallery"?{updatedAt:new Date().toISOString()}:{},id:s.id}):i&&r==="activity"&&(s!=null&&s.id)?await t({...p,id:s.id}):r==="gallery"?await t({title:p.title||"",description:p.description||"",imageUrl:p.imageUrl||"",activityId:p.activityId||"",createdAt:p.createdAt||null}):await t(p)},E=b=>{const{name:M,value:k}=b.target;v(B=>M==="tahun"?{...B,[M]:parseInt(k,10)}:{...B,[M]:k})};return m.jsx(Nf,{open:n,onOpenChange:e,children:m.jsxs(Rh,{className:"max-w-2xl w-full p-0 overflow-hidden","aria-describedby":"form-description",children:[m.jsxs(qk,{className:"bg-primary text-white px-6 py-4",children:[m.jsx(Kk,{className:"text-xl",children:i?r==="member"?"Edit Data Anggota":r==="activity"?"Edit Kegiatan":"Edit Galeri":r==="member"?"Tambah Anggota Baru":r==="activity"?"Tambah Kegiatan Baru":"Tambah Galeri Baru"}),m.jsx(Zk,{id:"form-description",children:r==="activity"?"Silakan lengkapi detail kegiatan berikut. Semua field wajib diisi.":r==="gallery"?"Silakan lengkapi detail galeri berikut. Semua field wajib diisi.":"Silakan lengkapi data anggota berikut. Field dengan tanda * wajib diisi."})]}),m.jsx("div",{className:"p-6 bg-white max-h-[70vh] overflow-y-auto",children:m.jsxs("form",{onSubmit:x,className:"space-y-4",children:[r==="member"?m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"fullName",children:"Nama Lengkap *"}),m.jsx(ii,{id:"fullName",name:"fullName",value:p.fullName||"",onChange:E,placeholder:"Masukkan nama lengkap",required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"fieldName",children:"Nama Lapangan *"}),m.jsx(ii,{id:"fieldName",name:"fieldName",value:p.fieldName||"",onChange:E,placeholder:"Masukkan nama lapangan",required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"batchName",children:"Nama Angkatan *"}),m.jsx(ii,{id:"batchName",name:"batchName",value:p.batchName||"",onChange:E,placeholder:"Contoh: Elang",required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"batchYear",children:"Tahun Angkatan *"}),m.jsx(ii,{id:"batchYear",name:"batchYear",type:"number",min:"1990",max:new Date().getFullYear(),value:p.batchYear??"",onChange:E,required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"registrationNumber",children:"Nomor Registrasi *"}),m.jsx(ii,{id:"registrationNumber",name:"registrationNumber",value:p.registrationNumber||"",onChange:E,placeholder:"Contoh: MPN-2025-001",required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"membershipStatus",children:"Status Keanggotaan *"}),m.jsxs("select",{id:"membershipStatus",name:"membershipStatus",value:p.membershipStatus||"",onChange:E,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",required:!0,children:[m.jsx("option",{value:"Anggota Muda",children:"Anggota Muda"}),m.jsx("option",{value:"Anggota Penuh",children:"Anggota Penuh"}),m.jsx("option",{value:"Tidak Aktif",children:"Tidak Aktif"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"statusMahasiswa",children:"Status Mahasiswa *"}),m.jsxs("select",{id:"statusMahasiswa",name:"statusMahasiswa",value:p.statusMahasiswa||"",onChange:E,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",required:!0,children:[m.jsx("option",{value:"Aktif",children:"Aktif"}),m.jsx("option",{value:"Tidak Aktif",children:"Tidak Aktif"}),m.jsx("option",{value:"Lulus",children:"Lulus"}),m.jsx("option",{value:"Cuti",children:"Cuti"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"gender",children:"Gender"}),m.jsxs("select",{id:"gender",name:"gender",value:p.gender||"",onChange:E,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",children:[m.jsx("option",{value:"",children:"Pilih gender"}),m.jsx("option",{value:"Laki-laki",children:"Laki-laki"}),m.jsx("option",{value:"Perempuan",children:"Perempuan"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"email",children:"Email"}),m.jsx(ii,{id:"email",name:"email",type:"email",value:p.email||"",onChange:E,placeholder:"contoh@email.com"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"phone",children:"Nomor Telepon"}),m.jsx(ii,{id:"phone",name:"phone",type:"tel",value:p.phone||"",onChange:E,placeholder:"Contoh: 081234567890"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"photoUrl",children:"URL Foto KTA"}),m.jsx(ii,{id:"photoUrl",name:"photoUrl",type:"url",placeholder:"Masukkan URL foto KTA",value:p.photoUrl||"",onChange:E}),!!p.photoUrl&&m.jsxs("div",{className:"mt-2",children:[m.jsx("span",{className:"block text-xs text-gray-500 mb-1",children:"Preview:"}),/https?:\/\//.test(p.photoUrl||"")?m.jsx("img",{src:p.photoUrl,alt:"Preview Foto KTA",className:"max-h-32 rounded border",onError:b=>b.currentTarget.style.display="none"}):m.jsx("span",{className:"text-xs text-red-500",children:"URL tidak valid"}),m.jsx("div",{className:"text-xs text-blue-600 break-all mt-1",children:p.photoUrl})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"documentId",children:"Document ID"}),m.jsx(ii,{id:"documentId",name:"documentId",value:i?p.id||"":_||p.id||"",readOnly:!0,className:"bg-gray-100 cursor-not-allowed",placeholder:"ID dokumen Firestore"})]})]}):m.jsx(m.Fragment,{children:r==="learning"?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"title",children:"Judul Pembelajaran"}),m.jsx(ii,{id:"title",name:"title",value:p.title||"",onChange:E,required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"description",children:"Deskripsi Pembelajaran"}),m.jsx(BN,{id:"description",name:"description",value:p.description||"",onChange:E,required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"icon",children:"Icon (misal: book, graduation-cap, dsb)"}),m.jsx(ii,{id:"icon",name:"icon",value:p.icon||"",onChange:E,placeholder:"Contoh: book",required:!0}),m.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[p.icon&&m.jsxs("span",{className:"inline-flex items-center gap-1 text-lg",children:[m.jsx("i",{className:`fa fa-${p.icon}`})," ",p.icon]}),m.jsx("a",{href:"https://fontawesome.com/v4.7/icons/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-xs hover:text-blue-800 ml-2",children:"Panduan icon (FontAwesome v4.7)"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"link",children:"Link Pembelajaran"}),m.jsx(ii,{id:"link",name:"link",value:p.link||"",onChange:E,placeholder:"https://...",required:!0})]})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"title",children:"Title"}),m.jsx(ii,{id:"title",name:"title",value:(r==="activity"||r==="gallery")&&p.title||"",onChange:E,required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"description",children:"Description"}),m.jsx(BN,{id:"description",name:"description",value:(r==="activity"||r==="gallery")&&p.description||"",onChange:E,required:r==="activity"})]}),r==="activity"&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"date",children:"Date"}),m.jsx(ii,{id:"date",name:"date",type:"date",value:p.date||"",onChange:E,required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"category",children:"Category"}),m.jsx(ii,{id:"category",name:"category",value:p.category||"",onChange:E,required:!0})]})]}),r==="gallery"&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"activityId",children:"Related Activity"}),m.jsxs("select",{id:"activityId",name:"activityId",value:p.activityId||"",onChange:E,className:"w-full rounded-md border p-2",children:[m.jsx("option",{value:"",children:"None"}),o.map(b=>m.jsx("option",{value:b.id,children:b.title},b.id))]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"imageUrl",children:"Image URL"}),m.jsx(ii,{id:"imageUrl",name:"imageUrl",type:"url",placeholder:"Enter the URL of the image",value:(r==="activity"||r==="gallery")&&p.imageUrl||"",onChange:E,required:!0})]})]})}),l&&m.jsx("p",{className:"text-sm text-red-500 mt-4",children:l}),m.jsx(Yk,{className:"pt-4",children:m.jsxs(zt,{type:"submit",disabled:a,children:[a&&m.jsx(Gpe,{className:"mr-2 h-4 w-4 animate-spin"}),i?"Perbarui":"Simpan"]})})]})})]})})}function sQ(n,e){const t=O.useRef(e);O.useEffect(function(){e!==t.current&&n.attributionControl!=null&&(t.current!=null&&n.attributionControl.removeAttribution(t.current),e!=null&&n.attributionControl.addAttribution(e)),t.current=e},[n,e])}const DAe=1;function kAe(n){return Object.freeze({__version:DAe,map:n})}function oQ(n,e){return Object.freeze({...n,...e})}const aQ=O.createContext(null),lQ=aQ.Provider;function qO(){const n=O.useContext(aQ);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function cQ(n){function e(t,r){const{instance:i,context:s}=n(t).current;return O.useImperativeHandle(r,()=>i),t.children==null?null:fn.createElement(lQ,{value:s},t.children)}return O.forwardRef(e)}function OAe(n){function e(t,r){const[i,s]=O.useState(!1),{instance:o}=n(t,s).current;O.useImperativeHandle(r,()=>o),O.useEffect(function(){i&&o.update()},[o,i,t.children]);const a=o._contentNode;return a?Pf.createPortal(t.children,a):null}return O.forwardRef(e)}function LAe(n){function e(t,r){const{instance:i}=n(t).current;return O.useImperativeHandle(r,()=>i),null}return O.forwardRef(e)}function YO(n,e){const t=O.useRef();O.useEffect(function(){return e!=null&&n.instance.on(e),t.current=e,function(){t.current!=null&&n.instance.off(t.current),t.current=null}},[n,e])}function IT(n,e){const t=n.pane??e.pane;return t?{...n,pane:t}:n}function FAe(n,e){return function(r,i){const s=qO(),o=n(IT(r,s),s);return sQ(s.map,r.attribution),YO(o.current,r.eventHandlers),e(o.current,s,r,i),o}}var UN={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(n,e){(function(t,r){r(e)})(Ate,function(t){var r="1.9.4";function i(d){var w,T,F,z;for(T=1,F=arguments.length;T<F;T++){z=arguments[T];for(w in z)d[w]=z[w]}return d}var s=Object.create||function(){function d(){}return function(w){return d.prototype=w,new d}}();function o(d,w){var T=Array.prototype.slice;if(d.bind)return d.bind.apply(d,T.call(arguments,1));var F=T.call(arguments,2);return function(){return d.apply(w,F.length?F.concat(T.call(arguments)):arguments)}}var a=0;function l(d){return"_leaflet_id"in d||(d._leaflet_id=++a),d._leaflet_id}function c(d,w,T){var F,z,Y,de;return de=function(){F=!1,z&&(Y.apply(T,z),z=!1)},Y=function(){F?z=arguments:(d.apply(T,arguments),setTimeout(de,w),F=!0)},Y}function u(d,w,T){var F=w[1],z=w[0],Y=F-z;return d===F&&T?d:((d-z)%Y+Y)%Y+z}function h(){return!1}function f(d,w){if(w===!1)return d;var T=Math.pow(10,w===void 0?6:w);return Math.round(d*T)/T}function p(d){return d.trim?d.trim():d.replace(/^\s+|\s+$/g,"")}function v(d){return p(d).split(/\s+/)}function _(d,w){Object.prototype.hasOwnProperty.call(d,"options")||(d.options=d.options?s(d.options):{});for(var T in w)d.options[T]=w[T];return d.options}function S(d,w,T){var F=[];for(var z in d)F.push(encodeURIComponent(T?z.toUpperCase():z)+"="+encodeURIComponent(d[z]));return(!w||w.indexOf("?")===-1?"?":"&")+F.join("&")}var x=/\{ *([\w_ -]+) *\}/g;function E(d,w){return d.replace(x,function(T,F){var z=w[F];if(z===void 0)throw new Error("No value provided for variable "+T);return typeof z=="function"&&(z=z(w)),z})}var b=Array.isArray||function(d){return Object.prototype.toString.call(d)==="[object Array]"};function M(d,w){for(var T=0;T<d.length;T++)if(d[T]===w)return T;return-1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function B(d){return window["webkit"+d]||window["moz"+d]||window["ms"+d]}var P=0;function N(d){var w=+new Date,T=Math.max(0,16-(w-P));return P=w+T,window.setTimeout(d,T)}var R=window.requestAnimationFrame||B("RequestAnimationFrame")||N,I=window.cancelAnimationFrame||B("CancelAnimationFrame")||B("CancelRequestAnimationFrame")||function(d){window.clearTimeout(d)};function U(d,w,T){if(T&&R===N)d.call(w);else return R.call(window,o(d,w))}function H(d){d&&I.call(window,d)}var W={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:u,falseFn:h,formatNum:f,trim:p,splitWords:v,setOptions:_,getParamString:S,template:E,isArray:b,indexOf:M,emptyImageUrl:k,requestFn:R,cancelFn:I,requestAnimFrame:U,cancelAnimFrame:H};function K(){}K.extend=function(d){var w=function(){_(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},T=w.__super__=this.prototype,F=s(T);F.constructor=w,w.prototype=F;for(var z in this)Object.prototype.hasOwnProperty.call(this,z)&&z!=="prototype"&&z!=="__super__"&&(w[z]=this[z]);return d.statics&&i(w,d.statics),d.includes&&(te(d.includes),i.apply(null,[F].concat(d.includes))),i(F,d),delete F.statics,delete F.includes,F.options&&(F.options=T.options?s(T.options):{},i(F.options,d.options)),F._initHooks=[],F.callInitHooks=function(){if(!this._initHooksCalled){T.callInitHooks&&T.callInitHooks.call(this),this._initHooksCalled=!0;for(var Y=0,de=F._initHooks.length;Y<de;Y++)F._initHooks[Y].call(this)}},w},K.include=function(d){var w=this.prototype.options;return i(this.prototype,d),d.options&&(this.prototype.options=w,this.mergeOptions(d.options)),this},K.mergeOptions=function(d){return i(this.prototype.options,d),this},K.addInitHook=function(d){var w=Array.prototype.slice.call(arguments,1),T=typeof d=="function"?d:function(){this[d].apply(this,w)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(T),this};function te(d){if(!(typeof L>"u"||!L||!L.Mixin)){d=b(d)?d:[d];for(var w=0;w<d.length;w++)d[w]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var se={on:function(d,w,T){if(typeof d=="object")for(var F in d)this._on(F,d[F],w);else{d=v(d);for(var z=0,Y=d.length;z<Y;z++)this._on(d[z],w,T)}return this},off:function(d,w,T){if(!arguments.length)delete this._events;else if(typeof d=="object")for(var F in d)this._off(F,d[F],w);else{d=v(d);for(var z=arguments.length===1,Y=0,de=d.length;Y<de;Y++)z?this._off(d[Y]):this._off(d[Y],w,T)}return this},_on:function(d,w,T,F){if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}if(this._listens(d,w,T)===!1){T===this&&(T=void 0);var z={fn:w,ctx:T};F&&(z.once=!0),this._events=this._events||{},this._events[d]=this._events[d]||[],this._events[d].push(z)}},_off:function(d,w,T){var F,z,Y;if(this._events&&(F=this._events[d],!!F)){if(arguments.length===1){if(this._firingCount)for(z=0,Y=F.length;z<Y;z++)F[z].fn=h;delete this._events[d];return}if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}var de=this._listens(d,w,T);if(de!==!1){var Ae=F[de];this._firingCount&&(Ae.fn=h,this._events[d]=F=F.slice()),F.splice(de,1)}}},fire:function(d,w,T){if(!this.listens(d,T))return this;var F=i({},w,{type:d,target:this,sourceTarget:w&&w.sourceTarget||this});if(this._events){var z=this._events[d];if(z){this._firingCount=this._firingCount+1||1;for(var Y=0,de=z.length;Y<de;Y++){var Ae=z[Y],je=Ae.fn;Ae.once&&this.off(d,je,Ae.ctx),je.call(Ae.ctx||this,F)}this._firingCount--}}return T&&this._propagateEvent(F),this},listens:function(d,w,T,F){typeof d!="string"&&console.warn('"string" type argument expected');var z=w;typeof w!="function"&&(F=!!w,z=void 0,T=void 0);var Y=this._events&&this._events[d];if(Y&&Y.length&&this._listens(d,z,T)!==!1)return!0;if(F){for(var de in this._eventParents)if(this._eventParents[de].listens(d,w,T,F))return!0}return!1},_listens:function(d,w,T){if(!this._events)return!1;var F=this._events[d]||[];if(!w)return!!F.length;T===this&&(T=void 0);for(var z=0,Y=F.length;z<Y;z++)if(F[z].fn===w&&F[z].ctx===T)return z;return!1},once:function(d,w,T){if(typeof d=="object")for(var F in d)this._on(F,d[F],w,!0);else{d=v(d);for(var z=0,Y=d.length;z<Y;z++)this._on(d[z],w,T,!0)}return this},addEventParent:function(d){return this._eventParents=this._eventParents||{},this._eventParents[l(d)]=d,this},removeEventParent:function(d){return this._eventParents&&delete this._eventParents[l(d)],this},_propagateEvent:function(d){for(var w in this._eventParents)this._eventParents[w].fire(d.type,i({layer:d.target,propagatedFrom:d.target},d),!0)}};se.addEventListener=se.on,se.removeEventListener=se.clearAllEventListeners=se.off,se.addOneTimeEventListener=se.once,se.fireEvent=se.fire,se.hasEventListeners=se.listens;var le=K.extend(se);function X(d,w,T){this.x=T?Math.round(d):d,this.y=T?Math.round(w):w}var ce=Math.trunc||function(d){return d>0?Math.floor(d):Math.ceil(d)};X.prototype={clone:function(){return new X(this.x,this.y)},add:function(d){return this.clone()._add(oe(d))},_add:function(d){return this.x+=d.x,this.y+=d.y,this},subtract:function(d){return this.clone()._subtract(oe(d))},_subtract:function(d){return this.x-=d.x,this.y-=d.y,this},divideBy:function(d){return this.clone()._divideBy(d)},_divideBy:function(d){return this.x/=d,this.y/=d,this},multiplyBy:function(d){return this.clone()._multiplyBy(d)},_multiplyBy:function(d){return this.x*=d,this.y*=d,this},scaleBy:function(d){return new X(this.x*d.x,this.y*d.y)},unscaleBy:function(d){return new X(this.x/d.x,this.y/d.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(d){d=oe(d);var w=d.x-this.x,T=d.y-this.y;return Math.sqrt(w*w+T*T)},equals:function(d){return d=oe(d),d.x===this.x&&d.y===this.y},contains:function(d){return d=oe(d),Math.abs(d.x)<=Math.abs(this.x)&&Math.abs(d.y)<=Math.abs(this.y)},toString:function(){return"Point("+f(this.x)+", "+f(this.y)+")"}};function oe(d,w,T){return d instanceof X?d:b(d)?new X(d[0],d[1]):d==null?d:typeof d=="object"&&"x"in d&&"y"in d?new X(d.x,d.y):new X(d,w,T)}function fe(d,w){if(d)for(var T=w?[d,w]:d,F=0,z=T.length;F<z;F++)this.extend(T[F])}fe.prototype={extend:function(d){var w,T;if(!d)return this;if(d instanceof X||typeof d[0]=="number"||"x"in d)w=T=oe(d);else if(d=De(d),w=d.min,T=d.max,!w||!T)return this;return!this.min&&!this.max?(this.min=w.clone(),this.max=T.clone()):(this.min.x=Math.min(w.x,this.min.x),this.max.x=Math.max(T.x,this.max.x),this.min.y=Math.min(w.y,this.min.y),this.max.y=Math.max(T.y,this.max.y)),this},getCenter:function(d){return oe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,d)},getBottomLeft:function(){return oe(this.min.x,this.max.y)},getTopRight:function(){return oe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(d){var w,T;return typeof d[0]=="number"||d instanceof X?d=oe(d):d=De(d),d instanceof fe?(w=d.min,T=d.max):w=T=d,w.x>=this.min.x&&T.x<=this.max.x&&w.y>=this.min.y&&T.y<=this.max.y},intersects:function(d){d=De(d);var w=this.min,T=this.max,F=d.min,z=d.max,Y=z.x>=w.x&&F.x<=T.x,de=z.y>=w.y&&F.y<=T.y;return Y&&de},overlaps:function(d){d=De(d);var w=this.min,T=this.max,F=d.min,z=d.max,Y=z.x>w.x&&F.x<T.x,de=z.y>w.y&&F.y<T.y;return Y&&de},isValid:function(){return!!(this.min&&this.max)},pad:function(d){var w=this.min,T=this.max,F=Math.abs(w.x-T.x)*d,z=Math.abs(w.y-T.y)*d;return De(oe(w.x-F,w.y-z),oe(T.x+F,T.y+z))},equals:function(d){return d?(d=De(d),this.min.equals(d.getTopLeft())&&this.max.equals(d.getBottomRight())):!1}};function De(d,w){return!d||d instanceof fe?d:new fe(d,w)}function We(d,w){if(d)for(var T=w?[d,w]:d,F=0,z=T.length;F<z;F++)this.extend(T[F])}We.prototype={extend:function(d){var w=this._southWest,T=this._northEast,F,z;if(d instanceof ve)F=d,z=d;else if(d instanceof We){if(F=d._southWest,z=d._northEast,!F||!z)return this}else return d?this.extend(Ie(d)||Qe(d)):this;return!w&&!T?(this._southWest=new ve(F.lat,F.lng),this._northEast=new ve(z.lat,z.lng)):(w.lat=Math.min(F.lat,w.lat),w.lng=Math.min(F.lng,w.lng),T.lat=Math.max(z.lat,T.lat),T.lng=Math.max(z.lng,T.lng)),this},pad:function(d){var w=this._southWest,T=this._northEast,F=Math.abs(w.lat-T.lat)*d,z=Math.abs(w.lng-T.lng)*d;return new We(new ve(w.lat-F,w.lng-z),new ve(T.lat+F,T.lng+z))},getCenter:function(){return new ve((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ve(this.getNorth(),this.getWest())},getSouthEast:function(){return new ve(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(d){typeof d[0]=="number"||d instanceof ve||"lat"in d?d=Ie(d):d=Qe(d);var w=this._southWest,T=this._northEast,F,z;return d instanceof We?(F=d.getSouthWest(),z=d.getNorthEast()):F=z=d,F.lat>=w.lat&&z.lat<=T.lat&&F.lng>=w.lng&&z.lng<=T.lng},intersects:function(d){d=Qe(d);var w=this._southWest,T=this._northEast,F=d.getSouthWest(),z=d.getNorthEast(),Y=z.lat>=w.lat&&F.lat<=T.lat,de=z.lng>=w.lng&&F.lng<=T.lng;return Y&&de},overlaps:function(d){d=Qe(d);var w=this._southWest,T=this._northEast,F=d.getSouthWest(),z=d.getNorthEast(),Y=z.lat>w.lat&&F.lat<T.lat,de=z.lng>w.lng&&F.lng<T.lng;return Y&&de},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(d,w){return d?(d=Qe(d),this._southWest.equals(d.getSouthWest(),w)&&this._northEast.equals(d.getNorthEast(),w)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Qe(d,w){return d instanceof We?d:new We(d,w)}function ve(d,w,T){if(isNaN(d)||isNaN(w))throw new Error("Invalid LatLng object: ("+d+", "+w+")");this.lat=+d,this.lng=+w,T!==void 0&&(this.alt=+T)}ve.prototype={equals:function(d,w){if(!d)return!1;d=Ie(d);var T=Math.max(Math.abs(this.lat-d.lat),Math.abs(this.lng-d.lng));return T<=(w===void 0?1e-9:w)},toString:function(d){return"LatLng("+f(this.lat,d)+", "+f(this.lng,d)+")"},distanceTo:function(d){return tt.distance(this,Ie(d))},wrap:function(){return tt.wrapLatLng(this)},toBounds:function(d){var w=180*d/40075017,T=w/Math.cos(Math.PI/180*this.lat);return Qe([this.lat-w,this.lng-T],[this.lat+w,this.lng+T])},clone:function(){return new ve(this.lat,this.lng,this.alt)}};function Ie(d,w,T){return d instanceof ve?d:b(d)&&typeof d[0]!="object"?d.length===3?new ve(d[0],d[1],d[2]):d.length===2?new ve(d[0],d[1]):null:d==null?d:typeof d=="object"&&"lat"in d?new ve(d.lat,"lng"in d?d.lng:d.lon,d.alt):w===void 0?null:new ve(d,w,T)}var we={latLngToPoint:function(d,w){var T=this.projection.project(d),F=this.scale(w);return this.transformation._transform(T,F)},pointToLatLng:function(d,w){var T=this.scale(w),F=this.transformation.untransform(d,T);return this.projection.unproject(F)},project:function(d){return this.projection.project(d)},unproject:function(d){return this.projection.unproject(d)},scale:function(d){return 256*Math.pow(2,d)},zoom:function(d){return Math.log(d/256)/Math.LN2},getProjectedBounds:function(d){if(this.infinite)return null;var w=this.projection.bounds,T=this.scale(d),F=this.transformation.transform(w.min,T),z=this.transformation.transform(w.max,T);return new fe(F,z)},infinite:!1,wrapLatLng:function(d){var w=this.wrapLng?u(d.lng,this.wrapLng,!0):d.lng,T=this.wrapLat?u(d.lat,this.wrapLat,!0):d.lat,F=d.alt;return new ve(T,w,F)},wrapLatLngBounds:function(d){var w=d.getCenter(),T=this.wrapLatLng(w),F=w.lat-T.lat,z=w.lng-T.lng;if(F===0&&z===0)return d;var Y=d.getSouthWest(),de=d.getNorthEast(),Ae=new ve(Y.lat-F,Y.lng-z),je=new ve(de.lat-F,de.lng-z);return new We(Ae,je)}},tt=i({},we,{wrapLng:[-180,180],R:6371e3,distance:function(d,w){var T=Math.PI/180,F=d.lat*T,z=w.lat*T,Y=Math.sin((w.lat-d.lat)*T/2),de=Math.sin((w.lng-d.lng)*T/2),Ae=Y*Y+Math.cos(F)*Math.cos(z)*de*de,je=2*Math.atan2(Math.sqrt(Ae),Math.sqrt(1-Ae));return this.R*je}}),Ke=6378137,Me={R:Ke,MAX_LATITUDE:85.0511287798,project:function(d){var w=Math.PI/180,T=this.MAX_LATITUDE,F=Math.max(Math.min(T,d.lat),-T),z=Math.sin(F*w);return new X(this.R*d.lng*w,this.R*Math.log((1+z)/(1-z))/2)},unproject:function(d){var w=180/Math.PI;return new ve((2*Math.atan(Math.exp(d.y/this.R))-Math.PI/2)*w,d.x*w/this.R)},bounds:function(){var d=Ke*Math.PI;return new fe([-d,-d],[d,d])}()};function Ye(d,w,T,F){if(b(d)){this._a=d[0],this._b=d[1],this._c=d[2],this._d=d[3];return}this._a=d,this._b=w,this._c=T,this._d=F}Ye.prototype={transform:function(d,w){return this._transform(d.clone(),w)},_transform:function(d,w){return w=w||1,d.x=w*(this._a*d.x+this._b),d.y=w*(this._c*d.y+this._d),d},untransform:function(d,w){return w=w||1,new X((d.x/w-this._b)/this._a,(d.y/w-this._d)/this._c)}};function Pe(d,w,T,F){return new Ye(d,w,T,F)}var ne=i({},tt,{code:"EPSG:3857",projection:Me,transformation:function(){var d=.5/(Math.PI*Me.R);return Pe(d,.5,-d,.5)}()}),Be=i({},ne,{code:"EPSG:900913"});function Re(d){return document.createElementNS("http://www.w3.org/2000/svg",d)}function qe(d,w){var T="",F,z,Y,de,Ae,je;for(F=0,Y=d.length;F<Y;F++){for(Ae=d[F],z=0,de=Ae.length;z<de;z++)je=Ae[z],T+=(z?"L":"M")+je.x+" "+je.y;T+=w?Gt.svg?"z":"x":""}return T||"M0 0"}var ze=document.documentElement.style,J="ActiveXObject"in window,be=J&&!document.addEventListener,Fe="msLaunchUri"in navigator&&!("documentMode"in document),rt=Zi("webkit"),pt=Zi("android"),ee=Zi("android 2")||Zi("android 3"),q=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),me=pt&&Zi("Google")&&q<537&&!("AudioNode"in window),pe=!!window.opera,Ve=!Fe&&Zi("chrome"),Ue=Zi("gecko")&&!rt&&!pe&&!J,Mt=!Ve&&Zi("safari"),lt=Zi("phantom"),bt="OTransition"in ze,wt=navigator.platform.indexOf("Win")===0,st=J&&"transition"in ze,mt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ee,Wt="MozPerspective"in ze,ue=!window.L_DISABLE_3D&&(st||mt||Wt)&&!bt&&!lt,Te=typeof orientation<"u"||Zi("mobile"),ut=Te&&rt,he=Te&&mt,Je=!window.PointerEvent&&window.MSPointerEvent,ot=!!(window.PointerEvent||Je),gt="ontouchstart"in window||!!window.TouchEvent,at=!window.L_NO_TOUCH&&(gt||ot),Xe=Te&&pe,xt=Te&&Ue,Bt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Cn=function(){var d=!1;try{var w=Object.defineProperty({},"passive",{get:function(){d=!0}});window.addEventListener("testPassiveEventSupport",h,w),window.removeEventListener("testPassiveEventSupport",h,w)}catch{}return d}(),xn=function(){return!!document.createElement("canvas").getContext}(),$r=!!(document.createElementNS&&Re("svg").createSVGRect),Kn=!!$r&&function(){var d=document.createElement("div");return d.innerHTML="<svg/>",(d.firstChild&&d.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Au=!$r&&function(){try{var d=document.createElement("div");d.innerHTML='<v:shape adj="1"/>';var w=d.firstChild;return w.style.behavior="url(#default#VML)",w&&typeof w.adj=="object"}catch{return!1}}(),Cs=navigator.platform.indexOf("Mac")===0,Jo=navigator.platform.indexOf("Linux")===0;function Zi(d){return navigator.userAgent.toLowerCase().indexOf(d)>=0}var Gt={ie:J,ielt9:be,edge:Fe,webkit:rt,android:pt,android23:ee,androidStock:me,opera:pe,chrome:Ve,gecko:Ue,safari:Mt,phantom:lt,opera12:bt,win:wt,ie3d:st,webkit3d:mt,gecko3d:Wt,any3d:ue,mobile:Te,mobileWebkit:ut,mobileWebkit3d:he,msPointer:Je,pointer:ot,touch:at,touchNative:gt,mobileOpera:Xe,mobileGecko:xt,retina:Bt,passiveEvents:Cn,canvas:xn,svg:$r,vml:Au,inlineSvg:Kn,mac:Cs,linux:Jo},Ui=Gt.msPointer?"MSPointerDown":"pointerdown",Tu=Gt.msPointer?"MSPointerMove":"pointermove",Dl=Gt.msPointer?"MSPointerUp":"pointerup",tl=Gt.msPointer?"MSPointerCancel":"pointercancel",kl={touchstart:Ui,touchmove:Tu,touchend:Dl,touchcancel:tl},bc={touchstart:_e,touchmove:Oe,touchend:Oe,touchcancel:Oe},Co={},Mo=!1;function Cu(d,w,T){return w==="touchstart"&&ke(),bc[w]?(T=bc[w].bind(this,T),d.addEventListener(kl[w],T,!1),T):(console.warn("wrong event specified:",w),h)}function Dh(d,w,T){if(!kl[w]){console.warn("wrong event specified:",w);return}d.removeEventListener(kl[w],T,!1)}function Mu(d){Co[d.pointerId]=d}function Z(d){Co[d.pointerId]&&(Co[d.pointerId]=d)}function xe(d){delete Co[d.pointerId]}function ke(){Mo||(document.addEventListener(Ui,Mu,!0),document.addEventListener(Tu,Z,!0),document.addEventListener(Dl,xe,!0),document.addEventListener(tl,xe,!0),Mo=!0)}function Oe(d,w){if(w.pointerType!==(w.MSPOINTER_TYPE_MOUSE||"mouse")){w.touches=[];for(var T in Co)w.touches.push(Co[T]);w.changedTouches=[w],d(w)}}function _e(d,w){w.MSPOINTER_TYPE_TOUCH&&w.pointerType===w.MSPOINTER_TYPE_TOUCH&&Xr(w),Oe(d,w)}function ct(d){var w={},T,F;for(F in d)T=d[F],w[F]=T&&T.bind?T.bind(d):T;return d=w,w.type="dblclick",w.detail=2,w.isTrusted=!1,w._simulated=!0,w}var yt=200;function Tt(d,w){d.addEventListener("dblclick",w);var T=0,F;function z(Y){if(Y.detail!==1){F=Y.detail;return}if(!(Y.pointerType==="mouse"||Y.sourceCapabilities&&!Y.sourceCapabilities.firesTouchEvents)){var de=Ys(Y);if(!(de.some(function(je){return je instanceof HTMLLabelElement&&je.attributes.for})&&!de.some(function(je){return je instanceof HTMLInputElement||je instanceof HTMLSelectElement}))){var Ae=Date.now();Ae-T<=yt?(F++,F===2&&w(ct(Y))):F=1,T=Ae}}}return d.addEventListener("click",z),{dblclick:w,simDblclick:z}}function _t(d,w){d.removeEventListener("dblclick",w.dblclick),d.removeEventListener("click",w.simDblclick)}var Kt=ni(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Xt=ni(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),kt=Xt==="webkitTransition"||Xt==="OTransition"?Xt+"End":"transitionend";function Ot(d){return typeof d=="string"?document.getElementById(d):d}function Vt(d,w){var T=d.style[w]||d.currentStyle&&d.currentStyle[w];if((!T||T==="auto")&&document.defaultView){var F=document.defaultView.getComputedStyle(d,null);T=F?F[w]:null}return T==="auto"?null:T}function Lt(d,w,T){var F=document.createElement(d);return F.className=w||"",T&&T.appendChild(F),F}function Pt(d){var w=d.parentNode;w&&w.removeChild(d)}function un(d){for(;d.firstChild;)d.removeChild(d.firstChild)}function Rt(d){var w=d.parentNode;w&&w.lastChild!==d&&w.appendChild(d)}function Ln(d){var w=d.parentNode;w&&w.firstChild!==d&&w.insertBefore(d,w.firstChild)}function tn(d,w){if(d.classList!==void 0)return d.classList.contains(w);var T=li(d);return T.length>0&&new RegExp("(^|\\s)"+w+"(\\s|$)").test(T)}function qt(d,w){if(d.classList!==void 0)for(var T=v(w),F=0,z=T.length;F<z;F++)d.classList.add(T[F]);else if(!tn(d,w)){var Y=li(d);wi(d,(Y?Y+" ":"")+w)}}function Jn(d,w){d.classList!==void 0?d.classList.remove(w):wi(d,p((" "+li(d)+" ").replace(" "+w+" "," ")))}function wi(d,w){d.className.baseVal===void 0?d.className=w:d.className.baseVal=w}function li(d){return d.correspondingElement&&(d=d.correspondingElement),d.className.baseVal===void 0?d.className:d.className.baseVal}function dn(d,w){"opacity"in d.style?d.style.opacity=w:"filter"in d.style&&dr(d,w)}function dr(d,w){var T=!1,F="DXImageTransform.Microsoft.Alpha";try{T=d.filters.item(F)}catch{if(w===1)return}w=Math.round(w*100),T?(T.Enabled=w!==100,T.Opacity=w):d.style.filter+=" progid:"+F+"(opacity="+w+")"}function ni(d){for(var w=document.documentElement.style,T=0;T<d.length;T++)if(d[T]in w)return d[T];return!1}function Mr(d,w,T){var F=w||new X(0,0);d.style[Kt]=(Gt.ie3d?"translate("+F.x+"px,"+F.y+"px)":"translate3d("+F.x+"px,"+F.y+"px,0)")+(T?" scale("+T+")":"")}function $t(d,w){d._leaflet_pos=w,Gt.any3d?Mr(d,w):(d.style.left=w.x+"px",d.style.top=w.y+"px")}function Pi(d){return d._leaflet_pos||new X(0,0)}var ri,Ms,Ac;if("onselectstart"in document)ri=function(){sn(window,"selectstart",Xr)},Ms=function(){mr(window,"selectstart",Xr)};else{var Tc=ni(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ri=function(){if(Tc){var d=document.documentElement.style;Ac=d[Tc],d[Tc]="none"}},Ms=function(){Tc&&(document.documentElement.style[Tc]=Ac,Ac=void 0)}}function jf(){sn(window,"dragstart",Xr)}function Iu(){mr(window,"dragstart",Xr)}var Cc,Ol;function Ll(d){for(;d.tabIndex===-1;)d=d.parentNode;d.style&&(Is(),Cc=d,Ol=d.style.outlineStyle,d.style.outlineStyle="none",sn(window,"keydown",Is))}function Is(){Cc&&(Cc.style.outlineStyle=Ol,Cc=void 0,Ol=void 0,mr(window,"keydown",Is))}function Vn(d){do d=d.parentNode;while((!d.offsetWidth||!d.offsetHeight)&&d!==document.body);return d}function Pu(d){var w=d.getBoundingClientRect();return{x:w.width/d.offsetWidth||1,y:w.height/d.offsetHeight||1,boundingClientRect:w}}var kh={__proto__:null,TRANSFORM:Kt,TRANSITION:Xt,TRANSITION_END:kt,get:Ot,getStyle:Vt,create:Lt,remove:Pt,empty:un,toFront:Rt,toBack:Ln,hasClass:tn,addClass:qt,removeClass:Jn,setClass:wi,getClass:li,setOpacity:dn,testProp:ni,setTransform:Mr,setPosition:$t,getPosition:Pi,get disableTextSelection(){return ri},get enableTextSelection(){return Ms},disableImageDrag:jf,enableImageDrag:Iu,preventOutline:Ll,restoreOutline:Is,getSizedParentNode:Vn,getScale:Pu};function sn(d,w,T,F){if(w&&typeof w=="object")for(var z in w)Vf(d,z,w[z],T);else{w=v(w);for(var Y=0,de=w.length;Y<de;Y++)Vf(d,w[Y],T,F)}return this}var ea="_leaflet_events";function mr(d,w,T,F){if(arguments.length===1)ci(d),delete d[ea];else if(w&&typeof w=="object")for(var z in w)Ru(d,z,w[z],T);else if(w=v(w),arguments.length===2)ci(d,function(Ae){return M(w,Ae)!==-1});else for(var Y=0,de=w.length;Y<de;Y++)Ru(d,w[Y],T,F);return this}function ci(d,w){for(var T in d[ea]){var F=T.split(/\d/)[0];(!w||w(F))&&Ru(d,F,null,null,T)}}var qs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Vf(d,w,T,F){var z=w+l(T)+(F?"_"+l(F):"");if(d[ea]&&d[ea][z])return this;var Y=function(Ae){return T.call(F||d,Ae||window.event)},de=Y;!Gt.touchNative&&Gt.pointer&&w.indexOf("touch")===0?Y=Cu(d,w,Y):Gt.touch&&w==="dblclick"?Y=Tt(d,Y):"addEventListener"in d?w==="touchstart"||w==="touchmove"||w==="wheel"||w==="mousewheel"?d.addEventListener(qs[w]||w,Y,Gt.passiveEvents?{passive:!1}:!1):w==="mouseenter"||w==="mouseleave"?(Y=function(Ae){Ae=Ae||window.event,Lh(d,Ae)&&de(Ae)},d.addEventListener(qs[w],Y,!1)):d.addEventListener(w,de,!1):d.attachEvent("on"+w,Y),d[ea]=d[ea]||{},d[ea][z]=Y}function Ru(d,w,T,F,z){z=z||w+l(T)+(F?"_"+l(F):"");var Y=d[ea]&&d[ea][z];if(!Y)return this;!Gt.touchNative&&Gt.pointer&&w.indexOf("touch")===0?Dh(d,w,Y):Gt.touch&&w==="dblclick"?_t(d,Y):"removeEventListener"in d?d.removeEventListener(qs[w]||w,Y,!1):d.detachEvent("on"+w,Y),d[ea][z]=null}function ta(d){return d.stopPropagation?d.stopPropagation():d.originalEvent?d.originalEvent._stopped=!0:d.cancelBubble=!0,this}function Pa(d){return Vf(d,"wheel",ta),this}function Qi(d){return sn(d,"mousedown touchstart dblclick contextmenu",ta),d._leaflet_disable_click=!0,this}function Xr(d){return d.preventDefault?d.preventDefault():d.returnValue=!1,this}function Io(d){return Xr(d),ta(d),this}function Ys(d){if(d.composedPath)return d.composedPath();for(var w=[],T=d.target;T;)w.push(T),T=T.parentNode;return w}function Ks(d,w){if(!w)return new X(d.clientX,d.clientY);var T=Pu(w),F=T.boundingClientRect;return new X((d.clientX-F.left)/T.x-w.clientLeft,(d.clientY-F.top)/T.y-w.clientTop)}var wr=Gt.linux&&Gt.chrome?window.devicePixelRatio:Gt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Oh(d){return Gt.edge?d.wheelDeltaY/2:d.deltaY&&d.deltaMode===0?-d.deltaY/wr:d.deltaY&&d.deltaMode===1?-d.deltaY*20:d.deltaY&&d.deltaMode===2?-d.deltaY*60:d.deltaX||d.deltaZ?0:d.wheelDelta?(d.wheelDeltaY||d.wheelDelta)/2:d.detail&&Math.abs(d.detail)<32765?-d.detail*20:d.detail?d.detail/-32765*60:0}function Lh(d,w){var T=w.relatedTarget;if(!T)return!0;try{for(;T&&T!==d;)T=T.parentNode}catch{return!1}return T!==d}var Gm={__proto__:null,on:sn,off:mr,stopPropagation:ta,disableScrollPropagation:Pa,disableClickPropagation:Qi,preventDefault:Xr,stop:Io,getPropagationPath:Ys,getMousePosition:Ks,getWheelDelta:Oh,isExternalTarget:Lh,addListener:sn,removeListener:mr},Zs=le.extend({run:function(d,w,T,F){this.stop(),this._el=d,this._inProgress=!0,this._duration=T||.25,this._easeOutPower=1/Math.max(F||.5,.2),this._startPos=Pi(d),this._offset=w.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(d){var w=+new Date-this._startTime,T=this._duration*1e3;w<T?this._runFrame(this._easeOut(w/T),d):(this._runFrame(1),this._complete())},_runFrame:function(d,w){var T=this._startPos.add(this._offset.multiplyBy(d));w&&T._round(),$t(this._el,T),this.fire("step")},_complete:function(){H(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(d){return 1-Math.pow(1-d,this._easeOutPower)}}),Fn=le.extend({options:{crs:ne,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(d,w){w=_(this,w),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(d),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),w.maxBounds&&this.setMaxBounds(w.maxBounds),w.zoom!==void 0&&(this._zoom=this._limitZoom(w.zoom)),w.center&&w.zoom!==void 0&&this.setView(Ie(w.center),w.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Xt&&Gt.any3d&&!Gt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),sn(this._proxy,kt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(d,w,T){if(w=w===void 0?this._zoom:this._limitZoom(w),d=this._limitCenter(Ie(d),w,this.options.maxBounds),T=T||{},this._stop(),this._loaded&&!T.reset&&T!==!0){T.animate!==void 0&&(T.zoom=i({animate:T.animate},T.zoom),T.pan=i({animate:T.animate,duration:T.duration},T.pan));var F=this._zoom!==w?this._tryAnimatedZoom&&this._tryAnimatedZoom(d,w,T.zoom):this._tryAnimatedPan(d,T.pan);if(F)return clearTimeout(this._sizeTimer),this}return this._resetView(d,w,T.pan&&T.pan.noMoveStart),this},setZoom:function(d,w){return this._loaded?this.setView(this.getCenter(),d,{zoom:w}):(this._zoom=d,this)},zoomIn:function(d,w){return d=d||(Gt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+d,w)},zoomOut:function(d,w){return d=d||(Gt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-d,w)},setZoomAround:function(d,w,T){var F=this.getZoomScale(w),z=this.getSize().divideBy(2),Y=d instanceof X?d:this.latLngToContainerPoint(d),de=Y.subtract(z).multiplyBy(1-1/F),Ae=this.containerPointToLatLng(z.add(de));return this.setView(Ae,w,{zoom:T})},_getBoundsCenterZoom:function(d,w){w=w||{},d=d.getBounds?d.getBounds():Qe(d);var T=oe(w.paddingTopLeft||w.padding||[0,0]),F=oe(w.paddingBottomRight||w.padding||[0,0]),z=this.getBoundsZoom(d,!1,T.add(F));if(z=typeof w.maxZoom=="number"?Math.min(w.maxZoom,z):z,z===1/0)return{center:d.getCenter(),zoom:z};var Y=F.subtract(T).divideBy(2),de=this.project(d.getSouthWest(),z),Ae=this.project(d.getNorthEast(),z),je=this.unproject(de.add(Ae).divideBy(2).add(Y),z);return{center:je,zoom:z}},fitBounds:function(d,w){if(d=Qe(d),!d.isValid())throw new Error("Bounds are not valid.");var T=this._getBoundsCenterZoom(d,w);return this.setView(T.center,T.zoom,w)},fitWorld:function(d){return this.fitBounds([[-90,-180],[90,180]],d)},panTo:function(d,w){return this.setView(d,this._zoom,{pan:w})},panBy:function(d,w){if(d=oe(d).round(),w=w||{},!d.x&&!d.y)return this.fire("moveend");if(w.animate!==!0&&!this.getSize().contains(d))return this._resetView(this.unproject(this.project(this.getCenter()).add(d)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Zs,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),w.noMoveStart||this.fire("movestart"),w.animate!==!1){qt(this._mapPane,"leaflet-pan-anim");var T=this._getMapPanePos().subtract(d).round();this._panAnim.run(this._mapPane,T,w.duration||.25,w.easeLinearity)}else this._rawPanBy(d),this.fire("move").fire("moveend");return this},flyTo:function(d,w,T){if(T=T||{},T.animate===!1||!Gt.any3d)return this.setView(d,w,T);this._stop();var F=this.project(this.getCenter()),z=this.project(d),Y=this.getSize(),de=this._zoom;d=Ie(d),w=w===void 0?de:w;var Ae=Math.max(Y.x,Y.y),je=Ae*this.getZoomScale(de,w),it=z.distanceTo(F)||1,Et=1.42,ln=Et*Et;function Dn(Br){var Fc=Br?-1:1,Qm=Br?je:Ae,Jm=je*je-Ae*Ae+Fc*ln*ln*it*it,mw=2*Qm*ln*it,ju=Jm/mw,ts=Math.sqrt(ju*ju+1)-ju,gC=ts<1e-9?-18:Math.log(ts);return gC}function Rs(Br){return(Math.exp(Br)-Math.exp(-Br))/2}function bi(Br){return(Math.exp(Br)+Math.exp(-Br))/2}function no(Br){return Rs(Br)/bi(Br)}var ro=Dn(0);function Uu(Br){return Ae*(bi(ro)/bi(ro+Et*Br))}function dw(Br){return Ae*(bi(ro)*no(ro+Et*Br)-Rs(ro))/ln}function fw(Br){return 1-Math.pow(1-Br,1.5)}var pw=Date.now(),vy=(Dn(1)-ro)/Et,ol=T.duration?1e3*T.duration:1e3*vy*.8;function yy(){var Br=(Date.now()-pw)/ol,Fc=fw(Br)*vy;Br<=1?(this._flyToFrame=U(yy,this),this._move(this.unproject(F.add(z.subtract(F).multiplyBy(dw(Fc)/it)),de),this.getScaleZoom(Ae/Uu(Fc),de),{flyTo:!0})):this._move(d,w)._moveEnd(!0)}return this._moveStart(!0,T.noMoveStart),yy.call(this),this},flyToBounds:function(d,w){var T=this._getBoundsCenterZoom(d,w);return this.flyTo(T.center,T.zoom,w)},setMaxBounds:function(d){return d=Qe(d),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),d.isValid()?(this.options.maxBounds=d,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(d){var w=this.options.minZoom;return this.options.minZoom=d,this._loaded&&w!==d&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(d):this},setMaxZoom:function(d){var w=this.options.maxZoom;return this.options.maxZoom=d,this._loaded&&w!==d&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(d):this},panInsideBounds:function(d,w){this._enforcingBounds=!0;var T=this.getCenter(),F=this._limitCenter(T,this._zoom,Qe(d));return T.equals(F)||this.panTo(F,w),this._enforcingBounds=!1,this},panInside:function(d,w){w=w||{};var T=oe(w.paddingTopLeft||w.padding||[0,0]),F=oe(w.paddingBottomRight||w.padding||[0,0]),z=this.project(this.getCenter()),Y=this.project(d),de=this.getPixelBounds(),Ae=De([de.min.add(T),de.max.subtract(F)]),je=Ae.getSize();if(!Ae.contains(Y)){this._enforcingBounds=!0;var it=Y.subtract(Ae.getCenter()),Et=Ae.extend(Y).getSize().subtract(je);z.x+=it.x<0?-Et.x:Et.x,z.y+=it.y<0?-Et.y:Et.y,this.panTo(this.unproject(z),w),this._enforcingBounds=!1}return this},invalidateSize:function(d){if(!this._loaded)return this;d=i({animate:!1,pan:!0},d===!0?{animate:!0}:d);var w=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var T=this.getSize(),F=w.divideBy(2).round(),z=T.divideBy(2).round(),Y=F.subtract(z);return!Y.x&&!Y.y?this:(d.animate&&d.pan?this.panBy(Y):(d.pan&&this._rawPanBy(Y),this.fire("move"),d.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:w,newSize:T}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(d){if(d=this._locateOptions=i({timeout:1e4,watch:!1},d),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var w=o(this._handleGeolocationResponse,this),T=o(this._handleGeolocationError,this);return d.watch?this._locationWatchId=navigator.geolocation.watchPosition(w,T,d):navigator.geolocation.getCurrentPosition(w,T,d),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(d){if(this._container._leaflet_id){var w=d.code,T=d.message||(w===1?"permission denied":w===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:w,message:"Geolocation error: "+T+"."})}},_handleGeolocationResponse:function(d){if(this._container._leaflet_id){var w=d.coords.latitude,T=d.coords.longitude,F=new ve(w,T),z=F.toBounds(d.coords.accuracy*2),Y=this._locateOptions;if(Y.setView){var de=this.getBoundsZoom(z);this.setView(F,Y.maxZoom?Math.min(de,Y.maxZoom):de)}var Ae={latlng:F,bounds:z,timestamp:d.timestamp};for(var je in d.coords)typeof d.coords[je]=="number"&&(Ae[je]=d.coords[je]);this.fire("locationfound",Ae)}},addHandler:function(d,w){if(!w)return this;var T=this[d]=new w(this);return this._handlers.push(T),this.options[d]&&T.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Pt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(H(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var d;for(d in this._layers)this._layers[d].remove();for(d in this._panes)Pt(this._panes[d]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(d,w){var T="leaflet-pane"+(d?" leaflet-"+d.replace("Pane","")+"-pane":""),F=Lt("div",T,w||this._mapPane);return d&&(this._panes[d]=F),F},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var d=this.getPixelBounds(),w=this.unproject(d.getBottomLeft()),T=this.unproject(d.getTopRight());return new We(w,T)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(d,w,T){d=Qe(d),T=oe(T||[0,0]);var F=this.getZoom()||0,z=this.getMinZoom(),Y=this.getMaxZoom(),de=d.getNorthWest(),Ae=d.getSouthEast(),je=this.getSize().subtract(T),it=De(this.project(Ae,F),this.project(de,F)).getSize(),Et=Gt.any3d?this.options.zoomSnap:1,ln=je.x/it.x,Dn=je.y/it.y,Rs=w?Math.max(ln,Dn):Math.min(ln,Dn);return F=this.getScaleZoom(Rs,F),Et&&(F=Math.round(F/(Et/100))*(Et/100),F=w?Math.ceil(F/Et)*Et:Math.floor(F/Et)*Et),Math.max(z,Math.min(Y,F))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new X(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(d,w){var T=this._getTopLeftPoint(d,w);return new fe(T,T.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(d){return this.options.crs.getProjectedBounds(d===void 0?this.getZoom():d)},getPane:function(d){return typeof d=="string"?this._panes[d]:d},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(d,w){var T=this.options.crs;return w=w===void 0?this._zoom:w,T.scale(d)/T.scale(w)},getScaleZoom:function(d,w){var T=this.options.crs;w=w===void 0?this._zoom:w;var F=T.zoom(d*T.scale(w));return isNaN(F)?1/0:F},project:function(d,w){return w=w===void 0?this._zoom:w,this.options.crs.latLngToPoint(Ie(d),w)},unproject:function(d,w){return w=w===void 0?this._zoom:w,this.options.crs.pointToLatLng(oe(d),w)},layerPointToLatLng:function(d){var w=oe(d).add(this.getPixelOrigin());return this.unproject(w)},latLngToLayerPoint:function(d){var w=this.project(Ie(d))._round();return w._subtract(this.getPixelOrigin())},wrapLatLng:function(d){return this.options.crs.wrapLatLng(Ie(d))},wrapLatLngBounds:function(d){return this.options.crs.wrapLatLngBounds(Qe(d))},distance:function(d,w){return this.options.crs.distance(Ie(d),Ie(w))},containerPointToLayerPoint:function(d){return oe(d).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(d){return oe(d).add(this._getMapPanePos())},containerPointToLatLng:function(d){var w=this.containerPointToLayerPoint(oe(d));return this.layerPointToLatLng(w)},latLngToContainerPoint:function(d){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ie(d)))},mouseEventToContainerPoint:function(d){return Ks(d,this._container)},mouseEventToLayerPoint:function(d){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(d))},mouseEventToLatLng:function(d){return this.layerPointToLatLng(this.mouseEventToLayerPoint(d))},_initContainer:function(d){var w=this._container=Ot(d);if(w){if(w._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");sn(w,"scroll",this._onScroll,this),this._containerId=l(w)},_initLayout:function(){var d=this._container;this._fadeAnimated=this.options.fadeAnimation&&Gt.any3d,qt(d,"leaflet-container"+(Gt.touch?" leaflet-touch":"")+(Gt.retina?" leaflet-retina":"")+(Gt.ielt9?" leaflet-oldie":"")+(Gt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var w=Vt(d,"position");w!=="absolute"&&w!=="relative"&&w!=="fixed"&&w!=="sticky"&&(d.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var d=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),$t(this._mapPane,new X(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(qt(d.markerPane,"leaflet-zoom-hide"),qt(d.shadowPane,"leaflet-zoom-hide"))},_resetView:function(d,w,T){$t(this._mapPane,new X(0,0));var F=!this._loaded;this._loaded=!0,w=this._limitZoom(w),this.fire("viewprereset");var z=this._zoom!==w;this._moveStart(z,T)._move(d,w)._moveEnd(z),this.fire("viewreset"),F&&this.fire("load")},_moveStart:function(d,w){return d&&this.fire("zoomstart"),w||this.fire("movestart"),this},_move:function(d,w,T,F){w===void 0&&(w=this._zoom);var z=this._zoom!==w;return this._zoom=w,this._lastCenter=d,this._pixelOrigin=this._getNewPixelOrigin(d),F?T&&T.pinch&&this.fire("zoom",T):((z||T&&T.pinch)&&this.fire("zoom",T),this.fire("move",T)),this},_moveEnd:function(d){return d&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return H(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(d){$t(this._mapPane,this._getMapPanePos().subtract(d))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(d){this._targets={},this._targets[l(this._container)]=this;var w=d?mr:sn;w(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&w(window,"resize",this._onResize,this),Gt.any3d&&this.options.transform3DLimit&&(d?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){H(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var d=this._getMapPanePos();Math.max(Math.abs(d.x),Math.abs(d.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(d,w){for(var T=[],F,z=w==="mouseout"||w==="mouseover",Y=d.target||d.srcElement,de=!1;Y;){if(F=this._targets[l(Y)],F&&(w==="click"||w==="preclick")&&this._draggableMoved(F)){de=!0;break}if(F&&F.listens(w,!0)&&(z&&!Lh(Y,d)||(T.push(F),z))||Y===this._container)break;Y=Y.parentNode}return!T.length&&!de&&!z&&this.listens(w,!0)&&(T=[this]),T},_isClickDisabled:function(d){for(;d&&d!==this._container;){if(d._leaflet_disable_click)return!0;d=d.parentNode}},_handleDOMEvent:function(d){var w=d.target||d.srcElement;if(!(!this._loaded||w._leaflet_disable_events||d.type==="click"&&this._isClickDisabled(w))){var T=d.type;T==="mousedown"&&Ll(w),this._fireDOMEvent(d,T)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(d,w,T){if(d.type==="click"){var F=i({},d);F.type="preclick",this._fireDOMEvent(F,F.type,T)}var z=this._findEventTargets(d,w);if(T){for(var Y=[],de=0;de<T.length;de++)T[de].listens(w,!0)&&Y.push(T[de]);z=Y.concat(z)}if(z.length){w==="contextmenu"&&Xr(d);var Ae=z[0],je={originalEvent:d};if(d.type!=="keypress"&&d.type!=="keydown"&&d.type!=="keyup"){var it=Ae.getLatLng&&(!Ae._radius||Ae._radius<=10);je.containerPoint=it?this.latLngToContainerPoint(Ae.getLatLng()):this.mouseEventToContainerPoint(d),je.layerPoint=this.containerPointToLayerPoint(je.containerPoint),je.latlng=it?Ae.getLatLng():this.layerPointToLatLng(je.layerPoint)}for(de=0;de<z.length;de++)if(z[de].fire(w,je,!0),je.originalEvent._stopped||z[de].options.bubblingMouseEvents===!1&&M(this._mouseEvents,w)!==-1)return}},_draggableMoved:function(d){return d=d.dragging&&d.dragging.enabled()?d:this,d.dragging&&d.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var d=0,w=this._handlers.length;d<w;d++)this._handlers[d].disable()},whenReady:function(d,w){return this._loaded?d.call(w||this,{target:this}):this.on("load",d,w),this},_getMapPanePos:function(){return Pi(this._mapPane)||new X(0,0)},_moved:function(){var d=this._getMapPanePos();return d&&!d.equals([0,0])},_getTopLeftPoint:function(d,w){var T=d&&w!==void 0?this._getNewPixelOrigin(d,w):this.getPixelOrigin();return T.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(d,w){var T=this.getSize()._divideBy(2);return this.project(d,w)._subtract(T)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(d,w,T){var F=this._getNewPixelOrigin(T,w);return this.project(d,w)._subtract(F)},_latLngBoundsToNewLayerBounds:function(d,w,T){var F=this._getNewPixelOrigin(T,w);return De([this.project(d.getSouthWest(),w)._subtract(F),this.project(d.getNorthWest(),w)._subtract(F),this.project(d.getSouthEast(),w)._subtract(F),this.project(d.getNorthEast(),w)._subtract(F)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(d){return this.latLngToLayerPoint(d).subtract(this._getCenterLayerPoint())},_limitCenter:function(d,w,T){if(!T)return d;var F=this.project(d,w),z=this.getSize().divideBy(2),Y=new fe(F.subtract(z),F.add(z)),de=this._getBoundsOffset(Y,T,w);return Math.abs(de.x)<=1&&Math.abs(de.y)<=1?d:this.unproject(F.add(de),w)},_limitOffset:function(d,w){if(!w)return d;var T=this.getPixelBounds(),F=new fe(T.min.add(d),T.max.add(d));return d.add(this._getBoundsOffset(F,w))},_getBoundsOffset:function(d,w,T){var F=De(this.project(w.getNorthEast(),T),this.project(w.getSouthWest(),T)),z=F.min.subtract(d.min),Y=F.max.subtract(d.max),de=this._rebound(z.x,-Y.x),Ae=this._rebound(z.y,-Y.y);return new X(de,Ae)},_rebound:function(d,w){return d+w>0?Math.round(d-w)/2:Math.max(0,Math.ceil(d))-Math.max(0,Math.floor(w))},_limitZoom:function(d){var w=this.getMinZoom(),T=this.getMaxZoom(),F=Gt.any3d?this.options.zoomSnap:1;return F&&(d=Math.round(d/F)*F),Math.max(w,Math.min(T,d))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Jn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(d,w){var T=this._getCenterOffset(d)._trunc();return(w&&w.animate)!==!0&&!this.getSize().contains(T)?!1:(this.panBy(T,w),!0)},_createAnimProxy:function(){var d=this._proxy=Lt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(d),this.on("zoomanim",function(w){var T=Kt,F=this._proxy.style[T];Mr(this._proxy,this.project(w.center,w.zoom),this.getZoomScale(w.zoom,1)),F===this._proxy.style[T]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Pt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var d=this.getCenter(),w=this.getZoom();Mr(this._proxy,this.project(d,w),this.getZoomScale(w,1))},_catchTransitionEnd:function(d){this._animatingZoom&&d.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(d,w,T){if(this._animatingZoom)return!0;if(T=T||{},!this._zoomAnimated||T.animate===!1||this._nothingToAnimate()||Math.abs(w-this._zoom)>this.options.zoomAnimationThreshold)return!1;var F=this.getZoomScale(w),z=this._getCenterOffset(d)._divideBy(1-1/F);return T.animate!==!0&&!this.getSize().contains(z)?!1:(U(function(){this._moveStart(!0,T.noMoveStart||!1)._animateZoom(d,w,!0)},this),!0)},_animateZoom:function(d,w,T,F){this._mapPane&&(T&&(this._animatingZoom=!0,this._animateToCenter=d,this._animateToZoom=w,qt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:d,zoom:w,noUpdate:F}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Jn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Fl(d,w){return new Fn(d,w)}var Qs=K.extend({options:{position:"topright"},initialize:function(d){_(this,d)},getPosition:function(){return this.options.position},setPosition:function(d){var w=this._map;return w&&w.removeControl(this),this.options.position=d,w&&w.addControl(this),this},getContainer:function(){return this._container},addTo:function(d){this.remove(),this._map=d;var w=this._container=this.onAdd(d),T=this.getPosition(),F=d._controlCorners[T];return qt(w,"leaflet-control"),T.indexOf("bottom")!==-1?F.insertBefore(w,F.firstChild):F.appendChild(w),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Pt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(d){this._map&&d&&d.screenX>0&&d.screenY>0&&this._map.getContainer().focus()}}),Nr=function(d){return new Qs(d)};Fn.include({addControl:function(d){return d.addTo(this),this},removeControl:function(d){return d.remove(),this},_initControlPos:function(){var d=this._controlCorners={},w="leaflet-",T=this._controlContainer=Lt("div",w+"control-container",this._container);function F(z,Y){var de=w+z+" "+w+Y;d[z+Y]=Lt("div",de,T)}F("top","left"),F("top","right"),F("bottom","left"),F("bottom","right")},_clearControlPos:function(){for(var d in this._controlCorners)Pt(this._controlCorners[d]);Pt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Mc=Qs.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(d,w,T,F){return T<F?-1:F<T?1:0}},initialize:function(d,w,T){_(this,T),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var F in d)this._addLayer(d[F],F);for(F in w)this._addLayer(w[F],F,!0)},onAdd:function(d){this._initLayout(),this._update(),this._map=d,d.on("zoomend",this._checkDisabledLayers,this);for(var w=0;w<this._layers.length;w++)this._layers[w].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(d){return Qs.prototype.addTo.call(this,d),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(d,w){return this._addLayer(d,w),this._map?this._update():this},addOverlay:function(d,w){return this._addLayer(d,w,!0),this._map?this._update():this},removeLayer:function(d){d.off("add remove",this._onLayerChange,this);var w=this._getLayer(l(d));return w&&this._layers.splice(this._layers.indexOf(w),1),this._map?this._update():this},expand:function(){qt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var d=this._map.getSize().y-(this._container.offsetTop+50);return d<this._section.clientHeight?(qt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=d+"px"):Jn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Jn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var d="leaflet-control-layers",w=this._container=Lt("div",d),T=this.options.collapsed;w.setAttribute("aria-haspopup",!0),Qi(w),Pa(w);var F=this._section=Lt("section",d+"-list");T&&(this._map.on("click",this.collapse,this),sn(w,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var z=this._layersLink=Lt("a",d+"-toggle",w);z.href="#",z.title="Layers",z.setAttribute("role","button"),sn(z,{keydown:function(Y){Y.keyCode===13&&this._expandSafely()},click:function(Y){Xr(Y),this._expandSafely()}},this),T||this.expand(),this._baseLayersList=Lt("div",d+"-base",F),this._separator=Lt("div",d+"-separator",F),this._overlaysList=Lt("div",d+"-overlays",F),w.appendChild(F)},_getLayer:function(d){for(var w=0;w<this._layers.length;w++)if(this._layers[w]&&l(this._layers[w].layer)===d)return this._layers[w]},_addLayer:function(d,w,T){this._map&&d.on("add remove",this._onLayerChange,this),this._layers.push({layer:d,name:w,overlay:T}),this.options.sortLayers&&this._layers.sort(o(function(F,z){return this.options.sortFunction(F.layer,z.layer,F.name,z.name)},this)),this.options.autoZIndex&&d.setZIndex&&(this._lastZIndex++,d.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;un(this._baseLayersList),un(this._overlaysList),this._layerControlInputs=[];var d,w,T,F,z=0;for(T=0;T<this._layers.length;T++)F=this._layers[T],this._addItem(F),w=w||F.overlay,d=d||!F.overlay,z+=F.overlay?0:1;return this.options.hideSingleBase&&(d=d&&z>1,this._baseLayersList.style.display=d?"":"none"),this._separator.style.display=w&&d?"":"none",this},_onLayerChange:function(d){this._handlingClick||this._update();var w=this._getLayer(l(d.target)),T=w.overlay?d.type==="add"?"overlayadd":"overlayremove":d.type==="add"?"baselayerchange":null;T&&this._map.fire(T,w)},_createRadioElement:function(d,w){var T='<input type="radio" class="leaflet-control-layers-selector" name="'+d+'"'+(w?' checked="checked"':"")+"/>",F=document.createElement("div");return F.innerHTML=T,F.firstChild},_addItem:function(d){var w=document.createElement("label"),T=this._map.hasLayer(d.layer),F;d.overlay?(F=document.createElement("input"),F.type="checkbox",F.className="leaflet-control-layers-selector",F.defaultChecked=T):F=this._createRadioElement("leaflet-base-layers_"+l(this),T),this._layerControlInputs.push(F),F.layerId=l(d.layer),sn(F,"click",this._onInputClick,this);var z=document.createElement("span");z.innerHTML=" "+d.name;var Y=document.createElement("span");w.appendChild(Y),Y.appendChild(F),Y.appendChild(z);var de=d.overlay?this._overlaysList:this._baseLayersList;return de.appendChild(w),this._checkDisabledLayers(),w},_onInputClick:function(){if(!this._preventClick){var d=this._layerControlInputs,w,T,F=[],z=[];this._handlingClick=!0;for(var Y=d.length-1;Y>=0;Y--)w=d[Y],T=this._getLayer(w.layerId).layer,w.checked?F.push(T):w.checked||z.push(T);for(Y=0;Y<z.length;Y++)this._map.hasLayer(z[Y])&&this._map.removeLayer(z[Y]);for(Y=0;Y<F.length;Y++)this._map.hasLayer(F[Y])||this._map.addLayer(F[Y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var d=this._layerControlInputs,w,T,F=this._map.getZoom(),z=d.length-1;z>=0;z--)w=d[z],T=this._getLayer(w.layerId).layer,w.disabled=T.options.minZoom!==void 0&&F<T.options.minZoom||T.options.maxZoom!==void 0&&F>T.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var d=this._section;this._preventClick=!0,sn(d,"click",Xr),this.expand();var w=this;setTimeout(function(){mr(d,"click",Xr),w._preventClick=!1})}}),Fh=function(d,w,T){return new Mc(d,w,T)},Js=Qs.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(d){var w="leaflet-control-zoom",T=Lt("div",w+" leaflet-bar"),F=this.options;return this._zoomInButton=this._createButton(F.zoomInText,F.zoomInTitle,w+"-in",T,this._zoomIn),this._zoomOutButton=this._createButton(F.zoomOutText,F.zoomOutTitle,w+"-out",T,this._zoomOut),this._updateDisabled(),d.on("zoomend zoomlevelschange",this._updateDisabled,this),T},onRemove:function(d){d.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(d){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(d.shiftKey?3:1))},_zoomOut:function(d){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(d.shiftKey?3:1))},_createButton:function(d,w,T,F,z){var Y=Lt("a",T,F);return Y.innerHTML=d,Y.href="#",Y.title=w,Y.setAttribute("role","button"),Y.setAttribute("aria-label",w),Qi(Y),sn(Y,"click",Io),sn(Y,"click",z,this),sn(Y,"click",this._refocusOnMap,this),Y},_updateDisabled:function(){var d=this._map,w="leaflet-disabled";Jn(this._zoomInButton,w),Jn(this._zoomOutButton,w),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||d._zoom===d.getMinZoom())&&(qt(this._zoomOutButton,w),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||d._zoom===d.getMaxZoom())&&(qt(this._zoomInButton,w),this._zoomInButton.setAttribute("aria-disabled","true"))}});Fn.mergeOptions({zoomControl:!0}),Fn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Js,this.addControl(this.zoomControl))});var Bh=function(d){return new Js(d)},Ic=Qs.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(d){var w="leaflet-control-scale",T=Lt("div",w),F=this.options;return this._addScales(F,w+"-line",T),d.on(F.updateWhenIdle?"moveend":"move",this._update,this),d.whenReady(this._update,this),T},onRemove:function(d){d.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(d,w,T){d.metric&&(this._mScale=Lt("div",w,T)),d.imperial&&(this._iScale=Lt("div",w,T))},_update:function(){var d=this._map,w=d.getSize().y/2,T=d.distance(d.containerPointToLatLng([0,w]),d.containerPointToLatLng([this.options.maxWidth,w]));this._updateScales(T)},_updateScales:function(d){this.options.metric&&d&&this._updateMetric(d),this.options.imperial&&d&&this._updateImperial(d)},_updateMetric:function(d){var w=this._getRoundNum(d),T=w<1e3?w+" m":w/1e3+" km";this._updateScale(this._mScale,T,w/d)},_updateImperial:function(d){var w=d*3.2808399,T,F,z;w>5280?(T=w/5280,F=this._getRoundNum(T),this._updateScale(this._iScale,F+" mi",F/T)):(z=this._getRoundNum(w),this._updateScale(this._iScale,z+" ft",z/w))},_updateScale:function(d,w,T){d.style.width=Math.round(this.options.maxWidth*T)+"px",d.innerHTML=w},_getRoundNum:function(d){var w=Math.pow(10,(Math.floor(d)+"").length-1),T=d/w;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:1,w*T}}),Nu=function(d){return new Ic(d)},Uh='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',nl=Qs.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Gt.inlineSvg?Uh+" ":"")+"Leaflet</a>"},initialize:function(d){_(this,d),this._attributions={}},onAdd:function(d){d.attributionControl=this,this._container=Lt("div","leaflet-control-attribution"),Qi(this._container);for(var w in d._layers)d._layers[w].getAttribution&&this.addAttribution(d._layers[w].getAttribution());return this._update(),d.on("layeradd",this._addAttribution,this),this._container},onRemove:function(d){d.off("layeradd",this._addAttribution,this)},_addAttribution:function(d){d.layer.getAttribution&&(this.addAttribution(d.layer.getAttribution()),d.layer.once("remove",function(){this.removeAttribution(d.layer.getAttribution())},this))},setPrefix:function(d){return this.options.prefix=d,this._update(),this},addAttribution:function(d){return d?(this._attributions[d]||(this._attributions[d]=0),this._attributions[d]++,this._update(),this):this},removeAttribution:function(d){return d?(this._attributions[d]&&(this._attributions[d]--,this._update()),this):this},_update:function(){if(this._map){var d=[];for(var w in this._attributions)this._attributions[w]&&d.push(w);var T=[];this.options.prefix&&T.push(this.options.prefix),d.length&&T.push(d.join(", ")),this._container.innerHTML=T.join(' <span aria-hidden="true">|</span> ')}}});Fn.mergeOptions({attributionControl:!0}),Fn.addInitHook(function(){this.options.attributionControl&&new nl().addTo(this)});var Pc=function(d){return new nl(d)};Qs.Layers=Mc,Qs.Zoom=Js,Qs.Scale=Ic,Qs.Attribution=nl,Nr.layers=Fh,Nr.zoom=Bh,Nr.scale=Nu,Nr.attribution=Pc;var Fr=K.extend({initialize:function(d){this._map=d},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Fr.addTo=function(d,w){return d.addHandler(w,this),this};var ms={Events:se},na=Gt.touch?"touchstart mousedown":"mousedown",Po=le.extend({options:{clickTolerance:3},initialize:function(d,w,T,F){_(this,F),this._element=d,this._dragStartTarget=w||d,this._preventOutline=T},enable:function(){this._enabled||(sn(this._dragStartTarget,na,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Po._dragging===this&&this.finishDrag(!0),mr(this._dragStartTarget,na,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(d){if(this._enabled&&(this._moved=!1,!tn(this._element,"leaflet-zoom-anim"))){if(d.touches&&d.touches.length!==1){Po._dragging===this&&this.finishDrag();return}if(!(Po._dragging||d.shiftKey||d.which!==1&&d.button!==1&&!d.touches)&&(Po._dragging=this,this._preventOutline&&Ll(this._element),jf(),ri(),!this._moving)){this.fire("down");var w=d.touches?d.touches[0]:d,T=Vn(this._element);this._startPoint=new X(w.clientX,w.clientY),this._startPos=Pi(this._element),this._parentScale=Pu(T);var F=d.type==="mousedown";sn(document,F?"mousemove":"touchmove",this._onMove,this),sn(document,F?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(d){if(this._enabled){if(d.touches&&d.touches.length>1){this._moved=!0;return}var w=d.touches&&d.touches.length===1?d.touches[0]:d,T=new X(w.clientX,w.clientY)._subtract(this._startPoint);!T.x&&!T.y||Math.abs(T.x)+Math.abs(T.y)<this.options.clickTolerance||(T.x/=this._parentScale.x,T.y/=this._parentScale.y,Xr(d),this._moved||(this.fire("dragstart"),this._moved=!0,qt(document.body,"leaflet-dragging"),this._lastTarget=d.target||d.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),qt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(T),this._moving=!0,this._lastEvent=d,this._updatePosition())}},_updatePosition:function(){var d={originalEvent:this._lastEvent};this.fire("predrag",d),$t(this._element,this._newPos),this.fire("drag",d)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(d){Jn(document.body,"leaflet-dragging"),this._lastTarget&&(Jn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),mr(document,"mousemove touchmove",this._onMove,this),mr(document,"mouseup touchend touchcancel",this._onUp,this),Iu(),Ms();var w=this._moved&&this._moving;this._moving=!1,Po._dragging=!1,w&&this.fire("dragend",{noInertia:d,distance:this._newPos.distanceTo(this._startPos)})}});function Du(d,w,T){var F,z=[1,4,2,8],Y,de,Ae,je,it,Et,ln,Dn;for(Y=0,Et=d.length;Y<Et;Y++)d[Y]._code=ra(d[Y],w);for(Ae=0;Ae<4;Ae++){for(ln=z[Ae],F=[],Y=0,Et=d.length,de=Et-1;Y<Et;de=Y++)je=d[Y],it=d[de],je._code&ln?it._code&ln||(Dn=Ri(it,je,ln,w,T),Dn._code=ra(Dn,w),F.push(Dn)):(it._code&ln&&(Dn=Ri(it,je,ln,w,T),Dn._code=ra(Dn,w),F.push(Dn)),F.push(je));d=F}return d}function eo(d,w){var T,F,z,Y,de,Ae,je,it,Et;if(!d||d.length===0)throw new Error("latlngs not passed");A(d)||(console.warn("latlngs are not flat! Only the first ring will be used"),d=d[0]);var ln=Ie([0,0]),Dn=Qe(d),Rs=Dn.getNorthWest().distanceTo(Dn.getSouthWest())*Dn.getNorthEast().distanceTo(Dn.getNorthWest());Rs<1700&&(ln=Ro(d));var bi=d.length,no=[];for(T=0;T<bi;T++){var ro=Ie(d[T]);no.push(w.project(Ie([ro.lat-ln.lat,ro.lng-ln.lng])))}for(Ae=je=it=0,T=0,F=bi-1;T<bi;F=T++)z=no[T],Y=no[F],de=z.y*Y.x-Y.y*z.x,je+=(z.x+Y.x)*de,it+=(z.y+Y.y)*de,Ae+=de*3;Ae===0?Et=no[0]:Et=[je/Ae,it/Ae];var Uu=w.unproject(oe(Et));return Ie([Uu.lat+ln.lat,Uu.lng+ln.lng])}function Ro(d){for(var w=0,T=0,F=0,z=0;z<d.length;z++){var Y=Ie(d[z]);w+=Y.lat,T+=Y.lng,F++}return Ie([w/F,T/F])}var Bl={__proto__:null,clipPolygon:Du,polygonCenter:eo,centroid:Ro};function jh(d,w){if(!w||!d.length)return d.slice();var T=w*w;return d=ku(d,T),d=zf(d,T),d}function Rc(d,w,T){return Math.sqrt(Ji(d,w,T,!0))}function rl(d,w,T){return Ji(d,w,T)}function zf(d,w){var T=d.length,F=typeof Uint8Array<"u"?Uint8Array:Array,z=new F(T);z[0]=z[T-1]=1,Nc(d,z,w,0,T-1);var Y,de=[];for(Y=0;Y<T;Y++)z[Y]&&de.push(d[Y]);return de}function Nc(d,w,T,F,z){var Y=0,de,Ae,je;for(Ae=F+1;Ae<=z-1;Ae++)je=Ji(d[Ae],d[F],d[z],!0),je>Y&&(de=Ae,Y=je);Y>T&&(w[de]=1,Nc(d,w,T,F,de),Nc(d,w,T,de,z))}function ku(d,w){for(var T=[d[0]],F=1,z=0,Y=d.length;F<Y;F++)Ul(d[F],d[z])>w&&(T.push(d[F]),z=F);return z<Y-1&&T.push(d[Y-1]),T}var Vh;function Dc(d,w,T,F,z){var Y=F?Vh:ra(d,T),de=ra(w,T),Ae,je,it;for(Vh=de;;){if(!(Y|de))return[d,w];if(Y&de)return!1;Ae=Y||de,je=Ri(d,w,Ae,T,z),it=ra(je,T),Ae===Y?(d=je,Y=it):(w=je,de=it)}}function Ri(d,w,T,F,z){var Y=w.x-d.x,de=w.y-d.y,Ae=F.min,je=F.max,it,Et;return T&8?(it=d.x+Y*(je.y-d.y)/de,Et=je.y):T&4?(it=d.x+Y*(Ae.y-d.y)/de,Et=Ae.y):T&2?(it=je.x,Et=d.y+de*(je.x-d.x)/Y):T&1&&(it=Ae.x,Et=d.y+de*(Ae.x-d.x)/Y),new X(it,Et,z)}function ra(d,w){var T=0;return d.x<w.min.x?T|=1:d.x>w.max.x&&(T|=2),d.y<w.min.y?T|=4:d.y>w.max.y&&(T|=8),T}function Ul(d,w){var T=w.x-d.x,F=w.y-d.y;return T*T+F*F}function Ji(d,w,T,F){var z=w.x,Y=w.y,de=T.x-z,Ae=T.y-Y,je=de*de+Ae*Ae,it;return je>0&&(it=((d.x-z)*de+(d.y-Y)*Ae)/je,it>1?(z=T.x,Y=T.y):it>0&&(z+=de*it,Y+=Ae*it)),de=d.x-z,Ae=d.y-Y,F?de*de+Ae*Ae:new X(z,Y)}function A(d){return!b(d[0])||typeof d[0][0]!="object"&&typeof d[0][0]<"u"}function V(d){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),A(d)}function G(d,w){var T,F,z,Y,de,Ae,je,it;if(!d||d.length===0)throw new Error("latlngs not passed");A(d)||(console.warn("latlngs are not flat! Only the first ring will be used"),d=d[0]);var Et=Ie([0,0]),ln=Qe(d),Dn=ln.getNorthWest().distanceTo(ln.getSouthWest())*ln.getNorthEast().distanceTo(ln.getNorthWest());Dn<1700&&(Et=Ro(d));var Rs=d.length,bi=[];for(T=0;T<Rs;T++){var no=Ie(d[T]);bi.push(w.project(Ie([no.lat-Et.lat,no.lng-Et.lng])))}for(T=0,F=0;T<Rs-1;T++)F+=bi[T].distanceTo(bi[T+1])/2;if(F===0)it=bi[0];else for(T=0,Y=0;T<Rs-1;T++)if(de=bi[T],Ae=bi[T+1],z=de.distanceTo(Ae),Y+=z,Y>F){je=(Y-F)/z,it=[Ae.x-je*(Ae.x-de.x),Ae.y-je*(Ae.y-de.y)];break}var ro=w.unproject(oe(it));return Ie([ro.lat+Et.lat,ro.lng+Et.lng])}var Q={__proto__:null,simplify:jh,pointToSegmentDistance:Rc,closestPointOnSegment:rl,clipSegment:Dc,_getEdgeIntersection:Ri,_getBitCode:ra,_sqClosestPointOnSegment:Ji,isFlat:A,_flat:V,polylineCenter:G},Ee={project:function(d){return new X(d.lng,d.lat)},unproject:function(d){return new ve(d.y,d.x)},bounds:new fe([-180,-90],[180,90])},Le={R:6378137,R_MINOR:6356752314245179e-9,bounds:new fe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(d){var w=Math.PI/180,T=this.R,F=d.lat*w,z=this.R_MINOR/T,Y=Math.sqrt(1-z*z),de=Y*Math.sin(F),Ae=Math.tan(Math.PI/4-F/2)/Math.pow((1-de)/(1+de),Y/2);return F=-T*Math.log(Math.max(Ae,1e-10)),new X(d.lng*w*T,F)},unproject:function(d){for(var w=180/Math.PI,T=this.R,F=this.R_MINOR/T,z=Math.sqrt(1-F*F),Y=Math.exp(-d.y/T),de=Math.PI/2-2*Math.atan(Y),Ae=0,je=.1,it;Ae<15&&Math.abs(je)>1e-7;Ae++)it=z*Math.sin(de),it=Math.pow((1-it)/(1+it),z/2),je=Math.PI/2-2*Math.atan(Y*it)-de,de+=je;return new ve(de*w,d.x*w/T)}},ht={__proto__:null,LonLat:Ee,Mercator:Le,SphericalMercator:Me},Wn=i({},tt,{code:"EPSG:3395",projection:Le,transformation:function(){var d=.5/(Math.PI*Le.R);return Pe(d,.5,-d,.5)}()}),ui=i({},tt,{code:"EPSG:4326",projection:Ee,transformation:Pe(1/180,1,-1/180,.5)}),zn=i({},we,{projection:Ee,transformation:Pe(1,0,-1,0),scale:function(d){return Math.pow(2,d)},zoom:function(d){return Math.log(d)/Math.LN2},distance:function(d,w){var T=w.lng-d.lng,F=w.lat-d.lat;return Math.sqrt(T*T+F*F)},infinite:!0});we.Earth=tt,we.EPSG3395=Wn,we.EPSG3857=ne,we.EPSG900913=Be,we.EPSG4326=ui,we.Simple=zn;var lr=le.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(d){return d.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(d){return d&&d.removeLayer(this),this},getPane:function(d){return this._map.getPane(d?this.options[d]||d:this.options.pane)},addInteractiveTarget:function(d){return this._map._targets[l(d)]=this,this},removeInteractiveTarget:function(d){return delete this._map._targets[l(d)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(d){var w=d.target;if(w.hasLayer(this)){if(this._map=w,this._zoomAnimated=w._zoomAnimated,this.getEvents){var T=this.getEvents();w.on(T,this),this.once("remove",function(){w.off(T,this)},this)}this.onAdd(w),this.fire("add"),w.fire("layeradd",{layer:this})}}});Fn.include({addLayer:function(d){if(!d._layerAdd)throw new Error("The provided object is not a Layer.");var w=l(d);return this._layers[w]?this:(this._layers[w]=d,d._mapToAdd=this,d.beforeAdd&&d.beforeAdd(this),this.whenReady(d._layerAdd,d),this)},removeLayer:function(d){var w=l(d);return this._layers[w]?(this._loaded&&d.onRemove(this),delete this._layers[w],this._loaded&&(this.fire("layerremove",{layer:d}),d.fire("remove")),d._map=d._mapToAdd=null,this):this},hasLayer:function(d){return l(d)in this._layers},eachLayer:function(d,w){for(var T in this._layers)d.call(w,this._layers[T]);return this},_addLayers:function(d){d=d?b(d)?d:[d]:[];for(var w=0,T=d.length;w<T;w++)this.addLayer(d[w])},_addZoomLimit:function(d){(!isNaN(d.options.maxZoom)||!isNaN(d.options.minZoom))&&(this._zoomBoundLayers[l(d)]=d,this._updateZoomLevels())},_removeZoomLimit:function(d){var w=l(d);this._zoomBoundLayers[w]&&(delete this._zoomBoundLayers[w],this._updateZoomLevels())},_updateZoomLevels:function(){var d=1/0,w=-1/0,T=this._getZoomSpan();for(var F in this._zoomBoundLayers){var z=this._zoomBoundLayers[F].options;d=z.minZoom===void 0?d:Math.min(d,z.minZoom),w=z.maxZoom===void 0?w:Math.max(w,z.maxZoom)}this._layersMaxZoom=w===-1/0?void 0:w,this._layersMinZoom=d===1/0?void 0:d,T!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Gn=lr.extend({initialize:function(d,w){_(this,w),this._layers={};var T,F;if(d)for(T=0,F=d.length;T<F;T++)this.addLayer(d[T])},addLayer:function(d){var w=this.getLayerId(d);return this._layers[w]=d,this._map&&this._map.addLayer(d),this},removeLayer:function(d){var w=d in this._layers?d:this.getLayerId(d);return this._map&&this._layers[w]&&this._map.removeLayer(this._layers[w]),delete this._layers[w],this},hasLayer:function(d){var w=typeof d=="number"?d:this.getLayerId(d);return w in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(d){var w=Array.prototype.slice.call(arguments,1),T,F;for(T in this._layers)F=this._layers[T],F[d]&&F[d].apply(F,w);return this},onAdd:function(d){this.eachLayer(d.addLayer,d)},onRemove:function(d){this.eachLayer(d.removeLayer,d)},eachLayer:function(d,w){for(var T in this._layers)d.call(w,this._layers[T]);return this},getLayer:function(d){return this._layers[d]},getLayers:function(){var d=[];return this.eachLayer(d.push,d),d},setZIndex:function(d){return this.invoke("setZIndex",d)},getLayerId:function(d){return l(d)}}),Si=function(d,w){return new Gn(d,w)},_n=Gn.extend({addLayer:function(d){return this.hasLayer(d)?this:(d.addEventParent(this),Gn.prototype.addLayer.call(this,d),this.fire("layeradd",{layer:d}))},removeLayer:function(d){return this.hasLayer(d)?(d in this._layers&&(d=this._layers[d]),d.removeEventParent(this),Gn.prototype.removeLayer.call(this,d),this.fire("layerremove",{layer:d})):this},setStyle:function(d){return this.invoke("setStyle",d)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var d=new We;for(var w in this._layers){var T=this._layers[w];d.extend(T.getBounds?T.getBounds():T.getLatLng())}return d}}),il=function(d,w){return new _n(d,w)},Ei=K.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(d){_(this,d)},createIcon:function(d){return this._createIcon("icon",d)},createShadow:function(d){return this._createIcon("shadow",d)},_createIcon:function(d,w){var T=this._getIconUrl(d);if(!T){if(d==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var F=this._createImg(T,w&&w.tagName==="IMG"?w:null);return this._setIconStyles(F,d),(this.options.crossOrigin||this.options.crossOrigin==="")&&(F.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),F},_setIconStyles:function(d,w){var T=this.options,F=T[w+"Size"];typeof F=="number"&&(F=[F,F]);var z=oe(F),Y=oe(w==="shadow"&&T.shadowAnchor||T.iconAnchor||z&&z.divideBy(2,!0));d.className="leaflet-marker-"+w+" "+(T.className||""),Y&&(d.style.marginLeft=-Y.x+"px",d.style.marginTop=-Y.y+"px"),z&&(d.style.width=z.x+"px",d.style.height=z.y+"px")},_createImg:function(d,w){return w=w||document.createElement("img"),w.src=d,w},_getIconUrl:function(d){return Gt.retina&&this.options[d+"RetinaUrl"]||this.options[d+"Url"]}});function sw(d){return new Ei(d)}var zh=Ei.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(d){return typeof zh.imagePath!="string"&&(zh.imagePath=this._detectIconPath()),(this.options.imagePath||zh.imagePath)+Ei.prototype._getIconUrl.call(this,d)},_stripUrl:function(d){var w=function(T,F,z){var Y=F.exec(T);return Y&&Y[z]};return d=w(d,/^url\((['"])?(.+)\1\)$/,2),d&&w(d,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var d=Lt("div","leaflet-default-icon-path",document.body),w=Vt(d,"background-image")||Vt(d,"backgroundImage");if(document.body.removeChild(d),w=this._stripUrl(w),w)return w;var T=document.querySelector('link[href$="leaflet.css"]');return T?T.href.substring(0,T.href.length-11-1):""}}),$m=Fr.extend({initialize:function(d){this._marker=d},addHooks:function(){var d=this._marker._icon;this._draggable||(this._draggable=new Po(d,d,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),qt(d,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Jn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(d){var w=this._marker,T=w._map,F=this._marker.options.autoPanSpeed,z=this._marker.options.autoPanPadding,Y=Pi(w._icon),de=T.getPixelBounds(),Ae=T.getPixelOrigin(),je=De(de.min._subtract(Ae).add(z),de.max._subtract(Ae).subtract(z));if(!je.contains(Y)){var it=oe((Math.max(je.max.x,Y.x)-je.max.x)/(de.max.x-je.max.x)-(Math.min(je.min.x,Y.x)-je.min.x)/(de.min.x-je.min.x),(Math.max(je.max.y,Y.y)-je.max.y)/(de.max.y-je.max.y)-(Math.min(je.min.y,Y.y)-je.min.y)/(de.min.y-je.min.y)).multiplyBy(F);T.panBy(it,{animate:!1}),this._draggable._newPos._add(it),this._draggable._startPos._add(it),$t(w._icon,this._draggable._newPos),this._onDrag(d),this._panRequest=U(this._adjustPan.bind(this,d))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(d){this._marker.options.autoPan&&(H(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,d)))},_onDrag:function(d){var w=this._marker,T=w._shadow,F=Pi(w._icon),z=w._map.layerPointToLatLng(F);T&&$t(T,F),w._latlng=z,d.latlng=z,d.oldLatLng=this._oldLatLng,w.fire("move",d).fire("drag",d)},_onDragEnd:function(d){H(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",d)}}),Hh=lr.extend({options:{icon:new zh,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(d,w){_(this,w),this._latlng=Ie(d)},onAdd:function(d){this._zoomAnimated=this._zoomAnimated&&d.options.markerZoomAnimation,this._zoomAnimated&&d.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(d){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&d.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(d){var w=this._latlng;return this._latlng=Ie(d),this.update(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},setZIndexOffset:function(d){return this.options.zIndexOffset=d,this.update()},getIcon:function(){return this.options.icon},setIcon:function(d){return this.options.icon=d,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var d=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(d)}return this},_initIcon:function(){var d=this.options,w="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),T=d.icon.createIcon(this._icon),F=!1;T!==this._icon&&(this._icon&&this._removeIcon(),F=!0,d.title&&(T.title=d.title),T.tagName==="IMG"&&(T.alt=d.alt||"")),qt(T,w),d.keyboard&&(T.tabIndex="0",T.setAttribute("role","button")),this._icon=T,d.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&sn(T,"focus",this._panOnFocus,this);var z=d.icon.createShadow(this._shadow),Y=!1;z!==this._shadow&&(this._removeShadow(),Y=!0),z&&(qt(z,w),z.alt=""),this._shadow=z,d.opacity<1&&this._updateOpacity(),F&&this.getPane().appendChild(this._icon),this._initInteraction(),z&&Y&&this.getPane(d.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&mr(this._icon,"focus",this._panOnFocus,this),Pt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Pt(this._shadow),this._shadow=null},_setPos:function(d){this._icon&&$t(this._icon,d),this._shadow&&$t(this._shadow,d),this._zIndex=d.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(d){this._icon&&(this._icon.style.zIndex=this._zIndex+d)},_animateZoom:function(d){var w=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center).round();this._setPos(w)},_initInteraction:function(){if(this.options.interactive&&(qt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),$m)){var d=this.options.draggable;this.dragging&&(d=this.dragging.enabled(),this.dragging.disable()),this.dragging=new $m(this),d&&this.dragging.enable()}},setOpacity:function(d){return this.options.opacity=d,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var d=this.options.opacity;this._icon&&dn(this._icon,d),this._shadow&&dn(this._shadow,d)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var d=this._map;if(d){var w=this.options.icon.options,T=w.iconSize?oe(w.iconSize):oe(0,0),F=w.iconAnchor?oe(w.iconAnchor):oe(0,0);d.panInside(this._latlng,{paddingTopLeft:F,paddingBottomRight:T.subtract(F)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ow(d,w){return new Hh(d,w)}var ia=lr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(d){this._renderer=d.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(d){return _(this,d),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&d&&Object.prototype.hasOwnProperty.call(d,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),jl=ia.extend({options:{fill:!0,radius:10},initialize:function(d,w){_(this,w),this._latlng=Ie(d),this._radius=this.options.radius},setLatLng:function(d){var w=this._latlng;return this._latlng=Ie(d),this.redraw(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(d){return this.options.radius=this._radius=d,this.redraw()},getRadius:function(){return this._radius},setStyle:function(d){var w=d&&d.radius||this._radius;return ia.prototype.setStyle.call(this,d),this.setRadius(w),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var d=this._radius,w=this._radiusY||d,T=this._clickTolerance(),F=[d+T,w+T];this._pxBounds=new fe(this._point.subtract(F),this._point.add(F))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(d){return d.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ay(d,w){return new jl(d,w)}var Ou=jl.extend({initialize:function(d,w,T){if(typeof w=="number"&&(w=i({},T,{radius:w})),_(this,w),this._latlng=Ie(d),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(d){return this._mRadius=d,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var d=[this._radius,this._radiusY||this._radius];return new We(this._map.layerPointToLatLng(this._point.subtract(d)),this._map.layerPointToLatLng(this._point.add(d)))},setStyle:ia.prototype.setStyle,_project:function(){var d=this._latlng.lng,w=this._latlng.lat,T=this._map,F=T.options.crs;if(F.distance===tt.distance){var z=Math.PI/180,Y=this._mRadius/tt.R/z,de=T.project([w+Y,d]),Ae=T.project([w-Y,d]),je=de.add(Ae).divideBy(2),it=T.unproject(je).lat,Et=Math.acos((Math.cos(Y*z)-Math.sin(w*z)*Math.sin(it*z))/(Math.cos(w*z)*Math.cos(it*z)))/z;(isNaN(Et)||Et===0)&&(Et=Y/Math.cos(Math.PI/180*w)),this._point=je.subtract(T.getPixelOrigin()),this._radius=isNaN(Et)?0:je.x-T.project([it,d-Et]).x,this._radiusY=je.y-de.y}else{var ln=F.unproject(F.project(this._latlng).subtract([this._mRadius,0]));this._point=T.latLngToLayerPoint(this._latlng),this._radius=this._point.x-T.latLngToLayerPoint(ln).x}this._updateBounds()}});function Xm(d,w,T){return new Ou(d,w,T)}var sl=ia.extend({options:{smoothFactor:1,noClip:!1},initialize:function(d,w){_(this,w),this._setLatLngs(d)},getLatLngs:function(){return this._latlngs},setLatLngs:function(d){return this._setLatLngs(d),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(d){for(var w=1/0,T=null,F=Ji,z,Y,de=0,Ae=this._parts.length;de<Ae;de++)for(var je=this._parts[de],it=1,Et=je.length;it<Et;it++){z=je[it-1],Y=je[it];var ln=F(d,z,Y,!0);ln<w&&(w=ln,T=F(d,z,Y))}return T&&(T.distance=Math.sqrt(w)),T},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return G(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(d,w){return w=w||this._defaultShape(),d=Ie(d),w.push(d),this._bounds.extend(d),this.redraw()},_setLatLngs:function(d){this._bounds=new We,this._latlngs=this._convertLatLngs(d)},_defaultShape:function(){return A(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(d){for(var w=[],T=A(d),F=0,z=d.length;F<z;F++)T?(w[F]=Ie(d[F]),this._bounds.extend(w[F])):w[F]=this._convertLatLngs(d[F]);return w},_project:function(){var d=new fe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,d),this._bounds.isValid()&&d.isValid()&&(this._rawPxBounds=d,this._updateBounds())},_updateBounds:function(){var d=this._clickTolerance(),w=new X(d,d);this._rawPxBounds&&(this._pxBounds=new fe([this._rawPxBounds.min.subtract(w),this._rawPxBounds.max.add(w)]))},_projectLatlngs:function(d,w,T){var F=d[0]instanceof ve,z=d.length,Y,de;if(F){for(de=[],Y=0;Y<z;Y++)de[Y]=this._map.latLngToLayerPoint(d[Y]),T.extend(de[Y]);w.push(de)}else for(Y=0;Y<z;Y++)this._projectLatlngs(d[Y],w,T)},_clipPoints:function(){var d=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(d))){if(this.options.noClip){this._parts=this._rings;return}var w=this._parts,T,F,z,Y,de,Ae,je;for(T=0,z=0,Y=this._rings.length;T<Y;T++)for(je=this._rings[T],F=0,de=je.length;F<de-1;F++)Ae=Dc(je[F],je[F+1],d,F,!0),Ae&&(w[z]=w[z]||[],w[z].push(Ae[0]),(Ae[1]!==je[F+1]||F===de-2)&&(w[z].push(Ae[1]),z++))}},_simplifyPoints:function(){for(var d=this._parts,w=this.options.smoothFactor,T=0,F=d.length;T<F;T++)d[T]=jh(d[T],w)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(d,w){var T,F,z,Y,de,Ae,je=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(d))return!1;for(T=0,Y=this._parts.length;T<Y;T++)for(Ae=this._parts[T],F=0,de=Ae.length,z=de-1;F<de;z=F++)if(!(!w&&F===0)&&Rc(d,Ae[z],Ae[F])<=je)return!0;return!1}});function aw(d,w){return new sl(d,w)}sl._flat=V;var Ra=sl.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return eo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(d){var w=sl.prototype._convertLatLngs.call(this,d),T=w.length;return T>=2&&w[0]instanceof ve&&w[0].equals(w[T-1])&&w.pop(),w},_setLatLngs:function(d){sl.prototype._setLatLngs.call(this,d),A(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return A(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var d=this._renderer._bounds,w=this.options.weight,T=new X(w,w);if(d=new fe(d.min.subtract(T),d.max.add(T)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(d))){if(this.options.noClip){this._parts=this._rings;return}for(var F=0,z=this._rings.length,Y;F<z;F++)Y=Du(this._rings[F],d,!0),Y.length&&this._parts.push(Y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(d){var w=!1,T,F,z,Y,de,Ae,je,it;if(!this._pxBounds||!this._pxBounds.contains(d))return!1;for(Y=0,je=this._parts.length;Y<je;Y++)for(T=this._parts[Y],de=0,it=T.length,Ae=it-1;de<it;Ae=de++)F=T[de],z=T[Ae],F.y>d.y!=z.y>d.y&&d.x<(z.x-F.x)*(d.y-F.y)/(z.y-F.y)+F.x&&(w=!w);return w||sl.prototype._containsPoint.call(this,d,!0)}});function lw(d,w){return new Ra(d,w)}var No=_n.extend({initialize:function(d,w){_(this,w),this._layers={},d&&this.addData(d)},addData:function(d){var w=b(d)?d:d.features,T,F,z;if(w){for(T=0,F=w.length;T<F;T++)z=w[T],(z.geometries||z.geometry||z.features||z.coordinates)&&this.addData(z);return this}var Y=this.options;if(Y.filter&&!Y.filter(d))return this;var de=Ps(d,Y);return de?(de.feature=Gh(d),de.defaultOptions=de.options,this.resetStyle(de),Y.onEachFeature&&Y.onEachFeature(d,de),this.addLayer(de)):this},resetStyle:function(d){return d===void 0?this.eachLayer(this.resetStyle,this):(d.options=i({},d.defaultOptions),this._setLayerStyle(d,this.options.style),this)},setStyle:function(d){return this.eachLayer(function(w){this._setLayerStyle(w,d)},this)},_setLayerStyle:function(d,w){d.setStyle&&(typeof w=="function"&&(w=w(d.feature)),d.setStyle(w))}});function Ps(d,w){var T=d.type==="Feature"?d.geometry:d,F=T?T.coordinates:null,z=[],Y=w&&w.pointToLayer,de=w&&w.coordsToLatLng||kc,Ae,je,it,Et;if(!F&&!T)return null;switch(T.type){case"Point":return Ae=de(F),Wh(Y,d,Ae,w);case"MultiPoint":for(it=0,Et=F.length;it<Et;it++)Ae=de(F[it]),z.push(Wh(Y,d,Ae,w));return new _n(z);case"LineString":case"MultiLineString":return je=Do(F,T.type==="LineString"?0:1,de),new sl(je,w);case"Polygon":case"MultiPolygon":return je=Do(F,T.type==="Polygon"?1:2,de),new Ra(je,w);case"GeometryCollection":for(it=0,Et=T.geometries.length;it<Et;it++){var ln=Ps({geometry:T.geometries[it],type:"Feature",properties:d.properties},w);ln&&z.push(ln)}return new _n(z);case"FeatureCollection":for(it=0,Et=T.features.length;it<Et;it++){var Dn=Ps(T.features[it],w);Dn&&z.push(Dn)}return new _n(z);default:throw new Error("Invalid GeoJSON object.")}}function Wh(d,w,T,F){return d?d(w,T):new Hh(T,F&&F.markersInheritOptions&&F)}function kc(d){return new ve(d[1],d[0],d[2])}function Do(d,w,T){for(var F=[],z=0,Y=d.length,de;z<Y;z++)de=w?Do(d[z],w-1,T):(T||kc)(d[z]),F.push(de);return F}function Hf(d,w){return d=Ie(d),d.alt!==void 0?[f(d.lng,w),f(d.lat,w),f(d.alt,w)]:[f(d.lng,w),f(d.lat,w)]}function Vl(d,w,T,F){for(var z=[],Y=0,de=d.length;Y<de;Y++)z.push(w?Vl(d[Y],A(d[Y])?0:w-1,T,F):Hf(d[Y],F));return!w&&T&&z.length>0&&z.push(z[0].slice()),z}function Lu(d,w){return d.feature?i({},d.feature,{geometry:w}):Gh(w)}function Gh(d){return d.type==="Feature"||d.type==="FeatureCollection"?d:{type:"Feature",properties:{},geometry:d}}var Dr={toGeoJSON:function(d){return Lu(this,{type:"Point",coordinates:Hf(this.getLatLng(),d)})}};Hh.include(Dr),Ou.include(Dr),jl.include(Dr),sl.include({toGeoJSON:function(d){var w=!A(this._latlngs),T=Vl(this._latlngs,w?1:0,!1,d);return Lu(this,{type:(w?"Multi":"")+"LineString",coordinates:T})}}),Ra.include({toGeoJSON:function(d){var w=!A(this._latlngs),T=w&&!A(this._latlngs[0]),F=Vl(this._latlngs,T?2:w?1:0,!0,d);return w||(F=[F]),Lu(this,{type:(T?"Multi":"")+"Polygon",coordinates:F})}}),Gn.include({toMultiPoint:function(d){var w=[];return this.eachLayer(function(T){w.push(T.toGeoJSON(d).geometry.coordinates)}),Lu(this,{type:"MultiPoint",coordinates:w})},toGeoJSON:function(d){var w=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(w==="MultiPoint")return this.toMultiPoint(d);var T=w==="GeometryCollection",F=[];return this.eachLayer(function(z){if(z.toGeoJSON){var Y=z.toGeoJSON(d);if(T)F.push(Y.geometry);else{var de=Gh(Y);de.type==="FeatureCollection"?F.push.apply(F,de.features):F.push(de)}}}),T?Lu(this,{geometries:F,type:"GeometryCollection"}):{type:"FeatureCollection",features:F}}});function Wf(d,w){return new No(d,w)}var ly=Wf,$h=lr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(d,w,T){this._url=d,this._bounds=Qe(w),_(this,T)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(qt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Pt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(d){return this.options.opacity=d,this._image&&this._updateOpacity(),this},setStyle:function(d){return d.opacity&&this.setOpacity(d.opacity),this},bringToFront:function(){return this._map&&Rt(this._image),this},bringToBack:function(){return this._map&&Ln(this._image),this},setUrl:function(d){return this._url=d,this._image&&(this._image.src=d),this},setBounds:function(d){return this._bounds=Qe(d),this._map&&this._reset(),this},getEvents:function(){var d={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},setZIndex:function(d){return this.options.zIndex=d,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var d=this._url.tagName==="IMG",w=this._image=d?this._url:Lt("img");if(qt(w,"leaflet-image-layer"),this._zoomAnimated&&qt(w,"leaflet-zoom-animated"),this.options.className&&qt(w,this.options.className),w.onselectstart=h,w.onmousemove=h,w.onload=o(this.fire,this,"load"),w.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),d){this._url=w.src;return}w.src=this._url,w.alt=this.options.alt},_animateZoom:function(d){var w=this._map.getZoomScale(d.zoom),T=this._map._latLngBoundsToNewLayerBounds(this._bounds,d.zoom,d.center).min;Mr(this._image,T,w)},_reset:function(){var d=this._image,w=new fe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),T=w.getSize();$t(d,w.min),d.style.width=T.x+"px",d.style.height=T.y+"px"},_updateOpacity:function(){dn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var d=this.options.errorOverlayUrl;d&&this._url!==d&&(this._url=d,this._image.src=d)},getCenter:function(){return this._bounds.getCenter()}}),qm=function(d,w,T){return new $h(d,w,T)},ko=$h.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var d=this._url.tagName==="VIDEO",w=this._image=d?this._url:Lt("video");if(qt(w,"leaflet-image-layer"),this._zoomAnimated&&qt(w,"leaflet-zoom-animated"),this.options.className&&qt(w,this.options.className),w.onselectstart=h,w.onmousemove=h,w.onloadeddata=o(this.fire,this,"load"),d){for(var T=w.getElementsByTagName("source"),F=[],z=0;z<T.length;z++)F.push(T[z].src);this._url=T.length>0?F:[w.src];return}b(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(w.style,"objectFit")&&(w.style.objectFit="fill"),w.autoplay=!!this.options.autoplay,w.loop=!!this.options.loop,w.muted=!!this.options.muted,w.playsInline=!!this.options.playsInline;for(var Y=0;Y<this._url.length;Y++){var de=Lt("source");de.src=this._url[Y],w.appendChild(de)}}});function Xh(d,w,T){return new ko(d,w,T)}var qr=$h.extend({_initImage:function(){var d=this._image=this._url;qt(d,"leaflet-image-layer"),this._zoomAnimated&&qt(d,"leaflet-zoom-animated"),this.options.className&&qt(d,this.options.className),d.onselectstart=h,d.onmousemove=h}});function gs(d,w,T){return new qr(d,w,T)}var Sr=lr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(d,w){d&&(d instanceof ve||b(d))?(this._latlng=Ie(d),_(this,w)):(_(this,d),this._source=w),this.options.content&&(this._content=this.options.content)},openOn:function(d){return d=arguments.length?d:this._source._map,d.hasLayer(this)||d.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(d){return this._map?this.close():(arguments.length?this._source=d:d=this._source,this._prepareOpen(),this.openOn(d._map)),this},onAdd:function(d){this._zoomAnimated=d._zoomAnimated,this._container||this._initLayout(),d._fadeAnimated&&dn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),d._fadeAnimated&&dn(this._container,1),this.bringToFront(),this.options.interactive&&(qt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(d){d._fadeAnimated?(dn(this._container,0),this._removeTimeout=setTimeout(o(Pt,void 0,this._container),200)):Pt(this._container),this.options.interactive&&(Jn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(d){return this._latlng=Ie(d),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(d){return this._content=d,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var d={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Rt(this._container),this},bringToBack:function(){return this._map&&Ln(this._container),this},_prepareOpen:function(d){var w=this._source;if(!w._map)return!1;if(w instanceof _n){w=null;var T=this._source._layers;for(var F in T)if(T[F]._map){w=T[F];break}if(!w)return!1;this._source=w}if(!d)if(w.getCenter)d=w.getCenter();else if(w.getLatLng)d=w.getLatLng();else if(w.getBounds)d=w.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(d),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var d=this._contentNode,w=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof w=="string")d.innerHTML=w;else{for(;d.hasChildNodes();)d.removeChild(d.firstChild);d.appendChild(w)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var d=this._map.latLngToLayerPoint(this._latlng),w=oe(this.options.offset),T=this._getAnchor();this._zoomAnimated?$t(this._container,d.add(T)):w=w.add(d).add(T);var F=this._containerBottom=-w.y,z=this._containerLeft=-Math.round(this._containerWidth/2)+w.x;this._container.style.bottom=F+"px",this._container.style.left=z+"px"}},_getAnchor:function(){return[0,0]}});Fn.include({_initOverlay:function(d,w,T,F){var z=w;return z instanceof d||(z=new d(F).setContent(w)),T&&z.setLatLng(T),z}}),lr.include({_initOverlay:function(d,w,T,F){var z=T;return z instanceof d?(_(z,F),z._source=this):(z=w&&!F?w:new d(F,this),z.setContent(T)),z}});var Fu=Sr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(d){return d=arguments.length?d:this._source._map,!d.hasLayer(this)&&d._popup&&d._popup.options.autoClose&&d.removeLayer(d._popup),d._popup=this,Sr.prototype.openOn.call(this,d)},onAdd:function(d){Sr.prototype.onAdd.call(this,d),d.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ia||this._source.on("preclick",ta))},onRemove:function(d){Sr.prototype.onRemove.call(this,d),d.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ia||this._source.off("preclick",ta))},getEvents:function(){var d=Sr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(d.preclick=this.close),this.options.keepInView&&(d.moveend=this._adjustPan),d},_initLayout:function(){var d="leaflet-popup",w=this._container=Lt("div",d+" "+(this.options.className||"")+" leaflet-zoom-animated"),T=this._wrapper=Lt("div",d+"-content-wrapper",w);if(this._contentNode=Lt("div",d+"-content",T),Qi(w),Pa(this._contentNode),sn(w,"contextmenu",ta),this._tipContainer=Lt("div",d+"-tip-container",w),this._tip=Lt("div",d+"-tip",this._tipContainer),this.options.closeButton){var F=this._closeButton=Lt("a",d+"-close-button",w);F.setAttribute("role","button"),F.setAttribute("aria-label","Close popup"),F.href="#close",F.innerHTML='<span aria-hidden="true">&#215;</span>',sn(F,"click",function(z){Xr(z),this.close()},this)}},_updateLayout:function(){var d=this._contentNode,w=d.style;w.width="",w.whiteSpace="nowrap";var T=d.offsetWidth;T=Math.min(T,this.options.maxWidth),T=Math.max(T,this.options.minWidth),w.width=T+1+"px",w.whiteSpace="",w.height="";var F=d.offsetHeight,z=this.options.maxHeight,Y="leaflet-popup-scrolled";z&&F>z?(w.height=z+"px",qt(d,Y)):Jn(d,Y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(d){var w=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center),T=this._getAnchor();$t(this._container,w.add(T))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var d=this._map,w=parseInt(Vt(this._container,"marginBottom"),10)||0,T=this._container.offsetHeight+w,F=this._containerWidth,z=new X(this._containerLeft,-T-this._containerBottom);z._add(Pi(this._container));var Y=d.layerPointToContainerPoint(z),de=oe(this.options.autoPanPadding),Ae=oe(this.options.autoPanPaddingTopLeft||de),je=oe(this.options.autoPanPaddingBottomRight||de),it=d.getSize(),Et=0,ln=0;Y.x+F+je.x>it.x&&(Et=Y.x+F-it.x+je.x),Y.x-Et-Ae.x<0&&(Et=Y.x-Ae.x),Y.y+T+je.y>it.y&&(ln=Y.y+T-it.y+je.y),Y.y-ln-Ae.y<0&&(ln=Y.y-Ae.y),(Et||ln)&&(this.options.keepInView&&(this._autopanning=!0),d.fire("autopanstart").panBy([Et,ln]))}},_getAnchor:function(){return oe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Gf=function(d,w){return new Fu(d,w)};Fn.mergeOptions({closePopupOnClick:!0}),Fn.include({openPopup:function(d,w,T){return this._initOverlay(Fu,d,w,T).openOn(this),this},closePopup:function(d){return d=arguments.length?d:this._popup,d&&d.close(),this}}),lr.include({bindPopup:function(d,w){return this._popup=this._initOverlay(Fu,this._popup,d,w),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(d){return this._popup&&(this instanceof _n||(this._popup._source=this),this._popup._prepareOpen(d||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(d){return this._popup&&this._popup.setContent(d),this},getPopup:function(){return this._popup},_openPopup:function(d){if(!(!this._popup||!this._map)){Io(d);var w=d.layer||d.target;if(this._popup._source===w&&!(w instanceof ia)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(d.latlng);return}this._popup._source=w,this.openPopup(d.latlng)}},_movePopup:function(d){this._popup.setLatLng(d.latlng)},_onKeyPress:function(d){d.originalEvent.keyCode===13&&this._openPopup(d)}});var Oc=Sr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(d){Sr.prototype.onAdd.call(this,d),this.setOpacity(this.options.opacity),d.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(d){Sr.prototype.onRemove.call(this,d),d.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var d=Sr.prototype.getEvents.call(this);return this.options.permanent||(d.preclick=this.close),d},_initLayout:function(){var d="leaflet-tooltip",w=d+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Lt("div",w),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(d){var w,T,F=this._map,z=this._container,Y=F.latLngToContainerPoint(F.getCenter()),de=F.layerPointToContainerPoint(d),Ae=this.options.direction,je=z.offsetWidth,it=z.offsetHeight,Et=oe(this.options.offset),ln=this._getAnchor();Ae==="top"?(w=je/2,T=it):Ae==="bottom"?(w=je/2,T=0):Ae==="center"?(w=je/2,T=it/2):Ae==="right"?(w=0,T=it/2):Ae==="left"?(w=je,T=it/2):de.x<Y.x?(Ae="right",w=0,T=it/2):(Ae="left",w=je+(Et.x+ln.x)*2,T=it/2),d=d.subtract(oe(w,T,!0)).add(Et).add(ln),Jn(z,"leaflet-tooltip-right"),Jn(z,"leaflet-tooltip-left"),Jn(z,"leaflet-tooltip-top"),Jn(z,"leaflet-tooltip-bottom"),qt(z,"leaflet-tooltip-"+Ae),$t(z,d)},_updatePosition:function(){var d=this._map.latLngToLayerPoint(this._latlng);this._setPosition(d)},setOpacity:function(d){this.options.opacity=d,this._container&&dn(this._container,d)},_animateZoom:function(d){var w=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center);this._setPosition(w)},_getAnchor:function(){return oe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),mC=function(d,w){return new Oc(d,w)};Fn.include({openTooltip:function(d,w,T){return this._initOverlay(Oc,d,w,T).openOn(this),this},closeTooltip:function(d){return d.close(),this}}),lr.include({bindTooltip:function(d,w){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Oc,this._tooltip,d,w),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(d){if(!(!d&&this._tooltipHandlersAdded)){var w=d?"off":"on",T={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?T.add=this._openTooltip:(T.mouseover=this._openTooltip,T.mouseout=this.closeTooltip,T.click=this._openTooltip,this._map?this._addFocusListeners():T.add=this._addFocusListeners),this._tooltip.options.sticky&&(T.mousemove=this._moveTooltip),this[w](T),this._tooltipHandlersAdded=!d}},openTooltip:function(d){return this._tooltip&&(this instanceof _n||(this._tooltip._source=this),this._tooltip._prepareOpen(d)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(d){return this._tooltip&&this._tooltip.setContent(d),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(d){var w=typeof d.getElement=="function"&&d.getElement();w&&(sn(w,"focus",function(){this._tooltip._source=d,this.openTooltip()},this),sn(w,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(d){var w=typeof d.getElement=="function"&&d.getElement();w&&w.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(d){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var w=this;this._map.once("moveend",function(){w._openOnceFlag=!1,w._openTooltip(d)});return}this._tooltip._source=d.layer||d.target,this.openTooltip(this._tooltip.options.sticky?d.latlng:void 0)}},_moveTooltip:function(d){var w=d.latlng,T,F;this._tooltip.options.sticky&&d.originalEvent&&(T=this._map.mouseEventToContainerPoint(d.originalEvent),F=this._map.containerPointToLayerPoint(T),w=this._map.layerPointToLatLng(F)),this._tooltip.setLatLng(w)}});var es=Ei.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(d){var w=d&&d.tagName==="DIV"?d:document.createElement("div"),T=this.options;if(T.html instanceof Element?(un(w),w.appendChild(T.html)):w.innerHTML=T.html!==!1?T.html:"",T.bgPos){var F=oe(T.bgPos);w.style.backgroundPosition=-F.x+"px "+-F.y+"px"}return this._setIconStyles(w,"icon"),w},createShadow:function(){return null}});function cy(d){return new es(d)}Ei.Default=zh;var Bu=lr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Gt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(d){_(this,d)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(d){d._addZoomLimit(this)},onRemove:function(d){this._removeAllTiles(),Pt(this._container),d._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Rt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ln(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(d){return this.options.opacity=d,this._updateOpacity(),this},setZIndex:function(d){return this.options.zIndex=d,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var d=this._clampZoom(this._map.getZoom());d!==this._tileZoom&&(this._tileZoom=d,this._updateLevels()),this._update()}return this},getEvents:function(){var d={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),d.move=this._onMove),this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},createTile:function(){return document.createElement("div")},getTileSize:function(){var d=this.options.tileSize;return d instanceof X?d:new X(d,d)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(d){for(var w=this.getPane().children,T=-d(-1/0,1/0),F=0,z=w.length,Y;F<z;F++)Y=w[F].style.zIndex,w[F]!==this._container&&Y&&(T=d(T,+Y));isFinite(T)&&(this.options.zIndex=T+d(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Gt.ielt9){dn(this._container,this.options.opacity);var d=+new Date,w=!1,T=!1;for(var F in this._tiles){var z=this._tiles[F];if(!(!z.current||!z.loaded)){var Y=Math.min(1,(d-z.loaded)/200);dn(z.el,Y),Y<1?w=!0:(z.active?T=!0:this._onOpaqueTile(z),z.active=!0)}}T&&!this._noPrune&&this._pruneTiles(),w&&(H(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=Lt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var d=this._tileZoom,w=this.options.maxZoom;if(d!==void 0){for(var T in this._levels)T=Number(T),this._levels[T].el.children.length||T===d?(this._levels[T].el.style.zIndex=w-Math.abs(d-T),this._onUpdateLevel(T)):(Pt(this._levels[T].el),this._removeTilesAtZoom(T),this._onRemoveLevel(T),delete this._levels[T]);var F=this._levels[d],z=this._map;return F||(F=this._levels[d]={},F.el=Lt("div","leaflet-tile-container leaflet-zoom-animated",this._container),F.el.style.zIndex=w,F.origin=z.project(z.unproject(z.getPixelOrigin()),d).round(),F.zoom=d,this._setZoomTransform(F,z.getCenter(),z.getZoom()),h(F.el.offsetWidth),this._onCreateLevel(F)),this._level=F,F}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var d,w,T=this._map.getZoom();if(T>this.options.maxZoom||T<this.options.minZoom){this._removeAllTiles();return}for(d in this._tiles)w=this._tiles[d],w.retain=w.current;for(d in this._tiles)if(w=this._tiles[d],w.current&&!w.active){var F=w.coords;this._retainParent(F.x,F.y,F.z,F.z-5)||this._retainChildren(F.x,F.y,F.z,F.z+2)}for(d in this._tiles)this._tiles[d].retain||this._removeTile(d)}},_removeTilesAtZoom:function(d){for(var w in this._tiles)this._tiles[w].coords.z===d&&this._removeTile(w)},_removeAllTiles:function(){for(var d in this._tiles)this._removeTile(d)},_invalidateAll:function(){for(var d in this._levels)Pt(this._levels[d].el),this._onRemoveLevel(Number(d)),delete this._levels[d];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(d,w,T,F){var z=Math.floor(d/2),Y=Math.floor(w/2),de=T-1,Ae=new X(+z,+Y);Ae.z=+de;var je=this._tileCoordsToKey(Ae),it=this._tiles[je];return it&&it.active?(it.retain=!0,!0):(it&&it.loaded&&(it.retain=!0),de>F?this._retainParent(z,Y,de,F):!1)},_retainChildren:function(d,w,T,F){for(var z=2*d;z<2*d+2;z++)for(var Y=2*w;Y<2*w+2;Y++){var de=new X(z,Y);de.z=T+1;var Ae=this._tileCoordsToKey(de),je=this._tiles[Ae];if(je&&je.active){je.retain=!0;continue}else je&&je.loaded&&(je.retain=!0);T+1<F&&this._retainChildren(z,Y,T+1,F)}},_resetView:function(d){var w=d&&(d.pinch||d.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),w,w)},_animateZoom:function(d){this._setView(d.center,d.zoom,!0,d.noUpdate)},_clampZoom:function(d){var w=this.options;return w.minNativeZoom!==void 0&&d<w.minNativeZoom?w.minNativeZoom:w.maxNativeZoom!==void 0&&w.maxNativeZoom<d?w.maxNativeZoom:d},_setView:function(d,w,T,F){var z=Math.round(w);this.options.maxZoom!==void 0&&z>this.options.maxZoom||this.options.minZoom!==void 0&&z<this.options.minZoom?z=void 0:z=this._clampZoom(z);var Y=this.options.updateWhenZooming&&z!==this._tileZoom;(!F||Y)&&(this._tileZoom=z,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),z!==void 0&&this._update(d),T||this._pruneTiles(),this._noPrune=!!T),this._setZoomTransforms(d,w)},_setZoomTransforms:function(d,w){for(var T in this._levels)this._setZoomTransform(this._levels[T],d,w)},_setZoomTransform:function(d,w,T){var F=this._map.getZoomScale(T,d.zoom),z=d.origin.multiplyBy(F).subtract(this._map._getNewPixelOrigin(w,T)).round();Gt.any3d?Mr(d.el,z,F):$t(d.el,z)},_resetGrid:function(){var d=this._map,w=d.options.crs,T=this._tileSize=this.getTileSize(),F=this._tileZoom,z=this._map.getPixelWorldBounds(this._tileZoom);z&&(this._globalTileRange=this._pxBoundsToTileRange(z)),this._wrapX=w.wrapLng&&!this.options.noWrap&&[Math.floor(d.project([0,w.wrapLng[0]],F).x/T.x),Math.ceil(d.project([0,w.wrapLng[1]],F).x/T.y)],this._wrapY=w.wrapLat&&!this.options.noWrap&&[Math.floor(d.project([w.wrapLat[0],0],F).y/T.x),Math.ceil(d.project([w.wrapLat[1],0],F).y/T.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(d){var w=this._map,T=w._animatingZoom?Math.max(w._animateToZoom,w.getZoom()):w.getZoom(),F=w.getZoomScale(T,this._tileZoom),z=w.project(d,this._tileZoom).floor(),Y=w.getSize().divideBy(F*2);return new fe(z.subtract(Y),z.add(Y))},_update:function(d){var w=this._map;if(w){var T=this._clampZoom(w.getZoom());if(d===void 0&&(d=w.getCenter()),this._tileZoom!==void 0){var F=this._getTiledPixelBounds(d),z=this._pxBoundsToTileRange(F),Y=z.getCenter(),de=[],Ae=this.options.keepBuffer,je=new fe(z.getBottomLeft().subtract([Ae,-Ae]),z.getTopRight().add([Ae,-Ae]));if(!(isFinite(z.min.x)&&isFinite(z.min.y)&&isFinite(z.max.x)&&isFinite(z.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var it in this._tiles){var Et=this._tiles[it].coords;(Et.z!==this._tileZoom||!je.contains(new X(Et.x,Et.y)))&&(this._tiles[it].current=!1)}if(Math.abs(T-this._tileZoom)>1){this._setView(d,T);return}for(var ln=z.min.y;ln<=z.max.y;ln++)for(var Dn=z.min.x;Dn<=z.max.x;Dn++){var Rs=new X(Dn,ln);if(Rs.z=this._tileZoom,!!this._isValidTile(Rs)){var bi=this._tiles[this._tileCoordsToKey(Rs)];bi?bi.current=!0:de.push(Rs)}}if(de.sort(function(ro,Uu){return ro.distanceTo(Y)-Uu.distanceTo(Y)}),de.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var no=document.createDocumentFragment();for(Dn=0;Dn<de.length;Dn++)this._addTile(de[Dn],no);this._level.el.appendChild(no)}}}},_isValidTile:function(d){var w=this._map.options.crs;if(!w.infinite){var T=this._globalTileRange;if(!w.wrapLng&&(d.x<T.min.x||d.x>T.max.x)||!w.wrapLat&&(d.y<T.min.y||d.y>T.max.y))return!1}if(!this.options.bounds)return!0;var F=this._tileCoordsToBounds(d);return Qe(this.options.bounds).overlaps(F)},_keyToBounds:function(d){return this._tileCoordsToBounds(this._keyToTileCoords(d))},_tileCoordsToNwSe:function(d){var w=this._map,T=this.getTileSize(),F=d.scaleBy(T),z=F.add(T),Y=w.unproject(F,d.z),de=w.unproject(z,d.z);return[Y,de]},_tileCoordsToBounds:function(d){var w=this._tileCoordsToNwSe(d),T=new We(w[0],w[1]);return this.options.noWrap||(T=this._map.wrapLatLngBounds(T)),T},_tileCoordsToKey:function(d){return d.x+":"+d.y+":"+d.z},_keyToTileCoords:function(d){var w=d.split(":"),T=new X(+w[0],+w[1]);return T.z=+w[2],T},_removeTile:function(d){var w=this._tiles[d];w&&(Pt(w.el),delete this._tiles[d],this.fire("tileunload",{tile:w.el,coords:this._keyToTileCoords(d)}))},_initTile:function(d){qt(d,"leaflet-tile");var w=this.getTileSize();d.style.width=w.x+"px",d.style.height=w.y+"px",d.onselectstart=h,d.onmousemove=h,Gt.ielt9&&this.options.opacity<1&&dn(d,this.options.opacity)},_addTile:function(d,w){var T=this._getTilePos(d),F=this._tileCoordsToKey(d),z=this.createTile(this._wrapCoords(d),o(this._tileReady,this,d));this._initTile(z),this.createTile.length<2&&U(o(this._tileReady,this,d,null,z)),$t(z,T),this._tiles[F]={el:z,coords:d,current:!0},w.appendChild(z),this.fire("tileloadstart",{tile:z,coords:d})},_tileReady:function(d,w,T){w&&this.fire("tileerror",{error:w,tile:T,coords:d});var F=this._tileCoordsToKey(d);T=this._tiles[F],T&&(T.loaded=+new Date,this._map._fadeAnimated?(dn(T.el,0),H(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(T.active=!0,this._pruneTiles()),w||(qt(T.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:T.el,coords:d})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Gt.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(d){return d.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(d){var w=new X(this._wrapX?u(d.x,this._wrapX):d.x,this._wrapY?u(d.y,this._wrapY):d.y);return w.z=d.z,w},_pxBoundsToTileRange:function(d){var w=this.getTileSize();return new fe(d.min.unscaleBy(w).floor(),d.max.unscaleBy(w).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var d in this._tiles)if(!this._tiles[d].loaded)return!1;return!0}});function uy(d){return new Bu(d)}var to=Bu.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(d,w){this._url=d,w=_(this,w),w.detectRetina&&Gt.retina&&w.maxZoom>0?(w.tileSize=Math.floor(w.tileSize/2),w.zoomReverse?(w.zoomOffset--,w.minZoom=Math.min(w.maxZoom,w.minZoom+1)):(w.zoomOffset++,w.maxZoom=Math.max(w.minZoom,w.maxZoom-1)),w.minZoom=Math.max(0,w.minZoom)):w.zoomReverse?w.minZoom=Math.min(w.maxZoom,w.minZoom):w.maxZoom=Math.max(w.minZoom,w.maxZoom),typeof w.subdomains=="string"&&(w.subdomains=w.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(d,w){return this._url===d&&w===void 0&&(w=!0),this._url=d,w||this.redraw(),this},createTile:function(d,w){var T=document.createElement("img");return sn(T,"load",o(this._tileOnLoad,this,w,T)),sn(T,"error",o(this._tileOnError,this,w,T)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(T.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(T.referrerPolicy=this.options.referrerPolicy),T.alt="",T.src=this.getTileUrl(d),T},getTileUrl:function(d){var w={r:Gt.retina?"@2x":"",s:this._getSubdomain(d),x:d.x,y:d.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var T=this._globalTileRange.max.y-d.y;this.options.tms&&(w.y=T),w["-y"]=T}return E(this._url,i(w,this.options))},_tileOnLoad:function(d,w){Gt.ielt9?setTimeout(o(d,this,null,w),0):d(null,w)},_tileOnError:function(d,w,T){var F=this.options.errorTileUrl;F&&w.getAttribute("src")!==F&&(w.src=F),d(T,w)},_onTileRemove:function(d){d.tile.onload=null},_getZoomForUrl:function(){var d=this._tileZoom,w=this.options.maxZoom,T=this.options.zoomReverse,F=this.options.zoomOffset;return T&&(d=w-d),d+F},_getSubdomain:function(d){var w=Math.abs(d.x+d.y)%this.options.subdomains.length;return this.options.subdomains[w]},_abortLoading:function(){var d,w;for(d in this._tiles)if(this._tiles[d].coords.z!==this._tileZoom&&(w=this._tiles[d].el,w.onload=h,w.onerror=h,!w.complete)){w.src=k;var T=this._tiles[d].coords;Pt(w),delete this._tiles[d],this.fire("tileabort",{tile:w,coords:T})}},_removeTile:function(d){var w=this._tiles[d];if(w)return w.el.setAttribute("src",k),Bu.prototype._removeTile.call(this,d)},_tileReady:function(d,w,T){if(!(!this._map||T&&T.getAttribute("src")===k))return Bu.prototype._tileReady.call(this,d,w,T)}});function Na(d,w){return new to(d,w)}var Lc=to.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(d,w){this._url=d;var T=i({},this.defaultWmsParams);for(var F in w)F in this.options||(T[F]=w[F]);w=_(this,w);var z=w.detectRetina&&Gt.retina?2:1,Y=this.getTileSize();T.width=Y.x*z,T.height=Y.y*z,this.wmsParams=T},onAdd:function(d){this._crs=this.options.crs||d.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var w=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[w]=this._crs.code,to.prototype.onAdd.call(this,d)},getTileUrl:function(d){var w=this._tileCoordsToNwSe(d),T=this._crs,F=De(T.project(w[0]),T.project(w[1])),z=F.min,Y=F.max,de=(this._wmsVersion>=1.3&&this._crs===ui?[z.y,z.x,Y.y,Y.x]:[z.x,z.y,Y.x,Y.y]).join(","),Ae=to.prototype.getTileUrl.call(this,d);return Ae+S(this.wmsParams,Ae,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+de},setParams:function(d,w){return i(this.wmsParams,d),w||this.redraw(),this}});function Ym(d,w){return new Lc(d,w)}to.WMS=Lc,Na.wms=Ym;var sa=lr.extend({options:{padding:.1},initialize:function(d){_(this,d),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),qt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var d={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(d.zoomanim=this._onAnimZoom),d},_onAnimZoom:function(d){this._updateTransform(d.center,d.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(d,w){var T=this._map.getZoomScale(w,this._zoom),F=this._map.getSize().multiplyBy(.5+this.options.padding),z=this._map.project(this._center,w),Y=F.multiplyBy(-T).add(z).subtract(this._map._getNewPixelOrigin(d,w));Gt.any3d?Mr(this._container,Y,T):$t(this._container,Y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var d in this._layers)this._layers[d]._reset()},_onZoomEnd:function(){for(var d in this._layers)this._layers[d]._project()},_updatePaths:function(){for(var d in this._layers)this._layers[d]._update()},_update:function(){var d=this.options.padding,w=this._map.getSize(),T=this._map.containerPointToLayerPoint(w.multiplyBy(-d)).round();this._bounds=new fe(T,T.add(w.multiplyBy(1+d*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),hy=sa.extend({options:{tolerance:0},getEvents:function(){var d=sa.prototype.getEvents.call(this);return d.viewprereset=this._onViewPreReset,d},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){sa.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var d=this._container=document.createElement("canvas");sn(d,"mousemove",this._onMouseMove,this),sn(d,"click dblclick mousedown mouseup contextmenu",this._onClick,this),sn(d,"mouseout",this._handleMouseOut,this),d._leaflet_disable_events=!0,this._ctx=d.getContext("2d")},_destroyContainer:function(){H(this._redrawRequest),delete this._ctx,Pt(this._container),mr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var d;this._redrawBounds=null;for(var w in this._layers)d=this._layers[w],d._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){sa.prototype._update.call(this);var d=this._bounds,w=this._container,T=d.getSize(),F=Gt.retina?2:1;$t(w,d.min),w.width=F*T.x,w.height=F*T.y,w.style.width=T.x+"px",w.style.height=T.y+"px",Gt.retina&&this._ctx.scale(2,2),this._ctx.translate(-d.min.x,-d.min.y),this.fire("update")}},_reset:function(){sa.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(d){this._updateDashArray(d),this._layers[l(d)]=d;var w=d._order={layer:d,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=w),this._drawLast=w,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(d){this._requestRedraw(d)},_removePath:function(d){var w=d._order,T=w.next,F=w.prev;T?T.prev=F:this._drawLast=F,F?F.next=T:this._drawFirst=T,delete d._order,delete this._layers[l(d)],this._requestRedraw(d)},_updatePath:function(d){this._extendRedrawBounds(d),d._project(),d._update(),this._requestRedraw(d)},_updateStyle:function(d){this._updateDashArray(d),this._requestRedraw(d)},_updateDashArray:function(d){if(typeof d.options.dashArray=="string"){var w=d.options.dashArray.split(/[, ]+/),T=[],F,z;for(z=0;z<w.length;z++){if(F=Number(w[z]),isNaN(F))return;T.push(F)}d.options._dashArray=T}else d.options._dashArray=d.options.dashArray},_requestRedraw:function(d){this._map&&(this._extendRedrawBounds(d),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(d){if(d._pxBounds){var w=(d.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new fe,this._redrawBounds.extend(d._pxBounds.min.subtract([w,w])),this._redrawBounds.extend(d._pxBounds.max.add([w,w]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var d=this._redrawBounds;if(d){var w=d.getSize();this._ctx.clearRect(d.min.x,d.min.y,w.x,w.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var d,w=this._redrawBounds;if(this._ctx.save(),w){var T=w.getSize();this._ctx.beginPath(),this._ctx.rect(w.min.x,w.min.y,T.x,T.y),this._ctx.clip()}this._drawing=!0;for(var F=this._drawFirst;F;F=F.next)d=F.layer,(!w||d._pxBounds&&d._pxBounds.intersects(w))&&d._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(d,w){if(this._drawing){var T,F,z,Y,de=d._parts,Ae=de.length,je=this._ctx;if(Ae){for(je.beginPath(),T=0;T<Ae;T++){for(F=0,z=de[T].length;F<z;F++)Y=de[T][F],je[F?"lineTo":"moveTo"](Y.x,Y.y);w&&je.closePath()}this._fillStroke(je,d)}}},_updateCircle:function(d){if(!(!this._drawing||d._empty())){var w=d._point,T=this._ctx,F=Math.max(Math.round(d._radius),1),z=(Math.max(Math.round(d._radiusY),1)||F)/F;z!==1&&(T.save(),T.scale(1,z)),T.beginPath(),T.arc(w.x,w.y/z,F,0,Math.PI*2,!1),z!==1&&T.restore(),this._fillStroke(T,d)}},_fillStroke:function(d,w){var T=w.options;T.fill&&(d.globalAlpha=T.fillOpacity,d.fillStyle=T.fillColor||T.color,d.fill(T.fillRule||"evenodd")),T.stroke&&T.weight!==0&&(d.setLineDash&&d.setLineDash(w.options&&w.options._dashArray||[]),d.globalAlpha=T.opacity,d.lineWidth=T.weight,d.strokeStyle=T.color,d.lineCap=T.lineCap,d.lineJoin=T.lineJoin,d.stroke())},_onClick:function(d){for(var w=this._map.mouseEventToLayerPoint(d),T,F,z=this._drawFirst;z;z=z.next)T=z.layer,T.options.interactive&&T._containsPoint(w)&&(!(d.type==="click"||d.type==="preclick")||!this._map._draggableMoved(T))&&(F=T);this._fireEvent(F?[F]:!1,d)},_onMouseMove:function(d){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var w=this._map.mouseEventToLayerPoint(d);this._handleMouseHover(d,w)}},_handleMouseOut:function(d){var w=this._hoveredLayer;w&&(Jn(this._container,"leaflet-interactive"),this._fireEvent([w],d,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(d,w){if(!this._mouseHoverThrottled){for(var T,F,z=this._drawFirst;z;z=z.next)T=z.layer,T.options.interactive&&T._containsPoint(w)&&(F=T);F!==this._hoveredLayer&&(this._handleMouseOut(d),F&&(qt(this._container,"leaflet-interactive"),this._fireEvent([F],d,"mouseover"),this._hoveredLayer=F)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,d),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(d,w,T){this._map._fireDOMEvent(w,T||w.type,d)},_bringToFront:function(d){var w=d._order;if(w){var T=w.next,F=w.prev;if(T)T.prev=F;else return;F?F.next=T:T&&(this._drawFirst=T),w.prev=this._drawLast,this._drawLast.next=w,w.next=null,this._drawLast=w,this._requestRedraw(d)}},_bringToBack:function(d){var w=d._order;if(w){var T=w.next,F=w.prev;if(F)F.next=T;else return;T?T.prev=F:F&&(this._drawLast=F),w.prev=null,w.next=this._drawFirst,this._drawFirst.prev=w,this._drawFirst=w,this._requestRedraw(d)}}});function dy(d){return Gt.canvas?new hy(d):null}var qh=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(d){return document.createElement("<lvml:"+d+' class="lvml">')}}catch{}return function(d){return document.createElement("<"+d+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),cw={_initContainer:function(){this._container=Lt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(sa.prototype._update.call(this),this.fire("update"))},_initPath:function(d){var w=d._container=qh("shape");qt(w,"leaflet-vml-shape "+(this.options.className||"")),w.coordsize="1 1",d._path=qh("path"),w.appendChild(d._path),this._updateStyle(d),this._layers[l(d)]=d},_addPath:function(d){var w=d._container;this._container.appendChild(w),d.options.interactive&&d.addInteractiveTarget(w)},_removePath:function(d){var w=d._container;Pt(w),d.removeInteractiveTarget(w),delete this._layers[l(d)]},_updateStyle:function(d){var w=d._stroke,T=d._fill,F=d.options,z=d._container;z.stroked=!!F.stroke,z.filled=!!F.fill,F.stroke?(w||(w=d._stroke=qh("stroke")),z.appendChild(w),w.weight=F.weight+"px",w.color=F.color,w.opacity=F.opacity,F.dashArray?w.dashStyle=b(F.dashArray)?F.dashArray.join(" "):F.dashArray.replace(/( *, *)/g," "):w.dashStyle="",w.endcap=F.lineCap.replace("butt","flat"),w.joinstyle=F.lineJoin):w&&(z.removeChild(w),d._stroke=null),F.fill?(T||(T=d._fill=qh("fill")),z.appendChild(T),T.color=F.fillColor||F.color,T.opacity=F.fillOpacity):T&&(z.removeChild(T),d._fill=null)},_updateCircle:function(d){var w=d._point.round(),T=Math.round(d._radius),F=Math.round(d._radiusY||T);this._setPath(d,d._empty()?"M0 0":"AL "+w.x+","+w.y+" "+T+","+F+" 0,"+65535*360)},_setPath:function(d,w){d._path.v=w},_bringToFront:function(d){Rt(d._container)},_bringToBack:function(d){Ln(d._container)}},$f=Gt.vml?qh:Re,Yh=sa.extend({_initContainer:function(){this._container=$f("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=$f("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Pt(this._container),mr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){sa.prototype._update.call(this);var d=this._bounds,w=d.getSize(),T=this._container;(!this._svgSize||!this._svgSize.equals(w))&&(this._svgSize=w,T.setAttribute("width",w.x),T.setAttribute("height",w.y)),$t(T,d.min),T.setAttribute("viewBox",[d.min.x,d.min.y,w.x,w.y].join(" ")),this.fire("update")}},_initPath:function(d){var w=d._path=$f("path");d.options.className&&qt(w,d.options.className),d.options.interactive&&qt(w,"leaflet-interactive"),this._updateStyle(d),this._layers[l(d)]=d},_addPath:function(d){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(d._path),d.addInteractiveTarget(d._path)},_removePath:function(d){Pt(d._path),d.removeInteractiveTarget(d._path),delete this._layers[l(d)]},_updatePath:function(d){d._project(),d._update()},_updateStyle:function(d){var w=d._path,T=d.options;w&&(T.stroke?(w.setAttribute("stroke",T.color),w.setAttribute("stroke-opacity",T.opacity),w.setAttribute("stroke-width",T.weight),w.setAttribute("stroke-linecap",T.lineCap),w.setAttribute("stroke-linejoin",T.lineJoin),T.dashArray?w.setAttribute("stroke-dasharray",T.dashArray):w.removeAttribute("stroke-dasharray"),T.dashOffset?w.setAttribute("stroke-dashoffset",T.dashOffset):w.removeAttribute("stroke-dashoffset")):w.setAttribute("stroke","none"),T.fill?(w.setAttribute("fill",T.fillColor||T.color),w.setAttribute("fill-opacity",T.fillOpacity),w.setAttribute("fill-rule",T.fillRule||"evenodd")):w.setAttribute("fill","none"))},_updatePoly:function(d,w){this._setPath(d,qe(d._parts,w))},_updateCircle:function(d){var w=d._point,T=Math.max(Math.round(d._radius),1),F=Math.max(Math.round(d._radiusY),1)||T,z="a"+T+","+F+" 0 1,0 ",Y=d._empty()?"M0 0":"M"+(w.x-T)+","+w.y+z+T*2+",0 "+z+-T*2+",0 ";this._setPath(d,Y)},_setPath:function(d,w){d._path.setAttribute("d",w)},_bringToFront:function(d){Rt(d._path)},_bringToBack:function(d){Ln(d._path)}});Gt.vml&&Yh.include(cw);function Km(d){return Gt.svg||Gt.vml?new Yh(d):null}Fn.include({getRenderer:function(d){var w=d.options.renderer||this._getPaneRenderer(d.options.pane)||this.options.renderer||this._renderer;return w||(w=this._renderer=this._createRenderer()),this.hasLayer(w)||this.addLayer(w),w},_getPaneRenderer:function(d){if(d==="overlayPane"||d===void 0)return!1;var w=this._paneRenderers[d];return w===void 0&&(w=this._createRenderer({pane:d}),this._paneRenderers[d]=w),w},_createRenderer:function(d){return this.options.preferCanvas&&dy(d)||Km(d)}});var Kh=Ra.extend({initialize:function(d,w){Ra.prototype.initialize.call(this,this._boundsToLatLngs(d),w)},setBounds:function(d){return this.setLatLngs(this._boundsToLatLngs(d))},_boundsToLatLngs:function(d){return d=Qe(d),[d.getSouthWest(),d.getNorthWest(),d.getNorthEast(),d.getSouthEast()]}});function uw(d,w){return new Kh(d,w)}Yh.create=$f,Yh.pointsToPath=qe,No.geometryToLayer=Ps,No.coordsToLatLng=kc,No.coordsToLatLngs=Do,No.latLngToCoords=Hf,No.latLngsToCoords=Vl,No.getFeature=Lu,No.asFeature=Gh,Fn.mergeOptions({boxZoom:!0});var Xf=Fr.extend({initialize:function(d){this._map=d,this._container=d._container,this._pane=d._panes.overlayPane,this._resetStateTimeout=0,d.on("unload",this._destroy,this)},addHooks:function(){sn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){mr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Pt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(d){if(!d.shiftKey||d.which!==1&&d.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ri(),jf(),this._startPoint=this._map.mouseEventToContainerPoint(d),sn(document,{contextmenu:Io,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(d){this._moved||(this._moved=!0,this._box=Lt("div","leaflet-zoom-box",this._container),qt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(d);var w=new fe(this._point,this._startPoint),T=w.getSize();$t(this._box,w.min),this._box.style.width=T.x+"px",this._box.style.height=T.y+"px"},_finish:function(){this._moved&&(Pt(this._box),Jn(this._container,"leaflet-crosshair")),Ms(),Iu(),mr(document,{contextmenu:Io,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(d){if(!(d.which!==1&&d.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var w=new We(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(w).fire("boxzoomend",{boxZoomBounds:w})}},_onKeyDown:function(d){d.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Fn.addInitHook("addHandler","boxZoom",Xf),Fn.mergeOptions({doubleClickZoom:!0});var qf=Fr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(d){var w=this._map,T=w.getZoom(),F=w.options.zoomDelta,z=d.originalEvent.shiftKey?T-F:T+F;w.options.doubleClickZoom==="center"?w.setZoom(z):w.setZoomAround(d.containerPoint,z)}});Fn.addInitHook("addHandler","doubleClickZoom",qf),Fn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Zm=Fr.extend({addHooks:function(){if(!this._draggable){var d=this._map;this._draggable=new Po(d._mapPane,d._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),d.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),d.on("zoomend",this._onZoomEnd,this),d.whenReady(this._onZoomEnd,this))}qt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Jn(this._map._container,"leaflet-grab"),Jn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var d=this._map;if(d._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var w=Qe(this._map.options.maxBounds);this._offsetLimit=De(this._map.latLngToContainerPoint(w.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(w.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;d.fire("movestart").fire("dragstart"),d.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(d){if(this._map.options.inertia){var w=this._lastTime=+new Date,T=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(T),this._times.push(w),this._prunePositions(w)}this._map.fire("move",d).fire("drag",d)},_prunePositions:function(d){for(;this._positions.length>1&&d-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var d=this._map.getSize().divideBy(2),w=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=w.subtract(d).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(d,w){return d-(d-w)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var d=this._draggable._newPos.subtract(this._draggable._startPos),w=this._offsetLimit;d.x<w.min.x&&(d.x=this._viscousLimit(d.x,w.min.x)),d.y<w.min.y&&(d.y=this._viscousLimit(d.y,w.min.y)),d.x>w.max.x&&(d.x=this._viscousLimit(d.x,w.max.x)),d.y>w.max.y&&(d.y=this._viscousLimit(d.y,w.max.y)),this._draggable._newPos=this._draggable._startPos.add(d)}},_onPreDragWrap:function(){var d=this._worldWidth,w=Math.round(d/2),T=this._initialWorldOffset,F=this._draggable._newPos.x,z=(F-w+T)%d+w-T,Y=(F+w+T)%d-w-T,de=Math.abs(z+T)<Math.abs(Y+T)?z:Y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=de},_onDragEnd:function(d){var w=this._map,T=w.options,F=!T.inertia||d.noInertia||this._times.length<2;if(w.fire("dragend",d),F)w.fire("moveend");else{this._prunePositions(+new Date);var z=this._lastPos.subtract(this._positions[0]),Y=(this._lastTime-this._times[0])/1e3,de=T.easeLinearity,Ae=z.multiplyBy(de/Y),je=Ae.distanceTo([0,0]),it=Math.min(T.inertiaMaxSpeed,je),Et=Ae.multiplyBy(it/je),ln=it/(T.inertiaDeceleration*de),Dn=Et.multiplyBy(-ln/2).round();!Dn.x&&!Dn.y?w.fire("moveend"):(Dn=w._limitOffset(Dn,w.options.maxBounds),U(function(){w.panBy(Dn,{duration:ln,easeLinearity:de,noMoveStart:!0,animate:!0})}))}}});Fn.addInitHook("addHandler","dragging",Zm),Fn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Zh=Fr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(d){this._map=d,this._setPanDelta(d.options.keyboardPanDelta),this._setZoomDelta(d.options.zoomDelta)},addHooks:function(){var d=this._map._container;d.tabIndex<=0&&(d.tabIndex="0"),sn(d,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),mr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var d=document.body,w=document.documentElement,T=d.scrollTop||w.scrollTop,F=d.scrollLeft||w.scrollLeft;this._map._container.focus(),window.scrollTo(F,T)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(d){var w=this._panKeys={},T=this.keyCodes,F,z;for(F=0,z=T.left.length;F<z;F++)w[T.left[F]]=[-1*d,0];for(F=0,z=T.right.length;F<z;F++)w[T.right[F]]=[d,0];for(F=0,z=T.down.length;F<z;F++)w[T.down[F]]=[0,d];for(F=0,z=T.up.length;F<z;F++)w[T.up[F]]=[0,-1*d]},_setZoomDelta:function(d){var w=this._zoomKeys={},T=this.keyCodes,F,z;for(F=0,z=T.zoomIn.length;F<z;F++)w[T.zoomIn[F]]=d;for(F=0,z=T.zoomOut.length;F<z;F++)w[T.zoomOut[F]]=-d},_addHooks:function(){sn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){mr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(d){if(!(d.altKey||d.ctrlKey||d.metaKey)){var w=d.keyCode,T=this._map,F;if(w in this._panKeys){if(!T._panAnim||!T._panAnim._inProgress)if(F=this._panKeys[w],d.shiftKey&&(F=oe(F).multiplyBy(3)),T.options.maxBounds&&(F=T._limitOffset(oe(F),T.options.maxBounds)),T.options.worldCopyJump){var z=T.wrapLatLng(T.unproject(T.project(T.getCenter()).add(F)));T.panTo(z)}else T.panBy(F)}else if(w in this._zoomKeys)T.setZoom(T.getZoom()+(d.shiftKey?3:1)*this._zoomKeys[w]);else if(w===27&&T._popup&&T._popup.options.closeOnEscapeKey)T.closePopup();else return;Io(d)}}});Fn.addInitHook("addHandler","keyboard",Zh),Fn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var fy=Fr.extend({addHooks:function(){sn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){mr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(d){var w=Oh(d),T=this._map.options.wheelDebounceTime;this._delta+=w,this._lastMousePos=this._map.mouseEventToContainerPoint(d),this._startTime||(this._startTime=+new Date);var F=Math.max(T-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),F),Io(d)},_performZoom:function(){var d=this._map,w=d.getZoom(),T=this._map.options.zoomSnap||0;d._stop();var F=this._delta/(this._map.options.wheelPxPerZoomLevel*4),z=4*Math.log(2/(1+Math.exp(-Math.abs(F))))/Math.LN2,Y=T?Math.ceil(z/T)*T:z,de=d._limitZoom(w+(this._delta>0?Y:-Y))-w;this._delta=0,this._startTime=null,de&&(d.options.scrollWheelZoom==="center"?d.setZoom(w+de):d.setZoomAround(this._lastMousePos,w+de))}});Fn.addInitHook("addHandler","scrollWheelZoom",fy);var hw=600;Fn.mergeOptions({tapHold:Gt.touchNative&&Gt.safari&&Gt.mobile,tapTolerance:15});var py=Fr.extend({addHooks:function(){sn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){mr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(d){if(clearTimeout(this._holdTimeout),d.touches.length===1){var w=d.touches[0];this._startPos=this._newPos=new X(w.clientX,w.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(sn(document,"touchend",Xr),sn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",w))},this),hw),sn(document,"touchend touchcancel contextmenu",this._cancel,this),sn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function d(){mr(document,"touchend",Xr),mr(document,"touchend touchcancel",d)},_cancel:function(){clearTimeout(this._holdTimeout),mr(document,"touchend touchcancel contextmenu",this._cancel,this),mr(document,"touchmove",this._onMove,this)},_onMove:function(d){var w=d.touches[0];this._newPos=new X(w.clientX,w.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(d,w){var T=new MouseEvent(d,{bubbles:!0,cancelable:!0,view:window,screenX:w.screenX,screenY:w.screenY,clientX:w.clientX,clientY:w.clientY});T._simulated=!0,w.target.dispatchEvent(T)}});Fn.addInitHook("addHandler","tapHold",py),Fn.mergeOptions({touchZoom:Gt.touch,bounceAtZoomLimits:!0});var my=Fr.extend({addHooks:function(){qt(this._map._container,"leaflet-touch-zoom"),sn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Jn(this._map._container,"leaflet-touch-zoom"),mr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(d){var w=this._map;if(!(!d.touches||d.touches.length!==2||w._animatingZoom||this._zooming)){var T=w.mouseEventToContainerPoint(d.touches[0]),F=w.mouseEventToContainerPoint(d.touches[1]);this._centerPoint=w.getSize()._divideBy(2),this._startLatLng=w.containerPointToLatLng(this._centerPoint),w.options.touchZoom!=="center"&&(this._pinchStartLatLng=w.containerPointToLatLng(T.add(F)._divideBy(2))),this._startDist=T.distanceTo(F),this._startZoom=w.getZoom(),this._moved=!1,this._zooming=!0,w._stop(),sn(document,"touchmove",this._onTouchMove,this),sn(document,"touchend touchcancel",this._onTouchEnd,this),Xr(d)}},_onTouchMove:function(d){if(!(!d.touches||d.touches.length!==2||!this._zooming)){var w=this._map,T=w.mouseEventToContainerPoint(d.touches[0]),F=w.mouseEventToContainerPoint(d.touches[1]),z=T.distanceTo(F)/this._startDist;if(this._zoom=w.getScaleZoom(z,this._startZoom),!w.options.bounceAtZoomLimits&&(this._zoom<w.getMinZoom()&&z<1||this._zoom>w.getMaxZoom()&&z>1)&&(this._zoom=w._limitZoom(this._zoom)),w.options.touchZoom==="center"){if(this._center=this._startLatLng,z===1)return}else{var Y=T._add(F)._divideBy(2)._subtract(this._centerPoint);if(z===1&&Y.x===0&&Y.y===0)return;this._center=w.unproject(w.project(this._pinchStartLatLng,this._zoom).subtract(Y),this._zoom)}this._moved||(w._moveStart(!0,!1),this._moved=!0),H(this._animRequest);var de=o(w._move,w,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(de,this,!0),Xr(d)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,H(this._animRequest),mr(document,"touchmove",this._onTouchMove,this),mr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Fn.addInitHook("addHandler","touchZoom",my),Fn.BoxZoom=Xf,Fn.DoubleClickZoom=qf,Fn.Drag=Zm,Fn.Keyboard=Zh,Fn.ScrollWheelZoom=fy,Fn.TapHold=py,Fn.TouchZoom=my,t.Bounds=fe,t.Browser=Gt,t.CRS=we,t.Canvas=hy,t.Circle=Ou,t.CircleMarker=jl,t.Class=K,t.Control=Qs,t.DivIcon=es,t.DivOverlay=Sr,t.DomEvent=Gm,t.DomUtil=kh,t.Draggable=Po,t.Evented=le,t.FeatureGroup=_n,t.GeoJSON=No,t.GridLayer=Bu,t.Handler=Fr,t.Icon=Ei,t.ImageOverlay=$h,t.LatLng=ve,t.LatLngBounds=We,t.Layer=lr,t.LayerGroup=Gn,t.LineUtil=Q,t.Map=Fn,t.Marker=Hh,t.Mixin=ms,t.Path=ia,t.Point=X,t.PolyUtil=Bl,t.Polygon=Ra,t.Polyline=sl,t.Popup=Fu,t.PosAnimation=Zs,t.Projection=ht,t.Rectangle=Kh,t.Renderer=sa,t.SVG=Yh,t.SVGOverlay=qr,t.TileLayer=to,t.Tooltip=Oc,t.Transformation=Ye,t.Util=W,t.VideoOverlay=ko,t.bind=o,t.bounds=De,t.canvas=dy,t.circle=Xm,t.circleMarker=ay,t.control=Nr,t.divIcon=cy,t.extend=i,t.featureGroup=il,t.geoJSON=Wf,t.geoJson=ly,t.gridLayer=uy,t.icon=sw,t.imageOverlay=qm,t.latLng=Ie,t.latLngBounds=Qe,t.layerGroup=Si,t.map=Fl,t.marker=ow,t.point=oe,t.polygon=lw,t.polyline=aw,t.popup=Gf,t.rectangle=uw,t.setOptions=_,t.stamp=l,t.svg=Km,t.svgOverlay=gs,t.tileLayer=Na,t.tooltip=mC,t.transformation=Pe,t.version=r,t.videoOverlay=Xh;var gy=window.L;t.noConflict=function(){return window.L=gy,this},window.L=t})})(UN,UN.exports);var W_=UN.exports;function PT(n,e,t){return Object.freeze({instance:n,context:e,container:t})}function RT(n,e){return e==null?function(r,i){const s=O.useRef();return s.current||(s.current=n(r,i)),s}:function(r,i){const s=O.useRef();s.current||(s.current=n(r,i));const o=O.useRef(r),{instance:a}=s.current;return O.useEffect(function(){o.current!==r&&(e(a,r,o.current),o.current=r)},[a,r,i]),s}}function uQ(n,e){O.useEffect(function(){return(e.layerContainer??e.map).addLayer(n.instance),function(){var s;(s=e.layerContainer)==null||s.removeLayer(n.instance),e.map.removeLayer(n.instance)}},[e,n])}function hQ(n){return function(t){const r=qO(),i=n(IT(t,r),r);return sQ(r.map,t.attribution),YO(i.current,t.eventHandlers),uQ(i.current,r),i}}function BAe(n,e){const t=O.useRef();O.useEffect(function(){if(e.pathOptions!==t.current){const i=e.pathOptions??{};n.instance.setStyle(i),t.current=i}},[n,e])}function UAe(n){return function(t){const r=qO(),i=n(IT(t,r),r);return YO(i.current,t.eventHandlers),uQ(i.current,r),BAe(i.current,t),i}}function jAe(n,e){const t=RT(n,e),r=hQ(t);return cQ(r)}function VAe(n,e){const t=RT(n),r=FAe(t,e);return OAe(r)}function zAe(n,e){const t=RT(n,e),r=UAe(t);return cQ(r)}function HAe(n,e){const t=RT(n,e),r=hQ(t);return LAe(r)}function WAe(n,e,t){const{opacity:r,zIndex:i}=e;r!=null&&r!==t.opacity&&n.setOpacity(r),i!=null&&i!==t.zIndex&&n.setZIndex(i)}function jN(){return jN=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jN.apply(this,arguments)}function GAe({bounds:n,boundsOptions:e,center:t,children:r,className:i,id:s,placeholder:o,style:a,whenReady:l,zoom:c,...u},h){const[f]=O.useState({className:i,id:s,style:a}),[p,v]=O.useState(null);O.useImperativeHandle(h,()=>(p==null?void 0:p.map)??null,[p]);const _=O.useCallback(x=>{if(x!==null&&p===null){const E=new W_.Map(x,u);t!=null&&c!=null?E.setView(t,c):n!=null&&E.fitBounds(n,e),l!=null&&E.whenReady(l),v(kAe(E))}},[]);O.useEffect(()=>()=>{p==null||p.map.remove()},[p]);const S=p?fn.createElement(lQ,{value:p},r):o??null;return fn.createElement("div",jN({},f,{ref:_}),S)}const $Ae=O.forwardRef(GAe),bU=jAe(function({position:e,...t},r){const i=new W_.Marker(e,t);return PT(i,oQ(r,{overlayContainer:i}))},function(e,t,r){t.position!==r.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==r.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==r.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==r.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),XAe=zAe(function({positions:e,...t},r){const i=new W_.Polyline(e,t);return PT(i,oQ(r,{overlayContainer:i}))},function(e,t,r){t.positions!==r.positions&&e.setLatLngs(t.positions)}),AU=VAe(function(e,t){const r=new W_.Popup(e,t.overlayContainer);return PT(r,t)},function(e,t,{position:r},i){O.useEffect(function(){const{instance:o}=e;function a(c){c.popup===o&&(o.update(),i(!0))}function l(c){c.popup===o&&i(!1)}return t.map.on({popupopen:a,popupclose:l}),t.overlayContainer==null?(r!=null&&o.setLatLng(r),o.openOn(t.map)):t.overlayContainer.bindPopup(o),function(){var u;t.map.off({popupopen:a,popupclose:l}),(u=t.overlayContainer)==null||u.unbindPopup(),t.map.removeLayer(o)}},[e,t,i,r])}),qAe=HAe(function({url:e,...t},r){const i=new W_.TileLayer(e,IT(t,r));return PT(i,r)},function(e,t,r){WAe(e,t,r);const{url:i}=t;i!=null&&i!==r.url&&e.setUrl(i)});function YAe(n){let e=0;for(let t=0;t<n.length;t++)e=n.charCodeAt(t)+((e<<5)-e);return`hsl(${e%360}, 70%, 50%)`}const KAe=({points:n,history:e=[]})=>{if(!n.length&&!e.length)return m.jsx("div",{children:"Tidak ada data tracker."});const t=n.length?[n[0].lat,n[0].lon]:[e[0].lat,e[0].lon],r={};return e.forEach(i=>{r[i.nama]||(r[i.nama]=[]),r[i.nama].push(i)}),m.jsxs($Ae,{center:t,zoom:13,style:{height:"400px",width:"100%"},scrollWheelZoom:!0,children:[m.jsx(qAe,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),Object.entries(r).map(([i,s])=>m.jsx(XAe,{positions:s.map(o=>[o.lat,o.lon]),pathOptions:{color:YAe(i),weight:4}},i)),e.map((i,s)=>m.jsx(bU,{position:[i.lat,i.lon],children:m.jsxs(AU,{children:[m.jsx("b",{children:i.nama}),m.jsx("br",{}),i.time]})},s)),n.map((i,s)=>m.jsx(bU,{position:[i.lat,i.lon],children:m.jsxs(AU,{children:[m.jsxs("b",{children:[i.nama," (Terakhir)"]}),m.jsx("br",{}),i.time]})},`latest-${s}`))]})};function ZAe(){const[n,e]=O.useState(null),[t,r]=O.useState(""),[i,s]=O.useState(""),[o,a]=O.useState(""),[l,c]=O.useState([]),[u,h]=O.useState([]),[f,p]=O.useState([]),[v,_]=O.useState([]),[S,x]=O.useState([]),[E,b]=O.useState([]),[M,k]=O.useState("activities"),[B,P]=O.useState(!1),[N,R]=O.useState(!1),[I,U]=O.useState(null),[H,W]=O.useState("activity"),[K,te]=O.useState(!1),[se,le]=O.useState([]),[X,ce]=O.useState(!1),[oe,fe]=O.useState(!1),[De,We]=O.useState([]),Qe=S.length>0&&De.length===S.length;O.useEffect(()=>{const J=ED(sf,be=>{e(be)});return()=>J()},[]),O.useEffect(()=>{n&&Ie()},[n]);const ve=async J=>{J.preventDefault(),a("");try{if(await SD(sf,t,i),t)try{await dl({action:"Login",detail:"Login ke halaman admin",user:t})}catch(be){window.alert("Gagal menulis log admin: "+((be==null?void 0:be.message)||be))}}catch(be){a("Login failed: "+be.message)}},Ie=async()=>{try{const J=await Ss(fi(wn,"recycle_bin")),be=new Set(J.docs.map(pe=>pe.id)),Fe=await Ss(fi(wn,"activities"));c(Fe.docs.filter(pe=>!be.has(pe.id)).map(pe=>({id:pe.id,...pe.data()})));const rt=await Ss(fi(wn,"gallerys"));h(rt.docs.filter(pe=>!be.has(pe.id)).map(pe=>({id:pe.id,title:pe.data().title||"",description:pe.data().description||"",imageUrl:pe.data().imageUrl||"",activityId:pe.data().activityId||"",createdAt:pe.data().createdAt||null,updatedAt:pe.data().updatedAt||null})));const pt=await Ss(fi(wn,"learnings"));_(pt.docs.filter(pe=>!be.has(pe.id)).map(pe=>({id:pe.id,title:pe.data().title||"",description:pe.data().description||"",icon:pe.data().icon||"",link:pe.data().link||"",createdAt:pe.data().createdAt||null,updatedAt:pe.data().updatedAt||null})));const ee=await Ss(fi(wn,"anggota")),q=["Caba","Cella","Ratel","Lupus","Orca","Loni","Ola"],me=[];ee.docs.forEach(pe=>{const Ve=pe.data();q.includes(Ve.namalengkap)&&Ve.statusMahasiswa!=="Aktif"&&me.push(Fa(si(wn,"anggota",pe.id),{...Ve,statusMahasiswa:"Aktif"},{merge:!0}))}),me.length>0&&await Promise.all(me),p(ee.docs.filter(pe=>!be.has(pe.id)).map(pe=>{const Ve=pe.data();return{id:pe.id,fullName:Ve.namalengkap||"",fieldName:Ve.namalapangan||"",batchName:Ve.namaangkatan||"",batchYear:Ve.tahun||0,registrationNumber:Ve.nomorregistrasi||"",membershipStatus:Ve.keanggotaan||"Tidak Aktif",photoUrl:Ve.foto||"",qrCode:Ve.url||"",email:Ve.email||"",phone:Ve.phone||"",gender:Ve.gender||"",statusMahasiswa:Ve.statusMahasiswa}}))}catch(J){console.error("Error fetching data:",J)}},we=async()=>{const J=await Ss(fi(wn,"gps_tracker"));x(J.docs.map(be=>({id:be.id,...be.data()})))},tt=async()=>{const J=await Ss(fi(wn,"gps_history"));b(J.docs.map(be=>({id:be.id,...be.data()})))},Ke=J=>window.alert(J),Me=async J=>{try{let be=H==="member"?"anggota":H==="learning"?"learnings":H+"s";if(H==="member"&&!K){const rt=(await Ss(fi(wn,"anggota"))).docs.map(me=>parseInt(me.id,10)).filter(me=>!isNaN(me)),pt=rt.length>0?Math.max(...rt)+1:1,ee=String(pt).padStart(4,"0"),q={namalengkap:J.namalengkap||J.fullName||"",namalapangan:J.namalapangan||J.fieldName||"",namaangkatan:J.namaangkatan||J.batchName||"",tahun:J.tahun||J.batchYear||new Date().getFullYear(),nomorregistrasi:J.nomorregistrasi||J.registrationNumber||"",keanggotaan:J.keanggotaan||J.membershipStatus||"Anggota Muda",foto:J.foto||J.photoUrl||"",email:J.email||"",phone:J.phone||"",gender:J.gender||"",statusMahasiswa:J.statusMahasiswa,url:J.url||"",updateat:new Date().toISOString(),id:ee};await Fa(si(wn,"anggota",ee),q);try{await dl({action:"Tambah Member",detail:`Tambah member baru: ${q.namalengkap} (${ee})`,user:(n==null?void 0:n.email)||"unknown"})}catch(me){window.alert("Gagal menulis log admin: "+((me==null?void 0:me.message)||me))}Ke("Data anggota berhasil ditambahkan dengan ID otomatis!"),P(!1),await Ie();return}if(H==="member"&&(J.id||J.customId)){const Fe=J.customId||J.id,rt={namalengkap:J.namalengkap||J.fullName||"",namalapangan:J.namalapangan||J.fieldName||"",namaangkatan:J.namaangkatan||J.batchName||"",tahun:J.tahun||J.batchYear||new Date().getFullYear(),nomorregistrasi:J.nomorregistrasi||J.registrationNumber||"",keanggotaan:J.keanggotaan||J.membershipStatus||"Anggota Muda",foto:J.foto||J.photoUrl||"",email:J.email||"",phone:J.phone||"",gender:J.gender||"",statusMahasiswa:J.statusMahasiswa,url:J.url||"",updateat:new Date().toISOString(),id:Fe};await Fa(si(wn,be,Fe),rt);try{await dl({action:"Edit Member",detail:`Edit member: ${rt.namalengkap} (${Fe})`,user:(n==null?void 0:n.email)||"unknown"})}catch(pt){window.alert("Gagal menulis log admin: "+((pt==null?void 0:pt.message)||pt))}Ke("Data anggota berhasil diperbarui!")}else if(K&&H==="activity"&&J.id){const Fe={title:J.title||"",description:J.description||"",date:J.date||"",category:J.category||"",imageUrl:J.imageUrl||"",id:J.id};await Fa(si(wn,"activities",J.id),Fe);try{await dl({action:"Edit Activity",detail:`Edit activity: ${Fe.title} (${J.id})`,user:(n==null?void 0:n.email)||"unknown"})}catch(rt){window.alert("Gagal menulis log admin: "+((rt==null?void 0:rt.message)||rt))}Ke("Data kegiatan berhasil diperbarui!")}else if(K&&H==="gallery"&&J.id){const Fe={title:J.title||"",description:J.description||"",imageUrl:J.imageUrl||"",activityId:J.activityId||"",createdAt:J.createdAt||null,updatedAt:new Date().toISOString(),id:J.id};await Fa(si(wn,"gallerys",J.id),Fe);try{await dl({action:"Edit Gallery",detail:`Edit gallery: ${Fe.title} (${J.id})`,user:(n==null?void 0:n.email)||"unknown"})}catch(rt){window.alert("Gagal menulis log admin: "+((rt==null?void 0:rt.message)||rt))}Ke("Data galeri berhasil diperbarui!")}else if(K&&H==="learning"&&J.id){const Fe={title:J.title||"",description:J.description||"",icon:J.icon||"",link:J.link||"",updatedAt:new Date().toISOString(),id:J.id};await Fa(si(wn,"learnings",J.id),Fe);try{await dl({action:"Edit Learning",detail:`Edit learning: ${Fe.title} (${J.id})`,user:(n==null?void 0:n.email)||"unknown"})}catch(rt){window.alert("Gagal menulis log admin: "+((rt==null?void 0:rt.message)||rt))}Ke("Data pembelajaran berhasil diperbarui!")}else if(H==="activity"&&!K){const Fe={title:J.title||"",description:J.description||"",date:J.date||"",category:J.category||"",imageUrl:J.imageUrl||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await zE(fi(wn,"activities"),Fe);try{await dl({action:"Tambah Activity",detail:`Tambah activity: ${Fe.title}`,user:(n==null?void 0:n.email)||"unknown"})}catch(rt){window.alert("Gagal menulis log admin: "+((rt==null?void 0:rt.message)||rt))}Ke("Data kegiatan berhasil ditambahkan!")}else if(H==="learning"&&!K){const Fe={title:J.title||"",description:J.description||"",icon:J.icon||"",link:J.link||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await zE(fi(wn,"learnings"),Fe);try{await dl({action:"Tambah Learning",detail:`Tambah learning: ${Fe.title}`,user:(n==null?void 0:n.email)||"unknown"})}catch(rt){window.alert("Gagal menulis log admin: "+((rt==null?void 0:rt.message)||rt))}Ke("Data pembelajaran berhasil ditambahkan!")}else if(H==="member"&&J.customId){const{customId:Fe,...rt}=J;await Fa(si(wn,"anggota",Fe),rt);try{await dl({action:"Tambah Member (Custom ID)",detail:`Tambah member custom: ${rt.namalengkap} (${Fe})`,user:(n==null?void 0:n.email)||"unknown"})}catch(pt){window.alert("Gagal menulis log admin: "+((pt==null?void 0:pt.message)||pt))}Ke("Data berhasil ditambahkan dengan ID custom!")}else{await zE(fi(wn,be),J);try{await dl({action:"Tambah Data",detail:`Tambah data ke ${be}`,user:(n==null?void 0:n.email)||"unknown"})}catch(Fe){window.alert("Gagal menulis log admin: "+((Fe==null?void 0:Fe.message)||Fe))}Ke("Data berhasil ditambahkan!")}P(!1),await Ie()}catch(be){Ke("Gagal menyimpan data!"),console.error(be)}},Ye=J=>J==="activity"?"activities":J==="gallery"?"gallerys":J==="member"?"anggota":J==="learning"?"learnings":"",Pe=async(J,be)=>{const Fe=J||H,rt=be||I;if(!rt||!rt.id){Ke("Data tidak valid atau ID tidak ditemukan!");return}let pt=Fe,ee=rt.id,q=Ye(pt);try{const me=await T_(si(wn,q,ee));if(!me.exists()){Ke("Data tidak ditemukan di database!");return}const Ve={...me.data(),originalType:pt,deletedAt:new Date().toISOString()};await Fa(si(wn,"recycle_bin",ee),Ve),await Ny(si(wn,q,ee));try{await dl({action:"Hapus Data",detail:`Hapus data ${pt} (${ee})`,user:(n==null?void 0:n.email)||"unknown"})}catch(Ue){window.alert("Gagal menulis log admin: "+((Ue==null?void 0:Ue.message)||Ue))}R(!1),fe(!1),U(null),await Ie(),await ne(),Ke("Data berhasil dipindahkan ke Recycle Bin!")}catch(me){Ke("Gagal menghapus data!"),console.error(me)}},ne=async()=>{ce(!0);const J=await Ss(fi(wn,"recycle_bin")),be=new Date;await Promise.all(J.docs.map(async rt=>{const pt=rt.data();pt.deletedAt&&Qve(be,new Date(pt.deletedAt))>30&&await Ny(si(wn,"recycle_bin",rt.id))}));const Fe=await Ss(fi(wn,"recycle_bin"));le(Fe.docs.map(rt=>({id:rt.id,...rt.data()}))),ce(!1)};O.useEffect(()=>{M==="recycle"?ne():M==="tracker"&&(we(),tt())},[M]);function Be(J){if(!J)return"-";const be="Asia/Jakarta";let Fe;if(typeof J=="string"){if(Fe=new Date(J),isNaN(Fe.getTime()))return J}else if(J instanceof Date)Fe=J;else return"-";const rt=J2e(Fe,be);return Q2e(rt,"yyyy-MM-dd HH:mm:ss",{timeZone:be})+" WIB"}function Re(){We(Qe?[]:S.map(J=>J.id))}function qe(J){We(be=>be.includes(J)?be.filter(Fe=>Fe!==J):[...be,J])}const ze=async()=>{if(window.confirm("Yakin ingin menghapus data tracker yang dipilih?")){for(const J of De)await Ny(si(wn,"gps_tracker",J));We([]),we(),Ke("Data tracker terpilih berhasil dihapus!")}};return n?m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),m.jsxs(zt,{variant:"ghost",className:"flex items-center gap-2",onClick:()=>sf.signOut(),children:[m.jsx($pe,{className:"h-4 w-4"}),"Logout"]})]}),m.jsxs(mAe,{value:M,onValueChange:k,children:[m.jsxs(PZ,{className:"mb-8 overflow-x-auto whitespace-nowrap scrollbar-hide max-w-full",children:[m.jsxs(bp,{value:"activities",className:"flex items-center gap-2",children:[m.jsx(N$,{className:"h-4 w-4"}),"Activities"]}),m.jsxs(bp,{value:"gallery",className:"flex items-center gap-2",children:[m.jsx(Hpe,{className:"h-4 w-4"}),"Gallery"]}),m.jsxs(bp,{value:"members",className:"flex items-center gap-2",children:[m.jsx(Ak,{className:"h-4 w-4"}),"Members"]}),m.jsxs(bp,{value:"learning",className:"flex items-center gap-2",children:[m.jsx(kpe,{className:"h-4 w-4"}),"Learnings"]}),m.jsxs(bp,{value:"recycle",className:"flex items-center gap-2",children:[m.jsx(ky,{className:"h-4 w-4"}),"Recycle Bin"]}),m.jsxs(bp,{value:"tracker",className:"flex items-center gap-2",children:[m.jsx(O$,{className:"h-4 w-4"}),"Tracker"]})]}),m.jsxs(Ap,{value:"learning",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold",children:"Learning Management"}),m.jsxs(zt,{onClick:()=>{W("learning"),te(!1),U(null),P(!0)},className:"flex items-center gap-2",children:[m.jsx(i5,{className:"h-4 w-4"}),"Add Learning"]})]}),m.jsx("div",{className:"bg-white rounded-lg shadow",children:m.jsxs(c0,{children:[m.jsx(u0,{children:m.jsxs(Kl,{children:[m.jsx(Or,{children:"Title"}),m.jsx(Or,{children:"Description"}),m.jsx(Or,{children:"Icon"}),m.jsx(Or,{children:"Link"}),m.jsx(Or,{className:"text-right",children:"Actions"})]})}),m.jsx(h0,{children:v.map(J=>m.jsxs(Kl,{children:[m.jsx(Lr,{className:"font-medium",children:J.title}),m.jsx(Lr,{children:J.description}),m.jsx(Lr,{children:J.icon?m.jsxs("span",{className:"inline-flex items-center gap-1",children:[m.jsx("i",{className:`fa fa-${J.icon}`})," ",J.icon]}):m.jsx("span",{className:"text-gray-400",children:"-"})}),m.jsx(Lr,{children:J.link?m.jsx("a",{href:J.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline hover:text-blue-800",children:"Lihat"}):m.jsx("span",{className:"text-gray-400",children:"-"})}),m.jsx(Lr,{className:"text-right",children:m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx(zt,{variant:"ghost",size:"icon",onClick:()=>{W("learning"),te(!0),U(J),P(!0)},children:m.jsx(hS,{className:"h-4 w-4"})}),m.jsx(zt,{variant:"ghost",size:"icon",className:"text-red-600",onClick:()=>{U(J),W("learning"),R(!0)},children:m.jsx(ky,{className:"h-4 w-4"})})]})})]},J.id))})]})})]}),m.jsxs(Ap,{value:"activities",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold",children:"Activities Management"}),m.jsxs(zt,{onClick:()=>{W("activity"),te(!1),U(null),P(!0)},className:"flex items-center gap-2",children:[m.jsx(i5,{className:"h-4 w-4"}),"Add Activity"]})]}),m.jsx("div",{className:"bg-white rounded-lg shadow",children:m.jsxs(c0,{children:[m.jsx(u0,{children:m.jsxs(Kl,{children:[m.jsx(Or,{children:"Title"}),m.jsx(Or,{children:"Date"}),m.jsx(Or,{children:"Category"}),m.jsx(Or,{className:"text-right",children:"Actions"})]})}),m.jsx(h0,{children:l.map(J=>m.jsxs(Kl,{children:[m.jsx(Lr,{className:"font-medium",children:J.title}),m.jsx(Lr,{children:new Date(J.date).toLocaleDateString()}),m.jsx(Lr,{children:m.jsx(Go,{children:J.category})}),m.jsx(Lr,{className:"text-right",children:m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx(zt,{variant:"ghost",size:"icon",onClick:()=>{W("activity"),te(!0),U(J),P(!0)},children:m.jsx(hS,{className:"h-4 w-4"})}),m.jsx(zt,{variant:"ghost",size:"icon",className:"text-red-600",onClick:()=>{U(J),W("activity"),R(!0)},children:m.jsx(ky,{className:"h-4 w-4"})})]})})]},J.id))})]})})]}),m.jsxs(Ap,{value:"gallery",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold",children:"Gallery Management"}),m.jsxs(zt,{onClick:()=>{W("gallery"),te(!1),U(null),P(!0)},className:"flex items-center gap-2",children:[m.jsx(zpe,{className:"h-4 w-4"}),"Add Image"]})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(J=>m.jsxs(Tl,{className:"overflow-hidden",children:[m.jsx("div",{className:"relative aspect-video",children:m.jsx("img",{src:J.imageUrl,alt:J.title,className:"w-full h-full object-cover"})}),m.jsxs(du,{className:"p-4",children:[m.jsx("h3",{className:"font-semibold",children:J.title}),m.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:J.description}),m.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[m.jsx(zt,{variant:"ghost",size:"sm",onClick:()=>{W("gallery"),te(!0),U(J),P(!0)},children:m.jsx(hS,{className:"h-4 w-4"})}),m.jsx(zt,{variant:"ghost",size:"sm",className:"text-red-600",onClick:()=>{U(J),W("gallery"),R(!0)},children:m.jsx(ky,{className:"h-4 w-4"})})]})]})]},J.id))})]}),m.jsxs(Ap,{value:"members",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold",children:"Members Management"}),m.jsxs(zt,{onClick:()=>{W("member"),te(!1),U(null),P(!0)},className:"flex items-center gap-2",children:[m.jsx(Jpe,{className:"h-4 w-4"}),"Add Member"]})]}),m.jsx("div",{className:"bg-white rounded-lg shadow",children:m.jsxs(c0,{children:[m.jsx(u0,{children:m.jsxs(Kl,{children:[m.jsx(Or,{className:"w-[250px]",children:"Informasi Anggota"}),m.jsx(Or,{children:"Info Kontak"}),m.jsx(Or,{children:"Angkatan"}),m.jsx(Or,{children:"Keanggotaan"}),m.jsx(Or,{children:"Status Mahasiswa"}),m.jsx(Or,{className:"text-right",children:"Actions"})]})}),m.jsx(h0,{children:f.map(J=>m.jsxs(Kl,{children:[m.jsx(Lr,{children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"h-10 w-10 rounded-full overflow-hidden bg-gray-100",children:J.photoUrl?m.jsx("img",{src:J.photoUrl,alt:J.fullName,className:"h-full w-full object-cover"}):m.jsx("div",{className:"h-full w-full flex items-center justify-center bg-primary/10 text-primary",children:J.fullName.charAt(0).toUpperCase()})}),m.jsxs("div",{children:[m.jsx("div",{className:"font-medium",children:J.fullName}),m.jsx("div",{className:"text-sm text-gray-500",children:m.jsx(Go,{variant:"outline",className:"mt-1",children:J.fieldName||"Belum ada nama lapangan"})}),m.jsx("div",{className:"text-sm text-gray-500 mt-1",children:J.registrationNumber||"No. Reg belum diatur"})]})]})}),m.jsx(Lr,{children:m.jsxs("div",{className:"text-sm",children:[m.jsx("div",{children:J.email||"-"}),m.jsx("div",{className:"text-gray-500",children:J.phone||"-"}),m.jsx("div",{className:"text-gray-500 mt-1",children:m.jsx(Go,{variant:"secondary",className:"text-xs text-zinc-50",children:(()=>{const be=(J.gender||"").toString().trim().toUpperCase();return be==="L"||be==="LAKI-LAKI"||be==="LAKI"||be==="LKI"?"Laki-laki":be==="P"||be==="PEREMPUAN"||be==="PR"||be==="WANITA"?"Perempuan":be.length>0?J.gender:"Belum diatur"})()})})]})}),m.jsx(Lr,{children:m.jsxs("div",{className:"text-sm",children:[m.jsx("div",{children:J.batchName||"Belum diatur"}),m.jsx("div",{className:"text-gray-500",children:J.batchYear?`Tahun ${J.batchYear}`:"Tahun belum diatur"})]})}),m.jsx(Lr,{children:J.membershipStatus==="Anggota Penuh"?m.jsx(Go,{className:"bg-green-600 text-white font-bold border-green-700 shadow",children:J.membershipStatus}):J.membershipStatus==="Anggota Muda"?m.jsx(Go,{className:"bg-blue-100 text-blue-800 border-blue-200",children:J.membershipStatus}):J.membershipStatus==="Aktif"?m.jsx(Go,{className:"bg-green-100 text-green-800 border-green-200",children:J.membershipStatus}):J.membershipStatus==="Tidak Aktif"?m.jsx(Go,{className:"bg-red-100 text-red-800 border-red-200",children:J.membershipStatus}):m.jsx(Go,{className:"bg-gray-100 text-gray-800 border-gray-200",children:J.membershipStatus})}),m.jsx(Lr,{children:m.jsx(Go,{className:J.statusMahasiswa==="Aktif"?"bg-green-100 text-green-800 border-green-200":J.statusMahasiswa==="Tidak Aktif"?"bg-red-100 text-red-800 border-red-200":J.statusMahasiswa==="Lulus"?"bg-blue-100 text-blue-800 border-blue-200":J.statusMahasiswa==="Cuti"?"bg-yellow-100 text-yellow-900 border-yellow-300":"bg-gray-100 text-gray-800 border-gray-200",children:J.statusMahasiswa||"Belum diatur"})}),m.jsx(Lr,{className:"text-right",children:m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx(zt,{variant:"ghost",size:"icon",onClick:()=>{W("member"),te(!0),U(J),P(!0)},children:m.jsx(hS,{className:"h-4 w-4"})}),m.jsx(zt,{variant:"ghost",size:"icon",className:"text-red-600",onClick:()=>{U(J),W("member"),R(!0)},children:m.jsx(ky,{className:"h-4 w-4"})})]})})]},J.id))})]})})]}),m.jsxs(Ap,{value:"recycle",children:[m.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[m.jsx("h2",{className:"text-xl font-semibold",children:"Recycle Bin"}),m.jsx(zt,{onClick:ne,variant:"outline",size:"sm",children:"Refresh"})]}),X?m.jsx("div",{className:"py-10 text-center text-gray-500",children:"Loading..."}):se.length===0?m.jsx("div",{className:"py-10 text-center text-gray-500",children:"Recycle Bin kosong."}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs(c0,{children:[m.jsx(u0,{children:m.jsxs(Kl,{children:[m.jsx(Or,{children:"Jenis"}),m.jsx(Or,{children:"Nama/Title"}),m.jsx(Or,{children:"Dihapus Pada"}),m.jsx(Or,{className:"text-right",children:"Aksi"})]})}),m.jsx(h0,{children:se.map(J=>m.jsxs(Kl,{children:[m.jsx(Lr,{children:J.originalType}),m.jsx(Lr,{children:J.fullName||J.title||"-"}),m.jsx(Lr,{children:J.deletedAt?new Date(J.deletedAt).toLocaleString():"-"}),m.jsxs(Lr,{className:"text-right flex gap-2 justify-end",children:[m.jsx(zt,{size:"sm",variant:"outline",onClick:async()=>{try{const{id:be,originalType:Fe,deletedAt:rt,...pt}=J;let ee=Fe==="member"?"anggota":Fe==="activity"?"activities":Fe+"s",q=pt;Fe==="activity"&&(q={title:pt.title||"",description:pt.description||"",date:pt.date||"",category:pt.category||"",imageUrl:pt.imageUrl||"",id:be}),await Fa(si(wn,ee,be),q),await Ny(si(wn,"recycle_bin",be)),await Ie(),await ne(),Ke("Data berhasil dipulihkan!")}catch(be){Ke("Gagal memulihkan data!"),console.error(be)}},children:"Pulihkan"}),m.jsx(zt,{size:"sm",variant:"destructive",onClick:async()=>{if(window.confirm("Yakin ingin menghapus data ini secara permanen?"))try{await Ny(si(wn,"recycle_bin",J.id)),await ne(),Ke("Data berhasil dihapus permanen!")}catch(be){Ke("Gagal menghapus data permanen!"),console.error(be)}},children:"Hapus Permanen"})]})]},J.id))})]})})]}),m.jsxs(Ap,{value:"tracker",children:[m.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[m.jsx("h2",{className:"text-xl font-semibold",children:"GPS Tracker"}),m.jsx(zt,{onClick:we,variant:"outline",size:"sm",children:"Refresh"})]}),m.jsx("div",{className:"mb-6",children:m.jsx(KAe,{points:S.map(J=>({lat:J.lat,lon:J.lon,nama:J.nama,time:J.time})),history:E.map(J=>({lat:J.lat,lon:J.lon,nama:J.nama,time:J.time}))})}),m.jsxs("div",{className:"overflow-x-auto bg-white rounded-lg shadow p-2",children:[m.jsxs("table",{className:"w-full text-sm",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"checkbox",checked:Qe,onChange:Re,className:"accent-primary h-4 w-4"}),"Nama"]})}),m.jsx("th",{children:"Waktu"}),m.jsx("th",{children:"Lat"}),m.jsx("th",{children:"Lon"}),m.jsx("th",{children:"Status"}),m.jsx("th",{children:"View Maps"})]})}),m.jsx("tbody",{children:S.map(J=>m.jsxs("tr",{children:[m.jsx("td",{children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"checkbox",checked:De.includes(J.id),onChange:()=>qe(J.id),className:"accent-primary h-4 w-4"}),J.nama]})}),m.jsx("td",{children:Be(J.time)}),m.jsx("td",{children:J.lat}),m.jsx("td",{children:J.lon}),m.jsx("td",{children:m.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold ${J.online?"bg-green-500 text-white":"bg-gray-400 text-white"}`,children:J.online?"Online":"Offline"})}),m.jsx("td",{children:J.lat&&J.lon?m.jsx("a",{href:`https://www.google.com/maps?q=${J.lat},${J.lon}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline hover:text-blue-800",title:"Lihat di Google Maps",children:"Lihat Maps"}):m.jsx("span",{className:"text-gray-400",children:"-"})})]},J.id))})]}),m.jsx("div",{className:"mt-2 flex gap-2",children:m.jsx(zt,{variant:"destructive",size:"sm",disabled:De.length===0,onClick:ze,children:"Hapus Data Terpilih"})})]})]})]}),m.jsx(NAe,{open:B,onOpenChange:P,type:H,isEditing:K,initialData:I,onSubmit:Me,activities:l}),m.jsx(PAe,{open:N,onOpenChange:R,children:m.jsxs(QZ,{children:[m.jsxs(JZ,{children:[m.jsx(tQ,{children:"Konfirmasi Hapus"}),m.jsx(nQ,{children:"Data akan dipindahkan ke Recycle Bin dan dapat dipulihkan dalam 30 hari. Centang untuk melanjutkan."})]}),m.jsxs("div",{className:"flex items-center gap-2 my-4",children:[m.jsx("input",{type:"checkbox",id:"delete-check",checked:oe,onChange:J=>fe(J.target.checked),className:"accent-red-600 h-4 w-4"}),m.jsx("label",{htmlFor:"delete-check",className:"text-sm select-none",children:"Saya yakin ingin menghapus data ini"})]}),m.jsxs(eQ,{children:[m.jsx(iQ,{children:"Batal"}),m.jsx(rQ,{className:"bg-red-600 text-white hover:bg-red-700 disabled:opacity-50",onClick:()=>Pe(I&&H,I),disabled:!oe,children:"Hapus"})]})]})})]}):m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:m.jsxs(Tl,{className:"w-[350px]",children:[m.jsx(O0,{children:m.jsx(j1,{className:"text-2xl font-bold text-center",children:"Admin Login"})}),m.jsx(du,{children:m.jsxs("form",{onSubmit:ve,className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"email",children:"Email"}),m.jsx(ii,{id:"email",type:"email",placeholder:"admin@example.com",value:t,onChange:J=>r(J.target.value),required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Zr,{htmlFor:"password",children:"Password"}),m.jsx(ii,{id:"password",type:"password",value:i,onChange:J=>s(J.target.value),required:!0})]}),o&&m.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-md text-sm",children:o}),m.jsx(zt,{type:"submit",className:"w-full",children:"Login"})]})})]})})}function QAe(){const n=KG(),{data:e,isLoading:t}=rO(),r=e==null?void 0:e.find(s=>s.id===n.id);if(t)return m.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});if(!r)return m.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center",children:[m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Kegiatan Tidak Ditemukan"}),m.jsx("p",{className:"text-gray-500 mb-6",children:"Kegiatan yang Anda cari tidak tersedia atau telah dihapus."}),m.jsx(Va,{href:"/kegiatan",children:m.jsx("a",{className:"px-6 py-2 bg-primary text-white rounded-lg font-semibold shadow hover:bg-primary/90 transition",children:"Kembali ke Daftar Kegiatan"})})]});const i=Qk(new Date(r.date),"EEEE, d MMMM yyyy",{locale:uq});return m.jsx("section",{className:"py-12 bg-gradient-to-br from-white to-blue-50 min-h-[80vh]",children:m.jsxs("div",{className:"container mx-auto px-4 max-w-3xl",children:[m.jsx("div",{className:"mb-8",children:m.jsx(Va,{href:"/kegiatan",children:m.jsxs("a",{className:"inline-flex items-center gap-2 text-primary hover:underline font-medium mb-4",children:[m.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Kembali ke Daftar Kegiatan"]})})}),m.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[m.jsxs("div",{className:"relative h-64 md:h-80 w-full overflow-hidden",children:[m.jsx("img",{src:r.imageUrl||"https://images.unsplash.com/photo-1511632765486-a01980e01a18?auto=format&fit=crop&w=800&h=450",alt:r.title,className:"w-full h-full object-cover object-center transition hover:scale-105 duration-700"}),m.jsx("div",{className:"absolute top-4 left-4",children:m.jsx(Go,{variant:"secondary",className:"text-base px-4 py-2 shadow-lg bg-white/80 text-primary font-bold border border-primary",children:r.category})})]}),m.jsxs("div",{className:"p-8 md:p-10",children:[m.jsx("h1",{className:"font-heading text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:r.title}),m.jsx("div",{className:"flex items-center gap-4 mb-6 flex-wrap",children:m.jsxs("span",{className:"inline-flex items-center gap-2 text-gray-500",children:[m.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),i]})}),m.jsx("div",{className:"prose max-w-none text-lg text-gray-700 mb-8",children:r.description}),m.jsx("div",{className:"flex flex-wrap gap-3 mt-8",children:m.jsxs(Go,{className:"bg-gradient-to-r from-primary to-blue-400 text-white px-4 py-2 text-base font-semibold shadow",children:["Kategori: ",r.category]})})]})]})]})})}function JAe(){R_();const[n,e]=O.useState(null),[t,r]=O.useState(!0),[i,s]=O.useState(!1),o=new URLSearchParams(window.location.search),a=o.get("type")||"fieldName",l=o.get("input")||"";O.useEffect(()=>{r(!0),YK(a,l).then(u=>{e(u?{fullName:u.fullName,fieldName:u.fieldName,batchName:u.batchName,batchYear:u.batchYear,registrationNumber:u.registrationNumber,membershipStatus:u.membershipStatus,photoUrl:u.photoUrl,statusMahasiswa:u.statusMahasiswa}:null),r(!1)})},[a,l]);const c=async()=>{if(n!=null&&n.photoUrl){s(!0);try{const h=await(await fetch(n.photoUrl)).blob(),f=window.URL.createObjectURL(h),p=document.createElement("a");p.href=f,p.download=`kartu-anggota-${n.registrationNumber||n.fieldName}.png`,document.body.appendChild(p),p.click(),document.body.removeChild(p),window.URL.revokeObjectURL(f);const S=await(await fetch("https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/back.png")).blob(),x=window.URL.createObjectURL(S),E=document.createElement("a");E.href=x,E.download=`kartu-anggota-${n.registrationNumber||n.fieldName}-belakang.png`,document.body.appendChild(E),E.click(),document.body.removeChild(E),window.URL.revokeObjectURL(x)}catch{alert("Gagal mengunduh kartu. Silakan coba lagi.")}s(!1)}};return t?m.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:m.jsx("span",{children:"Loading..."})}):n?m.jsx("div",{className:"max-w-5xl mx-auto p-2 sm:p-4",children:m.jsxs(Tl,{className:"p-2 sm:p-6",children:[m.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-center mb-4 sm:mb-6",children:"Verifikasi Kartu Anggota"}),n.photoUrl&&m.jsx("div",{className:"flex justify-center mb-6",children:m.jsxs(zt,{className:"gap-2 bg-primary text-white",onClick:c,disabled:i,children:[m.jsx(bk,{className:"w-4 h-4"}),i?"Mengunduh...":"Unduh Kartu Anggota Untuk Print"]})}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 sm:gap-8 mb-4 sm:mb-8",children:[m.jsxs("div",{className:"flex flex-col items-center justify-center w-full sm:w-1/2 relative",id:"member-card-front",children:[n.statusMahasiswa==="Aktif"&&m.jsx(yr.span,{initial:{opacity:.7,textShadow:"0 0 0px #22c55e"},animate:{opacity:[.7,1,.7],textShadow:["0 0 0px #22c55e","0 0 12px #22c55e, 0 0 24px #16a34a","0 0 0px #22c55e"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute top-3 right-2 z-10 px-3 py-1 rounded-full font-bold text-sm select-none",style:{color:"#22c55e"},children:" Mahasiswa Aktif"}),n.photoUrl?m.jsx("div",{className:"p-2 border-2 border-gray-400 rounded-lg",children:m.jsx("img",{src:n.photoUrl,alt:"Kartu Anggota",className:"rounded-lg shadow-lg max-w-full h-auto"})}):m.jsx("div",{className:"p-2 border-2 border-gray-400 rounded-lg w-full flex items-center justify-center min-h-[275px]",children:m.jsx("span",{className:"text-gray-400 text-center",children:"Kartu anggota tidak tersedia."})})]}),m.jsxs("div",{className:"w-full sm:w-1/2",children:[m.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"Detail Anggota"}),m.jsxs("div",{className:"divide-y text-xs sm:text-base",children:[m.jsxs("div",{className:"flex justify-between py-2",children:[m.jsx("span",{className:"font-medium",children:"Nama Lengkap"}),m.jsx("span",{children:n.fullName})]}),m.jsxs("div",{className:"flex justify-between py-2",children:[m.jsx("span",{className:"font-medium",children:"Nomor Registrasi"}),m.jsx("span",{children:n.registrationNumber})]}),m.jsxs("div",{className:"flex justify-between py-2",children:[m.jsx("span",{className:"font-medium",children:"Nama Lapangan"}),m.jsx("span",{children:n.fieldName})]}),m.jsxs("div",{className:"flex justify-between py-2",children:[m.jsx("span",{className:"font-medium",children:"Nama Angkatan"}),m.jsx("span",{children:n.batchName})]}),m.jsxs("div",{className:"flex justify-between py-2",children:[m.jsx("span",{className:"font-medium",children:"Tahun Angkatan"}),m.jsx("span",{children:n.batchYear})]}),m.jsxs("div",{className:"flex justify-between py-2",children:[m.jsx("span",{className:"font-medium",children:"Keanggotaan"}),m.jsx("span",{children:n.membershipStatus})]})]})]})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 sm:mt-8 text-xs text-gray-500 gap-2",children:[m.jsxs("span",{children:[" ",new Date().getFullYear()," Mahapala Narotama"]}),m.jsx("span",{children:"www.mahapalanarotama.web.id"})]})]})}):m.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:m.jsx("span",{children:"Data anggota tidak ditemukan."})})}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const NT="179",Tp={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Cp={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},dQ=0,VN=1,fQ=2,eTe=3,pQ=0,DT=1,$1=2,Zl=3,Ah=0,Yo=1,Zc=2,hh=0,nm=1,zN=2,HN=3,WN=4,mQ=5,Rd=100,gQ=101,vQ=102,yQ=103,xQ=104,_Q=200,wQ=201,SQ=202,EQ=203,w2=204,S2=205,bQ=206,AQ=207,TQ=208,CQ=209,MQ=210,IQ=211,PQ=212,RQ=213,NQ=214,E2=0,b2=1,A2=2,Am=3,T2=4,C2=5,M2=6,I2=7,G_=0,DQ=1,kQ=2,mu=0,OQ=1,LQ=2,FQ=3,KO=4,BQ=5,UQ=6,jQ=7,GN="attached",VQ="detached",kT=300,Th=301,Af=302,Gx=303,$x=304,ey=306,Xx=1e3,Sl=1001,qx=1002,zs=1003,ZO=1004,tTe=1004,d0=1005,nTe=1005,us=1006,X1=1007,rTe=1007,Jc=1008,iTe=1008,Rl=1009,QO=1010,JO=1011,Sv=1012,OT=1013,Ch=1014,Sa=1015,ty=1016,LT=1017,FT=1018,Ev=1020,e4=35902,t4=1021,n4=1022,_o=1023,bv=1026,Av=1027,BT=1028,$_=1029,r4=1030,UT=1031,sTe=1032,jT=1033,q1=33776,Y1=33777,K1=33778,Z1=33779,P2=35840,R2=35841,N2=35842,D2=35843,k2=36196,O2=37492,L2=37496,F2=37808,B2=37809,U2=37810,j2=37811,V2=37812,z2=37813,H2=37814,W2=37815,G2=37816,$2=37817,X2=37818,q2=37819,Y2=37820,K2=37821,Q1=36492,Z2=36494,Q2=36495,i4=36283,J2=36284,eA=36285,tA=36286,zQ=2200,HQ=2201,WQ=2202,Yx=2300,nA=2301,tb=2302,Bp=2400,Up=2401,Kx=2402,VT=2500,s4=2501,oTe=0,aTe=1,lTe=2,GQ=3200,$Q=3201,cTe=3202,uTe=3203,Lf=0,XQ=1,th="",va="srgb",Tm="srgb-linear",Zx="linear",Ar="srgb",hTe=0,Mp=7680,dTe=7681,fTe=7682,pTe=7683,mTe=34055,gTe=34056,vTe=5386,yTe=512,xTe=513,_Te=514,wTe=515,STe=516,ETe=517,bTe=518,$N=519,qQ=512,YQ=513,KQ=514,o4=515,ZQ=516,QQ=517,JQ=518,eJ=519,Qx=35044,ATe=35048,TTe=35040,CTe=35045,MTe=35049,ITe=35041,PTe=35046,RTe=35050,NTe=35042,DTe="100",XN="300 es",za=2e3,Tv=2001,kTe={COMPUTE:"compute",RENDER:"render"},OTe={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},LTe={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let Eu=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const r=t[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const lo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let TU=1234567;const rm=Math.PI/180,Cv=180/Math.PI;function qa(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(lo[n&255]+lo[n>>8&255]+lo[n>>16&255]+lo[n>>24&255]+"-"+lo[e&255]+lo[e>>8&255]+"-"+lo[e>>16&15|64]+lo[e>>24&255]+"-"+lo[t&63|128]+lo[t>>8&255]+"-"+lo[t>>16&255]+lo[t>>24&255]+lo[r&255]+lo[r>>8&255]+lo[r>>16&255]+lo[r>>24&255]).toLowerCase()}function pn(n,e,t){return Math.max(e,Math.min(t,n))}function a4(n,e){return(n%e+e)%e}function FTe(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function BTe(n,e,t){return n!==e?(t-n)/(e-n):0}function J1(n,e,t){return(1-t)*n+t*e}function UTe(n,e,t,r){return J1(n,e,1-Math.exp(-t*r))}function jTe(n,e=1){return e-Math.abs(a4(n,e*2)-e)}function VTe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function zTe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function HTe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function WTe(n,e){return n+Math.random()*(e-n)}function GTe(n){return n*(.5-Math.random())}function $Te(n){n!==void 0&&(TU=n);let e=TU+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function XTe(n){return n*rm}function qTe(n){return n*Cv}function YTe(n){return(n&n-1)===0&&n!==0}function KTe(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function ZTe(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function QTe(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),u=o((e+r)/2),h=s((e-r)/2),f=o((e-r)/2),p=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":n.set(a*u,l*h,l*f,a*c);break;case"YZY":n.set(l*f,a*u,l*h,a*c);break;case"ZXZ":n.set(l*h,l*f,a*u,a*c);break;case"XZX":n.set(a*u,l*v,l*p,a*c);break;case"YXY":n.set(l*p,a*u,l*v,a*c);break;case"ZYZ":n.set(l*v,l*p,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Xo(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Mn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const JTe={DEG2RAD:rm,RAD2DEG:Cv,generateUUID:qa,clamp:pn,euclideanModulo:a4,mapLinear:FTe,inverseLerp:BTe,lerp:J1,damp:UTe,pingpong:jTe,smoothstep:VTe,smootherstep:zTe,randInt:HTe,randFloat:WTe,randFloatSpread:GTe,seededRandom:$Te,degToRad:XTe,radToDeg:qTe,isPowerOfTwo:YTe,ceilPowerOfTwo:KTe,floorPowerOfTwo:ZTe,setQuaternionFromProperEuler:QTe,normalize:Mn,denormalize:Xo};class Ze{constructor(e=0,t=0){Ze.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=pn(this.x,e.x,t.x),this.y=pn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=pn(this.x,e,t),this.y=pn(this.y,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(pn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(pn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class wo{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],h=r[i+3];const f=s[o+0],p=s[o+1],v=s[o+2],_=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=f,e[t+1]=p,e[t+2]=v,e[t+3]=_;return}if(h!==_||l!==f||c!==p||u!==v){let S=1-a;const x=l*f+c*p+u*v+h*_,E=x>=0?1:-1,b=1-x*x;if(b>Number.EPSILON){const k=Math.sqrt(b),B=Math.atan2(k,x*E);S=Math.sin(S*B)/k,a=Math.sin(a*B)/k}const M=a*E;if(l=l*S+f*M,c=c*S+p*M,u=u*S+v*M,h=h*S+_*M,S===1-a){const k=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=k,c*=k,u*=k,h*=k}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],h=s[o],f=s[o+1],p=s[o+2],v=s[o+3];return e[t]=a*v+u*h+l*p-c*f,e[t+1]=l*v+u*f+c*h-a*p,e[t+2]=c*v+u*p+a*f-l*h,e[t+3]=u*v-a*h-l*f-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),h=a(s/2),f=l(r/2),p=l(i/2),v=l(s/2);switch(o){case"XYZ":this._x=f*u*h+c*p*v,this._y=c*p*h-f*u*v,this._z=c*u*v+f*p*h,this._w=c*u*h-f*p*v;break;case"YXZ":this._x=f*u*h+c*p*v,this._y=c*p*h-f*u*v,this._z=c*u*v-f*p*h,this._w=c*u*h+f*p*v;break;case"ZXY":this._x=f*u*h-c*p*v,this._y=c*p*h+f*u*v,this._z=c*u*v+f*p*h,this._w=c*u*h-f*p*v;break;case"ZYX":this._x=f*u*h-c*p*v,this._y=c*p*h+f*u*v,this._z=c*u*v-f*p*h,this._w=c*u*h+f*p*v;break;case"YZX":this._x=f*u*h+c*p*v,this._y=c*p*h+f*u*v,this._z=c*u*v-f*p*h,this._w=c*u*h-f*p*v;break;case"XZY":this._x=f*u*h-c*p*v,this._y=c*p*h-f*u*v,this._z=c*u*v+f*p*h,this._w=c*u*h+f*p*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],f=r+a+h;if(f>0){const p=.5/Math.sqrt(f+1);this._w=.25/p,this._x=(u-l)*p,this._y=(s-c)*p,this._z=(o-i)*p}else if(r>a&&r>h){const p=2*Math.sqrt(1+r-a-h);this._w=(u-l)/p,this._x=.25*p,this._y=(i+o)/p,this._z=(s+c)/p}else if(a>h){const p=2*Math.sqrt(1+a-r-h);this._w=(s-c)/p,this._x=(i+o)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+h-r-a);this._w=(o-i)/p,this._x=(s+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<1e-8?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(pn(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-t;return this._w=p*o+t*this._w,this._x=p*r+t*this._x,this._y=p*i+t*this._y,this._z=p*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,f=Math.sin(t*u)/c;return this._w=o*h+this._w*f,this._x=r*h+this._x*f,this._y=i*h+this._y*f,this._z=s*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class re{constructor(e=0,t=0,r=0){re.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(CU.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(CU.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*t-s*i),h=2*(s*r-o*t);return this.x=t+l*c+o*h-a*u,this.y=r+l*u+a*c-s*h,this.z=i+l*h+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=pn(this.x,e.x,t.x),this.y=pn(this.y,e.y,t.y),this.z=pn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=pn(this.x,e,t),this.y=pn(this.y,e,t),this.z=pn(this.z,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(pn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return fI.copy(this).projectOnVector(e),this.sub(fI)}reflect(e){return this.sub(fI.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(pn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const fI=new re,CU=new wo;class Tn{constructor(e,t,r,i,s,o,a,l,c){Tn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c)}set(e,t,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],h=r[7],f=r[2],p=r[5],v=r[8],_=i[0],S=i[3],x=i[6],E=i[1],b=i[4],M=i[7],k=i[2],B=i[5],P=i[8];return s[0]=o*_+a*E+l*k,s[3]=o*S+a*b+l*B,s[6]=o*x+a*M+l*P,s[1]=c*_+u*E+h*k,s[4]=c*S+u*b+h*B,s[7]=c*x+u*M+h*P,s[2]=f*_+p*E+v*k,s[5]=f*S+p*b+v*B,s[8]=f*x+p*M+v*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,f=a*l-u*s,p=c*s-o*l,v=t*h+r*f+i*p;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/v;return e[0]=h*_,e[1]=(i*c-u*r)*_,e[2]=(a*r-i*o)*_,e[3]=f*_,e[4]=(u*t-i*l)*_,e[5]=(i*s-a*t)*_,e[6]=p*_,e[7]=(r*l-c*t)*_,e[8]=(o*t-r*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(pI.makeScale(e,t)),this}rotate(e){return this.premultiply(pI.makeRotation(-e)),this}translate(e,t){return this.premultiply(pI.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const pI=new Tn;function tJ(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const eCe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function f0(n,e){return new eCe[n](e)}function Jx(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function nJ(){const n=Jx("canvas");return n.style.display="block",n}const MU={};function j0(n){n in MU||(MU[n]=!0,console.warn(n))}function tCe(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}const IU=new Tn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),PU=new Tn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function nCe(){const n={enabled:!0,workingColorSpace:Tm,spaces:{},convert:function(i,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===Ar&&(i.r=dh(i.r),i.g=dh(i.g),i.b=dh(i.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Ar&&(i.r=V0(i.r),i.g=V0(i.g),i.b=V0(i.b))),i},workingToColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},colorSpaceToWorking:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===th?Zx:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,o){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,s){return j0("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(i,s)},toWorkingColorSpace:function(i,s){return j0("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(i,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],r=[.3127,.329];return n.define({[Tm]:{primaries:e,whitePoint:r,transfer:Zx,toXYZ:IU,fromXYZ:PU,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:va},outputColorSpaceConfig:{drawingBufferColorSpace:va}},[va]:{primaries:e,whitePoint:r,transfer:Ar,toXYZ:IU,fromXYZ:PU,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:va}}}),n}const nr=nCe();function dh(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function V0(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let dg;class rJ{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{dg===void 0&&(dg=Jx("canvas")),dg.width=e.width,dg.height=e.height;const i=dg.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=dg}return r.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Jx("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=dh(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(dh(t[r]/255)*255):t[r]=dh(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let rCe=0;class Wd{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:rCe++}),this.uuid=qa(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(mI(i[o].image)):s.push(mI(i[o]))}else s=mI(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function mI(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?rJ.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let iCe=0;const gI=new re;class ai extends Eu{constructor(e=ai.DEFAULT_IMAGE,t=ai.DEFAULT_MAPPING,r=Sl,i=Sl,s=us,o=Jc,a=_o,l=Rl,c=ai.DEFAULT_ANISOTROPY,u=th){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:iCe++}),this.uuid=qa(),this.name="",this.source=new Wd(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ze(0,0),this.repeat=new Ze(1,1),this.center=new Ze(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Tn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(gI).x}get height(){return this.source.getSize(gI).y}get depth(){return this.source.getSize(gI).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}i&&r&&i.isVector2&&r.isVector2||i&&r&&i.isVector3&&r.isVector3||i&&r&&i.isMatrix3&&r.isMatrix3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==kT)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Xx:e.x=e.x-Math.floor(e.x);break;case Sl:e.x=e.x<0?0:1;break;case qx:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Xx:e.y=e.y-Math.floor(e.y);break;case Sl:e.y=e.y<0?0:1;break;case qx:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ai.DEFAULT_IMAGE=null;ai.DEFAULT_MAPPING=kT;ai.DEFAULT_ANISOTROPY=1;class sr{constructor(e=0,t=0,r=0,i=1){sr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],h=l[8],f=l[1],p=l[5],v=l[9],_=l[2],S=l[6],x=l[10];if(Math.abs(u-f)<.01&&Math.abs(h-_)<.01&&Math.abs(v-S)<.01){if(Math.abs(u+f)<.1&&Math.abs(h+_)<.1&&Math.abs(v+S)<.1&&Math.abs(c+p+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const b=(c+1)/2,M=(p+1)/2,k=(x+1)/2,B=(u+f)/4,P=(h+_)/4,N=(v+S)/4;return b>M&&b>k?b<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(b),i=B/r,s=P/r):M>k?M<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(M),r=B/i,s=N/i):k<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(k),r=P/s,i=N/s),this.set(r,i,s,t),this}let E=Math.sqrt((S-v)*(S-v)+(h-_)*(h-_)+(f-u)*(f-u));return Math.abs(E)<.001&&(E=1),this.x=(S-v)/E,this.y=(h-_)/E,this.z=(f-u)/E,this.w=Math.acos((c+p+x-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=pn(this.x,e.x,t.x),this.y=pn(this.y,e.y,t.y),this.z=pn(this.z,e.z,t.z),this.w=pn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=pn(this.x,e,t),this.y=pn(this.y,e,t),this.z=pn(this.z,e,t),this.w=pn(this.w,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(pn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class l4 extends Eu{constructor(e=1,t=1,r={}){super(),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:us,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},r),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=r.depth,this.scissor=new sr(0,0,e,t),this.scissorTest=!1,this.viewport=new sr(0,0,e,t);const i={width:e,height:t,depth:r.depth},s=new ai(i);this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(r),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples,this.multiview=r.multiview}_setTextureOptions(e={}){const t={minFilter:us,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let r=0;r<this.textures.length;r++)this.textures[r].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r,this.textures[i].isArrayTexture=this.textures[i].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,r=e.textures.length;t<r;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const i=Object.assign({},e.textures[t].image);this.textures[t].source=new Wd(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class _u extends l4{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class zT extends ai{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=zs,this.minFilter=zs,this.wrapR=Sl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class sCe extends _u{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new zT(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class HT extends ai{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=zs,this.minFilter=zs,this.wrapR=Sl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class oCe extends _u{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new HT(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class So{constructor(e=new re(1/0,1/0,1/0),t=new re(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Hl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Hl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Hl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Hl):Hl.fromBufferAttribute(s,o),Hl.applyMatrix4(e.matrixWorld),this.expandByPoint(Hl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),wS.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),wS.copy(r.boundingBox)),wS.applyMatrix4(e.matrixWorld),this.union(wS)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Hl),Hl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(By),SS.subVectors(this.max,By),fg.subVectors(e.a,By),pg.subVectors(e.b,By),mg.subVectors(e.c,By),cd.subVectors(pg,fg),ud.subVectors(mg,pg),np.subVectors(fg,mg);let t=[0,-cd.z,cd.y,0,-ud.z,ud.y,0,-np.z,np.y,cd.z,0,-cd.x,ud.z,0,-ud.x,np.z,0,-np.x,-cd.y,cd.x,0,-ud.y,ud.x,0,-np.y,np.x,0];return!vI(t,fg,pg,mg,SS)||(t=[1,0,0,0,1,0,0,0,1],!vI(t,fg,pg,mg,SS))?!1:(ES.crossVectors(cd,ud),t=[ES.x,ES.y,ES.z],vI(t,fg,pg,mg,SS))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Hl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Hl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Hu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Hu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Hu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Hu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Hu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Hu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Hu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Hu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Hu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Hu=[new re,new re,new re,new re,new re,new re,new re,new re],Hl=new re,wS=new So,fg=new re,pg=new re,mg=new re,cd=new re,ud=new re,np=new re,By=new re,SS=new re,ES=new re,rp=new re;function vI(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){rp.fromArray(n,s);const a=i.x*Math.abs(rp.x)+i.y*Math.abs(rp.y)+i.z*Math.abs(rp.z),l=e.dot(rp),c=t.dot(rp),u=r.dot(rp);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const aCe=new So,Uy=new re,yI=new re;class Hs{constructor(e=new re,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):aCe.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Uy.subVectors(e,this.center);const t=Uy.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Uy,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(yI.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Uy.copy(e.center).add(yI)),this.expandByPoint(Uy.copy(e.center).sub(yI))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Wu=new re,xI=new re,bS=new re,hd=new re,_I=new re,AS=new re,wI=new re;class jm{constructor(e=new re,t=new re(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Wu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Wu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Wu.copy(this.origin).addScaledVector(this.direction,t),Wu.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){xI.copy(e).add(t).multiplyScalar(.5),bS.copy(t).sub(e).normalize(),hd.copy(this.origin).sub(xI);const s=e.distanceTo(t)*.5,o=-this.direction.dot(bS),a=hd.dot(this.direction),l=-hd.dot(bS),c=hd.lengthSq(),u=Math.abs(1-o*o);let h,f,p,v;if(u>0)if(h=o*l-a,f=o*a-l,v=s*u,h>=0)if(f>=-v)if(f<=v){const _=1/u;h*=_,f*=_,p=h*(h+o*f+2*a)+f*(o*h+f+2*l)+c}else f=s,h=Math.max(0,-(o*f+a)),p=-h*h+f*(f+2*l)+c;else f=-s,h=Math.max(0,-(o*f+a)),p=-h*h+f*(f+2*l)+c;else f<=-v?(h=Math.max(0,-(-o*s+a)),f=h>0?-s:Math.min(Math.max(-s,-l),s),p=-h*h+f*(f+2*l)+c):f<=v?(h=0,f=Math.min(Math.max(-s,-l),s),p=f*(f+2*l)+c):(h=Math.max(0,-(o*s+a)),f=h>0?s:Math.min(Math.max(-s,-l),s),p=-h*h+f*(f+2*l)+c);else f=o>0?-s:s,h=Math.max(0,-(o*f+a)),p=-h*h+f*(f+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(xI).addScaledVector(bS,f),p}intersectSphere(e,t){Wu.subVectors(e.center,this.origin);const r=Wu.dot(this.direction),i=Wu.dot(Wu)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,f=this.origin;return c>=0?(r=(e.min.x-f.x)*c,i=(e.max.x-f.x)*c):(r=(e.max.x-f.x)*c,i=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,o=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,o=(e.min.y-f.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),h>=0?(a=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(a=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Wu)!==null}intersectTriangle(e,t,r,i,s){_I.subVectors(t,e),AS.subVectors(r,e),wI.crossVectors(_I,AS);let o=this.direction.dot(wI),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;hd.subVectors(this.origin,e);const l=a*this.direction.dot(AS.crossVectors(hd,AS));if(l<0)return null;const c=a*this.direction.dot(_I.cross(hd));if(c<0||l+c>o)return null;const u=-a*hd.dot(wI);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class yn{constructor(e,t,r,i,s,o,a,l,c,u,h,f,p,v,_,S){yn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c,u,h,f,p,v,_,S)}set(e,t,r,i,s,o,a,l,c,u,h,f,p,v,_,S){const x=this.elements;return x[0]=e,x[4]=t,x[8]=r,x[12]=i,x[1]=s,x[5]=o,x[9]=a,x[13]=l,x[2]=c,x[6]=u,x[10]=h,x[14]=f,x[3]=p,x[7]=v,x[11]=_,x[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new yn().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/gg.setFromMatrixColumn(e,0).length(),s=1/gg.setFromMatrixColumn(e,1).length(),o=1/gg.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const f=o*u,p=o*h,v=a*u,_=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=p+v*c,t[5]=f-_*c,t[9]=-a*l,t[2]=_-f*c,t[6]=v+p*c,t[10]=o*l}else if(e.order==="YXZ"){const f=l*u,p=l*h,v=c*u,_=c*h;t[0]=f+_*a,t[4]=v*a-p,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=p*a-v,t[6]=_+f*a,t[10]=o*l}else if(e.order==="ZXY"){const f=l*u,p=l*h,v=c*u,_=c*h;t[0]=f-_*a,t[4]=-o*h,t[8]=v+p*a,t[1]=p+v*a,t[5]=o*u,t[9]=_-f*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const f=o*u,p=o*h,v=a*u,_=a*h;t[0]=l*u,t[4]=v*c-p,t[8]=f*c+_,t[1]=l*h,t[5]=_*c+f,t[9]=p*c-v,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const f=o*l,p=o*c,v=a*l,_=a*c;t[0]=l*u,t[4]=_-f*h,t[8]=v*h+p,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=p*h+v,t[10]=f-_*h}else if(e.order==="XZY"){const f=o*l,p=o*c,v=a*l,_=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=f*h+_,t[5]=o*u,t[9]=p*h-v,t[2]=v*h-p,t[6]=a*u,t[10]=_*h+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(lCe,e,cCe)}lookAt(e,t,r){const i=this.elements;return Oa.subVectors(e,t),Oa.lengthSq()===0&&(Oa.z=1),Oa.normalize(),dd.crossVectors(r,Oa),dd.lengthSq()===0&&(Math.abs(r.z)===1?Oa.x+=1e-4:Oa.z+=1e-4,Oa.normalize(),dd.crossVectors(r,Oa)),dd.normalize(),TS.crossVectors(Oa,dd),i[0]=dd.x,i[4]=TS.x,i[8]=Oa.x,i[1]=dd.y,i[5]=TS.y,i[9]=Oa.y,i[2]=dd.z,i[6]=TS.z,i[10]=Oa.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],h=r[5],f=r[9],p=r[13],v=r[2],_=r[6],S=r[10],x=r[14],E=r[3],b=r[7],M=r[11],k=r[15],B=i[0],P=i[4],N=i[8],R=i[12],I=i[1],U=i[5],H=i[9],W=i[13],K=i[2],te=i[6],se=i[10],le=i[14],X=i[3],ce=i[7],oe=i[11],fe=i[15];return s[0]=o*B+a*I+l*K+c*X,s[4]=o*P+a*U+l*te+c*ce,s[8]=o*N+a*H+l*se+c*oe,s[12]=o*R+a*W+l*le+c*fe,s[1]=u*B+h*I+f*K+p*X,s[5]=u*P+h*U+f*te+p*ce,s[9]=u*N+h*H+f*se+p*oe,s[13]=u*R+h*W+f*le+p*fe,s[2]=v*B+_*I+S*K+x*X,s[6]=v*P+_*U+S*te+x*ce,s[10]=v*N+_*H+S*se+x*oe,s[14]=v*R+_*W+S*le+x*fe,s[3]=E*B+b*I+M*K+k*X,s[7]=E*P+b*U+M*te+k*ce,s[11]=E*N+b*H+M*se+k*oe,s[15]=E*R+b*W+M*le+k*fe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],f=e[10],p=e[14],v=e[3],_=e[7],S=e[11],x=e[15];return v*(+s*l*h-i*c*h-s*a*f+r*c*f+i*a*p-r*l*p)+_*(+t*l*p-t*c*f+s*o*f-i*o*p+i*c*u-s*l*u)+S*(+t*c*h-t*a*p-s*o*h+r*o*p+s*a*u-r*c*u)+x*(-i*a*u-t*l*h+t*a*f+i*o*h-r*o*f+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],p=e[11],v=e[12],_=e[13],S=e[14],x=e[15],E=h*S*c-_*f*c+_*l*p-a*S*p-h*l*x+a*f*x,b=v*f*c-u*S*c-v*l*p+o*S*p+u*l*x-o*f*x,M=u*_*c-v*h*c+v*a*p-o*_*p-u*a*x+o*h*x,k=v*h*l-u*_*l-v*a*f+o*_*f+u*a*S-o*h*S,B=t*E+r*b+i*M+s*k;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/B;return e[0]=E*P,e[1]=(_*f*s-h*S*s-_*i*p+r*S*p+h*i*x-r*f*x)*P,e[2]=(a*S*s-_*l*s+_*i*c-r*S*c-a*i*x+r*l*x)*P,e[3]=(h*l*s-a*f*s-h*i*c+r*f*c+a*i*p-r*l*p)*P,e[4]=b*P,e[5]=(u*S*s-v*f*s+v*i*p-t*S*p-u*i*x+t*f*x)*P,e[6]=(v*l*s-o*S*s-v*i*c+t*S*c+o*i*x-t*l*x)*P,e[7]=(o*f*s-u*l*s+u*i*c-t*f*c-o*i*p+t*l*p)*P,e[8]=M*P,e[9]=(v*h*s-u*_*s-v*r*p+t*_*p+u*r*x-t*h*x)*P,e[10]=(o*_*s-v*a*s+v*r*c-t*_*c-o*r*x+t*a*x)*P,e[11]=(u*a*s-o*h*s-u*r*c+t*h*c+o*r*p-t*a*p)*P,e[12]=k*P,e[13]=(u*_*i-v*h*i+v*r*f-t*_*f-u*r*S+t*h*S)*P,e[14]=(v*a*i-o*_*i-v*r*l+t*_*l+o*r*S-t*a*S)*P,e[15]=(o*h*i-u*a*i+u*r*l-t*h*l-o*r*f+t*a*f)*P,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,h=a+a,f=s*c,p=s*u,v=s*h,_=o*u,S=o*h,x=a*h,E=l*c,b=l*u,M=l*h,k=r.x,B=r.y,P=r.z;return i[0]=(1-(_+x))*k,i[1]=(p+M)*k,i[2]=(v-b)*k,i[3]=0,i[4]=(p-M)*B,i[5]=(1-(f+x))*B,i[6]=(S+E)*B,i[7]=0,i[8]=(v+b)*P,i[9]=(S-E)*P,i[10]=(1-(f+_))*P,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=gg.set(i[0],i[1],i[2]).length();const o=gg.set(i[4],i[5],i[6]).length(),a=gg.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Wl.copy(this);const c=1/s,u=1/o,h=1/a;return Wl.elements[0]*=c,Wl.elements[1]*=c,Wl.elements[2]*=c,Wl.elements[4]*=u,Wl.elements[5]*=u,Wl.elements[6]*=u,Wl.elements[8]*=h,Wl.elements[9]*=h,Wl.elements[10]*=h,t.setFromRotationMatrix(Wl),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=za,l=!1){const c=this.elements,u=2*s/(t-e),h=2*s/(r-i),f=(t+e)/(t-e),p=(r+i)/(r-i);let v,_;if(l)v=s/(o-s),_=o*s/(o-s);else if(a===za)v=-(o+s)/(o-s),_=-2*o*s/(o-s);else if(a===Tv)v=-o/(o-s),_=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=u,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=h,c[9]=p,c[13]=0,c[2]=0,c[6]=0,c[10]=v,c[14]=_,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=za,l=!1){const c=this.elements,u=2/(t-e),h=2/(r-i),f=-(t+e)/(t-e),p=-(r+i)/(r-i);let v,_;if(l)v=1/(o-s),_=o/(o-s);else if(a===za)v=-2/(o-s),_=-(o+s)/(o-s);else if(a===Tv)v=-1/(o-s),_=-s/(o-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=u,c[4]=0,c[8]=0,c[12]=f,c[1]=0,c[5]=h,c[9]=0,c[13]=p,c[2]=0,c[6]=0,c[10]=v,c[14]=_,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const gg=new re,Wl=new yn,lCe=new re(0,0,0),cCe=new re(1,1,1),dd=new re,TS=new re,Oa=new re,RU=new yn,NU=new wo;class Qa{constructor(e=0,t=0,r=0,i=Qa.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],h=i[2],f=i[6],p=i[10];switch(t){case"XYZ":this._y=Math.asin(pn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-pn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(pn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-pn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(pn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-pn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return RU.makeRotationFromQuaternion(e),this.setFromRotationMatrix(RU,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return NU.setFromEuler(this),this.setFromQuaternion(NU,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Qa.DEFAULT_ORDER="XYZ";class im{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let uCe=0;const DU=new re,vg=new wo,Gu=new yn,CS=new re,jy=new re,hCe=new re,dCe=new wo,kU=new re(1,0,0),OU=new re(0,1,0),LU=new re(0,0,1),FU={type:"added"},fCe={type:"removed"},yg={type:"childadded",child:null},SI={type:"childremoved",child:null};class ar extends Eu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:uCe++}),this.uuid=qa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ar.DEFAULT_UP.clone();const e=new re,t=new Qa,r=new wo,i=new re(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new yn},normalMatrix:{value:new Tn}}),this.matrix=new yn,this.matrixWorld=new yn,this.matrixAutoUpdate=ar.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ar.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new im,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return vg.setFromAxisAngle(e,t),this.quaternion.multiply(vg),this}rotateOnWorldAxis(e,t){return vg.setFromAxisAngle(e,t),this.quaternion.premultiply(vg),this}rotateX(e){return this.rotateOnAxis(kU,e)}rotateY(e){return this.rotateOnAxis(OU,e)}rotateZ(e){return this.rotateOnAxis(LU,e)}translateOnAxis(e,t){return DU.copy(e).applyQuaternion(this.quaternion),this.position.add(DU.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(kU,e)}translateY(e){return this.translateOnAxis(OU,e)}translateZ(e){return this.translateOnAxis(LU,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Gu.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?CS.copy(e):CS.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),jy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Gu.lookAt(jy,CS,this.up):Gu.lookAt(CS,jy,this.up),this.quaternion.setFromRotationMatrix(Gu),i&&(Gu.extractRotation(i.matrixWorld),vg.setFromRotationMatrix(Gu),this.quaternion.premultiply(vg.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(FU),yg.child=e,this.dispatchEvent(yg),yg.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(fCe),SI.child=e,this.dispatchEvent(SI),SI.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Gu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Gu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Gu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(FU),yg.child=e,this.dispatchEvent(yg),yg.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(jy,e,hCe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(jy,dCe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(a=>({...a,boundingBox:a.boundingBox?a.boundingBox.toJSON():void 0,boundingSphere:a.boundingSphere?a.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(a=>({...a})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),f=o(e.skeletons),p=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}ar.DEFAULT_UP=new re(0,1,0);ar.DEFAULT_MATRIX_AUTO_UPDATE=!0;ar.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Gl=new re,$u=new re,EI=new re,Xu=new re,xg=new re,_g=new re,BU=new re,bI=new re,AI=new re,TI=new re,CI=new sr,MI=new sr,II=new sr;class xa{constructor(e=new re,t=new re,r=new re){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Gl.subVectors(e,t),i.cross(Gl);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Gl.subVectors(i,t),$u.subVectors(r,t),EI.subVectors(e,t);const o=Gl.dot(Gl),a=Gl.dot($u),l=Gl.dot(EI),c=$u.dot($u),u=$u.dot(EI),h=o*c-a*a;if(h===0)return s.set(0,0,0),null;const f=1/h,p=(c*l-a*u)*f,v=(o*u-a*l)*f;return s.set(1-p-v,v,p)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Xu)===null?!1:Xu.x>=0&&Xu.y>=0&&Xu.x+Xu.y<=1}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,Xu)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Xu.x),l.addScaledVector(o,Xu.y),l.addScaledVector(a,Xu.z),l)}static getInterpolatedAttribute(e,t,r,i,s,o){return CI.setScalar(0),MI.setScalar(0),II.setScalar(0),CI.fromBufferAttribute(e,t),MI.fromBufferAttribute(e,r),II.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(CI,s.x),o.addScaledVector(MI,s.y),o.addScaledVector(II,s.z),o}static isFrontFacing(e,t,r,i){return Gl.subVectors(r,t),$u.subVectors(e,t),Gl.cross($u).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Gl.subVectors(this.c,this.b),$u.subVectors(this.a,this.b),Gl.cross($u).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return xa.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return xa.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return xa.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return xa.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return xa.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;xg.subVectors(i,r),_g.subVectors(s,r),bI.subVectors(e,r);const l=xg.dot(bI),c=_g.dot(bI);if(l<=0&&c<=0)return t.copy(r);AI.subVectors(e,i);const u=xg.dot(AI),h=_g.dot(AI);if(u>=0&&h<=u)return t.copy(i);const f=l*h-u*c;if(f<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(xg,o);TI.subVectors(e,s);const p=xg.dot(TI),v=_g.dot(TI);if(v>=0&&p<=v)return t.copy(s);const _=p*c-l*v;if(_<=0&&c>=0&&v<=0)return a=c/(c-v),t.copy(r).addScaledVector(_g,a);const S=u*v-p*h;if(S<=0&&h-u>=0&&p-v>=0)return BU.subVectors(s,i),a=(h-u)/(h-u+(p-v)),t.copy(i).addScaledVector(BU,a);const x=1/(S+_+f);return o=_*x,a=f*x,t.copy(r).addScaledVector(xg,o).addScaledVector(_g,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const iJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fd={h:0,s:0,l:0},MS={h:0,s:0,l:0};function PI(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Dt{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=va){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,nr.colorSpaceToWorking(this,t),this}setRGB(e,t,r,i=nr.workingColorSpace){return this.r=e,this.g=t,this.b=r,nr.colorSpaceToWorking(this,i),this}setHSL(e,t,r,i=nr.workingColorSpace){if(e=a4(e,1),t=pn(t,0,1),r=pn(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=PI(o,s,e+1/3),this.g=PI(o,s,e),this.b=PI(o,s,e-1/3)}return nr.colorSpaceToWorking(this,i),this}setStyle(e,t=va){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=va){const r=iJ[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=dh(e.r),this.g=dh(e.g),this.b=dh(e.b),this}copyLinearToSRGB(e){return this.r=V0(e.r),this.g=V0(e.g),this.b=V0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=va){return nr.workingToColorSpace(co.copy(this),e),Math.round(pn(co.r*255,0,255))*65536+Math.round(pn(co.g*255,0,255))*256+Math.round(pn(co.b*255,0,255))}getHexString(e=va){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=nr.workingColorSpace){nr.workingToColorSpace(co.copy(this),t);const r=co.r,i=co.g,s=co.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case r:l=(i-s)/h+(i<s?6:0);break;case i:l=(s-r)/h+2;break;case s:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=nr.workingColorSpace){return nr.workingToColorSpace(co.copy(this),t),e.r=co.r,e.g=co.g,e.b=co.b,e}getStyle(e=va){nr.workingToColorSpace(co.copy(this),e);const t=co.r,r=co.g,i=co.b;return e!==va?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(fd),this.setHSL(fd.h+e,fd.s+t,fd.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(fd),e.getHSL(MS);const r=J1(fd.h,MS.h,t),i=J1(fd.s,MS.s,t),s=J1(fd.l,MS.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const co=new Dt;Dt.NAMES=iJ;let pCe=0;class Ao extends Eu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:pCe++}),this.uuid=qa(),this.name="",this.type="Material",this.blending=nm,this.side=Ah,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=w2,this.blendDst=S2,this.blendEquation=Rd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Dt(0,0,0),this.blendAlpha=0,this.depthFunc=Am,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=$N,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Mp,this.stencilZFail=Mp,this.stencilZPass=Mp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==nm&&(r.blending=this.blending),this.side!==Ah&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==w2&&(r.blendSrc=this.blendSrc),this.blendDst!==S2&&(r.blendDst=this.blendDst),this.blendEquation!==Rd&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Am&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==$N&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Mp&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Mp&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Mp&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Ff extends Ao{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qa,this.combine=G_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const nh=mCe();function mCe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function da(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=pn(n,-65504,65504),nh.floatView[0]=n;const e=nh.uint32View[0],t=e>>23&511;return nh.baseTable[t]+((e&8388607)>>nh.shiftTable[t])}function v1(n){const e=n>>10;return nh.uint32View[0]=nh.mantissaTable[nh.offsetTable[e]+(n&1023)]+nh.exponentTable[e],nh.floatView[0]}class gCe{static toHalfFloat(e){return da(e)}static fromHalfFloat(e){return v1(e)}}const zi=new re,IS=new Ze;let vCe=0;class Pr{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:vCe++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Qx,this.updateRanges=[],this.gpuType=Sa,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)IS.fromBufferAttribute(this,t),IS.applyMatrix3(e),this.setXY(t,IS.x,IS.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)zi.fromBufferAttribute(this,t),zi.applyMatrix3(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)zi.fromBufferAttribute(this,t),zi.applyMatrix4(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)zi.fromBufferAttribute(this,t),zi.applyNormalMatrix(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)zi.fromBufferAttribute(this,t),zi.transformDirection(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Xo(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Mn(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Xo(t,this.array)),t}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Xo(t,this.array)),t}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Xo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Xo(t,this.array)),t}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),i=Mn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),i=Mn(i,this.array),s=Mn(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Qx&&(e.usage=this.usage),e}}class yCe extends Pr{constructor(e,t,r){super(new Int8Array(e),t,r)}}class xCe extends Pr{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class _Ce extends Pr{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class wCe extends Pr{constructor(e,t,r){super(new Int16Array(e),t,r)}}class c4 extends Pr{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class SCe extends Pr{constructor(e,t,r){super(new Int32Array(e),t,r)}}class u4 extends Pr{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class ECe extends Pr{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=v1(this.array[e*this.itemSize]);return this.normalized&&(t=Xo(t,this.array)),t}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize]=da(t),this}getY(e){let t=v1(this.array[e*this.itemSize+1]);return this.normalized&&(t=Xo(t,this.array)),t}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+1]=da(t),this}getZ(e){let t=v1(this.array[e*this.itemSize+2]);return this.normalized&&(t=Xo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+2]=da(t),this}getW(e){let t=v1(this.array[e*this.itemSize+3]);return this.normalized&&(t=Xo(t,this.array)),t}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+3]=da(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array)),this.array[e+0]=da(t),this.array[e+1]=da(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),i=Mn(i,this.array)),this.array[e+0]=da(t),this.array[e+1]=da(r),this.array[e+2]=da(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),i=Mn(i,this.array),s=Mn(s,this.array)),this.array[e+0]=da(t),this.array[e+1]=da(r),this.array[e+2]=da(i),this.array[e+3]=da(s),this}}class Ht extends Pr{constructor(e,t,r){super(new Float32Array(e),t,r)}}let bCe=0;const hl=new yn,RI=new ar,wg=new re,La=new So,Vy=new So,xs=new re;class In extends Eu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:bCe++}),this.uuid=qa(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(tJ(e)?u4:c4)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Tn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return hl.makeRotationFromQuaternion(e),this.applyMatrix4(hl),this}rotateX(e){return hl.makeRotationX(e),this.applyMatrix4(hl),this}rotateY(e){return hl.makeRotationY(e),this.applyMatrix4(hl),this}rotateZ(e){return hl.makeRotationZ(e),this.applyMatrix4(hl),this}translate(e,t,r){return hl.makeTranslation(e,t,r),this.applyMatrix4(hl),this}scale(e,t,r){return hl.makeScale(e,t,r),this.applyMatrix4(hl),this}lookAt(e){return RI.lookAt(e),RI.updateMatrix(),this.applyMatrix4(RI.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(wg).negate(),this.translate(wg.x,wg.y,wg.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];r.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Ht(r,3))}else{const r=Math.min(e.length,t.count);for(let i=0;i<r;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new So);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new re(-1/0,-1/0,-1/0),new re(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];La.setFromBufferAttribute(s),this.morphTargetsRelative?(xs.addVectors(this.boundingBox.min,La.min),this.boundingBox.expandByPoint(xs),xs.addVectors(this.boundingBox.max,La.max),this.boundingBox.expandByPoint(xs)):(this.boundingBox.expandByPoint(La.min),this.boundingBox.expandByPoint(La.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Hs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new re,1/0);return}if(e){const r=this.boundingSphere.center;if(La.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Vy.setFromBufferAttribute(a),this.morphTargetsRelative?(xs.addVectors(La.min,Vy.min),La.expandByPoint(xs),xs.addVectors(La.max,Vy.max),La.expandByPoint(xs)):(La.expandByPoint(Vy.min),La.expandByPoint(Vy.max))}La.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)xs.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(xs));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)xs.fromBufferAttribute(a,c),l&&(wg.fromBufferAttribute(e,c),xs.add(wg)),i=Math.max(i,r.distanceToSquared(xs))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Pr(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let N=0;N<r.count;N++)a[N]=new re,l[N]=new re;const c=new re,u=new re,h=new re,f=new Ze,p=new Ze,v=new Ze,_=new re,S=new re;function x(N,R,I){c.fromBufferAttribute(r,N),u.fromBufferAttribute(r,R),h.fromBufferAttribute(r,I),f.fromBufferAttribute(s,N),p.fromBufferAttribute(s,R),v.fromBufferAttribute(s,I),u.sub(c),h.sub(c),p.sub(f),v.sub(f);const U=1/(p.x*v.y-v.x*p.y);isFinite(U)&&(_.copy(u).multiplyScalar(v.y).addScaledVector(h,-p.y).multiplyScalar(U),S.copy(h).multiplyScalar(p.x).addScaledVector(u,-v.x).multiplyScalar(U),a[N].add(_),a[R].add(_),a[I].add(_),l[N].add(S),l[R].add(S),l[I].add(S))}let E=this.groups;E.length===0&&(E=[{start:0,count:e.count}]);for(let N=0,R=E.length;N<R;++N){const I=E[N],U=I.start,H=I.count;for(let W=U,K=U+H;W<K;W+=3)x(e.getX(W+0),e.getX(W+1),e.getX(W+2))}const b=new re,M=new re,k=new re,B=new re;function P(N){k.fromBufferAttribute(i,N),B.copy(k);const R=a[N];b.copy(R),b.sub(k.multiplyScalar(k.dot(R))).normalize(),M.crossVectors(B,R);const U=M.dot(l[N])<0?-1:1;o.setXYZW(N,b.x,b.y,b.z,U)}for(let N=0,R=E.length;N<R;++N){const I=E[N],U=I.start,H=I.count;for(let W=U,K=U+H;W<K;W+=3)P(e.getX(W+0)),P(e.getX(W+1)),P(e.getX(W+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Pr(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let f=0,p=r.count;f<p;f++)r.setXYZ(f,0,0,0);const i=new re,s=new re,o=new re,a=new re,l=new re,c=new re,u=new re,h=new re;if(e)for(let f=0,p=e.count;f<p;f+=3){const v=e.getX(f+0),_=e.getX(f+1),S=e.getX(f+2);i.fromBufferAttribute(t,v),s.fromBufferAttribute(t,_),o.fromBufferAttribute(t,S),u.subVectors(o,s),h.subVectors(i,s),u.cross(h),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,_),c.fromBufferAttribute(r,S),a.add(u),l.add(u),c.add(u),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(_,l.x,l.y,l.z),r.setXYZ(S,c.x,c.y,c.z)}else for(let f=0,p=t.count;f<p;f+=3)i.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),u.subVectors(o,s),h.subVectors(i,s),u.cross(h),r.setXYZ(f+0,u.x,u.y,u.z),r.setXYZ(f+1,u.x,u.y,u.z),r.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)xs.fromBufferAttribute(e,t),xs.normalize(),e.setXYZ(t,xs.x,xs.y,xs.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,f=new c.constructor(l.length*u);let p=0,v=0;for(let _=0,S=l.length;_<S;_++){a.isInterleavedBufferAttribute?p=l[_]*a.data.stride+a.offset:p=l[_]*u;for(let x=0;x<u;x++)f[v++]=c[p++]}return new Pr(f,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new In,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,h=c.length;u<h;u++){const f=c[u],p=e(f,r);l.push(p)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,f=c.length;h<f;h++){const p=c[h];u.push(p.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let f=0,p=h.length;f<p;f++)u.push(h[f].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const UU=new yn,ip=new jm,PS=new Hs,jU=new re,RS=new re,NS=new re,DS=new re,NI=new re,kS=new re,VU=new re,OS=new re;class Ki extends ar{constructor(e=new In,t=new Ff){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){kS.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],h=s[l];u!==0&&(NI.fromBufferAttribute(h,e),o?kS.addScaledVector(NI,u):kS.addScaledVector(NI.sub(t),u))}t.add(kS)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),PS.copy(r.boundingSphere),PS.applyMatrix4(s),ip.copy(e.ray).recast(e.near),!(PS.containsPoint(ip.origin)===!1&&(ip.intersectSphere(PS,jU)===null||ip.origin.distanceToSquared(jU)>(e.far-e.near)**2))&&(UU.copy(s).invert(),ip.copy(e.ray).applyMatrix4(UU),!(r.boundingBox!==null&&ip.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,ip)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,f=s.groups,p=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,_=f.length;v<_;v++){const S=f[v],x=o[S.materialIndex],E=Math.max(S.start,p.start),b=Math.min(a.count,Math.min(S.start+S.count,p.start+p.count));for(let M=E,k=b;M<k;M+=3){const B=a.getX(M),P=a.getX(M+1),N=a.getX(M+2);i=LS(this,x,e,r,c,u,h,B,P,N),i&&(i.faceIndex=Math.floor(M/3),i.face.materialIndex=S.materialIndex,t.push(i))}}else{const v=Math.max(0,p.start),_=Math.min(a.count,p.start+p.count);for(let S=v,x=_;S<x;S+=3){const E=a.getX(S),b=a.getX(S+1),M=a.getX(S+2);i=LS(this,o,e,r,c,u,h,E,b,M),i&&(i.faceIndex=Math.floor(S/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,_=f.length;v<_;v++){const S=f[v],x=o[S.materialIndex],E=Math.max(S.start,p.start),b=Math.min(l.count,Math.min(S.start+S.count,p.start+p.count));for(let M=E,k=b;M<k;M+=3){const B=M,P=M+1,N=M+2;i=LS(this,x,e,r,c,u,h,B,P,N),i&&(i.faceIndex=Math.floor(M/3),i.face.materialIndex=S.materialIndex,t.push(i))}}else{const v=Math.max(0,p.start),_=Math.min(l.count,p.start+p.count);for(let S=v,x=_;S<x;S+=3){const E=S,b=S+1,M=S+2;i=LS(this,o,e,r,c,u,h,E,b,M),i&&(i.faceIndex=Math.floor(S/3),t.push(i))}}}}function ACe(n,e,t,r,i,s,o,a){let l;if(e.side===Yo?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Ah,a),l===null)return null;OS.copy(a),OS.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(OS);return c<t.near||c>t.far?null:{distance:c,point:OS.clone(),object:n}}function LS(n,e,t,r,i,s,o,a,l,c){n.getVertexPosition(a,RS),n.getVertexPosition(l,NS),n.getVertexPosition(c,DS);const u=ACe(n,e,t,r,RS,NS,DS,VU);if(u){const h=new re;xa.getBarycoord(VU,RS,NS,DS,h),i&&(u.uv=xa.getInterpolatedAttribute(i,a,l,c,h,new Ze)),s&&(u.uv1=xa.getInterpolatedAttribute(s,a,l,c,h,new Ze)),o&&(u.normal=xa.getInterpolatedAttribute(o,a,l,c,h,new re),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new re,materialIndex:0};xa.getNormal(RS,NS,DS,f.normal),u.face=f,u.barycoord=h}return u}class Vm extends In{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],h=[];let f=0,p=0;v("z","y","x",-1,-1,r,t,e,o,s,0),v("z","y","x",1,-1,r,t,-e,o,s,1),v("x","z","y",1,1,e,r,t,i,o,2),v("x","z","y",1,-1,e,r,-t,i,o,3),v("x","y","z",1,-1,e,t,r,i,s,4),v("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Ht(c,3)),this.setAttribute("normal",new Ht(u,3)),this.setAttribute("uv",new Ht(h,2));function v(_,S,x,E,b,M,k,B,P,N,R){const I=M/P,U=k/N,H=M/2,W=k/2,K=B/2,te=P+1,se=N+1;let le=0,X=0;const ce=new re;for(let oe=0;oe<se;oe++){const fe=oe*U-W;for(let De=0;De<te;De++){const We=De*I-H;ce[_]=We*E,ce[S]=fe*b,ce[x]=K,c.push(ce.x,ce.y,ce.z),ce[_]=0,ce[S]=0,ce[x]=B>0?1:-1,u.push(ce.x,ce.y,ce.z),h.push(De/P),h.push(1-oe/N),le+=1}}for(let oe=0;oe<N;oe++)for(let fe=0;fe<P;fe++){const De=f+fe+te*oe,We=f+fe+te*(oe+1),Qe=f+(fe+1)+te*(oe+1),ve=f+(fe+1)+te*oe;l.push(De,We,ve),l.push(We,Qe,ve),X+=6}a.addGroup(p,X,R),p+=X,f+=le}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vm(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Mv(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function jo(n){const e={};for(let t=0;t<n.length;t++){const r=Mv(n[t]);for(const i in r)e[i]=r[i]}return e}function TCe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function sJ(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:nr.workingColorSpace}const oJ={clone:Mv,merge:jo};var CCe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,MCe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class _c extends Ao{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=CCe,this.fragmentShader=MCe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Mv(e.uniforms),this.uniformsGroups=TCe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class X_ extends ar{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new yn,this.projectionMatrix=new yn,this.projectionMatrixInverse=new yn,this.coordinateSystem=za,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const pd=new re,zU=new Ze,HU=new Ze;class Bi extends X_{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Cv*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(rm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Cv*2*Math.atan(Math.tan(rm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){pd.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(pd.x,pd.y).multiplyScalar(-e/pd.z),pd.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(pd.x,pd.y).multiplyScalar(-e/pd.z)}getViewSize(e,t){return this.getViewBounds(e,zU,HU),t.subVectors(HU,zU)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(rm*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Sg=-90,Eg=1;class aJ extends ar{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Bi(Sg,Eg,e,t);i.layers=this.layers,this.add(i);const s=new Bi(Sg,Eg,e,t);s.layers=this.layers,this.add(s);const o=new Bi(Sg,Eg,e,t);o.layers=this.layers,this.add(o);const a=new Bi(Sg,Eg,e,t);a.layers=this.layers,this.add(a);const l=new Bi(Sg,Eg,e,t);l.layers=this.layers,this.add(l);const c=new Bi(Sg,Eg,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===za)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Tv)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,h=e.getRenderTarget(),f=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const _=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,c),r.texture.generateMipmaps=_,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(h,f,p),e.xr.enabled=v,r.texture.needsPMREMUpdate=!0}}class q_ extends ai{constructor(e=[],t=Th,r,i,s,o,a,l,c,u){super(e,t,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class lJ extends _u{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new q_(i),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Vm(5,5,5),s=new _c({name:"CubemapFromEquirect",uniforms:Mv(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Yo,blending:hh});s.uniforms.tEquirect.value=t;const o=new Ki(i,s),a=t.minFilter;return t.minFilter===Jc&&(t.minFilter=us),new aJ(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,r=!0,i=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}class p0 extends ar{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ICe={type:"move"};class nb{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new p0,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new p0,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new re,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new re),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new p0,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new re,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new re),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const _ of e.hand.values()){const S=t.getJointPose(_,r),x=this._getHandJoint(c,_);S!==null&&(x.matrix.fromArray(S.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=S.radius),x.visible=S!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],f=u.position.distanceTo(h.position),p=.02,v=.005;c.inputState.pinching&&f>p+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=p-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(ICe)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new p0;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class WT{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Dt(e),this.density=t}clone(){return new WT(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class GT{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Dt(e),this.near=t,this.far=r}clone(){return new GT(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class h4 extends ar{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Qa,this.environmentIntensity=1,this.environmentRotation=new Qa,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class $T{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Qx,this.updateRanges=[],this.version=0,this.uuid=qa()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Fo=new re;class Cm{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Fo.fromBufferAttribute(this,t),Fo.applyMatrix4(e),this.setXYZ(t,Fo.x,Fo.y,Fo.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Fo.fromBufferAttribute(this,t),Fo.applyNormalMatrix(e),this.setXYZ(t,Fo.x,Fo.y,Fo.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Fo.fromBufferAttribute(this,t),Fo.transformDirection(e),this.setXYZ(t,Fo.x,Fo.y,Fo.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=Xo(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Mn(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Xo(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Xo(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Xo(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Xo(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),i=Mn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),i=Mn(i,this.array),s=Mn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Pr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Cm(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class d4 extends Ao{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Dt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let bg;const zy=new re,Ag=new re,Tg=new re,Cg=new Ze,Hy=new Ze,cJ=new yn,FS=new re,Wy=new re,BS=new re,WU=new Ze,DI=new Ze,GU=new Ze;class uJ extends ar{constructor(e=new d4){if(super(),this.isSprite=!0,this.type="Sprite",bg===void 0){bg=new In;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new $T(t,5);bg.setIndex([0,1,2,0,2,3]),bg.setAttribute("position",new Cm(r,3,0,!1)),bg.setAttribute("uv",new Cm(r,2,3,!1))}this.geometry=bg,this.material=e,this.center=new Ze(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ag.setFromMatrixScale(this.matrixWorld),cJ.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Tg.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ag.multiplyScalar(-Tg.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;US(FS.set(-.5,-.5,0),Tg,o,Ag,i,s),US(Wy.set(.5,-.5,0),Tg,o,Ag,i,s),US(BS.set(.5,.5,0),Tg,o,Ag,i,s),WU.set(0,0),DI.set(1,0),GU.set(1,1);let a=e.ray.intersectTriangle(FS,Wy,BS,!1,zy);if(a===null&&(US(Wy.set(-.5,.5,0),Tg,o,Ag,i,s),DI.set(0,1),a=e.ray.intersectTriangle(FS,BS,Wy,!1,zy),a===null))return;const l=e.ray.origin.distanceTo(zy);l<e.near||l>e.far||t.push({distance:l,point:zy.clone(),uv:xa.getInterpolation(zy,FS,Wy,BS,WU,DI,GU,new Ze),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function US(n,e,t,r,i,s){Cg.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Hy.x=s*Cg.x-i*Cg.y,Hy.y=i*Cg.x+s*Cg.y):Hy.copy(Cg),n.copy(e),n.x+=Hy.x,n.y+=Hy.y,n.applyMatrix4(cJ)}const jS=new re,$U=new re;class hJ extends ar{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let r=0;r<t.length;r++)if(t[r].distance===e){const i=t.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){jS.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(jS);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){jS.setFromMatrixPosition(e.matrixWorld),$U.setFromMatrixPosition(this.matrixWorld);const r=jS.distanceTo($U)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const XU=new re,qU=new sr,YU=new sr,PCe=new re,KU=new yn,VS=new re,kI=new Hs,ZU=new yn,OI=new jm;class dJ extends Ki{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=GN,this.bindMatrix=new yn,this.bindMatrixInverse=new yn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new So),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,VS),this.boundingBox.expandByPoint(VS)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Hs),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,VS),this.boundingSphere.expandByPoint(VS)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),kI.copy(this.boundingSphere),kI.applyMatrix4(i),e.ray.intersectsSphere(kI)!==!1&&(ZU.copy(i).invert(),OI.copy(e.ray).applyMatrix4(ZU),!(this.boundingBox!==null&&OI.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,OI)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new sr,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===GN?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===VQ?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;qU.fromBufferAttribute(i.attributes.skinIndex,e),YU.fromBufferAttribute(i.attributes.skinWeight,e),XU.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=YU.getComponent(s);if(o!==0){const a=qU.getComponent(s);KU.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(PCe.copy(XU).applyMatrix4(KU),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class f4 extends ar{constructor(){super(),this.isBone=!0,this.type="Bone"}}class gu extends ai{constructor(e=null,t=1,r=1,i,s,o,a,l,c=zs,u=zs,h,f){super(null,o,a,l,c,u,i,s,h,f),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const QU=new yn,RCe=new yn;class XT{constructor(e=[],t=[]){this.uuid=qa(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new yn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new yn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:RCe;QU.multiplyMatrices(a,t[s]),QU.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new XT(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new gu(t,e,e,_o,Sa);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new f4),this.bones.push(o),this.boneInverses.push(new yn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Iv extends Pr{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Mg=new yn,JU=new yn,zS=[],ej=new So,NCe=new yn,Gy=new Ki,$y=new Hs;class fJ extends Ki{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Iv(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,NCe)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new So),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Mg),ej.copy(e.boundingBox).applyMatrix4(Mg),this.boundingBox.union(ej)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Hs),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Mg),$y.copy(e.boundingSphere).applyMatrix4(Mg),this.boundingSphere.union($y)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const r=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,o=e*s+1;for(let a=0;a<r.length;a++)r[a]=i[o+a]}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Gy.geometry=this.geometry,Gy.material=this.material,Gy.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),$y.copy(this.boundingSphere),$y.applyMatrix4(r),e.ray.intersectsSphere($y)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Mg),JU.multiplyMatrices(r,Mg),Gy.matrixWorld=JU,Gy.raycast(e,zS);for(let o=0,a=zS.length;o<a;o++){const l=zS[o];l.instanceId=s,l.object=this,t.push(l)}zS.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Iv(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const r=t.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new gu(new Float32Array(i*this.count),i,this.count,BT,Sa));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<r.length;c++)o+=r[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=i*e;s[l]=a,s.set(r,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const LI=new re,DCe=new re,kCe=new Tn;class Ju{constructor(e=new re(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=LI.subVectors(r,t).cross(DCe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(LI),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||kCe.getNormalMatrix(e),i=this.coplanarPoint(LI).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const sp=new Hs,OCe=new Ze(.5,.5),HS=new re;class ny{constructor(e=new Ju,t=new Ju,r=new Ju,i=new Ju,s=new Ju,o=new Ju){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=za,r=!1){const i=this.planes,s=e.elements,o=s[0],a=s[1],l=s[2],c=s[3],u=s[4],h=s[5],f=s[6],p=s[7],v=s[8],_=s[9],S=s[10],x=s[11],E=s[12],b=s[13],M=s[14],k=s[15];if(i[0].setComponents(c-o,p-u,x-v,k-E).normalize(),i[1].setComponents(c+o,p+u,x+v,k+E).normalize(),i[2].setComponents(c+a,p+h,x+_,k+b).normalize(),i[3].setComponents(c-a,p-h,x-_,k-b).normalize(),r)i[4].setComponents(l,f,S,M).normalize(),i[5].setComponents(c-l,p-f,x-S,k-M).normalize();else if(i[4].setComponents(c-l,p-f,x-S,k-M).normalize(),t===za)i[5].setComponents(c+l,p+f,x+S,k+M).normalize();else if(t===Tv)i[5].setComponents(l,f,S,M).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),sp.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),sp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(sp)}intersectsSprite(e){sp.center.set(0,0,0);const t=OCe.distanceTo(e.center);return sp.radius=.7071067811865476+t,sp.applyMatrix4(e.matrixWorld),this.intersectsSphere(sp)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(HS.x=i.normal.x>0?e.max.x:e.min.x,HS.y=i.normal.y>0?e.max.y:e.min.y,HS.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(HS)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Uc=new yn,jc=new ny;class qT{constructor(){this.coordinateSystem=za}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Uc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),jc.setFromProjectionMatrix(Uc,i.coordinateSystem,i.reversedDepth),jc.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Uc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),jc.setFromProjectionMatrix(Uc,i.coordinateSystem,i.reversedDepth),jc.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Uc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),jc.setFromProjectionMatrix(Uc,i.coordinateSystem,i.reversedDepth),jc.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Uc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),jc.setFromProjectionMatrix(Uc,i.coordinateSystem,i.reversedDepth),jc.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Uc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),jc.setFromProjectionMatrix(Uc,i.coordinateSystem,i.reversedDepth),jc.containsPoint(e))return!0}return!1}clone(){return new qT}}function FI(n,e){return n-e}function LCe(n,e){return n.z-e.z}function FCe(n,e){return e.z-n.z}class BCe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,r,i){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=r,a.index=i}reset(){this.list.length=0,this.index=0}}const ca=new yn,UCe=new Dt(1,1,1),tj=new ny,jCe=new qT,WS=new So,op=new Hs,Xy=new re,nj=new re,VCe=new re,BI=new BCe,uo=new Ki,GS=[];function zCe(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}function ap(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++)e[r]=n[r]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class pJ extends Ki{constructor(e,t,r=t*2,i){super(new In,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new gu(t,e,e,_o,Sa);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),r=new gu(t,e,e,$_,Ch);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),r=new gu(t,e,e,_o,Sa);r.colorSpace=nr.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:c}=o,u=new a.constructor(r*l),h=new Pr(u,l,c);t.setAttribute(s,h)}if(e.getIndex()!==null){const s=r>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Pr(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(!e.hasAttribute(r))throw new Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new So);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,ca),this.getBoundingBoxAt(s,WS).applyMatrix4(ca),e.union(WS)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Hs);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,ca),this.getBoundingSphereAt(s,op).applyMatrix4(ca),e.union(op)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(FI),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));const s=this._matricesTexture;ca.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(UCe.toArray(o.image.data,i*4),o.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=r===-1?o.count:r),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(FI),l=this._availableGeometryIds.shift(),s[l]=i):(l=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(l,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(i&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const u in r.attributes){const h=t.getAttribute(u),f=r.getAttribute(u);zCe(h,f,l);const p=h.itemSize;for(let v=h.count,_=c;v<_;v++){const S=l+v;for(let x=0;x<p;x++)f.setComponent(S,x,0)}f.needsUpdate=!0,f.addUpdateRange(l*p,c*p)}if(i){const u=a.indexStart,h=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let f=0;f<o.count;f++)s.setX(u+f,l+o.getX(f));for(let f=o.count,p=h;f<p;f++)s.setX(u+f,l);s.needsUpdate=!0,s.addUpdateRange(u,a.reservedIndexCount)}return a.start=i?a.indexStart:a.vertexStart,a.count=i?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const r=this._instanceInfo;for(let i=0,s=r.length;i<s;i++)r[i].active&&r[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const r=this._geometryInfo,i=r.map((o,a)=>a).sort((o,a)=>r[o].vertexStart-r[a].vertexStart),s=this.geometry;for(let o=0,a=r.length;o<a;o++){const l=i[o],c=r[l];if(c.active!==!1){if(s.index!==null){if(c.indexStart!==t){const{indexStart:u,vertexStart:h,reservedIndexCount:f}=c,p=s.index,v=p.array,_=e-h;for(let S=u;S<u+f;S++)v[S]=v[S]+_;p.array.copyWithin(t,u,u+f),p.addUpdateRange(t,f),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:u,reservedVertexCount:h}=c,f=s.attributes;for(const p in f){const v=f[p],{array:_,itemSize:S}=v;_.copyWithin(e*S,u*S,(u+h)*S),v.addUpdateRange(e*S,h*S)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=s.index?c.indexStart:c.vertexStart,this._nextIndexStart=s.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new So,o=r.index,a=r.attributes.position;for(let l=i.start,c=i.start+i.count;l<c;l++){let u=l;o&&(u=o.getX(u)),s.expandByPoint(Xy.fromBufferAttribute(a,u))}i.boundingBox=s}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new Hs;this.getBoundingBoxAt(e,WS),WS.getCenter(s.center);const o=r.index,a=r.attributes.position;let l=0;for(let c=i.start,u=i.start+i.count;c<u;c++){let h=c;o&&(h=o.getX(h)),Xy.fromBufferAttribute(a,h),l=Math.max(l,s.center.distanceToSquared(Xy))}s.radius=Math.sqrt(l),i.boundingSphere=s}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const r=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),r.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const r=this._geometryInfo[e];return t.vertexStart=r.vertexStart,t.vertexCount=r.vertexCount,t.reservedVertexCount=r.reservedVertexCount,t.indexStart=r.indexStart,t.indexCount=r.indexCount,t.reservedIndexCount=r.reservedIndexCount,t.start=r.start,t.count=r.count,t}setInstanceCount(e){const t=this._availableInstanceIds,r=this._instanceInfo;for(t.sort(FI);t[t.length-1]===r.length-1;)r.pop(),t.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);ap(this._multiDrawCounts,i),ap(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),ap(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),ap(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),ap(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const r=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...r.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new In,this._initializeGeometry(s));const o=this.geometry;s.index&&ap(s.index.array,o.index.array);for(const a in s.attributes)ap(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const r=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,o=this.geometry;uo.material=this.material,uo.geometry.index=o.index,uo.geometry.attributes=o.attributes,uo.geometry.boundingBox===null&&(uo.geometry.boundingBox=new So),uo.geometry.boundingSphere===null&&(uo.geometry.boundingSphere=new Hs);for(let a=0,l=r.length;a<l;a++){if(!r[a].visible||!r[a].active)continue;const c=r[a].geometryIndex,u=i[c];uo.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(a,uo.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,uo.geometry.boundingBox),this.getBoundingSphereAt(c,uo.geometry.boundingSphere),uo.raycast(e,GS);for(let h=0,f=GS.length;h<f;h++){const p=GS[h];p.object=this,p.batchId=a,t.push(p)}GS.length=0}uo.material=null,uo.geometry.index=null,uo.geometry.attributes={},uo.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,h=this._geometryInfo,f=this.perObjectFrustumCulled,p=this._indirectTexture,v=p.image.data,_=r.isArrayCamera?jCe:tj;f&&!r.isArrayCamera&&(ca.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),tj.setFromProjectionMatrix(ca,r.coordinateSystem,r.reversedDepth));let S=0;if(this.sortObjects){ca.copy(this.matrixWorld).invert(),Xy.setFromMatrixPosition(r.matrixWorld).applyMatrix4(ca),nj.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(ca);for(let b=0,M=l.length;b<M;b++)if(l[b].visible&&l[b].active){const k=l[b].geometryIndex;this.getMatrixAt(b,ca),this.getBoundingSphereAt(k,op).applyMatrix4(ca);let B=!1;if(f&&(B=!_.intersectsSphere(op,r)),!B){const P=h[k],N=VCe.subVectors(op.center,Xy).dot(nj);BI.push(P.start,P.count,N,b)}}const x=BI.list,E=this.customSort;E===null?x.sort(s.transparent?FCe:LCe):E.call(this,x,r);for(let b=0,M=x.length;b<M;b++){const k=x[b];c[S]=k.start*a,u[S]=k.count,v[S]=k.index,S++}BI.reset()}else for(let x=0,E=l.length;x<E;x++)if(l[x].visible&&l[x].active){const b=l[x].geometryIndex;let M=!1;if(f&&(this.getMatrixAt(x,ca),this.getBoundingSphereAt(b,op).applyMatrix4(ca),M=!_.intersectsSphere(op,r)),!M){const k=h[b];c[S]=k.start*a,u[S]=k.count,v[S]=x,S++}}p.needsUpdate=!0,this._multiDrawCount=S,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Qo extends Ao{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Dt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const rA=new re,iA=new re,rj=new yn,qy=new jm,$S=new Hs,UI=new re,ij=new re;class Tf extends ar{constructor(e=new In,t=new Qo){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)rA.fromBufferAttribute(t,i-1),iA.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=rA.distanceTo(iA);e.setAttribute("lineDistance",new Ht(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),$S.copy(r.boundingSphere),$S.applyMatrix4(i),$S.radius+=s,e.ray.intersectsSphere($S)===!1)return;rj.copy(i).invert(),qy.copy(e.ray).applyMatrix4(rj);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=r.index,f=r.attributes.position;if(u!==null){const p=Math.max(0,o.start),v=Math.min(u.count,o.start+o.count);for(let _=p,S=v-1;_<S;_+=c){const x=u.getX(_),E=u.getX(_+1),b=XS(this,e,qy,l,x,E,_);b&&t.push(b)}if(this.isLineLoop){const _=u.getX(v-1),S=u.getX(p),x=XS(this,e,qy,l,_,S,v-1);x&&t.push(x)}}else{const p=Math.max(0,o.start),v=Math.min(f.count,o.start+o.count);for(let _=p,S=v-1;_<S;_+=c){const x=XS(this,e,qy,l,_,_+1,_);x&&t.push(x)}if(this.isLineLoop){const _=XS(this,e,qy,l,v-1,p,v-1);_&&t.push(_)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function XS(n,e,t,r,i,s,o){const a=n.geometry.attributes.position;if(rA.fromBufferAttribute(a,i),iA.fromBufferAttribute(a,s),t.distanceSqToSegment(rA,iA,UI,ij)>r)return;UI.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(UI);if(!(c<e.near||c>e.far))return{distance:c,point:ij.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const sj=new re,oj=new re;class bu extends Tf{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)sj.fromBufferAttribute(t,i),oj.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+sj.distanceTo(oj);e.setAttribute("lineDistance",new Ht(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class mJ extends Tf{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class p4 extends Ao{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Dt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const aj=new yn,qN=new jm,qS=new Hs,YS=new re;class gJ extends ar{constructor(e=new In,t=new p4){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),qS.copy(r.boundingSphere),qS.applyMatrix4(i),qS.radius+=s,e.ray.intersectsSphere(qS)===!1)return;aj.copy(i).invert(),qN.copy(e.ray).applyMatrix4(aj);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,h=r.attributes.position;if(c!==null){const f=Math.max(0,o.start),p=Math.min(c.count,o.start+o.count);for(let v=f,_=p;v<_;v++){const S=c.getX(v);YS.fromBufferAttribute(h,S),lj(YS,S,l,i,e,t,this)}}else{const f=Math.max(0,o.start),p=Math.min(h.count,o.start+o.count);for(let v=f,_=p;v<_;v++)YS.fromBufferAttribute(h,v),lj(YS,v,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function lj(n,e,t,r,i,s,o){const a=qN.distanceSqToPoint(n);if(a<t){const l=new re;qN.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class vJ extends ai{constructor(e,t,r,i,s=us,o=us,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const u=this;function h(){u.needsUpdate=!0,u._requestVideoFrameCallbackId=e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(h))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class HCe extends vJ{constructor(e,t,r,i,s,o,a,l){super({},e,t,r,i,s,o,a,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class WCe extends ai{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=zs,this.minFilter=zs,this.generateMipmaps=!1,this.needsUpdate=!0}}class YT extends ai{constructor(e,t,r,i,s,o,a,l,c,u,h,f){super(null,o,a,l,c,u,i,s,h,f),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class GCe extends YT{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Sl,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class $Ce extends YT{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,Th),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class XCe extends ai{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class m4 extends ai{constructor(e,t,r=Ch,i,s,o,a=zs,l=zs,c,u=bv,h=1){if(u!==bv&&u!==Av)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const f={width:e,height:t,depth:h};super(f,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Wd(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class KT extends In{constructor(e=1,t=1,r=4,i=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i,heightSegments:s},t=Math.max(0,t),r=Math.max(1,Math.floor(r)),i=Math.max(3,Math.floor(i)),s=Math.max(1,Math.floor(s));const o=[],a=[],l=[],c=[],u=t/2,h=Math.PI/2*e,f=t,p=2*h+f,v=r*2+s,_=i+1,S=new re,x=new re;for(let E=0;E<=v;E++){let b=0,M=0,k=0,B=0;if(E<=r){const R=E/r,I=R*Math.PI/2;M=-u-e*Math.cos(I),k=e*Math.sin(I),B=-e*Math.cos(I),b=R*h}else if(E<=r+s){const R=(E-r)/s;M=-u+R*t,k=e,B=0,b=h+R*f}else{const R=(E-r-s)/r,I=R*Math.PI/2;M=u+e*Math.sin(I),k=e*Math.cos(I),B=e*Math.sin(I),b=h+f+R*h}const P=Math.max(0,Math.min(1,b/p));let N=0;E===0?N=.5/i:E===v&&(N=-.5/i);for(let R=0;R<=i;R++){const I=R/i,U=I*Math.PI*2,H=Math.sin(U),W=Math.cos(U);x.x=-k*W,x.y=M,x.z=k*H,a.push(x.x,x.y,x.z),S.set(-k*W,B,k*H),S.normalize(),l.push(S.x,S.y,S.z),c.push(I+N,P)}if(E>0){const R=(E-1)*_;for(let I=0;I<i;I++){const U=R+I,H=R+I+1,W=E*_+I,K=E*_+I+1;o.push(U,H,W),o.push(H,K,W)}}}this.setIndex(o),this.setAttribute("position",new Ht(a,3)),this.setAttribute("normal",new Ht(l,3)),this.setAttribute("uv",new Ht(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new KT(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class ZT extends In{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new re,u=new Ze;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,f=3;h<=t;h++,f+=3){const p=r+h/t*i;c.x=e*Math.cos(p),c.y=e*Math.sin(p),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[f]/e+1)/2,u.y=(o[f+1]/e+1)/2,l.push(u.x,u.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new Ht(o,3)),this.setAttribute("normal",new Ht(a,3)),this.setAttribute("uv",new Ht(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ZT(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Y_ extends In{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],h=[],f=[],p=[];let v=0;const _=[],S=r/2;let x=0;E(),o===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(u),this.setAttribute("position",new Ht(h,3)),this.setAttribute("normal",new Ht(f,3)),this.setAttribute("uv",new Ht(p,2));function E(){const M=new re,k=new re;let B=0;const P=(t-e)/r;for(let N=0;N<=s;N++){const R=[],I=N/s,U=I*(t-e)+e;for(let H=0;H<=i;H++){const W=H/i,K=W*l+a,te=Math.sin(K),se=Math.cos(K);k.x=U*te,k.y=-I*r+S,k.z=U*se,h.push(k.x,k.y,k.z),M.set(te,P,se).normalize(),f.push(M.x,M.y,M.z),p.push(W,1-I),R.push(v++)}_.push(R)}for(let N=0;N<i;N++)for(let R=0;R<s;R++){const I=_[R][N],U=_[R+1][N],H=_[R+1][N+1],W=_[R][N+1];(e>0||R!==0)&&(u.push(I,U,W),B+=3),(t>0||R!==s-1)&&(u.push(U,H,W),B+=3)}c.addGroup(x,B,0),x+=B}function b(M){const k=v,B=new Ze,P=new re;let N=0;const R=M===!0?e:t,I=M===!0?1:-1;for(let H=1;H<=i;H++)h.push(0,S*I,0),f.push(0,I,0),p.push(.5,.5),v++;const U=v;for(let H=0;H<=i;H++){const K=H/i*l+a,te=Math.cos(K),se=Math.sin(K);P.x=R*se,P.y=S*I,P.z=R*te,h.push(P.x,P.y,P.z),f.push(0,I,0),B.x=te*.5+.5,B.y=se*.5*I+.5,p.push(B.x,B.y),v++}for(let H=0;H<i;H++){const W=k+H,K=U+H;M===!0?u.push(K,K+1,W):u.push(K+1,K,W),N+=3}c.addGroup(x,N,M===!0?1:2),x+=N}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Y_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class K_ extends Y_{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new K_(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Bf extends In{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new Ht(s,3)),this.setAttribute("normal",new Ht(s.slice(),3)),this.setAttribute("uv",new Ht(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(E){const b=new re,M=new re,k=new re;for(let B=0;B<t.length;B+=3)p(t[B+0],b),p(t[B+1],M),p(t[B+2],k),l(b,M,k,E)}function l(E,b,M,k){const B=k+1,P=[];for(let N=0;N<=B;N++){P[N]=[];const R=E.clone().lerp(M,N/B),I=b.clone().lerp(M,N/B),U=B-N;for(let H=0;H<=U;H++)H===0&&N===B?P[N][H]=R:P[N][H]=R.clone().lerp(I,H/U)}for(let N=0;N<B;N++)for(let R=0;R<2*(B-N)-1;R++){const I=Math.floor(R/2);R%2===0?(f(P[N][I+1]),f(P[N+1][I]),f(P[N][I])):(f(P[N][I+1]),f(P[N+1][I+1]),f(P[N+1][I]))}}function c(E){const b=new re;for(let M=0;M<s.length;M+=3)b.x=s[M+0],b.y=s[M+1],b.z=s[M+2],b.normalize().multiplyScalar(E),s[M+0]=b.x,s[M+1]=b.y,s[M+2]=b.z}function u(){const E=new re;for(let b=0;b<s.length;b+=3){E.x=s[b+0],E.y=s[b+1],E.z=s[b+2];const M=S(E)/2/Math.PI+.5,k=x(E)/Math.PI+.5;o.push(M,1-k)}v(),h()}function h(){for(let E=0;E<o.length;E+=6){const b=o[E+0],M=o[E+2],k=o[E+4],B=Math.max(b,M,k),P=Math.min(b,M,k);B>.9&&P<.1&&(b<.2&&(o[E+0]+=1),M<.2&&(o[E+2]+=1),k<.2&&(o[E+4]+=1))}}function f(E){s.push(E.x,E.y,E.z)}function p(E,b){const M=E*3;b.x=e[M+0],b.y=e[M+1],b.z=e[M+2]}function v(){const E=new re,b=new re,M=new re,k=new re,B=new Ze,P=new Ze,N=new Ze;for(let R=0,I=0;R<s.length;R+=9,I+=6){E.set(s[R+0],s[R+1],s[R+2]),b.set(s[R+3],s[R+4],s[R+5]),M.set(s[R+6],s[R+7],s[R+8]),B.set(o[I+0],o[I+1]),P.set(o[I+2],o[I+3]),N.set(o[I+4],o[I+5]),k.copy(E).add(b).add(M).divideScalar(3);const U=S(k);_(B,I+0,E,U),_(P,I+2,b,U),_(N,I+4,M,U)}}function _(E,b,M,k){k<0&&E.x===1&&(o[b]=E.x-1),M.x===0&&M.z===0&&(o[b]=k/2/Math.PI+.5)}function S(E){return Math.atan2(E.z,-E.x)}function x(E){return Math.atan2(-E.y,Math.sqrt(E.x*E.x+E.z*E.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bf(e.vertices,e.indices,e.radius,e.details)}}class QT extends Bf{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new QT(e.radius,e.detail)}}const KS=new re,ZS=new re,jI=new re,QS=new xa;class yJ extends In{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(rm*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],h=new Array(3),f={},p=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:_,b:S,c:x}=QS;if(_.fromBufferAttribute(a,c[0]),S.fromBufferAttribute(a,c[1]),x.fromBufferAttribute(a,c[2]),QS.getNormal(jI),h[0]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,h[1]=`${Math.round(S.x*i)},${Math.round(S.y*i)},${Math.round(S.z*i)}`,h[2]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let E=0;E<3;E++){const b=(E+1)%3,M=h[E],k=h[b],B=QS[u[E]],P=QS[u[b]],N=`${M}_${k}`,R=`${k}_${M}`;R in f&&f[R]?(jI.dot(f[R].normal)<=s&&(p.push(B.x,B.y,B.z),p.push(P.x,P.y,P.z)),f[R]=null):N in f||(f[N]={index0:c[E],index1:c[b],normal:jI.clone()})}}for(const v in f)if(f[v]){const{index0:_,index1:S}=f[v];KS.fromBufferAttribute(a,_),ZS.fromBufferAttribute(a,S),p.push(KS.x,KS.y,KS.z),p.push(ZS.x,ZS.y,ZS.z)}this.setAttribute("position",new Ht(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Ec{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],f=r[i+1]-u,p=(o-u)/f;return(i+p)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Ze:new re);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t=!1){const r=new re,i=[],s=[],o=[],a=new re,l=new yn;for(let p=0;p<=e;p++){const v=p/e;i[p]=this.getTangentAt(v,new re)}s[0]=new re,o[0]=new re;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),h=Math.abs(i[0].y),f=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),h<=c&&(c=h,r.set(0,1,0)),f<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(i[p-1],i[p]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(pn(i[p-1].dot(i[p]),-1,1));s[p].applyMatrix4(l.makeRotationAxis(a,v))}o[p].crossVectors(i[p],s[p])}if(t===!0){let p=Math.acos(pn(s[0].dot(s[e]),-1,1));p/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(p=-p);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],p*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class JT extends Ec{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new Ze){const r=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=l-this.aX,p=c-this.aY;l=f*u-p*h+this.aX,c=f*h+p*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class xJ extends JT{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function g4(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,h){let f=(o-s)/c-(a-s)/(c+u)+(a-o)/u,p=(a-o)/u-(l-o)/(u+h)+(l-a)/h;f*=u,p*=u,i(o,a,f,p)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const JS=new re,VI=new g4,zI=new g4,HI=new g4;class _J extends Ec{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new re){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(JS.subVectors(i[0],i[1]).add(i[0]),c=JS);const h=i[a%s],f=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(JS.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=JS),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(h),p),_=Math.pow(h.distanceToSquared(f),p),S=Math.pow(f.distanceToSquared(u),p);_<1e-4&&(_=1),v<1e-4&&(v=_),S<1e-4&&(S=_),VI.initNonuniformCatmullRom(c.x,h.x,f.x,u.x,v,_,S),zI.initNonuniformCatmullRom(c.y,h.y,f.y,u.y,v,_,S),HI.initNonuniformCatmullRom(c.z,h.z,f.z,u.z,v,_,S)}else this.curveType==="catmullrom"&&(VI.initCatmullRom(c.x,h.x,f.x,u.x,this.tension),zI.initCatmullRom(c.y,h.y,f.y,u.y,this.tension),HI.initCatmullRom(c.z,h.z,f.z,u.z,this.tension));return r.set(VI.calc(l),zI.calc(l),HI.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new re().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function cj(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function qCe(n,e){const t=1-n;return t*t*e}function YCe(n,e){return 2*(1-n)*n*e}function KCe(n,e){return n*n*e}function ex(n,e,t,r){return qCe(n,e)+YCe(n,t)+KCe(n,r)}function ZCe(n,e){const t=1-n;return t*t*t*e}function QCe(n,e){const t=1-n;return 3*t*t*n*e}function JCe(n,e){return 3*(1-n)*n*n*e}function eMe(n,e){return n*n*n*e}function tx(n,e,t,r,i){return ZCe(n,e)+QCe(n,t)+JCe(n,r)+eMe(n,i)}class v4 extends Ec{constructor(e=new Ze,t=new Ze,r=new Ze,i=new Ze){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Ze){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(tx(e,i.x,s.x,o.x,a.x),tx(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class wJ extends Ec{constructor(e=new re,t=new re,r=new re,i=new re){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new re){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(tx(e,i.x,s.x,o.x,a.x),tx(e,i.y,s.y,o.y,a.y),tx(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class y4 extends Ec{constructor(e=new Ze,t=new Ze){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ze){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ze){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class SJ extends Ec{constructor(e=new re,t=new re){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new re){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new re){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class x4 extends Ec{constructor(e=new Ze,t=new Ze,r=new Ze){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Ze){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(ex(e,i.x,s.x,o.x),ex(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class _4 extends Ec{constructor(e=new re,t=new re,r=new re){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new re){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(ex(e,i.x,s.x,o.x),ex(e,i.y,s.y,o.y),ex(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class w4 extends Ec{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ze){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],h=i[o>i.length-3?i.length-1:o+2];return r.set(cj(a,l.x,c.x,u.x,h.x),cj(a,l.y,c.y,u.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Ze().fromArray(i))}return this}}var sA=Object.freeze({__proto__:null,ArcCurve:xJ,CatmullRomCurve3:_J,CubicBezierCurve:v4,CubicBezierCurve3:wJ,EllipseCurve:JT,LineCurve:y4,LineCurve3:SJ,QuadraticBezierCurve:x4,QuadraticBezierCurve3:_4,SplineCurve:w4});class EJ extends Ec{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new sA[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new sA[i.type]().fromJSON(i))}return this}}class oA extends EJ{constructor(e){super(),this.type="Path",this.currentPoint=new Ze,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new y4(this.currentPoint.clone(),new Ze(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new x4(this.currentPoint.clone(),new Ze(e,t),new Ze(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new v4(this.currentPoint.clone(),new Ze(e,t),new Ze(r,i),new Ze(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new w4(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const c=new JT(e,t,r,i,s,o,a,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class sm extends oA{constructor(e){super(e),this.uuid=qa(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new oA().fromJSON(i))}return this}}function tMe(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=bJ(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c;if(r&&(s=oMe(n,e,s,t)),n.length>80*t){a=1/0,l=1/0;let u=-1/0,h=-1/0;for(let f=t;f<i;f+=t){const p=n[f],v=n[f+1];p<a&&(a=p),v<l&&(l=v),p>u&&(u=p),v>h&&(h=v)}c=Math.max(u-a,h-l),c=c!==0?32767/c:0}return e_(s,o,t,a,l,c,0),o}function bJ(n,e,t,r,i){let s;if(i===vMe(n,e,t,r)>0)for(let o=e;o<t;o+=r)s=uj(o/r|0,n[o],n[o+1],s);else for(let o=t-r;o>=e;o-=r)s=uj(o/r|0,n[o],n[o+1],s);return s&&Pv(s,s.next)&&(n_(s),s=s.next),s}function Mm(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(Pv(t,t.next)||vi(t.prev,t,t.next)===0)){if(n_(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function e_(n,e,t,r,i,s,o){if(!n)return;!o&&s&&hMe(n,r,i,s);let a=n;for(;n.prev!==n.next;){const l=n.prev,c=n.next;if(s?rMe(n,r,i,s):nMe(n)){e.push(l.i,n.i,c.i),n_(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=iMe(Mm(n),e),e_(n,e,t,r,i,s,2)):o===2&&sMe(n,e,t,r,i,s):e_(Mm(n),e,t,r,i,s,1);break}}}function nMe(n){const e=n.prev,t=n,r=n.next;if(vi(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,c=r.y,u=Math.min(i,s,o),h=Math.min(a,l,c),f=Math.max(i,s,o),p=Math.max(a,l,c);let v=r.next;for(;v!==e;){if(v.x>=u&&v.x<=f&&v.y>=h&&v.y<=p&&y1(i,a,s,l,o,c,v.x,v.y)&&vi(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function rMe(n,e,t,r){const i=n.prev,s=n,o=n.next;if(vi(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,h=s.y,f=o.y,p=Math.min(a,l,c),v=Math.min(u,h,f),_=Math.max(a,l,c),S=Math.max(u,h,f),x=YN(p,v,e,t,r),E=YN(_,S,e,t,r);let b=n.prevZ,M=n.nextZ;for(;b&&b.z>=x&&M&&M.z<=E;){if(b.x>=p&&b.x<=_&&b.y>=v&&b.y<=S&&b!==i&&b!==o&&y1(a,u,l,h,c,f,b.x,b.y)&&vi(b.prev,b,b.next)>=0||(b=b.prevZ,M.x>=p&&M.x<=_&&M.y>=v&&M.y<=S&&M!==i&&M!==o&&y1(a,u,l,h,c,f,M.x,M.y)&&vi(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;b&&b.z>=x;){if(b.x>=p&&b.x<=_&&b.y>=v&&b.y<=S&&b!==i&&b!==o&&y1(a,u,l,h,c,f,b.x,b.y)&&vi(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;M&&M.z<=E;){if(M.x>=p&&M.x<=_&&M.y>=v&&M.y<=S&&M!==i&&M!==o&&y1(a,u,l,h,c,f,M.x,M.y)&&vi(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function iMe(n,e){let t=n;do{const r=t.prev,i=t.next.next;!Pv(r,i)&&TJ(r,t,t.next,i)&&t_(r,i)&&t_(i,r)&&(e.push(r.i,t.i,i.i),n_(t),n_(t.next),t=n=i),t=t.next}while(t!==n);return Mm(t)}function sMe(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&pMe(o,a)){let l=CJ(o,a);o=Mm(o,o.next),l=Mm(l,l.next),e_(o,e,t,r,i,s,0),e_(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function oMe(n,e,t,r){const i=[];for(let s=0,o=e.length;s<o;s++){const a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,c=bJ(n,a,l,r,!1);c===c.next&&(c.steiner=!0),i.push(fMe(c))}i.sort(aMe);for(let s=0;s<i.length;s++)t=lMe(i[s],t);return t}function aMe(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const r=(n.next.y-n.y)/(n.next.x-n.x),i=(e.next.y-e.y)/(e.next.x-e.x);t=r-i}return t}function lMe(n,e){const t=cMe(n,e);if(!t)return e;const r=CJ(t,n);return Mm(r,r.next),Mm(t,t.next)}function cMe(n,e){let t=e;const r=n.x,i=n.y;let s=-1/0,o;if(Pv(n,t))return t;do{if(Pv(n,t.next))return t.next;if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const h=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=r&&h>s&&(s=h,o=t.x<t.next.x?t:t.next,h===r))return o}t=t.next}while(t!==e);if(!o)return null;const a=o,l=o.x,c=o.y;let u=1/0;t=o;do{if(r>=t.x&&t.x>=l&&r!==t.x&&AJ(i<c?r:s,i,l,c,i<c?s:r,i,t.x,t.y)){const h=Math.abs(i-t.y)/(r-t.x);t_(t,n)&&(h<u||h===u&&(t.x>o.x||t.x===o.x&&uMe(o,t)))&&(o=t,u=h)}t=t.next}while(t!==a);return o}function uMe(n,e){return vi(n.prev,n,e.prev)<0&&vi(e.next,n,n.next)<0}function hMe(n,e,t,r){let i=n;do i.z===0&&(i.z=YN(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,dMe(i)}function dMe(n){let e,t=1;do{let r=n,i;n=null;let s=null;for(e=0;r;){e++;let o=r,a=0;for(let c=0;c<t&&(a++,o=o.nextZ,!!o);c++);let l=t;for(;a>0||l>0&&o;)a!==0&&(l===0||!o||r.z<=o.z)?(i=r,r=r.nextZ,a--):(i=o,o=o.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;r=o}s.nextZ=null,t*=2}while(e>1);return n}function YN(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function fMe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function AJ(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function y1(n,e,t,r,i,s,o,a){return!(n===o&&e===a)&&AJ(n,e,t,r,i,s,o,a)}function pMe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!mMe(n,e)&&(t_(n,e)&&t_(e,n)&&gMe(n,e)&&(vi(n.prev,n,e.prev)||vi(n,e.prev,e))||Pv(n,e)&&vi(n.prev,n,n.next)>0&&vi(e.prev,e,e.next)>0)}function vi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Pv(n,e){return n.x===e.x&&n.y===e.y}function TJ(n,e,t,r){const i=tE(vi(n,e,t)),s=tE(vi(n,e,r)),o=tE(vi(t,r,n)),a=tE(vi(t,r,e));return!!(i!==s&&o!==a||i===0&&eE(n,t,e)||s===0&&eE(n,r,e)||o===0&&eE(t,n,r)||a===0&&eE(t,e,r))}function eE(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function tE(n){return n>0?1:n<0?-1:0}function mMe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&TJ(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function t_(n,e){return vi(n.prev,n,n.next)<0?vi(n,e,n.next)>=0&&vi(n,n.prev,e)>=0:vi(n,e,n.prev)<0||vi(n,n.next,e)<0}function gMe(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function CJ(n,e){const t=KN(n.i,n.x,n.y),r=KN(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function uj(n,e,t,r){const i=KN(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function n_(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function KN(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function vMe(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class yMe{static triangulate(e,t,r=2){return tMe(e,t,r)}}class cc{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return cc.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];hj(e),dj(r,e);let o=e.length;t.forEach(hj);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,dj(r,t[l]);const a=yMe.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function hj(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function dj(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class eC extends In{constructor(e=new sm([new Ze(.5,.5),new Ze(-.5,.5),new Ze(-.5,-.5),new Ze(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Ht(i,3)),this.setAttribute("uv",new Ht(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:p-.1,_=t.bevelOffset!==void 0?t.bevelOffset:0,S=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,E=t.UVGenerator!==void 0?t.UVGenerator:xMe;let b,M=!1,k,B,P,N;x&&(b=x.getSpacedPoints(u),M=!0,f=!1,k=x.computeFrenetFrames(u,!1),B=new re,P=new re,N=new re),f||(S=0,p=0,v=0,_=0);const R=a.extractPoints(c);let I=R.shape;const U=R.holes;if(!cc.isClockWise(I)){I=I.reverse();for(let Be=0,Re=U.length;Be<Re;Be++){const qe=U[Be];cc.isClockWise(qe)&&(U[Be]=qe.reverse())}}function W(Be){const qe=10000000000000001e-36;let ze=Be[0];for(let J=1;J<=Be.length;J++){const be=J%Be.length,Fe=Be[be],rt=Fe.x-ze.x,pt=Fe.y-ze.y,ee=rt*rt+pt*pt,q=Math.max(Math.abs(Fe.x),Math.abs(Fe.y),Math.abs(ze.x),Math.abs(ze.y)),me=qe*q*q;if(ee<=me){Be.splice(be,1),J--;continue}ze=Fe}}W(I),U.forEach(W);const K=U.length,te=I;for(let Be=0;Be<K;Be++){const Re=U[Be];I=I.concat(Re)}function se(Be,Re,qe){return Re||console.error("THREE.ExtrudeGeometry: vec does not exist"),Be.clone().addScaledVector(Re,qe)}const le=I.length;function X(Be,Re,qe){let ze,J,be;const Fe=Be.x-Re.x,rt=Be.y-Re.y,pt=qe.x-Be.x,ee=qe.y-Be.y,q=Fe*Fe+rt*rt,me=Fe*ee-rt*pt;if(Math.abs(me)>Number.EPSILON){const pe=Math.sqrt(q),Ve=Math.sqrt(pt*pt+ee*ee),Ue=Re.x-rt/pe,Mt=Re.y+Fe/pe,lt=qe.x-ee/Ve,bt=qe.y+pt/Ve,wt=((lt-Ue)*ee-(bt-Mt)*pt)/(Fe*ee-rt*pt);ze=Ue+Fe*wt-Be.x,J=Mt+rt*wt-Be.y;const st=ze*ze+J*J;if(st<=2)return new Ze(ze,J);be=Math.sqrt(st/2)}else{let pe=!1;Fe>Number.EPSILON?pt>Number.EPSILON&&(pe=!0):Fe<-Number.EPSILON?pt<-Number.EPSILON&&(pe=!0):Math.sign(rt)===Math.sign(ee)&&(pe=!0),pe?(ze=-rt,J=Fe,be=Math.sqrt(q)):(ze=Fe,J=rt,be=Math.sqrt(q/2))}return new Ze(ze/be,J/be)}const ce=[];for(let Be=0,Re=te.length,qe=Re-1,ze=Be+1;Be<Re;Be++,qe++,ze++)qe===Re&&(qe=0),ze===Re&&(ze=0),ce[Be]=X(te[Be],te[qe],te[ze]);const oe=[];let fe,De=ce.concat();for(let Be=0,Re=K;Be<Re;Be++){const qe=U[Be];fe=[];for(let ze=0,J=qe.length,be=J-1,Fe=ze+1;ze<J;ze++,be++,Fe++)be===J&&(be=0),Fe===J&&(Fe=0),fe[ze]=X(qe[ze],qe[be],qe[Fe]);oe.push(fe),De=De.concat(fe)}let We;if(S===0)We=cc.triangulateShape(te,U);else{const Be=[],Re=[];for(let qe=0;qe<S;qe++){const ze=qe/S,J=p*Math.cos(ze*Math.PI/2),be=v*Math.sin(ze*Math.PI/2)+_;for(let Fe=0,rt=te.length;Fe<rt;Fe++){const pt=se(te[Fe],ce[Fe],be);Ke(pt.x,pt.y,-J),ze===0&&Be.push(pt)}for(let Fe=0,rt=K;Fe<rt;Fe++){const pt=U[Fe];fe=oe[Fe];const ee=[];for(let q=0,me=pt.length;q<me;q++){const pe=se(pt[q],fe[q],be);Ke(pe.x,pe.y,-J),ze===0&&ee.push(pe)}ze===0&&Re.push(ee)}}We=cc.triangulateShape(Be,Re)}const Qe=We.length,ve=v+_;for(let Be=0;Be<le;Be++){const Re=f?se(I[Be],De[Be],ve):I[Be];M?(P.copy(k.normals[0]).multiplyScalar(Re.x),B.copy(k.binormals[0]).multiplyScalar(Re.y),N.copy(b[0]).add(P).add(B),Ke(N.x,N.y,N.z)):Ke(Re.x,Re.y,0)}for(let Be=1;Be<=u;Be++)for(let Re=0;Re<le;Re++){const qe=f?se(I[Re],De[Re],ve):I[Re];M?(P.copy(k.normals[Be]).multiplyScalar(qe.x),B.copy(k.binormals[Be]).multiplyScalar(qe.y),N.copy(b[Be]).add(P).add(B),Ke(N.x,N.y,N.z)):Ke(qe.x,qe.y,h/u*Be)}for(let Be=S-1;Be>=0;Be--){const Re=Be/S,qe=p*Math.cos(Re*Math.PI/2),ze=v*Math.sin(Re*Math.PI/2)+_;for(let J=0,be=te.length;J<be;J++){const Fe=se(te[J],ce[J],ze);Ke(Fe.x,Fe.y,h+qe)}for(let J=0,be=U.length;J<be;J++){const Fe=U[J];fe=oe[J];for(let rt=0,pt=Fe.length;rt<pt;rt++){const ee=se(Fe[rt],fe[rt],ze);M?Ke(ee.x,ee.y+b[u-1].y,b[u-1].x+qe):Ke(ee.x,ee.y,h+qe)}}}Ie(),we();function Ie(){const Be=i.length/3;if(f){let Re=0,qe=le*Re;for(let ze=0;ze<Qe;ze++){const J=We[ze];Me(J[2]+qe,J[1]+qe,J[0]+qe)}Re=u+S*2,qe=le*Re;for(let ze=0;ze<Qe;ze++){const J=We[ze];Me(J[0]+qe,J[1]+qe,J[2]+qe)}}else{for(let Re=0;Re<Qe;Re++){const qe=We[Re];Me(qe[2],qe[1],qe[0])}for(let Re=0;Re<Qe;Re++){const qe=We[Re];Me(qe[0]+le*u,qe[1]+le*u,qe[2]+le*u)}}r.addGroup(Be,i.length/3-Be,0)}function we(){const Be=i.length/3;let Re=0;tt(te,Re),Re+=te.length;for(let qe=0,ze=U.length;qe<ze;qe++){const J=U[qe];tt(J,Re),Re+=J.length}r.addGroup(Be,i.length/3-Be,1)}function tt(Be,Re){let qe=Be.length;for(;--qe>=0;){const ze=qe;let J=qe-1;J<0&&(J=Be.length-1);for(let be=0,Fe=u+S*2;be<Fe;be++){const rt=le*be,pt=le*(be+1),ee=Re+ze+rt,q=Re+J+rt,me=Re+J+pt,pe=Re+ze+pt;Ye(ee,q,me,pe)}}}function Ke(Be,Re,qe){l.push(Be),l.push(Re),l.push(qe)}function Me(Be,Re,qe){Pe(Be),Pe(Re),Pe(qe);const ze=i.length/3,J=E.generateTopUV(r,i,ze-3,ze-2,ze-1);ne(J[0]),ne(J[1]),ne(J[2])}function Ye(Be,Re,qe,ze){Pe(Be),Pe(Re),Pe(ze),Pe(Re),Pe(qe),Pe(ze);const J=i.length/3,be=E.generateSideWallUV(r,i,J-6,J-3,J-2,J-1);ne(be[0]),ne(be[1]),ne(be[3]),ne(be[1]),ne(be[2]),ne(be[3])}function Pe(Be){i.push(l[Be*3+0]),i.push(l[Be*3+1]),i.push(l[Be*3+2])}function ne(Be){s.push(Be.x),s.push(Be.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return _Me(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new sA[i.type]().fromJSON(i)),new eC(r,e.options)}}const xMe={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new Ze(s,o),new Ze(a,l),new Ze(c,u)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[r*3],u=e[r*3+1],h=e[r*3+2],f=e[i*3],p=e[i*3+1],v=e[i*3+2],_=e[s*3],S=e[s*3+1],x=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Ze(o,1-l),new Ze(c,1-h),new Ze(f,1-v),new Ze(_,1-x)]:[new Ze(a,1-l),new Ze(u,1-h),new Ze(p,1-v),new Ze(S,1-x)]}};function _Me(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class tC extends Bf{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new tC(e.radius,e.detail)}}class nC extends In{constructor(e=[new Ze(0,-.5),new Ze(.5,0),new Ze(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=pn(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,h=new re,f=new Ze,p=new re,v=new re,_=new re;let S=0,x=0;for(let E=0;E<=e.length-1;E++)switch(E){case 0:S=e[E+1].x-e[E].x,x=e[E+1].y-e[E].y,p.x=x*1,p.y=-S,p.z=x*0,_.copy(p),p.normalize(),l.push(p.x,p.y,p.z);break;case e.length-1:l.push(_.x,_.y,_.z);break;default:S=e[E+1].x-e[E].x,x=e[E+1].y-e[E].y,p.x=x*1,p.y=-S,p.z=x*0,v.copy(p),p.x+=_.x,p.y+=_.y,p.z+=_.z,p.normalize(),l.push(p.x,p.y,p.z),_.copy(v)}for(let E=0;E<=t;E++){const b=r+E*u*i,M=Math.sin(b),k=Math.cos(b);for(let B=0;B<=e.length-1;B++){h.x=e[B].x*M,h.y=e[B].y,h.z=e[B].x*k,o.push(h.x,h.y,h.z),f.x=E/t,f.y=B/(e.length-1),a.push(f.x,f.y);const P=l[3*B+0]*M,N=l[3*B+1],R=l[3*B+0]*k;c.push(P,N,R)}}for(let E=0;E<t;E++)for(let b=0;b<e.length-1;b++){const M=b+E*e.length,k=M,B=M+e.length,P=M+e.length+1,N=M+1;s.push(k,B,N),s.push(P,N,B)}this.setIndex(s),this.setAttribute("position",new Ht(o,3)),this.setAttribute("uv",new Ht(a,2)),this.setAttribute("normal",new Ht(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nC(e.points,e.segments,e.phiStart,e.phiLength)}}class Z_ extends Bf{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Z_(e.radius,e.detail)}}class ry extends In{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,h=e/a,f=t/l,p=[],v=[],_=[],S=[];for(let x=0;x<u;x++){const E=x*f-o;for(let b=0;b<c;b++){const M=b*h-s;v.push(M,-E,0),_.push(0,0,1),S.push(b/a),S.push(1-x/l)}}for(let x=0;x<l;x++)for(let E=0;E<a;E++){const b=E+c*x,M=E+c*(x+1),k=E+1+c*(x+1),B=E+1+c*x;p.push(b,M,B),p.push(M,k,B)}this.setIndex(p),this.setAttribute("position",new Ht(v,3)),this.setAttribute("normal",new Ht(_,3)),this.setAttribute("uv",new Ht(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ry(e.width,e.height,e.widthSegments,e.heightSegments)}}class rC extends In{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let h=e;const f=(t-e)/i,p=new re,v=new Ze;for(let _=0;_<=i;_++){for(let S=0;S<=r;S++){const x=s+S/r*o;p.x=h*Math.cos(x),p.y=h*Math.sin(x),l.push(p.x,p.y,p.z),c.push(0,0,1),v.x=(p.x/t+1)/2,v.y=(p.y/t+1)/2,u.push(v.x,v.y)}h+=f}for(let _=0;_<i;_++){const S=_*(r+1);for(let x=0;x<r;x++){const E=x+S,b=E,M=E+r+1,k=E+r+2,B=E+1;a.push(b,M,B),a.push(M,k,B)}}this.setIndex(a),this.setAttribute("position",new Ht(l,3)),this.setAttribute("normal",new Ht(c,3)),this.setAttribute("uv",new Ht(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rC(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class iC extends In{constructor(e=new sm([new Ze(0,.5),new Ze(-.5,-.5),new Ze(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Ht(i,3)),this.setAttribute("normal",new Ht(s,3)),this.setAttribute("uv",new Ht(o,2));function c(u){const h=i.length/3,f=u.extractPoints(t);let p=f.shape;const v=f.holes;cc.isClockWise(p)===!1&&(p=p.reverse());for(let S=0,x=v.length;S<x;S++){const E=v[S];cc.isClockWise(E)===!0&&(v[S]=E.reverse())}const _=cc.triangulateShape(p,v);for(let S=0,x=v.length;S<x;S++){const E=v[S];p=p.concat(E)}for(let S=0,x=p.length;S<x;S++){const E=p[S];i.push(E.x,E.y,0),s.push(0,0,1),o.push(E.x,E.y)}for(let S=0,x=_.length;S<x;S++){const E=_[S],b=E[0]+h,M=E[1]+h,k=E[2]+h;r.push(b,M,k),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return wMe(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new iC(r,e.curveSegments)}}function wMe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class Q_ extends In{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],h=new re,f=new re,p=[],v=[],_=[],S=[];for(let x=0;x<=r;x++){const E=[],b=x/r;let M=0;x===0&&o===0?M=.5/t:x===r&&l===Math.PI&&(M=-.5/t);for(let k=0;k<=t;k++){const B=k/t;h.x=-e*Math.cos(i+B*s)*Math.sin(o+b*a),h.y=e*Math.cos(o+b*a),h.z=e*Math.sin(i+B*s)*Math.sin(o+b*a),v.push(h.x,h.y,h.z),f.copy(h).normalize(),_.push(f.x,f.y,f.z),S.push(B+M,1-b),E.push(c++)}u.push(E)}for(let x=0;x<r;x++)for(let E=0;E<t;E++){const b=u[x][E+1],M=u[x][E],k=u[x+1][E],B=u[x+1][E+1];(x!==0||o>0)&&p.push(b,M,B),(x!==r-1||l<Math.PI)&&p.push(M,k,B)}this.setIndex(p),this.setAttribute("position",new Ht(v,3)),this.setAttribute("normal",new Ht(_,3)),this.setAttribute("uv",new Ht(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Q_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class sC extends Bf{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sC(e.radius,e.detail)}}class oC extends In{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new re,h=new re,f=new re;for(let p=0;p<=r;p++)for(let v=0;v<=i;v++){const _=v/i*s,S=p/r*Math.PI*2;h.x=(e+t*Math.cos(S))*Math.cos(_),h.y=(e+t*Math.cos(S))*Math.sin(_),h.z=t*Math.sin(S),a.push(h.x,h.y,h.z),u.x=e*Math.cos(_),u.y=e*Math.sin(_),f.subVectors(h,u).normalize(),l.push(f.x,f.y,f.z),c.push(v/i),c.push(p/r)}for(let p=1;p<=r;p++)for(let v=1;v<=i;v++){const _=(i+1)*p+v-1,S=(i+1)*(p-1)+v-1,x=(i+1)*(p-1)+v,E=(i+1)*p+v;o.push(_,S,E),o.push(S,x,E)}this.setIndex(o),this.setAttribute("position",new Ht(a,3)),this.setAttribute("normal",new Ht(l,3)),this.setAttribute("uv",new Ht(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new oC(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class aC extends In{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],h=new re,f=new re,p=new re,v=new re,_=new re,S=new re,x=new re;for(let b=0;b<=r;++b){const M=b/r*s*Math.PI*2;E(M,s,o,e,p),E(M+.01,s,o,e,v),S.subVectors(v,p),x.addVectors(v,p),_.crossVectors(S,x),x.crossVectors(_,S),_.normalize(),x.normalize();for(let k=0;k<=i;++k){const B=k/i*Math.PI*2,P=-t*Math.cos(B),N=t*Math.sin(B);h.x=p.x+(P*x.x+N*_.x),h.y=p.y+(P*x.y+N*_.y),h.z=p.z+(P*x.z+N*_.z),l.push(h.x,h.y,h.z),f.subVectors(h,p).normalize(),c.push(f.x,f.y,f.z),u.push(b/r),u.push(k/i)}}for(let b=1;b<=r;b++)for(let M=1;M<=i;M++){const k=(i+1)*(b-1)+(M-1),B=(i+1)*b+(M-1),P=(i+1)*b+M,N=(i+1)*(b-1)+M;a.push(k,B,N),a.push(B,P,N)}this.setIndex(a),this.setAttribute("position",new Ht(l,3)),this.setAttribute("normal",new Ht(c,3)),this.setAttribute("uv",new Ht(u,2));function E(b,M,k,B,P){const N=Math.cos(b),R=Math.sin(b),I=k/M*b,U=Math.cos(I);P.x=B*(2+U)*.5*N,P.y=B*(2+U)*R*.5,P.z=B*Math.sin(I)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new aC(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class lC extends In{constructor(e=new _4(new re(-1,-1,0),new re(-1,1,0),new re(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new re,l=new re,c=new Ze;let u=new re;const h=[],f=[],p=[],v=[];_(),this.setIndex(v),this.setAttribute("position",new Ht(h,3)),this.setAttribute("normal",new Ht(f,3)),this.setAttribute("uv",new Ht(p,2));function _(){for(let b=0;b<t;b++)S(b);S(s===!1?t:0),E(),x()}function S(b){u=e.getPointAt(b/t,u);const M=o.normals[b],k=o.binormals[b];for(let B=0;B<=i;B++){const P=B/i*Math.PI*2,N=Math.sin(P),R=-Math.cos(P);l.x=R*M.x+N*k.x,l.y=R*M.y+N*k.y,l.z=R*M.z+N*k.z,l.normalize(),f.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,h.push(a.x,a.y,a.z)}}function x(){for(let b=1;b<=t;b++)for(let M=1;M<=i;M++){const k=(i+1)*(b-1)+(M-1),B=(i+1)*b+(M-1),P=(i+1)*b+M,N=(i+1)*(b-1)+M;v.push(k,B,N),v.push(B,P,N)}}function E(){for(let b=0;b<=t;b++)for(let M=0;M<=i;M++)c.x=b/t,c.y=M/i,p.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new lC(new sA[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class MJ extends In{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new re,s=new re;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const h=l[c],f=h.start,p=h.count;for(let v=f,_=f+p;v<_;v+=3)for(let S=0;S<3;S++){const x=a.getX(v+S),E=a.getX(v+(S+1)%3);i.fromBufferAttribute(o,x),s.fromBufferAttribute(o,E),fj(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,h=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,h),fj(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ht(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function fj(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var pj=Object.freeze({__proto__:null,BoxGeometry:Vm,CapsuleGeometry:KT,CircleGeometry:ZT,ConeGeometry:K_,CylinderGeometry:Y_,DodecahedronGeometry:QT,EdgesGeometry:yJ,ExtrudeGeometry:eC,IcosahedronGeometry:tC,LatheGeometry:nC,OctahedronGeometry:Z_,PlaneGeometry:ry,PolyhedronGeometry:Bf,RingGeometry:rC,ShapeGeometry:iC,SphereGeometry:Q_,TetrahedronGeometry:sC,TorusGeometry:oC,TorusKnotGeometry:aC,TubeGeometry:lC,WireframeGeometry:MJ});class IJ extends Ao{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Dt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class PJ extends _c{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class S4 extends Ao{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Dt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lf,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qa,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class RJ extends S4{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ze(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return pn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Dt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Dt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Dt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class NJ extends Ao{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Dt(16777215),this.specular=new Dt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lf,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qa,this.combine=G_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class DJ extends Ao{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Dt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lf,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class kJ extends Ao{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lf,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class OJ extends Ao{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lf,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qa,this.combine=G_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class E4 extends Ao{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=GQ,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class b4 extends Ao{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class LJ extends Ao{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Dt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lf,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class FJ extends Qo{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function jp(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function BJ(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function UJ(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function ZN(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function A4(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push(...o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function SMe(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),h=[],f=[];for(let p=0;p<c.times.length;++p){const v=c.times[p]*i;if(!(v<t||v>=r)){h.push(c.times[p]);for(let _=0;_<u;++_)f.push(c.values[p*u+_])}}h.length!==0&&(c.times=jp(h,c.times.constructor),c.values=jp(f,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function EMe(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(x){return x.name===a.name&&x.ValueTypeName===l});if(c===void 0)continue;let u=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=h/3);let f=0;const p=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=p/3);const v=a.times.length-1;let _;if(s<=a.times[0]){const x=u,E=h-u;_=a.values.slice(x,E)}else if(s>=a.times[v]){const x=v*h+u,E=x+h-u;_=a.values.slice(x,E)}else{const x=a.createInterpolant(),E=u,b=h-u;x.evaluate(s),_=x.resultBuffer.slice(E,b)}l==="quaternion"&&new wo().fromArray(_).normalize().conjugate().toArray(_);const S=c.times.length;for(let x=0;x<S;++x){const E=x*p+f;if(l==="quaternion")wo.multiplyQuaternionsFlat(c.values,E,_,0,c.values,E);else{const b=p-f*2;for(let M=0;M<b;++M)c.values[E+M]-=_[M]}}}return n.blendMode=s4,n}class bMe{static convertArray(e,t){return jp(e,t)}static isTypedArray(e){return BJ(e)}static getKeyframeOrder(e){return UJ(e)}static sortedArray(e,t,r){return ZN(e,t,r)}static flattenJSON(e,t,r,i){A4(e,t,r,i)}static subclip(e,t,r,i,s=30){return SMe(e,t,r,i,s)}static makeClipAdditive(e,t=0,r=e,i=30){return EMe(e,t,r,i)}}class J_{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class jJ extends J_{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Bp,endingEnd:Bp}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Up:s=e,a=2*t-r;break;case Kx:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Up:o=e,l=2*r-t;break;case Kx:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const c=(r-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,h=this._offsetNext,f=this._weightPrev,p=this._weightNext,v=(r-t)/(i-t),_=v*v,S=_*v,x=-f*S+2*f*_-f*v,E=(1+f)*S+(-1.5-2*f)*_+(-.5+f)*v+1,b=(-1-p)*S+(1.5+p)*_+.5*v,M=p*S-p*_;for(let k=0;k!==a;++k)s[k]=x*o[u+k]+E*o[c+k]+b*o[l+k]+M*o[h+k];return s}}class T4 extends J_{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-t)/(i-t),h=1-u;for(let f=0;f!==a;++f)s[f]=o[c+f]*h+o[l+f]*u;return s}}class VJ extends J_{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Nl{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=jp(t,this.TimeBufferType),this.values=jp(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:jp(e.times,Array),values:jp(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new VJ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new T4(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new jJ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Yx:t=this.InterpolantFactoryMethodDiscrete;break;case nA:t=this.InterpolantFactoryMethodLinear;break;case tb:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Yx;case this.InterpolantFactoryMethodLinear:return nA;case this.InterpolantFactoryMethodSmooth:return tb}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&BJ(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===tb,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const h=a*r,f=h-r,p=h+r;for(let v=0;v!==r;++v){const _=t[h+v];if(_!==t[f+v]||_!==t[p+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*r,f=o*r;for(let p=0;p!==r;++p)t[f+p]=t[h+p]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Nl.prototype.ValueTypeName="";Nl.prototype.TimeBufferType=Float32Array;Nl.prototype.ValueBufferType=Float32Array;Nl.prototype.DefaultInterpolation=nA;class zm extends Nl{constructor(e,t,r){super(e,t,r)}}zm.prototype.ValueTypeName="bool";zm.prototype.ValueBufferType=Array;zm.prototype.DefaultInterpolation=Yx;zm.prototype.InterpolantFactoryMethodLinear=void 0;zm.prototype.InterpolantFactoryMethodSmooth=void 0;class C4 extends Nl{constructor(e,t,r,i){super(e,t,r,i)}}C4.prototype.ValueTypeName="color";class r_ extends Nl{constructor(e,t,r,i){super(e,t,r,i)}}r_.prototype.ValueTypeName="number";class zJ extends J_{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let c=e*a;for(let u=c+a;c!==u;c+=4)wo.slerpFlat(s,0,o,c-a,o,c,l);return s}}class ew extends Nl{constructor(e,t,r,i){super(e,t,r,i)}InterpolantFactoryMethodLinear(e){return new zJ(this.times,this.values,this.getValueSize(),e)}}ew.prototype.ValueTypeName="quaternion";ew.prototype.InterpolantFactoryMethodSmooth=void 0;class Hm extends Nl{constructor(e,t,r){super(e,t,r)}}Hm.prototype.ValueTypeName="string";Hm.prototype.ValueBufferType=Array;Hm.prototype.DefaultInterpolation=Yx;Hm.prototype.InterpolantFactoryMethodLinear=void 0;Hm.prototype.InterpolantFactoryMethodSmooth=void 0;class i_ extends Nl{constructor(e,t,r,i){super(e,t,r,i)}}i_.prototype.ValueTypeName="vector";class s_{constructor(e="",t=-1,r=[],i=VT){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=qa(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(TMe(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Nl.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=UJ(l);l=ZN(l,1,u),c=ZN(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new r_(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const h=u[1];let f=i[h];f||(i[h]=f=[]),f.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(h,f,p,v,_){if(p.length!==0){const S=[],x=[];A4(p,S,x,v),S.length!==0&&_.push(new h(f,S,x))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const f=c[h].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const p={};let v;for(v=0;v<f.length;v++)if(f[v].morphTargets)for(let _=0;_<f[v].morphTargets.length;_++)p[f[v].morphTargets[_]]=-1;for(const _ in p){const S=[],x=[];for(let E=0;E!==f[v].morphTargets.length;++E){const b=f[v];S.push(b.time),x.push(b.morphTarget===_?1:0)}i.push(new r_(".morphTargetInfluence["+_+"]",S,x))}l=p.length*o}else{const p=".bones["+t[h].name+"]";r(i_,p+".position",f,"pos",i),r(ew,p+".quaternion",f,"rot",i),r(i_,p+".scale",f,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function AMe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return r_;case"vector":case"vector2":case"vector3":case"vector4":return i_;case"color":return C4;case"quaternion":return ew;case"bool":case"boolean":return zm;case"string":return Hm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function TMe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=AMe(n.type);if(n.times===void 0){const t=[],r=[];A4(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const eu={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class M4{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.abortController=new AbortController,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,f=c.length;h<f;h+=2){const p=c[h],v=c[h+1];if(p.global&&(p.lastIndex=0),p.test(u))return v}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const HJ=new M4;class Ma{constructor(e){this.manager=e!==void 0?e:HJ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Ma.DEFAULT_MATERIAL_NAME="__DEFAULT";const qu={};class CMe extends Error{constructor(e,t){super(e),this.response=t}}class Mh extends Ma{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=eu.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(qu[e]!==void 0){qu[e].push({onLoad:t,onProgress:r,onError:i});return}qu[e]=[],qu[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=qu[e],h=c.body.getReader(),f=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),p=f?parseInt(f):0,v=p!==0;let _=0;const S=new ReadableStream({start(x){E();function E(){h.read().then(({done:b,value:M})=>{if(b)x.close();else{_+=M.byteLength;const k=new ProgressEvent("progress",{lengthComputable:v,loaded:_,total:p});for(let B=0,P=u.length;B<P;B++){const N=u[B];N.onProgress&&N.onProgress(k)}x.enqueue(M),E()}},b=>{x.error(b)})}}});return new Response(S)}else throw new CMe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a==="")return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),f=h&&h[1]?h[1].toLowerCase():void 0,p=new TextDecoder(f);return c.arrayBuffer().then(v=>p.decode(v))}}}).then(c=>{eu.add(`file:${e}`,c);const u=qu[e];delete qu[e];for(let h=0,f=u.length;h<f;h++){const p=u[h];p.onLoad&&p.onLoad(c)}}).catch(c=>{const u=qu[e];if(u===void 0)throw this.manager.itemError(e),c;delete qu[e];for(let h=0,f=u.length;h<f;h++){const p=u[h];p.onError&&p.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class MMe extends Ma{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Mh(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=s_.parse(e[r]);t.push(i)}return t}}class IMe extends Ma{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new YT,l=new Mh(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(h){l.load(e[h],function(f){const p=s.parse(f,!0);o[h]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},c+=1,c===6&&(p.mipmapCount===1&&(a.minFilter=us),a.image=o,a.format=p.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let h=0,f=e.length;h<f;++h)u(h);else l.load(e,function(h){const f=s.parse(h,!0);if(f.isCubemap){const p=f.mipmaps.length/f.mipmapCount;for(let v=0;v<p;v++){o[v]={mipmaps:[]};for(let _=0;_<f.mipmapCount;_++)o[v].mipmaps.push(f.mipmaps[v*f.mipmapCount+_]),o[v].format=f.format,o[v].width=f.width,o[v].height=f.height}a.image=o}else a.image.width=f.width,a.image.height=f.height,a.mipmaps=f.mipmaps;f.mipmapCount===1&&(a.minFilter=us),a.format=f.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}const Ig=new WeakMap;class o_ extends Ma{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=eu.get(`image:${e}`);if(o!==void 0){if(o.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0);else{let h=Ig.get(o);h===void 0&&(h=[],Ig.set(o,h)),h.push({onLoad:t,onError:i})}return o}const a=Jx("img");function l(){u(),t&&t(this);const h=Ig.get(this)||[];for(let f=0;f<h.length;f++){const p=h[f];p.onLoad&&p.onLoad(this)}Ig.delete(this),s.manager.itemEnd(e)}function c(h){u(),i&&i(h),eu.remove(`image:${e}`);const f=Ig.get(this)||[];for(let p=0;p<f.length;p++){const v=f[p];v.onError&&v.onError(h)}Ig.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),eu.add(`image:${e}`,a),s.manager.itemStart(e),a.src=e,a}}class PMe extends Ma{constructor(e){super(e)}load(e,t,r,i){const s=new q_;s.colorSpace=va;const o=new o_(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class RMe extends Ma{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new gu,a=new Mh(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Sl,o.wrapT=c.wrapT!==void 0?c.wrapT:Sl,o.magFilter=c.magFilter!==void 0?c.magFilter:us,o.minFilter=c.minFilter!==void 0?c.minFilter:us,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Jc),c.mipmapCount===1&&(o.minFilter=us),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},r,i),o}}class cC extends Ma{constructor(e){super(e)}load(e,t,r,i){const s=new ai,o=new o_(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class Uf extends ar{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Dt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class WJ extends Uf{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ar.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Dt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const WI=new yn,mj=new re,gj=new re;class I4{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ze(512,512),this.mapType=Rl,this.map=null,this.mapPass=null,this.matrix=new yn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ny,this._frameExtents=new Ze(1,1),this._viewportCount=1,this._viewports=[new sr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;mj.setFromMatrixPosition(e.matrixWorld),t.position.copy(mj),gj.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(gj),t.updateMatrixWorld(),WI.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(WI,t.coordinateSystem,t.reversedDepth),t.reversedDepth?r.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(WI)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class NMe extends I4{constructor(){super(new Bi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,r=Cv*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class GJ extends Uf{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ar.DEFAULT_UP),this.updateMatrix(),this.target=new ar,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new NMe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const vj=new yn,Yy=new re,GI=new re;class DMe extends I4{constructor(){super(new Bi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ze(4,2),this._viewportCount=6,this._viewports=[new sr(2,1,1,1),new sr(0,1,1,1),new sr(3,1,1,1),new sr(1,1,1,1),new sr(3,0,1,1),new sr(1,0,1,1)],this._cubeDirections=[new re(1,0,0),new re(-1,0,0),new re(0,0,1),new re(0,0,-1),new re(0,1,0),new re(0,-1,0)],this._cubeUps=[new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,0,1),new re(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Yy.setFromMatrixPosition(e.matrixWorld),r.position.copy(Yy),GI.copy(r.position),GI.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(GI),r.updateMatrixWorld(),i.makeTranslation(-Yy.x,-Yy.y,-Yy.z),vj.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(vj,r.coordinateSystem,r.reversedDepth)}}class $J extends Uf{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new DMe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class lf extends X_{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class kMe extends I4{constructor(){super(new lf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class XJ extends Uf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ar.DEFAULT_UP),this.updateMatrix(),this.target=new ar,this.shadow=new kMe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class qJ extends Uf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class YJ extends Uf{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class KJ{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new re)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class ZJ extends Uf{constructor(e=new KJ,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class uC extends Ma{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new Mh(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Dt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new Dt().setHex(o.value);break;case"v2":i.uniforms[s].value=new Ze().fromArray(o.value);break;case"v3":i.uniforms[s].value=new re().fromArray(o.value);break;case"v4":i.uniforms[s].value=new sr().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Tn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new yn().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Ze().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ze().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return uC.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:IJ,SpriteMaterial:d4,RawShaderMaterial:PJ,ShaderMaterial:_c,PointsMaterial:p4,MeshPhysicalMaterial:RJ,MeshStandardMaterial:S4,MeshPhongMaterial:NJ,MeshToonMaterial:DJ,MeshNormalMaterial:kJ,MeshLambertMaterial:OJ,MeshDepthMaterial:E4,MeshDistanceMaterial:b4,MeshBasicMaterial:Ff,MeshMatcapMaterial:LJ,LineDashedMaterial:FJ,LineBasicMaterial:Qo,Material:Ao};return new t[e]}}class QN{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class QJ extends In{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class JJ extends Ma{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Mh(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(p,v){if(t[v]!==void 0)return t[v];const S=p.interleavedBuffers[v],x=s(p,S.buffer),E=f0(S.type,x),b=new $T(E,S.stride);return b.uuid=S.uuid,t[v]=b,b}function s(p,v){if(r[v]!==void 0)return r[v];const S=p.arrayBuffers[v],x=new Uint32Array(S).buffer;return r[v]=x,x}const o=e.isInstancedBufferGeometry?new QJ:new In,a=e.data.index;if(a!==void 0){const p=f0(a.type,a.array);o.setIndex(new Pr(p,1))}const l=e.data.attributes;for(const p in l){const v=l[p];let _;if(v.isInterleavedBufferAttribute){const S=i(e.data,v.data);_=new Cm(S,v.itemSize,v.offset,v.normalized)}else{const S=f0(v.type,v.array),x=v.isInstancedBufferAttribute?Iv:Pr;_=new x(S,v.itemSize,v.normalized)}v.name!==void 0&&(_.name=v.name),v.usage!==void 0&&_.setUsage(v.usage),o.setAttribute(p,_)}const c=e.data.morphAttributes;if(c)for(const p in c){const v=c[p],_=[];for(let S=0,x=v.length;S<x;S++){const E=v[S];let b;if(E.isInterleavedBufferAttribute){const M=i(e.data,E.data);b=new Cm(M,E.itemSize,E.offset,E.normalized)}else{const M=f0(E.type,E.array);b=new Pr(M,E.itemSize,E.normalized)}E.name!==void 0&&(b.name=E.name),_.push(b)}o.morphAttributes[p]=_}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let p=0,v=h.length;p!==v;++p){const _=h[p];o.addGroup(_.start,_.count,_.materialIndex)}const f=e.data.boundingSphere;return f!==void 0&&(o.boundingSphere=new Hs().fromJSON(f)),e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class OMe extends Ma{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?QN.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Mh(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(h){i!==void 0&&i(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?QN.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Mh(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),t!==void 0){let h=!1;for(const f in o)if(o[f].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new sm().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new XT().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new JJ;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in pj?a=pj[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new uC;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=s_.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:f0(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new M4(t);s=new o_(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const h=e[c],f=h.url;if(Array.isArray(f)){const p=[];for(let v=0,_=f.length;v<_;v++){const S=f[v],x=a(S);x!==null&&(x instanceof HTMLImageElement?p.push(x):p.push(new gu(x.data,x.width,x.height)))}i[h.uuid]=new Wd(p)}else{const p=a(h.url);i[h.uuid]=new Wd(p)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:f0(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new o_(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let h=0,f=c.length;h<f;h++){const p=c[h],v=await s(p);v!==null&&(v instanceof HTMLImageElement?u.push(v):u.push(new gu(v.data,v.width,v.height)))}r[l.uuid]=new Wd(u)}else{const u=await s(l.url);r[l.uuid]=new Wd(u)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new q_,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new gu:u=new ai,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,LMe)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],yj),u.wrapT=r(a.wrap[1],yj)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,xj)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,xj)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,t,r,i,s){let o;function a(f){return t[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),t[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const p=[];for(let v=0,_=f.length;v<_;v++){const S=f[v];r[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",S),p.push(r[S])}return p}return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),r[f]}}function c(f){return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),i[f]}let u,h;switch(e.type){case"Scene":o=new h4,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Dt(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new GT(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new WT(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Bi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new lf(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new qJ(e.color,e.intensity);break;case"DirectionalLight":o=new XJ(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new $J(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new YJ(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new GJ(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new WJ(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new ZJ().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),h=l(e.material),o=new dJ(u,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),h=l(e.material),o=new Ki(u,h);break;case"InstancedMesh":u=a(e.geometry),h=l(e.material);const f=e.count,p=e.instanceMatrix,v=e.instanceColor;o=new fJ(u,h,f),o.instanceMatrix=new Iv(new Float32Array(p.array),16),v!==void 0&&(o.instanceColor=new Iv(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":u=a(e.geometry),h=l(e.material),o=new pJ(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,h),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(_=>{let S=null,x=null;return _.boundingBox!==void 0&&(S=new So().fromJSON(_.boundingBox)),_.boundingSphere!==void 0&&(x=new Hs().fromJSON(_.boundingSphere)),{..._,boundingBox:S,boundingSphere:x}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=c(e.matricesTexture.uuid),o._indirectTexture=c(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new Hs().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(o.boundingBox=new So().fromJSON(e.boundingBox));break;case"LOD":o=new hJ;break;case"Line":o=new Tf(a(e.geometry),l(e.material));break;case"LineLoop":o=new mJ(a(e.geometry),l(e.material));break;case"LineSegments":o=new bu(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new gJ(a(e.geometry),l(e.material));break;case"Sprite":o=new uJ(l(e.material));break;case"Group":o=new p0;break;case"Bone":o=new f4;break;default:o=new ar}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let p=0;p<f.length;p++)o.add(this.parseObject(f[p],t,r,i,s))}if(e.animations!==void 0){const f=e.animations;for(let p=0;p<f.length;p++){const v=f[p];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const f=e.levels;for(let p=0;p<f.length;p++){const v=f[p],_=o.getObjectByProperty("uuid",v.object);_!==void 0&&o.addLevel(_,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const r=t.target,i=e.getObjectByProperty("uuid",r);i!==void 0?t.target=i:t.target=new ar}})}}const LMe={UVMapping:kT,CubeReflectionMapping:Th,CubeRefractionMapping:Af,EquirectangularReflectionMapping:Gx,EquirectangularRefractionMapping:$x,CubeUVReflectionMapping:ey},yj={RepeatWrapping:Xx,ClampToEdgeWrapping:Sl,MirroredRepeatWrapping:qx},xj={NearestFilter:zs,NearestMipmapNearestFilter:ZO,NearestMipmapLinearFilter:d0,LinearFilter:us,LinearMipmapNearestFilter:X1,LinearMipmapLinearFilter:Jc},$I=new WeakMap;class FMe extends Ma{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=eu.get(`image-bitmap:${e}`);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{if($I.has(o)===!0)i&&i($I.get(o)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(c),s.manager.itemEnd(e),c});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,a.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return eu.add(`image-bitmap:${e}`,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),$I.set(l,c),eu.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});eu.add(`image-bitmap:${e}`,l),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let nE;class P4{static getContext(){return nE===void 0&&(nE=new(window.AudioContext||window.webkitAudioContext)),nE}static setContext(e){nE=e}}class BMe extends Ma{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Mh(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);P4.getContext().decodeAudioData(c,function(h){t(h)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const _j=new yn,wj=new yn,lp=new yn;class UMe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Bi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Bi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,lp.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(rm*t.fov*.5)/t.zoom;let a,l;wj.elements[12]=-i,_j.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,lp.elements[0]=2*t.near/(l-a),lp.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(lp),a=-o*t.aspect-s,l=o*t.aspect-s,lp.elements[0]=2*t.near/(l-a),lp.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(lp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(wj),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(_j)}}class eee extends Bi{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class R4{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const cp=new re,XI=new wo,jMe=new re,up=new re,hp=new re;class VMe extends ar{constructor(){super(),this.type="AudioListener",this.context=P4.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new R4}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(cp,XI,jMe),up.set(0,0,-1).applyQuaternion(XI),hp.set(0,1,0).applyQuaternion(XI),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(cp.x,r),t.positionY.linearRampToValueAtTime(cp.y,r),t.positionZ.linearRampToValueAtTime(cp.z,r),t.forwardX.linearRampToValueAtTime(up.x,r),t.forwardY.linearRampToValueAtTime(up.y,r),t.forwardZ.linearRampToValueAtTime(up.z,r),t.upX.linearRampToValueAtTime(hp.x,r),t.upY.linearRampToValueAtTime(hp.y,r),t.upZ.linearRampToValueAtTime(hp.z,r)}else t.setPosition(cp.x,cp.y,cp.z),t.setOrientation(up.x,up.y,up.z,hp.x,hp.y,hp.z)}}class tee extends ar{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const dp=new re,Sj=new wo,zMe=new re,fp=new re;class HMe extends tee{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(dp,Sj,zMe),fp.set(0,0,1).applyQuaternion(Sj);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(dp.x,r),t.positionY.linearRampToValueAtTime(dp.y,r),t.positionZ.linearRampToValueAtTime(dp.z,r),t.orientationX.linearRampToValueAtTime(fp.x,r),t.orientationY.linearRampToValueAtTime(fp.y,r),t.orientationZ.linearRampToValueAtTime(fp.z,r)}else t.setPosition(dp.x,dp.y,dp.z),t.setOrientation(fp.x,fp.y,fp.z)}}class WMe{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class nee{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){wo.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;wo.multiplyQuaternionsFlat(e,o,e,t,e,r),wo.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const N4="\\[\\]\\.:\\/",GMe=new RegExp("["+N4+"]","g"),D4="[^"+N4+"]",$Me="[^"+N4.replace("\\.","")+"]",XMe=/((?:WC+[\/:])*)/.source.replace("WC",D4),qMe=/(WCOD+)?/.source.replace("WCOD",$Me),YMe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",D4),KMe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",D4),ZMe=new RegExp("^"+XMe+qMe+YMe+KMe+"$"),QMe=["material","materials","bones","map"];class JMe{constructor(e,t,r){const i=r||ir.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class ir{constructor(e,t,r){this.path=t,this.parsedPath=r||ir.parseTrackName(t),this.node=ir.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new ir.Composite(e,t,r):new ir(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(GMe,"")}static parseTrackName(e){const t=ZMe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);QMe.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=ir.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ir.Composite=JMe;ir.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ir.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ir.prototype.GetterByBindingType=[ir.prototype._getValue_direct,ir.prototype._getValue_array,ir.prototype._getValue_arrayElement,ir.prototype._getValue_toArray];ir.prototype.SetterByBindingTypeAndVersioning=[[ir.prototype._setValue_direct,ir.prototype._setValue_direct_setNeedsUpdate,ir.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ir.prototype._setValue_array,ir.prototype._setValue_array_setNeedsUpdate,ir.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ir.prototype._setValue_arrayElement,ir.prototype._setValue_arrayElement_setNeedsUpdate,ir.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ir.prototype._setValue_fromArray,ir.prototype._setValue_fromArray_setNeedsUpdate,ir.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class eIe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=qa(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,h=arguments.length;u!==h;++u){const f=arguments[u],p=f.uuid;let v=t[p];if(v===void 0){v=l++,t[p]=v,e.push(f);for(let _=0,S=o;_!==S;++_)s[_].push(new ir(f,r[_],i[_]))}else if(v<c){a=e[v];const _=--c,S=e[_];t[S.uuid]=v,e[v]=S,t[p]=_,e[_]=f;for(let x=0,E=o;x!==E;++x){const b=s[x],M=b[_];let k=b[v];b[v]=M,k===void 0&&(k=new ir(f,r[x],i[x])),b[_]=k}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const h=s++,f=e[h];t[f.uuid]=u,e[u]=f,t[c]=h,e[h]=l;for(let p=0,v=i;p!==v;++p){const _=r[p],S=_[h],x=_[u];_[u]=S,_[h]=x}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,h=t[u];if(h!==void 0)if(delete t[u],h<s){const f=--s,p=e[f],v=--o,_=e[v];t[p.uuid]=h,e[h]=p,t[_.uuid]=f,e[f]=_,e.pop();for(let S=0,x=i;S!==x;++S){const E=r[S],b=E[f],M=E[v];E[h]=b,E[f]=M,E.pop()}}else{const f=--o,p=e[f];f>0&&(t[p.uuid]=h),e[h]=p,e.pop();for(let v=0,_=i;v!==_;++v){const S=r[v];S[h]=S[f],S.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,h=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(h);for(let f=u,p=l.length;f!==p;++f){const v=l[f];h[f]=new ir(v,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class ree{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Bp,endingEnd:Bp};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=HQ,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r=!1){if(e.fadeOut(t),this.fadeIn(t),r===!0){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r=!1){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case s4:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case VT:default:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===WQ;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===zQ){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Up,i.endingEnd=Up):(e?i.endingStart=this.zeroSlopeAtStart?Up:Bp:i.endingStart=Kx,t?i.endingEnd=this.zeroSlopeAtEnd?Up:Bp:i.endingEnd=Kx)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const tIe=new Float32Array(1);class nIe extends Eu{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let h=0;h!==s;++h){const f=i[h],p=f.name;let v=u[p];if(v!==void 0)++v.referenceCount,o[h]=v;else{if(v=o[h],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,p));continue}const _=t&&t._propertyBindings[h].binding.parsedPath;v=new nee(ir.create(r,p,_),f.ValueTypeName,f.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,p),o[h]=v}a[h].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete h[f],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new T4(new Float32Array(2),new Float32Array(2),1,tIe),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?s_.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=VT),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===r)return h;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new ree(this,o,t,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?s_.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=u,t[u]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class rIe extends l4{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=r,this.texture=new HT(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class k4{constructor(e){this.value=e}clone(){return new k4(this.value.clone===void 0?this.value:this.value.clone())}}let iIe=0;class sIe extends Eu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:iIe++}),this.name="",this.usage=Qx,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class oIe extends $T{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class aIe{constructor(e,t,r,i,s,o=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.normalized=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Ej=new yn;class iee{constructor(e,t,r=0,i=1/0){this.ray=new jm(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new im,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Ej.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Ej),this}intersectObject(e,t=!0,r=[]){return JN(e,this,r,t),r.sort(bj),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)JN(e[i],this,r,t);return r.sort(bj),r}}function bj(n,e){return n.distance-e.distance}function JN(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)JN(s[o],e,t,!0)}}class lIe{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=cIe.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function cIe(){this._document.hidden===!1&&this.reset()}class e3{constructor(e=1,t=0,r=0){this.radius=e,this.phi=t,this.theta=r}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=pn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(pn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class uIe{constructor(e=1,t=0,r=0){this.radius=e,this.theta=t,this.y=r}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}class O4{constructor(e,t,r,i){O4.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let r=0;r<4;r++)this.elements[r]=e[r+t];return this}set(e,t,r,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=r,s[3]=i,this}}const Aj=new Ze;class hIe{constructor(e=new Ze(1/0,1/0),t=new Ze(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Aj.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Aj).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Tj=new re,rE=new re,Pg=new re,Rg=new re,qI=new re,dIe=new re,fIe=new re;class pIe{constructor(e=new re,t=new re){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Tj.subVectors(e,this.start),rE.subVectors(this.end,this.start);const r=rE.dot(rE);let s=rE.dot(Tj)/r;return t&&(s=pn(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}distanceSqToLine3(e,t=dIe,r=fIe){const i=10000000000000001e-32;let s,o;const a=this.start,l=e.start,c=this.end,u=e.end;Pg.subVectors(c,a),Rg.subVectors(u,l),qI.subVectors(a,l);const h=Pg.dot(Pg),f=Rg.dot(Rg),p=Rg.dot(qI);if(h<=i&&f<=i)return t.copy(a),r.copy(l),t.sub(r),t.dot(t);if(h<=i)s=0,o=p/f,o=pn(o,0,1);else{const v=Pg.dot(qI);if(f<=i)o=0,s=pn(-v/h,0,1);else{const _=Pg.dot(Rg),S=h*f-_*_;S!==0?s=pn((_*p-v*f)/S,0,1):s=0,o=(_*s+p)/f,o<0?(o=0,s=pn(-v/h,0,1)):o>1&&(o=1,s=pn((_-v)/h,0,1))}}return t.copy(a).add(Pg.multiplyScalar(s)),r.copy(l).add(Rg.multiplyScalar(o)),t.sub(r),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Cj=new re;class mIe extends ar{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new In,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new Ht(i,3));const s=new Qo({fog:!1,toneMapped:!1});this.cone=new bu(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Cj.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Cj),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const md=new re,iE=new yn,YI=new yn;class gIe extends bu{constructor(e){const t=see(e),r=new In,i=[],s=[];for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}r.setAttribute("position",new Ht(i,3)),r.setAttribute("color",new Ht(s,3));const o=new Qo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,o),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const a=new Dt(255),l=new Dt(65280);this.setColors(a,l)}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");YI.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(iE.multiplyMatrices(YI,a.matrixWorld),md.setFromMatrixPosition(iE),i.setXYZ(o,md.x,md.y,md.z),iE.multiplyMatrices(YI,a.parent.matrixWorld),md.setFromMatrixPosition(iE),i.setXYZ(o+1,md.x,md.y,md.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const i=this.geometry.getAttribute("color");for(let s=0;s<i.count;s+=2)i.setXYZ(s,e.r,e.g,e.b),i.setXYZ(s+1,t.r,t.g,t.b);return i.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function see(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...see(n.children[t]));return e}class vIe extends Ki{constructor(e,t,r){const i=new Q_(t,4,2),s=new Ff({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const yIe=new re,Mj=new Dt,Ij=new Dt;class xIe extends ar{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Z_(t);i.rotateY(Math.PI*.5),this.material=new Ff({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Pr(o,3)),this.add(new Ki(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Mj.copy(this.light.color),Ij.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?Mj:Ij;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(yIe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class _Ie extends bu{constructor(e=10,t=10,r=4473924,i=8947848){r=new Dt(r),i=new Dt(i);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let f=0,p=0,v=-a;f<=t;f++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const _=f===s?r:i;_.toArray(c,p),p+=3,_.toArray(c,p),p+=3,_.toArray(c,p),p+=3,_.toArray(c,p),p+=3}const u=new In;u.setAttribute("position",new Ht(l,3)),u.setAttribute("color",new Ht(c,3));const h=new Qo({vertexColors:!0,toneMapped:!1});super(u,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class wIe extends bu{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new Dt(s),o=new Dt(o);const a=[],l=[];if(t>1)for(let h=0;h<t;h++){const f=h/t*(Math.PI*2),p=Math.sin(f)*e,v=Math.cos(f)*e;a.push(0,0,0),a.push(p,0,v);const _=h&1?s:o;l.push(_.r,_.g,_.b),l.push(_.r,_.g,_.b)}for(let h=0;h<r;h++){const f=h&1?s:o,p=e-e/r*h;for(let v=0;v<i;v++){let _=v/i*(Math.PI*2),S=Math.sin(_)*p,x=Math.cos(_)*p;a.push(S,0,x),l.push(f.r,f.g,f.b),_=(v+1)/i*(Math.PI*2),S=Math.sin(_)*p,x=Math.cos(_)*p,a.push(S,0,x),l.push(f.r,f.g,f.b)}}const c=new In;c.setAttribute("position",new Ht(a,3)),c.setAttribute("color",new Ht(l,3));const u=new Qo({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Pj=new re,sE=new re,Rj=new re;class SIe extends ar{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new In;i.setAttribute("position",new Ht([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Qo({fog:!1,toneMapped:!1});this.lightPlane=new Tf(i,s),this.add(this.lightPlane),i=new In,i.setAttribute("position",new Ht([0,0,0,0,0,1],3)),this.targetLine=new Tf(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Pj.setFromMatrixPosition(this.light.matrixWorld),sE.setFromMatrixPosition(this.light.target.matrixWorld),Rj.subVectors(sE,Pj),this.lightPlane.lookAt(sE),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(sE),this.targetLine.scale.z=Rj.length()}}const oE=new re,Ai=new X_;class EIe extends bu{constructor(e){const t=new In,r=new Qo({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,_){l(v),l(_)}function l(v){i.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}t.setAttribute("position",new Ht(i,3)),t.setAttribute("color",new Ht(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Dt(16755200),u=new Dt(16711680),h=new Dt(43775),f=new Dt(16777215),p=new Dt(3355443);this.setColors(c,u,h,f,p)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");return a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;let s,o;if(Ai.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,o=0;else if(this.camera.coordinateSystem===za)s=-1,o=1;else if(this.camera.coordinateSystem===Tv)s=0,o=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Di("c",t,e,Ai,0,0,s),Di("t",t,e,Ai,0,0,o),Di("n1",t,e,Ai,-r,-i,s),Di("n2",t,e,Ai,r,-i,s),Di("n3",t,e,Ai,-r,i,s),Di("n4",t,e,Ai,r,i,s),Di("f1",t,e,Ai,-r,-i,o),Di("f2",t,e,Ai,r,-i,o),Di("f3",t,e,Ai,-r,i,o),Di("f4",t,e,Ai,r,i,o),Di("u1",t,e,Ai,r*.7,i*1.1,s),Di("u2",t,e,Ai,-r*.7,i*1.1,s),Di("u3",t,e,Ai,0,i*2,s),Di("cf1",t,e,Ai,-r,0,o),Di("cf2",t,e,Ai,r,0,o),Di("cf3",t,e,Ai,0,-i,o),Di("cf4",t,e,Ai,0,i,o),Di("cn1",t,e,Ai,-r,0,s),Di("cn2",t,e,Ai,r,0,s),Di("cn3",t,e,Ai,0,-i,s),Di("cn4",t,e,Ai,0,i,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Di(n,e,t,r,i,s,o){oE.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],oE.x,oE.y,oE.z)}}const aE=new So;class bIe extends bu{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new In;s.setIndex(new Pr(r,1)),s.setAttribute("position",new Pr(i,3)),super(s,new Qo({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&aE.setFromObject(this.object),aE.isEmpty())return;const e=aE.min,t=aE.max,r=this.geometry.attributes.position,i=r.array;i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=e.x,i[4]=t.y,i[5]=t.z,i[6]=e.x,i[7]=e.y,i[8]=t.z,i[9]=t.x,i[10]=e.y,i[11]=t.z,i[12]=t.x,i[13]=t.y,i[14]=e.z,i[15]=e.x,i[16]=t.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=t.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class AIe extends bu{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new In;s.setIndex(new Pr(r,1)),s.setAttribute("position",new Ht(i,3)),super(s,new Qo({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class TIe extends Tf{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new In;o.setAttribute("position",new Ht(s,3)),o.computeBoundingSphere(),super(o,new Qo({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new In;l.setAttribute("position",new Ht(a,3)),l.computeBoundingSphere(),this.add(new Ki(l,new Ff({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Nj=new re;let lE,KI;class CIe extends ar{constructor(e=new re(0,0,1),t=new re(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",lE===void 0&&(lE=new In,lE.setAttribute("position",new Ht([0,0,0,0,1,0],3)),KI=new K_(.5,1,5,1),KI.translate(0,-.5,0)),this.position.copy(t),this.line=new Tf(lE,new Qo({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ki(KI,new Ff({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Nj.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Nj,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class MIe extends bu{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new In;i.setAttribute("position",new Ht(t,3)),i.setAttribute("color",new Ht(r,3));const s=new Qo({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new Dt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class IIe{constructor(){this.type="ShapePath",this.color=new Dt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new oA,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(x){const E=[];for(let b=0,M=x.length;b<M;b++){const k=x[b],B=new sm;B.curves=k.curves,E.push(B)}return E}function r(x,E){const b=E.length;let M=!1;for(let k=b-1,B=0;B<b;k=B++){let P=E[k],N=E[B],R=N.x-P.x,I=N.y-P.y;if(Math.abs(I)>Number.EPSILON){if(I<0&&(P=E[B],R=-R,N=E[k],I=-I),x.y<P.y||x.y>N.y)continue;if(x.y===P.y){if(x.x===P.x)return!0}else{const U=I*(x.x-P.x)-R*(x.y-P.y);if(U===0)return!0;if(U<0)continue;M=!M}}else{if(x.y!==P.y)continue;if(N.x<=x.x&&x.x<=P.x||P.x<=x.x&&x.x<=N.x)return!0}}return M}const i=cc.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new sm,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const h=[],f=[];let p=[],v=0,_;f[v]=void 0,p[v]=[];for(let x=0,E=s.length;x<E;x++)a=s[x],_=a.getPoints(),o=i(_),o=e?!o:o,o?(!u&&f[v]&&v++,f[v]={s:new sm,p:_},f[v].s.curves=a.curves,u&&v++,p[v]=[]):p[v].push({h:a,p:_[0]});if(!f[0])return t(s);if(f.length>1){let x=!1,E=0;for(let b=0,M=f.length;b<M;b++)h[b]=[];for(let b=0,M=f.length;b<M;b++){const k=p[b];for(let B=0;B<k.length;B++){const P=k[B];let N=!0;for(let R=0;R<f.length;R++)r(P.p,f[R].p)&&(b!==R&&E++,N?(N=!1,h[R].push(P)):x=!0);N&&h[b].push(P)}}E>0&&x===!1&&(p=h)}let S;for(let x=0,E=f.length;x<E;x++){l=f[x].s,c.push(l),S=p[x];for(let b=0,M=S.length;b<M;b++)l.holes.push(S[b].h)}return c}}class PIe extends Eu{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function RIe(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function NIe(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function DIe(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function t3(n,e,t,r){const i=kIe(r);switch(t){case t4:return n*e;case BT:return n*e/i.components*i.byteLength;case $_:return n*e/i.components*i.byteLength;case r4:return n*e*2/i.components*i.byteLength;case UT:return n*e*2/i.components*i.byteLength;case n4:return n*e*3/i.components*i.byteLength;case _o:return n*e*4/i.components*i.byteLength;case jT:return n*e*4/i.components*i.byteLength;case q1:case Y1:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case K1:case Z1:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case R2:case D2:return Math.max(n,16)*Math.max(e,8)/4;case P2:case N2:return Math.max(n,8)*Math.max(e,8)/2;case k2:case O2:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case L2:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case F2:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case B2:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case U2:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case j2:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case V2:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case z2:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case H2:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case W2:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case G2:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case $2:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case X2:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case q2:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Y2:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case K2:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Q1:case Z2:case Q2:return Math.ceil(n/4)*Math.ceil(e/4)*16;case i4:case J2:return Math.ceil(n/4)*Math.ceil(e/4)*8;case eA:case tA:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function kIe(n){switch(n){case Rl:case QO:return{byteLength:1,components:1};case Sv:case JO:case ty:return{byteLength:2,components:1};case LT:case FT:return{byteLength:2,components:4};case Ch:case OT:case Sa:return{byteLength:4,components:1};case e4:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class OIe{static contain(e,t){return RIe(e,t)}static cover(e,t){return NIe(e,t)}static fill(e){return DIe(e)}static getByteLength(e,t,r,i){return t3(e,t,r,i)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:NT}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=NT);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function oee(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function LIe(n){const e=new WeakMap;function t(a,l){const c=a.array,u=a.usage,h=c.byteLength,f=n.createBuffer();n.bindBuffer(l,f),n.bufferData(l,c,u),a.onUploadCallback();let p;if(c instanceof Float32Array)p=n.FLOAT;else if(typeof Float16Array<"u"&&c instanceof Float16Array)p=n.HALF_FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)p=n.SHORT;else if(c instanceof Uint32Array)p=n.UNSIGNED_INT;else if(c instanceof Int32Array)p=n.INT;else if(c instanceof Int8Array)p=n.BYTE;else if(c instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:p,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:h}}function r(a,l,c){const u=l.array,h=l.updateRanges;if(n.bindBuffer(c,a),h.length===0)n.bufferSubData(c,0,u);else{h.sort((p,v)=>p.start-v.start);let f=0;for(let p=1;p<h.length;p++){const v=h[f],_=h[p];_.start<=v.start+v.count+1?v.count=Math.max(v.count,_.start+_.count-v.start):(++f,h[f]=_)}h.length=f+1;for(let p=0,v=h.length;p<v;p++){const _=h[p];n.bufferSubData(c,_.start*u.BYTES_PER_ELEMENT,u,_.start,_.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,a,l),c.version=a.version}}return{get:i,remove:s,update:o}}var FIe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,BIe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,UIe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,jIe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,VIe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,zIe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,HIe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,WIe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,GIe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,$Ie=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,XIe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,qIe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,YIe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,KIe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,ZIe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,QIe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,JIe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,ePe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,tPe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,nPe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,rPe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,iPe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,sPe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,oPe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,aPe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,lPe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,cPe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,uPe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,hPe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,dPe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,fPe="gl_FragColor = linearToOutputTexel( gl_FragColor );",pPe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,mPe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,gPe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,vPe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,yPe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,xPe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,_Pe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,wPe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,SPe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,EPe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,bPe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,APe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,TPe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,CPe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,MPe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,IPe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,PPe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,RPe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,NPe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,DPe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,kPe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,OPe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,LPe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,FPe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,BPe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,UPe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,jPe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,VPe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,zPe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,HPe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,WPe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,GPe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,$Pe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,XPe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,qPe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,YPe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,KPe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,ZPe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,QPe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,JPe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,eRe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,tRe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,nRe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,rRe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,iRe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,sRe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,oRe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,aRe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,lRe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,cRe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,uRe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,hRe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,dRe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,fRe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,pRe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,mRe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,gRe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,vRe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,yRe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSEDEPTHBUF
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSEDEPTHBUF
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare , distribution.x );
		#endif
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,xRe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,_Re=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,wRe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,SRe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,ERe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,bRe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,ARe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,TRe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,CRe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,MRe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,IRe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,PRe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,RRe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,NRe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,DRe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,kRe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,ORe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const LRe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,FRe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,BRe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,URe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,jRe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,VRe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,zRe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,HRe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSEDEPTHBUF
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,WRe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,GRe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,$Re=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,XRe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,qRe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,YRe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,KRe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,ZRe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QRe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JRe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eNe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,tNe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nNe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,rNe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,iNe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sNe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oNe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,aNe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lNe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cNe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uNe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,hNe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,dNe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fNe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,pNe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,mNe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Nn={alphahash_fragment:FIe,alphahash_pars_fragment:BIe,alphamap_fragment:UIe,alphamap_pars_fragment:jIe,alphatest_fragment:VIe,alphatest_pars_fragment:zIe,aomap_fragment:HIe,aomap_pars_fragment:WIe,batching_pars_vertex:GIe,batching_vertex:$Ie,begin_vertex:XIe,beginnormal_vertex:qIe,bsdfs:YIe,iridescence_fragment:KIe,bumpmap_pars_fragment:ZIe,clipping_planes_fragment:QIe,clipping_planes_pars_fragment:JIe,clipping_planes_pars_vertex:ePe,clipping_planes_vertex:tPe,color_fragment:nPe,color_pars_fragment:rPe,color_pars_vertex:iPe,color_vertex:sPe,common:oPe,cube_uv_reflection_fragment:aPe,defaultnormal_vertex:lPe,displacementmap_pars_vertex:cPe,displacementmap_vertex:uPe,emissivemap_fragment:hPe,emissivemap_pars_fragment:dPe,colorspace_fragment:fPe,colorspace_pars_fragment:pPe,envmap_fragment:mPe,envmap_common_pars_fragment:gPe,envmap_pars_fragment:vPe,envmap_pars_vertex:yPe,envmap_physical_pars_fragment:IPe,envmap_vertex:xPe,fog_vertex:_Pe,fog_pars_vertex:wPe,fog_fragment:SPe,fog_pars_fragment:EPe,gradientmap_pars_fragment:bPe,lightmap_pars_fragment:APe,lights_lambert_fragment:TPe,lights_lambert_pars_fragment:CPe,lights_pars_begin:MPe,lights_toon_fragment:PPe,lights_toon_pars_fragment:RPe,lights_phong_fragment:NPe,lights_phong_pars_fragment:DPe,lights_physical_fragment:kPe,lights_physical_pars_fragment:OPe,lights_fragment_begin:LPe,lights_fragment_maps:FPe,lights_fragment_end:BPe,logdepthbuf_fragment:UPe,logdepthbuf_pars_fragment:jPe,logdepthbuf_pars_vertex:VPe,logdepthbuf_vertex:zPe,map_fragment:HPe,map_pars_fragment:WPe,map_particle_fragment:GPe,map_particle_pars_fragment:$Pe,metalnessmap_fragment:XPe,metalnessmap_pars_fragment:qPe,morphinstance_vertex:YPe,morphcolor_vertex:KPe,morphnormal_vertex:ZPe,morphtarget_pars_vertex:QPe,morphtarget_vertex:JPe,normal_fragment_begin:eRe,normal_fragment_maps:tRe,normal_pars_fragment:nRe,normal_pars_vertex:rRe,normal_vertex:iRe,normalmap_pars_fragment:sRe,clearcoat_normal_fragment_begin:oRe,clearcoat_normal_fragment_maps:aRe,clearcoat_pars_fragment:lRe,iridescence_pars_fragment:cRe,opaque_fragment:uRe,packing:hRe,premultiplied_alpha_fragment:dRe,project_vertex:fRe,dithering_fragment:pRe,dithering_pars_fragment:mRe,roughnessmap_fragment:gRe,roughnessmap_pars_fragment:vRe,shadowmap_pars_fragment:yRe,shadowmap_pars_vertex:xRe,shadowmap_vertex:_Re,shadowmask_pars_fragment:wRe,skinbase_vertex:SRe,skinning_pars_vertex:ERe,skinning_vertex:bRe,skinnormal_vertex:ARe,specularmap_fragment:TRe,specularmap_pars_fragment:CRe,tonemapping_fragment:MRe,tonemapping_pars_fragment:IRe,transmission_fragment:PRe,transmission_pars_fragment:RRe,uv_pars_fragment:NRe,uv_pars_vertex:DRe,uv_vertex:kRe,worldpos_vertex:ORe,background_vert:LRe,background_frag:FRe,backgroundCube_vert:BRe,backgroundCube_frag:URe,cube_vert:jRe,cube_frag:VRe,depth_vert:zRe,depth_frag:HRe,distanceRGBA_vert:WRe,distanceRGBA_frag:GRe,equirect_vert:$Re,equirect_frag:XRe,linedashed_vert:qRe,linedashed_frag:YRe,meshbasic_vert:KRe,meshbasic_frag:ZRe,meshlambert_vert:QRe,meshlambert_frag:JRe,meshmatcap_vert:eNe,meshmatcap_frag:tNe,meshnormal_vert:nNe,meshnormal_frag:rNe,meshphong_vert:iNe,meshphong_frag:sNe,meshphysical_vert:oNe,meshphysical_frag:aNe,meshtoon_vert:lNe,meshtoon_frag:cNe,points_vert:uNe,points_frag:hNe,shadow_vert:dNe,shadow_frag:fNe,sprite_vert:pNe,sprite_frag:mNe},St={common:{diffuse:{value:new Dt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Tn},alphaMap:{value:null},alphaMapTransform:{value:new Tn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Tn}},envmap:{envMap:{value:null},envMapRotation:{value:new Tn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Tn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Tn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Tn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Tn},normalScale:{value:new Ze(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Tn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Tn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Tn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Tn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Dt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Dt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Tn},alphaTest:{value:0},uvTransform:{value:new Tn}},sprite:{diffuse:{value:new Dt(16777215)},opacity:{value:1},center:{value:new Ze(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Tn},alphaMap:{value:null},alphaMapTransform:{value:new Tn},alphaTest:{value:0}}},rc={basic:{uniforms:jo([St.common,St.specularmap,St.envmap,St.aomap,St.lightmap,St.fog]),vertexShader:Nn.meshbasic_vert,fragmentShader:Nn.meshbasic_frag},lambert:{uniforms:jo([St.common,St.specularmap,St.envmap,St.aomap,St.lightmap,St.emissivemap,St.bumpmap,St.normalmap,St.displacementmap,St.fog,St.lights,{emissive:{value:new Dt(0)}}]),vertexShader:Nn.meshlambert_vert,fragmentShader:Nn.meshlambert_frag},phong:{uniforms:jo([St.common,St.specularmap,St.envmap,St.aomap,St.lightmap,St.emissivemap,St.bumpmap,St.normalmap,St.displacementmap,St.fog,St.lights,{emissive:{value:new Dt(0)},specular:{value:new Dt(1118481)},shininess:{value:30}}]),vertexShader:Nn.meshphong_vert,fragmentShader:Nn.meshphong_frag},standard:{uniforms:jo([St.common,St.envmap,St.aomap,St.lightmap,St.emissivemap,St.bumpmap,St.normalmap,St.displacementmap,St.roughnessmap,St.metalnessmap,St.fog,St.lights,{emissive:{value:new Dt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Nn.meshphysical_vert,fragmentShader:Nn.meshphysical_frag},toon:{uniforms:jo([St.common,St.aomap,St.lightmap,St.emissivemap,St.bumpmap,St.normalmap,St.displacementmap,St.gradientmap,St.fog,St.lights,{emissive:{value:new Dt(0)}}]),vertexShader:Nn.meshtoon_vert,fragmentShader:Nn.meshtoon_frag},matcap:{uniforms:jo([St.common,St.bumpmap,St.normalmap,St.displacementmap,St.fog,{matcap:{value:null}}]),vertexShader:Nn.meshmatcap_vert,fragmentShader:Nn.meshmatcap_frag},points:{uniforms:jo([St.points,St.fog]),vertexShader:Nn.points_vert,fragmentShader:Nn.points_frag},dashed:{uniforms:jo([St.common,St.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Nn.linedashed_vert,fragmentShader:Nn.linedashed_frag},depth:{uniforms:jo([St.common,St.displacementmap]),vertexShader:Nn.depth_vert,fragmentShader:Nn.depth_frag},normal:{uniforms:jo([St.common,St.bumpmap,St.normalmap,St.displacementmap,{opacity:{value:1}}]),vertexShader:Nn.meshnormal_vert,fragmentShader:Nn.meshnormal_frag},sprite:{uniforms:jo([St.sprite,St.fog]),vertexShader:Nn.sprite_vert,fragmentShader:Nn.sprite_frag},background:{uniforms:{uvTransform:{value:new Tn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Nn.background_vert,fragmentShader:Nn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Tn}},vertexShader:Nn.backgroundCube_vert,fragmentShader:Nn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Nn.cube_vert,fragmentShader:Nn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Nn.equirect_vert,fragmentShader:Nn.equirect_frag},distanceRGBA:{uniforms:jo([St.common,St.displacementmap,{referencePosition:{value:new re},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Nn.distanceRGBA_vert,fragmentShader:Nn.distanceRGBA_frag},shadow:{uniforms:jo([St.lights,St.fog,{color:{value:new Dt(0)},opacity:{value:1}}]),vertexShader:Nn.shadow_vert,fragmentShader:Nn.shadow_frag}};rc.physical={uniforms:jo([rc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Tn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Tn},clearcoatNormalScale:{value:new Ze(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Tn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Tn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Tn},sheen:{value:0},sheenColor:{value:new Dt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Tn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Tn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Tn},transmissionSamplerSize:{value:new Ze},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Tn},attenuationDistance:{value:0},attenuationColor:{value:new Dt(0)},specularColor:{value:new Dt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Tn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Tn},anisotropyVector:{value:new Ze},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Tn}}]),vertexShader:Nn.meshphysical_vert,fragmentShader:Nn.meshphysical_frag};const cE={r:0,b:0,g:0},pp=new Qa,gNe=new yn;function vNe(n,e,t,r,i,s,o){const a=new Dt(0);let l=s===!0?0:1,c,u,h=null,f=0,p=null;function v(b){let M=b.isScene===!0?b.background:null;return M&&M.isTexture&&(M=(b.backgroundBlurriness>0?t:e).get(M)),M}function _(b){let M=!1;const k=v(b);k===null?x(a,l):k&&k.isColor&&(x(k,1),M=!0);const B=n.xr.getEnvironmentBlendMode();B==="additive"?r.buffers.color.setClear(0,0,0,1,o):B==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||M)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function S(b,M){const k=v(M);k&&(k.isCubeTexture||k.mapping===ey)?(u===void 0&&(u=new Ki(new Vm(1,1,1),new _c({name:"BackgroundCubeMaterial",uniforms:Mv(rc.backgroundCube.uniforms),vertexShader:rc.backgroundCube.vertexShader,fragmentShader:rc.backgroundCube.fragmentShader,side:Yo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(B,P,N){this.matrixWorld.copyPosition(N.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),pp.copy(M.backgroundRotation),pp.x*=-1,pp.y*=-1,pp.z*=-1,k.isCubeTexture&&k.isRenderTargetTexture===!1&&(pp.y*=-1,pp.z*=-1),u.material.uniforms.envMap.value=k,u.material.uniforms.flipEnvMap.value=k.isCubeTexture&&k.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=M.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(gNe.makeRotationFromEuler(pp)),u.material.toneMapped=nr.getTransfer(k.colorSpace)!==Ar,(h!==k||f!==k.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,h=k,f=k.version,p=n.toneMapping),u.layers.enableAll(),b.unshift(u,u.geometry,u.material,0,0,null)):k&&k.isTexture&&(c===void 0&&(c=new Ki(new ry(2,2),new _c({name:"BackgroundMaterial",uniforms:Mv(rc.background.uniforms),vertexShader:rc.background.vertexShader,fragmentShader:rc.background.fragmentShader,side:Ah,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=k,c.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,c.material.toneMapped=nr.getTransfer(k.colorSpace)!==Ar,k.matrixAutoUpdate===!0&&k.updateMatrix(),c.material.uniforms.uvTransform.value.copy(k.matrix),(h!==k||f!==k.version||p!==n.toneMapping)&&(c.material.needsUpdate=!0,h=k,f=k.version,p=n.toneMapping),c.layers.enableAll(),b.unshift(c,c.geometry,c.material,0,0,null))}function x(b,M){b.getRGB(cE,sJ(n)),r.buffers.color.setClear(cE.r,cE.g,cE.b,M,o)}function E(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return a},setClearColor:function(b,M=1){a.set(b),l=M,x(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(b){l=b,x(a,l)},render:_,addToRenderList:S,dispose:E}}function yNe(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=f(null);let s=i,o=!1;function a(I,U,H,W,K){let te=!1;const se=h(W,H,U);s!==se&&(s=se,c(s.object)),te=p(I,W,H,K),te&&v(I,W,H,K),K!==null&&e.update(K,n.ELEMENT_ARRAY_BUFFER),(te||o)&&(o=!1,M(I,U,H,W),K!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(K).buffer))}function l(){return n.createVertexArray()}function c(I){return n.bindVertexArray(I)}function u(I){return n.deleteVertexArray(I)}function h(I,U,H){const W=H.wireframe===!0;let K=r[I.id];K===void 0&&(K={},r[I.id]=K);let te=K[U.id];te===void 0&&(te={},K[U.id]=te);let se=te[W];return se===void 0&&(se=f(l()),te[W]=se),se}function f(I){const U=[],H=[],W=[];for(let K=0;K<t;K++)U[K]=0,H[K]=0,W[K]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:H,attributeDivisors:W,object:I,attributes:{},index:null}}function p(I,U,H,W){const K=s.attributes,te=U.attributes;let se=0;const le=H.getAttributes();for(const X in le)if(le[X].location>=0){const oe=K[X];let fe=te[X];if(fe===void 0&&(X==="instanceMatrix"&&I.instanceMatrix&&(fe=I.instanceMatrix),X==="instanceColor"&&I.instanceColor&&(fe=I.instanceColor)),oe===void 0||oe.attribute!==fe||fe&&oe.data!==fe.data)return!0;se++}return s.attributesNum!==se||s.index!==W}function v(I,U,H,W){const K={},te=U.attributes;let se=0;const le=H.getAttributes();for(const X in le)if(le[X].location>=0){let oe=te[X];oe===void 0&&(X==="instanceMatrix"&&I.instanceMatrix&&(oe=I.instanceMatrix),X==="instanceColor"&&I.instanceColor&&(oe=I.instanceColor));const fe={};fe.attribute=oe,oe&&oe.data&&(fe.data=oe.data),K[X]=fe,se++}s.attributes=K,s.attributesNum=se,s.index=W}function _(){const I=s.newAttributes;for(let U=0,H=I.length;U<H;U++)I[U]=0}function S(I){x(I,0)}function x(I,U){const H=s.newAttributes,W=s.enabledAttributes,K=s.attributeDivisors;H[I]=1,W[I]===0&&(n.enableVertexAttribArray(I),W[I]=1),K[I]!==U&&(n.vertexAttribDivisor(I,U),K[I]=U)}function E(){const I=s.newAttributes,U=s.enabledAttributes;for(let H=0,W=U.length;H<W;H++)U[H]!==I[H]&&(n.disableVertexAttribArray(H),U[H]=0)}function b(I,U,H,W,K,te,se){se===!0?n.vertexAttribIPointer(I,U,H,K,te):n.vertexAttribPointer(I,U,H,W,K,te)}function M(I,U,H,W){_();const K=W.attributes,te=H.getAttributes(),se=U.defaultAttributeValues;for(const le in te){const X=te[le];if(X.location>=0){let ce=K[le];if(ce===void 0&&(le==="instanceMatrix"&&I.instanceMatrix&&(ce=I.instanceMatrix),le==="instanceColor"&&I.instanceColor&&(ce=I.instanceColor)),ce!==void 0){const oe=ce.normalized,fe=ce.itemSize,De=e.get(ce);if(De===void 0)continue;const We=De.buffer,Qe=De.type,ve=De.bytesPerElement,Ie=Qe===n.INT||Qe===n.UNSIGNED_INT||ce.gpuType===OT;if(ce.isInterleavedBufferAttribute){const we=ce.data,tt=we.stride,Ke=ce.offset;if(we.isInstancedInterleavedBuffer){for(let Me=0;Me<X.locationSize;Me++)x(X.location+Me,we.meshPerAttribute);I.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=we.meshPerAttribute*we.count)}else for(let Me=0;Me<X.locationSize;Me++)S(X.location+Me);n.bindBuffer(n.ARRAY_BUFFER,We);for(let Me=0;Me<X.locationSize;Me++)b(X.location+Me,fe/X.locationSize,Qe,oe,tt*ve,(Ke+fe/X.locationSize*Me)*ve,Ie)}else{if(ce.isInstancedBufferAttribute){for(let we=0;we<X.locationSize;we++)x(X.location+we,ce.meshPerAttribute);I.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let we=0;we<X.locationSize;we++)S(X.location+we);n.bindBuffer(n.ARRAY_BUFFER,We);for(let we=0;we<X.locationSize;we++)b(X.location+we,fe/X.locationSize,Qe,oe,fe*ve,fe/X.locationSize*we*ve,Ie)}}else if(se!==void 0){const oe=se[le];if(oe!==void 0)switch(oe.length){case 2:n.vertexAttrib2fv(X.location,oe);break;case 3:n.vertexAttrib3fv(X.location,oe);break;case 4:n.vertexAttrib4fv(X.location,oe);break;default:n.vertexAttrib1fv(X.location,oe)}}}}E()}function k(){N();for(const I in r){const U=r[I];for(const H in U){const W=U[H];for(const K in W)u(W[K].object),delete W[K];delete U[H]}delete r[I]}}function B(I){if(r[I.id]===void 0)return;const U=r[I.id];for(const H in U){const W=U[H];for(const K in W)u(W[K].object),delete W[K];delete U[H]}delete r[I.id]}function P(I){for(const U in r){const H=r[U];if(H[I.id]===void 0)continue;const W=H[I.id];for(const K in W)u(W[K].object),delete W[K];delete H[I.id]}}function N(){R(),o=!0,s!==i&&(s=i,c(s.object))}function R(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:N,resetDefaultState:R,dispose:k,releaseStatesOfGeometry:B,releaseStatesOfProgram:P,initAttributes:_,enableAttribute:S,disableUnusedAttributes:E}}function xNe(n,e,t){let r;function i(c){r=c}function s(c,u){n.drawArrays(r,c,u),t.update(u,r,1)}function o(c,u,h){h!==0&&(n.drawArraysInstanced(r,c,u,h),t.update(u,r,h))}function a(c,u,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,h);let p=0;for(let v=0;v<h;v++)p+=u[v];t.update(p,r,1)}function l(c,u,h,f){if(h===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let v=0;v<c.length;v++)o(c[v],u[v],f[v]);else{p.multiDrawArraysInstancedWEBGL(r,c,0,u,0,f,0,h);let v=0;for(let _=0;_<h;_++)v+=u[_]*f[_];t.update(v,r,1)}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function _Ne(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(P){return!(P!==_o&&r.convert(P)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(P){const N=P===ty&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==Rl&&r.convert(P)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==Sa&&!N)}function l(P){if(P==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const h=t.logarithmicDepthBuffer===!0,f=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),_=n.getParameter(n.MAX_TEXTURE_SIZE),S=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),x=n.getParameter(n.MAX_VERTEX_ATTRIBS),E=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),b=n.getParameter(n.MAX_VARYING_VECTORS),M=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),k=v>0,B=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:h,reversedDepthBuffer:f,maxTextures:p,maxVertexTextures:v,maxTextureSize:_,maxCubemapSize:S,maxAttributes:x,maxVertexUniforms:E,maxVaryings:b,maxFragmentUniforms:M,vertexTextures:k,maxSamples:B}}function wNe(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Ju,a=new Tn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f){const p=h.length!==0||f||r!==0||i;return i=f,r=h.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,f){t=u(h,f,0)},this.setState=function(h,f,p){const v=h.clippingPlanes,_=h.clipIntersection,S=h.clipShadows,x=n.get(h);if(!i||v===null||v.length===0||s&&!S)s?u(null):c();else{const E=s?0:r,b=E*4;let M=x.clippingState||null;l.value=M,M=u(v,f,b,p);for(let k=0;k!==b;++k)M[k]=t[k];x.clippingState=M,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=E}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(h,f,p,v){const _=h!==null?h.length:0;let S=null;if(_!==0){if(S=l.value,v!==!0||S===null){const x=p+_*4,E=f.matrixWorldInverse;a.getNormalMatrix(E),(S===null||S.length<x)&&(S=new Float32Array(x));for(let b=0,M=p;b!==_;++b,M+=4)o.copy(h[b]).applyMatrix4(E,a),o.normal.toArray(S,M),S[M+3]=o.constant}l.value=S,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,S}}function SNe(n){let e=new WeakMap;function t(o,a){return a===Gx?o.mapping=Th:a===$x&&(o.mapping=Af),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===Gx||a===$x)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new lJ(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const m0=4,Dj=[.125,.215,.35,.446,.526,.582],Rp=20,ZI=new lf,kj=new Dt;let QI=null,JI=0,eP=0,tP=!1;const Ip=(1+Math.sqrt(5))/2,Ng=1/Ip,Oj=[new re(-Ip,Ng,0),new re(Ip,Ng,0),new re(-Ng,0,Ip),new re(Ng,0,Ip),new re(0,Ip,-Ng),new re(0,Ip,Ng),new re(-1,1,-1),new re(1,1,-1),new re(-1,1,1),new re(1,1,1)],ENe=new re;class n3{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100,s={}){const{size:o=256,position:a=ENe}=s;QI=this._renderer.getRenderTarget(),JI=this._renderer.getActiveCubeFace(),eP=this._renderer.getActiveMipmapLevel(),tP=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,r,i,l,a),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Bj(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Fj(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(QI,JI,eP),this._renderer.xr.enabled=tP,e.scissorTest=!1,uE(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Th||e.mapping===Af?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),QI=this._renderer.getRenderTarget(),JI=this._renderer.getActiveCubeFace(),eP=this._renderer.getActiveMipmapLevel(),tP=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:us,minFilter:us,generateMipmaps:!1,type:ty,format:_o,colorSpace:Tm,depthBuffer:!1},i=Lj(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Lj(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=bNe(s)),this._blurMaterial=ANe(s,e,t)}return i}_compileMaterial(e){const t=new Ki(this._lodPlanes[0],e);this._renderer.compile(t,ZI)}_sceneToCubeUV(e,t,r,i,s){const l=new Bi(90,1,t,r),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,f=h.autoClear,p=h.toneMapping;h.getClearColor(kj),h.toneMapping=mu,h.autoClear=!1,h.state.buffers.depth.getReversed()&&(h.setRenderTarget(i),h.clearDepth(),h.setRenderTarget(null));const _=new Ff({name:"PMREM.Background",side:Yo,depthWrite:!1,depthTest:!1}),S=new Ki(new Vm,_);let x=!1;const E=e.background;E?E.isColor&&(_.color.copy(E),e.background=null,x=!0):(_.color.copy(kj),x=!0);for(let b=0;b<6;b++){const M=b%3;M===0?(l.up.set(0,c[b],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+u[b],s.y,s.z)):M===1?(l.up.set(0,0,c[b]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+u[b],s.z)):(l.up.set(0,c[b],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+u[b]));const k=this._cubeSize;uE(i,M*k,b>2?k:0,k,k),h.setRenderTarget(i),x&&h.render(S,l),h.render(e,l)}S.geometry.dispose(),S.material.dispose(),h.toneMapping=p,h.autoClear=f,e.background=E}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Th||e.mapping===Af;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=Bj()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Fj());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Ki(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;uE(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,ZI)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=Oj[(i-s-1)%Oj.length];this._blur(e,s-1,s,o,a)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new Ki(this._lodPlanes[i],c),f=c.uniforms,p=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Rp-1),_=s/v,S=isFinite(s)?1+Math.floor(u*_):Rp;S>Rp&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${Rp}`);const x=[];let E=0;for(let P=0;P<Rp;++P){const N=P/_,R=Math.exp(-N*N/2);x.push(R),P===0?E+=R:P<S&&(E+=2*R)}for(let P=0;P<x.length;P++)x[P]=x[P]/E;f.envMap.value=e.texture,f.samples.value=S,f.weights.value=x,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:b}=this;f.dTheta.value=v,f.mipInt.value=b-r;const M=this._sizeLods[i],k=3*M*(i>b-m0?i-b+m0:0),B=4*(this._cubeSize-M);uE(t,k,B,3*M,2*M),l.setRenderTarget(t),l.render(h,ZI)}}function bNe(n){const e=[],t=[],r=[];let i=n;const s=n-m0+1+Dj.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-m0?l=Dj[o-n+m0-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,h=1+c,f=[u,u,h,u,h,h,u,u,h,h,u,h],p=6,v=6,_=3,S=2,x=1,E=new Float32Array(_*v*p),b=new Float32Array(S*v*p),M=new Float32Array(x*v*p);for(let B=0;B<p;B++){const P=B%3*2/3-1,N=B>2?0:-1,R=[P,N,0,P+2/3,N,0,P+2/3,N+1,0,P,N,0,P+2/3,N+1,0,P,N+1,0];E.set(R,_*v*B),b.set(f,S*v*B);const I=[B,B,B,B,B,B];M.set(I,x*v*B)}const k=new In;k.setAttribute("position",new Pr(E,_)),k.setAttribute("uv",new Pr(b,S)),k.setAttribute("faceIndex",new Pr(M,x)),e.push(k),i>m0&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function Lj(n,e,t){const r=new _u(n,e,t);return r.texture.mapping=ey,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function uE(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function ANe(n,e,t){const r=new Float32Array(Rp),i=new re(0,1,0);return new _c({name:"SphericalGaussianBlur",defines:{n:Rp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:L4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:hh,depthTest:!1,depthWrite:!1})}function Fj(){return new _c({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:L4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:hh,depthTest:!1,depthWrite:!1})}function Bj(){return new _c({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:L4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:hh,depthTest:!1,depthWrite:!1})}function L4(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function TNe(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===Gx||l===$x,u=l===Th||l===Af;if(c||u){let h=e.get(a);const f=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==f)return t===null&&(t=new n3(n)),h=c?t.fromEquirectangular(a,h):t.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{const p=a.image;return c&&p&&p.height>0||u&&p&&i(p)?(t===null&&(t=new n3(n)),h=c?t.fromEquirectangular(a):t.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",s),h.texture):null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function CNe(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&j0("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function MNe(n,e,t,r){const i={},s=new WeakMap;function o(h){const f=h.target;f.index!==null&&e.remove(f.index);for(const v in f.attributes)e.remove(f.attributes[v]);f.removeEventListener("dispose",o),delete i[f.id];const p=s.get(f);p&&(e.remove(p),s.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(h,f){return i[f.id]===!0||(f.addEventListener("dispose",o),i[f.id]=!0,t.memory.geometries++),f}function l(h){const f=h.attributes;for(const p in f)e.update(f[p],n.ARRAY_BUFFER)}function c(h){const f=[],p=h.index,v=h.attributes.position;let _=0;if(p!==null){const E=p.array;_=p.version;for(let b=0,M=E.length;b<M;b+=3){const k=E[b+0],B=E[b+1],P=E[b+2];f.push(k,B,B,P,P,k)}}else if(v!==void 0){const E=v.array;_=v.version;for(let b=0,M=E.length/3-1;b<M;b+=3){const k=b+0,B=b+1,P=b+2;f.push(k,B,B,P,P,k)}}else return;const S=new(tJ(f)?u4:c4)(f,1);S.version=_;const x=s.get(h);x&&e.remove(x),s.set(h,S)}function u(h){const f=s.get(h);if(f){const p=h.index;p!==null&&f.version<p.version&&c(h)}else c(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:u}}function INe(n,e,t){let r;function i(f){r=f}let s,o;function a(f){s=f.type,o=f.bytesPerElement}function l(f,p){n.drawElements(r,p,s,f*o),t.update(p,r,1)}function c(f,p,v){v!==0&&(n.drawElementsInstanced(r,p,s,f*o,v),t.update(p,r,v))}function u(f,p,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,p,0,s,f,0,v);let S=0;for(let x=0;x<v;x++)S+=p[x];t.update(S,r,1)}function h(f,p,v,_){if(v===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let x=0;x<f.length;x++)c(f[x]/o,p[x],_[x]);else{S.multiDrawElementsInstancedWEBGL(r,p,0,s,f,0,_,0,v);let x=0;for(let E=0;E<v;E++)x+=p[E]*_[E];t.update(x,r,1)}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=h}function PNe(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function RNe(n,e,t){const r=new WeakMap,i=new sr;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=u!==void 0?u.length:0;let f=r.get(a);if(f===void 0||f.count!==h){let I=function(){N.dispose(),r.delete(a),a.removeEventListener("dispose",I)};var p=I;f!==void 0&&f.texture.dispose();const v=a.morphAttributes.position!==void 0,_=a.morphAttributes.normal!==void 0,S=a.morphAttributes.color!==void 0,x=a.morphAttributes.position||[],E=a.morphAttributes.normal||[],b=a.morphAttributes.color||[];let M=0;v===!0&&(M=1),_===!0&&(M=2),S===!0&&(M=3);let k=a.attributes.position.count*M,B=1;k>e.maxTextureSize&&(B=Math.ceil(k/e.maxTextureSize),k=e.maxTextureSize);const P=new Float32Array(k*B*4*h),N=new zT(P,k,B,h);N.type=Sa,N.needsUpdate=!0;const R=M*4;for(let U=0;U<h;U++){const H=x[U],W=E[U],K=b[U],te=k*B*4*U;for(let se=0;se<H.count;se++){const le=se*R;v===!0&&(i.fromBufferAttribute(H,se),P[te+le+0]=i.x,P[te+le+1]=i.y,P[te+le+2]=i.z,P[te+le+3]=0),_===!0&&(i.fromBufferAttribute(W,se),P[te+le+4]=i.x,P[te+le+5]=i.y,P[te+le+6]=i.z,P[te+le+7]=0),S===!0&&(i.fromBufferAttribute(K,se),P[te+le+8]=i.x,P[te+le+9]=i.y,P[te+le+10]=i.z,P[te+le+11]=K.itemSize===4?i.w:1)}}f={count:h,texture:N,size:new Ze(k,B)},r.set(a,f),a.addEventListener("dispose",I)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let v=0;for(let S=0;S<c.length;S++)v+=c[S];const _=a.morphTargetsRelative?1:1-v;l.getUniforms().setValue(n,"morphTargetBaseInfluence",_),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",f.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",f.size)}return{update:s}}function NNe(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,h=e.get(l,u);if(i.get(h)!==c&&(e.update(h),i.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==c&&(f.update(),i.set(f,c))}return h}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const aee=new ai,Uj=new m4(1,1),lee=new zT,cee=new HT,uee=new q_,jj=[],Vj=[],zj=new Float32Array(16),Hj=new Float32Array(9),Wj=new Float32Array(4);function iy(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=jj[i];if(s===void 0&&(s=new Float32Array(i),jj[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function fs(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function ps(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function hC(n,e){let t=Vj[e];t===void 0&&(t=new Int32Array(e),Vj[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function DNe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function kNe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(fs(t,e))return;n.uniform2fv(this.addr,e),ps(t,e)}}function ONe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(fs(t,e))return;n.uniform3fv(this.addr,e),ps(t,e)}}function LNe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(fs(t,e))return;n.uniform4fv(this.addr,e),ps(t,e)}}function FNe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(fs(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ps(t,e)}else{if(fs(t,r))return;Wj.set(r),n.uniformMatrix2fv(this.addr,!1,Wj),ps(t,r)}}function BNe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(fs(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ps(t,e)}else{if(fs(t,r))return;Hj.set(r),n.uniformMatrix3fv(this.addr,!1,Hj),ps(t,r)}}function UNe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(fs(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ps(t,e)}else{if(fs(t,r))return;zj.set(r),n.uniformMatrix4fv(this.addr,!1,zj),ps(t,r)}}function jNe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function VNe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(fs(t,e))return;n.uniform2iv(this.addr,e),ps(t,e)}}function zNe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(fs(t,e))return;n.uniform3iv(this.addr,e),ps(t,e)}}function HNe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(fs(t,e))return;n.uniform4iv(this.addr,e),ps(t,e)}}function WNe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function GNe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(fs(t,e))return;n.uniform2uiv(this.addr,e),ps(t,e)}}function $Ne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(fs(t,e))return;n.uniform3uiv(this.addr,e),ps(t,e)}}function XNe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(fs(t,e))return;n.uniform4uiv(this.addr,e),ps(t,e)}}function qNe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let s;this.type===n.SAMPLER_2D_SHADOW?(Uj.compareFunction=o4,s=Uj):s=aee,t.setTexture2D(e||s,i)}function YNe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||cee,i)}function KNe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||uee,i)}function ZNe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||lee,i)}function QNe(n){switch(n){case 5126:return DNe;case 35664:return kNe;case 35665:return ONe;case 35666:return LNe;case 35674:return FNe;case 35675:return BNe;case 35676:return UNe;case 5124:case 35670:return jNe;case 35667:case 35671:return VNe;case 35668:case 35672:return zNe;case 35669:case 35673:return HNe;case 5125:return WNe;case 36294:return GNe;case 36295:return $Ne;case 36296:return XNe;case 35678:case 36198:case 36298:case 36306:case 35682:return qNe;case 35679:case 36299:case 36307:return YNe;case 35680:case 36300:case 36308:case 36293:return KNe;case 36289:case 36303:case 36311:case 36292:return ZNe}}function JNe(n,e){n.uniform1fv(this.addr,e)}function e3e(n,e){const t=iy(e,this.size,2);n.uniform2fv(this.addr,t)}function t3e(n,e){const t=iy(e,this.size,3);n.uniform3fv(this.addr,t)}function n3e(n,e){const t=iy(e,this.size,4);n.uniform4fv(this.addr,t)}function r3e(n,e){const t=iy(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function i3e(n,e){const t=iy(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function s3e(n,e){const t=iy(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function o3e(n,e){n.uniform1iv(this.addr,e)}function a3e(n,e){n.uniform2iv(this.addr,e)}function l3e(n,e){n.uniform3iv(this.addr,e)}function c3e(n,e){n.uniform4iv(this.addr,e)}function u3e(n,e){n.uniform1uiv(this.addr,e)}function h3e(n,e){n.uniform2uiv(this.addr,e)}function d3e(n,e){n.uniform3uiv(this.addr,e)}function f3e(n,e){n.uniform4uiv(this.addr,e)}function p3e(n,e,t){const r=this.cache,i=e.length,s=hC(t,i);fs(r,s)||(n.uniform1iv(this.addr,s),ps(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||aee,s[o])}function m3e(n,e,t){const r=this.cache,i=e.length,s=hC(t,i);fs(r,s)||(n.uniform1iv(this.addr,s),ps(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||cee,s[o])}function g3e(n,e,t){const r=this.cache,i=e.length,s=hC(t,i);fs(r,s)||(n.uniform1iv(this.addr,s),ps(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||uee,s[o])}function v3e(n,e,t){const r=this.cache,i=e.length,s=hC(t,i);fs(r,s)||(n.uniform1iv(this.addr,s),ps(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||lee,s[o])}function y3e(n){switch(n){case 5126:return JNe;case 35664:return e3e;case 35665:return t3e;case 35666:return n3e;case 35674:return r3e;case 35675:return i3e;case 35676:return s3e;case 5124:case 35670:return o3e;case 35667:case 35671:return a3e;case 35668:case 35672:return l3e;case 35669:case 35673:return c3e;case 5125:return u3e;case 36294:return h3e;case 36295:return d3e;case 36296:return f3e;case 35678:case 36198:case 36298:case 36306:case 35682:return p3e;case 35679:case 36299:case 36307:return m3e;case 35680:case 36300:case 36308:case 36293:return g3e;case 36289:case 36303:case 36311:case 36292:return v3e}}class x3e{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=QNe(t.type)}}class _3e{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=y3e(t.type)}}class w3e{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const nP=/(\w+)(\])?(\[|\.)?/g;function Gj(n,e){n.seq.push(e),n.map[e.id]=e}function S3e(n,e,t){const r=n.name,i=r.length;for(nP.lastIndex=0;;){const s=nP.exec(r),o=nP.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){Gj(t,c===void 0?new x3e(a,n,e):new _3e(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new w3e(a),Gj(t,h)),t=h}}}class rb{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);S3e(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function $j(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const E3e=37297;let b3e=0;function A3e(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}const Xj=new Tn;function T3e(n){nr._getMatrix(Xj,nr.workingColorSpace,n);const e=`mat3( ${Xj.elements.map(t=>t.toFixed(4))} )`;switch(nr.getTransfer(n)){case Zx:return[e,"LinearTransferOETF"];case Ar:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function qj(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),s=(n.getShaderInfoLog(e)||"").trim();if(r&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const a=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+A3e(n.getShaderSource(e),a)}else return s}function C3e(n,e){const t=T3e(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function M3e(n,e){let t;switch(e){case OQ:t="Linear";break;case LQ:t="Reinhard";break;case FQ:t="Cineon";break;case KO:t="ACESFilmic";break;case UQ:t="AgX";break;case jQ:t="Neutral";break;case BQ:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const hE=new re;function I3e(){nr.getLuminanceCoefficients(hE);const n=hE.x.toFixed(4),e=hE.y.toFixed(4),t=hE.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function P3e(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(x1).join(`
`)}function R3e(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function N3e(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function x1(n){return n!==""}function Yj(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Kj(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const D3e=/^[ \t]*#include +<([\w\d./]+)>/gm;function r3(n){return n.replace(D3e,O3e)}const k3e=new Map;function O3e(n,e){let t=Nn[e];if(t===void 0){const r=k3e.get(e);if(r!==void 0)t=Nn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return r3(t)}const L3e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Zj(n){return n.replace(L3e,F3e)}function F3e(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function Qj(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function B3e(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===DT?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===$1?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Zl&&(e="SHADOWMAP_TYPE_VSM"),e}function U3e(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Th:case Af:e="ENVMAP_TYPE_CUBE";break;case ey:e="ENVMAP_TYPE_CUBE_UV";break}return e}function j3e(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Af:e="ENVMAP_MODE_REFRACTION";break}return e}function V3e(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case G_:e="ENVMAP_BLENDING_MULTIPLY";break;case DQ:e="ENVMAP_BLENDING_MIX";break;case kQ:e="ENVMAP_BLENDING_ADD";break}return e}function z3e(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function H3e(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=B3e(t),c=U3e(t),u=j3e(t),h=V3e(t),f=z3e(t),p=P3e(t),v=R3e(s),_=i.createProgram();let S,x,E=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(x1).join(`
`),S.length>0&&(S+=`
`),x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(x1).join(`
`),x.length>0&&(x+=`
`)):(S=[Qj(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(x1).join(`
`),x=[Qj(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==mu?"#define TONE_MAPPING":"",t.toneMapping!==mu?Nn.tonemapping_pars_fragment:"",t.toneMapping!==mu?M3e("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Nn.colorspace_pars_fragment,C3e("linearToOutputTexel",t.outputColorSpace),I3e(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(x1).join(`
`)),o=r3(o),o=Yj(o,t),o=Kj(o,t),a=r3(a),a=Yj(a,t),a=Kj(a,t),o=Zj(o),a=Zj(a),t.isRawShaderMaterial!==!0&&(E=`#version 300 es
`,S=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,x=["#define varying in",t.glslVersion===XN?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===XN?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const b=E+S+o,M=E+x+a,k=$j(i,i.VERTEX_SHADER,b),B=$j(i,i.FRAGMENT_SHADER,M);i.attachShader(_,k),i.attachShader(_,B),t.index0AttributeName!==void 0?i.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(_,0,"position"),i.linkProgram(_);function P(U){if(n.debug.checkShaderErrors){const H=i.getProgramInfoLog(_)||"",W=i.getShaderInfoLog(k)||"",K=i.getShaderInfoLog(B)||"",te=H.trim(),se=W.trim(),le=K.trim();let X=!0,ce=!0;if(i.getProgramParameter(_,i.LINK_STATUS)===!1)if(X=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,_,k,B);else{const oe=qj(i,k,"vertex"),fe=qj(i,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(_,i.VALIDATE_STATUS)+`

Material Name: `+U.name+`
Material Type: `+U.type+`

Program Info Log: `+te+`
`+oe+`
`+fe)}else te!==""?console.warn("THREE.WebGLProgram: Program Info Log:",te):(se===""||le==="")&&(ce=!1);ce&&(U.diagnostics={runnable:X,programLog:te,vertexShader:{log:se,prefix:S},fragmentShader:{log:le,prefix:x}})}i.deleteShader(k),i.deleteShader(B),N=new rb(i,_),R=N3e(i,_)}let N;this.getUniforms=function(){return N===void 0&&P(this),N};let R;this.getAttributes=function(){return R===void 0&&P(this),R};let I=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return I===!1&&(I=i.getProgramParameter(_,E3e)),I},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=b3e++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=k,this.fragmentShader=B,this}let W3e=0;class G3e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new $3e(e),t.set(e,r)),r}}class $3e{constructor(e){this.id=W3e++,this.code=e,this.usedTimes=0}}function X3e(n,e,t,r,i,s,o){const a=new im,l=new G3e,c=new Set,u=[],h=i.logarithmicDepthBuffer,f=i.vertexTextures;let p=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(R){return c.add(R),R===0?"uv":`uv${R}`}function S(R,I,U,H,W){const K=H.fog,te=W.geometry,se=R.isMeshStandardMaterial?H.environment:null,le=(R.isMeshStandardMaterial?t:e).get(R.envMap||se),X=le&&le.mapping===ey?le.image.height:null,ce=v[R.type];R.precision!==null&&(p=i.getMaxPrecision(R.precision),p!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",p,"instead."));const oe=te.morphAttributes.position||te.morphAttributes.normal||te.morphAttributes.color,fe=oe!==void 0?oe.length:0;let De=0;te.morphAttributes.position!==void 0&&(De=1),te.morphAttributes.normal!==void 0&&(De=2),te.morphAttributes.color!==void 0&&(De=3);let We,Qe,ve,Ie;if(ce){const xn=rc[ce];We=xn.vertexShader,Qe=xn.fragmentShader}else We=R.vertexShader,Qe=R.fragmentShader,l.update(R),ve=l.getVertexShaderID(R),Ie=l.getFragmentShaderID(R);const we=n.getRenderTarget(),tt=n.state.buffers.depth.getReversed(),Ke=W.isInstancedMesh===!0,Me=W.isBatchedMesh===!0,Ye=!!R.map,Pe=!!R.matcap,ne=!!le,Be=!!R.aoMap,Re=!!R.lightMap,qe=!!R.bumpMap,ze=!!R.normalMap,J=!!R.displacementMap,be=!!R.emissiveMap,Fe=!!R.metalnessMap,rt=!!R.roughnessMap,pt=R.anisotropy>0,ee=R.clearcoat>0,q=R.dispersion>0,me=R.iridescence>0,pe=R.sheen>0,Ve=R.transmission>0,Ue=pt&&!!R.anisotropyMap,Mt=ee&&!!R.clearcoatMap,lt=ee&&!!R.clearcoatNormalMap,bt=ee&&!!R.clearcoatRoughnessMap,wt=me&&!!R.iridescenceMap,st=me&&!!R.iridescenceThicknessMap,mt=pe&&!!R.sheenColorMap,Wt=pe&&!!R.sheenRoughnessMap,ue=!!R.specularMap,Te=!!R.specularColorMap,ut=!!R.specularIntensityMap,he=Ve&&!!R.transmissionMap,Je=Ve&&!!R.thicknessMap,ot=!!R.gradientMap,gt=!!R.alphaMap,at=R.alphaTest>0,Xe=!!R.alphaHash,xt=!!R.extensions;let Bt=mu;R.toneMapped&&(we===null||we.isXRRenderTarget===!0)&&(Bt=n.toneMapping);const Cn={shaderID:ce,shaderType:R.type,shaderName:R.name,vertexShader:We,fragmentShader:Qe,defines:R.defines,customVertexShaderID:ve,customFragmentShaderID:Ie,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:p,batching:Me,batchingColor:Me&&W._colorsTexture!==null,instancing:Ke,instancingColor:Ke&&W.instanceColor!==null,instancingMorph:Ke&&W.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:we===null?n.outputColorSpace:we.isXRRenderTarget===!0?we.texture.colorSpace:Tm,alphaToCoverage:!!R.alphaToCoverage,map:Ye,matcap:Pe,envMap:ne,envMapMode:ne&&le.mapping,envMapCubeUVHeight:X,aoMap:Be,lightMap:Re,bumpMap:qe,normalMap:ze,displacementMap:f&&J,emissiveMap:be,normalMapObjectSpace:ze&&R.normalMapType===XQ,normalMapTangentSpace:ze&&R.normalMapType===Lf,metalnessMap:Fe,roughnessMap:rt,anisotropy:pt,anisotropyMap:Ue,clearcoat:ee,clearcoatMap:Mt,clearcoatNormalMap:lt,clearcoatRoughnessMap:bt,dispersion:q,iridescence:me,iridescenceMap:wt,iridescenceThicknessMap:st,sheen:pe,sheenColorMap:mt,sheenRoughnessMap:Wt,specularMap:ue,specularColorMap:Te,specularIntensityMap:ut,transmission:Ve,transmissionMap:he,thicknessMap:Je,gradientMap:ot,opaque:R.transparent===!1&&R.blending===nm&&R.alphaToCoverage===!1,alphaMap:gt,alphaTest:at,alphaHash:Xe,combine:R.combine,mapUv:Ye&&_(R.map.channel),aoMapUv:Be&&_(R.aoMap.channel),lightMapUv:Re&&_(R.lightMap.channel),bumpMapUv:qe&&_(R.bumpMap.channel),normalMapUv:ze&&_(R.normalMap.channel),displacementMapUv:J&&_(R.displacementMap.channel),emissiveMapUv:be&&_(R.emissiveMap.channel),metalnessMapUv:Fe&&_(R.metalnessMap.channel),roughnessMapUv:rt&&_(R.roughnessMap.channel),anisotropyMapUv:Ue&&_(R.anisotropyMap.channel),clearcoatMapUv:Mt&&_(R.clearcoatMap.channel),clearcoatNormalMapUv:lt&&_(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:bt&&_(R.clearcoatRoughnessMap.channel),iridescenceMapUv:wt&&_(R.iridescenceMap.channel),iridescenceThicknessMapUv:st&&_(R.iridescenceThicknessMap.channel),sheenColorMapUv:mt&&_(R.sheenColorMap.channel),sheenRoughnessMapUv:Wt&&_(R.sheenRoughnessMap.channel),specularMapUv:ue&&_(R.specularMap.channel),specularColorMapUv:Te&&_(R.specularColorMap.channel),specularIntensityMapUv:ut&&_(R.specularIntensityMap.channel),transmissionMapUv:he&&_(R.transmissionMap.channel),thicknessMapUv:Je&&_(R.thicknessMap.channel),alphaMapUv:gt&&_(R.alphaMap.channel),vertexTangents:!!te.attributes.tangent&&(ze||pt),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!te.attributes.color&&te.attributes.color.itemSize===4,pointsUvs:W.isPoints===!0&&!!te.attributes.uv&&(Ye||gt),fog:!!K,useFog:R.fog===!0,fogExp2:!!K&&K.isFogExp2,flatShading:R.flatShading===!0&&R.wireframe===!1,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:h,reversedDepthBuffer:tt,skinning:W.isSkinnedMesh===!0,morphTargets:te.morphAttributes.position!==void 0,morphNormals:te.morphAttributes.normal!==void 0,morphColors:te.morphAttributes.color!==void 0,morphTargetsCount:fe,morphTextureStride:De,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&U.length>0,shadowMapType:n.shadowMap.type,toneMapping:Bt,decodeVideoTexture:Ye&&R.map.isVideoTexture===!0&&nr.getTransfer(R.map.colorSpace)===Ar,decodeVideoTextureEmissive:be&&R.emissiveMap.isVideoTexture===!0&&nr.getTransfer(R.emissiveMap.colorSpace)===Ar,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===Zc,flipSided:R.side===Yo,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionClipCullDistance:xt&&R.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(xt&&R.extensions.multiDraw===!0||Me)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:R.customProgramCacheKey()};return Cn.vertexUv1s=c.has(1),Cn.vertexUv2s=c.has(2),Cn.vertexUv3s=c.has(3),c.clear(),Cn}function x(R){const I=[];if(R.shaderID?I.push(R.shaderID):(I.push(R.customVertexShaderID),I.push(R.customFragmentShaderID)),R.defines!==void 0)for(const U in R.defines)I.push(U),I.push(R.defines[U]);return R.isRawShaderMaterial===!1&&(E(I,R),b(I,R),I.push(n.outputColorSpace)),I.push(R.customProgramCacheKey),I.join()}function E(R,I){R.push(I.precision),R.push(I.outputColorSpace),R.push(I.envMapMode),R.push(I.envMapCubeUVHeight),R.push(I.mapUv),R.push(I.alphaMapUv),R.push(I.lightMapUv),R.push(I.aoMapUv),R.push(I.bumpMapUv),R.push(I.normalMapUv),R.push(I.displacementMapUv),R.push(I.emissiveMapUv),R.push(I.metalnessMapUv),R.push(I.roughnessMapUv),R.push(I.anisotropyMapUv),R.push(I.clearcoatMapUv),R.push(I.clearcoatNormalMapUv),R.push(I.clearcoatRoughnessMapUv),R.push(I.iridescenceMapUv),R.push(I.iridescenceThicknessMapUv),R.push(I.sheenColorMapUv),R.push(I.sheenRoughnessMapUv),R.push(I.specularMapUv),R.push(I.specularColorMapUv),R.push(I.specularIntensityMapUv),R.push(I.transmissionMapUv),R.push(I.thicknessMapUv),R.push(I.combine),R.push(I.fogExp2),R.push(I.sizeAttenuation),R.push(I.morphTargetsCount),R.push(I.morphAttributeCount),R.push(I.numDirLights),R.push(I.numPointLights),R.push(I.numSpotLights),R.push(I.numSpotLightMaps),R.push(I.numHemiLights),R.push(I.numRectAreaLights),R.push(I.numDirLightShadows),R.push(I.numPointLightShadows),R.push(I.numSpotLightShadows),R.push(I.numSpotLightShadowsWithMaps),R.push(I.numLightProbes),R.push(I.shadowMapType),R.push(I.toneMapping),R.push(I.numClippingPlanes),R.push(I.numClipIntersection),R.push(I.depthPacking)}function b(R,I){a.disableAll(),I.supportsVertexTextures&&a.enable(0),I.instancing&&a.enable(1),I.instancingColor&&a.enable(2),I.instancingMorph&&a.enable(3),I.matcap&&a.enable(4),I.envMap&&a.enable(5),I.normalMapObjectSpace&&a.enable(6),I.normalMapTangentSpace&&a.enable(7),I.clearcoat&&a.enable(8),I.iridescence&&a.enable(9),I.alphaTest&&a.enable(10),I.vertexColors&&a.enable(11),I.vertexAlphas&&a.enable(12),I.vertexUv1s&&a.enable(13),I.vertexUv2s&&a.enable(14),I.vertexUv3s&&a.enable(15),I.vertexTangents&&a.enable(16),I.anisotropy&&a.enable(17),I.alphaHash&&a.enable(18),I.batching&&a.enable(19),I.dispersion&&a.enable(20),I.batchingColor&&a.enable(21),I.gradientMap&&a.enable(22),R.push(a.mask),a.disableAll(),I.fog&&a.enable(0),I.useFog&&a.enable(1),I.flatShading&&a.enable(2),I.logarithmicDepthBuffer&&a.enable(3),I.reversedDepthBuffer&&a.enable(4),I.skinning&&a.enable(5),I.morphTargets&&a.enable(6),I.morphNormals&&a.enable(7),I.morphColors&&a.enable(8),I.premultipliedAlpha&&a.enable(9),I.shadowMapEnabled&&a.enable(10),I.doubleSided&&a.enable(11),I.flipSided&&a.enable(12),I.useDepthPacking&&a.enable(13),I.dithering&&a.enable(14),I.transmission&&a.enable(15),I.sheen&&a.enable(16),I.opaque&&a.enable(17),I.pointsUvs&&a.enable(18),I.decodeVideoTexture&&a.enable(19),I.decodeVideoTextureEmissive&&a.enable(20),I.alphaToCoverage&&a.enable(21),R.push(a.mask)}function M(R){const I=v[R.type];let U;if(I){const H=rc[I];U=oJ.clone(H.uniforms)}else U=R.uniforms;return U}function k(R,I){let U;for(let H=0,W=u.length;H<W;H++){const K=u[H];if(K.cacheKey===I){U=K,++U.usedTimes;break}}return U===void 0&&(U=new H3e(n,I,R,s),u.push(U)),U}function B(R){if(--R.usedTimes===0){const I=u.indexOf(R);u[I]=u[u.length-1],u.pop(),R.destroy()}}function P(R){l.remove(R)}function N(){l.dispose()}return{getParameters:S,getProgramCacheKey:x,getUniforms:M,acquireProgram:k,releaseProgram:B,releaseShaderCache:P,programs:u,dispose:N}}function q3e(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function r(o){n.delete(o)}function i(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:s}}function Y3e(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Jj(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function eV(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(h,f,p,v,_,S){let x=n[e];return x===void 0?(x={id:h.id,object:h,geometry:f,material:p,groupOrder:v,renderOrder:h.renderOrder,z:_,group:S},n[e]=x):(x.id=h.id,x.object=h,x.geometry=f,x.material=p,x.groupOrder=v,x.renderOrder=h.renderOrder,x.z=_,x.group=S),e++,x}function a(h,f,p,v,_,S){const x=o(h,f,p,v,_,S);p.transmission>0?r.push(x):p.transparent===!0?i.push(x):t.push(x)}function l(h,f,p,v,_,S){const x=o(h,f,p,v,_,S);p.transmission>0?r.unshift(x):p.transparent===!0?i.unshift(x):t.unshift(x)}function c(h,f){t.length>1&&t.sort(h||Y3e),r.length>1&&r.sort(f||Jj),i.length>1&&i.sort(f||Jj)}function u(){for(let h=e,f=n.length;h<f;h++){const p=n[h];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function K3e(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new eV,n.set(r,[o])):i>=s.length?(o=new eV,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Z3e(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new re,color:new Dt};break;case"SpotLight":t={position:new re,direction:new re,color:new Dt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new re,color:new Dt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new re,skyColor:new Dt,groundColor:new Dt};break;case"RectAreaLight":t={color:new Dt,position:new re,halfWidth:new re,halfHeight:new re};break}return n[e.id]=t,t}}}function Q3e(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let J3e=0;function eDe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function tDe(n){const e=new Z3e,t=Q3e(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new re);const i=new re,s=new yn,o=new yn;function a(c){let u=0,h=0,f=0;for(let R=0;R<9;R++)r.probe[R].set(0,0,0);let p=0,v=0,_=0,S=0,x=0,E=0,b=0,M=0,k=0,B=0,P=0;c.sort(eDe);for(let R=0,I=c.length;R<I;R++){const U=c[R],H=U.color,W=U.intensity,K=U.distance,te=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)u+=H.r*W,h+=H.g*W,f+=H.b*W;else if(U.isLightProbe){for(let se=0;se<9;se++)r.probe[se].addScaledVector(U.sh.coefficients[se],W);P++}else if(U.isDirectionalLight){const se=e.get(U);if(se.color.copy(U.color).multiplyScalar(U.intensity),U.castShadow){const le=U.shadow,X=t.get(U);X.shadowIntensity=le.intensity,X.shadowBias=le.bias,X.shadowNormalBias=le.normalBias,X.shadowRadius=le.radius,X.shadowMapSize=le.mapSize,r.directionalShadow[p]=X,r.directionalShadowMap[p]=te,r.directionalShadowMatrix[p]=U.shadow.matrix,E++}r.directional[p]=se,p++}else if(U.isSpotLight){const se=e.get(U);se.position.setFromMatrixPosition(U.matrixWorld),se.color.copy(H).multiplyScalar(W),se.distance=K,se.coneCos=Math.cos(U.angle),se.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),se.decay=U.decay,r.spot[_]=se;const le=U.shadow;if(U.map&&(r.spotLightMap[k]=U.map,k++,le.updateMatrices(U),U.castShadow&&B++),r.spotLightMatrix[_]=le.matrix,U.castShadow){const X=t.get(U);X.shadowIntensity=le.intensity,X.shadowBias=le.bias,X.shadowNormalBias=le.normalBias,X.shadowRadius=le.radius,X.shadowMapSize=le.mapSize,r.spotShadow[_]=X,r.spotShadowMap[_]=te,M++}_++}else if(U.isRectAreaLight){const se=e.get(U);se.color.copy(H).multiplyScalar(W),se.halfWidth.set(U.width*.5,0,0),se.halfHeight.set(0,U.height*.5,0),r.rectArea[S]=se,S++}else if(U.isPointLight){const se=e.get(U);if(se.color.copy(U.color).multiplyScalar(U.intensity),se.distance=U.distance,se.decay=U.decay,U.castShadow){const le=U.shadow,X=t.get(U);X.shadowIntensity=le.intensity,X.shadowBias=le.bias,X.shadowNormalBias=le.normalBias,X.shadowRadius=le.radius,X.shadowMapSize=le.mapSize,X.shadowCameraNear=le.camera.near,X.shadowCameraFar=le.camera.far,r.pointShadow[v]=X,r.pointShadowMap[v]=te,r.pointShadowMatrix[v]=U.shadow.matrix,b++}r.point[v]=se,v++}else if(U.isHemisphereLight){const se=e.get(U);se.skyColor.copy(U.color).multiplyScalar(W),se.groundColor.copy(U.groundColor).multiplyScalar(W),r.hemi[x]=se,x++}}S>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=St.LTC_FLOAT_1,r.rectAreaLTC2=St.LTC_FLOAT_2):(r.rectAreaLTC1=St.LTC_HALF_1,r.rectAreaLTC2=St.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=h,r.ambient[2]=f;const N=r.hash;(N.directionalLength!==p||N.pointLength!==v||N.spotLength!==_||N.rectAreaLength!==S||N.hemiLength!==x||N.numDirectionalShadows!==E||N.numPointShadows!==b||N.numSpotShadows!==M||N.numSpotMaps!==k||N.numLightProbes!==P)&&(r.directional.length=p,r.spot.length=_,r.rectArea.length=S,r.point.length=v,r.hemi.length=x,r.directionalShadow.length=E,r.directionalShadowMap.length=E,r.pointShadow.length=b,r.pointShadowMap.length=b,r.spotShadow.length=M,r.spotShadowMap.length=M,r.directionalShadowMatrix.length=E,r.pointShadowMatrix.length=b,r.spotLightMatrix.length=M+k-B,r.spotLightMap.length=k,r.numSpotLightShadowsWithMaps=B,r.numLightProbes=P,N.directionalLength=p,N.pointLength=v,N.spotLength=_,N.rectAreaLength=S,N.hemiLength=x,N.numDirectionalShadows=E,N.numPointShadows=b,N.numSpotShadows=M,N.numSpotMaps=k,N.numLightProbes=P,r.version=J3e++)}function l(c,u){let h=0,f=0,p=0,v=0,_=0;const S=u.matrixWorldInverse;for(let x=0,E=c.length;x<E;x++){const b=c[x];if(b.isDirectionalLight){const M=r.directional[h];M.direction.setFromMatrixPosition(b.matrixWorld),i.setFromMatrixPosition(b.target.matrixWorld),M.direction.sub(i),M.direction.transformDirection(S),h++}else if(b.isSpotLight){const M=r.spot[p];M.position.setFromMatrixPosition(b.matrixWorld),M.position.applyMatrix4(S),M.direction.setFromMatrixPosition(b.matrixWorld),i.setFromMatrixPosition(b.target.matrixWorld),M.direction.sub(i),M.direction.transformDirection(S),p++}else if(b.isRectAreaLight){const M=r.rectArea[v];M.position.setFromMatrixPosition(b.matrixWorld),M.position.applyMatrix4(S),o.identity(),s.copy(b.matrixWorld),s.premultiply(S),o.extractRotation(s),M.halfWidth.set(b.width*.5,0,0),M.halfHeight.set(0,b.height*.5,0),M.halfWidth.applyMatrix4(o),M.halfHeight.applyMatrix4(o),v++}else if(b.isPointLight){const M=r.point[f];M.position.setFromMatrixPosition(b.matrixWorld),M.position.applyMatrix4(S),f++}else if(b.isHemisphereLight){const M=r.hemi[_];M.direction.setFromMatrixPosition(b.matrixWorld),M.direction.transformDirection(S),_++}}}return{setup:a,setupView:l,state:r}}function tV(n){const e=new tDe(n),t=[],r=[];function i(u){c.camera=u,t.length=0,r.length=0}function s(u){t.push(u)}function o(u){r.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function nDe(n){let e=new WeakMap;function t(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new tV(n),e.set(i,[a])):s>=o.length?(a=new tV(n),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:t,dispose:r}}const rDe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,iDe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function sDe(n,e,t){let r=new ny;const i=new Ze,s=new Ze,o=new sr,a=new E4({depthPacking:$Q}),l=new b4,c={},u=t.maxTextureSize,h={[Ah]:Yo,[Yo]:Ah,[Zc]:Zc},f=new _c({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ze},radius:{value:4}},vertexShader:rDe,fragmentShader:iDe}),p=f.clone();p.defines.HORIZONTAL_PASS=1;const v=new In;v.setAttribute("position",new Pr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Ki(v,f),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=DT;let x=this.type;this.render=function(B,P,N){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||B.length===0)return;const R=n.getRenderTarget(),I=n.getActiveCubeFace(),U=n.getActiveMipmapLevel(),H=n.state;H.setBlending(hh),H.buffers.depth.getReversed()?H.buffers.color.setClear(0,0,0,0):H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const W=x!==Zl&&this.type===Zl,K=x===Zl&&this.type!==Zl;for(let te=0,se=B.length;te<se;te++){const le=B[te],X=le.shadow;if(X===void 0){console.warn("THREE.WebGLShadowMap:",le,"has no shadow.");continue}if(X.autoUpdate===!1&&X.needsUpdate===!1)continue;i.copy(X.mapSize);const ce=X.getFrameExtents();if(i.multiply(ce),s.copy(X.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/ce.x),i.x=s.x*ce.x,X.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/ce.y),i.y=s.y*ce.y,X.mapSize.y=s.y)),X.map===null||W===!0||K===!0){const fe=this.type!==Zl?{minFilter:zs,magFilter:zs}:{};X.map!==null&&X.map.dispose(),X.map=new _u(i.x,i.y,fe),X.map.texture.name=le.name+".shadowMap",X.camera.updateProjectionMatrix()}n.setRenderTarget(X.map),n.clear();const oe=X.getViewportCount();for(let fe=0;fe<oe;fe++){const De=X.getViewport(fe);o.set(s.x*De.x,s.y*De.y,s.x*De.z,s.y*De.w),H.viewport(o),X.updateMatrices(le,fe),r=X.getFrustum(),M(P,N,X.camera,le,this.type)}X.isPointLightShadow!==!0&&this.type===Zl&&E(X,N),X.needsUpdate=!1}x=this.type,S.needsUpdate=!1,n.setRenderTarget(R,I,U)};function E(B,P){const N=e.update(_);f.defines.VSM_SAMPLES!==B.blurSamples&&(f.defines.VSM_SAMPLES=B.blurSamples,p.defines.VSM_SAMPLES=B.blurSamples,f.needsUpdate=!0,p.needsUpdate=!0),B.mapPass===null&&(B.mapPass=new _u(i.x,i.y)),f.uniforms.shadow_pass.value=B.map.texture,f.uniforms.resolution.value=B.mapSize,f.uniforms.radius.value=B.radius,n.setRenderTarget(B.mapPass),n.clear(),n.renderBufferDirect(P,null,N,f,_,null),p.uniforms.shadow_pass.value=B.mapPass.texture,p.uniforms.resolution.value=B.mapSize,p.uniforms.radius.value=B.radius,n.setRenderTarget(B.map),n.clear(),n.renderBufferDirect(P,null,N,p,_,null)}function b(B,P,N,R){let I=null;const U=N.isPointLight===!0?B.customDistanceMaterial:B.customDepthMaterial;if(U!==void 0)I=U;else if(I=N.isPointLight===!0?l:a,n.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0||P.alphaToCoverage===!0){const H=I.uuid,W=P.uuid;let K=c[H];K===void 0&&(K={},c[H]=K);let te=K[W];te===void 0&&(te=I.clone(),K[W]=te,P.addEventListener("dispose",k)),I=te}if(I.visible=P.visible,I.wireframe=P.wireframe,R===Zl?I.side=P.shadowSide!==null?P.shadowSide:P.side:I.side=P.shadowSide!==null?P.shadowSide:h[P.side],I.alphaMap=P.alphaMap,I.alphaTest=P.alphaToCoverage===!0?.5:P.alphaTest,I.map=P.map,I.clipShadows=P.clipShadows,I.clippingPlanes=P.clippingPlanes,I.clipIntersection=P.clipIntersection,I.displacementMap=P.displacementMap,I.displacementScale=P.displacementScale,I.displacementBias=P.displacementBias,I.wireframeLinewidth=P.wireframeLinewidth,I.linewidth=P.linewidth,N.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const H=n.properties.get(I);H.light=N}return I}function M(B,P,N,R,I){if(B.visible===!1)return;if(B.layers.test(P.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&I===Zl)&&(!B.frustumCulled||r.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,B.matrixWorld);const W=e.update(B),K=B.material;if(Array.isArray(K)){const te=W.groups;for(let se=0,le=te.length;se<le;se++){const X=te[se],ce=K[X.materialIndex];if(ce&&ce.visible){const oe=b(B,ce,R,I);B.onBeforeShadow(n,B,P,N,W,oe,X),n.renderBufferDirect(N,null,W,oe,B,X),B.onAfterShadow(n,B,P,N,W,oe,X)}}}else if(K.visible){const te=b(B,K,R,I);B.onBeforeShadow(n,B,P,N,W,te,null),n.renderBufferDirect(N,null,W,te,B,null),B.onAfterShadow(n,B,P,N,W,te,null)}}const H=B.children;for(let W=0,K=H.length;W<K;W++)M(H[W],P,N,R,I)}function k(B){B.target.removeEventListener("dispose",k);for(const N in c){const R=c[N],I=B.target.uuid;I in R&&(R[I].dispose(),delete R[I])}}}const oDe={[E2]:b2,[A2]:M2,[T2]:I2,[Am]:C2,[b2]:E2,[M2]:A2,[I2]:T2,[C2]:Am};function aDe(n,e){function t(){let he=!1;const Je=new sr;let ot=null;const gt=new sr(0,0,0,0);return{setMask:function(at){ot!==at&&!he&&(n.colorMask(at,at,at,at),ot=at)},setLocked:function(at){he=at},setClear:function(at,Xe,xt,Bt,Cn){Cn===!0&&(at*=Bt,Xe*=Bt,xt*=Bt),Je.set(at,Xe,xt,Bt),gt.equals(Je)===!1&&(n.clearColor(at,Xe,xt,Bt),gt.copy(Je))},reset:function(){he=!1,ot=null,gt.set(-1,0,0,0)}}}function r(){let he=!1,Je=!1,ot=null,gt=null,at=null;return{setReversed:function(Xe){if(Je!==Xe){const xt=e.get("EXT_clip_control");Xe?xt.clipControlEXT(xt.LOWER_LEFT_EXT,xt.ZERO_TO_ONE_EXT):xt.clipControlEXT(xt.LOWER_LEFT_EXT,xt.NEGATIVE_ONE_TO_ONE_EXT),Je=Xe;const Bt=at;at=null,this.setClear(Bt)}},getReversed:function(){return Je},setTest:function(Xe){Xe?we(n.DEPTH_TEST):tt(n.DEPTH_TEST)},setMask:function(Xe){ot!==Xe&&!he&&(n.depthMask(Xe),ot=Xe)},setFunc:function(Xe){if(Je&&(Xe=oDe[Xe]),gt!==Xe){switch(Xe){case E2:n.depthFunc(n.NEVER);break;case b2:n.depthFunc(n.ALWAYS);break;case A2:n.depthFunc(n.LESS);break;case Am:n.depthFunc(n.LEQUAL);break;case T2:n.depthFunc(n.EQUAL);break;case C2:n.depthFunc(n.GEQUAL);break;case M2:n.depthFunc(n.GREATER);break;case I2:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}gt=Xe}},setLocked:function(Xe){he=Xe},setClear:function(Xe){at!==Xe&&(Je&&(Xe=1-Xe),n.clearDepth(Xe),at=Xe)},reset:function(){he=!1,ot=null,gt=null,at=null,Je=!1}}}function i(){let he=!1,Je=null,ot=null,gt=null,at=null,Xe=null,xt=null,Bt=null,Cn=null;return{setTest:function(xn){he||(xn?we(n.STENCIL_TEST):tt(n.STENCIL_TEST))},setMask:function(xn){Je!==xn&&!he&&(n.stencilMask(xn),Je=xn)},setFunc:function(xn,$r,Kn){(ot!==xn||gt!==$r||at!==Kn)&&(n.stencilFunc(xn,$r,Kn),ot=xn,gt=$r,at=Kn)},setOp:function(xn,$r,Kn){(Xe!==xn||xt!==$r||Bt!==Kn)&&(n.stencilOp(xn,$r,Kn),Xe=xn,xt=$r,Bt=Kn)},setLocked:function(xn){he=xn},setClear:function(xn){Cn!==xn&&(n.clearStencil(xn),Cn=xn)},reset:function(){he=!1,Je=null,ot=null,gt=null,at=null,Xe=null,xt=null,Bt=null,Cn=null}}}const s=new t,o=new r,a=new i,l=new WeakMap,c=new WeakMap;let u={},h={},f=new WeakMap,p=[],v=null,_=!1,S=null,x=null,E=null,b=null,M=null,k=null,B=null,P=new Dt(0,0,0),N=0,R=!1,I=null,U=null,H=null,W=null,K=null;const te=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let se=!1,le=0;const X=n.getParameter(n.VERSION);X.indexOf("WebGL")!==-1?(le=parseFloat(/^WebGL (\d)/.exec(X)[1]),se=le>=1):X.indexOf("OpenGL ES")!==-1&&(le=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),se=le>=2);let ce=null,oe={};const fe=n.getParameter(n.SCISSOR_BOX),De=n.getParameter(n.VIEWPORT),We=new sr().fromArray(fe),Qe=new sr().fromArray(De);function ve(he,Je,ot,gt){const at=new Uint8Array(4),Xe=n.createTexture();n.bindTexture(he,Xe),n.texParameteri(he,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(he,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let xt=0;xt<ot;xt++)he===n.TEXTURE_3D||he===n.TEXTURE_2D_ARRAY?n.texImage3D(Je,0,n.RGBA,1,1,gt,0,n.RGBA,n.UNSIGNED_BYTE,at):n.texImage2D(Je+xt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,at);return Xe}const Ie={};Ie[n.TEXTURE_2D]=ve(n.TEXTURE_2D,n.TEXTURE_2D,1),Ie[n.TEXTURE_CUBE_MAP]=ve(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ie[n.TEXTURE_2D_ARRAY]=ve(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ie[n.TEXTURE_3D]=ve(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),we(n.DEPTH_TEST),o.setFunc(Am),qe(!1),ze(VN),we(n.CULL_FACE),Be(hh);function we(he){u[he]!==!0&&(n.enable(he),u[he]=!0)}function tt(he){u[he]!==!1&&(n.disable(he),u[he]=!1)}function Ke(he,Je){return h[he]!==Je?(n.bindFramebuffer(he,Je),h[he]=Je,he===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=Je),he===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=Je),!0):!1}function Me(he,Je){let ot=p,gt=!1;if(he){ot=f.get(Je),ot===void 0&&(ot=[],f.set(Je,ot));const at=he.textures;if(ot.length!==at.length||ot[0]!==n.COLOR_ATTACHMENT0){for(let Xe=0,xt=at.length;Xe<xt;Xe++)ot[Xe]=n.COLOR_ATTACHMENT0+Xe;ot.length=at.length,gt=!0}}else ot[0]!==n.BACK&&(ot[0]=n.BACK,gt=!0);gt&&n.drawBuffers(ot)}function Ye(he){return v!==he?(n.useProgram(he),v=he,!0):!1}const Pe={[Rd]:n.FUNC_ADD,[gQ]:n.FUNC_SUBTRACT,[vQ]:n.FUNC_REVERSE_SUBTRACT};Pe[yQ]=n.MIN,Pe[xQ]=n.MAX;const ne={[_Q]:n.ZERO,[wQ]:n.ONE,[SQ]:n.SRC_COLOR,[w2]:n.SRC_ALPHA,[MQ]:n.SRC_ALPHA_SATURATE,[TQ]:n.DST_COLOR,[bQ]:n.DST_ALPHA,[EQ]:n.ONE_MINUS_SRC_COLOR,[S2]:n.ONE_MINUS_SRC_ALPHA,[CQ]:n.ONE_MINUS_DST_COLOR,[AQ]:n.ONE_MINUS_DST_ALPHA,[IQ]:n.CONSTANT_COLOR,[PQ]:n.ONE_MINUS_CONSTANT_COLOR,[RQ]:n.CONSTANT_ALPHA,[NQ]:n.ONE_MINUS_CONSTANT_ALPHA};function Be(he,Je,ot,gt,at,Xe,xt,Bt,Cn,xn){if(he===hh){_===!0&&(tt(n.BLEND),_=!1);return}if(_===!1&&(we(n.BLEND),_=!0),he!==mQ){if(he!==S||xn!==R){if((x!==Rd||M!==Rd)&&(n.blendEquation(n.FUNC_ADD),x=Rd,M=Rd),xn)switch(he){case nm:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case zN:n.blendFunc(n.ONE,n.ONE);break;case HN:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case WN:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}else switch(he){case nm:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case zN:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case HN:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case WN:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}E=null,b=null,k=null,B=null,P.set(0,0,0),N=0,S=he,R=xn}return}at=at||Je,Xe=Xe||ot,xt=xt||gt,(Je!==x||at!==M)&&(n.blendEquationSeparate(Pe[Je],Pe[at]),x=Je,M=at),(ot!==E||gt!==b||Xe!==k||xt!==B)&&(n.blendFuncSeparate(ne[ot],ne[gt],ne[Xe],ne[xt]),E=ot,b=gt,k=Xe,B=xt),(Bt.equals(P)===!1||Cn!==N)&&(n.blendColor(Bt.r,Bt.g,Bt.b,Cn),P.copy(Bt),N=Cn),S=he,R=!1}function Re(he,Je){he.side===Zc?tt(n.CULL_FACE):we(n.CULL_FACE);let ot=he.side===Yo;Je&&(ot=!ot),qe(ot),he.blending===nm&&he.transparent===!1?Be(hh):Be(he.blending,he.blendEquation,he.blendSrc,he.blendDst,he.blendEquationAlpha,he.blendSrcAlpha,he.blendDstAlpha,he.blendColor,he.blendAlpha,he.premultipliedAlpha),o.setFunc(he.depthFunc),o.setTest(he.depthTest),o.setMask(he.depthWrite),s.setMask(he.colorWrite);const gt=he.stencilWrite;a.setTest(gt),gt&&(a.setMask(he.stencilWriteMask),a.setFunc(he.stencilFunc,he.stencilRef,he.stencilFuncMask),a.setOp(he.stencilFail,he.stencilZFail,he.stencilZPass)),be(he.polygonOffset,he.polygonOffsetFactor,he.polygonOffsetUnits),he.alphaToCoverage===!0?we(n.SAMPLE_ALPHA_TO_COVERAGE):tt(n.SAMPLE_ALPHA_TO_COVERAGE)}function qe(he){I!==he&&(he?n.frontFace(n.CW):n.frontFace(n.CCW),I=he)}function ze(he){he!==dQ?(we(n.CULL_FACE),he!==U&&(he===VN?n.cullFace(n.BACK):he===fQ?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):tt(n.CULL_FACE),U=he}function J(he){he!==H&&(se&&n.lineWidth(he),H=he)}function be(he,Je,ot){he?(we(n.POLYGON_OFFSET_FILL),(W!==Je||K!==ot)&&(n.polygonOffset(Je,ot),W=Je,K=ot)):tt(n.POLYGON_OFFSET_FILL)}function Fe(he){he?we(n.SCISSOR_TEST):tt(n.SCISSOR_TEST)}function rt(he){he===void 0&&(he=n.TEXTURE0+te-1),ce!==he&&(n.activeTexture(he),ce=he)}function pt(he,Je,ot){ot===void 0&&(ce===null?ot=n.TEXTURE0+te-1:ot=ce);let gt=oe[ot];gt===void 0&&(gt={type:void 0,texture:void 0},oe[ot]=gt),(gt.type!==he||gt.texture!==Je)&&(ce!==ot&&(n.activeTexture(ot),ce=ot),n.bindTexture(he,Je||Ie[he]),gt.type=he,gt.texture=Je)}function ee(){const he=oe[ce];he!==void 0&&he.type!==void 0&&(n.bindTexture(he.type,null),he.type=void 0,he.texture=void 0)}function q(){try{n.compressedTexImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function me(){try{n.compressedTexImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function pe(){try{n.texSubImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ve(){try{n.texSubImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ue(){try{n.compressedTexSubImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Mt(){try{n.compressedTexSubImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function lt(){try{n.texStorage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function bt(){try{n.texStorage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function wt(){try{n.texImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function st(){try{n.texImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function mt(he){We.equals(he)===!1&&(n.scissor(he.x,he.y,he.z,he.w),We.copy(he))}function Wt(he){Qe.equals(he)===!1&&(n.viewport(he.x,he.y,he.z,he.w),Qe.copy(he))}function ue(he,Je){let ot=c.get(Je);ot===void 0&&(ot=new WeakMap,c.set(Je,ot));let gt=ot.get(he);gt===void 0&&(gt=n.getUniformBlockIndex(Je,he.name),ot.set(he,gt))}function Te(he,Je){const gt=c.get(Je).get(he);l.get(Je)!==gt&&(n.uniformBlockBinding(Je,gt,he.__bindingPointIndex),l.set(Je,gt))}function ut(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},ce=null,oe={},h={},f=new WeakMap,p=[],v=null,_=!1,S=null,x=null,E=null,b=null,M=null,k=null,B=null,P=new Dt(0,0,0),N=0,R=!1,I=null,U=null,H=null,W=null,K=null,We.set(0,0,n.canvas.width,n.canvas.height),Qe.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:we,disable:tt,bindFramebuffer:Ke,drawBuffers:Me,useProgram:Ye,setBlending:Be,setMaterial:Re,setFlipSided:qe,setCullFace:ze,setLineWidth:J,setPolygonOffset:be,setScissorTest:Fe,activeTexture:rt,bindTexture:pt,unbindTexture:ee,compressedTexImage2D:q,compressedTexImage3D:me,texImage2D:wt,texImage3D:st,updateUBOMapping:ue,uniformBlockBinding:Te,texStorage2D:lt,texStorage3D:bt,texSubImage2D:pe,texSubImage3D:Ve,compressedTexSubImage2D:Ue,compressedTexSubImage3D:Mt,scissor:mt,viewport:Wt,reset:ut}}function lDe(n,e,t,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Ze,u=new WeakMap;let h;const f=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(ee,q){return p?new OffscreenCanvas(ee,q):Jx("canvas")}function _(ee,q,me){let pe=1;const Ve=pt(ee);if((Ve.width>me||Ve.height>me)&&(pe=me/Math.max(Ve.width,Ve.height)),pe<1)if(typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ee instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ee instanceof ImageBitmap||typeof VideoFrame<"u"&&ee instanceof VideoFrame){const Ue=Math.floor(pe*Ve.width),Mt=Math.floor(pe*Ve.height);h===void 0&&(h=v(Ue,Mt));const lt=q?v(Ue,Mt):h;return lt.width=Ue,lt.height=Mt,lt.getContext("2d").drawImage(ee,0,0,Ue,Mt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ve.width+"x"+Ve.height+") to ("+Ue+"x"+Mt+")."),lt}else return"data"in ee&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ve.width+"x"+Ve.height+")."),ee;return ee}function S(ee){return ee.generateMipmaps}function x(ee){n.generateMipmap(ee)}function E(ee){return ee.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:ee.isWebGL3DRenderTarget?n.TEXTURE_3D:ee.isWebGLArrayRenderTarget||ee.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function b(ee,q,me,pe,Ve=!1){if(ee!==null){if(n[ee]!==void 0)return n[ee];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ee+"'")}let Ue=q;if(q===n.RED&&(me===n.FLOAT&&(Ue=n.R32F),me===n.HALF_FLOAT&&(Ue=n.R16F),me===n.UNSIGNED_BYTE&&(Ue=n.R8)),q===n.RED_INTEGER&&(me===n.UNSIGNED_BYTE&&(Ue=n.R8UI),me===n.UNSIGNED_SHORT&&(Ue=n.R16UI),me===n.UNSIGNED_INT&&(Ue=n.R32UI),me===n.BYTE&&(Ue=n.R8I),me===n.SHORT&&(Ue=n.R16I),me===n.INT&&(Ue=n.R32I)),q===n.RG&&(me===n.FLOAT&&(Ue=n.RG32F),me===n.HALF_FLOAT&&(Ue=n.RG16F),me===n.UNSIGNED_BYTE&&(Ue=n.RG8)),q===n.RG_INTEGER&&(me===n.UNSIGNED_BYTE&&(Ue=n.RG8UI),me===n.UNSIGNED_SHORT&&(Ue=n.RG16UI),me===n.UNSIGNED_INT&&(Ue=n.RG32UI),me===n.BYTE&&(Ue=n.RG8I),me===n.SHORT&&(Ue=n.RG16I),me===n.INT&&(Ue=n.RG32I)),q===n.RGB_INTEGER&&(me===n.UNSIGNED_BYTE&&(Ue=n.RGB8UI),me===n.UNSIGNED_SHORT&&(Ue=n.RGB16UI),me===n.UNSIGNED_INT&&(Ue=n.RGB32UI),me===n.BYTE&&(Ue=n.RGB8I),me===n.SHORT&&(Ue=n.RGB16I),me===n.INT&&(Ue=n.RGB32I)),q===n.RGBA_INTEGER&&(me===n.UNSIGNED_BYTE&&(Ue=n.RGBA8UI),me===n.UNSIGNED_SHORT&&(Ue=n.RGBA16UI),me===n.UNSIGNED_INT&&(Ue=n.RGBA32UI),me===n.BYTE&&(Ue=n.RGBA8I),me===n.SHORT&&(Ue=n.RGBA16I),me===n.INT&&(Ue=n.RGBA32I)),q===n.RGB&&me===n.UNSIGNED_INT_5_9_9_9_REV&&(Ue=n.RGB9_E5),q===n.RGBA){const Mt=Ve?Zx:nr.getTransfer(pe);me===n.FLOAT&&(Ue=n.RGBA32F),me===n.HALF_FLOAT&&(Ue=n.RGBA16F),me===n.UNSIGNED_BYTE&&(Ue=Mt===Ar?n.SRGB8_ALPHA8:n.RGBA8),me===n.UNSIGNED_SHORT_4_4_4_4&&(Ue=n.RGBA4),me===n.UNSIGNED_SHORT_5_5_5_1&&(Ue=n.RGB5_A1)}return(Ue===n.R16F||Ue===n.R32F||Ue===n.RG16F||Ue===n.RG32F||Ue===n.RGBA16F||Ue===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ue}function M(ee,q){let me;return ee?q===null||q===Ch||q===Ev?me=n.DEPTH24_STENCIL8:q===Sa?me=n.DEPTH32F_STENCIL8:q===Sv&&(me=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):q===null||q===Ch||q===Ev?me=n.DEPTH_COMPONENT24:q===Sa?me=n.DEPTH_COMPONENT32F:q===Sv&&(me=n.DEPTH_COMPONENT16),me}function k(ee,q){return S(ee)===!0||ee.isFramebufferTexture&&ee.minFilter!==zs&&ee.minFilter!==us?Math.log2(Math.max(q.width,q.height))+1:ee.mipmaps!==void 0&&ee.mipmaps.length>0?ee.mipmaps.length:ee.isCompressedTexture&&Array.isArray(ee.image)?q.mipmaps.length:1}function B(ee){const q=ee.target;q.removeEventListener("dispose",B),N(q),q.isVideoTexture&&u.delete(q)}function P(ee){const q=ee.target;q.removeEventListener("dispose",P),I(q)}function N(ee){const q=r.get(ee);if(q.__webglInit===void 0)return;const me=ee.source,pe=f.get(me);if(pe){const Ve=pe[q.__cacheKey];Ve.usedTimes--,Ve.usedTimes===0&&R(ee),Object.keys(pe).length===0&&f.delete(me)}r.remove(ee)}function R(ee){const q=r.get(ee);n.deleteTexture(q.__webglTexture);const me=ee.source,pe=f.get(me);delete pe[q.__cacheKey],o.memory.textures--}function I(ee){const q=r.get(ee);if(ee.depthTexture&&(ee.depthTexture.dispose(),r.remove(ee.depthTexture)),ee.isWebGLCubeRenderTarget)for(let pe=0;pe<6;pe++){if(Array.isArray(q.__webglFramebuffer[pe]))for(let Ve=0;Ve<q.__webglFramebuffer[pe].length;Ve++)n.deleteFramebuffer(q.__webglFramebuffer[pe][Ve]);else n.deleteFramebuffer(q.__webglFramebuffer[pe]);q.__webglDepthbuffer&&n.deleteRenderbuffer(q.__webglDepthbuffer[pe])}else{if(Array.isArray(q.__webglFramebuffer))for(let pe=0;pe<q.__webglFramebuffer.length;pe++)n.deleteFramebuffer(q.__webglFramebuffer[pe]);else n.deleteFramebuffer(q.__webglFramebuffer);if(q.__webglDepthbuffer&&n.deleteRenderbuffer(q.__webglDepthbuffer),q.__webglMultisampledFramebuffer&&n.deleteFramebuffer(q.__webglMultisampledFramebuffer),q.__webglColorRenderbuffer)for(let pe=0;pe<q.__webglColorRenderbuffer.length;pe++)q.__webglColorRenderbuffer[pe]&&n.deleteRenderbuffer(q.__webglColorRenderbuffer[pe]);q.__webglDepthRenderbuffer&&n.deleteRenderbuffer(q.__webglDepthRenderbuffer)}const me=ee.textures;for(let pe=0,Ve=me.length;pe<Ve;pe++){const Ue=r.get(me[pe]);Ue.__webglTexture&&(n.deleteTexture(Ue.__webglTexture),o.memory.textures--),r.remove(me[pe])}r.remove(ee)}let U=0;function H(){U=0}function W(){const ee=U;return ee>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ee+" texture units while this GPU supports only "+i.maxTextures),U+=1,ee}function K(ee){const q=[];return q.push(ee.wrapS),q.push(ee.wrapT),q.push(ee.wrapR||0),q.push(ee.magFilter),q.push(ee.minFilter),q.push(ee.anisotropy),q.push(ee.internalFormat),q.push(ee.format),q.push(ee.type),q.push(ee.generateMipmaps),q.push(ee.premultiplyAlpha),q.push(ee.flipY),q.push(ee.unpackAlignment),q.push(ee.colorSpace),q.join()}function te(ee,q){const me=r.get(ee);if(ee.isVideoTexture&&Fe(ee),ee.isRenderTargetTexture===!1&&ee.isExternalTexture!==!0&&ee.version>0&&me.__version!==ee.version){const pe=ee.image;if(pe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(pe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ie(me,ee,q);return}}else ee.isExternalTexture&&(me.__webglTexture=ee.sourceTexture?ee.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,me.__webglTexture,n.TEXTURE0+q)}function se(ee,q){const me=r.get(ee);if(ee.isRenderTargetTexture===!1&&ee.version>0&&me.__version!==ee.version){Ie(me,ee,q);return}t.bindTexture(n.TEXTURE_2D_ARRAY,me.__webglTexture,n.TEXTURE0+q)}function le(ee,q){const me=r.get(ee);if(ee.isRenderTargetTexture===!1&&ee.version>0&&me.__version!==ee.version){Ie(me,ee,q);return}t.bindTexture(n.TEXTURE_3D,me.__webglTexture,n.TEXTURE0+q)}function X(ee,q){const me=r.get(ee);if(ee.version>0&&me.__version!==ee.version){we(me,ee,q);return}t.bindTexture(n.TEXTURE_CUBE_MAP,me.__webglTexture,n.TEXTURE0+q)}const ce={[Xx]:n.REPEAT,[Sl]:n.CLAMP_TO_EDGE,[qx]:n.MIRRORED_REPEAT},oe={[zs]:n.NEAREST,[ZO]:n.NEAREST_MIPMAP_NEAREST,[d0]:n.NEAREST_MIPMAP_LINEAR,[us]:n.LINEAR,[X1]:n.LINEAR_MIPMAP_NEAREST,[Jc]:n.LINEAR_MIPMAP_LINEAR},fe={[qQ]:n.NEVER,[eJ]:n.ALWAYS,[YQ]:n.LESS,[o4]:n.LEQUAL,[KQ]:n.EQUAL,[JQ]:n.GEQUAL,[ZQ]:n.GREATER,[QQ]:n.NOTEQUAL};function De(ee,q){if(q.type===Sa&&e.has("OES_texture_float_linear")===!1&&(q.magFilter===us||q.magFilter===X1||q.magFilter===d0||q.magFilter===Jc||q.minFilter===us||q.minFilter===X1||q.minFilter===d0||q.minFilter===Jc)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(ee,n.TEXTURE_WRAP_S,ce[q.wrapS]),n.texParameteri(ee,n.TEXTURE_WRAP_T,ce[q.wrapT]),(ee===n.TEXTURE_3D||ee===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ee,n.TEXTURE_WRAP_R,ce[q.wrapR]),n.texParameteri(ee,n.TEXTURE_MAG_FILTER,oe[q.magFilter]),n.texParameteri(ee,n.TEXTURE_MIN_FILTER,oe[q.minFilter]),q.compareFunction&&(n.texParameteri(ee,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(ee,n.TEXTURE_COMPARE_FUNC,fe[q.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(q.magFilter===zs||q.minFilter!==d0&&q.minFilter!==Jc||q.type===Sa&&e.has("OES_texture_float_linear")===!1)return;if(q.anisotropy>1||r.get(q).__currentAnisotropy){const me=e.get("EXT_texture_filter_anisotropic");n.texParameterf(ee,me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(q.anisotropy,i.getMaxAnisotropy())),r.get(q).__currentAnisotropy=q.anisotropy}}}function We(ee,q){let me=!1;ee.__webglInit===void 0&&(ee.__webglInit=!0,q.addEventListener("dispose",B));const pe=q.source;let Ve=f.get(pe);Ve===void 0&&(Ve={},f.set(pe,Ve));const Ue=K(q);if(Ue!==ee.__cacheKey){Ve[Ue]===void 0&&(Ve[Ue]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,me=!0),Ve[Ue].usedTimes++;const Mt=Ve[ee.__cacheKey];Mt!==void 0&&(Ve[ee.__cacheKey].usedTimes--,Mt.usedTimes===0&&R(q)),ee.__cacheKey=Ue,ee.__webglTexture=Ve[Ue].texture}return me}function Qe(ee,q,me){return Math.floor(Math.floor(ee/me)/q)}function ve(ee,q,me,pe){const Ue=ee.updateRanges;if(Ue.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,q.width,q.height,me,pe,q.data);else{Ue.sort((st,mt)=>st.start-mt.start);let Mt=0;for(let st=1;st<Ue.length;st++){const mt=Ue[Mt],Wt=Ue[st],ue=mt.start+mt.count,Te=Qe(Wt.start,q.width,4),ut=Qe(mt.start,q.width,4);Wt.start<=ue+1&&Te===ut&&Qe(Wt.start+Wt.count-1,q.width,4)===Te?mt.count=Math.max(mt.count,Wt.start+Wt.count-mt.start):(++Mt,Ue[Mt]=Wt)}Ue.length=Mt+1;const lt=n.getParameter(n.UNPACK_ROW_LENGTH),bt=n.getParameter(n.UNPACK_SKIP_PIXELS),wt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,q.width);for(let st=0,mt=Ue.length;st<mt;st++){const Wt=Ue[st],ue=Math.floor(Wt.start/4),Te=Math.ceil(Wt.count/4),ut=ue%q.width,he=Math.floor(ue/q.width),Je=Te,ot=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,ut),n.pixelStorei(n.UNPACK_SKIP_ROWS,he),t.texSubImage2D(n.TEXTURE_2D,0,ut,he,Je,ot,me,pe,q.data)}ee.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,lt),n.pixelStorei(n.UNPACK_SKIP_PIXELS,bt),n.pixelStorei(n.UNPACK_SKIP_ROWS,wt)}}function Ie(ee,q,me){let pe=n.TEXTURE_2D;(q.isDataArrayTexture||q.isCompressedArrayTexture)&&(pe=n.TEXTURE_2D_ARRAY),q.isData3DTexture&&(pe=n.TEXTURE_3D);const Ve=We(ee,q),Ue=q.source;t.bindTexture(pe,ee.__webglTexture,n.TEXTURE0+me);const Mt=r.get(Ue);if(Ue.version!==Mt.__version||Ve===!0){t.activeTexture(n.TEXTURE0+me);const lt=nr.getPrimaries(nr.workingColorSpace),bt=q.colorSpace===th?null:nr.getPrimaries(q.colorSpace),wt=q.colorSpace===th||lt===bt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,wt);let st=_(q.image,!1,i.maxTextureSize);st=rt(q,st);const mt=s.convert(q.format,q.colorSpace),Wt=s.convert(q.type);let ue=b(q.internalFormat,mt,Wt,q.colorSpace,q.isVideoTexture);De(pe,q);let Te;const ut=q.mipmaps,he=q.isVideoTexture!==!0,Je=Mt.__version===void 0||Ve===!0,ot=Ue.dataReady,gt=k(q,st);if(q.isDepthTexture)ue=M(q.format===Av,q.type),Je&&(he?t.texStorage2D(n.TEXTURE_2D,1,ue,st.width,st.height):t.texImage2D(n.TEXTURE_2D,0,ue,st.width,st.height,0,mt,Wt,null));else if(q.isDataTexture)if(ut.length>0){he&&Je&&t.texStorage2D(n.TEXTURE_2D,gt,ue,ut[0].width,ut[0].height);for(let at=0,Xe=ut.length;at<Xe;at++)Te=ut[at],he?ot&&t.texSubImage2D(n.TEXTURE_2D,at,0,0,Te.width,Te.height,mt,Wt,Te.data):t.texImage2D(n.TEXTURE_2D,at,ue,Te.width,Te.height,0,mt,Wt,Te.data);q.generateMipmaps=!1}else he?(Je&&t.texStorage2D(n.TEXTURE_2D,gt,ue,st.width,st.height),ot&&ve(q,st,mt,Wt)):t.texImage2D(n.TEXTURE_2D,0,ue,st.width,st.height,0,mt,Wt,st.data);else if(q.isCompressedTexture)if(q.isCompressedArrayTexture){he&&Je&&t.texStorage3D(n.TEXTURE_2D_ARRAY,gt,ue,ut[0].width,ut[0].height,st.depth);for(let at=0,Xe=ut.length;at<Xe;at++)if(Te=ut[at],q.format!==_o)if(mt!==null)if(he){if(ot)if(q.layerUpdates.size>0){const xt=t3(Te.width,Te.height,q.format,q.type);for(const Bt of q.layerUpdates){const Cn=Te.data.subarray(Bt*xt/Te.data.BYTES_PER_ELEMENT,(Bt+1)*xt/Te.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,at,0,0,Bt,Te.width,Te.height,1,mt,Cn)}q.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,at,0,0,0,Te.width,Te.height,st.depth,mt,Te.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,at,ue,Te.width,Te.height,st.depth,0,Te.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else he?ot&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,at,0,0,0,Te.width,Te.height,st.depth,mt,Wt,Te.data):t.texImage3D(n.TEXTURE_2D_ARRAY,at,ue,Te.width,Te.height,st.depth,0,mt,Wt,Te.data)}else{he&&Je&&t.texStorage2D(n.TEXTURE_2D,gt,ue,ut[0].width,ut[0].height);for(let at=0,Xe=ut.length;at<Xe;at++)Te=ut[at],q.format!==_o?mt!==null?he?ot&&t.compressedTexSubImage2D(n.TEXTURE_2D,at,0,0,Te.width,Te.height,mt,Te.data):t.compressedTexImage2D(n.TEXTURE_2D,at,ue,Te.width,Te.height,0,Te.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):he?ot&&t.texSubImage2D(n.TEXTURE_2D,at,0,0,Te.width,Te.height,mt,Wt,Te.data):t.texImage2D(n.TEXTURE_2D,at,ue,Te.width,Te.height,0,mt,Wt,Te.data)}else if(q.isDataArrayTexture)if(he){if(Je&&t.texStorage3D(n.TEXTURE_2D_ARRAY,gt,ue,st.width,st.height,st.depth),ot)if(q.layerUpdates.size>0){const at=t3(st.width,st.height,q.format,q.type);for(const Xe of q.layerUpdates){const xt=st.data.subarray(Xe*at/st.data.BYTES_PER_ELEMENT,(Xe+1)*at/st.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Xe,st.width,st.height,1,mt,Wt,xt)}q.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,st.width,st.height,st.depth,mt,Wt,st.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ue,st.width,st.height,st.depth,0,mt,Wt,st.data);else if(q.isData3DTexture)he?(Je&&t.texStorage3D(n.TEXTURE_3D,gt,ue,st.width,st.height,st.depth),ot&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,st.width,st.height,st.depth,mt,Wt,st.data)):t.texImage3D(n.TEXTURE_3D,0,ue,st.width,st.height,st.depth,0,mt,Wt,st.data);else if(q.isFramebufferTexture){if(Je)if(he)t.texStorage2D(n.TEXTURE_2D,gt,ue,st.width,st.height);else{let at=st.width,Xe=st.height;for(let xt=0;xt<gt;xt++)t.texImage2D(n.TEXTURE_2D,xt,ue,at,Xe,0,mt,Wt,null),at>>=1,Xe>>=1}}else if(ut.length>0){if(he&&Je){const at=pt(ut[0]);t.texStorage2D(n.TEXTURE_2D,gt,ue,at.width,at.height)}for(let at=0,Xe=ut.length;at<Xe;at++)Te=ut[at],he?ot&&t.texSubImage2D(n.TEXTURE_2D,at,0,0,mt,Wt,Te):t.texImage2D(n.TEXTURE_2D,at,ue,mt,Wt,Te);q.generateMipmaps=!1}else if(he){if(Je){const at=pt(st);t.texStorage2D(n.TEXTURE_2D,gt,ue,at.width,at.height)}ot&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,mt,Wt,st)}else t.texImage2D(n.TEXTURE_2D,0,ue,mt,Wt,st);S(q)&&x(pe),Mt.__version=Ue.version,q.onUpdate&&q.onUpdate(q)}ee.__version=q.version}function we(ee,q,me){if(q.image.length!==6)return;const pe=We(ee,q),Ve=q.source;t.bindTexture(n.TEXTURE_CUBE_MAP,ee.__webglTexture,n.TEXTURE0+me);const Ue=r.get(Ve);if(Ve.version!==Ue.__version||pe===!0){t.activeTexture(n.TEXTURE0+me);const Mt=nr.getPrimaries(nr.workingColorSpace),lt=q.colorSpace===th?null:nr.getPrimaries(q.colorSpace),bt=q.colorSpace===th||Mt===lt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,bt);const wt=q.isCompressedTexture||q.image[0].isCompressedTexture,st=q.image[0]&&q.image[0].isDataTexture,mt=[];for(let Xe=0;Xe<6;Xe++)!wt&&!st?mt[Xe]=_(q.image[Xe],!0,i.maxCubemapSize):mt[Xe]=st?q.image[Xe].image:q.image[Xe],mt[Xe]=rt(q,mt[Xe]);const Wt=mt[0],ue=s.convert(q.format,q.colorSpace),Te=s.convert(q.type),ut=b(q.internalFormat,ue,Te,q.colorSpace),he=q.isVideoTexture!==!0,Je=Ue.__version===void 0||pe===!0,ot=Ve.dataReady;let gt=k(q,Wt);De(n.TEXTURE_CUBE_MAP,q);let at;if(wt){he&&Je&&t.texStorage2D(n.TEXTURE_CUBE_MAP,gt,ut,Wt.width,Wt.height);for(let Xe=0;Xe<6;Xe++){at=mt[Xe].mipmaps;for(let xt=0;xt<at.length;xt++){const Bt=at[xt];q.format!==_o?ue!==null?he?ot&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,xt,0,0,Bt.width,Bt.height,ue,Bt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,xt,ut,Bt.width,Bt.height,0,Bt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):he?ot&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,xt,0,0,Bt.width,Bt.height,ue,Te,Bt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,xt,ut,Bt.width,Bt.height,0,ue,Te,Bt.data)}}}else{if(at=q.mipmaps,he&&Je){at.length>0&&gt++;const Xe=pt(mt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,gt,ut,Xe.width,Xe.height)}for(let Xe=0;Xe<6;Xe++)if(st){he?ot&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,0,0,mt[Xe].width,mt[Xe].height,ue,Te,mt[Xe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,ut,mt[Xe].width,mt[Xe].height,0,ue,Te,mt[Xe].data);for(let xt=0;xt<at.length;xt++){const Cn=at[xt].image[Xe].image;he?ot&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,xt+1,0,0,Cn.width,Cn.height,ue,Te,Cn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,xt+1,ut,Cn.width,Cn.height,0,ue,Te,Cn.data)}}else{he?ot&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,0,0,ue,Te,mt[Xe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,ut,ue,Te,mt[Xe]);for(let xt=0;xt<at.length;xt++){const Bt=at[xt];he?ot&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,xt+1,0,0,ue,Te,Bt.image[Xe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,xt+1,ut,ue,Te,Bt.image[Xe])}}}S(q)&&x(n.TEXTURE_CUBE_MAP),Ue.__version=Ve.version,q.onUpdate&&q.onUpdate(q)}ee.__version=q.version}function tt(ee,q,me,pe,Ve,Ue){const Mt=s.convert(me.format,me.colorSpace),lt=s.convert(me.type),bt=b(me.internalFormat,Mt,lt,me.colorSpace),wt=r.get(q),st=r.get(me);if(st.__renderTarget=q,!wt.__hasExternalTextures){const mt=Math.max(1,q.width>>Ue),Wt=Math.max(1,q.height>>Ue);Ve===n.TEXTURE_3D||Ve===n.TEXTURE_2D_ARRAY?t.texImage3D(Ve,Ue,bt,mt,Wt,q.depth,0,Mt,lt,null):t.texImage2D(Ve,Ue,bt,mt,Wt,0,Mt,lt,null)}t.bindFramebuffer(n.FRAMEBUFFER,ee),be(q)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,pe,Ve,st.__webglTexture,0,J(q)):(Ve===n.TEXTURE_2D||Ve>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ve<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,pe,Ve,st.__webglTexture,Ue),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ke(ee,q,me){if(n.bindRenderbuffer(n.RENDERBUFFER,ee),q.depthBuffer){const pe=q.depthTexture,Ve=pe&&pe.isDepthTexture?pe.type:null,Ue=M(q.stencilBuffer,Ve),Mt=q.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,lt=J(q);be(q)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,lt,Ue,q.width,q.height):me?n.renderbufferStorageMultisample(n.RENDERBUFFER,lt,Ue,q.width,q.height):n.renderbufferStorage(n.RENDERBUFFER,Ue,q.width,q.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Mt,n.RENDERBUFFER,ee)}else{const pe=q.textures;for(let Ve=0;Ve<pe.length;Ve++){const Ue=pe[Ve],Mt=s.convert(Ue.format,Ue.colorSpace),lt=s.convert(Ue.type),bt=b(Ue.internalFormat,Mt,lt,Ue.colorSpace),wt=J(q);me&&be(q)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,wt,bt,q.width,q.height):be(q)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,wt,bt,q.width,q.height):n.renderbufferStorage(n.RENDERBUFFER,bt,q.width,q.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Me(ee,q){if(q&&q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,ee),!(q.depthTexture&&q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const pe=r.get(q.depthTexture);pe.__renderTarget=q,(!pe.__webglTexture||q.depthTexture.image.width!==q.width||q.depthTexture.image.height!==q.height)&&(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),te(q.depthTexture,0);const Ve=pe.__webglTexture,Ue=J(q);if(q.depthTexture.format===bv)be(q)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ve,0,Ue):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ve,0);else if(q.depthTexture.format===Av)be(q)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ve,0,Ue):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ve,0);else throw new Error("Unknown depthTexture format")}function Ye(ee){const q=r.get(ee),me=ee.isWebGLCubeRenderTarget===!0;if(q.__boundDepthTexture!==ee.depthTexture){const pe=ee.depthTexture;if(q.__depthDisposeCallback&&q.__depthDisposeCallback(),pe){const Ve=()=>{delete q.__boundDepthTexture,delete q.__depthDisposeCallback,pe.removeEventListener("dispose",Ve)};pe.addEventListener("dispose",Ve),q.__depthDisposeCallback=Ve}q.__boundDepthTexture=pe}if(ee.depthTexture&&!q.__autoAllocateDepthBuffer){if(me)throw new Error("target.depthTexture not supported in Cube render targets");const pe=ee.texture.mipmaps;pe&&pe.length>0?Me(q.__webglFramebuffer[0],ee):Me(q.__webglFramebuffer,ee)}else if(me){q.__webglDepthbuffer=[];for(let pe=0;pe<6;pe++)if(t.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer[pe]),q.__webglDepthbuffer[pe]===void 0)q.__webglDepthbuffer[pe]=n.createRenderbuffer(),Ke(q.__webglDepthbuffer[pe],ee,!1);else{const Ve=ee.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ue=q.__webglDepthbuffer[pe];n.bindRenderbuffer(n.RENDERBUFFER,Ue),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ve,n.RENDERBUFFER,Ue)}}else{const pe=ee.texture.mipmaps;if(pe&&pe.length>0?t.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer),q.__webglDepthbuffer===void 0)q.__webglDepthbuffer=n.createRenderbuffer(),Ke(q.__webglDepthbuffer,ee,!1);else{const Ve=ee.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ue=q.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Ue),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ve,n.RENDERBUFFER,Ue)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Pe(ee,q,me){const pe=r.get(ee);q!==void 0&&tt(pe.__webglFramebuffer,ee,ee.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),me!==void 0&&Ye(ee)}function ne(ee){const q=ee.texture,me=r.get(ee),pe=r.get(q);ee.addEventListener("dispose",P);const Ve=ee.textures,Ue=ee.isWebGLCubeRenderTarget===!0,Mt=Ve.length>1;if(Mt||(pe.__webglTexture===void 0&&(pe.__webglTexture=n.createTexture()),pe.__version=q.version,o.memory.textures++),Ue){me.__webglFramebuffer=[];for(let lt=0;lt<6;lt++)if(q.mipmaps&&q.mipmaps.length>0){me.__webglFramebuffer[lt]=[];for(let bt=0;bt<q.mipmaps.length;bt++)me.__webglFramebuffer[lt][bt]=n.createFramebuffer()}else me.__webglFramebuffer[lt]=n.createFramebuffer()}else{if(q.mipmaps&&q.mipmaps.length>0){me.__webglFramebuffer=[];for(let lt=0;lt<q.mipmaps.length;lt++)me.__webglFramebuffer[lt]=n.createFramebuffer()}else me.__webglFramebuffer=n.createFramebuffer();if(Mt)for(let lt=0,bt=Ve.length;lt<bt;lt++){const wt=r.get(Ve[lt]);wt.__webglTexture===void 0&&(wt.__webglTexture=n.createTexture(),o.memory.textures++)}if(ee.samples>0&&be(ee)===!1){me.__webglMultisampledFramebuffer=n.createFramebuffer(),me.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,me.__webglMultisampledFramebuffer);for(let lt=0;lt<Ve.length;lt++){const bt=Ve[lt];me.__webglColorRenderbuffer[lt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,me.__webglColorRenderbuffer[lt]);const wt=s.convert(bt.format,bt.colorSpace),st=s.convert(bt.type),mt=b(bt.internalFormat,wt,st,bt.colorSpace,ee.isXRRenderTarget===!0),Wt=J(ee);n.renderbufferStorageMultisample(n.RENDERBUFFER,Wt,mt,ee.width,ee.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.RENDERBUFFER,me.__webglColorRenderbuffer[lt])}n.bindRenderbuffer(n.RENDERBUFFER,null),ee.depthBuffer&&(me.__webglDepthRenderbuffer=n.createRenderbuffer(),Ke(me.__webglDepthRenderbuffer,ee,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ue){t.bindTexture(n.TEXTURE_CUBE_MAP,pe.__webglTexture),De(n.TEXTURE_CUBE_MAP,q);for(let lt=0;lt<6;lt++)if(q.mipmaps&&q.mipmaps.length>0)for(let bt=0;bt<q.mipmaps.length;bt++)tt(me.__webglFramebuffer[lt][bt],ee,q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+lt,bt);else tt(me.__webglFramebuffer[lt],ee,q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+lt,0);S(q)&&x(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Mt){for(let lt=0,bt=Ve.length;lt<bt;lt++){const wt=Ve[lt],st=r.get(wt);let mt=n.TEXTURE_2D;(ee.isWebGL3DRenderTarget||ee.isWebGLArrayRenderTarget)&&(mt=ee.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(mt,st.__webglTexture),De(mt,wt),tt(me.__webglFramebuffer,ee,wt,n.COLOR_ATTACHMENT0+lt,mt,0),S(wt)&&x(mt)}t.unbindTexture()}else{let lt=n.TEXTURE_2D;if((ee.isWebGL3DRenderTarget||ee.isWebGLArrayRenderTarget)&&(lt=ee.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(lt,pe.__webglTexture),De(lt,q),q.mipmaps&&q.mipmaps.length>0)for(let bt=0;bt<q.mipmaps.length;bt++)tt(me.__webglFramebuffer[bt],ee,q,n.COLOR_ATTACHMENT0,lt,bt);else tt(me.__webglFramebuffer,ee,q,n.COLOR_ATTACHMENT0,lt,0);S(q)&&x(lt),t.unbindTexture()}ee.depthBuffer&&Ye(ee)}function Be(ee){const q=ee.textures;for(let me=0,pe=q.length;me<pe;me++){const Ve=q[me];if(S(Ve)){const Ue=E(ee),Mt=r.get(Ve).__webglTexture;t.bindTexture(Ue,Mt),x(Ue),t.unbindTexture()}}}const Re=[],qe=[];function ze(ee){if(ee.samples>0){if(be(ee)===!1){const q=ee.textures,me=ee.width,pe=ee.height;let Ve=n.COLOR_BUFFER_BIT;const Ue=ee.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Mt=r.get(ee),lt=q.length>1;if(lt)for(let wt=0;wt<q.length;wt++)t.bindFramebuffer(n.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+wt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Mt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+wt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Mt.__webglMultisampledFramebuffer);const bt=ee.texture.mipmaps;bt&&bt.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Mt.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Mt.__webglFramebuffer);for(let wt=0;wt<q.length;wt++){if(ee.resolveDepthBuffer&&(ee.depthBuffer&&(Ve|=n.DEPTH_BUFFER_BIT),ee.stencilBuffer&&ee.resolveStencilBuffer&&(Ve|=n.STENCIL_BUFFER_BIT)),lt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Mt.__webglColorRenderbuffer[wt]);const st=r.get(q[wt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,st,0)}n.blitFramebuffer(0,0,me,pe,0,0,me,pe,Ve,n.NEAREST),l===!0&&(Re.length=0,qe.length=0,Re.push(n.COLOR_ATTACHMENT0+wt),ee.depthBuffer&&ee.resolveDepthBuffer===!1&&(Re.push(Ue),qe.push(Ue),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,qe)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Re))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),lt)for(let wt=0;wt<q.length;wt++){t.bindFramebuffer(n.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+wt,n.RENDERBUFFER,Mt.__webglColorRenderbuffer[wt]);const st=r.get(q[wt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Mt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+wt,n.TEXTURE_2D,st,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Mt.__webglMultisampledFramebuffer)}else if(ee.depthBuffer&&ee.resolveDepthBuffer===!1&&l){const q=ee.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[q])}}}function J(ee){return Math.min(i.maxSamples,ee.samples)}function be(ee){const q=r.get(ee);return ee.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&q.__useRenderToTexture!==!1}function Fe(ee){const q=o.render.frame;u.get(ee)!==q&&(u.set(ee,q),ee.update())}function rt(ee,q){const me=ee.colorSpace,pe=ee.format,Ve=ee.type;return ee.isCompressedTexture===!0||ee.isVideoTexture===!0||me!==Tm&&me!==th&&(nr.getTransfer(me)===Ar?(pe!==_o||Ve!==Rl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",me)),q}function pt(ee){return typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement?(c.width=ee.naturalWidth||ee.width,c.height=ee.naturalHeight||ee.height):typeof VideoFrame<"u"&&ee instanceof VideoFrame?(c.width=ee.displayWidth,c.height=ee.displayHeight):(c.width=ee.width,c.height=ee.height),c}this.allocateTextureUnit=W,this.resetTextureUnits=H,this.setTexture2D=te,this.setTexture2DArray=se,this.setTexture3D=le,this.setTextureCube=X,this.rebindTextures=Pe,this.setupRenderTarget=ne,this.updateRenderTargetMipmap=Be,this.updateMultisampleRenderTarget=ze,this.setupDepthRenderbuffer=Ye,this.setupFrameBufferTexture=tt,this.useMultisampledRTT=be}function hee(n,e){function t(r,i=th){let s;const o=nr.getTransfer(i);if(r===Rl)return n.UNSIGNED_BYTE;if(r===LT)return n.UNSIGNED_SHORT_4_4_4_4;if(r===FT)return n.UNSIGNED_SHORT_5_5_5_1;if(r===e4)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===QO)return n.BYTE;if(r===JO)return n.SHORT;if(r===Sv)return n.UNSIGNED_SHORT;if(r===OT)return n.INT;if(r===Ch)return n.UNSIGNED_INT;if(r===Sa)return n.FLOAT;if(r===ty)return n.HALF_FLOAT;if(r===t4)return n.ALPHA;if(r===n4)return n.RGB;if(r===_o)return n.RGBA;if(r===bv)return n.DEPTH_COMPONENT;if(r===Av)return n.DEPTH_STENCIL;if(r===BT)return n.RED;if(r===$_)return n.RED_INTEGER;if(r===r4)return n.RG;if(r===UT)return n.RG_INTEGER;if(r===jT)return n.RGBA_INTEGER;if(r===q1||r===Y1||r===K1||r===Z1)if(o===Ar)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===q1)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Y1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===K1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Z1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===q1)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Y1)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===K1)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Z1)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===P2||r===R2||r===N2||r===D2)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===P2)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===R2)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===N2)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===D2)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===k2||r===O2||r===L2)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===k2||r===O2)return o===Ar?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===L2)return o===Ar?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===F2||r===B2||r===U2||r===j2||r===V2||r===z2||r===H2||r===W2||r===G2||r===$2||r===X2||r===q2||r===Y2||r===K2)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===F2)return o===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===B2)return o===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===U2)return o===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===j2)return o===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===V2)return o===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===z2)return o===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===H2)return o===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===W2)return o===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===G2)return o===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===$2)return o===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===X2)return o===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===q2)return o===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===Y2)return o===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===K2)return o===Ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Q1||r===Z2||r===Q2)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===Q1)return o===Ar?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===Z2)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===Q2)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===i4||r===J2||r===eA||r===tA)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===Q1)return s.COMPRESSED_RED_RGTC1_EXT;if(r===J2)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===eA)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===tA)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Ev?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}class dee extends ai{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}}const cDe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,uDe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class hDe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const r=new dee(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new _c({vertexShader:cDe,fragmentShader:uDe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ki(new ry(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class dDe extends Eu{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,h=null,f=null,p=null,v=null;const _=new hDe,S={},x=t.getContextAttributes();let E=null,b=null;const M=[],k=[],B=new Ze;let P=null;const N=new Bi;N.viewport=new sr;const R=new Bi;R.viewport=new sr;const I=[N,R],U=new eee;let H=null,W=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ve){let Ie=M[ve];return Ie===void 0&&(Ie=new nb,M[ve]=Ie),Ie.getTargetRaySpace()},this.getControllerGrip=function(ve){let Ie=M[ve];return Ie===void 0&&(Ie=new nb,M[ve]=Ie),Ie.getGripSpace()},this.getHand=function(ve){let Ie=M[ve];return Ie===void 0&&(Ie=new nb,M[ve]=Ie),Ie.getHandSpace()};function K(ve){const Ie=k.indexOf(ve.inputSource);if(Ie===-1)return;const we=M[Ie];we!==void 0&&(we.update(ve.inputSource,ve.frame,c||o),we.dispatchEvent({type:ve.type,data:ve.inputSource}))}function te(){i.removeEventListener("select",K),i.removeEventListener("selectstart",K),i.removeEventListener("selectend",K),i.removeEventListener("squeeze",K),i.removeEventListener("squeezestart",K),i.removeEventListener("squeezeend",K),i.removeEventListener("end",te),i.removeEventListener("inputsourceschange",se);for(let ve=0;ve<M.length;ve++){const Ie=k[ve];Ie!==null&&(k[ve]=null,M[ve].disconnect(Ie))}H=null,W=null,_.reset();for(const ve in S)delete S[ve];e.setRenderTarget(E),p=null,f=null,h=null,i=null,b=null,Qe.stop(),r.isPresenting=!1,e.setPixelRatio(P),e.setSize(B.width,B.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ve){s=ve,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ve){a=ve,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(ve){c=ve},this.getBaseLayer=function(){return f!==null?f:p},this.getBinding=function(){return h},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(ve){if(i=ve,i!==null){if(E=e.getRenderTarget(),i.addEventListener("select",K),i.addEventListener("selectstart",K),i.addEventListener("selectend",K),i.addEventListener("squeeze",K),i.addEventListener("squeezestart",K),i.addEventListener("squeezeend",K),i.addEventListener("end",te),i.addEventListener("inputsourceschange",se),x.xrCompatible!==!0&&await t.makeXRCompatible(),P=e.getPixelRatio(),e.getSize(B),typeof XRWebGLBinding<"u"&&(h=new XRWebGLBinding(i,t)),h!==null&&"createProjectionLayer"in XRWebGLBinding.prototype){let we=null,tt=null,Ke=null;x.depth&&(Ke=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,we=x.stencil?Av:bv,tt=x.stencil?Ev:Ch);const Me={colorFormat:t.RGBA8,depthFormat:Ke,scaleFactor:s};f=h.createProjectionLayer(Me),i.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),b=new _u(f.textureWidth,f.textureHeight,{format:_o,type:Rl,depthTexture:new m4(f.textureWidth,f.textureHeight,tt,void 0,void 0,void 0,void 0,void 0,void 0,we),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}else{const we={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(i,t,we),i.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),b=new _u(p.framebufferWidth,p.framebufferHeight,{format:_o,type:Rl,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}b.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),Qe.setContext(i),Qe.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return _.getDepthTexture()};function se(ve){for(let Ie=0;Ie<ve.removed.length;Ie++){const we=ve.removed[Ie],tt=k.indexOf(we);tt>=0&&(k[tt]=null,M[tt].disconnect(we))}for(let Ie=0;Ie<ve.added.length;Ie++){const we=ve.added[Ie];let tt=k.indexOf(we);if(tt===-1){for(let Me=0;Me<M.length;Me++)if(Me>=k.length){k.push(we),tt=Me;break}else if(k[Me]===null){k[Me]=we,tt=Me;break}if(tt===-1)break}const Ke=M[tt];Ke&&Ke.connect(we)}}const le=new re,X=new re;function ce(ve,Ie,we){le.setFromMatrixPosition(Ie.matrixWorld),X.setFromMatrixPosition(we.matrixWorld);const tt=le.distanceTo(X),Ke=Ie.projectionMatrix.elements,Me=we.projectionMatrix.elements,Ye=Ke[14]/(Ke[10]-1),Pe=Ke[14]/(Ke[10]+1),ne=(Ke[9]+1)/Ke[5],Be=(Ke[9]-1)/Ke[5],Re=(Ke[8]-1)/Ke[0],qe=(Me[8]+1)/Me[0],ze=Ye*Re,J=Ye*qe,be=tt/(-Re+qe),Fe=be*-Re;if(Ie.matrixWorld.decompose(ve.position,ve.quaternion,ve.scale),ve.translateX(Fe),ve.translateZ(be),ve.matrixWorld.compose(ve.position,ve.quaternion,ve.scale),ve.matrixWorldInverse.copy(ve.matrixWorld).invert(),Ke[10]===-1)ve.projectionMatrix.copy(Ie.projectionMatrix),ve.projectionMatrixInverse.copy(Ie.projectionMatrixInverse);else{const rt=Ye+be,pt=Pe+be,ee=ze-Fe,q=J+(tt-Fe),me=ne*Pe/pt*rt,pe=Be*Pe/pt*rt;ve.projectionMatrix.makePerspective(ee,q,me,pe,rt,pt),ve.projectionMatrixInverse.copy(ve.projectionMatrix).invert()}}function oe(ve,Ie){Ie===null?ve.matrixWorld.copy(ve.matrix):ve.matrixWorld.multiplyMatrices(Ie.matrixWorld,ve.matrix),ve.matrixWorldInverse.copy(ve.matrixWorld).invert()}this.updateCamera=function(ve){if(i===null)return;let Ie=ve.near,we=ve.far;_.texture!==null&&(_.depthNear>0&&(Ie=_.depthNear),_.depthFar>0&&(we=_.depthFar)),U.near=R.near=N.near=Ie,U.far=R.far=N.far=we,(H!==U.near||W!==U.far)&&(i.updateRenderState({depthNear:U.near,depthFar:U.far}),H=U.near,W=U.far),U.layers.mask=ve.layers.mask|6,N.layers.mask=U.layers.mask&3,R.layers.mask=U.layers.mask&5;const tt=ve.parent,Ke=U.cameras;oe(U,tt);for(let Me=0;Me<Ke.length;Me++)oe(Ke[Me],tt);Ke.length===2?ce(U,N,R):U.projectionMatrix.copy(N.projectionMatrix),fe(ve,U,tt)};function fe(ve,Ie,we){we===null?ve.matrix.copy(Ie.matrixWorld):(ve.matrix.copy(we.matrixWorld),ve.matrix.invert(),ve.matrix.multiply(Ie.matrixWorld)),ve.matrix.decompose(ve.position,ve.quaternion,ve.scale),ve.updateMatrixWorld(!0),ve.projectionMatrix.copy(Ie.projectionMatrix),ve.projectionMatrixInverse.copy(Ie.projectionMatrixInverse),ve.isPerspectiveCamera&&(ve.fov=Cv*2*Math.atan(1/ve.projectionMatrix.elements[5]),ve.zoom=1)}this.getCamera=function(){return U},this.getFoveation=function(){if(!(f===null&&p===null))return l},this.setFoveation=function(ve){l=ve,f!==null&&(f.fixedFoveation=ve),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=ve)},this.hasDepthSensing=function(){return _.texture!==null},this.getDepthSensingMesh=function(){return _.getMesh(U)},this.getCameraTexture=function(ve){return S[ve]};let De=null;function We(ve,Ie){if(u=Ie.getViewerPose(c||o),v=Ie,u!==null){const we=u.views;p!==null&&(e.setRenderTargetFramebuffer(b,p.framebuffer),e.setRenderTarget(b));let tt=!1;we.length!==U.cameras.length&&(U.cameras.length=0,tt=!0);for(let Pe=0;Pe<we.length;Pe++){const ne=we[Pe];let Be=null;if(p!==null)Be=p.getViewport(ne);else{const qe=h.getViewSubImage(f,ne);Be=qe.viewport,Pe===0&&(e.setRenderTargetTextures(b,qe.colorTexture,qe.depthStencilTexture),e.setRenderTarget(b))}let Re=I[Pe];Re===void 0&&(Re=new Bi,Re.layers.enable(Pe),Re.viewport=new sr,I[Pe]=Re),Re.matrix.fromArray(ne.transform.matrix),Re.matrix.decompose(Re.position,Re.quaternion,Re.scale),Re.projectionMatrix.fromArray(ne.projectionMatrix),Re.projectionMatrixInverse.copy(Re.projectionMatrix).invert(),Re.viewport.set(Be.x,Be.y,Be.width,Be.height),Pe===0&&(U.matrix.copy(Re.matrix),U.matrix.decompose(U.position,U.quaternion,U.scale)),tt===!0&&U.cameras.push(Re)}const Ke=i.enabledFeatures;if(Ke&&Ke.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&h){const Pe=h.getDepthInformation(we[0]);Pe&&Pe.isValid&&Pe.texture&&_.init(Pe,i.renderState)}if(Ke&&Ke.includes("camera-access")&&(e.state.unbindTexture(),h))for(let Pe=0;Pe<we.length;Pe++){const ne=we[Pe].camera;if(ne){let Be=S[ne];Be||(Be=new dee,S[ne]=Be);const Re=h.getCameraImage(ne);Be.sourceTexture=Re}}}for(let we=0;we<M.length;we++){const tt=k[we],Ke=M[we];tt!==null&&Ke!==void 0&&Ke.update(tt,Ie,c||o)}De&&De(ve,Ie),Ie.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:Ie}),v=null}const Qe=new oee;Qe.setAnimationLoop(We),this.setAnimationLoop=function(ve){De=ve},this.dispose=function(){}}}const mp=new Qa,fDe=new yn;function pDe(n,e){function t(S,x){S.matrixAutoUpdate===!0&&S.updateMatrix(),x.value.copy(S.matrix)}function r(S,x){x.color.getRGB(S.fogColor.value,sJ(n)),x.isFog?(S.fogNear.value=x.near,S.fogFar.value=x.far):x.isFogExp2&&(S.fogDensity.value=x.density)}function i(S,x,E,b,M){x.isMeshBasicMaterial||x.isMeshLambertMaterial?s(S,x):x.isMeshToonMaterial?(s(S,x),h(S,x)):x.isMeshPhongMaterial?(s(S,x),u(S,x)):x.isMeshStandardMaterial?(s(S,x),f(S,x),x.isMeshPhysicalMaterial&&p(S,x,M)):x.isMeshMatcapMaterial?(s(S,x),v(S,x)):x.isMeshDepthMaterial?s(S,x):x.isMeshDistanceMaterial?(s(S,x),_(S,x)):x.isMeshNormalMaterial?s(S,x):x.isLineBasicMaterial?(o(S,x),x.isLineDashedMaterial&&a(S,x)):x.isPointsMaterial?l(S,x,E,b):x.isSpriteMaterial?c(S,x):x.isShadowMaterial?(S.color.value.copy(x.color),S.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function s(S,x){S.opacity.value=x.opacity,x.color&&S.diffuse.value.copy(x.color),x.emissive&&S.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(S.map.value=x.map,t(x.map,S.mapTransform)),x.alphaMap&&(S.alphaMap.value=x.alphaMap,t(x.alphaMap,S.alphaMapTransform)),x.bumpMap&&(S.bumpMap.value=x.bumpMap,t(x.bumpMap,S.bumpMapTransform),S.bumpScale.value=x.bumpScale,x.side===Yo&&(S.bumpScale.value*=-1)),x.normalMap&&(S.normalMap.value=x.normalMap,t(x.normalMap,S.normalMapTransform),S.normalScale.value.copy(x.normalScale),x.side===Yo&&S.normalScale.value.negate()),x.displacementMap&&(S.displacementMap.value=x.displacementMap,t(x.displacementMap,S.displacementMapTransform),S.displacementScale.value=x.displacementScale,S.displacementBias.value=x.displacementBias),x.emissiveMap&&(S.emissiveMap.value=x.emissiveMap,t(x.emissiveMap,S.emissiveMapTransform)),x.specularMap&&(S.specularMap.value=x.specularMap,t(x.specularMap,S.specularMapTransform)),x.alphaTest>0&&(S.alphaTest.value=x.alphaTest);const E=e.get(x),b=E.envMap,M=E.envMapRotation;b&&(S.envMap.value=b,mp.copy(M),mp.x*=-1,mp.y*=-1,mp.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&(mp.y*=-1,mp.z*=-1),S.envMapRotation.value.setFromMatrix4(fDe.makeRotationFromEuler(mp)),S.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=x.reflectivity,S.ior.value=x.ior,S.refractionRatio.value=x.refractionRatio),x.lightMap&&(S.lightMap.value=x.lightMap,S.lightMapIntensity.value=x.lightMapIntensity,t(x.lightMap,S.lightMapTransform)),x.aoMap&&(S.aoMap.value=x.aoMap,S.aoMapIntensity.value=x.aoMapIntensity,t(x.aoMap,S.aoMapTransform))}function o(S,x){S.diffuse.value.copy(x.color),S.opacity.value=x.opacity,x.map&&(S.map.value=x.map,t(x.map,S.mapTransform))}function a(S,x){S.dashSize.value=x.dashSize,S.totalSize.value=x.dashSize+x.gapSize,S.scale.value=x.scale}function l(S,x,E,b){S.diffuse.value.copy(x.color),S.opacity.value=x.opacity,S.size.value=x.size*E,S.scale.value=b*.5,x.map&&(S.map.value=x.map,t(x.map,S.uvTransform)),x.alphaMap&&(S.alphaMap.value=x.alphaMap,t(x.alphaMap,S.alphaMapTransform)),x.alphaTest>0&&(S.alphaTest.value=x.alphaTest)}function c(S,x){S.diffuse.value.copy(x.color),S.opacity.value=x.opacity,S.rotation.value=x.rotation,x.map&&(S.map.value=x.map,t(x.map,S.mapTransform)),x.alphaMap&&(S.alphaMap.value=x.alphaMap,t(x.alphaMap,S.alphaMapTransform)),x.alphaTest>0&&(S.alphaTest.value=x.alphaTest)}function u(S,x){S.specular.value.copy(x.specular),S.shininess.value=Math.max(x.shininess,1e-4)}function h(S,x){x.gradientMap&&(S.gradientMap.value=x.gradientMap)}function f(S,x){S.metalness.value=x.metalness,x.metalnessMap&&(S.metalnessMap.value=x.metalnessMap,t(x.metalnessMap,S.metalnessMapTransform)),S.roughness.value=x.roughness,x.roughnessMap&&(S.roughnessMap.value=x.roughnessMap,t(x.roughnessMap,S.roughnessMapTransform)),x.envMap&&(S.envMapIntensity.value=x.envMapIntensity)}function p(S,x,E){S.ior.value=x.ior,x.sheen>0&&(S.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),S.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(S.sheenColorMap.value=x.sheenColorMap,t(x.sheenColorMap,S.sheenColorMapTransform)),x.sheenRoughnessMap&&(S.sheenRoughnessMap.value=x.sheenRoughnessMap,t(x.sheenRoughnessMap,S.sheenRoughnessMapTransform))),x.clearcoat>0&&(S.clearcoat.value=x.clearcoat,S.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(S.clearcoatMap.value=x.clearcoatMap,t(x.clearcoatMap,S.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,t(x.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(S.clearcoatNormalMap.value=x.clearcoatNormalMap,t(x.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===Yo&&S.clearcoatNormalScale.value.negate())),x.dispersion>0&&(S.dispersion.value=x.dispersion),x.iridescence>0&&(S.iridescence.value=x.iridescence,S.iridescenceIOR.value=x.iridescenceIOR,S.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(S.iridescenceMap.value=x.iridescenceMap,t(x.iridescenceMap,S.iridescenceMapTransform)),x.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=x.iridescenceThicknessMap,t(x.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),x.transmission>0&&(S.transmission.value=x.transmission,S.transmissionSamplerMap.value=E.texture,S.transmissionSamplerSize.value.set(E.width,E.height),x.transmissionMap&&(S.transmissionMap.value=x.transmissionMap,t(x.transmissionMap,S.transmissionMapTransform)),S.thickness.value=x.thickness,x.thicknessMap&&(S.thicknessMap.value=x.thicknessMap,t(x.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=x.attenuationDistance,S.attenuationColor.value.copy(x.attenuationColor)),x.anisotropy>0&&(S.anisotropyVector.value.set(x.anisotropy*Math.cos(x.anisotropyRotation),x.anisotropy*Math.sin(x.anisotropyRotation)),x.anisotropyMap&&(S.anisotropyMap.value=x.anisotropyMap,t(x.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=x.specularIntensity,S.specularColor.value.copy(x.specularColor),x.specularColorMap&&(S.specularColorMap.value=x.specularColorMap,t(x.specularColorMap,S.specularColorMapTransform)),x.specularIntensityMap&&(S.specularIntensityMap.value=x.specularIntensityMap,t(x.specularIntensityMap,S.specularIntensityMapTransform))}function v(S,x){x.matcap&&(S.matcap.value=x.matcap)}function _(S,x){const E=e.get(x).light;S.referencePosition.value.setFromMatrixPosition(E.matrixWorld),S.nearDistance.value=E.shadow.camera.near,S.farDistance.value=E.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function mDe(n,e,t,r){let i={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(E,b){const M=b.program;r.uniformBlockBinding(E,M)}function c(E,b){let M=i[E.id];M===void 0&&(v(E),M=u(E),i[E.id]=M,E.addEventListener("dispose",S));const k=b.program;r.updateUBOMapping(E,k);const B=e.render.frame;s[E.id]!==B&&(f(E),s[E.id]=B)}function u(E){const b=h();E.__bindingPointIndex=b;const M=n.createBuffer(),k=E.__size,B=E.usage;return n.bindBuffer(n.UNIFORM_BUFFER,M),n.bufferData(n.UNIFORM_BUFFER,k,B),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,b,M),M}function h(){for(let E=0;E<a;E++)if(o.indexOf(E)===-1)return o.push(E),E;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(E){const b=i[E.id],M=E.uniforms,k=E.__cache;n.bindBuffer(n.UNIFORM_BUFFER,b);for(let B=0,P=M.length;B<P;B++){const N=Array.isArray(M[B])?M[B]:[M[B]];for(let R=0,I=N.length;R<I;R++){const U=N[R];if(p(U,B,R,k)===!0){const H=U.__offset,W=Array.isArray(U.value)?U.value:[U.value];let K=0;for(let te=0;te<W.length;te++){const se=W[te],le=_(se);typeof se=="number"||typeof se=="boolean"?(U.__data[0]=se,n.bufferSubData(n.UNIFORM_BUFFER,H+K,U.__data)):se.isMatrix3?(U.__data[0]=se.elements[0],U.__data[1]=se.elements[1],U.__data[2]=se.elements[2],U.__data[3]=0,U.__data[4]=se.elements[3],U.__data[5]=se.elements[4],U.__data[6]=se.elements[5],U.__data[7]=0,U.__data[8]=se.elements[6],U.__data[9]=se.elements[7],U.__data[10]=se.elements[8],U.__data[11]=0):(se.toArray(U.__data,K),K+=le.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,H,U.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(E,b,M,k){const B=E.value,P=b+"_"+M;if(k[P]===void 0)return typeof B=="number"||typeof B=="boolean"?k[P]=B:k[P]=B.clone(),!0;{const N=k[P];if(typeof B=="number"||typeof B=="boolean"){if(N!==B)return k[P]=B,!0}else if(N.equals(B)===!1)return N.copy(B),!0}return!1}function v(E){const b=E.uniforms;let M=0;const k=16;for(let P=0,N=b.length;P<N;P++){const R=Array.isArray(b[P])?b[P]:[b[P]];for(let I=0,U=R.length;I<U;I++){const H=R[I],W=Array.isArray(H.value)?H.value:[H.value];for(let K=0,te=W.length;K<te;K++){const se=W[K],le=_(se),X=M%k,ce=X%le.boundary,oe=X+ce;M+=ce,oe!==0&&k-oe<le.storage&&(M+=k-oe),H.__data=new Float32Array(le.storage/Float32Array.BYTES_PER_ELEMENT),H.__offset=M,M+=le.storage}}}const B=M%k;return B>0&&(M+=k-B),E.__size=M,E.__cache={},this}function _(E){const b={boundary:0,storage:0};return typeof E=="number"||typeof E=="boolean"?(b.boundary=4,b.storage=4):E.isVector2?(b.boundary=8,b.storage=8):E.isVector3||E.isColor?(b.boundary=16,b.storage=12):E.isVector4?(b.boundary=16,b.storage=16):E.isMatrix3?(b.boundary=48,b.storage=48):E.isMatrix4?(b.boundary=64,b.storage=64):E.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",E),b}function S(E){const b=E.target;b.removeEventListener("dispose",S);const M=o.indexOf(b.__bindingPointIndex);o.splice(M,1),n.deleteBuffer(i[b.id]),delete i[b.id],delete s[b.id]}function x(){for(const E in i)n.deleteBuffer(i[E]);o=[],i={},s={}}return{bind:l,update:c,dispose:x}}class fee{constructor(e={}){const{canvas:t=nJ(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1,reversedDepthBuffer:f=!1}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=o;const v=new Uint32Array(4),_=new Int32Array(4);let S=null,x=null;const E=[],b=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=mu,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const M=this;let k=!1;this._outputColorSpace=va;let B=0,P=0,N=null,R=-1,I=null;const U=new sr,H=new sr;let W=null;const K=new Dt(0);let te=0,se=t.width,le=t.height,X=1,ce=null,oe=null;const fe=new sr(0,0,se,le),De=new sr(0,0,se,le);let We=!1;const Qe=new ny;let ve=!1,Ie=!1;const we=new yn,tt=new re,Ke=new sr,Me={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ye=!1;function Pe(){return N===null?X:1}let ne=r;function Be(Z,xe){return t.getContext(Z,xe)}try{const Z={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${NT}`),t.addEventListener("webglcontextlost",ot,!1),t.addEventListener("webglcontextrestored",gt,!1),t.addEventListener("webglcontextcreationerror",at,!1),ne===null){const xe="webgl2";if(ne=Be(xe,Z),ne===null)throw Be(xe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Z){throw console.error("THREE.WebGLRenderer: "+Z.message),Z}let Re,qe,ze,J,be,Fe,rt,pt,ee,q,me,pe,Ve,Ue,Mt,lt,bt,wt,st,mt,Wt,ue,Te,ut;function he(){Re=new CNe(ne),Re.init(),ue=new hee(ne,Re),qe=new _Ne(ne,Re,e,ue),ze=new aDe(ne,Re),qe.reversedDepthBuffer&&f&&ze.buffers.depth.setReversed(!0),J=new PNe(ne),be=new q3e,Fe=new lDe(ne,Re,ze,be,qe,ue,J),rt=new SNe(M),pt=new TNe(M),ee=new LIe(ne),Te=new yNe(ne,ee),q=new MNe(ne,ee,J,Te),me=new NNe(ne,q,ee,J),st=new RNe(ne,qe,Fe),lt=new wNe(be),pe=new X3e(M,rt,pt,Re,qe,Te,lt),Ve=new pDe(M,be),Ue=new K3e,Mt=new nDe(Re),wt=new vNe(M,rt,pt,ze,me,p,l),bt=new sDe(M,me,qe),ut=new mDe(ne,J,qe,ze),mt=new xNe(ne,Re,J),Wt=new INe(ne,Re,J),J.programs=pe.programs,M.capabilities=qe,M.extensions=Re,M.properties=be,M.renderLists=Ue,M.shadowMap=bt,M.state=ze,M.info=J}he();const Je=new dDe(M,ne);this.xr=Je,this.getContext=function(){return ne},this.getContextAttributes=function(){return ne.getContextAttributes()},this.forceContextLoss=function(){const Z=Re.get("WEBGL_lose_context");Z&&Z.loseContext()},this.forceContextRestore=function(){const Z=Re.get("WEBGL_lose_context");Z&&Z.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(Z){Z!==void 0&&(X=Z,this.setSize(se,le,!1))},this.getSize=function(Z){return Z.set(se,le)},this.setSize=function(Z,xe,ke=!0){if(Je.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}se=Z,le=xe,t.width=Math.floor(Z*X),t.height=Math.floor(xe*X),ke===!0&&(t.style.width=Z+"px",t.style.height=xe+"px"),this.setViewport(0,0,Z,xe)},this.getDrawingBufferSize=function(Z){return Z.set(se*X,le*X).floor()},this.setDrawingBufferSize=function(Z,xe,ke){se=Z,le=xe,X=ke,t.width=Math.floor(Z*ke),t.height=Math.floor(xe*ke),this.setViewport(0,0,Z,xe)},this.getCurrentViewport=function(Z){return Z.copy(U)},this.getViewport=function(Z){return Z.copy(fe)},this.setViewport=function(Z,xe,ke,Oe){Z.isVector4?fe.set(Z.x,Z.y,Z.z,Z.w):fe.set(Z,xe,ke,Oe),ze.viewport(U.copy(fe).multiplyScalar(X).round())},this.getScissor=function(Z){return Z.copy(De)},this.setScissor=function(Z,xe,ke,Oe){Z.isVector4?De.set(Z.x,Z.y,Z.z,Z.w):De.set(Z,xe,ke,Oe),ze.scissor(H.copy(De).multiplyScalar(X).round())},this.getScissorTest=function(){return We},this.setScissorTest=function(Z){ze.setScissorTest(We=Z)},this.setOpaqueSort=function(Z){ce=Z},this.setTransparentSort=function(Z){oe=Z},this.getClearColor=function(Z){return Z.copy(wt.getClearColor())},this.setClearColor=function(){wt.setClearColor(...arguments)},this.getClearAlpha=function(){return wt.getClearAlpha()},this.setClearAlpha=function(){wt.setClearAlpha(...arguments)},this.clear=function(Z=!0,xe=!0,ke=!0){let Oe=0;if(Z){let _e=!1;if(N!==null){const ct=N.texture.format;_e=ct===jT||ct===UT||ct===$_}if(_e){const ct=N.texture.type,yt=ct===Rl||ct===Ch||ct===Sv||ct===Ev||ct===LT||ct===FT,Tt=wt.getClearColor(),_t=wt.getClearAlpha(),Kt=Tt.r,Xt=Tt.g,kt=Tt.b;yt?(v[0]=Kt,v[1]=Xt,v[2]=kt,v[3]=_t,ne.clearBufferuiv(ne.COLOR,0,v)):(_[0]=Kt,_[1]=Xt,_[2]=kt,_[3]=_t,ne.clearBufferiv(ne.COLOR,0,_))}else Oe|=ne.COLOR_BUFFER_BIT}xe&&(Oe|=ne.DEPTH_BUFFER_BIT),ke&&(Oe|=ne.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ne.clear(Oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ot,!1),t.removeEventListener("webglcontextrestored",gt,!1),t.removeEventListener("webglcontextcreationerror",at,!1),wt.dispose(),Ue.dispose(),Mt.dispose(),be.dispose(),rt.dispose(),pt.dispose(),me.dispose(),Te.dispose(),ut.dispose(),pe.dispose(),Je.dispose(),Je.removeEventListener("sessionstart",Kn),Je.removeEventListener("sessionend",Au),Cs.stop()};function ot(Z){Z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),k=!0}function gt(){console.log("THREE.WebGLRenderer: Context Restored."),k=!1;const Z=J.autoReset,xe=bt.enabled,ke=bt.autoUpdate,Oe=bt.needsUpdate,_e=bt.type;he(),J.autoReset=Z,bt.enabled=xe,bt.autoUpdate=ke,bt.needsUpdate=Oe,bt.type=_e}function at(Z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Z.statusMessage)}function Xe(Z){const xe=Z.target;xe.removeEventListener("dispose",Xe),xt(xe)}function xt(Z){Bt(Z),be.remove(Z)}function Bt(Z){const xe=be.get(Z).programs;xe!==void 0&&(xe.forEach(function(ke){pe.releaseProgram(ke)}),Z.isShaderMaterial&&pe.releaseShaderCache(Z))}this.renderBufferDirect=function(Z,xe,ke,Oe,_e,ct){xe===null&&(xe=Me);const yt=_e.isMesh&&_e.matrixWorld.determinant()<0,Tt=bc(Z,xe,ke,Oe,_e);ze.setMaterial(Oe,yt);let _t=ke.index,Kt=1;if(Oe.wireframe===!0){if(_t=q.getWireframeAttribute(ke),_t===void 0)return;Kt=2}const Xt=ke.drawRange,kt=ke.attributes.position;let Ot=Xt.start*Kt,Vt=(Xt.start+Xt.count)*Kt;ct!==null&&(Ot=Math.max(Ot,ct.start*Kt),Vt=Math.min(Vt,(ct.start+ct.count)*Kt)),_t!==null?(Ot=Math.max(Ot,0),Vt=Math.min(Vt,_t.count)):kt!=null&&(Ot=Math.max(Ot,0),Vt=Math.min(Vt,kt.count));const Lt=Vt-Ot;if(Lt<0||Lt===1/0)return;Te.setup(_e,Oe,Tt,ke,_t);let Pt,un=mt;if(_t!==null&&(Pt=ee.get(_t),un=Wt,un.setIndex(Pt)),_e.isMesh)Oe.wireframe===!0?(ze.setLineWidth(Oe.wireframeLinewidth*Pe()),un.setMode(ne.LINES)):un.setMode(ne.TRIANGLES);else if(_e.isLine){let Rt=Oe.linewidth;Rt===void 0&&(Rt=1),ze.setLineWidth(Rt*Pe()),_e.isLineSegments?un.setMode(ne.LINES):_e.isLineLoop?un.setMode(ne.LINE_LOOP):un.setMode(ne.LINE_STRIP)}else _e.isPoints?un.setMode(ne.POINTS):_e.isSprite&&un.setMode(ne.TRIANGLES);if(_e.isBatchedMesh)if(_e._multiDrawInstances!==null)j0("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),un.renderMultiDrawInstances(_e._multiDrawStarts,_e._multiDrawCounts,_e._multiDrawCount,_e._multiDrawInstances);else if(Re.get("WEBGL_multi_draw"))un.renderMultiDraw(_e._multiDrawStarts,_e._multiDrawCounts,_e._multiDrawCount);else{const Rt=_e._multiDrawStarts,Ln=_e._multiDrawCounts,tn=_e._multiDrawCount,qt=_t?ee.get(_t).bytesPerElement:1,Jn=be.get(Oe).currentProgram.getUniforms();for(let wi=0;wi<tn;wi++)Jn.setValue(ne,"_gl_DrawID",wi),un.render(Rt[wi]/qt,Ln[wi])}else if(_e.isInstancedMesh)un.renderInstances(Ot,Lt,_e.count);else if(ke.isInstancedBufferGeometry){const Rt=ke._maxInstanceCount!==void 0?ke._maxInstanceCount:1/0,Ln=Math.min(ke.instanceCount,Rt);un.renderInstances(Ot,Lt,Ln)}else un.render(Ot,Lt)};function Cn(Z,xe,ke){Z.transparent===!0&&Z.side===Zc&&Z.forceSinglePass===!1?(Z.side=Yo,Z.needsUpdate=!0,Dl(Z,xe,ke),Z.side=Ah,Z.needsUpdate=!0,Dl(Z,xe,ke),Z.side=Zc):Dl(Z,xe,ke)}this.compile=function(Z,xe,ke=null){ke===null&&(ke=Z),x=Mt.get(ke),x.init(xe),b.push(x),ke.traverseVisible(function(_e){_e.isLight&&_e.layers.test(xe.layers)&&(x.pushLight(_e),_e.castShadow&&x.pushShadow(_e))}),Z!==ke&&Z.traverseVisible(function(_e){_e.isLight&&_e.layers.test(xe.layers)&&(x.pushLight(_e),_e.castShadow&&x.pushShadow(_e))}),x.setupLights();const Oe=new Set;return Z.traverse(function(_e){if(!(_e.isMesh||_e.isPoints||_e.isLine||_e.isSprite))return;const ct=_e.material;if(ct)if(Array.isArray(ct))for(let yt=0;yt<ct.length;yt++){const Tt=ct[yt];Cn(Tt,ke,_e),Oe.add(Tt)}else Cn(ct,ke,_e),Oe.add(ct)}),x=b.pop(),Oe},this.compileAsync=function(Z,xe,ke=null){const Oe=this.compile(Z,xe,ke);return new Promise(_e=>{function ct(){if(Oe.forEach(function(yt){be.get(yt).currentProgram.isReady()&&Oe.delete(yt)}),Oe.size===0){_e(Z);return}setTimeout(ct,10)}Re.get("KHR_parallel_shader_compile")!==null?ct():setTimeout(ct,10)})};let xn=null;function $r(Z){xn&&xn(Z)}function Kn(){Cs.stop()}function Au(){Cs.start()}const Cs=new oee;Cs.setAnimationLoop($r),typeof self<"u"&&Cs.setContext(self),this.setAnimationLoop=function(Z){xn=Z,Je.setAnimationLoop(Z),Z===null?Cs.stop():Cs.start()},Je.addEventListener("sessionstart",Kn),Je.addEventListener("sessionend",Au),this.render=function(Z,xe){if(xe!==void 0&&xe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(k===!0)return;if(Z.matrixWorldAutoUpdate===!0&&Z.updateMatrixWorld(),xe.parent===null&&xe.matrixWorldAutoUpdate===!0&&xe.updateMatrixWorld(),Je.enabled===!0&&Je.isPresenting===!0&&(Je.cameraAutoUpdate===!0&&Je.updateCamera(xe),xe=Je.getCamera()),Z.isScene===!0&&Z.onBeforeRender(M,Z,xe,N),x=Mt.get(Z,b.length),x.init(xe),b.push(x),we.multiplyMatrices(xe.projectionMatrix,xe.matrixWorldInverse),Qe.setFromProjectionMatrix(we,za,xe.reversedDepth),Ie=this.localClippingEnabled,ve=lt.init(this.clippingPlanes,Ie),S=Ue.get(Z,E.length),S.init(),E.push(S),Je.enabled===!0&&Je.isPresenting===!0){const ct=M.xr.getDepthSensingMesh();ct!==null&&Jo(ct,xe,-1/0,M.sortObjects)}Jo(Z,xe,0,M.sortObjects),S.finish(),M.sortObjects===!0&&S.sort(ce,oe),Ye=Je.enabled===!1||Je.isPresenting===!1||Je.hasDepthSensing()===!1,Ye&&wt.addToRenderList(S,Z),this.info.render.frame++,ve===!0&&lt.beginShadows();const ke=x.state.shadowsArray;bt.render(ke,Z,xe),ve===!0&&lt.endShadows(),this.info.autoReset===!0&&this.info.reset();const Oe=S.opaque,_e=S.transmissive;if(x.setupLights(),xe.isArrayCamera){const ct=xe.cameras;if(_e.length>0)for(let yt=0,Tt=ct.length;yt<Tt;yt++){const _t=ct[yt];Gt(Oe,_e,Z,_t)}Ye&&wt.render(Z);for(let yt=0,Tt=ct.length;yt<Tt;yt++){const _t=ct[yt];Zi(S,Z,_t,_t.viewport)}}else _e.length>0&&Gt(Oe,_e,Z,xe),Ye&&wt.render(Z),Zi(S,Z,xe);N!==null&&P===0&&(Fe.updateMultisampleRenderTarget(N),Fe.updateRenderTargetMipmap(N)),Z.isScene===!0&&Z.onAfterRender(M,Z,xe),Te.resetDefaultState(),R=-1,I=null,b.pop(),b.length>0?(x=b[b.length-1],ve===!0&&lt.setGlobalState(M.clippingPlanes,x.state.camera)):x=null,E.pop(),E.length>0?S=E[E.length-1]:S=null};function Jo(Z,xe,ke,Oe){if(Z.visible===!1)return;if(Z.layers.test(xe.layers)){if(Z.isGroup)ke=Z.renderOrder;else if(Z.isLOD)Z.autoUpdate===!0&&Z.update(xe);else if(Z.isLight)x.pushLight(Z),Z.castShadow&&x.pushShadow(Z);else if(Z.isSprite){if(!Z.frustumCulled||Qe.intersectsSprite(Z)){Oe&&Ke.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(we);const yt=me.update(Z),Tt=Z.material;Tt.visible&&S.push(Z,yt,Tt,ke,Ke.z,null)}}else if((Z.isMesh||Z.isLine||Z.isPoints)&&(!Z.frustumCulled||Qe.intersectsObject(Z))){const yt=me.update(Z),Tt=Z.material;if(Oe&&(Z.boundingSphere!==void 0?(Z.boundingSphere===null&&Z.computeBoundingSphere(),Ke.copy(Z.boundingSphere.center)):(yt.boundingSphere===null&&yt.computeBoundingSphere(),Ke.copy(yt.boundingSphere.center)),Ke.applyMatrix4(Z.matrixWorld).applyMatrix4(we)),Array.isArray(Tt)){const _t=yt.groups;for(let Kt=0,Xt=_t.length;Kt<Xt;Kt++){const kt=_t[Kt],Ot=Tt[kt.materialIndex];Ot&&Ot.visible&&S.push(Z,yt,Ot,ke,Ke.z,kt)}}else Tt.visible&&S.push(Z,yt,Tt,ke,Ke.z,null)}}const ct=Z.children;for(let yt=0,Tt=ct.length;yt<Tt;yt++)Jo(ct[yt],xe,ke,Oe)}function Zi(Z,xe,ke,Oe){const _e=Z.opaque,ct=Z.transmissive,yt=Z.transparent;x.setupLightsView(ke),ve===!0&&lt.setGlobalState(M.clippingPlanes,ke),Oe&&ze.viewport(U.copy(Oe)),_e.length>0&&Ui(_e,xe,ke),ct.length>0&&Ui(ct,xe,ke),yt.length>0&&Ui(yt,xe,ke),ze.buffers.depth.setTest(!0),ze.buffers.depth.setMask(!0),ze.buffers.color.setMask(!0),ze.setPolygonOffset(!1)}function Gt(Z,xe,ke,Oe){if((ke.isScene===!0?ke.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[Oe.id]===void 0&&(x.state.transmissionRenderTarget[Oe.id]=new _u(1,1,{generateMipmaps:!0,type:Re.has("EXT_color_buffer_half_float")||Re.has("EXT_color_buffer_float")?ty:Rl,minFilter:Jc,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:nr.workingColorSpace}));const ct=x.state.transmissionRenderTarget[Oe.id],yt=Oe.viewport||U;ct.setSize(yt.z*M.transmissionResolutionScale,yt.w*M.transmissionResolutionScale);const Tt=M.getRenderTarget(),_t=M.getActiveCubeFace(),Kt=M.getActiveMipmapLevel();M.setRenderTarget(ct),M.getClearColor(K),te=M.getClearAlpha(),te<1&&M.setClearColor(16777215,.5),M.clear(),Ye&&wt.render(ke);const Xt=M.toneMapping;M.toneMapping=mu;const kt=Oe.viewport;if(Oe.viewport!==void 0&&(Oe.viewport=void 0),x.setupLightsView(Oe),ve===!0&&lt.setGlobalState(M.clippingPlanes,Oe),Ui(Z,ke,Oe),Fe.updateMultisampleRenderTarget(ct),Fe.updateRenderTargetMipmap(ct),Re.has("WEBGL_multisampled_render_to_texture")===!1){let Ot=!1;for(let Vt=0,Lt=xe.length;Vt<Lt;Vt++){const Pt=xe[Vt],un=Pt.object,Rt=Pt.geometry,Ln=Pt.material,tn=Pt.group;if(Ln.side===Zc&&un.layers.test(Oe.layers)){const qt=Ln.side;Ln.side=Yo,Ln.needsUpdate=!0,Tu(un,ke,Oe,Rt,Ln,tn),Ln.side=qt,Ln.needsUpdate=!0,Ot=!0}}Ot===!0&&(Fe.updateMultisampleRenderTarget(ct),Fe.updateRenderTargetMipmap(ct))}M.setRenderTarget(Tt,_t,Kt),M.setClearColor(K,te),kt!==void 0&&(Oe.viewport=kt),M.toneMapping=Xt}function Ui(Z,xe,ke){const Oe=xe.isScene===!0?xe.overrideMaterial:null;for(let _e=0,ct=Z.length;_e<ct;_e++){const yt=Z[_e],Tt=yt.object,_t=yt.geometry,Kt=yt.group;let Xt=yt.material;Xt.allowOverride===!0&&Oe!==null&&(Xt=Oe),Tt.layers.test(ke.layers)&&Tu(Tt,xe,ke,_t,Xt,Kt)}}function Tu(Z,xe,ke,Oe,_e,ct){Z.onBeforeRender(M,xe,ke,Oe,_e,ct),Z.modelViewMatrix.multiplyMatrices(ke.matrixWorldInverse,Z.matrixWorld),Z.normalMatrix.getNormalMatrix(Z.modelViewMatrix),_e.onBeforeRender(M,xe,ke,Oe,Z,ct),_e.transparent===!0&&_e.side===Zc&&_e.forceSinglePass===!1?(_e.side=Yo,_e.needsUpdate=!0,M.renderBufferDirect(ke,xe,Oe,_e,Z,ct),_e.side=Ah,_e.needsUpdate=!0,M.renderBufferDirect(ke,xe,Oe,_e,Z,ct),_e.side=Zc):M.renderBufferDirect(ke,xe,Oe,_e,Z,ct),Z.onAfterRender(M,xe,ke,Oe,_e,ct)}function Dl(Z,xe,ke){xe.isScene!==!0&&(xe=Me);const Oe=be.get(Z),_e=x.state.lights,ct=x.state.shadowsArray,yt=_e.state.version,Tt=pe.getParameters(Z,_e.state,ct,xe,ke),_t=pe.getProgramCacheKey(Tt);let Kt=Oe.programs;Oe.environment=Z.isMeshStandardMaterial?xe.environment:null,Oe.fog=xe.fog,Oe.envMap=(Z.isMeshStandardMaterial?pt:rt).get(Z.envMap||Oe.environment),Oe.envMapRotation=Oe.environment!==null&&Z.envMap===null?xe.environmentRotation:Z.envMapRotation,Kt===void 0&&(Z.addEventListener("dispose",Xe),Kt=new Map,Oe.programs=Kt);let Xt=Kt.get(_t);if(Xt!==void 0){if(Oe.currentProgram===Xt&&Oe.lightsStateVersion===yt)return kl(Z,Tt),Xt}else Tt.uniforms=pe.getUniforms(Z),Z.onBeforeCompile(Tt,M),Xt=pe.acquireProgram(Tt,_t),Kt.set(_t,Xt),Oe.uniforms=Tt.uniforms;const kt=Oe.uniforms;return(!Z.isShaderMaterial&&!Z.isRawShaderMaterial||Z.clipping===!0)&&(kt.clippingPlanes=lt.uniform),kl(Z,Tt),Oe.needsLights=Mo(Z),Oe.lightsStateVersion=yt,Oe.needsLights&&(kt.ambientLightColor.value=_e.state.ambient,kt.lightProbe.value=_e.state.probe,kt.directionalLights.value=_e.state.directional,kt.directionalLightShadows.value=_e.state.directionalShadow,kt.spotLights.value=_e.state.spot,kt.spotLightShadows.value=_e.state.spotShadow,kt.rectAreaLights.value=_e.state.rectArea,kt.ltc_1.value=_e.state.rectAreaLTC1,kt.ltc_2.value=_e.state.rectAreaLTC2,kt.pointLights.value=_e.state.point,kt.pointLightShadows.value=_e.state.pointShadow,kt.hemisphereLights.value=_e.state.hemi,kt.directionalShadowMap.value=_e.state.directionalShadowMap,kt.directionalShadowMatrix.value=_e.state.directionalShadowMatrix,kt.spotShadowMap.value=_e.state.spotShadowMap,kt.spotLightMatrix.value=_e.state.spotLightMatrix,kt.spotLightMap.value=_e.state.spotLightMap,kt.pointShadowMap.value=_e.state.pointShadowMap,kt.pointShadowMatrix.value=_e.state.pointShadowMatrix),Oe.currentProgram=Xt,Oe.uniformsList=null,Xt}function tl(Z){if(Z.uniformsList===null){const xe=Z.currentProgram.getUniforms();Z.uniformsList=rb.seqWithValue(xe.seq,Z.uniforms)}return Z.uniformsList}function kl(Z,xe){const ke=be.get(Z);ke.outputColorSpace=xe.outputColorSpace,ke.batching=xe.batching,ke.batchingColor=xe.batchingColor,ke.instancing=xe.instancing,ke.instancingColor=xe.instancingColor,ke.instancingMorph=xe.instancingMorph,ke.skinning=xe.skinning,ke.morphTargets=xe.morphTargets,ke.morphNormals=xe.morphNormals,ke.morphColors=xe.morphColors,ke.morphTargetsCount=xe.morphTargetsCount,ke.numClippingPlanes=xe.numClippingPlanes,ke.numIntersection=xe.numClipIntersection,ke.vertexAlphas=xe.vertexAlphas,ke.vertexTangents=xe.vertexTangents,ke.toneMapping=xe.toneMapping}function bc(Z,xe,ke,Oe,_e){xe.isScene!==!0&&(xe=Me),Fe.resetTextureUnits();const ct=xe.fog,yt=Oe.isMeshStandardMaterial?xe.environment:null,Tt=N===null?M.outputColorSpace:N.isXRRenderTarget===!0?N.texture.colorSpace:Tm,_t=(Oe.isMeshStandardMaterial?pt:rt).get(Oe.envMap||yt),Kt=Oe.vertexColors===!0&&!!ke.attributes.color&&ke.attributes.color.itemSize===4,Xt=!!ke.attributes.tangent&&(!!Oe.normalMap||Oe.anisotropy>0),kt=!!ke.morphAttributes.position,Ot=!!ke.morphAttributes.normal,Vt=!!ke.morphAttributes.color;let Lt=mu;Oe.toneMapped&&(N===null||N.isXRRenderTarget===!0)&&(Lt=M.toneMapping);const Pt=ke.morphAttributes.position||ke.morphAttributes.normal||ke.morphAttributes.color,un=Pt!==void 0?Pt.length:0,Rt=be.get(Oe),Ln=x.state.lights;if(ve===!0&&(Ie===!0||Z!==I)){const Mr=Z===I&&Oe.id===R;lt.setState(Oe,Z,Mr)}let tn=!1;Oe.version===Rt.__version?(Rt.needsLights&&Rt.lightsStateVersion!==Ln.state.version||Rt.outputColorSpace!==Tt||_e.isBatchedMesh&&Rt.batching===!1||!_e.isBatchedMesh&&Rt.batching===!0||_e.isBatchedMesh&&Rt.batchingColor===!0&&_e.colorTexture===null||_e.isBatchedMesh&&Rt.batchingColor===!1&&_e.colorTexture!==null||_e.isInstancedMesh&&Rt.instancing===!1||!_e.isInstancedMesh&&Rt.instancing===!0||_e.isSkinnedMesh&&Rt.skinning===!1||!_e.isSkinnedMesh&&Rt.skinning===!0||_e.isInstancedMesh&&Rt.instancingColor===!0&&_e.instanceColor===null||_e.isInstancedMesh&&Rt.instancingColor===!1&&_e.instanceColor!==null||_e.isInstancedMesh&&Rt.instancingMorph===!0&&_e.morphTexture===null||_e.isInstancedMesh&&Rt.instancingMorph===!1&&_e.morphTexture!==null||Rt.envMap!==_t||Oe.fog===!0&&Rt.fog!==ct||Rt.numClippingPlanes!==void 0&&(Rt.numClippingPlanes!==lt.numPlanes||Rt.numIntersection!==lt.numIntersection)||Rt.vertexAlphas!==Kt||Rt.vertexTangents!==Xt||Rt.morphTargets!==kt||Rt.morphNormals!==Ot||Rt.morphColors!==Vt||Rt.toneMapping!==Lt||Rt.morphTargetsCount!==un)&&(tn=!0):(tn=!0,Rt.__version=Oe.version);let qt=Rt.currentProgram;tn===!0&&(qt=Dl(Oe,xe,_e));let Jn=!1,wi=!1,li=!1;const dn=qt.getUniforms(),dr=Rt.uniforms;if(ze.useProgram(qt.program)&&(Jn=!0,wi=!0,li=!0),Oe.id!==R&&(R=Oe.id,wi=!0),Jn||I!==Z){ze.buffers.depth.getReversed()&&Z.reversedDepth!==!0&&(Z._reversedDepth=!0,Z.updateProjectionMatrix()),dn.setValue(ne,"projectionMatrix",Z.projectionMatrix),dn.setValue(ne,"viewMatrix",Z.matrixWorldInverse);const $t=dn.map.cameraPosition;$t!==void 0&&$t.setValue(ne,tt.setFromMatrixPosition(Z.matrixWorld)),qe.logarithmicDepthBuffer&&dn.setValue(ne,"logDepthBufFC",2/(Math.log(Z.far+1)/Math.LN2)),(Oe.isMeshPhongMaterial||Oe.isMeshToonMaterial||Oe.isMeshLambertMaterial||Oe.isMeshBasicMaterial||Oe.isMeshStandardMaterial||Oe.isShaderMaterial)&&dn.setValue(ne,"isOrthographic",Z.isOrthographicCamera===!0),I!==Z&&(I=Z,wi=!0,li=!0)}if(_e.isSkinnedMesh){dn.setOptional(ne,_e,"bindMatrix"),dn.setOptional(ne,_e,"bindMatrixInverse");const Mr=_e.skeleton;Mr&&(Mr.boneTexture===null&&Mr.computeBoneTexture(),dn.setValue(ne,"boneTexture",Mr.boneTexture,Fe))}_e.isBatchedMesh&&(dn.setOptional(ne,_e,"batchingTexture"),dn.setValue(ne,"batchingTexture",_e._matricesTexture,Fe),dn.setOptional(ne,_e,"batchingIdTexture"),dn.setValue(ne,"batchingIdTexture",_e._indirectTexture,Fe),dn.setOptional(ne,_e,"batchingColorTexture"),_e._colorsTexture!==null&&dn.setValue(ne,"batchingColorTexture",_e._colorsTexture,Fe));const ni=ke.morphAttributes;if((ni.position!==void 0||ni.normal!==void 0||ni.color!==void 0)&&st.update(_e,ke,qt),(wi||Rt.receiveShadow!==_e.receiveShadow)&&(Rt.receiveShadow=_e.receiveShadow,dn.setValue(ne,"receiveShadow",_e.receiveShadow)),Oe.isMeshGouraudMaterial&&Oe.envMap!==null&&(dr.envMap.value=_t,dr.flipEnvMap.value=_t.isCubeTexture&&_t.isRenderTargetTexture===!1?-1:1),Oe.isMeshStandardMaterial&&Oe.envMap===null&&xe.environment!==null&&(dr.envMapIntensity.value=xe.environmentIntensity),wi&&(dn.setValue(ne,"toneMappingExposure",M.toneMappingExposure),Rt.needsLights&&Co(dr,li),ct&&Oe.fog===!0&&Ve.refreshFogUniforms(dr,ct),Ve.refreshMaterialUniforms(dr,Oe,X,le,x.state.transmissionRenderTarget[Z.id]),rb.upload(ne,tl(Rt),dr,Fe)),Oe.isShaderMaterial&&Oe.uniformsNeedUpdate===!0&&(rb.upload(ne,tl(Rt),dr,Fe),Oe.uniformsNeedUpdate=!1),Oe.isSpriteMaterial&&dn.setValue(ne,"center",_e.center),dn.setValue(ne,"modelViewMatrix",_e.modelViewMatrix),dn.setValue(ne,"normalMatrix",_e.normalMatrix),dn.setValue(ne,"modelMatrix",_e.matrixWorld),Oe.isShaderMaterial||Oe.isRawShaderMaterial){const Mr=Oe.uniformsGroups;for(let $t=0,Pi=Mr.length;$t<Pi;$t++){const ri=Mr[$t];ut.update(ri,qt),ut.bind(ri,qt)}}return qt}function Co(Z,xe){Z.ambientLightColor.needsUpdate=xe,Z.lightProbe.needsUpdate=xe,Z.directionalLights.needsUpdate=xe,Z.directionalLightShadows.needsUpdate=xe,Z.pointLights.needsUpdate=xe,Z.pointLightShadows.needsUpdate=xe,Z.spotLights.needsUpdate=xe,Z.spotLightShadows.needsUpdate=xe,Z.rectAreaLights.needsUpdate=xe,Z.hemisphereLights.needsUpdate=xe}function Mo(Z){return Z.isMeshLambertMaterial||Z.isMeshToonMaterial||Z.isMeshPhongMaterial||Z.isMeshStandardMaterial||Z.isShadowMaterial||Z.isShaderMaterial&&Z.lights===!0}this.getActiveCubeFace=function(){return B},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(Z,xe,ke){const Oe=be.get(Z);Oe.__autoAllocateDepthBuffer=Z.resolveDepthBuffer===!1,Oe.__autoAllocateDepthBuffer===!1&&(Oe.__useRenderToTexture=!1),be.get(Z.texture).__webglTexture=xe,be.get(Z.depthTexture).__webglTexture=Oe.__autoAllocateDepthBuffer?void 0:ke,Oe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Z,xe){const ke=be.get(Z);ke.__webglFramebuffer=xe,ke.__useDefaultFramebuffer=xe===void 0};const Cu=ne.createFramebuffer();this.setRenderTarget=function(Z,xe=0,ke=0){N=Z,B=xe,P=ke;let Oe=!0,_e=null,ct=!1,yt=!1;if(Z){const _t=be.get(Z);if(_t.__useDefaultFramebuffer!==void 0)ze.bindFramebuffer(ne.FRAMEBUFFER,null),Oe=!1;else if(_t.__webglFramebuffer===void 0)Fe.setupRenderTarget(Z);else if(_t.__hasExternalTextures)Fe.rebindTextures(Z,be.get(Z.texture).__webglTexture,be.get(Z.depthTexture).__webglTexture);else if(Z.depthBuffer){const kt=Z.depthTexture;if(_t.__boundDepthTexture!==kt){if(kt!==null&&be.has(kt)&&(Z.width!==kt.image.width||Z.height!==kt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Fe.setupDepthRenderbuffer(Z)}}const Kt=Z.texture;(Kt.isData3DTexture||Kt.isDataArrayTexture||Kt.isCompressedArrayTexture)&&(yt=!0);const Xt=be.get(Z).__webglFramebuffer;Z.isWebGLCubeRenderTarget?(Array.isArray(Xt[xe])?_e=Xt[xe][ke]:_e=Xt[xe],ct=!0):Z.samples>0&&Fe.useMultisampledRTT(Z)===!1?_e=be.get(Z).__webglMultisampledFramebuffer:Array.isArray(Xt)?_e=Xt[ke]:_e=Xt,U.copy(Z.viewport),H.copy(Z.scissor),W=Z.scissorTest}else U.copy(fe).multiplyScalar(X).floor(),H.copy(De).multiplyScalar(X).floor(),W=We;if(ke!==0&&(_e=Cu),ze.bindFramebuffer(ne.FRAMEBUFFER,_e)&&Oe&&ze.drawBuffers(Z,_e),ze.viewport(U),ze.scissor(H),ze.setScissorTest(W),ct){const _t=be.get(Z.texture);ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_CUBE_MAP_POSITIVE_X+xe,_t.__webglTexture,ke)}else if(yt){const _t=xe;for(let Kt=0;Kt<Z.textures.length;Kt++){const Xt=be.get(Z.textures[Kt]);ne.framebufferTextureLayer(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0+Kt,Xt.__webglTexture,ke,_t)}}else if(Z!==null&&ke!==0){const _t=be.get(Z.texture);ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,_t.__webglTexture,ke)}R=-1},this.readRenderTargetPixels=function(Z,xe,ke,Oe,_e,ct,yt,Tt=0){if(!(Z&&Z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let _t=be.get(Z).__webglFramebuffer;if(Z.isWebGLCubeRenderTarget&&yt!==void 0&&(_t=_t[yt]),_t){ze.bindFramebuffer(ne.FRAMEBUFFER,_t);try{const Kt=Z.textures[Tt],Xt=Kt.format,kt=Kt.type;if(!qe.textureFormatReadable(Xt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!qe.textureTypeReadable(kt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}xe>=0&&xe<=Z.width-Oe&&ke>=0&&ke<=Z.height-_e&&(Z.textures.length>1&&ne.readBuffer(ne.COLOR_ATTACHMENT0+Tt),ne.readPixels(xe,ke,Oe,_e,ue.convert(Xt),ue.convert(kt),ct))}finally{const Kt=N!==null?be.get(N).__webglFramebuffer:null;ze.bindFramebuffer(ne.FRAMEBUFFER,Kt)}}},this.readRenderTargetPixelsAsync=async function(Z,xe,ke,Oe,_e,ct,yt,Tt=0){if(!(Z&&Z.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let _t=be.get(Z).__webglFramebuffer;if(Z.isWebGLCubeRenderTarget&&yt!==void 0&&(_t=_t[yt]),_t)if(xe>=0&&xe<=Z.width-Oe&&ke>=0&&ke<=Z.height-_e){ze.bindFramebuffer(ne.FRAMEBUFFER,_t);const Kt=Z.textures[Tt],Xt=Kt.format,kt=Kt.type;if(!qe.textureFormatReadable(Xt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!qe.textureTypeReadable(kt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ot=ne.createBuffer();ne.bindBuffer(ne.PIXEL_PACK_BUFFER,Ot),ne.bufferData(ne.PIXEL_PACK_BUFFER,ct.byteLength,ne.STREAM_READ),Z.textures.length>1&&ne.readBuffer(ne.COLOR_ATTACHMENT0+Tt),ne.readPixels(xe,ke,Oe,_e,ue.convert(Xt),ue.convert(kt),0);const Vt=N!==null?be.get(N).__webglFramebuffer:null;ze.bindFramebuffer(ne.FRAMEBUFFER,Vt);const Lt=ne.fenceSync(ne.SYNC_GPU_COMMANDS_COMPLETE,0);return ne.flush(),await tCe(ne,Lt,4),ne.bindBuffer(ne.PIXEL_PACK_BUFFER,Ot),ne.getBufferSubData(ne.PIXEL_PACK_BUFFER,0,ct),ne.deleteBuffer(Ot),ne.deleteSync(Lt),ct}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(Z,xe=null,ke=0){const Oe=Math.pow(2,-ke),_e=Math.floor(Z.image.width*Oe),ct=Math.floor(Z.image.height*Oe),yt=xe!==null?xe.x:0,Tt=xe!==null?xe.y:0;Fe.setTexture2D(Z,0),ne.copyTexSubImage2D(ne.TEXTURE_2D,ke,0,0,yt,Tt,_e,ct),ze.unbindTexture()};const Dh=ne.createFramebuffer(),Mu=ne.createFramebuffer();this.copyTextureToTexture=function(Z,xe,ke=null,Oe=null,_e=0,ct=null){ct===null&&(_e!==0?(j0("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ct=_e,_e=0):ct=0);let yt,Tt,_t,Kt,Xt,kt,Ot,Vt,Lt;const Pt=Z.isCompressedTexture?Z.mipmaps[ct]:Z.image;if(ke!==null)yt=ke.max.x-ke.min.x,Tt=ke.max.y-ke.min.y,_t=ke.isBox3?ke.max.z-ke.min.z:1,Kt=ke.min.x,Xt=ke.min.y,kt=ke.isBox3?ke.min.z:0;else{const ni=Math.pow(2,-_e);yt=Math.floor(Pt.width*ni),Tt=Math.floor(Pt.height*ni),Z.isDataArrayTexture?_t=Pt.depth:Z.isData3DTexture?_t=Math.floor(Pt.depth*ni):_t=1,Kt=0,Xt=0,kt=0}Oe!==null?(Ot=Oe.x,Vt=Oe.y,Lt=Oe.z):(Ot=0,Vt=0,Lt=0);const un=ue.convert(xe.format),Rt=ue.convert(xe.type);let Ln;xe.isData3DTexture?(Fe.setTexture3D(xe,0),Ln=ne.TEXTURE_3D):xe.isDataArrayTexture||xe.isCompressedArrayTexture?(Fe.setTexture2DArray(xe,0),Ln=ne.TEXTURE_2D_ARRAY):(Fe.setTexture2D(xe,0),Ln=ne.TEXTURE_2D),ne.pixelStorei(ne.UNPACK_FLIP_Y_WEBGL,xe.flipY),ne.pixelStorei(ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,xe.premultiplyAlpha),ne.pixelStorei(ne.UNPACK_ALIGNMENT,xe.unpackAlignment);const tn=ne.getParameter(ne.UNPACK_ROW_LENGTH),qt=ne.getParameter(ne.UNPACK_IMAGE_HEIGHT),Jn=ne.getParameter(ne.UNPACK_SKIP_PIXELS),wi=ne.getParameter(ne.UNPACK_SKIP_ROWS),li=ne.getParameter(ne.UNPACK_SKIP_IMAGES);ne.pixelStorei(ne.UNPACK_ROW_LENGTH,Pt.width),ne.pixelStorei(ne.UNPACK_IMAGE_HEIGHT,Pt.height),ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,Kt),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,Xt),ne.pixelStorei(ne.UNPACK_SKIP_IMAGES,kt);const dn=Z.isDataArrayTexture||Z.isData3DTexture,dr=xe.isDataArrayTexture||xe.isData3DTexture;if(Z.isDepthTexture){const ni=be.get(Z),Mr=be.get(xe),$t=be.get(ni.__renderTarget),Pi=be.get(Mr.__renderTarget);ze.bindFramebuffer(ne.READ_FRAMEBUFFER,$t.__webglFramebuffer),ze.bindFramebuffer(ne.DRAW_FRAMEBUFFER,Pi.__webglFramebuffer);for(let ri=0;ri<_t;ri++)dn&&(ne.framebufferTextureLayer(ne.READ_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,be.get(Z).__webglTexture,_e,kt+ri),ne.framebufferTextureLayer(ne.DRAW_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,be.get(xe).__webglTexture,ct,Lt+ri)),ne.blitFramebuffer(Kt,Xt,yt,Tt,Ot,Vt,yt,Tt,ne.DEPTH_BUFFER_BIT,ne.NEAREST);ze.bindFramebuffer(ne.READ_FRAMEBUFFER,null),ze.bindFramebuffer(ne.DRAW_FRAMEBUFFER,null)}else if(_e!==0||Z.isRenderTargetTexture||be.has(Z)){const ni=be.get(Z),Mr=be.get(xe);ze.bindFramebuffer(ne.READ_FRAMEBUFFER,Dh),ze.bindFramebuffer(ne.DRAW_FRAMEBUFFER,Mu);for(let $t=0;$t<_t;$t++)dn?ne.framebufferTextureLayer(ne.READ_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ni.__webglTexture,_e,kt+$t):ne.framebufferTexture2D(ne.READ_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,ni.__webglTexture,_e),dr?ne.framebufferTextureLayer(ne.DRAW_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,Mr.__webglTexture,ct,Lt+$t):ne.framebufferTexture2D(ne.DRAW_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,Mr.__webglTexture,ct),_e!==0?ne.blitFramebuffer(Kt,Xt,yt,Tt,Ot,Vt,yt,Tt,ne.COLOR_BUFFER_BIT,ne.NEAREST):dr?ne.copyTexSubImage3D(Ln,ct,Ot,Vt,Lt+$t,Kt,Xt,yt,Tt):ne.copyTexSubImage2D(Ln,ct,Ot,Vt,Kt,Xt,yt,Tt);ze.bindFramebuffer(ne.READ_FRAMEBUFFER,null),ze.bindFramebuffer(ne.DRAW_FRAMEBUFFER,null)}else dr?Z.isDataTexture||Z.isData3DTexture?ne.texSubImage3D(Ln,ct,Ot,Vt,Lt,yt,Tt,_t,un,Rt,Pt.data):xe.isCompressedArrayTexture?ne.compressedTexSubImage3D(Ln,ct,Ot,Vt,Lt,yt,Tt,_t,un,Pt.data):ne.texSubImage3D(Ln,ct,Ot,Vt,Lt,yt,Tt,_t,un,Rt,Pt):Z.isDataTexture?ne.texSubImage2D(ne.TEXTURE_2D,ct,Ot,Vt,yt,Tt,un,Rt,Pt.data):Z.isCompressedTexture?ne.compressedTexSubImage2D(ne.TEXTURE_2D,ct,Ot,Vt,Pt.width,Pt.height,un,Pt.data):ne.texSubImage2D(ne.TEXTURE_2D,ct,Ot,Vt,yt,Tt,un,Rt,Pt);ne.pixelStorei(ne.UNPACK_ROW_LENGTH,tn),ne.pixelStorei(ne.UNPACK_IMAGE_HEIGHT,qt),ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,Jn),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,wi),ne.pixelStorei(ne.UNPACK_SKIP_IMAGES,li),ct===0&&xe.generateMipmaps&&ne.generateMipmap(Ln),ze.unbindTexture()},this.copyTextureToTexture3D=function(Z,xe,ke=null,Oe=null,_e=0){return j0('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Z,xe,ke,Oe,_e)},this.initRenderTarget=function(Z){be.get(Z).__webglFramebuffer===void 0&&Fe.setupRenderTarget(Z)},this.initTexture=function(Z){Z.isCubeTexture?Fe.setTextureCube(Z,0):Z.isData3DTexture?Fe.setTexture3D(Z,0):Z.isDataArrayTexture||Z.isCompressedArrayTexture?Fe.setTexture2DArray(Z,0):Fe.setTexture2D(Z,0),ze.unbindTexture()},this.resetState=function(){B=0,P=0,N=null,ze.reset(),Te.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return za}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=nr._getDrawingBufferColorSpace(e),t.unpackColorSpace=nr._getUnpackColorSpace()}}const gDe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:KO,AddEquation:Rd,AddOperation:kQ,AdditiveAnimationBlendMode:s4,AdditiveBlending:zN,AgXToneMapping:UQ,AlphaFormat:t4,AlwaysCompare:eJ,AlwaysDepth:b2,AlwaysStencilFunc:$N,AmbientLight:qJ,AnimationAction:ree,AnimationClip:s_,AnimationLoader:MMe,AnimationMixer:nIe,AnimationObjectGroup:eIe,AnimationUtils:bMe,ArcCurve:xJ,ArrayCamera:eee,ArrowHelper:CIe,AttachedBindMode:GN,Audio:tee,AudioAnalyser:WMe,AudioContext:P4,AudioListener:VMe,AudioLoader:BMe,AxesHelper:MIe,BackSide:Yo,BasicDepthPacking:GQ,BasicShadowMap:pQ,BatchedMesh:pJ,Bone:f4,BooleanKeyframeTrack:zm,Box2:hIe,Box3:So,Box3Helper:AIe,BoxGeometry:Vm,BoxHelper:bIe,BufferAttribute:Pr,BufferGeometry:In,BufferGeometryLoader:JJ,ByteType:QO,Cache:eu,Camera:X_,CameraHelper:EIe,CanvasTexture:XCe,CapsuleGeometry:KT,CatmullRomCurve3:_J,CineonToneMapping:FQ,CircleGeometry:ZT,ClampToEdgeWrapping:Sl,Clock:R4,Color:Dt,ColorKeyframeTrack:C4,ColorManagement:nr,CompressedArrayTexture:GCe,CompressedCubeTexture:$Ce,CompressedTexture:YT,CompressedTextureLoader:IMe,ConeGeometry:K_,ConstantAlphaFactor:RQ,ConstantColorFactor:IQ,Controls:PIe,CubeCamera:aJ,CubeReflectionMapping:Th,CubeRefractionMapping:Af,CubeTexture:q_,CubeTextureLoader:PMe,CubeUVReflectionMapping:ey,CubicBezierCurve:v4,CubicBezierCurve3:wJ,CubicInterpolant:jJ,CullFaceBack:VN,CullFaceFront:fQ,CullFaceFrontBack:eTe,CullFaceNone:dQ,Curve:Ec,CurvePath:EJ,CustomBlending:mQ,CustomToneMapping:BQ,CylinderGeometry:Y_,Cylindrical:uIe,Data3DTexture:HT,DataArrayTexture:zT,DataTexture:gu,DataTextureLoader:RMe,DataUtils:gCe,DecrementStencilOp:pTe,DecrementWrapStencilOp:gTe,DefaultLoadingManager:HJ,DepthFormat:bv,DepthStencilFormat:Av,DepthTexture:m4,DetachedBindMode:VQ,DirectionalLight:XJ,DirectionalLightHelper:SIe,DiscreteInterpolant:VJ,DodecahedronGeometry:QT,DoubleSide:Zc,DstAlphaFactor:bQ,DstColorFactor:TQ,DynamicCopyUsage:RTe,DynamicDrawUsage:ATe,DynamicReadUsage:MTe,EdgesGeometry:yJ,EllipseCurve:JT,EqualCompare:KQ,EqualDepth:T2,EqualStencilFunc:_Te,EquirectangularReflectionMapping:Gx,EquirectangularRefractionMapping:$x,Euler:Qa,EventDispatcher:Eu,ExtrudeGeometry:eC,FileLoader:Mh,Float16BufferAttribute:ECe,Float32BufferAttribute:Ht,FloatType:Sa,Fog:GT,FogExp2:WT,FramebufferTexture:WCe,FrontSide:Ah,Frustum:ny,FrustumArray:qT,GLBufferAttribute:aIe,GLSL1:DTe,GLSL3:XN,GreaterCompare:ZQ,GreaterDepth:M2,GreaterEqualCompare:JQ,GreaterEqualDepth:C2,GreaterEqualStencilFunc:bTe,GreaterStencilFunc:STe,GridHelper:_Ie,Group:p0,HalfFloatType:ty,HemisphereLight:WJ,HemisphereLightHelper:xIe,IcosahedronGeometry:tC,ImageBitmapLoader:FMe,ImageLoader:o_,ImageUtils:rJ,IncrementStencilOp:fTe,IncrementWrapStencilOp:mTe,InstancedBufferAttribute:Iv,InstancedBufferGeometry:QJ,InstancedInterleavedBuffer:oIe,InstancedMesh:fJ,Int16BufferAttribute:wCe,Int32BufferAttribute:SCe,Int8BufferAttribute:yCe,IntType:OT,InterleavedBuffer:$T,InterleavedBufferAttribute:Cm,Interpolant:J_,InterpolateDiscrete:Yx,InterpolateLinear:nA,InterpolateSmooth:tb,InterpolationSamplingMode:LTe,InterpolationSamplingType:OTe,InvertStencilOp:vTe,KeepStencilOp:Mp,KeyframeTrack:Nl,LOD:hJ,LatheGeometry:nC,Layers:im,LessCompare:YQ,LessDepth:A2,LessEqualCompare:o4,LessEqualDepth:Am,LessEqualStencilFunc:wTe,LessStencilFunc:xTe,Light:Uf,LightProbe:ZJ,Line:Tf,Line3:pIe,LineBasicMaterial:Qo,LineCurve:y4,LineCurve3:SJ,LineDashedMaterial:FJ,LineLoop:mJ,LineSegments:bu,LinearFilter:us,LinearInterpolant:T4,LinearMipMapLinearFilter:iTe,LinearMipMapNearestFilter:rTe,LinearMipmapLinearFilter:Jc,LinearMipmapNearestFilter:X1,LinearSRGBColorSpace:Tm,LinearToneMapping:OQ,LinearTransfer:Zx,Loader:Ma,LoaderUtils:QN,LoadingManager:M4,LoopOnce:zQ,LoopPingPong:WQ,LoopRepeat:HQ,MOUSE:Tp,Material:Ao,MaterialLoader:uC,MathUtils:JTe,Matrix2:O4,Matrix3:Tn,Matrix4:yn,MaxEquation:xQ,Mesh:Ki,MeshBasicMaterial:Ff,MeshDepthMaterial:E4,MeshDistanceMaterial:b4,MeshLambertMaterial:OJ,MeshMatcapMaterial:LJ,MeshNormalMaterial:kJ,MeshPhongMaterial:NJ,MeshPhysicalMaterial:RJ,MeshStandardMaterial:S4,MeshToonMaterial:DJ,MinEquation:yQ,MirroredRepeatWrapping:qx,MixOperation:DQ,MultiplyBlending:WN,MultiplyOperation:G_,NearestFilter:zs,NearestMipMapLinearFilter:nTe,NearestMipMapNearestFilter:tTe,NearestMipmapLinearFilter:d0,NearestMipmapNearestFilter:ZO,NeutralToneMapping:jQ,NeverCompare:qQ,NeverDepth:E2,NeverStencilFunc:yTe,NoBlending:hh,NoColorSpace:th,NoToneMapping:mu,NormalAnimationBlendMode:VT,NormalBlending:nm,NotEqualCompare:QQ,NotEqualDepth:I2,NotEqualStencilFunc:ETe,NumberKeyframeTrack:r_,Object3D:ar,ObjectLoader:OMe,ObjectSpaceNormalMap:XQ,OctahedronGeometry:Z_,OneFactor:wQ,OneMinusConstantAlphaFactor:NQ,OneMinusConstantColorFactor:PQ,OneMinusDstAlphaFactor:AQ,OneMinusDstColorFactor:CQ,OneMinusSrcAlphaFactor:S2,OneMinusSrcColorFactor:EQ,OrthographicCamera:lf,PCFShadowMap:DT,PCFSoftShadowMap:$1,PMREMGenerator:n3,Path:oA,PerspectiveCamera:Bi,Plane:Ju,PlaneGeometry:ry,PlaneHelper:TIe,PointLight:$J,PointLightHelper:vIe,Points:gJ,PointsMaterial:p4,PolarGridHelper:wIe,PolyhedronGeometry:Bf,PositionalAudio:HMe,PropertyBinding:ir,PropertyMixer:nee,QuadraticBezierCurve:x4,QuadraticBezierCurve3:_4,Quaternion:wo,QuaternionKeyframeTrack:ew,QuaternionLinearInterpolant:zJ,RED_GREEN_RGTC2_Format:eA,RED_RGTC1_Format:i4,REVISION:NT,RGBADepthPacking:$Q,RGBAFormat:_o,RGBAIntegerFormat:jT,RGBA_ASTC_10x10_Format:q2,RGBA_ASTC_10x5_Format:G2,RGBA_ASTC_10x6_Format:$2,RGBA_ASTC_10x8_Format:X2,RGBA_ASTC_12x10_Format:Y2,RGBA_ASTC_12x12_Format:K2,RGBA_ASTC_4x4_Format:F2,RGBA_ASTC_5x4_Format:B2,RGBA_ASTC_5x5_Format:U2,RGBA_ASTC_6x5_Format:j2,RGBA_ASTC_6x6_Format:V2,RGBA_ASTC_8x5_Format:z2,RGBA_ASTC_8x6_Format:H2,RGBA_ASTC_8x8_Format:W2,RGBA_BPTC_Format:Q1,RGBA_ETC2_EAC_Format:L2,RGBA_PVRTC_2BPPV1_Format:D2,RGBA_PVRTC_4BPPV1_Format:N2,RGBA_S3TC_DXT1_Format:Y1,RGBA_S3TC_DXT3_Format:K1,RGBA_S3TC_DXT5_Format:Z1,RGBDepthPacking:cTe,RGBFormat:n4,RGBIntegerFormat:sTe,RGB_BPTC_SIGNED_Format:Z2,RGB_BPTC_UNSIGNED_Format:Q2,RGB_ETC1_Format:k2,RGB_ETC2_Format:O2,RGB_PVRTC_2BPPV1_Format:R2,RGB_PVRTC_4BPPV1_Format:P2,RGB_S3TC_DXT1_Format:q1,RGDepthPacking:uTe,RGFormat:r4,RGIntegerFormat:UT,RawShaderMaterial:PJ,Ray:jm,Raycaster:iee,RectAreaLight:YJ,RedFormat:BT,RedIntegerFormat:$_,ReinhardToneMapping:LQ,RenderTarget:l4,RenderTarget3D:rIe,RepeatWrapping:Xx,ReplaceStencilOp:dTe,ReverseSubtractEquation:vQ,RingGeometry:rC,SIGNED_RED_GREEN_RGTC2_Format:tA,SIGNED_RED_RGTC1_Format:J2,SRGBColorSpace:va,SRGBTransfer:Ar,Scene:h4,ShaderChunk:Nn,ShaderLib:rc,ShaderMaterial:_c,ShadowMaterial:IJ,Shape:sm,ShapeGeometry:iC,ShapePath:IIe,ShapeUtils:cc,ShortType:JO,Skeleton:XT,SkeletonHelper:gIe,SkinnedMesh:dJ,Source:Wd,Sphere:Hs,SphereGeometry:Q_,Spherical:e3,SphericalHarmonics3:KJ,SplineCurve:w4,SpotLight:GJ,SpotLightHelper:mIe,Sprite:uJ,SpriteMaterial:d4,SrcAlphaFactor:w2,SrcAlphaSaturateFactor:MQ,SrcColorFactor:SQ,StaticCopyUsage:PTe,StaticDrawUsage:Qx,StaticReadUsage:CTe,StereoCamera:UMe,StreamCopyUsage:NTe,StreamDrawUsage:TTe,StreamReadUsage:ITe,StringKeyframeTrack:Hm,SubtractEquation:gQ,SubtractiveBlending:HN,TOUCH:Cp,TangentSpaceNormalMap:Lf,TetrahedronGeometry:sC,Texture:ai,TextureLoader:cC,TextureUtils:OIe,Timer:lIe,TimestampQuery:kTe,TorusGeometry:oC,TorusKnotGeometry:aC,Triangle:xa,TriangleFanDrawMode:lTe,TriangleStripDrawMode:aTe,TrianglesDrawMode:oTe,TubeGeometry:lC,UVMapping:kT,Uint16BufferAttribute:c4,Uint32BufferAttribute:u4,Uint8BufferAttribute:xCe,Uint8ClampedBufferAttribute:_Ce,Uniform:k4,UniformsGroup:sIe,UniformsLib:St,UniformsUtils:oJ,UnsignedByteType:Rl,UnsignedInt248Type:Ev,UnsignedInt5999Type:e4,UnsignedIntType:Ch,UnsignedShort4444Type:LT,UnsignedShort5551Type:FT,UnsignedShortType:Sv,VSMShadowMap:Zl,Vector2:Ze,Vector3:re,Vector4:sr,VectorKeyframeTrack:i_,VideoFrameTexture:HCe,VideoTexture:vJ,WebGL3DRenderTarget:oCe,WebGLArrayRenderTarget:sCe,WebGLCoordinateSystem:za,WebGLCubeRenderTarget:lJ,WebGLRenderTarget:_u,WebGLRenderer:fee,WebGLUtils:hee,WebGPUCoordinateSystem:Tv,WebXRController:nb,WireframeGeometry:MJ,WrapAroundEnding:Kx,ZeroCurvatureEnding:Bp,ZeroFactor:_Q,ZeroSlopeEnding:Up,ZeroStencilOp:hTe,createCanvasElement:nJ},Symbol.toStringTag,{value:"Module"}));var pee={exports:{}},Wm={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Wm.ConcurrentRoot=1;Wm.ContinuousEventPriority=4;Wm.DefaultEventPriority=16;Wm.DiscreteEventPriority=1;Wm.IdleEventPriority=536870912;Wm.LegacyRoot=0;pee.exports=Wm;var g0=pee.exports;function vDe(n){let e;const t=new Set,r=(c,u)=>{const h=typeof c=="function"?c(e):c;if(h!==e){const f=e;e=u?h:Object.assign({},e,h),t.forEach(p=>p(e,f))}},i=()=>e,s=(c,u=i,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=u(e);function p(){const v=u(e);if(!h(f,v)){const _=f;c(f=v,_)}}return t.add(p),()=>t.delete(p)},l={setState:r,getState:i,subscribe:(c,u,h)=>u||h?s(c,u,h):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const yDe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),nV=yDe?O.useEffect:O.useLayoutEffect;function xDe(n){const e=typeof n=="function"?vDe(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=O.useReducer(S=>S+1,0),o=e.getState(),a=O.useRef(o),l=O.useRef(r),c=O.useRef(i),u=O.useRef(!1),h=O.useRef();h.current===void 0&&(h.current=r(o));let f,p=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(f=r(o),p=!i(h.current,f)),nV(()=>{p&&(h.current=f),a.current=o,l.current=r,c.current=i,u.current=!1});const v=O.useRef(o);nV(()=>{const S=()=>{try{const E=e.getState(),b=l.current(E);c.current(h.current,b)||(a.current=E,h.current=b,s())}catch{u.current=!0,s()}},x=e.subscribe(S);return e.getState()!==v.current&&S(),x},[]);const _=p?f:h.current;return O.useDebugValue(_),_};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const _De=n=>typeof n=="object"&&typeof n.then=="function",Vp=[];function mee(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function gee(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of Vp)if(mee(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=Vp.indexOf(i);s!==-1&&Vp.splice(s,1)},promise:(_De(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(Vp.push(i),!t)throw i.promise}const wDe=(n,e,t)=>gee(n,e,!1,t),SDe=(n,e,t)=>void gee(n,e,!0,t),EDe=n=>{if(n===void 0||n.length===0)Vp.splice(0,Vp.length);else{const e=Vp.find(t=>mee(n,t.keys,t.equal));e&&e.remove()}};var vee={exports:{}},yee={exports:{}},xee={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(X,ce){var oe=X.length;X.push(ce);e:for(;0<oe;){var fe=oe-1>>>1,De=X[fe];if(0<i(De,ce))X[fe]=ce,X[oe]=De,oe=fe;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ce=X[0],oe=X.pop();if(oe!==ce){X[0]=oe;e:for(var fe=0,De=X.length,We=De>>>1;fe<We;){var Qe=2*(fe+1)-1,ve=X[Qe],Ie=Qe+1,we=X[Ie];if(0>i(ve,oe))Ie<De&&0>i(we,ve)?(X[fe]=we,X[Ie]=oe,fe=Ie):(X[fe]=ve,X[Qe]=oe,fe=Qe);else if(Ie<De&&0>i(we,oe))X[fe]=we,X[Ie]=oe,fe=Ie;else break e}}return ce}function i(X,ce){var oe=X.sortIndex-ce.sortIndex;return oe!==0?oe:X.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,p=!1,v=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(X){for(var ce=t(c);ce!==null;){if(ce.callback===null)r(c);else if(ce.startTime<=X)r(c),ce.sortIndex=ce.expirationTime,e(l,ce);else break;ce=t(c)}}function M(X){if(_=!1,b(X),!v)if(t(l)!==null)v=!0,se(k);else{var ce=t(c);ce!==null&&le(M,ce.startTime-X)}}function k(X,ce){v=!1,_&&(_=!1,x(N),N=-1),p=!0;var oe=f;try{for(b(ce),h=t(l);h!==null&&(!(h.expirationTime>ce)||X&&!U());){var fe=h.callback;if(typeof fe=="function"){h.callback=null,f=h.priorityLevel;var De=fe(h.expirationTime<=ce);ce=n.unstable_now(),typeof De=="function"?h.callback=De:h===t(l)&&r(l),b(ce)}else r(l);h=t(l)}if(h!==null)var We=!0;else{var Qe=t(c);Qe!==null&&le(M,Qe.startTime-ce),We=!1}return We}finally{h=null,f=oe,p=!1}}var B=!1,P=null,N=-1,R=5,I=-1;function U(){return!(n.unstable_now()-I<R)}function H(){if(P!==null){var X=n.unstable_now();I=X;var ce=!0;try{ce=P(!0,X)}finally{ce?W():(B=!1,P=null)}}else B=!1}var W;if(typeof E=="function")W=function(){E(H)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,te=K.port2;K.port1.onmessage=H,W=function(){te.postMessage(null)}}else W=function(){S(H,0)};function se(X){P=X,B||(B=!0,W())}function le(X,ce){N=S(function(){X(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){v||p||(v=!0,se(k))},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(X){switch(f){case 1:case 2:case 3:var ce=3;break;default:ce=f}var oe=f;f=ce;try{return X()}finally{f=oe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,ce){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var oe=f;f=X;try{return ce()}finally{f=oe}},n.unstable_scheduleCallback=function(X,ce,oe){var fe=n.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?fe+oe:fe):oe=fe,X){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=oe+De,X={id:u++,callback:ce,priorityLevel:X,startTime:oe,expirationTime:De,sortIndex:-1},oe>fe?(X.sortIndex=oe,e(c,X),t(l)===null&&X===t(c)&&(_?(x(N),N=-1):_=!0,le(M,oe-fe))):(X.sortIndex=De,e(l,X),v||p||(v=!0,se(k))),X},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(X){var ce=f;return function(){var oe=f;f=ce;try{return X.apply(this,arguments)}finally{f=oe}}}})(xee);yee.exports=xee;var i3=yee.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bDe=function(e){var t={},r=O,i=i3,s=Object.assign;function o(g){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+g,C=1;C<arguments.length;C++)y+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),v=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),M=Symbol.for("react.offscreen"),k=Symbol.iterator;function B(g){return g===null||typeof g!="object"?null:(g=k&&g[k]||g["@@iterator"],typeof g=="function"?g:null)}function P(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case u:return"Fragment";case c:return"Portal";case f:return"Profiler";case h:return"StrictMode";case S:return"Suspense";case x:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case v:return(g.displayName||"Context")+".Consumer";case p:return(g._context.displayName||"Context")+".Provider";case _:var y=g.render;return g=g.displayName,g||(g=y.displayName||y.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case E:return y=g.displayName||null,y!==null?y:P(g.type)||"Memo";case b:y=g._payload,g=g._init;try{return P(g(y))}catch{}}return null}function N(g){var y=g.type;switch(g.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=y.render,g=g.displayName||g.name||"",y.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(y);case 8:return y===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y}return null}function R(g){var y=g,C=g;if(g.alternate)for(;y.return;)y=y.return;else{g=y;do y=g,y.flags&4098&&(C=y.return),g=y.return;while(g)}return y.tag===3?C:null}function I(g){if(R(g)!==g)throw Error(o(188))}function U(g){var y=g.alternate;if(!y){if(y=R(g),y===null)throw Error(o(188));return y!==g?null:g}for(var C=g,D=y;;){var j=C.return;if(j===null)break;var $=j.alternate;if($===null){if(D=j.return,D!==null){C=D;continue}break}if(j.child===$.child){for($=j.child;$;){if($===C)return I(j),g;if($===D)return I(j),y;$=$.sibling}throw Error(o(188))}if(C.return!==D.return)C=j,D=$;else{for(var ae=!1,ye=j.child;ye;){if(ye===C){ae=!0,C=j,D=$;break}if(ye===D){ae=!0,D=j,C=$;break}ye=ye.sibling}if(!ae){for(ye=$.child;ye;){if(ye===C){ae=!0,C=$,D=j;break}if(ye===D){ae=!0,D=$,C=j;break}ye=ye.sibling}if(!ae)throw Error(o(189))}}if(C.alternate!==D)throw Error(o(190))}if(C.tag!==3)throw Error(o(188));return C.stateNode.current===C?g:y}function H(g){return g=U(g),g!==null?W(g):null}function W(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var y=W(g);if(y!==null)return y;g=g.sibling}return null}function K(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){if(g.tag!==4){var y=K(g);if(y!==null)return y}g=g.sibling}return null}var te=Array.isArray,se=e.getPublicInstance,le=e.getRootHostContext,X=e.getChildHostContext,ce=e.prepareForCommit,oe=e.resetAfterCommit,fe=e.createInstance,De=e.appendInitialChild,We=e.finalizeInitialChildren,Qe=e.prepareUpdate,ve=e.shouldSetTextContent,Ie=e.createTextInstance,we=e.scheduleTimeout,tt=e.cancelTimeout,Ke=e.noTimeout,Me=e.isPrimaryRenderer,Ye=e.supportsMutation,Pe=e.supportsPersistence,ne=e.supportsHydration,Be=e.getInstanceFromNode,Re=e.preparePortalMount,qe=e.getCurrentEventPriority,ze=e.detachDeletedInstance,J=e.supportsMicrotasks,be=e.scheduleMicrotask,Fe=e.supportsTestSelectors,rt=e.findFiberRoot,pt=e.getBoundingRect,ee=e.getTextContent,q=e.isHiddenSubtree,me=e.matchAccessibilityRole,pe=e.setFocusIfFocusable,Ve=e.setupIntersectionObserver,Ue=e.appendChild,Mt=e.appendChildToContainer,lt=e.commitTextUpdate,bt=e.commitMount,wt=e.commitUpdate,st=e.insertBefore,mt=e.insertInContainerBefore,Wt=e.removeChild,ue=e.removeChildFromContainer,Te=e.resetTextContent,ut=e.hideInstance,he=e.hideTextInstance,Je=e.unhideInstance,ot=e.unhideTextInstance,gt=e.clearContainer,at=e.cloneInstance,Xe=e.createContainerChildSet,xt=e.appendChildToContainerChildSet,Bt=e.finalizeContainerChildren,Cn=e.replaceContainerChildren,xn=e.cloneHiddenInstance,$r=e.cloneHiddenTextInstance,Kn=e.canHydrateInstance,Au=e.canHydrateTextInstance,Cs=e.canHydrateSuspenseInstance,Jo=e.isSuspenseInstancePending,Zi=e.isSuspenseInstanceFallback,Gt=e.registerSuspenseInstanceRetry,Ui=e.getNextHydratableSibling,Tu=e.getFirstHydratableChild,Dl=e.getFirstHydratableChildWithinContainer,tl=e.getFirstHydratableChildWithinSuspenseInstance,kl=e.hydrateInstance,bc=e.hydrateTextInstance,Co=e.hydrateSuspenseInstance,Mo=e.getNextHydratableInstanceAfterSuspenseInstance,Cu=e.commitHydratedContainer,Dh=e.commitHydratedSuspenseInstance,Mu=e.clearSuspenseBoundary,Z=e.clearSuspenseBoundaryFromContainer,xe=e.shouldDeleteUnhydratedTailInstances,ke=e.didNotMatchHydratedContainerTextInstance,Oe=e.didNotMatchHydratedTextInstance,_e;function ct(g){if(_e===void 0)try{throw Error()}catch(C){var y=C.stack.trim().match(/\n( *(at )?)/);_e=y&&y[1]||""}return`
`+_e+g}var yt=!1;function Tt(g,y){if(!g||yt)return"";yt=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(ft){var D=ft}Reflect.construct(g,[],y)}else{try{y.call()}catch(ft){D=ft}g.call(y.prototype)}else{try{throw Error()}catch(ft){D=ft}g()}}catch(ft){if(ft&&D&&typeof ft.stack=="string"){for(var j=ft.stack.split(`
`),$=D.stack.split(`
`),ae=j.length-1,ye=$.length-1;1<=ae&&0<=ye&&j[ae]!==$[ye];)ye--;for(;1<=ae&&0<=ye;ae--,ye--)if(j[ae]!==$[ye]){if(ae!==1||ye!==1)do if(ae--,ye--,0>ye||j[ae]!==$[ye]){var Ge=`
`+j[ae].replace(" at new "," at ");return g.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",g.displayName)),Ge}while(1<=ae&&0<=ye);break}}}finally{yt=!1,Error.prepareStackTrace=C}return(g=g?g.displayName||g.name:"")?ct(g):""}var _t=Object.prototype.hasOwnProperty,Kt=[],Xt=-1;function kt(g){return{current:g}}function Ot(g){0>Xt||(g.current=Kt[Xt],Kt[Xt]=null,Xt--)}function Vt(g,y){Xt++,Kt[Xt]=g.current,g.current=y}var Lt={},Pt=kt(Lt),un=kt(!1),Rt=Lt;function Ln(g,y){var C=g.type.contextTypes;if(!C)return Lt;var D=g.stateNode;if(D&&D.__reactInternalMemoizedUnmaskedChildContext===y)return D.__reactInternalMemoizedMaskedChildContext;var j={},$;for($ in C)j[$]=y[$];return D&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=y,g.__reactInternalMemoizedMaskedChildContext=j),j}function tn(g){return g=g.childContextTypes,g!=null}function qt(){Ot(un),Ot(Pt)}function Jn(g,y,C){if(Pt.current!==Lt)throw Error(o(168));Vt(Pt,y),Vt(un,C)}function wi(g,y,C){var D=g.stateNode;if(y=y.childContextTypes,typeof D.getChildContext!="function")return C;D=D.getChildContext();for(var j in D)if(!(j in y))throw Error(o(108,N(g)||"Unknown",j));return s({},C,D)}function li(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||Lt,Rt=Pt.current,Vt(Pt,g),Vt(un,un.current),!0}function dn(g,y,C){var D=g.stateNode;if(!D)throw Error(o(169));C?(g=wi(g,y,Rt),D.__reactInternalMemoizedMergedChildContext=g,Ot(un),Ot(Pt),Vt(Pt,g)):Ot(un),Vt(un,C)}var dr=Math.clz32?Math.clz32:$t,ni=Math.log,Mr=Math.LN2;function $t(g){return g>>>=0,g===0?32:31-(ni(g)/Mr|0)|0}var Pi=64,ri=4194304;function Ms(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function Ac(g,y){var C=g.pendingLanes;if(C===0)return 0;var D=0,j=g.suspendedLanes,$=g.pingedLanes,ae=C&268435455;if(ae!==0){var ye=ae&~j;ye!==0?D=Ms(ye):($&=ae,$!==0&&(D=Ms($)))}else ae=C&~j,ae!==0?D=Ms(ae):$!==0&&(D=Ms($));if(D===0)return 0;if(y!==0&&y!==D&&!(y&j)&&(j=D&-D,$=y&-y,j>=$||j===16&&($&4194240)!==0))return y;if(D&4&&(D|=C&16),y=g.entangledLanes,y!==0)for(g=g.entanglements,y&=D;0<y;)C=31-dr(y),j=1<<C,D|=g[C],y&=~j;return D}function Tc(g,y){switch(g){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jf(g,y){for(var C=g.suspendedLanes,D=g.pingedLanes,j=g.expirationTimes,$=g.pendingLanes;0<$;){var ae=31-dr($),ye=1<<ae,Ge=j[ae];Ge===-1?(!(ye&C)||ye&D)&&(j[ae]=Tc(ye,y)):Ge<=y&&(g.expiredLanes|=ye),$&=~ye}}function Iu(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function Cc(g){for(var y=[],C=0;31>C;C++)y.push(g);return y}function Ol(g,y,C){g.pendingLanes|=y,y!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,y=31-dr(y),g[y]=C}function Ll(g,y){var C=g.pendingLanes&~y;g.pendingLanes=y,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=y,g.mutableReadLanes&=y,g.entangledLanes&=y,y=g.entanglements;var D=g.eventTimes;for(g=g.expirationTimes;0<C;){var j=31-dr(C),$=1<<j;y[j]=0,D[j]=-1,g[j]=-1,C&=~$}}function Is(g,y){var C=g.entangledLanes|=y;for(g=g.entanglements;C;){var D=31-dr(C),j=1<<D;j&y|g[D]&y&&(g[D]|=y),C&=~j}}var Vn=0;function Pu(g){return g&=-g,1<g?4<g?g&268435455?16:536870912:4:1}var kh=i.unstable_scheduleCallback,sn=i.unstable_cancelCallback,ea=i.unstable_shouldYield,mr=i.unstable_requestPaint,ci=i.unstable_now,qs=i.unstable_ImmediatePriority,Vf=i.unstable_UserBlockingPriority,Ru=i.unstable_NormalPriority,ta=i.unstable_IdlePriority,Pa=null,Qi=null;function Xr(g){if(Qi&&typeof Qi.onCommitFiberRoot=="function")try{Qi.onCommitFiberRoot(Pa,g,void 0,(g.current.flags&128)===128)}catch{}}function Io(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var Ys=typeof Object.is=="function"?Object.is:Io,Ks=null,wr=!1,Oh=!1;function Lh(g){Ks===null?Ks=[g]:Ks.push(g)}function Gm(g){wr=!0,Lh(g)}function Zs(){if(!Oh&&Ks!==null){Oh=!0;var g=0,y=Vn;try{var C=Ks;for(Vn=1;g<C.length;g++){var D=C[g];do D=D(!0);while(D!==null)}Ks=null,wr=!1}catch(j){throw Ks!==null&&(Ks=Ks.slice(g+1)),kh(qs,Zs),j}finally{Vn=y,Oh=!1}}return null}var Fn=a.ReactCurrentBatchConfig;function Fl(g,y){if(Ys(g,y))return!0;if(typeof g!="object"||g===null||typeof y!="object"||y===null)return!1;var C=Object.keys(g),D=Object.keys(y);if(C.length!==D.length)return!1;for(D=0;D<C.length;D++){var j=C[D];if(!_t.call(y,j)||!Ys(g[j],y[j]))return!1}return!0}function Qs(g){switch(g.tag){case 5:return ct(g.type);case 16:return ct("Lazy");case 13:return ct("Suspense");case 19:return ct("SuspenseList");case 0:case 2:case 15:return g=Tt(g.type,!1),g;case 11:return g=Tt(g.type.render,!1),g;case 1:return g=Tt(g.type,!0),g;default:return""}}function Nr(g,y){if(g&&g.defaultProps){y=s({},y),g=g.defaultProps;for(var C in g)y[C]===void 0&&(y[C]=g[C]);return y}return y}var Mc=kt(null),Fh=null,Js=null,Bh=null;function Ic(){Bh=Js=Fh=null}function Nu(g,y,C){Me?(Vt(Mc,y._currentValue),y._currentValue=C):(Vt(Mc,y._currentValue2),y._currentValue2=C)}function Uh(g){var y=Mc.current;Ot(Mc),Me?g._currentValue=y:g._currentValue2=y}function nl(g,y,C){for(;g!==null;){var D=g.alternate;if((g.childLanes&y)!==y?(g.childLanes|=y,D!==null&&(D.childLanes|=y)):D!==null&&(D.childLanes&y)!==y&&(D.childLanes|=y),g===C)break;g=g.return}}function Pc(g,y){Fh=g,Bh=Js=null,g=g.dependencies,g!==null&&g.firstContext!==null&&(g.lanes&y&&(Da=!0),g.firstContext=null)}function Fr(g){var y=Me?g._currentValue:g._currentValue2;if(Bh!==g)if(g={context:g,memoizedValue:y,next:null},Js===null){if(Fh===null)throw Error(o(308));Js=g,Fh.dependencies={lanes:0,firstContext:g}}else Js=Js.next=g;return y}var ms=null,na=!1;function Po(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Du(g,y){g=g.updateQueue,y.updateQueue===g&&(y.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function eo(g,y){return{eventTime:g,lane:y,tag:0,payload:null,callback:null,next:null}}function Ro(g,y){var C=g.updateQueue;C!==null&&(C=C.shared,ji!==null&&g.mode&1&&!(Bn&2)?(g=C.interleaved,g===null?(y.next=y,ms===null?ms=[C]:ms.push(C)):(y.next=g.next,g.next=y),C.interleaved=y):(g=C.pending,g===null?y.next=y:(y.next=g.next,g.next=y),C.pending=y))}function Bl(g,y,C){if(y=y.updateQueue,y!==null&&(y=y.shared,(C&4194240)!==0)){var D=y.lanes;D&=g.pendingLanes,C|=D,y.lanes=C,Is(g,C)}}function jh(g,y){var C=g.updateQueue,D=g.alternate;if(D!==null&&(D=D.updateQueue,C===D)){var j=null,$=null;if(C=C.firstBaseUpdate,C!==null){do{var ae={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};$===null?j=$=ae:$=$.next=ae,C=C.next}while(C!==null);$===null?j=$=y:$=$.next=y}else j=$=y;C={baseState:D.baseState,firstBaseUpdate:j,lastBaseUpdate:$,shared:D.shared,effects:D.effects},g.updateQueue=C;return}g=C.lastBaseUpdate,g===null?C.firstBaseUpdate=y:g.next=y,C.lastBaseUpdate=y}function Rc(g,y,C,D){var j=g.updateQueue;na=!1;var $=j.firstBaseUpdate,ae=j.lastBaseUpdate,ye=j.shared.pending;if(ye!==null){j.shared.pending=null;var Ge=ye,ft=Ge.next;Ge.next=null,ae===null?$=ft:ae.next=ft,ae=Ge;var Ut=g.alternate;Ut!==null&&(Ut=Ut.updateQueue,ye=Ut.lastBaseUpdate,ye!==ae&&(ye===null?Ut.firstBaseUpdate=ft:ye.next=ft,Ut.lastBaseUpdate=Ge))}if($!==null){var bn=j.baseState;ae=0,Ut=ft=Ge=null,ye=$;do{var on=ye.lane,kr=ye.eventTime;if((D&on)===on){Ut!==null&&(Ut=Ut.next={eventTime:kr,lane:0,tag:ye.tag,payload:ye.payload,callback:ye.callback,next:null});e:{var Qt=g,io=ye;switch(on=y,kr=C,io.tag){case 1:if(Qt=io.payload,typeof Qt=="function"){bn=Qt.call(kr,bn,on);break e}bn=Qt;break e;case 3:Qt.flags=Qt.flags&-65537|128;case 0:if(Qt=io.payload,on=typeof Qt=="function"?Qt.call(kr,bn,on):Qt,on==null)break e;bn=s({},bn,on);break e;case 2:na=!0}}ye.callback!==null&&ye.lane!==0&&(g.flags|=64,on=j.effects,on===null?j.effects=[ye]:on.push(ye))}else kr={eventTime:kr,lane:on,tag:ye.tag,payload:ye.payload,callback:ye.callback,next:null},Ut===null?(ft=Ut=kr,Ge=bn):Ut=Ut.next=kr,ae|=on;if(ye=ye.next,ye===null){if(ye=j.shared.pending,ye===null)break;on=ye,ye=on.next,on.next=null,j.lastBaseUpdate=on,j.shared.pending=null}}while(!0);if(Ut===null&&(Ge=bn),j.baseState=Ge,j.firstBaseUpdate=ft,j.lastBaseUpdate=Ut,y=j.shared.interleaved,y!==null){j=y;do ae|=j.lane,j=j.next;while(j!==y)}else $===null&&(j.shared.lanes=0);tg|=ae,g.lanes=ae,g.memoizedState=bn}}function rl(g,y,C){if(g=y.effects,y.effects=null,g!==null)for(y=0;y<g.length;y++){var D=g[y],j=D.callback;if(j!==null){if(D.callback=null,D=C,typeof j!="function")throw Error(o(191,j));j.call(D)}}}var zf=new r.Component().refs;function Nc(g,y,C,D){y=g.memoizedState,C=C(D,y),C=C==null?y:s({},y,C),g.memoizedState=C,g.lanes===0&&(g.updateQueue.baseState=C)}var ku={isMounted:function(g){return(g=g._reactInternals)?R(g)===g:!1},enqueueSetState:function(g,y,C){g=g._reactInternals;var D=Lo(),j=ed(g),$=eo(D,j);$.payload=y,C!=null&&($.callback=C),Ro(g,$),y=al(g,j,D),y!==null&&Bl(y,g,j)},enqueueReplaceState:function(g,y,C){g=g._reactInternals;var D=Lo(),j=ed(g),$=eo(D,j);$.tag=1,$.payload=y,C!=null&&($.callback=C),Ro(g,$),y=al(g,j,D),y!==null&&Bl(y,g,j)},enqueueForceUpdate:function(g,y){g=g._reactInternals;var C=Lo(),D=ed(g),j=eo(C,D);j.tag=2,y!=null&&(j.callback=y),Ro(g,j),y=al(g,D,C),y!==null&&Bl(y,g,D)}};function Vh(g,y,C,D,j,$,ae){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(D,$,ae):y.prototype&&y.prototype.isPureReactComponent?!Fl(C,D)||!Fl(j,$):!0}function Dc(g,y,C){var D=!1,j=Lt,$=y.contextType;return typeof $=="object"&&$!==null?$=Fr($):(j=tn(y)?Rt:Pt.current,D=y.contextTypes,$=(D=D!=null)?Ln(g,j):Lt),y=new y(C,$),g.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=ku,g.stateNode=y,y._reactInternals=g,D&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=j,g.__reactInternalMemoizedMaskedChildContext=$),y}function Ri(g,y,C,D){g=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(C,D),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(C,D),y.state!==g&&ku.enqueueReplaceState(y,y.state,null)}function ra(g,y,C,D){var j=g.stateNode;j.props=C,j.state=g.memoizedState,j.refs=zf,Po(g);var $=y.contextType;typeof $=="object"&&$!==null?j.context=Fr($):($=tn(y)?Rt:Pt.current,j.context=Ln(g,$)),j.state=g.memoizedState,$=y.getDerivedStateFromProps,typeof $=="function"&&(Nc(g,y,$,C),j.state=g.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(y=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),y!==j.state&&ku.enqueueReplaceState(j,j.state,null),Rc(g,C,j,D),j.state=g.memoizedState),typeof j.componentDidMount=="function"&&(g.flags|=4194308)}var Ul=[],Ji=0,A=null,V=0,G=[],Q=0,Ee=null,Le=1,ht="";function Wn(g,y){Ul[Ji++]=V,Ul[Ji++]=A,A=g,V=y}function ui(g,y,C){G[Q++]=Le,G[Q++]=ht,G[Q++]=Ee,Ee=g;var D=Le;g=ht;var j=32-dr(D)-1;D&=~(1<<j),C+=1;var $=32-dr(y)+j;if(30<$){var ae=j-j%5;$=(D&(1<<ae)-1).toString(32),D>>=ae,j-=ae,Le=1<<32-dr(y)+j|C<<j|D,ht=$+g}else Le=1<<$|C<<j|D,ht=g}function zn(g){g.return!==null&&(Wn(g,1),ui(g,1,0))}function lr(g){for(;g===A;)A=Ul[--Ji],Ul[Ji]=null,V=Ul[--Ji],Ul[Ji]=null;for(;g===Ee;)Ee=G[--Q],G[Q]=null,ht=G[--Q],G[Q]=null,Le=G[--Q],G[Q]=null}var Gn=null,Si=null,_n=!1,il=!1,Ei=null;function sw(g,y){var C=ll(5,null,null,0);C.elementType="DELETED",C.stateNode=y,C.return=g,y=g.deletions,y===null?(g.deletions=[C],g.flags|=16):y.push(C)}function zh(g,y){switch(g.tag){case 5:return y=Kn(y,g.type,g.pendingProps),y!==null?(g.stateNode=y,Gn=g,Si=Tu(y),!0):!1;case 6:return y=Au(y,g.pendingProps),y!==null?(g.stateNode=y,Gn=g,Si=null,!0):!1;case 13:if(y=Cs(y),y!==null){var C=Ee!==null?{id:Le,overflow:ht}:null;return g.memoizedState={dehydrated:y,treeContext:C,retryLane:1073741824},C=ll(18,null,null,0),C.stateNode=y,C.return=g,g.child=C,Gn=g,Si=null,!0}return!1;default:return!1}}function $m(g){return(g.mode&1)!==0&&(g.flags&128)===0}function Hh(g){if(_n){var y=Si;if(y){var C=y;if(!zh(g,y)){if($m(g))throw Error(o(418));y=Ui(C);var D=Gn;y&&zh(g,y)?sw(D,C):(g.flags=g.flags&-4097|2,_n=!1,Gn=g)}}else{if($m(g))throw Error(o(418));g.flags=g.flags&-4097|2,_n=!1,Gn=g}}}function ow(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;Gn=g}function ia(g){if(!ne||g!==Gn)return!1;if(!_n)return ow(g),_n=!0,!1;if(g.tag!==3&&(g.tag!==5||xe(g.type)&&!ve(g.type,g.memoizedProps))){var y=Si;if(y){if($m(g)){for(g=Si;g;)g=Ui(g);throw Error(o(418))}for(;y;)sw(g,y),y=Ui(y)}}if(ow(g),g.tag===13){if(!ne)throw Error(o(316));if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));Si=Mo(g)}else Si=Gn?Ui(g.stateNode):null;return!0}function jl(){ne&&(Si=Gn=null,il=_n=!1)}function ay(g){Ei===null?Ei=[g]:Ei.push(g)}function Ou(g,y,C){if(g=C.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(o(309));var D=C.stateNode}if(!D)throw Error(o(147,g));var j=D,$=""+g;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===$?y.ref:(y=function(ae){var ye=j.refs;ye===zf&&(ye=j.refs={}),ae===null?delete ye[$]:ye[$]=ae},y._stringRef=$,y)}if(typeof g!="string")throw Error(o(284));if(!C._owner)throw Error(o(290,g))}return g}function Xm(g,y){throw g=Object.prototype.toString.call(y),Error(o(31,g==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":g))}function sl(g){var y=g._init;return y(g._payload)}function aw(g){function y(Ne,Se){if(g){var He=Ne.deletions;He===null?(Ne.deletions=[Se],Ne.flags|=16):He.push(Se)}}function C(Ne,Se){if(!g)return null;for(;Se!==null;)y(Ne,Se),Se=Se.sibling;return null}function D(Ne,Se){for(Ne=new Map;Se!==null;)Se.key!==null?Ne.set(Se.key,Se):Ne.set(Se.index,Se),Se=Se.sibling;return Ne}function j(Ne,Se){return Ne=nd(Ne,Se),Ne.index=0,Ne.sibling=null,Ne}function $(Ne,Se,He){return Ne.index=He,g?(He=Ne.alternate,He!==null?(He=He.index,He<Se?(Ne.flags|=2,Se):He):(Ne.flags|=2,Se)):(Ne.flags|=1048576,Se)}function ae(Ne){return g&&Ne.alternate===null&&(Ne.flags|=2),Ne}function ye(Ne,Se,He,It){return Se===null||Se.tag!==6?(Se=VC(He,Ne.mode,It),Se.return=Ne,Se):(Se=j(Se,He),Se.return=Ne,Se)}function Ge(Ne,Se,He,It){var Zt=He.type;return Zt===u?Ut(Ne,Se,He.props.children,It,He.key):Se!==null&&(Se.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===b&&sl(Zt)===Se.type)?(It=j(Se,He.props),It.ref=Ou(Ne,Se,He),It.return=Ne,It):(It=Lw(He.type,He.key,He.props,null,Ne.mode,It),It.ref=Ou(Ne,Se,He),It.return=Ne,It)}function ft(Ne,Se,He,It){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==He.containerInfo||Se.stateNode.implementation!==He.implementation?(Se=zC(He,Ne.mode,It),Se.return=Ne,Se):(Se=j(Se,He.children||[]),Se.return=Ne,Se)}function Ut(Ne,Se,He,It,Zt){return Se===null||Se.tag!==7?(Se=ep(He,Ne.mode,It,Zt),Se.return=Ne,Se):(Se=j(Se,He),Se.return=Ne,Se)}function bn(Ne,Se,He){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return Se=VC(""+Se,Ne.mode,He),Se.return=Ne,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case l:return He=Lw(Se.type,Se.key,Se.props,null,Ne.mode,He),He.ref=Ou(Ne,null,Se),He.return=Ne,He;case c:return Se=zC(Se,Ne.mode,He),Se.return=Ne,Se;case b:var It=Se._init;return bn(Ne,It(Se._payload),He)}if(te(Se)||B(Se))return Se=ep(Se,Ne.mode,He,null),Se.return=Ne,Se;Xm(Ne,Se)}return null}function on(Ne,Se,He,It){var Zt=Se!==null?Se.key:null;if(typeof He=="string"&&He!==""||typeof He=="number")return Zt!==null?null:ye(Ne,Se,""+He,It);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case l:return He.key===Zt?Ge(Ne,Se,He,It):null;case c:return He.key===Zt?ft(Ne,Se,He,It):null;case b:return Zt=He._init,on(Ne,Se,Zt(He._payload),It)}if(te(He)||B(He))return Zt!==null?null:Ut(Ne,Se,He,It,null);Xm(Ne,He)}return null}function kr(Ne,Se,He,It,Zt){if(typeof It=="string"&&It!==""||typeof It=="number")return Ne=Ne.get(He)||null,ye(Se,Ne,""+It,Zt);if(typeof It=="object"&&It!==null){switch(It.$$typeof){case l:return Ne=Ne.get(It.key===null?He:It.key)||null,Ge(Se,Ne,It,Zt);case c:return Ne=Ne.get(It.key===null?He:It.key)||null,ft(Se,Ne,It,Zt);case b:var kn=It._init;return kr(Ne,Se,He,kn(It._payload),Zt)}if(te(It)||B(It))return Ne=Ne.get(He)||null,Ut(Se,Ne,It,Zt,null);Xm(Se,It)}return null}function Qt(Ne,Se,He,It){for(var Zt=null,kn=null,An=Se,cr=Se=0,vs=null;An!==null&&cr<He.length;cr++){An.index>cr?(vs=An,An=null):vs=An.sibling;var ur=on(Ne,An,He[cr],It);if(ur===null){An===null&&(An=vs);break}g&&An&&ur.alternate===null&&y(Ne,An),Se=$(ur,Se,cr),kn===null?Zt=ur:kn.sibling=ur,kn=ur,An=vs}if(cr===He.length)return C(Ne,An),_n&&Wn(Ne,cr),Zt;if(An===null){for(;cr<He.length;cr++)An=bn(Ne,He[cr],It),An!==null&&(Se=$(An,Se,cr),kn===null?Zt=An:kn.sibling=An,kn=An);return _n&&Wn(Ne,cr),Zt}for(An=D(Ne,An);cr<He.length;cr++)vs=kr(An,Ne,cr,He[cr],It),vs!==null&&(g&&vs.alternate!==null&&An.delete(vs.key===null?cr:vs.key),Se=$(vs,Se,cr),kn===null?Zt=vs:kn.sibling=vs,kn=vs);return g&&An.forEach(function(rd){return y(Ne,rd)}),_n&&Wn(Ne,cr),Zt}function io(Ne,Se,He,It){var Zt=B(He);if(typeof Zt!="function")throw Error(o(150));if(He=Zt.call(He),He==null)throw Error(o(151));for(var kn=Zt=null,An=Se,cr=Se=0,vs=null,ur=He.next();An!==null&&!ur.done;cr++,ur=He.next()){An.index>cr?(vs=An,An=null):vs=An.sibling;var rd=on(Ne,An,ur.value,It);if(rd===null){An===null&&(An=vs);break}g&&An&&rd.alternate===null&&y(Ne,An),Se=$(rd,Se,cr),kn===null?Zt=rd:kn.sibling=rd,kn=rd,An=vs}if(ur.done)return C(Ne,An),_n&&Wn(Ne,cr),Zt;if(An===null){for(;!ur.done;cr++,ur=He.next())ur=bn(Ne,ur.value,It),ur!==null&&(Se=$(ur,Se,cr),kn===null?Zt=ur:kn.sibling=ur,kn=ur);return _n&&Wn(Ne,cr),Zt}for(An=D(Ne,An);!ur.done;cr++,ur=He.next())ur=kr(An,Ne,cr,ur.value,It),ur!==null&&(g&&ur.alternate!==null&&An.delete(ur.key===null?cr:ur.key),Se=$(ur,Se,cr),kn===null?Zt=ur:kn.sibling=ur,kn=ur);return g&&An.forEach(function(wte){return y(Ne,wte)}),_n&&Wn(Ne,cr),Zt}function cl(Ne,Se,He,It){if(typeof He=="object"&&He!==null&&He.type===u&&He.key===null&&(He=He.props.children),typeof He=="object"&&He!==null){switch(He.$$typeof){case l:e:{for(var Zt=He.key,kn=Se;kn!==null;){if(kn.key===Zt){if(Zt=He.type,Zt===u){if(kn.tag===7){C(Ne,kn.sibling),Se=j(kn,He.props.children),Se.return=Ne,Ne=Se;break e}}else if(kn.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===b&&sl(Zt)===kn.type){C(Ne,kn.sibling),Se=j(kn,He.props),Se.ref=Ou(Ne,kn,He),Se.return=Ne,Ne=Se;break e}C(Ne,kn);break}else y(Ne,kn);kn=kn.sibling}He.type===u?(Se=ep(He.props.children,Ne.mode,It,He.key),Se.return=Ne,Ne=Se):(It=Lw(He.type,He.key,He.props,null,Ne.mode,It),It.ref=Ou(Ne,Se,He),It.return=Ne,Ne=It)}return ae(Ne);case c:e:{for(kn=He.key;Se!==null;){if(Se.key===kn)if(Se.tag===4&&Se.stateNode.containerInfo===He.containerInfo&&Se.stateNode.implementation===He.implementation){C(Ne,Se.sibling),Se=j(Se,He.children||[]),Se.return=Ne,Ne=Se;break e}else{C(Ne,Se);break}else y(Ne,Se);Se=Se.sibling}Se=zC(He,Ne.mode,It),Se.return=Ne,Ne=Se}return ae(Ne);case b:return kn=He._init,cl(Ne,Se,kn(He._payload),It)}if(te(He))return Qt(Ne,Se,He,It);if(B(He))return io(Ne,Se,He,It);Xm(Ne,He)}return typeof He=="string"&&He!==""||typeof He=="number"?(He=""+He,Se!==null&&Se.tag===6?(C(Ne,Se.sibling),Se=j(Se,He),Se.return=Ne,Ne=Se):(C(Ne,Se),Se=VC(He,Ne.mode,It),Se.return=Ne,Ne=Se),ae(Ne)):C(Ne,Se)}return cl}var Ra=aw(!0),lw=aw(!1),No={},Ps=kt(No),Wh=kt(No),kc=kt(No);function Do(g){if(g===No)throw Error(o(174));return g}function Hf(g,y){Vt(kc,y),Vt(Wh,g),Vt(Ps,No),g=le(y),Ot(Ps),Vt(Ps,g)}function Vl(){Ot(Ps),Ot(Wh),Ot(kc)}function Lu(g){var y=Do(kc.current),C=Do(Ps.current);y=X(C,g.type,y),C!==y&&(Vt(Wh,g),Vt(Ps,y))}function Gh(g){Wh.current===g&&(Ot(Ps),Ot(Wh))}var Dr=kt(0);function Wf(g){for(var y=g;y!==null;){if(y.tag===13){var C=y.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||Jo(C)||Zi(C)))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if(y.flags&128)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===g)break;for(;y.sibling===null;){if(y.return===null||y.return===g)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var ly=[];function $h(){for(var g=0;g<ly.length;g++){var y=ly[g];Me?y._workInProgressVersionPrimary=null:y._workInProgressVersionSecondary=null}ly.length=0}var qm=a.ReactCurrentDispatcher,ko=a.ReactCurrentBatchConfig,Xh=0,qr=null,gs=null,Sr=null,Fu=!1,Gf=!1,Oc=0,mC=0;function es(){throw Error(o(321))}function cy(g,y){if(y===null)return!1;for(var C=0;C<y.length&&C<g.length;C++)if(!Ys(g[C],y[C]))return!1;return!0}function Bu(g,y,C,D,j,$){if(Xh=$,qr=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,qm.current=g===null||g.memoizedState===null?ln:Dn,g=C(D,j),Gf){$=0;do{if(Gf=!1,Oc=0,25<=$)throw Error(o(301));$+=1,Sr=gs=null,y.updateQueue=null,qm.current=Rs,g=C(D,j)}while(Gf)}if(qm.current=Et,y=gs!==null&&gs.next!==null,Xh=0,Sr=gs=qr=null,Fu=!1,y)throw Error(o(300));return g}function uy(){var g=Oc!==0;return Oc=0,g}function to(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sr===null?qr.memoizedState=Sr=g:Sr=Sr.next=g,Sr}function Na(){if(gs===null){var g=qr.alternate;g=g!==null?g.memoizedState:null}else g=gs.next;var y=Sr===null?qr.memoizedState:Sr.next;if(y!==null)Sr=y,gs=g;else{if(g===null)throw Error(o(310));gs=g,g={memoizedState:gs.memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},Sr===null?qr.memoizedState=Sr=g:Sr=Sr.next=g}return Sr}function Lc(g,y){return typeof y=="function"?y(g):y}function Ym(g){var y=Na(),C=y.queue;if(C===null)throw Error(o(311));C.lastRenderedReducer=g;var D=gs,j=D.baseQueue,$=C.pending;if($!==null){if(j!==null){var ae=j.next;j.next=$.next,$.next=ae}D.baseQueue=j=$,C.pending=null}if(j!==null){$=j.next,D=D.baseState;var ye=ae=null,Ge=null,ft=$;do{var Ut=ft.lane;if((Xh&Ut)===Ut)Ge!==null&&(Ge=Ge.next={lane:0,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null}),D=ft.hasEagerState?ft.eagerState:g(D,ft.action);else{var bn={lane:Ut,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null};Ge===null?(ye=Ge=bn,ae=D):Ge=Ge.next=bn,qr.lanes|=Ut,tg|=Ut}ft=ft.next}while(ft!==null&&ft!==$);Ge===null?ae=D:Ge.next=ye,Ys(D,y.memoizedState)||(Da=!0),y.memoizedState=D,y.baseState=ae,y.baseQueue=Ge,C.lastRenderedState=D}if(g=C.interleaved,g!==null){j=g;do $=j.lane,qr.lanes|=$,tg|=$,j=j.next;while(j!==g)}else j===null&&(C.lanes=0);return[y.memoizedState,C.dispatch]}function sa(g){var y=Na(),C=y.queue;if(C===null)throw Error(o(311));C.lastRenderedReducer=g;var D=C.dispatch,j=C.pending,$=y.memoizedState;if(j!==null){C.pending=null;var ae=j=j.next;do $=g($,ae.action),ae=ae.next;while(ae!==j);Ys($,y.memoizedState)||(Da=!0),y.memoizedState=$,y.baseQueue===null&&(y.baseState=$),C.lastRenderedState=$}return[$,D]}function hy(){}function dy(g,y){var C=qr,D=Na(),j=y(),$=!Ys(D.memoizedState,j);if($&&(D.memoizedState=j,Da=!0),D=D.queue,Zh($f.bind(null,C,D,g),[g]),D.getSnapshot!==y||$||Sr!==null&&Sr.memoizedState.tag&1){if(C.flags|=2048,Kh(9,cw.bind(null,C,D,j,y),void 0,null),ji===null)throw Error(o(349));Xh&30||qh(C,y,j)}return j}function qh(g,y,C){g.flags|=16384,g={getSnapshot:y,value:C},y=qr.updateQueue,y===null?(y={lastEffect:null,stores:null},qr.updateQueue=y,y.stores=[g]):(C=y.stores,C===null?y.stores=[g]:C.push(g))}function cw(g,y,C,D){y.value=C,y.getSnapshot=D,Yh(y)&&al(g,1,-1)}function $f(g,y,C){return C(function(){Yh(y)&&al(g,1,-1)})}function Yh(g){var y=g.getSnapshot;g=g.value;try{var C=y();return!Ys(g,C)}catch{return!0}}function Km(g){var y=to();return typeof g=="function"&&(g=g()),y.memoizedState=y.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lc,lastRenderedState:g},y.queue=g,g=g.dispatch=Y.bind(null,qr,g),[y.memoizedState,g]}function Kh(g,y,C,D){return g={tag:g,create:y,destroy:C,deps:D,next:null},y=qr.updateQueue,y===null?(y={lastEffect:null,stores:null},qr.updateQueue=y,y.lastEffect=g.next=g):(C=y.lastEffect,C===null?y.lastEffect=g.next=g:(D=C.next,C.next=g,g.next=D,y.lastEffect=g)),g}function uw(){return Na().memoizedState}function Xf(g,y,C,D){var j=to();qr.flags|=g,j.memoizedState=Kh(1|y,C,void 0,D===void 0?null:D)}function qf(g,y,C,D){var j=Na();D=D===void 0?null:D;var $=void 0;if(gs!==null){var ae=gs.memoizedState;if($=ae.destroy,D!==null&&cy(D,ae.deps)){j.memoizedState=Kh(y,C,$,D);return}}qr.flags|=g,j.memoizedState=Kh(1|y,C,$,D)}function Zm(g,y){return Xf(8390656,8,g,y)}function Zh(g,y){return qf(2048,8,g,y)}function fy(g,y){return qf(4,2,g,y)}function hw(g,y){return qf(4,4,g,y)}function py(g,y){if(typeof y=="function")return g=g(),y(g),function(){y(null)};if(y!=null)return g=g(),y.current=g,function(){y.current=null}}function my(g,y,C){return C=C!=null?C.concat([g]):null,qf(4,4,py.bind(null,y,g),C)}function gy(){}function d(g,y){var C=Na();y=y===void 0?null:y;var D=C.memoizedState;return D!==null&&y!==null&&cy(y,D[1])?D[0]:(C.memoizedState=[g,y],g)}function w(g,y){var C=Na();y=y===void 0?null:y;var D=C.memoizedState;return D!==null&&y!==null&&cy(y,D[1])?D[0]:(g=g(),C.memoizedState=[g,y],g)}function T(g,y){var C=Vn;Vn=C!==0&&4>C?C:4,g(!0);var D=ko.transition;ko.transition={};try{g(!1),y()}finally{Vn=C,ko.transition=D}}function F(){return Na().memoizedState}function z(g,y,C){var D=ed(g);C={lane:D,action:C,hasEagerState:!1,eagerState:null,next:null},de(g)?Ae(y,C):(je(g,y,C),C=Lo(),g=al(g,D,C),g!==null&&it(g,y,D))}function Y(g,y,C){var D=ed(g),j={lane:D,action:C,hasEagerState:!1,eagerState:null,next:null};if(de(g))Ae(y,j);else{je(g,y,j);var $=g.alternate;if(g.lanes===0&&($===null||$.lanes===0)&&($=y.lastRenderedReducer,$!==null))try{var ae=y.lastRenderedState,ye=$(ae,C);if(j.hasEagerState=!0,j.eagerState=ye,Ys(ye,ae))return}catch{}finally{}C=Lo(),g=al(g,D,C),g!==null&&it(g,y,D)}}function de(g){var y=g.alternate;return g===qr||y!==null&&y===qr}function Ae(g,y){Gf=Fu=!0;var C=g.pending;C===null?y.next=y:(y.next=C.next,C.next=y),g.pending=y}function je(g,y,C){ji!==null&&g.mode&1&&!(Bn&2)?(g=y.interleaved,g===null?(C.next=C,ms===null?ms=[y]:ms.push(y)):(C.next=g.next,g.next=C),y.interleaved=C):(g=y.pending,g===null?C.next=C:(C.next=g.next,g.next=C),y.pending=C)}function it(g,y,C){if(C&4194240){var D=y.lanes;D&=g.pendingLanes,C|=D,y.lanes=C,Is(g,C)}}var Et={readContext:Fr,useCallback:es,useContext:es,useEffect:es,useImperativeHandle:es,useInsertionEffect:es,useLayoutEffect:es,useMemo:es,useReducer:es,useRef:es,useState:es,useDebugValue:es,useDeferredValue:es,useTransition:es,useMutableSource:es,useSyncExternalStore:es,useId:es,unstable_isNewReconciler:!1},ln={readContext:Fr,useCallback:function(g,y){return to().memoizedState=[g,y===void 0?null:y],g},useContext:Fr,useEffect:Zm,useImperativeHandle:function(g,y,C){return C=C!=null?C.concat([g]):null,Xf(4194308,4,py.bind(null,y,g),C)},useLayoutEffect:function(g,y){return Xf(4194308,4,g,y)},useInsertionEffect:function(g,y){return Xf(4,2,g,y)},useMemo:function(g,y){var C=to();return y=y===void 0?null:y,g=g(),C.memoizedState=[g,y],g},useReducer:function(g,y,C){var D=to();return y=C!==void 0?C(y):y,D.memoizedState=D.baseState=y,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:y},D.queue=g,g=g.dispatch=z.bind(null,qr,g),[D.memoizedState,g]},useRef:function(g){var y=to();return g={current:g},y.memoizedState=g},useState:Km,useDebugValue:gy,useDeferredValue:function(g){var y=Km(g),C=y[0],D=y[1];return Zm(function(){var j=ko.transition;ko.transition={};try{D(g)}finally{ko.transition=j}},[g]),C},useTransition:function(){var g=Km(!1),y=g[0];return g=T.bind(null,g[1]),to().memoizedState=g,[y,g]},useMutableSource:function(){},useSyncExternalStore:function(g,y,C){var D=qr,j=to();if(_n){if(C===void 0)throw Error(o(407));C=C()}else{if(C=y(),ji===null)throw Error(o(349));Xh&30||qh(D,y,C)}j.memoizedState=C;var $={value:C,getSnapshot:y};return j.queue=$,Zm($f.bind(null,D,$,g),[g]),D.flags|=2048,Kh(9,cw.bind(null,D,$,C,y),void 0,null),C},useId:function(){var g=to(),y=ji.identifierPrefix;if(_n){var C=ht,D=Le;C=(D&~(1<<32-dr(D)-1)).toString(32)+C,y=":"+y+"R"+C,C=Oc++,0<C&&(y+="H"+C.toString(32)),y+=":"}else C=mC++,y=":"+y+"r"+C.toString(32)+":";return g.memoizedState=y},unstable_isNewReconciler:!1},Dn={readContext:Fr,useCallback:d,useContext:Fr,useEffect:Zh,useImperativeHandle:my,useInsertionEffect:fy,useLayoutEffect:hw,useMemo:w,useReducer:Ym,useRef:uw,useState:function(){return Ym(Lc)},useDebugValue:gy,useDeferredValue:function(g){var y=Ym(Lc),C=y[0],D=y[1];return Zh(function(){var j=ko.transition;ko.transition={};try{D(g)}finally{ko.transition=j}},[g]),C},useTransition:function(){var g=Ym(Lc)[0],y=Na().memoizedState;return[g,y]},useMutableSource:hy,useSyncExternalStore:dy,useId:F,unstable_isNewReconciler:!1},Rs={readContext:Fr,useCallback:d,useContext:Fr,useEffect:Zh,useImperativeHandle:my,useInsertionEffect:fy,useLayoutEffect:hw,useMemo:w,useReducer:sa,useRef:uw,useState:function(){return sa(Lc)},useDebugValue:gy,useDeferredValue:function(g){var y=sa(Lc),C=y[0],D=y[1];return Zh(function(){var j=ko.transition;ko.transition={};try{D(g)}finally{ko.transition=j}},[g]),C},useTransition:function(){var g=sa(Lc)[0],y=Na().memoizedState;return[g,y]},useMutableSource:hy,useSyncExternalStore:dy,useId:F,unstable_isNewReconciler:!1};function bi(g,y){try{var C="",D=y;do C+=Qs(D),D=D.return;while(D);var j=C}catch($){j=`
Error generating stack: `+$.message+`
`+$.stack}return{value:g,source:y,stack:j}}function no(g,y){try{console.error(y.value)}catch(C){setTimeout(function(){throw C})}}var ro=typeof WeakMap=="function"?WeakMap:Map;function Uu(g,y,C){C=eo(-1,C),C.tag=3,C.payload={element:null};var D=y.value;return C.callback=function(){Iw||(Iw=!0,kC=D),no(g,y)},C}function dw(g,y,C){C=eo(-1,C),C.tag=3;var D=g.type.getDerivedStateFromError;if(typeof D=="function"){var j=y.value;C.payload=function(){return D(j)},C.callback=function(){no(g,y)}}var $=g.stateNode;return $!==null&&typeof $.componentDidCatch=="function"&&(C.callback=function(){no(g,y),typeof D!="function"&&(Qh===null?Qh=new Set([this]):Qh.add(this));var ae=y.stack;this.componentDidCatch(y.value,{componentStack:ae!==null?ae:""})}),C}function fw(g,y,C){var D=g.pingCache;if(D===null){D=g.pingCache=new ro;var j=new Set;D.set(y,j)}else j=D.get(y),j===void 0&&(j=new Set,D.set(y,j));j.has(C)||(j.add(C),g=fte.bind(null,g,y,C),y.then(g,g))}function pw(g){do{var y;if((y=g.tag===13)&&(y=g.memoizedState,y=y!==null?y.dehydrated!==null:!0),y)return g;g=g.return}while(g!==null);return null}function vy(g,y,C,D,j){return g.mode&1?(g.flags|=65536,g.lanes=j,g):(g===y?g.flags|=65536:(g.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(y=eo(-1,1),y.tag=2,Ro(C,y))),C.lanes|=1),g)}function ol(g){g.flags|=4}function yy(g,y){if(g!==null&&g.child===y.child)return!0;if(y.flags&16)return!1;for(g=y.child;g!==null;){if(g.flags&12854||g.subtreeFlags&12854)return!1;g=g.sibling}return!0}var Br,Fc,Qm,Jm;if(Ye)Br=function(g,y){for(var C=y.child;C!==null;){if(C.tag===5||C.tag===6)De(g,C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===y)break;for(;C.sibling===null;){if(C.return===null||C.return===y)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},Fc=function(){},Qm=function(g,y,C,D,j){if(g=g.memoizedProps,g!==D){var $=y.stateNode,ae=Do(Ps.current);C=Qe($,C,g,D,j,ae),(y.updateQueue=C)&&ol(y)}},Jm=function(g,y,C,D){C!==D&&ol(y)};else if(Pe){Br=function(g,y,C,D){for(var j=y.child;j!==null;){if(j.tag===5){var $=j.stateNode;C&&D&&($=xn($,j.type,j.memoizedProps,j)),De(g,$)}else if(j.tag===6)$=j.stateNode,C&&D&&($=$r($,j.memoizedProps,j)),De(g,$);else if(j.tag!==4){if(j.tag===22&&j.memoizedState!==null)$=j.child,$!==null&&($.return=j),Br(g,j,!0,!0);else if(j.child!==null){j.child.return=j,j=j.child;continue}}if(j===y)break;for(;j.sibling===null;){if(j.return===null||j.return===y)return;j=j.return}j.sibling.return=j.return,j=j.sibling}};var mw=function(g,y,C,D){for(var j=y.child;j!==null;){if(j.tag===5){var $=j.stateNode;C&&D&&($=xn($,j.type,j.memoizedProps,j)),xt(g,$)}else if(j.tag===6)$=j.stateNode,C&&D&&($=$r($,j.memoizedProps,j)),xt(g,$);else if(j.tag!==4){if(j.tag===22&&j.memoizedState!==null)$=j.child,$!==null&&($.return=j),mw(g,j,!0,!0);else if(j.child!==null){j.child.return=j,j=j.child;continue}}if(j===y)break;for(;j.sibling===null;){if(j.return===null||j.return===y)return;j=j.return}j.sibling.return=j.return,j=j.sibling}};Fc=function(g,y){var C=y.stateNode;if(!yy(g,y)){g=C.containerInfo;var D=Xe(g);mw(D,y,!1,!1),C.pendingChildren=D,ol(y),Bt(g,D)}},Qm=function(g,y,C,D,j){var $=g.stateNode,ae=g.memoizedProps;if((g=yy(g,y))&&ae===D)y.stateNode=$;else{var ye=y.stateNode,Ge=Do(Ps.current),ft=null;ae!==D&&(ft=Qe(ye,C,ae,D,j,Ge)),g&&ft===null?y.stateNode=$:($=at($,ft,C,ae,D,y,g,ye),We($,C,D,j,Ge)&&ol(y),y.stateNode=$,g?ol(y):Br($,y,!1,!1))}},Jm=function(g,y,C,D){C!==D?(g=Do(kc.current),C=Do(Ps.current),y.stateNode=Ie(D,g,C,y),ol(y)):y.stateNode=g.stateNode}}else Fc=function(){},Qm=function(){},Jm=function(){};function ju(g,y){if(!_n)switch(g.tailMode){case"hidden":y=g.tail;for(var C=null;y!==null;)y.alternate!==null&&(C=y),y=y.sibling;C===null?g.tail=null:C.sibling=null;break;case"collapsed":C=g.tail;for(var D=null;C!==null;)C.alternate!==null&&(D=C),C=C.sibling;D===null?y||g.tail===null?g.tail=null:g.tail.sibling=null:D.sibling=null}}function ts(g){var y=g.alternate!==null&&g.alternate.child===g.child,C=0,D=0;if(y)for(var j=g.child;j!==null;)C|=j.lanes|j.childLanes,D|=j.subtreeFlags&14680064,D|=j.flags&14680064,j.return=g,j=j.sibling;else for(j=g.child;j!==null;)C|=j.lanes|j.childLanes,D|=j.subtreeFlags,D|=j.flags,j.return=g,j=j.sibling;return g.subtreeFlags|=D,g.childLanes=C,y}function gC(g,y,C){var D=y.pendingProps;switch(lr(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ts(y),null;case 1:return tn(y.type)&&qt(),ts(y),null;case 3:return D=y.stateNode,Vl(),Ot(un),Ot(Pt),$h(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),(g===null||g.child===null)&&(ia(y)?ol(y):g===null||g.memoizedState.isDehydrated&&!(y.flags&256)||(y.flags|=1024,Ei!==null&&(FC(Ei),Ei=null))),Fc(g,y),ts(y),null;case 5:Gh(y),C=Do(kc.current);var j=y.type;if(g!==null&&y.stateNode!=null)Qm(g,y,j,D,C),g.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!D){if(y.stateNode===null)throw Error(o(166));return ts(y),null}if(g=Do(Ps.current),ia(y)){if(!ne)throw Error(o(175));g=kl(y.stateNode,y.type,y.memoizedProps,C,g,y,!il),y.updateQueue=g,g!==null&&ol(y)}else{var $=fe(j,D,C,g,y);Br($,y,!1,!1),y.stateNode=$,We($,j,D,C,g)&&ol(y)}y.ref!==null&&(y.flags|=512,y.flags|=2097152)}return ts(y),null;case 6:if(g&&y.stateNode!=null)Jm(g,y,g.memoizedProps,D);else{if(typeof D!="string"&&y.stateNode===null)throw Error(o(166));if(g=Do(kc.current),C=Do(Ps.current),ia(y)){if(!ne)throw Error(o(176));if(g=y.stateNode,D=y.memoizedProps,(C=bc(g,D,y,!il))&&(j=Gn,j!==null))switch($=(j.mode&1)!==0,j.tag){case 3:ke(j.stateNode.containerInfo,g,D,$);break;case 5:Oe(j.type,j.memoizedProps,j.stateNode,g,D,$)}C&&ol(y)}else y.stateNode=Ie(D,g,C,y)}return ts(y),null;case 13:if(Ot(Dr),D=y.memoizedState,_n&&Si!==null&&y.mode&1&&!(y.flags&128)){for(g=Si;g;)g=Ui(g);return jl(),y.flags|=98560,y}if(D!==null&&D.dehydrated!==null){if(D=ia(y),g===null){if(!D)throw Error(o(318));if(!ne)throw Error(o(344));if(g=y.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));Co(g,y)}else jl(),!(y.flags&128)&&(y.memoizedState=null),y.flags|=4;return ts(y),null}return Ei!==null&&(FC(Ei),Ei=null),y.flags&128?(y.lanes=C,y):(D=D!==null,C=!1,g===null?ia(y):C=g.memoizedState!==null,D&&!C&&(y.child.flags|=8192,y.mode&1&&(g===null||Dr.current&1?ns===0&&(ns=3):UC())),y.updateQueue!==null&&(y.flags|=4),ts(y),null);case 4:return Vl(),Fc(g,y),g===null&&Re(y.stateNode.containerInfo),ts(y),null;case 10:return Uh(y.type._context),ts(y),null;case 17:return tn(y.type)&&qt(),ts(y),null;case 19:if(Ot(Dr),j=y.memoizedState,j===null)return ts(y),null;if(D=(y.flags&128)!==0,$=j.rendering,$===null)if(D)ju(j,!1);else{if(ns!==0||g!==null&&g.flags&128)for(g=y.child;g!==null;){if($=Wf(g),$!==null){for(y.flags|=128,ju(j,!1),g=$.updateQueue,g!==null&&(y.updateQueue=g,y.flags|=4),y.subtreeFlags=0,g=C,D=y.child;D!==null;)C=D,j=g,C.flags&=14680066,$=C.alternate,$===null?(C.childLanes=0,C.lanes=j,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=$.childLanes,C.lanes=$.lanes,C.child=$.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=$.memoizedProps,C.memoizedState=$.memoizedState,C.updateQueue=$.updateQueue,C.type=$.type,j=$.dependencies,C.dependencies=j===null?null:{lanes:j.lanes,firstContext:j.firstContext}),D=D.sibling;return Vt(Dr,Dr.current&1|2),y.child}g=g.sibling}j.tail!==null&&ci()>DC&&(y.flags|=128,D=!0,ju(j,!1),y.lanes=4194304)}else{if(!D)if(g=Wf($),g!==null){if(y.flags|=128,D=!0,g=g.updateQueue,g!==null&&(y.updateQueue=g,y.flags|=4),ju(j,!0),j.tail===null&&j.tailMode==="hidden"&&!$.alternate&&!_n)return ts(y),null}else 2*ci()-j.renderingStartTime>DC&&C!==1073741824&&(y.flags|=128,D=!0,ju(j,!1),y.lanes=4194304);j.isBackwards?($.sibling=y.child,y.child=$):(g=j.last,g!==null?g.sibling=$:y.child=$,j.last=$)}return j.tail!==null?(y=j.tail,j.rendering=y,j.tail=y.sibling,j.renderingStartTime=ci(),y.sibling=null,g=Dr.current,Vt(Dr,D?g&1|2:g&1),y):(ts(y),null);case 22:case 23:return BC(),D=y.memoizedState!==null,g!==null&&g.memoizedState!==null!==D&&(y.flags|=8192),D&&y.mode&1?ka&1073741824&&(ts(y),Ye&&y.subtreeFlags&6&&(y.flags|=8192)):ts(y),null;case 24:return null;case 25:return null}throw Error(o(156,y.tag))}var tte=a.ReactCurrentOwner,Da=!1;function Oo(g,y,C,D){y.child=g===null?lw(y,null,C,D):Ra(y,g.child,C,D)}function q4(g,y,C,D,j){C=C.render;var $=y.ref;return Pc(y,j),D=Bu(g,y,C,D,$,j),C=uy(),g!==null&&!Da?(y.updateQueue=g.updateQueue,y.flags&=-2053,g.lanes&=~j,Vu(g,y,j)):(_n&&C&&zn(y),y.flags|=1,Oo(g,y,D,j),y.child)}function Y4(g,y,C,D,j){if(g===null){var $=C.type;return typeof $=="function"&&!jC($)&&$.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(y.tag=15,y.type=$,K4(g,y,$,D,j)):(g=Lw(C.type,null,D,y,y.mode,j),g.ref=y.ref,g.return=y,y.child=g)}if($=g.child,!(g.lanes&j)){var ae=$.memoizedProps;if(C=C.compare,C=C!==null?C:Fl,C(ae,D)&&g.ref===y.ref)return Vu(g,y,j)}return y.flags|=1,g=nd($,D),g.ref=y.ref,g.return=y,y.child=g}function K4(g,y,C,D,j){if(g!==null&&Fl(g.memoizedProps,D)&&g.ref===y.ref)if(Da=!1,(g.lanes&j)!==0)g.flags&131072&&(Da=!0);else return y.lanes=g.lanes,Vu(g,y,j);return vC(g,y,C,D,j)}function Z4(g,y,C){var D=y.pendingProps,j=D.children,$=g!==null?g.memoizedState:null;if(D.mode==="hidden")if(!(y.mode&1))y.memoizedState={baseLanes:0,cachePool:null},Vt(eg,ka),ka|=C;else if(C&1073741824)y.memoizedState={baseLanes:0,cachePool:null},D=$!==null?$.baseLanes:C,Vt(eg,ka),ka|=D;else return g=$!==null?$.baseLanes|C:C,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:g,cachePool:null},y.updateQueue=null,Vt(eg,ka),ka|=g,null;else $!==null?(D=$.baseLanes|C,y.memoizedState=null):D=C,Vt(eg,ka),ka|=D;return Oo(g,y,j,C),y.child}function Q4(g,y){var C=y.ref;(g===null&&C!==null||g!==null&&g.ref!==C)&&(y.flags|=512,y.flags|=2097152)}function vC(g,y,C,D,j){var $=tn(C)?Rt:Pt.current;return $=Ln(y,$),Pc(y,j),C=Bu(g,y,C,D,$,j),D=uy(),g!==null&&!Da?(y.updateQueue=g.updateQueue,y.flags&=-2053,g.lanes&=~j,Vu(g,y,j)):(_n&&D&&zn(y),y.flags|=1,Oo(g,y,C,j),y.child)}function J4(g,y,C,D,j){if(tn(C)){var $=!0;li(y)}else $=!1;if(Pc(y,j),y.stateNode===null)g!==null&&(g.alternate=null,y.alternate=null,y.flags|=2),Dc(y,C,D),ra(y,C,D,j),D=!0;else if(g===null){var ae=y.stateNode,ye=y.memoizedProps;ae.props=ye;var Ge=ae.context,ft=C.contextType;typeof ft=="object"&&ft!==null?ft=Fr(ft):(ft=tn(C)?Rt:Pt.current,ft=Ln(y,ft));var Ut=C.getDerivedStateFromProps,bn=typeof Ut=="function"||typeof ae.getSnapshotBeforeUpdate=="function";bn||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(ye!==D||Ge!==ft)&&Ri(y,ae,D,ft),na=!1;var on=y.memoizedState;ae.state=on,Rc(y,D,ae,j),Ge=y.memoizedState,ye!==D||on!==Ge||un.current||na?(typeof Ut=="function"&&(Nc(y,C,Ut,D),Ge=y.memoizedState),(ye=na||Vh(y,C,ye,D,on,Ge,ft))?(bn||typeof ae.UNSAFE_componentWillMount!="function"&&typeof ae.componentWillMount!="function"||(typeof ae.componentWillMount=="function"&&ae.componentWillMount(),typeof ae.UNSAFE_componentWillMount=="function"&&ae.UNSAFE_componentWillMount()),typeof ae.componentDidMount=="function"&&(y.flags|=4194308)):(typeof ae.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=D,y.memoizedState=Ge),ae.props=D,ae.state=Ge,ae.context=ft,D=ye):(typeof ae.componentDidMount=="function"&&(y.flags|=4194308),D=!1)}else{ae=y.stateNode,Du(g,y),ye=y.memoizedProps,ft=y.type===y.elementType?ye:Nr(y.type,ye),ae.props=ft,bn=y.pendingProps,on=ae.context,Ge=C.contextType,typeof Ge=="object"&&Ge!==null?Ge=Fr(Ge):(Ge=tn(C)?Rt:Pt.current,Ge=Ln(y,Ge));var kr=C.getDerivedStateFromProps;(Ut=typeof kr=="function"||typeof ae.getSnapshotBeforeUpdate=="function")||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(ye!==bn||on!==Ge)&&Ri(y,ae,D,Ge),na=!1,on=y.memoizedState,ae.state=on,Rc(y,D,ae,j);var Qt=y.memoizedState;ye!==bn||on!==Qt||un.current||na?(typeof kr=="function"&&(Nc(y,C,kr,D),Qt=y.memoizedState),(ft=na||Vh(y,C,ft,D,on,Qt,Ge)||!1)?(Ut||typeof ae.UNSAFE_componentWillUpdate!="function"&&typeof ae.componentWillUpdate!="function"||(typeof ae.componentWillUpdate=="function"&&ae.componentWillUpdate(D,Qt,Ge),typeof ae.UNSAFE_componentWillUpdate=="function"&&ae.UNSAFE_componentWillUpdate(D,Qt,Ge)),typeof ae.componentDidUpdate=="function"&&(y.flags|=4),typeof ae.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof ae.componentDidUpdate!="function"||ye===g.memoizedProps&&on===g.memoizedState||(y.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||ye===g.memoizedProps&&on===g.memoizedState||(y.flags|=1024),y.memoizedProps=D,y.memoizedState=Qt),ae.props=D,ae.state=Qt,ae.context=Ge,D=ft):(typeof ae.componentDidUpdate!="function"||ye===g.memoizedProps&&on===g.memoizedState||(y.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||ye===g.memoizedProps&&on===g.memoizedState||(y.flags|=1024),D=!1)}return yC(g,y,C,D,$,j)}function yC(g,y,C,D,j,$){Q4(g,y);var ae=(y.flags&128)!==0;if(!D&&!ae)return j&&dn(y,C,!1),Vu(g,y,$);D=y.stateNode,tte.current=y;var ye=ae&&typeof C.getDerivedStateFromError!="function"?null:D.render();return y.flags|=1,g!==null&&ae?(y.child=Ra(y,g.child,null,$),y.child=Ra(y,null,ye,$)):Oo(g,y,ye,$),y.memoizedState=D.state,j&&dn(y,C,!0),y.child}function eL(g){var y=g.stateNode;y.pendingContext?Jn(g,y.pendingContext,y.pendingContext!==y.context):y.context&&Jn(g,y.context,!1),Hf(g,y.containerInfo)}function tL(g,y,C,D,j){return jl(),ay(j),y.flags|=256,Oo(g,y,C,D),y.child}var gw={dehydrated:null,treeContext:null,retryLane:0};function vw(g){return{baseLanes:g,cachePool:null}}function nL(g,y,C){var D=y.pendingProps,j=Dr.current,$=!1,ae=(y.flags&128)!==0,ye;if((ye=ae)||(ye=g!==null&&g.memoizedState===null?!1:(j&2)!==0),ye?($=!0,y.flags&=-129):(g===null||g.memoizedState!==null)&&(j|=1),Vt(Dr,j&1),g===null)return Hh(y),g=y.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?(y.mode&1?Zi(g)?y.lanes=8:y.lanes=1073741824:y.lanes=1,null):(j=D.children,g=D.fallback,$?(D=y.mode,$=y.child,j={mode:"hidden",children:j},!(D&1)&&$!==null?($.childLanes=0,$.pendingProps=j):$=Fw(j,D,0,null),g=ep(g,D,C,null),$.return=y,g.return=y,$.sibling=g,y.child=$,y.child.memoizedState=vw(C),y.memoizedState=gw,g):xC(y,j));if(j=g.memoizedState,j!==null){if(ye=j.dehydrated,ye!==null){if(ae)return y.flags&256?(y.flags&=-257,yw(g,y,C,Error(o(422)))):y.memoizedState!==null?(y.child=g.child,y.flags|=128,null):($=D.fallback,j=y.mode,D=Fw({mode:"visible",children:D.children},j,0,null),$=ep($,j,C,null),$.flags|=2,D.return=y,$.return=y,D.sibling=$,y.child=D,y.mode&1&&Ra(y,g.child,null,C),y.child.memoizedState=vw(C),y.memoizedState=gw,$);if(!(y.mode&1))y=yw(g,y,C,null);else if(Zi(ye))y=yw(g,y,C,Error(o(419)));else if(D=(C&g.childLanes)!==0,Da||D){if(D=ji,D!==null){switch(C&-C){case 4:$=2;break;case 16:$=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:$=32;break;case 536870912:$=268435456;break;default:$=0}D=$&(D.suspendedLanes|C)?0:$,D!==0&&D!==j.retryLane&&(j.retryLane=D,al(g,D,-1))}UC(),y=yw(g,y,C,Error(o(421)))}else Jo(ye)?(y.flags|=128,y.child=g.child,y=pte.bind(null,g),Gt(ye,y),y=null):(C=j.treeContext,ne&&(Si=tl(ye),Gn=y,_n=!0,Ei=null,il=!1,C!==null&&(G[Q++]=Le,G[Q++]=ht,G[Q++]=Ee,Le=C.id,ht=C.overflow,Ee=y)),y=xC(y,y.pendingProps.children),y.flags|=4096);return y}return $?(D=iL(g,y,D.children,D.fallback,C),$=y.child,j=g.child.memoizedState,$.memoizedState=j===null?vw(C):{baseLanes:j.baseLanes|C,cachePool:null},$.childLanes=g.childLanes&~C,y.memoizedState=gw,D):(C=rL(g,y,D.children,C),y.memoizedState=null,C)}return $?(D=iL(g,y,D.children,D.fallback,C),$=y.child,j=g.child.memoizedState,$.memoizedState=j===null?vw(C):{baseLanes:j.baseLanes|C,cachePool:null},$.childLanes=g.childLanes&~C,y.memoizedState=gw,D):(C=rL(g,y,D.children,C),y.memoizedState=null,C)}function xC(g,y){return y=Fw({mode:"visible",children:y},g.mode,0,null),y.return=g,g.child=y}function rL(g,y,C,D){var j=g.child;return g=j.sibling,C=nd(j,{mode:"visible",children:C}),!(y.mode&1)&&(C.lanes=D),C.return=y,C.sibling=null,g!==null&&(D=y.deletions,D===null?(y.deletions=[g],y.flags|=16):D.push(g)),y.child=C}function iL(g,y,C,D,j){var $=y.mode;g=g.child;var ae=g.sibling,ye={mode:"hidden",children:C};return!($&1)&&y.child!==g?(C=y.child,C.childLanes=0,C.pendingProps=ye,y.deletions=null):(C=nd(g,ye),C.subtreeFlags=g.subtreeFlags&14680064),ae!==null?D=nd(ae,D):(D=ep(D,$,j,null),D.flags|=2),D.return=y,C.return=y,C.sibling=D,y.child=C,D}function yw(g,y,C,D){return D!==null&&ay(D),Ra(y,g.child,null,C),g=xC(y,y.pendingProps.children),g.flags|=2,y.memoizedState=null,g}function sL(g,y,C){g.lanes|=y;var D=g.alternate;D!==null&&(D.lanes|=y),nl(g.return,y,C)}function _C(g,y,C,D,j){var $=g.memoizedState;$===null?g.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:D,tail:C,tailMode:j}:($.isBackwards=y,$.rendering=null,$.renderingStartTime=0,$.last=D,$.tail=C,$.tailMode=j)}function oL(g,y,C){var D=y.pendingProps,j=D.revealOrder,$=D.tail;if(Oo(g,y,D.children,C),D=Dr.current,D&2)D=D&1|2,y.flags|=128;else{if(g!==null&&g.flags&128)e:for(g=y.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&sL(g,C,y);else if(g.tag===19)sL(g,C,y);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===y)break e;for(;g.sibling===null;){if(g.return===null||g.return===y)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}D&=1}if(Vt(Dr,D),!(y.mode&1))y.memoizedState=null;else switch(j){case"forwards":for(C=y.child,j=null;C!==null;)g=C.alternate,g!==null&&Wf(g)===null&&(j=C),C=C.sibling;C=j,C===null?(j=y.child,y.child=null):(j=C.sibling,C.sibling=null),_C(y,!1,j,C,$);break;case"backwards":for(C=null,j=y.child,y.child=null;j!==null;){if(g=j.alternate,g!==null&&Wf(g)===null){y.child=j;break}g=j.sibling,j.sibling=C,C=j,j=g}_C(y,!0,C,null,$);break;case"together":_C(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function Vu(g,y,C){if(g!==null&&(y.dependencies=g.dependencies),tg|=y.lanes,!(C&y.childLanes))return null;if(g!==null&&y.child!==g.child)throw Error(o(153));if(y.child!==null){for(g=y.child,C=nd(g,g.pendingProps),y.child=C,C.return=y;g.sibling!==null;)g=g.sibling,C=C.sibling=nd(g,g.pendingProps),C.return=y;C.sibling=null}return y.child}function nte(g,y,C){switch(y.tag){case 3:eL(y),jl();break;case 5:Lu(y);break;case 1:tn(y.type)&&li(y);break;case 4:Hf(y,y.stateNode.containerInfo);break;case 10:Nu(y,y.type._context,y.memoizedProps.value);break;case 13:var D=y.memoizedState;if(D!==null)return D.dehydrated!==null?(Vt(Dr,Dr.current&1),y.flags|=128,null):C&y.child.childLanes?nL(g,y,C):(Vt(Dr,Dr.current&1),g=Vu(g,y,C),g!==null?g.sibling:null);Vt(Dr,Dr.current&1);break;case 19:if(D=(C&y.childLanes)!==0,g.flags&128){if(D)return oL(g,y,C);y.flags|=128}var j=y.memoizedState;if(j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),Vt(Dr,Dr.current),D)break;return null;case 22:case 23:return y.lanes=0,Z4(g,y,C)}return Vu(g,y,C)}function rte(g,y){switch(lr(y),y.tag){case 1:return tn(y.type)&&qt(),g=y.flags,g&65536?(y.flags=g&-65537|128,y):null;case 3:return Vl(),Ot(un),Ot(Pt),$h(),g=y.flags,g&65536&&!(g&128)?(y.flags=g&-65537|128,y):null;case 5:return Gh(y),null;case 13:if(Ot(Dr),g=y.memoizedState,g!==null&&g.dehydrated!==null){if(y.alternate===null)throw Error(o(340));jl()}return g=y.flags,g&65536?(y.flags=g&-65537|128,y):null;case 19:return Ot(Dr),null;case 4:return Vl(),null;case 10:return Uh(y.type._context),null;case 22:case 23:return BC(),null;case 24:return null;default:return null}}var xw=!1,Yf=!1,ite=typeof WeakSet=="function"?WeakSet:Set,At=null;function _w(g,y){var C=g.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(D){la(g,y,D)}else C.current=null}function wC(g,y,C){try{C()}catch(D){la(g,y,D)}}var aL=!1;function ste(g,y){for(ce(g.containerInfo),At=y;At!==null;)if(g=At,y=g.child,(g.subtreeFlags&1028)!==0&&y!==null)y.return=g,At=y;else for(;At!==null;){g=At;try{var C=g.alternate;if(g.flags&1024)switch(g.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var D=C.memoizedProps,j=C.memoizedState,$=g.stateNode,ae=$.getSnapshotBeforeUpdate(g.elementType===g.type?D:Nr(g.type,D),j);$.__reactInternalSnapshotBeforeUpdate=ae}break;case 3:Ye&&gt(g.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ye){la(g,g.return,ye)}if(y=g.sibling,y!==null){y.return=g.return,At=y;break}At=g.return}return C=aL,aL=!1,C}function Kf(g,y,C){var D=y.updateQueue;if(D=D!==null?D.lastEffect:null,D!==null){var j=D=D.next;do{if((j.tag&g)===g){var $=j.destroy;j.destroy=void 0,$!==void 0&&wC(y,C,$)}j=j.next}while(j!==D)}}function xy(g,y){if(y=y.updateQueue,y=y!==null?y.lastEffect:null,y!==null){var C=y=y.next;do{if((C.tag&g)===g){var D=C.create;C.destroy=D()}C=C.next}while(C!==y)}}function SC(g){var y=g.ref;if(y!==null){var C=g.stateNode;switch(g.tag){case 5:g=se(C);break;default:g=C}typeof y=="function"?y(g):y.current=g}}function lL(g,y,C){if(Qi&&typeof Qi.onCommitFiberUnmount=="function")try{Qi.onCommitFiberUnmount(Pa,y)}catch{}switch(y.tag){case 0:case 11:case 14:case 15:if(g=y.updateQueue,g!==null&&(g=g.lastEffect,g!==null)){var D=g=g.next;do{var j=D,$=j.destroy;j=j.tag,$!==void 0&&(j&2||j&4)&&wC(y,C,$),D=D.next}while(D!==g)}break;case 1:if(_w(y,C),g=y.stateNode,typeof g.componentWillUnmount=="function")try{g.props=y.memoizedProps,g.state=y.memoizedState,g.componentWillUnmount()}catch(ae){la(y,C,ae)}break;case 5:_w(y,C);break;case 4:Ye?pL(g,y,C):Pe&&Pe&&(y=y.stateNode.containerInfo,C=Xe(y),Cn(y,C))}}function cL(g,y,C){for(var D=y;;)if(lL(g,D,C),D.child===null||Ye&&D.tag===4){if(D===y)break;for(;D.sibling===null;){if(D.return===null||D.return===y)return;D=D.return}D.sibling.return=D.return,D=D.sibling}else D.child.return=D,D=D.child}function uL(g){var y=g.alternate;y!==null&&(g.alternate=null,uL(y)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(y=g.stateNode,y!==null&&ze(y)),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function hL(g){return g.tag===5||g.tag===3||g.tag===4}function dL(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||hL(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function fL(g){if(Ye){e:{for(var y=g.return;y!==null;){if(hL(y))break e;y=y.return}throw Error(o(160))}var C=y;switch(C.tag){case 5:y=C.stateNode,C.flags&32&&(Te(y),C.flags&=-33),C=dL(g),bC(g,C,y);break;case 3:case 4:y=C.stateNode.containerInfo,C=dL(g),EC(g,C,y);break;default:throw Error(o(161))}}}function EC(g,y,C){var D=g.tag;if(D===5||D===6)g=g.stateNode,y?mt(C,g,y):Mt(C,g);else if(D!==4&&(g=g.child,g!==null))for(EC(g,y,C),g=g.sibling;g!==null;)EC(g,y,C),g=g.sibling}function bC(g,y,C){var D=g.tag;if(D===5||D===6)g=g.stateNode,y?st(C,g,y):Ue(C,g);else if(D!==4&&(g=g.child,g!==null))for(bC(g,y,C),g=g.sibling;g!==null;)bC(g,y,C),g=g.sibling}function pL(g,y,C){for(var D=y,j=!1,$,ae;;){if(!j){j=D.return;e:for(;;){if(j===null)throw Error(o(160));switch($=j.stateNode,j.tag){case 5:ae=!1;break e;case 3:$=$.containerInfo,ae=!0;break e;case 4:$=$.containerInfo,ae=!0;break e}j=j.return}j=!0}if(D.tag===5||D.tag===6)cL(g,D,C),ae?ue($,D.stateNode):Wt($,D.stateNode);else if(D.tag===18)ae?Z($,D.stateNode):Mu($,D.stateNode);else if(D.tag===4){if(D.child!==null){$=D.stateNode.containerInfo,ae=!0,D.child.return=D,D=D.child;continue}}else if(lL(g,D,C),D.child!==null){D.child.return=D,D=D.child;continue}if(D===y)break;for(;D.sibling===null;){if(D.return===null||D.return===y)return;D=D.return,D.tag===4&&(j=!1)}D.sibling.return=D.return,D=D.sibling}}function AC(g,y){if(Ye){switch(y.tag){case 0:case 11:case 14:case 15:Kf(3,y,y.return),xy(3,y),Kf(5,y,y.return);return;case 1:return;case 5:var C=y.stateNode;if(C!=null){var D=y.memoizedProps;g=g!==null?g.memoizedProps:D;var j=y.type,$=y.updateQueue;y.updateQueue=null,$!==null&&wt(C,$,j,g,D,y)}return;case 6:if(y.stateNode===null)throw Error(o(162));C=y.memoizedProps,lt(y.stateNode,g!==null?g.memoizedProps:C,C);return;case 3:ne&&g!==null&&g.memoizedState.isDehydrated&&Cu(y.stateNode.containerInfo);return;case 12:return;case 13:ww(y);return;case 19:ww(y);return;case 17:return}throw Error(o(163))}switch(y.tag){case 0:case 11:case 14:case 15:Kf(3,y,y.return),xy(3,y),Kf(5,y,y.return);return;case 12:return;case 13:ww(y);return;case 19:ww(y);return;case 3:ne&&g!==null&&g.memoizedState.isDehydrated&&Cu(y.stateNode.containerInfo);break;case 22:case 23:return}e:if(Pe){switch(y.tag){case 1:case 5:case 6:break e;case 3:case 4:y=y.stateNode,Cn(y.containerInfo,y.pendingChildren);break e}throw Error(o(163))}}function ww(g){var y=g.updateQueue;if(y!==null){g.updateQueue=null;var C=g.stateNode;C===null&&(C=g.stateNode=new ite),y.forEach(function(D){var j=mte.bind(null,g,D);C.has(D)||(C.add(D),D.then(j,j))})}}function ote(g,y){for(At=y;At!==null;){y=At;var C=y.deletions;if(C!==null)for(var D=0;D<C.length;D++){var j=C[D];try{var $=g;Ye?pL($,j,y):cL($,j,y);var ae=j.alternate;ae!==null&&(ae.return=null),j.return=null}catch(Zt){la(j,y,Zt)}}if(C=y.child,y.subtreeFlags&12854&&C!==null)C.return=y,At=C;else for(;At!==null;){y=At;try{var ye=y.flags;if(ye&32&&Ye&&Te(y.stateNode),ye&512){var Ge=y.alternate;if(Ge!==null){var ft=Ge.ref;ft!==null&&(typeof ft=="function"?ft(null):ft.current=null)}}if(ye&8192)switch(y.tag){case 13:if(y.memoizedState!==null){var Ut=y.alternate;(Ut===null||Ut.memoizedState===null)&&(NC=ci())}break;case 22:var bn=y.memoizedState!==null,on=y.alternate,kr=on!==null&&on.memoizedState!==null;if(C=y,Ye){e:if(D=C,j=bn,$=null,Ye)for(var Qt=D;;){if(Qt.tag===5){if($===null){$=Qt;var io=Qt.stateNode;j?ut(io):Je(Qt.stateNode,Qt.memoizedProps)}}else if(Qt.tag===6){if($===null){var cl=Qt.stateNode;j?he(cl):ot(cl,Qt.memoizedProps)}}else if((Qt.tag!==22&&Qt.tag!==23||Qt.memoizedState===null||Qt===D)&&Qt.child!==null){Qt.child.return=Qt,Qt=Qt.child;continue}if(Qt===D)break;for(;Qt.sibling===null;){if(Qt.return===null||Qt.return===D)break e;$===Qt&&($=null),Qt=Qt.return}$===Qt&&($=null),Qt.sibling.return=Qt.return,Qt=Qt.sibling}}if(bn&&!kr&&C.mode&1){At=C;for(var Ne=C.child;Ne!==null;){for(C=At=Ne;At!==null;){D=At;var Se=D.child;switch(D.tag){case 0:case 11:case 14:case 15:Kf(4,D,D.return);break;case 1:_w(D,D.return);var He=D.stateNode;if(typeof He.componentWillUnmount=="function"){var It=D.return;try{He.props=D.memoizedProps,He.state=D.memoizedState,He.componentWillUnmount()}catch(Zt){la(D,It,Zt)}}break;case 5:_w(D,D.return);break;case 22:if(D.memoizedState!==null){vL(C);continue}}Se!==null?(Se.return=D,At=Se):vL(C)}Ne=Ne.sibling}}}switch(ye&4102){case 2:fL(y),y.flags&=-3;break;case 6:fL(y),y.flags&=-3,AC(y.alternate,y);break;case 4096:y.flags&=-4097;break;case 4100:y.flags&=-4097,AC(y.alternate,y);break;case 4:AC(y.alternate,y)}}catch(Zt){la(y,y.return,Zt)}if(C=y.sibling,C!==null){C.return=y.return,At=C;break}At=y.return}}}function ate(g,y,C){At=g,mL(g)}function mL(g,y,C){for(var D=(g.mode&1)!==0;At!==null;){var j=At,$=j.child;if(j.tag===22&&D){var ae=j.memoizedState!==null||xw;if(!ae){var ye=j.alternate,Ge=ye!==null&&ye.memoizedState!==null||Yf;ye=xw;var ft=Yf;if(xw=ae,(Yf=Ge)&&!ft)for(At=j;At!==null;)ae=At,Ge=ae.child,ae.tag===22&&ae.memoizedState!==null?yL(j):Ge!==null?(Ge.return=ae,At=Ge):yL(j);for(;$!==null;)At=$,mL($),$=$.sibling;At=j,xw=ye,Yf=ft}gL(g)}else j.subtreeFlags&8772&&$!==null?($.return=j,At=$):gL(g)}}function gL(g){for(;At!==null;){var y=At;if(y.flags&8772){var C=y.alternate;try{if(y.flags&8772)switch(y.tag){case 0:case 11:case 15:Yf||xy(5,y);break;case 1:var D=y.stateNode;if(y.flags&4&&!Yf)if(C===null)D.componentDidMount();else{var j=y.elementType===y.type?C.memoizedProps:Nr(y.type,C.memoizedProps);D.componentDidUpdate(j,C.memoizedState,D.__reactInternalSnapshotBeforeUpdate)}var $=y.updateQueue;$!==null&&rl(y,$,D);break;case 3:var ae=y.updateQueue;if(ae!==null){if(C=null,y.child!==null)switch(y.child.tag){case 5:C=se(y.child.stateNode);break;case 1:C=y.child.stateNode}rl(y,ae,C)}break;case 5:var ye=y.stateNode;C===null&&y.flags&4&&bt(ye,y.type,y.memoizedProps,y);break;case 6:break;case 4:break;case 12:break;case 13:if(ne&&y.memoizedState===null){var Ge=y.alternate;if(Ge!==null){var ft=Ge.memoizedState;if(ft!==null){var Ut=ft.dehydrated;Ut!==null&&Dh(Ut)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Yf||y.flags&512&&SC(y)}catch(bn){la(y,y.return,bn)}}if(y===g){At=null;break}if(C=y.sibling,C!==null){C.return=y.return,At=C;break}At=y.return}}function vL(g){for(;At!==null;){var y=At;if(y===g){At=null;break}var C=y.sibling;if(C!==null){C.return=y.return,At=C;break}At=y.return}}function yL(g){for(;At!==null;){var y=At;try{switch(y.tag){case 0:case 11:case 15:var C=y.return;try{xy(4,y)}catch(Ge){la(y,C,Ge)}break;case 1:var D=y.stateNode;if(typeof D.componentDidMount=="function"){var j=y.return;try{D.componentDidMount()}catch(Ge){la(y,j,Ge)}}var $=y.return;try{SC(y)}catch(Ge){la(y,$,Ge)}break;case 5:var ae=y.return;try{SC(y)}catch(Ge){la(y,ae,Ge)}}}catch(Ge){la(y,y.return,Ge)}if(y===g){At=null;break}var ye=y.sibling;if(ye!==null){ye.return=y.return,At=ye;break}At=y.return}}var Sw=0,Ew=1,bw=2,Aw=3,Tw=4;if(typeof Symbol=="function"&&Symbol.for){var _y=Symbol.for;Sw=_y("selector.component"),Ew=_y("selector.has_pseudo_class"),bw=_y("selector.role"),Aw=_y("selector.test_id"),Tw=_y("selector.text")}function TC(g){var y=Be(g);if(y!=null){if(typeof y.memoizedProps["data-testname"]!="string")throw Error(o(364));return y}if(g=rt(g),g===null)throw Error(o(362));return g.stateNode.current}function CC(g,y){switch(y.$$typeof){case Sw:if(g.type===y.value)return!0;break;case Ew:e:{y=y.value,g=[g,0];for(var C=0;C<g.length;){var D=g[C++],j=g[C++],$=y[j];if(D.tag!==5||!q(D)){for(;$!=null&&CC(D,$);)j++,$=y[j];if(j===y.length){y=!0;break e}else for(D=D.child;D!==null;)g.push(D,j),D=D.sibling}}y=!1}return y;case bw:if(g.tag===5&&me(g.stateNode,y.value))return!0;break;case Tw:if((g.tag===5||g.tag===6)&&(g=ee(g),g!==null&&0<=g.indexOf(y.value)))return!0;break;case Aw:if(g.tag===5&&(g=g.memoizedProps["data-testname"],typeof g=="string"&&g.toLowerCase()===y.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function MC(g){switch(g.$$typeof){case Sw:return"<"+(P(g.value)||"Unknown")+">";case Ew:return":has("+(MC(g)||"")+")";case bw:return'[role="'+g.value+'"]';case Tw:return'"'+g.value+'"';case Aw:return'[data-testname="'+g.value+'"]';default:throw Error(o(365))}}function xL(g,y){var C=[];g=[g,0];for(var D=0;D<g.length;){var j=g[D++],$=g[D++],ae=y[$];if(j.tag!==5||!q(j)){for(;ae!=null&&CC(j,ae);)$++,ae=y[$];if($===y.length)C.push(j);else for(j=j.child;j!==null;)g.push(j,$),j=j.sibling}}return C}function IC(g,y){if(!Fe)throw Error(o(363));g=TC(g),g=xL(g,y),y=[],g=Array.from(g);for(var C=0;C<g.length;){var D=g[C++];if(D.tag===5)q(D)||y.push(D.stateNode);else for(D=D.child;D!==null;)g.push(D),D=D.sibling}return y}var lte=Math.ceil,Cw=a.ReactCurrentDispatcher,PC=a.ReactCurrentOwner,Ni=a.ReactCurrentBatchConfig,Bn=0,ji=null,Vi=null,Ns=0,ka=0,eg=kt(0),ns=0,wy=null,tg=0,Mw=0,RC=0,Sy=null,oa=null,NC=0,DC=1/0;function ng(){DC=ci()+500}var Iw=!1,kC=null,Qh=null,Pw=!1,Jh=null,Rw=0,Ey=0,OC=null,Nw=-1,Dw=0;function Lo(){return Bn&6?ci():Nw!==-1?Nw:Nw=ci()}function ed(g){return g.mode&1?Bn&2&&Ns!==0?Ns&-Ns:Fn.transition!==null?(Dw===0&&(g=Pi,Pi<<=1,!(Pi&4194240)&&(Pi=64),Dw=g),Dw):(g=Vn,g!==0?g:qe()):1}function al(g,y,C){if(50<Ey)throw Ey=0,OC=null,Error(o(185));var D=kw(g,y);return D===null?null:(Ol(D,y,C),(!(Bn&2)||D!==ji)&&(D===ji&&(!(Bn&2)&&(Mw|=y),ns===4&&td(D,Ns)),aa(D,C),y===1&&Bn===0&&!(g.mode&1)&&(ng(),wr&&Zs())),D)}function kw(g,y){g.lanes|=y;var C=g.alternate;for(C!==null&&(C.lanes|=y),C=g,g=g.return;g!==null;)g.childLanes|=y,C=g.alternate,C!==null&&(C.childLanes|=y),C=g,g=g.return;return C.tag===3?C.stateNode:null}function aa(g,y){var C=g.callbackNode;jf(g,y);var D=Ac(g,g===ji?Ns:0);if(D===0)C!==null&&sn(C),g.callbackNode=null,g.callbackPriority=0;else if(y=D&-D,g.callbackPriority!==y){if(C!=null&&sn(C),y===1)g.tag===0?Gm(wL.bind(null,g)):Lh(wL.bind(null,g)),J?be(function(){Bn===0&&Zs()}):kh(qs,Zs),C=null;else{switch(Pu(D)){case 1:C=qs;break;case 4:C=Vf;break;case 16:C=Ru;break;case 536870912:C=ta;break;default:C=Ru}C=PL(C,_L.bind(null,g))}g.callbackPriority=y,g.callbackNode=C}}function _L(g,y){if(Nw=-1,Dw=0,Bn&6)throw Error(o(327));var C=g.callbackNode;if(Jf()&&g.callbackNode!==C)return null;var D=Ac(g,g===ji?Ns:0);if(D===0)return null;if(D&30||D&g.expiredLanes||y)y=Ow(g,D);else{y=D;var j=Bn;Bn|=2;var $=bL();(ji!==g||Ns!==y)&&(ng(),Zf(g,y));do try{hte();break}catch(ye){EL(g,ye)}while(!0);Ic(),Cw.current=$,Bn=j,Vi!==null?y=0:(ji=null,Ns=0,y=ns)}if(y!==0){if(y===2&&(j=Iu(g),j!==0&&(D=j,y=LC(g,j))),y===1)throw C=wy,Zf(g,0),td(g,D),aa(g,ci()),C;if(y===6)td(g,D);else{if(j=g.current.alternate,!(D&30)&&!cte(j)&&(y=Ow(g,D),y===2&&($=Iu(g),$!==0&&(D=$,y=LC(g,$))),y===1))throw C=wy,Zf(g,0),td(g,D),aa(g,ci()),C;switch(g.finishedWork=j,g.finishedLanes=D,y){case 0:case 1:throw Error(o(345));case 2:Qf(g,oa);break;case 3:if(td(g,D),(D&130023424)===D&&(y=NC+500-ci(),10<y)){if(Ac(g,0)!==0)break;if(j=g.suspendedLanes,(j&D)!==D){Lo(),g.pingedLanes|=g.suspendedLanes&j;break}g.timeoutHandle=we(Qf.bind(null,g,oa),y);break}Qf(g,oa);break;case 4:if(td(g,D),(D&4194240)===D)break;for(y=g.eventTimes,j=-1;0<D;){var ae=31-dr(D);$=1<<ae,ae=y[ae],ae>j&&(j=ae),D&=~$}if(D=j,D=ci()-D,D=(120>D?120:480>D?480:1080>D?1080:1920>D?1920:3e3>D?3e3:4320>D?4320:1960*lte(D/1960))-D,10<D){g.timeoutHandle=we(Qf.bind(null,g,oa),D);break}Qf(g,oa);break;case 5:Qf(g,oa);break;default:throw Error(o(329))}}}return aa(g,ci()),g.callbackNode===C?_L.bind(null,g):null}function LC(g,y){var C=Sy;return g.current.memoizedState.isDehydrated&&(Zf(g,y).flags|=256),g=Ow(g,y),g!==2&&(y=oa,oa=C,y!==null&&FC(y)),g}function FC(g){oa===null?oa=g:oa.push.apply(oa,g)}function cte(g){for(var y=g;;){if(y.flags&16384){var C=y.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var D=0;D<C.length;D++){var j=C[D],$=j.getSnapshot;j=j.value;try{if(!Ys($(),j))return!1}catch{return!1}}}if(C=y.child,y.subtreeFlags&16384&&C!==null)C.return=y,y=C;else{if(y===g)break;for(;y.sibling===null;){if(y.return===null||y.return===g)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function td(g,y){for(y&=~RC,y&=~Mw,g.suspendedLanes|=y,g.pingedLanes&=~y,g=g.expirationTimes;0<y;){var C=31-dr(y),D=1<<C;g[C]=-1,y&=~D}}function wL(g){if(Bn&6)throw Error(o(327));Jf();var y=Ac(g,0);if(!(y&1))return aa(g,ci()),null;var C=Ow(g,y);if(g.tag!==0&&C===2){var D=Iu(g);D!==0&&(y=D,C=LC(g,D))}if(C===1)throw C=wy,Zf(g,0),td(g,y),aa(g,ci()),C;if(C===6)throw Error(o(345));return g.finishedWork=g.current.alternate,g.finishedLanes=y,Qf(g,oa),aa(g,ci()),null}function SL(g){Jh!==null&&Jh.tag===0&&!(Bn&6)&&Jf();var y=Bn;Bn|=1;var C=Ni.transition,D=Vn;try{if(Ni.transition=null,Vn=1,g)return g()}finally{Vn=D,Ni.transition=C,Bn=y,!(Bn&6)&&Zs()}}function BC(){ka=eg.current,Ot(eg)}function Zf(g,y){g.finishedWork=null,g.finishedLanes=0;var C=g.timeoutHandle;if(C!==Ke&&(g.timeoutHandle=Ke,tt(C)),Vi!==null)for(C=Vi.return;C!==null;){var D=C;switch(lr(D),D.tag){case 1:D=D.type.childContextTypes,D!=null&&qt();break;case 3:Vl(),Ot(un),Ot(Pt),$h();break;case 5:Gh(D);break;case 4:Vl();break;case 13:Ot(Dr);break;case 19:Ot(Dr);break;case 10:Uh(D.type._context);break;case 22:case 23:BC()}C=C.return}if(ji=g,Vi=g=nd(g.current,null),Ns=ka=y,ns=0,wy=null,RC=Mw=tg=0,oa=Sy=null,ms!==null){for(y=0;y<ms.length;y++)if(C=ms[y],D=C.interleaved,D!==null){C.interleaved=null;var j=D.next,$=C.pending;if($!==null){var ae=$.next;$.next=j,D.next=ae}C.pending=D}ms=null}return g}function EL(g,y){do{var C=Vi;try{if(Ic(),qm.current=Et,Fu){for(var D=qr.memoizedState;D!==null;){var j=D.queue;j!==null&&(j.pending=null),D=D.next}Fu=!1}if(Xh=0,Sr=gs=qr=null,Gf=!1,Oc=0,PC.current=null,C===null||C.return===null){ns=1,wy=y,Vi=null;break}e:{var $=g,ae=C.return,ye=C,Ge=y;if(y=Ns,ye.flags|=32768,Ge!==null&&typeof Ge=="object"&&typeof Ge.then=="function"){var ft=Ge,Ut=ye,bn=Ut.tag;if(!(Ut.mode&1)&&(bn===0||bn===11||bn===15)){var on=Ut.alternate;on?(Ut.updateQueue=on.updateQueue,Ut.memoizedState=on.memoizedState,Ut.lanes=on.lanes):(Ut.updateQueue=null,Ut.memoizedState=null)}var kr=pw(ae);if(kr!==null){kr.flags&=-257,vy(kr,ae,ye,$,y),kr.mode&1&&fw($,ft,y),y=kr,Ge=ft;var Qt=y.updateQueue;if(Qt===null){var io=new Set;io.add(Ge),y.updateQueue=io}else Qt.add(Ge);break e}else{if(!(y&1)){fw($,ft,y),UC();break e}Ge=Error(o(426))}}else if(_n&&ye.mode&1){var cl=pw(ae);if(cl!==null){!(cl.flags&65536)&&(cl.flags|=256),vy(cl,ae,ye,$,y),ay(Ge);break e}}$=Ge,ns!==4&&(ns=2),Sy===null?Sy=[$]:Sy.push($),Ge=bi(Ge,ye),ye=ae;do{switch(ye.tag){case 3:ye.flags|=65536,y&=-y,ye.lanes|=y;var Ne=Uu(ye,Ge,y);jh(ye,Ne);break e;case 1:$=Ge;var Se=ye.type,He=ye.stateNode;if(!(ye.flags&128)&&(typeof Se.getDerivedStateFromError=="function"||He!==null&&typeof He.componentDidCatch=="function"&&(Qh===null||!Qh.has(He)))){ye.flags|=65536,y&=-y,ye.lanes|=y;var It=dw(ye,$,y);jh(ye,It);break e}}ye=ye.return}while(ye!==null)}TL(C)}catch(Zt){y=Zt,Vi===C&&C!==null&&(Vi=C=C.return);continue}break}while(!0)}function bL(){var g=Cw.current;return Cw.current=Et,g===null?Et:g}function UC(){(ns===0||ns===3||ns===2)&&(ns=4),ji===null||!(tg&268435455)&&!(Mw&268435455)||td(ji,Ns)}function Ow(g,y){var C=Bn;Bn|=2;var D=bL();ji===g&&Ns===y||Zf(g,y);do try{ute();break}catch(j){EL(g,j)}while(!0);if(Ic(),Bn=C,Cw.current=D,Vi!==null)throw Error(o(261));return ji=null,Ns=0,ns}function ute(){for(;Vi!==null;)AL(Vi)}function hte(){for(;Vi!==null&&!ea();)AL(Vi)}function AL(g){var y=IL(g.alternate,g,ka);g.memoizedProps=g.pendingProps,y===null?TL(g):Vi=y,PC.current=null}function TL(g){var y=g;do{var C=y.alternate;if(g=y.return,y.flags&32768){if(C=rte(C,y),C!==null){C.flags&=32767,Vi=C;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{ns=6,Vi=null;return}}else if(C=gC(C,y,ka),C!==null){Vi=C;return}if(y=y.sibling,y!==null){Vi=y;return}Vi=y=g}while(y!==null);ns===0&&(ns=5)}function Qf(g,y){var C=Vn,D=Ni.transition;try{Ni.transition=null,Vn=1,dte(g,y,C)}finally{Ni.transition=D,Vn=C}return null}function dte(g,y,C){do Jf();while(Jh!==null);if(Bn&6)throw Error(o(327));var D=g.finishedWork,j=g.finishedLanes;if(D===null)return null;if(g.finishedWork=null,g.finishedLanes=0,D===g.current)throw Error(o(177));g.callbackNode=null,g.callbackPriority=0;var $=D.lanes|D.childLanes;if(Ll(g,$),g===ji&&(Vi=ji=null,Ns=0),!(D.subtreeFlags&2064)&&!(D.flags&2064)||Pw||(Pw=!0,PL(Ru,function(){return Jf(),null})),$=(D.flags&15990)!==0,D.subtreeFlags&15990||$){$=Ni.transition,Ni.transition=null;var ae=Vn;Vn=1;var ye=Bn;Bn|=4,PC.current=null,ste(g,D),ote(g,D),oe(g.containerInfo),g.current=D,ate(D),mr(),Bn=ye,Vn=ae,Ni.transition=$}else g.current=D;if(Pw&&(Pw=!1,Jh=g,Rw=j),$=g.pendingLanes,$===0&&(Qh=null),Xr(D.stateNode),aa(g,ci()),y!==null)for(C=g.onRecoverableError,D=0;D<y.length;D++)C(y[D]);if(Iw)throw Iw=!1,g=kC,kC=null,g;return Rw&1&&g.tag!==0&&Jf(),$=g.pendingLanes,$&1?g===OC?Ey++:(Ey=0,OC=g):Ey=0,Zs(),null}function Jf(){if(Jh!==null){var g=Pu(Rw),y=Ni.transition,C=Vn;try{if(Ni.transition=null,Vn=16>g?16:g,Jh===null)var D=!1;else{if(g=Jh,Jh=null,Rw=0,Bn&6)throw Error(o(331));var j=Bn;for(Bn|=4,At=g.current;At!==null;){var $=At,ae=$.child;if(At.flags&16){var ye=$.deletions;if(ye!==null){for(var Ge=0;Ge<ye.length;Ge++){var ft=ye[Ge];for(At=ft;At!==null;){var Ut=At;switch(Ut.tag){case 0:case 11:case 15:Kf(8,Ut,$)}var bn=Ut.child;if(bn!==null)bn.return=Ut,At=bn;else for(;At!==null;){Ut=At;var on=Ut.sibling,kr=Ut.return;if(uL(Ut),Ut===ft){At=null;break}if(on!==null){on.return=kr,At=on;break}At=kr}}}var Qt=$.alternate;if(Qt!==null){var io=Qt.child;if(io!==null){Qt.child=null;do{var cl=io.sibling;io.sibling=null,io=cl}while(io!==null)}}At=$}}if($.subtreeFlags&2064&&ae!==null)ae.return=$,At=ae;else e:for(;At!==null;){if($=At,$.flags&2048)switch($.tag){case 0:case 11:case 15:Kf(9,$,$.return)}var Ne=$.sibling;if(Ne!==null){Ne.return=$.return,At=Ne;break e}At=$.return}}var Se=g.current;for(At=Se;At!==null;){ae=At;var He=ae.child;if(ae.subtreeFlags&2064&&He!==null)He.return=ae,At=He;else e:for(ae=Se;At!==null;){if(ye=At,ye.flags&2048)try{switch(ye.tag){case 0:case 11:case 15:xy(9,ye)}}catch(Zt){la(ye,ye.return,Zt)}if(ye===ae){At=null;break e}var It=ye.sibling;if(It!==null){It.return=ye.return,At=It;break e}At=ye.return}}if(Bn=j,Zs(),Qi&&typeof Qi.onPostCommitFiberRoot=="function")try{Qi.onPostCommitFiberRoot(Pa,g)}catch{}D=!0}return D}finally{Vn=C,Ni.transition=y}}return!1}function CL(g,y,C){y=bi(C,y),y=Uu(g,y,1),Ro(g,y),y=Lo(),g=kw(g,1),g!==null&&(Ol(g,1,y),aa(g,y))}function la(g,y,C){if(g.tag===3)CL(g,g,C);else for(;y!==null;){if(y.tag===3){CL(y,g,C);break}else if(y.tag===1){var D=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(Qh===null||!Qh.has(D))){g=bi(C,g),g=dw(y,g,1),Ro(y,g),g=Lo(),y=kw(y,1),y!==null&&(Ol(y,1,g),aa(y,g));break}}y=y.return}}function fte(g,y,C){var D=g.pingCache;D!==null&&D.delete(y),y=Lo(),g.pingedLanes|=g.suspendedLanes&C,ji===g&&(Ns&C)===C&&(ns===4||ns===3&&(Ns&130023424)===Ns&&500>ci()-NC?Zf(g,0):RC|=C),aa(g,y)}function ML(g,y){y===0&&(g.mode&1?(y=ri,ri<<=1,!(ri&130023424)&&(ri=4194304)):y=1);var C=Lo();g=kw(g,y),g!==null&&(Ol(g,y,C),aa(g,C))}function pte(g){var y=g.memoizedState,C=0;y!==null&&(C=y.retryLane),ML(g,C)}function mte(g,y){var C=0;switch(g.tag){case 13:var D=g.stateNode,j=g.memoizedState;j!==null&&(C=j.retryLane);break;case 19:D=g.stateNode;break;default:throw Error(o(314))}D!==null&&D.delete(y),ML(g,C)}var IL;IL=function(g,y,C){if(g!==null)if(g.memoizedProps!==y.pendingProps||un.current)Da=!0;else{if(!(g.lanes&C)&&!(y.flags&128))return Da=!1,nte(g,y,C);Da=!!(g.flags&131072)}else Da=!1,_n&&y.flags&1048576&&ui(y,V,y.index);switch(y.lanes=0,y.tag){case 2:var D=y.type;g!==null&&(g.alternate=null,y.alternate=null,y.flags|=2),g=y.pendingProps;var j=Ln(y,Pt.current);Pc(y,C),j=Bu(null,y,D,g,j,C);var $=uy();return y.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(y.tag=1,y.memoizedState=null,y.updateQueue=null,tn(D)?($=!0,li(y)):$=!1,y.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,Po(y),j.updater=ku,y.stateNode=j,j._reactInternals=y,ra(y,D,g,C),y=yC(null,y,D,!0,$,C)):(y.tag=0,_n&&$&&zn(y),Oo(null,y,j,C),y=y.child),y;case 16:D=y.elementType;e:{switch(g!==null&&(g.alternate=null,y.alternate=null,y.flags|=2),g=y.pendingProps,j=D._init,D=j(D._payload),y.type=D,j=y.tag=vte(D),g=Nr(D,g),j){case 0:y=vC(null,y,D,g,C);break e;case 1:y=J4(null,y,D,g,C);break e;case 11:y=q4(null,y,D,g,C);break e;case 14:y=Y4(null,y,D,Nr(D.type,g),C);break e}throw Error(o(306,D,""))}return y;case 0:return D=y.type,j=y.pendingProps,j=y.elementType===D?j:Nr(D,j),vC(g,y,D,j,C);case 1:return D=y.type,j=y.pendingProps,j=y.elementType===D?j:Nr(D,j),J4(g,y,D,j,C);case 3:e:{if(eL(y),g===null)throw Error(o(387));D=y.pendingProps,$=y.memoizedState,j=$.element,Du(g,y),Rc(y,D,null,C);var ae=y.memoizedState;if(D=ae.element,ne&&$.isDehydrated)if($={element:D,isDehydrated:!1,cache:ae.cache,transitions:ae.transitions},y.updateQueue.baseState=$,y.memoizedState=$,y.flags&256){j=Error(o(423)),y=tL(g,y,D,C,j);break e}else if(D!==j){j=Error(o(424)),y=tL(g,y,D,C,j);break e}else for(ne&&(Si=Dl(y.stateNode.containerInfo),Gn=y,_n=!0,Ei=null,il=!1),C=lw(y,null,D,C),y.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(jl(),D===j){y=Vu(g,y,C);break e}Oo(g,y,D,C)}y=y.child}return y;case 5:return Lu(y),g===null&&Hh(y),D=y.type,j=y.pendingProps,$=g!==null?g.memoizedProps:null,ae=j.children,ve(D,j)?ae=null:$!==null&&ve(D,$)&&(y.flags|=32),Q4(g,y),Oo(g,y,ae,C),y.child;case 6:return g===null&&Hh(y),null;case 13:return nL(g,y,C);case 4:return Hf(y,y.stateNode.containerInfo),D=y.pendingProps,g===null?y.child=Ra(y,null,D,C):Oo(g,y,D,C),y.child;case 11:return D=y.type,j=y.pendingProps,j=y.elementType===D?j:Nr(D,j),q4(g,y,D,j,C);case 7:return Oo(g,y,y.pendingProps,C),y.child;case 8:return Oo(g,y,y.pendingProps.children,C),y.child;case 12:return Oo(g,y,y.pendingProps.children,C),y.child;case 10:e:{if(D=y.type._context,j=y.pendingProps,$=y.memoizedProps,ae=j.value,Nu(y,D,ae),$!==null)if(Ys($.value,ae)){if($.children===j.children&&!un.current){y=Vu(g,y,C);break e}}else for($=y.child,$!==null&&($.return=y);$!==null;){var ye=$.dependencies;if(ye!==null){ae=$.child;for(var Ge=ye.firstContext;Ge!==null;){if(Ge.context===D){if($.tag===1){Ge=eo(-1,C&-C),Ge.tag=2;var ft=$.updateQueue;if(ft!==null){ft=ft.shared;var Ut=ft.pending;Ut===null?Ge.next=Ge:(Ge.next=Ut.next,Ut.next=Ge),ft.pending=Ge}}$.lanes|=C,Ge=$.alternate,Ge!==null&&(Ge.lanes|=C),nl($.return,C,y),ye.lanes|=C;break}Ge=Ge.next}}else if($.tag===10)ae=$.type===y.type?null:$.child;else if($.tag===18){if(ae=$.return,ae===null)throw Error(o(341));ae.lanes|=C,ye=ae.alternate,ye!==null&&(ye.lanes|=C),nl(ae,C,y),ae=$.sibling}else ae=$.child;if(ae!==null)ae.return=$;else for(ae=$;ae!==null;){if(ae===y){ae=null;break}if($=ae.sibling,$!==null){$.return=ae.return,ae=$;break}ae=ae.return}$=ae}Oo(g,y,j.children,C),y=y.child}return y;case 9:return j=y.type,D=y.pendingProps.children,Pc(y,C),j=Fr(j),D=D(j),y.flags|=1,Oo(g,y,D,C),y.child;case 14:return D=y.type,j=Nr(D,y.pendingProps),j=Nr(D.type,j),Y4(g,y,D,j,C);case 15:return K4(g,y,y.type,y.pendingProps,C);case 17:return D=y.type,j=y.pendingProps,j=y.elementType===D?j:Nr(D,j),g!==null&&(g.alternate=null,y.alternate=null,y.flags|=2),y.tag=1,tn(D)?(g=!0,li(y)):g=!1,Pc(y,C),Dc(y,D,j),ra(y,D,j,C),yC(null,y,D,!0,g,C);case 19:return oL(g,y,C);case 22:return Z4(g,y,C)}throw Error(o(156,y.tag))};function PL(g,y){return kh(g,y)}function gte(g,y,C,D){this.tag=g,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ll(g,y,C,D){return new gte(g,y,C,D)}function jC(g){return g=g.prototype,!(!g||!g.isReactComponent)}function vte(g){if(typeof g=="function")return jC(g)?1:0;if(g!=null){if(g=g.$$typeof,g===_)return 11;if(g===E)return 14}return 2}function nd(g,y){var C=g.alternate;return C===null?(C=ll(g.tag,y,g.key,g.mode),C.elementType=g.elementType,C.type=g.type,C.stateNode=g.stateNode,C.alternate=g,g.alternate=C):(C.pendingProps=y,C.type=g.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=g.flags&14680064,C.childLanes=g.childLanes,C.lanes=g.lanes,C.child=g.child,C.memoizedProps=g.memoizedProps,C.memoizedState=g.memoizedState,C.updateQueue=g.updateQueue,y=g.dependencies,C.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},C.sibling=g.sibling,C.index=g.index,C.ref=g.ref,C}function Lw(g,y,C,D,j,$){var ae=2;if(D=g,typeof g=="function")jC(g)&&(ae=1);else if(typeof g=="string")ae=5;else e:switch(g){case u:return ep(C.children,j,$,y);case h:ae=8,j|=8;break;case f:return g=ll(12,C,y,j|2),g.elementType=f,g.lanes=$,g;case S:return g=ll(13,C,y,j),g.elementType=S,g.lanes=$,g;case x:return g=ll(19,C,y,j),g.elementType=x,g.lanes=$,g;case M:return Fw(C,j,$,y);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case p:ae=10;break e;case v:ae=9;break e;case _:ae=11;break e;case E:ae=14;break e;case b:ae=16,D=null;break e}throw Error(o(130,g==null?g:typeof g,""))}return y=ll(ae,C,y,j),y.elementType=g,y.type=D,y.lanes=$,y}function ep(g,y,C,D){return g=ll(7,g,D,y),g.lanes=C,g}function Fw(g,y,C,D){return g=ll(22,g,D,y),g.elementType=M,g.lanes=C,g.stateNode={},g}function VC(g,y,C){return g=ll(6,g,null,y),g.lanes=C,g}function zC(g,y,C){return y=ll(4,g.children!==null?g.children:[],g.key,y),y.lanes=C,y.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},y}function yte(g,y,C,D,j){this.tag=y,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ke,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cc(0),this.expirationTimes=Cc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cc(0),this.identifierPrefix=D,this.onRecoverableError=j,ne&&(this.mutableSourceEagerHydrationData=null)}function RL(g,y,C,D,j,$,ae,ye,Ge){return g=new yte(g,y,C,ye,Ge),y===1?(y=1,$===!0&&(y|=8)):y=0,$=ll(3,null,null,y),g.current=$,$.stateNode=g,$.memoizedState={element:D,isDehydrated:C,cache:null,transitions:null},Po($),g}function NL(g){if(!g)return Lt;g=g._reactInternals;e:{if(R(g)!==g||g.tag!==1)throw Error(o(170));var y=g;do{switch(y.tag){case 3:y=y.stateNode.context;break e;case 1:if(tn(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break e}}y=y.return}while(y!==null);throw Error(o(171))}if(g.tag===1){var C=g.type;if(tn(C))return wi(g,C,y)}return y}function DL(g){var y=g._reactInternals;if(y===void 0)throw typeof g.render=="function"?Error(o(188)):(g=Object.keys(g).join(","),Error(o(268,g)));return g=H(y),g===null?null:g.stateNode}function kL(g,y){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var C=g.retryLane;g.retryLane=C!==0&&C<y?C:y}}function HC(g,y){kL(g,y),(g=g.alternate)&&kL(g,y)}function xte(g){return g=H(g),g===null?null:g.stateNode}function _te(){return null}return t.attemptContinuousHydration=function(g){if(g.tag===13){var y=Lo();al(g,134217728,y),HC(g,134217728)}},t.attemptHydrationAtCurrentPriority=function(g){if(g.tag===13){var y=Lo(),C=ed(g);al(g,C,y),HC(g,C)}},t.attemptSynchronousHydration=function(g){switch(g.tag){case 3:var y=g.stateNode;if(y.current.memoizedState.isDehydrated){var C=Ms(y.pendingLanes);C!==0&&(Is(y,C|1),aa(y,ci()),!(Bn&6)&&(ng(),Zs()))}break;case 13:var D=Lo();SL(function(){return al(g,1,D)}),HC(g,1)}},t.batchedUpdates=function(g,y){var C=Bn;Bn|=1;try{return g(y)}finally{Bn=C,Bn===0&&(ng(),wr&&Zs())}},t.createComponentSelector=function(g){return{$$typeof:Sw,value:g}},t.createContainer=function(g,y,C,D,j,$,ae){return RL(g,y,!1,null,C,D,j,$,ae)},t.createHasPseudoClassSelector=function(g){return{$$typeof:Ew,value:g}},t.createHydrationContainer=function(g,y,C,D,j,$,ae,ye,Ge){return g=RL(C,D,!0,g,j,$,ae,ye,Ge),g.context=NL(null),C=g.current,D=Lo(),j=ed(C),$=eo(D,j),$.callback=y??null,Ro(C,$),g.current.lanes=j,Ol(g,j,D),aa(g,D),g},t.createPortal=function(g,y,C){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:D==null?null:""+D,children:g,containerInfo:y,implementation:C}},t.createRoleSelector=function(g){return{$$typeof:bw,value:g}},t.createTestNameSelector=function(g){return{$$typeof:Aw,value:g}},t.createTextSelector=function(g){return{$$typeof:Tw,value:g}},t.deferredUpdates=function(g){var y=Vn,C=Ni.transition;try{return Ni.transition=null,Vn=16,g()}finally{Vn=y,Ni.transition=C}},t.discreteUpdates=function(g,y,C,D,j){var $=Vn,ae=Ni.transition;try{return Ni.transition=null,Vn=1,g(y,C,D,j)}finally{Vn=$,Ni.transition=ae,Bn===0&&ng()}},t.findAllNodes=IC,t.findBoundingRects=function(g,y){if(!Fe)throw Error(o(363));y=IC(g,y),g=[];for(var C=0;C<y.length;C++)g.push(pt(y[C]));for(y=g.length-1;0<y;y--){C=g[y];for(var D=C.x,j=D+C.width,$=C.y,ae=$+C.height,ye=y-1;0<=ye;ye--)if(y!==ye){var Ge=g[ye],ft=Ge.x,Ut=ft+Ge.width,bn=Ge.y,on=bn+Ge.height;if(D>=ft&&$>=bn&&j<=Ut&&ae<=on){g.splice(y,1);break}else if(D!==ft||C.width!==Ge.width||on<$||bn>ae){if(!($!==bn||C.height!==Ge.height||Ut<D||ft>j)){ft>D&&(Ge.width+=ft-D,Ge.x=D),Ut<j&&(Ge.width=j-ft),g.splice(y,1);break}}else{bn>$&&(Ge.height+=bn-$,Ge.y=$),on<ae&&(Ge.height=ae-bn),g.splice(y,1);break}}}return g},t.findHostInstance=DL,t.findHostInstanceWithNoPortals=function(g){return g=U(g),g=g!==null?K(g):null,g===null?null:g.stateNode},t.findHostInstanceWithWarning=function(g){return DL(g)},t.flushControlled=function(g){var y=Bn;Bn|=1;var C=Ni.transition,D=Vn;try{Ni.transition=null,Vn=1,g()}finally{Vn=D,Ni.transition=C,Bn=y,Bn===0&&(ng(),Zs())}},t.flushPassiveEffects=Jf,t.flushSync=SL,t.focusWithin=function(g,y){if(!Fe)throw Error(o(363));for(g=TC(g),y=xL(g,y),y=Array.from(y),g=0;g<y.length;){var C=y[g++];if(!q(C)){if(C.tag===5&&pe(C.stateNode))return!0;for(C=C.child;C!==null;)y.push(C),C=C.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Vn},t.getFindAllNodesFailureDescription=function(g,y){if(!Fe)throw Error(o(363));var C=0,D=[];g=[TC(g),0];for(var j=0;j<g.length;){var $=g[j++],ae=g[j++],ye=y[ae];if(($.tag!==5||!q($))&&(CC($,ye)&&(D.push(MC(ye)),ae++,ae>C&&(C=ae)),ae<y.length))for($=$.child;$!==null;)g.push($,ae),$=$.sibling}if(C<y.length){for(g=[];C<y.length;C++)g.push(MC(y[C]));return`findAllNodes was able to match part of the selector:
  `+(D.join(" > ")+`

No matching component was found for:
  `)+g.join(" > ")}return null},t.getPublicRootInstance=function(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return se(g.child.stateNode);default:return g.child.stateNode}},t.injectIntoDevTools=function(g){if(g={bundleType:g.bundleType,version:g.version,rendererPackageName:g.rendererPackageName,rendererConfig:g.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:xte,findFiberByHostInstance:g.findFiberByHostInstance||_te,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")g=!1;else{var y=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(y.isDisabled||!y.supportsFiber)g=!0;else{try{Pa=y.inject(g),Qi=y}catch{}g=!!y.checkDCE}}return g},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(g,y,C,D){if(!Fe)throw Error(o(363));g=IC(g,y);var j=Ve(g,C,D).disconnect;return{disconnect:function(){j()}}},t.registerMutableSourceForHydration=function(g,y){var C=y._getVersion;C=C(y._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[y,C]:g.mutableSourceEagerHydrationData.push(y,C)},t.runWithPriority=function(g,y){var C=Vn;try{return Vn=g,y()}finally{Vn=C}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(g,y,C,D){var j=y.current,$=Lo(),ae=ed(j);return C=NL(C),y.context===null?y.context=C:y.pendingContext=C,y=eo($,ae),y.payload={element:g},D=D===void 0?null:D,D!==null&&(y.callback=D),Ro(j,y),g=al(j,ae,$),g!==null&&Bl(g,j,ae),ae},t};vee.exports=bDe;var ADe=vee.exports;const TDe=y3(ADe),F4={},CDe=n=>void Object.assign(F4,n);function MDe(n,e){function t(u,{args:h=[],attach:f,...p},v){let _=`${u[0].toUpperCase()}${u.slice(1)}`,S;if(u==="primitive"){if(p.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const x=p.object;S=zg(x,{type:u,root:v,attach:f,primitive:!0})}else{const x=F4[_];if(!x)throw new Error(`R3F: ${_} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");S=zg(new x(...h),{type:u,root:v,attach:f,memoizedProps:{args:h}})}return S.__r3f.attach===void 0&&(S.isBufferGeometry?S.__r3f.attach="geometry":S.isMaterial&&(S.__r3f.attach="material")),_!=="inject"&&sP(S,p),S}function r(u,h){let f=!1;if(h){var p,v;(p=h.__r3f)!=null&&p.attach?iP(u,h,h.__r3f.attach):h.isObject3D&&u.isObject3D&&(u.add(h),f=!0),f||(v=u.__r3f)==null||v.objects.push(h),h.__r3f||zg(h,{}),h.__r3f.parent=u,o3(h),Hg(h)}}function i(u,h,f){let p=!1;if(h){var v,_;if((v=h.__r3f)!=null&&v.attach)iP(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){h.parent=u,h.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:h});const S=u.children.filter(E=>E!==h),x=S.indexOf(f);u.children=[...S.slice(0,x),h,...S.slice(x)],p=!0}p||(_=u.__r3f)==null||_.objects.push(h),h.__r3f||zg(h,{}),h.__r3f.parent=u,o3(h),Hg(h)}}function s(u,h,f=!1){u&&[...u].forEach(p=>o(h,p,f))}function o(u,h,f){if(h){var p,v,_;if(h.__r3f&&(h.__r3f.parent=null),(p=u.__r3f)!=null&&p.objects&&(u.__r3f.objects=u.__r3f.objects.filter(M=>M!==h)),(v=h.__r3f)!=null&&v.attach)aV(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){var S;u.remove(h),(S=h.__r3f)!=null&&S.root&&LDe(ib(h),h)}const E=(_=h.__r3f)==null?void 0:_.primitive,b=!E&&(f===void 0?h.dispose!==null:f);if(!E){var x;s((x=h.__r3f)==null?void 0:x.objects,h,b),s(h.children,h,b)}if(delete h.__r3f,b&&h.dispose&&h.type!=="Scene"){const M=()=>{try{h.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?i3.unstable_scheduleCallback(i3.unstable_IdlePriority,M):M()}Hg(u)}}function a(u,h,f,p){var v;const _=(v=u.__r3f)==null?void 0:v.parent;if(!_)return;const S=t(h,f,u.__r3f.root);if(u.children){for(const x of u.children)x.__r3f&&r(S,x);u.children=u.children.filter(x=>!x.__r3f)}u.__r3f.objects.forEach(x=>r(S,x)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(_,u),S.parent&&(S.__r3f.autoRemovedBeforeAppend=!0),r(_,S),S.raycast&&S.__r3f.eventCount&&ib(S).getState().internal.interaction.push(S),[p,p.alternate].forEach(x=>{x!==null&&(x.stateNode=S,x.ref&&(typeof x.ref=="function"?x.ref(S):x.ref.current=S))})}const l=()=>{};return{reconciler:TDe({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,h)=>{if(!h)return;const f=u.getState().scene;f.__r3f&&(f.__r3f.root=u,r(f,h))},removeChildFromContainer:(u,h)=>{h&&o(u.getState().scene,h)},insertInContainerBefore:(u,h,f)=>{if(!h||!f)return;const p=u.getState().scene;p.__r3f&&i(p,h,f)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var h;return!!((h=u==null?void 0:u.__r3f)!=null?h:{}).handlers},prepareUpdate(u,h,f,p){var v;if(((v=u==null?void 0:u.__r3f)!=null?v:{}).primitive&&p.object&&p.object!==u)return[!0];{const{args:S=[],children:x,...E}=p,{args:b=[],children:M,...k}=f;if(!Array.isArray(S))throw new Error("R3F: the args prop must be an array!");if(S.some((P,N)=>P!==b[N]))return[!0];const B=Tee(u,E,k,!0);return B.changes.length?[!1,B]:null}},commitUpdate(u,[h,f],p,v,_,S){h?a(u,p,_,S):sP(u,f)},commitMount(u,h,f,p){var v;const _=(v=u.__r3f)!=null?v:{};u.raycast&&_.handlers&&_.eventCount&&ib(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>zg(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var h;const{attach:f,parent:p}=(h=u.__r3f)!=null?h:{};f&&p&&aV(p,u,f),u.isObject3D&&(u.visible=!1),Hg(u)},unhideInstance(u,h){var f;const{attach:p,parent:v}=(f=u.__r3f)!=null?f:{};p&&v&&iP(v,u,p),(u.isObject3D&&h.visible==null||h.visible)&&(u.visible=!0),Hg(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():g0.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&jr.fun(performance.now)?performance.now:jr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:jr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:jr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:sP}}var rV,iV;const rP=n=>"colorSpace"in n||"outputColorSpace"in n,_ee=()=>{var n;return(n=F4.ColorManagement)!=null?n:null},wee=n=>n&&n.isOrthographicCamera,IDe=n=>n&&n.hasOwnProperty("current"),tw=typeof window<"u"&&((rV=window.document)!=null&&rV.createElement||((iV=window.navigator)==null?void 0:iV.product)==="ReactNative")?O.useLayoutEffect:O.useEffect;function See(n){const e=O.useRef(n);return tw(()=>void(e.current=n),[n]),e}function PDe({set:n}){return tw(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}let Eee=class extends O.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}};Eee.getDerivedStateFromError=()=>({error:!0});const bee="__default",sV=new Map,RDe=n=>n&&!!n.memoized&&!!n.changes;function Aee(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Ky=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function ib(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const jr={obj:n=>n===Object(n)&&!jr.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(jr.str(n)||jr.num(n)||jr.boo(n))return n===e;const s=jr.obj(n);if(s&&r==="reference")return n===e;const o=jr.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!jr.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(jr.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function NDe(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function DDe(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function zg(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function s3(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const oV=/-\d+$/;function iP(n,e,t){if(jr.str(t)){if(oV.test(t)){const s=t.replace(oV,""),{target:o,key:a}=s3(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=s3(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function aV(n,e,t){var r,i;if(jr.str(t)){const{target:s,key:o}=s3(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function Tee(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){const u=n.__r3f,h=Object.entries(i),f=[];if(c){const v=Object.keys(l);for(let _=0;_<v.length;_++)i.hasOwnProperty(v[_])||h.unshift([v[_],bee+"remove"])}h.forEach(([v,_])=>{var S;if((S=n.__r3f)!=null&&S.primitive&&v==="object"||jr.equ(_,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return f.push([v,_,!0,[]]);let x=[];v.includes("-")&&(x=v.split("-")),f.push([v,_,!1,x]);for(const E in i){const b=i[E];E.startsWith(`${v}-`)&&f.push([E,b,!1,E.split("-")])}});const p={...i};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(p.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(p.attach=u.memoizedProps.attach),{memoized:p,changes:f}}function sP(n,e){var t;const r=n.__r3f,i=r==null?void 0:r.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:a}=RDe(e)?e:Tee(n,e),l=r==null?void 0:r.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let f=0;f<a.length;f++){let[p,v,_,S]=a[f];if(rP(n)){const M="srgb",k="srgb-linear";p==="encoding"?(p="colorSpace",v=v===3001?M:k):p==="outputEncoding"&&(p="outputColorSpace",v=v===3001?M:k)}let x=n,E=x[p];if(S.length&&(E=S.reduce((b,M)=>b[M],n),!(E&&E.set))){const[b,...M]=S.reverse();x=M.reverse().reduce((k,B)=>k[B],n),p=b}if(v===bee+"remove")if(x.constructor){let b=sV.get(x.constructor);b||(b=new x.constructor,sV.set(x.constructor,b)),v=b[p]}else v=0;if(_&&r)v?r.handlers[p]=v:delete r.handlers[p],r.eventCount=Object.keys(r.handlers).length;else if(E&&E.set&&(E.copy||E instanceof im)){if(Array.isArray(v))E.fromArray?E.fromArray(v):E.set(...v);else if(E.copy&&v&&v.constructor&&E.constructor===v.constructor)E.copy(v);else if(v!==void 0){var c;const b=(c=E)==null?void 0:c.isColor;!b&&E.setScalar?E.setScalar(v):E instanceof im&&v instanceof im?E.mask=v.mask:E.set(v),!_ee()&&s&&!s.linear&&b&&E.convertSRGBToLinear()}}else{var u;if(x[p]=v,(u=x[p])!=null&&u.isTexture&&x[p].format===_o&&x[p].type===Rl&&s){const b=x[p];rP(b)&&rP(s.gl)?b.colorSpace=s.gl.outputColorSpace:b.encoding=s.gl.outputEncoding}}Hg(n)}if(r&&r.parent&&n.raycast&&l!==r.eventCount){const f=ib(n).getState().internal,p=f.interaction.indexOf(n);p>-1&&f.interaction.splice(p,1),r.eventCount&&f.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&o3(n),n}function Hg(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function o3(n){n.onUpdate==null||n.onUpdate(n)}function kDe(n,e){n.manual||(wee(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function dE(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function ODe(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return g0.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return g0.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return g0.ContinuousEventPriority;default:return g0.DefaultEventPriority}}function Cee(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function LDe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{Cee(t.capturedMap,e,r,i)})}function FDe(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],h=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+h*h))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var h;return(h=c.__r3f)==null?void 0:h.handlers["onPointer"+u]}))}function r(l,c){const u=n.getState(),h=new Set,f=[],p=c?c(u.internal.interaction):u.internal.interaction;for(let x=0;x<p.length;x++){const E=Ky(p[x]);E&&(E.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function v(x){const E=Ky(x);if(!E||!E.events.enabled||E.raycaster.camera===null)return[];if(E.raycaster.camera===void 0){var b;E.events.compute==null||E.events.compute(l,E,(b=E.previousRoot)==null?void 0:b.getState()),E.raycaster.camera===void 0&&(E.raycaster.camera=null)}return E.raycaster.camera?E.raycaster.intersectObject(x,!0):[]}let _=p.flatMap(v).sort((x,E)=>{const b=Ky(x.object),M=Ky(E.object);return!b||!M?x.distance-E.distance:M.events.priority-b.events.priority||x.distance-E.distance}).filter(x=>{const E=dE(x);return h.has(E)?!1:(h.add(E),!0)});u.events.filter&&(_=u.events.filter(_,u));for(const x of _){let E=x.object;for(;E;){var S;(S=E.__r3f)!=null&&S.eventCount&&f.push({...x,eventObject:E}),E=E.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let x of u.internal.capturedMap.get(l.pointerId).values())h.has(dE(x.intersection))||f.push(x.intersection);return f}function i(l,c,u,h){const f=n.getState();if(l.length){const p={stopped:!1};for(const v of l){const _=Ky(v.object)||f,{raycaster:S,pointer:x,camera:E,internal:b}=_,M=new re(x.x,x.y,0).unproject(E),k=I=>{var U,H;return(U=(H=b.capturedMap.get(I))==null?void 0:H.has(v.eventObject))!=null?U:!1},B=I=>{const U={intersection:v,target:c.target};b.capturedMap.has(I)?b.capturedMap.get(I).set(v.eventObject,U):b.capturedMap.set(I,new Map([[v.eventObject,U]])),c.target.setPointerCapture(I)},P=I=>{const U=b.capturedMap.get(I);U&&Cee(b.capturedMap,v.eventObject,U,I)};let N={};for(let I in c){let U=c[I];typeof U!="function"&&(N[I]=U)}let R={...v,...N,pointer:x,intersections:l,stopped:p.stopped,delta:u,unprojectedPoint:M,ray:S.ray,camera:E,stopPropagation(){const I="pointerId"in c&&b.capturedMap.get(c.pointerId);if((!I||I.has(v.eventObject))&&(R.stopped=p.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(U=>U.eventObject===v.eventObject))){const U=l.slice(0,l.indexOf(v));s([...U,v])}},target:{hasPointerCapture:k,setPointerCapture:B,releasePointerCapture:P},currentTarget:{hasPointerCapture:k,setPointerCapture:B,releasePointerCapture:P},nativeEvent:c};if(h(R),p.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(h=>h.object===u.object&&h.index===u.index&&h.instanceId===u.instanceId)){const f=u.eventObject.__r3f,p=f==null?void 0:f.handlers;if(c.hovered.delete(dE(u)),f!=null&&f.eventCount){const v={...u,intersections:l};p.onPointerOut==null||p.onPointerOut(v),p.onPointerLeave==null||p.onPointerLeave(v)}}}function o(l,c){for(let u=0;u<c.length;u++){const h=c[u].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:h,internal:f}=n.getState();f.lastEvent.current=u;const p=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",S=r(u,p?t:void 0),x=v?e(u):0;l==="onPointerDown"&&(f.initialClick=[u.offsetX,u.offsetY],f.initialHits=S.map(b=>b.eventObject)),v&&!S.length&&x<=2&&(o(u,f.interaction),h&&h(u)),p&&s(S);function E(b){const M=b.eventObject,k=M.__r3f,B=k==null?void 0:k.handlers;if(k!=null&&k.eventCount)if(p){if(B.onPointerOver||B.onPointerEnter||B.onPointerOut||B.onPointerLeave){const P=dE(b),N=f.hovered.get(P);N?N.stopped&&b.stopPropagation():(f.hovered.set(P,b),B.onPointerOver==null||B.onPointerOver(b),B.onPointerEnter==null||B.onPointerEnter(b))}B.onPointerMove==null||B.onPointerMove(b)}else{const P=B[l];P?(!v||f.initialHits.includes(M))&&(o(u,f.interaction.filter(N=>!f.initialHits.includes(N))),P(b)):v&&f.initialHits.includes(M)&&o(u,f.interaction.filter(N=>!f.initialHits.includes(N)))}}i(S,u,x,E)}}return{handlePointer:a}}const Mee=n=>!!(n!=null&&n.render),Iee=O.createContext(null),BDe=(n,e)=>{const t=xDe((a,l)=>{const c=new re,u=new re,h=new re;function f(x=l().camera,E=u,b=l().size){const{width:M,height:k,top:B,left:P}=b,N=M/k;E.isVector3?h.copy(E):h.set(...E);const R=x.getWorldPosition(c).distanceTo(h);if(wee(x))return{width:M/x.zoom,height:k/x.zoom,top:B,left:P,factor:1,distance:R,aspect:N};{const I=x.fov*Math.PI/180,U=2*Math.tan(I/2)*R,H=U*(M/k);return{width:H,height:U,top:B,left:P,factor:M/H,distance:R,aspect:N}}}let p;const v=x=>a(E=>({performance:{...E.performance,current:x}})),_=new Ze;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(x=1)=>n(l(),x),advance:(x,E)=>e(x,E,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new R4,pointer:_,mouse:_,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=l();p&&clearTimeout(p),x.performance.current!==x.performance.min&&v(x.performance.min),p=setTimeout(()=>v(l().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:f},setEvents:x=>a(E=>({...E,events:{...E.events,...x}})),setSize:(x,E,b,M,k)=>{const B=l().camera,P={width:x,height:E,top:M||0,left:k||0,updateStyle:b};a(N=>({size:P,viewport:{...N.viewport,...f(B,u,P)}}))},setDpr:x=>a(E=>{const b=Aee(x);return{viewport:{...E.viewport,dpr:b,initialDpr:E.viewport.initialDpr||b}}}),setFrameloop:(x="always")=>{const E=l().clock;E.stop(),E.elapsedTime=0,x!=="never"&&(E.start(),E.elapsedTime=0),a(()=>({frameloop:x}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:O.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(x,E,b)=>{const M=l().internal;return M.priority=M.priority+(E>0?1:0),M.subscribers.push({ref:x,priority:E,store:b}),M.subscribers=M.subscribers.sort((k,B)=>k.priority-B.priority),()=>{const k=l().internal;k!=null&&k.subscribers&&(k.priority=k.priority-(E>0?1:0),k.subscribers=k.subscribers.filter(B=>B.ref!==x))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:h}=t.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var f;i=l,s=c.dpr,kDe(a,l),u.setPixelRatio(c.dpr);const p=(f=l.updateStyle)!=null?f:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,p)}a!==o&&(o=a,h(p=>({viewport:{...p.viewport,...p.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let fE,UDe=new Set,jDe=new Set,VDe=new Set;function oP(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Zy(n,e){switch(n){case"before":return oP(UDe,e);case"after":return oP(jDe,e);case"tail":return oP(VDe,e)}}let aP,lP;function cP(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),aP=e.internal.subscribers,fE=0;fE<aP.length;fE++)lP=aP[fE],lP.ref.current(lP.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function zDe(n){let e=!1,t=!1,r,i,s;function o(c){i=requestAnimationFrame(o),e=!0,r=0,Zy("before",c),t=!0;for(const h of n.values()){var u;s=h.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(r+=cP(c,s))}if(t=!1,Zy("after",c),r===0)return Zy("tail",c),e=!1,cancelAnimationFrame(i)}function a(c,u=1){var h;if(!c)return n.forEach(f=>a(f.store.getState(),u));(h=c.gl.xr)!=null&&h.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,u=!0,h,f){if(u&&Zy("before",c),h)cP(c,h,f);else for(const p of n.values())cP(c,p.store.getState());u&&Zy("after",c)}return{loop:o,invalidate:a,advance:l}}function Pee(){const n=O.useContext(Iee);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Ku(n=t=>t,e){return Pee()(n,e)}function HDe(n,e=0){const t=Pee(),r=t.getState().internal.subscribe,i=See(n);return tw(()=>r(i,e,t),[e,r,t]),null}const lV=new WeakMap;function Ree(n,e){return function(t,...r){let i=lV.get(t);return i||(i=new t,lV.set(t,i)),n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,NDe(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function nw(n,e,t,r){const i=Array.isArray(e)?e:[e],s=wDe(Ree(t,r),[n,...i],{equal:jr.equ});return Array.isArray(e)?s:s[0]}nw.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return SDe(Ree(t),[n,...r])};nw.clear=function(n,e){const t=Array.isArray(e)?e:[e];return EDe([n,...t])};const Rv=new Map,{invalidate:cV,advance:uV}=zDe(Rv),{reconciler:aA,applyProps:Dg}=MDe(Rv,ODe),kg={objects:"shallow",strict:!1},WDe=(n,e)=>{const t=typeof n=="function"?n(e):n;return Mee(t)?t:new fee({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function GDe(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function $De(n){const e=Rv.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||BDe(cV,uV),o=t||aA.createContainer(s,g0.ConcurrentRoot,null,!1,null,"",i,null);e||Rv.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:h,size:f,scene:p,events:v,onCreated:_,shadows:S=!1,linear:x=!1,flat:E=!1,legacy:b=!1,orthographic:M=!1,frameloop:k="always",dpr:B=[1,2],performance:P,raycaster:N,camera:R,onPointerMissed:I}=u,U=s.getState(),H=U.gl;U.gl||U.set({gl:H=WDe(h,n)});let W=U.raycaster;W||U.set({raycaster:W=new iee});const{params:K,...te}=N||{};if(jr.equ(te,W,kg)||Dg(W,{...te}),jr.equ(K,W.params,kg)||Dg(W,{params:{...W.params,...K}}),!U.camera||U.camera===c&&!jr.equ(c,R,kg)){c=R;const oe=R instanceof X_,fe=oe?R:M?new lf(0,0,0,0,.1,1e3):new Bi(75,0,.1,1e3);oe||(fe.position.z=5,R&&(Dg(fe,R),("aspect"in R||"left"in R||"right"in R||"bottom"in R||"top"in R)&&(fe.manual=!0,fe.updateProjectionMatrix())),!U.camera&&!(R!=null&&R.rotation)&&fe.lookAt(0,0,0)),U.set({camera:fe}),W.camera=fe}if(!U.scene){let oe;p!=null&&p.isScene?oe=p:(oe=new h4,p&&Dg(oe,p)),U.set({scene:zg(oe)})}if(!U.xr){var se;const oe=(We,Qe)=>{const ve=s.getState();ve.frameloop!=="never"&&uV(We,!0,ve,Qe)},fe=()=>{const We=s.getState();We.gl.xr.enabled=We.gl.xr.isPresenting,We.gl.xr.setAnimationLoop(We.gl.xr.isPresenting?oe:null),We.gl.xr.isPresenting||cV(We)},De={connect(){const We=s.getState().gl;We.xr.addEventListener("sessionstart",fe),We.xr.addEventListener("sessionend",fe)},disconnect(){const We=s.getState().gl;We.xr.removeEventListener("sessionstart",fe),We.xr.removeEventListener("sessionend",fe)}};typeof((se=H.xr)==null?void 0:se.addEventListener)=="function"&&De.connect(),U.set({xr:De})}if(H.shadowMap){const oe=H.shadowMap.enabled,fe=H.shadowMap.type;if(H.shadowMap.enabled=!!S,jr.boo(S))H.shadowMap.type=$1;else if(jr.str(S)){var le;const De={basic:pQ,percentage:DT,soft:$1,variance:Zl};H.shadowMap.type=(le=De[S])!=null?le:$1}else jr.obj(S)&&Object.assign(H.shadowMap,S);(oe!==H.shadowMap.enabled||fe!==H.shadowMap.type)&&(H.shadowMap.needsUpdate=!0)}const X=_ee();X&&("enabled"in X?X.enabled=!b:"legacyMode"in X&&(X.legacyMode=b)),l||Dg(H,{outputEncoding:x?3e3:3001,toneMapping:E?mu:KO}),U.legacy!==b&&U.set(()=>({legacy:b})),U.linear!==x&&U.set(()=>({linear:x})),U.flat!==E&&U.set(()=>({flat:E})),h&&!jr.fun(h)&&!Mee(h)&&!jr.equ(h,H,kg)&&Dg(H,h),v&&!U.events.handlers&&U.set({events:v(s)});const ce=GDe(n,f);return jr.equ(ce,U.size,kg)||U.setSize(ce.width,ce.height,ce.updateStyle,ce.top,ce.left),B&&U.viewport.dpr!==Aee(B)&&U.setDpr(B),U.frameloop!==k&&U.setFrameloop(k),U.onPointerMissed||U.set({onPointerMissed:I}),P&&!jr.equ(P,U.performance,kg)&&U.set(oe=>({performance:{...oe.performance,...P}})),a=_,l=!0,this},render(u){return l||this.configure(),aA.updateContainer(m.jsx(XDe,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){Nee(n)}}}function XDe({store:n,children:e,onCreated:t,rootElement:r}){return tw(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),m.jsx(Iee.Provider,{value:n,children:e})}function Nee(n,e){const t=Rv.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),aA.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),DDe(i),Rv.delete(n)}catch{}},500)})}}aA.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:O.version});const uP={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function qDe(n){const{handlePointer:e}=FDe(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(uP).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=uP[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=uP[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function hV(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function YDe({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=O.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=O.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,u=O.useRef(!1);O.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[h,f,p]=O.useMemo(()=>{const x=()=>{if(!a.current.element)return;const{left:E,top:b,width:M,height:k,bottom:B,right:P,x:N,y:R}=a.current.element.getBoundingClientRect(),I={left:E,top:b,width:M,height:k,bottom:B,right:P,x:N,y:R};a.current.element instanceof HTMLElement&&r&&(I.height=a.current.element.offsetHeight,I.width=a.current.element.offsetWidth),Object.freeze(I),u.current&&!JDe(a.current.lastBounds,I)&&o(a.current.lastBounds=I)};return[x,c?hV(x,c):x,l?hV(x,l):x]},[o,r,l,c]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",p,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function _(){a.current.element&&(a.current.resizeObserver=new i(p),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(x=>x.addEventListener("scroll",p,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const S=x=>{!x||x===a.current.element||(v(),a.current.element=x,a.current.scrollContainers=Dee(x),_())};return ZDe(p,!!e),KDe(f),O.useEffect(()=>{v(),_()},[e,p,f]),O.useEffect(()=>v,[]),[S,s,h]}function KDe(n){O.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function ZDe(n,e){O.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function Dee(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...Dee(n.parentElement)]}const QDe=["x","y","top","bottom","left","right","width","height"],JDe=(n,e)=>QDe.every(t=>n[t]===e[t]);var eke=Object.defineProperty,tke=Object.defineProperties,nke=Object.getOwnPropertyDescriptors,dV=Object.getOwnPropertySymbols,rke=Object.prototype.hasOwnProperty,ike=Object.prototype.propertyIsEnumerable,fV=(n,e,t)=>e in n?eke(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,pV=(n,e)=>{for(var t in e||(e={}))rke.call(e,t)&&fV(n,t,e[t]);if(dV)for(var t of dV(e))ike.call(e,t)&&fV(n,t,e[t]);return n},ske=(n,e)=>tke(n,nke(e)),mV,gV;typeof window<"u"&&((mV=window.document)!=null&&mV.createElement||((gV=window.navigator)==null?void 0:gV.product)==="ReactNative")?O.useLayoutEffect:O.useEffect;function kee(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=kee(r,e,t);if(i)return i;r=r.sibling}}function Oee(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const vV=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=vV;return}return vV.apply(this,arguments)};const B4=Oee(O.createContext(null));class Lee extends O.Component{render(){return O.createElement(B4.Provider,{value:this._reactInternals},this.props.children)}}function oke(){const n=O.useContext(B4);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=O.useId();return O.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=kee(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function ake(){const n=oke(),[e]=O.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==B4&&!e.has(i)&&e.set(i,O.useContext(Oee(i)))}t=t.return}return e}function lke(){const n=ake();return O.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>O.createElement(e,null,O.createElement(t.Provider,ske(pV({},r),{value:n.get(t)}))),e=>O.createElement(Lee,pV({},e))),[n])}const cke=O.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=qDe,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:h,legacy:f,orthographic:p,frameloop:v,dpr:_,performance:S,raycaster:x,camera:E,scene:b,onPointerMissed:M,onCreated:k,...B},P){O.useMemo(()=>CDe(gDe),[]);const N=lke(),[R,I]=YDe({scroll:!0,debounce:{scroll:50,resize:0},...r}),U=O.useRef(null),H=O.useRef(null);O.useImperativeHandle(P,()=>U.current);const W=See(M),[K,te]=O.useState(!1),[se,le]=O.useState(!1);if(K)throw K;if(se)throw se;const X=O.useRef(null);tw(()=>{const oe=U.current;I.width>0&&I.height>0&&oe&&(X.current||(X.current=$De(oe)),X.current.configure({gl:s,events:o,shadows:c,linear:u,flat:h,legacy:f,orthographic:p,frameloop:v,dpr:_,performance:S,raycaster:x,camera:E,scene:b,size:I,onPointerMissed:(...fe)=>W.current==null?void 0:W.current(...fe),onCreated:fe=>{fe.events.connect==null||fe.events.connect(a?IDe(a)?a.current:a:H.current),l&&fe.setEvents({compute:(De,We)=>{const Qe=De[l+"X"],ve=De[l+"Y"];We.pointer.set(Qe/We.size.width*2-1,-(ve/We.size.height)*2+1),We.raycaster.setFromCamera(We.pointer,We.camera)}}),k==null||k(fe)}}),X.current.render(m.jsx(N,{children:m.jsx(Eee,{set:le,children:m.jsx(O.Suspense,{fallback:m.jsx(PDe,{set:te}),children:e??null})})})))}),O.useEffect(()=>{const oe=U.current;if(oe)return()=>Nee(oe)},[]);const ce=a?"none":"auto";return m.jsx("div",{ref:H,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ce,...i},...B,children:m.jsx("div",{ref:R,style:{width:"100%",height:"100%"},children:m.jsx("canvas",{ref:U,style:{display:"block"},children:t})})})}),uke=O.forwardRef(function(e,t){return m.jsx(Lee,{children:m.jsx(cke,{...e,ref:t})})});function a3(){return a3=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},a3.apply(null,arguments)}var hke=Object.defineProperty,dke=(n,e,t)=>e in n?hke(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,fke=(n,e,t)=>(dke(n,e+"",t),t);class pke{constructor(){fke(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var mke=Object.defineProperty,gke=(n,e,t)=>e in n?mke(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,an=(n,e,t)=>(gke(n,typeof e!="symbol"?e+"":e,t),t);const pE=new jm,yV=new Ju,vke=Math.cos(70*(Math.PI/180)),xV=(n,e)=>(n%e+e)%e;let yke=class extends pke{constructor(e,t){super(),an(this,"object"),an(this,"domElement"),an(this,"enabled",!0),an(this,"target",new re),an(this,"minDistance",0),an(this,"maxDistance",1/0),an(this,"minZoom",0),an(this,"maxZoom",1/0),an(this,"minPolarAngle",0),an(this,"maxPolarAngle",Math.PI),an(this,"minAzimuthAngle",-1/0),an(this,"maxAzimuthAngle",1/0),an(this,"enableDamping",!1),an(this,"dampingFactor",.05),an(this,"enableZoom",!0),an(this,"zoomSpeed",1),an(this,"enableRotate",!0),an(this,"rotateSpeed",1),an(this,"enablePan",!0),an(this,"panSpeed",1),an(this,"screenSpacePanning",!0),an(this,"keyPanSpeed",7),an(this,"zoomToCursor",!1),an(this,"autoRotate",!1),an(this,"autoRotateSpeed",2),an(this,"reverseOrbit",!1),an(this,"reverseHorizontalOrbit",!1),an(this,"reverseVerticalOrbit",!1),an(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),an(this,"mouseButtons",{LEFT:Tp.ROTATE,MIDDLE:Tp.DOLLY,RIGHT:Tp.PAN}),an(this,"touches",{ONE:Cp.ROTATE,TWO:Cp.DOLLY_PAN}),an(this,"target0"),an(this,"position0"),an(this,"zoom0"),an(this,"_domElementKeyEvents",null),an(this,"getPolarAngle"),an(this,"getAzimuthalAngle"),an(this,"setPolarAngle"),an(this,"setAzimuthalAngle"),an(this,"getDistance"),an(this,"getZoomScale"),an(this,"listenToKeyEvents"),an(this,"stopListenToKeyEvents"),an(this,"saveState"),an(this,"reset"),an(this,"update"),an(this,"connect"),an(this,"dispose"),an(this,"dollyIn"),an(this,"dollyOut"),an(this,"getScale"),an(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=ue=>{let Te=xV(ue,2*Math.PI),ut=u.phi;ut<0&&(ut+=2*Math.PI),Te<0&&(Te+=2*Math.PI);let he=Math.abs(Te-ut);2*Math.PI-he<he&&(Te<ut?Te+=2*Math.PI:ut+=2*Math.PI),h.phi=Te-ut,r.update()},this.setAzimuthalAngle=ue=>{let Te=xV(ue,2*Math.PI),ut=u.theta;ut<0&&(ut+=2*Math.PI),Te<0&&(Te+=2*Math.PI);let he=Math.abs(Te-ut);2*Math.PI-he<he&&(Te<ut?Te+=2*Math.PI:ut+=2*Math.PI),h.theta=Te-ut,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=ue=>{ue.addEventListener("keydown",Ue),this._domElementKeyEvents=ue},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ue),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const ue=new re,Te=new re(0,1,0),ut=new wo().setFromUnitVectors(e.up,Te),he=ut.clone().invert(),Je=new re,ot=new wo,gt=2*Math.PI;return function(){const Xe=r.object.position;ut.setFromUnitVectors(e.up,Te),he.copy(ut).invert(),ue.copy(Xe).sub(r.target),ue.applyQuaternion(ut),u.setFromVector3(ue),r.autoRotate&&l===a.NONE&&K(H()),r.enableDamping?(u.theta+=h.theta*r.dampingFactor,u.phi+=h.phi*r.dampingFactor):(u.theta+=h.theta,u.phi+=h.phi);let xt=r.minAzimuthAngle,Bt=r.maxAzimuthAngle;isFinite(xt)&&isFinite(Bt)&&(xt<-Math.PI?xt+=gt:xt>Math.PI&&(xt-=gt),Bt<-Math.PI?Bt+=gt:Bt>Math.PI&&(Bt-=gt),xt<=Bt?u.theta=Math.max(xt,Math.min(Bt,u.theta)):u.theta=u.theta>(xt+Bt)/2?Math.max(xt,u.theta):Math.min(Bt,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(p,r.dampingFactor):r.target.add(p),r.zoomToCursor&&R||r.object.isOrthographicCamera?u.radius=We(u.radius):u.radius=We(u.radius*f),ue.setFromSpherical(u),ue.applyQuaternion(he),Xe.copy(r.target).add(ue),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(h.theta*=1-r.dampingFactor,h.phi*=1-r.dampingFactor,p.multiplyScalar(1-r.dampingFactor)):(h.set(0,0,0),p.set(0,0,0));let Cn=!1;if(r.zoomToCursor&&R){let xn=null;if(r.object instanceof Bi&&r.object.isPerspectiveCamera){const $r=ue.length();xn=We($r*f);const Kn=$r-xn;r.object.position.addScaledVector(P,Kn),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const $r=new re(N.x,N.y,0);$r.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix(),Cn=!0;const Kn=new re(N.x,N.y,0);Kn.unproject(r.object),r.object.position.sub(Kn).add($r),r.object.updateMatrixWorld(),xn=ue.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;xn!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(xn).add(r.object.position):(pE.origin.copy(r.object.position),pE.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(pE.direction))<vke?e.lookAt(r.target):(yV.setFromNormalAndCoplanarPoint(r.object.up,r.target),pE.intersectPlane(yV,r.target))))}else r.object instanceof lf&&r.object.isOrthographicCamera&&(Cn=f!==1,Cn&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix()));return f=1,R=!1,Cn||Je.distanceToSquared(r.object.position)>c||8*(1-ot.dot(r.object.quaternion))>c?(r.dispatchEvent(i),Je.copy(r.object.position),ot.copy(r.object.quaternion),Cn=!1,!0):!1}})(),this.connect=ue=>{r.domElement=ue,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",bt),r.domElement.addEventListener("pointerdown",pt),r.domElement.addEventListener("pointercancel",q),r.domElement.addEventListener("wheel",Ve)},this.dispose=()=>{var ue,Te,ut,he,Je,ot;r.domElement&&(r.domElement.style.touchAction="auto"),(ue=r.domElement)==null||ue.removeEventListener("contextmenu",bt),(Te=r.domElement)==null||Te.removeEventListener("pointerdown",pt),(ut=r.domElement)==null||ut.removeEventListener("pointercancel",q),(he=r.domElement)==null||he.removeEventListener("wheel",Ve),(Je=r.domElement)==null||Je.ownerDocument.removeEventListener("pointermove",ee),(ot=r.domElement)==null||ot.ownerDocument.removeEventListener("pointerup",q),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Ue)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new e3,h=new e3;let f=1;const p=new re,v=new Ze,_=new Ze,S=new Ze,x=new Ze,E=new Ze,b=new Ze,M=new Ze,k=new Ze,B=new Ze,P=new re,N=new Ze;let R=!1;const I=[],U={};function H(){return 2*Math.PI/60/60*r.autoRotateSpeed}function W(){return Math.pow(.95,r.zoomSpeed)}function K(ue){r.reverseOrbit||r.reverseHorizontalOrbit?h.theta+=ue:h.theta-=ue}function te(ue){r.reverseOrbit||r.reverseVerticalOrbit?h.phi+=ue:h.phi-=ue}const se=(()=>{const ue=new re;return function(ut,he){ue.setFromMatrixColumn(he,0),ue.multiplyScalar(-ut),p.add(ue)}})(),le=(()=>{const ue=new re;return function(ut,he){r.screenSpacePanning===!0?ue.setFromMatrixColumn(he,1):(ue.setFromMatrixColumn(he,0),ue.crossVectors(r.object.up,ue)),ue.multiplyScalar(ut),p.add(ue)}})(),X=(()=>{const ue=new re;return function(ut,he){const Je=r.domElement;if(Je&&r.object instanceof Bi&&r.object.isPerspectiveCamera){const ot=r.object.position;ue.copy(ot).sub(r.target);let gt=ue.length();gt*=Math.tan(r.object.fov/2*Math.PI/180),se(2*ut*gt/Je.clientHeight,r.object.matrix),le(2*he*gt/Je.clientHeight,r.object.matrix)}else Je&&r.object instanceof lf&&r.object.isOrthographicCamera?(se(ut*(r.object.right-r.object.left)/r.object.zoom/Je.clientWidth,r.object.matrix),le(he*(r.object.top-r.object.bottom)/r.object.zoom/Je.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function ce(ue){r.object instanceof Bi&&r.object.isPerspectiveCamera||r.object instanceof lf&&r.object.isOrthographicCamera?f=ue:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function oe(ue){ce(f/ue)}function fe(ue){ce(f*ue)}function De(ue){if(!r.zoomToCursor||!r.domElement)return;R=!0;const Te=r.domElement.getBoundingClientRect(),ut=ue.clientX-Te.left,he=ue.clientY-Te.top,Je=Te.width,ot=Te.height;N.x=ut/Je*2-1,N.y=-(he/ot)*2+1,P.set(N.x,N.y,1).unproject(r.object).sub(r.object.position).normalize()}function We(ue){return Math.max(r.minDistance,Math.min(r.maxDistance,ue))}function Qe(ue){v.set(ue.clientX,ue.clientY)}function ve(ue){De(ue),M.set(ue.clientX,ue.clientY)}function Ie(ue){x.set(ue.clientX,ue.clientY)}function we(ue){_.set(ue.clientX,ue.clientY),S.subVectors(_,v).multiplyScalar(r.rotateSpeed);const Te=r.domElement;Te&&(K(2*Math.PI*S.x/Te.clientHeight),te(2*Math.PI*S.y/Te.clientHeight)),v.copy(_),r.update()}function tt(ue){k.set(ue.clientX,ue.clientY),B.subVectors(k,M),B.y>0?oe(W()):B.y<0&&fe(W()),M.copy(k),r.update()}function Ke(ue){E.set(ue.clientX,ue.clientY),b.subVectors(E,x).multiplyScalar(r.panSpeed),X(b.x,b.y),x.copy(E),r.update()}function Me(ue){De(ue),ue.deltaY<0?fe(W()):ue.deltaY>0&&oe(W()),r.update()}function Ye(ue){let Te=!1;switch(ue.code){case r.keys.UP:X(0,r.keyPanSpeed),Te=!0;break;case r.keys.BOTTOM:X(0,-r.keyPanSpeed),Te=!0;break;case r.keys.LEFT:X(r.keyPanSpeed,0),Te=!0;break;case r.keys.RIGHT:X(-r.keyPanSpeed,0),Te=!0;break}Te&&(ue.preventDefault(),r.update())}function Pe(){if(I.length==1)v.set(I[0].pageX,I[0].pageY);else{const ue=.5*(I[0].pageX+I[1].pageX),Te=.5*(I[0].pageY+I[1].pageY);v.set(ue,Te)}}function ne(){if(I.length==1)x.set(I[0].pageX,I[0].pageY);else{const ue=.5*(I[0].pageX+I[1].pageX),Te=.5*(I[0].pageY+I[1].pageY);x.set(ue,Te)}}function Be(){const ue=I[0].pageX-I[1].pageX,Te=I[0].pageY-I[1].pageY,ut=Math.sqrt(ue*ue+Te*Te);M.set(0,ut)}function Re(){r.enableZoom&&Be(),r.enablePan&&ne()}function qe(){r.enableZoom&&Be(),r.enableRotate&&Pe()}function ze(ue){if(I.length==1)_.set(ue.pageX,ue.pageY);else{const ut=Wt(ue),he=.5*(ue.pageX+ut.x),Je=.5*(ue.pageY+ut.y);_.set(he,Je)}S.subVectors(_,v).multiplyScalar(r.rotateSpeed);const Te=r.domElement;Te&&(K(2*Math.PI*S.x/Te.clientHeight),te(2*Math.PI*S.y/Te.clientHeight)),v.copy(_)}function J(ue){if(I.length==1)E.set(ue.pageX,ue.pageY);else{const Te=Wt(ue),ut=.5*(ue.pageX+Te.x),he=.5*(ue.pageY+Te.y);E.set(ut,he)}b.subVectors(E,x).multiplyScalar(r.panSpeed),X(b.x,b.y),x.copy(E)}function be(ue){const Te=Wt(ue),ut=ue.pageX-Te.x,he=ue.pageY-Te.y,Je=Math.sqrt(ut*ut+he*he);k.set(0,Je),B.set(0,Math.pow(k.y/M.y,r.zoomSpeed)),oe(B.y),M.copy(k)}function Fe(ue){r.enableZoom&&be(ue),r.enablePan&&J(ue)}function rt(ue){r.enableZoom&&be(ue),r.enableRotate&&ze(ue)}function pt(ue){var Te,ut;r.enabled!==!1&&(I.length===0&&((Te=r.domElement)==null||Te.ownerDocument.addEventListener("pointermove",ee),(ut=r.domElement)==null||ut.ownerDocument.addEventListener("pointerup",q)),wt(ue),ue.pointerType==="touch"?Mt(ue):me(ue))}function ee(ue){r.enabled!==!1&&(ue.pointerType==="touch"?lt(ue):pe(ue))}function q(ue){var Te,ut,he;st(ue),I.length===0&&((Te=r.domElement)==null||Te.releasePointerCapture(ue.pointerId),(ut=r.domElement)==null||ut.ownerDocument.removeEventListener("pointermove",ee),(he=r.domElement)==null||he.ownerDocument.removeEventListener("pointerup",q)),r.dispatchEvent(o),l=a.NONE}function me(ue){let Te;switch(ue.button){case 0:Te=r.mouseButtons.LEFT;break;case 1:Te=r.mouseButtons.MIDDLE;break;case 2:Te=r.mouseButtons.RIGHT;break;default:Te=-1}switch(Te){case Tp.DOLLY:if(r.enableZoom===!1)return;ve(ue),l=a.DOLLY;break;case Tp.ROTATE:if(ue.ctrlKey||ue.metaKey||ue.shiftKey){if(r.enablePan===!1)return;Ie(ue),l=a.PAN}else{if(r.enableRotate===!1)return;Qe(ue),l=a.ROTATE}break;case Tp.PAN:if(ue.ctrlKey||ue.metaKey||ue.shiftKey){if(r.enableRotate===!1)return;Qe(ue),l=a.ROTATE}else{if(r.enablePan===!1)return;Ie(ue),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function pe(ue){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;we(ue);break;case a.DOLLY:if(r.enableZoom===!1)return;tt(ue);break;case a.PAN:if(r.enablePan===!1)return;Ke(ue);break}}function Ve(ue){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(ue.preventDefault(),r.dispatchEvent(s),Me(ue),r.dispatchEvent(o))}function Ue(ue){r.enabled===!1||r.enablePan===!1||Ye(ue)}function Mt(ue){switch(mt(ue),I.length){case 1:switch(r.touches.ONE){case Cp.ROTATE:if(r.enableRotate===!1)return;Pe(),l=a.TOUCH_ROTATE;break;case Cp.PAN:if(r.enablePan===!1)return;ne(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Cp.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Re(),l=a.TOUCH_DOLLY_PAN;break;case Cp.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;qe(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function lt(ue){switch(mt(ue),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;ze(ue),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;J(ue),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Fe(ue),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;rt(ue),r.update();break;default:l=a.NONE}}function bt(ue){r.enabled!==!1&&ue.preventDefault()}function wt(ue){I.push(ue)}function st(ue){delete U[ue.pointerId];for(let Te=0;Te<I.length;Te++)if(I[Te].pointerId==ue.pointerId){I.splice(Te,1);return}}function mt(ue){let Te=U[ue.pointerId];Te===void 0&&(Te=new Ze,U[ue.pointerId]=Te),Te.set(ue.pageX,ue.pageY)}function Wt(ue){const Te=ue.pointerId===I[0].pointerId?I[1]:I[0];return U[Te.pointerId]}this.dollyIn=(ue=W())=>{fe(ue),r.update()},this.dollyOut=(ue=W())=>{oe(ue),r.update()},this.getScale=()=>f,this.setScale=ue=>{ce(ue),r.update()},this.getZoomScale=()=>W(),t!==void 0&&this.connect(t),this.update()}};const hP=n=>n===Object(n)&&!Array.isArray(n)&&typeof n!="function";function U4(n,e){const t=Ku(s=>s.gl),r=nw(cC,hP(n)?Object.values(n):n);return O.useLayoutEffect(()=>{e==null||e(r)},[e]),O.useEffect(()=>{if("initTexture"in t){let s=[];Array.isArray(r)?s=r:r instanceof ai?s=[r]:hP(r)&&(s=Object.values(r)),s.forEach(o=>{o instanceof ai&&t.initTexture(o)})}},[t,r]),O.useMemo(()=>{if(hP(n)){const s={};let o=0;for(const a in n)s[a]=r[o++];return s}else return r},[n,r])}U4.preload=n=>nw.preload(cC,n);U4.clear=n=>nw.clear(cC,n);const xke=O.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const h=Ku(B=>B.invalidate),f=Ku(B=>B.camera),p=Ku(B=>B.gl),v=Ku(B=>B.events),_=Ku(B=>B.setEvents),S=Ku(B=>B.set),x=Ku(B=>B.get),E=Ku(B=>B.performance),b=e||f,M=r||v.connected||p.domElement,k=O.useMemo(()=>new yke(b),[b]);return HDe(()=>{k.enabled&&k.update()},-1),O.useEffect(()=>(s&&k.connect(s===!0?M:s),k.connect(M),()=>void k.dispose()),[s,M,t,k,h]),O.useEffect(()=>{const B=R=>{h(),t&&E.regress(),o&&o(R)},P=R=>{a&&a(R)},N=R=>{l&&l(R)};return k.addEventListener("change",B),k.addEventListener("start",P),k.addEventListener("end",N),()=>{k.removeEventListener("start",P),k.removeEventListener("end",N),k.removeEventListener("change",B)}},[o,a,l,k,h,_]),O.useEffect(()=>{if(n){const B=x().controls;return S({controls:k}),()=>S({controls:B})}},[n,k]),O.createElement("primitive",a3({ref:u,object:k,enableDamping:i},c))});function _ke({frontUrl:n,backUrl:e}){const t=U4([n,e]);return m.jsxs("group",{children:[m.jsxs("mesh",{children:[m.jsx("boxGeometry",{args:[3.4,2.2,.06]}),m.jsx("meshStandardMaterial",{attach:"material-0",color:"#e5e7eb"}),m.jsx("meshStandardMaterial",{attach:"material-1",color:"#e5e7eb"}),m.jsx("meshStandardMaterial",{attach:"material-2",color:"#e5e7eb"}),m.jsx("meshStandardMaterial",{attach:"material-3",color:"#e5e7eb"}),m.jsx("meshStandardMaterial",{attach:"material-4",map:t[0]}),m.jsx("meshStandardMaterial",{attach:"material-5",map:t[1]})]}),m.jsxs("mesh",{position:[0,0,.031],children:[" ",m.jsx("planeGeometry",{args:[3.4,2.2]}),m.jsx("meshBasicMaterial",{map:t[0],transparent:!0})]}),m.jsxs("mesh",{position:[0,0,-.031],rotation:[0,Math.PI,0],children:[" ",m.jsx("planeGeometry",{args:[3.4,2.2]}),m.jsx("meshBasicMaterial",{map:t[1],transparent:!0})]})]})}function wke({frontUrl:n,backUrl:e}){return m.jsx(O.Suspense,{fallback:null,children:m.jsx(_ke,{frontUrl:n,backUrl:e})})}function Ske(){const[n,e]=O.useState({frontUrl:"",backUrl:"",fullName:""}),[,t]=R_(),[r,i]=O.useState(!1);O.useEffect(()=>{const o=new URLSearchParams(window.location.search);return e({frontUrl:o.get("frontUrl")||"",backUrl:o.get("backUrl")||"",fullName:o.get("fullName")||""}),document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[]);const s=async()=>{i(!0);try{if(n.frontUrl){const a=await(await fetch(n.frontUrl)).blob(),l=window.URL.createObjectURL(a),c=document.createElement("a");c.href=l,c.download=`kartu-anggota-${n.fullName||"depan"}.png`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}if(n.backUrl){const a=await(await fetch(n.backUrl)).blob(),l=window.URL.createObjectURL(a),c=document.createElement("a");c.href=l,c.download=`kartu-anggota-${n.fullName||"belakang"}-belakang.png`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}}catch{alert("Gagal mengunduh kartu. Silakan coba lagi.")}i(!1)};return!n.frontUrl||!n.backUrl?m.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"URL kartu tidak valid."}):m.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:[m.jsxs("div",{className:"sticky top-0 flex flex-col sm:flex-row items-center justify-between gap-2 p-3 sm:p-4 bg-black/70 z-10 w-full",children:[m.jsxs("span",{className:"text-white font-bold text-base sm:text-lg text-center w-full sm:w-auto truncate",children:["3D Kartu Anggota: ",n.fullName]}),m.jsxs("div",{className:"flex gap-2 w-full sm:w-auto justify-center sm:justify-end",children:[m.jsxs(zt,{className:"bg-primary text-white w-full sm:w-auto",onClick:s,disabled:r,children:[m.jsx(bk,{className:"w-4 h-4 mr-2"}),r?"Mengunduh...":"Unduh Kartu Anggota Untuk Print"]}),m.jsx("button",{className:"text-white bg-gray-800 hover:bg-gray-700 rounded px-4 py-2 w-full sm:w-auto",onClick:()=>t("/kartu-anggota"),children:"Tutup"})]})]}),m.jsx("div",{className:"flex-1 min-h-0",children:m.jsx("div",{className:"w-full h-[60vh] sm:h-full",children:m.jsxs(uke,{camera:{position:[0,0,6],fov:50},style:{width:"100vw",height:"100%",minHeight:320,maxHeight:"100vh",background:"black"},children:[m.jsx("ambientLight",{intensity:.7}),m.jsx("directionalLight",{position:[5,5,5],intensity:.7}),m.jsx(wke,{frontUrl:n.frontUrl,backUrl:n.backUrl}),m.jsx(xke,{enablePan:!1})]})})})]})}function Eke(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function bke(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var Ake=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Tke=function(n){Ake(e,n);function e(t,r){var i=this.constructor,s=n.call(this,t,r)||this;return Object.defineProperty(s,"name",{value:i.name,enumerable:!1,configurable:!0}),Eke(s,i.prototype),bke(s),s}return e}(Error),Cke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ia=function(n){Cke(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(Tke),Mke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Oi=function(n){Mke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Ia),Ike=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rn=function(n){Ike(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Ia),Fee=function(){function n(e){if(this.binarizer=e,e===null)throw new rn("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var s=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(s))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),Pke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xi=function(n){Pke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Ia),Rke=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),Wr=function(){function n(){}return n.arraycopy=function(e,t,r,i,s){for(;s--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),Nke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),j4=function(n){Nke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Ia),Dke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_V=function(n){Dke(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(j4),kke=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ls=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var s=t;s<r;s++)e[s]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new rn("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new _V(t);if(r>e)throw new _V(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(s){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(s){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var s=kke(e),o=s.next();!o.done;o=s.next()){var a=o.value;i=31*i+a}}catch(l){t={error:l}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,s=new Int32Array(i);return Wr.arraycopy(e,t,s,0,i),s},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,s=e.length-1;i<=s;){var o=s+i>>1,a=r(t,e[o]);if(a>0)i=o+1;else if(a<0)s=o-1;else return o}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),Hn=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),As=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);Wr.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),s=r[i];s&=~((1<<(e&31))-1);for(var o=r.length;s===0;){if(++i===o)return t;s=r[i]}var a=i*32+Hn.numberOfTrailingZeros(s);return a>t?t:a},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),s=~r[i];s&=~((1<<(e&31))-1);for(var o=r.length;s===0;){if(++i===o)return t;s=~r[i]}var a=i*32+Hn.numberOfTrailingZeros(s);return a>t?t:a},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new rn;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),s=this.bits,o=r;o<=i;o++){var a=o>r?0:e&31,l=o<i?31:t&31,c=(2<<l)-(1<<a);s[o]|=c}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new rn;if(t===e)return!0;t--;for(var i=Math.floor(e/32),s=Math.floor(t/32),o=this.bits,a=i;a<=s;a++){var l=a>i?0:e&31,c=a<s?31:t&31,u=(2<<c)-(1<<l)&4294967295;if((o[a]&u)!==(r?u:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new rn("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new rn("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var s=0;s<i;s++){for(var o=0,a=0;a<8;a++)this.get(e)&&(o|=1<<7-a),e++;t[r+s]=o}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,s=0;s<r;s++){var o=i[s];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-s]=o}if(this.size!==r*32){for(var a=r*32-this.size,l=e[0]>>>a,s=1;s<r;s++){var c=e[s];l|=c<<32-a,e[s-1]=l,l=c>>>a}e[r-1]=l}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&ls.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+ls.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)t&7||(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),l3;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(l3||(l3={}));const Gr=l3;var Oke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vt=function(n){Oke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Ia),Lke=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Er;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(Er||(Er={}));var as=function(){function n(e,t,r){for(var i,s,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var l=this.values,c=0,u=l.length;c!==u;c++){var h=l[c];n.VALUES_TO_ECI.set(h,this)}try{for(var f=Lke(o),p=f.next();!p.done;p=f.next()){var v=p.value;n.NAME_TO_ECI.set(v,this)}}catch(_){i={error:_}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new vt("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new vt("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new vt("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(Er.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(Er.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(Er.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(Er.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(Er.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(Er.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(Er.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(Er.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(Er.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(Er.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(Er.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(Er.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(Er.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(Er.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(Er.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(Er.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(Er.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(Er.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(Er.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(Er.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(Er.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(Er.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(Er.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(Er.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(Er.Big5,28,"Big5"),n.GB18030=new n(Er.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(Er.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),Fke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sb=function(n){Fke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Ia),Cl=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof as?e:as.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",s=0,o=e.length;s<o;s++){var a=e[s].toString(16);a.length<2&&(a="0"+a),i+="%"+a}return decodeURIComponent(i)}if(r.equals(as.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new sb("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(as.UTF8)||e.equals(as.ISO8859_1)||e.equals(as.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],s=0;s<r.length;s++)i.push(r[s].charCodeAt(0));return new Uint8Array(i)},n}(),tr=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return Cl.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(Gr.CHARACTER_SET)!==void 0)return t.get(Gr.CHARACTER_SET).toString();for(var r=e.length,i=!0,s=!0,o=!0,a=0,l=0,c=0,u=0,h=0,f=0,p=0,v=0,_=0,S=0,x=0,E=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,b=0;b<r&&(i||s||o);b++){var M=e[b]&255;o&&(a>0?M&128?a--:o=!1:M&128&&(M&64?(a++,M&32?(a++,M&16?(a++,M&8?o=!1:u++):c++):l++):o=!1)),i&&(M>127&&M<160?i=!1:M>159&&(M<192||M===215||M===247)&&x++),s&&(h>0?M<64||M===127||M>252?s=!1:h--:M===128||M===160||M>239?s=!1:M>160&&M<224?(f++,v=0,p++,p>_&&(_=p)):M>127?(h++,p=0,v++,v>S&&(S=v)):(p=0,v=0))}return o&&a>0&&(o=!1),s&&h>0&&(s=!1),o&&(E||l+c+u>0)?n.UTF8:s&&(n.ASSUME_SHIFT_JIS||_>=3||S>=3)?n.SHIFT_JIS:i&&s?_===2&&f===2||x*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:s?n.SHIFT_JIS:o?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function s(a,l,c,u,h,f){if(a==="%%")return"%";if(t[++i]!==void 0){a=u?parseInt(u.substr(1)):void 0;var p=h?parseInt(h.substr(1)):void 0,v;switch(f){case"s":v=t[i];break;case"c":v=t[i][0];break;case"f":v=parseFloat(t[i]).toFixed(a);break;case"p":v=parseFloat(t[i]).toPrecision(a);break;case"e":v=parseFloat(t[i]).toExponential(a);break;case"x":v=parseInt(t[i]).toString(p||16);break;case"d":v=parseFloat(parseInt(t[i],p||10).toPrecision(a)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(p);for(var _=parseInt(c),S=c&&c[0]+""=="0"?"0":" ";v.length<_;)v=l!==void 0?v+S:S+v;return v}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,s)},n.getBytes=function(e,t){return Cl.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=as.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=as.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=as.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),Un=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=tr.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),wu=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new rn("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),s=0;s<t;s++)for(var o=e[s],a=0;a<r;a++)o[a]&&i.set(a,s);return i},n.parseFromString=function(e,t,r){if(e===null)throw new rn("stringRepresentation cannot be null");for(var i=new Array(e.length),s=0,o=0,a=-1,l=0,c=0;c<e.length;)if(e.charAt(c)===`
`||e.charAt(c)==="\r"){if(s>o){if(a===-1)a=s-o;else if(s-o!==a)throw new rn("row lengths do not match");o=s,l++}c++}else if(e.substring(c,c+t.length)===t)c+=t.length,i[s]=!0,s++;else if(e.substring(c,c+r.length)===r)c+=r.length,i[s]=!1,s++;else throw new rn("illegal character encountered: "+e.substring(c));if(s>o){if(a===-1)a=s-o;else if(s-o!==a)throw new rn("row lengths do not match");l++}for(var u=new n(a,l),h=0;h<s;h++)i[h]&&u.set(Math.floor(h%a),Math.floor(h/a));return u},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new rn("input matrix dimensions do not match");for(var t=new As(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,s=0,o=this.height;s<o;s++)for(var a=s*r,l=e.getRow(s,t).getBitArray(),c=0;c<r;c++)i[a+c]^=l[c]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new rn("Left and top must be nonnegative");if(i<1||r<1)throw new rn("Height and width must be at least 1");var s=e+r,o=t+i;if(o>this.height||s>this.width)throw new rn("The region must fit inside the matrix");for(var a=this.rowSize,l=this.bits,c=t;c<o;c++)for(var u=c*a,h=e;h<s;h++)l[u+Math.floor(h/32)]|=1<<(h&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new As(this.width):t.clear();for(var r=this.rowSize,i=this.bits,s=e*r,o=0;o<r;o++)t.setBulk(o*32,i[s+o]);return t},n.prototype.setRow=function(e,t){Wr.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new As(e),i=new As(e),s=0,o=Math.floor((t+1)/2);s<o;s++)r=this.getRow(s,r),i=this.getRow(t-1-s,i),r.reverse(),i.reverse(),this.setRow(s,i),this.setRow(t-1-s,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,s=e,o=t,a=-1,l=-1,c=0;c<t;c++)for(var u=0;u<r;u++){var h=i[c*r+u];if(h!==0){if(c<o&&(o=c),c>l&&(l=c),u*32<s){for(var f=0;!(h<<31-f&4294967295);)f++;u*32+f<s&&(s=u*32+f)}if(u*32+31>a){for(var f=31;!(h>>>f);)f--;u*32+f>a&&(a=u*32+f)}}}return a<s||l<o?null:Int32Array.from([s,o,a-s+1,l-o+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,s=r%e*32,o=t[r],a=0;!(o<<31-a&4294967295);)a++;return s+=a,Int32Array.from([s,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),s=Math.floor(r%e)*32,o=t[r],a=31;!(o>>>a);)a--;return s+=a,Int32Array.from([s,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&ls.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ls.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new Un,s=0,o=this.height;s<o;s++){for(var a=0,l=this.width;a<l;a++)i.append(this.get(a,s)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),Bke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$e=function(n){Bke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Ia),Uke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jke=function(n){Uke(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),s=i.getWidth();r==null||r.getSize()<s?r=new As(s):r.clear(),this.initArrays(s);for(var o=i.getRow(t,this.luminances),a=this.buckets,l=0;l<s;l++)a[(o[l]&255)>>e.LUMINANCE_SHIFT]++;var c=e.estimateBlackPoint(a);if(s<3)for(var l=0;l<s;l++)(o[l]&255)<c&&r.set(l);else for(var u=o[0]&255,h=o[1]&255,l=1;l<s-1;l++){var f=o[l+1]&255;(h*4-u-f)/2<c&&r.set(l),u=h,h=f}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),s=new wu(r,i);this.initArrays(r);for(var o=this.buckets,a=1;a<5;a++)for(var l=Math.floor(i*a/5),c=t.getRow(l,this.luminances),u=Math.floor(r*4/5),h=Math.floor(r/5);h<u;h++){var f=c[h]&255;o[f>>e.LUMINANCE_SHIFT]++}for(var p=e.estimateBlackPoint(o),v=t.getMatrix(),a=0;a<i;a++)for(var _=a*r,h=0;h<r;h++){var f=v[_+h]&255;f<p&&s.set(h,a)}return s},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,s=0,o=0,a=0;a<r;a++)t[a]>o&&(s=a,o=t[a]),t[a]>i&&(i=t[a]);for(var l=0,c=0,a=0;a<r;a++){var u=a-s,h=t[a]*u*u;h>c&&(l=a,c=h)}if(s>l){var f=s;s=l,l=f}if(l-s<=r/16)throw new $e;for(var p=l-1,v=-1,a=l-1;a>s;a--){var _=a-s,h=_*_*(l-a)*(i-t[a]);h>v&&(p=a,v=h)}return p<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(Rke),Vke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bee=function(n){Vke(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var s=t.getMatrix(),o=r>>e.BLOCK_SIZE_POWER;r&e.BLOCK_SIZE_MASK&&o++;var a=i>>e.BLOCK_SIZE_POWER;i&e.BLOCK_SIZE_MASK&&a++;var l=e.calculateBlackPoints(s,o,a,r,i),c=new wu(r,i);e.calculateThresholdForBlock(s,o,a,r,i,l,c),this.matrix=c}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,s,o,a,l){for(var c=o-e.BLOCK_SIZE,u=s-e.BLOCK_SIZE,h=0;h<i;h++){var f=h<<e.BLOCK_SIZE_POWER;f>c&&(f=c);for(var p=e.cap(h,2,i-3),v=0;v<r;v++){var _=v<<e.BLOCK_SIZE_POWER;_>u&&(_=u);for(var S=e.cap(v,2,r-3),x=0,E=-2;E<=2;E++){var b=a[p+E];x+=b[S-2]+b[S-1]+b[S]+b[S+1]+b[S+2]}var M=x/25;e.thresholdBlock(t,_,f,M,s,l)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,s,o,a){for(var l=0,c=i*o+r;l<e.BLOCK_SIZE;l++,c+=o)for(var u=0;u<e.BLOCK_SIZE;u++)(t[c+u]&255)<=s&&a.set(r+u,i+l)},e.calculateBlackPoints=function(t,r,i,s,o){for(var a=o-e.BLOCK_SIZE,l=s-e.BLOCK_SIZE,c=new Array(i),u=0;u<i;u++){c[u]=new Int32Array(r);var h=u<<e.BLOCK_SIZE_POWER;h>a&&(h=a);for(var f=0;f<r;f++){var p=f<<e.BLOCK_SIZE_POWER;p>l&&(p=l);for(var v=0,_=255,S=0,x=0,E=h*s+p;x<e.BLOCK_SIZE;x++,E+=s){for(var b=0;b<e.BLOCK_SIZE;b++){var M=t[E+b]&255;v+=M,M<_&&(_=M),M>S&&(S=M)}if(S-_>e.MIN_DYNAMIC_RANGE)for(x++,E+=s;x<e.BLOCK_SIZE;x++,E+=s)for(var b=0;b<e.BLOCK_SIZE;b++)v+=t[E+b]&255}var k=v>>e.BLOCK_SIZE_POWER*2;if(S-_<=e.MIN_DYNAMIC_RANGE&&(k=_/2,u>0&&f>0)){var B=(c[u-1][f]+2*c[u][f-1]+c[u-1][f-1])/4;_<B&&(k=B)}c[u][f]=k}}return c},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(jke),rw=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new sb("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new sb("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new sb("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Un,r=0;r<this.height;r++){for(var i=this.getRow(r,e),s=0;s<this.width;s++){var o=i[s]&255,a=void 0;o<64?a="#":o<128?a="+":o<192?a=".":a=" ",t.append(a)}t.append(`
`)}return t.toString()},n}(),zke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dC=function(n){zke(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),s=this.getWidth(),o=0;o<s;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),s=0;s<r;s++)i[s]=255-(t[s]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,s){return new e(this.delegate.crop(t,r,i,s))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(rw),Hke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wke=function(n){Hke(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,s){s===void 0&&(s=!1);var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!s)for(var a=0,l=0,c=t.length;a<c;a+=4,l++){var u=void 0,h=t[a+3];if(h===0)u=255;else{var f=t[a],p=t[a+1],v=t[a+2];u=306*f+601*p+117*v+512>>10}o[l]=u}else for(var a=0,l=0,_=t.length;a<_;a+=4,l++){var u=void 0,h=t[a+3];if(h===0)u=255;else{var f=t[a],p=t[a+1],v=t[a+2];u=306*f+601*p+117*v+512>>10}o[l]=255-u}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new rn("Requested row is outside the image: "+t);var i=this.getWidth(),s=t*i;return r===null?r=this.buffer.slice(s,s+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(s,s+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,s){return n.prototype.crop.call(this,t,r,i,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),s=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,a=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(s))*o+Math.abs(Math.sin(s))*a),c=Math.ceil(Math.abs(Math.sin(s))*o+Math.abs(Math.cos(s))*a);return r.width=l,r.height=c,i.translate(l/2,c/2),i.rotate(s),i.drawImage(this.canvas,o/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new dC(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(rw),Gke=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),Bo=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},Uo=function(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},$ke=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sy=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Bo(this,void 0,void 0,function(){var e,t,r,i,s,o,a,l,c,u,h,f;return Uo(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),t=[];try{for(r=$ke(e),i=r.next();!i.done;i=r.next())s=i.value,o=s.kind==="video"?"videoinput":s.kind,o==="videoinput"&&(a=s.deviceId||s.id,l=s.label||"Video device "+(t.length+1),c=s.groupId,u={deviceId:a,label:l,kind:o,groupId:c},t.push(u))}catch(v){h={error:v}}finally{try{i&&!i.done&&(f=r.return)&&f.call(r)}finally{if(h)throw h.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Bo(this,void 0,void 0,function(){var e;return Uo(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new Gke(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Bo(this,void 0,void 0,function(){var t;return Uo(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Bo(this,void 0,void 0,function(){return Uo(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Bo(this,void 0,void 0,function(){var r,i;return Uo(this,function(s){switch(s.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,s.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Bo(this,void 0,void 0,function(){var r;return Uo(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Bo(this,void 0,void 0,function(){var r,i;return Uo(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=s.sent(),[4,this.decodeOnce(r)];case 2:return i=s.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Bo(this,void 0,void 0,function(){return Uo(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Bo(this,void 0,void 0,function(){var i,s;return Uo(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},s={video:i},[4,this.decodeFromConstraints(s,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Bo(this,void 0,void 0,function(){var i;return Uo(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=s.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,s.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Bo(this,void 0,void 0,function(){var i;return Uo(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=s.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,s.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Bo(this,void 0,void 0,function(){var r;return Uo(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Bo(this,void 0,void 0,function(){return Uo(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new Oi("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new Oi("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new Oi("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new Oi("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new Oi("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new Oi("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Oi("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new Oi("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Oi("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new Oi("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Bo(this,void 0,void 0,function(){return Uo(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Bo(this,void 0,void 0,function(){return Uo(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var s=function(o,a){if(i._stopAsyncDecode){a(new $e("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var l=i.decode(e);o(l)}catch(f){var c=t&&f instanceof $e,u=f instanceof Xi||f instanceof vt,h=u&&r;if(c||h)return setTimeout(s,i._timeBetweenDecodingAttempts,o,a);a(f)}};return new Promise(function(o,a){return s(o,a)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var s=r.decode(e);t(s,null),setTimeout(i,r.timeBetweenScansMillis)}catch(l){t(null,l);var o=l instanceof Xi||l instanceof vt,a=l instanceof $e;(o||a)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new Wke(r,t),s=new Bee(i);return new Fee(s)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}(),To=function(){function n(e,t,r,i,s,o){r===void 0&&(r=t==null?0:8*t.length),o===void 0&&(o=Wr.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=s,this.timestamp=o,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=s,this.resultMetadata=null,o==null?this.timestamp=Wr.currentTimeMillis():this.timestamp=o}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);Wr.arraycopy(t,0,r,0,t.length),Wr.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),c3;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(c3||(c3={}));const nn=c3;var u3;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(u3||(u3={}));const js=u3;var fC=function(){function n(e,t,r,i,s,o){s===void 0&&(s=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),_1=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new rn;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),cf=function(){function n(e,t){if(t.length===0)throw new rn;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Wr.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,s=t.length;i!==s;i++){var o=t[i];r=_1.addOrSubtract(r,o)}return r}r=t[0];for(var a=t.length,l=this.field,i=1;i<a;i++)r=_1.addOrSubtract(l.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new rn("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var s=new Int32Array(r.length),o=r.length-t.length;Wr.arraycopy(r,0,s,0,o);for(var a=o;a<r.length;a++)s[a]=_1.addOrSubtract(t[a-o],r[a]);return new n(this.field,s)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new rn("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,s=i.length,o=new Int32Array(r+s-1),a=this.field,l=0;l<r;l++)for(var c=t[l],u=0;u<s;u++)o[l+u]=_1.addOrSubtract(o[l+u],a.multiply(c,i[u]));return new n(a,o)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),s=this.coefficients,o=0;o<t;o++)i[o]=r.multiply(s[o],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new rn;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,s=new Int32Array(i+e),o=this.field,a=0;a<i;a++)s[a]=o.multiply(r[a],t);return new n(o,s)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new rn("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new rn("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,s=e.getCoefficient(e.getDegree()),o=t.inverse(s);i.getDegree()>=e.getDegree()&&!i.isZero();){var a=i.getDegree()-e.getDegree(),l=t.multiply(i.getCoefficient(i.getDegree()),o),c=e.multiplyByMonomial(a,l),u=t.buildMonomial(a,l);r=r.addOrSubtract(u),i=i.addOrSubtract(c)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),Xke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Uee=function(n){Xke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Ia),qke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_a=function(n){qke(e,n);function e(t,r,i){var s=n.call(this)||this;s.primitive=t,s.size=r,s.generatorBase=i;for(var o=new Int32Array(r),a=1,l=0;l<r;l++)o[l]=a,a*=2,a>=r&&(a^=t,a&=r-1);s.expTable=o;for(var c=new Int32Array(r),l=0;l<r-1;l++)c[o[l]]=l;return s.logTable=c,s.zero=new cf(s,Int32Array.from([0])),s.one=new cf(s,Int32Array.from([1])),s}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new rn;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new cf(this,i)},e.prototype.inverse=function(t){if(t===0)throw new Uee;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Hn.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(_1),Yke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mE=function(n){Yke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Ia),Kke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),iw=function(n){Kke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Ia),pC=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new cf(r,e),s=new Int32Array(t),o=!0,a=0;a<t;a++){var l=i.evaluateAt(r.exp(a+r.getGeneratorBase()));s[s.length-1-a]=l,l!==0&&(o=!1)}if(!o)for(var c=new cf(r,s),u=this.runEuclideanAlgorithm(r.buildMonomial(t,1),c,t),h=u[0],f=u[1],p=this.findErrorLocations(h),v=this.findErrorMagnitudes(f,p),a=0;a<p.length;a++){var _=e.length-1-r.log(p[a]);if(_<0)throw new mE("Bad error location");e[_]=_a.addOrSubtract(e[_],v[a])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var s=this.field,o=e,a=t,l=s.getZero(),c=s.getOne();a.getDegree()>=(r/2|0);){var u=o,h=l;if(o=a,l=c,o.isZero())throw new mE("r_{i-1} was zero");a=u;for(var f=s.getZero(),p=o.getCoefficient(o.getDegree()),v=s.inverse(p);a.getDegree()>=o.getDegree()&&!a.isZero();){var _=a.getDegree()-o.getDegree(),S=s.multiply(a.getCoefficient(a.getDegree()),v);f=f.addOrSubtract(s.buildMonomial(_,S)),a=a.addOrSubtract(o.multiplyByMonomial(_,S))}if(c=f.multiply(l).addOrSubtract(h),a.getDegree()>=o.getDegree())throw new iw("Division algorithm failed to reduce polynomial?")}var x=c.getCoefficient(0);if(x===0)throw new mE("sigmaTilde(0) was zero");var E=s.inverse(x),b=c.multiplyScalar(E),M=a.multiplyScalar(E);return[b,M]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,s=this.field,o=1;o<s.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=s.inverse(o),i++);if(i!==t)throw new mE("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),s=this.field,o=0;o<r;o++){for(var a=s.inverse(t[o]),l=1,c=0;c<r;c++)if(o!==c){var u=s.multiply(t[c],a),h=u&1?u&-2:u|1;l=s.multiply(l,h)}i[o]=s.multiply(e.evaluateAt(a),s.inverse(l)),s.getGeneratorBase()!==0&&(i[o]=s.multiply(i[o],a))}return i},n}(),Ds;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(Ds||(Ds={}));var wV=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),s=n.convertBoolArrayToByteArray(i),o=n.getEncodedData(i),a=new fC(s,o,null,null);return a.setNumBits(i.length),a},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=Ds.UPPER,i=Ds.UPPER,s="",o=0;o<t;)if(i===Ds.BINARY){if(t-o<5)break;var a=n.readCode(e,o,5);if(o+=5,a===0){if(t-o<11)break;a=n.readCode(e,o,11)+31,o+=11}for(var l=0;l<a;l++){if(t-o<8){o=t;break}var c=n.readCode(e,o,8);s+=tr.castAsNonUtf8Char(c),o+=8}i=r}else{var u=i===Ds.DIGIT?4:5;if(t-o<u)break;var c=n.readCode(e,o,u);o+=u;var h=n.getCharacter(i,c);h.startsWith("CTRL_")?(r=i,i=n.getTable(h.charAt(5)),h.charAt(6)==="L"&&(r=i)):(s+=h,i=r)}return s},n.getTable=function(e){switch(e){case"L":return Ds.LOWER;case"P":return Ds.PUNCT;case"M":return Ds.MIXED;case"D":return Ds.DIGIT;case"B":return Ds.BINARY;case"U":default:return Ds.UPPER}},n.getCharacter=function(e,t){switch(e){case Ds.UPPER:return n.UPPER_TABLE[t];case Ds.LOWER:return n.LOWER_TABLE[t];case Ds.MIXED:return n.MIXED_TABLE[t];case Ds.PUNCT:return n.PUNCT_TABLE[t];case Ds.DIGIT:return n.DIGIT_TABLE[t];default:throw new iw("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=_a.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=_a.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=_a.AZTEC_DATA_10):(r=12,t=_a.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),s=e.length/r;if(s<i)throw new vt;for(var o=e.length%r,a=new Int32Array(s),l=0;l<s;l++,o+=r)a[l]=n.readCode(e,o,r);try{var c=new pC(t);c.decode(a,s-i)}catch(S){throw new vt(S)}for(var u=(1<<r)-1,h=0,l=0;l<i;l++){var f=a[l];if(f===0||f===u)throw new vt;(f===1||f===u-1)&&h++}for(var p=new Array(i*r-h),v=0,l=0;l<i;l++){var f=a[l];if(f===1||f===u-1)p.fill(f>1,v,v+r-1),v+=r-1;else for(var _=r-1;_>=0;--_)p[v++]=(f&1<<_)!==0}return p},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,s=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,t));if(t)for(var a=0;a<s.length;a++)s[a]=a;else for(var l=i+1+2*Hn.truncDivision(Hn.truncDivision(i,2)-1,15),c=i/2,u=Hn.truncDivision(l,2),a=0;a<c;a++){var h=a+Hn.truncDivision(a,15);s[c-a-1]=u-h-1,s[c+a]=u+h+1}for(var a=0,f=0;a<r;a++){for(var p=(r-a)*4+(t?9:12),v=a*2,_=i-1-v,S=0;S<p;S++)for(var x=S*2,E=0;E<2;E++)o[f+x+E]=e.get(s[v+E],s[v+S]),o[f+2*p+x+E]=e.get(s[v+S],s[_-E]),o[f+4*p+x+E]=e.get(s[_-E],s[_-S]),o[f+6*p+x+E]=e.get(s[_-S],s[v+E]);f+=p*8}return o},n.readCode=function(e,t,r){for(var i=0,s=t;s<t+r;s++)i<<=1,e[s]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),hr=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var s=e-r,o=t-i;return Math.sqrt(s*s+o*o)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var s=e[r];t+=s}return t},n}(),h3=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Yt=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*h3.floatToIntBits(this.x)+h3.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),s,o,a;if(r>=t&&r>=i?(o=e[0],s=e[1],a=e[2]):i>=r&&i>=t?(o=e[1],s=e[0],a=e[2]):(o=e[2],s=e[0],a=e[1]),this.crossProductZ(s,o,a)<0){var l=s;s=a,a=l}e[0]=s,e[1]=o,e[2]=a},n.distance=function(e,t){return hr.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,s=t.y;return(r.x-i)*(e.y-s)-(r.y-s)*(e.x-i)},n}(),V4=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),Zke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qke=function(n){Zke(e,n);function e(t,r,i,s,o){var a=n.call(this,t,r)||this;return a.compact=i,a.nbDatablocks=s,a.nbLayers=o,a}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(V4),d3=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var s=t/2|0;if(this.leftInit=r-s,this.rightInit=r+s,this.upInit=i-s,this.downInit=i+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new $e}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,s=!1,o=!0,a=!1,l=!1,c=!1,u=!1,h=!1,f=this.width,p=this.height;o;){o=!1;for(var v=!0;(v||!l)&&t<f;)v=this.containsBlackPoint(r,i,t,!1),v?(t++,o=!0,l=!0):l||t++;if(t>=f){s=!0;break}for(var _=!0;(_||!c)&&i<p;)_=this.containsBlackPoint(e,t,i,!0),_?(i++,o=!0,c=!0):c||i++;if(i>=p){s=!0;break}for(var S=!0;(S||!u)&&e>=0;)S=this.containsBlackPoint(r,i,e,!1),S?(e--,o=!0,u=!0):u||e--;if(e<0){s=!0;break}for(var x=!0;(x||!h)&&r>=0;)x=this.containsBlackPoint(e,t,r,!0),x?(r--,o=!0,h=!0):h||r--;if(r<0){s=!0;break}o&&(a=!0)}if(!s&&a){for(var E=t-e,b=null,M=1;b===null&&M<E;M++)b=this.getBlackPointOnSegment(e,i-M,e+M,i);if(b==null)throw new $e;for(var k=null,M=1;k===null&&M<E;M++)k=this.getBlackPointOnSegment(e,r+M,e+M,r);if(k==null)throw new $e;for(var B=null,M=1;B===null&&M<E;M++)B=this.getBlackPointOnSegment(t,r+M,t-M,r);if(B==null)throw new $e;for(var P=null,M=1;P===null&&M<E;M++)P=this.getBlackPointOnSegment(t,i-M,t-M,i);if(P==null)throw new $e;return this.centerEdges(P,b,B,k)}else throw new $e},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var s=hr.round(hr.distance(e,t,r,i)),o=(r-e)/s,a=(i-t)/s,l=this.image,c=0;c<s;c++){var u=hr.round(e+c*o),h=hr.round(t+c*a);if(l.get(u,h))return new Yt(u,h)}return null},n.prototype.centerEdges=function(e,t,r,i){var s=e.getX(),o=e.getY(),a=t.getX(),l=t.getY(),c=r.getX(),u=r.getY(),h=i.getX(),f=i.getY(),p=n.CORR;return s<this.width/2?[new Yt(h-p,f+p),new Yt(a+p,l+p),new Yt(c-p,u-p),new Yt(s+p,o-p)]:[new Yt(h+p,f+p),new Yt(a+p,l-p),new Yt(c-p,u+p),new Yt(s-p,o-p)]},n.prototype.containsBlackPoint=function(e,t,r,i){var s=this.image;if(i){for(var o=e;o<=t;o++)if(s.get(o,r))return!0}else for(var a=e;a<=t;a++)if(s.get(r,a))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),SV=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),s=!0,o=0;o<t.length&&s;o+=2){var a=Math.floor(t[o]),l=Math.floor(t[o+1]);if(a<-1||a>r||l<-1||l>i)throw new $e;s=!1,a===-1?(t[o]=0,s=!0):a===r&&(t[o]=r-1,s=!0),l===-1?(t[o+1]=0,s=!0):l===i&&(t[o+1]=i-1,s=!0)}s=!0;for(var o=t.length-2;o>=0&&s;o-=2){var a=Math.floor(t[o]),l=Math.floor(t[o+1]);if(a<-1||a>r||l<-1||l>i)throw new $e;s=!1,a===-1?(t[o]=0,s=!0):a===r&&(t[o]=r-1,s=!0),l===-1?(t[o+1]=0,s=!0):l===i&&(t[o+1]=i-1,s=!0)}},n}(),jee=function(){function n(e,t,r,i,s,o,a,l,c){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=s,this.a32=o,this.a13=a,this.a23=l,this.a33=c}return n.quadrilateralToQuadrilateral=function(e,t,r,i,s,o,a,l,c,u,h,f,p,v,_,S){var x=n.quadrilateralToSquare(e,t,r,i,s,o,a,l),E=n.squareToQuadrilateral(c,u,h,f,p,v,_,S);return E.times(x)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,s=this.a13,o=this.a21,a=this.a22,l=this.a23,c=this.a31,u=this.a32,h=this.a33,f=0;f<t;f+=2){var p=e[f],v=e[f+1],_=s*p+l*v+h;e[f]=(r*p+o*v+c)/_,e[f+1]=(i*p+a*v+u)/_}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,s=this.a13,o=this.a21,a=this.a22,l=this.a23,c=this.a31,u=this.a32,h=this.a33,f=e.length,p=0;p<f;p++){var v=e[p],_=t[p],S=s*v+l*_+h;e[p]=(r*v+o*_+c)/S,t[p]=(i*v+a*_+u)/S}},n.squareToQuadrilateral=function(e,t,r,i,s,o,a,l){var c=e-r+s-a,u=t-i+o-l;if(c===0&&u===0)return new n(r-e,s-r,e,i-t,o-i,t,0,0,1);var h=r-s,f=a-s,p=i-o,v=l-o,_=h*v-f*p,S=(c*v-f*u)/_,x=(h*u-c*p)/_;return new n(r-e+S*r,a-e+x*a,e,i-t+S*i,l-t+x*l,t,S,x,1)},n.quadrilateralToSquare=function(e,t,r,i,s,o,a,l){return n.squareToQuadrilateral(e,t,r,i,s,o,a,l).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),Jke=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),eOe=function(n){Jke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,s,o,a,l,c,u,h,f,p,v,_,S,x,E,b,M){var k=jee.quadrilateralToQuadrilateral(s,o,a,l,c,u,h,f,p,v,_,S,x,E,b,M);return this.sampleGridWithTransform(t,r,i,k)},e.prototype.sampleGridWithTransform=function(t,r,i,s){if(r<=0||i<=0)throw new $e;for(var o=new wu(r,i),a=new Float32Array(2*r),l=0;l<i;l++){for(var c=a.length,u=l+.5,h=0;h<c;h+=2)a[h]=h/2+.5,a[h+1]=u;s.transformPoints(a),SV.checkAndNudgePoints(t,a);try{for(var h=0;h<c;h+=2)t.get(Math.floor(a[h]),Math.floor(a[h+1]))&&o.set(h/2,l)}catch{throw new $e}}return o},e}(SV),z4=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new eOe,n}(),ua=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Yt(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),tOe=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var s=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),o=this.getMatrixCornerPoints(r);return new Qke(s,o,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new $e;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,s=0;s<4;s++){var o=r[(this.shift+s)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var a=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(s,o,a){var l=(s>>t-2<<1)+(s&1);r=(r<<3)+l}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Hn.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new $e},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var s=r-i,o=new Int32Array(r),a=r-1;a>=0;--a)o[a]=e&15,e>>=4;try{var l=new pC(_a.AZTEC_PARAM);l.decode(o,s)}catch{throw new $e}for(var c=0,a=0;a<i;a++)c=(c<<4)+o[a];return c},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,s=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(t,o,1,-1),l=this.getFirstDifferent(r,o,1,1),c=this.getFirstDifferent(i,o,-1,1),u=this.getFirstDifferent(s,o,-1,-1);if(this.nbCenterLayers>2){var h=this.distancePoint(u,a)*this.nbCenterLayers/(this.distancePoint(s,t)*(this.nbCenterLayers+2));if(h<.75||h>1.25||!this.isWhiteOrBlackRectangle(a,l,c,u))break}t=a,r=l,i=c,s=u,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new $e;this.compact=this.nbCenterLayers===5;var f=new Yt(t.getX()+.5,t.getY()-.5),p=new Yt(r.getX()+.5,r.getY()+.5),v=new Yt(i.getX()-.5,i.getY()+.5),_=new Yt(s.getX()-.5,s.getY()-.5);return this.expandSquare([f,p,v,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var s=new d3(this.image).detect();e=s[0],t=s[1],r=s[2],i=s[3]}catch{var o=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new ua(o+7,a-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ua(o+7,a+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new ua(o-7,a+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new ua(o-7,a-7),!1,-1,-1).toResultPoint()}var l=hr.round((e.getX()+i.getX()+t.getX()+r.getX())/4),c=hr.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var s=new d3(this.image,15,l,c).detect();e=s[0],t=s[1],r=s[2],i=s[3]}catch{e=this.getFirstDifferent(new ua(l+7,c-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ua(l+7,c+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new ua(l-7,c+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new ua(l-7,c-7),!1,-1,-1).toResultPoint()}return l=hr.round((e.getX()+i.getX()+t.getX()+r.getX())/4),c=hr.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new ua(l,c)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,s){var o=z4.getInstance(),a=this.getDimension(),l=a/2-this.nbCenterLayers,c=a/2+this.nbCenterLayers;return o.sampleGrid(e,a,a,l,l,c,l,c,c,l,c,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),s.getX(),s.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,s=this.distanceResultPoint(e,t),o=s/r,a=e.getX(),l=e.getY(),c=o*(t.getX()-e.getX())/s,u=o*(t.getY()-e.getY())/s,h=0;h<r;h++)this.image.get(hr.round(a+h*c),hr.round(l+h*u))&&(i|=1<<r-h-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var s=3;e=new ua(e.getX()-s,e.getY()+s),t=new ua(t.getX()-s,t.getY()-s),r=new ua(r.getX()+s,r.getY()-s),i=new ua(i.getX()+s,i.getY()+s);var o=this.getColor(i,e);if(o===0)return!1;var a=this.getColor(e,t);return a!==o||(a=this.getColor(t,r),a!==o)?!1:(a=this.getColor(r,i),a===o)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,s=(t.getY()-e.getY())/r,o=0,a=e.getX(),l=e.getY(),c=this.image.get(e.getX(),e.getY()),u=Math.ceil(r),h=0;h<u;h++)a+=i,l+=s,this.image.get(hr.round(a),hr.round(l))!==c&&o++;var f=o/r;return f>.1&&f<.9?0:f<=.1===c?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var s=e.getX()+r,o=e.getY()+i;this.isValid(s,o)&&this.image.get(s,o)===t;)s+=r,o+=i;for(s-=r,o-=i;this.isValid(s,o)&&this.image.get(s,o)===t;)s+=r;for(s-=r;this.isValid(s,o)&&this.image.get(s,o)===t;)o+=i;return o-=i,new ua(s,o)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),s=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,c=new Yt(a+i*s,l+i*o),u=new Yt(a-i*s,l-i*o);s=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var h=new Yt(a+i*s,l+i*o),f=new Yt(a-i*s,l-i*o),p=[c,h,u,f];return p},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=hr.round(e.getX()),r=hr.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return hr.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return hr.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Hn.truncDivision(this.nbLayers-4,8)+1)+15},n}(),lA=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new tOe(e.getBlackMatrix()),s=null,o=null;try{var a=i.detectMirror(!1);s=a.getPoints(),this.reportFoundResultPoints(t,s),o=new wV().decode(a)}catch(h){r=h}if(o==null)try{var a=i.detectMirror(!0);s=a.getPoints(),this.reportFoundResultPoints(t,s),o=new wV().decode(a)}catch(h){throw r??h}var l=new To(o.getText(),o.getRawBytes(),o.getNumBits(),s,nn.AZTEC,Wr.currentTimeMillis()),c=o.getByteSegments();c!=null&&l.putMetadata(js.BYTE_SEGMENTS,c);var u=o.getECLevel();return u!=null&&l.putMetadata(js.ERROR_CORRECTION_LEVEL,u),l},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(Gr.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,s,o){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),nOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){nOe(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new lA,t)||this}return e})(sy);var hs=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(Gr.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),s=this.doDecode(i,t),o=s.getResultMetadata(),a=270;o!==null&&o.get(js.ORIENTATION)===!0&&(a=a+o.get(js.ORIENTATION)%360),s.putMetadata(js.ORIENTATION,a);var l=s.getResultPoints();if(l!==null)for(var c=i.getHeight(),u=0;u<l.length;u++)l[u]=new Yt(c-l[u].getY()-1,l[u].getX());return s}else throw new $e}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),s=new As(r),o=t&&t.get(Gr.TRY_HARDER)===!0,a=Math.max(1,i>>(o?8:5)),l;o?l=i:l=15;for(var c=Math.trunc(i/2),u=0;u<l;u++){var h=Math.trunc((u+1)/2),f=(u&1)===0,p=c+a*(f?h:-h);if(p<0||p>=i)break;try{s=e.getBlackRow(p,s)}catch{continue}for(var v=function(E){if(E===1&&(s.reverse(),t&&t.get(Gr.NEED_RESULT_POINT_CALLBACK)===!0)){var b=new Map;t.forEach(function(B,P){return b.set(P,B)}),b.delete(Gr.NEED_RESULT_POINT_CALLBACK),t=b}try{var M=_.decodeRow(p,s,t);if(E===1){M.putMetadata(js.ORIENTATION,180);var k=M.getResultPoints();k!==null&&(k[0]=new Yt(r-k[0].getX()-1,k[0].getY()),k[1]=new Yt(r-k[1].getX()-1,k[1].getY()))}return{value:M}}catch{}},_=this,S=0;S<2;S++){var x=v(S);if(typeof x=="object")return x.value}}throw new $e},n.recordPattern=function(e,t,r){for(var i=r.length,s=0;s<i;s++)r[s]=0;var o=e.getSize();if(t>=o)throw new $e;for(var a=!e.get(t),l=0,c=t;c<o;){if(e.get(c)!==a)r[l]++;else{if(++l===i)break;r[l]=1,a=!a}c++}if(!(l===i||l===i-1&&c===o))throw new $e},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,s=e.get(t);t>0&&i>=0;)e.get(--t)!==s&&(i--,s=!s);if(i>=0)throw new $e;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,s=0,o=0,a=0;a<i;a++)s+=e[a],o+=t[a];if(s<o)return Number.POSITIVE_INFINITY;var l=s/o;r*=l;for(var c=0,u=0;u<i;u++){var h=e[u],f=t[u]*l,p=h>f?h-f:f-h;if(p>r)return Number.POSITIVE_INFINITY;c+=p}return c/s},n}(),rOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),EV=function(n){rOe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),s=0,o=Int32Array.from([0,0,0,0,0,0]),a=i,l=!1,c=6,u=i;u<r;u++)if(t.get(u)!==l)o[s]++;else{if(s===c-1){for(var h=e.MAX_AVG_VARIANCE,f=-1,p=e.CODE_START_A;p<=e.CODE_START_C;p++){var v=hs.patternMatchVariance(o,e.CODE_PATTERNS[p],e.MAX_INDIVIDUAL_VARIANCE);v<h&&(h=v,f=p)}if(f>=0&&t.isRange(Math.max(0,a-(u-a)/2),a,!1))return Int32Array.from([a,u,f]);a+=o[0]+o[1],o=o.slice(2,o.length),o[s-1]=0,o[s]=0,s--}else s++;o[s]=1,l=!l}throw new $e},e.decodeCode=function(t,r,i){hs.recordPattern(t,i,r);for(var s=e.MAX_AVG_VARIANCE,o=-1,a=0;a<e.CODE_PATTERNS.length;a++){var l=e.CODE_PATTERNS[a],c=this.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);c<s&&(s=c,o=a)}if(o>=0)return o;throw new $e},e.prototype.decodeRow=function(t,r,i){var s=i&&i.get(Gr.ASSUME_GS1)===!0,o=e.findStartPattern(r),a=o[2],l=0,c=new Uint8Array(20);c[l++]=a;var u;switch(a){case e.CODE_START_A:u=e.CODE_CODE_A;break;case e.CODE_START_B:u=e.CODE_CODE_B;break;case e.CODE_START_C:u=e.CODE_CODE_C;break;default:throw new vt}for(var h=!1,f=!1,p="",v=o[0],_=o[1],S=Int32Array.from([0,0,0,0,0,0]),x=0,E=0,b=a,M=0,k=!0,B=!1,P=!1;!h;){var N=f;switch(f=!1,x=E,E=e.decodeCode(r,S,_),c[l++]=E,E!==e.CODE_STOP&&(k=!0),E!==e.CODE_STOP&&(M++,b+=M*E),v=_,_+=S.reduce(function(le,X){return le+X},0),E){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new vt}switch(u){case e.CODE_CODE_A:if(E<64)P===B?p+=String.fromCharCode(32+E):p+=String.fromCharCode(32+E+128),P=!1;else if(E<96)P===B?p+=String.fromCharCode(E-64):p+=String.fromCharCode(E+64),P=!1;else switch(E!==e.CODE_STOP&&(k=!1),E){case e.CODE_FNC_1:s&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!B&&P?(B=!0,P=!1):B&&P?(B=!1,P=!1):P=!0;break;case e.CODE_SHIFT:f=!0,u=e.CODE_CODE_B;break;case e.CODE_CODE_B:u=e.CODE_CODE_B;break;case e.CODE_CODE_C:u=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0;break}break;case e.CODE_CODE_B:if(E<96)P===B?p+=String.fromCharCode(32+E):p+=String.fromCharCode(32+E+128),P=!1;else switch(E!==e.CODE_STOP&&(k=!1),E){case e.CODE_FNC_1:s&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!B&&P?(B=!0,P=!1):B&&P?(B=!1,P=!1):P=!0;break;case e.CODE_SHIFT:f=!0,u=e.CODE_CODE_A;break;case e.CODE_CODE_A:u=e.CODE_CODE_A;break;case e.CODE_CODE_C:u=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0;break}break;case e.CODE_CODE_C:if(E<100)E<10&&(p+="0"),p+=E;else switch(E!==e.CODE_STOP&&(k=!1),E){case e.CODE_FNC_1:s&&(p.length===0?p+="]C1":p+="");break;case e.CODE_CODE_A:u=e.CODE_CODE_A;break;case e.CODE_CODE_B:u=e.CODE_CODE_B;break;case e.CODE_STOP:h=!0;break}break}N&&(u=u===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var R=_-v;if(_=r.getNextUnset(_),!r.isRange(_,Math.min(r.getSize(),_+(_-v)/2),!1))throw new $e;if(b-=M*x,b%103!==x)throw new Xi;var I=p.length;if(I===0)throw new $e;I>0&&k&&(u===e.CODE_CODE_C?p=p.substring(0,I-2):p=p.substring(0,I-1));for(var U=(o[1]+o[0])/2,H=v+R/2,W=c.length,K=new Uint8Array(W),te=0;te<W;te++)K[te]=c[te];var se=[new Yt(U,t),new Yt(H,t)];return new To(p,K,0,se,nn.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(hs),iOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bV=function(n){iOe(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var s,o,a,l,c=this.counters;c.fill(0),this.decodeRowResult="";var u=e.findAsteriskPattern(r,c),h=r.getNextSet(u[1]),f=r.getSize(),p,v;do{e.recordPattern(r,h,c);var _=e.toNarrowWidePattern(c);if(_<0)throw new $e;p=e.patternToChar(_),this.decodeRowResult+=p,v=h;try{for(var S=(s=void 0,dP(c)),x=S.next();!x.done;x=S.next()){var E=x.value;h+=E}}catch(W){s={error:W}}finally{try{x&&!x.done&&(o=S.return)&&o.call(S)}finally{if(s)throw s.error}}h=r.getNextSet(h)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var M=dP(c),k=M.next();!k.done;k=M.next()){var E=k.value;b+=E}}catch(W){a={error:W}}finally{try{k&&!k.done&&(l=M.return)&&l.call(M)}finally{if(a)throw a.error}}var B=h-v-b;if(h!==f&&B*2<b)throw new $e;if(this.usingCheckDigit){for(var P=this.decodeRowResult.length-1,N=0,R=0;R<P;R++)N+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(R));if(this.decodeRowResult.charAt(P)!==e.ALPHABET_STRING.charAt(N%43))throw new Xi;this.decodeRowResult=this.decodeRowResult.substring(0,P)}if(this.decodeRowResult.length===0)throw new $e;var I;this.extendedMode?I=e.decodeExtended(this.decodeRowResult):I=this.decodeRowResult;var U=(u[1]+u[0])/2,H=v+b/2;return new To(I,null,0,[new Yt(U,t),new Yt(H,t)],nn.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),s=t.getNextSet(0),o=0,a=s,l=!1,c=r.length,u=s;u<i;u++)if(t.get(u)!==l)r[o]++;else{if(o===c-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,a-Math.floor((u-a)/2)),a,!1))return[a,u];a+=r[0]+r[1],r.copyWithin(0,2,2+o-1),r[o-1]=0,r[o]=0,o--}else o++;r[o]=1,l=!l}throw new $e},e.toNarrowWidePattern=function(t){var r,i,s=t.length,o=0,a;do{var l=2147483647;try{for(var c=(r=void 0,dP(t)),u=c.next();!u.done;u=c.next()){var h=u.value;h<l&&h>o&&(l=h)}}catch(_){r={error:_}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}o=l,a=0;for(var f=0,p=0,v=0;v<s;v++){var h=t[v];h>o&&(p|=1<<s-1-v,a++,f+=h)}if(a===3){for(var v=0;v<s&&a>0;v++){var h=t[v];if(h>o&&(a--,h*2>=f))return-1}return p}}while(a>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new $e},e.decodeExtended=function(t){for(var r=t.length,i="",s=0;s<r;s++){var o=t.charAt(s);if(o==="+"||o==="$"||o==="%"||o==="/"){var a=t.charAt(s+1),l="\0";switch(o){case"+":if(a>="A"&&a<="Z")l=String.fromCharCode(a.charCodeAt(0)+32);else throw new vt;break;case"$":if(a>="A"&&a<="Z")l=String.fromCharCode(a.charCodeAt(0)-64);else throw new vt;break;case"%":if(a>="A"&&a<="E")l=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")l=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")l=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")l=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")l="\0";else if(a==="V")l="@";else if(a==="W")l="`";else if(a==="X"||a==="Y"||a==="Z")l="";else throw new vt;break;case"/":if(a>="A"&&a<="O")l=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")l=":";else throw new vt;break}i+=l,s++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(hs),sOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},AV=function(n){sOe(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var s,o,a,l,c=this.findAsteriskPattern(r),u=r.getNextSet(c[1]),h=r.getSize(),f=this.counters;f.fill(0),this.decodeRowResult="";var p,v;do{e.recordPattern(r,u,f);var _=this.toPattern(f);if(_<0)throw new $e;p=this.patternToChar(_),this.decodeRowResult+=p,v=u;try{for(var S=(s=void 0,fP(f)),x=S.next();!x.done;x=S.next()){var E=x.value;u+=E}}catch(R){s={error:R}}finally{try{x&&!x.done&&(o=S.return)&&o.call(S)}finally{if(s)throw s.error}}u=r.getNextSet(u)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var M=fP(f),k=M.next();!k.done;k=M.next()){var E=k.value;b+=E}}catch(R){a={error:R}}finally{try{k&&!k.done&&(l=M.return)&&l.call(M)}finally{if(a)throw a.error}}if(u===h||!r.get(u))throw new $e;if(this.decodeRowResult.length<2)throw new $e;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var B=this.decodeExtended(this.decodeRowResult),P=(c[1]+c[0])/2,N=v+b/2;return new To(B,null,0,[new Yt(P,t),new Yt(N,t)],nn.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var s=this.counters,o=i,a=!1,l=s.length,c=0,u=i;u<r;u++)if(t.get(u)!==a)s[c]++;else{if(c===l-1){if(this.toPattern(s)===e.ASTERISK_ENCODING)return new Int32Array([o,u]);o+=s[0]+s[1],s.copyWithin(0,2,2+c-1),s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,a=!a}throw new $e},e.prototype.toPattern=function(t){var r,i,s=0;try{for(var o=fP(t),a=o.next();!a.done;a=o.next()){var l=a.value;s+=l}}catch(v){r={error:v}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}for(var c=0,u=t.length,h=0;h<u;h++){var f=Math.round(t[h]*9/s);if(f<1||f>4)return-1;if(h&1)c<<=f;else for(var p=0;p<f;p++)c=c<<1|1}return c},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new $e},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",s=0;s<r;s++){var o=t.charAt(s);if(o>="a"&&o<="d"){if(s>=r-1)throw new vt;var a=t.charAt(s+1),l="\0";switch(o){case"d":if(a>="A"&&a<="Z")l=String.fromCharCode(a.charCodeAt(0)+32);else throw new vt;break;case"a":if(a>="A"&&a<="Z")l=String.fromCharCode(a.charCodeAt(0)-64);else throw new vt;break;case"b":if(a>="A"&&a<="E")l=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")l=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")l=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")l=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")l="\0";else if(a==="V")l="@";else if(a==="W")l="`";else if(a>="X"&&a<="Z")l="";else throw new vt;break;case"c":if(a>="A"&&a<="O")l=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")l=":";else throw new vt;break}i+=l,s++}else i+=o}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var s=1,o=0,a=r-1;a>=0;a--)o+=s*e.ALPHABET_STRING.indexOf(t.charAt(a)),++s>i&&(s=1);if(t.charAt(r)!==e.ALPHABET_STRING[o%47])throw new Xi},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(hs),oOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aOe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TV=function(n){oOe(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var s,o,a=this.decodeStart(r),l=this.decodeEnd(r),c=new Un;e.decodeMiddle(r,a[1],l[0],c);var u=c.toString(),h=null;i!=null&&(h=i.get(Gr.ALLOWED_LENGTHS)),h==null&&(h=e.DEFAULT_ALLOWED_LENGTHS);var f=u.length,p=!1,v=0;try{for(var _=aOe(h),S=_.next();!S.done;S=_.next()){var x=S.value;if(f===x){p=!0;break}x>v&&(v=x)}}catch(M){s={error:M}}finally{try{S&&!S.done&&(o=_.return)&&o.call(_)}finally{if(s)throw s.error}}if(!p&&f>v&&(p=!0),!p)throw new vt;var E=[new Yt(a[1],t),new Yt(l[0],t)],b=new To(u,null,0,E,nn.ITF,new Date().getTime());return b},e.decodeMiddle=function(t,r,i,s){var o=new Int32Array(10),a=new Int32Array(5),l=new Int32Array(5);for(o.fill(0),a.fill(0),l.fill(0);r<i;){hs.recordPattern(t,r,o);for(var c=0;c<5;c++){var u=2*c;a[c]=o[u],l[c]=o[u+1]}var h=e.decodeDigit(a);s.append(h.toString()),h=this.decodeDigit(l),s.append(h.toString()),o.forEach(function(f){r+=f})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var s=r-1;i>0&&s>=0&&!t.get(s);s--)i--;if(i!==0)throw new $e},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new $e;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof $e&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var s=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-s,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var s=i.length,o=new Int32Array(s),a=t.getSize(),l=!1,c=0,u=r;o.fill(0);for(var h=r;h<a;h++)if(t.get(h)!==l)o[c]++;else{if(c===s-1){if(hs.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[u,h];u+=o[0]+o[1],Wr.arraycopy(o,2,o,0,c-1),o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,l=!l}throw new $e},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,s=e.PATTERNS.length,o=0;o<s;o++){var a=e.PATTERNS[o],l=hs.patternMatchVariance(t,a,e.MAX_INDIVIDUAL_VARIANCE);l<r?(r=l,i=o):l===r&&(i=-1)}if(i>=0)return i%10;throw new $e},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(hs),lOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Nv=function(n){lOe(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,s=0,o=Int32Array.from([0,0,0]);!r;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,s,!1,this.START_END_PATTERN,o);var a=i[0];s=i[1];var l=a-(s-a);l>=0&&(r=t.isRange(l,a,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,s=r-1;s>=0;s-=2){var o=t.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new vt;i+=o}i*=3;for(var s=r-2;s>=0;s-=2){var o=t.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new vt;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,s){return this.findGuardPattern(t,r,i,s,new Int32Array(s.length))},e.findGuardPattern=function(t,r,i,s,o){var a=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var l=0,c=r,u=s.length,h=i,f=r;f<a;f++)if(t.get(f)!==h)o[l]++;else{if(l===u-1){if(hs.patternMatchVariance(o,s,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([c,f]);c+=o[0]+o[1];for(var p=o.slice(2,o.length),v=0;v<l-1;v++)o[v]=p[v];o[l-1]=0,o[l]=0,l--}else l++;o[l]=1,h=!h}throw new $e},e.decodeDigit=function(t,r,i,s){this.recordPattern(t,i,r);for(var o=this.MAX_AVG_VARIANCE,a=-1,l=s.length,c=0;c<l;c++){var u=s[c],h=hs.patternMatchVariance(r,u,e.MAX_INDIVIDUAL_VARIANCE);h<o&&(o=h,a=c)}if(a>=0)return a;throw new $e},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(hs),cOe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uOe=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,s=this.decodeMiddle(t,r,i),o=i.toString(),a=n.parseExtensionString(o),l=[new Yt((r[0]+r[1])/2,e),new Yt(s,e)],c=new To(o,null,0,l,nn.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&c.putAllMetadata(a),c},n.prototype.decodeMiddle=function(e,t,r){var i,s,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var a=e.getSize(),l=t[1],c=0,u=0;u<5&&l<a;u++){var h=Nv.decodeDigit(e,o,l,Nv.L_AND_G_PATTERNS);r+=String.fromCharCode(48+h%10);try{for(var f=(i=void 0,cOe(o)),p=f.next();!p.done;p=f.next()){var v=p.value;l+=v}}catch(S){i={error:S}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}h>=10&&(c|=1<<4-u),u!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(r.length!==5)throw new $e;var _=this.determineCheckDigit(c);if(n.extensionChecksum(r.toString())!==_)throw new $e;return l},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new $e},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[js.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),s=r%100,o=s<10?"0"+s:s.toString();return t+i+"."+o},n}(),hOe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dOe=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,s=this.decodeMiddle(t,r,i),o=i.toString(),a=n.parseExtensionString(o),l=[new Yt((r[0]+r[1])/2,e),new Yt(s,e)],c=new To(o,null,0,l,nn.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&c.putAllMetadata(a),c},n.prototype.decodeMiddle=function(e,t,r){var i,s,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var a=e.getSize(),l=t[1],c=0,u=0;u<2&&l<a;u++){var h=Nv.decodeDigit(e,o,l,Nv.L_AND_G_PATTERNS);r+=String.fromCharCode(48+h%10);try{for(var f=(i=void 0,hOe(o)),p=f.next();!p.done;p=f.next()){var v=p.value;l+=v}}catch(_){i={error:_}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}h>=10&&(c|=1<<1-u),u!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(r.length!==2)throw new $e;if(parseInt(r.toString())%4!==c)throw new $e;return l},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[js.ISSUE_NUMBER,parseInt(e)]])},n}(),fOe=function(){function n(){}return n.decodeRow=function(e,t,r){var i=Nv.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new uOe;return s.decodeRow(e,t,i)}catch{var o=new dOe;return o.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),pOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),os=function(n){pOe(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(a){return Int32Array.from(a)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],s=new Int32Array(i.length),o=0;o<i.length;o++)s[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[r]=s}return t}return e.prototype.decodeRow=function(t,r,i){var s=e.findStartGuardPattern(r),o=i==null?null:i.get(Gr.NEED_RESULT_POINT_CALLBACK);if(o!=null){var a=new Yt((s[0]+s[1])/2,t);o.foundPossibleResultPoint(a)}var l=this.decodeMiddle(r,s,this.decodeRowStringBuffer),c=l.rowOffset,u=l.resultString;if(o!=null){var h=new Yt(c,t);o.foundPossibleResultPoint(h)}var f=e.decodeEnd(r,c);if(o!=null){var p=new Yt((f[0]+f[1])/2,t);o.foundPossibleResultPoint(p)}var v=f[1],_=v+(v-f[0]);if(_>=r.getSize()||!r.isRange(v,_,!1))throw new $e;var S=u.toString();if(S.length<8)throw new vt;if(!e.checkChecksum(S))throw new Xi;var x=(s[1]+s[0])/2,E=(f[1]+f[0])/2,b=this.getBarcodeFormat(),M=[new Yt(x,t),new Yt(E,t)],k=new To(S,null,0,M,b,new Date().getTime()),B=0;try{var P=fOe.decodeRow(t,r,f[1]);k.putMetadata(js.UPC_EAN_EXTENSION,P.getText()),k.putAllMetadata(P.getResultMetadata()),k.addResultPoints(P.getResultPoints()),B=P.getText().length}catch{}var N=i==null?null:i.get(Gr.ALLOWED_EAN_EXTENSIONS);if(N!=null){var R=!1;for(var I in N)if(B.toString()===I){R=!0;break}if(!R)throw new $e}return b===nn.EAN_13||nn.UPC_A,k},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,s=r-1;s>=0;s-=2){var o=t.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new vt;i+=o}i*=3;for(var s=r-2;s>=0;s-=2){var o=t.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new vt;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Nv),mOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),CV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f3=function(n){mOe(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var s,o,a,l,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var u=t.getSize(),h=r[1],f=0,p=0;p<6&&h<u;p++){var v=os.decodeDigit(t,c,h,os.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);try{for(var _=(s=void 0,CV(c)),S=_.next();!S.done;S=_.next()){var x=S.value;h+=x}}catch(k){s={error:k}}finally{try{S&&!S.done&&(o=_.return)&&o.call(_)}finally{if(s)throw s.error}}v>=10&&(f|=1<<5-p)}i=e.determineFirstDigit(i,f);var E=os.findGuardPattern(t,h,!0,os.MIDDLE_PATTERN,new Int32Array(os.MIDDLE_PATTERN.length).fill(0));h=E[1];for(var p=0;p<6&&h<u;p++){var v=os.decodeDigit(t,c,h,os.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var b=(a=void 0,CV(c)),M=b.next();!M.done;M=b.next()){var x=M.value;h+=x}}catch(P){a={error:P}}finally{try{M&&!M.done&&(l=b.return)&&l.call(b)}finally{if(a)throw a.error}}}return{rowOffset:h,resultString:i}},e.prototype.getBarcodeFormat=function(){return nn.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new $e},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(os),gOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),MV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IV=function(n){gOe(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var s,o,a,l,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var u=t.getSize(),h=r[1],f=0;f<4&&h<u;f++){var p=os.decodeDigit(t,c,h,os.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var v=(s=void 0,MV(c)),_=v.next();!_.done;_=v.next()){var S=_.value;h+=S}}catch(M){s={error:M}}finally{try{_&&!_.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}}var x=os.findGuardPattern(t,h,!0,os.MIDDLE_PATTERN,new Int32Array(os.MIDDLE_PATTERN.length).fill(0));h=x[1];for(var f=0;f<4&&h<u;f++){var p=os.decodeDigit(t,c,h,os.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var E=(a=void 0,MV(c)),b=E.next();!b.done;b=E.next()){var S=b.value;h+=S}}catch(B){a={error:B}}finally{try{b&&!b.done&&(l=E.return)&&l.call(E)}finally{if(a)throw a.error}}}return{rowOffset:h,resultString:i}},e.prototype.getBarcodeFormat=function(){return nn.EAN_8},e}(os),vOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),PV=function(n){vOe(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new f3,t}return e.prototype.getBarcodeFormat=function(){return nn.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new To(r.substring(1),null,null,t.getResultPoints(),nn.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new $e},e.prototype.reset=function(){this.ean13Reader.reset()},e}(os),yOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xOe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RV=function(n){yOe(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var s,o,a=this.decodeMiddleCounters.map(function(S){return S});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var l=t.getSize(),c=r[1],u=0,h=0;h<6&&c<l;h++){var f=e.decodeDigit(t,a,c,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+f%10);try{for(var p=(s=void 0,xOe(a)),v=p.next();!v.done;v=p.next()){var _=v.value;c+=_}}catch(S){s={error:S}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(s)throw s.error}}f>=10&&(u|=1<<5-h)}return e.determineNumSysAndCheckDigit(new Un(i),u),c},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return os.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var s=0;s<10;s++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][s]){t.insert(0,"0"+i),t.append("0"+s);return}throw $e.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return nn.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new Un;i.append(t.charAt(0));var s=r[5];switch(s){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(s),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(s);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(os),_Oe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),NV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pP=function(n){_Oe(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(Gr.POSSIBLE_FORMATS),s=[];return i!=null&&(i.indexOf(nn.EAN_13)>-1&&s.push(new f3),i.indexOf(nn.UPC_A)>-1&&s.push(new PV),i.indexOf(nn.EAN_8)>-1&&s.push(new IV),i.indexOf(nn.UPC_E)>-1&&s.push(new RV)),s.length===0&&(s.push(new f3),s.push(new PV),s.push(new IV),s.push(new RV)),r.readers=s,r}return e.prototype.decodeRow=function(t,r,i){var s,o;try{for(var a=NV(this.readers),l=a.next();!l.done;l=a.next()){var c=l.value;try{var u=c.decodeRow(t,r,i),h=u.getBarcodeFormat()===nn.EAN_13&&u.getText().charAt(0)==="0",f=i==null?null:i.get(Gr.POSSIBLE_FORMATS),p=f==null||f.includes(nn.UPC_A);if(h&&p){var v=u.getRawBytes(),_=new To(u.getText().substring(1),v,v?v.length:null,u.getResultPoints(),nn.UPC_A);return _.putAllMetadata(u.getResultMetadata()),_}return u}catch{}}}catch(S){s={error:S}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(s)throw s.error}}throw new $e},e.prototype.reset=function(){var t,r;try{for(var i=NV(this.readers),s=i.next();!s.done;s=i.next()){var o=s.value;o.reset()}}catch(a){t={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(hs),wOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),SOe=function(n){wOe(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var s=this.getValidRowData(r);if(!s)throw new $e;var o=this.codaBarDecodeRow(s.row);if(!o)throw new $e;return new To(o,null,0,[new Yt(s.left,t),new Yt(s.right,t)],nn.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var s=r.lastIndexOf(!0);if(s<=i)return null;r=r.slice(i,s+1);for(var o=[],a=r[0],l=1,c=1;c<r.length;c++)r[c]===a?l++:(a=r[c],o.push(l),l=1);return o.push(l),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:s}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(l,c){return(l+c)/2},0));t.length>0;){var s=t.splice(0,8).splice(0,7),o=s.map(function(l){return l<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[o])}var a=r.join("");return this.validCodaBarString(a)?a:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(hs),EOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bOe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pp=function(n){EOe(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(hs.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new $e},e.count=function(t){return hr.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,s=r[0],o=1;o<t.length;o++)r[o]>s&&(s=r[o],i=o);t[i]++},e.decrement=function(t,r){for(var i=0,s=r[0],o=1;o<t.length;o++)r[o]<s&&(s=r[o],i=o);t[i]--},e.isFinderPattern=function(t){var r,i,s=t[0]+t[1],o=s+t[2]+t[3],a=s/o;if(a>=e.MIN_FINDER_PATTERN_RATIO&&a<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;try{for(var u=bOe(t),h=u.next();!h.done;h=u.next()){var f=h.value;f>c&&(c=f),f<l&&(l=f)}}catch(p){r={error:p}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return c<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(hs),cA=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),Vee=function(){function n(e,t,r,i,s){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Yt(r,s)),this.resultPoints.push(new Yt(i,s))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),AOe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},v0=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,s,o=0;try{for(var a=AOe(e),l=a.next();!l.done;l=a.next()){var c=l.value;o+=c}}catch(E){i={error:E}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}for(var u=0,h=0,f=e.length,p=0;p<f-1;p++){var v=void 0;for(v=1,h|=1<<p;v<e[p];v++,h&=~(1<<p)){var _=n.combins(o-v-1,f-p-2);if(r&&h===0&&o-v-(f-p-1)>=f-p-1&&(_-=n.combins(o-v-(f-p),f-p-2)),f-p-1>1){for(var S=0,x=o-v-(f-p-2);x>t;x--)S+=n.combins(o-v-x-1,f-p-3);_-=S*(f-1-p)}else o-v>t&&_--;u+=_}o-=v}return u},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var s=1,o=1,a=e;a>r;a--)s*=a,o<=i&&(s/=o,o++);for(;o<=i;)s/=o,o++;return s},n}(),TOe=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new As(r),s=0,o=e[0],a=o.getRightChar().getValue(),l=11;l>=0;--l)a&1<<l&&i.set(s),s++;for(var l=1;l<e.length;++l){for(var c=e[l],u=c.getLeftChar().getValue(),h=11;h>=0;--h)u&1<<h&&i.set(s),s++;if(c.getRightChar()!==null)for(var f=c.getRightChar().getValue(),h=11;h>=0;--h)f&1<<h&&i.set(s),s++}return i},n}(),gp=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),H4=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),COe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$l=function(n){COe(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(H4),MOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vp=function(n){MOe(e,n);function e(t,r,i){var s=n.call(this,t)||this;return i?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=r,s}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(H4),IOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Og=function(n){IOe(e,n);function e(t,r,i){var s=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new vt;return s.firstDigit=r,s.secondDigit=i,s}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(H4),gE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},POe=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,s,o,a,l,c;if(!e)return null;if(e.length<2)throw new $e;var u=e.substring(0,2);try{for(var h=gE(n.TWO_DIGIT_DATA_LENGTH),f=h.next();!f.done;f=h.next()){var p=f.value;if(p[0]===u)return p[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,p[2],e):n.processFixedAI(2,p[1],e)}}catch(B){t={error:B}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}if(e.length<3)throw new $e;var v=e.substring(0,3);try{for(var _=gE(n.THREE_DIGIT_DATA_LENGTH),S=_.next();!S.done;S=_.next()){var p=S.value;if(p[0]===v)return p[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,p[2],e):n.processFixedAI(3,p[1],e)}}catch(B){i={error:B}}finally{try{S&&!S.done&&(s=_.return)&&s.call(_)}finally{if(i)throw i.error}}try{for(var x=gE(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),E=x.next();!E.done;E=x.next()){var p=E.value;if(p[0]===v)return p[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,p[2],e):n.processFixedAI(4,p[1],e)}}catch(B){o={error:B}}finally{try{E&&!E.done&&(a=x.return)&&a.call(x)}finally{if(o)throw o.error}}if(e.length<4)throw new $e;var b=e.substring(0,4);try{for(var M=gE(n.FOUR_DIGIT_DATA_LENGTH),k=M.next();!k.done;k=M.next()){var p=k.value;if(p[0]===b)return p[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,p[2],e):n.processFixedAI(4,p[1],e)}}catch(B){l={error:B}}finally{try{k&&!k.done&&(c=M.return)&&c.call(M)}finally{if(l)throw l.error}}throw new $e},n.processFixedAI=function(e,t,r){if(r.length<e)throw new $e;var i=r.substring(0,e);if(r.length<e+t)throw new $e;var s=r.substring(e,e+t),o=r.substring(e+t),a="("+i+")"+s,l=n.parseFieldsInGeneralPurpose(o);return l==null?a:a+l},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),s;r.length<e+t?s=r.length:s=e+t;var o=r.substring(e,s),a=r.substring(s),l="("+i+")"+o,c=n.parseFieldsInGeneralPurpose(a);return c==null?l:l+c},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),ob=function(){function n(e){this.buffer=new Un,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var s=this.decodeGeneralPurposeField(r,i),o=POe.parseFieldsInGeneralPurpose(s.getNewString());if(o!=null&&e.append(o),s.isRemaining()?i=""+s.getRemainingValue():i=null,r===s.getNewPosition())break;r=s.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Og(this.information.getSize(),Og.FNC1,Og.FNC1):new Og(this.information.getSize(),t-1,Og.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,s=(r-8)%11;return new Og(e+7,i,s)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,s=0;s<r;++s)e.get(t+s)&&(i|=1<<r-s-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new vp(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new vp(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new vp(this.current.getPosition(),this.buffer.toString()):t=new vp(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new gp(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new vp(this.current.getPosition(),this.buffer.toString());return new gp(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new gp(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new vp(this.current.getPosition(),this.buffer.toString());return new gp(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new gp(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new vp(this.current.getPosition(),this.buffer.toString());return new gp(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new gp(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new $l(e+5,$l.FNC1);if(t>=5&&t<15)return new $l(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new $l(e+7,""+(r+1));if(r>=90&&r<116)return new $l(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),s;switch(i){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new vt}return new $l(e+8,s)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new $l(e+5,$l.FNC1);if(t>=5&&t<15)return new $l(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new $l(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new iw("Decoding invalid alphanumeric value: "+r)}return new $l(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),zee=function(){function n(e){this.information=e,this.generalDecoder=new ob(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),ROe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sc=function(n){ROe(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var s=0;s<4;++s){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*s,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,s=0;s<13;s++){var o=t.charAt(s+r).charCodeAt(0)-48;i+=s&1?o:3*o}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(zee),NOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),DOe=function(n){NOe(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Un;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(sc),kOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),OOe=function(n){kOe(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Un;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(zee),LOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ab=function(n){LOe(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,s);for(var o=this.checkWeight(s),a=1e5,l=0;l<5;++l)o/a===0&&t.append("0"),a/=10;t.append(o)},e}(sc),FOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Hee=function(n){FOe(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+ab.GTIN_SIZE+e.WEIGHT_SIZE)throw new $e;var t=new Un;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+ab.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(ab),BOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),UOe=function(n){BOe(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(Hee),jOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),VOe=function(n){jOe(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(Hee),zOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),HOe=function(n){zOe(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+sc.GTIN_SIZE)throw new $e;var t=new Un;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+sc.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+sc.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(sc),WOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),GOe=function(n){WOe(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+sc.GTIN_SIZE)throw new $e;var t=new Un;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+sc.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+sc.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var s=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+sc.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(s.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(sc),$Oe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gd=function(n){$Oe(e,n);function e(t,r,i){var s=n.call(this,t)||this;return s.dateCode=i,s.firstAIdigits=r,s}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new $e;var t=new Un;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var s=i%32;i/=32;var o=i%12+1;i/=12;var a=i;a/10===0&&t.append("0"),t.append(a),o/10===0&&t.append("0"),t.append(o),s/10===0&&t.append("0"),t.append(s)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(ab);function XOe(n){try{if(n.get(1))return new DOe(n);if(!n.get(2))return new OOe(n);var e=ob.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new UOe(n);case 5:return new VOe(n)}var t=ob.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new HOe(n);case 13:return new GOe(n)}var r=ob.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new gd(n,"310","11");case 57:return new gd(n,"320","11");case 58:return new gd(n,"310","13");case 59:return new gd(n,"320","13");case 60:return new gd(n,"310","15");case 61:return new gd(n,"320","15");case 62:return new gd(n,"310","17");case 63:return new gd(n,"320","17")}}catch(i){throw console.log(i),new iw("unknown decoder: "+n)}}var DV=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),qOe=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,s){t.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),YOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vd=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KOe=function(n){YOe(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(a){if(a instanceof $e){if(!this.pairs.length)throw new $e;i=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(t,!1),s){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new $e},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,s,o=r;o<this.rows.length;o++){var a=this.rows[o];this.pairs.length=0;try{for(var l=(i=void 0,vd(t)),c=l.next();!c.done;c=l.next()){var u=c.value;this.pairs.push(u.getPairs())}}catch(f){i={error:f}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}if(this.pairs.push(a.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var h=new Array(t);h.push(a);try{return this.checkRows(h,o+1)}catch(f){console.log(f)}}}throw new $e},e.isValidSequence=function(t){var r,i;try{for(var s=vd(e.FINDER_PATTERN_SEQUENCES),o=s.next();!o.done;o=s.next()){var a=o.value;if(!(t.length>a.length)){for(var l=!0,c=0;c<t.length;c++)if(t[c].getFinderPattern().getValue()!==a[c]){l=!1;break}if(l)return!0}}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,s=!1,o=!1;i<this.rows.length;){var a=this.rows[i];if(a.getRowNumber()>t){o=a.isEquivalent(this.pairs);break}s=a.isEquivalent(this.pairs),i++}o||s||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new qOe(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,s,o,a,l,c;try{for(var u=vd(r),h=u.next();!h.done;h=u.next()){var f=h.value;if(f.getPairs().length!==t.length){var p=!0;try{for(var v=(o=void 0,vd(f.getPairs())),_=v.next();!_.done;_=v.next()){var S=_.value,x=!1;try{for(var E=(l=void 0,vd(t)),b=E.next();!b.done;b=E.next()){var M=b.value;if(DV.equals(S,M)){x=!0;break}}}catch(k){l={error:k}}finally{try{b&&!b.done&&(c=E.return)&&c.call(E)}finally{if(l)throw l.error}}x||(p=!1)}}catch(k){o={error:k}}finally{try{_&&!_.done&&(a=v.return)&&a.call(v)}finally{if(o)throw o.error}}}}}catch(k){i={error:k}}finally{try{h&&!h.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,s,o,a,l,c;try{for(var u=vd(r),h=u.next();!h.done;h=u.next()){var f=h.value,p=!0;try{for(var v=(o=void 0,vd(t)),_=v.next();!_.done;_=v.next()){var S=_.value,x=!1;try{for(var E=(l=void 0,vd(f.getPairs())),b=E.next();!b.done;b=E.next()){var M=b.value;if(S.equals(M)){x=!0;break}}}catch(k){l={error:k}}finally{try{b&&!b.done&&(c=E.return)&&c.call(E)}finally{if(l)throw l.error}}if(!x){p=!1;break}}}catch(k){o={error:k}}finally{try{_&&!_.done&&(a=v.return)&&a.call(v)}finally{if(o)throw o.error}}if(p)return!0}}catch(k){i={error:k}}finally{try{h&&!h.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=TOe.buildBitArray(t),i=XOe(r),s=i.parseInformation(),o=t[0].getFinderPattern().getResultPoints(),a=t[t.length-1].getFinderPattern().getResultPoints(),l=[o[0],o[1],a[0],a[1]];return new To(s,null,null,l,nn.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var s=i.getChecksumPortion(),o=2,a=1;a<this.pairs.size();++a){var l=this.pairs.get(a);s+=l.getLeftChar().getChecksumPortion(),o++;var c=l.getRightChar();c!=null&&(s+=c.getChecksumPortion(),o++)}s%=211;var u=211*(o-4)+s;return u===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var s=r.length%2===0;this.startFromEven&&(s=!s);var o,a=!0,l=-1;do this.findNextPair(t,r,l),o=this.parseFoundFinderPattern(t,i,s),o===null?l=e.getNextSecondBar(t,this.startEnd[0]):a=!1;while(a);var c=this.decodeDataCharacter(t,o,s,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new $e;var u;try{u=this.decodeDataCharacter(t,o,s,!1)}catch(h){u=null,console.log(h)}return new DV(c,u,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var o=t.getSize(),a;if(i>=0)a=i;else if(this.isEmptyPair(r))a=0;else{var l=r[r.length-1];a=l.getFinderPattern().getStartEnd()[1]}var c=r.length%2!==0;this.startFromEven&&(c=!c);for(var u=!1;a<o&&(u=!t.get(a),!!u);)a++;for(var h=0,f=a,p=a;p<o;p++)if(t.get(p)!==u)s[h]++;else{if(h===3){if(c&&e.reverseCounters(s),e.isFinderPattern(s)){this.startEnd[0]=f,this.startEnd[1]=p;return}c&&e.reverseCounters(s),f+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,h--}else h++;s[h]=1,u=!u}throw new $e},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var s=t[i];t[i]=t[r-i-1],t[r-i-1]=s}},e.prototype.parseFoundFinderPattern=function(t,r,i){var s,o,a;if(i){for(var l=this.startEnd[0]-1;l>=0&&!t.get(l);)l--;l++,s=this.startEnd[0]-l,o=l,a=this.startEnd[1]}else o=this.startEnd[0],a=t.getNextUnset(this.startEnd[1]+1),s=a-this.startEnd[1];var c=this.getDecodeFinderCounters();Wr.arraycopy(c,0,c,1,c.length-1),c[0]=s;var u;try{u=this.parseFinderValue(c,e.FINDER_PATTERNS)}catch{return null}return new Vee(u,[o,a],o,a,r)},e.prototype.decodeDataCharacter=function(t,r,i,s){for(var o=this.getDataCharacterCounters(),a=0;a<o.length;a++)o[a]=0;if(s)e.recordPatternInReverse(t,r.getStartEnd()[0],o);else{e.recordPattern(t,r.getStartEnd()[1],o);for(var l=0,c=o.length-1;l<c;l++,c--){var u=o[l];o[l]=o[c],o[c]=u}}var h=17,f=hr.sum(new Int32Array(o))/h,p=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(f-p)/p>.3)throw new $e;for(var v=this.getOddCounts(),_=this.getEvenCounts(),S=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),l=0;l<o.length;l++){var E=1*o[l]/f,b=E+.5;if(b<1){if(E<.3)throw new $e;b=1}else if(b>8){if(E>8.7)throw new $e;b=8}var M=l/2;l&1?(_[M]=b,x[M]=E-b):(v[M]=b,S[M]=E-b)}this.adjustOddEvenCounts(h);for(var k=4*r.getValue()+(i?0:2)+(s?0:1)-1,B=0,P=0,l=v.length-1;l>=0;l--){if(e.isNotA1left(r,i,s)){var N=e.WEIGHTS[k][2*l];P+=v[l]*N}B+=v[l]}for(var R=0,l=_.length-1;l>=0;l--)if(e.isNotA1left(r,i,s)){var N=e.WEIGHTS[k][2*l+1];R+=_[l]*N}var I=P+R;if(B&1||B>13||B<4)throw new $e;var U=(13-B)/2,H=e.SYMBOL_WIDEST[U],W=9-H,K=v0.getRSSvalue(v,H,!0),te=v0.getRSSvalue(_,W,!1),se=e.EVEN_TOTAL_SUBSET[U],le=e.GSUM[U],X=K*se+te+le;return new cA(X,I)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=hr.sum(new Int32Array(this.getOddCounts())),i=hr.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1;r>13?o=!0:r<4&&(s=!0);var a=!1,l=!1;i>13?l=!0:i<4&&(a=!0);var c=r+i-t,u=(r&1)===1,h=(i&1)===0;if(c===1)if(u){if(h)throw new $e;o=!0}else{if(!h)throw new $e;l=!0}else if(c===-1)if(u){if(h)throw new $e;s=!0}else{if(!h)throw new $e;a=!0}else if(c===0){if(u){if(!h)throw new $e;r<i?(s=!0,l=!0):(o=!0,a=!0)}else if(h)throw new $e}else throw new $e;if(s){if(o)throw new $e;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(l)throw new $e;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Pp),ZOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),QOe=function(n){ZOe(e,n);function e(t,r,i){var s=n.call(this,t,r)||this;return s.count=0,s.finderPattern=i,s}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(cA),JOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kV=function(n){JOe(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var s,o,a,l,c=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,c),r.reverse();var u=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,u),r.reverse();try{for(var h=mP(this.possibleLeftPairs),f=h.next();!f.done;f=h.next()){var p=f.value;if(p.getCount()>1)try{for(var v=(a=void 0,mP(this.possibleRightPairs)),_=v.next();!_.done;_=v.next()){var S=_.value;if(S.getCount()>1&&e.checkChecksum(p,S))return e.constructResult(p,S)}}catch(x){a={error:x}}finally{try{_&&!_.done&&(l=v.return)&&l.call(v)}finally{if(a)throw a.error}}}}catch(x){s={error:x}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(s)throw s.error}}throw new $e},e.addOrTally=function(t,r){var i,s;if(r!=null){var o=!1;try{for(var a=mP(t),l=a.next();!l.done;l=a.next()){var c=l.value;if(c.getValue()===r.getValue()){c.incrementCount(),o=!0;break}}}catch(u){i={error:u}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}o||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),s=new String(i).toString(),o=new Un,a=13-s.length;a>0;a--)o.append("0");o.append(s);for(var l=0,a=0;a<13;a++){var c=o.charAt(a).charCodeAt(0)-48;l+=a&1?c:3*c}l=10-l%10,l===10&&(l=0),o.append(l.toString());var u=t.getFinderPattern().getResultPoints(),h=r.getFinderPattern().getResultPoints();return new To(o.toString(),null,0,[u[0],u[1],h[0],h[1]],nn.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,s=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,i===s},e.prototype.decodePair=function(t,r,i,s){try{var o=this.findFinderPattern(t,r),a=this.parseFoundFinderPattern(t,i,r,o),l=s==null?null:s.get(Gr.NEED_RESULT_POINT_CALLBACK);if(l!=null){var c=(o[0]+o[1])/2;r&&(c=t.getSize()-1-c),l.foundPossibleResultPoint(new Yt(c,i))}var u=this.decodeDataCharacter(t,a,!0),h=this.decodeDataCharacter(t,a,!1);return new QOe(1597*u.getValue()+h.getValue(),u.getChecksumPortion()+4*h.getChecksumPortion(),a)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var s=this.getDataCharacterCounters(),o=0;o<s.length;o++)s[o]=0;if(i)hs.recordPatternInReverse(t,r.getStartEnd()[0],s);else{hs.recordPattern(t,r.getStartEnd()[1]+1,s);for(var a=0,l=s.length-1;a<l;a++,l--){var c=s[a];s[a]=s[l],s[l]=c}}for(var u=i?16:15,h=hr.sum(new Int32Array(s))/u,f=this.getOddCounts(),p=this.getEvenCounts(),v=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors(),a=0;a<s.length;a++){var S=s[a]/h,x=Math.floor(S+.5);x<1?x=1:x>8&&(x=8);var E=Math.floor(a/2);a&1?(p[E]=x,_[E]=S-x):(f[E]=x,v[E]=S-x)}this.adjustOddEvenCounts(i,u);for(var b=0,M=0,a=f.length-1;a>=0;a--)M*=9,M+=f[a],b+=f[a];for(var k=0,B=0,a=p.length-1;a>=0;a--)k*=9,k+=p[a],B+=p[a];var P=M+3*k;if(i){if(b&1||b>12||b<4)throw new $e;var N=(12-b)/2,R=e.OUTSIDE_ODD_WIDEST[N],I=9-R,U=v0.getRSSvalue(f,R,!1),H=v0.getRSSvalue(p,I,!0),W=e.OUTSIDE_EVEN_TOTAL_SUBSET[N],K=e.OUTSIDE_GSUM[N];return new cA(U*W+H+K,P)}else{if(B&1||B>10||B<4)throw new $e;var N=(10-B)/2,R=e.INSIDE_ODD_WIDEST[N],I=9-R,U=v0.getRSSvalue(f,R,!0),H=v0.getRSSvalue(p,I,!1),te=e.INSIDE_ODD_TOTAL_SUBSET[N],K=e.INSIDE_GSUM[N];return new cA(H*te+U+K,P)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var s=t.getSize(),o=!1,a=0;a<s&&(o=!t.get(a),r!==o);)a++;for(var l=0,c=a,u=a;u<s;u++)if(t.get(u)!==o)i[l]++;else{if(l===3){if(Pp.isFinderPattern(i))return[c,u];c+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,o=!o}throw new $e},e.prototype.parseFoundFinderPattern=function(t,r,i,s){for(var o=t.get(s[0]),a=s[0]-1;a>=0&&o!==t.get(a);)a--;a++;var l=s[0]-a,c=this.getDecodeFinderCounters(),u=new Int32Array(c.length);Wr.arraycopy(c,0,u,1,c.length-1),u[0]=l;var h=this.parseFinderValue(u,e.FINDER_PATTERNS),f=a,p=s[1];return i&&(f=t.getSize()-1-f,p=t.getSize()-1-p),new Vee(h,[a,s[1]],f,p,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=hr.sum(new Int32Array(this.getOddCounts())),s=hr.sum(new Int32Array(this.getEvenCounts())),o=!1,a=!1,l=!1,c=!1;t?(i>12?a=!0:i<4&&(o=!0),s>12?c=!0:s<4&&(l=!0)):(i>11?a=!0:i<5&&(o=!0),s>10?c=!0:s<4&&(l=!0));var u=i+s-r,h=(i&1)===(t?1:0),f=(s&1)===1;if(u===1)if(h){if(f)throw new $e;a=!0}else{if(!f)throw new $e;c=!0}else if(u===-1)if(h){if(f)throw new $e;o=!0}else{if(!f)throw new $e;l=!0}else if(u===0){if(h){if(!f)throw new $e;i<s?(o=!0,c=!0):(a=!0,l=!0)}else if(f)throw new $e}else throw new $e;if(o){if(a)throw new $e;Pp.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&Pp.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new $e;Pp.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&Pp.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Pp),e4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),y0=function(n){e4e(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(Gr.POSSIBLE_FORMATS):null,s=t&&t.get(Gr.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=t&&t.get(Gr.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(nn.EAN_13)||i.includes(nn.UPC_A)||i.includes(nn.EAN_8)||i.includes(nn.UPC_E))&&r.readers.push(new pP(t)),i.includes(nn.CODE_39)&&r.readers.push(new bV(s,o)),i.includes(nn.CODE_93)&&r.readers.push(new AV),i.includes(nn.CODE_128)&&r.readers.push(new EV),i.includes(nn.ITF)&&r.readers.push(new TV),i.includes(nn.CODABAR)&&r.readers.push(new SOe),i.includes(nn.RSS_14)&&r.readers.push(new kV),i.includes(nn.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new KOe))),r.readers.length===0&&(r.readers.push(new pP(t)),r.readers.push(new bV),r.readers.push(new AV),r.readers.push(new pP(t)),r.readers.push(new EV),r.readers.push(new TV),r.readers.push(new kV)),r}return e.prototype.decodeRow=function(t,r,i){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(t,r,i)}catch{}throw new $e},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(hs),t4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){t4e(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new y0(r),t,r)||this}return e})(sy);var OV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gr=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),fr=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),n4e=function(){function n(e,t,r,i,s,o){var a,l;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=s,this.ecBlocks=o;var c=0,u=o.getECCodewords(),h=o.getECBlocks();try{for(var f=OV(h),p=f.next();!p.done;p=f.next()){var v=p.value;c+=v.getCount()*(v.getDataCodewords()+u)}}catch(_){a={error:_}}finally{try{p&&!p.done&&(l=f.return)&&l.call(f)}finally{if(a)throw a.error}}this.totalCodewords=c}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if(e&1||t&1)throw new vt;try{for(var s=OV(n.VERSIONS),o=s.next();!o.done;o=s.next()){var a=o.value;if(a.symbolSizeRows===e&&a.symbolSizeColumns===t)return a}}catch(l){r={error:l}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}throw new vt},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new gr(5,new fr(1,3))),new n(2,12,12,10,10,new gr(7,new fr(1,5))),new n(3,14,14,12,12,new gr(10,new fr(1,8))),new n(4,16,16,14,14,new gr(12,new fr(1,12))),new n(5,18,18,16,16,new gr(14,new fr(1,18))),new n(6,20,20,18,18,new gr(18,new fr(1,22))),new n(7,22,22,20,20,new gr(20,new fr(1,30))),new n(8,24,24,22,22,new gr(24,new fr(1,36))),new n(9,26,26,24,24,new gr(28,new fr(1,44))),new n(10,32,32,14,14,new gr(36,new fr(1,62))),new n(11,36,36,16,16,new gr(42,new fr(1,86))),new n(12,40,40,18,18,new gr(48,new fr(1,114))),new n(13,44,44,20,20,new gr(56,new fr(1,144))),new n(14,48,48,22,22,new gr(68,new fr(1,174))),new n(15,52,52,24,24,new gr(42,new fr(2,102))),new n(16,64,64,14,14,new gr(56,new fr(2,140))),new n(17,72,72,16,16,new gr(36,new fr(4,92))),new n(18,80,80,18,18,new gr(48,new fr(4,114))),new n(19,88,88,20,20,new gr(56,new fr(4,144))),new n(20,96,96,22,22,new gr(68,new fr(4,174))),new n(21,104,104,24,24,new gr(56,new fr(6,136))),new n(22,120,120,18,18,new gr(68,new fr(6,175))),new n(23,132,132,20,20,new gr(62,new fr(8,163))),new n(24,144,144,22,22,new gr(62,new fr(8,156),new fr(2,155))),new n(25,8,18,6,16,new gr(7,new fr(1,5))),new n(26,8,32,6,14,new gr(11,new fr(1,10))),new n(27,12,26,10,24,new gr(14,new fr(1,16))),new n(28,12,36,10,16,new gr(18,new fr(1,22))),new n(29,16,36,14,16,new gr(24,new fr(1,32))),new n(30,16,48,14,22,new gr(28,new fr(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),r4e=function(){function n(e){var t=e.getHeight();if(t<8||t>144||t&1)throw new vt;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new wu(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return n4e.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,s=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),a=!1,l=!1,c=!1,u=!1;do if(r===s&&i===0&&!a)e[t++]=this.readCorner1(s,o)&255,r-=2,i+=2,a=!0;else if(r===s-2&&i===0&&o&3&&!l)e[t++]=this.readCorner2(s,o)&255,r-=2,i+=2,l=!0;else if(r===s+4&&i===2&&!(o&7)&&!c)e[t++]=this.readCorner3(s,o)&255,r-=2,i+=2,c=!0;else if(r===s-2&&i===0&&(o&7)===4&&!u)e[t++]=this.readCorner4(s,o)&255,r-=2,i+=2,u=!0;else{do r<s&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,s,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,s,o)&255),r+=2,i-=2;while(r<s&&i>=0);r+=3,i+=1}while(r<s||i<o);if(t!==this.version.getTotalCodewords())throw new vt;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var s=0;return this.readModule(e-2,t-2,r,i)&&(s|=1),s<<=1,this.readModule(e-2,t-1,r,i)&&(s|=1),s<<=1,this.readModule(e-1,t-2,r,i)&&(s|=1),s<<=1,this.readModule(e-1,t-1,r,i)&&(s|=1),s<<=1,this.readModule(e-1,t,r,i)&&(s|=1),s<<=1,this.readModule(e,t-2,r,i)&&(s|=1),s<<=1,this.readModule(e,t-1,r,i)&&(s|=1),s<<=1,this.readModule(e,t,r,i)&&(s|=1),s},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new rn("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),o=t/i|0,a=r/s|0,l=o*i,c=a*s,u=new wu(c,l),h=0;h<o;++h)for(var f=h*i,p=0;p<a;++p)for(var v=p*s,_=0;_<i;++_)for(var S=h*(i+2)+1+_,x=f+_,E=0;E<s;++E){var b=p*(s+2)+1+E;if(e.get(b,S)){var M=v+E;u.set(M,x)}}return u},n}(),LV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i4e=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,s,o,a=t.getECBlocks(),l=0,c=a.getECBlocks();try{for(var u=LV(c),h=u.next();!h.done;h=u.next()){var f=h.value;l+=f.getCount()}}catch(K){r={error:K}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}var p=new Array(l),v=0;try{for(var _=LV(c),S=_.next();!S.done;S=_.next())for(var f=S.value,x=0;x<f.getCount();x++){var E=f.getDataCodewords(),b=a.getECCodewords()+E;p[v++]=new n(E,new Uint8Array(b))}}catch(K){s={error:K}}finally{try{S&&!S.done&&(o=_.return)&&o.call(_)}finally{if(s)throw s.error}}for(var M=p[0].codewords.length,k=M-a.getECCodewords(),B=k-1,P=0,x=0;x<B;x++)for(var N=0;N<v;N++)p[N].codewords[x]=e[P++];for(var R=t.getVersionNumber()===24,I=R?8:v,N=0;N<I;N++)p[N].codewords[k-1]=e[P++];for(var U=p[0].codewords.length,x=k;x<U;x++)for(var N=0;N<v;N++){var H=R?(N+8)%v:N,W=R&&H>7?x-1:x;p[H].codewords[W]=e[P++]}if(P!==e.length)throw new rn;return p},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),Wee=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new rn(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,s=this.bytes;if(r>0){var o=8-r,a=e<o?e:o,l=o-a,c=255>>8-a<<l;t=(s[i]&c)>>l,e-=a,r+=a,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|s[i]&255,i++,e-=8;if(e>0){var l=8-e,c=255>>l<<l;t=t<<e|(s[i]&c)>>l,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),rs;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(rs||(rs={}));var s4e=function(){function n(){}return n.decode=function(e){var t=new Wee(e),r=new Un,i=new Un,s=new Array,o=rs.ASCII_ENCODE;do if(o===rs.ASCII_ENCODE)o=this.decodeAsciiSegment(t,r,i);else{switch(o){case rs.C40_ENCODE:this.decodeC40Segment(t,r);break;case rs.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case rs.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case rs.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case rs.BASE256_ENCODE:this.decodeBase256Segment(t,r,s);break;default:throw new vt}o=rs.ASCII_ENCODE}while(o!==rs.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new fC(e,r.toString(),s.length===0?null:s,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var s=e.readBits(8);if(s===0)throw new vt;if(s<=128)return i&&(s+=128),t.append(String.fromCharCode(s-1)),rs.ASCII_ENCODE;if(s===129)return rs.PAD_ENCODE;if(s<=229){var o=s-130;o<10&&t.append("0"),t.append(""+o)}else switch(s){case 230:return rs.C40_ENCODE;case 231:return rs.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return rs.ANSIX12_ENCODE;case 239:return rs.TEXT_ENCODE;case 240:return rs.EDIFACT_ENCODE;case 241:break;default:if(s!==254||e.available()!==0)throw new vt;break}}while(e.available()>0);return rs.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],s=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var a=0;a<3;a++){var l=i[a];switch(s){case 0:if(l<3)s=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var c=this.C40_BASIC_SET_CHARS[l];r?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),r=!1):t.append(c)}else throw new vt;break;case 1:r?(t.append(String.fromCharCode(l+128)),r=!1):t.append(String.fromCharCode(l)),s=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var c=this.C40_SHIFT2_SET_CHARS[l];r?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),r=!1):t.append(c)}else switch(l){case 27:t.append("");break;case 30:r=!0;break;default:throw new vt}s=0;break;case 3:r?(t.append(String.fromCharCode(l+224)),r=!1):t.append(String.fromCharCode(l+96)),s=0;break;default:throw new vt}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],s=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var a=0;a<3;a++){var l=i[a];switch(s){case 0:if(l<3)s=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var c=this.TEXT_BASIC_SET_CHARS[l];r?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),r=!1):t.append(c)}else throw new vt;break;case 1:r?(t.append(String.fromCharCode(l+128)),r=!1):t.append(String.fromCharCode(l)),s=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var c=this.TEXT_SHIFT2_SET_CHARS[l];r?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),r=!1):t.append(c)}else switch(l){case 27:t.append("");break;case 30:r=!0;break;default:throw new vt}s=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var c=this.TEXT_SHIFT3_SET_CHARS[l];r?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),r=!1):t.append(c),s=0}else throw new vt;break;default:throw new vt}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var s=0;s<3;s++){var o=r[s];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new vt;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,s=Math.floor(i/1600);r[0]=s,i-=s*1600,s=Math.floor(i/40),r[1]=s,r[2]=i-s*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var s=8-e.getBitOffset();s!==8&&e.readBits(s);return}i&32||(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),s=this.unrandomize255State(e.readBits(8),i++),o;if(s===0?o=e.available()/8|0:s<250?o=s:o=250*(s-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new vt;for(var a=new Uint8Array(o),l=0;l<o;l++){if(e.available()<8)throw new vt;a[l]=this.unrandomize255State(e.readBits(8),i++)}r.push(a);try{t.append(Cl.decode(a,tr.ISO88591))}catch(c){throw new iw("Platform does not support required encoding: "+c.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),o4e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a4e=function(){function n(){this.rsDecoder=new pC(_a.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new r4e(e),s=i.getVersion(),o=i.readCodewords(),a=i4e.getDataBlocks(o,s),l=0;try{for(var c=o4e(a),u=c.next();!u.done;u=c.next()){var h=u.value;l+=h.getNumDataCodewords()}}catch(b){t={error:b}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}for(var f=new Uint8Array(l),p=a.length,v=0;v<p;v++){var _=a[v],S=_.getCodewords(),x=_.getNumDataCodewords();this.correctErrors(S,x);for(var E=0;E<x;E++)f[E*p+v]=S[E]}return s4e.decode(f)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Xi}for(var i=0;i<t;i++)e[i]=r[i]},n}(),l4e=function(){function n(e){this.image=e,this.rectangleDetector=new d3(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new $e;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],s=t[2],o=t[3],a=this.transitionsBetween(r,o)+1,l=this.transitionsBetween(s,o)+1;(a&1)===1&&(a+=1),(l&1)===1&&(l+=1),4*a<7*l&&4*l<7*a&&(a=l=Math.max(a,l));var c=n.sampleGrid(this.image,r,i,s,o,a,l);return new V4(c,[r,i,s,o])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),s=(t.getY()-e.getY())/(r+1);return new Yt(e.getX()+i,e.getY()+s)},n.moveAway=function(e,t,r){var i=e.getX(),s=e.getY();return i<t?i-=1:i+=1,s<r?s-=1:s+=1,new Yt(i,s)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],s=e[2],o=this.transitionsBetween(t,r),a=this.transitionsBetween(r,i),l=this.transitionsBetween(i,s),c=this.transitionsBetween(s,t),u=o,h=[s,t,r,i];return u>a&&(u=a,h[0]=t,h[1]=r,h[2]=i,h[3]=s),u>l&&(u=l,h[0]=r,h[1]=i,h[2]=s,h[3]=t),u>c&&(h[0]=i,h[1]=s,h[2]=t,h[3]=r),h},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],s=e[3],o=this.transitionsBetween(t,s),a=n.shiftPoint(r,i,(o+1)*4),l=n.shiftPoint(i,r,(o+1)*4),c=this.transitionsBetween(a,t),u=this.transitionsBetween(l,s);return c<u?(e[0]=t,e[1]=r,e[2]=i,e[3]=s):(e[0]=r,e[1]=i,e[2]=s,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],s=e[3],o=this.transitionsBetween(t,s),a=this.transitionsBetween(r,s),l=n.shiftPoint(t,r,(a+1)*4),c=n.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(l,s),a=this.transitionsBetween(c,s);var u=new Yt(s.getX()+(i.getX()-r.getX())/(o+1),s.getY()+(i.getY()-r.getY())/(o+1)),h=new Yt(s.getX()+(t.getX()-r.getX())/(a+1),s.getY()+(t.getY()-r.getY())/(a+1));if(!this.isValid(u))return this.isValid(h)?h:null;if(!this.isValid(h))return u;var f=this.transitionsBetween(l,u)+this.transitionsBetween(c,u),p=this.transitionsBetween(l,h)+this.transitionsBetween(c,h);return f>p?u:h},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],s=e[3],o=this.transitionsBetween(t,s)+1,a=this.transitionsBetween(i,s)+1,l=n.shiftPoint(t,r,a*4),c=n.shiftPoint(i,r,o*4);o=this.transitionsBetween(l,s)+1,a=this.transitionsBetween(c,s)+1,(o&1)===1&&(o+=1),(a&1)===1&&(a+=1);var u=(t.getX()+r.getX()+i.getX()+s.getX())/4,h=(t.getY()+r.getY()+i.getY()+s.getY())/4;t=n.moveAway(t,u,h),r=n.moveAway(r,u,h),i=n.moveAway(i,u,h),s=n.moveAway(s,u,h);var f,p;return l=n.shiftPoint(t,r,a*4),l=n.shiftPoint(l,s,o*4),f=n.shiftPoint(r,t,a*4),f=n.shiftPoint(f,i,o*4),c=n.shiftPoint(i,s,a*4),c=n.shiftPoint(c,r,o*4),p=n.shiftPoint(s,i,a*4),p=n.shiftPoint(p,t,o*4),[l,f,c,p]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,s,o,a){var l=z4.getInstance();return l.sampleGrid(e,o,a,.5,.5,o-.5,.5,o-.5,a-.5,.5,a-.5,t.getX(),t.getY(),s.getX(),s.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),s=Math.trunc(t.getX()),o=Math.trunc(t.getY()),a=Math.abs(o-i)>Math.abs(s-r);if(a){var l=r;r=i,i=l,l=s,s=o,o=l}for(var c=Math.abs(s-r),u=Math.abs(o-i),h=-c/2,f=i<o?1:-1,p=r<s?1:-1,v=0,_=this.image.get(a?i:r,a?r:i),S=r,x=i;S!==s;S+=p){var E=this.image.get(a?x:S,a?S:x);if(E!==_&&(v++,_=E),h+=u,h>0){if(x===o)break;x+=f,h-=c}}return v},n}(),uA=function(){function n(){this.decoder=new a4e}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(Gr.PURE_BARCODE)){var s=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(s),i=n.NO_POINTS}else{var o=new l4e(e.getBlackMatrix()).detect();r=this.decoder.decode(o.getBits()),i=o.getPoints()}var a=r.getRawBytes(),l=new To(r.getText(),a,8*a.length,i,nn.DATA_MATRIX,Wr.currentTimeMillis()),c=r.getByteSegments();c!=null&&l.putMetadata(js.BYTE_SEGMENTS,c);var u=r.getECLevel();return u!=null&&l.putMetadata(js.ERROR_CORRECTION_LEVEL,u),l},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new $e;var i=this.moduleSize(t,e),s=t[1],o=r[1],a=t[0],l=r[0],c=(l-a+1)/i,u=(o-s+1)/i;if(c<=0||u<=0)throw new $e;var h=i/2;s+=h,a+=h;for(var f=new wu(c,u),p=0;p<u;p++)for(var v=s+p*i,_=0;_<c;_++)e.get(a+_*i,v)&&f.set(_,p);return f},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],s=e[1];i<r&&t.get(i,s);)i++;if(i===r)throw new $e;var o=i-e[0];if(o===0)throw new $e;return o},n.NO_POINTS=[],n}(),c4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){c4e(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new uA,t)||this}return e})(sy);var x0;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(x0||(x0={}));var u4e=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new Oi(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new rn;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(x0.L,"L",1),n.M=new n(x0.M,"M",0),n.Q=new n(x0.Q,"Q",3),n.H=new n(x0.H,"H",2),n}(),h4e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gee=function(){function n(e){this.errorCorrectionLevel=u4e.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return Hn.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,s=Number.MAX_SAFE_INTEGER,o=0;try{for(var a=h4e(n.FORMAT_INFO_DECODE_LOOKUP),l=a.next();!l.done;l=a.next()){var c=l.value,u=c[0];if(u===e||u===t)return new n(c[1]);var h=n.numBitsDiffering(e,u);h<s&&(o=c[1],s=h),e!==t&&(h=n.numBitsDiffering(t,u),h<s&&(o=c[1],s=h))}}catch(f){r={error:f}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return s<=3?new n(o):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),d4e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ce=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var s=d4e(i),o=s.next();!o.done;o=s.next()){var a=o.value;r+=a.getCount()}}catch(l){e={error:l}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),ie=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),f4e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},om=function(){function n(e,t){for(var r,i,s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=s;var a=0,l=s[0].getECCodewordsPerBlock(),c=s[0].getECBlocks();try{for(var u=f4e(c),h=u.next();!h.done;h=u.next()){var f=h.value;a+=f.getCount()*(f.getDataCodewords()+l)}}catch(p){r={error:p}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}this.totalCodewords=a}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new vt;try{return this.getVersionForNumber((e-17)/4)}catch{throw new vt}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new rn;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var s=n.VERSION_DECODE_INFO[i];if(s===e)return n.getVersionForNumber(i+7);var o=Gee.numBitsDiffering(e,s);o<t&&(r=i+7,t=o)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new wu(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var s=this.alignmentPatternCenters[i]-2,o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,s,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new Ce(7,new ie(1,19)),new Ce(10,new ie(1,16)),new Ce(13,new ie(1,13)),new Ce(17,new ie(1,9))),new n(2,Int32Array.from([6,18]),new Ce(10,new ie(1,34)),new Ce(16,new ie(1,28)),new Ce(22,new ie(1,22)),new Ce(28,new ie(1,16))),new n(3,Int32Array.from([6,22]),new Ce(15,new ie(1,55)),new Ce(26,new ie(1,44)),new Ce(18,new ie(2,17)),new Ce(22,new ie(2,13))),new n(4,Int32Array.from([6,26]),new Ce(20,new ie(1,80)),new Ce(18,new ie(2,32)),new Ce(26,new ie(2,24)),new Ce(16,new ie(4,9))),new n(5,Int32Array.from([6,30]),new Ce(26,new ie(1,108)),new Ce(24,new ie(2,43)),new Ce(18,new ie(2,15),new ie(2,16)),new Ce(22,new ie(2,11),new ie(2,12))),new n(6,Int32Array.from([6,34]),new Ce(18,new ie(2,68)),new Ce(16,new ie(4,27)),new Ce(24,new ie(4,19)),new Ce(28,new ie(4,15))),new n(7,Int32Array.from([6,22,38]),new Ce(20,new ie(2,78)),new Ce(18,new ie(4,31)),new Ce(18,new ie(2,14),new ie(4,15)),new Ce(26,new ie(4,13),new ie(1,14))),new n(8,Int32Array.from([6,24,42]),new Ce(24,new ie(2,97)),new Ce(22,new ie(2,38),new ie(2,39)),new Ce(22,new ie(4,18),new ie(2,19)),new Ce(26,new ie(4,14),new ie(2,15))),new n(9,Int32Array.from([6,26,46]),new Ce(30,new ie(2,116)),new Ce(22,new ie(3,36),new ie(2,37)),new Ce(20,new ie(4,16),new ie(4,17)),new Ce(24,new ie(4,12),new ie(4,13))),new n(10,Int32Array.from([6,28,50]),new Ce(18,new ie(2,68),new ie(2,69)),new Ce(26,new ie(4,43),new ie(1,44)),new Ce(24,new ie(6,19),new ie(2,20)),new Ce(28,new ie(6,15),new ie(2,16))),new n(11,Int32Array.from([6,30,54]),new Ce(20,new ie(4,81)),new Ce(30,new ie(1,50),new ie(4,51)),new Ce(28,new ie(4,22),new ie(4,23)),new Ce(24,new ie(3,12),new ie(8,13))),new n(12,Int32Array.from([6,32,58]),new Ce(24,new ie(2,92),new ie(2,93)),new Ce(22,new ie(6,36),new ie(2,37)),new Ce(26,new ie(4,20),new ie(6,21)),new Ce(28,new ie(7,14),new ie(4,15))),new n(13,Int32Array.from([6,34,62]),new Ce(26,new ie(4,107)),new Ce(22,new ie(8,37),new ie(1,38)),new Ce(24,new ie(8,20),new ie(4,21)),new Ce(22,new ie(12,11),new ie(4,12))),new n(14,Int32Array.from([6,26,46,66]),new Ce(30,new ie(3,115),new ie(1,116)),new Ce(24,new ie(4,40),new ie(5,41)),new Ce(20,new ie(11,16),new ie(5,17)),new Ce(24,new ie(11,12),new ie(5,13))),new n(15,Int32Array.from([6,26,48,70]),new Ce(22,new ie(5,87),new ie(1,88)),new Ce(24,new ie(5,41),new ie(5,42)),new Ce(30,new ie(5,24),new ie(7,25)),new Ce(24,new ie(11,12),new ie(7,13))),new n(16,Int32Array.from([6,26,50,74]),new Ce(24,new ie(5,98),new ie(1,99)),new Ce(28,new ie(7,45),new ie(3,46)),new Ce(24,new ie(15,19),new ie(2,20)),new Ce(30,new ie(3,15),new ie(13,16))),new n(17,Int32Array.from([6,30,54,78]),new Ce(28,new ie(1,107),new ie(5,108)),new Ce(28,new ie(10,46),new ie(1,47)),new Ce(28,new ie(1,22),new ie(15,23)),new Ce(28,new ie(2,14),new ie(17,15))),new n(18,Int32Array.from([6,30,56,82]),new Ce(30,new ie(5,120),new ie(1,121)),new Ce(26,new ie(9,43),new ie(4,44)),new Ce(28,new ie(17,22),new ie(1,23)),new Ce(28,new ie(2,14),new ie(19,15))),new n(19,Int32Array.from([6,30,58,86]),new Ce(28,new ie(3,113),new ie(4,114)),new Ce(26,new ie(3,44),new ie(11,45)),new Ce(26,new ie(17,21),new ie(4,22)),new Ce(26,new ie(9,13),new ie(16,14))),new n(20,Int32Array.from([6,34,62,90]),new Ce(28,new ie(3,107),new ie(5,108)),new Ce(26,new ie(3,41),new ie(13,42)),new Ce(30,new ie(15,24),new ie(5,25)),new Ce(28,new ie(15,15),new ie(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new Ce(28,new ie(4,116),new ie(4,117)),new Ce(26,new ie(17,42)),new Ce(28,new ie(17,22),new ie(6,23)),new Ce(30,new ie(19,16),new ie(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new Ce(28,new ie(2,111),new ie(7,112)),new Ce(28,new ie(17,46)),new Ce(30,new ie(7,24),new ie(16,25)),new Ce(24,new ie(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new Ce(30,new ie(4,121),new ie(5,122)),new Ce(28,new ie(4,47),new ie(14,48)),new Ce(30,new ie(11,24),new ie(14,25)),new Ce(30,new ie(16,15),new ie(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new Ce(30,new ie(6,117),new ie(4,118)),new Ce(28,new ie(6,45),new ie(14,46)),new Ce(30,new ie(11,24),new ie(16,25)),new Ce(30,new ie(30,16),new ie(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new Ce(26,new ie(8,106),new ie(4,107)),new Ce(28,new ie(8,47),new ie(13,48)),new Ce(30,new ie(7,24),new ie(22,25)),new Ce(30,new ie(22,15),new ie(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new Ce(28,new ie(10,114),new ie(2,115)),new Ce(28,new ie(19,46),new ie(4,47)),new Ce(28,new ie(28,22),new ie(6,23)),new Ce(30,new ie(33,16),new ie(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new Ce(30,new ie(8,122),new ie(4,123)),new Ce(28,new ie(22,45),new ie(3,46)),new Ce(30,new ie(8,23),new ie(26,24)),new Ce(30,new ie(12,15),new ie(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new Ce(30,new ie(3,117),new ie(10,118)),new Ce(28,new ie(3,45),new ie(23,46)),new Ce(30,new ie(4,24),new ie(31,25)),new Ce(30,new ie(11,15),new ie(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new Ce(30,new ie(7,116),new ie(7,117)),new Ce(28,new ie(21,45),new ie(7,46)),new Ce(30,new ie(1,23),new ie(37,24)),new Ce(30,new ie(19,15),new ie(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new Ce(30,new ie(5,115),new ie(10,116)),new Ce(28,new ie(19,47),new ie(10,48)),new Ce(30,new ie(15,24),new ie(25,25)),new Ce(30,new ie(23,15),new ie(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new Ce(30,new ie(13,115),new ie(3,116)),new Ce(28,new ie(2,46),new ie(29,47)),new Ce(30,new ie(42,24),new ie(1,25)),new Ce(30,new ie(23,15),new ie(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new Ce(30,new ie(17,115)),new Ce(28,new ie(10,46),new ie(23,47)),new Ce(30,new ie(10,24),new ie(35,25)),new Ce(30,new ie(19,15),new ie(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new Ce(30,new ie(17,115),new ie(1,116)),new Ce(28,new ie(14,46),new ie(21,47)),new Ce(30,new ie(29,24),new ie(19,25)),new Ce(30,new ie(11,15),new ie(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new Ce(30,new ie(13,115),new ie(6,116)),new Ce(28,new ie(14,46),new ie(23,47)),new Ce(30,new ie(44,24),new ie(7,25)),new Ce(30,new ie(59,16),new ie(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new Ce(30,new ie(12,121),new ie(7,122)),new Ce(28,new ie(12,47),new ie(26,48)),new Ce(30,new ie(39,24),new ie(14,25)),new Ce(30,new ie(22,15),new ie(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new Ce(30,new ie(6,121),new ie(14,122)),new Ce(28,new ie(6,47),new ie(34,48)),new Ce(30,new ie(46,24),new ie(10,25)),new Ce(30,new ie(2,15),new ie(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new Ce(30,new ie(17,122),new ie(4,123)),new Ce(28,new ie(29,46),new ie(14,47)),new Ce(30,new ie(49,24),new ie(10,25)),new Ce(30,new ie(24,15),new ie(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new Ce(30,new ie(4,122),new ie(18,123)),new Ce(28,new ie(13,46),new ie(32,47)),new Ce(30,new ie(48,24),new ie(14,25)),new Ce(30,new ie(42,15),new ie(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new Ce(30,new ie(20,117),new ie(4,118)),new Ce(28,new ie(40,47),new ie(7,48)),new Ce(30,new ie(43,24),new ie(22,25)),new Ce(30,new ie(10,15),new ie(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new Ce(30,new ie(19,118),new ie(6,119)),new Ce(28,new ie(18,47),new ie(31,48)),new Ce(30,new ie(34,24),new ie(34,25)),new Ce(30,new ie(20,15),new ie(61,16)))],n}(),_s;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(_s||(_s={}));var FV=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[_s.DATA_MASK_000,new n(_s.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[_s.DATA_MASK_001,new n(_s.DATA_MASK_001,function(e,t){return(e&1)===0})],[_s.DATA_MASK_010,new n(_s.DATA_MASK_010,function(e,t){return t%3===0})],[_s.DATA_MASK_011,new n(_s.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[_s.DATA_MASK_100,new n(_s.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[_s.DATA_MASK_101,new n(_s.DATA_MASK_101,function(e,t){return e*t%6===0})],[_s.DATA_MASK_110,new n(_s.DATA_MASK_110,function(e,t){return e*t%6<3})],[_s.DATA_MASK_111,new n(_s.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),p4e=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new vt;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),s=0,o=i-7,r=i-1;r>=o;r--)s=this.copyBit(8,r,s);for(var t=i-8;t<i;t++)s=this.copyBit(t,8,s);if(this.parsedFormatInfo=Gee.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new vt},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return om.getVersionForNumber(t);for(var r=0,i=e-11,s=5;s>=0;s--)for(var o=e-9;o>=i;o--)r=this.copyBit(o,s,r);var a=om.decodeVersionInformation(r);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;r=0;for(var o=5;o>=0;o--)for(var s=e-9;s>=i;s--)r=this.copyBit(o,s,r);if(a=om.decodeVersionInformation(r),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new vt},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=FV.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var s=t.buildFunctionPattern(),o=!0,a=new Uint8Array(t.getTotalCodewords()),l=0,c=0,u=0,h=i-1;h>0;h-=2){h===6&&h--;for(var f=0;f<i;f++)for(var p=o?i-1-f:f,v=0;v<2;v++)s.get(h-v,p)||(u++,c<<=1,this.bitMatrix.get(h-v,p)&&(c|=1),u===8&&(a[l++]=c,u=0,c=0));o=!o}if(l!==t.getTotalCodewords())throw new vt;return a},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=FV.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,s=e.getHeight();i<s;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),BV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},m4e=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,s,o,a;if(e.length!==t.getTotalCodewords())throw new rn;var l=t.getECBlocksForLevel(r),c=0,u=l.getECBlocks();try{for(var h=BV(u),f=h.next();!f.done;f=h.next()){var p=f.value;c+=p.getCount()}}catch(W){i={error:W}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}var v=new Array(c),_=0;try{for(var S=BV(u),x=S.next();!x.done;x=S.next())for(var p=x.value,E=0;E<p.getCount();E++){var b=p.getDataCodewords(),M=l.getECCodewordsPerBlock()+b;v[_++]=new n(b,new Uint8Array(M))}}catch(W){o={error:W}}finally{try{x&&!x.done&&(a=S.return)&&a.call(S)}finally{if(o)throw o.error}}for(var k=v[0].codewords.length,B=v.length-1;B>=0;){var P=v[B].codewords.length;if(P===k)break;B--}B++;for(var N=k-l.getECCodewordsPerBlock(),R=0,E=0;E<N;E++)for(var I=0;I<_;I++)v[I].codewords[E]=e[R++];for(var I=B;I<_;I++)v[I].codewords[N]=e[R++];for(var U=v[0].codewords.length,E=N;E<U;E++)for(var I=0;I<_;I++){var H=I<B?E:E+1;v[I].codewords[H]=e[R++]}return v},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),pl;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(pl||(pl={}));var Jr=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new rn;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(pl.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(pl.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(pl.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(pl.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(pl.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(pl.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(pl.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(pl.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(pl.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(pl.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),g4e=function(){function n(){}return n.decode=function(e,t,r,i){var s=new Wee(e),o=new Un,a=new Array,l=-1,c=-1;try{var u=null,h=!1,f=void 0;do{if(s.available()<4)f=Jr.TERMINATOR;else{var p=s.readBits(4);f=Jr.forBits(p)}switch(f){case Jr.TERMINATOR:break;case Jr.FNC1_FIRST_POSITION:case Jr.FNC1_SECOND_POSITION:h=!0;break;case Jr.STRUCTURED_APPEND:if(s.available()<16)throw new vt;l=s.readBits(8),c=s.readBits(8);break;case Jr.ECI:var v=n.parseECIValue(s);if(u=as.getCharacterSetECIByValue(v),u===null)throw new vt;break;case Jr.HANZI:var _=s.readBits(4),S=s.readBits(f.getCharacterCountBits(t));_===n.GB2312_SUBSET&&n.decodeHanziSegment(s,o,S);break;default:var x=s.readBits(f.getCharacterCountBits(t));switch(f){case Jr.NUMERIC:n.decodeNumericSegment(s,o,x);break;case Jr.ALPHANUMERIC:n.decodeAlphanumericSegment(s,o,x,h);break;case Jr.BYTE:n.decodeByteSegment(s,o,x,u,a,i);break;case Jr.KANJI:n.decodeKanjiSegment(s,o,x);break;default:throw new vt}break}}while(f!==Jr.TERMINATOR)}catch{throw new vt}return new fC(e,o.toString(),a.length===0?null:a,r===null?null:r.toString(),l,c)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new vt;for(var i=new Uint8Array(2*r),s=0;r>0;){var o=e.readBits(13),a=o/96<<8&4294967295|o%96;a<959?a+=41377:a+=42657,i[s]=a>>8&255,i[s+1]=a&255,s+=2,r--}try{t.append(Cl.decode(i,tr.GB2312))}catch(l){throw new vt(l)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new vt;for(var i=new Uint8Array(2*r),s=0;r>0;){var o=e.readBits(13),a=o/192<<8&4294967295|o%192;a<7936?a+=33088:a+=49472,i[s]=a>>8,i[s+1]=a,s+=2,r--}try{t.append(Cl.decode(i,tr.SHIFT_JIS))}catch(l){throw new vt(l)}},n.decodeByteSegment=function(e,t,r,i,s,o){if(8*r>e.available())throw new vt;for(var a=new Uint8Array(r),l=0;l<r;l++)a[l]=e.readBits(8);var c;i===null?c=tr.guessEncoding(a,o):c=i.getName();try{t.append(Cl.decode(a,c))}catch(u){throw new vt(u)}s.push(a)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new vt;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var s=t.length();r>1;){if(e.available()<11)throw new vt;var o=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(o/45))),t.append(n.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(e.available()<6)throw new vt;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var a=s;a<t.length();a++)t.charAt(a)==="%"&&(a<t.length()-1&&t.charAt(a+1)==="%"?t.deleteCharAt(a+1):t.setCharAt(a,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new vt;var i=e.readBits(10);if(i>=1e3)throw new vt;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new vt;var s=e.readBits(7);if(s>=100)throw new vt;t.append(n.toAlphaNumericChar(Math.floor(s/10))),t.append(n.toAlphaNumericChar(s%10))}else if(r===1){if(e.available()<4)throw new vt;var o=e.readBits(4);if(o>=10)throw new vt;t.append(n.toAlphaNumericChar(o))}},n.parseECIValue=function(e){var t=e.readBits(8);if(!(t&128))return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new vt},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),$ee=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),UV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},v4e=function(){function n(){this.rsDecoder=new pC(_a.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(wu.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new p4e(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(o){i=o}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var s=this.decodeBitMatrixParser(r,t);return s.setOther(new $ee(!0)),s}catch(o){throw i!==null?i:o}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,s,o,a=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),u=m4e.getDataBlocks(c,a,l),h=0;try{for(var f=UV(u),p=f.next();!p.done;p=f.next()){var v=p.value;h+=v.getNumDataCodewords()}}catch(B){r={error:B}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}var _=new Uint8Array(h),S=0;try{for(var x=UV(u),E=x.next();!E.done;E=x.next()){var v=E.value,b=v.getCodewords(),M=v.getNumDataCodewords();this.correctErrors(b,M);for(var k=0;k<M;k++)_[S++]=b[k]}}catch(B){s={error:B}}finally{try{E&&!E.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}return g4e.decode(_,a,l,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Xi}for(var i=0;i<t;i++)e[i]=r[i]},n}(),y4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),x4e=function(n){y4e(e,n);function e(t,r,i){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var s=Math.abs(t-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var s=(this.getX()+r)/2,o=(this.getY()+t)/2,a=(this.estimatedModuleSize+i)/2;return new e(s,o,a)},e}(Yt),_4e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},w4e=function(){function n(e,t,r,i,s,o,a){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=s,this.moduleSize=o,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,s=this.startY+t/2,o=new Int32Array(3),a=this.image,l=0;l<t;l++){var c=s+(l&1?-Math.floor((l+1)/2):Math.floor((l+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var u=e;u<i&&!a.get(u,c);)u++;for(var h=0;u<i;){if(a.get(u,c))if(h===1)o[1]++;else if(h===2){if(this.foundPatternCross(o)){var f=this.handlePossibleCenter(o,c,u);if(f!==null)return f}o[0]=o[2],o[1]=1,o[2]=0,h=1}else o[++h]++;else h===1&&h++,o[h]++;u++}if(this.foundPatternCross(o)){var f=this.handlePossibleCenter(o,c,i);if(f!==null)return f}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new $e},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var s=this.image,o=s.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;for(var l=e;l>=0&&s.get(t,l)&&a[1]<=r;)a[1]++,l--;if(l<0||a[1]>r)return NaN;for(;l>=0&&!s.get(t,l)&&a[0]<=r;)a[0]++,l--;if(a[0]>r)return NaN;for(l=e+1;l<o&&s.get(t,l)&&a[1]<=r;)a[1]++,l++;if(l===o||a[1]>r)return NaN;for(;l<o&&!s.get(t,l)&&a[2]<=r;)a[2]++,l++;if(a[2]>r)return NaN;var c=a[0]+a[1]+a[2];return 5*Math.abs(c-i)>=2*i?NaN:this.foundPatternCross(a)?n.centerFromEnd(a,l):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,s,o=e[0]+e[1]+e[2],a=n.centerFromEnd(e,r),l=this.crossCheckVertical(t,a,2*e[1],o);if(!isNaN(l)){var c=(e[0]+e[1]+e[2])/3;try{for(var u=_4e(this.possibleCenters),h=u.next();!h.done;h=u.next()){var f=h.value;if(f.aboutEquals(c,l,a))return f.combineEstimate(l,a,c)}}catch(v){i={error:v}}finally{try{h&&!h.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}var p=new x4e(a,l,c);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},n}(),S4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),E4e=function(n){S4e(e,n);function e(t,r,i,s){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o.count=s,s===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var s=Math.abs(t-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var s=this.count+1,o=(this.count*this.getX()+r)/s,a=(this.count*this.getY()+t)/s,l=(this.count*this.estimatedModuleSize+i)/s;return new e(o,a,l,s)},e}(Yt),b4e=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),Qy=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A4e=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(Gr.TRY_HARDER)!==void 0,r=e!=null&&e.get(Gr.PURE_BARCODE)!==void 0,i=this.image,s=i.getHeight(),o=i.getWidth(),a=Math.floor(3*s/(4*n.MAX_MODULES));(a<n.MIN_SKIP||t)&&(a=n.MIN_SKIP);for(var l=!1,c=new Int32Array(5),u=a-1;u<s&&!l;u+=a){c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0;for(var h=0,f=0;f<o;f++)if(i.get(f,u))(h&1)===1&&h++,c[h]++;else if(h&1)c[h]++;else if(h===4)if(n.foundPatternCross(c)){var p=this.handlePossibleCenter(c,u,f,r);if(p===!0)if(a=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var v=this.findRowSkip();v>c[2]&&(u+=v-c[2]-a,f=o-1)}else{c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,h=3;continue}h=0,c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0}else c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,h=3;else c[++h]++;if(n.foundPatternCross(c)){var p=this.handlePossibleCenter(c,u,o,r);p===!0&&(a=c[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var _=this.selectBestPatterns();return Yt.orderBestPatterns(_),new b4e(_)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var s=t/7,o=s/2;return Math.abs(s-e[0])<o&&Math.abs(s-e[1])<o&&Math.abs(3*s-e[2])<3*o&&Math.abs(s-e[3])<o&&Math.abs(s-e[4])<o},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var s=this.getCrossCheckStateCount(),o=0,a=this.image;e>=o&&t>=o&&a.get(t-o,e-o);)s[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!a.get(t-o,e-o)&&s[1]<=r;)s[1]++,o++;if(e<o||t<o||s[1]>r)return!1;for(;e>=o&&t>=o&&a.get(t-o,e-o)&&s[0]<=r;)s[0]++,o++;if(s[0]>r)return!1;var l=a.getHeight(),c=a.getWidth();for(o=1;e+o<l&&t+o<c&&a.get(t+o,e+o);)s[2]++,o++;if(e+o>=l||t+o>=c)return!1;for(;e+o<l&&t+o<c&&!a.get(t+o,e+o)&&s[3]<r;)s[3]++,o++;if(e+o>=l||t+o>=c||s[3]>=r)return!1;for(;e+o<l&&t+o<c&&a.get(t+o,e+o)&&s[4]<r;)s[4]++,o++;if(s[4]>=r)return!1;var u=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(u-i)<2*i&&n.foundPatternCross(s)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var s=this.image,o=s.getHeight(),a=this.getCrossCheckStateCount(),l=e;l>=0&&s.get(t,l);)a[2]++,l--;if(l<0)return NaN;for(;l>=0&&!s.get(t,l)&&a[1]<=r;)a[1]++,l--;if(l<0||a[1]>r)return NaN;for(;l>=0&&s.get(t,l)&&a[0]<=r;)a[0]++,l--;if(a[0]>r)return NaN;for(l=e+1;l<o&&s.get(t,l);)a[2]++,l++;if(l===o)return NaN;for(;l<o&&!s.get(t,l)&&a[3]<r;)a[3]++,l++;if(l===o||a[3]>=r)return NaN;for(;l<o&&s.get(t,l)&&a[4]<r;)a[4]++,l++;if(a[4]>=r)return NaN;var c=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(c-i)>=2*i?NaN:n.foundPatternCross(a)?n.centerFromEnd(a,l):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var s=this.image,o=s.getWidth(),a=this.getCrossCheckStateCount(),l=e;l>=0&&s.get(l,t);)a[2]++,l--;if(l<0)return NaN;for(;l>=0&&!s.get(l,t)&&a[1]<=r;)a[1]++,l--;if(l<0||a[1]>r)return NaN;for(;l>=0&&s.get(l,t)&&a[0]<=r;)a[0]++,l--;if(a[0]>r)return NaN;for(l=e+1;l<o&&s.get(l,t);)a[2]++,l++;if(l===o)return NaN;for(;l<o&&!s.get(l,t)&&a[3]<r;)a[3]++,l++;if(l===o||a[3]>=r)return NaN;for(;l<o&&s.get(l,t)&&a[4]<r;)a[4]++,l++;if(a[4]>=r)return NaN;var c=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(c-i)>=i?NaN:n.foundPatternCross(a)?n.centerFromEnd(a,l):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var s=e[0]+e[1]+e[2]+e[3]+e[4],o=n.centerFromEnd(e,r),a=this.crossCheckVertical(t,Math.floor(o),e[2],s);if(!isNaN(a)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(a),e[2],s),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(a),Math.floor(o),e[2],s)))){for(var l=s/7,c=!1,u=this.possibleCenters,h=0,f=u.length;h<f;h++){var p=u[h];if(p.aboutEquals(l,a,o)){u[h]=p.combineEstimate(a,o,l),c=!0;break}}if(!c){var v=new E4e(o,a,l);u.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var s=Qy(this.possibleCenters),o=s.next();!o.done;o=s.next()){var a=o.value;if(a.getCount()>=n.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2)}}catch(l){e={error:l}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,s=0,o=0,a=this.possibleCenters.length;try{for(var l=Qy(this.possibleCenters),c=l.next();!c.done;c=l.next()){var u=c.value;u.getCount()>=n.CENTER_QUORUM&&(s++,o+=u.getEstimatedModuleSize())}}catch(_){e={error:_}}finally{try{c&&!c.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}if(s<3)return!1;var h=o/a,f=0;try{for(var p=Qy(this.possibleCenters),v=p.next();!v.done;v=p.next()){var u=v.value;f+=Math.abs(u.getEstimatedModuleSize()-h)}}catch(_){r={error:_}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return f<=.05*o},n.prototype.selectBestPatterns=function(){var e,t,r,i,s=this.possibleCenters.length;if(s<3)throw new $e;var o=this.possibleCenters,a;if(s>3){var l=0,c=0;try{for(var u=Qy(this.possibleCenters),h=u.next();!h.done;h=u.next()){var f=h.value,p=f.getEstimatedModuleSize();l+=p,c+=p*p}}catch(k){e={error:k}}finally{try{h&&!h.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}a=l/s;var v=Math.sqrt(c/s-a*a);o.sort(function(k,B){var P=Math.abs(B.getEstimatedModuleSize()-a),N=Math.abs(k.getEstimatedModuleSize()-a);return P<N?-1:P>N?1:0});for(var _=Math.max(.2*a,v),S=0;S<o.length&&o.length>3;S++){var x=o[S];Math.abs(x.getEstimatedModuleSize()-a)>_&&(o.splice(S,1),S--)}}if(o.length>3){var l=0;try{for(var E=Qy(o),b=E.next();!b.done;b=E.next()){var M=b.value;l+=M.getEstimatedModuleSize()}}catch(B){r={error:B}}finally{try{b&&!b.done&&(i=E.return)&&i.call(E)}finally{if(r)throw r.error}}a=l/o.length,o.sort(function(B,P){if(P.getCount()===B.getCount()){var N=Math.abs(P.getEstimatedModuleSize()-a),R=Math.abs(B.getEstimatedModuleSize()-a);return N<R?1:N>R?-1:0}else return P.getCount()-B.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),T4e=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Gr.NEED_RESULT_POINT_CALLBACK);var t=new A4e(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),s=this.calculateModuleSize(t,r,i);if(s<1)throw new $e("No pattern found in proccess finder.");var o=n.computeDimension(t,r,i,s),a=om.getProvisionalVersionForDimension(o),l=a.getDimensionForVersion()-7,c=null;if(a.getAlignmentPatternCenters().length>0)for(var u=r.getX()-t.getX()+i.getX(),h=r.getY()-t.getY()+i.getY(),f=1-3/l,p=Math.floor(t.getX()+f*(u-t.getX())),v=Math.floor(t.getY()+f*(h-t.getY())),_=4;_<=16;_<<=1)try{c=this.findAlignmentInRegion(s,p,v,_);break}catch(b){if(!(b instanceof $e))throw b}var S=n.createTransform(t,r,i,c,o),x=n.sampleGrid(this.image,S,o),E;return c===null?E=[i,t,r]:E=[i,t,r,c],new V4(x,E)},n.createTransform=function(e,t,r,i,s){var o=s-3.5,a,l,c,u;return i!==null?(a=i.getX(),l=i.getY(),c=o-3,u=c):(a=t.getX()-e.getX()+r.getX(),l=t.getY()-e.getY()+r.getY(),c=o,u=o),jee.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,c,u,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),a,l,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=z4.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var s=hr.round(Yt.distance(e,t)/i),o=hr.round(Yt.distance(e,r)/i),a=Math.floor((s+o)/2)+7;switch(a&3){case 0:a++;break;case 2:a--;break;case 3:throw new $e("Dimensions could be not found.")}return a},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var s=this.sizeOfBlackWhiteBlackRun(e,t,r,i),o=1,a=e-(r-e);a<0?(o=e/(e-a),a=0):a>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var l=Math.floor(t-(i-t)*o);return o=1,l<0?(o=t/(t-l),l=0):l>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(l-t),l=this.image.getHeight()-1),a=Math.floor(e+(a-e)*o),s+=this.sizeOfBlackWhiteBlackRun(e,t,a,l),s-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var s=Math.abs(i-t)>Math.abs(r-e);if(s){var o=e;e=t,t=o,o=r,r=i,i=o}for(var a=Math.abs(r-e),l=Math.abs(i-t),c=-a/2,u=e<r?1:-1,h=t<i?1:-1,f=0,p=r+u,v=e,_=t;v!==p;v+=u){var S=s?_:v,x=s?v:_;if(f===1===this.image.get(S,x)){if(f===2)return hr.distance(v,_,e,t);f++}if(c+=l,c>0){if(_===i)break;_+=h,c-=a}}return f===2?hr.distance(r+u,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var s=Math.floor(i*e),o=Math.max(0,t-s),a=Math.min(this.image.getWidth()-1,t+s);if(a-o<e*3)throw new $e("Alignment top exceeds estimated module size.");var l=Math.max(0,r-s),c=Math.min(this.image.getHeight()-1,r+s);if(c-l<e*3)throw new $e("Alignment bottom exceeds estimated module size.");var u=new w4e(this.image,o,l,a-o,c-l,e,this.resultPointCallback);return u.find()},n}(),hA=function(){function n(){this.decoder=new v4e}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(Gr.PURE_BARCODE)!==void 0){var s=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(s,t),i=n.NO_POINTS}else{var o=new T4e(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(o.getBits(),t),i=o.getPoints()}r.getOther()instanceof $ee&&r.getOther().applyMirroredCorrection(i);var a=new To(r.getText(),r.getRawBytes(),void 0,i,nn.QR_CODE,void 0),l=r.getByteSegments();l!==null&&a.putMetadata(js.BYTE_SEGMENTS,l);var c=r.getECLevel();return c!==null&&a.putMetadata(js.ERROR_CORRECTION_LEVEL,c),r.hasStructuredAppend()&&(a.putMetadata(js.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),a.putMetadata(js.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),a},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new $e;var i=this.moduleSize(t,e),s=t[1],o=r[1],a=t[0],l=r[0];if(a>=l||s>=o)throw new $e;if(o-s!==l-a&&(l=a+(o-s),l>=e.getWidth()))throw new $e;var c=Math.round((l-a+1)/i),u=Math.round((o-s+1)/i);if(c<=0||u<=0)throw new $e;if(u!==c)throw new $e;var h=Math.floor(i/2);s+=h,a+=h;var f=a+Math.floor((c-1)*i)-l;if(f>0){if(f>h)throw new $e;a-=f}var p=s+Math.floor((u-1)*i)-o;if(p>0){if(p>h)throw new $e;s-=p}for(var v=new wu(c,u),_=0;_<u;_++)for(var S=s+Math.floor(_*i),x=0;x<c;x++)e.get(a+Math.floor(x*i),S)&&v.set(x,_);return v},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),s=e[0],o=e[1],a=!0,l=0;s<i&&o<r;){if(a!==t.get(s,o)){if(++l===5)break;a=!a}s++,o++}if(s===i||o===r)throw new $e;return(s-e[0])/7},n.NO_POINTS=new Array,n}(),C4e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rr=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return hr.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),s=0;try{for(var o=C4e(e),a=o.next();!a.done;a=o.next()){var l=a.value;i[s++]=l}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=ls.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),M4e=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),I4e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P4e=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),s=n.detect(r,i);return s.length||(i=i.clone(),i.rotate180(),s=n.detect(r,i)),new M4e(i,s)},n.detect=function(e,t){for(var r,i,s=new Array,o=0,a=0,l=!1;o<t.getHeight();){var c=n.findVertices(t,o,a);if(c[0]==null&&c[3]==null){if(!l)break;l=!1,a=0;try{for(var u=(r=void 0,I4e(s)),h=u.next();!h.done;h=u.next()){var f=h.value;f[1]!=null&&(o=Math.trunc(Math.max(o,f[1].getY()))),f[3]!=null&&(o=Math.max(o,Math.trunc(f[3].getY())))}}catch(p){r={error:p}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}o+=n.ROW_STEP;continue}if(l=!0,s.push(c),!e)break;c[2]!=null?(a=Math.trunc(c[2].getX()),o=Math.trunc(c[2].getY())):(a=Math.trunc(c[4].getX()),o=Math.trunc(c[4].getY()))}return s},n.findVertices=function(e,t,r){var i=e.getHeight(),s=e.getWidth(),o=new Array(8);return n.copyToResult(o,n.findRowsWithPattern(e,i,s,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),n.copyToResult(o,n.findRowsWithPattern(e,i,s,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),o},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,s,o){for(var a=new Array(4),l=!1,c=new Int32Array(o.length);i<t;i+=n.ROW_STEP){var u=n.findGuardPattern(e,s,i,r,!1,o,c);if(u!=null){for(;i>0;){var h=n.findGuardPattern(e,s,--i,r,!1,o,c);if(h!=null)u=h;else{i++;break}}a[0]=new Yt(u[0],i),a[1]=new Yt(u[1],i),l=!0;break}}var f=i+1;if(l){for(var p=0,h=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);f<t;f++){var u=n.findGuardPattern(e,h[0],f,r,!1,o,c);if(u!=null&&Math.abs(h[0]-u[0])<n.MAX_PATTERN_DRIFT&&Math.abs(h[1]-u[1])<n.MAX_PATTERN_DRIFT)h=u,p=0;else{if(p>n.SKIPPED_ROW_COUNT_MAX)break;p++}}f-=p+1,a[2]=new Yt(h[0],f),a[3]=new Yt(h[1],f)}return f-i<n.BARCODE_MIN_HEIGHT&&ls.fill(a,null),a},n.findGuardPattern=function(e,t,r,i,s,o,a){ls.fillWithin(a,0,a.length,0);for(var l=t,c=0;e.get(l,r)&&l>0&&c++<n.MAX_PIXEL_DRIFT;)l--;for(var u=l,h=0,f=o.length,p=s;u<i;u++){var v=e.get(u,r);if(v!==p)a[h]++;else{if(h===f-1){if(n.patternMatchVariance(a,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([l,u]);l+=a[0]+a[1],Wr.arraycopy(a,2,a,0,h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,p=!p}}return h===f-1&&n.patternMatchVariance(a,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([l,u-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,s=0,o=0,a=0;a<i;a++)s+=e[a],o+=t[a];if(s<o)return 1/0;var l=s/o;r*=l;for(var c=0,u=0;u<i;u++){var h=e[u],f=t[u]*l,p=h>f?h-f:f-h;if(p>r)return 1/0;c+=p}return c/s},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),R4e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zp=function(){function n(e,t){if(t.length===0)throw new rn;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Wr.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var s=R4e(this.coefficients),o=s.next();!o.done;o=s.next()){var a=o.value;i=this.field.add(i,a)}}catch(h){t={error:h}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i}for(var l=this.coefficients[0],c=this.coefficients.length,u=1;u<c;u++)l=this.field.add(this.field.multiply(e,l),this.coefficients[u]);return l},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new rn("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var s=new Int32Array(r.length),o=r.length-t.length;Wr.arraycopy(r,0,s,0,o);for(var a=o;a<r.length;a++)s[a]=this.field.add(t[a-o],r[a]);return new n(this.field,s)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new rn("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new rn("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,s=i.length,o=new Int32Array(r+s-1),a=0;a<r;a++)for(var l=t[a],c=0;c<s;c++)o[a+c]=this.field.add(o[a+c],this.field.multiply(l,i[c]));return new n(this.field,o)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new rn;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),s=0;s<r;s++)i[s]=this.field.multiply(this.coefficients[s],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new Un,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),N4e=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new rn;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new Uee;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),D4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),k4e=function(n){D4e(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var s=1,o=0;o<t;o++)i.expTable[o]=s,s=s*r%t;for(var o=0;o<t-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new zp(i,new Int32Array([0])),i.one=new zp(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new rn;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new zp(this,i)},e.PDF417_GF=new e(rr.NUMBER_OF_CODEWORDS,3),e}(N4e),O4e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L4e=function(){function n(){this.field=k4e.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,s,o=new zp(this.field,e),a=new Int32Array(t),l=!1,c=t;c>0;c--){var u=o.evaluateAt(this.field.exp(c));a[t-c]=u,u!==0&&(l=!0)}if(!l)return 0;var h=this.field.getOne();if(r!=null)try{for(var f=O4e(r),p=f.next();!p.done;p=f.next()){var v=p.value,_=this.field.exp(e.length-1-v),S=new zp(this.field,new Int32Array([this.field.subtract(0,_),1]));h=h.multiply(S)}}catch(N){i={error:N}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}for(var x=new zp(this.field,a),E=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),x,t),b=E[0],M=E[1],k=this.findErrorLocations(b),B=this.findErrorMagnitudes(M,b,k),c=0;c<k.length;c++){var P=e.length-1-this.field.log(k[c]);if(P<0)throw Xi.getChecksumInstance();e[P]=this.field.subtract(e[P],B[c])}return k.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var s=e,o=t,a=this.field.getZero(),l=this.field.getOne();o.getDegree()>=Math.round(r/2);){var c=s,u=a;if(s=o,a=l,s.isZero())throw Xi.getChecksumInstance();o=c;for(var h=this.field.getZero(),f=s.getCoefficient(s.getDegree()),p=this.field.inverse(f);o.getDegree()>=s.getDegree()&&!o.isZero();){var v=o.getDegree()-s.getDegree(),_=this.field.multiply(o.getCoefficient(o.getDegree()),p);h=h.add(this.field.buildMonomial(v,_)),o=o.subtract(s.multiplyByMonomial(v,_))}l=h.multiply(a).subtract(u).negative()}var S=l.getCoefficient(0);if(S===0)throw Xi.getChecksumInstance();var x=this.field.inverse(S),E=l.multiply(x),b=o.multiply(x);return[E,b]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,s=1;s<this.field.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=this.field.inverse(s),i++);if(i!==t)throw Xi.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),s=new Int32Array(i),o=1;o<=i;o++)s[i-o]=this.field.multiply(o,t.getCoefficient(o));for(var a=new zp(this.field,s),l=r.length,c=new Int32Array(l),o=0;o<l;o++){var u=this.field.inverse(r[o]),h=this.field.subtract(0,e.evaluateAt(u)),f=this.field.inverse(a.evaluateAt(u));c[o]=this.field.multiply(h,f)}return c},n}(),p3=function(){function n(e,t,r,i,s){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,s)}return n.prototype.constructor_1=function(e,t,r,i,s){var o=t==null||r==null,a=i==null||s==null;if(o&&a)throw new $e;o?(t=new Yt(0,i.getY()),r=new Yt(0,s.getY())):a&&(i=new Yt(e.getWidth()-1,t.getY()),s=new Yt(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=s,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),s.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),s.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,s=this.bottomLeft,o=this.topRight,a=this.bottomRight;if(e>0){var l=r?this.topLeft:this.topRight,c=Math.trunc(l.getY()-e);c<0&&(c=0);var u=new Yt(l.getX(),c);r?i=u:o=u}if(t>0){var h=r?this.bottomLeft:this.bottomRight,f=Math.trunc(h.getY()+t);f>=this.image.getHeight()&&(f=this.image.getHeight()-1);var p=new Yt(h.getX(),f);r?s=p:a=p}return new n(this.image,i,s,o,a)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),F4e=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),W4=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(o,a,l,c,u,h){if(o==="%%")return"%";if(t[++r]!==void 0){o=c?parseInt(c.substr(1)):void 0;var f=u?parseInt(u.substr(1)):void 0,p;switch(h){case"s":p=t[r];break;case"c":p=t[r][0];break;case"f":p=parseFloat(t[r]).toFixed(o);break;case"p":p=parseFloat(t[r]).toPrecision(o);break;case"e":p=parseFloat(t[r]).toExponential(o);break;case"x":p=parseInt(t[r]).toString(f||16);break;case"d":p=parseFloat(parseInt(t[r],f||10).toPrecision(o)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(f);for(var v=parseInt(l),_=l&&l[0]+""=="0"?"0":" ";p.length<v;)p=a!==void 0?p+_:_+p;return p}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),B4e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xee=function(){function n(e){this.boundingBox=new p3(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new W4,i=0;try{for(var s=B4e(this.codewords),o=s.next();!o.done;o=s.next()){var a=o.value;if(a==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}}catch(l){e={error:l}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),U4e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j4e=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s},w1=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,s=function(h,f){var p={getKey:function(){return h},getValue:function(){return f}};p.getValue()>r?(r=p.getValue(),i=[],i.push(p.getKey())):p.getValue()===r&&i.push(p.getKey())};try{for(var o=U4e(this.values.entries()),a=o.next();!a.done;a=o.next()){var l=j4e(a.value,2),c=l[0],u=l[1];s(c,u)}}catch(h){e={error:h}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return rr.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),V4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jV=function(n){V4e(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=gP(this.getCodewords()),s=i.next();!s.done;s=i.next()){var o=s.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(a){t={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),s=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(s.getY())),l=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=-1,u=1,h=0,f=a;f<l;f++)if(r[f]!=null){var p=r[f],v=p.getRowNumber()-c;if(v===0)h++;else if(v===1)u=Math.max(u,h),h=1,c=p.getRowNumber();else if(v<0||p.getRowNumber()>=t.getRowCount()||v>f)r[f]=null;else{var _=void 0;u>2?_=(u-2)*v:_=v;for(var S=_>=f,x=1;x<=_&&!S;x++)S=r[f-x]!=null;S?r[f]=null:(c=p.getRowNumber(),h=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var s=new Int32Array(i.getRowCount());try{for(var o=gP(this.getCodewords()),a=o.next();!a.done;a=o.next()){var l=a.value;if(l!=null){var c=l.getRowNumber();if(c>=s.length)continue;s[c]++}}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return s},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),s=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=this.imageRowToCodewordIndex(Math.trunc(s.getY())),l=this.getCodewords(),c=-1,u=o;u<a;u++)if(l[u]!=null){var h=l[u];h.setRowNumberAsRowIndicatorColumn();var f=h.getRowNumber()-c;f===0||(f===1?c=h.getRowNumber():h.getRowNumber()>=t.getRowCount()?l[u]=null:c=h.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),s=new w1,o=new w1,a=new w1,l=new w1;try{for(var c=gP(i),u=c.next();!u.done;u=c.next()){var h=u.value;if(h!=null){h.setRowNumberAsRowIndicatorColumn();var f=h.getValue()%30,p=h.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:o.setValue(f*3+1);break;case 1:l.setValue(f/3),a.setValue(f%3);break;case 2:s.setValue(f+1);break}}}}catch(_){t={error:_}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}if(s.getValue().length===0||o.getValue().length===0||a.getValue().length===0||l.getValue().length===0||s.getValue()[0]<1||o.getValue()[0]+a.getValue()[0]<rr.MIN_ROWS_IN_BARCODE||o.getValue()[0]+a.getValue()[0]>rr.MAX_ROWS_IN_BARCODE)return null;var v=new F4e(s.getValue()[0],o.getValue()[0],a.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(i,v),v},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var s=t[i];if(t[i]!=null){var o=s.getValue()%30,a=s.getRowNumber();if(a>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(a+=2),a%3){case 0:o*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(o/3)!==r.getErrorCorrectionLevel()||o%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:o+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(Xee),z4e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},H4e=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=rr.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var s=this.detectionResultColumns[i].getCodewords()[r];s!=null&&(s.setRowNumber(e[r].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),s=0,o=this.barcodeColumnCount+1;o>0&&s<this.ADJUST_ROW_NUMBER_SKIP;o--){var a=this.detectionResultColumns[o].getCodewords()[r];a!=null&&(s=n.adjustRowNumberIfValid(i,s,a),a.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),s=0,o=1;o<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;o++){var a=this.detectionResultColumns[o].getCodewords()[r];a!=null&&(s=n.adjustRowNumberIfValid(i,s,a),a.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,s;if(this.detectionResultColumns[e-1]!=null){var o=r[t],a=this.detectionResultColumns[e-1].getCodewords(),l=a;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var c=new Array(14);c[2]=a[t],c[3]=l[t],t>0&&(c[0]=r[t-1],c[4]=a[t-1],c[5]=l[t-1]),t>1&&(c[8]=r[t-2],c[10]=a[t-2],c[11]=l[t-2]),t<r.length-1&&(c[1]=r[t+1],c[6]=a[t+1],c[7]=l[t+1]),t<r.length-2&&(c[9]=r[t+2],c[12]=a[t+2],c[13]=l[t+2]);try{for(var u=z4e(c),h=u.next();!h.done;h=u.next()){var f=h.value;if(n.adjustRowNumber(o,f))return}}catch(p){i={error:p}}finally{try{h&&!h.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new W4,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var s=this.detectionResultColumns[i].getCodewords()[r];if(s==null){t.format("    |   ");continue}t.format(" %3d|%3d",s.getRowNumber(),s.getValue())}t.format("%n")}return t.toString()},n}(),W4e=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),G4e=function(){function n(){}return n.initialize=function(){for(var e=0;e<rr.SYMBOL_TABLE.length;e++)for(var t=rr.SYMBOL_TABLE[e],r=t&1,i=0;i<rr.BARS_IN_MODULE;i++){for(var s=0;(t&1)===r;)s+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(rr.BARS_IN_MODULE)),n.RATIOS_TABLE[e][rr.BARS_IN_MODULE-i-1]=Math.fround(s/rr.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=hr.sum(e),r=new Int32Array(rr.BARS_IN_MODULE),i=0,s=0,o=0;o<rr.MODULES_IN_CODEWORD;o++){var a=t/(2*rr.MODULES_IN_CODEWORD)+o*t/rr.MODULES_IN_CODEWORD;s+e[i]<=a&&(s+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return rr.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=hr.sum(e),r=new Array(rr.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var s=h3.MAX_VALUE,o=-1;this.bSymbolTableReady||n.initialize();for(var a=0;a<n.RATIOS_TABLE.length;a++){for(var l=0,c=n.RATIOS_TABLE[a],u=0;u<rr.BARS_IN_MODULE;u++){var h=Math.fround(c[u]-r[u]);if(l+=Math.fround(h*h),l>=s)break}l<s&&(s=l,o=rr.SYMBOL_TABLE[a])}return o},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(rr.SYMBOL_TABLE.length).map(function(e){return new Array(rr.BARS_IN_MODULE)}),n}(),$4e=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),VV=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),X4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),q4e=function(n){X4e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Ia),Y4e=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new q4e;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new j4;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),K4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Z4e=function(n){K4e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(Ia),Q4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),J4e=function(n){Q4e(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new rn("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new Z4e;i=Hn.MAX_VALUE}this.buf=ls.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new j4;this.ensureCapacity(this.count+i),Wr.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return ls.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(Y4e),Ir;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ir||(Ir={}));function qee(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var vE;function bd(n){if(typeof vE>"u"&&(vE=qee()),vE===null)throw new Error("BigInt is not supported!");return vE(n)}function eLe(){var n=[];n[0]=bd(1);var e=bd(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var tLe=function(){function n(){}return n.decode=function(e,t){var r=new Un(""),i=as.ISO8859_1;r.enableDecoding(i);for(var s=1,o=e[s++],a=new $4e;s<e[0];){switch(o){case n.TEXT_COMPACTION_MODE_LATCH:s=n.textCompaction(e,s,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:s=n.byteCompaction(o,e,i,s,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[s++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:s=n.numericCompaction(e,s,r);break;case n.ECI_CHARSET:as.getCharacterSetECIByValue(e[s++]);break;case n.ECI_GENERAL_PURPOSE:s+=2;break;case n.ECI_USER_DEFINED:s++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=n.decodeMacroBlock(e,s,a);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new vt;default:s--,s=n.textCompaction(e,s,r);break}if(s<e.length)o=e[s++];else throw vt.getFormatInstance()}if(r.length()===0)throw vt.getFormatInstance();var l=new fC(null,r.toString(),null,t);return l.setOther(a),l},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw vt.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<n.NUMBER_OF_SEQUENCE_CODEWORDS;s++,t++)i[s]=e[t];r.setSegmentIndex(Hn.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new Un;t=n.textCompaction(e,t,o),r.setFileId(o.toString());var a=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(a=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new Un;t=n.textCompaction(e,t+1,l),r.setFileName(l.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var c=new Un;t=n.textCompaction(e,t+1,c),r.setSender(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var u=new Un;t=n.textCompaction(e,t+1,u),r.setAddressee(u.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var h=new Un;t=n.numericCompaction(e,t+1,h),r.setSegmentCount(Hn.parseInt(h.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var f=new Un;t=n.numericCompaction(e,t+1,f),r.setTimestamp(VV.parseLong(f.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new Un;t=n.numericCompaction(e,t+1,p),r.setChecksum(Hn.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var v=new Un;t=n.numericCompaction(e,t+1,v),r.setFileSize(VV.parseLong(v.toString()));break;default:throw vt.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw vt.getFormatInstance()}if(a!==-1){var _=t-a;r.isLastSegment()&&_--,r.setOptionalData(ls.copyOfRange(e,a,a+_))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),s=new Int32Array((e[0]-t)*2),o=0,a=!1;t<e[0]&&!a;){var l=e[t++];if(l<n.TEXT_COMPACTION_MODE_LATCH)i[o]=l/30,i[o+1]=l%30,o+=2;else switch(l){case n.TEXT_COMPACTION_MODE_LATCH:i[o++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[t++],s[o]=l,o++;break}}return n.decodeTextCompaction(i,s,o,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var s=Ir.ALPHA,o=Ir.ALPHA,a=0;a<r;){var l=e[a],c="";switch(s){case Ir.ALPHA:if(l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case n.LL:s=Ir.LOWER;break;case n.ML:s=Ir.MIXED;break;case n.PS:o=s,s=Ir.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ir.ALPHA;break}break;case Ir.LOWER:if(l<26)c=String.fromCharCode(97+l);else switch(l){case 26:c=" ";break;case n.AS:o=s,s=Ir.ALPHA_SHIFT;break;case n.ML:s=Ir.MIXED;break;case n.PS:o=s,s=Ir.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ir.ALPHA;break}break;case Ir.MIXED:if(l<n.PL)c=n.MIXED_CHARS[l];else switch(l){case n.PL:s=Ir.PUNCT;break;case 26:c=" ";break;case n.LL:s=Ir.LOWER;break;case n.AL:s=Ir.ALPHA;break;case n.PS:o=s,s=Ir.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ir.ALPHA;break}break;case Ir.PUNCT:if(l<n.PAL)c=n.PUNCT_CHARS[l];else switch(l){case n.PAL:s=Ir.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ir.ALPHA;break}break;case Ir.ALPHA_SHIFT:if(s=o,l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ir.ALPHA;break}break;case Ir.PUNCT_SHIFT:if(s=o,l<n.PAL)c=n.PUNCT_CHARS[l];else switch(l){case n.PAL:s=Ir.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:s=Ir.ALPHA;break}break}c!==""&&i.append(c),a++}},n.byteCompaction=function(e,t,r,i,s){var o=new J4e,a=0,l=0,c=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var u=new Int32Array(6),h=t[i++];i<t[0]&&!c;)switch(u[a++]=h,l=900*l+h,h=t[i++],h){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,c=!0;break;default:if(a%5===0&&a>0){for(var f=0;f<6;++f)o.write(Number(bd(l)>>bd(8*(5-f))));l=0,a=0}break}i===t[0]&&h<n.TEXT_COMPACTION_MODE_LATCH&&(u[a++]=h);for(var p=0;p<a;p++)o.write(u[p]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!c;){var v=t[i++];if(v<n.TEXT_COMPACTION_MODE_LATCH)a++,l=900*l+v;else switch(v){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,c=!0;break}if(a%5===0&&a>0){for(var f=0;f<6;++f)o.write(Number(bd(l)>>bd(8*(5-f))));l=0,a=0}}break}return s.append(Cl.decode(o.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,s=!1,o=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!s;){var a=e[t++];if(t===e[0]&&(s=!0),a<n.TEXT_COMPACTION_MODE_LATCH)o[i]=a,i++;else switch(a){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,s=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||a===n.NUMERIC_COMPACTION_MODE_LATCH||s)&&i>0&&(r.append(n.decodeBase900toBase10(o,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=bd(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*bd(e[i]);var s=r.toString();if(s.charAt(0)!=="1")throw new vt;return s.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=qee()?eLe():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),Jy=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nLe=function(){function n(){}return n.decode=function(e,t,r,i,s,o,a){for(var l=new p3(e,t,r,i,s),c=null,u=null,h,f=!0;;f=!1){if(t!=null&&(c=n.getRowIndicatorColumn(e,l,t,!0,o,a)),i!=null&&(u=n.getRowIndicatorColumn(e,l,i,!1,o,a)),h=n.merge(c,u),h==null)throw $e.getNotFoundInstance();var p=h.getBoundingBox();if(f&&p!=null&&(p.getMinY()<l.getMinY()||p.getMaxY()>l.getMaxY()))l=p;else break}h.setBoundingBox(l);var v=h.getBarcodeColumnCount()+1;h.setDetectionResultColumn(0,c),h.setDetectionResultColumn(v,u);for(var _=c!=null,S=1;S<=v;S++){var x=_?S:v-S;if(h.getDetectionResultColumn(x)===void 0){var E=void 0;x===0||x===v?E=new jV(l,x===0):E=new Xee(l),h.setDetectionResultColumn(x,E);for(var b=-1,M=b,k=l.getMinY();k<=l.getMaxY();k++){if(b=n.getStartColumn(h,x,k,_),b<0||b>l.getMaxX()){if(M===-1)continue;b=M}var B=n.detectCodeword(e,l.getMinX(),l.getMaxX(),_,b,k,o,a);B!=null&&(E.setCodeword(k,B),M=b,o=Math.min(o,B.getWidth()),a=Math.max(a,B.getWidth()))}}}return n.createDecoderResult(h)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=p3.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new H4e(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var s=n.getMax(i),o=0;try{for(var a=Jy(i),l=a.next();!l.done;l=a.next()){var c=l.value;if(o+=s-c,c>0)break}}catch(p){t={error:p}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}for(var u=e.getCodewords(),h=0;o>0&&u[h]==null;h++)o--;for(var f=0,h=i.length-1;h>=0&&(f+=s-i[h],!(i[h]>0));h--);for(var h=u.length-1;f>0&&u[h]==null;h--)f--;return e.getBoundingBox().addMissingRows(o,f,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var s=Jy(e),o=s.next();!o.done;o=s.next()){var a=o.value;i=Math.max(i,a)}}catch(l){t={error:l}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,s,o){for(var a=new jV(t,i),l=0;l<2;l++)for(var c=l===0?1:-1,u=Math.trunc(Math.trunc(r.getX())),h=Math.trunc(Math.trunc(r.getY()));h<=t.getMaxY()&&h>=t.getMinY();h+=c){var f=n.detectCodeword(e,0,e.getWidth(),i,u,h,s,o);f!=null&&(a.setCodeword(h,f),i?u=f.getStartX():u=f.getEndX())}return a},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),s=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(s<1||s>rr.MAX_CODEWORDS_IN_BARCODE)throw $e.getNotFoundInstance();r.setValue(s)}else i[0]!==s&&r.setValue(s)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),s=[],o=new Array,a=0;a<e.getBarcodeRowCount();a++)for(var l=0;l<e.getBarcodeColumnCount();l++){var c=t[a][l+1].getValue(),u=a*e.getBarcodeColumnCount()+l;c.length===0?r.push(u):c.length===1?i[u]=c[0]:(o.push(u),s.push(c))}for(var h=new Array(s.length),f=0;f<h.length;f++)h[f]=s[f];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,rr.toIntArray(r),rr.toIntArray(o),h)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,s){for(var o=new Int32Array(i.length),a=100;a-- >0;){for(var l=0;l<o.length;l++)t[i[l]]=s[l][o[l]];try{return n.decodeCodewords(t,e,r)}catch(u){var c=u instanceof Xi;if(!c)throw u}if(o.length===0)throw Xi.getChecksumInstance();for(var l=0;l<o.length;l++)if(o[l]<s[l].length-1){o[l]++;break}else if(o[l]=0,l===o.length-1)throw Xi.getChecksumInstance()}throw Xi.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,s,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),a=0;a<o.length;a++)for(var l=0;l<o[a].length;l++)o[a][l]=new w1;var c=0;try{for(var u=Jy(e.getDetectionResultColumns()),h=u.next();!h.done;h=u.next()){var f=h.value;if(f!=null)try{for(var p=(i=void 0,Jy(f.getCodewords())),v=p.next();!v.done;v=p.next()){var _=v.value;if(_!=null){var S=_.getRowNumber();if(S>=0){if(S>=o.length)continue;o[S][c].setValue(_.getValue())}}}}catch(x){i={error:x}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}c++}}catch(x){t={error:x}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return o},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var s,o,a=i?1:-1,l=null;if(n.isValidBarcodeColumn(e,t-a)&&(l=e.getDetectionResultColumn(t-a).getCodeword(r)),l!=null)return i?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(t).getCodewordNearby(r),l!=null)return i?l.getStartX():l.getEndX();if(n.isValidBarcodeColumn(e,t-a)&&(l=e.getDetectionResultColumn(t-a).getCodewordNearby(r)),l!=null)return i?l.getEndX():l.getStartX();for(var c=0;n.isValidBarcodeColumn(e,t-a);){t-=a;try{for(var u=(s=void 0,Jy(e.getDetectionResultColumn(t).getCodewords())),h=u.next();!h.done;h=u.next()){var f=h.value;if(f!=null)return(i?f.getEndX():f.getStartX())+a*c*(f.getEndX()-f.getStartX())}}catch(p){s={error:p}}finally{try{h&&!h.done&&(o=u.return)&&o.call(u)}finally{if(s)throw s.error}}c++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,s,o,a,l){s=n.adjustCodewordStartColumn(e,t,r,i,s,o);var c=n.getModuleBitCount(e,t,r,i,s,o);if(c==null)return null;var u,h=hr.sum(c);if(i)u=s+h;else{for(var f=0;f<c.length/2;f++){var p=c[f];c[f]=c[c.length-1-f],c[c.length-1-f]=p}u=s,s=u-h}if(!n.checkCodewordSkew(h,a,l))return null;var v=G4e.getDecodedValue(c),_=rr.getCodeword(v);return _===-1?null:new W4e(s,u,n.getCodewordBucketNumber(v),_)},n.getModuleBitCount=function(e,t,r,i,s,o){for(var a=s,l=new Int32Array(8),c=0,u=i?1:-1,h=i;(i?a<r:a>=t)&&c<l.length;)e.get(a,o)===h?(l[c]++,a+=u):(c++,h=!h);return c===l.length||a===(i?r:t)&&c===l.length-1?l:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,s,o){for(var a=s,l=i?-1:1,c=0;c<2;c++){for(;(i?a>=t:a<r)&&i===e.get(a,o);){if(Math.abs(s-a)>n.CODEWORD_SKEW_SIZE)return s;a+=l}l=-l,i=!i}return a},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw vt.getFormatInstance();var i=1<<t+1,s=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var o=tLe.decode(e,""+t);return o.setErrorsCorrected(s),o.setErasures(r.length),o},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw Xi.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw vt.getFormatInstance();var r=e[0];if(r>e.length)throw vt.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw vt.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new W4,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var s=e[r][i];s.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new L4e,n}(),rLe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dA=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw $e.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof vt||r instanceof Xi?$e.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,s,o=new Array,a=P4e.detectMultiple(e,t,r);try{for(var l=rLe(a.getPoints()),c=l.next();!c.done;c=l.next()){var u=c.value,h=nLe.decode(a.getBits(),u[4],u[5],u[6],u[7],n.getMinCodewordWidth(u),n.getMaxCodewordWidth(u)),f=new To(h.getText(),h.getRawBytes(),void 0,u,nn.PDF_417);f.putMetadata(js.ERROR_CORRECTION_LEVEL,h.getECLevel());var p=h.getOther();p!=null&&f.putMetadata(js.PDF417_EXTRA_METADATA,p),o.push(f)}}catch(v){i={error:v}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return o.map(function(v){return v})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?Hn.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*rr.MODULES_IN_CODEWORD/rr.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*rr.MODULES_IN_CODEWORD/rr.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*rr.MODULES_IN_CODEWORD/rr.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*rr.MODULES_IN_CODEWORD/rr.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),iLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zV=function(n){iLe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(Ia),HV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yee=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Gr.TRY_HARDER)!==void 0,r=e==null?null:e.get(Gr.POSSIBLE_FORMATS),i=new Array;if(r!=null){var s=r.some(function(o){return o===nn.UPC_A||o===nn.UPC_E||o===nn.EAN_13||o===nn.EAN_8||o===nn.CODABAR||o===nn.CODE_39||o===nn.CODE_93||o===nn.CODE_128||o===nn.ITF||o===nn.RSS_14||o===nn.RSS_EXPANDED});s&&!t&&i.push(new y0(e)),r.includes(nn.QR_CODE)&&i.push(new hA),r.includes(nn.DATA_MATRIX)&&i.push(new uA),r.includes(nn.AZTEC)&&i.push(new lA),r.includes(nn.PDF_417)&&i.push(new dA),s&&t&&i.push(new y0(e))}i.length===0&&(t||i.push(new y0(e)),i.push(new hA),i.push(new uA),i.push(new lA),i.push(new dA),t&&i.push(new y0(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=HV(this.readers),i=r.next();!i.done;i=r.next()){var s=i.value;s.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new zV("No readers where selected, nothing can be read.");try{for(var i=HV(this.readers),s=i.next();!s.done;s=i.next()){var o=s.value;try{return o.decode(e,this.hints)}catch(a){if(a instanceof zV)continue}}}catch(a){t={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new $e("No MultiFormat Readers were able to detect the code.")},n}(),sLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){sLe(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,s=new Yee;return s.setHints(t),i=n.call(this,s,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(sy);var oLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){oLe(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new dA,t)||this}return e})(sy);var aLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){aLe(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new hA,t)||this}return e})(sy);var m3;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(m3||(m3={}));const yE=m3;var Kee=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new cf(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,s=t.length;s<=e;s++){var o=r.multiply(new cf(i,Int32Array.from([1,i.exp(s-1+i.getGeneratorBase())])));t.push(o),r=o}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new rn("No error correction bytes");var r=e.length-t;if(r<=0)throw new rn("No data bytes provided");var i=this.buildGenerator(t),s=new Int32Array(r);Wr.arraycopy(e,0,s,0,r);var o=new cf(this.field,s);o=o.multiplyByMonomial(t,1);for(var a=o.divide(i)[1],l=a.getCoefficients(),c=t-l.length,u=0;u<c;u++)e[r+u]=0;Wr.arraycopy(l,0,e,r+c,l.length)},n}(),S1=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),s=e.getHeight(),o=0;o<s-1;o++)for(var a=r[o],l=0;l<i-1;l++){var c=a[l];c===a[l+1]&&c===r[o+1][l]&&c===r[o+1][l+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),s=e.getHeight(),o=0;o<s;o++)for(var a=0;a<i;a++){var l=r[o];a+6<i&&l[a]===1&&l[a+1]===0&&l[a+2]===1&&l[a+3]===1&&l[a+4]===1&&l[a+5]===0&&l[a+6]===1&&(n.isWhiteHorizontal(l,a-4,a)||n.isWhiteHorizontal(l,a+7,a+11))&&t++,o+6<s&&r[o][a]===1&&r[o+1][a]===0&&r[o+2][a]===1&&r[o+3][a]===1&&r[o+4][a]===1&&r[o+5][a]===0&&r[o+6][a]===1&&(n.isWhiteVertical(r,a,o-4,o)||n.isWhiteVertical(r,a,o+7,o+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var s=r;s<i;s++)if(e[s][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),s=e.getHeight(),o=0;o<s;o++)for(var a=r[o],l=0;l<i;l++)a[l]===1&&t++;var c=e.getHeight()*e.getWidth(),u=Math.floor(Math.abs(t*2-c)*10/c);return u*n.N4},n.getDataMaskBit=function(e,t,r){var i,s;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:s=r*t,i=(s&1)+s%3;break;case 6:s=r*t,i=(s&1)+s%3&1;break;case 7:s=r*t,i=s%3+(r+t&1)&1;break;default:throw new rn("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),s=t?e.getWidth():e.getHeight(),o=e.getArray(),a=0;a<i;a++){for(var l=0,c=-1,u=0;u<s;u++){var h=t?o[a][u]:o[u][a];h===c?l++:(l>=5&&(r+=n.N1+(l-5)),l=1,c=h)}l>=5&&(r+=n.N1+(l-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),lLe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cLe=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=lLe(this.bytes),s=i.next();!s.done;s=i.next()){var o=s.value;ls.fill(o,e)}}catch(a){t={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var s=this.bytes[r],o=t.bytes[r],a=0,l=this.width;a<l;++a)if(s[a]!==o[a])return!1;return!0},n.prototype.toString=function(){for(var e=new Un,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],s=0,o=this.width;s<o;++s)switch(i[s]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),g3=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new Un;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),uLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qr=function(n){uLe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(Ia),WV=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,s){n.clearMatrix(s),n.embedBasicPatterns(r,s),n.embedTypeInfo(t,i,s),n.maybeEmbedVersionInfo(r,s),n.embedDataBits(e,i,s)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new As;n.makeTypeInfoBits(e,t,i);for(var s=0,o=i.getSize();s<o;++s){var a=i.get(i.getSize()-1-s),l=n.TYPE_INFO_COORDINATES[s],c=l[0],u=l[1];if(r.setBoolean(c,u,a),s<8){var h=r.getWidth()-s-1,f=8;r.setBoolean(h,f,a)}else{var h=8,f=r.getHeight()-7+(s-8);r.setBoolean(h,f,a)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new As;n.makeVersionInfoBits(e,r);for(var i=6*3-1,s=0;s<6;++s)for(var o=0;o<3;++o){var a=r.get(i);i--,t.setBoolean(s,t.getHeight()-11+o,a),t.setBoolean(t.getHeight()-11+o,s,a)}}},n.embedDataBits=function(e,t,r){for(var i=0,s=-1,o=r.getWidth()-1,a=r.getHeight()-1;o>0;){for(o===6&&(o-=1);a>=0&&a<r.getHeight();){for(var l=0;l<2;++l){var c=o-l;if(n.isEmpty(r.get(c,a))){var u=void 0;i<e.getSize()?(u=e.get(i),++i):u=!1,t!==255&&S1.getDataMaskBit(t,c,a)&&(u=!u),r.setBoolean(c,a,u)}}a+=s}s=-s,a+=s,o-=2}if(i!==e.getSize())throw new Qr("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-Hn.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new rn("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!g3.isValidMaskPattern(t))throw new Qr("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var s=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(s,10);var o=new As;if(o.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new Qr("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new Qr("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Qr;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new Qr;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new Qr;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var s=n.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)r.setNumber(e+o,t+i,s[o])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var s=n.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)r.setNumber(e+o,t+i,s[o])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],s=0,o=i.length;s!==o;s++){var a=i[s];if(a>=0)for(var l=0;l!==o;l++){var c=i[l];c>=0&&n.isEmpty(t.get(c,a))&&n.embedPositionAdjustmentPattern(c-2,a-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),hLe=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),GV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return S1.applyMaskPenaltyRule1(e)+S1.applyMaskPenaltyRule2(e)+S1.applyMaskPenaltyRule3(e)+S1.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,s=r!==null&&r.get(yE.CHARACTER_SET)!==void 0;s&&(i=r.get(yE.CHARACTER_SET).toString());var o=this.chooseMode(e,i),a=new As;if(o===Jr.BYTE&&(s||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var l=as.getCharacterSetECIByName(i);l!==void 0&&this.appendECI(l,a)}this.appendModeInfo(o,a);var c=new As;this.appendBytes(e,o,c,i);var u;if(r!==null&&r.get(yE.QR_VERSION)!==void 0){var h=Number.parseInt(r.get(yE.QR_VERSION).toString(),10);u=om.getVersionForNumber(h);var f=this.calculateBitsNeeded(o,a,c,u);if(!this.willFit(f,u,t))throw new Qr("Data too big for requested version")}else u=this.recommendVersion(t,o,a,c);var p=new As;p.appendBitArray(a);var v=o===Jr.BYTE?c.getSizeInBytes():e.length;this.appendLengthInfo(v,u,o,p),p.appendBitArray(c);var _=u.getECBlocksForLevel(t),S=u.getTotalCodewords()-_.getTotalECCodewords();this.terminateBits(S,p);var x=this.interleaveWithECBytes(p,u.getTotalCodewords(),S,_.getNumBlocks()),E=new g3;E.setECLevel(t),E.setMode(o),E.setVersion(u);var b=u.getDimensionForVersion(),M=new cLe(b,b),k=this.chooseMaskPattern(x,t,u,M);return E.setMaskPattern(k),WV.buildMatrix(x,t,u,k,M),E.setMatrix(M),E},n.recommendVersion=function(e,t,r,i){var s=this.calculateBitsNeeded(t,r,i,om.getVersionForNumber(1)),o=this.chooseVersion(s,e),a=this.calculateBitsNeeded(t,r,i,o);return this.chooseVersion(a,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),as.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Jr.KANJI;for(var r=!1,i=!1,s=0,o=e.length;s<o;++s){var a=e.charAt(s);if(n.isDigit(a))r=!0;else if(this.getAlphanumericCode(a.charCodeAt(0))!==-1)i=!0;else return Jr.BYTE}return i?Jr.ALPHANUMERIC:r?Jr.NUMERIC:Jr.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=Cl.encode(e,as.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var s=t[i]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var s=Number.MAX_SAFE_INTEGER,o=-1,a=0;a<g3.NUM_MASK_PATTERNS;a++){WV.buildMatrix(e,t,r,a,i);var l=this.calculateMaskPenalty(i);l<s&&(s=l,o=a)}return o},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=om.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new Qr("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),s=t.getECBlocksForLevel(r),o=s.getTotalECCodewords(),a=i-o,l=(e+7)/8;return a>=l},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new Qr("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var s=t.getSize()&7;if(s>0)for(var i=s;i<8;i++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),i=0;i<o;++i)t.appendBits(i&1?17:236,8);if(t.getSize()!==r)throw new Qr("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,s,o){if(i>=r)throw new Qr("Block ID too large");var a=e%r,l=r-a,c=Math.floor(e/r),u=c+1,h=Math.floor(t/r),f=h+1,p=c-h,v=u-f;if(p!==v)throw new Qr("EC bytes mismatch");if(r!==l+a)throw new Qr("RS blocks mismatch");if(e!==(h+p)*l+(f+v)*a)throw new Qr("Total bytes mismatch");i<l?(s[0]=h,o[0]=p):(s[0]=f,o[0]=v)},n.interleaveWithECBytes=function(e,t,r,i){var s,o,a,l;if(e.getSizeInBytes()!==r)throw new Qr("Number of bits and data bytes does not match");for(var c=0,u=0,h=0,f=new Array,p=0;p<i;++p){var v=new Int32Array(1),_=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,p,v,_);var S=v[0],x=new Uint8Array(S);e.toBytes(8*c,x,0,S);var E=n.generateECBytes(x,_[0]);f.push(new hLe(x,E)),u=Math.max(u,S),h=Math.max(h,E.length),c+=v[0]}if(r!==c)throw new Qr("Data bytes does not match offset");for(var b=new As,p=0;p<u;++p)try{for(var M=(s=void 0,GV(f)),k=M.next();!k.done;k=M.next()){var B=k.value,x=B.getDataBytes();p<x.length&&b.appendBits(x[p],8)}}catch(I){s={error:I}}finally{try{k&&!k.done&&(o=M.return)&&o.call(M)}finally{if(s)throw s.error}}for(var p=0;p<h;++p)try{for(var P=(a=void 0,GV(f)),N=P.next();!N.done;N=P.next()){var B=N.value,E=B.getErrorCorrectionBytes();p<E.length&&b.appendBits(E[p],8)}}catch(I){a={error:I}}finally{try{N&&!N.done&&(l=P.return)&&l.call(P)}finally{if(a)throw a.error}}if(t!==b.getSizeInBytes())throw new Qr("Interleaving error: "+t+" and "+b.getSizeInBytes()+" differ.");return b},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),s=0;s<r;s++)i[s]=e[s]&255;new Kee(_a.QR_CODE_FIELD_256).encode(i,t);for(var o=new Uint8Array(t),s=0;s<t;s++)o[s]=i[r+s];return o},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var s=r.getCharacterCountBits(t);if(e>=1<<s)throw new Qr(e+" is bigger than "+((1<<s)-1));i.appendBits(e,s)},n.appendBytes=function(e,t,r,i){switch(t){case Jr.NUMERIC:n.appendNumericBytes(e,r);break;case Jr.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Jr.BYTE:n.append8BitBytes(e,r,i);break;case Jr.KANJI:n.appendKanjiBytes(e,r);break;default:throw new Qr("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var s=n.getDigit(e.charAt(i));if(i+2<r){var o=n.getDigit(e.charAt(i+1)),a=n.getDigit(e.charAt(i+2));t.appendBits(s*100+o*10+a,10),i+=3}else if(i+1<r){var o=n.getDigit(e.charAt(i+1));t.appendBits(s*10+o,7),i+=2}else t.appendBits(s,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var s=n.getAlphanumericCode(e.charCodeAt(i));if(s===-1)throw new Qr;if(i+1<r){var o=n.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new Qr;t.appendBits(s*45+o,11),i+=2}else t.appendBits(s,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=Cl.encode(e,r)}catch(l){throw new Qr(l)}for(var s=0,o=i.length;s!==o;s++){var a=i[s];t.appendBits(a,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=Cl.encode(e,as.SJIS)}catch(h){throw new Qr(h)}for(var i=r.length,s=0;s<i;s+=2){var o=r[s]&255,a=r[s+1]&255,l=o<<8&4294967295|a,c=-1;if(l>=33088&&l<=40956?c=l-33088:l>=57408&&l<=60351&&(c=l-49472),c===-1)throw new Qr("Invalid byte sequence");var u=(c>>8)*192+(c&255);t.appendBits(u,13)}},n.appendECI=function(e,t){t.appendBits(Jr.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=as.UTF8.getName(),n})();var dLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){dLe(e,n);function e(t,r,i,s,o,a,l,c){var u=n.call(this,a,l)||this;if(u.yuvData=t,u.dataWidth=r,u.dataHeight=i,u.left=s,u.top=o,s+a>r||o+l>i)throw new rn("Crop rectangle does not fit within image data.");return c&&u.reverseHorizontal(a,l),u}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new rn("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var s=(t+this.top)*this.dataWidth+this.left;return Wr.arraycopy(this.yuvData,s,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,s=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Wr.arraycopy(this.yuvData,o,s,0,i),s;for(var a=0;a<r;a++){var l=a*t;Wr.arraycopy(this.yuvData,o,s,l,t),o+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,s){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,s,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),s=this.yuvData,o=this.top*this.dataWidth+this.left,a=0;a<r;a++){for(var l=a*t,c=0;c<t;c++){var u=s[o+c*e.THUMBNAIL_SCALE_FACTOR]&255;i[l+c]=4278190080|u*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,s=0,o=this.top*this.dataWidth+this.left;s<r;s++,o+=this.dataWidth)for(var a=o+t/2,l=o,c=o+t-1;l<a;l++,c--){var u=i[l];i[l]=i[c],i[c]=u}},e.prototype.invert=function(){return new dC(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(rw);var fLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){fLe(e,n);function e(t,r,i,s,o,a,l){var c=n.call(this,r,i)||this;if(c.dataWidth=s,c.dataHeight=o,c.left=a,c.top=l,t.BYTES_PER_ELEMENT===4){for(var u=r*i,h=new Uint8ClampedArray(u),f=0;f<u;f++){var p=t[f],v=p>>16&255,_=p>>7&510,S=p&255;h[f]=(v+_+S)/4&255}c.luminances=h}else c.luminances=t;if(s===void 0&&(c.dataWidth=r),o===void 0&&(c.dataHeight=i),a===void 0&&(c.left=0),l===void 0&&(c.top=0),c.left+r>c.dataWidth||c.top+i>c.dataHeight)throw new rn("Crop rectangle does not fit within image data.");return c}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new rn("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var s=(t+this.top)*this.dataWidth+this.left;return Wr.arraycopy(this.luminances,s,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,s=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Wr.arraycopy(this.luminances,o,s,0,i),s;for(var a=0;a<r;a++){var l=a*t;Wr.arraycopy(this.luminances,o,s,l,t),o+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,s){return new e(this.luminances,i,s,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new dC(this)},e})(rw);var pLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mLe=function(n){pLe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(as),gLe=function(){function n(){}return n.ISO_8859_1=as.ISO8859_1,n}(),v3,vLe=301,yLe=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=vLe);return{LOG:n,ALOG:e}};v3=yLe([],[]),v3.LOG;v3.ALOG;var $V;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})($V||($V={}));var XV=129,Zee=230,xLe=231,_Le=235,wLe=236,SLe=237,ELe=238,bLe=239,ALe=240,vP=254,TLe=254,qV="[)>05",YV="[)>06",KV="",br=0,ks=1,Vo=2,is=3,ws=4,ho=5,CLe=function(){function n(){}return n.prototype.getEncodingMode=function(){return br},n.prototype.encode=function(e){var t=oc.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=oc.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case ho:e.writeCodeword(xLe),e.signalEncoderChange(ho);return;case ks:e.writeCodeword(Zee),e.signalEncoderChange(ks);return;case is:e.writeCodeword(ELe),e.signalEncoderChange(is);break;case Vo:e.writeCodeword(bLe),e.signalEncoderChange(Vo);break;case ws:e.writeCodeword(ALe),e.signalEncoderChange(ws);break;default:throw new Error("Illegal mode: "+i)}else oc.isExtendedASCII(r)?(e.writeCodeword(_Le),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(oc.isDigit(e)&&oc.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}(),MLe=function(){function n(){}return n.prototype.getEncodingMode=function(){return ho},n.prototype.encode=function(e){var t=new Un;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=oc.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(br);break}}var s=t.length()-1,o=1,a=e.getCodewordCount()+s+o;e.updateSymbolInfo(a);var l=e.getSymbolInfo().getDataCapacity()-a>0;if(e.hasMoreCharacters()||l)if(s<=249)t.setCharAt(0,tr.getCharAt(s));else if(s<=1555)t.setCharAt(0,tr.getCharAt(Math.floor(s/250)+249)),t.insert(1,tr.getCharAt(s%250));else throw new Error("Message length not in valid ranges: "+s);for(var c=0,r=t.length();c<r;c++)e.writeCodeword(this.randomize255State(t.charAt(c).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}(),G4=function(){function n(){}return n.prototype.getEncodingMode=function(){return ks},n.prototype.encodeMaximal=function(e){for(var t=new Un,r=0,i=e.pos,s=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,r=this.encodeChar(o,t),t.length()%3===0&&(i=e.pos,s=t.length())}if(s!==t.length()){var a=Math.floor(t.length()/3*2),l=Math.floor(e.getCodewordCount()+a+1);e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l,u=Math.floor(t.length()%3);(u===2&&c!==2||u===1&&(r>3||c!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(Zee),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new Un;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),s=Math.floor(t.length()/3)*2,o=e.getCodewordCount()+s;e.updateSymbolInfo(o);var a=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var l=new Un;for(t.length()%3===2&&a!==2&&(i=this.backtrackOneCharacter(e,t,l,i));t.length()%3===1&&(i>3||a!==1);)i=this.backtrackOneCharacter(e,t,l,i);break}var c=t.length();if(c%3===0){var u=oc.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(u!==this.getEncodingMode()){e.signalEncoderChange(br);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var s=t.length(),o=t.toString().substring(0,s-i);t.setLengthToZero(),t.append(o),e.pos--;var a=e.getCurrentChar();return i=this.encodeChar(a,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,s=e.getCodewordCount()+r;e.updateSymbolInfo(s);var o=e.getSymbolInfo().getDataCapacity()-s;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(vP)}else if(o===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(vP),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(o>0||e.hasMoreCharacters())&&e.writeCodeword(vP)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(br)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,s=new Un;return s.append(r),s.append(i),s.toString()},n}(),ILe=function(){function n(){}return n.prototype.getEncodingMode=function(){return ws},n.prototype.encode=function(e){for(var t=new Un;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var s=t.toString().substring(4);t.setLengthToZero(),t.append(s);var o=oc.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(br);break}}}t.append(tr.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),s=e.getRemainingCharacters();if(s>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),s<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var o=r-1,a=this.encodeToCodewords(t.toString()),l=!e.hasMoreCharacters(),c=l&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(c=!1,e.updateSymbolInfo(e.getCodewordCount()+a.length))}c?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(a)}finally{e.signalEncoderChange(br)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(tr.getCharAt(e-64)):oc.illegalCharacter(tr.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,s=t>=3?e.charAt(2).charCodeAt(0):0,o=t>=4?e.charAt(3).charCodeAt(0):0,a=(r<<18)+(i<<12)+(s<<6)+o,l=a>>16&255,c=a>>8&255,u=a&255,h=new Un;return h.append(l),t>=2&&h.append(c),t>=3&&h.append(u),h.toString()},n}(),PLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),RLe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pr=function(){function n(e,t,r,i,s,o,a,l){a===void 0&&(a=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=s,this.dataRegions=o,this.rsBlockData=a,this.rsBlockError=l}return n.lookup=function(e,t,r,i,s){var o,a;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),s===void 0&&(s=!0);try{for(var l=RLe(DLe),c=l.next();!c.done;c=l.next()){var u=c.value;if(!(t===1&&u.rectangular)&&!(t===2&&!u.rectangular)&&!(r!=null&&(u.getSymbolWidth()<r.getWidth()||u.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(u.getSymbolWidth()>i.getWidth()||u.getSymbolHeight()>i.getHeight()))&&e<=u.dataCapacity)return u}}catch(h){o={error:h}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}if(s)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),NLe=function(n){PLe(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(pr),DLe=[new pr(!1,3,5,8,8,1),new pr(!1,5,7,10,10,1),new pr(!0,5,7,16,6,1),new pr(!1,8,10,12,12,1),new pr(!0,10,11,14,6,2),new pr(!1,12,12,14,14,1),new pr(!0,16,14,24,10,1),new pr(!1,18,14,16,16,1),new pr(!1,22,18,18,18,1),new pr(!0,22,18,16,10,2),new pr(!1,30,20,20,20,1),new pr(!0,32,24,16,14,2),new pr(!1,36,24,22,22,1),new pr(!1,44,28,24,24,1),new pr(!0,49,28,22,14,2),new pr(!1,62,36,14,14,4),new pr(!1,86,42,16,16,4),new pr(!1,114,48,18,18,4),new pr(!1,144,56,20,20,4),new pr(!1,174,68,22,22,4),new pr(!1,204,84,24,24,4,102,42),new pr(!1,280,112,14,14,16,140,56),new pr(!1,368,144,16,16,16,92,36),new pr(!1,456,192,18,18,16,114,48),new pr(!1,576,224,20,20,16,144,56),new pr(!1,696,272,22,22,16,174,68),new pr(!1,816,336,24,24,16,136,56),new pr(!1,1050,408,18,18,36,175,68),new pr(!1,1304,496,20,20,36,163,62),new NLe],kLe=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(a){return a.charCodeAt(0)}),r=new Un,i=0,s=t.length;i<s;i++){var o=String.fromCharCode(t[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(o)}this.msg=r.toString(),this.shape=0,this.codewords=new Un,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=pr.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),OLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),LLe=function(n){OLe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return is},e.prototype.encode=function(t){for(var r=new Un;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var s=r.length();if(s%3===0){this.writeNextTriplet(t,r);var o=oc.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(br);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):oc.illegalCharacter(tr.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),s=r.length();t.pos-=s,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(TLe),t.getNewEncoding()<0&&t.signalEncoderChange(br)},e}(G4),FLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),BLe=function(n){FLe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Vo},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}(G4),oc=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=XV+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,s){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),s===void 0&&(s=!1);var o=new G4,a=[new CLe,o,new BLe,new LLe,new ILe,new MLe],l=new kLe(e);l.setSymbolShape(t),l.setSizeConstraints(r,i),e.startsWith(qV)&&e.endsWith(KV)?(l.writeCodeword(wLe),l.setSkipAtEnd(2),l.pos+=qV.length):e.startsWith(YV)&&e.endsWith(KV)&&(l.writeCodeword(SLe),l.setSkipAtEnd(2),l.pos+=YV.length);var c=br;for(s&&(o.encodeMaximal(l),c=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)a[c].encode(l),l.getNewEncoding()>=0&&(c=l.getNewEncoding(),l.resetEncoderSignal());var u=l.getCodewordCount();l.updateSymbolInfo();var h=l.getSymbolInfo().getDataCapacity();u<h&&c!==br&&c!==ho&&c!==ws&&l.writeCodeword("");var f=l.getCodewords();for(f.length()<h&&f.append(XV);f.length()<h;)f.append(this.randomize253State(f.length()+1));return l.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===is&&i===is){for(var s=Math.min(t+3,e.length),o=t;o<s;o++)if(!this.isNativeX12(e.charCodeAt(o)))return br}else if(r===ws&&i===ws){for(var s=Math.min(t+4,e.length),o=t;o<s;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return br}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===br?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var s=0,o=new Uint8Array(6),a=[];;){if(t+s===e.length){ls.fill(o,0),ls.fill(a,0);var l=this.findMinimums(i,a,Hn.MAX_VALUE,o),c=this.getMinimumCount(o);if(a[br]===l)return br;if(c===1){if(o[ho]>0)return ho;if(o[ws]>0)return ws;if(o[Vo]>0)return Vo;if(o[is]>0)return is}return ks}var u=e.charCodeAt(t+s);if(s++,this.isDigit(u)?i[br]+=.5:this.isExtendedASCII(u)?(i[br]=Math.ceil(i[br]),i[br]+=2):(i[br]=Math.ceil(i[br]),i[br]++),this.isNativeC40(u)?i[ks]+=2/3:this.isExtendedASCII(u)?i[ks]+=8/3:i[ks]+=4/3,this.isNativeText(u)?i[Vo]+=2/3:this.isExtendedASCII(u)?i[Vo]+=8/3:i[Vo]+=4/3,this.isNativeX12(u)?i[is]+=2/3:this.isExtendedASCII(u)?i[is]+=13/3:i[is]+=10/3,this.isNativeEDIFACT(u)?i[ws]+=3/4:this.isExtendedASCII(u)?i[ws]+=17/4:i[ws]+=13/4,this.isSpecialB256(u)?i[ho]+=4:i[ho]++,s>=4){if(ls.fill(o,0),ls.fill(a,0),this.findMinimums(i,a,Hn.MAX_VALUE,o),a[br]<this.min(a[ho],a[ks],a[Vo],a[is],a[ws]))return br;if(a[ho]<a[br]||a[ho]+1<this.min(a[ks],a[Vo],a[is],a[ws]))return ho;if(a[ws]+1<this.min(a[ho],a[ks],a[Vo],a[is],a[br]))return ws;if(a[Vo]+1<this.min(a[ho],a[ks],a[ws],a[is],a[br]))return Vo;if(a[is]+1<this.min(a[ho],a[ks],a[ws],a[Vo],a[br]))return is;if(a[ks]+1<this.min(a[br],a[ho],a[ws],a[Vo])){if(a[ks]<a[is])return ks;if(a[ks]===a[is]){for(var h=t+s+1;h<e.length;){var f=e.charCodeAt(h);if(this.isX12TermSep(f))return is;if(!this.isNativeX12(f))break;h++}return ks}}}}},n.min=function(e,t,r,i,s){var o=Math.min(e,Math.min(t,Math.min(r,i)));return s===void 0?o:Math.min(o,s)},n.findMinimums=function(e,t,r,i){for(var s=0;s<6;s++){var o=t[s]=Math.ceil(e[s]);r>o&&(r=o,ls.fill(i,0)),r===o&&(i[s]=i[s]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=Hn.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),yP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZV=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return Cl.encode(e,this.charset)!=null}catch{return!1}},n}(),ULe=function(){function n(e,t,r){var i,s,o,a,l,c;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(R){return new ZV(mLe.forName(R))}),this.encoders=[];var u=[];u.push(new ZV(gLe.ISO_8859_1));for(var h=t!=null&&t.name.startsWith("UTF"),f=0;f<e.length;f++){var p=!1;try{for(var v=(i=void 0,yP(u)),_=v.next();!_.done;_=v.next()){var S=_.value,x=e.charAt(f),E=x.charCodeAt(0);if(E===r||S.canEncode(x)){p=!0;break}}}catch(R){i={error:R}}finally{try{_&&!_.done&&(s=v.return)&&s.call(v)}finally{if(i)throw i.error}}if(!p)try{for(var b=(o=void 0,yP(this.ENCODERS)),M=b.next();!M.done;M=b.next()){var S=M.value;if(S.canEncode(e.charAt(f))){u.push(S),p=!0;break}}}catch(R){o={error:R}}finally{try{M&&!M.done&&(a=b.return)&&a.call(b)}finally{if(o)throw o.error}}p||(h=!0)}if(u.length===1&&!h)this.encoders=[u[0]];else{this.encoders=[];var k=0;try{for(var B=yP(u),P=B.next();!P.done;P=B.next()){var S=P.value;this.encoders[k++]=S}}catch(R){l={error:R}}finally{try{P&&!P.done&&(c=B.return)&&c.call(B)}finally{if(l)throw l.error}}}var N=-1;if(t!=null){for(var f=0;f<this.encoders.length;f++)if(this.encoders[f]!=null&&t.name===this.encoders[f].name){N=f;break}}this.priorityEncoderIndex=N}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Cl.encode(tr.getCharAt(e),this.encoders[t].name)},n}(),jLe=3,VLe=function(){function n(e,t,r){this.fnc1=r;var i=new ULe(e,t,r);if(i.length()===1)for(var s=0;s<this.bytes.length;s++){var o=e.charAt(s).charCodeAt(0);this.bytes[s]=o===r?1e3:o}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new Un,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,s,o){var a=e.charAt(i).charCodeAt(0),l=0,c=t.length();t.getPriorityEncoderIndex()>=0&&(a===o||t.canEncode(a,t.getPriorityEncoderIndex()))&&(l=t.getPriorityEncoderIndex(),c=l+1);for(var u=l;u<c;u++)(a===o||t.canEncode(a,u))&&this.addEdge(r,i+1,new QV(a,t,u,s,o))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,s=new QV[i+1][t.length()];this.addEdges(e,t,s,0,null,r);for(var o=1;o<=i;o++){for(var a=0;a<t.length();a++)s[o][a]!=null&&o<i&&this.addEdges(e,t,s,o,s[o][a],r);for(var a=0;a<t.length();a++)s[o-1][a]=null}for(var l=-1,c=Hn.MAX_VALUE,a=0;a<t.length();a++)if(s[i][a]!=null){var u=s[i][a];u.cachedTotalSize<c&&(c=u.cachedTotalSize,l=a)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var h=[],f=s[i][l];f!=null;){if(f.isFNC1())h.unshift(1e3);else for(var p=t.encode(f.c,f.encoderIndex),o=p.length-1;o>=0;o--)h.unshift(p[o]&255);var v=f.previous===null?0:f.previous.encoderIndex;v!==f.encoderIndex&&h.unshift(256+t.getECIValue(f.encoderIndex)),f=f.previous}for(var _=[],o=0;o<_.length;o++)_[o]=h[o];return _},n}(),QV=function(){function n(e,t,r,i,s){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=s,this.c=e===s?1e3:e;var o=this.isFNC1()?1:t.encode(e,r).length,a=i===null?0:i.encoderIndex;a!==r&&(o+=jLe),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),zLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var JV;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(JV||(JV={}));(function(n){zLe(e,n);function e(t,r,i,s,o){var a=n.call(this,t,r,i)||this;return a.shape=s,a.macroId=o,a}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(VLe);var HLe=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),e9=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),WLe=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),GLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$4=function(n){GLe(e,n);function e(t,r,i){var s=n.call(this,t)||this;return s.value=r,s.bitCount=i,s}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Hn.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(WLe),$Le=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),XLe=function(n){$Le(e,n);function e(t,r,i){var s=n.call(this,t,0,0)||this;return s.binaryShiftStart=r,s.binaryShiftByteCount=i,s}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}($4);function qLe(n,e,t){return new XLe(n,e,t)}function e1(n,e,t){return new $4(n,e,t)}var YLe=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],uf=0,fA=1,El=2,Qee=3,tu=4,KLe=new $4(null,0,0),xP=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],ZLe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function QLe(n){var e,t;try{for(var r=ZLe(n),i=r.next();!i.done;i=r.next()){var s=i.value;ls.fill(s,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[uf][tu]=0,n[fA][tu]=0,n[fA][uf]=28,n[Qee][tu]=0,n[El][tu]=0,n[El][uf]=15,n}var Jee=QLe(ls.createInt32Array(6,6)),JLe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eFe=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var s=xP[this.mode][e];i=e1(i,s&65535,s>>16),r+=s>>16}var o=e===El?4:5;return i=e1(i,t,o),new n(i,e,0,r+o)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===El?4:5;return r=e1(r,Jee[this.mode][e],i),r=e1(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===tu||this.mode===El){var s=xP[r][uf];t=e1(t,s&65535,s>>16),i+=s>>16,r=uf}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,a=new n(t,r,this.binaryShiftByteCount+1,i+o);return a.binaryShiftByteCount===2078&&(a=a.endBinaryShift(e+1)),a},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=qLe(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(xP[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],s=this.endBinaryShift(e.length).token;s!==null;s=s.getPrevious())i.unshift(s);var o=new As;try{for(var a=JLe(i),l=a.next();!l.done;l=a.next()){var c=l.value;c.appendTo(o,e)}}catch(u){t={error:u}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return o},n.prototype.toString=function(){return tr.format("%s bits=%d bytes=%d",YLe[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(KLe,uf,0,0),n}();function tFe(n){var e=tr.getCharCode(" "),t=tr.getCharCode("."),r=tr.getCharCode(",");n[uf][e]=1;for(var i=tr.getCharCode("Z"),s=tr.getCharCode("A"),o=s;o<=i;o++)n[uf][o]=o-s+2;n[fA][e]=1;for(var a=tr.getCharCode("z"),l=tr.getCharCode("a"),o=l;o<=a;o++)n[fA][o]=o-l+2;n[El][e]=1;for(var c=tr.getCharCode("9"),u=tr.getCharCode("0"),o=u;o<=c;o++)n[El][o]=o-u+2;n[El][r]=12,n[El][t]=13;for(var h=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],f=0;f<h.length;f++)n[Qee][tr.getCharCode(h[f])]=f;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],f=0;f<p.length;f++)tr.getCharCode(p[f])>0&&(n[tu][tr.getCharCode(p[f])]=f);return n}var _P=tFe(ls.createInt32Array(5,256)),xE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nFe=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=tr.getCharCode(" "),t=tr.getCharCode(`
`),r=e9.singletonList(eFe.INITIAL_STATE),i=0;i<this.text.length;i++){var s=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case tr.getCharCode("\r"):s=o===t?2:0;break;case tr.getCharCode("."):s=o===e?3:0;break;case tr.getCharCode(","):s=o===e?4:0;break;case tr.getCharCode(":"):s=o===e?5:0;break;default:s=0}s>0?(r=n.updateStateListForPair(r,i,s),i++):r=this.updateStateListForChar(r,i)}var a=e9.min(r,function(l,c){return l.getBitCount()-c.getBitCount()});return a.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,s=[];try{for(var o=xE(e),a=o.next();!a.done;a=o.next()){var l=a.value;this.updateStateForChar(l,t,s)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return n.simplifyStates(s)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,s=_P[e.getMode()][i]>0,o=null,a=0;a<=tu;a++){var l=_P[a][i];if(l>0){if(o==null&&(o=e.endBinaryShift(t)),!s||a===e.getMode()||a===El){var c=o.latchAndAppend(a,l);r.push(c)}if(!s&&Jee[e.getMode()][a]>=0){var u=o.shiftAndAppend(a,l);r.push(u)}}}if(e.getBinaryShiftByteCount()>0||_P[e.getMode()][i]===0){var h=e.addBinaryShiftChar(t);r.push(h)}},n.updateStateListForPair=function(e,t,r){var i,s,o=[];try{for(var a=xE(e),l=a.next();!l.done;l=a.next()){var c=l.value;this.updateStateForPair(c,t,r,o)}}catch(u){i={error:u}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}return this.simplifyStates(o)},n.updateStateForPair=function(e,t,r,i){var s=e.endBinaryShift(t);if(i.push(s.latchAndAppend(tu,r)),e.getMode()!==tu&&i.push(s.shiftAndAppend(tu,r)),r===3||r===4){var o=s.latchAndAppend(El,16-r).latchAndAppend(El,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var a=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(a)}},n.simplifyStates=function(e){var t,r,i,s,o=[];try{for(var a=xE(e),l=a.next();!l.done;l=a.next()){var c=l.value,u=!0,h=function(S){if(S.isBetterThanOrEqualTo(c))return u=!1,"break";c.isBetterThanOrEqualTo(S)&&(o=o.filter(function(x){return x!==S}))};try{for(var f=(i=void 0,xE(o)),p=f.next();!p.done;p=f.next()){var v=p.value,_=h(v);if(_==="break")break}}catch(S){i={error:S}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}u&&o.push(c)}}catch(S){t={error:S}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return o},n}(),rFe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new nFe(e).encode(),s=Hn.truncDivision(i.getSize()*t,100)+11,o=i.getSize()+s,a,l,c,u,h;if(r!==n.DEFAULT_AZTEC_LAYERS){if(a=r<0,l=Math.abs(r),l>(a?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new rn(tr.format("Illegal value %s for layers",r));c=n.totalBitsInLayer(l,a),u=n.WORD_SIZE[l];var f=c-c%u;if(h=n.stuffBits(i,u),h.getSize()+s>f)throw new rn("Data to large for user specified layer");if(a&&h.getSize()>u*64)throw new rn("Data to large for user specified layer")}else{u=0,h=null;for(var p=0;;p++){if(p>n.MAX_NB_BITS)throw new rn("Data too large for an Aztec code");if(a=p<=3,l=a?p+1:p,c=n.totalBitsInLayer(l,a),!(o>c)){(h==null||u!==n.WORD_SIZE[l])&&(u=n.WORD_SIZE[l],h=n.stuffBits(i,u));var f=c-c%u;if(!(a&&h.getSize()>u*64)&&h.getSize()+s<=f)break}}}var v=n.generateCheckWords(h,c,u),_=h.getSize()/u,S=n.generateModeMessage(a,l,_),x=(a?11:14)+l*4,E=new Int32Array(x),b;if(a){b=x;for(var p=0;p<E.length;p++)E[p]=p}else{b=x+1+2*Hn.truncDivision(Hn.truncDivision(x,2)-1,15);for(var M=Hn.truncDivision(x,2),k=Hn.truncDivision(b,2),p=0;p<M;p++){var B=p+Hn.truncDivision(p,15);E[M-p-1]=k-B-1,E[M+p]=k+B+1}}for(var P=new wu(b),p=0,N=0;p<l;p++){for(var R=(l-p)*4+(a?9:12),I=0;I<R;I++)for(var U=I*2,H=0;H<2;H++)v.get(N+U+H)&&P.set(E[p*2+H],E[p*2+I]),v.get(N+R*2+U+H)&&P.set(E[p*2+I],E[x-1-p*2-H]),v.get(N+R*4+U+H)&&P.set(E[x-1-p*2-H],E[x-1-p*2-I]),v.get(N+R*6+U+H)&&P.set(E[x-1-p*2-I],E[p*2+H]);N+=R*8}if(n.drawModeMessage(P,a,b,S),a)n.drawBullsEye(P,Hn.truncDivision(b,2),5);else{n.drawBullsEye(P,Hn.truncDivision(b,2),7);for(var p=0,I=0;p<Hn.truncDivision(x,2)-1;p+=15,I+=16)for(var H=Hn.truncDivision(b,2)&1;H<b;H+=2)P.set(Hn.truncDivision(b,2)-I,H),P.set(Hn.truncDivision(b,2)+I,H),P.set(H,Hn.truncDivision(b,2)-I),P.set(H,Hn.truncDivision(b,2)+I)}var W=new HLe;return W.setCompact(a),W.setSize(b),W.setLayers(l),W.setCodeWords(_),W.setMatrix(P),W},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var s=t-i;s<=t+i;s++)e.set(s,t-i),e.set(s,t+i),e.set(t-i,s),e.set(t+i,s);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new As;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var s=Hn.truncDivision(r,2);if(t)for(var o=0;o<7;o++){var a=s-3+o;i.get(o)&&e.set(a,s-5),i.get(o+7)&&e.set(s+5,a),i.get(20-o)&&e.set(a,s+5),i.get(27-o)&&e.set(s-5,a)}else for(var o=0;o<10;o++){var a=s-5+o+Hn.truncDivision(o,5);i.get(o)&&e.set(a,s-7),i.get(o+10)&&e.set(s+7,a),i.get(29-o)&&e.set(a,s+7),i.get(39-o)&&e.set(s-7,a)}},n.generateCheckWords=function(e,t,r){var i,s,o=e.getSize()/r,a=new Kee(n.getGF(r)),l=Hn.truncDivision(t,r),c=n.bitsToWords(e,r,l);a.encode(c,l-o);var u=t%r,h=new As;h.appendBits(0,u);try{for(var f=rFe(Array.from(c)),p=f.next();!p.done;p=f.next()){var v=p.value;h.appendBits(v,r)}}catch(_){i={error:_}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}return h},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),s,o;for(s=0,o=e.getSize()/t;s<o;s++){for(var a=0,l=0;l<t;l++)a|=e.get(s*t+l)?1<<t-l-1:0;i[s]=a}return i},n.getGF=function(e){switch(e){case 4:return _a.AZTEC_PARAM;case 6:return _a.AZTEC_DATA_6;case 8:return _a.AZTEC_DATA_8;case 10:return _a.AZTEC_DATA_10;case 12:return _a.AZTEC_DATA_12;default:throw new rn("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new As,i=e.getSize(),s=(1<<t)-2,o=0;o<i;o+=t){for(var a=0,l=0;l<t;l++)(o+l>=i||e.get(o+l))&&(a|=1<<t-1-l);(a&s)===s?(r.appendBits(a&s,t),o--):a&s?r.appendBits(a,t):(r.appendBits(a|1,t),o--)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var iFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sFe=function(n){iFe(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var s=new Uint8ClampedArray(r*i),o=0,a=0,l=t.length;o<l;o+=4,a++){var c=void 0,u=t[o+3];if(u===0)c=255;else{var h=t[o],f=t[o+1],p=t[o+2];c=306*h+601*f+117*p+512>>10}s[a]=c}return s},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new rn("Requested row is outside the image: "+t);var i=this.getWidth(),s=t*i;return r===null?r=this.buffer.slice(s,s+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(s,s+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,s){return n.prototype.crop.call(this,t,r,i,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new dC(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,o=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(i))*s+Math.abs(Math.sin(i))*o),l=Math.ceil(Math.abs(Math.sin(i))*s+Math.abs(Math.cos(i))*o);r.width=a,r.height=l;var c=r.getContext("2d");if(!c)throw new Error("Could not create a Canvas Context element.");return c.translate(a/2,l/2),c.rotate(i),c.drawImage(this.canvas,s/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(rw);function ete(){return typeof navigator<"u"}function oFe(){return ete()&&!!navigator.mediaDevices}function aFe(){return!!(oFe()&&navigator.mediaDevices.enumerateDevices)}var _0=function(){return _0=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},_0.apply(this,arguments)},hi=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},di=function(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},wP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lFe={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},oy=function(){function n(e,t,r){t===void 0&&(t=new Map),r===void 0&&(r={}),this.reader=e,this.hints=t,this.options=_0(_0({},lFe),r)}return Object.defineProperty(n.prototype,"possibleFormats",{set:function(e){this.hints.set(Gr.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),n.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},n.mediaStreamSetTorch=function(e,t){return hi(this,void 0,void 0,function(){return di(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2]}})})},n.mediaStreamIsTorchCompatible=function(e){var t,r,i=e.getVideoTracks();try{for(var s=wP(i),o=s.next();!o.done;o=s.next()){var a=o.value;if(n.mediaStreamIsTorchCompatibleTrack(a))return!0}}catch(l){t={error:l}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return!1},n.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},n.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},n.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new Oi("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new Oi("element with id '".concat(e,"' must be an ").concat(t," element"));return r},n.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return n.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},n.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return n.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},n.prepareVideoElement=function(e){var t=n.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.createBinaryBitmapFromCanvas=function(e){var t=new sFe(e),r=new Bee(t);return new Fee(r)},n.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},n.createCaptureCanvas=function(e){if(!e)throw new Oi("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),r=n.getMediaElementDimensions(e),i=r.width,s=r.height;return t.style.width=i+"px",t.style.height=s+"px",t.width=i,t.height=s,t},n.tryPlayVideo=function(e){return hi(this,void 0,void 0,function(){var t;return di(this,function(r){switch(r.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(n.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return t=r.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},n.createCanvasFromMediaElement=function(e){var t=n.createCaptureCanvas(e),r=t.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return n.drawImageOnCanvas(r,e),t},n.createBinaryBitmapFromMediaElem=function(e){var t=n.createCanvasFromMediaElement(e);return n.createBinaryBitmapFromCanvas(t)},n.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},n.listVideoInputDevices=function(){return hi(this,void 0,void 0,function(){var e,t,r,i,s,o,a,l,c,u,h,f;return di(this,function(p){switch(p.label){case 0:if(!ete())throw new Error("Can't enumerate devices, navigator is not present.");if(!aFe())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),t=[];try{for(r=wP(e),i=r.next();!i.done;i=r.next())s=i.value,o=s.kind==="video"?"videoinput":s.kind,o==="videoinput"&&(a=s.deviceId||s.id,l=s.label||"Video device ".concat(t.length+1),c=s.groupId,u={deviceId:a,label:l,kind:o,groupId:c},t.push(u))}catch(v){h={error:v}}finally{try{i&&!i.done&&(f=r.return)&&f.call(r)}finally{if(h)throw h.error}}return[2,t]}})})},n.findDeviceById=function(e){return hi(this,void 0,void 0,function(){var t;return di(this,function(r){switch(r.label){case 0:return[4,n.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},n.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},n.releaseAllStreams=function(){n.streamTracker.length!==0&&n.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),n.streamTracker=[]},n.playVideoOnLoadAsync=function(e,t){return hi(this,void 0,void 0,function(){var r;return di(this,function(i){switch(i.label){case 0:return[4,n.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(s,o){var a=setTimeout(function(){n.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",l))},t),l=function(){n.tryPlayVideo(e).then(function(c){clearTimeout(a),e.removeEventListener("canplay",l),s(c)})};e.addEventListener("canplay",l)})]}})})},n.attachStreamToVideo=function(e,t,r){return r===void 0&&(r=5e3),hi(this,void 0,void 0,function(){var i;return di(this,function(s){switch(s.label){case 0:return i=n.prepareVideoElement(t),n.addVideoSource(i,e),[4,n.playVideoOnLoadAsync(i,r)];case 1:return s.sent(),[2,i]}})})},n._waitImageLoad=function(e){return new Promise(function(t,r){var i=1e4,s=setTimeout(function(){n.isImageLoaded(e)||(e.removeEventListener("load",o),r())},i),o=function(){clearTimeout(s),e.removeEventListener("load",o),t()};e.addEventListener("load",o)})},n.checkCallbackFnOrThrow=function(e){if(!e)throw new Oi("`callbackFn` is a required parameter, you cannot capture results without it.")},n.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},n.prototype.decode=function(e){var t=n.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},n.prototype.decodeFromCanvas=function(e){var t=n.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},n.prototype.decodeFromImageElement=function(e){return hi(this,void 0,void 0,function(){var t;return di(this,function(r){switch(r.label){case 0:if(!e)throw new Oi("An image element must be provided.");return t=n.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeFromImageUrl=function(e){return hi(this,void 0,void 0,function(){var t;return di(this,function(r){switch(r.label){case 0:if(!e)throw new Oi("An URL must be provided.");t=n.prepareImageElement(),t.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,r.sent()];case 3:return n.destroyImageElement(t),[7];case 4:return[2]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return hi(this,void 0,void 0,function(){var i,s;return di(this,function(o){switch(o.label){case 0:return n.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,r)];case 3:return[2,o.sent()];case 4:throw s=o.sent(),n.disposeMediaStream(i),s;case 5:return[2]}})})},n.prototype.decodeFromStream=function(e,t,r){return hi(this,void 0,void 0,function(){var i,s,o,a,l,c,u,h,f,p=this;return di(this,function(v){switch(v.label){case 0:return n.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,n.attachStreamToVideo(e,t,i)];case 1:return s=v.sent(),o=function(){n.disposeMediaStream(e),n.cleanVideoSource(s)},a=this.scan(s,r,o),l=e.getVideoTracks(),c=_0(_0({},a),{stop:function(){a.stop()},streamVideoConstraintsApply:function(_,S){return hi(this,void 0,void 0,function(){var x,E,b,M,k,B,P;return di(this,function(N){switch(N.label){case 0:x=S?l.filter(S):l,N.label=1;case 1:N.trys.push([1,6,7,8]),E=wP(x),b=E.next(),N.label=2;case 2:return b.done?[3,5]:(M=b.value,[4,M.applyConstraints(_)]);case 3:N.sent(),N.label=4;case 4:return b=E.next(),[3,2];case 5:return[3,8];case 6:return k=N.sent(),B={error:k},[3,8];case 7:try{b&&!b.done&&(P=E.return)&&P.call(E)}finally{if(B)throw B.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(_){return l.find(_).getConstraints()},streamVideoSettingsGet:function(_){return l.find(_).getSettings()},streamVideoCapabilitiesGet:function(_){return l.find(_).getCapabilities()}}),u=n.mediaStreamIsTorchCompatible(e),u&&(h=l==null?void 0:l.find(function(_){return n.mediaStreamIsTorchCompatibleTrack(_)}),f=function(_){return hi(p,void 0,void 0,function(){return di(this,function(S){switch(S.label){case 0:return[4,n.mediaStreamSetTorch(h,_)];case 1:return S.sent(),[2]}})})},c.switchTorch=f,c.stop=function(){return hi(p,void 0,void 0,function(){return di(this,function(_){switch(_.label){case 0:return a.stop(),[4,f(!1)];case 1:return _.sent(),[2]}})})}),[2,c]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return hi(this,void 0,void 0,function(){var i,s;return di(this,function(o){switch(o.label){case 0:return n.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},s={video:i},[4,this.decodeFromConstraints(s,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromVideoElement=function(e,t){return hi(this,void 0,void 0,function(){var r,i;return di(this,function(s){switch(s.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new Oi("A video element must be provided.");return r=n.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,i)];case 1:return s.sent(),[2,this.scan(r,t)]}})})},n.prototype.decodeFromVideoUrl=function(e,t){return hi(this,void 0,void 0,function(){var r,i,s,o;return di(this,function(a){switch(a.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new Oi("An URL must be provided.");return r=n.prepareVideoElement(),r.src=e,i=function(){n.cleanVideoSource(r)},s=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,s)];case 1:return a.sent(),o=this.scan(r,t,i),[2,o]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return hi(this,void 0,void 0,function(){var r;return di(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return hi(this,void 0,void 0,function(){var r,i,s;return di(this,function(o){switch(o.label){case 0:return r=!!t,[4,n.attachStreamToVideo(e,t)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return s=o.sent(),[2,s];case 4:return r||n.cleanVideoSource(i),[7];case 5:return[2]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return hi(this,void 0,void 0,function(){var r,i;return di(this,function(s){switch(s.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,s.sent()]}})})},n.prototype.decodeOnceFromVideoElement=function(e){return hi(this,void 0,void 0,function(){var t,r;return di(this,function(i){switch(i.label){case 0:if(!e)throw new Oi("A video element must be provided.");return t=n.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(t,r)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromVideoUrl=function(e){return hi(this,void 0,void 0,function(){var t,r;return di(this,function(i){switch(i.label){case 0:if(!e)throw new Oi("An URL must be provided.");t=n.prepareVideoElement(),t.src=e,r=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return n.cleanVideoSource(t),[7];case 4:return[2]}})})},n.prototype.scanOneResult=function(e,t,r,i){var s=this;return t===void 0&&(t=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(o,a){s.scan(e,function(l,c,u){if(l){o(l),u.stop();return}if(c){if(c instanceof $e&&t||c instanceof Xi&&r||c instanceof vt&&i)return;u.stop(),a(c)}})})},n.prototype.scan=function(e,t,r){var i=this;n.checkCallbackFnOrThrow(t);var s=n.createCaptureCanvas(e),o;try{o=s.getContext("2d",{willReadFrequently:!0})}catch{o=s.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var a=function(){o=void 0,s=void 0},l=!1,c,u=function(){l=!0,clearTimeout(c),a(),r&&r()},h={stop:u},f=function(){if(!l)try{n.drawImageOnCanvas(o,e);var p=i.decodeFromCanvas(s);t(p,void 0,h),c=setTimeout(f,i.options.delayBetweenScanSuccess)}catch(x){t(void 0,x,h);var v=x instanceof Xi,_=x instanceof vt,S=x instanceof $e;if(v||_||S){c=setTimeout(f,i.options.delayBetweenScanAttempts);return}a(),r&&r(x)}};return f(),h},n.prototype._decodeOnLoadImage=function(e){return hi(this,void 0,void 0,function(){var t;return di(this,function(r){switch(r.label){case 0:return t=n.isImageLoaded(e),t?[3,2]:[4,n._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},n.prototype.getUserMedia=function(e){return hi(this,void 0,void 0,function(){var t;return di(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=r.sent(),n.streamTracker.push(t),[2,t]}})})},n.streamTracker=[],n}(),cFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){cFe(e,n);function e(t,r){return n.call(this,new lA,t,r)||this}return e})(oy);var uFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){uFe(e,n);function e(t,r){return n.call(this,new y0(t),t,r)||this}return e})(oy);var hFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){hFe(e,n);function e(t,r){return n.call(this,new uA,t,r)||this}return e})(oy);var dFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fFe=function(n){dFe(e,n);function e(t,r){var i=this,s=new Yee;return s.setHints(t),i=n.call(this,s,t,r)||this,i.reader=s,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(Gr.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e}(oy),pFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){pFe(e,n);function e(t,r){return n.call(this,new dA,t,r)||this}return e})(oy);var mFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){mFe(e,n);function e(t,r){return n.call(this,new hA,t,r)||this}return e})(oy);function gFe(){const[n,e]=O.useState(""),[t,r]=O.useState(null),[i,s]=O.useState(""),o=O.useRef(null);return O.useEffect(()=>{const a=new fFe;let l=!0;return a.decodeFromVideoDevice(void 0,o.current,async(c,u)=>{if(l)if(c){const h=c.getText();e(h);try{const f=await YK("nomorregistrasi",h);f?(r(f),s("")):(r(null),s("Data anggota tidak ditemukan!"))}catch{r(null),s("Gagal mengambil data anggota!")}}else u&&u.name&&!u.name.includes("NotFoundException")&&s("Gagal membaca barcode: "+u)}),()=>{l=!1}},[]),m.jsxs("div",{className:"max-w-5xl mx-auto py-10 p-2 sm:p-4",children:[m.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Scan Barcode Kartu Anggota"}),m.jsxs("div",{className:"flex justify-center mb-8",children:[m.jsxs("div",{className:"relative w-full sm:w-96 h-64 border rounded flex items-center justify-center bg-black overflow-hidden",children:[m.jsx("video",{ref:o,className:"w-full h-full object-cover"}),m.jsxs("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none flex flex-col justify-center items-center",children:[m.jsx("div",{className:"w-3/4 h-0.5 bg-red-500 rounded-full shadow-lg animate-pulse",style:{boxShadow:"0 0 8px 2px #ef4444"}}),m.jsx("div",{className:"absolute left-0 w-full h-1 bg-red-400 opacity-60 animate-scanner",style:{top:"50%"}})]})]}),m.jsx("style",{children:`
          @keyframes scanner {
            0% { top: 10%; }
            50% { top: 90%; }
            100% { top: 10%; }
          }
          .animate-scanner {
            animation: scanner 2s infinite;
          }
        `})]}),n&&m.jsxs("div",{className:"mt-4 text-center",children:[m.jsx("span",{className:"font-semibold",children:"Nomor Registrasi Pokok:"})," ",n]}),t?m.jsxs(Tl,{className:"p-2 sm:p-6 mt-8",children:[m.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-center mb-4 sm:mb-6",children:"Verifikasi Kartu Anggota"}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 sm:gap-8 mb-4 sm:mb-8",children:[m.jsxs("div",{className:"flex flex-col items-center justify-center w-full sm:w-1/2 relative",id:"member-card-front",children:[t.statusMahasiswa==="Aktif"&&m.jsx(yr.span,{initial:{opacity:.7,textShadow:"0 0 0px #22c55e"},animate:{opacity:[.7,1,.7],textShadow:["0 0 0px #22c55e","0 0 12px #22c55e, 0 0 24px #16a34a","0 0 0px #22c55e"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute top-3 right-2 z-10 px-3 py-1 rounded-full font-bold text-sm select-none",style:{color:"#22c55e"},children:" Mahasiswa Aktif"}),t.photoUrl?m.jsx("div",{className:"p-2 border-2 border-gray-400 rounded-lg",children:m.jsx("img",{src:t.photoUrl,alt:"Kartu Anggota",className:"rounded-lg shadow-lg max-w-full h-auto"})}):m.jsx("div",{className:"p-2 border-2 border-gray-400 rounded-lg w-full flex items-center justify-center min-h-[275px]",children:m.jsx("span",{className:"text-gray-400 text-center",children:"Kartu anggota tidak tersedia."})})]}),m.jsxs("div",{className:"w-full sm:w-1/2",children:[m.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"Detail Anggota"}),m.jsxs("div",{className:"divide-y text-xs sm:text-base",children:[m.jsxs("div",{className:"flex justify-between py-2",children:[m.jsx("span",{className:"font-medium",children:"Nama Lengkap"}),m.jsx("span",{children:t.fullName})]}),m.jsxs("div",{className:"flex justify-between py-2",children:[m.jsx("span",{className:"font-medium",children:"Nomor Registrasi"}),m.jsx("span",{children:t.nomorregistrasi||t.registrationNumber})]}),m.jsxs("div",{className:"flex justify-between py-2",children:[m.jsx("span",{className:"font-medium",children:"Nama Lapangan"}),m.jsx("span",{children:t.fieldName})]}),m.jsxs("div",{className:"flex justify-between py-2",children:[m.jsx("span",{className:"font-medium",children:"Nama Angkatan"}),m.jsx("span",{children:t.batchName})]}),m.jsxs("div",{className:"flex justify-between py-2",children:[m.jsx("span",{className:"font-medium",children:"Tahun Angkatan"}),m.jsx("span",{children:t.batchYear})]}),m.jsxs("div",{className:"flex justify-between py-2",children:[m.jsx("span",{className:"font-medium",children:"Keanggotaan"}),m.jsx("span",{children:t.membershipStatus})]})]})]})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 sm:mt-8 text-xs text-gray-500 gap-2",children:[m.jsxs("span",{children:[" ",new Date().getFullYear()," Mahapala Narotama"]}),m.jsx("span",{children:"www.mahapalanarotama.web.id"})]})]}):i?m.jsx("div",{className:"text-red-500 text-center",children:i}):null]})}function vFe(){const[n]=R_();return O.useEffect(()=>{window.scrollTo({top:0,behavior:"auto"})},[n]),null}function yFe(){O.useEffect(()=>{function n(t={}){const r=t&&t.element,i=r||document.body,s=["","",""];let o=window.innerWidth,a=window.innerHeight,l={x:o/2,y:o/2},c=[],u,h,f,p=[];const v=window.matchMedia("(prefers-reduced-motion: reduce)");v.onchange=()=>{v.matches?P():_()};function _(){if(v.matches)return!1;u=document.createElement("canvas"),h=u.getContext("2d"),u.style.top="0px",u.style.left="0px",u.style.pointerEvents="none",r?(u.style.position="absolute",i.appendChild(u),u.width=i.clientWidth,u.height=i.clientHeight):(u.style.position="fixed",document.body.appendChild(u),u.width=o,u.height=a),h&&(h.font="20px serif",h.textBaseline="middle",h.textAlign="center",s.forEach(R=>{if(!h)return;let I=h.measureText(R),U=document.createElement("canvas"),H=U.getContext("2d");U.width=I.width,U.height=(I.actualBoundingBoxAscent||20)*2,H&&(H.textAlign="center",H.font="20px serif",H.textBaseline="middle",H.fillText(R,U.width/2,I.actualBoundingBoxAscent||20),p.push(U))}),S(),B())}function S(){i.addEventListener("mousemove",b),i.addEventListener("touchmove",E,{passive:!0}),i.addEventListener("touchstart",E,{passive:!0}),window.addEventListener("resize",x)}function x(R){o=window.innerWidth,a=window.innerHeight,r?(u.width=i.clientWidth,u.height=i.clientHeight):(u.width=o,u.height=a)}function E(R){if(R.touches.length>0)for(let I=0;I<R.touches.length;I++)M(R.touches[I].clientX,R.touches[I].clientY,p[Math.floor(Math.random()*p.length)])}function b(R){if(r){const I=i.getBoundingClientRect();l.x=R.clientX-I.left,l.y=R.clientY-I.top}else l.x=R.clientX,l.y=R.clientY;M(l.x,l.y,p[Math.floor(Math.random()*p.length)])}function M(R,I,U){c.push(new N(R,I,U))}function k(){if(!(!h||c.length===0)){h.clearRect(0,0,o,a);for(let R=0;R<c.length;R++)c[R].update(h);for(let R=c.length-1;R>=0;R--)c[R].lifeSpan<0&&c.splice(R,1);c.length===0&&h&&h.clearRect(0,0,o,a)}}function B(){k(),f=requestAnimationFrame(B)}function P(){u&&u.parentNode&&u.parentNode.removeChild(u),cancelAnimationFrame(f),i.removeEventListener("mousemove",b),i.removeEventListener("touchmove",E),i.removeEventListener("touchstart",E),window.removeEventListener("resize",x)}class N{constructor(I,U,H){rg(this,"position");rg(this,"velocity");rg(this,"lifeSpan");rg(this,"initialLifeSpan");rg(this,"canv");const W=Math.floor(Math.random()*60+80);this.initialLifeSpan=W,this.lifeSpan=W,this.velocity={x:(Math.random()<.5?-1:1)*(Math.random()/2),y:1+Math.random()},this.position={x:I,y:U},this.canv=H}update(I){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.x+=(Math.random()<.5?-1:1)*2/75,this.velocity.y-=Math.random()/300,this.lifeSpan--;const U=Math.max(this.lifeSpan/this.initialLifeSpan,0),W=2*this.lifeSpan*.0174533;I.save(),I.translate(this.position.x,this.position.y),I.rotate(W),I.drawImage(this.canv,-this.canv.width/2*U,-this.canv.height/2,this.canv.width*U,this.canv.height*U),I.rotate(-W),I.translate(-this.position.x,-this.position.y),I.restore()}}return _(),{destroy:P}}const e=n();return()=>e.destroy()},[])}function X4({url:n,label:e}){return m.jsxs("a",{href:n,download:!0,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-green-600 to-green-400 text-white font-semibold shadow hover:from-green-700 hover:to-green-500 transition mb-4",style:{textDecoration:"none"},children:[m.jsx(R$,{className:"w-5 h-5"}),e]})}function xFe(){return m.jsxs("section",{className:"bg-white/90 rounded-2xl shadow-xl p-6 mb-4 text-gray-800",children:[m.jsx(X4,{url:"/panduan-survival.pdf",label:"Download Buku Panduan Survival"}),m.jsx("h2",{className:"text-2xl font-bold mb-3 text-green-800",children:"Panduan Survival Dasar"}),m.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-lg",children:[m.jsx("li",{children:"Tenang, jangan panik. Analisa situasi dan sumber daya sekitar."}),m.jsx("li",{children:"Cari sumber air bersih dan buat perlindungan (bivak/shelter)."}),m.jsx("li",{children:"Jaga suhu tubuh, hindari hipotermia/heatstroke."}),m.jsx("li",{children:"Gunakan api untuk sinyal, hangat, dan memasak."}),m.jsx("li",{children:"Manfaatkan alat survival: kompas, pisau, peluit, senter, dsb."}),m.jsx("li",{children:"Catat lokasi terakhir dan buat tanda jejak jika berpindah."})]})]})}function _Fe(){const[n,e]=O.useState(0),[t,r]=O.useState(!1);function i(){r(!0),e(0)}function s(){e(o=>o+1)}return m.jsxs("section",{className:"bg-white/90 rounded-2xl shadow-xl p-6 mb-4 text-gray-800",children:[m.jsx(X4,{url:"/ppgd.pdf",label:"Download Buku PPGD"}),m.jsx("h2",{className:"text-2xl font-bold mb-3 text-green-800",children:"PPGD (Pertolongan Pertama Gawat Darurat)"}),m.jsxs("ol",{className:"list-decimal pl-5 space-y-2 mb-4 text-lg",children:[m.jsx("li",{children:"Pastikan keamanan lokasi sebelum menolong."}),m.jsx("li",{children:"Periksa respons korban: sadar/tidak, napas, denyut nadi."}),m.jsx("li",{children:"Lakukan RJP (Resusitasi Jantung Paru) jika perlu."}),m.jsx("li",{children:"Hentikan perdarahan, atasi syok, imobilisasi patah tulang."}),m.jsx("li",{children:"Gunakan alat P3K, jaga kebersihan luka."}),m.jsx("li",{children:"Segera cari bantuan medis jika kondisi berat."})]}),m.jsxs("div",{className:"bg-green-100 rounded-lg p-4 mb-2 shadow",children:[m.jsx("h3",{className:"font-semibold mb-2 text-green-700",children:"Simulasi RJP"}),t?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"mb-2",children:"Tekan tombol di bawah ini sebanyak 30x untuk simulasi kompresi dada!"}),m.jsxs("button",{className:"btn-nav mb-2",onClick:s,children:["Tekan Dada (",n,"/30)"]}),n>=30&&m.jsx("div",{className:"text-green-700 font-bold",children:"Simulasi selesai! Segera lakukan napas bantuan."})]}):m.jsx("button",{className:"btn-nav",onClick:i,children:"Mulai Simulasi RJP"})]})]})}function wFe(){const[n,e]=O.useState("Tidak tersedia");return O.useEffect(()=>{function t(r){if(r.absolute&&typeof r.alpha=="number"){const i=Math.round(r.alpha);e(`${i} (Utara: 0)`)}}return window.addEventListener("deviceorientationabsolute",t),window.addEventListener("deviceorientation",t),()=>{window.removeEventListener("deviceorientationabsolute",t),window.removeEventListener("deviceorientation",t)}},[]),m.jsxs("section",{className:"bg-white/90 rounded-2xl shadow-xl p-6 mb-4 text-gray-800",children:[m.jsx(X4,{url:"/navigasi-darat.pdf",label:"Download Buku Navigasi Darat"}),m.jsx("h2",{className:"text-2xl font-bold mb-3 text-green-800",children:"Navigasi Darat"}),m.jsxs("ul",{className:"list-disc pl-5 space-y-2 mb-4 text-lg",children:[m.jsx("li",{children:"Gunakan peta topografi dan kompas untuk orientasi."}),m.jsx("li",{children:"Kenali tanda alam: matahari, bintang, arah angin, vegetasi."}),m.jsx("li",{children:"Buat rencana perjalanan dan catat titik penting di jalur."}),m.jsx("li",{children:"Hindari berjalan sendirian, selalu informasikan posisi ke tim."}),m.jsx("li",{children:"Gunakan GPS jika tersedia, tapi tetap siapkan navigasi manual."})]}),m.jsxs("div",{className:"bg-green-100 rounded-lg p-4 shadow",children:[m.jsx("h3",{className:"font-semibold mb-2 text-green-700",children:"Simulasi Kompas"}),m.jsxs("div",{className:"text-lg",children:["Arah Utara: ",m.jsx("span",{className:"font-bold",children:n})]}),m.jsx("div",{className:"text-green-600 text-xs mt-2",children:"(Fitur ini hanya akurat di HP dengan sensor kompas)"})]})]})}function SFe(){const n=["Kompas","Bivak/Shelter","Peluit","Pisau","Senter/Headlamp","Makanan Cadangan","P3K","Botol Air","Jas Hujan","Tali Paracord","Pakaian Cadangan","Korek Api/Firestarter"],[e,t]=O.useState(()=>{const s=localStorage.getItem("survival_checklist");return s?JSON.parse(s):Array(n.length).fill(!1)});function r(s){const o=[...e];o[s]=!o[s],t(o),localStorage.setItem("survival_checklist",JSON.stringify(o))}function i(){const s=Array(n.length).fill(!1);t(s),localStorage.setItem("survival_checklist",JSON.stringify(s))}return m.jsxs("section",{className:"bg-white/90 rounded-2xl shadow-xl p-6 mb-4 text-gray-800",children:[m.jsx("h2",{className:"text-2xl font-bold mb-3 text-green-800",children:"Checklist Survival"}),m.jsx("ul",{className:"space-y-3",children:n.map((s,o)=>m.jsxs("li",{className:"flex items-center gap-3",children:[m.jsx("input",{type:"checkbox",id:s,checked:e[o],onChange:()=>r(o)}),m.jsx("label",{htmlFor:s,className:"text-lg select-none",children:s})]},s))}),m.jsx("button",{className:"btn-nav mt-4",onClick:i,children:"Reset Checklist"}),m.jsx("p",{className:"mt-2 text-green-200 text-sm",children:"Checklist tersimpan otomatis di perangkat Anda."})]})}function EFe(){const[n,e]=O.useState(!1),[t,r]=O.useState(""),[i,s]=O.useState(()=>{const v=localStorage.getItem("gps_track");return v?JSON.parse(v):[]}),[o,a]=O.useState(""),[l,c]=O.useState(()=>localStorage.getItem("gps_nama")||""),u=O.useRef(null);function h(){e(!1),u.current&&(clearInterval(u.current),u.current=null),s([]),localStorage.removeItem("gps_track"),localStorage.removeItem("gps_tracker"),r("Pelacakan dimatikan dan data dihapus.")}function f(){if(l){if(!navigator.geolocation){r("Geolocation tidak didukung browser.");return}e(!0),r("Pelacakan aktif..."),u.current=setInterval(()=>{navigator.geolocation.getCurrentPosition(v=>{const _=new Date,S={lat:v.coords.latitude,lon:v.coords.longitude,time:_.toLocaleString(),nama:l,online:navigator.onLine};s(x=>{const E=[...x,S];return localStorage.setItem("gps_track",JSON.stringify(E)),E})},v=>r("Gagal mendapatkan lokasi: "+v.message),{enableHighAccuracy:!0,maximumAge:0,timeout:1e4})},1e4)}}O.useEffect(()=>()=>{u.current&&clearInterval(u.current)},[]);function p(){s([]),localStorage.removeItem("gps_track"),localStorage.removeItem("gps_tracker")}return O.useEffect(()=>{function v(){r(navigator.onLine?"Online":"Mode Offline: Menyimpan data lokal")}return window.addEventListener("online",v),window.addEventListener("offline",v),v(),()=>{window.removeEventListener("online",v),window.removeEventListener("offline",v)}},[]),m.jsxs("section",{className:"bg-white/90 rounded-2xl shadow-xl p-6 mb-4 text-gray-800",children:[m.jsx("h2",{className:"text-2xl font-bold mb-3 text-green-800",children:"Pelacak Lokasi GPS"}),l?null:m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block mb-2 text-green-800 font-semibold",children:"Masukkan Nama Anda:"}),m.jsx("input",{className:"px-3 py-2 rounded border border-green-400 focus:outline-none focus:ring-2 focus:ring-green-600 text-gray-900",value:o,onChange:v=>a(v.target.value),placeholder:"Nama Lengkap"}),m.jsx("button",{className:"btn-nav ml-2 mt-2",onClick:()=>{c(o),localStorage.setItem("gps_nama",o)},disabled:!o.trim(),children:"Simpan Nama"})]}),m.jsx("button",{className:"btn-nav mb-4",onClick:f,disabled:n||!l,children:"Aktifkan Pelacakan"}),m.jsx("button",{className:"btn-nav mb-4 ml-2",onClick:p,children:"Reset Data Lokasi"}),m.jsx("button",{className:"btn-nav mb-4 ml-2 bg-red-600 hover:bg-red-700",onClick:h,disabled:!n,children:"Matikan GPS"}),m.jsx("div",{className:"mb-2 text-green-700 text-sm",children:t}),m.jsx("div",{className:"overflow-x-auto bg-green-100 rounded-lg p-2 text-xs",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Waktu"}),m.jsx("th",{children:"Lat"}),m.jsx("th",{children:"Lon"}),m.jsx("th",{children:"Nama"}),m.jsx("th",{children:"Status"})]})}),m.jsx("tbody",{children:i.map((v,_)=>m.jsxs("tr",{children:[m.jsx("td",{children:v.time}),m.jsx("td",{children:v.lat}),m.jsx("td",{children:v.lon}),m.jsx("td",{children:v.nama||l}),m.jsx("td",{children:m.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold ${v.online?"bg-green-500 text-white":"bg-gray-400 text-white"}`,children:v.online?"Online":"Offline"})})]},_))})]})}),m.jsx("p",{className:"mt-2 text-green-700 text-xs",children:"Data lokasi tersimpan lokal & dikirim ke server jika online."})]})}const bFe=[{label:"SAR Nasional (Basarnas)",nomor:"115"},{label:"BPBD Surabaya",nomor:"031-8499909"},{label:"Polisi",nomor:"110"},{label:"Ambulans",nomor:"118"},{label:"RSU Dr. Soetomo",nomor:"031-5501078"}],AFe=["Selalu bawa peluit, senter, dan korek api cadangan.","Jangan panik, tetap tenang dan hemat energi.","Cari sumber air bersih dan buat perlindungan sederhana.","Gunakan sinyal darurat (asap, peluit, cermin) untuk menarik perhatian.","Kenali tanaman dan hewan berbahaya di sekitar.","Lakukan pertolongan pertama pada luka ringan sebelum mencari bantuan."];function TFe(){const[n,e]=O.useState("fitur");return m.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-green-50 py-8 px-2",children:[m.jsxs("div",{className:"max-w-xl mx-auto",children:[m.jsx("h1",{className:"text-2xl font-bold text-center text-green-800 mb-4",children:"Mode Offline & Survival Tools"}),m.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Tetap siap di alam bebas! Semua fitur berikut dapat diakses tanpa internet."}),m.jsxs("nav",{className:"flex flex-wrap justify-center gap-2 mb-6",children:[m.jsx("button",{className:`btn-nav${n==="fitur"?" bg-green-700 text-white":""}`,onClick:()=>e("fitur"),children:"Fitur Survival"}),m.jsx("button",{className:`btn-nav${n==="survival"?" bg-green-700 text-white":""}`,onClick:()=>e("survival"),children:"Panduan Survival"}),m.jsx("button",{className:`btn-nav${n==="ppgd"?" bg-green-700 text-white":""}`,onClick:()=>e("ppgd"),children:"PPGD"}),m.jsx("button",{className:`btn-nav${n==="navigasi"?" bg-green-700 text-white":""}`,onClick:()=>e("navigasi"),children:"Navigasi Darat"}),m.jsx("button",{className:`btn-nav${n==="checklist"?" bg-green-700 text-white":""}`,onClick:()=>e("checklist"),children:"Checklist"}),m.jsx("button",{className:`btn-nav${n==="gps"?" bg-green-700 text-white":""}`,onClick:()=>e("gps"),children:"Pelacak GPS"})]}),n==="fitur"&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:[m.jsxs("a",{href:"/panduan-survival.pdf",className:"block bg-white rounded-xl shadow p-4 hover:bg-green-50 transition",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx(R$,{className:"w-8 h-8 text-blue-600"}),m.jsx("span",{className:"font-bold text-green-900 text-lg",children:"Panduan Survival Offline"})]}),m.jsx("div",{className:"text-gray-600 text-sm mb-2",children:"Akses panduan survival, P3GD, dan navigasi darat tanpa internet."}),m.jsx("div",{className:"text-green-700 text-xs font-semibold underline",children:"Buka Panduan Survival"})]}),m.jsxs("a",{href:"/navigasi-darat.pdf",className:"block bg-white rounded-xl shadow p-4 hover:bg-green-50 transition",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx(L$,{className:"w-8 h-8 text-green-600"}),m.jsx("span",{className:"font-bold text-green-900 text-lg",children:"Navigasi Darat PDF"})]}),m.jsx("div",{className:"text-gray-600 text-sm mb-2",children:"Pelajari teknik navigasi darat dan orientasi peta-kompas."}),m.jsx("div",{className:"text-green-700 text-xs font-semibold underline",children:"Buka Navigasi Darat"})]})]}),m.jsxs("div",{id:"nomor-darurat",className:"mb-8 bg-white rounded-xl shadow p-4",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(k_,{className:"w-6 h-6 text-purple-600"}),m.jsx("span",{className:"font-bold text-purple-800",children:"Nomor Darurat Penting"})]}),m.jsx("ul",{className:"text-gray-700 text-sm space-y-1",children:bFe.map((t,r)=>m.jsxs("li",{children:[m.jsxs("span",{className:"font-semibold",children:[t.label,":"]})," ",m.jsx("a",{href:`tel:${t.nomor}`,className:"text-blue-700 underline",children:t.nomor})]},r))})]}),m.jsxs("div",{id:"tips-survival",className:"mb-8 bg-white rounded-xl shadow p-4",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(Qpe,{className:"w-6 h-6 text-red-600"}),m.jsx("span",{className:"font-bold text-red-800",children:"Tips Bertahan Hidup"})]}),m.jsx("ul",{className:"text-gray-700 text-sm list-disc pl-5 space-y-1",children:AFe.map((t,r)=>m.jsx("li",{children:t},r))})]})]}),n==="survival"&&m.jsx(xFe,{}),n==="ppgd"&&m.jsx(_Fe,{}),n==="navigasi"&&m.jsx(wFe,{}),n==="checklist"&&m.jsx(SFe,{}),n==="gps"&&m.jsx(EFe,{})]}),m.jsx("style",{children:`
        .btn-nav {
          background: #166534;
          color: #fff;
          font-size: 1rem;
          border-radius: 0.5rem;
          padding: 0.5rem 1.1rem;
          font-weight: bold;
          box-shadow: 0 2px 8px #0002;
          border: none;
          margin: 0.2rem;
          transition: background 0.2s;
        }
        .btn-nav:active, .btn-nav:hover, .btn-nav.bg-green-700 {
          background: #22c55e;
          color: #14532d;
        }
        input[type=checkbox] {
          width: 1.3em; height: 1.3em;
        }
      `})]})}class CFe extends fn.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?m.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 text-center p-8",children:[m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Terjadi Kesalahan"}),m.jsx("p",{className:"mb-4 text-gray-600",children:"Maaf, terjadi error pada aplikasi. Silakan refresh halaman atau coba lagi nanti."}),m.jsx("button",{className:"px-4 py-2 bg-primary text-white rounded",onClick:()=>window.location.reload(),children:"Refresh"})]}):this.props.children}}function MFe(){const[n,e]=O.useState(null),[t,r]=O.useState(null),[i,s]=O.useState(null),[o,a]=O.useState(null),[l,c]=O.useState(!0);O.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"});async function S(){c(!0);try{const x=await T_(si(wn,"sejarah_page","main"));if(x.exists()){const E=x.data();e(typeof E.sejarahNarasi=="string"?E.sejarahNarasi:null),r(Array.isArray(E.kilasBalik)?E.kilasBalik:null),s(Array.isArray(E.videoMomentum)?E.videoMomentum:null),a(Array.isArray(E.ketuaList)?E.ketuaList:null)}else e(null),r(null),s(null),a(null)}catch{e(null),r(null),s(null)}c(!1)}S()},[]);const u=O.useRef(null),[h,f]=O.useState(0),[p,v]=O.useState(!0),_=O.useRef(null);return O.useEffect(()=>{if(!p)return;let S;const x=()=>{f(E=>{let b=E+7e-4;return b>1&&(b-=1),b}),S=requestAnimationFrame(x)};return S=requestAnimationFrame(x),()=>cancelAnimationFrame(S)},[p]),l?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-blue-50 to-green-50",children:m.jsx("div",{className:"text-lg text-gray-600",children:"Memuat data sejarah..."})}):!n||!t||!i||!o?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-blue-50 to-green-50",children:m.jsx("div",{className:"text-lg text-red-600",children:"Data sejarah belum tersedia."})}):m.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-green-50 py-10",children:m.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[m.jsx(yr.h1,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.7},className:"text-3xl md:text-4xl font-extrabold text-center text-blue-900 mb-8",children:"Sejarah Mahapala Narotama"}),m.jsx(yr.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.7},className:"text-lg text-gray-700 text-center mb-10 leading-relaxed",children:n}),m.jsx(yr.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.7},className:"text-2xl font-bold text-blue-800 mb-4 text-center",children:"Jejak Ketua Umum"}),m.jsxs("div",{className:"relative w-full overflow-hidden py-4",children:[m.jsx("div",{ref:u,className:"flex gap-6 min-w-[700px] pb-2 px-2",style:{width:"max-content",transform:`translateX(-${h*(o.length*190+32)}px)`,transition:p?"none":"transform 0.2s",willChange:"transform"},children:(()=>{const S=[...o,...o],x=o.length-1;return S.map((E,b)=>{let M=null;(b+1)%o.length===0&&(M=m.jsx("div",{className:"flex items-center mx-2 text-3xl font-bold text-gray-400 select-none",children:"|"},"sep-"+b));const k=b%o.length===x;return m.jsxs(fn.Fragment,{children:[m.jsxs(yr.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{delay:.05*(b%o.length)},className:"bg-white rounded-xl shadow-lg p-4 flex flex-col items-center min-w-[180px] hover:scale-105 transition-transform duration-300 border "+(k?"border-yellow-400 ring-4 ring-yellow-300 animate-glow shadow-yellow-200":"border-blue-100"),children:[m.jsx("img",{src:E.foto,alt:E.nama,className:"w-20 h-20 rounded-full object-cover mb-2 "+(k?"border-4 border-yellow-400 shadow-lg":"border-4 border-blue-200")}),m.jsx("div",{className:"font-bold text-lg text-center "+(k?"text-yellow-700":"text-blue-700"),children:E.nama}),m.jsxs("div",{className:"text-xs text-center "+(k?"text-yellow-600 font-bold":"text-gray-500"),children:["Periode ",E.periode]}),k&&m.jsx("div",{className:"mt-1 px-2 py-0.5 rounded bg-yellow-100 text-yellow-800 text-xs font-semibold animate-pulse",children:"Ketua Umum Sekarang"})]}),M]},b)})})()}),m.jsx("input",{type:"range",min:0,max:o.length-1,step:1,value:Math.round(h*(o.length-1)),onChange:S=>{v(!1),f(Number(S.target.value)/(o.length-1)),_.current&&clearTimeout(_.current),_.current=setTimeout(()=>v(!0),5e3)},onMouseDown:()=>{v(!1),_.current&&clearTimeout(_.current)},onMouseUp:()=>{_.current&&clearTimeout(_.current),_.current=setTimeout(()=>v(!0),5e3)},onTouchStart:()=>{v(!1),_.current&&clearTimeout(_.current)},onTouchEnd:()=>{_.current&&clearTimeout(_.current),_.current=setTimeout(()=>v(!0),5e3)},className:"w-full mt-4 accent-yellow-500","aria-label":"Scroll mantan ketua umum"})]}),m.jsx("style",{children:`
          @keyframes animate-glow {
            0% { box-shadow: 0 0 0 0 #fde68a, 0 0 10px 2px #fde68a44; }
            50% { box-shadow: 0 0 0 8px #fde68a44, 0 0 20px 8px #fde68a44; }
            100% { box-shadow: 0 0 0 0 #fde68a, 0 0 10px 2px #fde68a44; }
          }
          .animate-glow { animation: animate-glow 2s infinite; }
        `}),m.jsx(yr.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.7},className:"text-2xl font-bold text-green-800 mb-4 mt-10 text-center",children:"Kilas Balik"}),m.jsx("div",{className:"space-y-4 mb-10",children:t.map((S,x)=>m.jsxs(yr.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.1*x},className:"bg-white rounded-lg shadow p-4 flex items-center gap-4 border-l-4 border-green-400",children:[m.jsx("div",{className:"text-2xl font-bold text-green-600 w-16 text-center",children:S.tahun}),m.jsx("div",{className:"text-gray-700 text-base",children:S.momen})]},x))}),m.jsx(yr.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.7},className:"text-2xl font-bold text-purple-800 mb-4 mt-10 text-center",children:"Video Momentum"}),m.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:i.map((S,x)=>m.jsxs(yr.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2*x},className:"bg-white rounded-xl shadow-lg p-2 flex flex-col items-center",children:[m.jsx("div",{className:"aspect-w-16 aspect-h-9 w-full mb-2",children:m.jsx("iframe",{src:S.url,title:S.title,allowFullScreen:!0,className:"w-full h-40 rounded-lg"})}),m.jsx("div",{className:"text-sm text-center text-gray-700 font-semibold",children:S.title})]},x))})]})})}const IFe=({locked:n})=>n?m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 17a1.5 1.5 0 001.5-1.5V14a1.5 1.5 0 10-3 0v1.5A1.5 1.5 0 0012 17zm6-6V9a6 6 0 10-12 0v2a2 2 0 00-2 2v7a2 2 0 002 2h12a2 2 0 002-2v-7a2 2 0 00-2-2zm-2 0H8V9a4 4 0 118 0v2z"})}):m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 11V9a5 5 0 00-10 0v2M7 11V9a5 5 0 0110 0v2m-5 4v2m0 0a2 2 0 104 0v-2a2 2 0 10-4 0z"})}),PFe=({ketua:n,onChange:e,onRemove:t})=>{const[r,i]=fn.useState(!n.locked);return fn.useEffect(()=>{i(!n.locked)},[n.locked]),m.jsx("div",{className:"w-full overflow-x-auto",children:m.jsxs("div",{className:`flex gap-2 mb-2 items-center border rounded p-2 bg-yellow-50 min-w-[500px] transition-all duration-200 ${n.locked?"opacity-60 grayscale":""}`,children:[m.jsx("img",{src:n.foto,alt:n.nama,className:"w-12 h-12 rounded-full object-cover"}),m.jsx("input",{value:n.nama,onChange:s=>e({...n,nama:s.target.value}),disabled:!r,placeholder:"Nama Ketua Umum",className:"flex-1 rounded border border-yellow-300 p-1 text-gray-800 bg-white min-w-[120px]"}),m.jsx("input",{value:n.periode,onChange:s=>e({...n,periode:s.target.value}),disabled:!r,placeholder:"Periode",className:"w-24 sm:w-32 rounded border border-yellow-300 p-1 text-gray-800 bg-white"}),m.jsx("input",{value:n.foto,onChange:s=>e({...n,foto:s.target.value}),disabled:!r,placeholder:"URL Foto",className:"w-32 sm:w-40 rounded border border-yellow-300 p-1 text-gray-800 bg-white"}),m.jsx("button",{className:"flex items-center gap-1 text-xs px-2 py-1 rounded bg-transparent hover:bg-yellow-100 focus:outline-none",title:n.locked?"Buka Kunci":"Kunci Data",onClick:()=>{if(n.locked){const s=window.prompt("Masukkan kode untuk membuka kunci data ketua umum!");s==="2601"?(i(!0),e({...n,locked:!1})):s!==null&&alert("Kode salah!")}else i(!1),e({...n,locked:!0})},children:m.jsx(IFe,{locked:n.locked})}),m.jsx("button",{disabled:!r,className:`text-red-600 font-bold px-2 ${r?"":"opacity-50 cursor-not-allowed"}`,onClick:async()=>{if(!r)return;const s=window.prompt("Konfirmasi hapus: Masukkan kode untuk menghapus data ketua umum!");s==="2601"?window.confirm("Yakin ingin menghapus data ketua umum ini?")&&t():s!==null&&alert("Kode salah!")},children:"Hapus"})]})})};function RFe({items:n,renderItem:e,onChange:t}){const r=fn.useRef(null),i=fn.useRef(null),s=l=>{r.current=l},o=l=>{i.current=l},a=()=>{const l=r.current,c=i.current;if(l!==null&&c!==null&&l!==c){const u=[...n],[h]=u.splice(l,1);u.splice(c,0,h),t(u)}r.current=null,i.current=null};return m.jsx("div",{children:n.map((l,c)=>m.jsx("div",{draggable:!0,onDragStart:()=>s(c),onDragEnter:()=>o(c),onDragEnd:a,onDragOver:u=>u.preventDefault(),style:{cursor:"grab"},children:e(l,c,{draggable:!0})},c))})}const yd={sejarahNarasi:"Mahapala Narotama adalah Unit Kegiatan Mahasiswa (UKM) di Universitas Narotama Surabaya yang bergerak di bidang pecinta alam dan petualangan. Berdiri pada tahun 2016, Mahapala Narotama aktif dalam kegiatan pendidikan dasar, ekspedisi gunung, penjelajahan, konservasi alam, bakti sosial, serta pengembangan karakter dan kepemimpinan mahasiswa. Dengan semangat kekeluargaan dan jiwa petualang, Mahapala Narotama telah melahirkan banyak kader yang berkontribusi dalam pelestarian alam dan pengabdian masyarakat, serta menjadi wadah pengembangan minat dan bakat mahasiswa di bidang alam bebas.",ketuaList:[{nama:"Roro Christiatirani Suwoto",periode:"2016-2017",foto:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/main/Img/Mantum/20250805_084125.jpg",locked:!0},{nama:"Arif Muhammad Rizal",periode:"2017-2018",foto:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/main/Img/Mantum/20250805_084151.jpg",locked:!0},{nama:"Ayu Wulandari Narhendra",periode:"2018-2019",foto:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/main/Img/Mantum/20250805_084234.jpg",locked:!0},{nama:"Moch. Fakhrul Islam",periode:"2019-2021",foto:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/main/Img/Mantum/20250805_084327.jpg",locked:!0},{nama:"Agna Mahireksha",periode:"2021-2022",foto:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/main/Img/Mantum/20250805_084401.jpg",locked:!0},{nama:"Robiatul Adawiyah",periode:"2023-2024",foto:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/main/Img/Mantum/20250805_084425.jpg",locked:!0},{nama:"Muhammad Fairus Fawas Afanza",periode:"2024-sekarang",foto:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/main/Img/Mantum/20250805_084448.png",locked:!0}],kilasBalik:[{tahun:"2016",momen:"Pendirian Mahapala Narotama dan Pendidikan Dasar Angkatan I (DIKLATSAR I)."},{tahun:"2017",momen:"Ekspedisi Gunung Lawu dan kegiatan bakti sosial di lereng gunung."},{tahun:"2018",momen:"DIKLATSAR II dan ekspedisi Gunung Semeru."},{tahun:"2019",momen:"Pendidikan Lanjut Rimba Gunung I dan penanaman pohon di kawasan konservasi."},{tahun:"2020",momen:"Aksi peduli lingkungan: penanaman 1000 pohon di Surabaya Timur."},{tahun:"2021",momen:"DIKLATSAR III (Sendang Banthak) dan pelatihan SAR Mahasiswa."},{tahun:"2022",momen:"Ekspedisi Gunung Arjuno-Welirang dan bakti sosial di desa binaan."},{tahun:"2023",momen:"DIKLATSAR IV (Panca Laksamana) dan kegiatan bakti sosial serta buka bersama."},{tahun:"2024",momen:"Penyelenggaraan seminar nasional konservasi dan pelantikan anggota terbanyak."}],videoMomentum:[{title:"Bakti sosial & Buka Bersama 2025",url:"https://www.youtube.com/embed/hTP4gwO7X80"},{title:"DIKLATSAR ANGKATAN KE IV (PANCA LAKSMANA) MAHAPALA NAROTAMA",url:"https://www.youtube.com/embed/A3rabYoh5v0"},{title:"PENDIDIKAN LANJUT RIMBA GUNUNG III MAHAPALA NAROTAMA",url:"https://www.youtube.com/embed/PXqneMBAOoU"},{title:"DIKLATSAR ANGKATAN KE III (SENDANG BANTHAK) MAHAPALA NAROTAMA",url:"https://www.youtube.com/embed/IIi19T-bt70"}]};function NFe(){const[n,e]=O.useState(null),[t,r]=O.useState(""),[i,s]=O.useState(""),[o,a]=O.useState(""),[l,c]=O.useState(!1),[u,h]=O.useState(yd),[f,p]=O.useState(!1),[v,_]=O.useState(yd),[S,x]=O.useState(!1),[E,b]=O.useState("");O.useEffect(()=>{const te=ED(sf,se=>e(se));return()=>te()},[]),O.useEffect(()=>{async function te(){c(!0);try{const se=await T_(si(wn,"sejarah_page","main"));if(se.exists()){const le=se.data();h({sejarahNarasi:le.sejarahNarasi||yd.sejarahNarasi,ketuaList:Array.isArray(le.ketuaList)?le.ketuaList:yd.ketuaList,kilasBalik:Array.isArray(le.kilasBalik)?le.kilasBalik:yd.kilasBalik,videoMomentum:Array.isArray(le.videoMomentum)?le.videoMomentum:yd.videoMomentum})}else h(yd)}catch{h(yd)}c(!1)}te()},[]);async function M(te){te.preventDefault(),a(""),c(!0);try{await SD(sf,t,i)}catch(se){a("Login gagal: "+((se==null?void 0:se.message)||""))}c(!1)}function k(){_(u),p(!0)}function B(){p(!1),_(u)}function P(te){_({...v,sejarahNarasi:te.target.value})}function N(te,se,le){_({...v,kilasBalik:v.kilasBalik.map((X,ce)=>ce===te?{...X,[se]:le}:X)})}function R(){_({...v,kilasBalik:[...v.kilasBalik,{tahun:"",momen:""}]})}function I(te){_({...v,kilasBalik:v.kilasBalik.filter((se,le)=>le!==te)})}function U(te,se,le){_({...v,videoMomentum:v.videoMomentum.map((X,ce)=>ce===te?{...X,[se]:le}:X)})}function H(){_({...v,videoMomentum:[...v.videoMomentum,{title:"",url:""}]})}function W(te){_({...v,videoMomentum:v.videoMomentum.filter((se,le)=>le!==te)})}async function K(){x(!1),b(""),c(!0);try{await Fa(si(wn,"sejarah_page","main"),v),h(v),p(!1),b("Berhasil disimpan!")}catch(te){b("Gagal menyimpan: "+((te==null?void 0:te.message)||""))}c(!1)}return l?m.jsx("div",{className:"text-center py-20",children:"Loading..."}):n?m.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-green-50 py-4 flex justify-center items-start overflow-x-hidden",children:m.jsxs("div",{className:"w-full max-w-lg sm:max-w-3xl px-2 sm:px-4 rounded-xl shadow-xl bg-white/90 py-4 sm:py-6 border border-blue-100",children:[m.jsx(yr.h1,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.7},className:"text-3xl md:text-4xl font-extrabold text-center text-blue-900 mb-8",children:"Admin Edit Sejarah Mahapala Narotama"}),f?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("label",{className:"block font-bold mb-2 text-yellow-800",children:"Daftar Ketua Umum"}),m.jsx("div",{className:"space-y-2",children:v.ketuaList.map((te,se)=>m.jsx(fn.Fragment,{children:m.jsx(PFe,{ketua:te,onChange:le=>{_({...v,ketuaList:v.ketuaList.map((X,ce)=>ce===se?le:X)})},onRemove:()=>{_({...v,ketuaList:v.ketuaList.filter((le,X)=>X!==se)})}})},se))}),m.jsx(zt,{onClick:()=>_({...v,ketuaList:[...v.ketuaList,{nama:"",periode:"",foto:"",locked:!1}]}),className:"mt-2 px-3 py-1 bg-yellow-600 text-white rounded w-full sm:w-auto",children:"Tambah Ketua Umum"})]}),m.jsxs("div",{className:"mb-8",children:[m.jsx("label",{className:"block font-bold mb-2 text-blue-800",children:"Narasi Sejarah"}),m.jsx("textarea",{value:v.sejarahNarasi,onChange:P,rows:5,className:"w-full rounded border border-blue-300 p-2 text-gray-800 text-sm sm:text-base"})]}),m.jsxs("div",{className:"mb-8",children:[m.jsx("label",{className:"block font-bold mb-2 text-green-800",children:"Kilas Balik"}),m.jsx(RFe,{items:v.kilasBalik,onChange:te=>_({...v,kilasBalik:te}),renderItem:(te,se)=>m.jsxs("div",{className:"flex flex-wrap gap-2 mb-2 items-center bg-green-50 rounded p-1 sm:p-2",style:{border:"1px dashed #6ee7b7"},children:[m.jsx("span",{className:"cursor-move text-green-600 font-bold px-2",children:""}),m.jsx("input",{value:te.tahun,onChange:le=>N(se,"tahun",le.target.value),placeholder:"Tahun",className:"w-16 sm:w-20 rounded border border-green-300 p-1 text-gray-800 text-xs sm:text-base"}),m.jsx("input",{value:te.momen,onChange:le=>N(se,"momen",le.target.value),placeholder:"Momen",className:"flex-1 min-w-[120px] rounded border border-green-300 p-1 text-gray-800 text-xs sm:text-base"}),m.jsx("button",{onClick:()=>I(se),className:"text-red-600 font-bold px-2 py-1 text-xs sm:text-base",children:"Hapus"})]})}),m.jsx(zt,{onClick:R,className:"mt-2 px-3 py-1 bg-green-600 text-white rounded w-full sm:w-auto",children:"Tambah Kilas Balik"})]}),m.jsxs("div",{className:"mb-8",children:[m.jsx("label",{className:"block font-bold mb-2 text-purple-800",children:"Video Momentum"}),m.jsx("div",{className:"space-y-2",children:v.videoMomentum.map((te,se)=>m.jsxs("div",{className:"flex flex-wrap gap-2 mb-2 items-center bg-purple-50 rounded p-1 sm:p-2",style:{border:"1px dashed #a78bfa"},children:[m.jsx("input",{value:te.title,onChange:le=>U(se,"title",le.target.value),placeholder:"Judul Video",className:"flex-1 min-w-[120px] rounded border border-purple-300 p-1 text-gray-800 text-xs sm:text-base"}),m.jsx("input",{value:te.url,onChange:le=>U(se,"url",le.target.value),placeholder:"URL Embed Youtube",className:"flex-1 min-w-[120px] rounded border border-purple-300 p-1 text-gray-800 text-xs sm:text-base"}),m.jsx("button",{onClick:()=>W(se),className:"text-red-600 font-bold px-2 py-1 text-xs sm:text-base",children:"Hapus"})]},se))}),m.jsx(zt,{onClick:H,className:"mt-2 px-3 py-1 bg-purple-600 text-white rounded w-full sm:w-auto",children:"Tambah Video"})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[m.jsx(zt,{onClick:B,className:"bg-gray-400 text-white w-full sm:w-auto",children:"Batal"}),m.jsx(zt,{onClick:()=>x(!0),className:"bg-blue-700 text-white w-full sm:w-auto",children:"Simpan"})]}),E&&m.jsx("div",{className:"mt-4 text-green-700 font-bold",children:E}),S&&m.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-sm w-full",children:[m.jsx("div",{className:"font-bold text-lg mb-4",children:"Konfirmasi Simpan"}),m.jsx("div",{className:"mb-4",children:"Yakin ingin menyimpan perubahan data sejarah?"}),m.jsxs("div",{className:"flex gap-2 justify-end",children:[m.jsx(zt,{onClick:()=>x(!1),className:"bg-gray-400 text-white",children:"Batal"}),m.jsx(zt,{onClick:K,className:"bg-blue-700 text-white",children:"Ya, Simpan"})]})]})})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("label",{className:"block font-bold mb-2 text-yellow-800",children:"Daftar Ketua Umum"}),u.ketuaList.map((te,se)=>m.jsxs("div",{className:"flex gap-2 mb-2 items-center border rounded p-2",children:[m.jsx("img",{src:te.foto,alt:te.nama,className:"w-12 h-12 rounded-full object-cover"}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-bold text-yellow-900",children:te.nama}),m.jsxs("div",{className:"text-xs text-gray-600",children:["Periode ",te.periode]})]})]},se))]}),m.jsxs("div",{className:"mb-8",children:[m.jsx("label",{className:"block font-bold mb-2 text-blue-800",children:"Narasi Sejarah"}),m.jsx("div",{className:"bg-white rounded p-3 border border-blue-200 text-gray-800 whitespace-pre-line",children:u.sejarahNarasi})]}),m.jsxs("div",{className:"mb-8",children:[m.jsx("label",{className:"block font-bold mb-2 text-green-800",children:"Kilas Balik"}),u.kilasBalik.map((te,se)=>m.jsxs("div",{className:"flex gap-2 mb-2 items-center",children:[m.jsx("div",{className:"w-20 font-bold text-green-700",children:te.tahun}),m.jsx("div",{className:"flex-1 text-gray-800",children:te.momen})]},se))]}),m.jsxs("div",{className:"mb-8",children:[m.jsx("label",{className:"block font-bold mb-2 text-purple-800",children:"Video Momentum"}),u.videoMomentum.map((te,se)=>m.jsxs("div",{className:"flex gap-2 mb-2 items-center",children:[m.jsx("div",{className:"flex-1 text-gray-800 truncate",title:te.title,children:te.title.length>32?te.title.slice(0,32)+"...":te.title}),m.jsx("div",{className:"flex-1 text-blue-700 underline break-all",children:te.url})]},se))]}),m.jsx(zt,{onClick:k,className:"bg-blue-700 text-white",children:"Edit Data"}),E&&m.jsx("div",{className:"mt-4 text-green-700 font-bold",children:E})]})]})}):m.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-green-50",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 w-full max-w-sm",children:[m.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Login Admin Sejarah"}),m.jsxs("form",{onSubmit:M,className:"space-y-4",children:[m.jsx(ii,{className:"w-full",type:"email",placeholder:"Email",value:t,onChange:te=>r(te.target.value),required:!0}),m.jsx(ii,{className:"w-full",type:"password",placeholder:"Password",value:i,onChange:te=>s(te.target.value),required:!0}),o&&m.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-md text-sm",children:o}),m.jsx(zt,{type:"submit",className:"w-full",children:"Login"})]})]})})}function DFe(){yFe();const[n,e]=fn.useState(null);return fn.useEffect(()=>{vk().then(t=>{t&&e(t)})},[]),fn.useEffect(()=>{if(n){document.title=n.title;const t=(o,a,l)=>{let c=document.querySelector(o);c&&c.setAttribute(a,l)};t('meta[name="description"]',"content",n.description),t('meta[name="keywords"]',"content",n.keywords),t('meta[property="og:title"]',"content",n.title),t('meta[property="og:description"]',"content",n.description),t('meta[property="og:image"]',"content",n.image),t('meta[name="twitter:title"]',"content",n.title),t('meta[name="twitter:description"]',"content",n.description),t('meta[name="twitter:image"]',"content",n.image);const r=document.querySelector('link[rel="icon"][type="image/x-icon"]');r&&r.setAttribute("href",n.favicon);const i=document.querySelectorAll('link[rel="icon"][type="image/x-icon"]')[1];i&&i.setAttribute("href",n.faviconFallback);const s=document.querySelector('link[rel="icon"][type="image/png"]');s&&s.setAttribute("href",n.faviconPng)}},[n]),fn.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(t=>{t.onupdatefound=()=>{const r=t.installing;r&&(r.onstatechange=()=>{r.state==="installed"&&navigator.serviceWorker.controller&&window.location.reload()})}})},[]),m.jsx(CFe,{children:m.jsxs(b0e,{children:[m.jsx(Bme,{}),m.jsx(vFe,{}),m.jsx(Gve,{children:m.jsxs(kfe,{children:[m.jsx(ys,{path:"/offline",component:TFe}),m.jsx(ys,{path:"/",component:bbe}),m.jsx(ys,{path:"/kegiatan",component:r2e}),m.jsx(ys,{path:"/pembelajaran",component:i2e}),m.jsx(ys,{path:"/kartu-anggota",component:S2e}),m.jsx(ys,{path:"/pendaftaran",component:E2e}),m.jsx(ys,{path:"/galeri",component:A2e}),m.jsx(ys,{path:"/admin",component:ZAe}),m.jsx(ys,{path:"/kegiatan/:id",component:QAe}),m.jsx(ys,{path:"/developer",component:sfe}),m.jsx(ys,{path:"/kartu-anggota-detail",component:JAe}),m.jsx(ys,{path:"/member-card-3d",component:Ske}),m.jsx(ys,{path:"/sejarah",component:MFe}),m.jsx(ys,{path:"/sejarahAdmin",component:NFe}),m.jsx(ys,{path:"/struktur-kepengurusan",component:efe}),m.jsx(ys,{path:"/admin/struktur-kepengurusan",component:nfe}),m.jsx(ys,{path:"/scan-anggota",component:gFe}),m.jsx(ys,{component:T0e})]})})]})})}async function kFe(n){if(!n.ok){const e=await n.text()||n.statusText;throw new Error(`${n.status}: ${e}`)}}const OFe=({on401:n})=>async({queryKey:e})=>{const t=await fetch(e[0],{credentials:"include"});return await kFe(t),await t.json()},LFe=new W1e({defaultOptions:{queries:{queryFn:OFe({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});Sz(document.getElementById("root")).render(m.jsx(Y1e,{client:LFe,children:m.jsx(DFe,{})}));"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(n=>{n.onupdatefound=()=>{const e=n.installing;e&&(e.onstatechange=()=>{e.state==="installed"&&navigator.serviceWorker.controller&&window.location.reload()})}});
