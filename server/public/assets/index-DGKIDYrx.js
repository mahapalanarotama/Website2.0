var Nne=Object.defineProperty;var bF=n=>{throw TypeError(n)};var Rne=(n,e,t)=>e in n?Nne(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var hr=(n,e,t)=>Rne(n,typeof e!="symbol"?e+"":e,t),mC=(n,e,t)=>e.has(n)||bF("Cannot "+t);var ye=(n,e,t)=>(mC(n,e,"read from private field"),t?t.call(n):e.get(n)),vn=(n,e,t)=>e.has(n)?bF("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Vt=(n,e,t,r)=>(mC(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Qn=(n,e,t)=>(mC(n,e,"access private method"),t);var Zw=(n,e,t,r)=>({set _(i){Vt(n,e,i,t)},get _(){return ye(n,e,r)}});function Dne(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var Lne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ZR(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $7={exports:{}},TA={},X7={exports:{}},$n={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_=Symbol.for("react.element"),One=Symbol.for("react.portal"),Fne=Symbol.for("react.fragment"),jne=Symbol.for("react.strict_mode"),Bne=Symbol.for("react.profiler"),Une=Symbol.for("react.provider"),Vne=Symbol.for("react.context"),zne=Symbol.for("react.forward_ref"),Hne=Symbol.for("react.suspense"),Gne=Symbol.for("react.memo"),Wne=Symbol.for("react.lazy"),SF=Symbol.iterator;function qne(n){return n===null||typeof n!="object"?null:(n=SF&&n[SF]||n["@@iterator"],typeof n=="function"?n:null)}var K7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y7=Object.assign,Z7={};function Xv(n,e,t){this.props=n,this.context=e,this.refs=Z7,this.updater=t||K7}Xv.prototype.isReactComponent={};Xv.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Xv.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Q7(){}Q7.prototype=Xv.prototype;function QR(n,e,t){this.props=n,this.context=e,this.refs=Z7,this.updater=t||K7}var JR=QR.prototype=new Q7;JR.constructor=QR;Y7(JR,Xv.prototype);JR.isPureReactComponent=!0;var EF=Array.isArray,J7=Object.prototype.hasOwnProperty,e3={current:null},e9={key:!0,ref:!0,__self:!0,__source:!0};function t9(n,e,t){var r,i={},a=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)J7.call(e,r)&&!e9.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=t;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in o=n.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:E_,type:n,key:a,ref:s,props:i,_owner:e3.current}}function $ne(n,e){return{$$typeof:E_,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function t3(n){return typeof n=="object"&&n!==null&&n.$$typeof===E_}function Xne(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var AF=/\/+/g;function gC(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Xne(""+n.key):e.toString(36)}function D2(n,e,t,r,i){var a=typeof n;(a==="undefined"||a==="boolean")&&(n=null);var s=!1;if(n===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(n.$$typeof){case E_:case One:s=!0}}if(s)return s=n,i=i(s),n=r===""?"."+gC(s,0):r,EF(i)?(t="",n!=null&&(t=n.replace(AF,"$&/")+"/"),D2(i,e,t,"",function(u){return u})):i!=null&&(t3(i)&&(i=$ne(i,t+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(AF,"$&/")+"/")+n)),e.push(i)),1;if(s=0,r=r===""?".":r+":",EF(n))for(var o=0;o<n.length;o++){a=n[o];var l=r+gC(a,o);s+=D2(a,e,t,l,i)}else if(l=qne(n),typeof l=="function")for(n=l.call(n),o=0;!(a=n.next()).done;)a=a.value,l=r+gC(a,o++),s+=D2(a,e,t,l,i);else if(a==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Qw(n,e,t){if(n==null)return n;var r=[],i=0;return D2(n,r,"","",function(a){return e.call(t,a,i++)}),r}function Kne(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Js={current:null},L2={transition:null},Yne={ReactCurrentDispatcher:Js,ReactCurrentBatchConfig:L2,ReactCurrentOwner:e3};function n9(){throw Error("act(...) is not supported in production builds of React.")}$n.Children={map:Qw,forEach:function(n,e,t){Qw(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Qw(n,function(){e++}),e},toArray:function(n){return Qw(n,function(e){return e})||[]},only:function(n){if(!t3(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};$n.Component=Xv;$n.Fragment=Fne;$n.Profiler=Bne;$n.PureComponent=QR;$n.StrictMode=jne;$n.Suspense=Hne;$n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yne;$n.act=n9;$n.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=Y7({},n.props),i=n.key,a=n.ref,s=n._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=e3.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)J7.call(e,l)&&!e9.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:E_,type:n.type,key:i,ref:a,props:r,_owner:s}};$n.createContext=function(n){return n={$$typeof:Vne,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Une,_context:n},n.Consumer=n};$n.createElement=t9;$n.createFactory=function(n){var e=t9.bind(null,n);return e.type=n,e};$n.createRef=function(){return{current:null}};$n.forwardRef=function(n){return{$$typeof:zne,render:n}};$n.isValidElement=t3;$n.lazy=function(n){return{$$typeof:Wne,_payload:{_status:-1,_result:n},_init:Kne}};$n.memo=function(n,e){return{$$typeof:Gne,type:n,compare:e===void 0?null:e}};$n.startTransition=function(n){var e=L2.transition;L2.transition={};try{n()}finally{L2.transition=e}};$n.unstable_act=n9;$n.useCallback=function(n,e){return Js.current.useCallback(n,e)};$n.useContext=function(n){return Js.current.useContext(n)};$n.useDebugValue=function(){};$n.useDeferredValue=function(n){return Js.current.useDeferredValue(n)};$n.useEffect=function(n,e){return Js.current.useEffect(n,e)};$n.useId=function(){return Js.current.useId()};$n.useImperativeHandle=function(n,e,t){return Js.current.useImperativeHandle(n,e,t)};$n.useInsertionEffect=function(n,e){return Js.current.useInsertionEffect(n,e)};$n.useLayoutEffect=function(n,e){return Js.current.useLayoutEffect(n,e)};$n.useMemo=function(n,e){return Js.current.useMemo(n,e)};$n.useReducer=function(n,e,t){return Js.current.useReducer(n,e,t)};$n.useRef=function(n){return Js.current.useRef(n)};$n.useState=function(n){return Js.current.useState(n)};$n.useSyncExternalStore=function(n,e,t){return Js.current.useSyncExternalStore(n,e,t)};$n.useTransition=function(){return Js.current.useTransition()};$n.version="18.3.1";X7.exports=$n;var M=X7.exports;const wn=ZR(M),n3=Dne({__proto__:null,default:wn},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zne=M,Qne=Symbol.for("react.element"),Jne=Symbol.for("react.fragment"),ere=Object.prototype.hasOwnProperty,tre=Zne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nre={key:!0,ref:!0,__self:!0,__source:!0};function r9(n,e,t){var r,i={},a=null,s=null;t!==void 0&&(a=""+t),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)ere.call(e,r)&&!nre.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Qne,type:n,key:a,ref:s,props:i,_owner:tre.current}}TA.Fragment=Jne;TA.jsx=r9;TA.jsxs=r9;$7.exports=TA;var h=$7.exports,i9={exports:{}},Jo={},a9={exports:{}},s9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e($,ue){var se=$.length;$.push(ue);e:for(;0<se;){var pe=se-1>>>1,Fe=$[pe];if(0<i(Fe,ue))$[pe]=ue,$[se]=Fe,se=pe;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var ue=$[0],se=$.pop();if(se!==ue){$[0]=se;e:for(var pe=0,Fe=$.length,$e=Fe>>>1;pe<$e;){var at=2*(pe+1)-1,me=$[at],Le=at+1,Se=$[Le];if(0>i(me,se))Le<Fe&&0>i(Se,me)?($[pe]=Se,$[Le]=se,pe=Le):($[pe]=me,$[at]=se,pe=at);else if(Le<Fe&&0>i(Se,se))$[pe]=Se,$[Le]=se,pe=Le;else break e}}return ue}function i($,ue){var se=$.sortIndex-ue.sortIndex;return se!==0?se:$.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var l=[],u=[],c=1,d=null,f=3,m=!1,v=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E($){for(var ue=t(u);ue!==null;){if(ue.callback===null)r(u);else if(ue.startTime<=$)r(u),ue.sortIndex=ue.expirationTime,e(l,ue);else break;ue=t(u)}}function T($){if(_=!1,E($),!v)if(t(l)!==null)v=!0,re(D);else{var ue=t(u);ue!==null&&oe(T,ue.startTime-$)}}function D($,ue){v=!1,_&&(_=!1,x(N),N=-1),m=!0;var se=f;try{for(E(ue),d=t(l);d!==null&&(!(d.expirationTime>ue)||$&&!B());){var pe=d.callback;if(typeof pe=="function"){d.callback=null,f=d.priorityLevel;var Fe=pe(d.expirationTime<=ue);ue=n.unstable_now(),typeof Fe=="function"?d.callback=Fe:d===t(l)&&r(l),E(ue)}else r(l);d=t(l)}if(d!==null)var $e=!0;else{var at=t(u);at!==null&&oe(T,at.startTime-ue),$e=!1}return $e}finally{d=null,f=se,m=!1}}var F=!1,P=null,N=-1,I=5,R=-1;function B(){return!(n.unstable_now()-R<I)}function G(){if(P!==null){var $=n.unstable_now();R=$;var ue=!0;try{ue=P(!0,$)}finally{ue?H():(F=!1,P=null)}}else F=!1}var H;if(typeof S=="function")H=function(){S(G)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ne=K.port2;K.port1.onmessage=G,H=function(){ne.postMessage(null)}}else H=function(){w(G,0)};function re($){P=$,F||(F=!0,H())}function oe($,ue){N=w(function(){$(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,re(D))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function($){switch(f){case 1:case 2:case 3:var ue=3;break;default:ue=f}var se=f;f=ue;try{return $()}finally{f=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,ue){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var se=f;f=$;try{return ue()}finally{f=se}},n.unstable_scheduleCallback=function($,ue,se){var pe=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?pe+se:pe):se=pe,$){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=se+Fe,$={id:c++,callback:ue,priorityLevel:$,startTime:se,expirationTime:Fe,sortIndex:-1},se>pe?($.sortIndex=se,e(u,$),t(l)===null&&$===t(u)&&(_?(x(N),N=-1):_=!0,oe(T,se-pe))):($.sortIndex=Fe,e(l,$),v||m||(v=!0,re(D))),$},n.unstable_shouldYield=B,n.unstable_wrapCallback=function($){var ue=f;return function(){var se=f;f=ue;try{return $.apply(this,arguments)}finally{f=se}}}})(s9);a9.exports=s9;var rre=a9.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ire=M,Ko=rre;function gt(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o9=new Set,g1={};function Hm(n,e){mv(n,e),mv(n+"Capture",e)}function mv(n,e){for(g1[n]=e,n=0;n<e.length;n++)o9.add(e[n])}var wd=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),QI=Object.prototype.hasOwnProperty,are=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,TF={},kF={};function sre(n){return QI.call(kF,n)?!0:QI.call(TF,n)?!1:are.test(n)?kF[n]=!0:(TF[n]=!0,!1)}function ore(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function lre(n,e,t,r){if(e===null||typeof e>"u"||ore(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function eo(n,e,t,r,i,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var $a={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){$a[n]=new eo(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];$a[e]=new eo(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){$a[n]=new eo(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){$a[n]=new eo(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){$a[n]=new eo(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){$a[n]=new eo(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){$a[n]=new eo(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){$a[n]=new eo(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){$a[n]=new eo(n,5,!1,n.toLowerCase(),null,!1,!1)});var r3=/[\-:]([a-z])/g;function i3(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(r3,i3);$a[e]=new eo(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(r3,i3);$a[e]=new eo(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(r3,i3);$a[e]=new eo(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){$a[n]=new eo(n,1,!1,n.toLowerCase(),null,!1,!1)});$a.xlinkHref=new eo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){$a[n]=new eo(n,1,!1,n.toLowerCase(),null,!0,!0)});function a3(n,e,t,r){var i=$a.hasOwnProperty(e)?$a[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lre(e,t,i,r)&&(t=null),r||i===null?sre(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var jd=ire.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jw=Symbol.for("react.element"),o0=Symbol.for("react.portal"),l0=Symbol.for("react.fragment"),s3=Symbol.for("react.strict_mode"),JI=Symbol.for("react.profiler"),l9=Symbol.for("react.provider"),u9=Symbol.for("react.context"),o3=Symbol.for("react.forward_ref"),eP=Symbol.for("react.suspense"),tP=Symbol.for("react.suspense_list"),l3=Symbol.for("react.memo"),Nh=Symbol.for("react.lazy"),c9=Symbol.for("react.offscreen"),CF=Symbol.iterator;function Oy(n){return n===null||typeof n!="object"?null:(n=CF&&n[CF]||n["@@iterator"],typeof n=="function"?n:null)}var _i=Object.assign,vC;function px(n){if(vC===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);vC=e&&e[1]||""}return`
`+vC+n}var yC=!1;function xC(n,e){if(!n||yC)return"";yC=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=s&&0<=o);break}}}finally{yC=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?px(n):""}function ure(n){switch(n.tag){case 5:return px(n.type);case 16:return px("Lazy");case 13:return px("Suspense");case 19:return px("SuspenseList");case 0:case 2:case 15:return n=xC(n.type,!1),n;case 11:return n=xC(n.type.render,!1),n;case 1:return n=xC(n.type,!0),n;default:return""}}function nP(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case l0:return"Fragment";case o0:return"Portal";case JI:return"Profiler";case s3:return"StrictMode";case eP:return"Suspense";case tP:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case u9:return(n.displayName||"Context")+".Consumer";case l9:return(n._context.displayName||"Context")+".Provider";case o3:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case l3:return e=n.displayName||null,e!==null?e:nP(n.type)||"Memo";case Nh:e=n._payload,n=n._init;try{return nP(n(e))}catch{}}return null}function cre(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nP(e);case 8:return e===s3?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _f(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function d9(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dre(n){var e=d9(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,a=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function eb(n){n._valueTracker||(n._valueTracker=dre(n))}function h9(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=d9(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function xS(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function rP(n,e){var t=e.checked;return _i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function MF(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=_f(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function f9(n,e){e=e.checked,e!=null&&a3(n,"checked",e,!1)}function iP(n,e){f9(n,e);var t=_f(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?aP(n,e.type,t):e.hasOwnProperty("defaultValue")&&aP(n,e.type,_f(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function IF(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function aP(n,e,t){(e!=="number"||xS(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var mx=Array.isArray;function B0(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+_f(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function sP(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(gt(91));return _i({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function PF(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(gt(92));if(mx(t)){if(1<t.length)throw Error(gt(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:_f(t)}}function p9(n,e){var t=_f(e.value),r=_f(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function NF(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function m9(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oP(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?m9(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var tb,g9=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(tb=tb||document.createElement("div"),tb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tb.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function v1(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Lx={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hre=["Webkit","ms","Moz","O"];Object.keys(Lx).forEach(function(n){hre.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Lx[e]=Lx[n]})});function v9(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Lx.hasOwnProperty(n)&&Lx[n]?(""+e).trim():e+"px"}function y9(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=v9(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var fre=_i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lP(n,e){if(e){if(fre[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(gt(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(gt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(gt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(gt(62))}}function uP(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cP=null;function u3(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var dP=null,U0=null,V0=null;function RF(n){if(n=k_(n)){if(typeof dP!="function")throw Error(gt(280));var e=n.stateNode;e&&(e=PA(e),dP(n.stateNode,n.type,e))}}function x9(n){U0?V0?V0.push(n):V0=[n]:U0=n}function _9(){if(U0){var n=U0,e=V0;if(V0=U0=null,RF(n),e)for(n=0;n<e.length;n++)RF(e[n])}}function w9(n,e){return n(e)}function b9(){}var _C=!1;function S9(n,e,t){if(_C)return n(e,t);_C=!0;try{return w9(n,e,t)}finally{_C=!1,(U0!==null||V0!==null)&&(b9(),_9())}}function y1(n,e){var t=n.stateNode;if(t===null)return null;var r=PA(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(gt(231,e,typeof t));return t}var hP=!1;if(wd)try{var Fy={};Object.defineProperty(Fy,"passive",{get:function(){hP=!0}}),window.addEventListener("test",Fy,Fy),window.removeEventListener("test",Fy,Fy)}catch{hP=!1}function pre(n,e,t,r,i,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var Ox=!1,_S=null,wS=!1,fP=null,mre={onError:function(n){Ox=!0,_S=n}};function gre(n,e,t,r,i,a,s,o,l){Ox=!1,_S=null,pre.apply(mre,arguments)}function vre(n,e,t,r,i,a,s,o,l){if(gre.apply(this,arguments),Ox){if(Ox){var u=_S;Ox=!1,_S=null}else throw Error(gt(198));wS||(wS=!0,fP=u)}}function Gm(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function E9(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function DF(n){if(Gm(n)!==n)throw Error(gt(188))}function yre(n){var e=n.alternate;if(!e){if(e=Gm(n),e===null)throw Error(gt(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===t)return DF(i),n;if(a===r)return DF(i),e;a=a.sibling}throw Error(gt(188))}if(t.return!==r.return)t=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===t){s=!0,t=i,r=a;break}if(o===r){s=!0,r=i,t=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===t){s=!0,t=a,r=i;break}if(o===r){s=!0,r=a,t=i;break}o=o.sibling}if(!s)throw Error(gt(189))}}if(t.alternate!==r)throw Error(gt(190))}if(t.tag!==3)throw Error(gt(188));return t.stateNode.current===t?n:e}function A9(n){return n=yre(n),n!==null?T9(n):null}function T9(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=T9(n);if(e!==null)return e;n=n.sibling}return null}var k9=Ko.unstable_scheduleCallback,LF=Ko.unstable_cancelCallback,xre=Ko.unstable_shouldYield,_re=Ko.unstable_requestPaint,ji=Ko.unstable_now,wre=Ko.unstable_getCurrentPriorityLevel,c3=Ko.unstable_ImmediatePriority,C9=Ko.unstable_UserBlockingPriority,bS=Ko.unstable_NormalPriority,bre=Ko.unstable_LowPriority,M9=Ko.unstable_IdlePriority,kA=null,sc=null;function Sre(n){if(sc&&typeof sc.onCommitFiberRoot=="function")try{sc.onCommitFiberRoot(kA,n,void 0,(n.current.flags&128)===128)}catch{}}var cu=Math.clz32?Math.clz32:Tre,Ere=Math.log,Are=Math.LN2;function Tre(n){return n>>>=0,n===0?32:31-(Ere(n)/Are|0)|0}var nb=64,rb=4194304;function gx(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function SS(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,a=n.pingedLanes,s=t&268435455;if(s!==0){var o=s&~i;o!==0?r=gx(o):(a&=s,a!==0&&(r=gx(a)))}else s=t&~i,s!==0?r=gx(s):a!==0&&(r=gx(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-cu(e),i=1<<t,r|=n[t],e&=~i;return r}function kre(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cre(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,a=n.pendingLanes;0<a;){var s=31-cu(a),o=1<<s,l=i[s];l===-1?(!(o&t)||o&r)&&(i[s]=kre(o,e)):l<=e&&(n.expiredLanes|=o),a&=~o}}function pP(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function I9(){var n=nb;return nb<<=1,!(nb&4194240)&&(nb=64),n}function wC(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function A_(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-cu(e),n[e]=t}function Mre(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-cu(t),a=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~a}}function d3(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-cu(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Ir=0;function P9(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var N9,h3,R9,D9,L9,mP=!1,ib=[],tf=null,nf=null,rf=null,x1=new Map,_1=new Map,Lh=[],Ire="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function OF(n,e){switch(n){case"focusin":case"focusout":tf=null;break;case"dragenter":case"dragleave":nf=null;break;case"mouseover":case"mouseout":rf=null;break;case"pointerover":case"pointerout":x1.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_1.delete(e.pointerId)}}function jy(n,e,t,r,i,a){return n===null||n.nativeEvent!==a?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=k_(e),e!==null&&h3(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function Pre(n,e,t,r,i){switch(e){case"focusin":return tf=jy(tf,n,e,t,r,i),!0;case"dragenter":return nf=jy(nf,n,e,t,r,i),!0;case"mouseover":return rf=jy(rf,n,e,t,r,i),!0;case"pointerover":var a=i.pointerId;return x1.set(a,jy(x1.get(a)||null,n,e,t,r,i)),!0;case"gotpointercapture":return a=i.pointerId,_1.set(a,jy(_1.get(a)||null,n,e,t,r,i)),!0}return!1}function O9(n){var e=zp(n.target);if(e!==null){var t=Gm(e);if(t!==null){if(e=t.tag,e===13){if(e=E9(t),e!==null){n.blockedOn=e,L9(n.priority,function(){R9(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function O2(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=gP(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);cP=r,t.target.dispatchEvent(r),cP=null}else return e=k_(t),e!==null&&h3(e),n.blockedOn=t,!1;e.shift()}return!0}function FF(n,e,t){O2(n)&&t.delete(e)}function Nre(){mP=!1,tf!==null&&O2(tf)&&(tf=null),nf!==null&&O2(nf)&&(nf=null),rf!==null&&O2(rf)&&(rf=null),x1.forEach(FF),_1.forEach(FF)}function By(n,e){n.blockedOn===e&&(n.blockedOn=null,mP||(mP=!0,Ko.unstable_scheduleCallback(Ko.unstable_NormalPriority,Nre)))}function w1(n){function e(i){return By(i,n)}if(0<ib.length){By(ib[0],n);for(var t=1;t<ib.length;t++){var r=ib[t];r.blockedOn===n&&(r.blockedOn=null)}}for(tf!==null&&By(tf,n),nf!==null&&By(nf,n),rf!==null&&By(rf,n),x1.forEach(e),_1.forEach(e),t=0;t<Lh.length;t++)r=Lh[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Lh.length&&(t=Lh[0],t.blockedOn===null);)O9(t),t.blockedOn===null&&Lh.shift()}var z0=jd.ReactCurrentBatchConfig,ES=!0;function Rre(n,e,t,r){var i=Ir,a=z0.transition;z0.transition=null;try{Ir=1,f3(n,e,t,r)}finally{Ir=i,z0.transition=a}}function Dre(n,e,t,r){var i=Ir,a=z0.transition;z0.transition=null;try{Ir=4,f3(n,e,t,r)}finally{Ir=i,z0.transition=a}}function f3(n,e,t,r){if(ES){var i=gP(n,e,t,r);if(i===null)PC(n,e,r,AS,t),OF(n,r);else if(Pre(i,n,e,t,r))r.stopPropagation();else if(OF(n,r),e&4&&-1<Ire.indexOf(n)){for(;i!==null;){var a=k_(i);if(a!==null&&N9(a),a=gP(n,e,t,r),a===null&&PC(n,e,r,AS,t),a===i)break;i=a}i!==null&&r.stopPropagation()}else PC(n,e,r,null,t)}}var AS=null;function gP(n,e,t,r){if(AS=null,n=u3(r),n=zp(n),n!==null)if(e=Gm(n),e===null)n=null;else if(t=e.tag,t===13){if(n=E9(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return AS=n,null}function F9(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wre()){case c3:return 1;case C9:return 4;case bS:case bre:return 16;case M9:return 536870912;default:return 16}default:return 16}}var Kh=null,p3=null,F2=null;function j9(){if(F2)return F2;var n,e=p3,t=e.length,r,i="value"in Kh?Kh.value:Kh.textContent,a=i.length;for(n=0;n<t&&e[n]===i[n];n++);var s=t-n;for(r=1;r<=s&&e[t-r]===i[a-r];r++);return F2=i.slice(n,1<r?1-r:void 0)}function j2(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function ab(){return!0}function jF(){return!1}function el(n){function e(t,r,i,a,s){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ab:jF,this.isPropagationStopped=jF,this}return _i(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ab)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ab)},persist:function(){},isPersistent:ab}),e}var Kv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},m3=el(Kv),T_=_i({},Kv,{view:0,detail:0}),Lre=el(T_),bC,SC,Uy,CA=_i({},T_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:g3,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Uy&&(Uy&&n.type==="mousemove"?(bC=n.screenX-Uy.screenX,SC=n.screenY-Uy.screenY):SC=bC=0,Uy=n),bC)},movementY:function(n){return"movementY"in n?n.movementY:SC}}),BF=el(CA),Ore=_i({},CA,{dataTransfer:0}),Fre=el(Ore),jre=_i({},T_,{relatedTarget:0}),EC=el(jre),Bre=_i({},Kv,{animationName:0,elapsedTime:0,pseudoElement:0}),Ure=el(Bre),Vre=_i({},Kv,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),zre=el(Vre),Hre=_i({},Kv,{data:0}),UF=el(Hre),Gre={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wre={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qre={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $re(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=qre[n])?!!e[n]:!1}function g3(){return $re}var Xre=_i({},T_,{key:function(n){if(n.key){var e=Gre[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=j2(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Wre[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:g3,charCode:function(n){return n.type==="keypress"?j2(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?j2(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Kre=el(Xre),Yre=_i({},CA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),VF=el(Yre),Zre=_i({},T_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:g3}),Qre=el(Zre),Jre=_i({},Kv,{propertyName:0,elapsedTime:0,pseudoElement:0}),eie=el(Jre),tie=_i({},CA,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),nie=el(tie),rie=[9,13,27,32],v3=wd&&"CompositionEvent"in window,Fx=null;wd&&"documentMode"in document&&(Fx=document.documentMode);var iie=wd&&"TextEvent"in window&&!Fx,B9=wd&&(!v3||Fx&&8<Fx&&11>=Fx),zF=" ",HF=!1;function U9(n,e){switch(n){case"keyup":return rie.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function V9(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var u0=!1;function aie(n,e){switch(n){case"compositionend":return V9(e);case"keypress":return e.which!==32?null:(HF=!0,zF);case"textInput":return n=e.data,n===zF&&HF?null:n;default:return null}}function sie(n,e){if(u0)return n==="compositionend"||!v3&&U9(n,e)?(n=j9(),F2=p3=Kh=null,u0=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return B9&&e.locale!=="ko"?null:e.data;default:return null}}var oie={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function GF(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!oie[n.type]:e==="textarea"}function z9(n,e,t,r){x9(r),e=TS(e,"onChange"),0<e.length&&(t=new m3("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var jx=null,b1=null;function lie(n){J9(n,0)}function MA(n){var e=h0(n);if(h9(e))return n}function uie(n,e){if(n==="change")return e}var H9=!1;if(wd){var AC;if(wd){var TC="oninput"in document;if(!TC){var WF=document.createElement("div");WF.setAttribute("oninput","return;"),TC=typeof WF.oninput=="function"}AC=TC}else AC=!1;H9=AC&&(!document.documentMode||9<document.documentMode)}function qF(){jx&&(jx.detachEvent("onpropertychange",G9),b1=jx=null)}function G9(n){if(n.propertyName==="value"&&MA(b1)){var e=[];z9(e,b1,n,u3(n)),S9(lie,e)}}function cie(n,e,t){n==="focusin"?(qF(),jx=e,b1=t,jx.attachEvent("onpropertychange",G9)):n==="focusout"&&qF()}function die(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return MA(b1)}function hie(n,e){if(n==="click")return MA(e)}function fie(n,e){if(n==="input"||n==="change")return MA(e)}function pie(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var vu=typeof Object.is=="function"?Object.is:pie;function S1(n,e){if(vu(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!QI.call(e,i)||!vu(n[i],e[i]))return!1}return!0}function $F(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function XF(n,e){var t=$F(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=$F(t)}}function W9(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?W9(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function q9(){for(var n=window,e=xS();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=xS(n.document)}return e}function y3(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function mie(n){var e=q9(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&W9(t.ownerDocument.documentElement,t)){if(r!==null&&y3(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!n.extend&&a>r&&(i=r,r=a,a=i),i=XF(t,a);var s=XF(t,r);i&&s&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==s.node||n.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),a>r?(n.addRange(e),n.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var gie=wd&&"documentMode"in document&&11>=document.documentMode,c0=null,vP=null,Bx=null,yP=!1;function KF(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;yP||c0==null||c0!==xS(r)||(r=c0,"selectionStart"in r&&y3(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bx&&S1(Bx,r)||(Bx=r,r=TS(vP,"onSelect"),0<r.length&&(e=new m3("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=c0)))}function sb(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var d0={animationend:sb("Animation","AnimationEnd"),animationiteration:sb("Animation","AnimationIteration"),animationstart:sb("Animation","AnimationStart"),transitionend:sb("Transition","TransitionEnd")},kC={},$9={};wd&&($9=document.createElement("div").style,"AnimationEvent"in window||(delete d0.animationend.animation,delete d0.animationiteration.animation,delete d0.animationstart.animation),"TransitionEvent"in window||delete d0.transitionend.transition);function IA(n){if(kC[n])return kC[n];if(!d0[n])return n;var e=d0[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in $9)return kC[n]=e[t];return n}var X9=IA("animationend"),K9=IA("animationiteration"),Y9=IA("animationstart"),Z9=IA("transitionend"),Q9=new Map,YF="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Of(n,e){Q9.set(n,e),Hm(e,[n])}for(var CC=0;CC<YF.length;CC++){var MC=YF[CC],vie=MC.toLowerCase(),yie=MC[0].toUpperCase()+MC.slice(1);Of(vie,"on"+yie)}Of(X9,"onAnimationEnd");Of(K9,"onAnimationIteration");Of(Y9,"onAnimationStart");Of("dblclick","onDoubleClick");Of("focusin","onFocus");Of("focusout","onBlur");Of(Z9,"onTransitionEnd");mv("onMouseEnter",["mouseout","mouseover"]);mv("onMouseLeave",["mouseout","mouseover"]);mv("onPointerEnter",["pointerout","pointerover"]);mv("onPointerLeave",["pointerout","pointerover"]);Hm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hm("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vx="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xie=new Set("cancel close invalid load scroll toggle".split(" ").concat(vx));function ZF(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,vre(r,e,void 0,n),n.currentTarget=null}function J9(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;ZF(i,o,u),a=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;ZF(i,o,u),a=l}}}if(wS)throw n=fP,wS=!1,fP=null,n}function Qr(n,e){var t=e[SP];t===void 0&&(t=e[SP]=new Set);var r=n+"__bubble";t.has(r)||(ez(e,n,2,!1),t.add(r))}function IC(n,e,t){var r=0;e&&(r|=4),ez(t,n,r,e)}var ob="_reactListening"+Math.random().toString(36).slice(2);function E1(n){if(!n[ob]){n[ob]=!0,o9.forEach(function(t){t!=="selectionchange"&&(xie.has(t)||IC(t,!1,n),IC(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[ob]||(e[ob]=!0,IC("selectionchange",!1,e))}}function ez(n,e,t,r){switch(F9(e)){case 1:var i=Rre;break;case 4:i=Dre;break;default:i=f3}t=i.bind(null,e,t,n),i=void 0,!hP||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function PC(n,e,t,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=zp(o),s===null)return;if(l=s.tag,l===5||l===6){r=a=s;continue e}o=o.parentNode}}r=r.return}S9(function(){var u=a,c=u3(t),d=[];e:{var f=Q9.get(n);if(f!==void 0){var m=m3,v=n;switch(n){case"keypress":if(j2(t)===0)break e;case"keydown":case"keyup":m=Kre;break;case"focusin":v="focus",m=EC;break;case"focusout":v="blur",m=EC;break;case"beforeblur":case"afterblur":m=EC;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=BF;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Fre;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Qre;break;case X9:case K9:case Y9:m=Ure;break;case Z9:m=eie;break;case"scroll":m=Lre;break;case"wheel":m=nie;break;case"copy":case"cut":case"paste":m=zre;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=VF}var _=(e&4)!==0,w=!_&&n==="scroll",x=_?f!==null?f+"Capture":null:f;_=[];for(var S=u,E;S!==null;){E=S;var T=E.stateNode;if(E.tag===5&&T!==null&&(E=T,x!==null&&(T=y1(S,x),T!=null&&_.push(A1(S,T,E)))),w)break;S=S.return}0<_.length&&(f=new m(f,v,null,t,c),d.push({event:f,listeners:_}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",f&&t!==cP&&(v=t.relatedTarget||t.fromElement)&&(zp(v)||v[bd]))break e;if((m||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=u,v=v?zp(v):null,v!==null&&(w=Gm(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(_=BF,T="onMouseLeave",x="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(_=VF,T="onPointerLeave",x="onPointerEnter",S="pointer"),w=m==null?f:h0(m),E=v==null?f:h0(v),f=new _(T,S+"leave",m,t,c),f.target=w,f.relatedTarget=E,T=null,zp(c)===u&&(_=new _(x,S+"enter",v,t,c),_.target=E,_.relatedTarget=w,T=_),w=T,m&&v)t:{for(_=m,x=v,S=0,E=_;E;E=bg(E))S++;for(E=0,T=x;T;T=bg(T))E++;for(;0<S-E;)_=bg(_),S--;for(;0<E-S;)x=bg(x),E--;for(;S--;){if(_===x||x!==null&&_===x.alternate)break t;_=bg(_),x=bg(x)}_=null}else _=null;m!==null&&QF(d,f,m,_,!1),v!==null&&w!==null&&QF(d,w,v,_,!0)}}e:{if(f=u?h0(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var D=uie;else if(GF(f))if(H9)D=fie;else{D=die;var F=cie}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=hie);if(D&&(D=D(n,u))){z9(d,D,t,c);break e}F&&F(n,f,u),n==="focusout"&&(F=f._wrapperState)&&F.controlled&&f.type==="number"&&aP(f,"number",f.value)}switch(F=u?h0(u):window,n){case"focusin":(GF(F)||F.contentEditable==="true")&&(c0=F,vP=u,Bx=null);break;case"focusout":Bx=vP=c0=null;break;case"mousedown":yP=!0;break;case"contextmenu":case"mouseup":case"dragend":yP=!1,KF(d,t,c);break;case"selectionchange":if(gie)break;case"keydown":case"keyup":KF(d,t,c)}var P;if(v3)e:{switch(n){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else u0?U9(n,t)&&(N="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(N="onCompositionStart");N&&(B9&&t.locale!=="ko"&&(u0||N!=="onCompositionStart"?N==="onCompositionEnd"&&u0&&(P=j9()):(Kh=c,p3="value"in Kh?Kh.value:Kh.textContent,u0=!0)),F=TS(u,N),0<F.length&&(N=new UF(N,n,null,t,c),d.push({event:N,listeners:F}),P?N.data=P:(P=V9(t),P!==null&&(N.data=P)))),(P=iie?aie(n,t):sie(n,t))&&(u=TS(u,"onBeforeInput"),0<u.length&&(c=new UF("onBeforeInput","beforeinput",null,t,c),d.push({event:c,listeners:u}),c.data=P))}J9(d,e)})}function A1(n,e,t){return{instance:n,listener:e,currentTarget:t}}function TS(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=y1(n,t),a!=null&&r.unshift(A1(n,a,i)),a=y1(n,e),a!=null&&r.push(A1(n,a,i))),n=n.return}return r}function bg(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function QF(n,e,t,r,i){for(var a=e._reactName,s=[];t!==null&&t!==r;){var o=t,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=y1(t,a),l!=null&&s.unshift(A1(t,l,o))):i||(l=y1(t,a),l!=null&&s.push(A1(t,l,o)))),t=t.return}s.length!==0&&n.push({event:e,listeners:s})}var _ie=/\r\n?/g,wie=/\u0000|\uFFFD/g;function JF(n){return(typeof n=="string"?n:""+n).replace(_ie,`
`).replace(wie,"")}function lb(n,e,t){if(e=JF(e),JF(n)!==e&&t)throw Error(gt(425))}function kS(){}var xP=null,_P=null;function wP(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bP=typeof setTimeout=="function"?setTimeout:void 0,bie=typeof clearTimeout=="function"?clearTimeout:void 0,e8=typeof Promise=="function"?Promise:void 0,Sie=typeof queueMicrotask=="function"?queueMicrotask:typeof e8<"u"?function(n){return e8.resolve(null).then(n).catch(Eie)}:bP;function Eie(n){setTimeout(function(){throw n})}function NC(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),w1(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);w1(e)}function af(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function t8(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Yv=Math.random().toString(36).slice(2),Zu="__reactFiber$"+Yv,T1="__reactProps$"+Yv,bd="__reactContainer$"+Yv,SP="__reactEvents$"+Yv,Aie="__reactListeners$"+Yv,Tie="__reactHandles$"+Yv;function zp(n){var e=n[Zu];if(e)return e;for(var t=n.parentNode;t;){if(e=t[bd]||t[Zu]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=t8(n);n!==null;){if(t=n[Zu])return t;n=t8(n)}return e}n=t,t=n.parentNode}return null}function k_(n){return n=n[Zu]||n[bd],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function h0(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(gt(33))}function PA(n){return n[T1]||null}var EP=[],f0=-1;function Ff(n){return{current:n}}function ri(n){0>f0||(n.current=EP[f0],EP[f0]=null,f0--)}function Wr(n,e){f0++,EP[f0]=n.current,n.current=e}var wf={},As=Ff(wf),To=Ff(!1),xm=wf;function gv(n,e){var t=n.type.contextTypes;if(!t)return wf;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in t)i[a]=e[a];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function ko(n){return n=n.childContextTypes,n!=null}function CS(){ri(To),ri(As)}function n8(n,e,t){if(As.current!==wf)throw Error(gt(168));Wr(As,e),Wr(To,t)}function tz(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(gt(108,cre(n)||"Unknown",i));return _i({},t,r)}function MS(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||wf,xm=As.current,Wr(As,n),Wr(To,To.current),!0}function r8(n,e,t){var r=n.stateNode;if(!r)throw Error(gt(169));t?(n=tz(n,e,xm),r.__reactInternalMemoizedMergedChildContext=n,ri(To),ri(As),Wr(As,n)):ri(To),Wr(To,t)}var td=null,NA=!1,RC=!1;function nz(n){td===null?td=[n]:td.push(n)}function kie(n){NA=!0,nz(n)}function jf(){if(!RC&&td!==null){RC=!0;var n=0,e=Ir;try{var t=td;for(Ir=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}td=null,NA=!1}catch(i){throw td!==null&&(td=td.slice(n+1)),k9(c3,jf),i}finally{Ir=e,RC=!1}}return null}var p0=[],m0=0,IS=null,PS=0,vl=[],yl=0,_m=null,od=1,ld="";function Cp(n,e){p0[m0++]=PS,p0[m0++]=IS,IS=n,PS=e}function rz(n,e,t){vl[yl++]=od,vl[yl++]=ld,vl[yl++]=_m,_m=n;var r=od;n=ld;var i=32-cu(r)-1;r&=~(1<<i),t+=1;var a=32-cu(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,od=1<<32-cu(e)+i|t<<i|r,ld=a+n}else od=1<<a|t<<i|r,ld=n}function x3(n){n.return!==null&&(Cp(n,1),rz(n,1,0))}function _3(n){for(;n===IS;)IS=p0[--m0],p0[m0]=null,PS=p0[--m0],p0[m0]=null;for(;n===_m;)_m=vl[--yl],vl[yl]=null,ld=vl[--yl],vl[yl]=null,od=vl[--yl],vl[yl]=null}var Go=null,zo=null,li=!1,nu=null;function iz(n,e){var t=wl(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function i8(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Go=n,zo=af(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Go=n,zo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=_m!==null?{id:od,overflow:ld}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=wl(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Go=n,zo=null,!0):!1;default:return!1}}function AP(n){return(n.mode&1)!==0&&(n.flags&128)===0}function TP(n){if(li){var e=zo;if(e){var t=e;if(!i8(n,e)){if(AP(n))throw Error(gt(418));e=af(t.nextSibling);var r=Go;e&&i8(n,e)?iz(r,t):(n.flags=n.flags&-4097|2,li=!1,Go=n)}}else{if(AP(n))throw Error(gt(418));n.flags=n.flags&-4097|2,li=!1,Go=n}}}function a8(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Go=n}function ub(n){if(n!==Go)return!1;if(!li)return a8(n),li=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!wP(n.type,n.memoizedProps)),e&&(e=zo)){if(AP(n))throw az(),Error(gt(418));for(;e;)iz(n,e),e=af(e.nextSibling)}if(a8(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(gt(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){zo=af(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}zo=null}}else zo=Go?af(n.stateNode.nextSibling):null;return!0}function az(){for(var n=zo;n;)n=af(n.nextSibling)}function vv(){zo=Go=null,li=!1}function w3(n){nu===null?nu=[n]:nu.push(n)}var Cie=jd.ReactCurrentBatchConfig;function Vy(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(gt(309));var r=t.stateNode}if(!r)throw Error(gt(147,n));var i=r,a=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},e._stringRef=a,e)}if(typeof n!="string")throw Error(gt(284));if(!t._owner)throw Error(gt(290,n))}return n}function cb(n,e){throw n=Object.prototype.toString.call(e),Error(gt(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function s8(n){var e=n._init;return e(n._payload)}function sz(n){function e(x,S){if(n){var E=x.deletions;E===null?(x.deletions=[S],x.flags|=16):E.push(S)}}function t(x,S){if(!n)return null;for(;S!==null;)e(x,S),S=S.sibling;return null}function r(x,S){for(x=new Map;S!==null;)S.key!==null?x.set(S.key,S):x.set(S.index,S),S=S.sibling;return x}function i(x,S){return x=uf(x,S),x.index=0,x.sibling=null,x}function a(x,S,E){return x.index=E,n?(E=x.alternate,E!==null?(E=E.index,E<S?(x.flags|=2,S):E):(x.flags|=2,S)):(x.flags|=1048576,S)}function s(x){return n&&x.alternate===null&&(x.flags|=2),x}function o(x,S,E,T){return S===null||S.tag!==6?(S=UC(E,x.mode,T),S.return=x,S):(S=i(S,E),S.return=x,S)}function l(x,S,E,T){var D=E.type;return D===l0?c(x,S,E.props.children,T,E.key):S!==null&&(S.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Nh&&s8(D)===S.type)?(T=i(S,E.props),T.ref=Vy(x,S,E),T.return=x,T):(T=W2(E.type,E.key,E.props,null,x.mode,T),T.ref=Vy(x,S,E),T.return=x,T)}function u(x,S,E,T){return S===null||S.tag!==4||S.stateNode.containerInfo!==E.containerInfo||S.stateNode.implementation!==E.implementation?(S=VC(E,x.mode,T),S.return=x,S):(S=i(S,E.children||[]),S.return=x,S)}function c(x,S,E,T,D){return S===null||S.tag!==7?(S=cm(E,x.mode,T,D),S.return=x,S):(S=i(S,E),S.return=x,S)}function d(x,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return S=UC(""+S,x.mode,E),S.return=x,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Jw:return E=W2(S.type,S.key,S.props,null,x.mode,E),E.ref=Vy(x,null,S),E.return=x,E;case o0:return S=VC(S,x.mode,E),S.return=x,S;case Nh:var T=S._init;return d(x,T(S._payload),E)}if(mx(S)||Oy(S))return S=cm(S,x.mode,E,null),S.return=x,S;cb(x,S)}return null}function f(x,S,E,T){var D=S!==null?S.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return D!==null?null:o(x,S,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Jw:return E.key===D?l(x,S,E,T):null;case o0:return E.key===D?u(x,S,E,T):null;case Nh:return D=E._init,f(x,S,D(E._payload),T)}if(mx(E)||Oy(E))return D!==null?null:c(x,S,E,T,null);cb(x,E)}return null}function m(x,S,E,T,D){if(typeof T=="string"&&T!==""||typeof T=="number")return x=x.get(E)||null,o(S,x,""+T,D);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Jw:return x=x.get(T.key===null?E:T.key)||null,l(S,x,T,D);case o0:return x=x.get(T.key===null?E:T.key)||null,u(S,x,T,D);case Nh:var F=T._init;return m(x,S,E,F(T._payload),D)}if(mx(T)||Oy(T))return x=x.get(E)||null,c(S,x,T,D,null);cb(S,T)}return null}function v(x,S,E,T){for(var D=null,F=null,P=S,N=S=0,I=null;P!==null&&N<E.length;N++){P.index>N?(I=P,P=null):I=P.sibling;var R=f(x,P,E[N],T);if(R===null){P===null&&(P=I);break}n&&P&&R.alternate===null&&e(x,P),S=a(R,S,N),F===null?D=R:F.sibling=R,F=R,P=I}if(N===E.length)return t(x,P),li&&Cp(x,N),D;if(P===null){for(;N<E.length;N++)P=d(x,E[N],T),P!==null&&(S=a(P,S,N),F===null?D=P:F.sibling=P,F=P);return li&&Cp(x,N),D}for(P=r(x,P);N<E.length;N++)I=m(P,x,N,E[N],T),I!==null&&(n&&I.alternate!==null&&P.delete(I.key===null?N:I.key),S=a(I,S,N),F===null?D=I:F.sibling=I,F=I);return n&&P.forEach(function(B){return e(x,B)}),li&&Cp(x,N),D}function _(x,S,E,T){var D=Oy(E);if(typeof D!="function")throw Error(gt(150));if(E=D.call(E),E==null)throw Error(gt(151));for(var F=D=null,P=S,N=S=0,I=null,R=E.next();P!==null&&!R.done;N++,R=E.next()){P.index>N?(I=P,P=null):I=P.sibling;var B=f(x,P,R.value,T);if(B===null){P===null&&(P=I);break}n&&P&&B.alternate===null&&e(x,P),S=a(B,S,N),F===null?D=B:F.sibling=B,F=B,P=I}if(R.done)return t(x,P),li&&Cp(x,N),D;if(P===null){for(;!R.done;N++,R=E.next())R=d(x,R.value,T),R!==null&&(S=a(R,S,N),F===null?D=R:F.sibling=R,F=R);return li&&Cp(x,N),D}for(P=r(x,P);!R.done;N++,R=E.next())R=m(P,x,N,R.value,T),R!==null&&(n&&R.alternate!==null&&P.delete(R.key===null?N:R.key),S=a(R,S,N),F===null?D=R:F.sibling=R,F=R);return n&&P.forEach(function(G){return e(x,G)}),li&&Cp(x,N),D}function w(x,S,E,T){if(typeof E=="object"&&E!==null&&E.type===l0&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Jw:e:{for(var D=E.key,F=S;F!==null;){if(F.key===D){if(D=E.type,D===l0){if(F.tag===7){t(x,F.sibling),S=i(F,E.props.children),S.return=x,x=S;break e}}else if(F.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Nh&&s8(D)===F.type){t(x,F.sibling),S=i(F,E.props),S.ref=Vy(x,F,E),S.return=x,x=S;break e}t(x,F);break}else e(x,F);F=F.sibling}E.type===l0?(S=cm(E.props.children,x.mode,T,E.key),S.return=x,x=S):(T=W2(E.type,E.key,E.props,null,x.mode,T),T.ref=Vy(x,S,E),T.return=x,x=T)}return s(x);case o0:e:{for(F=E.key;S!==null;){if(S.key===F)if(S.tag===4&&S.stateNode.containerInfo===E.containerInfo&&S.stateNode.implementation===E.implementation){t(x,S.sibling),S=i(S,E.children||[]),S.return=x,x=S;break e}else{t(x,S);break}else e(x,S);S=S.sibling}S=VC(E,x.mode,T),S.return=x,x=S}return s(x);case Nh:return F=E._init,w(x,S,F(E._payload),T)}if(mx(E))return v(x,S,E,T);if(Oy(E))return _(x,S,E,T);cb(x,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,S!==null&&S.tag===6?(t(x,S.sibling),S=i(S,E),S.return=x,x=S):(t(x,S),S=UC(E,x.mode,T),S.return=x,x=S),s(x)):t(x,S)}return w}var yv=sz(!0),oz=sz(!1),NS=Ff(null),RS=null,g0=null,b3=null;function S3(){b3=g0=RS=null}function E3(n){var e=NS.current;ri(NS),n._currentValue=e}function kP(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function H0(n,e){RS=n,b3=g0=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(So=!0),n.firstContext=null)}function Cl(n){var e=n._currentValue;if(b3!==n)if(n={context:n,memoizedValue:e,next:null},g0===null){if(RS===null)throw Error(gt(308));g0=n,RS.dependencies={lanes:0,firstContext:n}}else g0=g0.next=n;return e}var Hp=null;function A3(n){Hp===null?Hp=[n]:Hp.push(n)}function lz(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,A3(e)):(t.next=i.next,i.next=t),e.interleaved=t,Sd(n,r)}function Sd(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Rh=!1;function T3(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uz(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function fd(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function sf(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,or&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Sd(n,t)}return i=r.interleaved,i===null?(e.next=e,A3(r)):(e.next=i.next,i.next=e),r.interleaved=e,Sd(n,t)}function B2(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,d3(n,t)}}function o8(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,a=null;if(t=t.firstBaseUpdate,t!==null){do{var s={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};a===null?i=a=s:a=a.next=s,t=t.next}while(t!==null);a===null?i=a=e:a=a.next=e}else i=a=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function DS(n,e,t,r){var i=n.updateQueue;Rh=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?a=u:s.next=u,s=l;var c=n.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==s&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(a!==null){var d=i.baseState;s=0,c=u=l=null,o=a;do{var f=o.lane,m=o.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=n,_=o;switch(f=e,m=t,_.tag){case 1:if(v=_.payload,typeof v=="function"){d=v.call(m,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,f=typeof v=="function"?v.call(m,d,f):v,f==null)break e;d=_i({},d,f);break e;case 2:Rh=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else m={eventTime:m,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=m,l=d):c=c.next=m,s|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);bm|=s,n.lanes=s,n.memoizedState=d}}function l8(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(gt(191,i));i.call(r)}}}var C_={},oc=Ff(C_),k1=Ff(C_),C1=Ff(C_);function Gp(n){if(n===C_)throw Error(gt(174));return n}function k3(n,e){switch(Wr(C1,e),Wr(k1,n),Wr(oc,C_),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:oP(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=oP(e,n)}ri(oc),Wr(oc,e)}function xv(){ri(oc),ri(k1),ri(C1)}function cz(n){Gp(C1.current);var e=Gp(oc.current),t=oP(e,n.type);e!==t&&(Wr(k1,n),Wr(oc,t))}function C3(n){k1.current===n&&(ri(oc),ri(k1))}var mi=Ff(0);function LS(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var DC=[];function M3(){for(var n=0;n<DC.length;n++)DC[n]._workInProgressVersionPrimary=null;DC.length=0}var U2=jd.ReactCurrentDispatcher,LC=jd.ReactCurrentBatchConfig,wm=0,xi=null,oa=null,Ea=null,OS=!1,Ux=!1,M1=0,Mie=0;function ss(){throw Error(gt(321))}function I3(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!vu(n[t],e[t]))return!1;return!0}function P3(n,e,t,r,i,a){if(wm=a,xi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,U2.current=n===null||n.memoizedState===null?Rie:Die,n=t(r,i),Ux){a=0;do{if(Ux=!1,M1=0,25<=a)throw Error(gt(301));a+=1,Ea=oa=null,e.updateQueue=null,U2.current=Lie,n=t(r,i)}while(Ux)}if(U2.current=FS,e=oa!==null&&oa.next!==null,wm=0,Ea=oa=xi=null,OS=!1,e)throw Error(gt(300));return n}function N3(){var n=M1!==0;return M1=0,n}function qu(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ea===null?xi.memoizedState=Ea=n:Ea=Ea.next=n,Ea}function Ml(){if(oa===null){var n=xi.alternate;n=n!==null?n.memoizedState:null}else n=oa.next;var e=Ea===null?xi.memoizedState:Ea.next;if(e!==null)Ea=e,oa=n;else{if(n===null)throw Error(gt(310));oa=n,n={memoizedState:oa.memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},Ea===null?xi.memoizedState=Ea=n:Ea=Ea.next=n}return Ea}function I1(n,e){return typeof e=="function"?e(n):e}function OC(n){var e=Ml(),t=e.queue;if(t===null)throw Error(gt(311));t.lastRenderedReducer=n;var r=oa,i=r.baseQueue,a=t.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,t.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,l=null,u=a;do{var c=u.lane;if((wm&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,s=r):l=l.next=d,xi.lanes|=c,bm|=c}u=u.next}while(u!==null&&u!==a);l===null?s=r:l.next=o,vu(r,e.memoizedState)||(So=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do a=i.lane,xi.lanes|=a,bm|=a,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function FC(n){var e=Ml(),t=e.queue;if(t===null)throw Error(gt(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,a=e.memoizedState;if(i!==null){t.pending=null;var s=i=i.next;do a=n(a,s.action),s=s.next;while(s!==i);vu(a,e.memoizedState)||(So=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),t.lastRenderedState=a}return[a,r]}function dz(){}function hz(n,e){var t=xi,r=Ml(),i=e(),a=!vu(r.memoizedState,i);if(a&&(r.memoizedState=i,So=!0),r=r.queue,R3(mz.bind(null,t,r,n),[n]),r.getSnapshot!==e||a||Ea!==null&&Ea.memoizedState.tag&1){if(t.flags|=2048,P1(9,pz.bind(null,t,r,i,e),void 0,null),ka===null)throw Error(gt(349));wm&30||fz(t,e,i)}return i}function fz(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=xi.updateQueue,e===null?(e={lastEffect:null,stores:null},xi.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function pz(n,e,t,r){e.value=t,e.getSnapshot=r,gz(e)&&vz(n)}function mz(n,e,t){return t(function(){gz(e)&&vz(n)})}function gz(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!vu(n,t)}catch{return!0}}function vz(n){var e=Sd(n,1);e!==null&&du(e,n,1,-1)}function u8(n){var e=qu();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:I1,lastRenderedState:n},e.queue=n,n=n.dispatch=Nie.bind(null,xi,n),[e.memoizedState,n]}function P1(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=xi.updateQueue,e===null?(e={lastEffect:null,stores:null},xi.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function yz(){return Ml().memoizedState}function V2(n,e,t,r){var i=qu();xi.flags|=n,i.memoizedState=P1(1|e,t,void 0,r===void 0?null:r)}function RA(n,e,t,r){var i=Ml();r=r===void 0?null:r;var a=void 0;if(oa!==null){var s=oa.memoizedState;if(a=s.destroy,r!==null&&I3(r,s.deps)){i.memoizedState=P1(e,t,a,r);return}}xi.flags|=n,i.memoizedState=P1(1|e,t,a,r)}function c8(n,e){return V2(8390656,8,n,e)}function R3(n,e){return RA(2048,8,n,e)}function xz(n,e){return RA(4,2,n,e)}function _z(n,e){return RA(4,4,n,e)}function wz(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function bz(n,e,t){return t=t!=null?t.concat([n]):null,RA(4,4,wz.bind(null,e,n),t)}function D3(){}function Sz(n,e){var t=Ml();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&I3(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function Ez(n,e){var t=Ml();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&I3(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function Az(n,e,t){return wm&21?(vu(t,e)||(t=I9(),xi.lanes|=t,bm|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,So=!0),n.memoizedState=t)}function Iie(n,e){var t=Ir;Ir=t!==0&&4>t?t:4,n(!0);var r=LC.transition;LC.transition={};try{n(!1),e()}finally{Ir=t,LC.transition=r}}function Tz(){return Ml().memoizedState}function Pie(n,e,t){var r=lf(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},kz(n))Cz(e,t);else if(t=lz(n,e,t,r),t!==null){var i=Zs();du(t,n,r,i),Mz(t,e,r)}}function Nie(n,e,t){var r=lf(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(kz(n))Cz(e,i);else{var a=n.alternate;if(n.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,t);if(i.hasEagerState=!0,i.eagerState=o,vu(o,s)){var l=e.interleaved;l===null?(i.next=i,A3(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=lz(n,e,i,r),t!==null&&(i=Zs(),du(t,n,r,i),Mz(t,e,r))}}function kz(n){var e=n.alternate;return n===xi||e!==null&&e===xi}function Cz(n,e){Ux=OS=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Mz(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,d3(n,t)}}var FS={readContext:Cl,useCallback:ss,useContext:ss,useEffect:ss,useImperativeHandle:ss,useInsertionEffect:ss,useLayoutEffect:ss,useMemo:ss,useReducer:ss,useRef:ss,useState:ss,useDebugValue:ss,useDeferredValue:ss,useTransition:ss,useMutableSource:ss,useSyncExternalStore:ss,useId:ss,unstable_isNewReconciler:!1},Rie={readContext:Cl,useCallback:function(n,e){return qu().memoizedState=[n,e===void 0?null:e],n},useContext:Cl,useEffect:c8,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,V2(4194308,4,wz.bind(null,e,n),t)},useLayoutEffect:function(n,e){return V2(4194308,4,n,e)},useInsertionEffect:function(n,e){return V2(4,2,n,e)},useMemo:function(n,e){var t=qu();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=qu();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Pie.bind(null,xi,n),[r.memoizedState,n]},useRef:function(n){var e=qu();return n={current:n},e.memoizedState=n},useState:u8,useDebugValue:D3,useDeferredValue:function(n){return qu().memoizedState=n},useTransition:function(){var n=u8(!1),e=n[0];return n=Iie.bind(null,n[1]),qu().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=xi,i=qu();if(li){if(t===void 0)throw Error(gt(407));t=t()}else{if(t=e(),ka===null)throw Error(gt(349));wm&30||fz(r,e,t)}i.memoizedState=t;var a={value:t,getSnapshot:e};return i.queue=a,c8(mz.bind(null,r,a,n),[n]),r.flags|=2048,P1(9,pz.bind(null,r,a,t,e),void 0,null),t},useId:function(){var n=qu(),e=ka.identifierPrefix;if(li){var t=ld,r=od;t=(r&~(1<<32-cu(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=M1++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Mie++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Die={readContext:Cl,useCallback:Sz,useContext:Cl,useEffect:R3,useImperativeHandle:bz,useInsertionEffect:xz,useLayoutEffect:_z,useMemo:Ez,useReducer:OC,useRef:yz,useState:function(){return OC(I1)},useDebugValue:D3,useDeferredValue:function(n){var e=Ml();return Az(e,oa.memoizedState,n)},useTransition:function(){var n=OC(I1)[0],e=Ml().memoizedState;return[n,e]},useMutableSource:dz,useSyncExternalStore:hz,useId:Tz,unstable_isNewReconciler:!1},Lie={readContext:Cl,useCallback:Sz,useContext:Cl,useEffect:R3,useImperativeHandle:bz,useInsertionEffect:xz,useLayoutEffect:_z,useMemo:Ez,useReducer:FC,useRef:yz,useState:function(){return FC(I1)},useDebugValue:D3,useDeferredValue:function(n){var e=Ml();return oa===null?e.memoizedState=n:Az(e,oa.memoizedState,n)},useTransition:function(){var n=FC(I1)[0],e=Ml().memoizedState;return[n,e]},useMutableSource:dz,useSyncExternalStore:hz,useId:Tz,unstable_isNewReconciler:!1};function Yl(n,e){if(n&&n.defaultProps){e=_i({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function CP(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:_i({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var DA={isMounted:function(n){return(n=n._reactInternals)?Gm(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Zs(),i=lf(n),a=fd(r,i);a.payload=e,t!=null&&(a.callback=t),e=sf(n,a,i),e!==null&&(du(e,n,i,r),B2(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Zs(),i=lf(n),a=fd(r,i);a.tag=1,a.payload=e,t!=null&&(a.callback=t),e=sf(n,a,i),e!==null&&(du(e,n,i,r),B2(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Zs(),r=lf(n),i=fd(t,r);i.tag=2,e!=null&&(i.callback=e),e=sf(n,i,r),e!==null&&(du(e,n,r,t),B2(e,n,r))}};function d8(n,e,t,r,i,a,s){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,a,s):e.prototype&&e.prototype.isPureReactComponent?!S1(t,r)||!S1(i,a):!0}function Iz(n,e,t){var r=!1,i=wf,a=e.contextType;return typeof a=="object"&&a!==null?a=Cl(a):(i=ko(e)?xm:As.current,r=e.contextTypes,a=(r=r!=null)?gv(n,i):wf),e=new e(t,a),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=DA,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=a),e}function h8(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&DA.enqueueReplaceState(e,e.state,null)}function MP(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},T3(n);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Cl(a):(a=ko(e)?xm:As.current,i.context=gv(n,a)),i.state=n.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(CP(n,e,a,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&DA.enqueueReplaceState(i,i.state,null),DS(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function _v(n,e){try{var t="",r=e;do t+=ure(r),r=r.return;while(r);var i=t}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:n,source:e,stack:i,digest:null}}function jC(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function IP(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Oie=typeof WeakMap=="function"?WeakMap:Map;function Pz(n,e,t){t=fd(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){BS||(BS=!0,UP=r),IP(n,e)},t}function Nz(n,e,t){t=fd(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){IP(n,e)}}var a=n.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){IP(n,e),typeof r!="function"&&(of===null?of=new Set([this]):of.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),t}function f8(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Oie;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=Yie.bind(null,n,e,t),e.then(n,n))}function p8(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function m8(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=fd(-1,1),e.tag=2,sf(t,e,1))),t.lanes|=1),n)}var Fie=jd.ReactCurrentOwner,So=!1;function qs(n,e,t,r){e.child=n===null?oz(e,null,t,r):yv(e,n.child,t,r)}function g8(n,e,t,r,i){t=t.render;var a=e.ref;return H0(e,i),r=P3(n,e,t,r,a,i),t=N3(),n!==null&&!So?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ed(n,e,i)):(li&&t&&x3(e),e.flags|=1,qs(n,e,r,i),e.child)}function v8(n,e,t,r,i){if(n===null){var a=t.type;return typeof a=="function"&&!z3(a)&&a.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=a,Rz(n,e,a,r,i)):(n=W2(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(a=n.child,!(n.lanes&i)){var s=a.memoizedProps;if(t=t.compare,t=t!==null?t:S1,t(s,r)&&n.ref===e.ref)return Ed(n,e,i)}return e.flags|=1,n=uf(a,r),n.ref=e.ref,n.return=e,e.child=n}function Rz(n,e,t,r,i){if(n!==null){var a=n.memoizedProps;if(S1(a,r)&&n.ref===e.ref)if(So=!1,e.pendingProps=r=a,(n.lanes&i)!==0)n.flags&131072&&(So=!0);else return e.lanes=n.lanes,Ed(n,e,i)}return PP(n,e,t,r,i)}function Dz(n,e,t){var r=e.pendingProps,i=r.children,a=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wr(y0,Bo),Bo|=t;else{if(!(t&1073741824))return n=a!==null?a.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Wr(y0,Bo),Bo|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:t,Wr(y0,Bo),Bo|=r}else a!==null?(r=a.baseLanes|t,e.memoizedState=null):r=t,Wr(y0,Bo),Bo|=r;return qs(n,e,i,t),e.child}function Lz(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function PP(n,e,t,r,i){var a=ko(t)?xm:As.current;return a=gv(e,a),H0(e,i),t=P3(n,e,t,r,a,i),r=N3(),n!==null&&!So?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ed(n,e,i)):(li&&r&&x3(e),e.flags|=1,qs(n,e,t,i),e.child)}function y8(n,e,t,r,i){if(ko(t)){var a=!0;MS(e)}else a=!1;if(H0(e,i),e.stateNode===null)z2(n,e),Iz(e,t,r),MP(e,t,r,i),r=!0;else if(n===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var l=s.context,u=t.contextType;typeof u=="object"&&u!==null?u=Cl(u):(u=ko(t)?xm:As.current,u=gv(e,u));var c=t.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||l!==u)&&h8(e,s,r,u),Rh=!1;var f=e.memoizedState;s.state=f,DS(e,r,s,i),l=e.memoizedState,o!==r||f!==l||To.current||Rh?(typeof c=="function"&&(CP(e,t,c,r),l=e.memoizedState),(o=Rh||d8(e,t,o,r,f,l,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=o):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,uz(n,e),o=e.memoizedProps,u=e.type===e.elementType?o:Yl(e.type,o),s.props=u,d=e.pendingProps,f=s.context,l=t.contextType,typeof l=="object"&&l!==null?l=Cl(l):(l=ko(t)?xm:As.current,l=gv(e,l));var m=t.getDerivedStateFromProps;(c=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==d||f!==l)&&h8(e,s,r,l),Rh=!1,f=e.memoizedState,s.state=f,DS(e,r,s,i);var v=e.memoizedState;o!==d||f!==v||To.current||Rh?(typeof m=="function"&&(CP(e,t,m,r),v=e.memoizedState),(u=Rh||d8(e,t,u,r,f,v,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),s.props=r,s.state=v,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),r=!1)}return NP(n,e,t,r,a,i)}function NP(n,e,t,r,i,a){Lz(n,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&r8(e,t,!1),Ed(n,e,a);r=e.stateNode,Fie.current=e;var o=s&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&s?(e.child=yv(e,n.child,null,a),e.child=yv(e,null,o,a)):qs(n,e,o,a),e.memoizedState=r.state,i&&r8(e,t,!0),e.child}function Oz(n){var e=n.stateNode;e.pendingContext?n8(n,e.pendingContext,e.pendingContext!==e.context):e.context&&n8(n,e.context,!1),k3(n,e.containerInfo)}function x8(n,e,t,r,i){return vv(),w3(i),e.flags|=256,qs(n,e,t,r),e.child}var RP={dehydrated:null,treeContext:null,retryLane:0};function DP(n){return{baseLanes:n,cachePool:null,transitions:null}}function Fz(n,e,t){var r=e.pendingProps,i=mi.current,a=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=n!==null&&n.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Wr(mi,i&1),n===null)return TP(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,n=r.fallback,a?(r=e.mode,a=e.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=FA(s,r,0,null),n=cm(n,r,t,null),a.return=e,n.return=e,a.sibling=n,e.child=a,e.child.memoizedState=DP(t),e.memoizedState=RP,n):L3(e,s));if(i=n.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return jie(n,e,s,r,o,i,t);if(a){a=r.fallback,s=e.mode,i=n.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=uf(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=uf(o,a):(a=cm(a,s,t,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,s=n.child.memoizedState,s=s===null?DP(t):{baseLanes:s.baseLanes|t,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=n.childLanes&~t,e.memoizedState=RP,r}return a=n.child,n=a.sibling,r=uf(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function L3(n,e){return e=FA({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function db(n,e,t,r){return r!==null&&w3(r),yv(e,n.child,null,t),n=L3(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function jie(n,e,t,r,i,a,s){if(t)return e.flags&256?(e.flags&=-257,r=jC(Error(gt(422))),db(n,e,s,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=FA({mode:"visible",children:r.children},i,0,null),a=cm(a,i,s,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&yv(e,n.child,null,s),e.child.memoizedState=DP(s),e.memoizedState=RP,a);if(!(e.mode&1))return db(n,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(gt(419)),r=jC(a,r,void 0),db(n,e,s,r)}if(o=(s&n.childLanes)!==0,So||o){if(r=ka,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Sd(n,i),du(r,n,i,-1))}return V3(),r=jC(Error(gt(421))),db(n,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=Zie.bind(null,n),i._reactRetry=e,null):(n=a.treeContext,zo=af(i.nextSibling),Go=e,li=!0,nu=null,n!==null&&(vl[yl++]=od,vl[yl++]=ld,vl[yl++]=_m,od=n.id,ld=n.overflow,_m=e),e=L3(e,r.children),e.flags|=4096,e)}function _8(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),kP(n.return,e,t)}function BC(n,e,t,r,i){var a=n.memoizedState;a===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=t,a.tailMode=i)}function jz(n,e,t){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(qs(n,e,r.children,t),r=mi.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&_8(n,t,e);else if(n.tag===19)_8(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Wr(mi,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&LS(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),BC(e,!1,i,t,a);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&LS(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}BC(e,!0,t,null,a);break;case"together":BC(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function z2(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ed(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),bm|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(gt(153));if(e.child!==null){for(n=e.child,t=uf(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=uf(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Bie(n,e,t){switch(e.tag){case 3:Oz(e),vv();break;case 5:cz(e);break;case 1:ko(e.type)&&MS(e);break;case 4:k3(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Wr(NS,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Wr(mi,mi.current&1),e.flags|=128,null):t&e.child.childLanes?Fz(n,e,t):(Wr(mi,mi.current&1),n=Ed(n,e,t),n!==null?n.sibling:null);Wr(mi,mi.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return jz(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Wr(mi,mi.current),r)break;return null;case 22:case 23:return e.lanes=0,Dz(n,e,t)}return Ed(n,e,t)}var Bz,LP,Uz,Vz;Bz=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};LP=function(){};Uz=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Gp(oc.current);var a=null;switch(t){case"input":i=rP(n,i),r=rP(n,r),a=[];break;case"select":i=_i({},i,{value:void 0}),r=_i({},r,{value:void 0}),a=[];break;case"textarea":i=sP(n,i),r=sP(n,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=kS)}lP(t,r);var s;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(t||(t={}),t[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(g1.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(t||(t={}),t[s]=l[s])}else t||(a||(a=[]),a.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(g1.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Qr("scroll",n),a||o===l||(a=[])):(a=a||[]).push(u,l))}t&&(a=a||[]).push("style",t);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};Vz=function(n,e,t,r){t!==r&&(e.flags|=4)};function zy(n,e){if(!li)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function os(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Uie(n,e,t){var r=e.pendingProps;switch(_3(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return os(e),null;case 1:return ko(e.type)&&CS(),os(e),null;case 3:return r=e.stateNode,xv(),ri(To),ri(As),M3(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(ub(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,nu!==null&&(HP(nu),nu=null))),LP(n,e),os(e),null;case 5:C3(e);var i=Gp(C1.current);if(t=e.type,n!==null&&e.stateNode!=null)Uz(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(gt(166));return os(e),null}if(n=Gp(oc.current),ub(e)){r=e.stateNode,t=e.type;var a=e.memoizedProps;switch(r[Zu]=e,r[T1]=a,n=(e.mode&1)!==0,t){case"dialog":Qr("cancel",r),Qr("close",r);break;case"iframe":case"object":case"embed":Qr("load",r);break;case"video":case"audio":for(i=0;i<vx.length;i++)Qr(vx[i],r);break;case"source":Qr("error",r);break;case"img":case"image":case"link":Qr("error",r),Qr("load",r);break;case"details":Qr("toggle",r);break;case"input":MF(r,a),Qr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Qr("invalid",r);break;case"textarea":PF(r,a),Qr("invalid",r)}lP(t,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&lb(r.textContent,o,n),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&lb(r.textContent,o,n),i=["children",""+o]):g1.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&Qr("scroll",r)}switch(t){case"input":eb(r),IF(r,a,!0);break;case"textarea":eb(r),NF(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=kS)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=m9(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=s.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=s.createElement(t,{is:r.is}):(n=s.createElement(t),t==="select"&&(s=n,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):n=s.createElementNS(n,t),n[Zu]=e,n[T1]=r,Bz(n,e,!1,!1),e.stateNode=n;e:{switch(s=uP(t,r),t){case"dialog":Qr("cancel",n),Qr("close",n),i=r;break;case"iframe":case"object":case"embed":Qr("load",n),i=r;break;case"video":case"audio":for(i=0;i<vx.length;i++)Qr(vx[i],n);i=r;break;case"source":Qr("error",n),i=r;break;case"img":case"image":case"link":Qr("error",n),Qr("load",n),i=r;break;case"details":Qr("toggle",n),i=r;break;case"input":MF(n,r),i=rP(n,r),Qr("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=_i({},r,{value:void 0}),Qr("invalid",n);break;case"textarea":PF(n,r),i=sP(n,r),Qr("invalid",n);break;default:i=r}lP(t,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?y9(n,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&g9(n,l)):a==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&v1(n,l):typeof l=="number"&&v1(n,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(g1.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Qr("scroll",n):l!=null&&a3(n,a,l,s))}switch(t){case"input":eb(n),IF(n,r,!1);break;case"textarea":eb(n),NF(n);break;case"option":r.value!=null&&n.setAttribute("value",""+_f(r.value));break;case"select":n.multiple=!!r.multiple,a=r.value,a!=null?B0(n,!!r.multiple,a,!1):r.defaultValue!=null&&B0(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=kS)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return os(e),null;case 6:if(n&&e.stateNode!=null)Vz(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(gt(166));if(t=Gp(C1.current),Gp(oc.current),ub(e)){if(r=e.stateNode,t=e.memoizedProps,r[Zu]=e,(a=r.nodeValue!==t)&&(n=Go,n!==null))switch(n.tag){case 3:lb(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&lb(r.nodeValue,t,(n.mode&1)!==0)}a&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Zu]=e,e.stateNode=r}return os(e),null;case 13:if(ri(mi),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(li&&zo!==null&&e.mode&1&&!(e.flags&128))az(),vv(),e.flags|=98560,a=!1;else if(a=ub(e),r!==null&&r.dehydrated!==null){if(n===null){if(!a)throw Error(gt(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(gt(317));a[Zu]=e}else vv(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;os(e),a=!1}else nu!==null&&(HP(nu),nu=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||mi.current&1?da===0&&(da=3):V3())),e.updateQueue!==null&&(e.flags|=4),os(e),null);case 4:return xv(),LP(n,e),n===null&&E1(e.stateNode.containerInfo),os(e),null;case 10:return E3(e.type._context),os(e),null;case 17:return ko(e.type)&&CS(),os(e),null;case 19:if(ri(mi),a=e.memoizedState,a===null)return os(e),null;if(r=(e.flags&128)!==0,s=a.rendering,s===null)if(r)zy(a,!1);else{if(da!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(s=LS(n),s!==null){for(e.flags|=128,zy(a,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)a=t,n=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=n,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,n=s.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Wr(mi,mi.current&1|2),e.child}n=n.sibling}a.tail!==null&&ji()>wv&&(e.flags|=128,r=!0,zy(a,!1),e.lanes=4194304)}else{if(!r)if(n=LS(s),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),zy(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!li)return os(e),null}else 2*ji()-a.renderingStartTime>wv&&t!==1073741824&&(e.flags|=128,r=!0,zy(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(t=a.last,t!==null?t.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ji(),e.sibling=null,t=mi.current,Wr(mi,r?t&1|2:t&1),e):(os(e),null);case 22:case 23:return U3(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bo&1073741824&&(os(e),e.subtreeFlags&6&&(e.flags|=8192)):os(e),null;case 24:return null;case 25:return null}throw Error(gt(156,e.tag))}function Vie(n,e){switch(_3(e),e.tag){case 1:return ko(e.type)&&CS(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return xv(),ri(To),ri(As),M3(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return C3(e),null;case 13:if(ri(mi),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(gt(340));vv()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ri(mi),null;case 4:return xv(),null;case 10:return E3(e.type._context),null;case 22:case 23:return U3(),null;case 24:return null;default:return null}}var hb=!1,ys=!1,zie=typeof WeakSet=="function"?WeakSet:Set,jt=null;function v0(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Ii(n,e,r)}else t.current=null}function OP(n,e,t){try{t()}catch(r){Ii(n,e,r)}}var w8=!1;function Hie(n,e){if(xP=ES,n=q9(),y3(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{t.nodeType,a.nodeType}catch{t=null;break e}var s=0,o=-1,l=-1,u=0,c=0,d=n,f=null;t:for(;;){for(var m;d!==t||i!==0&&d.nodeType!==3||(o=s+i),d!==a||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===n)break t;if(f===t&&++u===i&&(o=s),f===a&&++c===r&&(l=s),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(_P={focusedElem:n,selectionRange:t},ES=!1,jt=e;jt!==null;)if(e=jt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,jt=n;else for(;jt!==null;){e=jt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,w=v.memoizedState,x=e.stateNode,S=x.getSnapshotBeforeUpdate(e.elementType===e.type?_:Yl(e.type,_),w);x.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(gt(163))}}catch(T){Ii(e,e.return,T)}if(n=e.sibling,n!==null){n.return=e.return,jt=n;break}jt=e.return}return v=w8,w8=!1,v}function Vx(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var a=i.destroy;i.destroy=void 0,a!==void 0&&OP(e,t,a)}i=i.next}while(i!==r)}}function LA(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function FP(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function zz(n){var e=n.alternate;e!==null&&(n.alternate=null,zz(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Zu],delete e[T1],delete e[SP],delete e[Aie],delete e[Tie])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Hz(n){return n.tag===5||n.tag===3||n.tag===4}function b8(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Hz(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function jP(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=kS));else if(r!==4&&(n=n.child,n!==null))for(jP(n,e,t),n=n.sibling;n!==null;)jP(n,e,t),n=n.sibling}function BP(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(BP(n,e,t),n=n.sibling;n!==null;)BP(n,e,t),n=n.sibling}var ja=null,tu=!1;function fh(n,e,t){for(t=t.child;t!==null;)Gz(n,e,t),t=t.sibling}function Gz(n,e,t){if(sc&&typeof sc.onCommitFiberUnmount=="function")try{sc.onCommitFiberUnmount(kA,t)}catch{}switch(t.tag){case 5:ys||v0(t,e);case 6:var r=ja,i=tu;ja=null,fh(n,e,t),ja=r,tu=i,ja!==null&&(tu?(n=ja,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ja.removeChild(t.stateNode));break;case 18:ja!==null&&(tu?(n=ja,t=t.stateNode,n.nodeType===8?NC(n.parentNode,t):n.nodeType===1&&NC(n,t),w1(n)):NC(ja,t.stateNode));break;case 4:r=ja,i=tu,ja=t.stateNode.containerInfo,tu=!0,fh(n,e,t),ja=r,tu=i;break;case 0:case 11:case 14:case 15:if(!ys&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&OP(t,e,s),i=i.next}while(i!==r)}fh(n,e,t);break;case 1:if(!ys&&(v0(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(o){Ii(t,e,o)}fh(n,e,t);break;case 21:fh(n,e,t);break;case 22:t.mode&1?(ys=(r=ys)||t.memoizedState!==null,fh(n,e,t),ys=r):fh(n,e,t);break;default:fh(n,e,t)}}function S8(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new zie),e.forEach(function(r){var i=Qie.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Hl(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var a=n,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 5:ja=o.stateNode,tu=!1;break e;case 3:ja=o.stateNode.containerInfo,tu=!0;break e;case 4:ja=o.stateNode.containerInfo,tu=!0;break e}o=o.return}if(ja===null)throw Error(gt(160));Gz(a,s,i),ja=null,tu=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ii(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Wz(e,n),e=e.sibling}function Wz(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Hl(e,n),Vu(n),r&4){try{Vx(3,n,n.return),LA(3,n)}catch(_){Ii(n,n.return,_)}try{Vx(5,n,n.return)}catch(_){Ii(n,n.return,_)}}break;case 1:Hl(e,n),Vu(n),r&512&&t!==null&&v0(t,t.return);break;case 5:if(Hl(e,n),Vu(n),r&512&&t!==null&&v0(t,t.return),n.flags&32){var i=n.stateNode;try{v1(i,"")}catch(_){Ii(n,n.return,_)}}if(r&4&&(i=n.stateNode,i!=null)){var a=n.memoizedProps,s=t!==null?t.memoizedProps:a,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&f9(i,a),uP(o,s);var u=uP(o,a);for(s=0;s<l.length;s+=2){var c=l[s],d=l[s+1];c==="style"?y9(i,d):c==="dangerouslySetInnerHTML"?g9(i,d):c==="children"?v1(i,d):a3(i,c,d,u)}switch(o){case"input":iP(i,a);break;case"textarea":p9(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?B0(i,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?B0(i,!!a.multiple,a.defaultValue,!0):B0(i,!!a.multiple,a.multiple?[]:"",!1))}i[T1]=a}catch(_){Ii(n,n.return,_)}}break;case 6:if(Hl(e,n),Vu(n),r&4){if(n.stateNode===null)throw Error(gt(162));i=n.stateNode,a=n.memoizedProps;try{i.nodeValue=a}catch(_){Ii(n,n.return,_)}}break;case 3:if(Hl(e,n),Vu(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{w1(e.containerInfo)}catch(_){Ii(n,n.return,_)}break;case 4:Hl(e,n),Vu(n);break;case 13:Hl(e,n),Vu(n),i=n.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(j3=ji())),r&4&&S8(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(ys=(u=ys)||c,Hl(e,n),ys=u):Hl(e,n),Vu(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!c&&n.mode&1)for(jt=n,c=n.child;c!==null;){for(d=jt=c;jt!==null;){switch(f=jt,m=f.child,f.tag){case 0:case 11:case 14:case 15:Vx(4,f,f.return);break;case 1:v0(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,t=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(_){Ii(r,t,_)}}break;case 5:v0(f,f.return);break;case 22:if(f.memoizedState!==null){A8(d);continue}}m!==null?(m.return=f,jt=m):A8(d)}c=c.sibling}e:for(c=null,d=n;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=v9("display",s))}catch(_){Ii(n,n.return,_)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(_){Ii(n,n.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Hl(e,n),Vu(n),r&4&&S8(n);break;case 21:break;default:Hl(e,n),Vu(n)}}function Vu(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Hz(t)){var r=t;break e}t=t.return}throw Error(gt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(v1(i,""),r.flags&=-33);var a=b8(n);BP(n,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=b8(n);jP(n,o,s);break;default:throw Error(gt(161))}}catch(l){Ii(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Gie(n,e,t){jt=n,qz(n)}function qz(n,e,t){for(var r=(n.mode&1)!==0;jt!==null;){var i=jt,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||hb;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||ys;o=hb;var u=ys;if(hb=s,(ys=l)&&!u)for(jt=i;jt!==null;)s=jt,l=s.child,s.tag===22&&s.memoizedState!==null?T8(i):l!==null?(l.return=s,jt=l):T8(i);for(;a!==null;)jt=a,qz(a),a=a.sibling;jt=i,hb=o,ys=u}E8(n)}else i.subtreeFlags&8772&&a!==null?(a.return=i,jt=a):E8(n)}}function E8(n){for(;jt!==null;){var e=jt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ys||LA(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ys)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Yl(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&l8(e,a,r);break;case 3:var s=e.updateQueue;if(s!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}l8(e,s,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&w1(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(gt(163))}ys||e.flags&512&&FP(e)}catch(f){Ii(e,e.return,f)}}if(e===n){jt=null;break}if(t=e.sibling,t!==null){t.return=e.return,jt=t;break}jt=e.return}}function A8(n){for(;jt!==null;){var e=jt;if(e===n){jt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,jt=t;break}jt=e.return}}function T8(n){for(;jt!==null;){var e=jt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{LA(4,e)}catch(l){Ii(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ii(e,i,l)}}var a=e.return;try{FP(e)}catch(l){Ii(e,a,l)}break;case 5:var s=e.return;try{FP(e)}catch(l){Ii(e,s,l)}}}catch(l){Ii(e,e.return,l)}if(e===n){jt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,jt=o;break}jt=e.return}}var Wie=Math.ceil,jS=jd.ReactCurrentDispatcher,O3=jd.ReactCurrentOwner,El=jd.ReactCurrentBatchConfig,or=0,ka=null,$i=null,Ha=0,Bo=0,y0=Ff(0),da=0,N1=null,bm=0,OA=0,F3=0,zx=null,_o=null,j3=0,wv=1/0,ed=null,BS=!1,UP=null,of=null,fb=!1,Yh=null,US=0,Hx=0,VP=null,H2=-1,G2=0;function Zs(){return or&6?ji():H2!==-1?H2:H2=ji()}function lf(n){return n.mode&1?or&2&&Ha!==0?Ha&-Ha:Cie.transition!==null?(G2===0&&(G2=I9()),G2):(n=Ir,n!==0||(n=window.event,n=n===void 0?16:F9(n.type)),n):1}function du(n,e,t,r){if(50<Hx)throw Hx=0,VP=null,Error(gt(185));A_(n,t,r),(!(or&2)||n!==ka)&&(n===ka&&(!(or&2)&&(OA|=t),da===4&&Oh(n,Ha)),Co(n,r),t===1&&or===0&&!(e.mode&1)&&(wv=ji()+500,NA&&jf()))}function Co(n,e){var t=n.callbackNode;Cre(n,e);var r=SS(n,n===ka?Ha:0);if(r===0)t!==null&&LF(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&LF(t),e===1)n.tag===0?kie(k8.bind(null,n)):nz(k8.bind(null,n)),Sie(function(){!(or&6)&&jf()}),t=null;else{switch(P9(r)){case 1:t=c3;break;case 4:t=C9;break;case 16:t=bS;break;case 536870912:t=M9;break;default:t=bS}t=eH(t,$z.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function $z(n,e){if(H2=-1,G2=0,or&6)throw Error(gt(327));var t=n.callbackNode;if(G0()&&n.callbackNode!==t)return null;var r=SS(n,n===ka?Ha:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=VS(n,r);else{e=r;var i=or;or|=2;var a=Kz();(ka!==n||Ha!==e)&&(ed=null,wv=ji()+500,um(n,e));do try{Xie();break}catch(o){Xz(n,o)}while(!0);S3(),jS.current=a,or=i,$i!==null?e=0:(ka=null,Ha=0,e=da)}if(e!==0){if(e===2&&(i=pP(n),i!==0&&(r=i,e=zP(n,i))),e===1)throw t=N1,um(n,0),Oh(n,r),Co(n,ji()),t;if(e===6)Oh(n,r);else{if(i=n.current.alternate,!(r&30)&&!qie(i)&&(e=VS(n,r),e===2&&(a=pP(n),a!==0&&(r=a,e=zP(n,a))),e===1))throw t=N1,um(n,0),Oh(n,r),Co(n,ji()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(gt(345));case 2:Mp(n,_o,ed);break;case 3:if(Oh(n,r),(r&130023424)===r&&(e=j3+500-ji(),10<e)){if(SS(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Zs(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=bP(Mp.bind(null,n,_o,ed),e);break}Mp(n,_o,ed);break;case 4:if(Oh(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var s=31-cu(r);a=1<<s,s=e[s],s>i&&(i=s),r&=~a}if(r=i,r=ji()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Wie(r/1960))-r,10<r){n.timeoutHandle=bP(Mp.bind(null,n,_o,ed),r);break}Mp(n,_o,ed);break;case 5:Mp(n,_o,ed);break;default:throw Error(gt(329))}}}return Co(n,ji()),n.callbackNode===t?$z.bind(null,n):null}function zP(n,e){var t=zx;return n.current.memoizedState.isDehydrated&&(um(n,e).flags|=256),n=VS(n,e),n!==2&&(e=_o,_o=t,e!==null&&HP(e)),n}function HP(n){_o===null?_o=n:_o.push.apply(_o,n)}function qie(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],a=i.getSnapshot;i=i.value;try{if(!vu(a(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Oh(n,e){for(e&=~F3,e&=~OA,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-cu(e),r=1<<t;n[t]=-1,e&=~r}}function k8(n){if(or&6)throw Error(gt(327));G0();var e=SS(n,0);if(!(e&1))return Co(n,ji()),null;var t=VS(n,e);if(n.tag!==0&&t===2){var r=pP(n);r!==0&&(e=r,t=zP(n,r))}if(t===1)throw t=N1,um(n,0),Oh(n,e),Co(n,ji()),t;if(t===6)throw Error(gt(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Mp(n,_o,ed),Co(n,ji()),null}function B3(n,e){var t=or;or|=1;try{return n(e)}finally{or=t,or===0&&(wv=ji()+500,NA&&jf())}}function Sm(n){Yh!==null&&Yh.tag===0&&!(or&6)&&G0();var e=or;or|=1;var t=El.transition,r=Ir;try{if(El.transition=null,Ir=1,n)return n()}finally{Ir=r,El.transition=t,or=e,!(or&6)&&jf()}}function U3(){Bo=y0.current,ri(y0)}function um(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,bie(t)),$i!==null)for(t=$i.return;t!==null;){var r=t;switch(_3(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&CS();break;case 3:xv(),ri(To),ri(As),M3();break;case 5:C3(r);break;case 4:xv();break;case 13:ri(mi);break;case 19:ri(mi);break;case 10:E3(r.type._context);break;case 22:case 23:U3()}t=t.return}if(ka=n,$i=n=uf(n.current,null),Ha=Bo=e,da=0,N1=null,F3=OA=bm=0,_o=zx=null,Hp!==null){for(e=0;e<Hp.length;e++)if(t=Hp[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,a=t.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}t.pending=r}Hp=null}return n}function Xz(n,e){do{var t=$i;try{if(S3(),U2.current=FS,OS){for(var r=xi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}OS=!1}if(wm=0,Ea=oa=xi=null,Ux=!1,M1=0,O3.current=null,t===null||t.return===null){da=1,N1=e,$i=null;break}e:{var a=n,s=t.return,o=t,l=e;if(e=Ha,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=p8(s);if(m!==null){m.flags&=-257,m8(m,s,o,a,e),m.mode&1&&f8(a,u,e),e=m,l=u;var v=e.updateQueue;if(v===null){var _=new Set;_.add(l),e.updateQueue=_}else v.add(l);break e}else{if(!(e&1)){f8(a,u,e),V3();break e}l=Error(gt(426))}}else if(li&&o.mode&1){var w=p8(s);if(w!==null){!(w.flags&65536)&&(w.flags|=256),m8(w,s,o,a,e),w3(_v(l,o));break e}}a=l=_v(l,o),da!==4&&(da=2),zx===null?zx=[a]:zx.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var x=Pz(a,l,e);o8(a,x);break e;case 1:o=l;var S=a.type,E=a.stateNode;if(!(a.flags&128)&&(typeof S.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(of===null||!of.has(E)))){a.flags|=65536,e&=-e,a.lanes|=e;var T=Nz(a,o,e);o8(a,T);break e}}a=a.return}while(a!==null)}Zz(t)}catch(D){e=D,$i===t&&t!==null&&($i=t=t.return);continue}break}while(!0)}function Kz(){var n=jS.current;return jS.current=FS,n===null?FS:n}function V3(){(da===0||da===3||da===2)&&(da=4),ka===null||!(bm&268435455)&&!(OA&268435455)||Oh(ka,Ha)}function VS(n,e){var t=or;or|=2;var r=Kz();(ka!==n||Ha!==e)&&(ed=null,um(n,e));do try{$ie();break}catch(i){Xz(n,i)}while(!0);if(S3(),or=t,jS.current=r,$i!==null)throw Error(gt(261));return ka=null,Ha=0,da}function $ie(){for(;$i!==null;)Yz($i)}function Xie(){for(;$i!==null&&!xre();)Yz($i)}function Yz(n){var e=Jz(n.alternate,n,Bo);n.memoizedProps=n.pendingProps,e===null?Zz(n):$i=e,O3.current=null}function Zz(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Vie(t,e),t!==null){t.flags&=32767,$i=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{da=6,$i=null;return}}else if(t=Uie(t,e,Bo),t!==null){$i=t;return}if(e=e.sibling,e!==null){$i=e;return}$i=e=n}while(e!==null);da===0&&(da=5)}function Mp(n,e,t){var r=Ir,i=El.transition;try{El.transition=null,Ir=1,Kie(n,e,t,r)}finally{El.transition=i,Ir=r}return null}function Kie(n,e,t,r){do G0();while(Yh!==null);if(or&6)throw Error(gt(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(gt(177));n.callbackNode=null,n.callbackPriority=0;var a=t.lanes|t.childLanes;if(Mre(n,a),n===ka&&($i=ka=null,Ha=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||fb||(fb=!0,eH(bS,function(){return G0(),null})),a=(t.flags&15990)!==0,t.subtreeFlags&15990||a){a=El.transition,El.transition=null;var s=Ir;Ir=1;var o=or;or|=4,O3.current=null,Hie(n,t),Wz(t,n),mie(_P),ES=!!xP,_P=xP=null,n.current=t,Gie(t),_re(),or=o,Ir=s,El.transition=a}else n.current=t;if(fb&&(fb=!1,Yh=n,US=i),a=n.pendingLanes,a===0&&(of=null),Sre(t.stateNode),Co(n,ji()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(BS)throw BS=!1,n=UP,UP=null,n;return US&1&&n.tag!==0&&G0(),a=n.pendingLanes,a&1?n===VP?Hx++:(Hx=0,VP=n):Hx=0,jf(),null}function G0(){if(Yh!==null){var n=P9(US),e=El.transition,t=Ir;try{if(El.transition=null,Ir=16>n?16:n,Yh===null)var r=!1;else{if(n=Yh,Yh=null,US=0,or&6)throw Error(gt(331));var i=or;for(or|=4,jt=n.current;jt!==null;){var a=jt,s=a.child;if(jt.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(jt=u;jt!==null;){var c=jt;switch(c.tag){case 0:case 11:case 15:Vx(8,c,a)}var d=c.child;if(d!==null)d.return=c,jt=d;else for(;jt!==null;){c=jt;var f=c.sibling,m=c.return;if(zz(c),c===u){jt=null;break}if(f!==null){f.return=m,jt=f;break}jt=m}}}var v=a.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var w=_.sibling;_.sibling=null,_=w}while(_!==null)}}jt=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,jt=s;else e:for(;jt!==null;){if(a=jt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Vx(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,jt=x;break e}jt=a.return}}var S=n.current;for(jt=S;jt!==null;){s=jt;var E=s.child;if(s.subtreeFlags&2064&&E!==null)E.return=s,jt=E;else e:for(s=S;jt!==null;){if(o=jt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:LA(9,o)}}catch(D){Ii(o,o.return,D)}if(o===s){jt=null;break e}var T=o.sibling;if(T!==null){T.return=o.return,jt=T;break e}jt=o.return}}if(or=i,jf(),sc&&typeof sc.onPostCommitFiberRoot=="function")try{sc.onPostCommitFiberRoot(kA,n)}catch{}r=!0}return r}finally{Ir=t,El.transition=e}}return!1}function C8(n,e,t){e=_v(t,e),e=Pz(n,e,1),n=sf(n,e,1),e=Zs(),n!==null&&(A_(n,1,e),Co(n,e))}function Ii(n,e,t){if(n.tag===3)C8(n,n,t);else for(;e!==null;){if(e.tag===3){C8(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(of===null||!of.has(r))){n=_v(t,n),n=Nz(e,n,1),e=sf(e,n,1),n=Zs(),e!==null&&(A_(e,1,n),Co(e,n));break}}e=e.return}}function Yie(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Zs(),n.pingedLanes|=n.suspendedLanes&t,ka===n&&(Ha&t)===t&&(da===4||da===3&&(Ha&130023424)===Ha&&500>ji()-j3?um(n,0):F3|=t),Co(n,e)}function Qz(n,e){e===0&&(n.mode&1?(e=rb,rb<<=1,!(rb&130023424)&&(rb=4194304)):e=1);var t=Zs();n=Sd(n,e),n!==null&&(A_(n,e,t),Co(n,t))}function Zie(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Qz(n,t)}function Qie(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(gt(314))}r!==null&&r.delete(e),Qz(n,t)}var Jz;Jz=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||To.current)So=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return So=!1,Bie(n,e,t);So=!!(n.flags&131072)}else So=!1,li&&e.flags&1048576&&rz(e,PS,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;z2(n,e),n=e.pendingProps;var i=gv(e,As.current);H0(e,t),i=P3(null,e,r,n,i,t);var a=N3();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ko(r)?(a=!0,MS(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,T3(e),i.updater=DA,e.stateNode=i,i._reactInternals=e,MP(e,r,n,t),e=NP(null,e,r,!0,a,t)):(e.tag=0,li&&a&&x3(e),qs(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(z2(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=eae(r),n=Yl(r,n),i){case 0:e=PP(null,e,r,n,t);break e;case 1:e=y8(null,e,r,n,t);break e;case 11:e=g8(null,e,r,n,t);break e;case 14:e=v8(null,e,r,Yl(r.type,n),t);break e}throw Error(gt(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yl(r,i),PP(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yl(r,i),y8(n,e,r,i,t);case 3:e:{if(Oz(e),n===null)throw Error(gt(387));r=e.pendingProps,a=e.memoizedState,i=a.element,uz(n,e),DS(e,r,null,t);var s=e.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=_v(Error(gt(423)),e),e=x8(n,e,r,t,i);break e}else if(r!==i){i=_v(Error(gt(424)),e),e=x8(n,e,r,t,i);break e}else for(zo=af(e.stateNode.containerInfo.firstChild),Go=e,li=!0,nu=null,t=oz(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(vv(),r===i){e=Ed(n,e,t);break e}qs(n,e,r,t)}e=e.child}return e;case 5:return cz(e),n===null&&TP(e),r=e.type,i=e.pendingProps,a=n!==null?n.memoizedProps:null,s=i.children,wP(r,i)?s=null:a!==null&&wP(r,a)&&(e.flags|=32),Lz(n,e),qs(n,e,s,t),e.child;case 6:return n===null&&TP(e),null;case 13:return Fz(n,e,t);case 4:return k3(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=yv(e,null,r,t):qs(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yl(r,i),g8(n,e,r,i,t);case 7:return qs(n,e,e.pendingProps,t),e.child;case 8:return qs(n,e,e.pendingProps.children,t),e.child;case 12:return qs(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,Wr(NS,r._currentValue),r._currentValue=s,a!==null)if(vu(a.value,s)){if(a.children===i.children&&!To.current){e=Ed(n,e,t);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=fd(-1,t&-t),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=t,l=a.alternate,l!==null&&(l.lanes|=t),kP(a.return,t,e),o.lanes|=t;break}l=l.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(gt(341));s.lanes|=t,o=s.alternate,o!==null&&(o.lanes|=t),kP(s,t,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}qs(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,H0(e,t),i=Cl(i),r=r(i),e.flags|=1,qs(n,e,r,t),e.child;case 14:return r=e.type,i=Yl(r,e.pendingProps),i=Yl(r.type,i),v8(n,e,r,i,t);case 15:return Rz(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yl(r,i),z2(n,e),e.tag=1,ko(r)?(n=!0,MS(e)):n=!1,H0(e,t),Iz(e,r,i),MP(e,r,i,t),NP(null,e,r,!0,n,t);case 19:return jz(n,e,t);case 22:return Dz(n,e,t)}throw Error(gt(156,e.tag))};function eH(n,e){return k9(n,e)}function Jie(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wl(n,e,t,r){return new Jie(n,e,t,r)}function z3(n){return n=n.prototype,!(!n||!n.isReactComponent)}function eae(n){if(typeof n=="function")return z3(n)?1:0;if(n!=null){if(n=n.$$typeof,n===o3)return 11;if(n===l3)return 14}return 2}function uf(n,e){var t=n.alternate;return t===null?(t=wl(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function W2(n,e,t,r,i,a){var s=2;if(r=n,typeof n=="function")z3(n)&&(s=1);else if(typeof n=="string")s=5;else e:switch(n){case l0:return cm(t.children,i,a,e);case s3:s=8,i|=8;break;case JI:return n=wl(12,t,e,i|2),n.elementType=JI,n.lanes=a,n;case eP:return n=wl(13,t,e,i),n.elementType=eP,n.lanes=a,n;case tP:return n=wl(19,t,e,i),n.elementType=tP,n.lanes=a,n;case c9:return FA(t,i,a,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case l9:s=10;break e;case u9:s=9;break e;case o3:s=11;break e;case l3:s=14;break e;case Nh:s=16,r=null;break e}throw Error(gt(130,n==null?n:typeof n,""))}return e=wl(s,t,e,i),e.elementType=n,e.type=r,e.lanes=a,e}function cm(n,e,t,r){return n=wl(7,n,r,e),n.lanes=t,n}function FA(n,e,t,r){return n=wl(22,n,r,e),n.elementType=c9,n.lanes=t,n.stateNode={isHidden:!1},n}function UC(n,e,t){return n=wl(6,n,null,e),n.lanes=t,n}function VC(n,e,t){return e=wl(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function tae(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wC(0),this.expirationTimes=wC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wC(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function H3(n,e,t,r,i,a,s,o,l){return n=new tae(n,e,t,o,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=wl(3,null,null,e),n.current=a,a.stateNode=n,a.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},T3(a),n}function nae(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o0,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function tH(n){if(!n)return wf;n=n._reactInternals;e:{if(Gm(n)!==n||n.tag!==1)throw Error(gt(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ko(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(gt(171))}if(n.tag===1){var t=n.type;if(ko(t))return tz(n,t,e)}return e}function nH(n,e,t,r,i,a,s,o,l){return n=H3(t,r,!0,n,i,a,s,o,l),n.context=tH(null),t=n.current,r=Zs(),i=lf(t),a=fd(r,i),a.callback=e??null,sf(t,a,i),n.current.lanes=i,A_(n,i,r),Co(n,r),n}function jA(n,e,t,r){var i=e.current,a=Zs(),s=lf(i);return t=tH(t),e.context===null?e.context=t:e.pendingContext=t,e=fd(a,s),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=sf(i,e,s),n!==null&&(du(n,i,s,a),B2(n,i,s)),s}function zS(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function M8(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function G3(n,e){M8(n,e),(n=n.alternate)&&M8(n,e)}function rae(){return null}var rH=typeof reportError=="function"?reportError:function(n){console.error(n)};function W3(n){this._internalRoot=n}BA.prototype.render=W3.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(gt(409));jA(n,e,null,null)};BA.prototype.unmount=W3.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Sm(function(){jA(null,n,null,null)}),e[bd]=null}};function BA(n){this._internalRoot=n}BA.prototype.unstable_scheduleHydration=function(n){if(n){var e=D9();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Lh.length&&e!==0&&e<Lh[t].priority;t++);Lh.splice(t,0,n),t===0&&O9(n)}};function q3(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function UA(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function I8(){}function iae(n,e,t,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=zS(s);a.call(u)}}var s=nH(e,r,n,0,null,!1,!1,"",I8);return n._reactRootContainer=s,n[bd]=s.current,E1(n.nodeType===8?n.parentNode:n),Sm(),s}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=zS(l);o.call(u)}}var l=H3(n,0,!1,null,null,!1,!1,"",I8);return n._reactRootContainer=l,n[bd]=l.current,E1(n.nodeType===8?n.parentNode:n),Sm(function(){jA(e,l,t,r)}),l}function VA(n,e,t,r,i){var a=t._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=zS(s);o.call(l)}}jA(e,s,n,i)}else s=iae(t,e,n,i,r);return zS(s)}N9=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=gx(e.pendingLanes);t!==0&&(d3(e,t|1),Co(e,ji()),!(or&6)&&(wv=ji()+500,jf()))}break;case 13:Sm(function(){var r=Sd(n,1);if(r!==null){var i=Zs();du(r,n,1,i)}}),G3(n,1)}};h3=function(n){if(n.tag===13){var e=Sd(n,134217728);if(e!==null){var t=Zs();du(e,n,134217728,t)}G3(n,134217728)}};R9=function(n){if(n.tag===13){var e=lf(n),t=Sd(n,e);if(t!==null){var r=Zs();du(t,n,e,r)}G3(n,e)}};D9=function(){return Ir};L9=function(n,e){var t=Ir;try{return Ir=n,e()}finally{Ir=t}};dP=function(n,e,t){switch(e){case"input":if(iP(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=PA(r);if(!i)throw Error(gt(90));h9(r),iP(r,i)}}}break;case"textarea":p9(n,t);break;case"select":e=t.value,e!=null&&B0(n,!!t.multiple,e,!1)}};w9=B3;b9=Sm;var aae={usingClientEntryPoint:!1,Events:[k_,h0,PA,x9,_9,B3]},Hy={findFiberByHostInstance:zp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sae={bundleType:Hy.bundleType,version:Hy.version,rendererPackageName:Hy.rendererPackageName,rendererConfig:Hy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jd.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=A9(n),n===null?null:n.stateNode},findFiberByHostInstance:Hy.findFiberByHostInstance||rae,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pb.isDisabled&&pb.supportsFiber)try{kA=pb.inject(sae),sc=pb}catch{}}Jo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aae;Jo.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!q3(e))throw Error(gt(200));return nae(n,e,null,t)};Jo.createRoot=function(n,e){if(!q3(n))throw Error(gt(299));var t=!1,r="",i=rH;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=H3(n,1,!1,null,null,t,!1,r,i),n[bd]=e.current,E1(n.nodeType===8?n.parentNode:n),new W3(e)};Jo.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(gt(188)):(n=Object.keys(n).join(","),Error(gt(268,n)));return n=A9(e),n=n===null?null:n.stateNode,n};Jo.flushSync=function(n){return Sm(n)};Jo.hydrate=function(n,e,t){if(!UA(e))throw Error(gt(200));return VA(null,n,e,!0,t)};Jo.hydrateRoot=function(n,e,t){if(!q3(n))throw Error(gt(405));var r=t!=null&&t.hydratedSources||null,i=!1,a="",s=rH;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),e=nH(e,null,n,1,t??null,i,!1,a,s),n[bd]=e.current,E1(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new BA(e)};Jo.render=function(n,e,t){if(!UA(e))throw Error(gt(200));return VA(null,n,e,!1,t)};Jo.unmountComponentAtNode=function(n){if(!UA(n))throw Error(gt(40));return n._reactRootContainer?(Sm(function(){VA(null,null,n,!1,function(){n._reactRootContainer=null,n[bd]=null})}),!0):!1};Jo.unstable_batchedUpdates=B3;Jo.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!UA(t))throw Error(gt(200));if(n==null||n._reactInternals===void 0)throw Error(gt(38));return VA(n,e,t,!1,r)};Jo.version="18.3.1-next-f1338f8080-20240426";function iH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iH)}catch(n){console.error(n)}}iH(),i9.exports=Jo;var Bf=i9.exports;const oae=ZR(Bf);var aH,P8=Bf;aH=P8.createRoot,P8.hydrateRoot;const lae="modulepreload",uae=function(n){return"/"+n},N8={},gs=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=uae(l),l in N8)return;N8[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":lae,u||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((f,m)=>{d.addEventListener("load",f),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})},cae=()=>{};var R8={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sH=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},dae=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],s=n[t++],o=n[t++],l=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const a=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},oH={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],s=i+1<n.length,o=s?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,c=a>>2,d=(a&3)<<4|o>>4;let f=(o&15)<<2|u>>6,m=u&63;l||(m=64,s||(f=64)),r.push(t[c],t[d],t[f],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(sH(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):dae(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||o==null||u==null||d==null)throw new hae;const f=a<<2|o>>4;if(r.push(f),u!==64){const m=o<<4&240|u>>2;if(r.push(m),d!==64){const v=u<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class hae extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fae=function(n){const e=sH(n);return oH.encodeByteArray(e,!0)},HS=function(n){return fae(n).replace(/\./g,"")},lH=function(n){try{return oH.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mae=()=>pae().__FIREBASE_DEFAULTS__,gae=()=>{if(typeof process>"u"||typeof R8>"u")return;const n=R8.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},vae=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&lH(n[1]);return e&&JSON.parse(e)},zA=()=>{try{return cae()||mae()||gae()||vae()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},uH=n=>{var e,t;return(t=(e=zA())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},yae=n=>{const e=uH(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},cH=()=>{var n;return(n=zA())===null||n===void 0?void 0:n.config},dH=n=>{var e;return(e=zA())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hH(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ae(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[HS(JSON.stringify(t)),HS(JSON.stringify(s)),""].join(".")}const Gx={};function wae(){const n={prod:[],emulator:[]};for(const e of Object.keys(Gx))Gx[e]?n.emulator.push(e):n.prod.push(e);return n}function bae(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let D8=!1;function fH(n,e){if(typeof window>"u"||typeof document>"u"||!Zv(window.location.host)||Gx[n]===e||Gx[n]||D8)return;Gx[n]=e;function t(f){return`__firebase__banner__${f}`}const r="__firebase__banner",a=wae().prod.length>0;function s(){const f=document.getElementById(r);f&&f.remove()}function o(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{D8=!0,s()},f}function c(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=bae(r),m=t("text"),v=document.getElementById(m)||document.createElement("span"),_=t("learnmore"),w=document.getElementById(_)||document.createElement("a"),x=t("preprendIcon"),S=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const E=f.element;o(E),c(w,_);const T=u();l(S,x),E.append(S,v,w,T),document.body.appendChild(E)}a?(v.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Sae(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ts())}function Eae(){var n;const e=(n=zA())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Aae(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pH(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Tae(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kae(){const n=Ts();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Cae(){return!Eae()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mH(){try{return typeof indexedDB=="object"}catch{return!1}}function gH(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function Mae(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iae="FirebaseError";class Eu extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Iae,Object.setPrototypeOf(this,Eu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wm.prototype.create)}}class Wm{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?Pae(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Eu(i,o,r)}}function Pae(n,e){return n.replace(Nae,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Nae=/\{\$([^}]+)}/g;function Rae(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function bf(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],s=e[i];if(L8(a)&&L8(s)){if(!bf(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function L8(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yx(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function xx(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Dae(n,e){const t=new Lae(n,e);return t.subscribe.bind(t)}class Lae{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Oae(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=zC),i.error===void 0&&(i.error=zC),i.complete===void 0&&(i.complete=zC);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Oae(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function zC(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fae=1e3,jae=2,Bae=4*60*60*1e3,Uae=.5;function O8(n,e=Fae,t=jae){const r=e*Math.pow(t,n),i=Math.round(Uae*r*(Math.random()-.5)*2);return Math.min(Bae,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(n){return n&&n._delegate?n._delegate:n}class yu{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vae=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new xae;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hae(e))try{this.getOrInitializeService({instanceIdentifier:Ip})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Ip){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ip){return this.instances.has(e)}getOptions(e=Ip){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zae(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ip){return this.component?this.component.multipleInstances?e:Ip:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function zae(n){return n===Ip?void 0:n}function Hae(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gae{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Vae(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Kn||(Kn={}));const Wae={debug:Kn.DEBUG,verbose:Kn.VERBOSE,info:Kn.INFO,warn:Kn.WARN,error:Kn.ERROR,silent:Kn.SILENT},qae=Kn.INFO,$ae={[Kn.DEBUG]:"log",[Kn.VERBOSE]:"log",[Kn.INFO]:"info",[Kn.WARN]:"warn",[Kn.ERROR]:"error"},Xae=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=$ae[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class HA{constructor(e){this.name=e,this._logLevel=qae,this._logHandler=Xae,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Kn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Wae[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Kn.DEBUG,...e),this._logHandler(this,Kn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Kn.VERBOSE,...e),this._logHandler(this,Kn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Kn.INFO,...e),this._logHandler(this,Kn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Kn.WARN,...e),this._logHandler(this,Kn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Kn.ERROR,...e),this._logHandler(this,Kn.ERROR,...e)}}const Kae=(n,e)=>e.some(t=>n instanceof t);let F8,j8;function Yae(){return F8||(F8=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Zae(){return j8||(j8=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vH=new WeakMap,GP=new WeakMap,yH=new WeakMap,HC=new WeakMap,$3=new WeakMap;function Qae(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",s)},a=()=>{t(cf(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&vH.set(t,n)}).catch(()=>{}),$3.set(e,n),e}function Jae(n){if(GP.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",s),n.removeEventListener("abort",s)},a=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",s),n.addEventListener("abort",s)});GP.set(n,e)}let WP={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return GP.get(n);if(e==="objectStoreNames")return n.objectStoreNames||yH.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return cf(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ese(n){WP=n(WP)}function tse(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(GC(this),e,...t);return yH.set(r,e.sort?e.sort():[e]),cf(r)}:Zae().includes(n)?function(...e){return n.apply(GC(this),e),cf(vH.get(this))}:function(...e){return cf(n.apply(GC(this),e))}}function nse(n){return typeof n=="function"?tse(n):(n instanceof IDBTransaction&&Jae(n),Kae(n,Yae())?new Proxy(n,WP):n)}function cf(n){if(n instanceof IDBRequest)return Qae(n);if(HC.has(n))return HC.get(n);const e=nse(n);return e!==n&&(HC.set(n,e),$3.set(e,n)),e}const GC=n=>$3.get(n);function xH(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(n,e),o=cf(s);return r&&s.addEventListener("upgradeneeded",l=>{r(cf(s.result),l.oldVersion,l.newVersion,cf(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const rse=["get","getKey","getAll","getAllKeys","count"],ise=["put","add","delete","clear"],WC=new Map;function B8(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(WC.get(e))return WC.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=ise.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rse.includes(t)))return;const a=async function(s,...o){const l=this.transaction(s,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[t](...o),i&&l.done]))[0]};return WC.set(e,a),a}ese(n=>({...n,get:(e,t,r)=>B8(e,t)||n.get(e,t,r),has:(e,t)=>!!B8(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ase{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(sse(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function sse(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qP="@firebase/app",U8="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=new HA("@firebase/app"),ose="@firebase/app-compat",lse="@firebase/analytics-compat",use="@firebase/analytics",cse="@firebase/app-check-compat",dse="@firebase/app-check",hse="@firebase/auth",fse="@firebase/auth-compat",pse="@firebase/database",mse="@firebase/data-connect",gse="@firebase/database-compat",vse="@firebase/functions",yse="@firebase/functions-compat",xse="@firebase/installations",_se="@firebase/installations-compat",wse="@firebase/messaging",bse="@firebase/messaging-compat",Sse="@firebase/performance",Ese="@firebase/performance-compat",Ase="@firebase/remote-config",Tse="@firebase/remote-config-compat",kse="@firebase/storage",Cse="@firebase/storage-compat",Mse="@firebase/firestore",Ise="@firebase/ai",Pse="@firebase/firestore-compat",Nse="firebase",Rse="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P="[DEFAULT]",Dse={[qP]:"fire-core",[ose]:"fire-core-compat",[use]:"fire-analytics",[lse]:"fire-analytics-compat",[dse]:"fire-app-check",[cse]:"fire-app-check-compat",[hse]:"fire-auth",[fse]:"fire-auth-compat",[pse]:"fire-rtdb",[mse]:"fire-data-connect",[gse]:"fire-rtdb-compat",[vse]:"fire-fn",[yse]:"fire-fn-compat",[xse]:"fire-iid",[_se]:"fire-iid-compat",[wse]:"fire-fcm",[bse]:"fire-fcm-compat",[Sse]:"fire-perf",[Ese]:"fire-perf-compat",[Ase]:"fire-rc",[Tse]:"fire-rc-compat",[kse]:"fire-gcs",[Cse]:"fire-gcs-compat",[Mse]:"fire-fst",[Pse]:"fire-fst-compat",[Ise]:"fire-vertex","fire-js":"fire-js",[Nse]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=new Map,Lse=new Map,XP=new Map;function V8(n,e){try{n.container.addComponent(e)}catch(t){Ad.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function gc(n){const e=n.name;if(XP.has(e))return Ad.debug(`There were multiple attempts to register component ${e}.`),!1;XP.set(e,n);for(const t of GS.values())V8(t,n);for(const t of Lse.values())V8(t,n);return!0}function qm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function xl(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ose={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},df=new Wm("app","Firebase",Ose);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fse{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw df.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=Rse;function _H(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:$P,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw df.create("bad-app-name",{appName:String(i)});if(t||(t=cH()),!t)throw df.create("no-options");const a=GS.get(i);if(a){if(bf(t,a.options)&&bf(r,a.config))return a;throw df.create("duplicate-app",{appName:i})}const s=new Gae(i);for(const l of XP.values())s.addComponent(l);const o=new Fse(t,r,s);return GS.set(i,o),o}function GA(n=$P){const e=GS.get(n);if(!e&&n===$P&&cH())return _H();if(!e)throw df.create("no-app",{appName:n});return e}function Al(n,e,t){var r;let i=(r=Dse[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${i}" with version "${e}":`];a&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ad.warn(o.join(" "));return}gc(new yu(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jse="firebase-heartbeat-database",Bse=1,R1="firebase-heartbeat-store";let qC=null;function wH(){return qC||(qC=xH(jse,Bse,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(R1)}catch(t){console.warn(t)}}}}).catch(n=>{throw df.create("idb-open",{originalErrorMessage:n.message})})),qC}async function Use(n){try{const t=(await wH()).transaction(R1),r=await t.objectStore(R1).get(bH(n));return await t.done,r}catch(e){if(e instanceof Eu)Ad.warn(e.message);else{const t=df.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ad.warn(t.message)}}}async function z8(n,e){try{const r=(await wH()).transaction(R1,"readwrite");await r.objectStore(R1).put(e,bH(n)),await r.done}catch(t){if(t instanceof Eu)Ad.warn(t.message);else{const r=df.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ad.warn(r.message)}}}function bH(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vse=1024,zse=30;class Hse{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Wse(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=H8();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>zse){const s=qse(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ad.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=H8(),{heartbeatsToSend:r,unsentEntries:i}=Gse(this._heartbeatsCache.heartbeats),a=HS(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Ad.warn(t),""}}}function H8(){return new Date().toISOString().substring(0,10)}function Gse(n,e=Vse){const t=[];let r=n.slice();for(const i of n){const a=t.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),G8(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),G8(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Wse{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mH()?gH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Use(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return z8(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return z8(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function G8(n){return HS(JSON.stringify({version:2,heartbeats:n})).length}function qse(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $se(n){gc(new yu("platform-logger",e=>new ase(e),"PRIVATE")),gc(new yu("heartbeat",e=>new Hse(e),"PRIVATE")),Al(qP,U8,n),Al(qP,U8,"esm2017"),Al("fire-js","")}$se("");var Xse="firebase",Kse="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Al(Xse,Kse,"app");var Qu=function(){return Qu=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Qu.apply(this,arguments)};function I_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Yse(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}function SH(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zse=SH,EH=new Wm("auth","Firebase",SH());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=new HA("@firebase/auth");function Qse(n,...e){WS.logLevel<=Kn.WARN&&WS.warn(`Auth (${Qv}): ${n}`,...e)}function q2(n,...e){WS.logLevel<=Kn.ERROR&&WS.error(`Auth (${Qv}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(n,...e){throw K3(n,...e)}function hu(n,...e){return K3(n,...e)}function X3(n,e,t){const r=Object.assign(Object.assign({},Zse()),{[e]:t});return new Wm("auth","Firebase",r).create(e,{appName:n.name})}function hf(n){return X3(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jse(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Il(n,"argument-error"),X3(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function K3(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return EH.create(n,...e)}function mn(n,e,...t){if(!n)throw K3(e,...t)}function ud(n){const e="INTERNAL ASSERTION FAILED: "+n;throw q2(e),new Error(e)}function Td(n,e){n||ud(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function eoe(){return W8()==="http:"||W8()==="https:"}function W8(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function toe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eoe()||pH()||"connection"in navigator)?navigator.onLine:!0}function noe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,t){this.shortDelay=e,this.longDelay=t,Td(t>e,"Short delay should be less than long delay!"),this.isMobile=Sae()||Tae()}get(){return toe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(n,e){Td(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AH{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ud("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ud("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ud("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const roe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ioe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aoe=new P_(3e4,6e4);function $m(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Uf(n,e,t,r,i={}){return TH(n,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=M_(Object.assign({key:n.config.apiKey},s)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:l},a);return Aae()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&Zv(n.emulatorConfig.host)&&(u.credentials="include"),AH.fetch()(await kH(n,n.config.apiHost,t,o),u)})}async function TH(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},roe),e);try{const i=new ooe(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw mb(n,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw mb(n,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw mb(n,"email-already-in-use",s);if(l==="USER_DISABLED")throw mb(n,"user-disabled",s);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw X3(n,c,u);Il(n,c)}}catch(i){if(i instanceof Eu)throw i;Il(n,"network-request-failed",{message:String(i)})}}async function WA(n,e,t,r,i={}){const a=await Uf(n,e,t,r,i);return"mfaPendingCredential"in a&&Il(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function kH(n,e,t,r){const i=`${e}${t}?${r}`,a=n,s=a.config.emulator?Y3(n.config,i):`${n.config.apiScheme}://${i}`;return ioe.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function soe(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ooe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(hu(this.auth,"network-request-failed")),aoe.get())})}}function mb(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=hu(n,e,r);return i.customData._tokenResponse=t,i}function q8(n){return n!==void 0&&n.enterprise!==void 0}class loe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return soe(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function uoe(n,e){return Uf(n,"GET","/v2/recaptchaConfig",$m(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function coe(n,e){return Uf(n,"POST","/v1/accounts:delete",e)}async function qS(n,e){return Uf(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function doe(n,e=!1){const t=Ca(n),r=await t.getIdToken(e),i=Z3(r);mn(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Wx($C(i.auth_time)),issuedAtTime:Wx($C(i.iat)),expirationTime:Wx($C(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function $C(n){return Number(n)*1e3}function Z3(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return q2("JWT malformed, contained fewer than 3 sections"),null;try{const i=lH(t);return i?JSON.parse(i):(q2("Failed to decode base64 JWT payload"),null)}catch(i){return q2("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function $8(n){const e=Z3(n);return mn(e,"internal-error"),mn(typeof e.exp<"u","internal-error"),mn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D1(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Eu&&hoe(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function hoe({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class foe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wx(this.lastLoginAt),this.creationTime=Wx(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $S(n){var e;const t=n.auth,r=await n.getIdToken(),i=await D1(n,qS(t,{idToken:r}));mn(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?CH(a.providerUserInfo):[],o=moe(n.providerData,s),l=n.isAnonymous,u=!(n.email&&a.passwordHash)&&!(o!=null&&o.length),c=l?u:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new YP(a.createdAt,a.lastLoginAt),isAnonymous:c};Object.assign(n,d)}async function poe(n){const e=Ca(n);await $S(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function moe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function CH(n){return n.map(e=>{var{providerId:t}=e,r=I_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function goe(n,e){const t=await TH(n,{},async()=>{const r=M_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,s=await kH(n,i,"/v1/token",`key=${a}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return n.emulatorConfig&&Zv(n.emulatorConfig.host)&&(l.credentials="include"),AH.fetch()(s,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function voe(n,e){return Uf(n,"POST","/v2/accounts:revokeToken",$m(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){mn(e.idToken,"internal-error"),mn(typeof e.idToken<"u","internal-error"),mn(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$8(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){mn(e.length!==0,"internal-error");const t=$8(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(mn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await goe(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,s=new W0;return r&&(mn(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(mn(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(mn(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new W0,this.toJSON())}_performRefresh(){return ud("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(n,e){mn(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ou{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=I_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new foe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new YP(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await D1(this,this.stsTokenManager.getToken(this.auth,e));return mn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return doe(this,e)}reload(){return poe(this)}_assign(e){this!==e&&(mn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ou(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){mn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await $S(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xl(this.auth.app))return Promise.reject(hf(this.auth));const e=await this.getIdToken();return await D1(this,coe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,s,o,l,u,c;const d=(r=t.displayName)!==null&&r!==void 0?r:void 0,f=(i=t.email)!==null&&i!==void 0?i:void 0,m=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,v=(s=t.photoURL)!==null&&s!==void 0?s:void 0,_=(o=t.tenantId)!==null&&o!==void 0?o:void 0,w=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,x=(u=t.createdAt)!==null&&u!==void 0?u:void 0,S=(c=t.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:E,emailVerified:T,isAnonymous:D,providerData:F,stsTokenManager:P}=t;mn(E&&P,e,"internal-error");const N=W0.fromJSON(this.name,P);mn(typeof E=="string",e,"internal-error"),ph(d,e.name),ph(f,e.name),mn(typeof T=="boolean",e,"internal-error"),mn(typeof D=="boolean",e,"internal-error"),ph(m,e.name),ph(v,e.name),ph(_,e.name),ph(w,e.name),ph(x,e.name),ph(S,e.name);const I=new ou({uid:E,auth:e,email:f,emailVerified:T,displayName:d,isAnonymous:D,photoURL:v,phoneNumber:m,tenantId:_,stsTokenManager:N,createdAt:x,lastLoginAt:S});return F&&Array.isArray(F)&&(I.providerData=F.map(R=>Object.assign({},R))),w&&(I._redirectEventId=w),I}static async _fromIdTokenResponse(e,t,r=!1){const i=new W0;i.updateFromServerResponse(t);const a=new ou({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await $S(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];mn(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?CH(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new W0;o.updateFromIdToken(r);const l=new ou({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new YP(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8=new Map;function cd(n){Td(n instanceof Function,"Expected a class definition");let e=X8.get(n);return e?(Td(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,X8.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MH{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}MH.type="NONE";const K8=MH;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(n,e,t){return`firebase:${n}:${e}:${t}`}class q0{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=$2(this.userKey,i.apiKey,a),this.fullPersistenceKey=$2("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await qS(this.auth,{idToken:e}).catch(()=>{});return t?ou._fromGetAccountInfoResponse(this.auth,t,e):null}return ou._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new q0(cd(K8),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||cd(K8);const s=$2(r,e.config.apiKey,e.name);let o=null;for(const u of t)try{const c=await u._get(s);if(c){let d;if(typeof c=="string"){const f=await qS(e,{idToken:c}).catch(()=>{});if(!f)break;d=await ou._fromGetAccountInfoResponse(e,f,c)}else d=ou._fromJSON(e,c);u!==a&&(o=d),a=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new q0(a,e,r):(a=l[0],o&&await a._set(s,o.toJSON()),await Promise.all(t.map(async u=>{if(u!==a)try{await u._remove(s)}catch{}})),new q0(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y8(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RH(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IH(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LH(e))return"Blackberry";if(OH(e))return"Webos";if(PH(e))return"Safari";if((e.includes("chrome/")||NH(e))&&!e.includes("edge/"))return"Chrome";if(DH(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function IH(n=Ts()){return/firefox\//i.test(n)}function PH(n=Ts()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NH(n=Ts()){return/crios\//i.test(n)}function RH(n=Ts()){return/iemobile/i.test(n)}function DH(n=Ts()){return/android/i.test(n)}function LH(n=Ts()){return/blackberry/i.test(n)}function OH(n=Ts()){return/webos/i.test(n)}function Q3(n=Ts()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yoe(n=Ts()){var e;return Q3(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xoe(){return kae()&&document.documentMode===10}function FH(n=Ts()){return Q3(n)||DH(n)||OH(n)||LH(n)||/windows phone/i.test(n)||RH(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jH(n,e=[]){let t;switch(n){case"Browser":t=Y8(Ts());break;case"Worker":t=`${Y8(Ts())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qv}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _oe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((s,o)=>{try{const l=e(a);s(l)}catch(l){o(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function woe(n,e={}){return Uf(n,"GET","/v2/passwordPolicy",$m(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const boe=6;class Soe{constructor(e){var t,r,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:boe,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,s,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsUppercaseLetter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eoe{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Z8(this),this.idTokenSubscription=new Z8(this),this.beforeStateQueue=new _oe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EH,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=cd(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await q0.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await qS(this,{idToken:e}),r=await ou._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(xl(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===o)&&(l!=null&&l.user)&&(i=l.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return mn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $S(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=noe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xl(this.app))return Promise.reject(hf(this));const t=e?Ca(e):null;return t&&mn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&mn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xl(this.app)?Promise.reject(hf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xl(this.app)?Promise.reject(hf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cd(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await woe(this),t=new Soe(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wm("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await voe(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&cd(e)||this._popupRedirectResolver;mn(t,this,"argument-error"),this.redirectPersistenceManager=await q0.create(this,[cd(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(mn(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(t);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return mn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jH(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(xl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Qse(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Xm(n){return Ca(n)}class Z8{constructor(e){this.auth=e,this.observer=null,this.addObserver=Dae(t=>this.observer=t)}get next(){return mn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qA={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Aoe(n){qA=n}function BH(n){return qA.loadJS(n)}function Toe(){return qA.recaptchaEnterpriseScript}function koe(){return qA.gapiScript}function Coe(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Moe{constructor(){this.enterprise=new Ioe}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ioe{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Poe="recaptcha-enterprise",UH="NO_RECAPTCHA";class Noe{constructor(e){this.type=Poe,this.auth=Xm(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{uoe(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new loe(l);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,s(u.siteKey)}}).catch(l=>{o(l)})})}function i(a,s,o){const l=window.grecaptcha;q8(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(u=>{s(u)}).catch(()=>{s(UH)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Moe().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(o=>{if(!t&&q8(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Toe();l.length!==0&&(l+=o),BH(l).then(()=>{i(o,a,s)}).catch(u=>{s(u)})}}).catch(o=>{s(o)})})}}async function Q8(n,e,t,r=!1,i=!1){const a=new Noe(n);let s;if(i)s=UH;else try{s=await a.verify(t)}catch{s=await a.verify(t,!0)}const o=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function J8(n,e,t,r,i){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Q8(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Q8(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Roe(n,e){const t=qm(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(bf(a,e??{}))return i;Il(i,"already-initialized")}return t.initialize({options:e})}function Doe(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(cd);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Loe(n,e,t){const r=Xm(n);mn(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=VH(e),{host:s,port:o}=Ooe(e),l=o===null?"":`:${o}`,u={url:`${a}//${s}${l}/`},c=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){mn(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),mn(bf(u,r.config.emulator)&&bf(c,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,Zv(s)?(hH(`${a}//${s}${l}`),fH("Auth",!0)):Foe()}function VH(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Ooe(n){const e=VH(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:ej(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:ej(s)}}}function ej(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Foe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ud("not implemented")}_getIdTokenResponse(e){return ud("not implemented")}_linkToIdToken(e,t){return ud("not implemented")}_getReauthenticationResolver(e){return ud("not implemented")}}async function joe(n,e){return Uf(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Boe(n,e){return WA(n,"POST","/v1/accounts:signInWithPassword",$m(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uoe(n,e){return WA(n,"POST","/v1/accounts:signInWithEmailLink",$m(n,e))}async function Voe(n,e){return WA(n,"POST","/v1/accounts:signInWithEmailLink",$m(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1 extends J3{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new L1(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new L1(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return J8(e,t,"signInWithPassword",Boe);case"emailLink":return Uoe(e,{email:this._email,oobCode:this._password});default:Il(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return J8(e,r,"signUpPassword",joe);case"emailLink":return Voe(e,{idToken:t,email:this._email,oobCode:this._password});default:Il(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $0(n,e){return WA(n,"POST","/v1/accounts:signInWithIdp",$m(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zoe="http://localhost";class Em extends J3{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Em(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Il("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=I_(t,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Em(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return $0(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,$0(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$0(e,t)}buildRequest(){const e={requestUri:zoe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=M_(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hoe(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Goe(n){const e=yx(xx(n)).link,t=e?yx(xx(e)).deep_link_id:null,r=yx(xx(n)).deep_link_id;return(r?yx(xx(r)).link:null)||r||t||e||n}class eD{constructor(e){var t,r,i,a,s,o;const l=yx(xx(e)),u=(t=l.apiKey)!==null&&t!==void 0?t:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,d=Hoe((i=l.mode)!==null&&i!==void 0?i:null);mn(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=(a=l.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(s=l.lang)!==null&&s!==void 0?s:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const t=Goe(e);try{return new eD(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(){this.providerId=Jv.PROVIDER_ID}static credential(e,t){return L1._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=eD.parseLink(t);return mn(r,"argument-error"),L1._fromEmailAndCode(e,r.code,r.tenantId)}}Jv.PROVIDER_ID="password";Jv.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Jv.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_ extends tD{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh extends N_{constructor(){super("facebook.com")}static credential(e){return Em._fromParams({providerId:Fh.PROVIDER_ID,signInMethod:Fh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fh.credentialFromTaggedObject(e)}static credentialFromError(e){return Fh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fh.credential(e.oauthAccessToken)}catch{return null}}}Fh.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fh.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id extends N_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Em._fromParams({providerId:id.PROVIDER_ID,signInMethod:id.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return id.credentialFromTaggedObject(e)}static credentialFromError(e){return id.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return id.credential(t,r)}catch{return null}}}id.GOOGLE_SIGN_IN_METHOD="google.com";id.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh extends N_{constructor(){super("github.com")}static credential(e){return Em._fromParams({providerId:jh.PROVIDER_ID,signInMethod:jh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jh.credentialFromTaggedObject(e)}static credentialFromError(e){return jh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jh.credential(e.oauthAccessToken)}catch{return null}}}jh.GITHUB_SIGN_IN_METHOD="github.com";jh.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh extends N_{constructor(){super("twitter.com")}static credential(e,t){return Em._fromParams({providerId:Bh.PROVIDER_ID,signInMethod:Bh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Bh.credentialFromTaggedObject(e)}static credentialFromError(e){return Bh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Bh.credential(t,r)}catch{return null}}}Bh.TWITTER_SIGN_IN_METHOD="twitter.com";Bh.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await ou._fromIdTokenResponse(e,r,i),s=tj(r);return new bv({user:a,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=tj(r);return new bv({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function tj(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS extends Eu{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,XS.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new XS(e,t,r,i)}}function zH(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?XS._fromErrorAndOperation(n,a,e,r):a})}async function Woe(n,e,t=!1){const r=await D1(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return bv._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qoe(n,e,t=!1){const{auth:r}=n;if(xl(r.app))return Promise.reject(hf(r));const i="reauthenticate";try{const a=await D1(n,zH(r,i,e,n),t);mn(a.idToken,r,"internal-error");const s=Z3(a.idToken);mn(s,r,"internal-error");const{sub:o}=s;return mn(n.uid===o,r,"user-mismatch"),bv._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Il(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HH(n,e,t=!1){if(xl(n.app))return Promise.reject(hf(n));const r="signIn",i=await zH(n,r,e),a=await bv._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function $oe(n,e){return HH(Xm(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xoe(n){const e=Xm(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function nD(n,e,t){return xl(n.app)?Promise.reject(hf(n)):$oe(Ca(n),Jv.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Xoe(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Koe(n,e){return Ca(n).setPersistence(e)}function Yoe(n,e,t,r){return Ca(n).onIdTokenChanged(e,t,r)}function Zoe(n,e,t){return Ca(n).beforeAuthStateChanged(e,t)}function $A(n,e,t,r){return Ca(n).onAuthStateChanged(e,t,r)}function Qoe(n){return Ca(n).signOut()}const KS="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GH{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(KS,"1"),this.storage.removeItem(KS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Joe=1e3,ele=10;class WH extends GH{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FH(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,o,l)=>{this.notifyListeners(s,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!t&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);xoe()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,ele):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Joe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}WH.type="LOCAL";const qH=WH;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $H extends GH{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$H.type="SESSION";const XH=$H;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tle(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new XA(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async u=>u(t.origin,a)),l=await tle(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}XA.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nle{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,l)=>{const u=rD("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(f.data.response);break;default:clearTimeout(c),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(){return window}function rle(n){lc().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KH(){return typeof lc().WorkerGlobalScope<"u"&&typeof lc().importScripts=="function"}async function ile(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ale(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function sle(){return KH()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YH="firebaseLocalStorageDb",ole=1,YS="firebaseLocalStorage",ZH="fbase_key";class R_{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function KA(n,e){return n.transaction([YS],e?"readwrite":"readonly").objectStore(YS)}function lle(){const n=indexedDB.deleteDatabase(YH);return new R_(n).toPromise()}function ZP(){const n=indexedDB.open(YH,ole);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(YS,{keyPath:ZH})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(YS)?e(r):(r.close(),await lle(),e(await ZP()))})})}async function nj(n,e,t){const r=KA(n,!0).put({[ZH]:e,value:t});return new R_(r).toPromise()}async function ule(n,e){const t=KA(n,!1).get(e),r=await new R_(t).toPromise();return r===void 0?null:r.value}function rj(n,e){const t=KA(n,!0).delete(e);return new R_(t).toPromise()}const cle=800,dle=3;class QH{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ZP(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>dle)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KH()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=XA._getInstance(sle()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ile(),!this.activeServiceWorker)return;this.sender=new nle(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ale()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ZP();return await nj(e,KS,"1"),await rj(e,KS),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>nj(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>ule(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>rj(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=KA(i,!1).getAll();return new R_(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cle)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QH.type="LOCAL";const hle=QH;new P_(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JH(n,e){return e?cd(e):(mn(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD extends J3{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $0(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $0(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $0(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fle(n){return HH(n.auth,new iD(n),n.bypassAuthState)}function ple(n){const{auth:e,user:t}=n;return mn(t,e,"internal-error"),qoe(t,new iD(n),n.bypassAuthState)}async function mle(n){const{auth:e,user:t}=n;return mn(t,e,"internal-error"),Woe(t,new iD(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eG{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fle;case"linkViaPopup":case"linkViaRedirect":return mle;case"reauthViaPopup":case"reauthViaRedirect":return ple;default:Il(this.auth,"internal-error")}}resolve(e){Td(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Td(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gle=new P_(2e3,1e4);async function vle(n,e,t){if(xl(n.app))return Promise.reject(hu(n,"operation-not-supported-in-this-environment"));const r=Xm(n);Jse(n,e,tD);const i=JH(r,t);return new Wp(r,"signInViaPopup",e,i).executeNotNull()}class Wp extends eG{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Wp.currentPopupAction&&Wp.currentPopupAction.cancel(),Wp.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return mn(e,this.auth,"internal-error"),e}async onExecution(){Td(this.filter.length===1,"Popup operations only handle one event");const e=rD();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(hu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wp.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gle.get())};e()}}Wp.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yle="pendingRedirect",X2=new Map;class xle extends eG{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=X2.get(this.auth._key());if(!e){try{const r=await _le(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}X2.set(this.auth._key(),e)}return this.bypassAuthState||X2.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _le(n,e){const t=Sle(e),r=ble(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function wle(n,e){X2.set(n._key(),e)}function ble(n){return cd(n._redirectPersistence)}function Sle(n){return $2(yle,n.config.apiKey,n.name)}async function Ele(n,e,t=!1){if(xl(n.app))return Promise.reject(hf(n));const r=Xm(n),i=JH(r,e),s=await new xle(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ale=10*60*1e3;class Tle{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kle(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!tG(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(hu(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ale&&this.cachedEventUids.clear(),this.cachedEventUids.has(ij(e))}saveEventToCache(e){this.cachedEventUids.add(ij(e)),this.lastProcessedEventTime=Date.now()}}function ij(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function tG({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kle(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tG(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cle(n,e={}){return Uf(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mle=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ile=/^https?/;async function Ple(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Cle(n);for(const t of e)try{if(Nle(t))return}catch{}Il(n,"unauthorized-domain")}function Nle(n){const e=KP(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!Ile.test(t))return!1;if(Mle.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rle=new P_(3e4,6e4);function aj(){const n=lc().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Dle(n){return new Promise((e,t)=>{var r,i,a;function s(){aj(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{aj(),t(hu(n,"network-request-failed"))},timeout:Rle.get()})}if(!((i=(r=lc().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=lc().gapi)===null||a===void 0)&&a.load)s();else{const o=Coe("iframefcb");return lc()[o]=()=>{gapi.load?s():t(hu(n,"network-request-failed"))},BH(`${koe()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw K2=null,e})}let K2=null;function Lle(n){return K2=K2||Dle(n),K2}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ole=new P_(5e3,15e3),Fle="__/auth/iframe",jle="emulator/auth/iframe",Ble={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ule=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vle(n){const e=n.config;mn(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Y3(e,jle):`https://${n.config.authDomain}/${Fle}`,r={apiKey:e.apiKey,appName:n.name,v:Qv},i=Ule.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${M_(r).slice(1)}`}async function zle(n){const e=await Lle(n),t=lc().gapi;return mn(t,n,"internal-error"),e.open({where:document.body,url:Vle(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ble,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=hu(n,"network-request-failed"),o=lc().setTimeout(()=>{a(s)},Ole.get());function l(){lc().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hle={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Gle=500,Wle=600,qle="_blank",$le="http://localhost";class sj{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Xle(n,e,t,r=Gle,i=Wle){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Hle),{width:r.toString(),height:i.toString(),top:a,left:s}),u=Ts().toLowerCase();t&&(o=NH(u)?qle:t),IH(u)&&(e=e||$le,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(yoe(u)&&o!=="_self")return Kle(e||"",o),new sj(null);const d=window.open(e||"",o,c);mn(d,n,"popup-blocked");try{d.focus()}catch{}return new sj(d)}function Kle(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yle="__/auth/handler",Zle="emulator/auth/handler",Qle=encodeURIComponent("fac");async function oj(n,e,t,r,i,a){mn(n.config.authDomain,n,"auth-domain-config-required"),mn(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Qv,eventId:i};if(e instanceof tD){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",Rae(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries({}))s[c]=d}if(e instanceof N_){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(s.scopes=c.join(","))}n.tenantId&&(s.tid=n.tenantId);const o=s;for(const c of Object.keys(o))o[c]===void 0&&delete o[c];const l=await n._getAppCheckToken(),u=l?`#${Qle}=${encodeURIComponent(l)}`:"";return`${Jle(n)}?${M_(o).slice(1)}${u}`}function Jle({config:n}){return n.emulator?Y3(n,Zle):`https://${n.authDomain}/${Yle}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="webStorageSupport";class eue{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=XH,this._completeRedirectFn=Ele,this._overrideRedirectResult=wle}async _openPopup(e,t,r,i){var a;Td((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await oj(e,t,r,KP(),i);return Xle(e,s,rD())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await oj(e,t,r,KP(),i);return rle(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Td(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await zle(e),r=new Tle(e);return t.register("authEvent",i=>(mn(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(XC,{type:XC},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[XC];s!==void 0&&t(!!s),Il(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ple(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return FH()||PH()||Q3()}}const tue=eue;var lj="@firebase/auth",uj="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nue{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){mn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rue(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iue(n){gc(new yu("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;mn(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jH(n)},u=new Eoe(r,i,a,l);return Doe(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),gc(new yu("auth-internal",e=>{const t=Xm(e.getProvider("auth").getImmediate());return(r=>new nue(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Al(lj,uj,rue(n)),Al(lj,uj,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aue=5*60,sue=dH("authIdTokenMaxAge")||aue;let cj=null;const oue=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>sue)return;const i=t==null?void 0:t.token;cj!==i&&(cj=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function lue(n=GA()){const e=qm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Roe(n,{popupRedirectResolver:tue,persistence:[hle,qH,XH]}),r=dH("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=oue(a.toString());Zoe(t,s,()=>s(t.currentUser)),Yoe(t,o=>s(o))}}const i=uH("auth");return i&&Loe(t,`http://${i}`),t}function uue(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Aoe({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=hu("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",uue().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iue("Browser");var dj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ff,nG;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,N){function I(){}I.prototype=N.prototype,P.D=N.prototype,P.prototype=new I,P.prototype.constructor=P,P.C=function(R,B,G){for(var H=Array(arguments.length-2),K=2;K<arguments.length;K++)H[K-2]=arguments[K];return N.prototype[B].apply(R,H)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,N,I){I||(I=0);var R=Array(16);if(typeof N=="string")for(var B=0;16>B;++B)R[B]=N.charCodeAt(I++)|N.charCodeAt(I++)<<8|N.charCodeAt(I++)<<16|N.charCodeAt(I++)<<24;else for(B=0;16>B;++B)R[B]=N[I++]|N[I++]<<8|N[I++]<<16|N[I++]<<24;N=P.g[0],I=P.g[1],B=P.g[2];var G=P.g[3],H=N+(G^I&(B^G))+R[0]+3614090360&4294967295;N=I+(H<<7&4294967295|H>>>25),H=G+(B^N&(I^B))+R[1]+3905402710&4294967295,G=N+(H<<12&4294967295|H>>>20),H=B+(I^G&(N^I))+R[2]+606105819&4294967295,B=G+(H<<17&4294967295|H>>>15),H=I+(N^B&(G^N))+R[3]+3250441966&4294967295,I=B+(H<<22&4294967295|H>>>10),H=N+(G^I&(B^G))+R[4]+4118548399&4294967295,N=I+(H<<7&4294967295|H>>>25),H=G+(B^N&(I^B))+R[5]+1200080426&4294967295,G=N+(H<<12&4294967295|H>>>20),H=B+(I^G&(N^I))+R[6]+2821735955&4294967295,B=G+(H<<17&4294967295|H>>>15),H=I+(N^B&(G^N))+R[7]+4249261313&4294967295,I=B+(H<<22&4294967295|H>>>10),H=N+(G^I&(B^G))+R[8]+1770035416&4294967295,N=I+(H<<7&4294967295|H>>>25),H=G+(B^N&(I^B))+R[9]+2336552879&4294967295,G=N+(H<<12&4294967295|H>>>20),H=B+(I^G&(N^I))+R[10]+4294925233&4294967295,B=G+(H<<17&4294967295|H>>>15),H=I+(N^B&(G^N))+R[11]+2304563134&4294967295,I=B+(H<<22&4294967295|H>>>10),H=N+(G^I&(B^G))+R[12]+1804603682&4294967295,N=I+(H<<7&4294967295|H>>>25),H=G+(B^N&(I^B))+R[13]+4254626195&4294967295,G=N+(H<<12&4294967295|H>>>20),H=B+(I^G&(N^I))+R[14]+2792965006&4294967295,B=G+(H<<17&4294967295|H>>>15),H=I+(N^B&(G^N))+R[15]+1236535329&4294967295,I=B+(H<<22&4294967295|H>>>10),H=N+(B^G&(I^B))+R[1]+4129170786&4294967295,N=I+(H<<5&4294967295|H>>>27),H=G+(I^B&(N^I))+R[6]+3225465664&4294967295,G=N+(H<<9&4294967295|H>>>23),H=B+(N^I&(G^N))+R[11]+643717713&4294967295,B=G+(H<<14&4294967295|H>>>18),H=I+(G^N&(B^G))+R[0]+3921069994&4294967295,I=B+(H<<20&4294967295|H>>>12),H=N+(B^G&(I^B))+R[5]+3593408605&4294967295,N=I+(H<<5&4294967295|H>>>27),H=G+(I^B&(N^I))+R[10]+38016083&4294967295,G=N+(H<<9&4294967295|H>>>23),H=B+(N^I&(G^N))+R[15]+3634488961&4294967295,B=G+(H<<14&4294967295|H>>>18),H=I+(G^N&(B^G))+R[4]+3889429448&4294967295,I=B+(H<<20&4294967295|H>>>12),H=N+(B^G&(I^B))+R[9]+568446438&4294967295,N=I+(H<<5&4294967295|H>>>27),H=G+(I^B&(N^I))+R[14]+3275163606&4294967295,G=N+(H<<9&4294967295|H>>>23),H=B+(N^I&(G^N))+R[3]+4107603335&4294967295,B=G+(H<<14&4294967295|H>>>18),H=I+(G^N&(B^G))+R[8]+1163531501&4294967295,I=B+(H<<20&4294967295|H>>>12),H=N+(B^G&(I^B))+R[13]+2850285829&4294967295,N=I+(H<<5&4294967295|H>>>27),H=G+(I^B&(N^I))+R[2]+4243563512&4294967295,G=N+(H<<9&4294967295|H>>>23),H=B+(N^I&(G^N))+R[7]+1735328473&4294967295,B=G+(H<<14&4294967295|H>>>18),H=I+(G^N&(B^G))+R[12]+2368359562&4294967295,I=B+(H<<20&4294967295|H>>>12),H=N+(I^B^G)+R[5]+4294588738&4294967295,N=I+(H<<4&4294967295|H>>>28),H=G+(N^I^B)+R[8]+2272392833&4294967295,G=N+(H<<11&4294967295|H>>>21),H=B+(G^N^I)+R[11]+1839030562&4294967295,B=G+(H<<16&4294967295|H>>>16),H=I+(B^G^N)+R[14]+4259657740&4294967295,I=B+(H<<23&4294967295|H>>>9),H=N+(I^B^G)+R[1]+2763975236&4294967295,N=I+(H<<4&4294967295|H>>>28),H=G+(N^I^B)+R[4]+1272893353&4294967295,G=N+(H<<11&4294967295|H>>>21),H=B+(G^N^I)+R[7]+4139469664&4294967295,B=G+(H<<16&4294967295|H>>>16),H=I+(B^G^N)+R[10]+3200236656&4294967295,I=B+(H<<23&4294967295|H>>>9),H=N+(I^B^G)+R[13]+681279174&4294967295,N=I+(H<<4&4294967295|H>>>28),H=G+(N^I^B)+R[0]+3936430074&4294967295,G=N+(H<<11&4294967295|H>>>21),H=B+(G^N^I)+R[3]+3572445317&4294967295,B=G+(H<<16&4294967295|H>>>16),H=I+(B^G^N)+R[6]+76029189&4294967295,I=B+(H<<23&4294967295|H>>>9),H=N+(I^B^G)+R[9]+3654602809&4294967295,N=I+(H<<4&4294967295|H>>>28),H=G+(N^I^B)+R[12]+3873151461&4294967295,G=N+(H<<11&4294967295|H>>>21),H=B+(G^N^I)+R[15]+530742520&4294967295,B=G+(H<<16&4294967295|H>>>16),H=I+(B^G^N)+R[2]+3299628645&4294967295,I=B+(H<<23&4294967295|H>>>9),H=N+(B^(I|~G))+R[0]+4096336452&4294967295,N=I+(H<<6&4294967295|H>>>26),H=G+(I^(N|~B))+R[7]+1126891415&4294967295,G=N+(H<<10&4294967295|H>>>22),H=B+(N^(G|~I))+R[14]+2878612391&4294967295,B=G+(H<<15&4294967295|H>>>17),H=I+(G^(B|~N))+R[5]+4237533241&4294967295,I=B+(H<<21&4294967295|H>>>11),H=N+(B^(I|~G))+R[12]+1700485571&4294967295,N=I+(H<<6&4294967295|H>>>26),H=G+(I^(N|~B))+R[3]+2399980690&4294967295,G=N+(H<<10&4294967295|H>>>22),H=B+(N^(G|~I))+R[10]+4293915773&4294967295,B=G+(H<<15&4294967295|H>>>17),H=I+(G^(B|~N))+R[1]+2240044497&4294967295,I=B+(H<<21&4294967295|H>>>11),H=N+(B^(I|~G))+R[8]+1873313359&4294967295,N=I+(H<<6&4294967295|H>>>26),H=G+(I^(N|~B))+R[15]+4264355552&4294967295,G=N+(H<<10&4294967295|H>>>22),H=B+(N^(G|~I))+R[6]+2734768916&4294967295,B=G+(H<<15&4294967295|H>>>17),H=I+(G^(B|~N))+R[13]+1309151649&4294967295,I=B+(H<<21&4294967295|H>>>11),H=N+(B^(I|~G))+R[4]+4149444226&4294967295,N=I+(H<<6&4294967295|H>>>26),H=G+(I^(N|~B))+R[11]+3174756917&4294967295,G=N+(H<<10&4294967295|H>>>22),H=B+(N^(G|~I))+R[2]+718787259&4294967295,B=G+(H<<15&4294967295|H>>>17),H=I+(G^(B|~N))+R[9]+3951481745&4294967295,P.g[0]=P.g[0]+N&4294967295,P.g[1]=P.g[1]+(B+(H<<21&4294967295|H>>>11))&4294967295,P.g[2]=P.g[2]+B&4294967295,P.g[3]=P.g[3]+G&4294967295}r.prototype.u=function(P,N){N===void 0&&(N=P.length);for(var I=N-this.blockSize,R=this.B,B=this.h,G=0;G<N;){if(B==0)for(;G<=I;)i(this,P,G),G+=this.blockSize;if(typeof P=="string"){for(;G<N;)if(R[B++]=P.charCodeAt(G++),B==this.blockSize){i(this,R),B=0;break}}else for(;G<N;)if(R[B++]=P[G++],B==this.blockSize){i(this,R),B=0;break}}this.h=B,this.o+=N},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var N=1;N<P.length-8;++N)P[N]=0;var I=8*this.o;for(N=P.length-8;N<P.length;++N)P[N]=I&255,I/=256;for(this.u(P),P=Array(16),N=I=0;4>N;++N)for(var R=0;32>R;R+=8)P[I++]=this.g[N]>>>R&255;return P};function a(P,N){var I=o;return Object.prototype.hasOwnProperty.call(I,P)?I[P]:I[P]=N(P)}function s(P,N){this.h=N;for(var I=[],R=!0,B=P.length-1;0<=B;B--){var G=P[B]|0;R&&G==N||(I[B]=G,R=!1)}this.g=I}var o={};function l(P){return-128<=P&&128>P?a(P,function(N){return new s([N|0],0>N?-1:0)}):new s([P|0],0>P?-1:0)}function u(P){if(isNaN(P)||!isFinite(P))return d;if(0>P)return w(u(-P));for(var N=[],I=1,R=0;P>=I;R++)N[R]=P/I|0,I*=4294967296;return new s(N,0)}function c(P,N){if(P.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(P.charAt(0)=="-")return w(c(P.substring(1),N));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(N,8)),R=d,B=0;B<P.length;B+=8){var G=Math.min(8,P.length-B),H=parseInt(P.substring(B,B+G),N);8>G?(G=u(Math.pow(N,G)),R=R.j(G).add(u(H))):(R=R.j(I),R=R.add(u(H)))}return R}var d=l(0),f=l(1),m=l(16777216);n=s.prototype,n.m=function(){if(_(this))return-w(this).m();for(var P=0,N=1,I=0;I<this.g.length;I++){var R=this.i(I);P+=(0<=R?R:4294967296+R)*N,N*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(v(this))return"0";if(_(this))return"-"+w(this).toString(P);for(var N=u(Math.pow(P,6)),I=this,R="";;){var B=T(I,N).g;I=x(I,B.j(N));var G=((0<I.g.length?I.g[0]:I.h)>>>0).toString(P);if(I=B,v(I))return G+R;for(;6>G.length;)G="0"+G;R=G+R}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function v(P){if(P.h!=0)return!1;for(var N=0;N<P.g.length;N++)if(P.g[N]!=0)return!1;return!0}function _(P){return P.h==-1}n.l=function(P){return P=x(this,P),_(P)?-1:v(P)?0:1};function w(P){for(var N=P.g.length,I=[],R=0;R<N;R++)I[R]=~P.g[R];return new s(I,~P.h).add(f)}n.abs=function(){return _(this)?w(this):this},n.add=function(P){for(var N=Math.max(this.g.length,P.g.length),I=[],R=0,B=0;B<=N;B++){var G=R+(this.i(B)&65535)+(P.i(B)&65535),H=(G>>>16)+(this.i(B)>>>16)+(P.i(B)>>>16);R=H>>>16,G&=65535,H&=65535,I[B]=H<<16|G}return new s(I,I[I.length-1]&-2147483648?-1:0)};function x(P,N){return P.add(w(N))}n.j=function(P){if(v(this)||v(P))return d;if(_(this))return _(P)?w(this).j(w(P)):w(w(this).j(P));if(_(P))return w(this.j(w(P)));if(0>this.l(m)&&0>P.l(m))return u(this.m()*P.m());for(var N=this.g.length+P.g.length,I=[],R=0;R<2*N;R++)I[R]=0;for(R=0;R<this.g.length;R++)for(var B=0;B<P.g.length;B++){var G=this.i(R)>>>16,H=this.i(R)&65535,K=P.i(B)>>>16,ne=P.i(B)&65535;I[2*R+2*B]+=H*ne,S(I,2*R+2*B),I[2*R+2*B+1]+=G*ne,S(I,2*R+2*B+1),I[2*R+2*B+1]+=H*K,S(I,2*R+2*B+1),I[2*R+2*B+2]+=G*K,S(I,2*R+2*B+2)}for(R=0;R<N;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=N;R<2*N;R++)I[R]=0;return new s(I,0)};function S(P,N){for(;(P[N]&65535)!=P[N];)P[N+1]+=P[N]>>>16,P[N]&=65535,N++}function E(P,N){this.g=P,this.h=N}function T(P,N){if(v(N))throw Error("division by zero");if(v(P))return new E(d,d);if(_(P))return N=T(w(P),N),new E(w(N.g),w(N.h));if(_(N))return N=T(P,w(N)),new E(w(N.g),N.h);if(30<P.g.length){if(_(P)||_(N))throw Error("slowDivide_ only works with positive integers.");for(var I=f,R=N;0>=R.l(P);)I=D(I),R=D(R);var B=F(I,1),G=F(R,1);for(R=F(R,2),I=F(I,2);!v(R);){var H=G.add(R);0>=H.l(P)&&(B=B.add(I),G=H),R=F(R,1),I=F(I,1)}return N=x(P,B.j(N)),new E(B,N)}for(B=d;0<=P.l(N);){for(I=Math.max(1,Math.floor(P.m()/N.m())),R=Math.ceil(Math.log(I)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),G=u(I),H=G.j(N);_(H)||0<H.l(P);)I-=R,G=u(I),H=G.j(N);v(G)&&(G=f),B=B.add(G),P=x(P,H)}return new E(B,P)}n.A=function(P){return T(this,P).h},n.and=function(P){for(var N=Math.max(this.g.length,P.g.length),I=[],R=0;R<N;R++)I[R]=this.i(R)&P.i(R);return new s(I,this.h&P.h)},n.or=function(P){for(var N=Math.max(this.g.length,P.g.length),I=[],R=0;R<N;R++)I[R]=this.i(R)|P.i(R);return new s(I,this.h|P.h)},n.xor=function(P){for(var N=Math.max(this.g.length,P.g.length),I=[],R=0;R<N;R++)I[R]=this.i(R)^P.i(R);return new s(I,this.h^P.h)};function D(P){for(var N=P.g.length+1,I=[],R=0;R<N;R++)I[R]=P.i(R)<<1|P.i(R-1)>>>31;return new s(I,P.h)}function F(P,N){var I=N>>5;N%=32;for(var R=P.g.length-I,B=[],G=0;G<R;G++)B[G]=0<N?P.i(G+I)>>>N|P.i(G+I+1)<<32-N:P.i(G+I);return new s(B,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nG=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=c,ff=s}).apply(typeof dj<"u"?dj:typeof self<"u"?self:typeof window<"u"?window:{});var gb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rG,_x,iG,Y2,QP,aG,sG,oG;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(A,V,W){return A==Array.prototype||A==Object.prototype||(A[V]=W.value),A};function t(A){A=[typeof globalThis=="object"&&globalThis,A,typeof window=="object"&&window,typeof self=="object"&&self,typeof gb=="object"&&gb];for(var V=0;V<A.length;++V){var W=A[V];if(W&&W.Math==Math)return W}throw Error("Cannot find global object")}var r=t(this);function i(A,V){if(V)e:{var W=r;A=A.split(".");for(var J=0;J<A.length-1;J++){var ke=A[J];if(!(ke in W))break e;W=W[ke]}A=A[A.length-1],J=W[A],V=V(J),V!=J&&V!=null&&e(W,A,{configurable:!0,writable:!0,value:V})}}function a(A,V){A instanceof String&&(A+="");var W=0,J=!1,ke={next:function(){if(!J&&W<A.length){var ze=W++;return{value:V(ze,A[ze]),done:!1}}return J=!0,{done:!0,value:void 0}}};return ke[Symbol.iterator]=function(){return ke},ke}i("Array.prototype.values",function(A){return A||function(){return a(this,function(V,W){return W})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(A){var V=typeof A;return V=V!="object"?V:A?Array.isArray(A)?"array":V:"null",V=="array"||V=="object"&&typeof A.length=="number"}function u(A){var V=typeof A;return V=="object"&&A!=null||V=="function"}function c(A,V,W){return A.call.apply(A.bind,arguments)}function d(A,V,W){if(!A)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var ke=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ke,J),A.apply(V,ke)}}return function(){return A.apply(V,arguments)}}function f(A,V,W){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:d,f.apply(null,arguments)}function m(A,V){var W=Array.prototype.slice.call(arguments,1);return function(){var J=W.slice();return J.push.apply(J,arguments),A.apply(this,J)}}function v(A,V){function W(){}W.prototype=V.prototype,A.aa=V.prototype,A.prototype=new W,A.prototype.constructor=A,A.Qb=function(J,ke,ze){for(var mt=Array(arguments.length-2),Gn=2;Gn<arguments.length;Gn++)mt[Gn-2]=arguments[Gn];return V.prototype[ke].apply(J,mt)}}function _(A){const V=A.length;if(0<V){const W=Array(V);for(let J=0;J<V;J++)W[J]=A[J];return W}return[]}function w(A,V){for(let W=1;W<arguments.length;W++){const J=arguments[W];if(l(J)){const ke=A.length||0,ze=J.length||0;A.length=ke+ze;for(let mt=0;mt<ze;mt++)A[ke+mt]=J[mt]}else A.push(J)}}class x{constructor(V,W){this.i=V,this.j=W,this.h=0,this.g=null}get(){let V;return 0<this.h?(this.h--,V=this.g,this.g=V.next,V.next=null):V=this.i(),V}}function S(A){return/^[\s\xa0]*$/.test(A)}function E(){var A=o.navigator;return A&&(A=A.userAgent)?A:""}function T(A){return T[" "](A),A}T[" "]=function(){};var D=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function F(A,V,W){for(const J in A)V.call(W,A[J],J,A)}function P(A,V){for(const W in A)V.call(void 0,A[W],W,A)}function N(A){const V={};for(const W in A)V[W]=A[W];return V}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(A,V){let W,J;for(let ke=1;ke<arguments.length;ke++){J=arguments[ke];for(W in J)A[W]=J[W];for(let ze=0;ze<I.length;ze++)W=I[ze],Object.prototype.hasOwnProperty.call(J,W)&&(A[W]=J[W])}}function B(A){var V=1;A=A.split(":");const W=[];for(;0<V&&A.length;)W.push(A.shift()),V--;return A.length&&W.push(A.join(":")),W}function G(A){o.setTimeout(()=>{throw A},0)}function H(){var A=ue;let V=null;return A.g&&(V=A.g,A.g=A.g.next,A.g||(A.h=null),V.next=null),V}class K{constructor(){this.h=this.g=null}add(V,W){const J=ne.get();J.set(V,W),this.h?this.h.next=J:this.g=J,this.h=J}}var ne=new x(()=>new re,A=>A.reset());class re{constructor(){this.next=this.g=this.h=null}set(V,W){this.h=V,this.g=W,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,$=!1,ue=new K,se=()=>{const A=o.Promise.resolve(void 0);oe=()=>{A.then(pe)}};var pe=()=>{for(var A;A=H();){try{A.h.call(A.g)}catch(W){G(W)}var V=ne;V.j(A),100>V.h&&(V.h++,A.next=V.g,V.g=A)}$=!1};function Fe(){this.s=this.s,this.C=this.C}Fe.prototype.s=!1,Fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $e(A,V){this.type=A,this.g=this.target=V,this.defaultPrevented=!1}$e.prototype.h=function(){this.defaultPrevented=!0};var at=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var A=!1,V=Object.defineProperty({},"passive",{get:function(){A=!0}});try{const W=()=>{};o.addEventListener("test",W,V),o.removeEventListener("test",W,V)}catch{}return A}();function me(A,V){if($e.call(this,A?A.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,A){var W=this.type=A.type,J=A.changedTouches&&A.changedTouches.length?A.changedTouches[0]:null;if(this.target=A.target||A.srcElement,this.g=V,V=A.relatedTarget){if(D){e:{try{T(V.nodeName);var ke=!0;break e}catch{}ke=!1}ke||(V=null)}}else W=="mouseover"?V=A.fromElement:W=="mouseout"&&(V=A.toElement);this.relatedTarget=V,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0),this.button=A.button,this.key=A.key||"",this.ctrlKey=A.ctrlKey,this.altKey=A.altKey,this.shiftKey=A.shiftKey,this.metaKey=A.metaKey,this.pointerId=A.pointerId||0,this.pointerType=typeof A.pointerType=="string"?A.pointerType:Le[A.pointerType]||"",this.state=A.state,this.i=A,A.defaultPrevented&&me.aa.h.call(this)}}v(me,$e);var Le={2:"touch",3:"pen",4:"mouse"};me.prototype.h=function(){me.aa.h.call(this);var A=this.i;A.preventDefault?A.preventDefault():A.returnValue=!1};var Se="closure_listenable_"+(1e6*Math.random()|0),ge=0;function Ge(A,V,W,J,ke){this.listener=A,this.proxy=null,this.src=V,this.type=W,this.capture=!!J,this.ha=ke,this.key=++ge,this.da=this.fa=!1}function Me(A){A.da=!0,A.listener=null,A.proxy=null,A.src=null,A.ha=null}function Ce(A){this.src=A,this.g={},this.h=0}Ce.prototype.add=function(A,V,W,J,ke){var ze=A.toString();A=this.g[ze],A||(A=this.g[ze]=[],this.h++);var mt=te(A,V,J,ke);return-1<mt?(V=A[mt],W||(V.fa=!1)):(V=new Ge(V,this.src,ze,!!J,ke),V.fa=W,A.push(V)),V};function Te(A,V){var W=V.type;if(W in A.g){var J=A.g[W],ke=Array.prototype.indexOf.call(J,V,void 0),ze;(ze=0<=ke)&&Array.prototype.splice.call(J,ke,1),ze&&(Me(V),A.g[W].length==0&&(delete A.g[W],A.h--))}}function te(A,V,W,J){for(var ke=0;ke<A.length;++ke){var ze=A[ke];if(!ze.da&&ze.listener==V&&ze.capture==!!W&&ze.ha==J)return ke}return-1}var Ee="closure_lm_"+(1e6*Math.random()|0),Pe={};function Ke(A,V,W,J,ke){if(Array.isArray(V)){for(var ze=0;ze<V.length;ze++)Ke(A,V[ze],W,J,ke);return null}return W=ve(W),A&&A[Se]?A.K(V,W,u(J)?!!J.capture:!1,ke):je(A,V,W,!1,J,ke)}function je(A,V,W,J,ke,ze){if(!V)throw Error("Invalid event type");var mt=u(ke)?!!ke.capture:!!ke,Gn=Z(A);if(Gn||(A[Ee]=Gn=new Ce(A)),W=Gn.add(V,W,J,mt,ze),W.proxy)return W;if(J=st(),W.proxy=J,J.src=A,J.listener=W,A.addEventListener)at||(ke=mt),ke===void 0&&(ke=!1),A.addEventListener(V.toString(),J,ke);else if(A.attachEvent)A.attachEvent(qe(V.toString()),J);else if(A.addListener&&A.removeListener)A.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return W}function st(){function A(W){return V.call(A.src,A.listener,W)}const V=Ye;return A}function tt(A,V,W,J,ke){if(Array.isArray(V))for(var ze=0;ze<V.length;ze++)tt(A,V[ze],W,J,ke);else J=u(J)?!!J.capture:!!J,W=ve(W),A&&A[Se]?(A=A.i,V=String(V).toString(),V in A.g&&(ze=A.g[V],W=te(ze,W,J,ke),-1<W&&(Me(ze[W]),Array.prototype.splice.call(ze,W,1),ze.length==0&&(delete A.g[V],A.h--)))):A&&(A=Z(A))&&(V=A.g[V.toString()],A=-1,V&&(A=te(V,W,J,ke)),(W=-1<A?V[A]:null)&&ee(W))}function ee(A){if(typeof A!="number"&&A&&!A.da){var V=A.src;if(V&&V[Se])Te(V.i,A);else{var W=A.type,J=A.proxy;V.removeEventListener?V.removeEventListener(W,J,A.capture):V.detachEvent?V.detachEvent(qe(W),J):V.addListener&&V.removeListener&&V.removeListener(J),(W=Z(V))?(Te(W,A),W.h==0&&(W.src=null,V[Ee]=null)):Me(A)}}}function qe(A){return A in Pe?Pe[A]:Pe[A]="on"+A}function Ye(A,V){if(A.da)A=!0;else{V=new me(V,this);var W=A.listener,J=A.ha||A.src;A.fa&&ee(A),A=W.call(J,V)}return A}function Z(A){return A=A[Ee],A instanceof Ce?A:null}var X="__closure_events_fn_"+(1e9*Math.random()>>>0);function ve(A){return typeof A=="function"?A:(A[X]||(A[X]=function(V){return A.handleEvent(V)}),A[X])}function Ie(){Fe.call(this),this.i=new Ce(this),this.M=this,this.F=null}v(Ie,Fe),Ie.prototype[Se]=!0,Ie.prototype.removeEventListener=function(A,V,W,J){tt(this,A,V,W,J)};function He(A,V){var W,J=A.F;if(J)for(W=[];J;J=J.F)W.push(J);if(A=A.M,J=V.type||V,typeof V=="string")V=new $e(V,A);else if(V instanceof $e)V.target=V.target||A;else{var ke=V;V=new $e(J,A),R(V,ke)}if(ke=!0,W)for(var ze=W.length-1;0<=ze;ze--){var mt=V.g=W[ze];ke=we(mt,J,!0,V)&&ke}if(mt=V.g=A,ke=we(mt,J,!0,V)&&ke,ke=we(mt,J,!1,V)&&ke,W)for(ze=0;ze<W.length;ze++)mt=V.g=W[ze],ke=we(mt,J,!1,V)&&ke}Ie.prototype.N=function(){if(Ie.aa.N.call(this),this.i){var A=this.i,V;for(V in A.g){for(var W=A.g[V],J=0;J<W.length;J++)Me(W[J]);delete A.g[V],A.h--}}this.F=null},Ie.prototype.K=function(A,V,W,J){return this.i.add(String(A),V,!1,W,J)},Ie.prototype.L=function(A,V,W,J){return this.i.add(String(A),V,!0,W,J)};function we(A,V,W,J){if(V=A.i.g[String(V)],!V)return!0;V=V.concat();for(var ke=!0,ze=0;ze<V.length;++ze){var mt=V[ze];if(mt&&!mt.da&&mt.capture==W){var Gn=mt.listener,hi=mt.ha||mt.src;mt.fa&&Te(A.i,mt),ke=Gn.call(hi,J)!==!1&&ke}}return ke&&!J.defaultPrevented}function pt(A,V,W){if(typeof A=="function")W&&(A=f(A,W));else if(A&&typeof A.handleEvent=="function")A=f(A.handleEvent,A);else throw Error("Invalid listener argument");return 2147483647<Number(V)?-1:o.setTimeout(A,V||0)}function lt(A){A.g=pt(()=>{A.g=null,A.i&&(A.i=!1,lt(A))},A.l);const V=A.h;A.h=null,A.m.apply(null,V)}class St extends Fe{constructor(V,W){super(),this.m=V,this.l=W,this.h=null,this.i=!1,this.g=null}j(V){this.h=arguments,this.g?this.i=!0:lt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bt(A){Fe.call(this),this.h=A,this.g={}}v(bt,Fe);var ut=[];function xt(A){F(A.g,function(V,W){this.g.hasOwnProperty(W)&&ee(V)},A),A.g={}}bt.prototype.N=function(){bt.aa.N.call(this),xt(this)},bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bt=o.JSON.stringify,ce=o.JSON.parse,Ne=class{stringify(A){return o.JSON.stringify(A,void 0)}parse(A){return o.JSON.parse(A,void 0)}};function ht(){}ht.prototype.h=null;function de(A){return A.h||(A.h=A.i())}function nt(){}var fe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ze(){$e.call(this,"d")}v(Ze,$e);function Qe(){$e.call(this,"c")}v(Qe,$e);var Oe={},dt=null;function vt(){return dt=dt||new Ie}Oe.La="serverreachability";function En(A){$e.call(this,Oe.La,A)}v(En,$e);function xn(A){const V=vt();He(V,new En(V))}Oe.STAT_EVENT="statevent";function Xr(A,V){$e.call(this,Oe.STAT_EVENT,A),this.stat=V}v(Xr,$e);function Zn(A){const V=vt();He(V,new Xr(V,A))}Oe.Ma="timingevent";function Cc(A,V){$e.call(this,Oe.Ma,A),this.size=V}v(Cc,$e);function Ia(A,V){if(typeof A!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){A()},V)}function no(){this.g=!0}no.prototype.xa=function(){this.g=!1};function Qi(A,V,W,J,ke,ze){A.info(function(){if(A.g)if(ze)for(var mt="",Gn=ze.split("&"),hi=0;hi<Gn.length;hi++){var zn=Gn[hi].split("=");if(1<zn.length){var ur=zn[0];zn=zn[1];var Wn=ur.split("_");mt=2<=Wn.length&&Wn[1]=="type"?mt+(ur+"="+zn+"&"):mt+(ur+"=redacted&")}}else mt=null;else mt=ze;return"XMLHTTP REQ ("+J+") [attempt "+ke+"]: "+V+`
`+W+`
`+mt})}function Wt(A,V,W,J,ke,ze,mt){A.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+ke+"]: "+V+`
`+W+`
`+ze+" "+mt})}function Vi(A,V,W,J){A.info(function(){return"XMLHTTP TEXT ("+V+"): "+Dl(A,W)+(J?" "+J:"")})}function Mc(A,V){A.info(function(){return"TIMEOUT: "+V})}no.prototype.info=function(){};function Dl(A,V){if(!A.g)return V;if(!V)return null;try{var W=JSON.parse(V);if(W){for(A=0;A<W.length;A++)if(Array.isArray(W[A])){var J=W[A];if(!(2>J.length)){var ke=J[1];if(Array.isArray(ke)&&!(1>ke.length)){var ze=ke[0];if(ze!="noop"&&ze!="stop"&&ze!="close")for(var mt=1;mt<ke.length;mt++)ke[mt]=""}}}}return Bt(W)}catch{return V}}var tl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ll={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ku;function Ms(){}v(Ms,ht),Ms.prototype.g=function(){return new XMLHttpRequest},Ms.prototype.i=function(){return{}},ku=new Ms;function Is(A,V,W,J){this.j=A,this.i=V,this.l=W,this.R=J||1,this.U=new bt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ic}function Ic(){this.i=null,this.g="",this.h=!1}var zd={},Pc={};function Q(A,V,W){A.L=1,A.v=Pi(fn(V)),A.m=W,A.P=!0,_e(A,null)}function _e(A,V){A.F=Date.now(),be(A),A.A=fn(A.v);var W=A.A,J=A.R;Array.isArray(J)||(J=[String(J)]),Hd(W.i,"t",J),A.C=0,W=A.j.J,A.h=new Ic,A.g=Fc(A.j,W?V:null,!A.m),0<A.O&&(A.M=new St(f(A.Y,A,A.g),A.O)),V=A.U,W=A.g,J=A.ca;var ke="readystatechange";Array.isArray(ke)||(ke&&(ut[0]=ke.toString()),ke=ut);for(var ze=0;ze<ke.length;ze++){var mt=Ke(W,ke[ze],J||V.handleEvent,!1,V.h||V);if(!mt)break;V.g[mt.key]=mt}V=A.H?N(A.H):{},A.m?(A.u||(A.u="POST"),V["Content-Type"]="application/x-www-form-urlencoded",A.g.ea(A.A,A.u,A.m,V)):(A.u="GET",A.g.ea(A.A,A.u,null,V)),xn(),Qi(A.i,A.u,A.A,A.l,A.R,A.m)}Is.prototype.ca=function(A){A=A.target;const V=this.M;V&&Fr(A)==3?V.j():this.Y(A)},Is.prototype.Y=function(A){try{if(A==this.g)e:{const Wn=Fr(this.g);var V=this.g.Ba();const Si=this.g.Z();if(!(3>Wn)&&(Wn!=3||this.g&&(this.h.h||this.g.oa()||Pu(this.g)))){this.J||Wn!=4||V==7||(V==8||0>=Si?xn(3):xn(2)),wt(this);var W=this.g.Z();this.X=W;t:if(Ue(this)){var J=Pu(this.g);A="";var ke=J.length,ze=Fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Et(this),Mt(this);var mt="";break t}this.h.i=new o.TextDecoder}for(V=0;V<ke;V++)this.h.h=!0,A+=this.h.i.decode(J[V],{stream:!(ze&&V==ke-1)});J.length=0,this.h.g+=A,this.C=0,mt=this.h.g}else mt=this.g.oa();if(this.o=W==200,Wt(this.i,this.u,this.A,this.l,this.R,Wn,W),this.o){if(this.T&&!this.K){t:{if(this.g){var Gn,hi=this.g;if((Gn=hi.g?hi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(Gn)){var zn=Gn;break t}}zn=null}if(W=zn)Vi(this.i,this.l,W,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yt(this,W);else{this.o=!1,this.s=3,Zn(12),Et(this),Mt(this);break e}}if(this.P){W=!0;let _n;for(;!this.J&&this.C<mt.length;)if(_n=Ve(this,mt),_n==Pc){Wn==4&&(this.s=4,Zn(14),W=!1),Vi(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==zd){this.s=4,Zn(15),Vi(this.i,this.l,mt,"[Invalid Chunk]"),W=!1;break}else Vi(this.i,this.l,_n,null),Yt(this,_n);if(Ue(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wn!=4||mt.length!=0||this.h.h||(this.s=1,Zn(16),W=!1),this.o=this.o&&W,!W)Vi(this.i,this.l,mt,"[Invalid Chunked Response]"),Et(this),Mt(this);else if(0<mt.length&&!this.W){this.W=!0;var ur=this.j;ur.g==this&&ur.ba&&!ur.M&&(ur.j.info("Great, no buffering proxy detected. Bytes received: "+mt.length),ts(ur),ur.M=!0,Zn(11))}}else Vi(this.i,this.l,mt,null),Yt(this,mt);Wn==4&&Et(this),this.o&&!this.J&&(Wn==4?Kd(this.j,this):(this.o=!1,be(this)))}else qd(this.g),W==400&&0<mt.indexOf("Unknown SID")?(this.s=3,Zn(12)):(this.s=0,Zn(13)),Et(this),Mt(this)}}}catch{}finally{}};function Ue(A){return A.g?A.u=="GET"&&A.L!=2&&A.j.Ca:!1}function Ve(A,V){var W=A.C,J=V.indexOf(`
`,W);return J==-1?Pc:(W=Number(V.substring(W,J)),isNaN(W)?zd:(J+=1,J+W>V.length?Pc:(V=V.slice(J,J+W),A.C=J+W,V)))}Is.prototype.cancel=function(){this.J=!0,Et(this)};function be(A){A.S=Date.now()+A.I,ft(A,A.I)}function ft(A,V){if(A.B!=null)throw Error("WatchDog timer not null");A.B=Ia(f(A.ba,A),V)}function wt(A){A.B&&(o.clearTimeout(A.B),A.B=null)}Is.prototype.ba=function(){this.B=null;const A=Date.now();0<=A-this.S?(Mc(this.i,this.A),this.L!=2&&(xn(),Zn(17)),Et(this),this.s=2,Mt(this)):ft(this,this.S-A)};function Mt(A){A.j.G==0||A.J||Kd(A.j,A)}function Et(A){wt(A);var V=A.M;V&&typeof V.ma=="function"&&V.ma(),A.M=null,xt(A.U),A.g&&(V=A.g,A.g=null,V.abort(),V.ma())}function Yt(A,V){try{var W=A.j;if(W.G!=0&&(W.g==A||Ft(W.h,A))){if(!A.K&&Ft(W.h,A)&&W.G==3){try{var J=W.Da.g.parse(V)}catch{J=null}if(Array.isArray(J)&&J.length==3){var ke=J;if(ke[0]==0){e:if(!W.u){if(W.g)if(W.g.F+3e3<A.F)Bl(W),Lc(W);else break e;Oc(W),Zn(18)}}else W.za=ke[1],0<W.za-W.T&&37500>ke[2]&&W.F&&W.v==0&&!W.C&&(W.C=Ia(f(W.Za,W),6e3));if(1>=Ht(W.h)&&W.ca){try{W.ca()}catch{}W.ca=void 0}}else rl(W,11)}else if((A.K||W.g==A)&&Bl(W),!S(V))for(ke=W.Da.g.parse(V),V=0;V<ke.length;V++){let zn=ke[V];if(W.T=zn[0],zn=zn[1],W.G==2)if(zn[0]=="c"){W.K=zn[1],W.ia=zn[2];const ur=zn[3];ur!=null&&(W.la=ur,W.j.info("VER="+W.la));const Wn=zn[4];Wn!=null&&(W.Aa=Wn,W.j.info("SVER="+W.Aa));const Si=zn[5];Si!=null&&typeof Si=="number"&&0<Si&&(J=1.5*Si,W.L=J,W.j.info("backChannelRequestTimeoutMs_="+J)),J=W;const _n=A.g;if(_n){const il=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(il){var ze=J.h;ze.g||il.indexOf("spdy")==-1&&il.indexOf("quic")==-1&&il.indexOf("h2")==-1||(ze.j=ze.l,ze.g=new Set,ze.h&&(Pt(ze,ze.h),ze.h=null))}if(J.D){const Ei=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;Ei&&(J.ya=Ei,qt(J.I,J.D,Ei))}}W.G=3,W.l&&W.l.ua(),W.ba&&(W.R=Date.now()-A.F,W.j.info("Handshake RTT: "+W.R+"ms")),J=W;var mt=A;if(J.qa=Lu(J,J.J?J.ia:null,J.W),mt.K){dn(J.h,mt);var Gn=mt,hi=J.L;hi&&(Gn.I=hi),Gn.B&&(wt(Gn),be(Gn)),J.g=mt}else Ns(J);0<W.i.length&&nl(W)}else zn[0]!="stop"&&zn[0]!="close"||rl(W,7);else W.G==3&&(zn[0]=="stop"||zn[0]=="close"?zn[0]=="stop"?rl(W,7):Nu(W):zn[0]!="noop"&&W.l&&W.l.ta(zn),W.v=0)}}xn(4)}catch{}}var $t=class{constructor(A,V){this.g=A,this.map=V}};function Lt(A){this.l=A||10,o.PerformanceNavigationTiming?(A=o.performance.getEntriesByType("navigation"),A=0<A.length&&(A[0].nextHopProtocol=="hq"||A[0].nextHopProtocol=="h2")):A=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=A?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ot(A){return A.h?!0:A.g?A.g.size>=A.j:!1}function Ht(A){return A.h?1:A.g?A.g.size:0}function Ft(A,V){return A.h?A.h==V:A.g?A.g.has(V):!1}function Pt(A,V){A.g?A.g.add(V):A.h=V}function dn(A,V){A.h&&A.h==V?A.h=null:A.g&&A.g.has(V)&&A.g.delete(V)}Lt.prototype.cancel=function(){if(this.i=Nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const A of this.g.values())A.cancel();this.g.clear()}};function Nt(A){if(A.h!=null)return A.i.concat(A.h.D);if(A.g!=null&&A.g.size!==0){let V=A.i;for(const W of A.g.values())V=V.concat(W.D);return V}return _(A.i)}function On(A){if(A.V&&typeof A.V=="function")return A.V();if(typeof Map<"u"&&A instanceof Map||typeof Set<"u"&&A instanceof Set)return Array.from(A.values());if(typeof A=="string")return A.split("");if(l(A)){for(var V=[],W=A.length,J=0;J<W;J++)V.push(A[J]);return V}V=[],W=0;for(J in A)V[W++]=A[J];return V}function tn(A){if(A.na&&typeof A.na=="function")return A.na();if(!A.V||typeof A.V!="function"){if(typeof Map<"u"&&A instanceof Map)return Array.from(A.keys());if(!(typeof Set<"u"&&A instanceof Set)){if(l(A)||typeof A=="string"){var V=[];A=A.length;for(var W=0;W<A;W++)V.push(W);return V}V=[],W=0;for(const J in A)V[W++]=J;return V}}}function Xt(A,V){if(A.forEach&&typeof A.forEach=="function")A.forEach(V,void 0);else if(l(A)||typeof A=="string")Array.prototype.forEach.call(A,V,void 0);else for(var W=tn(A),J=On(A),ke=J.length,ze=0;ze<ke;ze++)V.call(void 0,J[ze],W&&W[ze],A)}var er=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bi(A,V){if(A){A=A.split("&");for(var W=0;W<A.length;W++){var J=A[W].indexOf("="),ke=null;if(0<=J){var ze=A[W].substring(0,J);ke=A[W].substring(J+1)}else ze=A[W];V(ze,ke?decodeURIComponent(ke.replace(/\+/g," ")):"")}}}function ci(A){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,A instanceof ci){this.h=A.h,pr(this,A.j),this.o=A.o,this.g=A.g,ai(this,A.s),this.l=A.l;var V=A.i,W=new Fl;W.i=V.i,V.g&&(W.g=new Map(V.g),W.h=V.h),Pr(this,W),this.m=A.m}else A&&(V=String(A).match(er))?(this.h=!1,pr(this,V[1]||"",!0),this.o=si(V[2]||""),this.g=si(V[3]||"",!0),ai(this,V[4]),this.l=si(V[5]||"",!0),Pr(this,V[6]||"",!0),this.m=si(V[7]||"")):(this.h=!1,this.i=new Fl(null,this.h))}ci.prototype.toString=function(){var A=[],V=this.j;V&&A.push(Pa(V,Mu,!0),":");var W=this.g;return(W||V=="file")&&(A.push("//"),(V=this.o)&&A.push(Pa(V,Mu,!0),"@"),A.push(encodeURIComponent(String(W)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),W=this.s,W!=null&&A.push(":",String(W))),(W=this.l)&&(this.g&&W.charAt(0)!="/"&&A.push("/"),A.push(Pa(W,W.charAt(0)=="/"?Nc:Kf,!0))),(W=this.i.toString())&&A.push("?",W),(W=this.m)&&A.push("#",Pa(W,Ol)),A.join("")};function fn(A){return new ci(A)}function pr(A,V,W){A.j=W?si(V,!0):V,A.j&&(A.j=A.j.replace(/:$/,""))}function ai(A,V){if(V){if(V=Number(V),isNaN(V)||0>V)throw Error("Bad port number "+V);A.s=V}else A.s=null}function Pr(A,V,W){V instanceof Fl?(A.i=V,ro(A.i,A.h)):(W||(V=Pa(V,Iu)),A.i=new Fl(V,A.h))}function qt(A,V,W){A.i.set(V,W)}function Pi(A){return qt(A,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),A}function si(A,V){return A?V?decodeURI(A.replace(/%25/g,"%2525")):decodeURIComponent(A):""}function Pa(A,V,W){return typeof A=="string"?(A=encodeURI(A).replace(V,Cu),W&&(A=A.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A):null}function Cu(A){return A=A.charCodeAt(0),"%"+(A>>4&15).toString(16)+(A&15).toString(16)}var Mu=/[#\/\?@]/g,Kf=/[#\?:]/g,Nc=/[#\?]/g,Iu=/[#\?@]/g,Ol=/#/g;function Fl(A,V){this.h=this.g=null,this.i=A||null,this.j=!!V}function Na(A){A.g||(A.g=new Map,A.h=0,A.i&&bi(A.i,function(V,W){A.add(decodeURIComponent(V.replace(/\+/g," ")),W)}))}n=Fl.prototype,n.add=function(A,V){Na(this),this.i=null,A=an(this,A);var W=this.g.get(A);return W||this.g.set(A,W=[]),W.push(V),this.h+=1,this};function Vn(A,V){Na(A),V=an(A,V),A.g.has(V)&&(A.i=null,A.h-=A.g.get(V).length,A.g.delete(V))}function Rc(A,V){return Na(A),V=an(A,V),A.g.has(V)}n.forEach=function(A,V){Na(this),this.g.forEach(function(W,J){W.forEach(function(ke){A.call(V,ke,J,this)},this)},this)},n.na=function(){Na(this);const A=Array.from(this.g.values()),V=Array.from(this.g.keys()),W=[];for(let J=0;J<V.length;J++){const ke=A[J];for(let ze=0;ze<ke.length;ze++)W.push(V[J])}return W},n.V=function(A){Na(this);let V=[];if(typeof A=="string")Rc(this,A)&&(V=V.concat(this.g.get(an(this,A))));else{A=Array.from(this.g.values());for(let W=0;W<A.length;W++)V=V.concat(A[W])}return V},n.set=function(A,V){return Na(this),this.i=null,A=an(this,A),Rc(this,A)&&(this.h-=this.g.get(A).length),this.g.set(A,[V]),this.h+=1,this},n.get=function(A,V){return A?(A=this.V(A),0<A.length?String(A[0]):V):V};function Hd(A,V,W){Vn(A,V),0<W.length&&(A.i=null,A.g.set(an(A,V),_(W)),A.h+=W.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const A=[],V=Array.from(this.g.keys());for(var W=0;W<V.length;W++){var J=V[W];const ze=encodeURIComponent(String(J)),mt=this.V(J);for(J=0;J<mt.length;J++){var ke=ze;mt[J]!==""&&(ke+="="+encodeURIComponent(String(mt[J]))),A.push(ke)}}return this.i=A.join("&")};function an(A,V){return V=String(V),A.j&&(V=V.toLowerCase()),V}function ro(A,V){V&&!A.j&&(Na(A),A.i=null,A.g.forEach(function(W,J){var ke=J.toLowerCase();J!=ke&&(Vn(this,J),Hd(this,ke,W))},A)),A.j=V}function yr(A,V){const W=new no;if(o.Image){const J=new Image;J.onload=m(Ka,W,"TestLoadImage: loaded",!0,V,J),J.onerror=m(Ka,W,"TestLoadImage: error",!1,V,J),J.onabort=m(Ka,W,"TestLoadImage: abort",!1,V,J),J.ontimeout=m(Ka,W,"TestLoadImage: timeout",!1,V,J),o.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=A}else V(!1)}function di(A,V){const W=new no,J=new AbortController,ke=setTimeout(()=>{J.abort(),Ka(W,"TestPingServer: timeout",!1,V)},1e4);fetch(A,{signal:J.signal}).then(ze=>{clearTimeout(ke),ze.ok?Ka(W,"TestPingServer: ok",!0,V):Ka(W,"TestPingServer: server error",!1,V)}).catch(()=>{clearTimeout(ke),Ka(W,"TestPingServer: error",!1,V)})}function Ka(A,V,W,J,ke){try{ke&&(ke.onload=null,ke.onerror=null,ke.onabort=null,ke.ontimeout=null),J(W)}catch{}}function Yf(){this.g=new Ne}function Dc(A,V,W){const J=W||"";try{Xt(A,function(ke,ze){let mt=ke;u(ke)&&(mt=Bt(ke)),V.push(J+ze+"="+encodeURIComponent(mt))})}catch(ke){throw V.push(J+"type="+encodeURIComponent("_badmap")),ke}}function io(A){this.l=A.Ub||null,this.j=A.eb||!1}v(io,ht),io.prototype.g=function(){return new No(this.l,this.j)},io.prototype.i=function(A){return function(){return A}}({});function No(A,V){Ie.call(this),this.D=A,this.o=V,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(No,Ie),n=No.prototype,n.open=function(A,V){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=A,this.A=V,this.readyState=1,Ps(this)},n.send=function(A){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const V={headers:this.u,method:this.B,credentials:this.m,cache:void 0};A&&(V.body=A),(this.D||o).fetch(new Request(this.A,V)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Kr(this)),this.readyState=0},n.Sa=function(A){if(this.g&&(this.l=A,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=A.headers,this.readyState=2,Ps(this)),this.g&&(this.readyState=3,Ps(this),this.g)))if(this.responseType==="arraybuffer")A.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in A){if(this.j=A.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ji(this)}else A.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ji(A){A.j.read().then(A.Pa.bind(A)).catch(A.ga.bind(A))}n.Pa=function(A){if(this.g){if(this.o&&A.value)this.response.push(A.value);else if(!this.o){var V=A.value?A.value:new Uint8Array(0);(V=this.v.decode(V,{stream:!A.done}))&&(this.response=this.responseText+=V)}A.done?Kr(this):Ps(this),this.readyState==3&&Ji(this)}},n.Ra=function(A){this.g&&(this.response=this.responseText=A,Kr(this))},n.Qa=function(A){this.g&&(this.response=A,Kr(this))},n.ga=function(){this.g&&Kr(this)};function Kr(A){A.readyState=4,A.l=null,A.j=null,A.v=null,Ps(A)}n.setRequestHeader=function(A,V){this.u.append(A,V)},n.getResponseHeader=function(A){return this.h&&this.h.get(A.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const A=[],V=this.h.entries();for(var W=V.next();!W.done;)W=W.value,A.push(W[0]+": "+W[1]),W=V.next();return A.join(`\r
`)};function Ps(A){A.onreadystatechange&&A.onreadystatechange.call(A)}Object.defineProperty(No.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(A){this.m=A?"include":"same-origin"}});function Ya(A){let V="";return F(A,function(W,J){V+=J,V+=":",V+=W,V+=`\r
`}),V}function Za(A,V,W){e:{for(J in W){var J=!1;break e}J=!0}J||(W=Ya(W),typeof A=="string"?W!=null&&encodeURIComponent(String(W)):qt(A,V,W))}function Er(A){Ie.call(this),this.headers=new Map,this.o=A||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Er,Ie);var Gd=/^https?$/i,Wd=["POST","PUT"];n=Er.prototype,n.Ha=function(A){this.J=A},n.ea=function(A,V,W,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+A);V=V?V.toUpperCase():"GET",this.D=A,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ku.g(),this.v=this.o?de(this.o):de(ku),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(V,String(A),!0),this.B=!1}catch(ze){cg(this,ze);return}if(A=W||"",W=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var ke in J)W.set(ke,J[ke]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const ze of J.keys())W.set(ze,J.get(ze));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(W.keys()).find(ze=>ze.toLowerCase()=="content-type"),ke=o.FormData&&A instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Wd,V,void 0))||J||ke||W.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ze,mt]of W)this.g.setRequestHeader(ze,mt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ja(this),this.u=!0,this.g.send(A),this.u=!1}catch(ze){cg(this,ze)}};function cg(A,V){A.h=!1,A.g&&(A.j=!0,A.g.abort(),A.j=!1),A.l=V,A.m=5,Qa(A),jl(A)}function Qa(A){A.A||(A.A=!0,He(A,"complete"),He(A,"error"))}n.abort=function(A){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=A||7,He(this,"complete"),He(this,"abort"),jl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jl(this,!0)),Er.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Fn(this):this.bb())},n.bb=function(){Fn(this)};function Fn(A){if(A.h&&typeof s<"u"&&(!A.v[1]||Fr(A)!=4||A.Z()!=2)){if(A.u&&Fr(A)==4)pt(A.Ea,0,A);else if(He(A,"readystatechange"),Fr(A)==4){A.h=!1;try{const mt=A.Z();e:switch(mt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var V=!0;break e;default:V=!1}var W;if(!(W=V)){var J;if(J=mt===0){var ke=String(A.D).match(er)[1]||null;!ke&&o.self&&o.self.location&&(ke=o.self.location.protocol.slice(0,-1)),J=!Gd.test(ke?ke.toLowerCase():"")}W=J}if(W)He(A,"complete"),He(A,"success");else{A.m=6;try{var ze=2<Fr(A)?A.g.statusText:""}catch{ze=""}A.l=ze+" ["+A.Z()+"]",Qa(A)}}finally{jl(A)}}}}function jl(A,V){if(A.g){Ja(A);const W=A.g,J=A.v[0]?()=>{}:null;A.g=null,A.v=null,V||He(A,"ready");try{W.onreadystatechange=J}catch{}}}function Ja(A){A.I&&(o.clearTimeout(A.I),A.I=null)}n.isActive=function(){return!!this.g};function Fr(A){return A.g?A.g.readyState:0}n.Z=function(){try{return 2<Fr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(A){if(this.g){var V=this.g.responseText;return A&&V.indexOf(A)==0&&(V=V.substring(A.length)),ce(V)}};function Pu(A){try{if(!A.g)return null;if("response"in A.g)return A.g.response;switch(A.H){case"":case"text":return A.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in A.g)return A.g.mozResponseArrayBuffer}return null}catch{return null}}function qd(A){const V={};A=(A.g&&2<=Fr(A)&&A.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<A.length;J++){if(S(A[J]))continue;var W=B(A[J]);const ke=W[0];if(W=W[1],typeof W!="string")continue;W=W.trim();const ze=V[ke]||[];V[ke]=ze,ze.push(W)}P(V,function(J){return J.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function es(A,V,W){return W&&W.internalChannelParams&&W.internalChannelParams[A]||V}function $d(A){this.Aa=0,this.i=[],this.j=new no,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=es("failFast",!1,A),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=es("baseRetryDelayMs",5e3,A),this.cb=es("retryDelaySeedMs",1e4,A),this.Wa=es("forwardChannelMaxRetries",2,A),this.wa=es("forwardChannelRequestTimeoutMs",2e4,A),this.pa=A&&A.xmlHttpFactory||void 0,this.Xa=A&&A.Tb||void 0,this.Ca=A&&A.useFetchStreams||!1,this.L=void 0,this.J=A&&A.supportsCrossDomainXhr||!1,this.K="",this.h=new Lt(A&&A.concurrentRequestLimit),this.Da=new Yf,this.P=A&&A.fastHandshake||!1,this.O=A&&A.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=A&&A.Rb||!1,A&&A.xa&&this.j.xa(),A&&A.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&A&&A.detectBufferingProxy||!1,this.ja=void 0,A&&A.longPollingTimeout&&0<A.longPollingTimeout&&(this.ja=A.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=$d.prototype,n.la=8,n.G=1,n.connect=function(A,V,W,J){Zn(0),this.W=A,this.H=V||{},W&&J!==void 0&&(this.H.OSID=W,this.H.OAID=J),this.F=this.X,this.I=Lu(this,null,this.W),nl(this)};function Nu(A){if(Xd(A),A.G==3){var V=A.U++,W=fn(A.I);if(qt(W,"SID",A.K),qt(W,"RID",V),qt(W,"TYPE","terminate"),va(A,W),V=new Is(A,A.j,V),V.L=2,V.v=Pi(fn(W)),W=!1,o.navigator&&o.navigator.sendBeacon)try{W=o.navigator.sendBeacon(V.v.toString(),"")}catch{}!W&&o.Image&&(new Image().src=V.v,W=!0),W||(V.g=Fc(V.j,null),V.g.ea(V.v)),V.F=Date.now(),be(V)}Zf(A)}function Lc(A){A.g&&(ts(A),A.g.cancel(),A.g=null)}function Xd(A){Lc(A),A.u&&(o.clearTimeout(A.u),A.u=null),Bl(A),A.h.cancel(),A.s&&(typeof A.s=="number"&&o.clearTimeout(A.s),A.s=null)}function nl(A){if(!Ot(A.h)&&!A.s){A.s=!0;var V=A.Ga;oe||se(),$||(oe(),$=!0),ue.add(V,A),A.B=0}}function Ru(A,V){return Ht(A.h)>=A.h.j-(A.s?1:0)?!1:A.s?(A.i=V.D.concat(A.i),!0):A.G==1||A.G==2||A.B>=(A.Va?0:A.Wa)?!1:(A.s=Ia(f(A.Ga,A,V),Du(A,A.B)),A.B++,!0)}n.Ga=function(A){if(this.s)if(this.s=null,this.G==1){if(!A){this.U=Math.floor(1e5*Math.random()),A=this.U++;const ke=new Is(this,this.j,A);let ze=this.o;if(this.S&&(ze?(ze=N(ze),R(ze,this.S)):ze=this.S),this.m!==null||this.O||(ke.H=ze,ze=null),this.P)e:{for(var V=0,W=0;W<this.i.length;W++){t:{var J=this.i[W];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(V+=J,4096<V){V=W;break e}if(V===4096||W===this.i.length-1){V=W+1;break e}}V=1e3}else V=1e3;V=ao(this,ke,V),W=fn(this.I),qt(W,"RID",A),qt(W,"CVER",22),this.D&&qt(W,"X-HTTP-Session-Id",this.D),va(this,W),ze&&(this.O?V="headers="+encodeURIComponent(String(Ya(ze)))+"&"+V:this.m&&Za(W,this.m,ze)),Pt(this.h,ke),this.Ua&&qt(W,"TYPE","init"),this.P?(qt(W,"$req",V),qt(W,"SID","null"),ke.T=!0,Q(ke,W,null)):Q(ke,W,V),this.G=2}}else this.G==3&&(A?Vr(this,A):this.i.length==0||Ot(this.h)||Vr(this))};function Vr(A,V){var W;V?W=V.l:W=A.U++;const J=fn(A.I);qt(J,"SID",A.K),qt(J,"RID",W),qt(J,"AID",A.T),va(A,J),A.m&&A.o&&Za(J,A.m,A.o),W=new Is(A,A.j,W,A.B+1),A.m===null&&(W.H=A.o),V&&(A.i=V.D.concat(A.i)),V=ao(A,W,1e3),W.I=Math.round(.5*A.wa)+Math.round(.5*A.wa*Math.random()),Pt(A.h,W),Q(W,J,V)}function va(A,V){A.H&&F(A.H,function(W,J){qt(V,J,W)}),A.l&&Xt({},function(W,J){qt(V,J,W)})}function ao(A,V,W){W=Math.min(A.i.length,W);var J=A.l?f(A.l.Na,A.l,A):null;e:{var ke=A.i;let ze=-1;for(;;){const mt=["count="+W];ze==-1?0<W?(ze=ke[0].g,mt.push("ofs="+ze)):ze=0:mt.push("ofs="+ze);let Gn=!0;for(let hi=0;hi<W;hi++){let zn=ke[hi].g;const ur=ke[hi].map;if(zn-=ze,0>zn)ze=Math.max(0,ke[hi].g-100),Gn=!1;else try{Dc(ur,mt,"req"+zn+"_")}catch{J&&J(ur)}}if(Gn){J=mt.join("&");break e}}}return A=A.i.splice(0,W),V.D=A,J}function Ns(A){if(!A.g&&!A.u){A.Y=1;var V=A.Fa;oe||se(),$||(oe(),$=!0),ue.add(V,A),A.v=0}}function Oc(A){return A.g||A.u||3<=A.v?!1:(A.Y++,A.u=Ia(f(A.Fa,A),Du(A,A.v)),A.v++,!0)}n.Fa=function(){if(this.u=null,Rs(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var A=2*this.R;this.j.info("BP detection timer enabled: "+A),this.A=Ia(f(this.ab,this),A)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Zn(10),Lc(this),Rs(this))};function ts(A){A.A!=null&&(o.clearTimeout(A.A),A.A=null)}function Rs(A){A.g=new Is(A,A.j,"rpc",A.Y),A.m===null&&(A.g.H=A.o),A.g.O=0;var V=fn(A.qa);qt(V,"RID","rpc"),qt(V,"SID",A.K),qt(V,"AID",A.T),qt(V,"CI",A.F?"0":"1"),!A.F&&A.ja&&qt(V,"TO",A.ja),qt(V,"TYPE","xmlhttp"),va(A,V),A.m&&A.o&&Za(V,A.m,A.o),A.L&&(A.g.I=A.L);var W=A.g;A=A.ia,W.L=1,W.v=Pi(fn(V)),W.m=null,W.P=!0,_e(W,A)}n.Za=function(){this.C!=null&&(this.C=null,Lc(this),Oc(this),Zn(19))};function Bl(A){A.C!=null&&(o.clearTimeout(A.C),A.C=null)}function Kd(A,V){var W=null;if(A.g==V){Bl(A),ts(A),A.g=null;var J=2}else if(Ft(A.h,V))W=V.D,dn(A.h,V),J=1;else return;if(A.G!=0){if(V.o)if(J==1){W=V.m?V.m.length:0,V=Date.now()-V.F;var ke=A.B;J=vt(),He(J,new Cc(J,W)),nl(A)}else Ns(A);else if(ke=V.s,ke==3||ke==0&&0<V.X||!(J==1&&Ru(A,V)||J==2&&Oc(A)))switch(W&&0<W.length&&(V=A.h,V.i=V.i.concat(W)),ke){case 1:rl(A,5);break;case 4:rl(A,10);break;case 3:rl(A,6);break;default:rl(A,2)}}}function Du(A,V){let W=A.Ta+Math.floor(Math.random()*A.cb);return A.isActive()||(W*=2),W*V}function rl(A,V){if(A.j.info("Error code "+V),V==2){var W=f(A.fb,A),J=A.Xa;const ke=!J;J=new ci(J||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||pr(J,"https"),Pi(J),ke?yr(J.toString(),W):di(J.toString(),W)}else Zn(2);A.G=0,A.l&&A.l.sa(V),Zf(A),Xd(A)}n.fb=function(A){A?(this.j.info("Successfully pinged google.com"),Zn(2)):(this.j.info("Failed to ping google.com"),Zn(1))};function Zf(A){if(A.G=0,A.ka=[],A.l){const V=Nt(A.h);(V.length!=0||A.i.length!=0)&&(w(A.ka,V),w(A.ka,A.i),A.h.i.length=0,_(A.i),A.i.length=0),A.l.ra()}}function Lu(A,V,W){var J=W instanceof ci?fn(W):new ci(W);if(J.g!="")V&&(J.g=V+"."+J.g),ai(J,J.s);else{var ke=o.location;J=ke.protocol,V=V?V+"."+ke.hostname:ke.hostname,ke=+ke.port;var ze=new ci(null);J&&pr(ze,J),V&&(ze.g=V),ke&&ai(ze,ke),W&&(ze.l=W),J=ze}return W=A.D,V=A.ya,W&&V&&qt(J,W,V),qt(J,"VER",A.la),va(A,J),J}function Fc(A,V,W){if(V&&!A.J)throw Error("Can't create secondary domain capable XhrIo object.");return V=A.Ca&&!A.pa?new Er(new io({eb:W})):new Er(A.pa),V.Ha(A.J),V}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yd(){}n=Yd.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ou(){}Ou.prototype.g=function(A,V){return new Ni(A,V)};function Ni(A,V){Ie.call(this),this.g=new $d(V),this.l=A,this.h=V&&V.messageUrlParams||null,A=V&&V.messageHeaders||null,V&&V.clientProtocolHeaderRequired&&(A?A["X-Client-Protocol"]="webchannel":A={"X-Client-Protocol":"webchannel"}),this.g.o=A,A=V&&V.initMessageHeaders||null,V&&V.messageContentType&&(A?A["X-WebChannel-Content-Type"]=V.messageContentType:A={"X-WebChannel-Content-Type":V.messageContentType}),V&&V.va&&(A?A["X-WebChannel-Client-Profile"]=V.va:A={"X-WebChannel-Client-Profile":V.va}),this.g.S=A,(A=V&&V.Sb)&&!S(A)&&(this.g.m=A),this.v=V&&V.supportsCrossDomainXhr||!1,this.u=V&&V.sendRawJson||!1,(V=V&&V.httpSessionIdParam)&&!S(V)&&(this.g.D=V,A=this.h,A!==null&&V in A&&(A=this.h,V in A&&delete A[V])),this.j=new ea(this)}v(Ni,Ie),Ni.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ni.prototype.close=function(){Nu(this.g)},Ni.prototype.o=function(A){var V=this.g;if(typeof A=="string"){var W={};W.__data__=A,A=W}else this.u&&(W={},W.__data__=Bt(A),A=W);V.i.push(new $t(V.Ya++,A)),V.G==3&&nl(V)},Ni.prototype.N=function(){this.g.l=null,delete this.j,Nu(this.g),delete this.g,Ni.aa.N.call(this)};function so(A){Ze.call(this),A.__headers__&&(this.headers=A.__headers__,this.statusCode=A.__status__,delete A.__headers__,delete A.__status__);var V=A.__sm__;if(V){e:{for(const W in V){A=W;break e}A=void 0}(this.i=A)&&(A=this.i,V=V!==null&&A in V?V[A]:void 0),this.data=V}else this.data=A}v(so,Ze);function Ul(){Qe.call(this),this.status=1}v(Ul,Qe);function ea(A){this.g=A}v(ea,Yd),ea.prototype.ua=function(){He(this.g,"a")},ea.prototype.ta=function(A){He(this.g,new so(A))},ea.prototype.sa=function(A){He(this.g,new Ul)},ea.prototype.ra=function(){He(this.g,"b")},Ou.prototype.createWebChannel=Ou.prototype.g,Ni.prototype.send=Ni.prototype.o,Ni.prototype.open=Ni.prototype.m,Ni.prototype.close=Ni.prototype.close,oG=function(){return new Ou},sG=function(){return vt()},aG=Oe,QP={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tl.NO_ERROR=0,tl.TIMEOUT=8,tl.HTTP_ERROR=6,Y2=tl,Ll.COMPLETE="complete",iG=Ll,nt.EventType=fe,fe.OPEN="a",fe.CLOSE="b",fe.ERROR="c",fe.MESSAGE="d",Ie.prototype.listen=Ie.prototype.K,_x=nt,Er.prototype.listenOnce=Er.prototype.L,Er.prototype.getLastError=Er.prototype.Ka,Er.prototype.getLastErrorCode=Er.prototype.Ba,Er.prototype.getStatus=Er.prototype.Z,Er.prototype.getResponseJson=Er.prototype.Oa,Er.prototype.getResponseText=Er.prototype.oa,Er.prototype.send=Er.prototype.ea,Er.prototype.setWithCredentials=Er.prototype.Ha,rG=Er}).apply(typeof gb<"u"?gb:typeof self<"u"?self:typeof window<"u"?window:{});const hj="@firebase/firestore",fj="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vs=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};vs.UNAUTHENTICATED=new vs(null),vs.GOOGLE_CREDENTIALS=new vs("google-credentials-uid"),vs.FIRST_PARTY=new vs("first-party-uid"),vs.MOCK_USER=new vs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ey="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am=new HA("@firebase/firestore");function e0(){return Am.logLevel}function Rt(n,...e){if(Am.logLevel<=Kn.DEBUG){const t=e.map(aD);Am.debug(`Firestore (${ey}): ${n}`,...t)}}function kd(n,...e){if(Am.logLevel<=Kn.ERROR){const t=e.map(aD);Am.error(`Firestore (${ey}): ${n}`,...t)}}function Cd(n,...e){if(Am.logLevel<=Kn.WARN){const t=e.map(aD);Am.warn(`Firestore (${ey}): ${n}`,...t)}}function aD(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,lG(n,r,t)}function lG(n,e,t){let r=`FIRESTORE (${ey}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw kd(r),new Error(r)}function br(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||lG(e,i,r)}function An(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const it={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ct extends Eu{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uG{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vs.UNAUTHENTICATED))}shutdown(){}}class cue{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class due{constructor(e){this.t=e,this.currentUser=vs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){br(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let a=new pd;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new pd,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{Rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new pd)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(br(typeof r.accessToken=="string",31837,{l:r}),new uG(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return br(e===null||typeof e=="string",2055,{h:e}),new vs(e)}}class hue{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=vs.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fue{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new hue(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(vs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pue{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xl(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){br(this.o===void 0,3512);const r=a=>{a.error!=null&&Rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,Rt("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new pj(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(br(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new pj(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mue(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dG(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=mue(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function Un(n,e){return n<e?-1:n>e?1:0}function JP(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Un(r,i);{const a=dG(),s=gue(a.encode(mj(n,t)),a.encode(mj(e,t)));return s!==0?s:Un(r,i)}}t+=r>65535?2:1}return Un(n.length,e.length)}function mj(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function gue(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Un(n[t],e[t]);return Un(n.length,e.length)}function Sv(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj="__name__";class $u{constructor(e,t,r){t===void 0?t=0:t>e.length&&gn(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&gn(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return $u.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $u?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=$u.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return Un(e.length,t.length)}static compareSegments(e,t){const r=$u.isNumericId(e),i=$u.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?$u.extractNumericId(e).compare($u.extractNumericId(t)):JP(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ff.fromString(e.substring(4,e.length-2))}}class Gr extends $u{construct(e,t,r){return new Gr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ct(it.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Gr(t)}static emptyPath(){return new Gr([])}}const vue=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Aa extends $u{construct(e,t,r){return new Aa(e,t,r)}static isValidIdentifier(e){return vue.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Aa.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gj}static keyField(){return new Aa([gj])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ct(it.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Ct(it.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ct(it.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new Ct(it.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Aa(t)}static emptyPath(){return new Aa([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.path=e}static fromPath(e){return new en(Gr.fromString(e))}static fromName(e){return new en(Gr.fromString(e).popFirst(5))}static empty(){return new en(Gr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Gr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Gr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new en(new Gr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hG(n,e,t){if(!t)throw new Ct(it.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fG(n,e,t,r){if(e===!0&&r===!0)throw new Ct(it.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vj(n){if(!en.isDocumentKey(n))throw new Ct(it.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yj(n){if(en.isDocumentKey(n))throw new Ct(it.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function pG(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ZA(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":gn(12329,{type:typeof n})}function vc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ct(it.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ZA(n);throw new Ct(it.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function yue(n,e){if(e<=0)throw new Ct(it.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(n,e){const t={typeString:n};return e&&(t.value=e),t}function D_(n,e){if(!pG(n))throw new Ct(it.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new Ct(it.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=-62135596800,_j=1e6;class Ur{static now(){return Ur.fromMillis(Date.now())}static fromDate(e){return Ur.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*_j);return new Ur(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ct(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ct(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<xj)throw new Ct(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ct(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_j}_compareTo(e){return this.seconds===e.seconds?Un(this.nanoseconds,e.nanoseconds):Un(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ur._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(D_(e,Ur._jsonSchema))return new Ur(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xj;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ur._jsonSchemaVersion="firestore/timestamp/1.0",Ur._jsonSchema={type:Yi("string",Ur._jsonSchemaVersion),seconds:Yi("number"),nanoseconds:Yi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{static fromTimestamp(e){return new bn(e)}static min(){return new bn(new Ur(0,0))}static max(){return new bn(new Ur(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=-1;function xue(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=bn.fromTimestamp(r===1e9?new Ur(t+1,0):new Ur(t,r));return new Sf(i,en.empty(),e)}function _ue(n){return new Sf(n.readTime,n.key,O1)}class Sf{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Sf(bn.min(),en.empty(),O1)}static max(){return new Sf(bn.max(),en.empty(),O1)}}function wue(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=en.comparator(n.documentKey,e.documentKey),t!==0?t:Un(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bue="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sue{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ty(n){if(n.code!==it.FAILED_PRECONDITION||n.message!==bue)throw n;Rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ot((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ot?t:ot.resolve(t)}catch(t){return ot.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ot.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ot.reject(t)}static resolve(e){return new ot((t,r)=>{t(e)})}static reject(e){return new ot((t,r)=>{r(e)})}static waitFor(e){return new ot((t,r)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&t()},l=>r(l))}),s=!0,a===i&&t()})}static or(e){let t=ot.resolve(!1);for(const r of e)t=t.next(i=>i?ot.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ot((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let l=0;l<a;l++){const u=l;t(e[u]).next(c=>{s[u]=c,++o,o===a&&r(s)},c=>i(c))}})}static doWhile(e,t){return new ot((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}function Eue(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ny(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}QA.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=-1;function JA(n){return n==null}function ZS(n){return n===0&&1/n==-1/0}function Aue(n){return typeof n=="number"&&Number.isInteger(n)&&!ZS(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mG="";function Tue(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=wj(e)),e=kue(n.get(t),e);return wj(e)}function kue(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case mG:t+="";break;default:t+=a}}return t}function wj(n){return n+mG+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Km(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function gG(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,t){this.comparator=e,this.root=t||Ua.EMPTY}insert(e,t){return new wi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ua.BLACK,null,null))}remove(e){return new wi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ua.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vb(this.root,e,this.comparator,!1)}getReverseIterator(){return new vb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vb(this.root,e,this.comparator,!0)}}class vb{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ua{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Ua.RED,this.left=i??Ua.EMPTY,this.right=a??Ua.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ua(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ua.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Ua.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ua.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ua.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw gn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw gn(27949);return e+(this.isRed()?0:1)}}Ua.EMPTY=null,Ua.RED=!0,Ua.BLACK=!1;Ua.EMPTY=new class{constructor(){this.size=0}get key(){throw gn(57766)}get value(){throw gn(16141)}get color(){throw gn(16727)}get left(){throw gn(29726)}get right(){throw gn(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new Ua(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.comparator=e,this.data=new wi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sj(this.data.getIterator())}getIteratorFrom(e){return new Sj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof pa)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pa(this.comparator);return t.data=e,t}}class Sj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e){this.fields=e,e.sort(Aa.comparator)}static empty(){return new lu([])}unionWith(e){let t=new pa(Aa.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new lu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sv(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vG extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new vG("Invalid base64 string: "+a):a}}(e);return new Ma(t)}static fromUint8Array(e){const t=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(e);return new Ma(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Un(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ma.EMPTY_BYTE_STRING=new Ma("");const Cue=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ef(n){if(br(!!n,39018),typeof n=="string"){let e=0;const t=Cue.exec(n);if(br(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fi(n.seconds),nanos:Fi(n.nanos)}}function Fi(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Af(n){return typeof n=="string"?Ma.fromBase64String(n):Ma.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yG="server_timestamp",xG="__type__",_G="__previous_value__",wG="__local_write_time__";function oD(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[xG])===null||t===void 0?void 0:t.stringValue)===yG}function eT(n){const e=n.mapValue.fields[_G];return oD(e)?eT(e):e}function F1(n){const e=Ef(n.mapValue.fields[wG].timestampValue);return new Ur(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mue{constructor(e,t,r,i,a,s,o,l,u,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const QS="(default)";class Ev{constructor(e,t){this.projectId=e,this.database=t||QS}static empty(){return new Ev("","")}get isDefaultDatabase(){return this.database===QS}isEqual(e){return e instanceof Ev&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bG="__type__",Iue="__max__",yb={mapValue:{}},SG="__vector__",JS="value";function Tf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?oD(n)?4:Nue(n)?9007199254740991:Pue(n)?10:11:gn(28295,{value:n})}function yc(n,e){if(n===e)return!0;const t=Tf(n);if(t!==Tf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return F1(n).isEqual(F1(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=Ef(i.timestampValue),o=Ef(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return Af(i.bytesValue).isEqual(Af(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return Fi(i.geoPointValue.latitude)===Fi(a.geoPointValue.latitude)&&Fi(i.geoPointValue.longitude)===Fi(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Fi(i.integerValue)===Fi(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=Fi(i.doubleValue),o=Fi(a.doubleValue);return s===o?ZS(s)===ZS(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return Sv(n.arrayValue.values||[],e.arrayValue.values||[],yc);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(bj(s)!==bj(o))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(o[l]===void 0||!yc(s[l],o[l])))return!1;return!0}(n,e);default:return gn(52216,{left:n})}}function j1(n,e){return(n.values||[]).find(t=>yc(t,e))!==void 0}function Av(n,e){if(n===e)return 0;const t=Tf(n),r=Tf(e);if(t!==r)return Un(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Un(n.booleanValue,e.booleanValue);case 2:return function(a,s){const o=Fi(a.integerValue||a.doubleValue),l=Fi(s.integerValue||s.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(n,e);case 3:return Ej(n.timestampValue,e.timestampValue);case 4:return Ej(F1(n),F1(e));case 5:return JP(n.stringValue,e.stringValue);case 6:return function(a,s){const o=Af(a),l=Af(s);return o.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(a,s){const o=a.split("/"),l=s.split("/");for(let u=0;u<o.length&&u<l.length;u++){const c=Un(o[u],l[u]);if(c!==0)return c}return Un(o.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,s){const o=Un(Fi(a.latitude),Fi(s.latitude));return o!==0?o:Un(Fi(a.longitude),Fi(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Aj(n.arrayValue,e.arrayValue);case 10:return function(a,s){var o,l,u,c;const d=a.fields||{},f=s.fields||{},m=(o=d[JS])===null||o===void 0?void 0:o.arrayValue,v=(l=f[JS])===null||l===void 0?void 0:l.arrayValue,_=Un(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((c=v==null?void 0:v.values)===null||c===void 0?void 0:c.length)||0);return _!==0?_:Aj(m,v)}(n.mapValue,e.mapValue);case 11:return function(a,s){if(a===yb.mapValue&&s===yb.mapValue)return 0;if(a===yb.mapValue)return 1;if(s===yb.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),u=s.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const f=JP(l[d],c[d]);if(f!==0)return f;const m=Av(o[l[d]],u[c[d]]);if(m!==0)return m}return Un(l.length,c.length)}(n.mapValue,e.mapValue);default:throw gn(23264,{le:t})}}function Ej(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Un(n,e);const t=Ef(n),r=Ef(e),i=Un(t.seconds,r.seconds);return i!==0?i:Un(t.nanos,r.nanos)}function Aj(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=Av(t[i],r[i]);if(a)return a}return Un(t.length,r.length)}function Tv(n){return eN(n)}function eN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ef(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Af(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return en.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=eN(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${eN(t.fields[s])}`;return i+"}"}(n.mapValue):gn(61005,{value:n})}function Z2(n){switch(Tf(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=eT(n);return e?16+Z2(e):16;case 5:return 2*n.stringValue.length;case 6:return Af(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Z2(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Km(r.fields,(a,s)=>{i+=a.length+Z2(s)}),i}(n.mapValue);default:throw gn(13486,{value:n})}}function Tj(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function tN(n){return!!n&&"integerValue"in n}function lD(n){return!!n&&"arrayValue"in n}function kj(n){return!!n&&"nullValue"in n}function Cj(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Q2(n){return!!n&&"mapValue"in n}function Pue(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[bG])===null||t===void 0?void 0:t.stringValue)===SG}function qx(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Km(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=qx(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qx(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Nue(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Iue}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.value=e}static empty(){return new _l({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Q2(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qx(t)}setAll(e){let t=Aa.emptyPath(),r={},i=[];e.forEach((s,o)=>{if(!t.isImmediateParentOf(o)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=o.popLast()}s?r[o.lastSegment()]=qx(s):i.push(o.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Q2(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Q2(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Km(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new _l(qx(this.value))}}function EG(n){const e=[];return Km(n.fields,(t,r)=>{const i=new Aa([t]);if(Q2(r)){const a=EG(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new lu(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,t,r,i,a,s,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new xs(e,0,bn.min(),bn.min(),bn.min(),_l.empty(),0)}static newFoundDocument(e,t,r,i){return new xs(e,1,t,bn.min(),r,i,0)}static newNoDocument(e,t){return new xs(e,2,t,bn.min(),bn.min(),_l.empty(),0)}static newUnknownDocument(e,t){return new xs(e,3,t,bn.min(),bn.min(),_l.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(bn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_l.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_l.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,t){this.position=e,this.inclusive=t}}function Mj(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],s=n.position[i];if(a.field.isKeyField()?r=en.comparator(en.fromName(s.referenceValue),t.key):r=Av(s,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ij(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!yc(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,t="asc"){this.field=e,this.dir=t}}function Rue(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AG{}class Xi extends AG{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Lue(e,t,r):t==="array-contains"?new jue(e,r):t==="in"?new Bue(e,r):t==="not-in"?new Uue(e,r):t==="array-contains-any"?new Vue(e,r):new Xi(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Oue(e,r):new Fue(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Av(t,this.value)):t!==null&&Tf(this.value)===Tf(t)&&this.matchesComparison(Av(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return gn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xu extends AG{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new xu(e,t)}matches(e){return TG(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function TG(n){return n.op==="and"}function kG(n){return Due(n)&&TG(n)}function Due(n){for(const e of n.filters)if(e instanceof xu)return!1;return!0}function nN(n){if(n instanceof Xi)return n.field.canonicalString()+n.op.toString()+Tv(n.value);if(kG(n))return n.filters.map(e=>nN(e)).join(",");{const e=n.filters.map(t=>nN(t)).join(",");return`${n.op}(${e})`}}function CG(n,e){return n instanceof Xi?function(r,i){return i instanceof Xi&&r.op===i.op&&r.field.isEqual(i.field)&&yc(r.value,i.value)}(n,e):n instanceof xu?function(r,i){return i instanceof xu&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,s,o)=>a&&CG(s,i.filters[o]),!0):!1}(n,e):void gn(19439)}function MG(n){return n instanceof Xi?function(t){return`${t.field.canonicalString()} ${t.op} ${Tv(t.value)}`}(n):n instanceof xu?function(t){return t.op.toString()+" {"+t.getFilters().map(MG).join(" ,")+"}"}(n):"Filter"}class Lue extends Xi{constructor(e,t,r){super(e,t,r),this.key=en.fromName(r.referenceValue)}matches(e){const t=en.comparator(e.key,this.key);return this.matchesComparison(t)}}class Oue extends Xi{constructor(e,t){super(e,"in",t),this.keys=IG("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Fue extends Xi{constructor(e,t){super(e,"not-in",t),this.keys=IG("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function IG(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>en.fromName(r.referenceValue))}class jue extends Xi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lD(t)&&j1(t.arrayValue,this.value)}}class Bue extends Xi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&j1(this.value.arrayValue,t)}}class Uue extends Xi{constructor(e,t){super(e,"not-in",t)}matches(e){if(j1(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!j1(this.value.arrayValue,t)}}class Vue extends Xi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>j1(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zue{constructor(e,t=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Pe=null}}function Pj(n,e=null,t=[],r=[],i=null,a=null,s=null){return new zue(n,e,t,r,i,a,s)}function uD(n){const e=An(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>nN(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),JA(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Tv(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Tv(r)).join(",")),e.Pe=t}return e.Pe}function cD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Rue(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CG(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ij(n.startAt,e.startAt)&&Ij(n.endAt,e.endAt)}function rN(n){return en.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,t=null,r=[],i=[],a=null,s="F",o=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Hue(n,e,t,r,i,a,s,o){return new ry(n,e,t,r,i,a,s,o)}function dD(n){return new ry(n)}function Nj(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function PG(n){return n.collectionGroup!==null}function $x(n){const e=An(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new pa(Aa.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new B1(a,r))}),t.has(Aa.keyField().canonicalString())||e.Te.push(new B1(Aa.keyField(),r))}return e.Te}function uc(n){const e=An(n);return e.Ie||(e.Ie=Gue(e,$x(n))),e.Ie}function Gue(n,e){if(n.limitType==="F")return Pj(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new B1(i.field,a)});const t=n.endAt?new eE(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new eE(n.startAt.position,n.startAt.inclusive):null;return Pj(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function iN(n,e){const t=n.filters.concat([e]);return new ry(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function tE(n,e,t){return new ry(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function tT(n,e){return cD(uc(n),uc(e))&&n.limitType===e.limitType}function NG(n){return`${uD(uc(n))}|lt:${n.limitType}`}function t0(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>MG(i)).join(", ")}]`),JA(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Tv(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Tv(i)).join(",")),`Target(${r})`}(uc(n))}; limitType=${n.limitType})`}function nT(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):en.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of $x(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,o,l){const u=Mj(s,o,l);return s.inclusive?u<=0:u<0}(r.startAt,$x(r),i)||r.endAt&&!function(s,o,l){const u=Mj(s,o,l);return s.inclusive?u>=0:u>0}(r.endAt,$x(r),i))}(n,e)}function Wue(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function RG(n){return(e,t)=>{let r=!1;for(const i of $x(n)){const a=que(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function que(n,e,t){const r=n.field.isKeyField()?en.comparator(e.key,t.key):function(a,s,o){const l=s.data.field(a),u=o.data.field(a);return l!==null&&u!==null?Av(l,u):gn(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return gn(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Km(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return gG(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ue=new wi(en.comparator);function Md(){return $ue}const DG=new wi(en.comparator);function wx(...n){let e=DG;for(const t of n)e=e.insert(t.key,t);return e}function LG(n){let e=DG;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function qp(){return Xx()}function OG(){return Xx()}function Xx(){return new Ym(n=>n.toString(),(n,e)=>n.isEqual(e))}const Xue=new wi(en.comparator),Kue=new pa(en.comparator);function Yn(...n){let e=Kue;for(const t of n)e=e.add(t);return e}const Yue=new pa(Un);function Zue(){return Yue}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ZS(e)?"-0":e}}function FG(n){return{integerValue:""+n}}function Que(n,e){return Aue(e)?FG(e):hD(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(){this._=void 0}}function Jue(n,e,t){return n instanceof U1?function(i,a){const s={fields:{[xG]:{stringValue:yG},[wG]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&oD(a)&&(a=eT(a)),a&&(s.fields[_G]=a),{mapValue:s}}(t,e):n instanceof V1?BG(n,e):n instanceof z1?UG(n,e):function(i,a){const s=jG(i,a),o=Rj(s)+Rj(i.Ee);return tN(s)&&tN(i.Ee)?FG(o):hD(i.serializer,o)}(n,e)}function ece(n,e,t){return n instanceof V1?BG(n,e):n instanceof z1?UG(n,e):t}function jG(n,e){return n instanceof nE?function(r){return tN(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class U1 extends rT{}class V1 extends rT{constructor(e){super(),this.elements=e}}function BG(n,e){const t=VG(e);for(const r of n.elements)t.some(i=>yc(i,r))||t.push(r);return{arrayValue:{values:t}}}class z1 extends rT{constructor(e){super(),this.elements=e}}function UG(n,e){let t=VG(e);for(const r of n.elements)t=t.filter(i=>!yc(i,r));return{arrayValue:{values:t}}}class nE extends rT{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Rj(n){return Fi(n.integerValue||n.doubleValue)}function VG(n){return lD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tce{constructor(e,t){this.field=e,this.transform=t}}function nce(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof V1&&i instanceof V1||r instanceof z1&&i instanceof z1?Sv(r.elements,i.elements,yc):r instanceof nE&&i instanceof nE?yc(r.Ee,i.Ee):r instanceof U1&&i instanceof U1}(n.transform,e.transform)}class rce{constructor(e,t){this.version=e,this.transformResults=t}}class fu{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fu}static exists(e){return new fu(void 0,e)}static updateTime(e){return new fu(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function J2(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}let iT=class{};function zG(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new fD(n.key,fu.none()):new L_(n.key,n.data,fu.none());{const t=n.data,r=_l.empty();let i=new pa(Aa.comparator);for(let a of e.fields)if(!i.has(a)){let s=t.field(a);s===null&&a.length>1&&(a=a.popLast(),s=t.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Zm(n.key,r,new lu(i.toArray()),fu.none())}}function ice(n,e,t){n instanceof L_?function(i,a,s){const o=i.value.clone(),l=Lj(i.fieldTransforms,a,s.transformResults);o.setAll(l),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof Zm?function(i,a,s){if(!J2(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=Lj(i.fieldTransforms,a,s.transformResults),l=a.data;l.setAll(HG(i)),l.setAll(o),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Kx(n,e,t,r){return n instanceof L_?function(a,s,o,l){if(!J2(a.precondition,s))return o;const u=a.value.clone(),c=Oj(a.fieldTransforms,l,s);return u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Zm?function(a,s,o,l){if(!J2(a.precondition,s))return o;const u=Oj(a.fieldTransforms,l,s),c=s.data;return c.setAll(HG(a)),c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(a,s,o){return J2(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(n,e,t)}function ace(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=jG(r.transform,i||null);a!=null&&(t===null&&(t=_l.empty()),t.set(r.field,a))}return t||null}function Dj(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Sv(r,i,(a,s)=>nce(a,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class L_ extends iT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Zm extends iT{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function HG(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Lj(n,e,t){const r=new Map;br(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){const a=n[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,ece(s,o,t[i]))}return r}function Oj(n,e,t){const r=new Map;for(const i of n){const a=i.transform,s=t.data.field(i.field);r.set(i.field,Jue(a,s,e))}return r}class fD extends iT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sce extends iT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oce{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&ice(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Kx(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Kx(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=OG();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=t.has(i.key)?null:o;const l=zG(s,o);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(bn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yn())}isEqual(e){return this.batchId===e.batchId&&Sv(this.mutations,e.mutations,(t,r)=>Dj(t,r))&&Sv(this.baseMutations,e.baseMutations,(t,r)=>Dj(t,r))}}class pD{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){br(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return Xue}();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new pD(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lce=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uce{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qi,tr;function cce(n){switch(n){case it.OK:return gn(64938);case it.CANCELLED:case it.UNKNOWN:case it.DEADLINE_EXCEEDED:case it.RESOURCE_EXHAUSTED:case it.INTERNAL:case it.UNAVAILABLE:case it.UNAUTHENTICATED:return!1;case it.INVALID_ARGUMENT:case it.NOT_FOUND:case it.ALREADY_EXISTS:case it.PERMISSION_DENIED:case it.FAILED_PRECONDITION:case it.ABORTED:case it.OUT_OF_RANGE:case it.UNIMPLEMENTED:case it.DATA_LOSS:return!0;default:return gn(15467,{code:n})}}function GG(n){if(n===void 0)return kd("GRPC error has no .code"),it.UNKNOWN;switch(n){case qi.OK:return it.OK;case qi.CANCELLED:return it.CANCELLED;case qi.UNKNOWN:return it.UNKNOWN;case qi.DEADLINE_EXCEEDED:return it.DEADLINE_EXCEEDED;case qi.RESOURCE_EXHAUSTED:return it.RESOURCE_EXHAUSTED;case qi.INTERNAL:return it.INTERNAL;case qi.UNAVAILABLE:return it.UNAVAILABLE;case qi.UNAUTHENTICATED:return it.UNAUTHENTICATED;case qi.INVALID_ARGUMENT:return it.INVALID_ARGUMENT;case qi.NOT_FOUND:return it.NOT_FOUND;case qi.ALREADY_EXISTS:return it.ALREADY_EXISTS;case qi.PERMISSION_DENIED:return it.PERMISSION_DENIED;case qi.FAILED_PRECONDITION:return it.FAILED_PRECONDITION;case qi.ABORTED:return it.ABORTED;case qi.OUT_OF_RANGE:return it.OUT_OF_RANGE;case qi.UNIMPLEMENTED:return it.UNIMPLEMENTED;case qi.DATA_LOSS:return it.DATA_LOSS;default:return gn(39323,{code:n})}}(tr=qi||(qi={}))[tr.OK=0]="OK",tr[tr.CANCELLED=1]="CANCELLED",tr[tr.UNKNOWN=2]="UNKNOWN",tr[tr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tr[tr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tr[tr.NOT_FOUND=5]="NOT_FOUND",tr[tr.ALREADY_EXISTS=6]="ALREADY_EXISTS",tr[tr.PERMISSION_DENIED=7]="PERMISSION_DENIED",tr[tr.UNAUTHENTICATED=16]="UNAUTHENTICATED",tr[tr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tr[tr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tr[tr.ABORTED=10]="ABORTED",tr[tr.OUT_OF_RANGE=11]="OUT_OF_RANGE",tr[tr.UNIMPLEMENTED=12]="UNIMPLEMENTED",tr[tr.INTERNAL=13]="INTERNAL",tr[tr.UNAVAILABLE=14]="UNAVAILABLE",tr[tr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dce=new ff([4294967295,4294967295],0);function Fj(n){const e=dG().encode(n),t=new nG;return t.update(e),new Uint8Array(t.digest())}function jj(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ff([t,r],0),new ff([i,a],0)]}class mD{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new bx(`Invalid padding: ${t}`);if(r<0)throw new bx(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bx(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new bx(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ff.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(ff.fromNumber(r)));return i.compare(dce)===1&&(i=new ff([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Fj(e),[r,i]=jj(t);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);if(!this.ye(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new mD(a,i,t);return r.forEach(o=>s.insert(o)),s}insert(e){if(this.fe===0)return;const t=Fj(e),[r,i]=jj(t);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);this.we(s)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class bx extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,O_.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new aT(bn.min(),i,new wi(Un),Md(),Yn())}}class O_{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new O_(r,t,Yn(),Yn(),Yn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}}class WG{constructor(e,t){this.targetId=e,this.De=t}}class qG{constructor(e,t,r=Ma.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Bj{constructor(){this.ve=0,this.Ce=Uj(),this.Fe=Ma.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Yn(),t=Yn(),r=Yn();return this.Ce.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:gn(38017,{changeType:a})}}),new O_(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Uj()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,br(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class hce{constructor(e){this.We=e,this.Ge=new Map,this.ze=Md(),this.je=xb(),this.Je=xb(),this.He=new wi(Un)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:gn(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){const t=e.targetId,r=e.De.count,i=this.st(t);if(i){const a=i.target;if(rN(a))if(r===0){const s=new en(a.path);this.Xe(t,s,xs.newNoDocument(s,bn.min()))}else br(r===1,20013,{expectedCount:r});else{const s=this.ot(t);if(s!==r){const o=this._t(e),l=o?this.ut(o,e,s):1;if(l!==0){this.rt(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let s,o;try{s=Af(r).toUint8Array()}catch(l){if(l instanceof vG)return Cd("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new mD(s,i,a)}catch(l){return Cd(l instanceof bx?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.fe===0?null:o}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const s=this.We.lt(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.Xe(t,a,null),i++)}),i}Pt(e){const t=new Map;this.Ge.forEach((a,s)=>{const o=this.st(s);if(o){if(a.current&&rN(o.target)){const l=new en(o.target.path);this.Tt(l).has(s)||this.It(s,l)||this.Xe(s,l,xs.newNoDocument(l,e))}a.Ne&&(t.set(s,a.Le()),a.ke())}});let r=Yn();this.Je.forEach((a,s)=>{let o=!0;s.forEachWhile(l=>{const u=this.st(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(a))}),this.ze.forEach((a,s)=>s.setReadTime(e));const i=new aT(e,t,this.He,this.ze,r);return this.ze=Md(),this.je=xb(),this.Je=xb(),this.He=new wi(Un),i}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Bj,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new pa(Un),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new pa(Un),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Rt("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Bj),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function xb(){return new wi(en.comparator)}function Uj(){return new wi(en.comparator)}const fce={asc:"ASCENDING",desc:"DESCENDING"},pce={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mce={and:"AND",or:"OR"};class gce{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function aN(n,e){return n.useProto3Json||JA(e)?e:{value:e}}function rE(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $G(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function vce(n,e){return rE(n,e.toTimestamp())}function cc(n){return br(!!n,49232),bn.fromTimestamp(function(t){const r=Ef(t);return new Ur(r.seconds,r.nanos)}(n))}function gD(n,e){return sN(n,e).canonicalString()}function sN(n,e){const t=function(i){return new Gr(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function XG(n){const e=Gr.fromString(n);return br(JG(e),10190,{key:e.toString()}),e}function oN(n,e){return gD(n.databaseId,e.path)}function KC(n,e){const t=XG(e);if(t.get(1)!==n.databaseId.projectId)throw new Ct(it.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ct(it.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new en(YG(t))}function KG(n,e){return gD(n.databaseId,e)}function yce(n){const e=XG(n);return e.length===4?Gr.emptyPath():YG(e)}function lN(n){return new Gr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function YG(n){return br(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Vj(n,e,t){return{name:oN(n,e),fields:t.value.mapValue.fields}}function xce(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:gn(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(u,c){return u.useProto3Json?(br(c===void 0||typeof c=="string",58123),Ma.fromBase64String(c||"")):(br(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),Ma.fromUint8Array(c||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(u){const c=u.code===void 0?it.UNKNOWN:GG(u.code);return new Ct(c,u.message||"")}(s);t=new qG(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=KC(n,r.document.name),a=cc(r.document.updateTime),s=r.document.createTime?cc(r.document.createTime):bn.min(),o=new _l({mapValue:{fields:r.document.fields}}),l=xs.newFoundDocument(i,a,s,o),u=r.targetIds||[],c=r.removedTargetIds||[];t=new eS(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=KC(n,r.document),a=r.readTime?cc(r.readTime):bn.min(),s=xs.newNoDocument(i,a),o=r.removedTargetIds||[];t=new eS([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=KC(n,r.document),a=r.removedTargetIds||[];t=new eS([],a,i,null)}else{if(!("filter"in e))return gn(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new uce(i,a),o=r.targetId;t=new WG(o,s)}}return t}function _ce(n,e){let t;if(e instanceof L_)t={update:Vj(n,e.key,e.value)};else if(e instanceof fD)t={delete:oN(n,e.key)};else if(e instanceof Zm)t={update:Vj(n,e.key,e.data),updateMask:Mce(e.fieldMask)};else{if(!(e instanceof sce))return gn(16599,{Rt:e.type});t={verify:oN(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,s){const o=s.transform;if(o instanceof U1)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof V1)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof z1)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof nE)return{fieldPath:s.field.canonicalString(),increment:o.Ee};throw gn(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:vce(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:gn(27497)}(n,e.precondition)),t}function wce(n,e){return n&&n.length>0?(br(e!==void 0,14353),n.map(t=>function(i,a){let s=i.updateTime?cc(i.updateTime):cc(a);return s.isEqual(bn.min())&&(s=cc(a)),new rce(s,i.transformResults||[])}(t,e))):[]}function bce(n,e){return{documents:[KG(n,e.path)]}}function Sce(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=KG(n,i);const a=function(u){if(u.length!==0)return QG(xu.create(u,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const s=function(u){if(u.length!==0)return u.map(c=>function(f){return{field:n0(f.field),direction:Tce(f.dir)}}(c))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=aN(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:t,parent:i}}function Ece(n){let e=yce(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){br(r===1,65062);const c=t.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let a=[];t.where&&(a=function(d){const f=ZG(d);return f instanceof xu&&kG(f)?f.getFilters():[f]}(t.where));let s=[];t.orderBy&&(s=function(d){return d.map(f=>function(v){return new B1(r0(v.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(t.orderBy));let o=null;t.limit&&(o=function(d){let f;return f=typeof d=="object"?d.value:d,JA(f)?null:f}(t.limit));let l=null;t.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new eE(m,f)}(t.startAt));let u=null;return t.endAt&&(u=function(d){const f=!d.before,m=d.values||[];return new eE(m,f)}(t.endAt)),Hue(e,i,s,a,o,"F",l,u)}function Ace(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gn(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ZG(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=r0(t.unaryFilter.field);return Xi.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=r0(t.unaryFilter.field);return Xi.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=r0(t.unaryFilter.field);return Xi.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=r0(t.unaryFilter.field);return Xi.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return gn(61313);default:return gn(60726)}}(n):n.fieldFilter!==void 0?function(t){return Xi.create(r0(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return gn(58110);default:return gn(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return xu.create(t.compositeFilter.filters.map(r=>ZG(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return gn(1026)}}(t.compositeFilter.op))}(n):gn(30097,{filter:n})}function Tce(n){return fce[n]}function kce(n){return pce[n]}function Cce(n){return mce[n]}function n0(n){return{fieldPath:n.canonicalString()}}function r0(n){return Aa.fromServerFormat(n.fieldPath)}function QG(n){return n instanceof Xi?function(t){if(t.op==="=="){if(Cj(t.value))return{unaryFilter:{field:n0(t.field),op:"IS_NAN"}};if(kj(t.value))return{unaryFilter:{field:n0(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Cj(t.value))return{unaryFilter:{field:n0(t.field),op:"IS_NOT_NAN"}};if(kj(t.value))return{unaryFilter:{field:n0(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:n0(t.field),op:kce(t.op),value:t.value}}}(n):n instanceof xu?function(t){const r=t.getFilters().map(i=>QG(i));return r.length===1?r[0]:{compositeFilter:{op:Cce(t.op),filters:r}}}(n):gn(54877,{filter:n})}function Mce(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function JG(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t,r,i,a=bn.min(),s=bn.min(),o=Ma.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Zh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Zh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ice{constructor(e){this.gt=e}}function Pce(n){const e=Ece({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?tE(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nce{constructor(){this.Dn=new Rce}addToCollectionParentIndex(e,t){return this.Dn.add(t),ot.resolve()}getCollectionParents(e,t){return ot.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ot.resolve()}deleteFieldIndex(e,t){return ot.resolve()}deleteAllFieldIndexes(e){return ot.resolve()}createTargetIndexes(e,t){return ot.resolve()}getDocumentsMatchingTarget(e,t){return ot.resolve(null)}getIndexType(e,t){return ot.resolve(0)}getFieldIndexes(e,t){return ot.resolve([])}getNextCollectionGroupToUpdate(e){return ot.resolve(null)}getMinOffset(e,t){return ot.resolve(Sf.min())}getMinOffsetFromCollectionGroup(e,t){return ot.resolve(Sf.min())}updateCollectionGroup(e,t,r){return ot.resolve()}updateIndexEntries(e,t){return ot.resolve()}}class Rce{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new pa(Gr.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pa(Gr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eW=41943040;class vo{static withCacheSize(e){return new vo(e,vo.DEFAULT_COLLECTION_PERCENTILE,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vo.DEFAULT_COLLECTION_PERCENTILE=10,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vo.DEFAULT=new vo(eW,vo.DEFAULT_COLLECTION_PERCENTILE,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vo.DISABLED=new vo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new kv(0)}static ur(){return new kv(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj="LruGarbageCollector",Dce=1048576;function Gj([n,e],[t,r]){const i=Un(n,t);return i===0?Un(e,r):i}class Lce{constructor(e){this.Tr=e,this.buffer=new pa(Gj),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Gj(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Oce{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Rt(Hj,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ny(t)?Rt(Hj,"Ignoring IndexedDB error during garbage collection: ",t):await ty(t)}await this.Rr(3e5)})}}class Fce{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ot.resolve(QA.ue);const r=new Lce(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Rt("LruGarbageCollector","Garbage collection skipped; disabled"),ot.resolve(zj)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zj):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,a,s,o,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,o=Date.now(),this.removeTargets(e,r,t))).next(d=>(a=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),e0()<=Kn.DEBUG&&Rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-c}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),ot.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:d})))}}function jce(n,e){return new Fce(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bce{constructor(){this.changes=new Ym(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ot.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uce{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vce{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Kx(r.mutation,i,lu.empty(),Ur.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Yn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Yn()){const i=qp();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let s=wx();return a.forEach((o,l)=>{s=s.insert(o,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=qp();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Yn()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{t.set(s,o)})})}computeViews(e,t,r,i){let a=Md();const s=Xx(),o=function(){return Xx()}();return t.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Zm)?a=a.insert(u.key,u):c!==void 0?(s.set(u.key,c.mutation.getFieldMask()),Kx(c.mutation,u,c.mutation.getFieldMask(),Ur.now())):s.set(u.key,lu.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((u,c)=>s.set(u,c)),t.forEach((u,c)=>{var d;return o.set(u,new Uce(c,(d=s.get(u))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,t){const r=Xx();let i=new wi((s,o)=>s-o),a=Yn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const o of s)o.keys().forEach(l=>{const u=t.get(l);if(u===null)return;let c=r.get(l)||lu.empty();c=o.applyToLocalView(u,c),r.set(l,c);const d=(i.get(o.batchId)||Yn()).add(l);i=i.insert(o.batchId,d)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,c=l.value,d=OG();c.forEach(f=>{if(!a.has(f)){const m=zG(t.get(f),r.get(f));m!==null&&d.set(f,m),a=a.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,d))}return ot.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return en.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):PG(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ot.resolve(qp());let o=O1,l=a;return s.next(u=>ot.forEach(u,(c,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),a.get(c)?ot.resolve():this.remoteDocumentCache.getEntry(e,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,l,u,Yn())).next(c=>({batchId:o,changes:LG(c)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new en(t)).next(r=>{let i=wx();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let s=wx();return this.indexManager.getCollectionParents(e,a).next(o=>ot.forEach(o,l=>{const u=function(d,f){return new ry(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((d,f)=>{s=s.insert(d,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(s=>{a.forEach((l,u)=>{const c=u.getKey();s.get(c)===null&&(s=s.insert(c,xs.newInvalidDocument(c)))});let o=wx();return s.forEach((l,u)=>{const c=a.get(l);c!==void 0&&Kx(c.mutation,u,lu.empty(),Ur.now()),nT(t,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zce{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ot.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:cc(i.createTime)}}(t)),ot.resolve()}getNamedQuery(e,t){return ot.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:Pce(i.bundledQuery),readTime:cc(i.readTime)}}(t)),ot.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hce{constructor(){this.overlays=new wi(en.comparator),this.kr=new Map}getOverlay(e,t){return ot.resolve(this.overlays.get(t))}getOverlays(e,t){const r=qp();return ot.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.wt(e,t,a)}),ot.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),ot.resolve()}getOverlaysForCollection(e,t,r){const i=qp(),a=t.length+1,s=new en(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===a&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ot.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new wi((u,c)=>u-c);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let c=a.get(u.largestBatchId);c===null&&(c=qp(),a=a.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const o=qp(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>o.set(u,c)),!(o.size()>=i)););return ot.resolve(o)}wt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new lce(t,r));let a=this.kr.get(t);a===void 0&&(a=Yn(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gce{constructor(){this.sessionToken=Ma.EMPTY_BYTE_STRING}getSessionToken(e){return ot.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ot.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(){this.qr=new pa(Sa.Qr),this.$r=new pa(Sa.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Sa(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Sa(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new en(new Gr([])),r=new Sa(t,e),i=new Sa(t,e+1),a=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),a.push(s.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new en(new Gr([])),r=new Sa(t,e),i=new Sa(t,e+1);let a=Yn();return this.$r.forEachInRange([r,i],s=>{a=a.add(s.key)}),a}containsKey(e){const t=new Sa(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Sa{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return en.comparator(e.key,t.key)||Un(e.Hr,t.Hr)}static Ur(e,t){return Un(e.Hr,t.Hr)||en.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wce{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new pa(Sa.Qr)}checkEmpty(e){return ot.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new oce(a,t,r,i);this.mutationQueue.push(s);for(const o of i)this.Yr=this.Yr.add(new Sa(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ot.resolve(s)}lookupMutationBatch(e,t){return ot.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Xr(r),a=i<0?0:i;return ot.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ot.resolve(this.mutationQueue.length===0?sD:this.er-1)}getAllMutationBatches(e){return ot.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Sa(t,0),i=new Sa(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],s=>{const o=this.Zr(s.Hr);a.push(o)}),ot.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pa(Un);return t.forEach(i=>{const a=new Sa(i,0),s=new Sa(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,s],o=>{r=r.add(o.Hr)})}),ot.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;en.isDocumentKey(a)||(a=a.child(""));const s=new Sa(new en(a),0);let o=new pa(Un);return this.Yr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.Hr)),!0)},s),ot.resolve(this.ei(o))}ei(e){const t=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){br(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return ot.forEach(t.mutations,i=>{const a=new Sa(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new Sa(t,0),i=this.Yr.firstAfterOrEqual(r);return ot.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ot.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qce{constructor(e){this.ni=e,this.docs=function(){return new wi(en.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ot.resolve(r?r.document.mutableCopy():xs.newInvalidDocument(t))}getEntries(e,t){let r=Md();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():xs.newInvalidDocument(i))}),ot.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Md();const s=t.path,o=new en(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||wue(_ue(c),r)<=0||(i.has(c.key)||nT(t,c))&&(a=a.insert(c.key,c.mutableCopy()))}return ot.resolve(a)}getAllFromCollectionGroup(e,t,r,i){gn(9500)}ri(e,t){return ot.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $ce(this)}getSize(e){return ot.resolve(this.size)}}class $ce extends Bce{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),ot.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xce{constructor(e){this.persistence=e,this.ii=new Ym(t=>uD(t),cD),this.lastRemoteSnapshotVersion=bn.min(),this.highestTargetId=0,this.si=0,this.oi=new vD,this.targetCount=0,this._i=kv.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),ot.resolve()}getLastRemoteSnapshotVersion(e){return ot.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ot.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ot.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),ot.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new kv(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ot.resolve()}updateTargetData(e,t){return this.hr(t),ot.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ot.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.ii.forEach((s,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.ii.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),ot.waitFor(a).next(()=>i)}getTargetCount(e){return ot.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return ot.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),ot.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),ot.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ot.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return ot.resolve(r)}containsKey(e,t){return ot.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW{constructor(e,t){this.ai={},this.overlays={},this.ui=new QA(0),this.ci=!1,this.ci=!0,this.li=new Gce,this.referenceDelegate=e(this),this.hi=new Xce(this),this.indexManager=new Nce,this.remoteDocumentCache=function(i){return new qce(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new Ice(t),this.Ti=new zce(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Hce,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new Wce(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){Rt("MemoryPersistence","Starting transaction:",e);const i=new Kce(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(e,t){return ot.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class Kce extends Sue{constructor(e){super(),this.currentSequenceNumber=e}}class yD{constructor(e){this.persistence=e,this.Ai=new vD,this.Ri=null}static Vi(e){return new yD(e)}get mi(){if(this.Ri)return this.Ri;throw gn(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),ot.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),ot.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ot.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ot.forEach(this.mi,r=>{const i=en.fromPath(r);return this.fi(e,i).next(a=>{a||t.removeEntry(i,bn.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return ot.or([()=>ot.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class iE{constructor(e,t){this.persistence=e,this.gi=new Ym(r=>Tue(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=jce(this,t)}static Vi(e,t){return new iE(e,t)}Ii(){}di(e){return ot.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return ot.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(a=>a?ot.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(o=>{o||(r++,a.removeEntry(s,bn.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ot.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),ot.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),ot.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ot.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Z2(e.data.value)),t}Sr(e,t,r){return ot.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.gi.get(t);return ot.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Yn(),i=Yn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new xD(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yce{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zce{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return Cae()?8:Eue(Ts())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ps(e,t).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.ys(e,t,i,r).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new Yce;return this.ws(e,t,s).next(o=>{if(a.result=o,this.Rs)return this.Ss(e,t,s,o.size)})}).next(()=>a.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(e0()<=Kn.DEBUG&&Rt("QueryEngine","SDK will not create cache indexes for query:",t0(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ot.resolve()):(e0()<=Kn.DEBUG&&Rt("QueryEngine","Query:",t0(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(e0()<=Kn.DEBUG&&Rt("QueryEngine","The SDK decides to create cache indexes for query:",t0(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,uc(t))):ot.resolve())}ps(e,t){if(Nj(t))return ot.resolve(null);let r=uc(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=tE(t,null,"F"),r=uc(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const s=Yn(...a);return this.gs.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.bs(t,o);return this.Ds(t,u,s,l.readTime)?this.ps(e,tE(t,null,"F")):this.vs(e,u,t,l)}))})))}ys(e,t,r,i){return Nj(t)||i.isEqual(bn.min())?ot.resolve(null):this.gs.getDocuments(e,r).next(a=>{const s=this.bs(t,a);return this.Ds(t,s,r,i)?ot.resolve(null):(e0()<=Kn.DEBUG&&Rt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),t0(t)),this.vs(e,s,t,xue(i,O1)).next(o=>o))})}bs(e,t){let r=new pa(RG(e));return t.forEach((i,a)=>{nT(e,a)&&(r=r.add(a))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(e,t,r){return e0()<=Kn.DEBUG&&Rt("QueryEngine","Using full collection scan to execute query:",t0(t)),this.gs.getDocumentsMatchingQuery(e,t,Sf.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="LocalStore",Qce=3e8;class Jce{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new wi(Un),this.Ms=new Ym(a=>uD(a),cD),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vce(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function ede(n,e,t,r){return new Jce(n,e,t,r)}async function nW(n,e){const t=An(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const s=[],o=[];let l=Yn();for(const u of i){s.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of a){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return t.localDocuments.getDocuments(r,l).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:o}))})})}function tde(n,e){const t=An(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return function(o,l,u,c){const d=u.batch,f=d.keys();let m=ot.resolve();return f.forEach(v=>{m=m.next(()=>c.getEntry(l,v)).next(_=>{const w=u.docVersions.get(v);br(w!==null,48541),_.version.compareTo(w)<0&&(d.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),c.addEntry(_)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=Yn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function rW(n){const e=An(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function nde(n,e){const t=An(n),r=e.snapshotVersion;let i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;const o=[];e.targetChanges.forEach((c,d)=>{const f=i.get(d);if(!f)return;o.push(t.hi.removeMatchingKeys(a,c.removedDocuments,d).next(()=>t.hi.addMatchingKeys(a,c.addedDocuments,d)));let m=f.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(Ma.EMPTY_BYTE_STRING,bn.min()).withLastLimboFreeSnapshotVersion(bn.min()):c.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(c.resumeToken,r)),i=i.insert(d,m),function(_,w,x){return _.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=Qce?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(f,m,c)&&o.push(t.hi.updateTargetData(a,m))});let l=Md(),u=Yn();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(a,c))}),o.push(rde(a,s,e.documentUpdates).next(c=>{l=c.Ls,u=c.ks})),!r.isEqual(bn.min())){const c=t.hi.getLastRemoteSnapshotVersion(a).next(d=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));o.push(c)}return ot.waitFor(o).next(()=>s.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,l,u)).next(()=>l)}).then(a=>(t.Fs=i,a))}function rde(n,e,t){let r=Yn(),i=Yn();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let s=Md();return t.forEach((o,l)=>{const u=a.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(bn.min())?(e.removeEntry(o,l.readTime),s=s.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(o,l)):Rt(_D,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{Ls:s,ks:i}})}function ide(n,e){const t=An(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=sD),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ade(n,e){const t=An(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(a=>a?(i=a,ot.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Zh(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function uN(n,e,t){const r=An(n),i=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!ny(s))throw s;Rt(_D,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function Wj(n,e,t){const r=An(n);let i=bn.min(),a=Yn();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,c){const d=An(l),f=d.Ms.get(c);return f!==void 0?ot.resolve(d.Fs.get(f)):d.hi.getTargetData(u,c)}(r,s,uc(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,o.targetId).next(l=>{a=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:bn.min(),t?a:Yn())).next(o=>(sde(r,Wue(e),o),{documents:o,qs:a})))}function sde(n,e,t){let r=n.xs.get(e)||bn.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.xs.set(e,r)}class qj{constructor(){this.activeTargetIds=Zue()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ode{constructor(){this.Fo=new qj,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new qj,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lde{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j="ConnectivityMonitor";class Xj{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Rt($j,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Rt($j,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _b=null;function cN(){return _b===null?_b=function(){return 268435456+Math.round(2147483648*Math.random())}():_b++,"0x"+_b.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="RestConnection",ude={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cde{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===QS?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,a){const s=cN(),o=this.Go(e,t.toUriEncodedString());Rt(YC,`Sending RPC '${e}' ${s}:`,o,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,a);const{host:u}=new URL(o),c=Zv(u);return this.jo(e,o,l,r,c).then(d=>(Rt(YC,`Received RPC '${e}' ${s}: `,d),d),d=>{throw Cd(YC,`RPC '${e}' ${s} failed with error: `,d,"url: ",o,"request:",r),d})}Jo(e,t,r,i,a,s){return this.Wo(e,t,r,i,a)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ey}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Go(e,t){const r=ude[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dde{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="WebChannelConnection";class hde extends cde{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,a){const s=cN();return new Promise((o,l)=>{const u=new rG;u.setWithCredentials(!0),u.listenOnce(iG.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Y2.NO_ERROR:const d=u.getResponseJson();Rt(ls,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Y2.TIMEOUT:Rt(ls,`RPC '${e}' ${s} timed out`),l(new Ct(it.DEADLINE_EXCEEDED,"Request time out"));break;case Y2.HTTP_ERROR:const f=u.getStatus();if(Rt(ls,`RPC '${e}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const _=function(x){const S=x.toLowerCase().replace(/_/g,"-");return Object.values(it).indexOf(S)>=0?S:it.UNKNOWN}(v.status);l(new Ct(_,v.message))}else l(new Ct(it.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Ct(it.UNAVAILABLE,"Connection failed."));break;default:gn(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{Rt(ls,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Rt(ls,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",c,r,15)})}P_(e,t,r){const i=cN(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=oG(),o=sG(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const c=a.join("");Rt(ls,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=s.createWebChannel(c,l);this.T_(d);let f=!1,m=!1;const v=new dde({Ho:w=>{m?Rt(ls,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(f||(Rt(ls,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),Rt(ls,`RPC '${e}' stream ${i} sending:`,w),d.send(w))},Yo:()=>d.close()}),_=(w,x,S)=>{w.listen(x,E=>{try{S(E)}catch(T){setTimeout(()=>{throw T},0)}})};return _(d,_x.EventType.OPEN,()=>{m||(Rt(ls,`RPC '${e}' stream ${i} transport opened.`),v.s_())}),_(d,_x.EventType.CLOSE,()=>{m||(m=!0,Rt(ls,`RPC '${e}' stream ${i} transport closed`),v.__(),this.I_(d))}),_(d,_x.EventType.ERROR,w=>{m||(m=!0,Cd(ls,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),v.__(new Ct(it.UNAVAILABLE,"The operation could not be completed")))}),_(d,_x.EventType.MESSAGE,w=>{var x;if(!m){const S=w.data[0];br(!!S,16349);const E=S,T=(E==null?void 0:E.error)||((x=E[0])===null||x===void 0?void 0:x.error);if(T){Rt(ls,`RPC '${e}' stream ${i} received error:`,T);const D=T.status;let F=function(I){const R=qi[I];if(R!==void 0)return GG(R)}(D),P=T.message;F===void 0&&(F=it.INTERNAL,P="Unknown error status: "+D+" with message "+T.message),m=!0,v.__(new Ct(F,P)),d.close()}else Rt(ls,`RPC '${e}' stream ${i} received:`,S),v.a_(S)}}),_(o,aG.STAT_EVENT,w=>{w.stat===QP.PROXY?Rt(ls,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===QP.NOPROXY&&Rt(ls,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.o_()},0),v}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function ZC(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(n){return new gce(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&Rt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj="PersistentStream";class aW{constructor(e,t,r,i,a,s,o,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new iW(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===it.RESOURCE_EXHAUSTED?(kd(t.toString()),kd("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===it.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{const i=new Ct(it.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Rt(Kj,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Rt(Kj,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fde extends aW{constructor(e,t,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=xce(this.serializer,e),r=function(a){if(!("targetChange"in a))return bn.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?bn.min():s.readTime?cc(s.readTime):bn.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=lN(this.serializer),t.addTarget=function(a,s){let o;const l=s.target;if(o=rN(l)?{documents:bce(a,l)}:{query:Sce(a,l).Vt},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=$G(a,s.resumeToken);const u=aN(a,s.expectedCount);u!==null&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(bn.min())>0){o.readTime=rE(a,s.snapshotVersion.toTimestamp());const u=aN(a,s.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const r=Ace(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=lN(this.serializer),t.removeTarget=e,this.k_(t)}}class pde extends aW{constructor(e,t,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return br(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,br(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){br(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=wce(e.writeResults,e.commitTime),r=cc(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=lN(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>_ce(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mde{}class gde extends mde{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Ct(it.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Wo(e,sN(t,r),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ct(it.UNKNOWN,a.toString())})}Jo(e,t,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Jo(e,sN(t,r),i,s,o,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ct(it.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class vde{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(kd(t),this._a=!1):Rt("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="RemoteStore";class yde{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{Qm(this)&&(Rt(Tm,"Restarting streams for network reachability change."),await async function(l){const u=An(l);u.Ia.add(4),await F_(u),u.Aa.set("Unknown"),u.Ia.delete(4),await oT(u)}(this))})}),this.Aa=new vde(r,i)}}async function oT(n){if(Qm(n))for(const e of n.da)await e(!0)}async function F_(n){for(const e of n.da)await e(!1)}function sW(n,e){const t=An(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),ED(t)?SD(t):iy(t).x_()&&bD(t,e))}function wD(n,e){const t=An(n),r=iy(t);t.Ta.delete(e),r.x_()&&oW(t,e),t.Ta.size===0&&(r.x_()?r.B_():Qm(t)&&t.Aa.set("Unknown"))}function bD(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(bn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}iy(n).H_(e)}function oW(n,e){n.Ra.$e(e),iy(n).Y_(e)}function SD(n){n.Ra=new hce({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),iy(n).start(),n.Aa.aa()}function ED(n){return Qm(n)&&!iy(n).M_()&&n.Ta.size>0}function Qm(n){return An(n).Ia.size===0}function lW(n){n.Ra=void 0}async function xde(n){n.Aa.set("Online")}async function _de(n){n.Ta.forEach((e,t)=>{bD(n,e)})}async function wde(n,e){lW(n),ED(n)?(n.Aa.la(e),SD(n)):n.Aa.set("Unknown")}async function bde(n,e,t){if(n.Aa.set("Online"),e instanceof qG&&e.state===2&&e.cause)try{await async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ta.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ta.delete(o),i.Ra.removeTarget(o))}(n,e)}catch(r){Rt(Tm,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await aE(n,r)}else if(e instanceof eS?n.Ra.Ye(e):e instanceof WG?n.Ra.it(e):n.Ra.et(e),!t.isEqual(bn.min()))try{const r=await rW(n.localStore);t.compareTo(r)>=0&&await function(a,s){const o=a.Ra.Pt(s);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=a.Ta.get(u);c&&a.Ta.set(u,c.withResumeToken(l.resumeToken,s))}}),o.targetMismatches.forEach((l,u)=>{const c=a.Ta.get(l);if(!c)return;a.Ta.set(l,c.withResumeToken(Ma.EMPTY_BYTE_STRING,c.snapshotVersion)),oW(a,l);const d=new Zh(c.target,l,u,c.sequenceNumber);bD(a,d)}),a.remoteSyncer.applyRemoteEvent(o)}(n,t)}catch(r){Rt(Tm,"Failed to raise snapshot:",r),await aE(n,r)}}async function aE(n,e,t){if(!ny(e))throw e;n.Ia.add(1),await F_(n),n.Aa.set("Offline"),t||(t=()=>rW(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Rt(Tm,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await oT(n)})}function uW(n,e){return e().catch(t=>aE(n,t,e))}async function lT(n){const e=An(n),t=kf(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:sD;for(;Sde(e);)try{const i=await ide(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,Ede(e,i)}catch(i){await aE(e,i)}cW(e)&&dW(e)}function Sde(n){return Qm(n)&&n.Pa.length<10}function Ede(n,e){n.Pa.push(e);const t=kf(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function cW(n){return Qm(n)&&!kf(n).M_()&&n.Pa.length>0}function dW(n){kf(n).start()}async function Ade(n){kf(n).na()}async function Tde(n){const e=kf(n);for(const t of n.Pa)e.X_(t.mutations)}async function kde(n,e,t){const r=n.Pa.shift(),i=pD.from(r,e,t);await uW(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await lT(n)}async function Cde(n,e){e&&kf(n).Z_&&await async function(r,i){if(function(s){return cce(s)&&s!==it.ABORTED}(i.code)){const a=r.Pa.shift();kf(r).N_(),await uW(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await lT(r)}}(n,e),cW(n)&&dW(n)}async function Yj(n,e){const t=An(n);t.asyncQueue.verifyOperationInProgress(),Rt(Tm,"RemoteStore received new credentials");const r=Qm(t);t.Ia.add(3),await F_(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await oT(t)}async function Mde(n,e){const t=An(n);e?(t.Ia.delete(2),await oT(t)):e||(t.Ia.add(2),await F_(t),t.Aa.set("Unknown"))}function iy(n){return n.Va||(n.Va=function(t,r,i){const a=An(t);return a.ia(),new fde(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:xde.bind(null,n),e_:_de.bind(null,n),n_:wde.bind(null,n),J_:bde.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),ED(n)?SD(n):n.Aa.set("Unknown")):(await n.Va.stop(),lW(n))})),n.Va}function kf(n){return n.ma||(n.ma=function(t,r,i){const a=An(t);return a.ia(),new pde(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Ade.bind(null,n),n_:Cde.bind(null,n),ea:Tde.bind(null,n),ta:kde.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await lT(n)):(await n.ma.stop(),n.Pa.length>0&&(Rt(Tm,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new pd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const s=Date.now()+r,o=new AD(e,t,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ct(it.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function TD(n,e){if(kd("AsyncQueue",`${e}: ${n}`),ny(n))return new Ct(it.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{static emptySet(e){return new X0(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||en.comparator(t.key,r.key):(t,r)=>en.comparator(t.key,r.key),this.keyedMap=wx(),this.sortedSet=new wi(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof X0)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new X0;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(){this.fa=new wi(en.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):gn(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class Cv{constructor(e,t,r,i,a,s,o,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,a){const s=[];return t.forEach(o=>{s.push({type:0,doc:o})}),new Cv(e,t,X0.emptySet(t),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tT(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ide{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Pde{constructor(){this.queries=Qj(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const i=An(t),a=i.queries;i.queries=Qj(),a.forEach((s,o)=>{for(const l of o.wa)l.onError(r)})})(this,new Ct(it.ABORTED,"Firestore shutting down"))}}function Qj(){return new Ym(n=>NG(n),tT)}async function hW(n,e){const t=An(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.Sa()&&e.ba()&&(r=2):(a=new Ide,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(i,!0);break;case 1:a.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const o=TD(s,`Initialization of query '${t0(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&kD(t)}async function fW(n,e){const t=An(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const s=a.wa.indexOf(e);s>=0&&(a.wa.splice(s,1),a.wa.length===0?i=e.ba()?0:1:!a.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Nde(n,e){const t=An(n);let r=!1;for(const i of e){const a=i.query,s=t.queries.get(a);if(s){for(const o of s.wa)o.Ca(i)&&(r=!0);s.ya=i}}r&&kD(t)}function Rde(n,e,t){const r=An(n),i=r.queries.get(e);if(i)for(const a of i.wa)a.onError(t);r.queries.delete(e)}function kD(n){n.Da.forEach(e=>{e.next()})}var dN,Jj;(Jj=dN||(dN={})).Fa="default",Jj.Cache="cache";class pW{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Cv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Cv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==dN.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(e){this.key=e}}class gW{constructor(e){this.key=e}}class Dde{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Yn(),this.mutatedKeys=Yn(),this.Xa=RG(e),this.eu=new X0(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new Zj,i=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,s=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const f=i.get(c),m=nT(this.query,d)?d:null,v=!!f&&this.mutatedKeys.has(f.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let w=!1;f&&m?f.data.isEqual(m.data)?v!==_&&(r.track({type:3,doc:m}),w=!0):this.iu(f,m)||(r.track({type:2,doc:m}),w=!0,(l&&this.Xa(m,l)>0||u&&this.Xa(m,u)<0)&&(o=!0)):!f&&m?(r.track({type:0,doc:m}),w=!0):f&&!m&&(r.track({type:1,doc:f}),w=!0,(l||u)&&(o=!0)),w&&(m?(s=s.add(m),a=_?a.add(c):a.delete(c)):(s=s.delete(c),a=a.delete(c)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const c=this.query.limitType==="F"?s.last():s.first();s=s.delete(c.key),a=a.delete(c.key),r.track({type:1,doc:c})}return{eu:s,ru:r,Ds:o,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((c,d)=>function(m,v){const _=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gn(20277,{At:w})}};return _(m)-_(v)}(c.type,d.type)||this.Xa(c.doc,d.doc)),this.su(r),i=i!=null&&i;const o=t&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,u=l!==this.Ya;return this.Ya=l,s.length!==0||u?{snapshot:new Cv(this.query,e.eu,a,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Zj,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Yn(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new gW(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new mW(r))}),t}uu(e){this.Ha=e.qs,this.Za=Yn();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Cv.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const CD="SyncEngine";class Lde{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Ode{constructor(e){this.key=e,this.lu=!1}}class Fde{constructor(e,t,r,i,a,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Ym(o=>NG(o),tT),this.Tu=new Map,this.Iu=new Set,this.du=new wi(en.comparator),this.Eu=new Map,this.Au=new vD,this.Ru={},this.Vu=new Map,this.mu=kv.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function jde(n,e,t=!0){const r=bW(n);let i;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await vW(r,e,t,!0),i}async function Bde(n,e){const t=bW(n);await vW(t,e,!0,!1)}async function vW(n,e,t,r){const i=await ade(n.localStore,uc(e)),a=i.targetId,s=n.sharedClientState.addLocalQueryTarget(a,t);let o;return r&&(o=await Ude(n,e,a,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&sW(n.remoteStore,i),o}async function Ude(n,e,t,r,i){n.gu=(d,f,m)=>async function(_,w,x,S){let E=w.view.nu(x);E.Ds&&(E=await Wj(_.localStore,w.query,!1).then(({documents:P})=>w.view.nu(P,E)));const T=S&&S.targetChanges.get(w.targetId),D=S&&S.targetMismatches.get(w.targetId)!=null,F=w.view.applyChanges(E,_.isPrimaryClient,T,D);return t6(_,w.targetId,F._u),F.snapshot}(n,d,f,m);const a=await Wj(n.localStore,e,!0),s=new Dde(e,a.qs),o=s.nu(a.documents),l=O_.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(o,n.isPrimaryClient,l);t6(n,t,u._u);const c=new Lde(e,t,s);return n.Pu.set(e,c),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot}async function Vde(n,e,t){const r=An(n),i=r.Pu.get(e),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(s=>!tT(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await uN(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&wD(r.remoteStore,i.targetId),hN(r,i.targetId)}).catch(ty)):(hN(r,i.targetId),await uN(r.localStore,i.targetId,!0))}async function zde(n,e){const t=An(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),wD(t.remoteStore,r.targetId))}async function Hde(n,e,t){const r=Yde(n);try{const i=await function(s,o){const l=An(s),u=Ur.now(),c=o.reduce((m,v)=>m.add(v.key),Yn());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=Md(),_=Yn();return l.Os.getEntries(m,c).next(w=>{v=w,v.forEach((x,S)=>{S.isValidDocument()||(_=_.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,v)).next(w=>{d=w;const x=[];for(const S of o){const E=ace(S,d.get(S.key).overlayedDocument);E!=null&&x.push(new Zm(S.key,E,EG(E.value.mapValue),fu.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,x,o)}).next(w=>{f=w;const x=w.applyToLocalDocumentSet(d,_);return l.documentOverlayCache.saveOverlays(m,w.batchId,x)})}).then(()=>({batchId:f.batchId,changes:LG(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,l){let u=s.Ru[s.currentUser.toKey()];u||(u=new wi(Un)),u=u.insert(o,l),s.Ru[s.currentUser.toKey()]=u}(r,i.batchId,t),await j_(r,i.changes),await lT(r.remoteStore)}catch(i){const a=TD(i,"Failed to persist write");t.reject(a)}}async function yW(n,e){const t=An(n);try{const r=await nde(t.localStore,e);e.targetChanges.forEach((i,a)=>{const s=t.Eu.get(a);s&&(br(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?br(s.lu,14607):i.removedDocuments.size>0&&(br(s.lu,42227),s.lu=!1))}),await j_(t,r,e)}catch(r){await ty(r)}}function e6(n,e,t){const r=An(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Pu.forEach((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(s,o){const l=An(s);l.onlineState=o;let u=!1;l.queries.forEach((c,d)=>{for(const f of d.wa)f.va(o)&&(u=!0)}),u&&kD(l)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Gde(n,e,t){const r=An(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Eu.get(e),a=i&&i.key;if(a){let s=new wi(en.comparator);s=s.insert(a,xs.newNoDocument(a,bn.min()));const o=Yn().add(a),l=new aT(bn.min(),new Map,new wi(Un),s,o);await yW(r,l),r.du=r.du.remove(a),r.Eu.delete(e),MD(r)}else await uN(r.localStore,e,!1).then(()=>hN(r,e,t)).catch(ty)}async function Wde(n,e){const t=An(n),r=e.batch.batchId;try{const i=await tde(t.localStore,e);_W(t,r,null),xW(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await j_(t,i)}catch(i){await ty(i)}}async function qde(n,e,t){const r=An(n);try{const i=await function(s,o){const l=An(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,o).next(d=>(br(d!==null,37113),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);_W(r,e,t),xW(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await j_(r,i)}catch(i){await ty(i)}}function xW(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function _W(n,e,t){const r=An(n);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function hN(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||wW(n,r)})}function wW(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(wD(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),MD(n))}function t6(n,e,t){for(const r of t)r instanceof mW?(n.Au.addReference(r.key,e),$de(n,r)):r instanceof gW?(Rt(CD,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||wW(n,r.key)):gn(19791,{yu:r})}function $de(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(Rt(CD,"New document in limbo: "+t),n.Iu.add(r),MD(n))}function MD(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new en(Gr.fromString(e)),r=n.mu.next();n.Eu.set(r,new Ode(t)),n.du=n.du.insert(t,r),sW(n.remoteStore,new Zh(uc(dD(t.path)),r,"TargetPurposeLimboResolution",QA.ue))}}async function j_(n,e,t){const r=An(n),i=[],a=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((o,l)=>{s.push(r.gu(l,e,t).then(u=>{var c;if((u||t)&&r.isPrimaryClient){const d=u?!u.fromCache:(c=t==null?void 0:t.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=xD.Es(l.targetId,u);a.push(d)}}))}),await Promise.all(s),r.hu.J_(i),await async function(l,u){const c=An(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ot.forEach(u,f=>ot.forEach(f.Is,m=>c.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>ot.forEach(f.ds,m=>c.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!ny(d))throw d;Rt(_D,"Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const m=c.Fs.get(f),v=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(v);c.Fs=c.Fs.insert(f,_)}}}(r.localStore,a))}async function Xde(n,e){const t=An(n);if(!t.currentUser.isEqual(e)){Rt(CD,"User change. New user:",e.toKey());const r=await nW(t.localStore,e);t.currentUser=e,function(a,s){a.Vu.forEach(o=>{o.forEach(l=>{l.reject(new Ct(it.CANCELLED,s))})}),a.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await j_(t,r.Bs)}}function Kde(n,e){const t=An(n),r=t.Eu.get(e);if(r&&r.lu)return Yn().add(r.key);{let i=Yn();const a=t.Tu.get(e);if(!a)return i;for(const s of a){const o=t.Pu.get(s);i=i.unionWith(o.view.tu)}return i}}function bW(n){const e=An(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yW.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kde.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gde.bind(null,e),e.hu.J_=Nde.bind(null,e.eventManager),e.hu.pu=Rde.bind(null,e.eventManager),e}function Yde(n){const e=An(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wde.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qde.bind(null,e),e}class sE{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sT(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return ede(this.persistence,new Zce,e.initialUser,this.serializer)}Du(e){return new tW(yD.Vi,this.serializer)}bu(e){return new ode}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sE.provider={build:()=>new sE};class Zde extends sE{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){br(this.persistence.referenceDelegate instanceof iE,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Oce(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?vo.withCacheSize(this.cacheSizeBytes):vo.DEFAULT;return new tW(r=>iE.Vi(r,t),this.serializer)}}class fN{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>e6(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xde.bind(null,this.syncEngine),await Mde(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Pde}()}createDatastore(e){const t=sT(e.databaseInfo.databaseId),r=function(a){return new hde(a)}(e.databaseInfo);return function(a,s,o,l){return new gde(a,s,o,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,s,o){return new yde(r,i,a,s,o)}(this.localStore,this.datastore,e.asyncQueue,t=>e6(this.syncEngine,t,0),function(){return Xj.C()?new Xj:new lde}())}createSyncEngine(e,t){return function(i,a,s,o,l,u,c){const d=new Fde(i,a,s,o,l,u);return c&&(d.fu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=An(i);Rt(Tm,"RemoteStore shutting down."),a.Ia.add(5),await F_(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}fN.provider={build:()=>new fN};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SW{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):kd("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf="FirestoreClient";class Qde{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=vs.UNAUTHENTICATED,this.clientId=YA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async s=>{Rt(Cf,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Rt(Cf,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=TD(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function QC(n,e){n.asyncQueue.verifyOperationInProgress(),Rt(Cf,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await nW(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Cd("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{Rt("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Cd("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function n6(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Jde(n);Rt(Cf,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Yj(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Yj(e.remoteStore,i)),n._onlineComponents=e}async function Jde(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Rt(Cf,"Using user provided OfflineComponentProvider");try{await QC(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===it.FAILED_PRECONDITION||i.code===it.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Cd("Error using user provided cache. Falling back to memory cache: "+t),await QC(n,new sE)}}else Rt(Cf,"Using default OfflineComponentProvider"),await QC(n,new Zde(void 0));return n._offlineComponents}async function EW(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Rt(Cf,"Using user provided OnlineComponentProvider"),await n6(n,n._uninitializedComponentsProvider._online)):(Rt(Cf,"Using default OnlineComponentProvider"),await n6(n,new fN))),n._onlineComponents}function ehe(n){return EW(n).then(e=>e.syncEngine)}async function AW(n){const e=await EW(n),t=e.eventManager;return t.onListen=jde.bind(null,e.syncEngine),t.onUnlisten=Vde.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Bde.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=zde.bind(null,e.syncEngine),t}function the(n,e,t={}){const r=new pd;return n.asyncQueue.enqueueAndForget(async()=>function(a,s,o,l,u){const c=new SW({next:f=>{c.Ou(),s.enqueueAndForget(()=>fW(a,d));const m=f.docs.has(o);!m&&f.fromCache?u.reject(new Ct(it.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?u.reject(new Ct(it.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new pW(dD(o.path),c,{includeMetadataChanges:!0,ka:!0});return hW(a,d)}(await AW(n),n.asyncQueue,e,t,r)),r.promise}function nhe(n,e,t={}){const r=new pd;return n.asyncQueue.enqueueAndForget(async()=>function(a,s,o,l,u){const c=new SW({next:f=>{c.Ou(),s.enqueueAndForget(()=>fW(a,d)),f.fromCache&&l.source==="server"?u.reject(new Ct(it.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new pW(o,c,{includeMetadataChanges:!0,ka:!0});return hW(a,d)}(await AW(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TW(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kW="firestore.googleapis.com",i6=!0;class a6{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ct(it.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kW,this.ssl=i6}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:i6;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eW;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Dce)throw new Ct(it.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TW((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ct(it.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ct(it.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ct(it.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uT{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new a6({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ct(it.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ct(it.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new a6(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cG;switch(r.type){case"firstParty":return new fue(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ct(it.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=r6.get(t);r&&(Rt("ComponentProvider","Removing Datastore"),r6.delete(t),r.terminate())}(this),Promise.resolve()}}function CW(n,e,t,r={}){var i;n=vc(n,uT);const a=Zv(e),s=n._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;a&&(hH(`https://${l}`),fH("Firestore",!0)),s.host!==kW&&s.host!==l&&Cd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:l,ssl:a,emulatorOptions:r});if(!bf(u,o)&&(n._setSettings(u),r.mockUserToken)){let c,d;if(typeof r.mockUserToken=="string")c=r.mockUserToken,d=vs.MOCK_USER;else{c=_ae(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Ct(it.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new vs(f)}n._authCredentials=new cue(new uG(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jm=class MW{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new MW(this.firestore,e,this._query)}};class Ui{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new md(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ui(this.firestore,e,this._key)}toJSON(){return{type:Ui._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(D_(t,Ui._jsonSchema))return new Ui(e,r||null,new en(Gr.fromString(t.referencePath)))}}Ui._jsonSchemaVersion="firestore/documentReference/1.0",Ui._jsonSchema={type:Yi("string",Ui._jsonSchemaVersion),referencePath:Yi("string")};class md extends Jm{constructor(e,t,r){super(e,t,dD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ui(this.firestore,null,new en(e))}withConverter(e){return new md(this.firestore,e,this._path)}}function ti(n,e,...t){if(n=Ca(n),hG("collection","path",e),n instanceof uT){const r=Gr.fromString(e,...t);return yj(r),new md(n,null,r)}{if(!(n instanceof Ui||n instanceof md))throw new Ct(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Gr.fromString(e,...t));return yj(r),new md(n.firestore,null,r)}}function _r(n,e,...t){if(n=Ca(n),arguments.length===1&&(e=YA.newId()),hG("doc","path",e),n instanceof uT){const r=Gr.fromString(e,...t);return vj(r),new Ui(n,null,new en(r))}{if(!(n instanceof Ui||n instanceof md))throw new Ct(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Gr.fromString(e,...t));return vj(r),new Ui(n.firestore,n instanceof md?n.converter:null,new en(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6="AsyncQueue";class o6{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new iW(this,"async_queue_retry"),this.oc=()=>{const r=ZC();r&&Rt(s6,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=ZC();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=ZC();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new pd;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ny(e))throw e;Rt(s6,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,kd("INTERNAL UNHANDLED ERROR: ",l6(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const i=AD.createAndSchedule(this,e,t,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&gn(47125,{hc:l6(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function l6(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class eg extends uT{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new o6,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new o6(e),this._firestoreClient=void 0,await e}}}function ID(n,e){const t=typeof n=="object"?n:GA(),r=typeof n=="string"?n:QS,i=qm(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=yae("firestore");a&&CW(i,...a)}return i}function cT(n){if(n._terminated)throw new Ct(it.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||rhe(n),n._firestoreClient}function rhe(n){var e,t,r;const i=n._freezeSettings(),a=function(o,l,u,c){return new Mue(o,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,TW(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Qde(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vo(Ma.fromBase64String(e))}catch(t){throw new Ct(it.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vo(Ma.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vo._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(D_(e,Vo._jsonSchema))return Vo.fromBase64String(e.bytes)}}Vo._jsonSchemaVersion="firestore/bytes/1.0",Vo._jsonSchema={type:Yi("string",Vo._jsonSchemaVersion),bytes:Yi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ct(it.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Aa(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ct(it.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ct(it.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Un(this._lat,e._lat)||Un(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pu._jsonSchemaVersion}}static fromJSON(e){if(D_(e,pu._jsonSchema))return new pu(e.latitude,e.longitude)}}pu._jsonSchemaVersion="firestore/geoPoint/1.0",pu._jsonSchema={type:Yi("string",pu._jsonSchemaVersion),latitude:Yi("number"),longitude:Yi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:mu._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(D_(e,mu._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new mu(e.vectorValues);throw new Ct(it.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mu._jsonSchemaVersion="firestore/vectorValue/1.0",mu._jsonSchema={type:Yi("string",mu._jsonSchemaVersion),vectorValues:Yi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ihe=/^__.*__$/;class ahe{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Zm(e,this.data,this.fieldMask,t,this.fieldTransforms):new L_(e,this.data,t,this.fieldTransforms)}}function IW(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gn(40011,{Ec:n})}}class PD{constructor(e,t,r,i,a,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new PD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return oE(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(IW(this.Ec)&&ihe.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class she{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||sT(e)}Dc(e,t,r,i=!1){return new PD({Ec:e,methodName:t,bc:r,path:Aa.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ND(n){const e=n._freezeSettings(),t=sT(n._databaseId);return new she(n._databaseId,!!e.ignoreUndefinedProperties,t)}function PW(n,e,t,r,i,a={}){const s=n.Dc(a.merge||a.mergeFields?2:0,e,t,i);DW("Data must be an object, but it was:",s,r);const o=NW(r,s);let l,u;if(a.merge)l=new lu(s.fieldMask),u=s.fieldTransforms;else if(a.mergeFields){const c=[];for(const d of a.mergeFields){const f=lhe(e,d,t);if(!s.contains(f))throw new Ct(it.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);che(c,f)||c.push(f)}l=new lu(c),u=s.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=s.fieldTransforms;return new ahe(new _l(o),l,u)}class RD extends hT{_toFieldTransform(e){return new tce(e.path,new U1)}isEqual(e){return e instanceof RD}}function ohe(n,e,t,r=!1){return DD(t,n.Dc(r?4:3,e))}function DD(n,e){if(RW(n=Ca(n)))return DW("Unsupported field value:",e,n),NW(n,e);if(n instanceof hT)return function(r,i){if(!IW(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const a=[];let s=0;for(const o of r){let l=DD(o,i.yc(s));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),s++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=Ca(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Que(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Ur.fromDate(r);return{timestampValue:rE(i.serializer,a)}}if(r instanceof Ur){const a=new Ur(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:rE(i.serializer,a)}}if(r instanceof pu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vo)return{bytesValue:$G(i.serializer,r._byteString)};if(r instanceof Ui){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:gD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof mu)return function(s,o){return{mapValue:{fields:{[bG]:{stringValue:SG},[JS]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw o.wc("VectorValues must only contain numeric values.");return hD(o.serializer,u)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${ZA(r)}`)}(n,e)}function NW(n,e){const t={};return gG(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Km(n,(r,i)=>{const a=DD(i,e.Vc(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function RW(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ur||n instanceof pu||n instanceof Vo||n instanceof Ui||n instanceof hT||n instanceof mu)}function DW(n,e,t){if(!RW(t)||!pG(t)){const r=ZA(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function lhe(n,e,t){if((e=Ca(e))instanceof dT)return e._internalPath;if(typeof e=="string")return LW(n,e);throw oE("Field path arguments must be of type string or ",n,!1,void 0,t)}const uhe=new RegExp("[~\\*/\\[\\]]");function LW(n,e,t){if(e.search(uhe)>=0)throw oE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dT(...e.split("."))._internalPath}catch{throw oE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function oE(n,e,t,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||s)&&(l+=" (found",a&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new Ct(it.INVALID_ARGUMENT,o+n+l)}function che(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ui(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dhe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class dhe extends OW{data(){return super.data()}}function fT(n,e){return typeof e=="string"?LW(n,e):e instanceof dT?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hhe(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ct(it.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class LD{}class pT extends LD{}function mT(n,e,...t){let r=[];e instanceof LD&&r.push(e),r=r.concat(t),function(a){const s=a.filter(l=>l instanceof gT).length,o=a.filter(l=>l instanceof B_).length;if(s>1||s>0&&o>0)throw new Ct(it.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class B_ extends pT{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new B_(e,t,r)}_apply(e){const t=this._parse(e);return BW(e._query,t),new Jm(e.firestore,e.converter,iN(e._query,t))}_parse(e){const t=ND(e.firestore);return function(a,s,o,l,u,c,d){let f;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Ct(it.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){c6(d,c);const v=[];for(const _ of d)v.push(u6(l,a,_));f={arrayValue:{values:v}}}else f=u6(l,a,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||c6(d,c),f=ohe(o,s,d,c==="in"||c==="not-in");return Xi.create(u,c,f)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function FW(n,e,t){const r=e,i=fT("where",n);return B_._create(i,r,t)}class gT extends LD{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gT(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:xu.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let s=i;const o=a.getFlattenedFilters();for(const l of o)BW(s,l),s=iN(s,l)}(e._query,t),new Jm(e.firestore,e.converter,iN(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vT extends pT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new vT(e,t)}_apply(e){const t=function(i,a,s){if(i.startAt!==null)throw new Ct(it.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ct(it.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new B1(a,s)}(e._query,this._field,this._direction);return new Jm(e.firestore,e.converter,function(i,a){const s=i.explicitOrderBy.concat([a]);return new ry(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function jW(n,e="asc"){const t=e,r=fT("orderBy",n);return vT._create(r,t)}class yT extends pT{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new yT(e,t,r)}_apply(e){return new Jm(e.firestore,e.converter,tE(e._query,this._limit,this._limitType))}}function OD(n){return yue("limit",n),yT._create("limit",n,"F")}function u6(n,e,t){if(typeof(t=Ca(t))=="string"){if(t==="")throw new Ct(it.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PG(e)&&t.indexOf("/")!==-1)throw new Ct(it.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Gr.fromString(t));if(!en.isDocumentKey(r))throw new Ct(it.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tj(n,new en(r))}if(t instanceof Ui)return Tj(n,t._key);throw new Ct(it.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ZA(t)}.`)}function c6(n,e){if(!Array.isArray(n)||n.length===0)throw new Ct(it.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BW(n,e){const t=function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ct(it.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ct(it.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class UW{convertValue(e,t="none"){switch(Tf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Af(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw gn(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Km(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[JS].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Fi(s.doubleValue));return new mu(a)}convertGeoPoint(e){return new pu(Fi(e.latitude),Fi(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=eT(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(F1(e));default:return null}}convertTimestamp(e){const t=Ef(e);return new Ur(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Gr.fromString(e);br(JG(r),9688,{name:e});const i=new Ev(r.get(1),r.get(3)),a=new en(r.popFirst(5));return i.isEqual(t)||kd(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VW(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class x0{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pf extends OW{constructor(e,t,r,i,a,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(fT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ct(it.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=pf._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}pf._jsonSchemaVersion="firestore/documentSnapshot/1.0",pf._jsonSchema={type:Yi("string",pf._jsonSchemaVersion),bundleSource:Yi("string","DocumentSnapshot"),bundleName:Yi("string"),bundle:Yi("string")};class Yx extends pf{data(e={}){return super.data(e)}}class dm{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new x0(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Yx(this._firestore,this._userDataWriter,r.key,r,new x0(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ct(it.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const l=new Yx(i._firestore,i._userDataWriter,o.doc.key,o.doc,new x0(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const l=new Yx(i._firestore,i._userDataWriter,o.doc.key,o.doc,new x0(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:fhe(o.type),doc:l,oldIndex:u,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ct(it.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=dm._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=YA.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function fhe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gn(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(n){n=vc(n,Ui);const e=vc(n.firestore,eg);return the(cT(e),n._key).then(t=>phe(e,n,t))}dm._jsonSchemaVersion="firestore/querySnapshot/1.0",dm._jsonSchema={type:Yi("string",dm._jsonSchemaVersion),bundleSource:Yi("string","QuerySnapshot"),bundleName:Yi("string"),bundle:Yi("string")};class zW extends UW{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ui(this.firestore,null,t)}}function sa(n){n=vc(n,Jm);const e=vc(n.firestore,eg),t=cT(e),r=new zW(e);return hhe(n._query),nhe(t,n._query).then(i=>new dm(e,r,n,i))}function ms(n,e,t){n=vc(n,Ui);const r=vc(n.firestore,eg),i=VW(n.converter,e,t);return xT(r,[PW(ND(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,fu.none())])}function Ch(n){return xT(vc(n.firestore,eg),[new fD(n._key,fu.none())])}function hm(n,e){const t=vc(n.firestore,eg),r=_r(n),i=VW(n.converter,e);return xT(t,[PW(ND(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,fu.exists(!1))]).then(()=>r)}function xT(n,e){return function(r,i){const a=new pd;return r.asyncQueue.enqueueAndForget(async()=>Hde(await ehe(r),i,a)),a.promise}(cT(n),e)}function phe(n,e,t){const r=t.docs.get(e._key),i=new zW(n);return new pf(n,i,e._key,r,new x0(t.hasPendingWrites,t.fromCache),e.converter)}function lE(){return new RD("serverTimestamp")}(function(e,t=!0){(function(i){ey=i})(Qv),gc(new yu("firestore",(r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new eg(new due(r.getProvider("auth-internal")),new pue(s,r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ct(it.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ev(u.options.projectId,c)}(s,i),s);return a=Object.assign({useFetchStreams:t},a),o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),Al(hj,fj,e),Al(hj,fj,"esm2017")})();const Qh=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:UW,Bytes:Vo,CollectionReference:md,DocumentReference:Ui,DocumentSnapshot:pf,FieldPath:dT,FieldValue:hT,Firestore:eg,FirestoreError:Ct,GeoPoint:pu,Query:Jm,QueryCompositeFilterConstraint:gT,QueryConstraint:pT,QueryDocumentSnapshot:Yx,QueryFieldFilterConstraint:B_,QueryLimitConstraint:yT,QueryOrderByConstraint:vT,QuerySnapshot:dm,SnapshotMetadata:x0,Timestamp:Ur,VectorValue:mu,_AutoId:YA,_ByteString:Ma,_DatabaseId:Ev,_DocumentKey:en,_EmptyAuthCredentialsProvider:cG,_FieldPath:Aa,_cast:vc,_logWarn:Cd,_validateIsNotUsedTogether:fG,addDoc:hm,collection:ti,connectFirestoreEmulator:CW,deleteDoc:Ch,doc:_r,ensureFirestoreConfigured:cT,executeWrite:xT,getDoc:Vf,getDocs:sa,getFirestore:ID,limit:OD,orderBy:jW,query:mT,serverTimestamp:lE,setDoc:ms,where:FW},Symbol.toStringTag,{value:"Module"})),HW="@firebase/installations",FD="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GW=1e4,WW=`w:${FD}`,qW="FIS_v2",mhe="https://firebaseinstallations.googleapis.com/v1",ghe=60*60*1e3,vhe="installations",yhe="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xhe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},km=new Wm(vhe,yhe,xhe);function $W(n){return n instanceof Eu&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XW({projectId:n}){return`${mhe}/projects/${n}/installations`}function KW(n){return{token:n.token,requestStatus:2,expiresIn:whe(n.expiresIn),creationTime:Date.now()}}async function YW(n,e){const r=(await e.json()).error;return km.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function ZW({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function _he(n,{refreshToken:e}){const t=ZW(n);return t.append("Authorization",bhe(e)),t}async function QW(n){const e=await n();return e.status>=500&&e.status<600?n():e}function whe(n){return Number(n.replace("s","000"))}function bhe(n){return`${qW} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function She({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=XW(n),i=ZW(n),a=e.getImmediate({optional:!0});if(a){const u=await a.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const s={fid:t,authVersion:qW,appId:n.appId,sdkVersion:WW},o={method:"POST",headers:i,body:JSON.stringify(s)},l=await QW(()=>fetch(r,o));if(l.ok){const u=await l.json();return{fid:u.fid||t,registrationStatus:2,refreshToken:u.refreshToken,authToken:KW(u.authToken)}}else throw await YW("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JW(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ehe(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ahe=/^[cdef][\w-]{21}$/,pN="";function The(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=khe(n);return Ahe.test(t)?t:pN}catch{return pN}}function khe(n){return Ehe(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eq=new Map;function tq(n,e){const t=_T(n);nq(t,e),Che(t,e)}function nq(n,e){const t=eq.get(n);if(t)for(const r of t)r(e)}function Che(n,e){const t=Mhe();t&&t.postMessage({key:n,fid:e}),Ihe()}let $p=null;function Mhe(){return!$p&&"BroadcastChannel"in self&&($p=new BroadcastChannel("[Firebase] FID Change"),$p.onmessage=n=>{nq(n.data.key,n.data.fid)}),$p}function Ihe(){eq.size===0&&$p&&($p.close(),$p=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Phe="firebase-installations-database",Nhe=1,Cm="firebase-installations-store";let JC=null;function jD(){return JC||(JC=xH(Phe,Nhe,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Cm)}}})),JC}async function uE(n,e){const t=_T(n),i=(await jD()).transaction(Cm,"readwrite"),a=i.objectStore(Cm),s=await a.get(t);return await a.put(e,t),await i.done,(!s||s.fid!==e.fid)&&tq(n,e.fid),e}async function rq(n){const e=_T(n),r=(await jD()).transaction(Cm,"readwrite");await r.objectStore(Cm).delete(e),await r.done}async function wT(n,e){const t=_T(n),i=(await jD()).transaction(Cm,"readwrite"),a=i.objectStore(Cm),s=await a.get(t),o=e(s);return o===void 0?await a.delete(t):await a.put(o,t),await i.done,o&&(!s||s.fid!==o.fid)&&tq(n,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD(n){let e;const t=await wT(n.appConfig,r=>{const i=Rhe(r),a=Dhe(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===pN?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Rhe(n){const e=n||{fid:The(),registrationStatus:0};return iq(e)}function Dhe(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(km.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Lhe(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Ohe(n)}:{installationEntry:e}}async function Lhe(n,e){try{const t=await She(n,e);return uE(n.appConfig,t)}catch(t){throw $W(t)&&t.customData.serverCode===409?await rq(n.appConfig):await uE(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function Ohe(n){let e=await d6(n.appConfig);for(;e.registrationStatus===1;)await JW(100),e=await d6(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await BD(n);return r||t}return e}function d6(n){return wT(n,e=>{if(!e)throw km.create("installation-not-found");return iq(e)})}function iq(n){return Fhe(n)?{fid:n.fid,registrationStatus:0}:n}function Fhe(n){return n.registrationStatus===1&&n.registrationTime+GW<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jhe({appConfig:n,heartbeatServiceProvider:e},t){const r=Bhe(n,t),i=_he(n,t),a=e.getImmediate({optional:!0});if(a){const u=await a.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const s={installation:{sdkVersion:WW,appId:n.appId}},o={method:"POST",headers:i,body:JSON.stringify(s)},l=await QW(()=>fetch(r,o));if(l.ok){const u=await l.json();return KW(u)}else throw await YW("Generate Auth Token",l)}function Bhe(n,{fid:e}){return`${XW(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UD(n,e=!1){let t;const r=await wT(n.appConfig,a=>{if(!aq(a))throw km.create("not-registered");const s=a.authToken;if(!e&&zhe(s))return a;if(s.requestStatus===1)return t=Uhe(n,e),a;{if(!navigator.onLine)throw km.create("app-offline");const o=Ghe(a);return t=Vhe(n,o),o}});return t?await t:r.authToken}async function Uhe(n,e){let t=await h6(n.appConfig);for(;t.authToken.requestStatus===1;)await JW(100),t=await h6(n.appConfig);const r=t.authToken;return r.requestStatus===0?UD(n,e):r}function h6(n){return wT(n,e=>{if(!aq(e))throw km.create("not-registered");const t=e.authToken;return Whe(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Vhe(n,e){try{const t=await jhe(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await uE(n.appConfig,r),t}catch(t){if($W(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await rq(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await uE(n.appConfig,r)}throw t}}function aq(n){return n!==void 0&&n.registrationStatus===2}function zhe(n){return n.requestStatus===2&&!Hhe(n)}function Hhe(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+ghe}function Ghe(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function Whe(n){return n.requestStatus===1&&n.requestTime+GW<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qhe(n){const e=n,{installationEntry:t,registrationPromise:r}=await BD(e);return r?r.catch(console.error):UD(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $he(n,e=!1){const t=n;return await Xhe(t),(await UD(t,e)).token}async function Xhe(n){const{registrationPromise:e}=await BD(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Khe(n){if(!n||!n.options)throw eM("App Configuration");if(!n.name)throw eM("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw eM(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function eM(n){return km.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sq="installations",Yhe="installations-internal",Zhe=n=>{const e=n.getProvider("app").getImmediate(),t=Khe(e),r=qm(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Qhe=n=>{const e=n.getProvider("app").getImmediate(),t=qm(e,sq).getImmediate();return{getId:()=>qhe(t),getToken:i=>$he(t,i)}};function Jhe(){gc(new yu(sq,Zhe,"PUBLIC")),gc(new yu(Yhe,Qhe,"PRIVATE"))}Jhe();Al(HW,FD);Al(HW,FD,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="analytics",efe="firebase_id",tfe="origin",nfe=60*1e3,rfe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",VD="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=new HA("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ife={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Wo=new Wm("analytics","Analytics",ife);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function afe(n){if(!n.startsWith(VD)){const e=Wo.create("invalid-gtag-resource",{gtagURL:n});return Mo.warn(e.message),""}return n}function oq(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function sfe(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function ofe(n,e){const t=sfe("firebase-js-sdk-policy",{createScriptURL:afe}),r=document.createElement("script"),i=`${VD}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function lfe(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function ufe(n,e,t,r,i,a){const s=r[i];try{if(s)await e[s];else{const l=(await oq(t)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(o){Mo.error(o)}n("config",i,a)}async function cfe(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const o=await oq(t);for(const l of s){const u=o.find(d=>d.measurementId===l),c=u&&e[u.appId];if(c)a.push(c);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,i||{})}catch(a){Mo.error(a)}}function dfe(n,e,t,r){async function i(a,...s){try{if(a==="event"){const[o,l]=s;await cfe(n,e,t,o,l)}else if(a==="config"){const[o,l]=s;await ufe(n,e,t,r,o,l)}else if(a==="consent"){const[o,l]=s;n("consent",o,l)}else if(a==="get"){const[o,l,u]=s;n("get",o,l,u)}else if(a==="set"){const[o]=s;n("set",o)}else n(a,...s)}catch(o){Mo.error(o)}}return i}function hfe(n,e,t,r,i){let a=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=dfe(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}function ffe(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(VD)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pfe=30,mfe=1e3;class gfe{constructor(e={},t=mfe){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const lq=new gfe;function vfe(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function yfe(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:vfe(r)},a=rfe.replace("{app-id}",t),s=await fetch(a,i);if(s.status!==200&&s.status!==304){let o="";try{const l=await s.json();!((e=l.error)===null||e===void 0)&&e.message&&(o=l.error.message)}catch{}throw Wo.create("config-fetch-failed",{httpStatus:s.status,responseMessage:o})}return s.json()}async function xfe(n,e=lq,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw Wo.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw Wo.create("no-api-key")}const s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new bfe;return setTimeout(async()=>{o.abort()},nfe),uq({appId:r,apiKey:i,measurementId:a},s,o,e)}async function uq(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=lq){var a;const{appId:s,measurementId:o}=n;try{await _fe(r,e)}catch(l){if(o)return Mo.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:o};throw l}try{const l=await yfe(n);return i.deleteThrottleMetadata(s),l}catch(l){const u=l;if(!wfe(u)){if(i.deleteThrottleMetadata(s),o)return Mo.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:s,measurementId:o};throw l}const c=Number((a=u==null?void 0:u.customData)===null||a===void 0?void 0:a.httpStatus)===503?O8(t,i.intervalMillis,pfe):O8(t,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+c,backoffCount:t+1};return i.setThrottleMetadata(s,d),Mo.debug(`Calling attemptFetch again in ${c} millis`),uq(n,d,r,i)}}function _fe(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Wo.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function wfe(n){if(!(n instanceof Eu)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class bfe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Sfe(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const a=await e,s=Object.assign(Object.assign({},r),{send_to:a});n("event",t,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Efe(){if(mH())try{await gH()}catch(n){return Mo.warn(Wo.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Mo.warn(Wo.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Afe(n,e,t,r,i,a,s){var o;const l=xfe(n);l.then(m=>{t[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&Mo.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Mo.error(m)),e.push(l);const u=Efe().then(m=>{if(m)return r.getId()}),[c,d]=await Promise.all([l,u]);ffe(a)||ofe(a,c.measurementId),i("js",new Date);const f=(o=s==null?void 0:s.config)!==null&&o!==void 0?o:{};return f[tfe]="firebase",f.update=!0,d!=null&&(f[efe]=d),i("config",c.measurementId,f),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tfe{constructor(e){this.app=e}_delete(){return delete Zx[this.app.options.appId],Promise.resolve()}}let Zx={},f6=[];const p6={};let tM="dataLayer",kfe="gtag",m6,cq,g6=!1;function Cfe(){const n=[];if(pH()&&n.push("This is a browser extension environment."),Mae()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Wo.create("invalid-analytics-context",{errorInfo:e});Mo.warn(t.message)}}function Mfe(n,e,t){Cfe();const r=n.options.appId;if(!r)throw Wo.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Mo.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Wo.create("no-api-key");if(Zx[r]!=null)throw Wo.create("already-exists",{id:r});if(!g6){lfe(tM);const{wrappedGtag:a,gtagCore:s}=hfe(Zx,f6,p6,tM,kfe);cq=a,m6=s,g6=!0}return Zx[r]=Afe(n,f6,p6,e,m6,tM,t),new Tfe(n)}function Ife(n=GA()){n=Ca(n);const e=qm(n,cE);return e.isInitialized()?e.getImmediate():Pfe(n)}function Pfe(n,e={}){const t=qm(n,cE);if(t.isInitialized()){const i=t.getImmediate();if(bf(e,t.getOptions()))return i;throw Wo.create("already-initialized")}return t.initialize({options:e})}function Nfe(n,e,t,r){n=Ca(n),Sfe(cq,Zx[n.app.options.appId],e,t,r).catch(i=>Mo.error(i))}const v6="@firebase/analytics",y6="0.10.17";function Rfe(){gc(new yu(cE,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Mfe(r,i,t)},"PUBLIC")),gc(new yu("analytics-internal",n,"PRIVATE")),Al(v6,y6),Al(v6,y6,"esm2017");function n(e){try{const t=e.getProvider(cE).getImmediate();return{logEvent:(r,i,a)=>Nfe(t,r,i,a)}}catch(t){throw Wo.create("interop-component-reg-failed",{reason:t})}}}Rfe();const Dfe={apiKey:"AIzaSyBe-XLmVRiMs844VxR1_awMzGEGARb6Xmk",authDomain:"website-mpn-65e8d.firebaseapp.com",projectId:"website-mpn-65e8d",storageBucket:"website-mpn-65e8d.firebasestorage.app",messagingSenderId:"798271486726",appId:"1:798271486726:web:0d0e0178a963804f627c87",measurementId:"G-KSVPVC1Z9D"},bT=_H(Dfe),Tl=lue(bT);Koe(Tl,qH).catch(n=>{console.warn("Auth persistence configuration failed:",n)});const un=ID(bT);let dq=null;if(typeof window<"u")try{localStorage.getItem("cookieConsent")==="true"&&(dq=Ife(bT))}catch(n){console.warn("Analytics disabled due to cookie/storage restrictions:",n)}console.log("Firebase initialized successfully");const Jh=Object.freeze(Object.defineProperty({__proto__:null,get analytics(){return dq},app:bT,auth:Tl,db:un},Symbol.toStringTag,{value:"Module"})),hq="main",fq="meta";async function zD(){const n=_r(un,fq,hq),e=await Vf(n);return e.exists()?e.data():null}async function Lfe(n){const e=_r(un,fq,hq);await ms(e,n,{merge:!0})}const ru=[{imageUrl:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/anggota%20mahapala%20narotama.jpg",alt:"Anggota Mahapala Narotama",title:"Kebersamaan adalah simbol Kekuatan",description:"Bergabunglah dalam misi kami untuk melindungi lingkungan dan eksplorasi alam."},{imageUrl:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/eksplorasi%20alam.jpg",alt:"Pendidikan Rimba Gunung Mahapala Narotama",title:"Petualangan Tanpa Batas",description:"Eksplorasi keindahan alam Indonesia bersama Mahapala Narotama."},{imageUrl:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/panjat%20tebing.png",alt:"Pendidikan Panjat Tebing Mahapala Narotama",title:"Keseruan dalam Berpetualang",description:"Kami berkomitmen untuk pendidikan lingkungan dan pelestarian alam."}],pq="main",mq="homepage";async function gq(){const n=_r(un,mq,pq),e=await Vf(n);if(e.exists()){const t=e.data();if(Array.isArray(t.carouselContent)&&t.carouselContent.length>0){const r=t.carouselContent.filter(i=>!ru.some(a=>a.title===i.title));return[...ru,...r]}}return await mN(ru),[...ru]}async function mN(n){const e=_r(un,mq,pq);await ms(e,{carouselContent:n},{merge:!0})}const vq="devlog";async function hl(n){await hm(ti(un,vq),{...n,createdAt:Ur.now()})}async function Ofe(){const n=mT(ti(un,vq),jW("createdAt","desc"));return(await sa(n)).docs.map(t=>{var i,a;const r=t.data();return{action:r.action,detail:r.detail,user:r.user,createdAt:((a=(i=r.createdAt)==null?void 0:i.toDate)==null?void 0:a.call(i))||new Date}})}const x6={title:"Mahapala Narotama - Organisasi Pecinta Alam | MPN | UKM Narotama",description:"Mahapala Narotama (MPN) adalah UKM Pecinta Alam Universitas Narotama Surabaya. Info kegiatan, pembelajaran, dan anggota Mahapala Narotama.",keywords:"Mahapala Narotama, mahapala narotama, MPN, ukm narotama, mahapalanarotama, organisasi pecinta alam, mapala, mahasiswa, surabaya, universitas narotama",image:"https://opengraph.b-cdn.net/production/images/e0842583-257e-46c1-9055-1c49ee456d3f.jpg?token=p3fN6dOPVL12p7_4AZrWfifa4bvHLMnndwMwNRQCpwg&height=900&width=1200&expires=33285527673",favicon:"/favicon.ico",faviconFallback:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/favicon.ico",faviconPng:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/favicon.png",googleFormUrl:"",googleFormDownloadUrl:""};function Ffe(){const[n,e]=M.useState(x6),[t,r]=M.useState(!1),[i,a]=M.useState(!1),[s,o]=M.useState(n),[l,u]=M.useState(!1),[c,d]=M.useState(null),[f,m]=M.useState(""),[v,_]=M.useState(""),[w,x]=M.useState(""),[S,E]=M.useState(!0),[T,D]=M.useState("meta"),[F,P]=M.useState({title:"",description:"",whatsapp:"",email:"",instagram:""}),[N,I]=M.useState([]),[R,B]=M.useState(!1);M.useEffect(()=>{T==="contact"&&(B(!0),gs(async()=>{const{db:fe}=await Promise.resolve().then(()=>Jh);return{db:fe}},[]).then(({db:fe})=>{gs(async()=>{const{doc:Ze,getDoc:Qe}=await Promise.resolve().then(()=>Qh);return{doc:Ze,getDoc:Qe}},void 0).then(({doc:Ze,getDoc:Qe})=>{Qe(Ze(fe,"homepage","contact")).then(Oe=>{if(Oe.exists()){const dt=Oe.data();P({title:dt.title||"",description:dt.description||"",whatsapp:dt.whatsapp||"",email:dt.email||"",instagram:dt.instagram||""}),I(Array.isArray(dt.cards)?dt.cards.map(vt=>typeof vt=="object"&&vt&&("name"in vt||"value"in vt||"icon"in vt)?{title:vt.name||"",description:vt.icon||"",content:vt.value?[vt.value]:[]}:"title"in vt&&"description"in vt&&"content"in vt?vt:{title:"",description:"",content:[]}):[])}else P({title:"",description:"",whatsapp:"",email:"",instagram:""}),I([]);B(!1)})})}))},[T]);const[G,H]=M.useState(!1),[K,ne]=M.useState(""),[re,oe]=M.useState(""),[$,ue]=M.useState(""),[se,pe]=M.useState(""),[Fe,$e]=M.useState(!1),[at,me]=M.useState(!1),[Le,Se]=M.useState(!1),[ge,Ge]=M.useState(!1),[Me,Ce]=M.useState([]),[Te,te]=M.useState(!1),[Ee,Pe]=M.useState(null),[Ke,je]=M.useState(null),[st,tt]=M.useState(!1),[ee,qe]=M.useState([]),[Ye,Z]=M.useState(!1),[X,ve]=M.useState(!1),[Ie,He]=M.useState(!1),[we,pt]=M.useState(null),[lt,St]=M.useState(null);M.useEffect(()=>{T==="visimisi"&&($e(!0),gs(async()=>{const{db:fe}=await Promise.resolve().then(()=>Jh);return{db:fe}},void 0).then(({db:fe})=>{gs(async()=>{const{doc:Ze,getDoc:Qe}=await Promise.resolve().then(()=>Qh);return{doc:Ze,getDoc:Qe}},void 0).then(({doc:Ze,getDoc:Qe})=>{Qe(Ze(fe,"homepage","visimisi")).then(Oe=>{Oe.exists()&&(ne(Oe.data().visi||""),oe(Oe.data().misi||""),ue(Oe.data().visi||""),pe(Oe.data().misi||""),me(!1)),$e(!1)})})}))},[T]);const bt=async()=>{$e(!0);const{db:fe}=await gs(async()=>{const{db:Oe}=await Promise.resolve().then(()=>Jh);return{db:Oe}},void 0),{doc:Ze,setDoc:Qe}=await gs(async()=>{const{doc:Oe,setDoc:dt}=await Promise.resolve().then(()=>Qh);return{doc:Oe,setDoc:dt}},void 0);await Qe(Ze(fe,"homepage","visimisi"),{visi:$,misi:se},{merge:!0}),ne($),oe(se),$e(!1),me(!1)};M.useEffect(()=>{T==="homepage"&&c&&(te(!0),gq().then(fe=>{const Ze=(fe||[]).filter(Qe=>!ru.some(Oe=>Oe.title===Qe.title));Ce([...ru,...Ze]),te(!1)}))},[T,c]);const ut=(fe,Ze)=>{Pe(fe),je(Ze),tt(!0)},xt=()=>{Pe({imageUrl:"",alt:"",title:"",description:""}),je(null),tt(!0)},Bt=fe=>{if(window.confirm("Hapus slide ini?")){let Ze=[...Me];Ze.splice(fe,1),Ze.length<ru.length&&(Ze=[...ru]),Ce(Ze),mN(Ze)}};M.useEffect(()=>{const fe=$A(Tl,Ze=>{d(Ze),E(!1)});return()=>fe()},[]),M.useEffect(()=>{c&&zD().then(fe=>{fe&&(e(fe),o(fe))})},[c]),M.useEffect(()=>{T==="logadmin"&&(Z(!0),Ofe().then(fe=>{qe(fe),Z(!1)}))},[T]);const ce=fe=>{o({...s,[fe.target.name]:fe.target.value})},Ne=()=>{a(!0),o(n)},ht=async()=>{await Lfe(s),e(s),a(!1),u(!1),c!=null&&c.email&&await hl({action:"Edit Meta",detail:"Meta diubah melalui halaman developer",user:c.email})},de=()=>{u(!1)},nt=async fe=>{fe.preventDefault(),x("");try{await nD(Tl,f,v)}catch(Ze){Ze.code==="auth/invalid-credential"?x("Email / Password Salah!"):x("Login gagal: "+Ze.message)}};return S?h.jsx("div",{className:"text-center py-20",children:"Loading..."}):c?h.jsxs("div",{className:"max-w-2xl mx-auto py-10 px-4",children:[h.jsx("h1",{className:"text-3xl font-extrabold mb-8 text-center text-primary",children:"Developer Tools"}),h.jsxs("div",{className:"mb-6 flex gap-2 border-b border-blue-200 overflow-x-auto scrollbar-hide px-1 -mx-2 whitespace-nowrap",style:{WebkitOverflowScrolling:"touch"},children:[h.jsxs("button",{className:`flex items-center gap-1 sm:gap-2 group transition-all duration-200 bg-muted px-2 sm:px-4 py-2 rounded-t-lg data-[active=true]:bg-primary/10 data-[active=true]:shadow-lg data-[active=true]:scale-105 data-[active=true]:text-primary data-[active=false]:hover:bg-muted/70 data-[active=false]:bg-muted/90 min-w-[64px] sm:min-w-[140px] justify-center ${T==="meta"?"data-[active=true]":"data-[active=false]"}`,"data-active":T==="meta",onClick:()=>D("meta"),children:[h.jsx("span",{className:"flex items-center justify-center p-0 sm:p-1",children:h.jsxs("svg",{width:"22",height:"22",className:"sm:w-[26px] sm:h-[26px] text-blue-600",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M16 18v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),h.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),h.jsx("span",{className:"hidden sm:inline transition-all duration-200 group-hover:inline group-focus:inline group-active:inline group-data-[active=true]:inline ml-1 group-hover:font-semibold group-data-[active=true]:font-bold group-data-[active=true]:text-primary",children:"Meta"})]}),h.jsxs("button",{className:`flex items-center gap-1 sm:gap-2 group transition-all duration-200 bg-muted px-2 sm:px-4 py-2 rounded-t-lg data-[active=true]:bg-primary/10 data-[active=true]:shadow-lg data-[active=true]:scale-105 data-[active=true]:text-primary data-[active=false]:hover:bg-muted/70 data-[active=false]:bg-muted/90 min-w-[64px] sm:min-w-[140px] justify-center ${T==="logadmin"?"data-[active=true]":"data-[active=false]"}`,"data-active":T==="logadmin",onClick:()=>D("logadmin"),children:[h.jsx("span",{className:"flex items-center justify-center p-0 sm:p-1",children:h.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",className:"sm:w-[26px] sm:h-[26px] text-blue-600",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("path",{d:"M12 6v6l4 2"})]})}),h.jsx("span",{className:"hidden sm:inline transition-all duration-200 group-hover:inline group-focus:inline group-active:inline group-data-[active=true]:inline ml-1 group-hover:font-semibold group-data-[active=true]:font-bold group-data-[active=true]:text-primary",children:"Log Admin"})]}),h.jsxs("button",{className:`flex items-center gap-1 sm:gap-2 group transition-all duration-200 bg-muted px-2 sm:px-4 py-2 rounded-t-lg data-[active=true]:bg-primary/10 data-[active=true]:shadow-lg data-[active=true]:scale-105 data-[active=true]:text-primary data-[active=false]:hover:bg-muted/70 data-[active=false]:bg-muted/90 min-w-[64px] sm:min-w-[140px] justify-center ${T==="homepage"?"data-[active=true]":"data-[active=false]"}`,"data-active":T==="homepage",onClick:()=>D("homepage"),children:[h.jsx("span",{className:"flex items-center justify-center p-0 sm:p-1",children:h.jsxs("svg",{width:"22",height:"22",className:"sm:w-[26px] sm:h-[26px] text-blue-600",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),h.jsx("path",{d:"M3 9h18"}),h.jsx("path",{d:"M9 21V9"})]})}),h.jsx("span",{className:"hidden sm:inline transition-all duration-200 group-hover:inline group-focus:inline group-active:inline group-data-[active=true]:inline ml-1 group-hover:font-semibold group-data-[active=true]:font-bold group-data-[active=true]:text-primary",children:"Homepage"})]}),h.jsxs("button",{className:`flex items-center gap-1 sm:gap-2 group transition-all duration-200 bg-muted px-2 sm:px-4 py-2 rounded-t-lg data-[active=true]:bg-primary/10 data-[active=true]:shadow-lg data-[active=true]:scale-105 data-[active=true]:text-primary data-[active=false]:hover:bg-muted/70 data-[active=false]:bg-muted/90 min-w-[64px] sm:min-w-[140px] justify-center ${T==="visimisi"?"data-[active=true]":"data-[active=false]"}`,"data-active":T==="visimisi",onClick:()=>D("visimisi"),children:[h.jsx("span",{className:"flex items-center justify-center p-0 sm:p-1",children:h.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",className:"sm:w-[26px] sm:h-[26px] text-green-600",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("circle",{cx:"12",cy:"12",r:"6"}),h.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),h.jsx("span",{className:"hidden sm:inline transition-all duration-200 group-hover:inline group-focus:inline group-active:inline group-data-[active=true]:inline ml-1 group-hover:font-semibold group-data-[active=true]:font-bold group-data-[active=true]:text-primary",children:"Visi & Misi"})]}),h.jsxs("button",{className:`flex items-center gap-1 sm:gap-2 group transition-all duration-200 bg-muted px-2 sm:px-4 py-2 rounded-t-lg data-[active=true]:bg-primary/10 data-[active=true]:shadow-lg data-[active=true]:scale-105 data-[active=true]:text-primary data-[active=false]:hover:bg-muted/70 data-[active=false]:bg-muted/90 min-w-[64px] sm:min-w-[140px] justify-center ${T==="contact"?"data-[active=true]":"data-[active=false]"}`,"data-active":T==="contact",onClick:()=>D("contact"),children:[h.jsx("span",{className:"flex items-center justify-center p-0 sm:p-1",children:h.jsx("svg",{width:"22",height:"22",className:"sm:w-[26px] sm:h-[26px] text-blue-600",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M21 10.5a8.38 8.38 0 0 1-1.9.5 3.48 3.48 0 0 0-2.6-1.5c-1.7 0-3 1.3-3 3 0 .2 0 .4.1.6A8.5 8.5 0 0 1 3 5.5a3 3 0 0 0 1 4c-.9 0-1.7-.3-2.4-.7v.1c0 1.5 1.1 2.8 2.6 3.1-.3.1-.6.2-.9.2-.2 0-.4 0-.6-.1.4 1.2 1.5 2.1 2.8 2.1A6.9 6.9 0 0 1 2 18.5c-.2 0-.4 0-.6-.1A9.9 9.9 0 0 0 8 20.5c6.3 0 9.8-5.2 9.8-9.8v-.4A7.1 7.1 0 0 0 21 10.5z"})})}),h.jsx("span",{className:"hidden sm:inline transition-all duration-200 group-hover:inline group-focus:inline group-active:inline group-data-[active=true]:inline ml-1 group-hover:font-semibold group-data-[active=true]:font-bold group-data-[active=true]:text-primary",children:"Contact"})]})]}),h.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-green-50 rounded-2xl shadow-lg p-8 border border-blue-100 min-h-[400px]",children:[T==="contact"&&h.jsxs(h.Fragment,{children:[h.jsxs("h2",{className:"font-bold text-xl mb-4 text-blue-900 flex items-center gap-2",children:[h.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-blue-600",children:h.jsx("path",{d:"M21 10.5a8.38 8.38 0 0 1-1.9.5 3.48 3.48 0 0 0-2.6-1.5c-1.7 0-3 1.3-3 3 0 .2 0 .4.1.6A8.5 8.5 0 0 1 3 5.5a3 3 0 0 0 1 4c-.9 0-1.7-.3-2.4-.7v.1c0 1.5 1.1 2.8 2.6 3.1-.3.1-.6.2-.9.2-.2 0-.4 0-.6-.1.4 1.2 1.5 2.1 2.8 2.1A6.9 6.9 0 0 1 2 18.5c-.2 0-.4 0-.6-.1A9.9 9.9 0 0 0 8 20.5c6.3 0 9.8-5.2 9.8-9.8v-.4A7.1 7.1 0 0 0 21 10.5z"})}),"Edit Kontak & Hubungi Kami"]}),G?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("div",{className:"font-semibold mb-2",children:"Dialog Hubungi Kami"}),h.jsx("input",{className:"w-full border rounded p-2 mb-2",placeholder:"Judul (Default=Hubungi Kami)",value:F.title,onChange:fe=>P({...F,title:fe.target.value})}),h.jsx("textarea",{className:"w-full border rounded p-2 mb-2",placeholder:"Deskripsi (Opsional)",value:F.description,onChange:fe=>P({...F,description:fe.target.value})}),h.jsx("input",{className:"w-full border rounded p-2 mb-2",placeholder:"WhatsApp (+628xx-xxxx-xxxx)",value:F.whatsapp,onChange:fe=>P({...F,whatsapp:fe.target.value})}),h.jsx("input",{className:"w-full border rounded p-2 mb-2",placeholder:"Email (xxxx@gmail.com)",value:F.email,onChange:fe=>P({...F,email:fe.target.value})}),h.jsx("input",{className:"w-full border rounded p-2 mb-2",placeholder:"Instagram (not '@' just 'Admin')",value:F.instagram,onChange:fe=>P({...F,instagram:fe.target.value})})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("div",{className:"font-semibold mb-2",children:"Contact Cards (Pendaftaran)"}),N.map((fe,Ze)=>h.jsxs("div",{className:"border rounded p-3 mb-3 bg-white shadow-sm flex items-start gap-3",children:[fe.description&&fe.description.startsWith("fa-")?h.jsx("i",{className:`fa ${fe.description} text-xl text-blue-600 mt-1`,"aria-hidden":"true",style:{minWidth:28,textAlign:"center"}}):fe.description&&fe.description.startsWith("mdi-")?h.jsx("span",{className:`mdi ${fe.description} text-xl text-blue-600 mt-1`,style:{minWidth:28,textAlign:"center"}}):fe.description&&fe.description.startsWith("svg:")?h.jsx("span",{className:"inline-block mt-1",style:{minWidth:28,textAlign:"center"},dangerouslySetInnerHTML:{__html:fe.description.slice(4)}}):null,h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex gap-2 mb-2",children:[h.jsx("input",{className:"border rounded p-2 flex-1",placeholder:"Judul",value:fe.title,onChange:Qe=>{I(Oe=>Oe.map((dt,vt)=>vt===Ze?{...dt,title:Qe.target.value}:dt))}}),h.jsx("input",{className:"border rounded p-2 flex-1",placeholder:"Deskripsi (opsional, isi kode ikon: fa-whatsapp, mdi-phone, svg:<svg...>)",value:fe.description,onChange:Qe=>{I(Oe=>Oe.map((dt,vt)=>vt===Ze?{...dt,description:Qe.target.value}:dt))}})]}),h.jsxs("div",{className:"mb-2",children:[h.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Isi Konten (1 baris = 1 item)"}),h.jsx("textarea",{className:"border rounded p-2 w-full",rows:3,placeholder:"Isi konten, pisahkan baris untuk setiap item",value:fe.content.join(`
`),onChange:Qe=>{const Oe=Qe.target.value.split(/\r?\n/);I(dt=>dt.map((vt,En)=>En===Ze?{...vt,content:Oe}:vt))}})]}),Ze<3?h.jsx("button",{className:"bg-gray-300 text-gray-400 px-2 py-1 rounded cursor-not-allowed",disabled:!0,children:"Hapus (Wajib Ada)"}):h.jsx("button",{className:"bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded",onClick:()=>{window.confirm(`Centang kotak di bawah ini untuk menghapus:
 Saya yakin ingin menghapus card ini.`)&&I(Oe=>Oe.filter((dt,vt)=>vt!==Ze))},children:"Hapus"})]})]},Ze)),h.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded mt-2",onClick:()=>I(fe=>[...fe,{title:"",description:"",content:[""]}]),children:"Tambah Card"})]}),h.jsxs("div",{className:"flex gap-2 justify-end",children:[h.jsx("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded",onClick:()=>H(!1),children:"Batal"}),h.jsx("button",{className:`bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded shadow ${R?"opacity-60 cursor-not-allowed":""}`,disabled:R,onClick:()=>{pt("contact"),ve(!0)},children:R?"Menyimpan...":"Simpan"})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("div",{className:"font-semibold mb-2",children:"Dialog Hubungi Kami"}),h.jsxs("div",{className:"mb-2",children:[h.jsx("b",{children:"Judul:"})," ",F.title]}),h.jsxs("div",{className:"mb-2",children:[h.jsx("b",{children:"Deskripsi:"})," ",F.description]}),h.jsxs("div",{className:"mb-2",children:[h.jsx("b",{children:"WhatsApp:"})," ",F.whatsapp]}),h.jsxs("div",{className:"mb-2",children:[h.jsx("b",{children:"Email:"})," ",F.email]}),h.jsxs("div",{className:"mb-2",children:[h.jsx("b",{children:"Instagram:"})," ",F.instagram]})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("div",{className:"font-semibold mb-2",children:"Contact Cards (Pendaftaran)"}),N.length===0&&h.jsx("div",{className:"text-gray-400",children:"Belum ada contact card."}),N.map((fe,Ze)=>h.jsxs("div",{className:"border rounded p-3 mb-3 bg-white shadow-sm flex items-start gap-3",children:[fe.description&&fe.description.startsWith("fa-")?h.jsx("i",{className:`fa ${fe.description} text-xl text-blue-600 mt-1`,"aria-hidden":"true",style:{minWidth:28,textAlign:"center"}}):fe.description&&fe.description.startsWith("mdi-")?h.jsx("span",{className:`mdi ${fe.description} text-xl text-blue-600 mt-1`,style:{minWidth:28,textAlign:"center"}}):fe.description&&fe.description.startsWith("svg:")?h.jsx("span",{className:"inline-block mt-1",style:{minWidth:28,textAlign:"center"},dangerouslySetInnerHTML:{__html:fe.description.slice(4)}}):null,h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-bold text-base mb-1",children:fe.title}),fe.content.map((Qe,Oe)=>Qe.trim()===""?h.jsx("div",{style:{height:"1em"}},Oe):h.jsx("div",{className:"text-sm",children:Qe},Oe))]})]},Ze))]}),h.jsx("div",{className:"flex gap-2 justify-end",children:h.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded shadow",onClick:()=>H(!0),children:"Edit"})})]})]}),T==="visimisi"&&h.jsxs(h.Fragment,{children:[h.jsxs("h2",{className:"font-bold text-xl mb-4 text-green-900 flex items-center gap-2",children:[h.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-green-600",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("circle",{cx:"12",cy:"12",r:"6"}),h.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),"Visi & Misi Homepage"]}),Fe?h.jsx("div",{className:"text-center text-gray-500",children:"Memuat data..."}):h.jsx(h.Fragment,{children:at?h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block font-semibold mb-2 text-blue-700",children:"Edit Visi:"}),h.jsx("textarea",{className:"w-full border rounded p-2 bg-white",rows:2,value:$,onChange:fe=>ue(fe.target.value),placeholder:"Masukkan visi organisasi..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block font-semibold mb-2 text-green-700",children:"Edit Misi:"}),h.jsx("textarea",{className:"w-full border rounded p-2 bg-white",rows:4,value:se,onChange:fe=>pe(fe.target.value),placeholder:"Masukkan misi organisasi..."}),h.jsxs("div",{className:"text-xs text-gray-500 mt-1 mb-2",children:["Tekan ",h.jsx("b",{children:"Enter"})," untuk membuat misi dalam bentuk list/poin."]}),h.jsxs("div",{className:"mt-3",children:[h.jsx("span",{className:"block font-semibold mb-1 text-green-700",children:"Preview Misi:"}),se.split(/\r?\n/).filter(Boolean).length>1?h.jsx("ul",{className:"text-gray-700 list-disc pl-5 space-y-1",children:se.split(/\r?\n/).filter(Boolean).map((fe,Ze)=>h.jsx("li",{children:fe},Ze))}):h.jsx("p",{className:"text-gray-700 text-justify whitespace-pre-line",children:se})]})]}),h.jsxs("div",{className:"flex gap-4 justify-end mt-2",children:[h.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded shadow",onClick:()=>Se(!0),disabled:Fe,children:"Simpan"}),h.jsx("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded",onClick:()=>{ue(K),pe(re),me(!1)},children:"Batal"})]}),Le&&h.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/40 z-50",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-sm w-full",children:[h.jsx("h3",{className:"font-bold text-lg mb-2",children:"Konfirmasi Simpan Visi & Misi"}),h.jsx("p",{className:"mb-4",children:"Pastikan data sudah benar sebelum disimpan ke homepage."}),h.jsxs("label",{className:"flex items-center gap-2 mb-4",children:[h.jsx("input",{type:"checkbox",checked:ge,onChange:fe=>Ge(fe.target.checked)}),h.jsx("span",{className:"text-sm",children:"Saya sudah memeriksa dan data visi & misi sudah benar."})]}),h.jsxs("div",{className:"flex gap-2 justify-end",children:[h.jsx("button",{className:`px-4 py-2 rounded text-white transition ${!ge||Fe?"bg-green-300 cursor-not-allowed opacity-60":"bg-green-600 hover:bg-green-700 shadow"}`,disabled:!ge||Fe,onClick:async()=>{await bt(),window.dispatchEvent(new Event("visimisi-updated")),Se(!1),Ge(!1)},children:"Ya, Simpan"}),h.jsx("button",{className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded",onClick:()=>{Se(!1),Ge(!1)},children:"Batal"})]})]})})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block font-semibold mb-2 text-blue-700",children:"Visi (Tampil di Homepage):"}),h.jsx("div",{className:"mb-2 p-2 border rounded text-gray-700 whitespace-pre-line bg-transparent",children:K})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block font-semibold mb-2 text-green-700",children:"Misi (Tampil di Homepage):"}),h.jsx("div",{className:"mb-2 p-2 border rounded text-gray-700 bg-transparent",children:re.split(/\r?\n/).filter(Boolean).length>1?h.jsx("ul",{className:"list-disc pl-5 space-y-1",children:re.split(/\r?\n/).filter(Boolean).map((fe,Ze)=>h.jsx("li",{children:fe},Ze))}):h.jsx("span",{className:"whitespace-pre-line",children:re})})]})]}),h.jsx("div",{className:"flex gap-2 justify-end mt-6",children:h.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded shadow",onClick:()=>{me(!0),ue(K),pe(re)},children:"Edit"})})]})})]}),T==="homepage"&&h.jsxs(h.Fragment,{children:[h.jsxs("h2",{className:"font-bold text-xl mb-4 text-blue-900 flex items-center gap-2",children:[h.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-blue-600",children:[h.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),h.jsx("path",{d:"M3 9h18"}),h.jsx("path",{d:"M9 21V9"})]}),"Homepage Carousel Editor"]}),Te?h.jsx("div",{className:"text-center py-10 text-gray-500",children:"Memuat data carousel..."}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex justify-end mb-4",children:h.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded shadow",onClick:xt,children:"Tambah Slide"})}),Me.length===0?h.jsx("div",{className:"text-center text-gray-400 py-10",children:"Belum ada data carousel."}):h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-blue-100 text-blue-900",children:[h.jsx("th",{className:"p-2",children:"Gambar"}),h.jsx("th",{className:"p-2",children:"Alt"}),h.jsx("th",{className:"p-2",children:"Judul"}),h.jsx("th",{className:"p-2",children:"Deskripsi"}),h.jsx("th",{className:"p-2",children:"Aksi"})]})}),h.jsx("tbody",{children:Me.map((fe,Ze)=>h.jsxs("tr",{className:"border-b last:border-b-0",children:[h.jsx("td",{className:"p-2",children:h.jsx("img",{src:fe.imageUrl,alt:fe.alt,className:"h-16 w-28 object-cover rounded"})}),h.jsx("td",{className:"p-2 max-w-xs truncate",children:fe.alt}),h.jsx("td",{className:"p-2 max-w-xs truncate",children:fe.title}),h.jsx("td",{className:"p-2 max-w-xs truncate",children:fe.description}),h.jsxs("td",{className:"p-2 flex gap-2",children:[h.jsx("button",{className:"bg-yellow-400 hover:bg-yellow-500 text-white px-3 py-1 rounded",onClick:()=>ut(fe,Ze),children:"Edit"}),h.jsx("button",{className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded",onClick:()=>Bt(Ze),children:"Hapus"})]})]},Ze))})]})}),st&&h.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/40 z-50",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[h.jsxs("h3",{className:"font-bold text-lg mb-4",children:[Ke===null?"Tambah":"Edit"," Slide Carousel"]}),h.jsxs("div",{className:"grid gap-3 mb-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block font-medium mb-1",children:"Gambar (URL)"}),h.jsx("input",{className:"w-full border rounded p-2",value:(Ee==null?void 0:Ee.imageUrl)||"",onChange:fe=>Pe({...Ee,imageUrl:fe.target.value}),placeholder:"https://..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block font-medium mb-1",children:"Alt"}),h.jsx("input",{className:"w-full border rounded p-2",value:(Ee==null?void 0:Ee.alt)||"",onChange:fe=>Pe({...Ee,alt:fe.target.value})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block font-medium mb-1",children:"Judul"}),h.jsx("input",{className:"w-full border rounded p-2",value:(Ee==null?void 0:Ee.title)||"",onChange:fe=>Pe({...Ee,title:fe.target.value})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block font-medium mb-1",children:"Deskripsi"}),h.jsx("textarea",{className:"w-full border rounded p-2",value:(Ee==null?void 0:Ee.description)||"",onChange:fe=>Pe({...Ee,description:fe.target.value})})]})]}),h.jsxs("div",{className:"flex gap-2 justify-end",children:[h.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded",onClick:()=>{pt("carousel"),St(Ee),ve(!0)},children:"Simpan"}),h.jsx("button",{className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded",onClick:()=>{tt(!1),Pe(null),je(null)},children:"Batal"})]})]})})]})]}),T==="meta"&&h.jsxs(h.Fragment,{children:[h.jsxs("h2",{className:"font-bold text-xl mb-4 text-blue-900 flex items-center gap-2",children:[h.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-blue-600",children:[h.jsx("path",{d:"M16 18v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),h.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Meta Head Editor"]}),i?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex justify-end mb-2",children:h.jsx("button",{className:"text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1 rounded shadow border border-gray-300",type:"button",onClick:()=>o(x6),children:"Kembalikan ke Default"})}),h.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block font-medium mb-1",children:"Title"}),h.jsx("input",{className:"w-full border rounded p-2",name:"title",value:s.title,onChange:ce})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block font-medium mb-1",children:"Description"}),h.jsx("textarea",{className:"w-full border rounded p-2",name:"description",value:s.description,onChange:ce})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block font-medium mb-1",children:"Keywords"}),h.jsx("input",{className:"w-full border rounded p-2",name:"keywords",value:s.keywords,onChange:ce})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block font-medium mb-1",children:"Image (og:image)"}),h.jsx("input",{className:"w-full border rounded p-2",name:"image",value:s.image,onChange:ce})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block font-medium mb-1",children:"Favicon (ico)"}),h.jsx("input",{className:"w-full border rounded p-2",name:"favicon",value:s.favicon,onChange:ce})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block font-medium mb-1",children:"Favicon Fallback (ico)"}),h.jsx("input",{className:"w-full border rounded p-2",name:"faviconFallback",value:s.faviconFallback,onChange:ce})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block font-medium mb-1",children:"Favicon PNG"}),h.jsx("input",{className:"w-full border rounded p-2",name:"faviconPng",value:s.faviconPng,onChange:ce})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block font-medium mb-1",children:"Link Google Formulir Pendaftaran"}),h.jsx("input",{className:"w-full border rounded p-2",name:"googleFormUrl",value:s.googleFormUrl||"",onChange:ce,placeholder:"https://docs.google.com/forms/..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block font-medium mb-1",children:"Link Download Formulir"}),h.jsx("input",{className:"w-full border rounded p-2",name:"googleFormDownloadUrl",value:s.googleFormDownloadUrl||"",onChange:ce,placeholder:"https://.../formulir.docx"})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded shadow",onClick:()=>{pt("meta"),ve(!0)},type:"button",children:"Simpan"}),h.jsx("button",{className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded",onClick:()=>a(!1),type:"button",children:"Batal"})]}),l&&h.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/40 z-50",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-sm w-full",children:[h.jsx("h3",{className:"font-bold text-lg mb-2",children:"Konfirmasi Simpan"}),h.jsx("p",{className:"mb-4",children:"Apakah Anda yakin ingin menyimpan perubahan meta tag?"}),h.jsxs("div",{className:"flex gap-2 justify-end",children:[h.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded",onClick:ht,children:"Ya, Simpan"}),h.jsx("button",{className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded",onClick:de,children:"Batal"})]})]})}),t&&h.jsx("div",{className:"mt-6 bg-gray-50 p-4 rounded border text-xs overflow-x-auto",children:h.jsx("code",{children:`
                        <!-- Meta Preview -->
                        <title>${n.title}</title>
                        <meta name="description" content="${n.description}" />
                        <meta name="keywords" content="${n.keywords}" />
                        <meta property="og:title" content="${n.title}" />
                        <meta property="og:description" content="${n.description}" />
                        <meta property="og:image" content="${n.image}" />
                        <link rel="icon" href="${n.favicon}" type="image/x-icon" />
                        <link rel="icon" type="image/x-icon" href="${n.faviconFallback}" />
                        <link rel="icon" type="image/png" href="${n.faviconPng}" />
                      `})})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"grid grid-cols-1 gap-3 mb-4",children:[h.jsxs("div",{className:"truncate max-w-full",children:[h.jsx("span",{className:"font-semibold",children:"Title:"})," ",n.title]}),h.jsxs("div",{className:"truncate max-w-full",children:[h.jsx("span",{className:"font-semibold",children:"Description:"})," ",n.description]}),h.jsxs("div",{className:"truncate max-w-full",children:[h.jsx("span",{className:"font-semibold",children:"Keywords:"})," ",n.keywords]}),h.jsxs("div",{className:"truncate max-w-full",children:[h.jsx("span",{className:"font-semibold",children:"Image:"})," ",h.jsx("a",{href:n.image,className:"text-blue-600 underline",target:"_blank",rel:"noopener noreferrer",children:n.image})]}),h.jsxs("div",{className:"truncate max-w-full",children:[h.jsx("span",{className:"font-semibold",children:"Favicon:"})," ",h.jsx("a",{href:n.favicon,className:"text-blue-600 underline",target:"_blank",rel:"noopener noreferrer",children:n.favicon})]}),h.jsxs("div",{className:"truncate max-w-full",children:[h.jsx("span",{className:"font-semibold",children:"Favicon Fallback:"})," ",h.jsx("a",{href:n.faviconFallback,className:"text-blue-600 underline",target:"_blank",rel:"noopener noreferrer",children:n.faviconFallback})]}),h.jsxs("div",{className:"truncate max-w-full",children:[h.jsx("span",{className:"font-semibold",children:"Favicon PNG:"})," ",h.jsx("a",{href:n.faviconPng,className:"text-blue-600 underline",target:"_blank",rel:"noopener noreferrer",children:n.faviconPng})]}),h.jsxs("div",{className:"truncate max-w-full",children:[h.jsx("span",{className:"font-semibold",children:"Link Google Formulir Pendaftaran:"})," ",h.jsx("a",{href:n.googleFormUrl,className:"text-blue-600 underline",target:"_blank",rel:"noopener noreferrer",children:n.googleFormUrl})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded shadow",onClick:Ne,children:"Edit"}),h.jsxs("button",{className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded",onClick:()=>r(!t),children:[t?"Sembunyikan":"Lihat"," Meta Tag Preview"]})]})]})]}),T==="logadmin"&&h.jsxs(h.Fragment,{children:[h.jsxs("h2",{className:"font-bold text-xl mb-4 text-blue-900 flex items-center gap-2",children:[h.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-blue-600",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("path",{d:"M12 6v6l4 2"})]}),"Log Admin"]}),Ye?h.jsx("div",{className:"text-center py-10 text-gray-500",children:"Memuat log..."}):ee.length===0?h.jsx("div",{className:"text-center py-10 text-gray-400",children:"Belum ada aktivitas."}):h.jsxs("div",{className:"overflow-x-auto overflow-y-auto max-h-96 scrollbar-thin scrollbar-thumb-blue-200 scrollbar-track-blue-50 rounded-lg",children:[h.jsxs("table",{className:"w-full min-w-[700px] text-sm font-mono bg-[#181c20] text-[#e0e6ef] rounded-lg shadow-lg",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-[#23272e] text-[#7dd3fc]",children:[h.jsx("th",{className:"p-2 text-left font-mono",children:"Waktu"}),h.jsx("th",{className:"p-2 text-left font-mono",children:"User"}),h.jsx("th",{className:"p-2 text-left font-mono",children:"Aksi"}),h.jsx("th",{className:"p-2 text-left font-mono",children:"Detail"})]})}),h.jsx("tbody",{children:ee.map((fe,Ze)=>h.jsxs("tr",{className:"border-b border-[#23272e] last:border-b-0 hover:bg-[#23272e] transition",children:[h.jsx("td",{className:"p-2 whitespace-nowrap text-[#a3e635]",children:fe.createdAt.toLocaleString()}),h.jsx("td",{className:"p-2 whitespace-nowrap text-[#38bdf8]",children:fe.user}),h.jsx("td",{className:"p-2 whitespace-nowrap font-bold "+(fe.action.toLowerCase().includes("edit")?"text-yellow-400":fe.action.toLowerCase().includes("hapus")?"text-red-400":fe.action.toLowerCase().includes("tambah")?"text-green-400":"text-[#e0e6ef]"),children:fe.action}),h.jsx("td",{className:"p-2 text-[#e0e6ef]",children:fe.detail})]},Ze))})]}),h.jsx("div",{className:"flex items-center justify-center mt-2",children:h.jsx("span",{className:"text-xs text-blue-300 font-mono",children:"Geser ke kanan  untuk melihat detail log >>"})})]})]})]}),X&&h.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/40 z-50",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-sm w-full",children:[h.jsx("h3",{className:"font-bold text-lg mb-2",children:"Konfirmasi Simpan Data"}),h.jsx("p",{className:"mb-4",children:"Pastikan data sudah benar sebelum disimpan ke homepage."}),h.jsxs("label",{className:"flex items-center gap-2 mb-4",children:[h.jsx("input",{type:"checkbox",checked:Ie,onChange:fe=>He(fe.target.checked)}),h.jsx("span",{className:"text-sm",children:"Saya sudah memeriksa dan data sudah benar."})]}),h.jsxs("div",{className:"flex gap-2 justify-end",children:[h.jsx("button",{className:`px-4 py-2 rounded text-white transition ${Ie?"bg-green-600 hover:bg-green-700 shadow":"bg-green-300 cursor-not-allowed opacity-60"}`,disabled:!Ie,onClick:async()=>{if(we==="meta")await ht();else if(we==="carousel"){let fe=[...Me];Ke===null?fe.push(lt):fe[Ke]=lt;const Ze=fe.filter(Qe=>!ru.some(Oe=>Oe.title===Qe.title));fe=[...ru,...Ze],Ce(fe),mN(fe),tt(!1),Pe(null),je(null)}else if(we==="visimisi")await bt(),window.dispatchEvent(new Event("visimisi-updated")),me(!1);else if(we==="contact"){B(!0);const{db:fe}=await gs(async()=>{const{db:Oe}=await Promise.resolve().then(()=>Jh);return{db:Oe}},void 0),{doc:Ze,setDoc:Qe}=await gs(async()=>{const{doc:Oe,setDoc:dt}=await Promise.resolve().then(()=>Qh);return{doc:Oe,setDoc:dt}},void 0);await Qe(Ze(fe,"homepage","contact"),{...F,cards:N},{merge:!0}),H(!1),B(!1)}ve(!1),He(!1),pt(null),St(null)},children:"Ya, Simpan"}),h.jsx("button",{className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded",onClick:()=>{ve(!1),He(!1),pt(null),St(null)},children:"Batal"})]})]})})]}):h.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-green-50",children:h.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 w-full max-w-sm",children:[h.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Login Developer"}),h.jsxs("form",{onSubmit:nt,className:"space-y-4",children:[h.jsx("input",{className:"w-full border rounded p-2",type:"email",placeholder:"Email",value:f,onChange:fe=>m(fe.target.value),required:!0}),h.jsx("input",{className:"w-full border rounded p-2",type:"password",placeholder:"Password",value:v,onChange:fe=>_(fe.target.value),required:!0}),w&&h.jsx("div",{className:"text-red-600 text-sm",children:w}),h.jsx("button",{className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",type:"submit",children:"Login"})]})]})})}function jfe(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,r,i,a,s=[],o="",l=n.split("/");for(l[0]||l.shift();i=l.shift();)t=i[0],t==="*"?(s.push(t),o+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(r=i.indexOf("?",1),a=i.indexOf(".",1),s.push(i.substring(1,~r?r:~a?a:i.length)),o+=~r&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(o+=(~r?"?":"")+"\\"+i.substring(a))):o+="/"+i;return{keys:s,pattern:new RegExp("^"+o+(e?"(?=$|/)":"/?$"),"i")}}var yq={exports:{}},xq={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv=M;function Bfe(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ufe=typeof Object.is=="function"?Object.is:Bfe,Vfe=Mv.useState,zfe=Mv.useEffect,Hfe=Mv.useLayoutEffect,Gfe=Mv.useDebugValue;function Wfe(n,e){var t=e(),r=Vfe({inst:{value:t,getSnapshot:e}}),i=r[0].inst,a=r[1];return Hfe(function(){i.value=t,i.getSnapshot=e,nM(i)&&a({inst:i})},[n,t,e]),zfe(function(){return nM(i)&&a({inst:i}),n(function(){nM(i)&&a({inst:i})})},[n]),Gfe(t),t}function nM(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ufe(n,t)}catch{return!0}}function qfe(n,e){return e()}var $fe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?qfe:Wfe;xq.useSyncExternalStore=Mv.useSyncExternalStore!==void 0?Mv.useSyncExternalStore:$fe;yq.exports=xq;var Xfe=yq.exports;const Kfe=n3.useInsertionEffect,Yfe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Zfe=Yfe?M.useLayoutEffect:M.useEffect,Qfe=Kfe||Zfe,_q=n=>{const e=M.useRef([n,(...t)=>e[0](...t)]).current;return Qfe(()=>{e[0]=n}),e[1]},Jfe="popstate",HD="pushState",GD="replaceState",epe="hashchange",_6=[Jfe,HD,GD,epe],tpe=n=>{for(const e of _6)addEventListener(e,n);return()=>{for(const e of _6)removeEventListener(e,n)}},wq=(n,e)=>Xfe.useSyncExternalStore(tpe,n,e),npe=()=>location.search,rpe=({ssrSearch:n=""}={})=>wq(npe,()=>n),w6=()=>location.pathname,ipe=({ssrPath:n}={})=>wq(w6,n?()=>n:w6),ape=(n,{replace:e=!1,state:t=null}={})=>history[e?GD:HD](t,"",n),spe=(n={})=>[ipe(n),ape],b6=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[b6]>"u"){for(const n of[HD,GD]){const e=history[n];history[n]=function(){const t=e.apply(this,arguments),r=new Event(n);return r.arguments=arguments,dispatchEvent(r),t}}Object.defineProperty(window,b6,{value:!0})}const ope=(n,e)=>e.toLowerCase().indexOf(n.toLowerCase())?"~"+e:e.slice(n.length)||"/",bq=(n="")=>n==="/"?"":n,lpe=(n,e)=>n[0]==="~"?n.slice(1):bq(e)+n,upe=(n="",e)=>ope(S6(bq(n)),S6(e)),S6=n=>{try{return decodeURI(n)}catch{return n}},Sq={hook:spe,searchHook:rpe,parser:jfe,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:n=>n},Eq=M.createContext(Sq),U_=()=>M.useContext(Eq),Aq={},Tq=M.createContext(Aq),kq=()=>M.useContext(Tq),ST=n=>{const[e,t]=n.hook(n);return[upe(n.base,e),_q((r,i)=>t(lpe(r,n.base),i))]},V_=()=>ST(U_()),Cq=(n,e,t,r)=>{const{pattern:i,keys:a}=e instanceof RegExp?{keys:!1,pattern:e}:n(e||"*",r),s=i.exec(t)||[],[o,...l]=s;return o!==void 0?[!0,(()=>{const u=a!==!1?Object.fromEntries(a.map((d,f)=>[d,l[f]])):s.groups;let c={...l};return u&&Object.assign(c,u),c})(),...r?[o]:[]]:[!1,null]},cpe=({children:n,...e})=>{var c,d;const t=U_(),r=e.hook?Sq:t;let i=r;const[a,s]=((c=e.ssrPath)==null?void 0:c.split("?"))??[];s&&(e.ssrSearch=s,e.ssrPath=a),e.hrefs=e.hrefs??((d=e.hook)==null?void 0:d.hrefs);let o=M.useRef({}),l=o.current,u=l;for(let f in r){const m=f==="base"?r[f]+(e[f]||""):e[f]||r[f];l===u&&m!==u[f]&&(o.current=u={...u}),u[f]=m,(m!==r[f]||m!==i[f])&&(i=u)}return M.createElement(Eq.Provider,{value:i,children:n})},E6=({children:n,component:e},t)=>e?M.createElement(e,{params:t}):typeof n=="function"?n(t):n,dpe=n=>{let e=M.useRef(Aq);const t=e.current;return e.current=Object.keys(n).length!==Object.keys(t).length||Object.entries(n).some(([r,i])=>i!==t[r])?n:t},Gi=({path:n,nest:e,match:t,...r})=>{const i=U_(),[a]=ST(i),[s,o,l]=t??Cq(i.parser,n,a,e),u=dpe({...kq(),...o});if(!s)return null;const c=l?M.createElement(cpe,{base:l},E6(r,u)):E6(r,u);return M.createElement(Tq.Provider,{value:u,children:c})},Eo=M.forwardRef((n,e)=>{const t=U_(),[r,i]=ST(t),{to:a="",href:s=a,onClick:o,asChild:l,children:u,className:c,replace:d,state:f,...m}=n,v=_q(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(o==null||o(w),w.defaultPrevented||(w.preventDefault(),i(s,n)))}),_=t.hrefs(s[0]==="~"?s.slice(1):t.base+s,t);return l&&M.isValidElement(u)?M.cloneElement(u,{onClick:v,href:_}):M.createElement("a",{...m,onClick:v,href:_,className:c!=null&&c.call?c(r===s):c,children:u,ref:e})}),Mq=n=>Array.isArray(n)?n.flatMap(e=>Mq(e&&e.type===M.Fragment?e.props.children:e)):[n],hpe=({children:n,location:e})=>{const t=U_(),[r]=ST(t);for(const i of Mq(n)){let a=0;if(M.isValidElement(i)&&(a=Cq(t.parser,i.props.path,e||r,i.props.nest))[0])return M.cloneElement(i,{match:a})}return null},fpe=1,ppe=1e6;let rM=0;function mpe(){return rM=(rM+1)%Number.MAX_SAFE_INTEGER,rM.toString()}const iM=new Map,A6=n=>{if(iM.has(n))return;const e=setTimeout(()=>{iM.delete(n),Qx({type:"REMOVE_TOAST",toastId:n})},ppe);iM.set(n,e)},gpe=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,fpe)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?A6(t):n.toasts.forEach(r=>{A6(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},tS=[];let nS={toasts:[]};function Qx(n){nS=gpe(nS,n),tS.forEach(e=>{e(nS)})}function vpe({...n}){const e=mpe(),t=i=>Qx({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Qx({type:"DISMISS_TOAST",toastId:e});return Qx({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function Iq(){const[n,e]=M.useState(nS);return M.useEffect(()=>(tS.push(e),()=>{const t=tS.indexOf(e);t>-1&&tS.splice(t,1)}),[n]),{...n,toast:vpe,dismiss:t=>Qx({type:"DISMISS_TOAST",toastId:t})}}function cn(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function T6(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Pq(...n){return e=>{let t=!1;const r=n.map(i=>{const a=T6(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():T6(n[i],null)}}}}function Or(...n){return M.useCallback(Pq(...n),n)}function ype(n,e){const t=M.createContext(e),r=a=>{const{children:s,...o}=a,l=M.useMemo(()=>o,Object.values(o));return h.jsx(t.Provider,{value:l,children:s})};r.displayName=n+"Provider";function i(a){const s=M.useContext(t);if(s)return s;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${n}\``)}return[r,i]}function Bd(n,e=[]){let t=[];function r(a,s){const o=M.createContext(s),l=t.length;t=[...t,s];const u=d=>{var x;const{scope:f,children:m,...v}=d,_=((x=f==null?void 0:f[n])==null?void 0:x[l])||o,w=M.useMemo(()=>v,Object.values(v));return h.jsx(_.Provider,{value:w,children:m})};u.displayName=a+"Provider";function c(d,f){var _;const m=((_=f==null?void 0:f[n])==null?void 0:_[l])||o,v=M.useContext(m);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${a}\``)}return[u,c]}const i=()=>{const a=t.map(s=>M.createContext(s));return function(o){const l=(o==null?void 0:o[n])||a;return M.useMemo(()=>({[`__scope${n}`]:{...o,[n]:l}}),[o,l])}};return i.scopeName=n,[r,xpe(i,...e)]}function xpe(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const s=r.reduce((o,{useScope:l,scopeName:u})=>{const d=l(a)[`__scope${u}`];return{...o,...d}},{});return M.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return t.scopeName=e.scopeName,t}function Iv(n){const e=wpe(n),t=M.forwardRef((r,i)=>{const{children:a,...s}=r,o=M.Children.toArray(a),l=o.find(bpe);if(l){const u=l.props.children,c=o.map(d=>d===l?M.Children.count(u)>1?M.Children.only(null):M.isValidElement(u)?u.props.children:null:d);return h.jsx(e,{...s,ref:i,children:M.isValidElement(u)?M.cloneElement(u,void 0,c):null})}return h.jsx(e,{...s,ref:i,children:a})});return t.displayName=`${n}.Slot`,t}var _pe=Iv("Slot");function wpe(n){const e=M.forwardRef((t,r)=>{const{children:i,...a}=t;if(M.isValidElement(i)){const s=Epe(i),o=Spe(a,i.props);return i.type!==M.Fragment&&(o.ref=r?Pq(r,s):s),M.cloneElement(i,o)}return M.Children.count(i)>1?M.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var Nq=Symbol("radix.slottable");function Rq(n){const e=({children:t})=>h.jsx(h.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=Nq,e}function bpe(n){return M.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Nq}function Spe(n,e){const t={...e};for(const r in e){const i=n[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?t[r]=(...o)=>{const l=a(...o);return i(...o),l}:i&&(t[r]=i):r==="style"?t[r]={...i,...a}:r==="className"&&(t[r]=[i,a].filter(Boolean).join(" "))}return{...n,...t}}function Epe(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function WD(n){const e=n+"CollectionProvider",[t,r]=Bd(e),[i,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),s=_=>{const{scope:w,children:x}=_,S=wn.useRef(null),E=wn.useRef(new Map).current;return h.jsx(i,{scope:w,itemMap:E,collectionRef:S,children:x})};s.displayName=e;const o=n+"CollectionSlot",l=Iv(o),u=wn.forwardRef((_,w)=>{const{scope:x,children:S}=_,E=a(o,x),T=Or(w,E.collectionRef);return h.jsx(l,{ref:T,children:S})});u.displayName=o;const c=n+"CollectionItemSlot",d="data-radix-collection-item",f=Iv(c),m=wn.forwardRef((_,w)=>{const{scope:x,children:S,...E}=_,T=wn.useRef(null),D=Or(w,T),F=a(c,x);return wn.useEffect(()=>(F.itemMap.set(T,{ref:T,...E}),()=>void F.itemMap.delete(T))),h.jsx(f,{[d]:"",ref:D,children:S})});m.displayName=c;function v(_){const w=a(n+"CollectionConsumer",_);return wn.useCallback(()=>{const S=w.collectionRef.current;if(!S)return[];const E=Array.from(S.querySelectorAll(`[${d}]`));return Array.from(w.itemMap.values()).sort((F,P)=>E.indexOf(F.ref.current)-E.indexOf(P.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:s,Slot:u,ItemSlot:m},v,r]}var Ape=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ln=Ape.reduce((n,e)=>{const t=Iv(`Primitive.${e}`),r=M.forwardRef((i,a)=>{const{asChild:s,...o}=i,l=s?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function Dq(n,e){n&&Bf.flushSync(()=>n.dispatchEvent(e))}function Pl(n){const e=M.useRef(n);return M.useEffect(()=>{e.current=n}),M.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function Tpe(n,e=globalThis==null?void 0:globalThis.document){const t=Pl(n);M.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var kpe="DismissableLayer",gN="dismissableLayer.update",Cpe="dismissableLayer.pointerDownOutside",Mpe="dismissableLayer.focusOutside",k6,Lq=M.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),z_=M.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:s,onDismiss:o,...l}=n,u=M.useContext(Lq),[c,d]=M.useState(null),f=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=M.useState({}),v=Or(e,P=>d(P)),_=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=_.indexOf(w),S=c?_.indexOf(c):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,T=S>=x,D=Ppe(P=>{const N=P.target,I=[...u.branches].some(R=>R.contains(N));!T||I||(i==null||i(P),s==null||s(P),P.defaultPrevented||o==null||o())},f),F=Npe(P=>{const N=P.target;[...u.branches].some(R=>R.contains(N))||(a==null||a(P),s==null||s(P),P.defaultPrevented||o==null||o())},f);return Tpe(P=>{S===u.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&o&&(P.preventDefault(),o()))},f),M.useEffect(()=>{if(c)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(k6=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),C6(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=k6)}},[c,f,t,u]),M.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),C6())},[c,u]),M.useEffect(()=>{const P=()=>m({});return document.addEventListener(gN,P),()=>document.removeEventListener(gN,P)},[]),h.jsx(Ln.div,{...l,ref:v,style:{pointerEvents:E?T?"auto":"none":void 0,...n.style},onFocusCapture:cn(n.onFocusCapture,F.onFocusCapture),onBlurCapture:cn(n.onBlurCapture,F.onBlurCapture),onPointerDownCapture:cn(n.onPointerDownCapture,D.onPointerDownCapture)})});z_.displayName=kpe;var Ipe="DismissableLayerBranch",Oq=M.forwardRef((n,e)=>{const t=M.useContext(Lq),r=M.useRef(null),i=Or(e,r);return M.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),h.jsx(Ln.div,{...n,ref:i})});Oq.displayName=Ipe;function Ppe(n,e=globalThis==null?void 0:globalThis.document){const t=Pl(n),r=M.useRef(!1),i=M.useRef(()=>{});return M.useEffect(()=>{const a=o=>{if(o.target&&!r.current){let l=function(){Fq(Cpe,t,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function Npe(n,e=globalThis==null?void 0:globalThis.document){const t=Pl(n),r=M.useRef(!1);return M.useEffect(()=>{const i=a=>{a.target&&!r.current&&Fq(Mpe,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function C6(){const n=new CustomEvent(gN);document.dispatchEvent(n)}function Fq(n,e,t,{discrete:r}){const i=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?Dq(i,a):i.dispatchEvent(a)}var Rpe=z_,Dpe=Oq,Xa=globalThis!=null&&globalThis.document?M.useLayoutEffect:()=>{},Lpe="Portal",ET=M.forwardRef((n,e)=>{var o;const{container:t,...r}=n,[i,a]=M.useState(!1);Xa(()=>a(!0),[]);const s=t||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return s?oae.createPortal(h.jsx(Ln.div,{...r,ref:e}),s):null});ET.displayName=Lpe;function Ope(n,e){return M.useReducer((t,r)=>e[t][r]??t,n)}var tg=n=>{const{present:e,children:t}=n,r=Fpe(e),i=typeof t=="function"?t({present:r.isPresent}):M.Children.only(t),a=Or(r.ref,jpe(i));return typeof t=="function"||r.isPresent?M.cloneElement(i,{ref:a}):null};tg.displayName="Presence";function Fpe(n){const[e,t]=M.useState(),r=M.useRef(null),i=M.useRef(n),a=M.useRef("none"),s=n?"mounted":"unmounted",[o,l]=Ope(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return M.useEffect(()=>{const u=wb(r.current);a.current=o==="mounted"?u:"none"},[o]),Xa(()=>{const u=r.current,c=i.current;if(c!==n){const f=a.current,m=wb(u);n?l("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&f!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),Xa(()=>{if(e){let u;const c=e.ownerDocument.defaultView??window,d=m=>{const _=wb(r.current).includes(m.animationName);if(m.target===e&&_&&(l("ANIMATION_END"),!i.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",u=c.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},f=m=>{m.target===e&&(a.current=wb(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{c.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:M.useCallback(u=>{r.current=u?getComputedStyle(u):null,t(u)},[])}}function wb(n){return(n==null?void 0:n.animationName)||"none"}function jpe(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Bpe=n3[" useInsertionEffect ".trim().toString()]||Xa;function Pv({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,a,s]=Upe({defaultProp:e,onChange:t}),o=n!==void 0,l=o?n:i;{const c=M.useRef(n!==void 0);M.useEffect(()=>{const d=c.current;d!==o&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),c.current=o},[o,r])}const u=M.useCallback(c=>{var d;if(o){const f=Vpe(c)?c(n):c;f!==n&&((d=s.current)==null||d.call(s,f))}else a(c)},[o,n,a,s]);return[l,u]}function Upe({defaultProp:n,onChange:e}){const[t,r]=M.useState(n),i=M.useRef(t),a=M.useRef(e);return Bpe(()=>{a.current=e},[e]),M.useEffect(()=>{var s;i.current!==t&&((s=a.current)==null||s.call(a,t),i.current=t)},[t,i]),[t,r,a]}function Vpe(n){return typeof n=="function"}var jq=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),zpe="VisuallyHidden",AT=M.forwardRef((n,e)=>h.jsx(Ln.span,{...n,ref:e,style:{...jq,...n.style}}));AT.displayName=zpe;var Hpe=AT,qD="ToastProvider",[$D,Gpe,Wpe]=WD("Toast"),[Bq,U6e]=Bd("Toast",[Wpe]),[qpe,TT]=Bq(qD),Uq=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:s}=n,[o,l]=M.useState(null),[u,c]=M.useState(0),d=M.useRef(!1),f=M.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${qD}\`. Expected non-empty \`string\`.`),h.jsx($D.Provider,{scope:e,children:h.jsx(qpe,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:u,viewport:o,onViewportChange:l,onToastAdd:M.useCallback(()=>c(m=>m+1),[]),onToastRemove:M.useCallback(()=>c(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:s})})};Uq.displayName=qD;var Vq="ToastViewport",$pe=["F8"],vN="toast.viewportPause",yN="toast.viewportResume",zq=M.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=$pe,label:i="Notifications ({hotkey})",...a}=n,s=TT(Vq,t),o=Gpe(t),l=M.useRef(null),u=M.useRef(null),c=M.useRef(null),d=M.useRef(null),f=Or(e,d,s.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=s.toastCount>0;M.useEffect(()=>{const w=x=>{var E;r.length!==0&&r.every(T=>x[T]||x.code===T)&&((E=d.current)==null||E.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),M.useEffect(()=>{const w=l.current,x=d.current;if(v&&w&&x){const S=()=>{if(!s.isClosePausedRef.current){const F=new CustomEvent(vN);x.dispatchEvent(F),s.isClosePausedRef.current=!0}},E=()=>{if(s.isClosePausedRef.current){const F=new CustomEvent(yN);x.dispatchEvent(F),s.isClosePausedRef.current=!1}},T=F=>{!w.contains(F.relatedTarget)&&E()},D=()=>{w.contains(document.activeElement)||E()};return w.addEventListener("focusin",S),w.addEventListener("focusout",T),w.addEventListener("pointermove",S),w.addEventListener("pointerleave",D),window.addEventListener("blur",S),window.addEventListener("focus",E),()=>{w.removeEventListener("focusin",S),w.removeEventListener("focusout",T),w.removeEventListener("pointermove",S),w.removeEventListener("pointerleave",D),window.removeEventListener("blur",S),window.removeEventListener("focus",E)}}},[v,s.isClosePausedRef]);const _=M.useCallback(({tabbingDirection:w})=>{const S=o().map(E=>{const T=E.ref.current,D=[T,...sme(T)];return w==="forwards"?D:D.reverse()});return(w==="forwards"?S.reverse():S).flat()},[o]);return M.useEffect(()=>{const w=d.current;if(w){const x=S=>{var D,F,P;const E=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!E){const N=document.activeElement,I=S.shiftKey;if(S.target===w&&I){(D=u.current)==null||D.focus();return}const G=_({tabbingDirection:I?"backwards":"forwards"}),H=G.findIndex(K=>K===N);aM(G.slice(H+1))?S.preventDefault():I?(F=u.current)==null||F.focus():(P=c.current)==null||P.focus()}};return w.addEventListener("keydown",x),()=>w.removeEventListener("keydown",x)}},[o,_]),h.jsxs(Dpe,{ref:l,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&h.jsx(xN,{ref:u,onFocusFromOutsideViewport:()=>{const w=_({tabbingDirection:"forwards"});aM(w)}}),h.jsx($D.Slot,{scope:t,children:h.jsx(Ln.ol,{tabIndex:-1,...a,ref:f})}),v&&h.jsx(xN,{ref:c,onFocusFromOutsideViewport:()=>{const w=_({tabbingDirection:"backwards"});aM(w)}})]})});zq.displayName=Vq;var Hq="ToastFocusProxy",xN=M.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,a=TT(Hq,t);return h.jsx(AT,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:s=>{var u;const o=s.relatedTarget;!((u=a.viewport)!=null&&u.contains(o))&&r()}})});xN.displayName=Hq;var H_="Toast",Xpe="toast.swipeStart",Kpe="toast.swipeMove",Ype="toast.swipeCancel",Zpe="toast.swipeEnd",Gq=M.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:a,...s}=n,[o,l]=Pv({prop:r,defaultProp:i??!0,onChange:a,caller:H_});return h.jsx(tg,{present:t||o,children:h.jsx(eme,{open:o,...s,ref:e,onClose:()=>l(!1),onPause:Pl(n.onPause),onResume:Pl(n.onResume),onSwipeStart:cn(n.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:cn(n.onSwipeMove,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:cn(n.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:cn(n.onSwipeEnd,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});Gq.displayName=H_;var[Qpe,Jpe]=Bq(H_,{onClose(){}}),eme=M.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:a,onClose:s,onEscapeKeyDown:o,onPause:l,onResume:u,onSwipeStart:c,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:m,...v}=n,_=TT(H_,t),[w,x]=M.useState(null),S=Or(e,K=>x(K)),E=M.useRef(null),T=M.useRef(null),D=i||_.duration,F=M.useRef(0),P=M.useRef(D),N=M.useRef(0),{onToastAdd:I,onToastRemove:R}=_,B=Pl(()=>{var ne;(w==null?void 0:w.contains(document.activeElement))&&((ne=_.viewport)==null||ne.focus()),s()}),G=M.useCallback(K=>{!K||K===1/0||(window.clearTimeout(N.current),F.current=new Date().getTime(),N.current=window.setTimeout(B,K))},[B]);M.useEffect(()=>{const K=_.viewport;if(K){const ne=()=>{G(P.current),u==null||u()},re=()=>{const oe=new Date().getTime()-F.current;P.current=P.current-oe,window.clearTimeout(N.current),l==null||l()};return K.addEventListener(vN,re),K.addEventListener(yN,ne),()=>{K.removeEventListener(vN,re),K.removeEventListener(yN,ne)}}},[_.viewport,D,l,u,G]),M.useEffect(()=>{a&&!_.isClosePausedRef.current&&G(D)},[a,D,_.isClosePausedRef,G]),M.useEffect(()=>(I(),()=>R()),[I,R]);const H=M.useMemo(()=>w?Zq(w):null,[w]);return _.viewport?h.jsxs(h.Fragment,{children:[H&&h.jsx(tme,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:H}),h.jsx(Qpe,{scope:t,onClose:B,children:Bf.createPortal(h.jsx($D.ItemSlot,{scope:t,children:h.jsx(Rpe,{asChild:!0,onEscapeKeyDown:cn(o,()=>{_.isFocusedToastEscapeKeyDownRef.current||B(),_.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(Ln.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":_.swipeDirection,...v,ref:S,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:cn(n.onKeyDown,K=>{K.key==="Escape"&&(o==null||o(K.nativeEvent),K.nativeEvent.defaultPrevented||(_.isFocusedToastEscapeKeyDownRef.current=!0,B()))}),onPointerDown:cn(n.onPointerDown,K=>{K.button===0&&(E.current={x:K.clientX,y:K.clientY})}),onPointerMove:cn(n.onPointerMove,K=>{if(!E.current)return;const ne=K.clientX-E.current.x,re=K.clientY-E.current.y,oe=!!T.current,$=["left","right"].includes(_.swipeDirection),ue=["left","up"].includes(_.swipeDirection)?Math.min:Math.max,se=$?ue(0,ne):0,pe=$?0:ue(0,re),Fe=K.pointerType==="touch"?10:2,$e={x:se,y:pe},at={originalEvent:K,delta:$e};oe?(T.current=$e,bb(Kpe,d,at,{discrete:!1})):M6($e,_.swipeDirection,Fe)?(T.current=$e,bb(Xpe,c,at,{discrete:!1}),K.target.setPointerCapture(K.pointerId)):(Math.abs(ne)>Fe||Math.abs(re)>Fe)&&(E.current=null)}),onPointerUp:cn(n.onPointerUp,K=>{const ne=T.current,re=K.target;if(re.hasPointerCapture(K.pointerId)&&re.releasePointerCapture(K.pointerId),T.current=null,E.current=null,ne){const oe=K.currentTarget,$={originalEvent:K,delta:ne};M6(ne,_.swipeDirection,_.swipeThreshold)?bb(Zpe,m,$,{discrete:!0}):bb(Ype,f,$,{discrete:!0}),oe.addEventListener("click",ue=>ue.preventDefault(),{once:!0})}})})})}),_.viewport)})]}):null}),tme=n=>{const{__scopeToast:e,children:t,...r}=n,i=TT(H_,e),[a,s]=M.useState(!1),[o,l]=M.useState(!1);return ime(()=>s(!0)),M.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),o?null:h.jsx(ET,{asChild:!0,children:h.jsx(AT,{...r,children:a&&h.jsxs(h.Fragment,{children:[i.label," ",t]})})})},nme="ToastTitle",Wq=M.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return h.jsx(Ln.div,{...r,ref:e})});Wq.displayName=nme;var rme="ToastDescription",qq=M.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return h.jsx(Ln.div,{...r,ref:e})});qq.displayName=rme;var $q="ToastAction",Xq=M.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?h.jsx(Yq,{altText:t,asChild:!0,children:h.jsx(XD,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${$q}\`. Expected non-empty \`string\`.`),null)});Xq.displayName=$q;var Kq="ToastClose",XD=M.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=Jpe(Kq,t);return h.jsx(Yq,{asChild:!0,children:h.jsx(Ln.button,{type:"button",...r,ref:e,onClick:cn(n.onClick,i.onClose)})})});XD.displayName=Kq;var Yq=M.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return h.jsx(Ln.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function Zq(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),ame(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const s=r.dataset.radixToastAnnounceAlt;s&&e.push(s)}else e.push(...Zq(r))}}),e}function bb(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,a=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?Dq(i,a):i.dispatchEvent(a)}var M6=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),a=r>i;return e==="left"||e==="right"?a&&r>t:!a&&i>t};function ime(n=()=>{}){const e=Pl(n);Xa(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function ame(n){return n.nodeType===n.ELEMENT_NODE}function sme(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function aM(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var ome=Uq,Qq=zq,Jq=Gq,e$=Wq,t$=qq,n$=Xq,r$=XD;function i$(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=i$(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function a$(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=i$(n))&&(r&&(r+=" "),r+=e);return r}const I6=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,P6=a$,kT=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return P6(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:a}=e,s=Object.keys(i).map(u=>{const c=t==null?void 0:t[u],d=a==null?void 0:a[u];if(c===null)return null;const f=I6(c)||I6(d);return i[u][f]}),o=t&&Object.entries(t).reduce((u,c)=>{let[d,f]=c;return f===void 0||(u[d]=f),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,c)=>{let{class:d,className:f,...m}=c;return Object.entries(m).every(v=>{let[_,w]=v;return Array.isArray(w)?w.includes({...a,...o}[_]):{...a,...o}[_]===w})?[...u,d,f]:u},[]);return P6(n,s,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lme=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s$=(...n)=>n.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ume={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cme=M.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},l)=>M.createElement("svg",{ref:l,...ume,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:s$("lucide",i),...o},[...s.map(([u,c])=>M.createElement(u,c)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=(n,e)=>{const t=M.forwardRef(({className:r,...i},a)=>M.createElement(cme,{ref:a,iconNode:e,className:s$(`lucide-${lme(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dme=Sn("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=Sn("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=Sn("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=Sn("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hme=Sn("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fme=Sn("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=Sn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pme=Sn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=Sn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mme=Sn("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=Sn("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=Sn("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=Sn("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gme=Sn("Cross",[["path",{d:"M11 2a2 2 0 0 0-2 2v5H4a2 2 0 0 0-2 2v2c0 1.1.9 2 2 2h5v5c0 1.1.9 2 2 2h2a2 2 0 0 0 2-2v-5h5a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-5V4a2 2 0 0 0-2-2h-2z",key:"1t5g7j"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=Sn("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vme=Sn("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yme=Sn("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xme=Sn("IdCard",[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _me=Sn("ImagePlus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wme=Sn("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=Sn("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bme=Sn("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sme=Sn("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eme=Sn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=Sn("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=Sn("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=Sn("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ame=Sn("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tme=Sn("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kme=Sn("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=Sn("PencilLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=Sn("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=Sn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=Sn("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cme=Sn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mme=Sn("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ime=Sn("Tent",[["path",{d:"M3.5 21 14 3",key:"1szst5"}],["path",{d:"M20.5 21 10 3",key:"1310c3"}],["path",{d:"M15.5 21 12 15l-3.5 6",key:"1ddtfw"}],["path",{d:"M2 21h20",key:"1nyx9w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=Sn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pme=Sn("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nme=Sn("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=Sn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=Sn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rme=Sn("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=Sn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dme=Sn("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),ZD="-",Lme=n=>{const e=Fme(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:s=>{const o=s.split(ZD);return o[0]===""&&o.length!==1&&o.shift(),p$(o,e)||Ome(s)},getConflictingClassGroupIds:(s,o)=>{const l=t[s]||[];return o&&r[s]?[...l,...r[s]]:l}}},p$=(n,e)=>{var s;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?p$(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=n.join(ZD);return(s=e.validators.find(({validator:o})=>o(a)))==null?void 0:s.classGroupId},L6=/^\[(.+)\]$/,Ome=n=>{if(L6.test(n)){const e=L6.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},Fme=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return Bme(Object.entries(n.classGroups),t).forEach(([a,s])=>{wN(s,r,a,e)}),r},wN=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const a=i===""?e:O6(e,i);a.classGroupId=t;return}if(typeof i=="function"){if(jme(i)){wN(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([a,s])=>{wN(s,O6(e,a),t,r)})})},O6=(n,e)=>{let t=n;return e.split(ZD).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},jme=n=>n.isThemeGetter,Bme=(n,e)=>e?n.map(([t,r])=>{const i=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([s,o])=>[e+s,o])):a);return[t,i]}):n,Ume=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(a,s)=>{t.set(a,s),e++,e>n&&(e=0,r=t,t=new Map)};return{get(a){let s=t.get(a);if(s!==void 0)return s;if((s=r.get(a))!==void 0)return i(a,s),s},set(a,s){t.has(a)?t.set(a,s):i(a,s)}}},m$="!",Vme=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],a=e.length,s=o=>{const l=[];let u=0,c=0,d;for(let w=0;w<o.length;w++){let x=o[w];if(u===0){if(x===i&&(r||o.slice(w,w+a)===e)){l.push(o.slice(c,w)),c=w+a;continue}if(x==="/"){d=w;continue}}x==="["?u++:x==="]"&&u--}const f=l.length===0?o:o.substring(c),m=f.startsWith(m$),v=m?f.substring(1):f,_=d&&d>c?d-c:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:_}};return t?o=>t({className:o,parseClassName:s}):s},zme=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},Hme=n=>({cache:Ume(n.cacheSize),parseClassName:Vme(n),...Lme(n)}),Gme=/\s+/,Wme=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,a=[],s=n.trim().split(Gme);let o="";for(let l=s.length-1;l>=0;l-=1){const u=s[l],{modifiers:c,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:m}=t(u);let v=!!m,_=r(v?f.substring(0,m):f);if(!_){if(!v){o=u+(o.length>0?" "+o:o);continue}if(_=r(f),!_){o=u+(o.length>0?" "+o:o);continue}v=!1}const w=zme(c).join(":"),x=d?w+m$:w,S=x+_;if(a.includes(S))continue;a.push(S);const E=i(_,v);for(let T=0;T<E.length;++T){const D=E[T];a.push(x+D)}o=u+(o.length>0?" "+o:o)}return o};function qme(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=g$(e))&&(r&&(r+=" "),r+=t);return r}const g$=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=g$(n[r]))&&(t&&(t+=" "),t+=e);return t};function $me(n,...e){let t,r,i,a=s;function s(l){const u=e.reduce((c,d)=>d(c),n());return t=Hme(u),r=t.cache.get,i=t.cache.set,a=o,o(l)}function o(l){const u=r(l);if(u)return u;const c=Wme(l,t);return i(l,c),c}return function(){return a(qme.apply(null,arguments))}}const Zr=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},v$=/^\[(?:([a-z-]+):)?(.+)\]$/i,Xme=/^\d+\/\d+$/,Kme=new Set(["px","full","screen"]),Yme=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Zme=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Qme=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Jme=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ege=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Wc=n=>K0(n)||Kme.has(n)||Xme.test(n),mh=n=>ay(n,"length",lge),K0=n=>!!n&&!Number.isNaN(Number(n)),sM=n=>ay(n,"number",K0),Wy=n=>!!n&&Number.isInteger(Number(n)),tge=n=>n.endsWith("%")&&K0(n.slice(0,-1)),Pn=n=>v$.test(n),gh=n=>Yme.test(n),nge=new Set(["length","size","percentage"]),rge=n=>ay(n,nge,y$),ige=n=>ay(n,"position",y$),age=new Set(["image","url"]),sge=n=>ay(n,age,cge),oge=n=>ay(n,"",uge),qy=()=>!0,ay=(n,e,t)=>{const r=v$.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},lge=n=>Zme.test(n)&&!Qme.test(n),y$=()=>!1,uge=n=>Jme.test(n),cge=n=>ege.test(n),dge=()=>{const n=Zr("colors"),e=Zr("spacing"),t=Zr("blur"),r=Zr("brightness"),i=Zr("borderColor"),a=Zr("borderRadius"),s=Zr("borderSpacing"),o=Zr("borderWidth"),l=Zr("contrast"),u=Zr("grayscale"),c=Zr("hueRotate"),d=Zr("invert"),f=Zr("gap"),m=Zr("gradientColorStops"),v=Zr("gradientColorStopPositions"),_=Zr("inset"),w=Zr("margin"),x=Zr("opacity"),S=Zr("padding"),E=Zr("saturate"),T=Zr("scale"),D=Zr("sepia"),F=Zr("skew"),P=Zr("space"),N=Zr("translate"),I=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto",Pn,e],G=()=>[Pn,e],H=()=>["",Wc,mh],K=()=>["auto",K0,Pn],ne=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],re=()=>["solid","dashed","dotted","double","none"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],ue=()=>["","0",Pn],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],pe=()=>[K0,Pn];return{cacheSize:500,separator:":",theme:{colors:[qy],spacing:[Wc,mh],blur:["none","",gh,Pn],brightness:pe(),borderColor:[n],borderRadius:["none","","full",gh,Pn],borderSpacing:G(),borderWidth:H(),contrast:pe(),grayscale:ue(),hueRotate:pe(),invert:ue(),gap:G(),gradientColorStops:[n],gradientColorStopPositions:[tge,mh],inset:B(),margin:B(),opacity:pe(),padding:G(),saturate:pe(),scale:pe(),sepia:ue(),skew:pe(),space:G(),translate:G()},classGroups:{aspect:[{aspect:["auto","square","video",Pn]}],container:["container"],columns:[{columns:[gh]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ne(),Pn]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Wy,Pn]}],basis:[{basis:B()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Pn]}],grow:[{grow:ue()}],shrink:[{shrink:ue()}],order:[{order:["first","last","none",Wy,Pn]}],"grid-cols":[{"grid-cols":[qy]}],"col-start-end":[{col:["auto",{span:["full",Wy,Pn]},Pn]}],"col-start":[{"col-start":K()}],"col-end":[{"col-end":K()}],"grid-rows":[{"grid-rows":[qy]}],"row-start-end":[{row:["auto",{span:[Wy,Pn]},Pn]}],"row-start":[{"row-start":K()}],"row-end":[{"row-end":K()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Pn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Pn]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Pn,e]}],"min-w":[{"min-w":[Pn,e,"min","max","fit"]}],"max-w":[{"max-w":[Pn,e,"none","full","min","max","fit","prose",{screen:[gh]},gh]}],h:[{h:[Pn,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Pn,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Pn,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Pn,e,"auto","min","max","fit"]}],"font-size":[{text:["base",gh,mh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",sM]}],"font-family":[{font:[qy]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Pn]}],"line-clamp":[{"line-clamp":["none",K0,sM]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Wc,Pn]}],"list-image":[{"list-image":["none",Pn]}],"list-style-type":[{list:["none","disc","decimal",Pn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Wc,mh]}],"underline-offset":[{"underline-offset":["auto",Wc,Pn]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:G()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ne(),ige]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",rge]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},sge]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...re(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:re()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...re()]}],"outline-offset":[{"outline-offset":[Wc,Pn]}],"outline-w":[{outline:[Wc,mh]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:H()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Wc,mh]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",gh,oge]}],"shadow-color":[{shadow:[qy]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...oe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":oe()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",gh,Pn]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[d]}],saturate:[{saturate:[E]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Pn]}],duration:[{duration:pe()}],ease:[{ease:["linear","in","out","in-out",Pn]}],delay:[{delay:pe()}],animate:[{animate:["none","spin","ping","pulse","bounce",Pn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[Wy,Pn]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[F]}],"skew-y":[{"skew-y":[F]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Pn]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pn]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":G()}],"scroll-mx":[{"scroll-mx":G()}],"scroll-my":[{"scroll-my":G()}],"scroll-ms":[{"scroll-ms":G()}],"scroll-me":[{"scroll-me":G()}],"scroll-mt":[{"scroll-mt":G()}],"scroll-mr":[{"scroll-mr":G()}],"scroll-mb":[{"scroll-mb":G()}],"scroll-ml":[{"scroll-ml":G()}],"scroll-p":[{"scroll-p":G()}],"scroll-px":[{"scroll-px":G()}],"scroll-py":[{"scroll-py":G()}],"scroll-ps":[{"scroll-ps":G()}],"scroll-pe":[{"scroll-pe":G()}],"scroll-pt":[{"scroll-pt":G()}],"scroll-pr":[{"scroll-pr":G()}],"scroll-pb":[{"scroll-pb":G()}],"scroll-pl":[{"scroll-pl":G()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pn]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Wc,mh,sM]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},hge=$me(dge);function Jt(...n){return hge(a$(n))}const fge=ome,x$=M.forwardRef(({className:n,...e},t)=>h.jsx(Qq,{ref:t,className:Jt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));x$.displayName=Qq.displayName;const pge=kT("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),_$=M.forwardRef(({className:n,variant:e,...t},r)=>h.jsx(Jq,{ref:r,className:Jt(pge({variant:e}),n),...t}));_$.displayName=Jq.displayName;const mge=M.forwardRef(({className:n,...e},t)=>h.jsx(n$,{ref:t,className:Jt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));mge.displayName=n$.displayName;const w$=M.forwardRef(({className:n,...e},t)=>h.jsx(r$,{ref:t,className:Jt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:h.jsx(W_,{className:"h-4 w-4"})}));w$.displayName=r$.displayName;const b$=M.forwardRef(({className:n,...e},t)=>h.jsx(e$,{ref:t,className:Jt("text-sm font-semibold",n),...e}));b$.displayName=e$.displayName;const S$=M.forwardRef(({className:n,...e},t)=>h.jsx(t$,{ref:t,className:Jt("text-sm opacity-90",n),...e}));S$.displayName=t$.displayName;function gge(){const{toasts:n}=Iq();return h.jsxs(fge,{children:[n.map(function({id:e,title:t,description:r,action:i,...a}){return h.jsxs(_$,{...a,children:[h.jsxs("div",{className:"grid gap-1",children:[t&&h.jsx(b$,{children:t}),r&&h.jsx(S$,{children:r})]}),i,h.jsx(w$,{})]},e)}),h.jsx(x$,{})]})}var vge=n3[" useId ".trim().toString()]||(()=>{}),yge=0;function mf(n){const[e,t]=M.useState(vge());return Xa(()=>{t(r=>r??String(yge++))},[n]),e?`radix-${e}`:""}const xge=["top","right","bottom","left"],Mf=Math.min,Uo=Math.max,dE=Math.round,Eb=Math.floor,dc=n=>({x:n,y:n}),_ge={left:"right",right:"left",bottom:"top",top:"bottom"},wge={start:"end",end:"start"};function bN(n,e,t){return Uo(n,Mf(e,t))}function Id(n,e){return typeof n=="function"?n(e):n}function Pd(n){return n.split("-")[0]}function sy(n){return n.split("-")[1]}function QD(n){return n==="x"?"y":"x"}function JD(n){return n==="y"?"height":"width"}const bge=new Set(["top","bottom"]);function nc(n){return bge.has(Pd(n))?"y":"x"}function eL(n){return QD(nc(n))}function Sge(n,e,t){t===void 0&&(t=!1);const r=sy(n),i=eL(n),a=JD(i);let s=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(s=hE(s)),[s,hE(s)]}function Ege(n){const e=hE(n);return[SN(n),e,SN(e)]}function SN(n){return n.replace(/start|end/g,e=>wge[e])}const F6=["left","right"],j6=["right","left"],Age=["top","bottom"],Tge=["bottom","top"];function kge(n,e,t){switch(n){case"top":case"bottom":return t?e?j6:F6:e?F6:j6;case"left":case"right":return e?Age:Tge;default:return[]}}function Cge(n,e,t,r){const i=sy(n);let a=kge(Pd(n),t==="start",r);return i&&(a=a.map(s=>s+"-"+i),e&&(a=a.concat(a.map(SN)))),a}function hE(n){return n.replace(/left|right|bottom|top/g,e=>_ge[e])}function Mge(n){return{top:0,right:0,bottom:0,left:0,...n}}function E$(n){return typeof n!="number"?Mge(n):{top:n,right:n,bottom:n,left:n}}function fE(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function B6(n,e,t){let{reference:r,floating:i}=n;const a=nc(e),s=eL(e),o=JD(s),l=Pd(e),u=a==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[o]/2-i[o]/2;let m;switch(l){case"top":m={x:c,y:r.y-i.height};break;case"bottom":m={x:c,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-i.width,y:d};break;default:m={x:r.x,y:r.y}}switch(sy(e)){case"start":m[s]-=f*(t&&u?-1:1);break;case"end":m[s]+=f*(t&&u?-1:1);break}return m}const Ige=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:s}=t,o=a.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let u=await s.getElementRects({reference:n,floating:e,strategy:i}),{x:c,y:d}=B6(u,r,l),f=r,m={},v=0;for(let _=0;_<o.length;_++){const{name:w,fn:x}=o[_],{x:S,y:E,data:T,reset:D}=await x({x:c,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:m,rects:u,platform:s,elements:{reference:n,floating:e}});c=S??c,d=E??d,m={...m,[w]:{...m[w],...T}},D&&v<=50&&(v++,typeof D=="object"&&(D.placement&&(f=D.placement),D.rects&&(u=D.rects===!0?await s.getElementRects({reference:n,floating:e,strategy:i}):D.rects),{x:c,y:d}=B6(u,f,l)),_=-1)}return{x:c,y:d,placement:f,strategy:i,middlewareData:m}};async function G1(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:s,elements:o,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:m=0}=Id(e,n),v=E$(m),w=o[f?d==="floating"?"reference":"floating":d],x=fE(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(w)))==null||t?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:u,rootBoundary:c,strategy:l})),S=d==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),T=await(a.isElement==null?void 0:a.isElement(E))?await(a.getScale==null?void 0:a.getScale(E))||{x:1,y:1}:{x:1,y:1},D=fE(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:S,offsetParent:E,strategy:l}):S);return{top:(x.top-D.top+v.top)/T.y,bottom:(D.bottom-x.bottom+v.bottom)/T.y,left:(x.left-D.left+v.left)/T.x,right:(D.right-x.right+v.right)/T.x}}const Pge=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:a,platform:s,elements:o,middlewareData:l}=e,{element:u,padding:c=0}=Id(n,e)||{};if(u==null)return{};const d=E$(c),f={x:t,y:r},m=eL(i),v=JD(m),_=await s.getDimensions(u),w=m==="y",x=w?"top":"left",S=w?"bottom":"right",E=w?"clientHeight":"clientWidth",T=a.reference[v]+a.reference[m]-f[m]-a.floating[v],D=f[m]-a.reference[m],F=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let P=F?F[E]:0;(!P||!await(s.isElement==null?void 0:s.isElement(F)))&&(P=o.floating[E]||a.floating[v]);const N=T/2-D/2,I=P/2-_[v]/2-1,R=Mf(d[x],I),B=Mf(d[S],I),G=R,H=P-_[v]-B,K=P/2-_[v]/2+N,ne=bN(G,K,H),re=!l.arrow&&sy(i)!=null&&K!==ne&&a.reference[v]/2-(K<G?R:B)-_[v]/2<0,oe=re?K<G?K-G:K-H:0;return{[m]:f[m]+oe,data:{[m]:ne,centerOffset:K-ne-oe,...re&&{alignmentOffset:oe}},reset:re}}}),Nge=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:a,rects:s,initialPlacement:o,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:_=!0,...w}=Id(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const x=Pd(i),S=nc(o),E=Pd(o)===o,T=await(l.isRTL==null?void 0:l.isRTL(u.floating)),D=f||(E||!_?[hE(o)]:Ege(o)),F=v!=="none";!f&&F&&D.push(...Cge(o,_,v,T));const P=[o,...D],N=await G1(e,w),I=[];let R=((r=a.flip)==null?void 0:r.overflows)||[];if(c&&I.push(N[x]),d){const K=Sge(i,s,T);I.push(N[K[0]],N[K[1]])}if(R=[...R,{placement:i,overflows:I}],!I.every(K=>K<=0)){var B,G;const K=(((B=a.flip)==null?void 0:B.index)||0)+1,ne=P[K];if(ne&&(!(d==="alignment"?S!==nc(ne):!1)||R.every($=>nc($.placement)===S?$.overflows[0]>0:!0)))return{data:{index:K,overflows:R},reset:{placement:ne}};let re=(G=R.filter(oe=>oe.overflows[0]<=0).sort((oe,$)=>oe.overflows[1]-$.overflows[1])[0])==null?void 0:G.placement;if(!re)switch(m){case"bestFit":{var H;const oe=(H=R.filter($=>{if(F){const ue=nc($.placement);return ue===S||ue==="y"}return!0}).map($=>[$.placement,$.overflows.filter(ue=>ue>0).reduce((ue,se)=>ue+se,0)]).sort(($,ue)=>$[1]-ue[1])[0])==null?void 0:H[0];oe&&(re=oe);break}case"initialPlacement":re=o;break}if(i!==re)return{reset:{placement:re}}}return{}}}};function U6(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function V6(n){return xge.some(e=>n[e]>=0)}const Rge=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=Id(n,e);switch(r){case"referenceHidden":{const a=await G1(e,{...i,elementContext:"reference"}),s=U6(a,t.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:V6(s)}}}case"escaped":{const a=await G1(e,{...i,altBoundary:!0}),s=U6(a,t.floating);return{data:{escapedOffsets:s,escaped:V6(s)}}}default:return{}}}}},A$=new Set(["left","top"]);async function Dge(n,e){const{placement:t,platform:r,elements:i}=n,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=Pd(t),o=sy(t),l=nc(t)==="y",u=A$.has(s)?-1:1,c=a&&l?-1:1,d=Id(e,n);let{mainAxis:f,crossAxis:m,alignmentAxis:v}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&typeof v=="number"&&(m=o==="end"?v*-1:v),l?{x:m*c,y:f*u}:{x:f*u,y:m*c}}const Lge=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:a,placement:s,middlewareData:o}=e,l=await Dge(e,n);return s===((t=o.offset)==null?void 0:t.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:a+l.y,data:{...l,placement:s}}}}},Oge=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:s=!1,limiter:o={fn:w=>{let{x,y:S}=w;return{x,y:S}}},...l}=Id(n,e),u={x:t,y:r},c=await G1(e,l),d=nc(Pd(i)),f=QD(d);let m=u[f],v=u[d];if(a){const w=f==="y"?"top":"left",x=f==="y"?"bottom":"right",S=m+c[w],E=m-c[x];m=bN(S,m,E)}if(s){const w=d==="y"?"top":"left",x=d==="y"?"bottom":"right",S=v+c[w],E=v-c[x];v=bN(S,v,E)}const _=o.fn({...e,[f]:m,[d]:v});return{..._,data:{x:_.x-t,y:_.y-r,enabled:{[f]:a,[d]:s}}}}}},Fge=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:a,middlewareData:s}=e,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=Id(n,e),c={x:t,y:r},d=nc(i),f=QD(d);let m=c[f],v=c[d];const _=Id(o,e),w=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(l){const E=f==="y"?"height":"width",T=a.reference[f]-a.floating[E]+w.mainAxis,D=a.reference[f]+a.reference[E]-w.mainAxis;m<T?m=T:m>D&&(m=D)}if(u){var x,S;const E=f==="y"?"width":"height",T=A$.has(Pd(i)),D=a.reference[d]-a.floating[E]+(T&&((x=s.offset)==null?void 0:x[d])||0)+(T?0:w.crossAxis),F=a.reference[d]+a.reference[E]+(T?0:((S=s.offset)==null?void 0:S[d])||0)-(T?w.crossAxis:0);v<D?v=D:v>F&&(v=F)}return{[f]:m,[d]:v}}}},jge=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:a,platform:s,elements:o}=e,{apply:l=()=>{},...u}=Id(n,e),c=await G1(e,u),d=Pd(i),f=sy(i),m=nc(i)==="y",{width:v,height:_}=a.floating;let w,x;d==="top"||d==="bottom"?(w=d,x=f===(await(s.isRTL==null?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(x=d,w=f==="end"?"top":"bottom");const S=_-c.top-c.bottom,E=v-c.left-c.right,T=Mf(_-c[w],S),D=Mf(v-c[x],E),F=!e.middlewareData.shift;let P=T,N=D;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(N=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=S),F&&!f){const R=Uo(c.left,0),B=Uo(c.right,0),G=Uo(c.top,0),H=Uo(c.bottom,0);m?N=v-2*(R!==0||B!==0?R+B:Uo(c.left,c.right)):P=_-2*(G!==0||H!==0?G+H:Uo(c.top,c.bottom))}await l({...e,availableWidth:N,availableHeight:P});const I=await s.getDimensions(o.floating);return v!==I.width||_!==I.height?{reset:{rects:!0}}:{}}}};function MT(){return typeof window<"u"}function oy(n){return T$(n)?(n.nodeName||"").toLowerCase():"#document"}function qo(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Ec(n){var e;return(e=(T$(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function T$(n){return MT()?n instanceof Node||n instanceof qo(n).Node:!1}function _u(n){return MT()?n instanceof Element||n instanceof qo(n).Element:!1}function xc(n){return MT()?n instanceof HTMLElement||n instanceof qo(n).HTMLElement:!1}function z6(n){return!MT()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof qo(n).ShadowRoot}const Bge=new Set(["inline","contents"]);function q_(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=wu(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!Bge.has(i)}const Uge=new Set(["table","td","th"]);function Vge(n){return Uge.has(oy(n))}const zge=[":popover-open",":modal"];function IT(n){return zge.some(e=>{try{return n.matches(e)}catch{return!1}})}const Hge=["transform","translate","scale","rotate","perspective"],Gge=["transform","translate","scale","rotate","perspective","filter"],Wge=["paint","layout","strict","content"];function tL(n){const e=nL(),t=_u(n)?wu(n):n;return Hge.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||Gge.some(r=>(t.willChange||"").includes(r))||Wge.some(r=>(t.contain||"").includes(r))}function qge(n){let e=If(n);for(;xc(e)&&!Nv(e);){if(tL(e))return e;if(IT(e))return null;e=If(e)}return null}function nL(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const $ge=new Set(["html","body","#document"]);function Nv(n){return $ge.has(oy(n))}function wu(n){return qo(n).getComputedStyle(n)}function PT(n){return _u(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function If(n){if(oy(n)==="html")return n;const e=n.assignedSlot||n.parentNode||z6(n)&&n.host||Ec(n);return z6(e)?e.host:e}function k$(n){const e=If(n);return Nv(e)?n.ownerDocument?n.ownerDocument.body:n.body:xc(e)&&q_(e)?e:k$(e)}function W1(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=k$(n),a=i===((r=n.ownerDocument)==null?void 0:r.body),s=qo(i);if(a){const o=EN(s);return e.concat(s,s.visualViewport||[],q_(i)?i:[],o&&t?W1(o):[])}return e.concat(i,W1(i,[],t))}function EN(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function C$(n){const e=wu(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=xc(n),a=i?n.offsetWidth:t,s=i?n.offsetHeight:r,o=dE(t)!==a||dE(r)!==s;return o&&(t=a,r=s),{width:t,height:r,$:o}}function rL(n){return _u(n)?n:n.contextElement}function Y0(n){const e=rL(n);if(!xc(e))return dc(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:a}=C$(e);let s=(a?dE(t.width):t.width)/r,o=(a?dE(t.height):t.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const Xge=dc(0);function M$(n){const e=qo(n);return!nL()||!e.visualViewport?Xge:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Kge(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==qo(n)?!1:e}function Mm(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),a=rL(n);let s=dc(1);e&&(r?_u(r)&&(s=Y0(r)):s=Y0(n));const o=Kge(a,t,r)?M$(a):dc(0);let l=(i.left+o.x)/s.x,u=(i.top+o.y)/s.y,c=i.width/s.x,d=i.height/s.y;if(a){const f=qo(a),m=r&&_u(r)?qo(r):r;let v=f,_=EN(v);for(;_&&r&&m!==v;){const w=Y0(_),x=_.getBoundingClientRect(),S=wu(_),E=x.left+(_.clientLeft+parseFloat(S.paddingLeft))*w.x,T=x.top+(_.clientTop+parseFloat(S.paddingTop))*w.y;l*=w.x,u*=w.y,c*=w.x,d*=w.y,l+=E,u+=T,v=qo(_),_=EN(v)}}return fE({width:c,height:d,x:l,y:u})}function iL(n,e){const t=PT(n).scrollLeft;return e?e.left+t:Mm(Ec(n)).left+t}function I$(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:iL(n,r)),a=r.top+e.scrollTop;return{x:i,y:a}}function Yge(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const a=i==="fixed",s=Ec(r),o=e?IT(e.floating):!1;if(r===s||o&&a)return t;let l={scrollLeft:0,scrollTop:0},u=dc(1);const c=dc(0),d=xc(r);if((d||!d&&!a)&&((oy(r)!=="body"||q_(s))&&(l=PT(r)),xc(r))){const m=Mm(r);u=Y0(r),c.x=m.x+r.clientLeft,c.y=m.y+r.clientTop}const f=s&&!d&&!a?I$(s,l,!0):dc(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+c.x+f.x,y:t.y*u.y-l.scrollTop*u.y+c.y+f.y}}function Zge(n){return Array.from(n.getClientRects())}function Qge(n){const e=Ec(n),t=PT(n),r=n.ownerDocument.body,i=Uo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Uo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-t.scrollLeft+iL(n);const o=-t.scrollTop;return wu(r).direction==="rtl"&&(s+=Uo(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:s,y:o}}function Jge(n,e){const t=qo(n),r=Ec(n),i=t.visualViewport;let a=r.clientWidth,s=r.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;const u=nL();(!u||u&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:a,height:s,x:o,y:l}}const e0e=new Set(["absolute","fixed"]);function t0e(n,e){const t=Mm(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,a=xc(n)?Y0(n):dc(1),s=n.clientWidth*a.x,o=n.clientHeight*a.y,l=i*a.x,u=r*a.y;return{width:s,height:o,x:l,y:u}}function H6(n,e,t){let r;if(e==="viewport")r=Jge(n,t);else if(e==="document")r=Qge(Ec(n));else if(_u(e))r=t0e(e,t);else{const i=M$(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return fE(r)}function P$(n,e){const t=If(n);return t===e||!_u(t)||Nv(t)?!1:wu(t).position==="fixed"||P$(t,e)}function n0e(n,e){const t=e.get(n);if(t)return t;let r=W1(n,[],!1).filter(o=>_u(o)&&oy(o)!=="body"),i=null;const a=wu(n).position==="fixed";let s=a?If(n):n;for(;_u(s)&&!Nv(s);){const o=wu(s),l=tL(s);!l&&o.position==="fixed"&&(i=null),(a?!l&&!i:!l&&o.position==="static"&&!!i&&e0e.has(i.position)||q_(s)&&!l&&P$(n,s))?r=r.filter(c=>c!==s):i=o,s=If(s)}return e.set(n,r),r}function r0e(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const s=[...t==="clippingAncestors"?IT(e)?[]:n0e(e,this._c):[].concat(t),r],o=s[0],l=s.reduce((u,c)=>{const d=H6(e,c,i);return u.top=Uo(d.top,u.top),u.right=Mf(d.right,u.right),u.bottom=Mf(d.bottom,u.bottom),u.left=Uo(d.left,u.left),u},H6(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function i0e(n){const{width:e,height:t}=C$(n);return{width:e,height:t}}function a0e(n,e,t){const r=xc(e),i=Ec(e),a=t==="fixed",s=Mm(n,!0,a,e);let o={scrollLeft:0,scrollTop:0};const l=dc(0);function u(){l.x=iL(i)}if(r||!r&&!a)if((oy(e)!=="body"||q_(i))&&(o=PT(e)),r){const m=Mm(e,!0,a,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else i&&u();a&&!r&&i&&u();const c=i&&!r&&!a?I$(i,o):dc(0),d=s.left+o.scrollLeft-l.x-c.x,f=s.top+o.scrollTop-l.y-c.y;return{x:d,y:f,width:s.width,height:s.height}}function oM(n){return wu(n).position==="static"}function G6(n,e){if(!xc(n)||wu(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Ec(n)===t&&(t=t.ownerDocument.body),t}function N$(n,e){const t=qo(n);if(IT(n))return t;if(!xc(n)){let i=If(n);for(;i&&!Nv(i);){if(_u(i)&&!oM(i))return i;i=If(i)}return t}let r=G6(n,e);for(;r&&Vge(r)&&oM(r);)r=G6(r,e);return r&&Nv(r)&&oM(r)&&!tL(r)?t:r||qge(n)||t}const s0e=async function(n){const e=this.getOffsetParent||N$,t=this.getDimensions,r=await t(n.floating);return{reference:a0e(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function o0e(n){return wu(n).direction==="rtl"}const l0e={convertOffsetParentRelativeRectToViewportRelativeRect:Yge,getDocumentElement:Ec,getClippingRect:r0e,getOffsetParent:N$,getElementRects:s0e,getClientRects:Zge,getDimensions:i0e,getScale:Y0,isElement:_u,isRTL:o0e};function R$(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function u0e(n,e){let t=null,r;const i=Ec(n);function a(){var o;clearTimeout(r),(o=t)==null||o.disconnect(),t=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const u=n.getBoundingClientRect(),{left:c,top:d,width:f,height:m}=u;if(o||e(),!f||!m)return;const v=Eb(d),_=Eb(i.clientWidth-(c+f)),w=Eb(i.clientHeight-(d+m)),x=Eb(c),E={rootMargin:-v+"px "+-_+"px "+-w+"px "+-x+"px",threshold:Uo(0,Mf(1,l))||1};let T=!0;function D(F){const P=F[0].intersectionRatio;if(P!==l){if(!T)return s();P?s(!1,P):r=setTimeout(()=>{s(!1,1e-7)},1e3)}P===1&&!R$(u,n.getBoundingClientRect())&&s(),T=!1}try{t=new IntersectionObserver(D,{...E,root:i.ownerDocument})}catch{t=new IntersectionObserver(D,E)}t.observe(n)}return s(!0),a}function c0e(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=rL(n),c=i||a?[...u?W1(u):[],...W1(e)]:[];c.forEach(x=>{i&&x.addEventListener("scroll",t,{passive:!0}),a&&x.addEventListener("resize",t)});const d=u&&o?u0e(u,t):null;let f=-1,m=null;s&&(m=new ResizeObserver(x=>{let[S]=x;S&&S.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var E;(E=m)==null||E.observe(e)})),t()}),u&&!l&&m.observe(u),m.observe(e));let v,_=l?Mm(n):null;l&&w();function w(){const x=Mm(n);_&&!R$(_,x)&&t(),_=x,v=requestAnimationFrame(w)}return t(),()=>{var x;c.forEach(S=>{i&&S.removeEventListener("scroll",t),a&&S.removeEventListener("resize",t)}),d==null||d(),(x=m)==null||x.disconnect(),m=null,l&&cancelAnimationFrame(v)}}const d0e=Lge,h0e=Oge,f0e=Nge,p0e=jge,m0e=Rge,W6=Pge,g0e=Fge,v0e=(n,e,t)=>{const r=new Map,i={platform:l0e,...t},a={...i.platform,_c:r};return Ige(n,e,{...i,platform:a})};var y0e=typeof document<"u",x0e=function(){},rS=y0e?M.useLayoutEffect:x0e;function pE(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!pE(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const a=i[r];if(!(a==="_owner"&&n.$$typeof)&&!pE(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function D$(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function q6(n,e){const t=D$(n);return Math.round(e*t)/t}function lM(n){const e=M.useRef(n);return rS(()=>{e.current=n}),e}function _0e(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:s}={},transform:o=!0,whileElementsMounted:l,open:u}=n,[c,d]=M.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=M.useState(r);pE(f,r)||m(r);const[v,_]=M.useState(null),[w,x]=M.useState(null),S=M.useCallback($=>{$!==F.current&&(F.current=$,_($))},[]),E=M.useCallback($=>{$!==P.current&&(P.current=$,x($))},[]),T=a||v,D=s||w,F=M.useRef(null),P=M.useRef(null),N=M.useRef(c),I=l!=null,R=lM(l),B=lM(i),G=lM(u),H=M.useCallback(()=>{if(!F.current||!P.current)return;const $={placement:e,strategy:t,middleware:f};B.current&&($.platform=B.current),v0e(F.current,P.current,$).then(ue=>{const se={...ue,isPositioned:G.current!==!1};K.current&&!pE(N.current,se)&&(N.current=se,Bf.flushSync(()=>{d(se)}))})},[f,e,t,B,G]);rS(()=>{u===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d($=>({...$,isPositioned:!1})))},[u]);const K=M.useRef(!1);rS(()=>(K.current=!0,()=>{K.current=!1}),[]),rS(()=>{if(T&&(F.current=T),D&&(P.current=D),T&&D){if(R.current)return R.current(T,D,H);H()}},[T,D,H,R,I]);const ne=M.useMemo(()=>({reference:F,floating:P,setReference:S,setFloating:E}),[S,E]),re=M.useMemo(()=>({reference:T,floating:D}),[T,D]),oe=M.useMemo(()=>{const $={position:t,left:0,top:0};if(!re.floating)return $;const ue=q6(re.floating,c.x),se=q6(re.floating,c.y);return o?{...$,transform:"translate("+ue+"px, "+se+"px)",...D$(re.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ue,top:se}},[t,o,re.floating,c.x,c.y]);return M.useMemo(()=>({...c,update:H,refs:ne,elements:re,floatingStyles:oe}),[c,H,ne,re,oe])}const w0e=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?W6({element:r.current,padding:i}).fn(t):{}:r?W6({element:r,padding:i}).fn(t):{}}}},b0e=(n,e)=>({...d0e(n),options:[n,e]}),S0e=(n,e)=>({...h0e(n),options:[n,e]}),E0e=(n,e)=>({...g0e(n),options:[n,e]}),A0e=(n,e)=>({...f0e(n),options:[n,e]}),T0e=(n,e)=>({...p0e(n),options:[n,e]}),k0e=(n,e)=>({...m0e(n),options:[n,e]}),C0e=(n,e)=>({...w0e(n),options:[n,e]});var M0e="Arrow",L$=M.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...a}=n;return h.jsx(Ln.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});L$.displayName=M0e;var I0e=L$;function P0e(n){const[e,t]=M.useState(void 0);return Xa(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let s,o;if("borderBoxSize"in a){const l=a.borderBoxSize,u=Array.isArray(l)?l[0]:l;s=u.inlineSize,o=u.blockSize}else s=n.offsetWidth,o=n.offsetHeight;t({width:s,height:o})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var aL="Popper",[O$,NT]=Bd(aL),[N0e,F$]=O$(aL),j$=n=>{const{__scopePopper:e,children:t}=n,[r,i]=M.useState(null);return h.jsx(N0e,{scope:e,anchor:r,onAnchorChange:i,children:t})};j$.displayName=aL;var B$="PopperAnchor",U$=M.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,a=F$(B$,t),s=M.useRef(null),o=Or(e,s);return M.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:h.jsx(Ln.div,{...i,ref:o})});U$.displayName=B$;var sL="PopperContent",[R0e,D0e]=O$(sL),V$=M.forwardRef((n,e)=>{var Se,ge,Ge,Me,Ce,Te;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:s=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:c=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:v,..._}=n,w=F$(sL,t),[x,S]=M.useState(null),E=Or(e,te=>S(te)),[T,D]=M.useState(null),F=P0e(T),P=(F==null?void 0:F.width)??0,N=(F==null?void 0:F.height)??0,I=r+(a!=="center"?"-"+a:""),R=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},B=Array.isArray(u)?u:[u],G=B.length>0,H={padding:R,boundary:B.filter(O0e),altBoundary:G},{refs:K,floatingStyles:ne,placement:re,isPositioned:oe,middlewareData:$}=_0e({strategy:"fixed",placement:I,whileElementsMounted:(...te)=>c0e(...te,{animationFrame:m==="always"}),elements:{reference:w.anchor},middleware:[b0e({mainAxis:i+N,alignmentAxis:s}),l&&S0e({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?E0e():void 0,...H}),l&&A0e({...H}),T0e({...H,apply:({elements:te,rects:Ee,availableWidth:Pe,availableHeight:Ke})=>{const{width:je,height:st}=Ee.reference,tt=te.floating.style;tt.setProperty("--radix-popper-available-width",`${Pe}px`),tt.setProperty("--radix-popper-available-height",`${Ke}px`),tt.setProperty("--radix-popper-anchor-width",`${je}px`),tt.setProperty("--radix-popper-anchor-height",`${st}px`)}}),T&&C0e({element:T,padding:o}),F0e({arrowWidth:P,arrowHeight:N}),f&&k0e({strategy:"referenceHidden",...H})]}),[ue,se]=G$(re),pe=Pl(v);Xa(()=>{oe&&(pe==null||pe())},[oe,pe]);const Fe=(Se=$.arrow)==null?void 0:Se.x,$e=(ge=$.arrow)==null?void 0:ge.y,at=((Ge=$.arrow)==null?void 0:Ge.centerOffset)!==0,[me,Le]=M.useState();return Xa(()=>{x&&Le(window.getComputedStyle(x).zIndex)},[x]),h.jsx("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...ne,transform:oe?ne.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,"--radix-popper-transform-origin":[(Me=$.transformOrigin)==null?void 0:Me.x,(Ce=$.transformOrigin)==null?void 0:Ce.y].join(" "),...((Te=$.hide)==null?void 0:Te.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:h.jsx(R0e,{scope:t,placedSide:ue,onArrowChange:D,arrowX:Fe,arrowY:$e,shouldHideArrow:at,children:h.jsx(Ln.div,{"data-side":ue,"data-align":se,..._,ref:E,style:{..._.style,animation:oe?void 0:"none"}})})})});V$.displayName=sL;var z$="PopperArrow",L0e={top:"bottom",right:"left",bottom:"top",left:"right"},H$=M.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,a=D0e(z$,r),s=L0e[a.placedSide];return h.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:h.jsx(I0e,{...i,ref:t,style:{...i.style,display:"block"}})})});H$.displayName=z$;function O0e(n){return n!==null}var F0e=n=>({name:"transformOrigin",options:n,fn(e){var w,x,S;const{placement:t,rects:r,middlewareData:i}=e,s=((w=i.arrow)==null?void 0:w.centerOffset)!==0,o=s?0:n.arrowWidth,l=s?0:n.arrowHeight,[u,c]=G$(t),d={start:"0%",center:"50%",end:"100%"}[c],f=(((x=i.arrow)==null?void 0:x.x)??0)+o/2,m=(((S=i.arrow)==null?void 0:S.y)??0)+l/2;let v="",_="";return u==="bottom"?(v=s?d:`${f}px`,_=`${-l}px`):u==="top"?(v=s?d:`${f}px`,_=`${r.floating.height+l}px`):u==="right"?(v=`${-l}px`,_=s?d:`${m}px`):u==="left"&&(v=`${r.floating.width+l}px`,_=s?d:`${m}px`),{data:{x:v,y:_}}}});function G$(n){const[e,t="center"]=n.split("-");return[e,t]}var j0e=j$,W$=U$,q$=V$,$$=H$,[RT,V6e]=Bd("Tooltip",[NT]),oL=NT(),X$="TooltipProvider",B0e=700,$6="tooltip.open",[U0e,K$]=RT(X$),Y$=n=>{const{__scopeTooltip:e,delayDuration:t=B0e,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:a}=n,s=M.useRef(!0),o=M.useRef(!1),l=M.useRef(0);return M.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),h.jsx(U0e,{scope:e,isOpenDelayedRef:s,delayDuration:t,onOpen:M.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:M.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:M.useCallback(u=>{o.current=u},[]),disableHoverableContent:i,children:a})};Y$.displayName=X$;var Z$="Tooltip",[z6e,DT]=RT(Z$),AN="TooltipTrigger",V0e=M.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=DT(AN,t),a=K$(AN,t),s=oL(t),o=M.useRef(null),l=Or(e,o,i.onTriggerChange),u=M.useRef(!1),c=M.useRef(!1),d=M.useCallback(()=>u.current=!1,[]);return M.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),h.jsx(W$,{asChild:!0,...s,children:h.jsx(Ln.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:cn(n.onPointerMove,f=>{f.pointerType!=="touch"&&!c.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),c.current=!0)}),onPointerLeave:cn(n.onPointerLeave,()=>{i.onTriggerLeave(),c.current=!1}),onPointerDown:cn(n.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:cn(n.onFocus,()=>{u.current||i.onOpen()}),onBlur:cn(n.onBlur,i.onClose),onClick:cn(n.onClick,i.onClose)})})});V0e.displayName=AN;var z0e="TooltipPortal",[H6e,H0e]=RT(z0e,{forceMount:void 0}),Rv="TooltipContent",Q$=M.forwardRef((n,e)=>{const t=H0e(Rv,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...a}=n,s=DT(Rv,n.__scopeTooltip);return h.jsx(tg,{present:r||s.open,children:s.disableHoverableContent?h.jsx(J$,{side:i,...a,ref:e}):h.jsx(G0e,{side:i,...a,ref:e})})}),G0e=M.forwardRef((n,e)=>{const t=DT(Rv,n.__scopeTooltip),r=K$(Rv,n.__scopeTooltip),i=M.useRef(null),a=Or(e,i),[s,o]=M.useState(null),{trigger:l,onClose:u}=t,c=i.current,{onPointerInTransitChange:d}=r,f=M.useCallback(()=>{o(null),d(!1)},[d]),m=M.useCallback((v,_)=>{const w=v.currentTarget,x={x:v.clientX,y:v.clientY},S=K0e(x,w.getBoundingClientRect()),E=Y0e(x,S),T=Z0e(_.getBoundingClientRect()),D=J0e([...E,...T]);o(D),d(!0)},[d]);return M.useEffect(()=>()=>f(),[f]),M.useEffect(()=>{if(l&&c){const v=w=>m(w,c),_=w=>m(w,l);return l.addEventListener("pointerleave",v),c.addEventListener("pointerleave",_),()=>{l.removeEventListener("pointerleave",v),c.removeEventListener("pointerleave",_)}}},[l,c,m,f]),M.useEffect(()=>{if(s){const v=_=>{const w=_.target,x={x:_.clientX,y:_.clientY},S=(l==null?void 0:l.contains(w))||(c==null?void 0:c.contains(w)),E=!Q0e(x,s);S?f():E&&(f(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,c,s,u,f]),h.jsx(J$,{...n,ref:a})}),[W0e,q0e]=RT(Z$,{isInside:!1}),$0e=Rq("TooltipContent"),J$=M.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:s,...o}=n,l=DT(Rv,t),u=oL(t),{onClose:c}=l;return M.useEffect(()=>(document.addEventListener($6,c),()=>document.removeEventListener($6,c)),[c]),M.useEffect(()=>{if(l.trigger){const d=f=>{const m=f.target;m!=null&&m.contains(l.trigger)&&c()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,c]),h.jsx(z_,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:d=>d.preventDefault(),onDismiss:c,children:h.jsxs(q$,{"data-state":l.stateAttribute,...u,...o,ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx($0e,{children:r}),h.jsx(W0e,{scope:t,isInside:!0,children:h.jsx(Hpe,{id:l.contentId,role:"tooltip",children:i||r})})]})})});Q$.displayName=Rv;var eX="TooltipArrow",X0e=M.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=oL(t);return q0e(eX,t).isInside?null:h.jsx($$,{...i,...r,ref:e})});X0e.displayName=eX;function K0e(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),a=Math.abs(e.left-n.x);switch(Math.min(t,r,i,a)){case a:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Y0e(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function Z0e(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function Q0e(n,e){const{x:t,y:r}=n;let i=!1;for(let a=0,s=e.length-1;a<e.length;s=a++){const o=e[a],l=e[s],u=o.x,c=o.y,d=l.x,f=l.y;c>r!=f>r&&t<(d-u)*(r-c)/(f-c)+u&&(i=!i)}return i}function J0e(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),eve(e)}function eve(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const a=e[e.length-1],s=e[e.length-2];if((a.x-s.x)*(i.y-s.y)>=(a.y-s.y)*(i.x-s.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const a=t[t.length-1],s=t[t.length-2];if((a.x-s.x)*(i.y-s.y)>=(a.y-s.y)*(i.x-s.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var tve=Y$,tX=Q$;const nve=tve,rve=M.forwardRef(({className:n,sideOffset:e=4,...t},r)=>h.jsx(tX,{ref:r,sideOffset:e,className:Jt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...t}));rve.displayName=tX.displayName;const _c=M.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:Jt("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));_c.displayName="Card";const lL=M.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:Jt("flex flex-col space-y-1.5 p-6",n),...e}));lL.displayName="CardHeader";const nX=M.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:Jt("text-2xl font-semibold leading-none tracking-tight",n),...e}));nX.displayName="CardTitle";const ive=M.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:Jt("text-sm text-muted-foreground",n),...e}));ive.displayName="CardDescription";const Im=M.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:Jt("p-6 pt-0",n),...e}));Im.displayName="CardContent";const rX=M.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:Jt("flex items-center p-6 pt-0",n),...e}));rX.displayName="CardFooter";function ave(){return h.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:h.jsx(_c,{className:"w-full max-w-md mx-4",children:h.jsxs(Im,{className:"pt-6",children:[h.jsxs("div",{className:"flex mb-4 gap-2",children:[h.jsx(_N,{className:"h-8 w-8 text-red-500"}),h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),h.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const sve="/assets/backsound-Dx6NPs6j.mp3",ove="/assets/backsound1-BBcioZr7.mp3",lve="/assets/backsound2-BqESGsK4.mp3",X6=[{src:sve,label:"MPN Jaya"},{src:ove,label:"Sendu"},{src:lve,label:"Fun"}];let Eg=null;function uve(){const n=M.useRef(null),[e,t]=M.useState(!1),[r,i]=M.useState(0),[a,s]=M.useState(!1),[o,l]=M.useState(!1),[u,c]=M.useState(!1),[d,f]=M.useState(!1),m=M.useRef(null),v=()=>{n.current&&(e?n.current.pause():n.current.play(),t(!e))},_=w=>{const x=parseInt(w.target.value,10);i(x),document.cookie=`backsound_selected=${x}; path=/; max-age=31536000`,setTimeout(()=>{n.current&&(n.current.currentTime=0,e&&n.current.play())},100),m.current&&clearTimeout(m.current),m.current=setTimeout(()=>s(!1),5e3)};return M.useEffect(()=>{const w=document.cookie.match(/backsound_selected=(\d+)/);if(w&&i(Number(w[1])),n.current){if(Eg&&Eg!==n.current)try{Eg.pause()}catch{}Eg=n.current}if(n.current&&!e){const x=n.current.play();x!==void 0&&x.then(()=>t(!0)).catch(()=>{})}return localStorage.getItem("backsound_info_closed")||l(!0),()=>{n.current&&n.current.pause(),m.current&&clearTimeout(m.current),Eg===n.current&&(Eg=null)}},[]),M.useEffect(()=>{if(e&&d){const w=setTimeout(()=>f(!1),3e3);return()=>clearTimeout(w)}},[e,d]),h.jsxs("div",{className:"fixed bottom-6 left-6 z-50 flex flex-col items-center group select-none",children:[o&&h.jsxs("div",{className:"mb-3 bg-white/90 border border-green-400 rounded-lg shadow px-4 py-2 text-sm text-green-900 relative max-w-xs animate-fade-in",children:[h.jsx("button",{className:"absolute top-1 right-2 text-green-700 hover:text-red-500 text-lg font-bold focus:outline-none",onClick:()=>{window.confirm("Sudah paham cara mengganti backsound?")&&(l(!1),localStorage.setItem("backsound_info_closed","1"))},"aria-label":"Tutup info",children:""}),h.jsx("b",{children:"Cara mengganti backsound:"}),h.jsx("br",{}),"Klik ikon piringan, lalu pilih backsound dari daftar yang muncul. Musik akan otomatis berganti."]}),a&&h.jsx("div",{className:"mb-2 animate-fade-in",children:h.jsx("select",{className:"rounded px-2 py-1 text-sm border border-green-400 bg-white shadow",value:r,onChange:_,autoFocus:!0,onBlur:()=>s(!1),children:X6.map((w,x)=>h.jsx("option",{value:x,children:w.label},w.label))})}),h.jsxs("div",{className:`w-16 h-16 rounded-full bg-gradient-to-tr from-green-300 to-green-700 shadow-lg flex items-center justify-center border-4 border-white transition-transform duration-700 relative ${e?"animate-spin-slow":""}`,style:{boxShadow:"0 4px 24px 0 rgba(34,139,34,0.15)"},onClick:()=>{s(!0),m.current&&clearTimeout(m.current),m.current=setTimeout(()=>s(!1),5e3)},title:e?"Pause backsound":"Putar backsound",onMouseEnter:()=>f(!0),onMouseLeave:()=>{e&&f(!1)},onTouchStart:()=>f(!0),children:[h.jsx("img",{src:"https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=200&q=80",alt:"Piringan Backsound Hutan",className:"w-12 h-12 rounded-full object-cover pointer-events-none",style:{filter:"brightness(0.95) contrast(1.1)"}}),e&&(d||u)&&h.jsx("button",{className:"absolute w-10 h-10 flex items-center justify-center rounded-full bg-white/80 shadow group-hover:bg-white/90 transition border border-green-400 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-10","aria-label":"Pause backsound",tabIndex:0,onClick:w=>{w.stopPropagation(),c(!0)},onMouseLeave:()=>f(!1),children:h.jsxs("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[h.jsx("rect",{x:"6",y:"5",width:"4",height:"14",rx:"1"}),h.jsx("rect",{x:"14",y:"5",width:"4",height:"14",rx:"1"})]})})]}),!e&&h.jsx("button",{className:"mt-2 w-10 h-10 flex items-center justify-center rounded-full bg-white/80 shadow group-hover:bg-white/90 transition border border-green-400","aria-label":"Putar backsound",tabIndex:0,onClick:w=>{w.stopPropagation(),c(!0)},children:h.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:h.jsx("polygon",{points:"6,4 20,12 6,20 6,4"})})}),u&&h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-xs w-full relative animate-fade-in",children:[h.jsx("button",{className:"absolute top-2 right-3 text-xl text-gray-500 hover:text-red-500",onClick:()=>c(!1),"aria-label":"Tutup",children:""}),h.jsxs("div",{className:"flex flex-col items-center gap-3",children:[h.jsx("span",{className:"text-green-700 text-lg font-bold",children:"Play Musik?"}),h.jsx("span",{className:"text-sm text-gray-700 text-center",children:"Klik tombol di bawah untuk memulai atau pause backsound."}),h.jsxs("button",{className:"mt-2 px-4 py-2 rounded bg-green-600 text-white font-semibold hover:bg-green-700 transition",onClick:()=>{v(),c(!1)},children:[e?"Pause":"Play"," Musik"]})]})]})}),h.jsx("audio",{ref:n,src:X6[r].src,loop:!0,preload:"auto",onPlay:()=>t(!0),onPause:()=>t(!1),style:{display:"none"},onLoadedMetadata:()=>{if(n.current&&(n.current.volume=.6,!e)){const w=n.current.play();w!==void 0&&w.then(()=>t(!0)).catch(()=>{})}}}),h.jsx("span",{className:"mt-2 text-xs text-green-900 bg-white/80 px-2 py-0.5 rounded shadow opacity-0 group-hover:opacity-100 transition",children:e?"Sedang diputar":"Klik untuk backsound"})]})}const uL=kT("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),zt=M.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},a)=>{const s=r?_pe:"button";return h.jsx(s,{className:Jt(uL({variant:e,size:t,className:n})),ref:a,...i})});zt.displayName="Button";function cve(){const[n,e]=M.useState(!1),[t]=V_();M.useEffect(()=>{e(!1)},[t]);const r=()=>e(!n),i=[{href:"/",label:"Beranda"},{href:"/kegiatan",label:"Kegiatan"},{href:"/pembelajaran",label:"Pembelajaran"},{href:"/sejarah",label:"Sejarah"},{href:"/pendaftaran",label:"Informasi Pendaftaran"},{href:"/scan-anggota",label:h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx(YD,{className:"w-5 h-5"})," Anggota"]})}];return h.jsxs("header",{className:"sticky top-0 z-50 transition-all duration-300 bg-white shadow-lg",children:[h.jsxs("div",{className:"relative",children:[h.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[h.jsxs(Eo,{href:"/",className:"flex items-center gap-3 group",children:[h.jsx("img",{src:"https://raw.githubusercontent.com/mahapalanarotama/mahapalanarotama.github.io/refs/heads/main/Img/Logo%20Mpn.png",alt:"Logo Mahapala",className:"w-10 h-10 rounded-full shadow-md border-2 border-primary bg-white animate-navbar-logo",style:{background:"white"}}),h.jsxs("span",{className:"font-heading font-bold text-2xl tracking-widest text-primary drop-shadow-lg animate-navbar-logo",children:["MAHAPALA ",h.jsx("span",{className:"text-accent font-bold drop-shadow-md",children:"NAROTAMA"})]})]}),h.jsx("nav",{className:"hidden md:flex space-x-6",children:i.map(a=>h.jsxs(Eo,{href:a.href,className:`relative px-2 py-1 font-medium transition group/nav ${t===a.href?"text-accent":"text-primary hover:text-accent"} animate-navbar-link`,children:[h.jsx("span",{className:"relative z-10",children:a.label}),h.jsx("span",{className:`absolute left-0 bottom-0 w-full h-0.5 bg-accent rounded transition-all duration-300 scale-x-0 group-hover/nav:scale-x-100 ${t===a.href?"scale-x-100":""}`})]},a.href))}),h.jsx(zt,{variant:"ghost",size:"icon",className:"md:hidden text-primary",onClick:r,"aria-label":"Menu",children:h.jsx(Tme,{className:"h-6 w-6"})})]}),h.jsx("div",{className:"absolute left-0 right-0 top-0 h-8 overflow-hidden pointer-events-none select-none",children:h.jsxs("div",{className:"absolute left-0 top-0 w-full h-full flex gap-8 animate-clouds",children:[h.jsx("div",{className:"w-16 h-8 bg-white rounded-full opacity-70 blur-sm animate-cloud-move",style:{animationDelay:"0s"}}),h.jsx("div",{className:"w-24 h-10 bg-white rounded-full opacity-60 blur-md animate-cloud-move",style:{animationDelay:"2s"}}),h.jsx("div",{className:"w-20 h-8 bg-white rounded-full opacity-50 blur animate-cloud-move",style:{animationDelay:"4s"}})]})})]}),n&&h.jsx("div",{className:"md:hidden bg-white animate-navbar-mobile rounded-b-2xl shadow-2xl",children:h.jsxs("div",{className:"container mx-auto px-4 py-2 flex flex-col space-y-2",children:[h.jsx("div",{className:"flex justify-end",children:h.jsx(zt,{variant:"ghost",size:"icon",className:"text-primary",onClick:r,"aria-label":"Close menu",children:h.jsx(W_,{className:"h-6 w-6"})})}),i.map(a=>h.jsx(Eo,{href:a.href,children:h.jsx("a",{className:`block text-lg font-semibold py-2 px-4 rounded transition-all duration-300 hover:bg-accent/20 hover:text-accent ${t===a.href?"text-accent bg-accent/10":"text-primary"}`,children:a.label})},a.href))]})})]})}function dve(){const n=new Date().getFullYear();return h.jsx("footer",{className:"bg-gray-800 text-white pt-12 pb-6",children:h.jsxs("div",{className:"container mx-auto px-4",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-8",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-heading text-xl font-bold mb-4",children:"Tentang Kami"}),h.jsx("p",{className:"text-gray-300 mb-4",children:"Mahapala Narotama adalah organisasi yang bergerak di bidang eksplorasi alam dan pelestarian lingkungan."}),h.jsxs("div",{className:"flex space-x-4",children:[h.jsx("a",{href:"https://www.instagram.com/mahapalanarotama?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition","aria-label":"Instagram",children:h.jsx(CT,{className:"h-5 w-5"})}),h.jsx("a",{href:"https://www.youtube.com/@mahapalanarotama1216",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition","aria-label":"YouTube",children:h.jsx(Dme,{className:"h-5 w-5"})}),h.jsx("a",{href:"https://tiktok.com/",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition","aria-label":"TikTok",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-5 w-5",children:h.jsx("path",{d:"M16.5 3A4.5 4.5 0 0 0 21 7.5v1.25a6.25 6.25 0 0 1-5-1.25v7.5a5.5 5.5 0 1 1-5.5-5.5h.75v2H10.5a3.5 3.5 0 1 0 3.5 3.5V3h2.5Z"})})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-heading text-xl font-bold mb-4",children:"Link Terkait"}),h.jsxs("ul",{className:"space-y-2",children:[h.jsx("li",{children:h.jsx("a",{href:"https://narotama.ac.id/",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition",children:"Universitas Narotama"})}),h.jsx("li",{children:h.jsx("a",{href:"https://wartapalaindonesia.com/",className:"text-gray-300 hover:text-white transition",children:"WARTAPALA Indonesia"})}),h.jsx("li",{children:h.jsx(Eo,{href:"/kegiatan",className:"text-gray-300 hover:text-white transition",children:"Daftar Kegiatan"})}),h.jsx("li",{children:h.jsx(Eo,{href:"/galeri",className:"text-gray-300 hover:text-white transition",children:"Galeri Foto"})}),h.jsx("li",{children:h.jsx(Eo,{href:"/url-shortener",className:"text-gray-300 hover:text-white transition",children:"URL Shortener"})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-heading text-xl font-bold mb-4",children:"Hubungi Kami"}),h.jsxs("address",{className:"not-italic text-gray-300",children:[h.jsxs("p",{className:"mb-2 flex items-center",children:[h.jsx("span",{className:"flex items-center justify-center h-7 w-7 mr-2",children:h.jsx(d$,{className:"h-6 w-6",strokeWidth:2})}),h.jsx("span",{children:"Jl. Arief Rachman Hakim No. 51, Klampis Ngasem, Sukolilo, Kota Surabaya, Jawa Timur"})]}),h.jsxs("p",{className:"mb-2 flex items-center",children:[h.jsx(G_,{className:"h-5 w-5 mr-2",strokeWidth:2}),h.jsx("span",{children:"(031) 34133 2882"})]}),h.jsxs("p",{className:"flex items-center",children:[h.jsx(H1,{className:"h-5 w-5 mr-2",strokeWidth:2}),h.jsx("span",{children:"ukm.mahapala@narotama.ac.id"})]})]})]})]}),h.jsx("div",{className:"border-t border-gray-700 pt-6",children:h.jsxs("p",{className:"text-center text-gray-400 text-sm",children:[" ",n," Mahapala Narotama. All rights reserved."]})})]})})}var uM="focusScope.autoFocusOnMount",cM="focusScope.autoFocusOnUnmount",K6={bubbles:!1,cancelable:!0},hve="FocusScope",cL=M.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...s}=n,[o,l]=M.useState(null),u=Pl(i),c=Pl(a),d=M.useRef(null),f=Or(e,_=>l(_)),m=M.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;M.useEffect(()=>{if(r){let _=function(E){if(m.paused||!o)return;const T=E.target;o.contains(T)?d.current=T:Mh(d.current,{select:!0})},w=function(E){if(m.paused||!o)return;const T=E.relatedTarget;T!==null&&(o.contains(T)||Mh(d.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const D of E)D.removedNodes.length>0&&Mh(o)};document.addEventListener("focusin",_),document.addEventListener("focusout",w);const S=new MutationObserver(x);return o&&S.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",w),S.disconnect()}}},[r,o,m.paused]),M.useEffect(()=>{if(o){Z6.add(m);const _=document.activeElement;if(!o.contains(_)){const x=new CustomEvent(uM,K6);o.addEventListener(uM,u),o.dispatchEvent(x),x.defaultPrevented||(fve(yve(iX(o)),{select:!0}),document.activeElement===_&&Mh(o))}return()=>{o.removeEventListener(uM,u),setTimeout(()=>{const x=new CustomEvent(cM,K6);o.addEventListener(cM,c),o.dispatchEvent(x),x.defaultPrevented||Mh(_??document.body,{select:!0}),o.removeEventListener(cM,c),Z6.remove(m)},0)}}},[o,u,c,m]);const v=M.useCallback(_=>{if(!t&&!r||m.paused)return;const w=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,x=document.activeElement;if(w&&x){const S=_.currentTarget,[E,T]=pve(S);E&&T?!_.shiftKey&&x===T?(_.preventDefault(),t&&Mh(E,{select:!0})):_.shiftKey&&x===E&&(_.preventDefault(),t&&Mh(T,{select:!0})):x===S&&_.preventDefault()}},[t,r,m.paused]);return h.jsx(Ln.div,{tabIndex:-1,...s,ref:f,onKeyDown:v})});cL.displayName=hve;function fve(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Mh(r,{select:e}),document.activeElement!==t)return}function pve(n){const e=iX(n),t=Y6(e,n),r=Y6(e.reverse(),n);return[t,r]}function iX(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Y6(n,e){for(const t of n)if(!mve(t,{upTo:e}))return t}function mve(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function gve(n){return n instanceof HTMLInputElement&&"select"in n}function Mh(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&gve(n)&&e&&n.select()}}var Z6=vve();function vve(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=Q6(n,e),n.unshift(e)},remove(e){var t;n=Q6(n,e),(t=n[0])==null||t.resume()}}}function Q6(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function yve(n){return n.filter(e=>e.tagName!=="A")}var dM=0;function aX(){M.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??J6()),document.body.insertAdjacentElement("beforeend",n[1]??J6()),dM++,()=>{dM===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),dM--}},[])}function J6(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var iS="right-scroll-bar-position",aS="width-before-scroll-bar",xve="with-scroll-bars-hidden",_ve="--removed-body-scroll-bar-size";function hM(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function wve(n,e){var t=M.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var bve=typeof window<"u"?M.useLayoutEffect:M.useEffect,e5=new WeakMap;function Sve(n,e){var t=wve(null,function(r){return n.forEach(function(i){return hM(i,r)})});return bve(function(){var r=e5.get(t);if(r){var i=new Set(r),a=new Set(n),s=t.current;i.forEach(function(o){a.has(o)||hM(o,null)}),a.forEach(function(o){i.has(o)||hM(o,s)})}e5.set(t,n)},[n]),t}function Eve(n){return n}function Ave(n,e){e===void 0&&(e=Eve);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(a){var s=e(a,r);return t.push(s),function(){t=t.filter(function(o){return o!==s})}},assignSyncMedium:function(a){for(r=!0;t.length;){var s=t;t=[],s.forEach(a)}t={push:function(o){return a(o)},filter:function(){return t}}},assignMedium:function(a){r=!0;var s=[];if(t.length){var o=t;t=[],o.forEach(a),s=t}var l=function(){var c=s;s=[],c.forEach(a)},u=function(){return Promise.resolve().then(l)};u(),t={push:function(c){s.push(c),u()},filter:function(c){return s=s.filter(c),t}}}};return i}function Tve(n){n===void 0&&(n={});var e=Ave(null);return e.options=Qu({async:!0,ssr:!1},n),e}var sX=function(n){var e=n.sideCar,t=I_(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return M.createElement(r,Qu({},t))};sX.isSideCarExport=!0;function kve(n,e){return n.useMedium(e),sX}var oX=Tve(),fM=function(){},LT=M.forwardRef(function(n,e){var t=M.useRef(null),r=M.useState({onScrollCapture:fM,onWheelCapture:fM,onTouchMoveCapture:fM}),i=r[0],a=r[1],s=n.forwardProps,o=n.children,l=n.className,u=n.removeScrollBar,c=n.enabled,d=n.shards,f=n.sideCar,m=n.noRelative,v=n.noIsolation,_=n.inert,w=n.allowPinchZoom,x=n.as,S=x===void 0?"div":x,E=n.gapMode,T=I_(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=f,F=Sve([t,e]),P=Qu(Qu({},T),i);return M.createElement(M.Fragment,null,c&&M.createElement(D,{sideCar:oX,removeScrollBar:u,shards:d,noRelative:m,noIsolation:v,inert:_,setCallbacks:a,allowPinchZoom:!!w,lockRef:t,gapMode:E}),s?M.cloneElement(M.Children.only(o),Qu(Qu({},P),{ref:F})):M.createElement(S,Qu({},P,{className:l,ref:F}),o))});LT.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};LT.classNames={fullWidth:aS,zeroRight:iS};var Cve=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Mve(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=Cve();return e&&n.setAttribute("nonce",e),n}function Ive(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function Pve(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var Nve=function(){var n=0,e=null;return{add:function(t){n==0&&(e=Mve())&&(Ive(e,t),Pve(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Rve=function(){var n=Nve();return function(e,t){M.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},lX=function(){var n=Rve(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},Dve={left:0,top:0,right:0,gap:0},pM=function(n){return parseInt(n||"",10)||0},Lve=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[pM(t),pM(r),pM(i)]},Ove=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return Dve;var e=Lve(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},Fve=lX(),Z0="data-scroll-locked",jve=function(n,e,t,r){var i=n.left,a=n.top,s=n.right,o=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(xve,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(Z0,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(iS,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(aS,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(iS," .").concat(iS,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(aS," .").concat(aS,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Z0,`] {
    `).concat(_ve,": ").concat(o,`px;
  }
`)},t5=function(){var n=parseInt(document.body.getAttribute(Z0)||"0",10);return isFinite(n)?n:0},Bve=function(){M.useEffect(function(){return document.body.setAttribute(Z0,(t5()+1).toString()),function(){var n=t5()-1;n<=0?document.body.removeAttribute(Z0):document.body.setAttribute(Z0,n.toString())}},[])},Uve=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;Bve();var a=M.useMemo(function(){return Ove(i)},[i]);return M.createElement(Fve,{styles:jve(a,!e,i,t?"":"!important")})},TN=!1;if(typeof window<"u")try{var Ab=Object.defineProperty({},"passive",{get:function(){return TN=!0,!0}});window.addEventListener("test",Ab,Ab),window.removeEventListener("test",Ab,Ab)}catch{TN=!1}var Ag=TN?{passive:!1}:!1,Vve=function(n){return n.tagName==="TEXTAREA"},uX=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!Vve(n)&&t[e]==="visible")},zve=function(n){return uX(n,"overflowY")},Hve=function(n){return uX(n,"overflowX")},n5=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=cX(n,r);if(i){var a=dX(n,r),s=a[1],o=a[2];if(s>o)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},Gve=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},Wve=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},cX=function(n,e){return n==="v"?zve(e):Hve(e)},dX=function(n,e){return n==="v"?Gve(e):Wve(e)},qve=function(n,e){return n==="h"&&e==="rtl"?-1:1},$ve=function(n,e,t,r,i){var a=qve(n,window.getComputedStyle(e).direction),s=a*r,o=t.target,l=e.contains(o),u=!1,c=s>0,d=0,f=0;do{if(!o)break;var m=dX(n,o),v=m[0],_=m[1],w=m[2],x=_-w-a*v;(v||x)&&cX(n,o)&&(d+=x,f+=v);var S=o.parentNode;o=S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?S.host:S}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(c&&Math.abs(d)<1||!c&&Math.abs(f)<1)&&(u=!0),u},Tb=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},r5=function(n){return[n.deltaX,n.deltaY]},i5=function(n){return n&&"current"in n?n.current:n},Xve=function(n,e){return n[0]===e[0]&&n[1]===e[1]},Kve=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},Yve=0,Tg=[];function Zve(n){var e=M.useRef([]),t=M.useRef([0,0]),r=M.useRef(),i=M.useState(Yve++)[0],a=M.useState(lX)[0],s=M.useRef(n);M.useEffect(function(){s.current=n},[n]),M.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var _=Yse([n.lockRef.current],(n.shards||[]).map(i5),!0).filter(Boolean);return _.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),_.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var o=M.useCallback(function(_,w){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!s.current.allowPinchZoom;var x=Tb(_),S=t.current,E="deltaX"in _?_.deltaX:S[0]-x[0],T="deltaY"in _?_.deltaY:S[1]-x[1],D,F=_.target,P=Math.abs(E)>Math.abs(T)?"h":"v";if("touches"in _&&P==="h"&&F.type==="range")return!1;var N=n5(P,F);if(!N)return!0;if(N?D=P:(D=P==="v"?"h":"v",N=n5(P,F)),!N)return!1;if(!r.current&&"changedTouches"in _&&(E||T)&&(r.current=D),!D)return!0;var I=r.current||D;return $ve(I,w,_,I==="h"?E:T)},[]),l=M.useCallback(function(_){var w=_;if(!(!Tg.length||Tg[Tg.length-1]!==a)){var x="deltaY"in w?r5(w):Tb(w),S=e.current.filter(function(D){return D.name===w.type&&(D.target===w.target||w.target===D.shadowParent)&&Xve(D.delta,x)})[0];if(S&&S.should){w.cancelable&&w.preventDefault();return}if(!S){var E=(s.current.shards||[]).map(i5).filter(Boolean).filter(function(D){return D.contains(w.target)}),T=E.length>0?o(w,E[0]):!s.current.noIsolation;T&&w.cancelable&&w.preventDefault()}}},[]),u=M.useCallback(function(_,w,x,S){var E={name:_,delta:w,target:x,should:S,shadowParent:Qve(x)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(T){return T!==E})},1)},[]),c=M.useCallback(function(_){t.current=Tb(_),r.current=void 0},[]),d=M.useCallback(function(_){u(_.type,r5(_),_.target,o(_,n.lockRef.current))},[]),f=M.useCallback(function(_){u(_.type,Tb(_),_.target,o(_,n.lockRef.current))},[]);M.useEffect(function(){return Tg.push(a),n.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Ag),document.addEventListener("touchmove",l,Ag),document.addEventListener("touchstart",c,Ag),function(){Tg=Tg.filter(function(_){return _!==a}),document.removeEventListener("wheel",l,Ag),document.removeEventListener("touchmove",l,Ag),document.removeEventListener("touchstart",c,Ag)}},[]);var m=n.removeScrollBar,v=n.inert;return M.createElement(M.Fragment,null,v?M.createElement(a,{styles:Kve(i)}):null,m?M.createElement(Uve,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function Qve(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const Jve=kve(oX,Zve);var dL=M.forwardRef(function(n,e){return M.createElement(LT,Qu({},n,{ref:e,sideCar:Jve}))});dL.classNames=LT.classNames;var eye=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},kg=new WeakMap,kb=new WeakMap,Cb={},mM=0,hX=function(n){return n&&(n.host||hX(n.parentNode))},tye=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=hX(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},nye=function(n,e,t,r){var i=tye(e,Array.isArray(n)?n:[n]);Cb[t]||(Cb[t]=new WeakMap);var a=Cb[t],s=[],o=new Set,l=new Set(i),u=function(d){!d||o.has(d)||(o.add(d),u(d.parentNode))};i.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(o.has(f))c(f);else try{var m=f.getAttribute(r),v=m!==null&&m!=="false",_=(kg.get(f)||0)+1,w=(a.get(f)||0)+1;kg.set(f,_),a.set(f,w),s.push(f),_===1&&v&&kb.set(f,!0),w===1&&f.setAttribute(t,"true"),v||f.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return c(e),o.clear(),mM++,function(){s.forEach(function(d){var f=kg.get(d)-1,m=a.get(d)-1;kg.set(d,f),a.set(d,m),f||(kb.has(d)||d.removeAttribute(r),kb.delete(d)),m||d.removeAttribute(t)}),mM--,mM||(kg=new WeakMap,kg=new WeakMap,kb=new WeakMap,Cb={})}},fX=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=eye(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),nye(r,i,t,"aria-hidden")):function(){return null}},OT="Dialog",[pX,mX]=Bd(OT),[rye,Au]=pX(OT),gX=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:a,modal:s=!0}=n,o=M.useRef(null),l=M.useRef(null),[u,c]=Pv({prop:r,defaultProp:i??!1,onChange:a,caller:OT});return h.jsx(rye,{scope:e,triggerRef:o,contentRef:l,contentId:mf(),titleId:mf(),descriptionId:mf(),open:u,onOpenChange:c,onOpenToggle:M.useCallback(()=>c(d=>!d),[c]),modal:s,children:t})};gX.displayName=OT;var vX="DialogTrigger",yX=M.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Au(vX,t),a=Or(e,i.triggerRef);return h.jsx(Ln.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":pL(i.open),...r,ref:a,onClick:cn(n.onClick,i.onOpenToggle)})});yX.displayName=vX;var hL="DialogPortal",[iye,xX]=pX(hL,{forceMount:void 0}),_X=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,a=Au(hL,e);return h.jsx(iye,{scope:e,forceMount:t,children:M.Children.map(r,s=>h.jsx(tg,{present:t||a.open,children:h.jsx(ET,{asChild:!0,container:i,children:s})}))})};_X.displayName=hL;var mE="DialogOverlay",wX=M.forwardRef((n,e)=>{const t=xX(mE,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,a=Au(mE,n.__scopeDialog);return a.modal?h.jsx(tg,{present:r||a.open,children:h.jsx(sye,{...i,ref:e})}):null});wX.displayName=mE;var aye=Iv("DialogOverlay.RemoveScroll"),sye=M.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Au(mE,t);return h.jsx(dL,{as:aye,allowPinchZoom:!0,shards:[i.contentRef],children:h.jsx(Ln.div,{"data-state":pL(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Pm="DialogContent",bX=M.forwardRef((n,e)=>{const t=xX(Pm,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,a=Au(Pm,n.__scopeDialog);return h.jsx(tg,{present:r||a.open,children:a.modal?h.jsx(oye,{...i,ref:e}):h.jsx(lye,{...i,ref:e})})});bX.displayName=Pm;var oye=M.forwardRef((n,e)=>{const t=Au(Pm,n.__scopeDialog),r=M.useRef(null),i=Or(e,t.contentRef,r);return M.useEffect(()=>{const a=r.current;if(a)return fX(a)},[]),h.jsx(SX,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:cn(n.onCloseAutoFocus,a=>{var s;a.preventDefault(),(s=t.triggerRef.current)==null||s.focus()}),onPointerDownOutside:cn(n.onPointerDownOutside,a=>{const s=a.detail.originalEvent,o=s.button===0&&s.ctrlKey===!0;(s.button===2||o)&&a.preventDefault()}),onFocusOutside:cn(n.onFocusOutside,a=>a.preventDefault())})}),lye=M.forwardRef((n,e)=>{const t=Au(Pm,n.__scopeDialog),r=M.useRef(!1),i=M.useRef(!1);return h.jsx(SX,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var s,o;(s=n.onCloseAutoFocus)==null||s.call(n,a),a.defaultPrevented||(r.current||(o=t.triggerRef.current)==null||o.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var l,u;(l=n.onInteractOutside)==null||l.call(n,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const s=a.target;((u=t.triggerRef.current)==null?void 0:u.contains(s))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),SX=M.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...s}=n,o=Au(Pm,t),l=M.useRef(null),u=Or(e,l);return aX(),h.jsxs(h.Fragment,{children:[h.jsx(cL,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:h.jsx(z_,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":pL(o.open),...s,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(cye,{titleId:o.titleId}),h.jsx(hye,{contentRef:l,descriptionId:o.descriptionId})]})]})}),fL="DialogTitle",EX=M.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Au(fL,t);return h.jsx(Ln.h2,{id:i.titleId,...r,ref:e})});EX.displayName=fL;var AX="DialogDescription",TX=M.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Au(AX,t);return h.jsx(Ln.p,{id:i.descriptionId,...r,ref:e})});TX.displayName=AX;var kX="DialogClose",CX=M.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Au(kX,t);return h.jsx(Ln.button,{type:"button",...r,ref:e,onClick:cn(n.onClick,()=>i.onOpenChange(!1))})});CX.displayName=kX;function pL(n){return n?"open":"closed"}var MX="DialogTitleWarning",[uye,IX]=ype(MX,{contentName:Pm,titleName:fL,docsSlug:"dialog"}),cye=({titleId:n})=>{const e=IX(MX),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return M.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},dye="DialogDescriptionWarning",hye=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${IX(dye).contentName}}.`;return M.useEffect(()=>{var a;const i=(a=n.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},PX=gX,fye=yX,NX=_X,mL=wX,gL=bX,vL=EX,yL=TX,xL=CX;const wc=PX,pye=NX,RX=M.forwardRef(({className:n,...e},t)=>h.jsx(mL,{ref:t,className:Jt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));RX.displayName=mL.displayName;const bu=M.forwardRef(({className:n,children:e,...t},r)=>h.jsxs(pye,{children:[h.jsx(RX,{}),h.jsxs(gL,{ref:r,className:Jt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,h.jsxs(xL,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[h.jsx(W_,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));bu.displayName=gL.displayName;const q1=({className:n,...e})=>h.jsx("div",{className:Jt("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});q1.displayName="DialogHeader";const _L=({className:n,...e})=>h.jsx("div",{className:Jt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});_L.displayName="DialogFooter";const wL=M.forwardRef(({className:n,...e},t)=>h.jsx(vL,{ref:t,className:Jt("text-lg font-semibold leading-none tracking-tight",n),...e}));wL.displayName=vL.displayName;const bL=M.forwardRef(({className:n,...e},t)=>h.jsx(yL,{ref:t,className:Jt("text-sm text-muted-foreground",n),...e}));bL.displayName=yL.displayName;function mye(){const[n,e]=M.useState(!1);M.useEffect(()=>{localStorage.getItem("cookieConsent")||e(!0)},[]);const t=()=>{localStorage.setItem("cookieConsent","true"),e(!1)},r=()=>{localStorage.setItem("cookieConsent","false"),e(!1)};return h.jsx(wc,{open:n,onOpenChange:e,children:h.jsxs(bu,{className:"sm:max-w-[425px]",children:[h.jsxs(q1,{children:[h.jsx(wL,{children:"Cookie Preferences"}),h.jsx(bL,{children:"We use cookies to enhance your browsing experience, serve personalized content, and analyze our traffic. This website uses necessary cookies for functionality and third-party cookies for analytics and social media features."})]}),h.jsx("div",{className:"grid gap-4 py-4",children:h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"font-medium",children:"We use cookies for:"}),h.jsxs("ul",{className:"list-disc pl-5 text-sm text-muted-foreground",children:[h.jsx("li",{children:"Essential website functionality"}),h.jsx("li",{children:"Authentication and security"}),h.jsx("li",{children:"Analytics and performance"}),h.jsx("li",{children:"Social media integration"})]})]})}),h.jsxs(_L,{children:[h.jsx(zt,{variant:"outline",onClick:r,children:"Essential Only"}),h.jsx(zt,{onClick:t,children:"Accept All"})]})]})})}function gye({children:n}){const{toast:e}=Iq();M.useEffect(()=>{t()},[]);const t=async()=>{try{const a="test";document.cookie=`thirdPartyTest=${a}; SameSite=None; Secure`,document.cookie.includes("thirdPartyTest")||e({title:"Cookie Settings",description:"Beberapa fitur mungkin tidak optimal karena cookie pihak ketiga diblokir. Namun, aplikasi tetap dapat digunakan.",duration:7e3})}catch(a){console.warn("Gagal cek cookie pihak ketiga:",a)}},[r]=V_(),i=["/admin","/developer","/offline","/sejarahAdmin"].some(a=>r.startsWith(a));return h.jsxs("div",{className:"flex flex-col min-h-screen",children:[h.jsx(cve,{}),h.jsx("main",{className:"flex-grow",children:n}),h.jsx(dve,{}),h.jsx(mye,{}),!i&&h.jsx(uve,{})]})}function SL(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var ng=SL();function DX(n){ng=n}var Jx={exec:()=>null};function Sr(n,e=""){let t=typeof n=="string"?n:n.source,r={replace:(i,a)=>{let s=typeof a=="string"?a:a.source;return s=s.replace(Ys.caret,"$1"),t=t.replace(i,s),r},getRegex:()=>new RegExp(t,e)};return r}var Ys={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},vye=/^(?:[ \t]*(?:\n|$))+/,yye=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,xye=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,$_=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,_ye=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,EL=/(?:[*+-]|\d{1,9}[.)])/,LX=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,OX=Sr(LX).replace(/bull/g,EL).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),wye=Sr(LX).replace(/bull/g,EL).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),AL=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,bye=/^[^\n]+/,TL=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Sye=Sr(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",TL).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Eye=Sr(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,EL).getRegex(),FT="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",kL=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Aye=Sr("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",kL).replace("tag",FT).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),FX=Sr(AL).replace("hr",$_).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",FT).getRegex(),Tye=Sr(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",FX).getRegex(),CL={blockquote:Tye,code:yye,def:Sye,fences:xye,heading:_ye,hr:$_,html:Aye,lheading:OX,list:Eye,newline:vye,paragraph:FX,table:Jx,text:bye},a5=Sr("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",$_).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",FT).getRegex(),kye={...CL,lheading:wye,table:a5,paragraph:Sr(AL).replace("hr",$_).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",a5).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",FT).getRegex()},Cye={...CL,html:Sr(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",kL).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Jx,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Sr(AL).replace("hr",$_).replace("heading",` *#{1,6} *[^
]`).replace("lheading",OX).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Mye=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Iye=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,jX=/^( {2,}|\\)\n(?!\s*$)/,Pye=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,jT=/[\p{P}\p{S}]/u,ML=/[\s\p{P}\p{S}]/u,BX=/[^\s\p{P}\p{S}]/u,Nye=Sr(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,ML).getRegex(),UX=/(?!~)[\p{P}\p{S}]/u,Rye=/(?!~)[\s\p{P}\p{S}]/u,Dye=/(?:[^\s\p{P}\p{S}]|~)/u,Lye=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,VX=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Oye=Sr(VX,"u").replace(/punct/g,jT).getRegex(),Fye=Sr(VX,"u").replace(/punct/g,UX).getRegex(),zX="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",jye=Sr(zX,"gu").replace(/notPunctSpace/g,BX).replace(/punctSpace/g,ML).replace(/punct/g,jT).getRegex(),Bye=Sr(zX,"gu").replace(/notPunctSpace/g,Dye).replace(/punctSpace/g,Rye).replace(/punct/g,UX).getRegex(),Uye=Sr("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,BX).replace(/punctSpace/g,ML).replace(/punct/g,jT).getRegex(),Vye=Sr(/\\(punct)/,"gu").replace(/punct/g,jT).getRegex(),zye=Sr(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Hye=Sr(kL).replace("(?:-->|$)","-->").getRegex(),Gye=Sr("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Hye).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),gE=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Wye=Sr(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",gE).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),HX=Sr(/^!?\[(label)\]\[(ref)\]/).replace("label",gE).replace("ref",TL).getRegex(),GX=Sr(/^!?\[(ref)\](?:\[\])?/).replace("ref",TL).getRegex(),qye=Sr("reflink|nolink(?!\\()","g").replace("reflink",HX).replace("nolink",GX).getRegex(),IL={_backpedal:Jx,anyPunctuation:Vye,autolink:zye,blockSkip:Lye,br:jX,code:Iye,del:Jx,emStrongLDelim:Oye,emStrongRDelimAst:jye,emStrongRDelimUnd:Uye,escape:Mye,link:Wye,nolink:GX,punctuation:Nye,reflink:HX,reflinkSearch:qye,tag:Gye,text:Pye,url:Jx},$ye={...IL,link:Sr(/^!?\[(label)\]\((.*?)\)/).replace("label",gE).getRegex(),reflink:Sr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",gE).getRegex()},kN={...IL,emStrongRDelimAst:Bye,emStrongLDelim:Fye,url:Sr(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Xye={...kN,br:Sr(jX).replace("{2,}","*").getRegex(),text:Sr(kN.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Mb={normal:CL,gfm:kye,pedantic:Cye},$y={normal:IL,gfm:kN,breaks:Xye,pedantic:$ye},Kye={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},s5=n=>Kye[n];function Wu(n,e){if(e){if(Ys.escapeTest.test(n))return n.replace(Ys.escapeReplace,s5)}else if(Ys.escapeTestNoEncode.test(n))return n.replace(Ys.escapeReplaceNoEncode,s5);return n}function o5(n){try{n=encodeURI(n).replace(Ys.percentDecode,"%")}catch{return null}return n}function l5(n,e){var a;let t=n.replace(Ys.findPipe,(s,o,l)=>{let u=!1,c=o;for(;--c>=0&&l[c]==="\\";)u=!u;return u?"|":" |"}),r=t.split(Ys.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!((a=r.at(-1))!=null&&a.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(Ys.slashPipe,"|");return r}function Xy(n,e,t){let r=n.length;if(r===0)return"";let i=0;for(;i<r&&n.charAt(r-i-1)===e;)i++;return n.slice(0,r-i)}function Yye(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return t>0?-2:-1}function u5(n,e,t,r,i){let a=e.href,s=e.title||null,o=n[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:a,title:s,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,l}function Zye(n,e,t){let r=n.match(t.other.indentCodeCompensation);if(r===null)return e;let i=r[1];return e.split(`
`).map(a=>{let s=a.match(t.other.beginningSpace);if(s===null)return a;let[o]=s;return o.length>=i.length?a.slice(i.length):a}).join(`
`)}var vE=class{constructor(n){hr(this,"options");hr(this,"rules");hr(this,"lexer");this.options=n||ng}space(n){let e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){let e=this.rules.block.code.exec(n);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Xy(t,`
`)}}}fences(n){let e=this.rules.block.fences.exec(n);if(e){let t=e[0],r=Zye(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(n){let e=this.rules.block.heading.exec(n);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let r=Xy(t,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(t=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(n){let e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:Xy(e[0],`
`)}}blockquote(n){let e=this.rules.block.blockquote.exec(n);if(e){let t=Xy(e[0],`
`).split(`
`),r="",i="",a=[];for(;t.length>0;){let s=!1,o=[],l;for(l=0;l<t.length;l++)if(this.rules.other.blockquoteStart.test(t[l]))o.push(t[l]),s=!0;else if(!s)o.push(t[l]);else break;t=t.slice(l);let u=o.join(`
`),c=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${u}`:u,i=i?`${i}
${c}`:c;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,a,!0),this.lexer.state.top=d,t.length===0)break;let f=a.at(-1);if((f==null?void 0:f.type)==="code")break;if((f==null?void 0:f.type)==="blockquote"){let m=f,v=m.raw+`
`+t.join(`
`),_=this.blockquote(v);a[a.length-1]=_,r=r.substring(0,r.length-m.raw.length)+_.raw,i=i.substring(0,i.length-m.text.length)+_.text;break}else if((f==null?void 0:f.type)==="list"){let m=f,v=m.raw+`
`+t.join(`
`),_=this.list(v);a[a.length-1]=_,r=r.substring(0,r.length-f.raw.length)+_.raw,i=i.substring(0,i.length-m.raw.length)+_.raw,t=v.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:a,text:i}}}list(n){let e=this.rules.block.list.exec(n);if(e){let t=e[1].trim(),r=t.length>1,i={type:"list",raw:"",ordered:r,start:r?+t.slice(0,-1):"",loose:!1,items:[]};t=r?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=r?t:"[*+-]");let a=this.rules.other.listItemRegex(t),s=!1;for(;n;){let l=!1,u="",c="";if(!(e=a.exec(n))||this.rules.block.hr.test(n))break;u=e[0],n=n.substring(u.length);let d=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,x=>" ".repeat(3*x.length)),f=n.split(`
`,1)[0],m=!d.trim(),v=0;if(this.options.pedantic?(v=2,c=d.trimStart()):m?v=e[1].length+1:(v=e[2].search(this.rules.other.nonSpaceChar),v=v>4?1:v,c=d.slice(v),v+=e[1].length),m&&this.rules.other.blankLine.test(f)&&(u+=f+`
`,n=n.substring(f.length+1),l=!0),!l){let x=this.rules.other.nextBulletRegex(v),S=this.rules.other.hrRegex(v),E=this.rules.other.fencesBeginRegex(v),T=this.rules.other.headingBeginRegex(v),D=this.rules.other.htmlBeginRegex(v);for(;n;){let F=n.split(`
`,1)[0],P;if(f=F,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),P=f):P=f.replace(this.rules.other.tabCharGlobal,"    "),E.test(f)||T.test(f)||D.test(f)||x.test(f)||S.test(f))break;if(P.search(this.rules.other.nonSpaceChar)>=v||!f.trim())c+=`
`+P.slice(v);else{if(m||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||E.test(d)||T.test(d)||S.test(d))break;c+=`
`+f}!m&&!f.trim()&&(m=!0),u+=F+`
`,n=n.substring(F.length+1),d=P.slice(v)}}i.loose||(s?i.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(s=!0));let _=null,w;this.options.gfm&&(_=this.rules.other.listIsTask.exec(c),_&&(w=_[0]!=="[ ] ",c=c.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:u,task:!!_,checked:w,loose:!1,text:c,tokens:[]}),i.raw+=u}let o=i.items.at(-1);if(o)o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){let u=i.items[l].tokens.filter(d=>d.type==="space"),c=u.length>0&&u.some(d=>this.rules.other.anyLine.test(d.raw));i.loose=c}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(n){let e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){let e=this.rules.block.def.exec(n);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:r,title:i}}}table(n){var s;let e=this.rules.block.table.exec(n);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=l5(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(s=e[3])!=null&&s.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===r.length){for(let o of r)this.rules.other.tableAlignRight.test(o)?a.align.push("right"):this.rules.other.tableAlignCenter.test(o)?a.align.push("center"):this.rules.other.tableAlignLeft.test(o)?a.align.push("left"):a.align.push(null);for(let o=0;o<t.length;o++)a.header.push({text:t[o],tokens:this.lexer.inline(t[o]),header:!0,align:a.align[o]});for(let o of i)a.rows.push(l5(o,a.header.length).map((l,u)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:a.align[u]})));return a}}lheading(n){let e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){let e=this.rules.block.paragraph.exec(n);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(n){let e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){let e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(n){let e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){let e=this.rules.inline.link.exec(n);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let a=Xy(t.slice(0,-1),"\\");if((t.length-a.length)%2===0)return}else{let a=Yye(e[2],"()");if(a===-2)return;if(a>-1){let s=(e[0].indexOf("!")===0?5:4)+e[1].length+a;e[2]=e[2].substring(0,a),e[0]=e[0].substring(0,s).trim(),e[3]=""}}let r=e[2],i="";if(this.options.pedantic){let a=this.rules.other.pedanticHrefTitle.exec(r);a&&(r=a[1],i=a[3])}else i=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?r=r.slice(1):r=r.slice(1,-1)),u5(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(n,e){let t;if((t=this.rules.inline.reflink.exec(n))||(t=this.rules.inline.nolink.exec(n))){let r=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=e[r.toLowerCase()];if(!i){let a=t[0].charAt(0);return{type:"text",raw:a,text:a}}return u5(t,i,t[0],this.lexer,this.rules)}}emStrong(n,e,t=""){let r=this.rules.inline.emStrongLDelim.exec(n);if(!(!r||r[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!t||this.rules.inline.punctuation.exec(t))){let i=[...r[0]].length-1,a,s,o=i,l=0,u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*n.length+i);(r=u.exec(e))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(s=[...a].length,r[3]||r[4]){o+=s;continue}else if((r[5]||r[6])&&i%3&&!((i+s)%3)){l+=s;continue}if(o-=s,o>0)continue;s=Math.min(s,s+o+l);let c=[...r[0]][0].length,d=n.slice(0,i+r.index+c+s);if(Math.min(i,s)%2){let m=d.slice(1,-1);return{type:"em",raw:d,text:m,tokens:this.lexer.inlineTokens(m)}}let f=d.slice(2,-2);return{type:"strong",raw:d,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(n){let e=this.rules.inline.code.exec(n);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(t),i=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return r&&i&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(n){let e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){let e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){let e=this.rules.inline.autolink.exec(n);if(e){let t,r;return e[2]==="@"?(t=e[1],r="mailto:"+t):(t=e[1],r=t),{type:"link",raw:e[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}url(n){var t;let e;if(e=this.rules.inline.url.exec(n)){let r,i;if(e[2]==="@")r=e[0],i="mailto:"+r;else{let a;do a=e[0],e[0]=((t=this.rules.inline._backpedal.exec(e[0]))==null?void 0:t[0])??"";while(a!==e[0]);r=e[0],e[1]==="www."?i="http://"+e[0]:i=e[0]}return{type:"link",raw:e[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(n){let e=this.rules.inline.text.exec(n);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},dd=class CN{constructor(e){hr(this,"tokens");hr(this,"options");hr(this,"state");hr(this,"tokenizer");hr(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||ng,this.options.tokenizer=this.options.tokenizer||new vE,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:Ys,block:Mb.normal,inline:$y.normal};this.options.pedantic?(t.block=Mb.pedantic,t.inline=$y.pedantic):this.options.gfm&&(t.block=Mb.gfm,this.options.breaks?t.inline=$y.breaks:t.inline=$y.gfm),this.tokenizer.rules=t}static get rules(){return{block:Mb,inline:$y}}static lex(e,t){return new CN(t).lex(e)}static lexInline(e,t){return new CN(t).inlineTokens(e)}lex(e){e=e.replace(Ys.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){var i,a,s;for(this.options.pedantic&&(e=e.replace(Ys.tabCharGlobal,"    ").replace(Ys.spaceLine,""));e;){let o;if((a=(i=this.options.extensions)==null?void 0:i.block)!=null&&a.some(u=>(o=u.call({lexer:this},e,t))?(e=e.substring(o.raw.length),t.push(o),!0):!1))continue;if(o=this.tokenizer.space(e)){e=e.substring(o.raw.length);let u=t.at(-1);o.raw.length===1&&u!==void 0?u.raw+=`
`:t.push(o);continue}if(o=this.tokenizer.code(e)){e=e.substring(o.raw.length);let u=t.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+o.raw,u.text+=`
`+o.text,this.inlineQueue.at(-1).src=u.text):t.push(o);continue}if(o=this.tokenizer.fences(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.heading(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.hr(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.blockquote(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.list(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.html(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.def(e)){e=e.substring(o.raw.length);let u=t.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+o.raw,u.text+=`
`+o.raw,this.inlineQueue.at(-1).src=u.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title});continue}if(o=this.tokenizer.table(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.lheading(e)){e=e.substring(o.raw.length),t.push(o);continue}let l=e;if((s=this.options.extensions)!=null&&s.startBlock){let u=1/0,c=e.slice(1),d;this.options.extensions.startBlock.forEach(f=>{d=f.call({lexer:this},c),typeof d=="number"&&d>=0&&(u=Math.min(u,d))}),u<1/0&&u>=0&&(l=e.substring(0,u+1))}if(this.state.top&&(o=this.tokenizer.paragraph(l))){let u=t.at(-1);r&&(u==null?void 0:u.type)==="paragraph"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+o.raw,u.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):t.push(o),r=l.length!==e.length,e=e.substring(o.raw.length);continue}if(o=this.tokenizer.text(e)){e=e.substring(o.raw.length);let u=t.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=(u.raw.endsWith(`
`)?"":`
`)+o.raw,u.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):t.push(o);continue}if(e){let u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var o,l,u;let r=e,i=null;if(this.tokens.links){let c=Object.keys(this.tokens.links);if(c.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)c.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let a=!1,s="";for(;e;){a||(s=""),a=!1;let c;if((l=(o=this.options.extensions)==null?void 0:o.inline)!=null&&l.some(f=>(c=f.call({lexer:this},e,t))?(e=e.substring(c.raw.length),t.push(c),!0):!1))continue;if(c=this.tokenizer.escape(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.tag(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.link(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(c.raw.length);let f=t.at(-1);c.type==="text"&&(f==null?void 0:f.type)==="text"?(f.raw+=c.raw,f.text+=c.text):t.push(c);continue}if(c=this.tokenizer.emStrong(e,r,s)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.codespan(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.br(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.del(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.autolink(e)){e=e.substring(c.raw.length),t.push(c);continue}if(!this.state.inLink&&(c=this.tokenizer.url(e))){e=e.substring(c.raw.length),t.push(c);continue}let d=e;if((u=this.options.extensions)!=null&&u.startInline){let f=1/0,m=e.slice(1),v;this.options.extensions.startInline.forEach(_=>{v=_.call({lexer:this},m),typeof v=="number"&&v>=0&&(f=Math.min(f,v))}),f<1/0&&f>=0&&(d=e.substring(0,f+1))}if(c=this.tokenizer.inlineText(d)){e=e.substring(c.raw.length),c.raw.slice(-1)!=="_"&&(s=c.raw.slice(-1)),a=!0;let f=t.at(-1);(f==null?void 0:f.type)==="text"?(f.raw+=c.raw,f.text+=c.text):t.push(c);continue}if(e){let f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return t}},yE=class{constructor(n){hr(this,"options");hr(this,"parser");this.options=n||ng}space(n){return""}code({text:n,lang:e,escaped:t}){var a;let r=(a=(e||"").match(Ys.notSpaceStart))==null?void 0:a[0],i=n.replace(Ys.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Wu(r)+'">'+(t?i:Wu(i,!0))+`</code></pre>
`:"<pre><code>"+(t?i:Wu(i,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>
`}hr(n){return`<hr>
`}list(n){let e=n.ordered,t=n.start,r="";for(let s=0;s<n.items.length;s++){let o=n.items[s];r+=this.listitem(o)}let i=e?"ol":"ul",a=e&&t!==1?' start="'+t+'"':"";return"<"+i+a+`>
`+r+"</"+i+`>
`}listitem(n){var t;let e="";if(n.task){let r=this.checkbox({checked:!!n.checked});n.loose?((t=n.tokens[0])==null?void 0:t.type)==="paragraph"?(n.tokens[0].text=r+" "+n.tokens[0].text,n.tokens[0].tokens&&n.tokens[0].tokens.length>0&&n.tokens[0].tokens[0].type==="text"&&(n.tokens[0].tokens[0].text=r+" "+Wu(n.tokens[0].tokens[0].text),n.tokens[0].tokens[0].escaped=!0)):n.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):e+=r+" "}return e+=this.parser.parse(n.tokens,!!n.loose),`<li>${e}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let e="",t="";for(let i=0;i<n.header.length;i++)t+=this.tablecell(n.header[i]);e+=this.tablerow({text:t});let r="";for(let i=0;i<n.rows.length;i++){let a=n.rows[i];t="";for(let s=0;s<a.length;s++)t+=this.tablecell(a[s]);r+=this.tablerow({text:t})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let e=this.parser.parseInline(n.tokens),t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${Wu(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:t}){let r=this.parser.parseInline(t),i=o5(n);if(i===null)return r;n=i;let a='<a href="'+n+'"';return e&&(a+=' title="'+Wu(e)+'"'),a+=">"+r+"</a>",a}image({href:n,title:e,text:t,tokens:r}){r&&(t=this.parser.parseInline(r,this.parser.textRenderer));let i=o5(n);if(i===null)return Wu(t);n=i;let a=`<img src="${n}" alt="${t}"`;return e&&(a+=` title="${Wu(e)}"`),a+=">",a}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:Wu(n.text)}},PL=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}},hd=class MN{constructor(e){hr(this,"options");hr(this,"renderer");hr(this,"textRenderer");this.options=e||ng,this.options.renderer=this.options.renderer||new yE,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new PL}static parse(e,t){return new MN(t).parse(e)}static parseInline(e,t){return new MN(t).parseInline(e)}parse(e,t=!0){var i,a;let r="";for(let s=0;s<e.length;s++){let o=e[s];if((a=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&a[o.type]){let u=o,c=this.options.extensions.renderers[u.type].call({parser:this},u);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type)){r+=c||"";continue}}let l=o;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let u=l,c=this.renderer.text(u);for(;s+1<e.length&&e[s+1].type==="text";)u=e[++s],c+=`
`+this.renderer.text(u);t?r+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):r+=c;continue}default:{let u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}parseInline(e,t=this.renderer){var i,a;let r="";for(let s=0;s<e.length;s++){let o=e[s];if((a=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&a[o.type]){let u=this.options.extensions.renderers[o.type].call({parser:this},o);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){r+=u||"";continue}}let l=o;switch(l.type){case"escape":{r+=t.text(l);break}case"html":{r+=t.html(l);break}case"link":{r+=t.link(l);break}case"image":{r+=t.image(l);break}case"strong":{r+=t.strong(l);break}case"em":{r+=t.em(l);break}case"codespan":{r+=t.codespan(l);break}case"br":{r+=t.br(l);break}case"del":{r+=t.del(l);break}case"text":{r+=t.text(l);break}default:{let u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}},ZI,sS=(ZI=class{constructor(n){hr(this,"options");hr(this,"block");this.options=n||ng}preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}provideLexer(){return this.block?dd.lex:dd.lexInline}provideParser(){return this.block?hd.parse:hd.parseInline}},hr(ZI,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),ZI),Qye=class{constructor(...n){hr(this,"defaults",SL());hr(this,"options",this.setOptions);hr(this,"parse",this.parseMarkdown(!0));hr(this,"parseInline",this.parseMarkdown(!1));hr(this,"Parser",hd);hr(this,"Renderer",yE);hr(this,"TextRenderer",PL);hr(this,"Lexer",dd);hr(this,"Tokenizer",vE);hr(this,"Hooks",sS);this.use(...n)}walkTokens(n,e){var r,i;let t=[];for(let a of n)switch(t=t.concat(e.call(this,a)),a.type){case"table":{let s=a;for(let o of s.header)t=t.concat(this.walkTokens(o.tokens,e));for(let o of s.rows)for(let l of o)t=t.concat(this.walkTokens(l.tokens,e));break}case"list":{let s=a;t=t.concat(this.walkTokens(s.items,e));break}default:{let s=a;(i=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&i[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{let l=s[o].flat(1/0);t=t.concat(this.walkTokens(l,e))}):s.tokens&&(t=t.concat(this.walkTokens(s.tokens,e)))}}return t}use(...n){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(t=>{let r={...t};if(r.async=this.defaults.async||r.async||!1,t.extensions&&(t.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let a=e.renderers[i.name];a?e.renderers[i.name]=function(...s){let o=i.renderer.apply(this,s);return o===!1&&(o=a.apply(this,s)),o}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let a=e[i.level];a?a.unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),r.extensions=e),t.renderer){let i=this.defaults.renderer||new yE(this.defaults);for(let a in t.renderer){if(!(a in i))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;let s=a,o=t.renderer[s],l=i[s];i[s]=(...u)=>{let c=o.apply(i,u);return c===!1&&(c=l.apply(i,u)),c||""}}r.renderer=i}if(t.tokenizer){let i=this.defaults.tokenizer||new vE(this.defaults);for(let a in t.tokenizer){if(!(a in i))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;let s=a,o=t.tokenizer[s],l=i[s];i[s]=(...u)=>{let c=o.apply(i,u);return c===!1&&(c=l.apply(i,u)),c}}r.tokenizer=i}if(t.hooks){let i=this.defaults.hooks||new sS;for(let a in t.hooks){if(!(a in i))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;let s=a,o=t.hooks[s],l=i[s];sS.passThroughHooks.has(a)?i[s]=u=>{if(this.defaults.async)return Promise.resolve(o.call(i,u)).then(d=>l.call(i,d));let c=o.call(i,u);return l.call(i,c)}:i[s]=(...u)=>{let c=o.apply(i,u);return c===!1&&(c=l.apply(i,u)),c}}r.hooks=i}if(t.walkTokens){let i=this.defaults.walkTokens,a=t.walkTokens;r.walkTokens=function(s){let o=[];return o.push(a.call(this,s)),i&&(o=o.concat(i.call(this,s))),o}}this.defaults={...this.defaults,...r}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,e){return dd.lex(n,e??this.defaults)}parser(n,e){return hd.parse(n,e??this.defaults)}parseMarkdown(n){return(e,t)=>{let r={...t},i={...this.defaults,...r},a=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&r.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=n);let s=i.hooks?i.hooks.provideLexer():n?dd.lex:dd.lexInline,o=i.hooks?i.hooks.provideParser():n?hd.parse:hd.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(e):e).then(l=>s(l,i)).then(l=>i.hooks?i.hooks.processAllTokens(l):l).then(l=>i.walkTokens?Promise.all(this.walkTokens(l,i.walkTokens)).then(()=>l):l).then(l=>o(l,i)).then(l=>i.hooks?i.hooks.postprocess(l):l).catch(a);try{i.hooks&&(e=i.hooks.preprocess(e));let l=s(e,i);i.hooks&&(l=i.hooks.processAllTokens(l)),i.walkTokens&&this.walkTokens(l,i.walkTokens);let u=o(l,i);return i.hooks&&(u=i.hooks.postprocess(u)),u}catch(l){return a(l)}}}onError(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let r="<p>An error occurred:</p><pre>"+Wu(t.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(t);throw t}}},Nm=new Qye;function vr(n,e){return Nm.parse(n,e)}vr.options=vr.setOptions=function(n){return Nm.setOptions(n),vr.defaults=Nm.defaults,DX(vr.defaults),vr};vr.getDefaults=SL;vr.defaults=ng;vr.use=function(...n){return Nm.use(...n),vr.defaults=Nm.defaults,DX(vr.defaults),vr};vr.walkTokens=function(n,e){return Nm.walkTokens(n,e)};vr.parseInline=Nm.parseInline;vr.Parser=hd;vr.parser=hd.parse;vr.Renderer=yE;vr.TextRenderer=PL;vr.Lexer=dd;vr.lexer=dd.lex;vr.Tokenizer=vE;vr.Hooks=sS;vr.parse=vr;vr.options;vr.setOptions;vr.use;vr.walkTokens;vr.parseInline;hd.parse;dd.lex;function c5(n){return n?vr.parseSync?vr.parseSync(n,{breaks:!0}):vr.parse(n,{breaks:!0}):""}const cp=[{q:"Bagaimana cara mendaftar sebagai anggota Mahapala Narotama?",a:"Untuk mendaftar sebagai anggota, kunjungi halaman Pendaftaran di website Mahapala Narotama, isi formulir yang tersedia, dan ikuti petunjuk selanjutnya."},{q:"Apa saja syarat pendaftaran anggota baru?",a:"Syarat pendaftaran meliputi identitas diri (KTP/KTM), nomor telepon aktif, dan komitmen mengikuti kegiatan organisasi."},{q:"Kapan pendaftaran anggota baru dibuka?",a:"Jadwal pendaftaran anggota baru diumumkan secara berkala di website dan media sosial Mahapala Narotama."},{q:"Apakah pendaftaran anggota Mahapala Narotama gratis?",a:"Ya, pendaftaran anggota baru Mahapala Narotama tidak dipungut biaya."},{q:"Bagaimana alur seleksi calon anggota?",a:"Setelah mendaftar, calon anggota akan mengikuti seleksi administrasi dan wawancara sesuai jadwal yang ditentukan."},{q:"Apakah ada batas usia untuk mendaftar?",a:"Tidak ada , namun Pendaftar harus dari Mahasiswa Aktif Universitas Narotama dengan ketentuan dapat di lihat di Halaman Pendaftaran"},{q:"Bagaimana jika saya salah mengisi data pendaftaran?",a:"Data dapat diedit sebelum pendaftaran ditutup"},{q:"Apakah bisa mendaftar lewat HP?",a:"Ya, seluruh proses pendaftaran dapat dilakukan melalui perangkat mobile."},{q:"Apa itu Mahapala Narotama?",a:"Mahapala Narotama adalah organisasi pecinta alam di Universitas Narotama yang bergerak di bidang pelestarian alam, petualangan, dan pengembangan diri."},{q:"Apa manfaat menjadi anggota Mahapala Narotama?",a:"Anggota dapat mengikuti pelatihan, kegiatan alam bebas, pengembangan softskill, serta memperluas jaringan pertemanan."},{q:"Apa saja kegiatan rutin Mahapala Narotama?",a:"Kegiatan rutin meliputi pelatihan dasar, ekspedisi, bakti sosial, seminar lingkungan, dan diskusi rutin."},{q:"Bagaimana cara mengikuti kegiatan Mahapala Narotama?",a:"Setelah menjadi anggota, Anda dapat mendaftar/ mengikuti kegiatan melalui pengumuman di website atau grup resmi."},{q:"Apakah ada grup diskusi untuk pendaftar?",a:"Ya, grup diskusi akan diberikan setelah pendaftaran melakukan pendaftaran."},{q:"Bagaimana cara menghubungi pengurus Mahapala Narotama?",a:"Gunakan menu Hubungi Kami di website atau kontak WhatsApp/email yang tersedia."},{q:"Apakah ada pelatihan untuk anggota baru?",a:"Ya, anggota baru akan mendapatkan pelatihan dasar organisasi dan kegiatan alam."},{q:"Apakah ada kuota anggota baru setiap tahun?",a:"Ya, kuota anggota baru terbatas sesuai kebijakan organisasi."},{q:"Bagaimana cara mendapatkan sertifikat keanggotaan?",a:"Sertifikat akan diberikan setelah menyelesaikan pelatihan dan aktif berpartisipasi dalam kegiatan."},{q:"Apakah Mahapala Narotama hanya untuk mahasiswa Universitas Narotama?",a:"Ya, anggota Mahapala Narotama adalah mahasiswa aktif Universitas Narotama."},{q:"Apakah kegiatan Mahapala Narotama mengganggu perkuliahan?",a:"Tidak, kegiatan organisasi diatur agar tidak mengganggu jadwal perkuliahan anggota."},{q:"Bagaimana jika ada jadwal kuliah yang bentrok dengan kegiatan?",a:"Anggota dapat mengkomunikasikan jadwal kepada pengurus agar dapat menyesuaikan keikutsertaan dalam kegiatan."},{q:"Apakah ada dukungan akademik untuk anggota?",a:"Mahapala Narotama mendukung anggotanya dalam hal akademik melalui diskusi dan saling membantu antar anggota."},{q:"Apakah keanggotaan Mahapala Narotama mempengaruhi nilai akademik?",a:"Keanggotaan tidak mempengaruhi nilai akademik, namun pengalaman organisasi dapat menjadi nilai tambah di luar akademik."}];function gM(n,e=3,t=[]){return[...n.filter(a=>!t.includes(a.q))].sort(()=>.5-Math.random()).slice(0,e).map(a=>a.q)}function Jye(){const[n,e]=M.useState(!1);return M.useEffect(()=>{const t=()=>{e(window.scrollY>200)};return window.addEventListener("scroll",t),t(),()=>window.removeEventListener("scroll",t)},[]),n}async function WX(n){var e,t;try{const i=await(await fetch("https://router.huggingface.co/v1/chat/completions",{method:"POST",headers:{Authorization:"Bearer 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","Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:"Kamu adalah MPN AI Assistant, asisten virtual Mahapala Narotama yang ramah, romantis, informatif, dan sangat mencintai alam. Jawablah semua pertanyaan dalam bahasa Indonesia yang baik, sopan, dan selalu perkenalkan dirimu sebagai MPN AI Assistant jika diminta. Tunjukkan kecintaanmu pada alam dan ajak pengguna untuk ikut menjaga dan mencintai alam dalam setiap kesempatan yang relevan."},{role:"user",content:n}],model:"openai/gpt-oss-20b:fireworks-ai"})})).json();return i&&i.choices&&((t=(e=i.choices[0])==null?void 0:e.message)!=null&&t.content)?i.choices[0].message.content.trim():`Maaf, AI tidak memberikan jawaban yang bisa ditampilkan.
[DEBUG: `+JSON.stringify(i)+"]"}catch{return"Maaf, terjadi kesalahan pada AI Assistant."}}function exe(){const[n,e]=M.useState(!1),[t,r]=M.useState(""),[i,a]=M.useState([{from:"bot",text:" Hai, aku <strong>MPN AI Assistant</strong>! Senang bisa menemani harimu di dunia maya dan alam nyata. Aku sangat mencintai alam, dan siap membantu kamu seputar Mahapala Narotama, pendaftaran anggota baru, atau pertanyaan lain yang ingin kamu tahu. Jangan ragu untuk bertanya, dan jangan lupa untuk selalu mencintai serta menjaga alam bersama aku! "}]),s=Jye(),o=M.useRef(null),l=M.useRef(null),[u,c]=M.useState(!1),[d,f]=M.useState(()=>gM(cp,1)),[m,v]=M.useState(!1),[_,w]=M.useState(""),x=M.useRef(null),[S,E]=M.useState(!1),[T,D]=M.useState(!1);M.useEffect(()=>{x.current&&(x.current.scrollTop=x.current.scrollHeight)},[i,m,_]),M.useEffect(()=>{n&&f(gM(cp,1))},[n]),M.useEffect(()=>{if(!(n||u))return;function P(N){const I=o.current,R=l.current;I&&!I.contains(N.target)&&R&&!R.contains(N.target)&&(c(!0),setTimeout(()=>{e(!1),c(!1)},300))}return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[n,u]),M.useEffect(()=>{if(!(n||u))return;function P(){S||(c(!0),setTimeout(()=>{e(!1),c(!1)},300))}return window.addEventListener("scroll",P),()=>window.removeEventListener("scroll",P)},[n,u,S]);const F=async P=>{const N=typeof P=="string"?P:t;if(!N.trim())return;a(R=>[...R,{from:"user",text:N}]),r(""),v(!0),w("");const I=cp.find(R=>N.toLowerCase().includes(R.q.toLowerCase()));if(I){const R=I.a;for(let B=1;B<=R.length;B++)w(c5(R.slice(0,B))),await new Promise(G=>setTimeout(G,18));a(B=>[...B,{from:"bot",text:R}]),v(!1),w("")}else{let R=await WX(N);a(B=>[...B,{from:"bot",text:R}]),v(!1),w("")}typeof P=="string"&&f(gM(cp,1,[P]))};return h.jsxs("div",{children:[h.jsx("button",{ref:l,onClick:()=>e(P=>!P),className:"fixed right-6 z-[60] bg-blue-600 text-white rounded-full shadow-lg w-14 h-14 flex items-center justify-center text-2xl hover:bg-blue-700 focus:outline-none","aria-label":"Buka Chatbot",style:{bottom:s?"5.5rem":"1.5rem",transition:"bottom 0.3s"},children:""}),(n||u)&&h.jsxs("div",{ref:o,className:`fixed z-[70] w-80 max-w-full bg-white rounded-lg shadow-2xl border border-blue-200 flex flex-col transition-opacity duration-300 ${u?"opacity-0":"opacity-100"}`,style:{right:"1.5rem",bottom:s?"10rem":"6rem",maxWidth:"95vw",pointerEvents:u?"none":"auto",maxHeight:s?"65vh":"80vh",overflowY:"auto"},children:[h.jsxs("div",{className:"p-3 border-b font-bold bg-blue-600 text-white rounded-t-lg flex items-center gap-2 justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(fme,{className:"w-6 h-6"}),h.jsx("span",{children:"MPN AI Assistant"})]}),h.jsx("button",{onClick:()=>{c(!0),setTimeout(()=>{e(!1),c(!1)},300)},className:"ml-2 p-1 rounded hover:bg-blue-700 focus:outline-none","aria-label":"Tutup Chatbot",type:"button",children:h.jsx(W_,{className:"w-5 h-5"})})]}),h.jsxs("div",{ref:x,className:"flex-1 p-3 overflow-y-auto max-h-80 text-sm",children:[i.length===0&&h.jsx("div",{className:"text-gray-500",children:"Tanyakan apa saja tentang website, FAQ, atau pendaftaran."}),i.map((P,N)=>h.jsxs("div",{className:P.from==="user"?"flex justify-end mb-2":"flex justify-start mb-2",children:[P.from==="bot"&&h.jsx("span",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-white border border-blue-200 flex items-center justify-center mr-2 overflow-hidden",children:h.jsx("img",{src:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/favicon.png",alt:"MPN",className:"w-7 h-7 object-contain"})}),h.jsx("span",{className:P.from==="user"?"inline-block bg-blue-100 text-blue-800 rounded px-3 py-2 max-w-[70%]":"inline-block bg-gray-100 text-gray-800 rounded px-3 py-2 max-w-[70%]",children:P.from==="bot"?h.jsx("span",{dangerouslySetInnerHTML:{__html:c5(P.text)}}):P.text}),P.from==="user"&&h.jsx("span",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-blue-100 border border-blue-200 flex items-center justify-center ml-2",children:h.jsx(f$,{className:"w-5 h-5 text-blue-700"})})]},N)),m&&_&&h.jsx("div",{className:"text-left mb-2",children:h.jsxs("span",{className:"inline-block bg-gray-100 text-gray-800 rounded px-2 py-1 animate-pulse",children:[_,h.jsx("span",{className:"inline-block w-2 h-2 bg-gray-400 rounded-full ml-1 animate-bounce"})]})}),m&&!_&&h.jsxs("div",{className:"text-gray-400 animate-pulse flex items-center gap-2 mt-2",children:[h.jsx("span",{className:"inline-block w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),h.jsx("span",{className:"inline-block w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"100ms"}}),h.jsx("span",{className:"inline-block w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"200ms"}}),h.jsx("span",{children:"AI sedang mengetik..."})]})]}),h.jsxs("div",{className:"p-3 border-t flex gap-2 relative items-center bg-gray-50",children:[h.jsx("button",{className:"flex items-center justify-center bg-white border border-gray-300 hover:bg-blue-100 text-blue-700 rounded-full w-9 h-9 shadow mr-2 transition",style:{zIndex:2},title:"Lihat semua pertanyaan FAQ",onClick:()=>D(!0),type:"button",children:h.jsxs("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[h.jsx("circle",{cx:"12",cy:"6",r:"1.5"}),h.jsx("circle",{cx:"12",cy:"12",r:"1.5"}),h.jsx("circle",{cx:"12",cy:"18",r:"1.5"})]})}),h.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-200 min-w-0 bg-white",placeholder:"Tulis pertanyaan...",value:t,onChange:P=>r(P.target.value),onKeyDown:P=>P.key==="Enter"?F():void 0,disabled:m,onFocus:()=>E(!0),onBlur:()=>E(!1),style:{maxWidth:180}}),h.jsx("button",{onClick:()=>F(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 text-sm font-semibold shadow",disabled:m||!t.trim(),style:{minWidth:64},children:"Kirim"}),T&&h.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black bg-opacity-40",children:h.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full p-0 relative overflow-y-auto max-h-[80vh] border border-blue-100",children:[h.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-blue-100 bg-gradient-to-r from-blue-50 to-green-50 rounded-t-2xl",children:[h.jsx("h2",{className:"text-lg font-bold text-blue-800",children:"Daftar Pertanyaan FAQ"}),h.jsx("button",{className:"text-gray-500 hover:text-red-500 text-2xl font-bold",onClick:()=>D(!1),"aria-label":"Tutup daftar pertanyaan",type:"button",children:""})]}),h.jsxs("div",{className:"px-6 py-4",children:[h.jsxs("div",{className:"mb-5",children:[h.jsx("div",{className:"font-semibold text-blue-700 mb-2 text-base",children:"Informasi Pendaftaran"}),h.jsx("ul",{className:"space-y-1",children:cp.slice(0,8).map((P,N)=>h.jsx("li",{children:h.jsx("button",{className:"w-full text-left px-3 py-2 rounded-lg hover:bg-blue-50 transition text-sm",onClick:()=>{D(!1),F(P.q)},children:P.q})},N))})]}),h.jsxs("div",{className:"mb-5",children:[h.jsx("div",{className:"font-semibold text-blue-700 mb-2 text-base",children:"Informasi Organisasi"}),h.jsx("ul",{className:"space-y-1",children:cp.slice(8,18).map((P,N)=>h.jsx("li",{children:h.jsx("button",{className:"w-full text-left px-3 py-2 rounded-lg hover:bg-blue-50 transition text-sm",onClick:()=>{D(!1),F(P.q)},children:P.q})},N))})]}),h.jsxs("div",{children:[h.jsx("div",{className:"font-semibold text-blue-700 mb-2 text-base",children:"Informasi Perkuliahan"}),h.jsx("ul",{className:"space-y-1",children:cp.slice(18).map((P,N)=>h.jsx("li",{children:h.jsx("button",{className:"w-full text-left px-3 py-2 rounded-lg hover:bg-blue-50 transition text-sm",onClick:()=>{D(!1),F(P.q)},children:P.q})},N))})]})]})]})})]}),h.jsxs("div",{className:"px-3 pb-3 pt-1",children:[h.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Coba pertanyaan cepat:"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:d.map((P,N)=>h.jsx("button",{className:"bg-blue-100 text-blue-700 rounded-full px-3 py-1 text-xs hover:bg-blue-200 transition",onClick:()=>F(P),type:"button",disabled:m,children:P},N))})]})]})]})}const txe=kT("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",penuh:"border-transparent bg-green-700 text-white",muda:"border-transparent bg-green-200 text-green-900"}},defaultVariants:{variant:"default"}});function $s({className:n,variant:e,...t}){return h.jsx("div",{className:Jt(txe({variant:e}),n),...t})}function Yo(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function Rm(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}const qX=6048e5,nxe=864e5;let rxe={};function X_(){return rxe}function $1(n,e){var o,l,u,c;const t=X_(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((c=(u=t.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??0,i=Yo(n),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function xE(n){return $1(n,{weekStartsOn:1})}function $X(n){const e=Yo(n),t=e.getFullYear(),r=Rm(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const i=xE(r),a=Rm(n,0);a.setFullYear(t,0,4),a.setHours(0,0,0,0);const s=xE(a);return e.getTime()>=i.getTime()?t+1:e.getTime()>=s.getTime()?t:t-1}function d5(n){const e=Yo(n);return e.setHours(0,0,0,0),e}function h5(n){const e=Yo(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function XX(n,e){const t=d5(n),r=d5(e),i=+t-h5(t),a=+r-h5(r);return Math.round((i-a)/nxe)}function ixe(n){const e=$X(n),t=Rm(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),xE(t)}function axe(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function sxe(n){if(!axe(n)&&typeof n!="number")return!1;const e=Yo(n);return!isNaN(Number(e))}function oxe(n,e){const t=Yo(n),r=Yo(e),i=f5(t,r),a=Math.abs(XX(t,r));t.setDate(t.getDate()-i*a);const s=+(f5(t,r)===-i),o=i*(a-s);return o===0?0:o}function f5(n,e){const t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function lxe(n){const e=Yo(n),t=Rm(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const uxe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},cxe=(n,e,t)=>{let r;const i=uxe[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Q0(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const dxe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hxe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},fxe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pxe={date:Q0({formats:dxe,defaultWidth:"full"}),time:Q0({formats:hxe,defaultWidth:"full"}),dateTime:Q0({formats:fxe,defaultWidth:"full"})},mxe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},gxe=(n,e,t,r)=>mxe[n];function Ju(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const s=n.defaultFormattingWidth||n.defaultWidth,o=t!=null&&t.width?String(t.width):s;i=n.formattingValues[o]||n.formattingValues[s]}else{const s=n.defaultWidth,o=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[o]||n.values[s]}const a=n.argumentCallback?n.argumentCallback(e):e;return i[a]}}const vxe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},yxe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xxe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_xe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},wxe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},bxe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Sxe=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Exe={ordinalNumber:Sxe,era:Ju({values:vxe,defaultWidth:"wide"}),quarter:Ju({values:yxe,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Ju({values:xxe,defaultWidth:"wide"}),day:Ju({values:_xe,defaultWidth:"wide"}),dayPeriod:Ju({values:wxe,defaultWidth:"wide",formattingValues:bxe,defaultFormattingWidth:"wide"})};function ec(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(o)?Txe(o,d=>d.test(s)):Axe(o,d=>d.test(s));let u;u=n.valueCallback?n.valueCallback(l):l,u=t.valueCallback?t.valueCallback(u):u;const c=e.slice(s.length);return{value:u,rest:c}}}function Axe(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function Txe(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function KX(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],a=e.match(n.parsePattern);if(!a)return null;let s=n.valueCallback?n.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const kxe=/^(\d+)(th|st|nd|rd)?/i,Cxe=/\d+/i,Mxe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ixe={any:[/^b/i,/^(a|c)/i]},Pxe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Nxe={any:[/1/i,/2/i,/3/i,/4/i]},Rxe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Dxe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Lxe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Oxe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Fxe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},jxe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Bxe={ordinalNumber:KX({matchPattern:kxe,parsePattern:Cxe,valueCallback:n=>parseInt(n,10)}),era:ec({matchPatterns:Mxe,defaultMatchWidth:"wide",parsePatterns:Ixe,defaultParseWidth:"any"}),quarter:ec({matchPatterns:Pxe,defaultMatchWidth:"wide",parsePatterns:Nxe,defaultParseWidth:"any",valueCallback:n=>n+1}),month:ec({matchPatterns:Rxe,defaultMatchWidth:"wide",parsePatterns:Dxe,defaultParseWidth:"any"}),day:ec({matchPatterns:Lxe,defaultMatchWidth:"wide",parsePatterns:Oxe,defaultParseWidth:"any"}),dayPeriod:ec({matchPatterns:Fxe,defaultMatchWidth:"any",parsePatterns:jxe,defaultParseWidth:"any"})},Uxe={code:"en-US",formatDistance:cxe,formatLong:pxe,formatRelative:gxe,localize:Exe,match:Bxe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Vxe(n){const e=Yo(n);return XX(e,lxe(e))+1}function zxe(n){const e=Yo(n),t=+xE(e)-+ixe(e);return Math.round(t/qX)+1}function YX(n,e){var c,d,f,m;const t=Yo(n),r=t.getFullYear(),i=X_(),a=(e==null?void 0:e.firstWeekContainsDate)??((d=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(f=i.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,s=Rm(n,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const o=$1(s,e),l=Rm(n,0);l.setFullYear(r,0,a),l.setHours(0,0,0,0);const u=$1(l,e);return t.getTime()>=o.getTime()?r+1:t.getTime()>=u.getTime()?r:r-1}function Hxe(n,e){var o,l,u,c;const t=X_(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((c=(u=t.locale)==null?void 0:u.options)==null?void 0:c.firstWeekContainsDate)??1,i=YX(n,e),a=Rm(n,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),$1(a,e)}function Gxe(n,e){const t=Yo(n),r=+$1(t,e)-+Hxe(t,e);return Math.round(r/qX)+1}function Mr(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const vh={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Mr(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Mr(t+1,2)},d(n,e){return Mr(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Mr(n.getHours()%12||12,e.length)},H(n,e){return Mr(n.getHours(),e.length)},m(n,e){return Mr(n.getMinutes(),e.length)},s(n,e){return Mr(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return Mr(i,e.length)}},Cg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},p5={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return vh.y(n,e)},Y:function(n,e,t,r){const i=YX(n,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return Mr(s,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):Mr(a,e.length)},R:function(n,e){const t=$X(n);return Mr(t,e.length)},u:function(n,e){const t=n.getFullYear();return Mr(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Mr(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Mr(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return vh.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Mr(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=Gxe(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Mr(i,e.length)},I:function(n,e,t){const r=zxe(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Mr(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):vh.d(n,e)},D:function(n,e,t){const r=Vxe(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Mr(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Mr(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Mr(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Mr(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=Cg.noon:r===0?i=Cg.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=Cg.evening:r>=12?i=Cg.afternoon:r>=4?i=Cg.morning:i=Cg.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return vh.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):vh.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Mr(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Mr(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):vh.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):vh.s(n,e)},S:function(n,e){return vh.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return g5(r);case"XXXX":case"XX":return Pp(r);case"XXXXX":case"XXX":default:return Pp(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return g5(r);case"xxxx":case"xx":return Pp(r);case"xxxxx":case"xxx":default:return Pp(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+m5(r,":");case"OOOO":default:return"GMT"+Pp(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+m5(r,":");case"zzzz":default:return"GMT"+Pp(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return Mr(r,e.length)},T:function(n,e,t){const r=n.getTime();return Mr(r,e.length)}};function m5(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),a=r%60;return a===0?t+String(i):t+String(i)+e+Mr(a,2)}function g5(n,e){return n%60===0?(n>0?"-":"+")+Mr(Math.abs(n)/60,2):Pp(n,e)}function Pp(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Mr(Math.trunc(r/60),2),a=Mr(r%60,2);return t+i+e+a}const v5=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ZX=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Wxe=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return v5(n,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",v5(r,e)).replace("{{time}}",ZX(i,e))},qxe={p:ZX,P:Wxe},$xe=/^D+$/,Xxe=/^Y+$/,Kxe=["D","DD","YY","YYYY"];function Yxe(n){return $xe.test(n)}function Zxe(n){return Xxe.test(n)}function Qxe(n,e,t){const r=Jxe(n,e,t);if(console.warn(r),Kxe.includes(n))throw new RangeError(r)}function Jxe(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const e1e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,t1e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,n1e=/^'([^]*?)'?$/,r1e=/''/g,i1e=/[a-zA-Z]/;function NL(n,e,t){var c,d,f,m,v,_,w,x;const r=X_(),i=(t==null?void 0:t.locale)??r.locale??Uxe,a=(t==null?void 0:t.firstWeekContainsDate)??((d=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(f=r.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,s=(t==null?void 0:t.weekStartsOn)??((_=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:_.weekStartsOn)??r.weekStartsOn??((x=(w=r.locale)==null?void 0:w.options)==null?void 0:x.weekStartsOn)??0,o=Yo(n);if(!sxe(o))throw new RangeError("Invalid time value");let l=e.match(t1e).map(S=>{const E=S[0];if(E==="p"||E==="P"){const T=qxe[E];return T(S,i.formatLong)}return S}).join("").match(e1e).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const E=S[0];if(E==="'")return{isToken:!1,value:a1e(S)};if(p5[E])return{isToken:!0,value:S};if(E.match(i1e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:S}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const u={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return l.map(S=>{if(!S.isToken)return S.value;const E=S.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&Zxe(E)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&Yxe(E))&&Qxe(E,e,String(n));const T=p5[E[0]];return T(o,E,i.localize,u)}).join("")}function a1e(n){const e=n.match(n1e);return e?e[1].replace(r1e,"'"):n}function s1e(){return Object.assign({},X_())}const o1e={lessThanXSeconds:{one:"kurang dari 1 detik",other:"kurang dari {{count}} detik"},xSeconds:{one:"1 detik",other:"{{count}} detik"},halfAMinute:"setengah menit",lessThanXMinutes:{one:"kurang dari 1 menit",other:"kurang dari {{count}} menit"},xMinutes:{one:"1 menit",other:"{{count}} menit"},aboutXHours:{one:"sekitar 1 jam",other:"sekitar {{count}} jam"},xHours:{one:"1 jam",other:"{{count}} jam"},xDays:{one:"1 hari",other:"{{count}} hari"},aboutXWeeks:{one:"sekitar 1 minggu",other:"sekitar {{count}} minggu"},xWeeks:{one:"1 minggu",other:"{{count}} minggu"},aboutXMonths:{one:"sekitar 1 bulan",other:"sekitar {{count}} bulan"},xMonths:{one:"1 bulan",other:"{{count}} bulan"},aboutXYears:{one:"sekitar 1 tahun",other:"sekitar {{count}} tahun"},xYears:{one:"1 tahun",other:"{{count}} tahun"},overXYears:{one:"lebih dari 1 tahun",other:"lebih dari {{count}} tahun"},almostXYears:{one:"hampir 1 tahun",other:"hampir {{count}} tahun"}},l1e=(n,e,t)=>{let r;const i=o1e[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"dalam waktu "+r:r+" yang lalu":r},u1e={full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"d/M/yyyy"},c1e={full:"HH.mm.ss",long:"HH.mm.ss",medium:"HH.mm",short:"HH.mm"},d1e={full:"{{date}} 'pukul' {{time}}",long:"{{date}} 'pukul' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},h1e={date:Q0({formats:u1e,defaultWidth:"full"}),time:Q0({formats:c1e,defaultWidth:"full"}),dateTime:Q0({formats:d1e,defaultWidth:"full"})},f1e={lastWeek:"eeee 'lalu pukul' p",yesterday:"'Kemarin pukul' p",today:"'Hari ini pukul' p",tomorrow:"'Besok pukul' p",nextWeek:"eeee 'pukul' p",other:"P"},p1e=(n,e,t,r)=>f1e[n],m1e={narrow:["SM","M"],abbreviated:["SM","M"],wide:["Sebelum Masehi","Masehi"]},g1e={narrow:["1","2","3","4"],abbreviated:["K1","K2","K3","K4"],wide:["Kuartal ke-1","Kuartal ke-2","Kuartal ke-3","Kuartal ke-4"]},v1e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"],wide:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]},y1e={narrow:["M","S","S","R","K","J","S"],short:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],abbreviated:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],wide:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},x1e={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},_1e={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},w1e=(n,e)=>"ke-"+Number(n),b1e={ordinalNumber:w1e,era:Ju({values:m1e,defaultWidth:"wide"}),quarter:Ju({values:g1e,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Ju({values:v1e,defaultWidth:"wide"}),day:Ju({values:y1e,defaultWidth:"wide"}),dayPeriod:Ju({values:x1e,defaultWidth:"wide",formattingValues:_1e,defaultFormattingWidth:"wide"})},S1e=/^ke-(\d+)?/i,E1e=/\d+/i,A1e={narrow:/^(sm|m)/i,abbreviated:/^(s\.?\s?m\.?|s\.?\s?e\.?\s?u\.?|m\.?|e\.?\s?u\.?)/i,wide:/^(sebelum masehi|sebelum era umum|masehi|era umum)/i},T1e={any:[/^s/i,/^(m|e)/i]},k1e={narrow:/^[1234]/i,abbreviated:/^K-?\s[1234]/i,wide:/^Kuartal ke-?\s?[1234]/i},C1e={any:[/1/i,/2/i,/3/i,/4/i]},M1e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|mei|jun|jul|agt|sep|okt|nov|des)/i,wide:/^(januari|februari|maret|april|mei|juni|juli|agustus|september|oktober|november|desember)/i},I1e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^ma/i,/^ap/i,/^me/i,/^jun/i,/^jul/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},P1e={narrow:/^[srkjm]/i,short:/^(min|sen|sel|rab|kam|jum|sab)/i,abbreviated:/^(min|sen|sel|rab|kam|jum|sab)/i,wide:/^(minggu|senin|selasa|rabu|kamis|jumat|sabtu)/i},N1e={narrow:[/^m/i,/^s/i,/^s/i,/^r/i,/^k/i,/^j/i,/^s/i],any:[/^m/i,/^sen/i,/^sel/i,/^r/i,/^k/i,/^j/i,/^sa/i]},R1e={narrow:/^(a|p|tengah m|tengah h|(di(\swaktu)?) (pagi|siang|sore|malam))/i,any:/^([ap]\.?\s?m\.?|tengah malam|tengah hari|(di(\swaktu)?) (pagi|siang|sore|malam))/i},D1e={any:{am:/^a/i,pm:/^pm/i,midnight:/^tengah m/i,noon:/^tengah h/i,morning:/pagi/i,afternoon:/siang/i,evening:/sore/i,night:/malam/i}},L1e={ordinalNumber:KX({matchPattern:S1e,parsePattern:E1e,valueCallback:n=>parseInt(n,10)}),era:ec({matchPatterns:A1e,defaultMatchWidth:"wide",parsePatterns:T1e,defaultParseWidth:"any"}),quarter:ec({matchPatterns:k1e,defaultMatchWidth:"wide",parsePatterns:C1e,defaultParseWidth:"any",valueCallback:n=>n+1}),month:ec({matchPatterns:M1e,defaultMatchWidth:"wide",parsePatterns:I1e,defaultParseWidth:"any"}),day:ec({matchPatterns:P1e,defaultMatchWidth:"wide",parsePatterns:N1e,defaultParseWidth:"any"}),dayPeriod:ec({matchPatterns:R1e,defaultMatchWidth:"any",parsePatterns:D1e,defaultParseWidth:"any"})},QX={code:"id",formatDistance:l1e,formatLong:h1e,formatRelative:p1e,localize:b1e,match:L1e,options:{weekStartsOn:1,firstWeekContainsDate:1}};function JX({activity:n}){const e=NL(new Date(n.date),"d MMMM yyyy",{locale:QX}),t=r=>{switch(r.toLowerCase()){case"ekspedisi":return"default";case"konservasi":return"outline";case"edukasi":return"secondary";default:return"default"}};return h.jsxs(_c,{className:"h-full flex flex-col bg-white rounded-lg overflow-hidden shadow-md hover:shadow-lg transition",children:[h.jsx("div",{className:"relative h-48 overflow-hidden",children:h.jsx("img",{src:n.imageUrl||"https://images.unsplash.com/photo-1511632765486-a01980e01a18?auto=format&fit=crop&w=800&h=450",alt:n.title,className:"w-full h-full object-cover transition hover:scale-105 duration-500"})}),h.jsxs(Im,{className:"flex-grow p-5",children:[h.jsxs("div",{className:"flex justify-between items-center mb-3",children:[h.jsx("span",{className:"text-sm text-gray-500",children:e}),h.jsx($s,{variant:t(n.category),children:n.category})]}),h.jsx("h3",{className:"font-heading text-lg font-semibold mb-2",children:n.title}),h.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:n.description})]}),h.jsx(rX,{className:"pt-0 px-5 pb-5",children:h.jsx(Eo,{href:`/kegiatan/${n.id}`,className:"text-primary font-medium hover:text-secondary transition",children:"Selengkapnya "})})]})}function eK({module:n}){const e=t=>{switch(t.toLowerCase()){case"map":case"map-marked-alt":return h.jsx(h$,{className:"h-5 w-5"});case"campground":case"tent":return h.jsx(Ime,{className:"h-5 w-5"});case"first-aid":case"medkit":return h.jsx(gme,{className:"h-5 w-5"});case"compass":return h.jsx(N6,{className:"h-5 w-5"});case"mountain":return h.jsx(kme,{className:"h-5 w-5"});case"leaf":return h.jsx(bme,{className:"h-5 w-5"});case"water":case"droplets":return h.jsx(vme,{className:"h-5 w-5"});case"wind":return h.jsx(Rme,{className:"h-5 w-5"});default:return h.jsx(N6,{className:"h-5 w-5"})}};return h.jsx(_c,{className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition h-full",children:h.jsxs(Im,{className:"p-0",children:[h.jsxs("div",{className:"flex items-center mb-4",children:[h.jsx("span",{className:"bg-primary/10 text-primary p-3 rounded-full mr-4",children:e(n.icon)}),h.jsx("h3",{className:"font-heading text-lg font-semibold",children:n.title})]}),h.jsx("p",{className:"text-gray-600 mb-4",children:n.description}),h.jsxs("a",{href:n.link,className:"inline-flex items-center text-primary hover:text-secondary transition",target:"_blank",rel:"noopener noreferrer",children:[h.jsx("span",{className:"mr-2",children:"Pelajari"}),h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]})})}var K_=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Dm=typeof window>"u"||"Deno"in globalThis;function yo(){}function O1e(n,e){return typeof n=="function"?n(e):n}function IN(n){return typeof n=="number"&&n>=0&&n!==1/0}function tK(n,e){return Math.max(n+(e||0)-Date.now(),0)}function gf(n,e){return typeof n=="function"?n(e):n}function gl(n,e){return typeof n=="function"?n(e):n}function y5(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:a,queryKey:s,stale:o}=n;if(s){if(r){if(e.queryHash!==RL(s,e.options))return!1}else if(!K1(e.queryKey,s))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||i&&i!==e.state.fetchStatus||a&&!a(e))}function x5(n,e){const{exact:t,status:r,predicate:i,mutationKey:a}=n;if(a){if(!e.options.mutationKey)return!1;if(t){if(X1(e.options.mutationKey)!==X1(a))return!1}else if(!K1(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function RL(n,e){return((e==null?void 0:e.queryKeyHashFn)||X1)(n)}function X1(n){return JSON.stringify(n,(e,t)=>NN(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function K1(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>K1(n[t],e[t])):!1}function nK(n,e){if(n===e)return n;const t=_5(n)&&_5(e);if(t||NN(n)&&NN(e)){const r=t?n:Object.keys(n),i=r.length,a=t?e:Object.keys(e),s=a.length,o=t?[]:{},l=new Set(r);let u=0;for(let c=0;c<s;c++){const d=t?c:a[c];(!t&&l.has(d)||t)&&n[d]===void 0&&e[d]===void 0?(o[d]=void 0,u++):(o[d]=nK(n[d],e[d]),o[d]===n[d]&&n[d]!==void 0&&u++)}return i===s&&u===i?n:o}return e}function PN(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function _5(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function NN(n){if(!w5(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!w5(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function w5(n){return Object.prototype.toString.call(n)==="[object Object]"}function F1e(n){return new Promise(e=>{setTimeout(e,n)})}function RN(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?nK(n,e):e}function j1e(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function B1e(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var DL=Symbol();function rK(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===DL?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function U1e(n,e){return typeof n=="function"?n(...e):!!n}var em,Vh,rv,j7,V1e=(j7=class extends K_{constructor(){super();vn(this,em);vn(this,Vh);vn(this,rv);Vt(this,rv,e=>{if(!Dm&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ye(this,Vh)||this.setEventListener(ye(this,rv))}onUnsubscribe(){var e;this.hasListeners()||((e=ye(this,Vh))==null||e.call(this),Vt(this,Vh,void 0))}setEventListener(e){var t;Vt(this,rv,e),(t=ye(this,Vh))==null||t.call(this),Vt(this,Vh,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ye(this,em)!==e&&(Vt(this,em,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof ye(this,em)=="boolean"?ye(this,em):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},em=new WeakMap,Vh=new WeakMap,rv=new WeakMap,j7),LL=new V1e,iv,zh,av,B7,z1e=(B7=class extends K_{constructor(){super();vn(this,iv,!0);vn(this,zh);vn(this,av);Vt(this,av,e=>{if(!Dm&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){ye(this,zh)||this.setEventListener(ye(this,av))}onUnsubscribe(){var e;this.hasListeners()||((e=ye(this,zh))==null||e.call(this),Vt(this,zh,void 0))}setEventListener(e){var t;Vt(this,av,e),(t=ye(this,zh))==null||t.call(this),Vt(this,zh,e(this.setOnline.bind(this)))}setOnline(e){ye(this,iv)!==e&&(Vt(this,iv,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ye(this,iv)}},iv=new WeakMap,zh=new WeakMap,av=new WeakMap,B7),_E=new z1e;function DN(){let n,e;const t=new Promise((i,a)=>{n=i,e=a});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function H1e(n){return Math.min(1e3*2**n,3e4)}function iK(n){return(n??"online")==="online"?_E.isOnline():!0}var aK=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function vM(n){return n instanceof aK}function sK(n){let e=!1,t=0,r=!1,i;const a=DN(),s=_=>{var w;r||(f(new aK(_)),(w=n.abort)==null||w.call(n))},o=()=>{e=!0},l=()=>{e=!1},u=()=>LL.isFocused()&&(n.networkMode==="always"||_E.isOnline())&&n.canRun(),c=()=>iK(n.networkMode)&&n.canRun(),d=_=>{var w;r||(r=!0,(w=n.onSuccess)==null||w.call(n,_),i==null||i(),a.resolve(_))},f=_=>{var w;r||(r=!0,(w=n.onError)==null||w.call(n,_),i==null||i(),a.reject(_))},m=()=>new Promise(_=>{var w;i=x=>{(r||u())&&_(x)},(w=n.onPause)==null||w.call(n)}).then(()=>{var _;i=void 0,r||(_=n.onContinue)==null||_.call(n)}),v=()=>{if(r)return;let _;const w=t===0?n.initialPromise:void 0;try{_=w??n.fn()}catch(x){_=Promise.reject(x)}Promise.resolve(_).then(d).catch(x=>{var F;if(r)return;const S=n.retry??(Dm?0:3),E=n.retryDelay??H1e,T=typeof E=="function"?E(t,x):E,D=S===!0||typeof S=="number"&&t<S||typeof S=="function"&&S(t,x);if(e||!D){f(x);return}t++,(F=n.onFail)==null||F.call(n,t,x),F1e(T).then(()=>u()?void 0:m()).then(()=>{e?f(x):v()})})};return{promise:a,cancel:s,continue:()=>(i==null||i(),a),cancelRetry:o,continueRetry:l,canStart:c,start:()=>(c()?v():m().then(v),a)}}var G1e=n=>setTimeout(n,0);function W1e(){let n=[],e=0,t=o=>{o()},r=o=>{o()},i=G1e;const a=o=>{e?n.push(o):i(()=>{t(o)})},s=()=>{const o=n;n=[],o.length&&i(()=>{r(()=>{o.forEach(l=>{t(l)})})})};return{batch:o=>{let l;e++;try{l=o()}finally{e--,e||s()}return l},batchCalls:o=>(...l)=>{a(()=>{o(...l)})},schedule:a,setNotifyFunction:o=>{t=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{i=o}}}var Va=W1e(),tm,U7,oK=(U7=class{constructor(){vn(this,tm)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),IN(this.gcTime)&&Vt(this,tm,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Dm?1/0:5*60*1e3))}clearGcTimeout(){ye(this,tm)&&(clearTimeout(ye(this,tm)),Vt(this,tm,void 0))}},tm=new WeakMap,U7),sv,nm,ml,rm,fs,__,im,Jl,Qc,V7,q1e=(V7=class extends oK{constructor(e){super();vn(this,Jl);vn(this,sv);vn(this,nm);vn(this,ml);vn(this,rm);vn(this,fs);vn(this,__);vn(this,im);Vt(this,im,!1),Vt(this,__,e.defaultOptions),this.setOptions(e.options),this.observers=[],Vt(this,rm,e.client),Vt(this,ml,ye(this,rm).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Vt(this,sv,$1e(this.options)),this.state=e.state??ye(this,sv),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ye(this,fs))==null?void 0:e.promise}setOptions(e){this.options={...ye(this,__),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ye(this,ml).remove(this)}setData(e,t){const r=RN(this.state.data,e,this.options);return Qn(this,Jl,Qc).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){Qn(this,Jl,Qc).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,i;const t=(r=ye(this,fs))==null?void 0:r.promise;return(i=ye(this,fs))==null||i.cancel(e),t?t.then(yo).catch(yo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ye(this,sv))}isActive(){return this.observers.some(e=>gl(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===DL||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>gf(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!tK(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=ye(this,fs))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=ye(this,fs))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ye(this,ml).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(ye(this,fs)&&(ye(this,im)?ye(this,fs).cancel({revert:!0}):ye(this,fs).cancelRetry()),this.scheduleGc()),ye(this,ml).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Qn(this,Jl,Qc).call(this,{type:"invalidate"})}fetch(e,t){var u,c,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(ye(this,fs))return ye(this,fs).continueRetry(),ye(this,fs).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(Vt(this,im,!0),r.signal)})},a=()=>{const f=rK(this.options,t),v=(()=>{const _={client:ye(this,rm),queryKey:this.queryKey,meta:this.meta};return i(_),_})();return Vt(this,im,!1),this.options.persister?this.options.persister(f,v,this):f(v)},o=(()=>{const f={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:ye(this,rm),state:this.state,fetchFn:a};return i(f),f})();(u=this.options.behavior)==null||u.onFetch(o,this),Vt(this,nm,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=o.fetchOptions)==null?void 0:c.meta))&&Qn(this,Jl,Qc).call(this,{type:"fetch",meta:(d=o.fetchOptions)==null?void 0:d.meta});const l=f=>{var m,v,_,w;vM(f)&&f.silent||Qn(this,Jl,Qc).call(this,{type:"error",error:f}),vM(f)||((v=(m=ye(this,ml).config).onError)==null||v.call(m,f,this),(w=(_=ye(this,ml).config).onSettled)==null||w.call(_,this.state.data,f,this)),this.scheduleGc()};return Vt(this,fs,sK({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var m,v,_,w;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(x){l(x);return}(v=(m=ye(this,ml).config).onSuccess)==null||v.call(m,f,this),(w=(_=ye(this,ml).config).onSettled)==null||w.call(_,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,m)=>{Qn(this,Jl,Qc).call(this,{type:"failed",failureCount:f,error:m})},onPause:()=>{Qn(this,Jl,Qc).call(this,{type:"pause"})},onContinue:()=>{Qn(this,Jl,Qc).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),ye(this,fs).start()}},sv=new WeakMap,nm=new WeakMap,ml=new WeakMap,rm=new WeakMap,fs=new WeakMap,__=new WeakMap,im=new WeakMap,Jl=new WeakSet,Qc=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...lK(r.data,this.options),fetchMeta:e.meta??null};case"success":return Vt(this,nm,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return vM(i)&&i.revert&&ye(this,nm)?{...ye(this,nm),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Va.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ye(this,ml).notify({query:this,type:"updated",action:e})})},V7);function lK(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:iK(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function $1e(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Xu,z7,X1e=(z7=class extends K_{constructor(e={}){super();vn(this,Xu);this.config=e,Vt(this,Xu,new Map)}build(e,t,r){const i=t.queryKey,a=t.queryHash??RL(i,t);let s=this.get(a);return s||(s=new q1e({client:e,queryKey:i,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(s)),s}add(e){ye(this,Xu).has(e.queryHash)||(ye(this,Xu).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=ye(this,Xu).get(e.queryHash);t&&(e.destroy(),t===e&&ye(this,Xu).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Va.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ye(this,Xu).get(e)}getAll(){return[...ye(this,Xu).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>y5(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>y5(e,r)):t}notify(e){Va.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Va.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Va.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Xu=new WeakMap,z7),Ku,Gs,am,Yu,Ih,H7,K1e=(H7=class extends oK{constructor(e){super();vn(this,Yu);vn(this,Ku);vn(this,Gs);vn(this,am);this.mutationId=e.mutationId,Vt(this,Gs,e.mutationCache),Vt(this,Ku,[]),this.state=e.state||Y1e(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ye(this,Ku).includes(e)||(ye(this,Ku).push(e),this.clearGcTimeout(),ye(this,Gs).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Vt(this,Ku,ye(this,Ku).filter(t=>t!==e)),this.scheduleGc(),ye(this,Gs).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ye(this,Ku).length||(this.state.status==="pending"?this.scheduleGc():ye(this,Gs).remove(this))}continue(){var e;return((e=ye(this,am))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,s,o,l,u,c,d,f,m,v,_,w,x,S,E,T,D,F,P,N;const t=()=>{Qn(this,Yu,Ih).call(this,{type:"continue"})};Vt(this,am,sK({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(I,R)=>{Qn(this,Yu,Ih).call(this,{type:"failed",failureCount:I,error:R})},onPause:()=>{Qn(this,Yu,Ih).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ye(this,Gs).canRun(this)}));const r=this.state.status==="pending",i=!ye(this,am).canStart();try{if(r)t();else{Qn(this,Yu,Ih).call(this,{type:"pending",variables:e,isPaused:i}),await((s=(a=ye(this,Gs).config).onMutate)==null?void 0:s.call(a,e,this));const R=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,e));R!==this.state.context&&Qn(this,Yu,Ih).call(this,{type:"pending",context:R,variables:e,isPaused:i})}const I=await ye(this,am).start();return await((c=(u=ye(this,Gs).config).onSuccess)==null?void 0:c.call(u,I,e,this.state.context,this)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,I,e,this.state.context)),await((v=(m=ye(this,Gs).config).onSettled)==null?void 0:v.call(m,I,null,this.state.variables,this.state.context,this)),await((w=(_=this.options).onSettled)==null?void 0:w.call(_,I,null,e,this.state.context)),Qn(this,Yu,Ih).call(this,{type:"success",data:I}),I}catch(I){try{throw await((S=(x=ye(this,Gs).config).onError)==null?void 0:S.call(x,I,e,this.state.context,this)),await((T=(E=this.options).onError)==null?void 0:T.call(E,I,e,this.state.context)),await((F=(D=ye(this,Gs).config).onSettled)==null?void 0:F.call(D,void 0,I,this.state.variables,this.state.context,this)),await((N=(P=this.options).onSettled)==null?void 0:N.call(P,void 0,I,e,this.state.context)),I}finally{Qn(this,Yu,Ih).call(this,{type:"error",error:I})}}finally{ye(this,Gs).runNext(this)}}},Ku=new WeakMap,Gs=new WeakMap,am=new WeakMap,Yu=new WeakSet,Ih=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Va.batch(()=>{ye(this,Ku).forEach(r=>{r.onMutationUpdate(e)}),ye(this,Gs).notify({mutation:this,type:"updated",action:e})})},H7);function Y1e(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var rd,eu,w_,G7,Z1e=(G7=class extends K_{constructor(e={}){super();vn(this,rd);vn(this,eu);vn(this,w_);this.config=e,Vt(this,rd,new Set),Vt(this,eu,new Map),Vt(this,w_,0)}build(e,t,r){const i=new K1e({mutationCache:this,mutationId:++Zw(this,w_)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){ye(this,rd).add(e);const t=Ib(e);if(typeof t=="string"){const r=ye(this,eu).get(t);r?r.push(e):ye(this,eu).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ye(this,rd).delete(e)){const t=Ib(e);if(typeof t=="string"){const r=ye(this,eu).get(t);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&ye(this,eu).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Ib(e);if(typeof t=="string"){const r=ye(this,eu).get(t),i=r==null?void 0:r.find(a=>a.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const t=Ib(e);if(typeof t=="string"){const i=(r=ye(this,eu).get(t))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Va.batch(()=>{ye(this,rd).forEach(e=>{this.notify({type:"removed",mutation:e})}),ye(this,rd).clear(),ye(this,eu).clear()})}getAll(){return Array.from(ye(this,rd))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>x5(t,r))}findAll(e={}){return this.getAll().filter(t=>x5(e,t))}notify(e){Va.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Va.batch(()=>Promise.all(e.map(t=>t.continue().catch(yo))))}},rd=new WeakMap,eu=new WeakMap,w_=new WeakMap,G7);function Ib(n){var e;return(e=n.options.scope)==null?void 0:e.id}function b5(n){return{onFetch:(e,t)=>{var c,d,f,m,v;const r=e.options,i=(f=(d=(c=e.fetchOptions)==null?void 0:c.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,a=((m=e.state.data)==null?void 0:m.pages)||[],s=((v=e.state.data)==null?void 0:v.pageParams)||[];let o={pages:[],pageParams:[]},l=0;const u=async()=>{let _=!1;const w=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?_=!0:e.signal.addEventListener("abort",()=>{_=!0}),e.signal)})},x=rK(e.options,e.fetchOptions),S=async(E,T,D)=>{if(_)return Promise.reject();if(T==null&&E.pages.length)return Promise.resolve(E);const P=(()=>{const B={client:e.client,queryKey:e.queryKey,pageParam:T,direction:D?"backward":"forward",meta:e.options.meta};return w(B),B})(),N=await x(P),{maxPages:I}=e.options,R=D?B1e:j1e;return{pages:R(E.pages,N,I),pageParams:R(E.pageParams,T,I)}};if(i&&a.length){const E=i==="backward",T=E?Q1e:S5,D={pages:a,pageParams:s},F=T(r,D);o=await S(D,F,E)}else{const E=n??a.length;do{const T=l===0?s[0]??r.initialPageParam:S5(r,o);if(l>0&&T==null)break;o=await S(o,T),l++}while(l<E)}return o};e.options.persister?e.fetchFn=()=>{var _,w;return(w=(_=e.options).persister)==null?void 0:w.call(_,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function S5(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function Q1e(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Ci,Hh,Gh,ov,lv,Wh,uv,cv,W7,J1e=(W7=class{constructor(n={}){vn(this,Ci);vn(this,Hh);vn(this,Gh);vn(this,ov);vn(this,lv);vn(this,Wh);vn(this,uv);vn(this,cv);Vt(this,Ci,n.queryCache||new X1e),Vt(this,Hh,n.mutationCache||new Z1e),Vt(this,Gh,n.defaultOptions||{}),Vt(this,ov,new Map),Vt(this,lv,new Map),Vt(this,Wh,0)}mount(){Zw(this,Wh)._++,ye(this,Wh)===1&&(Vt(this,uv,LL.subscribe(async n=>{n&&(await this.resumePausedMutations(),ye(this,Ci).onFocus())})),Vt(this,cv,_E.subscribe(async n=>{n&&(await this.resumePausedMutations(),ye(this,Ci).onOnline())})))}unmount(){var n,e;Zw(this,Wh)._--,ye(this,Wh)===0&&((n=ye(this,uv))==null||n.call(this),Vt(this,uv,void 0),(e=ye(this,cv))==null||e.call(this),Vt(this,cv,void 0))}isFetching(n){return ye(this,Ci).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return ye(this,Hh).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ye(this,Ci).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=ye(this,Ci).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(gf(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return ye(this,Ci).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=ye(this,Ci).get(r.queryHash),a=i==null?void 0:i.state.data,s=O1e(e,a);if(s!==void 0)return ye(this,Ci).build(this,r).setData(s,{...t,manual:!0})}setQueriesData(n,e,t){return Va.batch(()=>ye(this,Ci).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ye(this,Ci).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=ye(this,Ci);Va.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=ye(this,Ci);return Va.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Va.batch(()=>ye(this,Ci).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(yo).catch(yo)}invalidateQueries(n,e={}){return Va.batch(()=>(ye(this,Ci).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Va.batch(()=>ye(this,Ci).findAll(n).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,t);return t.throwOnError||(a=a.catch(yo)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(yo)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=ye(this,Ci).build(this,e);return t.isStaleByTime(gf(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(yo).catch(yo)}fetchInfiniteQuery(n){return n.behavior=b5(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(yo).catch(yo)}ensureInfiniteQueryData(n){return n.behavior=b5(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return _E.isOnline()?ye(this,Hh).resumePausedMutations():Promise.resolve()}getQueryCache(){return ye(this,Ci)}getMutationCache(){return ye(this,Hh)}getDefaultOptions(){return ye(this,Gh)}setDefaultOptions(n){Vt(this,Gh,n)}setQueryDefaults(n,e){ye(this,ov).set(X1(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...ye(this,ov).values()],t={};return e.forEach(r=>{K1(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){ye(this,lv).set(X1(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...ye(this,lv).values()],t={};return e.forEach(r=>{K1(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...ye(this,Gh).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=RL(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===DL&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...ye(this,Gh).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){ye(this,Ci).clear(),ye(this,Hh).clear()}},Ci=new WeakMap,Hh=new WeakMap,Gh=new WeakMap,ov=new WeakMap,lv=new WeakMap,Wh=new WeakMap,uv=new WeakMap,cv=new WeakMap,W7),go,Jn,b_,Ws,sm,dv,qh,$h,S_,hv,fv,om,lm,Xh,pv,wr,Sx,LN,ON,FN,jN,BN,UN,VN,uK,q7,e_e=(q7=class extends K_{constructor(e,t){super();vn(this,wr);vn(this,go);vn(this,Jn);vn(this,b_);vn(this,Ws);vn(this,sm);vn(this,dv);vn(this,qh);vn(this,$h);vn(this,S_);vn(this,hv);vn(this,fv);vn(this,om);vn(this,lm);vn(this,Xh);vn(this,pv,new Set);this.options=t,Vt(this,go,e),Vt(this,$h,null),Vt(this,qh,DN()),this.options.experimental_prefetchInRender||ye(this,qh).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ye(this,Jn).addObserver(this),E5(ye(this,Jn),this.options)?Qn(this,wr,Sx).call(this):this.updateResult(),Qn(this,wr,jN).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return zN(ye(this,Jn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return zN(ye(this,Jn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Qn(this,wr,BN).call(this),Qn(this,wr,UN).call(this),ye(this,Jn).removeObserver(this)}setOptions(e){const t=this.options,r=ye(this,Jn);if(this.options=ye(this,go).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof gl(this.options.enabled,ye(this,Jn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Qn(this,wr,VN).call(this),ye(this,Jn).setOptions(this.options),t._defaulted&&!PN(this.options,t)&&ye(this,go).getQueryCache().notify({type:"observerOptionsUpdated",query:ye(this,Jn),observer:this});const i=this.hasListeners();i&&A5(ye(this,Jn),r,this.options,t)&&Qn(this,wr,Sx).call(this),this.updateResult(),i&&(ye(this,Jn)!==r||gl(this.options.enabled,ye(this,Jn))!==gl(t.enabled,ye(this,Jn))||gf(this.options.staleTime,ye(this,Jn))!==gf(t.staleTime,ye(this,Jn)))&&Qn(this,wr,LN).call(this);const a=Qn(this,wr,ON).call(this);i&&(ye(this,Jn)!==r||gl(this.options.enabled,ye(this,Jn))!==gl(t.enabled,ye(this,Jn))||a!==ye(this,Xh))&&Qn(this,wr,FN).call(this,a)}getOptimisticResult(e){const t=ye(this,go).getQueryCache().build(ye(this,go),e),r=this.createResult(t,e);return n_e(this,r)&&(Vt(this,Ws,r),Vt(this,dv,this.options),Vt(this,sm,ye(this,Jn).state)),r}getCurrentResult(){return ye(this,Ws)}trackResult(e,t){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),t==null||t(i),Reflect.get(r,i))})}trackProp(e){ye(this,pv).add(e)}getCurrentQuery(){return ye(this,Jn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=ye(this,go).defaultQueryOptions(e),r=ye(this,go).getQueryCache().build(ye(this,go),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return Qn(this,wr,Sx).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),ye(this,Ws)))}createResult(e,t){var I;const r=ye(this,Jn),i=this.options,a=ye(this,Ws),s=ye(this,sm),o=ye(this,dv),u=e!==r?e.state:ye(this,b_),{state:c}=e;let d={...c},f=!1,m;if(t._optimisticResults){const R=this.hasListeners(),B=!R&&E5(e,t),G=R&&A5(e,r,t,i);(B||G)&&(d={...d,...lK(c.data,e.options)}),t._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:v,errorUpdatedAt:_,status:w}=d;m=d.data;let x=!1;if(t.placeholderData!==void 0&&m===void 0&&w==="pending"){let R;a!=null&&a.isPlaceholderData&&t.placeholderData===(o==null?void 0:o.placeholderData)?(R=a.data,x=!0):R=typeof t.placeholderData=="function"?t.placeholderData((I=ye(this,fv))==null?void 0:I.state.data,ye(this,fv)):t.placeholderData,R!==void 0&&(w="success",m=RN(a==null?void 0:a.data,R,t),f=!0)}if(t.select&&m!==void 0&&!x)if(a&&m===(s==null?void 0:s.data)&&t.select===ye(this,S_))m=ye(this,hv);else try{Vt(this,S_,t.select),m=t.select(m),m=RN(a==null?void 0:a.data,m,t),Vt(this,hv,m),Vt(this,$h,null)}catch(R){Vt(this,$h,R)}ye(this,$h)&&(v=ye(this,$h),m=ye(this,hv),_=Date.now(),w="error");const S=d.fetchStatus==="fetching",E=w==="pending",T=w==="error",D=E&&S,F=m!==void 0,N={status:w,fetchStatus:d.fetchStatus,isPending:E,isSuccess:w==="success",isError:T,isInitialLoading:D,isLoading:D,data:m,dataUpdatedAt:d.dataUpdatedAt,error:v,errorUpdatedAt:_,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>u.dataUpdateCount||d.errorUpdateCount>u.errorUpdateCount,isFetching:S,isRefetching:S&&!E,isLoadingError:T&&!F,isPaused:d.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:T&&F,isStale:OL(e,t),refetch:this.refetch,promise:ye(this,qh),isEnabled:gl(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const R=H=>{N.status==="error"?H.reject(N.error):N.data!==void 0&&H.resolve(N.data)},B=()=>{const H=Vt(this,qh,N.promise=DN());R(H)},G=ye(this,qh);switch(G.status){case"pending":e.queryHash===r.queryHash&&R(G);break;case"fulfilled":(N.status==="error"||N.data!==G.value)&&B();break;case"rejected":(N.status!=="error"||N.error!==G.reason)&&B();break}}return N}updateResult(){const e=ye(this,Ws),t=this.createResult(ye(this,Jn),this.options);if(Vt(this,sm,ye(this,Jn).state),Vt(this,dv,this.options),ye(this,sm).data!==void 0&&Vt(this,fv,ye(this,Jn)),PN(t,e))return;Vt(this,Ws,t);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!ye(this,pv).size)return!0;const s=new Set(a??ye(this,pv));return this.options.throwOnError&&s.add("error"),Object.keys(ye(this,Ws)).some(o=>{const l=o;return ye(this,Ws)[l]!==e[l]&&s.has(l)})};Qn(this,wr,uK).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Qn(this,wr,jN).call(this)}},go=new WeakMap,Jn=new WeakMap,b_=new WeakMap,Ws=new WeakMap,sm=new WeakMap,dv=new WeakMap,qh=new WeakMap,$h=new WeakMap,S_=new WeakMap,hv=new WeakMap,fv=new WeakMap,om=new WeakMap,lm=new WeakMap,Xh=new WeakMap,pv=new WeakMap,wr=new WeakSet,Sx=function(e){Qn(this,wr,VN).call(this);let t=ye(this,Jn).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(yo)),t},LN=function(){Qn(this,wr,BN).call(this);const e=gf(this.options.staleTime,ye(this,Jn));if(Dm||ye(this,Ws).isStale||!IN(e))return;const r=tK(ye(this,Ws).dataUpdatedAt,e)+1;Vt(this,om,setTimeout(()=>{ye(this,Ws).isStale||this.updateResult()},r))},ON=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ye(this,Jn)):this.options.refetchInterval)??!1},FN=function(e){Qn(this,wr,UN).call(this),Vt(this,Xh,e),!(Dm||gl(this.options.enabled,ye(this,Jn))===!1||!IN(ye(this,Xh))||ye(this,Xh)===0)&&Vt(this,lm,setInterval(()=>{(this.options.refetchIntervalInBackground||LL.isFocused())&&Qn(this,wr,Sx).call(this)},ye(this,Xh)))},jN=function(){Qn(this,wr,LN).call(this),Qn(this,wr,FN).call(this,Qn(this,wr,ON).call(this))},BN=function(){ye(this,om)&&(clearTimeout(ye(this,om)),Vt(this,om,void 0))},UN=function(){ye(this,lm)&&(clearInterval(ye(this,lm)),Vt(this,lm,void 0))},VN=function(){const e=ye(this,go).getQueryCache().build(ye(this,go),this.options);if(e===ye(this,Jn))return;const t=ye(this,Jn);Vt(this,Jn,e),Vt(this,b_,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},uK=function(e){Va.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(ye(this,Ws))}),ye(this,go).getQueryCache().notify({query:ye(this,Jn),type:"observerResultsUpdated"})})},q7);function t_e(n,e){return gl(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function E5(n,e){return t_e(n,e)||n.state.data!==void 0&&zN(n,e,e.refetchOnMount)}function zN(n,e,t){if(gl(e.enabled,n)!==!1&&gf(e.staleTime,n)!=="static"){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&OL(n,e)}return!1}function A5(n,e,t,r){return(n!==e||gl(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&OL(n,t)}function OL(n,e){return gl(e.enabled,n)!==!1&&n.isStaleByTime(gf(e.staleTime,n))}function n_e(n,e){return!PN(n.getCurrentResult(),e)}var cK=M.createContext(void 0),r_e=n=>{const e=M.useContext(cK);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},i_e=({client:n,children:e})=>(M.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),h.jsx(cK.Provider,{value:n,children:e})),dK=M.createContext(!1),a_e=()=>M.useContext(dK);dK.Provider;function s_e(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var o_e=M.createContext(s_e()),l_e=()=>M.useContext(o_e),u_e=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},c_e=n=>{M.useEffect(()=>{n.clearReset()},[n])},d_e=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:i})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(i&&n.data===void 0||U1e(t,[n.error,r])),h_e=n=>{if(n.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),t=n.staleTime;n.staleTime=typeof t=="function"?(...r)=>e(t(...r)):e(t),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},f_e=(n,e)=>n.isLoading&&n.isFetching&&!e,p_e=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,T5=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function m_e(n,e,t){var d,f,m,v,_;const r=a_e(),i=l_e(),a=r_e(),s=a.defaultQueryOptions(n);(f=(d=a.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||f.call(d,s),s._optimisticResults=r?"isRestoring":"optimistic",h_e(s),u_e(s,i),c_e(i);const o=!a.getQueryCache().get(s.queryHash),[l]=M.useState(()=>new e(a,s)),u=l.getOptimisticResult(s),c=!r&&n.subscribed!==!1;if(M.useSyncExternalStore(M.useCallback(w=>{const x=c?l.subscribe(Va.batchCalls(w)):yo;return l.updateResult(),x},[l,c]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),M.useEffect(()=>{l.setOptions(s)},[s,l]),p_e(s,u))throw T5(s,l,i);if(d_e({result:u,errorResetBoundary:i,throwOnError:s.throwOnError,query:a.getQueryCache().get(s.queryHash),suspense:s.suspense}))throw u.error;if((v=(m=a.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||v.call(m,s,u),s.experimental_prefetchInRender&&!Dm&&f_e(u,r)){const w=o?T5(s,l,i):(_=a.getQueryCache().get(s.queryHash))==null?void 0:_.promise;w==null||w.catch(yo).finally(()=>{l.updateResult()})}return s.notifyOnChangeProps?u:l.trackResult(u)}function BT(n,e){return m_e(n,e_e)}const g_e=n=>{var t,r;const e=n.data();return{id:n.id,title:e.title||"",description:e.description||"",date:e.date?typeof e.date=="string"?e.date:((r=(t=e.date)==null?void 0:t.toDate)==null?void 0:r.call(t))??"":"",imageUrl:e.imageUrl||"",category:e.category||""}},v_e=async n=>{const e=ti(un,"activities");let r=(await sa(e)).docs.filter(i=>{const a=i.data();return!("deletedAt"in a)||a.deletedAt===null});return r=r.sort((i,a)=>{const s=i.data().date?new Date(i.data().date).getTime():0;return(a.data().date?new Date(a.data().date).getTime():0)-s}),n&&(r=r.slice(0,n)),r.map(g_e)},FL=n=>BT({queryKey:["activities",n],queryFn:()=>v_e(n)}),y_e=async n=>{let e=ti(un,"learnings"),t=n?mT(e,OD(n)):e;return(await sa(t)).docs.map(i=>{const a=i.data();return{id:i.id,title:a.title||"",description:a.description||"",icon:a.icon||"",link:a.link||""}})},hK=n=>BT({queryKey:["learningModules",n],queryFn:()=>y_e(n)}),x_e=n=>{const e=n.data();return{id:n.id,title:e.title||"",description:e.description||"",imageUrl:e.imageUrl||"",activityId:e.activityId||null,createdAt:e.createdAt||null,updatedAt:e.updatedAt||null}},__e=async()=>{const n=ti(un,"gallerys");return(await sa(n)).docs.filter(t=>{const r=t.data();return!("deletedAt"in r)||r.deletedAt===null}).map(x_e)},fK=()=>BT({queryKey:["gallery"],queryFn:__e});function w_e(n){return Object.prototype.toString.call(n)==="[object Object]"}function k5(n){return w_e(n)||Array.isArray(n)}function b_e(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function jL(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;const i=JSON.stringify(Object.keys(n.breakpoints||{})),a=JSON.stringify(Object.keys(e.breakpoints||{}));return i!==a?!1:t.every(s=>{const o=n[s],l=e[s];return typeof o=="function"?`${o}`==`${l}`:!k5(o)||!k5(l)?o===l:jL(o,l)})}function C5(n){return n.concat().sort((e,t)=>e.name>t.name?1:-1).map(e=>e.options)}function S_e(n,e){if(n.length!==e.length)return!1;const t=C5(n),r=C5(e);return t.every((i,a)=>{const s=r[a];return jL(i,s)})}function BL(n){return typeof n=="number"}function HN(n){return typeof n=="string"}function UT(n){return typeof n=="boolean"}function M5(n){return Object.prototype.toString.call(n)==="[object Object]"}function gi(n){return Math.abs(n)}function UL(n){return Math.sign(n)}function e1(n,e){return gi(n-e)}function E_e(n,e){if(n===0||e===0||gi(n)<=gi(e))return 0;const t=e1(gi(n),gi(e));return gi(t/n)}function A_e(n){return Math.round(n*100)/100}function Y1(n){return Z1(n).map(Number)}function gu(n){return n[Y_(n)]}function Y_(n){return Math.max(0,n.length-1)}function VL(n,e){return e===Y_(n)}function I5(n,e=0){return Array.from(Array(n),(t,r)=>e+r)}function Z1(n){return Object.keys(n)}function pK(n,e){return[n,e].reduce((t,r)=>(Z1(r).forEach(i=>{const a=t[i],s=r[i],o=M5(a)&&M5(s);t[i]=o?pK(a,s):s}),t),{})}function GN(n,e){return typeof e.MouseEvent<"u"&&n instanceof e.MouseEvent}function T_e(n,e){const t={start:r,center:i,end:a};function r(){return 0}function i(l){return a(l)/2}function a(l){return e-l}function s(l,u){return HN(n)?t[n](l):n(e,l,u)}return{measure:s}}function Q1(){let n=[];function e(i,a,s,o={passive:!0}){let l;if("addEventListener"in i)i.addEventListener(a,s,o),l=()=>i.removeEventListener(a,s,o);else{const u=i;u.addListener(s),l=()=>u.removeListener(s)}return n.push(l),r}function t(){n=n.filter(i=>i())}const r={add:e,clear:t};return r}function k_e(n,e,t,r){const i=Q1(),a=1e3/60;let s=null,o=0,l=0;function u(){i.add(n,"visibilitychange",()=>{n.hidden&&v()})}function c(){m(),i.clear()}function d(w){if(!l)return;s||(s=w,t(),t());const x=w-s;for(s=w,o+=x;o>=a;)t(),o-=a;const S=o/a;r(S),l&&(l=e.requestAnimationFrame(d))}function f(){l||(l=e.requestAnimationFrame(d))}function m(){e.cancelAnimationFrame(l),s=null,o=0,l=0}function v(){s=null,o=0}return{init:u,destroy:c,start:f,stop:m,update:t,render:r}}function C_e(n,e){const t=e==="rtl",r=n==="y",i=r?"y":"x",a=r?"x":"y",s=!r&&t?-1:1,o=c(),l=d();function u(v){const{height:_,width:w}=v;return r?_:w}function c(){return r?"top":t?"right":"left"}function d(){return r?"bottom":t?"left":"right"}function f(v){return v*s}return{scroll:i,cross:a,startEdge:o,endEdge:l,measureSize:u,direction:f}}function Lm(n=0,e=0){const t=gi(n-e);function r(u){return u<n}function i(u){return u>e}function a(u){return r(u)||i(u)}function s(u){return a(u)?r(u)?n:e:u}function o(u){return t?u-t*Math.ceil((u-e)/t):u}return{length:t,max:e,min:n,constrain:s,reachedAny:a,reachedMax:i,reachedMin:r,removeOffset:o}}function mK(n,e,t){const{constrain:r}=Lm(0,n),i=n+1;let a=s(e);function s(f){return t?gi((i+f)%i):r(f)}function o(){return a}function l(f){return a=s(f),d}function u(f){return c().set(o()+f)}function c(){return mK(n,o(),t)}const d={get:o,set:l,add:u,clone:c};return d}function M_e(n,e,t,r,i,a,s,o,l,u,c,d,f,m,v,_,w,x,S){const{cross:E,direction:T}=n,D=["INPUT","SELECT","TEXTAREA"],F={passive:!1},P=Q1(),N=Q1(),I=Lm(50,225).constrain(m.measure(20)),R={mouse:300,touch:400},B={mouse:500,touch:600},G=v?43:25;let H=!1,K=0,ne=0,re=!1,oe=!1,$=!1,ue=!1;function se(Te){if(!S)return;function te(Pe){(UT(S)||S(Te,Pe))&&Le(Pe)}const Ee=e;P.add(Ee,"dragstart",Pe=>Pe.preventDefault(),F).add(Ee,"touchmove",()=>{},F).add(Ee,"touchend",()=>{}).add(Ee,"touchstart",te).add(Ee,"mousedown",te).add(Ee,"touchcancel",ge).add(Ee,"contextmenu",ge).add(Ee,"click",Ge,!0)}function pe(){P.clear(),N.clear()}function Fe(){const Te=ue?t:e;N.add(Te,"touchmove",Se,F).add(Te,"touchend",ge).add(Te,"mousemove",Se,F).add(Te,"mouseup",ge)}function $e(Te){const te=Te.nodeName||"";return D.includes(te)}function at(){return(v?B:R)[ue?"mouse":"touch"]}function me(Te,te){const Ee=d.add(UL(Te)*-1),Pe=c.byDistance(Te,!v).distance;return v||gi(Te)<I?Pe:w&&te?Pe*.5:c.byIndex(Ee.get(),0).distance}function Le(Te){const te=GN(Te,r);ue=te,$=v&&te&&!Te.buttons&&H,H=e1(i.get(),s.get())>=2,!(te&&Te.button!==0)&&($e(Te.target)||(re=!0,a.pointerDown(Te),u.useFriction(0).useDuration(0),i.set(s),Fe(),K=a.readPoint(Te),ne=a.readPoint(Te,E),f.emit("pointerDown")))}function Se(Te){if(!GN(Te,r)&&Te.touches.length>=2)return ge(Te);const Ee=a.readPoint(Te),Pe=a.readPoint(Te,E),Ke=e1(Ee,K),je=e1(Pe,ne);if(!oe&&!ue&&(!Te.cancelable||(oe=Ke>je,!oe)))return ge(Te);const st=a.pointerMove(Te);Ke>_&&($=!0),u.useFriction(.3).useDuration(.75),o.start(),i.add(T(st)),Te.preventDefault()}function ge(Te){const Ee=c.byDistance(0,!1).index!==d.get(),Pe=a.pointerUp(Te)*at(),Ke=me(T(Pe),Ee),je=E_e(Pe,Ke),st=G-10*je,tt=x+je/50;oe=!1,re=!1,N.clear(),u.useDuration(st).useFriction(tt),l.distance(Ke,!v),ue=!1,f.emit("pointerUp")}function Ge(Te){$&&(Te.stopPropagation(),Te.preventDefault(),$=!1)}function Me(){return re}return{init:se,destroy:pe,pointerDown:Me}}function I_e(n,e){let r,i;function a(d){return d.timeStamp}function s(d,f){const v=`client${(f||n.scroll)==="x"?"X":"Y"}`;return(GN(d,e)?d:d.touches[0])[v]}function o(d){return r=d,i=d,s(d)}function l(d){const f=s(d)-s(i),m=a(d)-a(r)>170;return i=d,m&&(r=d),f}function u(d){if(!r||!i)return 0;const f=s(i)-s(r),m=a(d)-a(r),v=a(d)-a(i)>170,_=f/m;return m&&!v&&gi(_)>.1?_:0}return{pointerDown:o,pointerMove:l,pointerUp:u,readPoint:s}}function P_e(){function n(t){const{offsetTop:r,offsetLeft:i,offsetWidth:a,offsetHeight:s}=t;return{top:r,right:i+a,bottom:r+s,left:i,width:a,height:s}}return{measure:n}}function N_e(n){function e(r){return n*(r/100)}return{measure:e}}function R_e(n,e,t,r,i,a,s){const o=[n].concat(r);let l,u,c=[],d=!1;function f(w){return i.measureSize(s.measure(w))}function m(w){if(!a)return;u=f(n),c=r.map(f);function x(S){for(const E of S){if(d)return;const T=E.target===n,D=r.indexOf(E.target),F=T?u:c[D],P=f(T?n:r[D]);if(gi(P-F)>=.5){w.reInit(),e.emit("resize");break}}}l=new ResizeObserver(S=>{(UT(a)||a(w,S))&&x(S)}),t.requestAnimationFrame(()=>{o.forEach(S=>l.observe(S))})}function v(){d=!0,l&&l.disconnect()}return{init:m,destroy:v}}function D_e(n,e,t,r,i,a){let s=0,o=0,l=i,u=a,c=n.get(),d=0;function f(){const F=r.get()-n.get(),P=!l;let N=0;return P?(s=0,t.set(r),n.set(r),N=F):(t.set(n),s+=F/l,s*=u,c+=s,n.add(s),N=c-d),o=UL(N),d=c,D}function m(){const F=r.get()-e.get();return gi(F)<.001}function v(){return l}function _(){return o}function w(){return s}function x(){return E(i)}function S(){return T(a)}function E(F){return l=F,D}function T(F){return u=F,D}const D={direction:_,duration:v,velocity:w,seek:f,settled:m,useBaseFriction:S,useBaseDuration:x,useFriction:T,useDuration:E};return D}function L_e(n,e,t,r,i){const a=i.measure(10),s=i.measure(50),o=Lm(.1,.99);let l=!1;function u(){return!(l||!n.reachedAny(t.get())||!n.reachedAny(e.get()))}function c(m){if(!u())return;const v=n.reachedMin(e.get())?"min":"max",_=gi(n[v]-e.get()),w=t.get()-e.get(),x=o.constrain(_/s);t.subtract(w*x),!m&&gi(w)<a&&(t.set(n.constrain(t.get())),r.useDuration(25).useBaseFriction())}function d(m){l=!m}return{shouldConstrain:u,constrain:c,toggleActive:d}}function O_e(n,e,t,r,i){const a=Lm(-e+n,0),s=d(),o=c(),l=f();function u(v,_){return e1(v,_)<=1}function c(){const v=s[0],_=gu(s),w=s.lastIndexOf(v),x=s.indexOf(_)+1;return Lm(w,x)}function d(){return t.map((v,_)=>{const{min:w,max:x}=a,S=a.constrain(v),E=!_,T=VL(t,_);return E?x:T||u(w,S)?w:u(x,S)?x:S}).map(v=>parseFloat(v.toFixed(3)))}function f(){if(e<=n+i)return[a.max];if(r==="keepSnaps")return s;const{min:v,max:_}=o;return s.slice(v,_)}return{snapsContained:l,scrollContainLimit:o}}function F_e(n,e,t){const r=e[0],i=t?r-n:gu(e);return{limit:Lm(i,r)}}function j_e(n,e,t,r){const a=e.min+.1,s=e.max+.1,{reachedMin:o,reachedMax:l}=Lm(a,s);function u(f){return f===1?l(t.get()):f===-1?o(t.get()):!1}function c(f){if(!u(f))return;const m=n*(f*-1);r.forEach(v=>v.add(m))}return{loop:c}}function B_e(n){const{max:e,length:t}=n;function r(a){const s=a-e;return t?s/-t:0}return{get:r}}function U_e(n,e,t,r,i){const{startEdge:a,endEdge:s}=n,{groupSlides:o}=i,l=d().map(e.measure),u=f(),c=m();function d(){return o(r).map(_=>gu(_)[s]-_[0][a]).map(gi)}function f(){return r.map(_=>t[a]-_[a]).map(_=>-gi(_))}function m(){return o(u).map(_=>_[0]).map((_,w)=>_+l[w])}return{snaps:u,snapsAligned:c}}function V_e(n,e,t,r,i,a){const{groupSlides:s}=i,{min:o,max:l}=r,u=c();function c(){const f=s(a),m=!n||e==="keepSnaps";return t.length===1?[a]:m?f:f.slice(o,l).map((v,_,w)=>{const x=!_,S=VL(w,_);if(x){const E=gu(w[0])+1;return I5(E)}if(S){const E=Y_(a)-gu(w)[0]+1;return I5(E,gu(w)[0])}return v})}return{slideRegistry:u}}function z_e(n,e,t,r,i){const{reachedAny:a,removeOffset:s,constrain:o}=r;function l(v){return v.concat().sort((_,w)=>gi(_)-gi(w))[0]}function u(v){const _=n?s(v):o(v),w=e.map((S,E)=>({diff:c(S-_,0),index:E})).sort((S,E)=>gi(S.diff)-gi(E.diff)),{index:x}=w[0];return{index:x,distance:_}}function c(v,_){const w=[v,v+t,v-t];if(!n)return v;if(!_)return l(w);const x=w.filter(S=>UL(S)===_);return x.length?l(x):gu(w)-t}function d(v,_){const w=e[v]-i.get(),x=c(w,_);return{index:v,distance:x}}function f(v,_){const w=i.get()+v,{index:x,distance:S}=u(w),E=!n&&a(w);if(!_||E)return{index:x,distance:v};const T=e[x]-S,D=v+c(T,0);return{index:x,distance:D}}return{byDistance:f,byIndex:d,shortcut:c}}function H_e(n,e,t,r,i,a,s){function o(d){const f=d.distance,m=d.index!==e.get();a.add(f),f&&(r.duration()?n.start():(n.update(),n.render(1),n.update())),m&&(t.set(e.get()),e.set(d.index),s.emit("select"))}function l(d,f){const m=i.byDistance(d,f);o(m)}function u(d,f){const m=e.clone().set(d),v=i.byIndex(m.get(),f);o(v)}return{distance:l,index:u}}function G_e(n,e,t,r,i,a,s,o){const l={passive:!0,capture:!0};let u=0;function c(m){if(!o)return;function v(_){if(new Date().getTime()-u>10)return;s.emit("slideFocusStart"),n.scrollLeft=0;const S=t.findIndex(E=>E.includes(_));BL(S)&&(i.useDuration(0),r.index(S,0),s.emit("slideFocus"))}a.add(document,"keydown",d,!1),e.forEach((_,w)=>{a.add(_,"focus",x=>{(UT(o)||o(m,x))&&v(w)},l)})}function d(m){m.code==="Tab"&&(u=new Date().getTime())}return{init:c}}function Ex(n){let e=n;function t(){return e}function r(l){e=s(l)}function i(l){e+=s(l)}function a(l){e-=s(l)}function s(l){return BL(l)?l:l.get()}return{get:t,set:r,add:i,subtract:a}}function gK(n,e){const t=n.scroll==="x"?s:o,r=e.style;let i=null,a=!1;function s(f){return`translate3d(${f}px,0px,0px)`}function o(f){return`translate3d(0px,${f}px,0px)`}function l(f){if(a)return;const m=A_e(n.direction(f));m!==i&&(r.transform=t(m),i=m)}function u(f){a=!f}function c(){a||(r.transform="",e.getAttribute("style")||e.removeAttribute("style"))}return{clear:c,to:l,toggleActive:u}}function W_e(n,e,t,r,i,a,s,o,l){const c=Y1(i),d=Y1(i).reverse(),f=x().concat(S());function m(P,N){return P.reduce((I,R)=>I-i[R],N)}function v(P,N){return P.reduce((I,R)=>m(I,N)>0?I.concat([R]):I,[])}function _(P){return a.map((N,I)=>({start:N-r[I]+.5+P,end:N+e-.5+P}))}function w(P,N,I){const R=_(N);return P.map(B=>{const G=I?0:-t,H=I?t:0,K=I?"end":"start",ne=R[B][K];return{index:B,loopPoint:ne,slideLocation:Ex(-1),translate:gK(n,l[B]),target:()=>o.get()>ne?G:H}})}function x(){const P=s[0],N=v(d,P);return w(N,t,!1)}function S(){const P=e-s[0]-1,N=v(c,P);return w(N,-t,!0)}function E(){return f.every(({index:P})=>{const N=c.filter(I=>I!==P);return m(N,e)<=.1})}function T(){f.forEach(P=>{const{target:N,translate:I,slideLocation:R}=P,B=N();B!==R.get()&&(I.to(B),R.set(B))})}function D(){f.forEach(P=>P.translate.clear())}return{canLoop:E,clear:D,loop:T,loopPoints:f}}function q_e(n,e,t){let r,i=!1;function a(l){if(!t)return;function u(c){for(const d of c)if(d.type==="childList"){l.reInit(),e.emit("slidesChanged");break}}r=new MutationObserver(c=>{i||(UT(t)||t(l,c))&&u(c)}),r.observe(n,{childList:!0})}function s(){r&&r.disconnect(),i=!0}return{init:a,destroy:s}}function $_e(n,e,t,r){const i={};let a=null,s=null,o,l=!1;function u(){o=new IntersectionObserver(v=>{l||(v.forEach(_=>{const w=e.indexOf(_.target);i[w]=_}),a=null,s=null,t.emit("slidesInView"))},{root:n.parentElement,threshold:r}),e.forEach(v=>o.observe(v))}function c(){o&&o.disconnect(),l=!0}function d(v){return Z1(i).reduce((_,w)=>{const x=parseInt(w),{isIntersecting:S}=i[x];return(v&&S||!v&&!S)&&_.push(x),_},[])}function f(v=!0){if(v&&a)return a;if(!v&&s)return s;const _=d(v);return v&&(a=_),v||(s=_),_}return{init:u,destroy:c,get:f}}function X_e(n,e,t,r,i,a){const{measureSize:s,startEdge:o,endEdge:l}=n,u=t[0]&&i,c=v(),d=_(),f=t.map(s),m=w();function v(){if(!u)return 0;const S=t[0];return gi(e[o]-S[o])}function _(){if(!u)return 0;const S=a.getComputedStyle(gu(r));return parseFloat(S.getPropertyValue(`margin-${l}`))}function w(){return t.map((S,E,T)=>{const D=!E,F=VL(T,E);return D?f[E]+c:F?f[E]+d:T[E+1][o]-S[o]}).map(gi)}return{slideSizes:f,slideSizesWithGaps:m,startGap:c,endGap:d}}function K_e(n,e,t,r,i,a,s,o,l){const{startEdge:u,endEdge:c,direction:d}=n,f=BL(t);function m(x,S){return Y1(x).filter(E=>E%S===0).map(E=>x.slice(E,E+S))}function v(x){return x.length?Y1(x).reduce((S,E,T)=>{const D=gu(S)||0,F=D===0,P=E===Y_(x),N=i[u]-a[D][u],I=i[u]-a[E][c],R=!r&&F?d(s):0,B=!r&&P?d(o):0,G=gi(I-B-(N+R));return T&&G>e+l&&S.push(E),P&&S.push(x.length),S},[]).map((S,E,T)=>{const D=Math.max(T[E-1]||0);return x.slice(D,S)}):[]}function _(x){return f?m(x,t):v(x)}return{groupSlides:_}}function Y_e(n,e,t,r,i,a,s){const{align:o,axis:l,direction:u,startIndex:c,loop:d,duration:f,dragFree:m,dragThreshold:v,inViewThreshold:_,slidesToScroll:w,skipSnaps:x,containScroll:S,watchResize:E,watchSlides:T,watchDrag:D,watchFocus:F}=a,P=2,N=P_e(),I=N.measure(e),R=t.map(N.measure),B=C_e(l,u),G=B.measureSize(I),H=N_e(G),K=T_e(o,G),ne=!d&&!!S,re=d||!!S,{slideSizes:oe,slideSizesWithGaps:$,startGap:ue,endGap:se}=X_e(B,I,R,t,re,i),pe=K_e(B,G,w,d,I,R,ue,se,P),{snaps:Fe,snapsAligned:$e}=U_e(B,K,I,R,pe),at=-gu(Fe)+gu($),{snapsContained:me,scrollContainLimit:Le}=O_e(G,at,$e,S,P),Se=ne?me:$e,{limit:ge}=F_e(at,Se,d),Ge=mK(Y_(Se),c,d),Me=Ge.clone(),Ce=Y1(t),Te=({dragHandler:lt,scrollBody:St,scrollBounds:bt,options:{loop:ut}})=>{ut||bt.constrain(lt.pointerDown()),St.seek()},te=({scrollBody:lt,translate:St,location:bt,offsetLocation:ut,previousLocation:xt,scrollLooper:Bt,slideLooper:ce,dragHandler:Ne,animation:ht,eventHandler:de,scrollBounds:nt,options:{loop:fe}},Ze)=>{const Qe=lt.settled(),Oe=!nt.shouldConstrain(),dt=fe?Qe:Qe&&Oe,vt=dt&&!Ne.pointerDown();vt&&ht.stop();const En=bt.get()*Ze+xt.get()*(1-Ze);ut.set(En),fe&&(Bt.loop(lt.direction()),ce.loop()),St.to(ut.get()),vt&&de.emit("settle"),dt||de.emit("scroll")},Ee=k_e(r,i,()=>Te(pt),lt=>te(pt,lt)),Pe=.68,Ke=Se[Ge.get()],je=Ex(Ke),st=Ex(Ke),tt=Ex(Ke),ee=Ex(Ke),qe=D_e(je,tt,st,ee,f,Pe),Ye=z_e(d,Se,at,ge,ee),Z=H_e(Ee,Ge,Me,qe,Ye,ee,s),X=B_e(ge),ve=Q1(),Ie=$_e(e,t,s,_),{slideRegistry:He}=V_e(ne,S,Se,Le,pe,Ce),we=G_e(n,t,He,Z,qe,ve,s,F),pt={ownerDocument:r,ownerWindow:i,eventHandler:s,containerRect:I,slideRects:R,animation:Ee,axis:B,dragHandler:M_e(B,n,r,i,ee,I_e(B,i),je,Ee,Z,qe,Ye,Ge,s,H,m,v,x,Pe,D),eventStore:ve,percentOfView:H,index:Ge,indexPrevious:Me,limit:ge,location:je,offsetLocation:tt,previousLocation:st,options:a,resizeHandler:R_e(e,s,i,t,B,E,N),scrollBody:qe,scrollBounds:L_e(ge,tt,ee,qe,H),scrollLooper:j_e(at,ge,tt,[je,tt,st,ee]),scrollProgress:X,scrollSnapList:Se.map(X.get),scrollSnaps:Se,scrollTarget:Ye,scrollTo:Z,slideLooper:W_e(B,G,at,oe,$,Fe,Se,tt,t),slideFocus:we,slidesHandler:q_e(e,s,T),slidesInView:Ie,slideIndexes:Ce,slideRegistry:He,slidesToScroll:pe,target:ee,translate:gK(B,e)};return pt}function Z_e(){let n={},e;function t(u){e=u}function r(u){return n[u]||[]}function i(u){return r(u).forEach(c=>c(e,u)),l}function a(u,c){return n[u]=r(u).concat([c]),l}function s(u,c){return n[u]=r(u).filter(d=>d!==c),l}function o(){n={}}const l={init:t,emit:i,off:s,on:a,clear:o};return l}const Q_e={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function J_e(n){function e(a,s){return pK(a,s||{})}function t(a){const s=a.breakpoints||{},o=Z1(s).filter(l=>n.matchMedia(l).matches).map(l=>s[l]).reduce((l,u)=>e(l,u),{});return e(a,o)}function r(a){return a.map(s=>Z1(s.breakpoints||{})).reduce((s,o)=>s.concat(o),[]).map(n.matchMedia)}return{mergeOptions:e,optionsAtMedia:t,optionsMediaQueries:r}}function ewe(n){let e=[];function t(a,s){return e=s.filter(({options:o})=>n.optionsAtMedia(o).active!==!1),e.forEach(o=>o.init(a,n)),s.reduce((o,l)=>Object.assign(o,{[l.name]:l}),{})}function r(){e=e.filter(a=>a.destroy())}return{init:t,destroy:r}}function wE(n,e,t){const r=n.ownerDocument,i=r.defaultView,a=J_e(i),s=ewe(a),o=Q1(),l=Z_e(),{mergeOptions:u,optionsAtMedia:c,optionsMediaQueries:d}=a,{on:f,off:m,emit:v}=l,_=B;let w=!1,x,S=u(Q_e,wE.globalOptions),E=u(S),T=[],D,F,P;function N(){const{container:Ce,slides:Te}=E;F=(HN(Ce)?n.querySelector(Ce):Ce)||n.children[0];const Ee=HN(Te)?F.querySelectorAll(Te):Te;P=[].slice.call(Ee||F.children)}function I(Ce){const Te=Y_e(n,F,P,r,i,Ce,l);if(Ce.loop&&!Te.slideLooper.canLoop()){const te=Object.assign({},Ce,{loop:!1});return I(te)}return Te}function R(Ce,Te){w||(S=u(S,Ce),E=c(S),T=Te||T,N(),x=I(E),d([S,...T.map(({options:te})=>te)]).forEach(te=>o.add(te,"change",B)),E.active&&(x.translate.to(x.location.get()),x.animation.init(),x.slidesInView.init(),x.slideFocus.init(Me),x.eventHandler.init(Me),x.resizeHandler.init(Me),x.slidesHandler.init(Me),x.options.loop&&x.slideLooper.loop(),F.offsetParent&&P.length&&x.dragHandler.init(Me),D=s.init(Me,T)))}function B(Ce,Te){const te=pe();G(),R(u({startIndex:te},Ce),Te),l.emit("reInit")}function G(){x.dragHandler.destroy(),x.eventStore.clear(),x.translate.clear(),x.slideLooper.clear(),x.resizeHandler.destroy(),x.slidesHandler.destroy(),x.slidesInView.destroy(),x.animation.destroy(),s.destroy(),o.clear()}function H(){w||(w=!0,o.clear(),G(),l.emit("destroy"),l.clear())}function K(Ce,Te,te){!E.active||w||(x.scrollBody.useBaseFriction().useDuration(Te===!0?0:E.duration),x.scrollTo.index(Ce,te||0))}function ne(Ce){const Te=x.index.add(1).get();K(Te,Ce,-1)}function re(Ce){const Te=x.index.add(-1).get();K(Te,Ce,1)}function oe(){return x.index.add(1).get()!==pe()}function $(){return x.index.add(-1).get()!==pe()}function ue(){return x.scrollSnapList}function se(){return x.scrollProgress.get(x.offsetLocation.get())}function pe(){return x.index.get()}function Fe(){return x.indexPrevious.get()}function $e(){return x.slidesInView.get()}function at(){return x.slidesInView.get(!1)}function me(){return D}function Le(){return x}function Se(){return n}function ge(){return F}function Ge(){return P}const Me={canScrollNext:oe,canScrollPrev:$,containerNode:ge,internalEngine:Le,destroy:H,off:m,on:f,emit:v,plugins:me,previousScrollSnap:Fe,reInit:_,rootNode:Se,scrollNext:ne,scrollPrev:re,scrollProgress:se,scrollSnapList:ue,scrollTo:K,selectedScrollSnap:pe,slideNodes:Ge,slidesInView:$e,slidesNotInView:at};return R(e,t),setTimeout(()=>l.emit("init"),0),Me}wE.globalOptions=void 0;function zL(n={},e=[]){const t=M.useRef(n),r=M.useRef(e),[i,a]=M.useState(),[s,o]=M.useState(),l=M.useCallback(()=>{i&&i.reInit(t.current,r.current)},[i]);return M.useEffect(()=>{jL(t.current,n)||(t.current=n,l())},[n,l]),M.useEffect(()=>{S_e(r.current,e)||(r.current=e,l())},[e,l]),M.useEffect(()=>{if(b_e()&&s){wE.globalOptions=zL.globalOptions;const u=wE(s,t.current,r.current);return a(u),()=>u.destroy()}else a(void 0)},[s,a]),[o,i]}zL.globalOptions=void 0;const vK=M.createContext(null);function VT(){const n=M.useContext(vK);if(!n)throw new Error("useCarousel must be used within a <Carousel />");return n}const yK=M.forwardRef(({orientation:n="horizontal",opts:e,setApi:t,plugins:r,className:i,children:a,...s},o)=>{const[l,u]=zL({...e,axis:n==="horizontal"?"x":"y"},r),[c,d]=M.useState(!1),[f,m]=M.useState(!1),v=M.useCallback(S=>{S&&(d(S.canScrollPrev()),m(S.canScrollNext()))},[]),_=M.useCallback(()=>{u==null||u.scrollPrev()},[u]),w=M.useCallback(()=>{u==null||u.scrollNext()},[u]),x=M.useCallback(S=>{S.key==="ArrowLeft"?(S.preventDefault(),_()):S.key==="ArrowRight"&&(S.preventDefault(),w())},[_,w]);return M.useEffect(()=>{!u||!t||t(u)},[u,t]),M.useEffect(()=>{if(u)return v(u),u.on("reInit",v),u.on("select",v),()=>{u==null||u.off("select",v)}},[u,v]),h.jsx(vK.Provider,{value:{carouselRef:l,api:u,opts:e,orientation:n||((e==null?void 0:e.axis)==="y"?"vertical":"horizontal"),scrollPrev:_,scrollNext:w,canScrollPrev:c,canScrollNext:f},children:h.jsx("div",{ref:o,onKeyDownCapture:x,className:Jt("relative",i),role:"region","aria-roledescription":"carousel",...s,children:a})})});yK.displayName="Carousel";const xK=M.forwardRef(({className:n,...e},t)=>{const{carouselRef:r,orientation:i}=VT();return h.jsx("div",{ref:r,className:"overflow-hidden",children:h.jsx("div",{ref:t,className:Jt("flex",i==="horizontal"?"-ml-4":"-mt-4 flex-col",n),...e})})});xK.displayName="CarouselContent";const _K=M.forwardRef(({className:n,...e},t)=>{const{orientation:r}=VT();return h.jsx("div",{ref:t,role:"group","aria-roledescription":"slide",className:Jt("min-w-0 shrink-0 grow-0 basis-full",r==="horizontal"?"pl-4":"pt-4",n),...e})});_K.displayName="CarouselItem";const wK=M.forwardRef(({className:n,variant:e="outline",size:t="icon",...r},i)=>{const{orientation:a,scrollPrev:s,canScrollPrev:o}=VT();return h.jsxs(zt,{ref:i,variant:e,size:t,className:Jt("absolute  h-8 w-8 rounded-full",a==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",n),disabled:!o,onClick:s,...r,children:[h.jsx(dme,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Previous slide"})]})});wK.displayName="CarouselPrevious";const bK=M.forwardRef(({className:n,variant:e="outline",size:t="icon",...r},i)=>{const{orientation:a,scrollNext:s,canScrollNext:o}=VT();return h.jsxs(zt,{ref:i,variant:e,size:t,className:Jt("absolute h-8 w-8 rounded-full",a==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",n),disabled:!o,onClick:s,...r,children:[h.jsx(o$,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Next slide"})]})});bK.displayName="CarouselNext";const twe={active:!0,breakpoints:{},delay:4e3,jump:!1,playOnInit:!0,stopOnFocusIn:!0,stopOnInteraction:!0,stopOnMouseEnter:!1,stopOnLastSnap:!1,rootNode:null};function nwe(n,e){const t=n.scrollSnapList();return typeof e=="number"?t.map(()=>e):e(t,n)}function rwe(n,e){const t=n.rootNode();return e&&e(t)||t}function HL(n={}){let e,t,r,i,a=null,s=0,o=!1,l=!1,u=!1,c=!1;function d(K,ne){t=K;const{mergeOptions:re,optionsAtMedia:oe}=ne,$=re(twe,HL.globalOptions),ue=re($,n);if(e=oe(ue),t.scrollSnapList().length<=1)return;c=e.jump,r=!1,i=nwe(t,e.delay);const{eventStore:se,ownerDocument:pe}=t.internalEngine(),Fe=!!t.internalEngine().options.watchDrag,$e=rwe(t,e.rootNode);se.add(pe,"visibilitychange",x),Fe&&t.on("pointerDown",E),Fe&&!e.stopOnInteraction&&t.on("pointerUp",T),e.stopOnMouseEnter&&se.add($e,"mouseenter",D),e.stopOnMouseEnter&&!e.stopOnInteraction&&se.add($e,"mouseleave",F),e.stopOnFocusIn&&t.on("slideFocusStart",w),e.stopOnFocusIn&&!e.stopOnInteraction&&se.add(t.containerNode(),"focusout",_),e.playOnInit&&_()}function f(){t.off("pointerDown",E).off("pointerUp",T).off("slideFocusStart",w),w(),r=!0,o=!1}function m(){const{ownerWindow:K}=t.internalEngine();K.clearTimeout(s),s=K.setTimeout(B,i[t.selectedScrollSnap()]),a=new Date().getTime(),t.emit("autoplay:timerset")}function v(){const{ownerWindow:K}=t.internalEngine();K.clearTimeout(s),s=0,a=null,t.emit("autoplay:timerstopped")}function _(){if(!r){if(S()){u=!0;return}o||t.emit("autoplay:play"),m(),o=!0}}function w(){r||(o&&t.emit("autoplay:stop"),v(),o=!1)}function x(){if(S())return u=o,w();u&&_()}function S(){const{ownerDocument:K}=t.internalEngine();return K.visibilityState==="hidden"}function E(){l||w()}function T(){l||_()}function D(){l=!0,w()}function F(){l=!1,_()}function P(K){typeof K<"u"&&(c=K),_()}function N(){o&&w()}function I(){o&&_()}function R(){return o}function B(){const{index:K}=t.internalEngine(),ne=K.clone().add(1).get(),re=t.scrollSnapList().length-1,oe=e.stopOnLastSnap&&ne===re;if(t.canScrollNext()?t.scrollNext(c):t.scrollTo(0,c),t.emit("autoplay:select"),oe)return w();_()}function G(){if(!a)return null;const K=i[t.selectedScrollSnap()],ne=new Date().getTime()-a;return K-ne}return{name:"autoplay",options:n,init:d,destroy:f,play:P,stop:N,reset:I,isPlaying:R,timeUntilNext:G}}HL.globalOptions=void 0;function iwe(){const n=new Date,e=n.getMonth()>0||n.getMonth()===0&&n.getDate()>26?n.getFullYear()+1:n.getFullYear();return new Date(e,0,26,0,0,0,0)}function awe(){const e=new Date;return(e.getMonth()>0||e.getMonth()===0&&e.getDate()>26?e.getFullYear()+1:e.getFullYear())-2017}function swe({open:n,onClose:e}){const[t,r]=M.useState(null);return M.useEffect(()=>{function i(){const s=new Date,l=iwe().getTime()-s.getTime();if(l<=0)return{days:0,hours:0,minutes:0,seconds:0};const u=Math.floor(l/(1e3*60*60*24)),c=Math.floor(l/(1e3*60*60)%24),d=Math.floor(l/(1e3*60)%60),f=Math.floor(l/1e3%60);return{days:u,hours:c,minutes:d,seconds:f}}r(i());const a=setInterval(()=>{r(i())},1e3);return()=>clearInterval(a)},[]),n?h.jsxs(wc,{open:n,onOpenChange:e,children:[h.jsxs(bu,{className:"max-w-md w-full p-0 overflow-visible bg-gradient-to-br from-yellow-50 to-pink-100 border-4 border-yellow-300 relative shadow-2xl rounded-2xl animate-fadeIn",children:[h.jsx("div",{className:"pointer-events-none absolute inset-0 z-10",children:[...Array(30)].map((i,a)=>h.jsx("span",{className:"absolute rounded-full opacity-80 animate-confetti",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,width:`${8+Math.random()*12}px`,height:`${8+Math.random()*12}px`,background:`hsl(${Math.random()*360},90%,70%)`,animationDelay:`${Math.random()*2}s`}},a))}),h.jsxs("div",{className:"relative z-20 flex flex-col items-center justify-center py-10 px-6",children:[h.jsx("div",{className:"mb-4",children:h.jsxs("svg",{className:"mx-auto h-16 w-16 text-yellow-400 drop-shadow-lg animate-bounce",fill:"none",viewBox:"0 0 48 48",stroke:"currentColor",children:[h.jsx("circle",{cx:"24",cy:"24",r:"22",strokeWidth:"4",className:"stroke-yellow-300 fill-yellow-100"}),h.jsx("path",{d:"M16 32c2-2 6-2 8 0m8-8c-2 2-6 2-8 0",strokeWidth:"2",className:"stroke-pink-400"}),h.jsx("circle",{cx:"18",cy:"20",r:"2",className:"fill-pink-400"}),h.jsx("circle",{cx:"30",cy:"20",r:"2",className:"fill-pink-400"})]})}),h.jsxs("h2",{className:"text-2xl font-bold text-yellow-700 mb-2 drop-shadow",children:["Perayaan Ulang Tahun Mahapala Narotama ke-",awe()]}),h.jsxs("p",{className:"text-lg text-gray-700 mb-4",children:["Menuju hari ulang tahun organisasi pada ",h.jsx("b",{children:"26 Januari"}),"!"]}),t?h.jsxs("div",{className:"mb-6 text-3xl font-mono flex justify-center gap-3 text-pink-600",children:[h.jsxs("span",{children:[t.days," ",h.jsx("span",{className:"text-xs font-normal text-gray-500",children:"hari"})]}),h.jsx("span",{children:":"}),h.jsxs("span",{children:[String(t.hours).padStart(2,"0"),h.jsx("span",{className:"text-xs font-normal text-gray-500",children:"j"})]}),h.jsx("span",{children:":"}),h.jsxs("span",{children:[String(t.minutes).padStart(2,"0"),h.jsx("span",{className:"text-xs font-normal text-gray-500",children:"m"})]}),h.jsx("span",{children:":"}),h.jsxs("span",{children:[String(t.seconds).padStart(2,"0"),h.jsx("span",{className:"text-xs font-normal text-gray-500",children:"d"})]})]}):h.jsx("p",{className:"mb-6",children:"Menghitung..."}),h.jsx(zt,{onClick:e,className:"mt-2 bg-pink-500 hover:bg-pink-600 text-white font-bold shadow-lg rounded-full px-6 py-2",children:"Tutup"})]})]}),h.jsx("style",{children:`
        @keyframes confetti {
          0% { transform: translateY(-40px) scale(1) rotate(0deg); opacity: 1; }
          100% { transform: translateY(400px) scale(0.7) rotate(360deg); opacity: 0.7; }
        }
        .animate-confetti {
          animation: confetti 2.5s linear infinite;
        }
        .animate-fadeIn {
          animation: fadeIn 0.7s cubic-bezier(.4,0,.2,1);
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]}):null}function owe({text:n,speed:e=50}){const[t,r]=M.useState(""),i=M.useRef(null);return M.useEffect(()=>{r("");let a=0;return i.current&&clearInterval(i.current),i.current=setInterval(()=>{r(s=>a<n.length?s+n.charAt(a++):(i.current&&clearInterval(i.current),s))},e),()=>{i.current&&clearInterval(i.current)}},[n,e]),h.jsx("span",{children:t})}const SK=M.createContext({});function lwe(n){const e=M.useRef(null);return e.current===null&&(e.current=n()),e.current}const GL=M.createContext(null),EK=M.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function uwe(n=!0){const e=M.useContext(GL);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,a=M.useId();M.useEffect(()=>{n&&i(a)},[n]);const s=M.useCallback(()=>n&&r&&r(a),[a,r,n]);return!t&&r?[!1,s]:[!0]}const WL=typeof window<"u",cwe=WL?M.useLayoutEffect:M.useEffect,$o=n=>n;let AK=$o;function qL(n){let e;return()=>(e===void 0&&(e=n()),e)}const Dv=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},gd=n=>n*1e3,vd=n=>n/1e3,dwe={useManualTiming:!1};function hwe(n){let e=new Set,t=new Set,r=!1,i=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function o(u){a.has(u)&&(l.schedule(u),n()),u(s)}const l={schedule:(u,c=!1,d=!1)=>{const m=d&&r?e:t;return c&&a.add(u),m.has(u)||m.add(u),u},cancel:u=>{t.delete(u),a.delete(u)},process:u=>{if(s=u,r){i=!0;return}r=!0,[e,t]=[t,e],e.forEach(o),e.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const Pb=["read","resolveKeyframes","update","preRender","render","postRender"],fwe=40;function TK(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,s=Pb.reduce((x,S)=>(x[S]=hwe(a),x),{}),{read:o,resolveKeyframes:l,update:u,preRender:c,render:d,postRender:f}=s,m=()=>{const x=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(x-i.timestamp,fwe),1),i.timestamp=x,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),d.process(i),f.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(m))},v=()=>{t=!0,r=!0,i.isProcessing||n(m)};return{schedule:Pb.reduce((x,S)=>{const E=s[S];return x[S]=(T,D=!1,F=!1)=>(t||v(),E.schedule(T,D,F)),x},{}),cancel:x=>{for(let S=0;S<Pb.length;S++)s[Pb[S]].cancel(x)},state:i,steps:s}}const{schedule:ii,cancel:Pf,state:Ba,steps:yM}=TK(typeof requestAnimationFrame<"u"?requestAnimationFrame:$o,!0),kK=M.createContext({strict:!1}),P5={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Lv={};for(const n in P5)Lv[n]={isEnabled:e=>P5[n].some(t=>!!e[t])};function pwe(n){for(const e in n)Lv[e]={...Lv[e],...n[e]}}const mwe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bE(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||mwe.has(n)}let CK=n=>!bE(n);function gwe(n){n&&(CK=e=>e.startsWith("on")?!bE(e):n(e))}try{gwe(require("@emotion/is-prop-valid").default)}catch{}function vwe(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(CK(i)||t===!0&&bE(i)||!e&&!bE(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function ywe(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,i)=>i==="create"?n:(e.has(i)||e.set(i,n(i)),e.get(i))})}const zT=M.createContext({});function J1(n){return typeof n=="string"||Array.isArray(n)}function HT(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const $L=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],XL=["initial",...$L];function GT(n){return HT(n.animate)||XL.some(e=>J1(n[e]))}function MK(n){return!!(GT(n)||n.variants)}function xwe(n,e){if(GT(n)){const{initial:t,animate:r}=n;return{initial:t===!1||J1(t)?t:void 0,animate:J1(r)?r:void 0}}return n.inherit!==!1?e:{}}function _we(n){const{initial:e,animate:t}=xwe(n,M.useContext(zT));return M.useMemo(()=>({initial:e,animate:t}),[N5(e),N5(t)])}function N5(n){return Array.isArray(n)?n.join(" "):n}const wwe=Symbol.for("motionComponentSymbol");function w0(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function bwe(n,e,t){return M.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):w0(t)&&(t.current=r))},[e])}const KL=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Swe="framerAppearId",IK="data-"+KL(Swe),{schedule:YL}=TK(queueMicrotask,!1),PK=M.createContext({});function Ewe(n,e,t,r,i){var a,s;const{visualElement:o}=M.useContext(zT),l=M.useContext(kK),u=M.useContext(GL),c=M.useContext(EK).reducedMotion,d=M.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const f=d.current,m=M.useContext(PK);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&Awe(d.current,t,i,m);const v=M.useRef(!1);M.useInsertionEffect(()=>{f&&v.current&&f.update(t,u)});const _=t[IK],w=M.useRef(!!_&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,_))&&((s=window.MotionHasOptimisedAnimation)===null||s===void 0?void 0:s.call(window,_)));return cwe(()=>{f&&(v.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),YL.render(f.render),w.current&&f.animationState&&f.animationState.animateChanges())}),M.useEffect(()=>{f&&(!w.current&&f.animationState&&f.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)===null||x===void 0||x.call(window,_)}),w.current=!1))}),f}function Awe(n,e,t,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:u}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:NK(n.parent)),n.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&w0(o),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function NK(n){if(n)return n.options.allowProjection!==!1?n.projection:NK(n.parent)}function Twe({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){var a,s;n&&pwe(n);function o(u,c){let d;const f={...M.useContext(EK),...u,layoutId:kwe(u)},{isStatic:m}=f,v=_we(u),_=r(u,m);if(!m&&WL){Cwe();const w=Mwe(f);d=w.MeasureLayout,v.visualElement=Ewe(i,_,f,e,w.ProjectionNode)}return h.jsxs(zT.Provider,{value:v,children:[d&&v.visualElement?h.jsx(d,{visualElement:v.visualElement,...f}):null,t(i,u,bwe(_,v.visualElement,c),_,m,v.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(s=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&s!==void 0?s:""})`}`;const l=M.forwardRef(o);return l[wwe]=i,l}function kwe({layoutId:n}){const e=M.useContext(SK).id;return e&&n!==void 0?e+"-"+n:n}function Cwe(n,e){M.useContext(kK).strict}function Mwe(n){const{drag:e,layout:t}=Lv;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Iwe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ZL(n){return typeof n!="string"||n.includes("-")?!1:!!(Iwe.indexOf(n)>-1||/[A-Z]/u.test(n))}function R5(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function QL(n,e,t,r){if(typeof e=="function"){const[i,a]=R5(r);e=e(t!==void 0?t:n.custom,i,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,a]=R5(r);e=e(t!==void 0?t:n.custom,i,a)}return e}const WN=n=>Array.isArray(n),Pwe=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),Nwe=n=>WN(n)?n[n.length-1]||0:n,ws=n=>!!(n&&n.getVelocity);function oS(n){const e=ws(n)?n.get():n;return Pwe(e)?e.toValue():e}function Rwe({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,i,a){const s={latestValues:Dwe(r,i,a,n),renderState:e()};return t&&(s.onMount=o=>t({props:r,current:o,...s}),s.onUpdate=o=>t(o)),s}const RK=n=>(e,t)=>{const r=M.useContext(zT),i=M.useContext(GL),a=()=>Rwe(n,e,r,i);return t?a():lwe(a)};function Dwe(n,e,t,r){const i={},a=r(n,{});for(const f in a)i[f]=oS(a[f]);let{initial:s,animate:o}=n;const l=GT(n),u=MK(n);e&&u&&!l&&n.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let c=t?t.initial===!1:!1;c=c||s===!1;const d=c?o:s;if(d&&typeof d!="boolean"&&!HT(d)){const f=Array.isArray(d)?d:[d];for(let m=0;m<f.length;m++){const v=QL(n,f[m]);if(v){const{transitionEnd:_,transition:w,...x}=v;for(const S in x){let E=x[S];if(Array.isArray(E)){const T=c?E.length-1:0;E=E[T]}E!==null&&(i[S]=E)}for(const S in _)i[S]=_[S]}}}return i}const ly=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],rg=new Set(ly),DK=n=>e=>typeof e=="string"&&e.startsWith(n),LK=DK("--"),Lwe=DK("var(--"),JL=n=>Lwe(n)?Owe.test(n.split("/*")[0].trim()):!1,Owe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,OK=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Nd=(n,e,t)=>t>e?e:t<n?n:t,uy={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},e_={...uy,transform:n=>Nd(0,1,n)},Nb={...uy,default:1},Z_=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ph=Z_("deg"),hc=Z_("%"),hn=Z_("px"),Fwe=Z_("vh"),jwe=Z_("vw"),D5={...hc,parse:n=>hc.parse(n)/100,transform:n=>hc.transform(n*100)},Bwe={borderWidth:hn,borderTopWidth:hn,borderRightWidth:hn,borderBottomWidth:hn,borderLeftWidth:hn,borderRadius:hn,radius:hn,borderTopLeftRadius:hn,borderTopRightRadius:hn,borderBottomRightRadius:hn,borderBottomLeftRadius:hn,width:hn,maxWidth:hn,height:hn,maxHeight:hn,top:hn,right:hn,bottom:hn,left:hn,padding:hn,paddingTop:hn,paddingRight:hn,paddingBottom:hn,paddingLeft:hn,margin:hn,marginTop:hn,marginRight:hn,marginBottom:hn,marginLeft:hn,backgroundPositionX:hn,backgroundPositionY:hn},Uwe={rotate:Ph,rotateX:Ph,rotateY:Ph,rotateZ:Ph,scale:Nb,scaleX:Nb,scaleY:Nb,scaleZ:Nb,skew:Ph,skewX:Ph,skewY:Ph,distance:hn,translateX:hn,translateY:hn,translateZ:hn,x:hn,y:hn,z:hn,perspective:hn,transformPerspective:hn,opacity:e_,originX:D5,originY:D5,originZ:hn},L5={...uy,transform:Math.round},eO={...Bwe,...Uwe,zIndex:L5,size:hn,fillOpacity:e_,strokeOpacity:e_,numOctaves:L5},Vwe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zwe=ly.length;function Hwe(n,e,t){let r="",i=!0;for(let a=0;a<zwe;a++){const s=ly[a],o=n[s];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(s.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||t){const u=OK(o,eO[s]);if(!l){i=!1;const c=Vwe[s]||s;r+=`${c}(${u}) `}t&&(e[s]=u)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function tO(n,e,t){const{style:r,vars:i,transformOrigin:a}=n;let s=!1,o=!1;for(const l in e){const u=e[l];if(rg.has(l)){s=!0;continue}else if(LK(l)){i[l]=u;continue}else{const c=OK(u,eO[l]);l.startsWith("origin")?(o=!0,a[l]=c):r[l]=c}}if(e.transform||(s||t?r.transform=Hwe(e,n.transform,t):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=a;r.transformOrigin=`${l} ${u} ${c}`}}const Gwe={offset:"stroke-dashoffset",array:"stroke-dasharray"},Wwe={offset:"strokeDashoffset",array:"strokeDasharray"};function qwe(n,e,t=1,r=0,i=!0){n.pathLength=1;const a=i?Gwe:Wwe;n[a.offset]=hn.transform(-r);const s=hn.transform(e),o=hn.transform(t);n[a.array]=`${s} ${o}`}function O5(n,e,t){return typeof n=="string"?n:hn.transform(e+t*n)}function $we(n,e,t){const r=O5(e,n.x,n.width),i=O5(t,n.y,n.height);return`${r} ${i}`}function nO(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:a,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...u},c,d){if(tO(n,u,d),c){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:f,style:m,dimensions:v}=n;f.transform&&(v&&(m.transform=f.transform),delete f.transform),v&&(i!==void 0||a!==void 0||m.transform)&&(m.transformOrigin=$we(v,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(f.x=e),t!==void 0&&(f.y=t),r!==void 0&&(f.scale=r),s!==void 0&&qwe(f,s,o,l,!1)}const rO=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),FK=()=>({...rO(),attrs:{}}),iO=n=>typeof n=="string"&&n.toLowerCase()==="svg";function jK(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const a in t)n.style.setProperty(a,t[a])}const BK=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function UK(n,e,t,r){jK(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(BK.has(i)?i:KL(i),e.attrs[i])}const SE={};function Xwe(n){Object.assign(SE,n)}function VK(n,{layout:e,layoutId:t}){return rg.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!SE[n]||n==="opacity")}function aO(n,e,t){var r;const{style:i}=n,a={};for(const s in i)(ws(i[s])||e.style&&ws(e.style[s])||VK(s,n)||((r=t==null?void 0:t.getValue(s))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[s]=i[s]);return a}function zK(n,e,t){const r=aO(n,e,t);for(const i in n)if(ws(n[i])||ws(e[i])){const a=ly.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=n[i]}return r}function Kwe(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const F5=["x","y","width","height","cx","cy","r"],Ywe={useVisualState:RK({scrapeMotionValuesFromProps:zK,createRenderState:FK,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:i})=>{if(!t)return;let a=!!n.drag;if(!a){for(const o in i)if(rg.has(o)){a=!0;break}}if(!a)return;let s=!e;if(e)for(let o=0;o<F5.length;o++){const l=F5[o];n[l]!==e[l]&&(s=!0)}s&&ii.read(()=>{Kwe(t,r),ii.render(()=>{nO(r,i,iO(t.tagName),n.transformTemplate),UK(t,r)})})}})},Zwe={useVisualState:RK({scrapeMotionValuesFromProps:aO,createRenderState:rO})};function HK(n,e,t){for(const r in e)!ws(e[r])&&!VK(r,t)&&(n[r]=e[r])}function Qwe({transformTemplate:n},e){return M.useMemo(()=>{const t=rO();return tO(t,e,n),Object.assign({},t.vars,t.style)},[e])}function Jwe(n,e){const t=n.style||{},r={};return HK(r,t,n),Object.assign(r,Qwe(n,e)),r}function ebe(n,e){const t={},r=Jwe(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}function tbe(n,e,t,r){const i=M.useMemo(()=>{const a=FK();return nO(a,e,iO(r),n.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};HK(a,n.style,n),i.style={...a,...i.style}}return i}function nbe(n=!1){return(t,r,i,{latestValues:a},s)=>{const l=(ZL(t)?tbe:ebe)(r,a,s,t),u=vwe(r,typeof t=="string",n),c=t!==M.Fragment?{...u,...l,ref:i}:{},{children:d}=r,f=M.useMemo(()=>ws(d)?d.get():d,[d]);return M.createElement(t,{...c,children:f})}}function rbe(n,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...ZL(r)?Ywe:Zwe,preloadedFeatures:n,useRender:nbe(i),createVisualElement:e,Component:r};return Twe(s)}}function GK(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function WT(n,e,t){const r=n.getProps();return QL(r,e,t!==void 0?t:r.custom,n)}const ibe=qL(()=>window.ScrollTimeline!==void 0);class abe{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(i=>{if(ibe()&&i.attachTimeline)return i.attachTimeline(e);if(typeof t=="function")return t(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class sbe extends abe{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function sO(n,e){return n?n[e]||n.default||n:void 0}const qN=2e4;function WK(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<qN;)e+=t,r=n.next(e);return e>=qN?1/0:e}function oO(n){return typeof n=="function"}function j5(n,e){n.timeline=e,n.onfinish=null}const lO=n=>Array.isArray(n)&&typeof n[0]=="number",obe={linearEasing:void 0};function lbe(n,e){const t=qL(n);return()=>{var r;return(r=obe[e])!==null&&r!==void 0?r:t()}}const EE=lbe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),qK=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let a=0;a<i;a++)r+=n(Dv(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function $K(n){return!!(typeof n=="function"&&EE()||!n||typeof n=="string"&&(n in $N||EE())||lO(n)||Array.isArray(n)&&n.every($K))}const Ax=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,$N={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ax([0,.65,.55,1]),circOut:Ax([.55,0,1,.45]),backIn:Ax([.31,.01,.66,-.59]),backOut:Ax([.33,1.53,.69,.99])};function XK(n,e){if(n)return typeof n=="function"&&EE()?qK(n,e):lO(n)?Ax(n):Array.isArray(n)?n.map(t=>XK(t,e)||$N.easeOut):$N[n]}const Xl={x:!1,y:!1};function KK(){return Xl.x||Xl.y}function YK(n,e,t){var r;if(n instanceof Element)return[n];if(typeof n=="string"){let i=document;const a=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(n);return a?Array.from(a):[]}return Array.from(n)}function ZK(n,e){const t=YK(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function B5(n){return e=>{e.pointerType==="touch"||KK()||n(e)}}function ube(n,e,t={}){const[r,i,a]=ZK(n,t),s=B5(o=>{const{target:l}=o,u=e(o);if(typeof u!="function"||!l)return;const c=B5(d=>{u(d),l.removeEventListener("pointerleave",c)});l.addEventListener("pointerleave",c,i)});return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const QK=(n,e)=>e?n===e?!0:QK(n,e.parentElement):!1,uO=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,cbe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function dbe(n){return cbe.has(n.tagName)||n.tabIndex!==-1}const Tx=new WeakSet;function U5(n){return e=>{e.key==="Enter"&&n(e)}}function xM(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const hbe=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=U5(()=>{if(Tx.has(t))return;xM(t,"down");const i=U5(()=>{xM(t,"up")}),a=()=>xM(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function V5(n){return uO(n)&&!KK()}function fbe(n,e,t={}){const[r,i,a]=ZK(n,t),s=o=>{const l=o.currentTarget;if(!V5(o)||Tx.has(l))return;Tx.add(l);const u=e(o),c=(m,v)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!V5(m)||!Tx.has(l))&&(Tx.delete(l),typeof u=="function"&&u(m,{success:v}))},d=m=>{c(m,t.useGlobalTarget||QK(l,m.target))},f=m=>{c(m,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",f,i)};return r.forEach(o=>{!dbe(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(t.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),o.addEventListener("focus",u=>hbe(u,i),i)}),a}function pbe(n){return n==="x"||n==="y"?Xl[n]?null:(Xl[n]=!0,()=>{Xl[n]=!1}):Xl.x||Xl.y?null:(Xl.x=Xl.y=!0,()=>{Xl.x=Xl.y=!1})}const JK=new Set(["width","height","top","left","right","bottom",...ly]);let lS;function mbe(){lS=void 0}const fc={now:()=>(lS===void 0&&fc.set(Ba.isProcessing||dwe.useManualTiming?Ba.timestamp:performance.now()),lS),set:n=>{lS=n,queueMicrotask(mbe)}};function cO(n,e){n.indexOf(e)===-1&&n.push(e)}function dO(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class hO{constructor(){this.subscriptions=[]}add(e){return cO(this.subscriptions,e),()=>dO(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function eY(n,e){return e?n*(1e3/e):0}const z5=30,gbe=n=>!isNaN(parseFloat(n));class vbe{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=fc.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=fc.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=gbe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new hO);const r=this.events[e].add(t);return e==="change"?()=>{r(),ii.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=fc.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>z5)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,z5);return eY(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function t_(n,e){return new vbe(n,e)}function ybe(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,t_(t))}function xbe(n,e){const t=WT(n,e);let{transitionEnd:r={},transition:i={},...a}=t||{};a={...a,...r};for(const s in a){const o=Nwe(a[s]);ybe(n,s,o)}}function _be(n){return!!(ws(n)&&n.add)}function XN(n,e){const t=n.getValue("willChange");if(_be(t))return t.add(e)}function tY(n){return n.props[IK]}const nY=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,wbe=1e-7,bbe=12;function Sbe(n,e,t,r,i){let a,s,o=0;do s=e+(t-e)/2,a=nY(s,r,i)-n,a>0?t=s:e=s;while(Math.abs(a)>wbe&&++o<bbe);return s}function Q_(n,e,t,r){if(n===e&&t===r)return $o;const i=a=>Sbe(a,0,1,n,t);return a=>a===0||a===1?a:nY(i(a),e,r)}const rY=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,iY=n=>e=>1-n(1-e),aY=Q_(.33,1.53,.69,.99),fO=iY(aY),sY=rY(fO),oY=n=>(n*=2)<1?.5*fO(n):.5*(2-Math.pow(2,-10*(n-1))),pO=n=>1-Math.sin(Math.acos(n)),lY=iY(pO),uY=rY(pO),cY=n=>/^0[^.\s]+$/u.test(n);function Ebe(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||cY(n):!0}const t1=n=>Math.round(n*1e5)/1e5,mO=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Abe(n){return n==null}const Tbe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,gO=(n,e)=>t=>!!(typeof t=="string"&&Tbe.test(t)&&t.startsWith(n)||e&&!Abe(t)&&Object.prototype.hasOwnProperty.call(t,e)),dY=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(mO);return{[n]:parseFloat(i),[e]:parseFloat(a),[t]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},kbe=n=>Nd(0,255,n),_M={...uy,transform:n=>Math.round(kbe(n))},Xp={test:gO("rgb","red"),parse:dY("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+_M.transform(n)+", "+_M.transform(e)+", "+_M.transform(t)+", "+t1(e_.transform(r))+")"};function Cbe(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const KN={test:gO("#"),parse:Cbe,transform:Xp.transform},b0={test:gO("hsl","hue"),parse:dY("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+hc.transform(t1(e))+", "+hc.transform(t1(t))+", "+t1(e_.transform(r))+")"},ps={test:n=>Xp.test(n)||KN.test(n)||b0.test(n),parse:n=>Xp.test(n)?Xp.parse(n):b0.test(n)?b0.parse(n):KN.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Xp.transform(n):b0.transform(n)},Mbe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Ibe(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(mO))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(Mbe))===null||t===void 0?void 0:t.length)||0)>0}const hY="number",fY="color",Pbe="var",Nbe="var(",H5="${}",Rbe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function n_(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(Rbe,l=>(ps.test(l)?(r.color.push(a),i.push(fY),t.push(ps.parse(l))):l.startsWith(Nbe)?(r.var.push(a),i.push(Pbe),t.push(l)):(r.number.push(a),i.push(hY),t.push(parseFloat(l))),++a,H5)).split(H5);return{values:t,split:o,indexes:r,types:i}}function pY(n){return n_(n).values}function mY(n){const{split:e,types:t}=n_(n),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=t[s];o===hY?a+=t1(i[s]):o===fY?a+=ps.transform(i[s]):a+=i[s]}return a}}const Dbe=n=>typeof n=="number"?0:n;function Lbe(n){const e=pY(n);return mY(n)(e.map(Dbe))}const Nf={test:Ibe,parse:pY,createTransformer:mY,getAnimatableNone:Lbe},Obe=new Set(["brightness","contrast","saturate","opacity"]);function Fbe(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(mO)||[];if(!r)return n;const i=t.replace(r,"");let a=Obe.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+i+")"}const jbe=/\b([a-z-]*)\(.*?\)/gu,YN={...Nf,getAnimatableNone:n=>{const e=n.match(jbe);return e?e.map(Fbe).join(" "):n}},Bbe={...eO,color:ps,backgroundColor:ps,outlineColor:ps,fill:ps,stroke:ps,borderColor:ps,borderTopColor:ps,borderRightColor:ps,borderBottomColor:ps,borderLeftColor:ps,filter:YN,WebkitFilter:YN},vO=n=>Bbe[n];function gY(n,e){let t=vO(n);return t!==YN&&(t=Nf),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Ube=new Set(["auto","none","0"]);function Vbe(n,e,t){let r=0,i;for(;r<n.length&&!i;){const a=n[r];typeof a=="string"&&!Ube.has(a)&&n_(a).values.length&&(i=n[r]),r++}if(i&&t)for(const a of e)n[a]=gY(t,i)}const G5=n=>n===uy||n===hn,W5=(n,e)=>parseFloat(n.split(", ")[e]),q5=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return W5(i[1],e);{const a=r.match(/^matrix\((.+)\)$/u);return a?W5(a[1],n):0}},zbe=new Set(["x","y","z"]),Hbe=ly.filter(n=>!zbe.has(n));function Gbe(n){const e=[];return Hbe.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Ov={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:q5(4,13),y:q5(5,14)};Ov.translateX=Ov.x;Ov.translateY=Ov.y;const fm=new Set;let ZN=!1,QN=!1;function vY(){if(QN){const n=Array.from(fm).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=Gbe(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([a,s])=>{var o;(o=r.getValue(a))===null||o===void 0||o.set(s)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}QN=!1,ZN=!1,fm.forEach(n=>n.complete()),fm.clear()}function yY(){fm.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(QN=!0)})}function Wbe(){yY(),vY()}class yO{constructor(e,t,r,i,a,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(fm.add(this),ZN||(ZN=!0,ii.read(yY),ii.resolveKeyframes(vY))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&t){const l=r.readValue(t,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),fm.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,fm.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const xY=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),qbe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $be(n){const e=qbe.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function _Y(n,e,t=1){const[r,i]=$be(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return xY(s)?parseFloat(s):s}return JL(i)?_Y(i,e,t+1):i}const wY=n=>e=>e.test(n),Xbe={test:n=>n==="auto",parse:n=>n},bY=[uy,hn,hc,Ph,jwe,Fwe,Xbe],$5=n=>bY.find(wY(n));class SY extends yO{constructor(e,t,r,i,a){super(e,t,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),JL(u))){const c=_Y(u,t.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!JK.has(r)||e.length!==2)return;const[i,a]=e,s=$5(i),o=$5(a);if(s!==o)if(G5(s)&&G5(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)Ebe(e[i])&&r.push(i);r.length&&Vbe(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ov[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const a=t.getValue(r);a&&a.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=Ov[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const X5=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Nf.test(n)||n==="0")&&!n.startsWith("url("));function Kbe(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function Ybe(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],s=X5(i,e),o=X5(a,e);return!s||!o?!1:Kbe(n)||(t==="spring"||oO(t))&&r}const Zbe=n=>n!==null;function qT(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(Zbe),a=e&&t!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const Qbe=40;class EY{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=fc.now(),this.options={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:a,repeatType:s,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Qbe?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Wbe(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=fc.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:s,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!Ybe(e,r,i,a))if(s)this.options.duration=0;else{l&&l(qT(e,this.options,t)),o&&o(),this.resolveFinishedPromise();return}const c=this.initPlayback(e,t);c!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...c},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const vi=(n,e,t)=>n+(e-n)*t;function wM(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Jbe({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,a=0,s=0;if(!e)i=a=s=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;i=wM(l,o,n+1/3),a=wM(l,o,n),s=wM(l,o,n-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function AE(n,e){return t=>t>0?e:n}const bM=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},e2e=[KN,Xp,b0],t2e=n=>e2e.find(e=>e.test(n));function K5(n){const e=t2e(n);if(!e)return!1;let t=e.parse(n);return e===b0&&(t=Jbe(t)),t}const Y5=(n,e)=>{const t=K5(n),r=K5(e);if(!t||!r)return AE(n,e);const i={...t};return a=>(i.red=bM(t.red,r.red,a),i.green=bM(t.green,r.green,a),i.blue=bM(t.blue,r.blue,a),i.alpha=vi(t.alpha,r.alpha,a),Xp.transform(i))},n2e=(n,e)=>t=>e(n(t)),J_=(...n)=>n.reduce(n2e),JN=new Set(["none","hidden"]);function r2e(n,e){return JN.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function i2e(n,e){return t=>vi(n,e,t)}function xO(n){return typeof n=="number"?i2e:typeof n=="string"?JL(n)?AE:ps.test(n)?Y5:o2e:Array.isArray(n)?AY:typeof n=="object"?ps.test(n)?Y5:a2e:AE}function AY(n,e){const t=[...n],r=t.length,i=n.map((a,s)=>xO(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)t[s]=i[s](a);return t}}function a2e(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=xO(n[i])(n[i],e[i]));return i=>{for(const a in r)t[a]=r[a](i);return t}}function s2e(n,e){var t;const r=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const s=e.types[a],o=n.indexes[s][i[s]],l=(t=n.values[o])!==null&&t!==void 0?t:0;r[a]=l,i[s]++}return r}const o2e=(n,e)=>{const t=Nf.createTransformer(e),r=n_(n),i=n_(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?JN.has(n)&&!i.values.length||JN.has(e)&&!r.values.length?r2e(n,e):J_(AY(s2e(r,i),i.values),t):AE(n,e)};function TY(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?vi(n,e,t):xO(n)(n,e)}const l2e=5;function kY(n,e,t){const r=Math.max(e-l2e,0);return eY(t-n(r),e-r)}const Mi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},SM=.001;function u2e({duration:n=Mi.duration,bounce:e=Mi.bounce,velocity:t=Mi.velocity,mass:r=Mi.mass}){let i,a,s=1-e;s=Nd(Mi.minDamping,Mi.maxDamping,s),n=Nd(Mi.minDuration,Mi.maxDuration,vd(n)),s<1?(i=u=>{const c=u*s,d=c*n,f=c-t,m=eR(u,s),v=Math.exp(-d);return SM-f/m*v},a=u=>{const d=u*s*n,f=d*t+t,m=Math.pow(s,2)*Math.pow(u,2)*n,v=Math.exp(-d),_=eR(Math.pow(u,2),s);return(-i(u)+SM>0?-1:1)*((f-m)*v)/_}):(i=u=>{const c=Math.exp(-u*n),d=(u-t)*n+1;return-SM+c*d},a=u=>{const c=Math.exp(-u*n),d=(t-u)*(n*n);return c*d});const o=5/n,l=d2e(i,a,o);if(n=gd(n),isNaN(l))return{stiffness:Mi.stiffness,damping:Mi.damping,duration:n};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:n}}}const c2e=12;function d2e(n,e,t){let r=t;for(let i=1;i<c2e;i++)r=r-n(r)/e(r);return r}function eR(n,e){return n*Math.sqrt(1-e*e)}const h2e=["duration","bounce"],f2e=["stiffness","damping","mass"];function Z5(n,e){return e.some(t=>n[t]!==void 0)}function p2e(n){let e={velocity:Mi.velocity,stiffness:Mi.stiffness,damping:Mi.damping,mass:Mi.mass,isResolvedFromDuration:!1,...n};if(!Z5(n,f2e)&&Z5(n,h2e))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,a=2*Nd(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Mi.mass,stiffness:i,damping:a}}else{const t=u2e(n);e={...e,...t,mass:Mi.mass},e.isResolvedFromDuration=!0}return e}function CY(n=Mi.visualDuration,e=Mi.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const a=t.keyframes[0],s=t.keyframes[t.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:c,duration:d,velocity:f,isResolvedFromDuration:m}=p2e({...t,velocity:-vd(t.velocity||0)}),v=f||0,_=u/(2*Math.sqrt(l*c)),w=s-a,x=vd(Math.sqrt(l/c)),S=Math.abs(w)<5;r||(r=S?Mi.restSpeed.granular:Mi.restSpeed.default),i||(i=S?Mi.restDelta.granular:Mi.restDelta.default);let E;if(_<1){const D=eR(x,_);E=F=>{const P=Math.exp(-_*x*F);return s-P*((v+_*x*w)/D*Math.sin(D*F)+w*Math.cos(D*F))}}else if(_===1)E=D=>s-Math.exp(-x*D)*(w+(v+x*w)*D);else{const D=x*Math.sqrt(_*_-1);E=F=>{const P=Math.exp(-_*x*F),N=Math.min(D*F,300);return s-P*((v+_*x*w)*Math.sinh(N)+D*w*Math.cosh(N))/D}}const T={calculatedDuration:m&&d||null,next:D=>{const F=E(D);if(m)o.done=D>=d;else{let P=0;_<1&&(P=D===0?gd(v):kY(E,D,F));const N=Math.abs(P)<=r,I=Math.abs(s-F)<=i;o.done=N&&I}return o.value=o.done?s:F,o},toString:()=>{const D=Math.min(WK(T),qN),F=qK(P=>T.next(D*P).value,D,30);return D+"ms "+F}};return T}function Q5({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:u=.5,restSpeed:c}){const d=n[0],f={done:!1,value:d},m=N=>o!==void 0&&N<o||l!==void 0&&N>l,v=N=>o===void 0?l:l===void 0||Math.abs(o-N)<Math.abs(l-N)?o:l;let _=t*e;const w=d+_,x=s===void 0?w:s(w);x!==w&&(_=x-d);const S=N=>-_*Math.exp(-N/r),E=N=>x+S(N),T=N=>{const I=S(N),R=E(N);f.done=Math.abs(I)<=u,f.value=f.done?x:R};let D,F;const P=N=>{m(f.value)&&(D=N,F=CY({keyframes:[f.value,v(f.value)],velocity:kY(E,N,f.value),damping:i,stiffness:a,restDelta:u,restSpeed:c}))};return P(0),{calculatedDuration:null,next:N=>{let I=!1;return!F&&D===void 0&&(I=!0,T(N),P(N)),D!==void 0&&N>=D?F.next(N-D):(!I&&T(N),f)}}}const m2e=Q_(.42,0,1,1),g2e=Q_(0,0,.58,1),MY=Q_(.42,0,.58,1),v2e=n=>Array.isArray(n)&&typeof n[0]!="number",y2e={linear:$o,easeIn:m2e,easeInOut:MY,easeOut:g2e,circIn:pO,circInOut:uY,circOut:lY,backIn:fO,backInOut:sY,backOut:aY,anticipate:oY},J5=n=>{if(lO(n)){AK(n.length===4);const[e,t,r,i]=n;return Q_(e,t,r,i)}else if(typeof n=="string")return y2e[n];return n};function x2e(n,e,t){const r=[],i=t||TY,a=n.length-1;for(let s=0;s<a;s++){let o=i(n[s],n[s+1]);if(e){const l=Array.isArray(e)?e[s]||$o:e;o=J_(l,o)}r.push(o)}return r}function _2e(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const a=n.length;if(AK(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=x2e(e,r,i),l=o.length,u=c=>{if(s&&c<n[0])return e[0];let d=0;if(l>1)for(;d<n.length-2&&!(c<n[d+1]);d++);const f=Dv(n[d],n[d+1],c);return o[d](f)};return t?c=>u(Nd(n[0],n[a-1],c)):u}function w2e(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Dv(0,e,r);n.push(vi(t,1,i))}}function b2e(n){const e=[0];return w2e(e,n.length-1),e}function S2e(n,e){return n.map(t=>t*e)}function E2e(n,e){return n.map(()=>e||MY).splice(0,n.length-1)}function TE({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=v2e(r)?r.map(J5):J5(r),a={done:!1,value:e[0]},s=S2e(t&&t.length===e.length?t:b2e(e),n),o=_2e(s,e,{ease:Array.isArray(i)?i:E2e(e,i)});return{calculatedDuration:n,next:l=>(a.value=o(l),a.done=l>=n,a)}}const A2e=n=>{const e=({timestamp:t})=>n(t);return{start:()=>ii.update(e,!0),stop:()=>Pf(e),now:()=>Ba.isProcessing?Ba.timestamp:fc.now()}},T2e={decay:Q5,inertia:Q5,tween:TE,keyframes:TE,spring:CY},k2e=n=>n/100;class _O extends EY{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:r,element:i,keyframes:a}=this.options,s=(i==null?void 0:i.KeyframeResolver)||yO,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new s(a,o,t,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=this.options,o=oO(t)?t:T2e[t]||TE;let l,u;o!==TE&&typeof e[0]!="number"&&(l=J_(k2e,TY(e[0],e[1])),e=[0,100]);const c=o({...this.options,keyframes:e});a==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-s})),c.calculatedDuration===null&&(c.calculatedDuration=WK(c));const{calculatedDuration:d}=c,f=d+i,m=f*(r+1)-i;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:N}=this.options;return{done:!0,value:N[N.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:s,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:d}=r;if(this.startTime===null)return a.next(0);const{delay:f,repeat:m,repeatType:v,repeatDelay:_,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const x=this.currentTime-f*(this.speed>=0?1:-1),S=this.speed>=0?x<0:x>c;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let E=this.currentTime,T=a;if(m){const N=Math.min(this.currentTime,c)/d;let I=Math.floor(N),R=N%1;!R&&N>=1&&(R=1),R===1&&I--,I=Math.min(I,m+1),!!(I%2)&&(v==="reverse"?(R=1-R,_&&(R-=_/d)):v==="mirror"&&(T=s)),E=Nd(0,1,R)*d}const D=S?{done:!1,value:l[0]}:T.next(E);o&&(D.value=o(D.value));let{done:F}=D;!S&&u!==null&&(F=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return P&&i!==void 0&&(D.value=qT(l,this.options,i)),w&&w(D.value),P&&this.finish(),D}get duration(){const{resolved:e}=this;return e?vd(e.calculatedDuration):0}get time(){return vd(this.currentTime)}set time(e){e=gd(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=vd(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=A2e,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const C2e=new Set(["opacity","clipPath","filter","transform"]);function M2e(n,e,t,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeInOut",times:l}={}){const u={[e]:t};l&&(u.offset=l);const c=XK(o,i);return Array.isArray(c)&&(u.easing=c),n.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"})}const I2e=qL(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),kE=10,P2e=2e4;function N2e(n){return oO(n.type)||n.type==="spring"||!$K(n.ease)}function R2e(n,e){const t=new _O({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const i=[];let a=0;for(;!r.done&&a<P2e;)r=t.sample(a),i.push(r.value),a+=kE;return{times:void 0,keyframes:i,duration:a-kE,ease:"linear"}}const IY={anticipate:oY,backInOut:sY,circInOut:uY};function D2e(n){return n in IY}class eB extends EY{constructor(e){super(e);const{name:t,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new SY(a,(s,o)=>this.onKeyframesResolved(s,o),t,r,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:i,ease:a,type:s,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof a=="string"&&EE()&&D2e(a)&&(a=IY[a]),N2e(this.options)){const{onComplete:d,onUpdate:f,motionValue:m,element:v,..._}=this.options,w=R2e(e,_);e=w.keyframes,e.length===1&&(e[1]=e[0]),r=w.duration,i=w.times,a=w.ease,s="keyframes"}const c=M2e(o.owner.current,l,e,{...this.options,duration:r,times:i,ease:a});return c.startTime=u??this.calcStartTime(),this.pendingTimeline?(j5(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:d}=this.options;o.set(qT(e,this.options,t)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:i,type:s,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return vd(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return vd(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=gd(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return $o;const{animation:r}=t;j5(r,e)}return $o}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:i,type:a,ease:s,times:o}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:d,element:f,...m}=this.options,v=new _O({...m,keyframes:r,duration:i,type:a,ease:s,times:o,isGenerator:!0}),_=gd(this.time);u.setWithVelocity(v.sample(_-kE).value,v.sample(_).value,kE)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:i,repeatType:a,damping:s,type:o}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return I2e()&&r&&C2e.has(r)&&!l&&!u&&!i&&a!=="mirror"&&s!==0&&o!=="inertia"}}const L2e={type:"spring",stiffness:500,damping:25,restSpeed:10},O2e=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),F2e={type:"keyframes",duration:.8},j2e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},B2e=(n,{keyframes:e})=>e.length>2?F2e:rg.has(n)?n.startsWith("scale")?O2e(e[1]):L2e:j2e;function U2e({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const wO=(n,e,t,r={},i,a)=>s=>{const o=sO(r,n)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-gd(l);let c={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:f=>{e.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:n,motionValue:e,element:a?void 0:i};U2e(o)||(c={...c,...B2e(n,c)}),c.duration&&(c.duration=gd(c.duration)),c.repeatDelay&&(c.repeatDelay=gd(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(d=!0)),d&&!a&&e.get()!==void 0){const f=qT(c.keyframes,o);if(f!==void 0)return ii.update(()=>{c.onUpdate(f),c.onComplete()}),new sbe([])}return!a&&eB.supports(c)?new eB(c):new _O(c)};function V2e({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function PY(n,e,{delay:t=0,transitionOverride:r,type:i}={}){var a;let{transition:s=n.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(s=r);const u=[],c=i&&n.animationState&&n.animationState.getState()[i];for(const d in l){const f=n.getValue(d,(a=n.latestValues[d])!==null&&a!==void 0?a:null),m=l[d];if(m===void 0||c&&V2e(c,d))continue;const v={delay:t,...sO(s||{},d)};let _=!1;if(window.MotionHandoffAnimation){const x=tY(n);if(x){const S=window.MotionHandoffAnimation(x,d,ii);S!==null&&(v.startTime=S,_=!0)}}XN(n,d),f.start(wO(d,f,m,n.shouldReduceMotion&&JK.has(d)?{type:!1}:v,n,_));const w=f.animation;w&&u.push(w)}return o&&Promise.all(u).then(()=>{ii.update(()=>{o&&xbe(n,o)})}),u}function tR(n,e,t={}){var r;const i=WT(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(a=t.transitionOverride);const s=i?()=>Promise.all(PY(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=a;return z2e(n,e,c+u,d,f,t)}:()=>Promise.resolve(),{when:l}=a;if(l){const[u,c]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>c())}else return Promise.all([s(),o(t.delay)])}function z2e(n,e,t=0,r=0,i=1,a){const s=[],o=(n.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(n.variantChildren).sort(H2e).forEach((u,c)=>{u.notify("AnimationStart",e),s.push(tR(u,e,{...a,delay:t+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(s)}function H2e(n,e){return n.sortNodePosition(e)}function G2e(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>tR(n,a,t));r=Promise.all(i)}else if(typeof e=="string")r=tR(n,e,t);else{const i=typeof e=="function"?WT(n,e,t.custom):e;r=Promise.all(PY(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const W2e=XL.length;function NY(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?NY(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<W2e;t++){const r=XL[t],i=n.props[r];(J1(i)||i===!1)&&(e[r]=i)}return e}const q2e=[...$L].reverse(),$2e=$L.length;function X2e(n){return e=>Promise.all(e.map(({animation:t,options:r})=>G2e(n,t,r)))}function K2e(n){let e=X2e(n),t=tB(),r=!0;const i=l=>(u,c)=>{var d;const f=WT(n,c,l==="exit"?(d=n.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:m,transitionEnd:v,..._}=f;u={...u,..._,...v}}return u};function a(l){e=l(n)}function s(l){const{props:u}=n,c=NY(n.parent)||{},d=[],f=new Set;let m={},v=1/0;for(let w=0;w<$2e;w++){const x=q2e[w],S=t[x],E=u[x]!==void 0?u[x]:c[x],T=J1(E),D=x===l?S.isActive:null;D===!1&&(v=w);let F=E===c[x]&&E!==u[x]&&T;if(F&&r&&n.manuallyAnimateOnMount&&(F=!1),S.protectedKeys={...m},!S.isActive&&D===null||!E&&!S.prevProp||HT(E)||typeof E=="boolean")continue;const P=Y2e(S.prevProp,E);let N=P||x===l&&S.isActive&&!F&&T||w>v&&T,I=!1;const R=Array.isArray(E)?E:[E];let B=R.reduce(i(x),{});D===!1&&(B={});const{prevResolvedValues:G={}}=S,H={...G,...B},K=oe=>{N=!0,f.has(oe)&&(I=!0,f.delete(oe)),S.needsAnimating[oe]=!0;const $=n.getValue(oe);$&&($.liveStyle=!1)};for(const oe in H){const $=B[oe],ue=G[oe];if(m.hasOwnProperty(oe))continue;let se=!1;WN($)&&WN(ue)?se=!GK($,ue):se=$!==ue,se?$!=null?K(oe):f.add(oe):$!==void 0&&f.has(oe)?K(oe):S.protectedKeys[oe]=!0}S.prevProp=E,S.prevResolvedValues=B,S.isActive&&(m={...m,...B}),r&&n.blockInitialAnimation&&(N=!1),N&&(!(F&&P)||I)&&d.push(...R.map(oe=>({animation:oe,options:{type:x}})))}if(f.size){const w={};f.forEach(x=>{const S=n.getBaseTarget(x),E=n.getValue(x);E&&(E.liveStyle=!0),w[x]=S??null}),d.push({animation:w})}let _=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(d):Promise.resolve()}function o(l,u){var c;if(t[l].isActive===u)return Promise.resolve();(c=n.variantChildren)===null||c===void 0||c.forEach(f=>{var m;return(m=f.animationState)===null||m===void 0?void 0:m.setActive(l,u)}),t[l].isActive=u;const d=s(l);for(const f in t)t[f].protectedKeys={};return d}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>t,reset:()=>{t=tB(),r=!0}}}function Y2e(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!GK(e,n):!1}function dp(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function tB(){return{animate:dp(!0),whileInView:dp(),whileHover:dp(),whileTap:dp(),whileDrag:dp(),whileFocus:dp(),exit:dp()}}class zf{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Z2e extends zf{constructor(e){super(e),e.animationState||(e.animationState=K2e(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();HT(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Q2e=0;class J2e extends zf{constructor(){super(...arguments),this.id=Q2e++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const eSe={animation:{Feature:Z2e},exit:{Feature:J2e}};function r_(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function ew(n){return{point:{x:n.pageX,y:n.pageY}}}const tSe=n=>e=>uO(e)&&n(e,ew(e));function n1(n,e,t,r){return r_(n,e,tSe(t),r)}const nB=(n,e)=>Math.abs(n-e);function nSe(n,e){const t=nB(n.x,e.x),r=nB(n.y,e.y);return Math.sqrt(t**2+r**2)}class RY{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=AM(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=nSe(d.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:v}=d,{timestamp:_}=Ba;this.history.push({...v,timestamp:_});const{onStart:w,onMove:x}=this.handlers;f||(w&&w(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=EM(f,this.transformPagePoint),ii.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=AM(d.type==="pointercancel"?this.lastMoveEventInfo:EM(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,w),v&&v(d,w)},!uO(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const s=ew(e),o=EM(s,this.transformPagePoint),{point:l}=o,{timestamp:u}=Ba;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=t;c&&c(e,AM(o,this.history)),this.removeListeners=J_(n1(this.contextWindow,"pointermove",this.handlePointerMove),n1(this.contextWindow,"pointerup",this.handlePointerUp),n1(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Pf(this.updatePoint)}}function EM(n,e){return e?{point:e(n.point)}:n}function rB(n,e){return{x:n.x-e.x,y:n.y-e.y}}function AM({point:n},e){return{point:n,delta:rB(n,DY(e)),offset:rB(n,rSe(e)),velocity:iSe(e,.1)}}function rSe(n){return n[0]}function DY(n){return n[n.length-1]}function iSe(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=DY(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>gd(e)));)t--;if(!r)return{x:0,y:0};const a=vd(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}const LY=1e-4,aSe=1-LY,sSe=1+LY,OY=.01,oSe=0-OY,lSe=0+OY;function Zo(n){return n.max-n.min}function uSe(n,e,t){return Math.abs(n-e)<=t}function iB(n,e,t,r=.5){n.origin=r,n.originPoint=vi(e.min,e.max,n.origin),n.scale=Zo(t)/Zo(e),n.translate=vi(t.min,t.max,n.origin)-n.originPoint,(n.scale>=aSe&&n.scale<=sSe||isNaN(n.scale))&&(n.scale=1),(n.translate>=oSe&&n.translate<=lSe||isNaN(n.translate))&&(n.translate=0)}function r1(n,e,t,r){iB(n.x,e.x,t.x,r?r.originX:void 0),iB(n.y,e.y,t.y,r?r.originY:void 0)}function aB(n,e,t){n.min=t.min+e.min,n.max=n.min+Zo(e)}function cSe(n,e,t){aB(n.x,e.x,t.x),aB(n.y,e.y,t.y)}function sB(n,e,t){n.min=e.min-t.min,n.max=n.min+Zo(e)}function i1(n,e,t){sB(n.x,e.x,t.x),sB(n.y,e.y,t.y)}function dSe(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?vi(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?vi(t,n,r.max):Math.min(n,t)),n}function oB(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function hSe(n,{top:e,left:t,bottom:r,right:i}){return{x:oB(n.x,t,i),y:oB(n.y,e,r)}}function lB(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function fSe(n,e){return{x:lB(n.x,e.x),y:lB(n.y,e.y)}}function pSe(n,e){let t=.5;const r=Zo(n),i=Zo(e);return i>r?t=Dv(e.min,e.max-r,n.min):r>i&&(t=Dv(n.min,n.max-i,e.min)),Nd(0,1,t)}function mSe(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const nR=.35;function gSe(n=nR){return n===!1?n=0:n===!0&&(n=nR),{x:uB(n,"left","right"),y:uB(n,"top","bottom")}}function uB(n,e,t){return{min:cB(n,e),max:cB(n,t)}}function cB(n,e){return typeof n=="number"?n:n[e]||0}const dB=()=>({translate:0,scale:1,origin:0,originPoint:0}),S0=()=>({x:dB(),y:dB()}),hB=()=>({min:0,max:0}),Li=()=>({x:hB(),y:hB()});function fl(n){return[n("x"),n("y")]}function FY({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function vSe({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function ySe(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function TM(n){return n===void 0||n===1}function rR({scale:n,scaleX:e,scaleY:t}){return!TM(n)||!TM(e)||!TM(t)}function Np(n){return rR(n)||jY(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function jY(n){return fB(n.x)||fB(n.y)}function fB(n){return n&&n!=="0%"}function CE(n,e,t){const r=n-t,i=e*r;return t+i}function pB(n,e,t,r,i){return i!==void 0&&(n=CE(n,i,r)),CE(n,t,r)+e}function iR(n,e=0,t=1,r,i){n.min=pB(n.min,e,t,r,i),n.max=pB(n.max,e,t,r,i)}function BY(n,{x:e,y:t}){iR(n.x,e.translate,e.scale,e.originPoint),iR(n.y,t.translate,t.scale,t.originPoint)}const mB=.999999999999,gB=1.0000000000001;function xSe(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=t[o],s=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&A0(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,BY(n,s)),r&&Np(a.latestValues)&&A0(n,a.latestValues))}e.x<gB&&e.x>mB&&(e.x=1),e.y<gB&&e.y>mB&&(e.y=1)}function E0(n,e){n.min=n.min+e,n.max=n.max+e}function vB(n,e,t,r,i=.5){const a=vi(n.min,n.max,i);iR(n,e,t,a,r)}function A0(n,e){vB(n.x,e.x,e.scaleX,e.scale,e.originX),vB(n.y,e.y,e.scaleY,e.scale,e.originY)}function UY(n,e){return FY(ySe(n.getBoundingClientRect(),e))}function _Se(n,e,t){const r=UY(n,t),{scroll:i}=e;return i&&(E0(r.x,i.offset.x),E0(r.y,i.offset.y)),r}const VY=({current:n})=>n?n.ownerDocument.defaultView:null,wSe=new WeakMap;class bSe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Li(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ew(c).point)},a=(c,d)=>{const{drag:f,dragPropagation:m,onDragStart:v}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=pbe(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fl(w=>{let x=this.getAxisMotionValue(w).get()||0;if(hc.test(x)){const{projection:S}=this.visualElement;if(S&&S.layout){const E=S.layout.layoutBox[w];E&&(x=Zo(E)*(parseFloat(x)/100))}}this.originPoint[w]=x}),v&&ii.postRender(()=>v(c,d)),XN(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},s=(c,d)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:v,onDrag:_}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:w}=d;if(m&&this.currentDirection===null){this.currentDirection=SSe(w),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",d.point,w),this.updateAxis("y",d.point,w),this.visualElement.render(),_&&_(c,d)},o=(c,d)=>this.stop(c,d),l=()=>fl(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new RY(e,{onSessionStart:i,onStart:a,onMove:s,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:VY(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&ii.postRender(()=>a(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Rb(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=dSe(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;t&&w0(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=hSe(i.layoutBox,t):this.constraints=!1,this.elastic=gSe(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&fl(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=mSe(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!w0(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=_Se(r,i.root,this.visualElement.getTransformPagePoint());let s=fSe(i.layout.layoutBox,a);if(t){const o=t(vSe(s));this.hasMutatedConstraints=!!o,o&&(s=FY(o))}return s}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=fl(c=>{if(!Rb(c,t,this.currentDirection))return;let d=l&&l[c]||{};s&&(d={min:0,max:0});const f=i?200:1e6,m=i?40:1e7,v={type:"inertia",velocity:r?e[c]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...d};return this.startAxisValueAnimation(c,v)});return Promise.all(u).then(o)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return XN(this.visualElement,e),r.start(wO(e,r,0,t,this.visualElement,!1))}stopAnimation(){fl(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){fl(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){fl(t=>{const{drag:r}=this.getProps();if(!Rb(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(t);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[t];a.set(e[t]-vi(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!w0(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};fl(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();i[s]=pSe({min:l,max:l},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),fl(s=>{if(!Rb(s,e,null))return;const o=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];o.set(vi(l,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;wSe.set(this.visualElement,this);const e=this.visualElement.current,t=n1(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();w0(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ii.read(r);const s=r_(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(fl(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{s(),t(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=nR,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function Rb(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function SSe(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class ESe extends zf{constructor(e){super(e),this.removeGroupControls=$o,this.removeListeners=$o,this.controls=new bSe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$o}unmount(){this.removeGroupControls(),this.removeListeners()}}const yB=n=>(e,t)=>{n&&ii.postRender(()=>n(e,t))};class ASe extends zf{constructor(){super(...arguments),this.removePointerDownListener=$o}onPointerDown(e){this.session=new RY(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:VY(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:yB(e),onStart:yB(t),onMove:r,onEnd:(a,s)=>{delete this.session,i&&ii.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=n1(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const uS={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function xB(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ky={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(hn.test(n))n=parseFloat(n);else return n;const t=xB(n,e.target.x),r=xB(n,e.target.y);return`${t}% ${r}%`}},TSe={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=Nf.parse(n);if(i.length>5)return r;const a=Nf.createTransformer(n),s=typeof i[0]!="number"?1:0,o=t.x.scale*e.x,l=t.y.scale*e.y;i[0+s]/=o,i[1+s]/=l;const u=vi(o,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};class kSe extends M.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;Xwe(CSe),a&&(t.group&&t.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),uS.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:a}=this.props,s=r.projection;return s&&(s.isPresent=a,i||e.layoutDependency!==t||t===void 0?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||ii.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),YL.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function zY(n){const[e,t]=uwe(),r=M.useContext(SK);return h.jsx(kSe,{...n,layoutGroup:r,switchLayoutGroup:M.useContext(PK),isPresent:e,safeToRemove:t})}const CSe={borderRadius:{...Ky,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ky,borderTopRightRadius:Ky,borderBottomLeftRadius:Ky,borderBottomRightRadius:Ky,boxShadow:TSe};function MSe(n,e,t){const r=ws(n)?n:t_(n);return r.start(wO("",r,e,t)),r.animation}function ISe(n){return n instanceof SVGElement&&n.tagName!=="svg"}const PSe=(n,e)=>n.depth-e.depth;class NSe{constructor(){this.children=[],this.isDirty=!1}add(e){cO(this.children,e),this.isDirty=!0}remove(e){dO(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(PSe),this.isDirty=!1,this.children.forEach(e)}}function RSe(n,e){const t=fc.now(),r=({timestamp:i})=>{const a=i-t;a>=e&&(Pf(r),n(a-e))};return ii.read(r,!0),()=>Pf(r)}const HY=["TopLeft","TopRight","BottomLeft","BottomRight"],DSe=HY.length,_B=n=>typeof n=="string"?parseFloat(n):n,wB=n=>typeof n=="number"||hn.test(n);function LSe(n,e,t,r,i,a){i?(n.opacity=vi(0,t.opacity!==void 0?t.opacity:1,OSe(r)),n.opacityExit=vi(e.opacity!==void 0?e.opacity:1,0,FSe(r))):a&&(n.opacity=vi(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let s=0;s<DSe;s++){const o=`border${HY[s]}Radius`;let l=bB(e,o),u=bB(t,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||wB(l)===wB(u)?(n[o]=Math.max(vi(_B(l),_B(u),r),0),(hc.test(u)||hc.test(l))&&(n[o]+="%")):n[o]=u}(e.rotate||t.rotate)&&(n.rotate=vi(e.rotate||0,t.rotate||0,r))}function bB(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const OSe=GY(0,.5,lY),FSe=GY(.5,.95,$o);function GY(n,e,t){return r=>r<n?0:r>e?1:t(Dv(n,e,r))}function SB(n,e){n.min=e.min,n.max=e.max}function cl(n,e){SB(n.x,e.x),SB(n.y,e.y)}function EB(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function AB(n,e,t,r,i){return n-=e,n=CE(n,1/t,r),i!==void 0&&(n=CE(n,1/i,r)),n}function jSe(n,e=0,t=1,r=.5,i,a=n,s=n){if(hc.test(e)&&(e=parseFloat(e),e=vi(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=vi(a.min,a.max,r);n===a&&(o-=e),n.min=AB(n.min,e,t,o,i),n.max=AB(n.max,e,t,o,i)}function TB(n,e,[t,r,i],a,s){jSe(n,e[t],e[r],e[i],e.scale,a,s)}const BSe=["x","scaleX","originX"],USe=["y","scaleY","originY"];function kB(n,e,t,r){TB(n.x,e,BSe,t?t.x:void 0,r?r.x:void 0),TB(n.y,e,USe,t?t.y:void 0,r?r.y:void 0)}function CB(n){return n.translate===0&&n.scale===1}function WY(n){return CB(n.x)&&CB(n.y)}function MB(n,e){return n.min===e.min&&n.max===e.max}function VSe(n,e){return MB(n.x,e.x)&&MB(n.y,e.y)}function IB(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function qY(n,e){return IB(n.x,e.x)&&IB(n.y,e.y)}function PB(n){return Zo(n.x)/Zo(n.y)}function NB(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class zSe{constructor(){this.members=[]}add(e){cO(this.members,e),e.scheduleRender()}remove(e){if(dO(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function HSe(n,e,t){let r="";const i=n.x.translate/e.x,a=n.y.translate/e.y,s=(t==null?void 0:t.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:f,skewX:m,skewY:v}=t;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),v&&(r+=`skewY(${v}deg) `)}const o=n.x.scale*e.x,l=n.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const Rp={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},kx=typeof window<"u"&&window.MotionDebug!==void 0,kM=["","X","Y","Z"],GSe={visibility:"hidden"},RB=1e3;let WSe=0;function CM(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function $Y(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=tY(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",ii,!(i||a))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&$Y(r)}function XY({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e==null?void 0:e()){this.id=WSe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,kx&&(Rp.totalNodes=Rp.resolvedTargetDeltas=Rp.recalculatedProjection=0),this.nodes.forEach(XSe),this.nodes.forEach(JSe),this.nodes.forEach(eEe),this.nodes.forEach(KSe),kx&&window.MotionDebug.record(Rp)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new NSe)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new hO),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=ISe(s),this.instance=s;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),n){let d;const f=()=>this.root.updateBlockedByResize=!1;n(s,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=RSe(f,250),uS.hasAnimatedSinceResize&&(uS.hasAnimatedSinceResize=!1,this.nodes.forEach(LB))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||c.getDefaultTransition()||aEe,{onLayoutAnimationStart:w,onLayoutAnimationComplete:x}=c.getProps(),S=!this.targetLayout||!qY(this.targetLayout,v)||m,E=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||f&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,E);const T={...sO(_,"layout"),onPlay:w,onComplete:x};(c.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T)}else f||LB(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Pf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(tEe),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$Y(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(DB);return}this.isUpdating||this.nodes.forEach(ZSe),this.isUpdating=!1,this.nodes.forEach(QSe),this.nodes.forEach(qSe),this.nodes.forEach($Se),this.clearAllSnapshots();const o=fc.now();Ba.delta=Nd(0,1e3/60,o-Ba.timestamp),Ba.timestamp=o,Ba.isProcessing=!0,yM.update.process(Ba),yM.preRender.process(Ba),yM.render.process(Ba),Ba.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,YL.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(YSe),this.sharedNodes.forEach(nEe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ii.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ii.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Li(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!WY(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;s&&(o||Np(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),sEe(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var s;const{visualElement:o}=this.options;if(!o)return Li();const l=o.measureViewportBox();if(!(((s=this.scroll)===null||s===void 0?void 0:s.wasRoot)||this.path.some(oEe))){const{scroll:c}=this.root;c&&(E0(l.x,c.offset.x),E0(l.y,c.offset.y))}return l}removeElementScroll(s){var o;const l=Li();if(cl(l,s),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;c!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&cl(l,s),E0(l.x,d.offset.x),E0(l.y,d.offset.y))}return l}applyTransform(s,o=!1){const l=Li();cl(l,s);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&A0(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Np(c.latestValues)&&A0(l,c.latestValues)}return Np(this.latestValues)&&A0(l,this.latestValues),l}removeTransform(s){const o=Li();cl(o,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Np(u.latestValues))continue;rR(u.latestValues)&&u.updateSnapshot();const c=Li(),d=u.measurePageBox();cl(c,d),kB(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Np(this.latestValues)&&kB(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ba.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Ba.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Li(),this.relativeTargetOrigin=Li(),i1(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),cl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Li(),this.targetWithTransforms=Li()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),cSe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):cl(this.target,this.layout.layoutBox),BY(this.target,this.targetDelta)):cl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Li(),this.relativeTargetOrigin=Li(),i1(this.relativeTargetOrigin,this.target,m.target),cl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}kx&&Rp.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||rR(this.parent.latestValues)||jY(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ba.timestamp&&(u=!1),u)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;cl(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;xSe(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Li());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(EB(this.prevProjectionDelta.x,this.projectionDelta.x),EB(this.prevProjectionDelta.y,this.projectionDelta.y)),r1(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!NB(this.projectionDelta.x,this.prevProjectionDelta.x)||!NB(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),kx&&Rp.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=S0(),this.projectionDelta=S0(),this.projectionDeltaWithTransform=S0()}setAnimationOrigin(s,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=S0();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=Li(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,_=m!==v,w=this.getStack(),x=!w||w.members.length<=1,S=!!(_&&!x&&this.options.crossfade===!0&&!this.path.some(iEe));this.animationProgress=0;let E;this.mixTargetDelta=T=>{const D=T/1e3;OB(d.x,s.x,D),OB(d.y,s.y,D),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(i1(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),rEe(this.relativeTarget,this.relativeTargetOrigin,f,D),E&&VSe(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=Li()),cl(E,this.relativeTarget)),_&&(this.animationValues=c,LSe(c,u,this.latestValues,D,S,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Pf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ii.update(()=>{uS.hasAnimatedSinceResize=!0,this.currentAnimation=MSe(0,RB,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(RB),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=s;if(!(!o||!l||!u)){if(this!==s&&this.layout&&u&&KY(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Li();const d=Zo(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+d;const f=Zo(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+f}cl(o,l),A0(o,c),r1(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new zSe),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:o}=this.options;return o?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:o}=this.options;return o?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&CM("z",s,u,this.animationValues);for(let c=0;c<kM.length;c++)CM(`rotate${kM[c]}`,s,u,this.animationValues),CM(`skew${kM[c]}`,s,u,this.animationValues);s.render();for(const c in u)s.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);s.scheduleRender()}getProjectionStyles(s){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return GSe;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=oS(s==null?void 0:s.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=oS(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Np(this.latestValues)&&(_.transform=c?c({},""):"none",this.hasProjected=!1),_}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=HSe(this.projectionDeltaWithTransform,this.treeScale,f),c&&(u.transform=c(f,u.transform));const{x:m,y:v}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const _ in SE){if(f[_]===void 0)continue;const{correct:w,applyTo:x}=SE[_],S=u.transform==="none"?f[_]:w(f[_],d);if(x){const E=x.length;for(let T=0;T<E;T++)u[x[T]]=S}else u[_]=S}return this.options.layoutId&&(u.pointerEvents=d===this?oS(s==null?void 0:s.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(DB),this.root.sharedNodes.clear()}}}function qSe(n){n.updateLayout()}function $Se(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:a}=n.options,s=t.source!==n.layout.source;a==="size"?fl(d=>{const f=s?t.measuredBox[d]:t.layoutBox[d],m=Zo(f);f.min=r[d].min,f.max=f.min+m}):KY(a,t.layoutBox,r)&&fl(d=>{const f=s?t.measuredBox[d]:t.layoutBox[d],m=Zo(r[d]);f.max=f.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+m)});const o=S0();r1(o,r,t.layoutBox);const l=S0();s?r1(l,n.applyTransform(i,!0),t.measuredBox):r1(l,r,t.layoutBox);const u=!WY(o);let c=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:m}=d;if(f&&m){const v=Li();i1(v,t.layoutBox,f.layoutBox);const _=Li();i1(_,r,m.layoutBox),qY(v,_)||(c=!0),d.options.layoutRoot&&(n.relativeTarget=_,n.relativeTargetOrigin=v,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function XSe(n){kx&&Rp.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function KSe(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function YSe(n){n.clearSnapshot()}function DB(n){n.clearMeasurements()}function ZSe(n){n.isLayoutDirty=!1}function QSe(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function LB(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function JSe(n){n.resolveTargetDelta()}function eEe(n){n.calcProjection()}function tEe(n){n.resetSkewAndRotation()}function nEe(n){n.removeLeadSnapshot()}function OB(n,e,t){n.translate=vi(e.translate,0,t),n.scale=vi(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function FB(n,e,t,r){n.min=vi(e.min,t.min,r),n.max=vi(e.max,t.max,r)}function rEe(n,e,t,r){FB(n.x,e.x,t.x,r),FB(n.y,e.y,t.y,r)}function iEe(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const aEe={duration:.45,ease:[.4,0,.1,1]},jB=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),BB=jB("applewebkit/")&&!jB("chrome/")?Math.round:$o;function UB(n){n.min=BB(n.min),n.max=BB(n.max)}function sEe(n){UB(n.x),UB(n.y)}function KY(n,e,t){return n==="position"||n==="preserve-aspect"&&!uSe(PB(e),PB(t),.2)}function oEe(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const lEe=XY({attachResizeListener:(n,e)=>r_(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),MM={current:void 0},YY=XY({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!MM.current){const n=new lEe({});n.mount(window),n.setOptions({layoutScroll:!0}),MM.current=n}return MM.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),uEe={pan:{Feature:ASe},drag:{Feature:ESe,ProjectionNode:YY,MeasureLayout:zY}};function VB(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,a=r[i];a&&ii.postRender(()=>a(e,ew(e)))}class cEe extends zf{mount(){const{current:e}=this.node;e&&(this.unmount=ube(e,t=>(VB(this.node,t,"Start"),r=>VB(this.node,r,"End"))))}unmount(){}}class dEe extends zf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=J_(r_(this.node.current,"focus",()=>this.onFocus()),r_(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function zB(n,e,t){const{props:r}=n;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),a=r[i];a&&ii.postRender(()=>a(e,ew(e)))}class hEe extends zf{mount(){const{current:e}=this.node;e&&(this.unmount=fbe(e,t=>(zB(this.node,t,"Start"),(r,{success:i})=>zB(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const aR=new WeakMap,IM=new WeakMap,fEe=n=>{const e=aR.get(n.target);e&&e(n)},pEe=n=>{n.forEach(fEe)};function mEe({root:n,...e}){const t=n||document;IM.has(t)||IM.set(t,{});const r=IM.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(pEe,{root:n,...e})),r[i]}function gEe(n,e,t){const r=mEe(e);return aR.set(n,t),r.observe(n),()=>{aR.delete(n),r.unobserve(n)}}const vEe={some:0,all:1};class yEe extends zf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:a}=e,s={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:vEe[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=u?c:d;f&&f(l)};return gEe(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(xEe(e,t))&&this.startObserver()}unmount(){}}function xEe({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const _Ee={inView:{Feature:yEe},tap:{Feature:hEe},focus:{Feature:dEe},hover:{Feature:cEe}},wEe={layout:{ProjectionNode:YY,MeasureLayout:zY}},sR={current:null},ZY={current:!1};function bEe(){if(ZY.current=!0,!!WL)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>sR.current=n.matches;n.addListener(e),e()}else sR.current=!1}const SEe=[...bY,ps,Nf],EEe=n=>SEe.find(wY(n)),HB=new WeakMap;function AEe(n,e,t){for(const r in e){const i=e[r],a=t[r];if(ws(i))n.addValue(r,i);else if(ws(a))n.addValue(r,t_(i,{owner:n}));else if(a!==i)if(n.hasValue(r)){const s=n.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=n.getStaticValue(r);n.addValue(r,t_(s!==void 0?s:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const GB=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class TEe{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=yO,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=fc.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,ii.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:c}=s;this.onUpdate=c,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=GT(t),this.isVariantNode=MK(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(t,{},this);for(const m in f){const v=f[m];l[m]!==void 0&&ws(v)&&v.set(l[m],!1)}}mount(e){this.current=e,HB.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),ZY.current||bEe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:sR.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){HB.delete(this.current),this.projection&&this.projection.unmount(),Pf(this.notifyUpdate),Pf(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=rg.has(e),i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ii.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),a(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Lv){const t=Lv[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Li()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<GB.length;r++){const i=GB[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=AEe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=t_(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(xY(i)||cY(i))?i=parseFloat(i):!EEe(i)&&Nf.test(t)&&(i=gY(e,t)),this.setBaseTarget(e,ws(i)?i.get():i)),ws(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const s=QL(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);s&&(i=s[e])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!ws(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new hO),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class QY extends TEe{constructor(){super(...arguments),this.KeyframeResolver=SY}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ws(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function kEe(n){return window.getComputedStyle(n)}class CEe extends QY{constructor(){super(...arguments),this.type="html",this.renderInstance=jK}readValueFromInstance(e,t){if(rg.has(t)){const r=vO(t);return r&&r.default||0}else{const r=kEe(e),i=(LK(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return UY(e,t)}build(e,t,r){tO(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return aO(e,t,r)}}class MEe extends QY{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Li}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(rg.has(t)){const r=vO(t);return r&&r.default||0}return t=BK.has(t)?t:KL(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return zK(e,t,r)}build(e,t,r){nO(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,i){UK(e,t,r,i)}mount(e){this.isSVGTag=iO(e.tagName),super.mount(e)}}const IEe=(n,e)=>ZL(n)?new MEe(e):new CEe(e,{allowProjection:n!==M.Fragment}),PEe=rbe({...eSe,..._Ee,...uEe,...wEe},IEe),Xn=ywe(PEe),NEe={some:0,all:1};function REe(n,e,{root:t,margin:r,amount:i="some"}={}){const a=YK(n),s=new WeakMap,o=u=>{u.forEach(c=>{const d=s.get(c.target);if(c.isIntersecting!==!!d)if(c.isIntersecting){const f=e(c);typeof f=="function"?s.set(c.target,f):l.unobserve(c.target)}else typeof d=="function"&&(d(c),s.delete(c.target))})},l=new IntersectionObserver(o,{root:t,rootMargin:r,threshold:typeof i=="number"?i:NEe[i]});return a.forEach(u=>l.observe(u)),()=>l.disconnect()}function DEe(n,{root:e,margin:t,amount:r,once:i=!1}={}){const[a,s]=M.useState(!1);return M.useEffect(()=>{if(!n.current||i&&a)return;const o=()=>(s(!0),i?void 0:()=>s(!1)),l={root:e&&e.current||void 0,margin:t,amount:r};return REe(n.current,o,l)},[e,n,t,i,r]),a}function LEe(){const[n,e]=M.useState(""),[t,r]=M.useState(""),[i,a]=M.useState(!0);if(M.useEffect(()=>{async function o(){const{db:u}=await gs(async()=>{const{db:m}=await Promise.resolve().then(()=>Jh);return{db:m}},void 0),{doc:c,getDoc:d}=await gs(async()=>{const{doc:m,getDoc:v}=await Promise.resolve().then(()=>Qh);return{doc:m,getDoc:v}},void 0),f=await d(c(u,"homepage","visimisi"));f.exists()&&(e(f.data().visi||""),r(f.data().misi||"")),a(!1)}o();const l=()=>o();return window.addEventListener("visimisi-updated",l),()=>{window.removeEventListener("visimisi-updated",l)}},[]),i)return h.jsx("div",{className:"text-gray-400",children:"Memuat visi & misi..."});const s=t.split(/\r?\n/).map(o=>o.trim()).filter(Boolean);return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h4",{className:"font-heading font-medium mb-2",children:"Visi:"}),h.jsx("p",{className:"text-gray-700 text-justify whitespace-pre-line",children:n})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-heading font-medium mb-2",children:"Misi:"}),s.length>1?h.jsx("ul",{className:"text-gray-700 list-disc pl-5 space-y-1",children:s.map((o,l)=>h.jsx("li",{children:o},l))}):h.jsx("p",{className:"text-gray-700 text-justify whitespace-pre-line",children:t})]}),h.jsx(exe,{})]})}function OEe(){const[n,e]=M.useState({title:"Hubungi Kami",description:"",whatsapp:"",email:"",instagram:""}),[t,r]=M.useState(!0);return M.useEffect(()=>{let i=()=>{};async function a(){const{db:s}=await gs(async()=>{const{db:c}=await Promise.resolve().then(()=>Jh);return{db:c}},void 0),{doc:o,getDoc:l}=await gs(async()=>{const{doc:c,getDoc:d}=await Promise.resolve().then(()=>Qh);return{doc:c,getDoc:d}},void 0),u=await l(o(s,"homepage","contact"));if(u.exists()){const c=u.data();e({title:c.title||"Hubungi Kami",description:c.description||"",whatsapp:c.whatsapp||"",email:c.email||"",instagram:c.instagram||""})}r(!1)}return a(),()=>i()},[]),{contact:n,loading:t}}function FEe(){const{contact:n}=OEe(),{data:e,isLoading:t}=FL(3),{data:r}=hK(3),{data:i,isLoading:a}=fK(),[s,o]=M.useState(!1),[l,u]=M.useState(!1),[c,d]=M.useState(null),[f,m]=M.useState(!0);M.useEffect(()=>{let w=!0;return gq().then(x=>{w&&(d(x),m(!1))}),()=>{w=!1}},[]),M.useEffect(()=>{const w=new Date;((()=>{const T=w.getMonth()>0||w.getMonth()===0&&w.getDate()>26?w.getFullYear()+1:w.getFullYear();return new Date(T,0,26,0,0,0,0)})().getTime()-w.getTime())/(1e3*60*60*24)<=31&&!sessionStorage.getItem("hideBirthdayPopup")&&u(!0)},[]);const v=()=>{u(!1),sessionStorage.setItem("hideBirthdayPopup","1")},_=r||[];return M.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),h.jsxs(h.Fragment,{children:[h.jsx(swe,{open:l,onClose:v}),h.jsx(Xn.section,{className:"py-8 sm:py-16 bg-white",initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.7},children:h.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[h.jsxs(Xn.div,{className:"text-center mb-12",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.2,duration:.7},children:[h.jsx("h1",{className:"font-heading text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:h.jsx(owe,{text:"Selamat Datang di Website Resmi Organisasi Mahasiswa Pecinta Alam Universitas Narotama Surabaya",speed:30})}),h.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Menjelajahi alam, berbagi pengetahuan, dan menjaga kelestarian lingkungan."})]}),h.jsx(Xn.div,{className:"relative rounded-xl overflow-hidden shadow-xl",initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},transition:{delay:.4,duration:.7},children:f?h.jsx("div",{className:"h-96 flex items-center justify-center text-gray-400",children:"Memuat carousel..."}):h.jsxs(yK,{opts:{align:"start",loop:!0},className:"w-full",plugins:[HL({delay:5e3})],children:[h.jsx(xK,{children:(c&&c.length>0?c:ru).map((w,x)=>h.jsx(_K,{children:h.jsxs("div",{className:"relative h-96",children:[h.jsx("img",{src:w.imageUrl,alt:w.alt,className:"w-full h-full object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end",children:h.jsxs("div",{className:"p-6 text-white",children:[h.jsx("h2",{className:"font-heading text-2xl font-bold mb-2",children:w.title}),h.jsx("p",{className:"text-gray-200",children:w.description})]})})]})},x))}),h.jsxs("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-2",children:[h.jsx(wK,{className:"relative -left-0 translate-y-0 bg-white/20 hover:bg-white/40"}),h.jsx(bK,{className:"relative -right-0 translate-y-0 bg-white/20 hover:bg-white/40"})]})]})})]})}),h.jsx(Xn.section,{id:"info-organisasi",className:"py-8 sm:py-16 bg-gray-50",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7},children:h.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[h.jsx("h2",{className:"font-heading text-3xl font-bold text-center mb-12",children:"Informasi Organisasi"}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[h.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[h.jsx("h3",{className:"font-heading text-xl font-semibold text-primary mb-4",children:"Sejarah"}),h.jsx("p",{className:"text-gray-700 mb-4 text-justify indent-8",children:"Mahapala Narotama adalah Unit Kegiatan Mahasiswa Pecinta Alam di Universitas Narotama, Surabaya yang berdiri sejak tahun 2016. Organisasi ini berperan aktif dalam mengadakan kegiatan alam bebas dan konservasi lingkungan, serta turut serta dalam pengabdian masyarakat. Mahapala Narotama juga berperan dalam meningkatkan kesadaran akan pentingnya pelestarian alam dan lingkungan hidup di kalangan mahasiswa dan masyarakat umum."}),h.jsx("p",{className:"text-gray-700 mb-4 text-justify indent-8",children:'Universitas Narotama sendiri didirikan pada tahun 1981 oleh Yayasan Pawiyatan Gita Patria. Nama "Narotama" diambil dari seorang tokoh sejarah, Mahapatih dari Prabu Airlangga, yang dikenal sebagai guru ilmu kenegaraan, agama, dan kedigdayaan. Sejak awal berdirinya, universitas ini memiliki komitmen kuat dalam bidang pendidikan dan pengabdian kepada masyarakat.'}),h.jsx("p",{className:"text-gray-700 mb-4 text-justify indent-8",children:"Mahapala Narotama, sebagai bagian integral dari universitas, telah menunjukkan dedikasi dalam berbagai kegiatan, termasuk pendakian, ekspedisi, dan program konservasi. Mereka juga aktif dalam kolaborasi dengan organisasi lain untuk meningkatkan dampak positif terhadap lingkungan dan masyarakat."}),h.jsx("p",{className:"text-gray-700 mb-4 text-justify indent-8",children:"Dengan semangat yang terus berkobar, Mahapala Narotama berkomitmen untuk melanjutkan peranannya dalam menjaga kelestarian alam dan meningkatkan kesadaran lingkungan di kalangan generasi muda."})]}),h.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[h.jsx("h3",{className:"font-heading text-xl font-semibold text-primary mb-4",children:"Visi & Misi"}),h.jsx(LEe,{})]})]})]})}),h.jsx(Xn.section,{id:"kegiatan",className:"py-8 sm:py-16 bg-white",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7},children:h.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[h.jsx("h2",{className:"font-heading text-3xl font-bold text-center mb-4",children:"Kegiatan Terbaru"}),h.jsx("p",{className:"text-center text-gray-600 mb-12 max-w-2xl mx-auto",children:"Dokumentasi berbagai kegiatan yang telah dilaksanakan oleh Mahapala Narotama dalam menjalankan misi pelestarian dan eksplorasi alam."}),t?h.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(w=>h.jsxs(Xn.div,{className:"bg-white rounded-lg overflow-hidden shadow-md animate-pulse",initial:{opacity:0,y:60,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.3},transition:{duration:.7,type:"spring"},children:[h.jsx("div",{className:"w-full h-48 bg-gray-300"}),h.jsxs("div",{className:"p-5",children:[h.jsxs("div",{className:"flex justify-between items-center mb-3",children:[h.jsx("div",{className:"h-4 bg-gray-300 rounded w-24"}),h.jsx("div",{className:"h-6 bg-gray-300 rounded w-16"})]}),h.jsx("div",{className:"h-6 bg-gray-300 rounded w-3/4 mb-2"}),h.jsx("div",{className:"h-4 bg-gray-300 rounded w-full mb-4"}),h.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/3"})]})]},w))}):h.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:e==null?void 0:e.map((w,x)=>h.jsx(Xn.div,{initial:{opacity:0,y:60,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.3},transition:{duration:.7,type:"spring",delay:x*.1},children:h.jsx(JX,{activity:{...w,date:typeof w.date=="string"?w.date:w.date.toISOString()}})},w.id))}),h.jsx("div",{className:"text-center mt-10",children:h.jsx(Eo,{href:"/kegiatan",children:h.jsx(zt,{children:"Lihat Semua Kegiatan"})})})]})}),h.jsx(Xn.section,{id:"pembelajaran",className:"py-8 sm:py-16 bg-gray-50",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7},children:h.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[h.jsx("h2",{className:"font-heading text-3xl font-bold text-center mb-4",children:"Pembelajaran"}),h.jsx("p",{className:"text-center text-gray-600 mb-12 max-w-2xl mx-auto",children:"Materi dan panduan kegiatan alam bebas yang dapat diakses oleh seluruh anggota Mahapala Narotama."}),h.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:_.map((w,x)=>h.jsx(Xn.div,{initial:{opacity:0,y:60,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.3},transition:{duration:.7,type:"spring",delay:x*.1},children:h.jsx(eK,{module:w})},w.id+w.title))}),h.jsx("div",{className:"text-center mt-10",children:h.jsx(Eo,{href:"/pembelajaran",children:h.jsx(zt,{children:"Lihat Semua Pembelajaran"})})})]})}),h.jsx(Xn.section,{className:"py-8 sm:py-16 bg-white",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7},children:h.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[h.jsx("h2",{className:"font-heading text-3xl font-bold text-center mb-4",children:"Galeri Kegiatan"}),h.jsx("p",{className:"text-center text-gray-600 mb-10 max-w-2xl mx-auto",children:"Sekilas dokumentasi kegiatan yang telah dilaksanakan oleh anggota Mahapala Narotama"}),a?h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(w=>h.jsx(Xn.div,{className:"bg-gray-200 h-48 rounded-lg animate-pulse",initial:{opacity:0,y:60,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.3},transition:{duration:.7,type:"spring"}},w))}):i&&i.length>0?h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:i.slice(0,4).map((w,x)=>h.jsxs(Xn.div,{className:"relative group overflow-hidden rounded-lg",initial:{opacity:0,y:60,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.3},transition:{duration:.7,type:"spring",delay:x*.1},children:[h.jsx("img",{src:w.imageUrl,alt:w.title,className:"w-full h-full object-cover transition group-hover:scale-110"}),h.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition flex items-center justify-center",children:h.jsxs("div",{children:[h.jsx("p",{className:"text-white text-sm text-center font-medium p-2",children:w.title}),w.description&&h.jsx("p",{className:"text-white text-xs text-center p-1",children:w.description})]})})]},w.id))}):h.jsx("div",{className:"text-center text-gray-500 py-10",children:"Tidak ada data galeri."}),h.jsx("div",{className:"text-center mt-10",children:h.jsx(Eo,{href:"/galeri",children:h.jsx(zt,{children:"Lihat Galeri Lengkap"})})})]})}),h.jsxs("section",{className:"py-8 sm:py-16 bg-primary text-white",children:[h.jsxs("div",{className:"container mx-auto px-2 sm:px-4 text-center",children:[h.jsx("h2",{className:"font-heading text-3xl font-bold mb-4",children:"Bergabung dengan Mahapala Narotama"}),h.jsx("p",{className:"text-lg mb-8 max-w-2xl mx-auto",children:"Mari bergabung dalam misi kami untuk melestarikan alam dan mengeksplorasi keindahan Indonesia. Kami membuka pendaftaran anggota baru setiap awal tahun akademik."}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[h.jsx(Eo,{href:"/pendaftaran",children:h.jsx(zt,{variant:"secondary",className:"bg-white text-primary hover:bg-gray-100",children:"Informasi Pendaftaran"})}),h.jsx(zt,{variant:"outline",className:"bg-transparent border-2 border-white text-white hover:bg-white/10",onClick:w=>{w.preventDefault(),o(!0)},children:"Hubungi Kami"})]})]}),h.jsx(wc,{open:s,onOpenChange:o,children:h.jsx(bu,{className:"max-w-xs w-full p-0 rounded-xl",children:h.jsxs("div",{className:"p-6 flex flex-col items-center gap-0",children:[h.jsx("h2",{className:"font-heading text-lg font-bold",style:{marginBottom:0},children:n.title||"Hubungi Kami"}),n.description&&h.jsx("div",{className:"text-center text-sm text-gray-600",style:{marginTop:0,marginBottom:0},children:n.description}),h.jsxs("div",{className:"flex gap-6 justify-center",style:{marginTop:15},children:[n.instagram&&h.jsx("a",{href:`https://instagram.com/${n.instagram.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"hover:text-red-500 hover:scale-110 transition-transform",title:"Instagram",children:h.jsx(CT,{size:36})}),n.whatsapp&&h.jsx("a",{href:`https://wa.me/${n.whatsapp.replace(/[^0-9]/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"hover:text-green-600 hover:scale-110 transition-transform",title:"WhatsApp",children:h.jsx(G_,{size:36})}),n.email&&h.jsx("a",{href:`mailto:${n.email}`,className:"hover:text-blue-600 hover:scale-110 transition-transform",title:"Email",children:h.jsx(H1,{size:36})})]}),h.jsxs("div",{className:"text-center text-xs text-gray-500 mt-2",children:[n.instagram&&h.jsxs(h.Fragment,{children:[h.jsxs("span",{children:["Instagram: @",n.instagram.replace("@","")]}),h.jsx("br",{})]}),n.whatsapp&&h.jsxs(h.Fragment,{children:[h.jsxs("span",{children:["WhatsApp: +",n.whatsapp]}),h.jsx("br",{})]}),n.email&&h.jsx(h.Fragment,{children:h.jsxs("span",{children:["Email: ",n.email]})})]})]})})})]})]})}function WB(n,[e,t]){return Math.min(t,Math.max(e,n))}var jEe=M.createContext(void 0);function bO(n){const e=M.useContext(jEe);return n||e||"ltr"}function BEe(n){const e=M.useRef({value:n,previous:n});return M.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var UEe=[" ","Enter","ArrowUp","ArrowDown"],VEe=[" ","Enter"],Om="Select",[$T,XT,zEe]=WD(Om),[cy,W6e]=Bd(Om,[zEe,NT]),KT=NT(),[HEe,Hf]=cy(Om),[GEe,WEe]=cy(Om),JY=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:a,value:s,defaultValue:o,onValueChange:l,dir:u,name:c,autoComplete:d,disabled:f,required:m,form:v}=n,_=KT(e),[w,x]=M.useState(null),[S,E]=M.useState(null),[T,D]=M.useState(!1),F=bO(u),[P,N]=Pv({prop:r,defaultProp:i??!1,onChange:a,caller:Om}),[I,R]=Pv({prop:s,defaultProp:o,onChange:l,caller:Om}),B=M.useRef(null),G=w?v||!!w.closest("form"):!0,[H,K]=M.useState(new Set),ne=Array.from(H).map(re=>re.props.value).join(";");return h.jsx(j0e,{..._,children:h.jsxs(HEe,{required:m,scope:e,trigger:w,onTriggerChange:x,valueNode:S,onValueNodeChange:E,valueNodeHasChildren:T,onValueNodeHasChildrenChange:D,contentId:mf(),value:I,onValueChange:R,open:P,onOpenChange:N,dir:F,triggerPointerDownPosRef:B,disabled:f,children:[h.jsx($T.Provider,{scope:e,children:h.jsx(GEe,{scope:n.__scopeSelect,onNativeOptionAdd:M.useCallback(re=>{K(oe=>new Set(oe).add(re))},[]),onNativeOptionRemove:M.useCallback(re=>{K(oe=>{const $=new Set(oe);return $.delete(re),$})},[]),children:t})}),G?h.jsxs(SZ,{"aria-hidden":!0,required:m,tabIndex:-1,name:c,autoComplete:d,value:I,onChange:re=>R(re.target.value),disabled:f,form:v,children:[I===void 0?h.jsx("option",{value:""}):null,Array.from(H)]},ne):null]})})};JY.displayName=Om;var eZ="SelectTrigger",tZ=M.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,a=KT(t),s=Hf(eZ,t),o=s.disabled||r,l=Or(e,s.onTriggerChange),u=XT(t),c=M.useRef("touch"),[d,f,m]=AZ(_=>{const w=u().filter(E=>!E.disabled),x=w.find(E=>E.value===s.value),S=TZ(w,_,x);S!==void 0&&s.onValueChange(S.value)}),v=_=>{o||(s.onOpenChange(!0),m()),_&&(s.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return h.jsx(W$,{asChild:!0,...a,children:h.jsx(Ln.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":EZ(s.value)?"":void 0,...i,ref:l,onClick:cn(i.onClick,_=>{_.currentTarget.focus(),c.current!=="mouse"&&v(_)}),onPointerDown:cn(i.onPointerDown,_=>{c.current=_.pointerType;const w=_.target;w.hasPointerCapture(_.pointerId)&&w.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(v(_),_.preventDefault())}),onKeyDown:cn(i.onKeyDown,_=>{const w=d.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&f(_.key),!(w&&_.key===" ")&&UEe.includes(_.key)&&(v(),_.preventDefault())})})})});tZ.displayName=eZ;var nZ="SelectValue",rZ=M.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:a,placeholder:s="",...o}=n,l=Hf(nZ,t),{onValueNodeHasChildrenChange:u}=l,c=a!==void 0,d=Or(e,l.onValueNodeChange);return Xa(()=>{u(c)},[u,c]),h.jsx(Ln.span,{...o,ref:d,style:{pointerEvents:"none"},children:EZ(l.value)?h.jsx(h.Fragment,{children:s}):a})});rZ.displayName=nZ;var qEe="SelectIcon",iZ=M.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return h.jsx(Ln.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});iZ.displayName=qEe;var $Ee="SelectPortal",aZ=n=>h.jsx(ET,{asChild:!0,...n});aZ.displayName=$Ee;var Fm="SelectContent",sZ=M.forwardRef((n,e)=>{const t=Hf(Fm,n.__scopeSelect),[r,i]=M.useState();if(Xa(()=>{i(new DocumentFragment)},[]),!t.open){const a=r;return a?Bf.createPortal(h.jsx(oZ,{scope:n.__scopeSelect,children:h.jsx($T.Slot,{scope:n.__scopeSelect,children:h.jsx("div",{children:n.children})})}),a):null}return h.jsx(lZ,{...n,ref:e})});sZ.displayName=Fm;var Kl=10,[oZ,Gf]=cy(Fm),XEe="SelectContentImpl",KEe=Iv("SelectContent.RemoveScroll"),lZ=M.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:s,side:o,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:_,avoidCollisions:w,...x}=n,S=Hf(Fm,t),[E,T]=M.useState(null),[D,F]=M.useState(null),P=Or(e,Se=>T(Se)),[N,I]=M.useState(null),[R,B]=M.useState(null),G=XT(t),[H,K]=M.useState(!1),ne=M.useRef(!1);M.useEffect(()=>{if(E)return fX(E)},[E]),aX();const re=M.useCallback(Se=>{const[ge,...Ge]=G().map(Te=>Te.ref.current),[Me]=Ge.slice(-1),Ce=document.activeElement;for(const Te of Se)if(Te===Ce||(Te==null||Te.scrollIntoView({block:"nearest"}),Te===ge&&D&&(D.scrollTop=0),Te===Me&&D&&(D.scrollTop=D.scrollHeight),Te==null||Te.focus(),document.activeElement!==Ce))return},[G,D]),oe=M.useCallback(()=>re([N,E]),[re,N,E]);M.useEffect(()=>{H&&oe()},[H,oe]);const{onOpenChange:$,triggerPointerDownPosRef:ue}=S;M.useEffect(()=>{if(E){let Se={x:0,y:0};const ge=Me=>{var Ce,Te;Se={x:Math.abs(Math.round(Me.pageX)-(((Ce=ue.current)==null?void 0:Ce.x)??0)),y:Math.abs(Math.round(Me.pageY)-(((Te=ue.current)==null?void 0:Te.y)??0))}},Ge=Me=>{Se.x<=10&&Se.y<=10?Me.preventDefault():E.contains(Me.target)||$(!1),document.removeEventListener("pointermove",ge),ue.current=null};return ue.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",Ge,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",Ge,{capture:!0})}}},[E,$,ue]),M.useEffect(()=>{const Se=()=>$(!1);return window.addEventListener("blur",Se),window.addEventListener("resize",Se),()=>{window.removeEventListener("blur",Se),window.removeEventListener("resize",Se)}},[$]);const[se,pe]=AZ(Se=>{const ge=G().filter(Ce=>!Ce.disabled),Ge=ge.find(Ce=>Ce.ref.current===document.activeElement),Me=TZ(ge,Se,Ge);Me&&setTimeout(()=>Me.ref.current.focus())}),Fe=M.useCallback((Se,ge,Ge)=>{const Me=!ne.current&&!Ge;(S.value!==void 0&&S.value===ge||Me)&&(I(Se),Me&&(ne.current=!0))},[S.value]),$e=M.useCallback(()=>E==null?void 0:E.focus(),[E]),at=M.useCallback((Se,ge,Ge)=>{const Me=!ne.current&&!Ge;(S.value!==void 0&&S.value===ge||Me)&&B(Se)},[S.value]),me=r==="popper"?oR:uZ,Le=me===oR?{side:o,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:_,avoidCollisions:w}:{};return h.jsx(oZ,{scope:t,content:E,viewport:D,onViewportChange:F,itemRefCallback:Fe,selectedItem:N,onItemLeave:$e,itemTextRefCallback:at,focusSelectedItem:oe,selectedItemText:R,position:r,isPositioned:H,searchRef:se,children:h.jsx(dL,{as:KEe,allowPinchZoom:!0,children:h.jsx(cL,{asChild:!0,trapped:S.open,onMountAutoFocus:Se=>{Se.preventDefault()},onUnmountAutoFocus:cn(i,Se=>{var ge;(ge=S.trigger)==null||ge.focus({preventScroll:!0}),Se.preventDefault()}),children:h.jsx(z_,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:Se=>Se.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:h.jsx(me,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:Se=>Se.preventDefault(),...x,...Le,onPlaced:()=>K(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:cn(x.onKeyDown,Se=>{const ge=Se.ctrlKey||Se.altKey||Se.metaKey;if(Se.key==="Tab"&&Se.preventDefault(),!ge&&Se.key.length===1&&pe(Se.key),["ArrowUp","ArrowDown","Home","End"].includes(Se.key)){let Me=G().filter(Ce=>!Ce.disabled).map(Ce=>Ce.ref.current);if(["ArrowUp","End"].includes(Se.key)&&(Me=Me.slice().reverse()),["ArrowUp","ArrowDown"].includes(Se.key)){const Ce=Se.target,Te=Me.indexOf(Ce);Me=Me.slice(Te+1)}setTimeout(()=>re(Me)),Se.preventDefault()}})})})})})})});lZ.displayName=XEe;var YEe="SelectItemAlignedPosition",uZ=M.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,a=Hf(Fm,t),s=Gf(Fm,t),[o,l]=M.useState(null),[u,c]=M.useState(null),d=Or(e,P=>c(P)),f=XT(t),m=M.useRef(!1),v=M.useRef(!0),{viewport:_,selectedItem:w,selectedItemText:x,focusSelectedItem:S}=s,E=M.useCallback(()=>{if(a.trigger&&a.valueNode&&o&&u&&_&&w&&x){const P=a.trigger.getBoundingClientRect(),N=u.getBoundingClientRect(),I=a.valueNode.getBoundingClientRect(),R=x.getBoundingClientRect();if(a.dir!=="rtl"){const Ce=R.left-N.left,Te=I.left-Ce,te=P.left-Te,Ee=P.width+te,Pe=Math.max(Ee,N.width),Ke=window.innerWidth-Kl,je=WB(Te,[Kl,Math.max(Kl,Ke-Pe)]);o.style.minWidth=Ee+"px",o.style.left=je+"px"}else{const Ce=N.right-R.right,Te=window.innerWidth-I.right-Ce,te=window.innerWidth-P.right-Te,Ee=P.width+te,Pe=Math.max(Ee,N.width),Ke=window.innerWidth-Kl,je=WB(Te,[Kl,Math.max(Kl,Ke-Pe)]);o.style.minWidth=Ee+"px",o.style.right=je+"px"}const B=f(),G=window.innerHeight-Kl*2,H=_.scrollHeight,K=window.getComputedStyle(u),ne=parseInt(K.borderTopWidth,10),re=parseInt(K.paddingTop,10),oe=parseInt(K.borderBottomWidth,10),$=parseInt(K.paddingBottom,10),ue=ne+re+H+$+oe,se=Math.min(w.offsetHeight*5,ue),pe=window.getComputedStyle(_),Fe=parseInt(pe.paddingTop,10),$e=parseInt(pe.paddingBottom,10),at=P.top+P.height/2-Kl,me=G-at,Le=w.offsetHeight/2,Se=w.offsetTop+Le,ge=ne+re+Se,Ge=ue-ge;if(ge<=at){const Ce=B.length>0&&w===B[B.length-1].ref.current;o.style.bottom="0px";const Te=u.clientHeight-_.offsetTop-_.offsetHeight,te=Math.max(me,Le+(Ce?$e:0)+Te+oe),Ee=ge+te;o.style.height=Ee+"px"}else{const Ce=B.length>0&&w===B[0].ref.current;o.style.top="0px";const te=Math.max(at,ne+_.offsetTop+(Ce?Fe:0)+Le)+Ge;o.style.height=te+"px",_.scrollTop=ge-at+_.offsetTop}o.style.margin=`${Kl}px 0`,o.style.minHeight=se+"px",o.style.maxHeight=G+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[f,a.trigger,a.valueNode,o,u,_,w,x,a.dir,r]);Xa(()=>E(),[E]);const[T,D]=M.useState();Xa(()=>{u&&D(window.getComputedStyle(u).zIndex)},[u]);const F=M.useCallback(P=>{P&&v.current===!0&&(E(),S==null||S(),v.current=!1)},[E,S]);return h.jsx(QEe,{scope:t,contentWrapper:o,shouldExpandOnScrollRef:m,onScrollButtonChange:F,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:h.jsx(Ln.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});uZ.displayName=YEe;var ZEe="SelectPopperPosition",oR=M.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=Kl,...a}=n,s=KT(t);return h.jsx(q$,{...s,...a,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});oR.displayName=ZEe;var[QEe,SO]=cy(Fm,{}),lR="SelectViewport",cZ=M.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...i}=n,a=Gf(lR,t),s=SO(lR,t),o=Or(e,a.onViewportChange),l=M.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx($T.Slot,{scope:t,children:h.jsx(Ln.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:cn(i.onScroll,u=>{const c=u.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=s;if(f!=null&&f.current&&d){const m=Math.abs(l.current-c.scrollTop);if(m>0){const v=window.innerHeight-Kl*2,_=parseFloat(d.style.minHeight),w=parseFloat(d.style.height),x=Math.max(_,w);if(x<v){const S=x+m,E=Math.min(v,S),T=S-E;d.style.height=E+"px",d.style.bottom==="0px"&&(c.scrollTop=T>0?T:0,d.style.justifyContent="flex-end")}}}l.current=c.scrollTop})})})]})});cZ.displayName=lR;var dZ="SelectGroup",[JEe,eAe]=cy(dZ),tAe=M.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=mf();return h.jsx(JEe,{scope:t,id:i,children:h.jsx(Ln.div,{role:"group","aria-labelledby":i,...r,ref:e})})});tAe.displayName=dZ;var hZ="SelectLabel",fZ=M.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=eAe(hZ,t);return h.jsx(Ln.div,{id:i.id,...r,ref:e})});fZ.displayName=hZ;var ME="SelectItem",[nAe,pZ]=cy(ME),mZ=M.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:a,...s}=n,o=Hf(ME,t),l=Gf(ME,t),u=o.value===r,[c,d]=M.useState(a??""),[f,m]=M.useState(!1),v=Or(e,S=>{var E;return(E=l.itemRefCallback)==null?void 0:E.call(l,S,r,i)}),_=mf(),w=M.useRef("touch"),x=()=>{i||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(nAe,{scope:t,value:r,disabled:i,textId:_,isSelected:u,onItemTextChange:M.useCallback(S=>{d(E=>E||((S==null?void 0:S.textContent)??"").trim())},[]),children:h.jsx($T.ItemSlot,{scope:t,value:r,disabled:i,textValue:c,children:h.jsx(Ln.div,{role:"option","aria-labelledby":_,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...s,ref:v,onFocus:cn(s.onFocus,()=>m(!0)),onBlur:cn(s.onBlur,()=>m(!1)),onClick:cn(s.onClick,()=>{w.current!=="mouse"&&x()}),onPointerUp:cn(s.onPointerUp,()=>{w.current==="mouse"&&x()}),onPointerDown:cn(s.onPointerDown,S=>{w.current=S.pointerType}),onPointerMove:cn(s.onPointerMove,S=>{var E;w.current=S.pointerType,i?(E=l.onItemLeave)==null||E.call(l):w.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:cn(s.onPointerLeave,S=>{var E;S.currentTarget===document.activeElement&&((E=l.onItemLeave)==null||E.call(l))}),onKeyDown:cn(s.onKeyDown,S=>{var T;((T=l.searchRef)==null?void 0:T.current)!==""&&S.key===" "||(VEe.includes(S.key)&&x(),S.key===" "&&S.preventDefault())})})})})});mZ.displayName=ME;var Cx="SelectItemText",gZ=M.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...a}=n,s=Hf(Cx,t),o=Gf(Cx,t),l=pZ(Cx,t),u=WEe(Cx,t),[c,d]=M.useState(null),f=Or(e,x=>d(x),l.onItemTextChange,x=>{var S;return(S=o.itemTextRefCallback)==null?void 0:S.call(o,x,l.value,l.disabled)}),m=c==null?void 0:c.textContent,v=M.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:_,onNativeOptionRemove:w}=u;return Xa(()=>(_(v),()=>w(v)),[_,w,v]),h.jsxs(h.Fragment,{children:[h.jsx(Ln.span,{id:l.textId,...a,ref:f}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?Bf.createPortal(a.children,s.valueNode):null]})});gZ.displayName=Cx;var vZ="SelectItemIndicator",yZ=M.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return pZ(vZ,t).isSelected?h.jsx(Ln.span,{"aria-hidden":!0,...r,ref:e}):null});yZ.displayName=vZ;var uR="SelectScrollUpButton",xZ=M.forwardRef((n,e)=>{const t=Gf(uR,n.__scopeSelect),r=SO(uR,n.__scopeSelect),[i,a]=M.useState(!1),s=Or(e,r.onScrollButtonChange);return Xa(()=>{if(t.viewport&&t.isPositioned){let o=function(){const u=l.scrollTop>0;a(u)};const l=t.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[t.viewport,t.isPositioned]),i?h.jsx(wZ,{...n,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=t;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});xZ.displayName=uR;var cR="SelectScrollDownButton",_Z=M.forwardRef((n,e)=>{const t=Gf(cR,n.__scopeSelect),r=SO(cR,n.__scopeSelect),[i,a]=M.useState(!1),s=Or(e,r.onScrollButtonChange);return Xa(()=>{if(t.viewport&&t.isPositioned){let o=function(){const u=l.scrollHeight-l.clientHeight,c=Math.ceil(l.scrollTop)<u;a(c)};const l=t.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[t.viewport,t.isPositioned]),i?h.jsx(wZ,{...n,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=t;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});_Z.displayName=cR;var wZ=M.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...i}=n,a=Gf("SelectScrollButton",t),s=M.useRef(null),o=XT(t),l=M.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return M.useEffect(()=>()=>l(),[l]),Xa(()=>{var c;const u=o().find(d=>d.ref.current===document.activeElement);(c=u==null?void 0:u.ref.current)==null||c.scrollIntoView({block:"nearest"})},[o]),h.jsx(Ln.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:cn(i.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:cn(i.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:cn(i.onPointerLeave,()=>{l()})})}),rAe="SelectSeparator",bZ=M.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return h.jsx(Ln.div,{"aria-hidden":!0,...r,ref:e})});bZ.displayName=rAe;var dR="SelectArrow",iAe=M.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=KT(t),a=Hf(dR,t),s=Gf(dR,t);return a.open&&s.position==="popper"?h.jsx($$,{...i,...r,ref:e}):null});iAe.displayName=dR;var aAe="SelectBubbleInput",SZ=M.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const i=M.useRef(null),a=Or(r,i),s=BEe(e);return M.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==e&&c){const d=new Event("change",{bubbles:!0});c.call(o,e),o.dispatchEvent(d)}},[s,e]),h.jsx(Ln.select,{...t,style:{...jq,...t.style},ref:a,defaultValue:e})});SZ.displayName=aAe;function EZ(n){return n===""||n===void 0}function AZ(n){const e=Pl(n),t=M.useRef(""),r=M.useRef(0),i=M.useCallback(s=>{const o=t.current+s;e(o),function l(u){t.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(o)},[e]),a=M.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return M.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,a]}function TZ(n,e,t){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let s=sAe(n,Math.max(a,0));i.length===1&&(s=s.filter(u=>u!==t));const l=s.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==t?l:void 0}function sAe(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var oAe=JY,kZ=tZ,lAe=rZ,uAe=iZ,cAe=aZ,CZ=sZ,dAe=cZ,MZ=fZ,IZ=mZ,hAe=gZ,fAe=yZ,PZ=xZ,NZ=_Z,RZ=bZ;const DZ=oAe,LZ=lAe,EO=M.forwardRef(({className:n,children:e,...t},r)=>h.jsxs(kZ,{ref:r,className:Jt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,h.jsx(uAe,{asChild:!0,children:h.jsx(c$,{className:"h-4 w-4 opacity-50"})})]}));EO.displayName=kZ.displayName;const OZ=M.forwardRef(({className:n,...e},t)=>h.jsx(PZ,{ref:t,className:Jt("flex cursor-default items-center justify-center py-1",n),...e,children:h.jsx(mme,{className:"h-4 w-4"})}));OZ.displayName=PZ.displayName;const FZ=M.forwardRef(({className:n,...e},t)=>h.jsx(NZ,{ref:t,className:Jt("flex cursor-default items-center justify-center py-1",n),...e,children:h.jsx(c$,{className:"h-4 w-4"})}));FZ.displayName=NZ.displayName;const AO=M.forwardRef(({className:n,children:e,position:t="popper",...r},i)=>h.jsx(cAe,{children:h.jsxs(CZ,{ref:i,className:Jt("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[h.jsx(OZ,{}),h.jsx(dAe,{className:Jt("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),h.jsx(FZ,{})]})}));AO.displayName=CZ.displayName;const pAe=M.forwardRef(({className:n,...e},t)=>h.jsx(MZ,{ref:t,className:Jt("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));pAe.displayName=MZ.displayName;const J0=M.forwardRef(({className:n,children:e,...t},r)=>h.jsxs(IZ,{ref:r,className:Jt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(fAe,{children:h.jsx(pme,{className:"h-4 w-4"})})}),h.jsx(hAe,{children:e})]}));J0.displayName=IZ.displayName;const mAe=M.forwardRef(({className:n,...e},t)=>h.jsx(RZ,{ref:t,className:Jt("-mx-1 my-1 h-px bg-muted",n),...e}));mAe.displayName=RZ.displayName;const oi=M.forwardRef(({className:n,type:e,...t},r)=>h.jsx("input",{type:e,className:Jt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));oi.displayName="Input";function _s({className:n,...e}){return h.jsx("div",{className:Jt("animate-pulse rounded-md bg-muted",n),...e})}function gAe(){const[n,e]=M.useState("all"),[t,r]=M.useState(""),{data:i,isLoading:a}=FL(),s=i?Array.from(new Set(i.map(l=>(l.category||"").trim()).filter(Boolean))):[],o=i==null?void 0:i.filter(l=>{var d,f;const u=n==="all"?!0:(l.category||"").toLowerCase()===n.toLowerCase(),c=t?((d=l.title)==null?void 0:d.toLowerCase().includes(t.toLowerCase()))||((f=l.description)==null?void 0:f.toLowerCase().includes(t.toLowerCase())):!0;return u&&c});return h.jsx(h.Fragment,{children:h.jsx("section",{className:"py-12 bg-white",children:h.jsxs("div",{className:"container mx-auto px-4",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx("h1",{className:"font-heading text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:"Kegiatan Mahapala Narotama"}),h.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Eksplorasi alam, konservasi lingkungan, dan berbagi pengetahuan bersama Mahapala Narotama"})]}),h.jsx("div",{className:"max-w-4xl mx-auto mb-10",children:h.jsx("div",{className:"bg-gray-50 p-6 rounded-lg shadow-md",children:h.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Cari Kegiatan"}),h.jsx(oi,{id:"search",placeholder:"Cari judul atau deskripsi kegiatan...",value:t,onChange:l=>r(l.target.value)})]}),h.jsxs("div",{className:"w-full md:w-48",children:[h.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategori"}),h.jsxs(DZ,{value:n,onValueChange:e,children:[h.jsx(EO,{id:"category",children:h.jsx(LZ,{placeholder:"Semua Kategori"})}),h.jsxs(AO,{className:"bg-white",children:[h.jsx(J0,{value:"all",children:"Semua Kategori"}),s.map(l=>h.jsx(J0,{value:l,children:l},l))]})]})]})]})})}),a?h.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(l=>h.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-md animate-pulse",children:[h.jsx(_s,{className:"w-full h-48"}),h.jsxs("div",{className:"p-5",children:[h.jsxs("div",{className:"flex justify-between items-center mb-3",children:[h.jsx(_s,{className:"h-4 w-24"}),h.jsx(_s,{className:"h-6 w-16"})]}),h.jsx(_s,{className:"h-6 w-3/4 mb-2"}),h.jsx(_s,{className:"h-4 w-full mb-4"}),h.jsx(_s,{className:"h-4 w-1/3"})]})]},l))}):o&&o.length>0?h.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(l=>{var u;return h.jsx(JX,{activity:{...l,date:typeof l.date=="string"?l.date:((u=l.date)==null?void 0:u.toISOString())??""}},l.id)})}):h.jsxs("div",{className:"text-center py-8",children:[h.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Tidak ada kegiatan ditemukan"}),h.jsx("p",{className:"text-gray-500",children:"Coba ubah filter atau kata kunci pencarian Anda"})]})]})})})}function vAe(){var u;const n=typeof window<"u"?((u=window.useNavigate)==null?void 0:u.call(window))||(()=>{}):()=>{},e=()=>{typeof n=="function"&&n.length>0?n("/eduhub"):window.location.href="/eduhub"},[t,r]=M.useState(""),{data:i,isLoading:a}=hK(),s=M.useRef(null),o=i||[],l=o.filter(c=>t?c.title.toLowerCase().includes(t.toLowerCase())||c.description.toLowerCase().includes(t.toLowerCase()):!0);return M.useEffect(()=>{function c(m){if(!m)return!1;const v=window.getComputedStyle(m);if(v.display==="none"||v.visibility==="hidden"||v.opacity==="0")return!1;const _=m.getBoundingClientRect();return _.width>0&&_.height>0&&_.bottom>0&&_.right>0}function d(){const m=document.querySelector(".scroll-to-top, .scroll-to-top-visible, #scrollToTop, .scrollTopBtn"),v=s.current;v&&(m&&c(m)?v.classList.add("eduhub-fab-shift"):v.classList.remove("eduhub-fab-shift"))}d(),window.addEventListener("scroll",d),window.addEventListener("resize",d);const f=setInterval(d,400);return()=>{window.removeEventListener("scroll",d),window.removeEventListener("resize",d),clearInterval(f)}},[]),h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-full flex justify-center md:justify-end items-center mt-4 mb-2 pr-0 md:pr-4",children:h.jsxs("button",{ref:s,onClick:e,className:"bg-gradient-to-r from-green-500 via-green-400 to-green-600 text-white shadow-xl rounded-full px-6 py-3 font-bold text-lg flex items-center gap-2 hover:scale-105 hover:shadow-2xl transition-all duration-300 border-4 border-white/70 backdrop-blur-lg",style:{boxShadow:"0 4px 24px 0 rgba(34,197,94,0.18)"},children:[h.jsx("span",{className:"inline-block animate-pulse",children:""}),h.jsx("span",{children:"Ke EduHub"})]})}),h.jsx("section",{className:"py-12 bg-white",children:h.jsxs("div",{className:"container mx-auto px-4",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx("h1",{className:"font-heading text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:"Pembelajaran Mahapala Narotama"}),h.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Materi dan panduan kegiatan alam bebas yang dapat diakses oleh seluruh anggota Mahapala Narotama"})]}),h.jsx("div",{className:"max-w-md mx-auto mb-10",children:h.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg shadow-md",children:[h.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cari Materi"}),h.jsx(oi,{id:"search",placeholder:"Cari judul atau deskripsi materi...",value:t,onChange:c=>r(c.target.value)})]})}),a&&o.length===0?h.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(c=>h.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-pulse",children:[h.jsxs("div",{className:"flex items-center mb-4",children:[h.jsx(_s,{className:"h-12 w-12 rounded-full mr-4"}),h.jsx(_s,{className:"h-6 w-3/4"})]}),h.jsx(_s,{className:"h-4 w-full mb-2"}),h.jsx(_s,{className:"h-4 w-full mb-2"}),h.jsx(_s,{className:"h-4 w-2/3 mb-4"}),h.jsx(_s,{className:"h-4 w-24"})]},c))}):l&&l.length>0?h.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:l.map(c=>h.jsx(eK,{module:c},c.id+c.title))}):h.jsxs("div",{className:"text-center py-8",children:[h.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Tidak ada materi pembelajaran ditemukan"}),h.jsx("p",{className:"text-gray-500",children:"Coba ubah kata kunci pencarian Anda"})]})]})})]})}const yAe=n=>{const e=n.data();return{id:isNaN(Number(n.id))?Math.floor(Math.random()*1e6):Number(n.id),fullName:e.namalengkap||"",fieldName:e.namalapangan||"",batchName:e.namaangkatan||"",batchYear:e.tahun||0,registrationNumber:e.nomorregistrasi||"",membershipStatus:e.keanggotaan||"Tidak Aktif",photoUrl:e.foto||"",qrCode:e.url||"",email:e.email||"",phone:e.phone||"",gender:e.gender||""}},xAe=async()=>{try{const n=ti(un,"anggota"),e=await sa(n);return e.empty?(console.log("No members found"),[]):e.docs.map(yAe)}catch(n){throw console.error("Error fetching members:",n),n}},jZ=async(n,e)=>{const t=ti(un,"anggota"),r=mT(t,FW(n,"==",e),OD(1)),i=await sa(r);if(i.empty)return null;const s=i.docs[0].data();return{fullName:s.namalengkap||"",fieldName:s.namalapangan||"",batchName:s.namaangkatan||"",batchYear:s.tahun||0,registrationNumber:s.nomorregistrasi||"",membershipStatus:s.keanggotaan||"Tidak Aktif",photoUrl:s.foto||"",statusMahasiswa:s.statusMahasiswa||""}},_Ae=n=>BT({queryKey:["members",n],queryFn:()=>xAe()});var wAe=Object.defineProperty,IE=Object.getOwnPropertySymbols,BZ=Object.prototype.hasOwnProperty,UZ=Object.prototype.propertyIsEnumerable,qB=(n,e,t)=>e in n?wAe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,hR=(n,e)=>{for(var t in e||(e={}))BZ.call(e,t)&&qB(n,t,e[t]);if(IE)for(var t of IE(e))UZ.call(e,t)&&qB(n,t,e[t]);return n},fR=(n,e)=>{var t={};for(var r in n)BZ.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&IE)for(var r of IE(n))e.indexOf(r)<0&&UZ.call(n,r)&&(t[r]=n[r]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var jm;(n=>{const e=class qn{constructor(l,u,c,d){if(this.version=l,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],l<qn.MIN_VERSION||l>qn.MAX_VERSION)throw new RangeError("Version value out of range");if(d<-1||d>7)throw new RangeError("Mask value out of range");this.size=l*4+17;let f=[];for(let v=0;v<this.size;v++)f.push(!1);for(let v=0;v<this.size;v++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const m=this.addEccAndInterleave(c);if(this.drawCodewords(m),d==-1){let v=1e9;for(let _=0;_<8;_++){this.applyMask(_),this.drawFormatBits(_);const w=this.getPenaltyScore();w<v&&(d=_,v=w),this.applyMask(_)}}i(0<=d&&d<=7),this.mask=d,this.applyMask(d),this.drawFormatBits(d),this.isFunction=[]}static encodeText(l,u){const c=n.QrSegment.makeSegments(l);return qn.encodeSegments(c,u)}static encodeBinary(l,u){const c=n.QrSegment.makeBytes(l);return qn.encodeSegments([c],u)}static encodeSegments(l,u,c=1,d=40,f=-1,m=!0){if(!(qn.MIN_VERSION<=c&&c<=d&&d<=qn.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let v,_;for(v=c;;v++){const E=qn.getNumDataCodewords(v,u)*8,T=s.getTotalBits(l,v);if(T<=E){_=T;break}if(v>=d)throw new RangeError("Data too long")}for(const E of[qn.Ecc.MEDIUM,qn.Ecc.QUARTILE,qn.Ecc.HIGH])m&&_<=qn.getNumDataCodewords(v,E)*8&&(u=E);let w=[];for(const E of l){t(E.mode.modeBits,4,w),t(E.numChars,E.mode.numCharCountBits(v),w);for(const T of E.getData())w.push(T)}i(w.length==_);const x=qn.getNumDataCodewords(v,u)*8;i(w.length<=x),t(0,Math.min(4,x-w.length),w),t(0,(8-w.length%8)%8,w),i(w.length%8==0);for(let E=236;w.length<x;E^=253)t(E,8,w);let S=[];for(;S.length*8<w.length;)S.push(0);return w.forEach((E,T)=>S[T>>>3]|=E<<7-(T&7)),new qn(v,u,S,f)}getModule(l,u){return 0<=l&&l<this.size&&0<=u&&u<this.size&&this.modules[u][l]}getModules(){return this.modules}drawFunctionPatterns(){for(let c=0;c<this.size;c++)this.setFunctionModule(6,c,c%2==0),this.setFunctionModule(c,6,c%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const l=this.getAlignmentPatternPositions(),u=l.length;for(let c=0;c<u;c++)for(let d=0;d<u;d++)c==0&&d==0||c==0&&d==u-1||c==u-1&&d==0||this.drawAlignmentPattern(l[c],l[d]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(l){const u=this.errorCorrectionLevel.formatBits<<3|l;let c=u;for(let f=0;f<10;f++)c=c<<1^(c>>>9)*1335;const d=(u<<10|c)^21522;i(d>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,r(d,f));this.setFunctionModule(8,7,r(d,6)),this.setFunctionModule(8,8,r(d,7)),this.setFunctionModule(7,8,r(d,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,r(d,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,r(d,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,r(d,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let l=this.version;for(let c=0;c<12;c++)l=l<<1^(l>>>11)*7973;const u=this.version<<12|l;i(u>>>18==0);for(let c=0;c<18;c++){const d=r(u,c),f=this.size-11+c%3,m=Math.floor(c/3);this.setFunctionModule(f,m,d),this.setFunctionModule(m,f,d)}}drawFinderPattern(l,u){for(let c=-4;c<=4;c++)for(let d=-4;d<=4;d++){const f=Math.max(Math.abs(d),Math.abs(c)),m=l+d,v=u+c;0<=m&&m<this.size&&0<=v&&v<this.size&&this.setFunctionModule(m,v,f!=2&&f!=4)}}drawAlignmentPattern(l,u){for(let c=-2;c<=2;c++)for(let d=-2;d<=2;d++)this.setFunctionModule(l+d,u+c,Math.max(Math.abs(d),Math.abs(c))!=1)}setFunctionModule(l,u,c){this.modules[u][l]=c,this.isFunction[u][l]=!0}addEccAndInterleave(l){const u=this.version,c=this.errorCorrectionLevel;if(l.length!=qn.getNumDataCodewords(u,c))throw new RangeError("Invalid argument");const d=qn.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][u],f=qn.ECC_CODEWORDS_PER_BLOCK[c.ordinal][u],m=Math.floor(qn.getNumRawDataModules(u)/8),v=d-m%d,_=Math.floor(m/d);let w=[];const x=qn.reedSolomonComputeDivisor(f);for(let E=0,T=0;E<d;E++){let D=l.slice(T,T+_-f+(E<v?0:1));T+=D.length;const F=qn.reedSolomonComputeRemainder(D,x);E<v&&D.push(0),w.push(D.concat(F))}let S=[];for(let E=0;E<w[0].length;E++)w.forEach((T,D)=>{(E!=_-f||D>=v)&&S.push(T[E])});return i(S.length==m),S}drawCodewords(l){if(l.length!=Math.floor(qn.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let c=this.size-1;c>=1;c-=2){c==6&&(c=5);for(let d=0;d<this.size;d++)for(let f=0;f<2;f++){const m=c-f,_=(c+1&2)==0?this.size-1-d:d;!this.isFunction[_][m]&&u<l.length*8&&(this.modules[_][m]=r(l[u>>>3],7-(u&7)),u++)}}i(u==l.length*8)}applyMask(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let c=0;c<this.size;c++){let d;switch(l){case 0:d=(c+u)%2==0;break;case 1:d=u%2==0;break;case 2:d=c%3==0;break;case 3:d=(c+u)%3==0;break;case 4:d=(Math.floor(c/3)+Math.floor(u/2))%2==0;break;case 5:d=c*u%2+c*u%3==0;break;case 6:d=(c*u%2+c*u%3)%2==0;break;case 7:d=((c+u)%2+c*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][c]&&d&&(this.modules[u][c]=!this.modules[u][c])}}getPenaltyScore(){let l=0;for(let f=0;f<this.size;f++){let m=!1,v=0,_=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[f][w]==m?(v++,v==5?l+=qn.PENALTY_N1:v>5&&l++):(this.finderPenaltyAddHistory(v,_),m||(l+=this.finderPenaltyCountPatterns(_)*qn.PENALTY_N3),m=this.modules[f][w],v=1);l+=this.finderPenaltyTerminateAndCount(m,v,_)*qn.PENALTY_N3}for(let f=0;f<this.size;f++){let m=!1,v=0,_=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[w][f]==m?(v++,v==5?l+=qn.PENALTY_N1:v>5&&l++):(this.finderPenaltyAddHistory(v,_),m||(l+=this.finderPenaltyCountPatterns(_)*qn.PENALTY_N3),m=this.modules[w][f],v=1);l+=this.finderPenaltyTerminateAndCount(m,v,_)*qn.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let m=0;m<this.size-1;m++){const v=this.modules[f][m];v==this.modules[f][m+1]&&v==this.modules[f+1][m]&&v==this.modules[f+1][m+1]&&(l+=qn.PENALTY_N2)}let u=0;for(const f of this.modules)u=f.reduce((m,v)=>m+(v?1:0),u);const c=this.size*this.size,d=Math.ceil(Math.abs(u*20-c*10)/c)-1;return i(0<=d&&d<=9),l+=d*qn.PENALTY_N4,i(0<=l&&l<=2568888),l}getAlignmentPatternPositions(){if(this.version==1)return[];{const l=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(l*2-2))*2;let c=[6];for(let d=this.size-7;c.length<l;d-=u)c.splice(1,0,d);return c}}static getNumRawDataModules(l){if(l<qn.MIN_VERSION||l>qn.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*l+128)*l+64;if(l>=2){const c=Math.floor(l/7)+2;u-=(25*c-10)*c-55,l>=7&&(u-=36)}return i(208<=u&&u<=29648),u}static getNumDataCodewords(l,u){return Math.floor(qn.getNumRawDataModules(l)/8)-qn.ECC_CODEWORDS_PER_BLOCK[u.ordinal][l]*qn.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][l]}static reedSolomonComputeDivisor(l){if(l<1||l>255)throw new RangeError("Degree out of range");let u=[];for(let d=0;d<l-1;d++)u.push(0);u.push(1);let c=1;for(let d=0;d<l;d++){for(let f=0;f<u.length;f++)u[f]=qn.reedSolomonMultiply(u[f],c),f+1<u.length&&(u[f]^=u[f+1]);c=qn.reedSolomonMultiply(c,2)}return u}static reedSolomonComputeRemainder(l,u){let c=u.map(d=>0);for(const d of l){const f=d^c.shift();c.push(0),u.forEach((m,v)=>c[v]^=qn.reedSolomonMultiply(m,f))}return c}static reedSolomonMultiply(l,u){if(l>>>8||u>>>8)throw new RangeError("Byte out of range");let c=0;for(let d=7;d>=0;d--)c=c<<1^(c>>>7)*285,c^=(u>>>d&1)*l;return i(c>>>8==0),c}finderPenaltyCountPatterns(l){const u=l[1];i(u<=this.size*3);const c=u>0&&l[2]==u&&l[3]==u*3&&l[4]==u&&l[5]==u;return(c&&l[0]>=u*4&&l[6]>=u?1:0)+(c&&l[6]>=u*4&&l[0]>=u?1:0)}finderPenaltyTerminateAndCount(l,u,c){return l&&(this.finderPenaltyAddHistory(u,c),u=0),u+=this.size,this.finderPenaltyAddHistory(u,c),this.finderPenaltyCountPatterns(c)}finderPenaltyAddHistory(l,u){u[0]==0&&(l+=this.size),u.pop(),u.unshift(l)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(o,l,u){if(l<0||l>31||o>>>l)throw new RangeError("Value out of range");for(let c=l-1;c>=0;c--)u.push(o>>>c&1)}function r(o,l){return(o>>>l&1)!=0}function i(o){if(!o)throw new Error("Assertion error")}const a=class ki{constructor(l,u,c){if(this.mode=l,this.numChars=u,this.bitData=c,u<0)throw new RangeError("Invalid argument");this.bitData=c.slice()}static makeBytes(l){let u=[];for(const c of l)t(c,8,u);return new ki(ki.Mode.BYTE,l.length,u)}static makeNumeric(l){if(!ki.isNumeric(l))throw new RangeError("String contains non-numeric characters");let u=[];for(let c=0;c<l.length;){const d=Math.min(l.length-c,3);t(parseInt(l.substring(c,c+d),10),d*3+1,u),c+=d}return new ki(ki.Mode.NUMERIC,l.length,u)}static makeAlphanumeric(l){if(!ki.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],c;for(c=0;c+2<=l.length;c+=2){let d=ki.ALPHANUMERIC_CHARSET.indexOf(l.charAt(c))*45;d+=ki.ALPHANUMERIC_CHARSET.indexOf(l.charAt(c+1)),t(d,11,u)}return c<l.length&&t(ki.ALPHANUMERIC_CHARSET.indexOf(l.charAt(c)),6,u),new ki(ki.Mode.ALPHANUMERIC,l.length,u)}static makeSegments(l){return l==""?[]:ki.isNumeric(l)?[ki.makeNumeric(l)]:ki.isAlphanumeric(l)?[ki.makeAlphanumeric(l)]:[ki.makeBytes(ki.toUtf8ByteArray(l))]}static makeEci(l){let u=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)t(l,8,u);else if(l<16384)t(2,2,u),t(l,14,u);else if(l<1e6)t(6,3,u),t(l,21,u);else throw new RangeError("ECI assignment value out of range");return new ki(ki.Mode.ECI,0,u)}static isNumeric(l){return ki.NUMERIC_REGEX.test(l)}static isAlphanumeric(l){return ki.ALPHANUMERIC_REGEX.test(l)}getData(){return this.bitData.slice()}static getTotalBits(l,u){let c=0;for(const d of l){const f=d.mode.numCharCountBits(u);if(d.numChars>=1<<f)return 1/0;c+=4+f+d.bitData.length}return c}static toUtf8ByteArray(l){l=encodeURI(l);let u=[];for(let c=0;c<l.length;c++)l.charAt(c)!="%"?u.push(l.charCodeAt(c)):(u.push(parseInt(l.substring(c+1,c+3),16)),c+=2);return u}};a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let s=a;n.QrSegment=a})(jm||(jm={}));(n=>{(e=>{const t=class{constructor(i,a){this.ordinal=i,this.formatBits=a}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(jm||(jm={}));(n=>{(e=>{const t=class{constructor(i,a){this.modeBits=i,this.numBitsCharCount=a}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(jm||(jm={}));var T0=jm;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var bAe={L:T0.QrCode.Ecc.LOW,M:T0.QrCode.Ecc.MEDIUM,Q:T0.QrCode.Ecc.QUARTILE,H:T0.QrCode.Ecc.HIGH},VZ=128,zZ="L",HZ="#FFFFFF",GZ="#000000",WZ=!1,qZ=1,SAe=4,EAe=0,AAe=.1;function $Z(n,e=0){const t=[];return n.forEach(function(r,i){let a=null;r.forEach(function(s,o){if(!s&&a!==null){t.push(`M${a+e} ${i+e}h${o-a}v1H${a+e}z`),a=null;return}if(o===r.length-1){if(!s)return;a===null?t.push(`M${o+e},${i+e} h1v1H${o+e}z`):t.push(`M${a+e},${i+e} h${o+1-a}v1H${a+e}z`);return}s&&a===null&&(a=o)})}),t.join("")}function XZ(n,e){return n.slice().map((t,r)=>r<e.y||r>=e.y+e.h?t:t.map((i,a)=>a<e.x||a>=e.x+e.w?i:!1))}function TAe(n,e,t,r){if(r==null)return null;const i=n.length+t*2,a=Math.floor(e*AAe),s=i/e,o=(r.width||a)*s,l=(r.height||a)*s,u=r.x==null?n.length/2-o/2:r.x*s,c=r.y==null?n.length/2-l/2:r.y*s,d=r.opacity==null?1:r.opacity;let f=null;if(r.excavate){let v=Math.floor(u),_=Math.floor(c),w=Math.ceil(o+u-v),x=Math.ceil(l+c-_);f={x:v,y:_,w,h:x}}const m=r.crossOrigin;return{x:u,y:c,h:l,w:o,excavation:f,opacity:d,crossOrigin:m}}function kAe(n,e){return e!=null?Math.max(Math.floor(e),0):n?SAe:EAe}function KZ({value:n,level:e,minVersion:t,includeMargin:r,marginSize:i,imageSettings:a,size:s,boostLevel:o}){let l=wn.useMemo(()=>{const v=(Array.isArray(n)?n:[n]).reduce((_,w)=>(_.push(...T0.QrSegment.makeSegments(w)),_),[]);return T0.QrCode.encodeSegments(v,bAe[e],t,void 0,void 0,o)},[n,e,t,o]);const{cells:u,margin:c,numCells:d,calculatedImageSettings:f}=wn.useMemo(()=>{let m=l.getModules();const v=kAe(r,i),_=m.length+v*2,w=TAe(m,s,v,a);return{cells:m,margin:v,numCells:_,calculatedImageSettings:w}},[l,s,a,r,i]);return{qrcode:l,margin:c,cells:u,numCells:d,calculatedImageSettings:f}}var CAe=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),MAe=wn.forwardRef(function(e,t){const r=e,{value:i,size:a=VZ,level:s=zZ,bgColor:o=HZ,fgColor:l=GZ,includeMargin:u=WZ,minVersion:c=qZ,boostLevel:d,marginSize:f,imageSettings:m}=r,_=fR(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:w}=_,x=fR(_,["style"]),S=m==null?void 0:m.src,E=wn.useRef(null),T=wn.useRef(null),D=wn.useCallback(K=>{E.current=K,typeof t=="function"?t(K):t&&(t.current=K)},[t]),[F,P]=wn.useState(!1),{margin:N,cells:I,numCells:R,calculatedImageSettings:B}=KZ({value:i,level:s,minVersion:c,boostLevel:d,includeMargin:u,marginSize:f,imageSettings:m,size:a});wn.useEffect(()=>{if(E.current!=null){const K=E.current,ne=K.getContext("2d");if(!ne)return;let re=I;const oe=T.current,$=B!=null&&oe!==null&&oe.complete&&oe.naturalHeight!==0&&oe.naturalWidth!==0;$&&B.excavation!=null&&(re=XZ(I,B.excavation));const ue=window.devicePixelRatio||1;K.height=K.width=a*ue;const se=a/R*ue;ne.scale(se,se),ne.fillStyle=o,ne.fillRect(0,0,R,R),ne.fillStyle=l,CAe?ne.fill(new Path2D($Z(re,N))):I.forEach(function(pe,Fe){pe.forEach(function($e,at){$e&&ne.fillRect(at+N,Fe+N,1,1)})}),B&&(ne.globalAlpha=B.opacity),$&&ne.drawImage(oe,B.x+N,B.y+N,B.w,B.h)}}),wn.useEffect(()=>{P(!1)},[S]);const G=hR({height:a,width:a},w);let H=null;return S!=null&&(H=wn.createElement("img",{src:S,key:S,style:{display:"none"},onLoad:()=>{P(!0)},ref:T,crossOrigin:B==null?void 0:B.crossOrigin})),wn.createElement(wn.Fragment,null,wn.createElement("canvas",hR({style:G,height:a,width:a,ref:D,role:"img"},x)),H)});MAe.displayName="QRCodeCanvas";var YZ=wn.forwardRef(function(e,t){const r=e,{value:i,size:a=VZ,level:s=zZ,bgColor:o=HZ,fgColor:l=GZ,includeMargin:u=WZ,minVersion:c=qZ,boostLevel:d,title:f,marginSize:m,imageSettings:v}=r,_=fR(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:w,cells:x,numCells:S,calculatedImageSettings:E}=KZ({value:i,level:s,minVersion:c,boostLevel:d,includeMargin:u,marginSize:m,imageSettings:v,size:a});let T=x,D=null;v!=null&&E!=null&&(E.excavation!=null&&(T=XZ(x,E.excavation)),D=wn.createElement("image",{href:v.src,height:E.h,width:E.w,x:E.x+w,y:E.y+w,preserveAspectRatio:"none",opacity:E.opacity,crossOrigin:E.crossOrigin}));const F=$Z(T,w);return wn.createElement("svg",hR({height:a,width:a,viewBox:`0 0 ${S} ${S}`,ref:t,role:"img"},_),!!f&&wn.createElement("title",null,f),wn.createElement("path",{fill:o,d:`M0,0 h${S}v${S}H0z`,shapeRendering:"crispEdges"}),wn.createElement("path",{fill:l,d:F,shapeRendering:"crispEdges"}),D)});YZ.displayName="QRCodeSVG";function IAe({member:n}){const[e,t]=M.useState(!1),r=()=>{t(!0);const a=document.getElementById("printable-card"),s=document.body.innerHTML;a&&(document.body.innerHTML=a.innerHTML,window.print(),document.body.innerHTML=s,t(!1),window.location.reload())},i=JSON.stringify({id:n.id,name:n.fullName,registrationNumber:n.registrationNumber,status:n.membershipStatus});return h.jsxs("div",{className:"max-w-md mx-auto",children:[h.jsx(_c,{className:"mb-4 border-2 border-primary overflow-hidden",children:h.jsxs("div",{id:"printable-card",children:[h.jsxs(lL,{className:"bg-primary text-white p-4 flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-heading font-bold",children:"MAHAPALA NAROTAMA"}),h.jsx("p",{className:"text-xs",children:"Universitas Narotama Surabaya"})]}),h.jsx("div",{className:"text-right",children:h.jsxs("p",{className:"text-xs",children:["ID: ",n.registrationNumber]})})]}),h.jsxs(Im,{className:"p-4",children:[h.jsxs("div",{className:"flex",children:[h.jsx("div",{className:"mr-4",children:h.jsx("div",{className:"w-24 h-32 bg-gray-200 rounded-md flex items-center justify-center",children:n.photoUrl?h.jsx("img",{src:n.photoUrl,alt:n.fullName,className:"w-full h-full object-cover rounded-md"}):h.jsx(f$,{className:"h-10 w-10 text-gray-400"})})}),h.jsx("div",{className:"flex-1",children:h.jsx("table",{className:"w-full text-sm",children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("td",{className:"py-1 font-medium",children:"Nama"}),h.jsxs("td",{className:"py-1",children:[": ",n.fullName]})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"py-1 font-medium",children:"Nama Lapangan"}),h.jsxs("td",{className:"py-1",children:[": ",n.fieldName]})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"py-1 font-medium",children:"Angkatan"}),h.jsxs("td",{className:"py-1",children:[": ",n.batchName," ",n.batchYear]})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"py-1 font-medium",children:"Status"}),h.jsxs("td",{className:"py-1",children:[":",h.jsx("span",{className:`${n.membershipStatus==="Aktif"?"text-green-600":"text-amber-600"} font-medium ml-1`,children:n.membershipStatus})]})]})]})})})]}),h.jsx("div",{className:"mt-4 flex justify-center",children:h.jsx("div",{className:"p-2 bg-white rounded-md",children:h.jsx(YZ,{value:i,size:128})})})]})]})}),h.jsx("div",{className:"mt-4 flex justify-center",children:h.jsxs(zt,{onClick:r,disabled:e,className:"gap-2",children:[h.jsx(KD,{className:"h-4 w-4"}),"Cetak Kartu"]})})]})}const k0=M.forwardRef(({className:n,...e},t)=>h.jsx("div",{className:"relative w-full overflow-auto",children:h.jsx("table",{ref:t,className:Jt("w-full caption-bottom text-sm",n),...e})}));k0.displayName="Table";const C0=M.forwardRef(({className:n,...e},t)=>h.jsx("thead",{ref:t,className:Jt("[&_tr]:border-b",n),...e}));C0.displayName="TableHeader";const M0=M.forwardRef(({className:n,...e},t)=>h.jsx("tbody",{ref:t,className:Jt("[&_tr:last-child]:border-0",n),...e}));M0.displayName="TableBody";const PAe=M.forwardRef(({className:n,...e},t)=>h.jsx("tfoot",{ref:t,className:Jt("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...e}));PAe.displayName="TableFooter";const Zl=M.forwardRef(({className:n,...e},t)=>h.jsx("tr",{ref:t,className:Jt("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...e}));Zl.displayName="TableRow";const Rr=M.forwardRef(({className:n,...e},t)=>h.jsx("th",{ref:t,className:Jt("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...e}));Rr.displayName="TableHead";const Dr=M.forwardRef(({className:n,...e},t)=>h.jsx("td",{ref:t,className:Jt("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...e}));Dr.displayName="TableCell";const NAe=M.forwardRef(({className:n,...e},t)=>h.jsx("caption",{ref:t,className:Jt("mt-4 text-sm text-muted-foreground",n),...e}));NAe.displayName="TableCaption";function Mg({value:n,duration:e=1e3,className:t=""}){const[r,i]=M.useState(0),a=M.useRef(),s=M.useRef(),o=M.useRef(0);return M.useEffect(()=>{o.current=0,i(0);function l(u){s.current||(s.current=u);const c=Math.min((u-s.current)/e,1);i(Math.floor(c*(n-o.current)+o.current)),c<1?a.current=requestAnimationFrame(l):i(n)}return a.current=requestAnimationFrame(l),()=>{a.current&&cancelAnimationFrame(a.current),s.current=void 0}},[n,e]),h.jsx("span",{className:t,children:r.toLocaleString()})}function RAe({open:n,onClose:e,frontUrl:t,backUrl:r,fullName:i}){const[a,s]=M.useState(!0);M.useEffect(()=>{n&&s(!0)},[n]);const o=()=>{const l=new URLSearchParams({frontUrl:t,backUrl:r,fullName:i});window.open(`/member-card-3d?${l.toString()}`,"_blank")};return n?h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:[h.jsx("div",{className:"absolute inset-0",onClick:e}),h.jsxs("div",{className:"relative z-10 rounded-2xl overflow-hidden shadow-2xl bg-white/10 p-6 flex flex-col items-center",children:[h.jsxs("div",{className:"w-[340px] h-[220px] mb-4",style:{perspective:1200},children:[h.jsxs("div",{className:`relative w-full h-full transition-transform duration-700 [transform-style:preserve-3d] ${a?"":"[transform:rotateY(180deg)]"}`,children:[h.jsx("img",{src:t,alt:i+" - depan",className:"absolute w-full h-full object-cover rounded-2xl shadow-lg bg-white [backface-visibility:hidden]",style:{backfaceVisibility:"hidden",aspectRatio:"340/220"}}),h.jsx("img",{src:r,alt:i+" - belakang",className:"absolute w-full h-full object-cover rounded-2xl shadow-lg bg-white [backface-visibility:hidden]",style:{transform:"rotateY(180deg)",backfaceVisibility:"hidden",aspectRatio:"340/220"}})]}),h.jsx("button",{className:"absolute top-2 right-2 bg-white/80 hover:bg-white rounded-full p-2 shadow",title:"Tampilkan 3D Fullscreen",onClick:o,children:h.jsx(Ame,{className:"w-5 h-5 text-gray-700"})})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx(zt,{variant:"secondary",onClick:()=>s(!a),children:a?"Lihat Belakang":"Lihat Depan"}),h.jsx(zt,{variant:"outline",onClick:e,children:"Tutup"})]})]})]}):null}function DAe({onClose:n}){const[e,t]=M.useState(null);return M.useEffect(()=>{function r(){const s=new Date,o=s.getMonth()>0||s.getMonth()===0&&s.getDate()>26?s.getFullYear()+1:s.getFullYear();return new Date(o,0,26,0,0,0,0)}function i(){const s=new Date,l=r().getTime()-s.getTime();if(l<=0)return{days:0,hours:0,minutes:0,seconds:0};const u=Math.floor(l/(1e3*60*60*24)),c=Math.floor(l/(1e3*60*60)%24),d=Math.floor(l/(1e3*60)%60),f=Math.floor(l/1e3%60);return{days:u,hours:c,minutes:d,seconds:f}}t(i());const a=setInterval(()=>{t(i())},1e3);return()=>clearInterval(a)},[]),h.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/40",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-sm w-full text-center",children:[h.jsx("h2",{className:"text-xl font-bold mb-4",children:"Countdown Ulang Tahun"}),e?h.jsxs("div",{className:"mb-4 text-2xl font-mono flex justify-center gap-2",children:[h.jsxs("span",{children:[e.days," ",h.jsx("span",{className:"text-xs font-normal",children:"hari"})]}),h.jsx("span",{children:":"}),h.jsxs("span",{children:[String(e.hours).padStart(2,"0"),h.jsx("span",{className:"text-xs font-normal",children:"j"})]}),h.jsx("span",{children:":"}),h.jsxs("span",{children:[String(e.minutes).padStart(2,"0"),h.jsx("span",{className:"text-xs font-normal",children:"m"})]}),h.jsx("span",{children:":"}),h.jsxs("span",{children:[String(e.seconds).padStart(2,"0"),h.jsx("span",{className:"text-xs font-normal",children:"d"})]})]}):h.jsx("p",{className:"mb-4",children:"Menghitung..."}),h.jsxs("p",{className:"mb-4",children:["Menuju ulang tahun ",h.jsx("b",{children:"Mahapala Narotama"})," yang ke"," ",(()=>{const r=new Date;return(r.getMonth()>0||r.getMonth()===0&&r.getDate()>26?r.getFullYear()+1:r.getFullYear())-2017})()," ","pada tanggal 26 Januari ",(()=>{const r=new Date;return r.getMonth()>0||r.getMonth()===0&&r.getDate()>26?r.getFullYear()+1:r.getFullYear()})()]}),h.jsx(zt,{onClick:n,children:"Tutup"})]})})}function LAe(){const[n,e]=M.useState("fullName"),[t,r]=M.useState(""),[i,a]=M.useState(!0),[s,o]=M.useState(null),[l,u]=M.useState({open:!1,photoUrl:"",fullName:"",zoom:!1}),[c,d]=M.useState({open:!1,frontUrl:"",backUrl:"",fullName:""}),[f,m]=M.useState(!1),{data:v,isLoading:_}=_Ae(),w=()=>{},x=()=>{o(null),a(!0)},S=v==null?void 0:v.filter(K=>{if(!t)return!0;const ne=t.toLowerCase();switch(n){case"fullName":return K.fullName.toLowerCase().includes(ne);case"batchYear":return K.batchYear.toString().includes(ne);case"registrationNumber":return K.registrationNumber.toLowerCase().includes(ne);default:return!0}}),E=v==null?void 0:v.find(K=>K.id===s),T=new Date(2017,0,26),D=new Date,F=D.getFullYear()-T.getFullYear(),P=D.getMonth()-T.getMonth(),N=D.getDate()-T.getDate();let I=`${F} tahun`;P>0||P===0&&N>=0?I=`${F} tahun
${P>=0?P:12+P} bulan`:F>0&&(I=`${F-1} tahun
${12+P} bulan`);const R=(v==null?void 0:v.length)||0,B=v?Array.from(new Set(v.map(K=>K.batchName))).length:0,G=v?v.filter(K=>(K.gender||"").toLowerCase()==="laki-laki"||(K.gender||"").toLowerCase()==="l"||(K.gender||"").toLowerCase()==="male").length:0,H=v?v.filter(K=>(K.gender||"").toLowerCase()==="perempuan"||(K.gender||"").toLowerCase()==="p"||(K.gender||"").toLowerCase()==="female").length:0;return h.jsx(h.Fragment,{children:h.jsx("section",{id:"kartu-anggota",className:"py-8 sm:py-12 bg-white",children:h.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[h.jsxs("div",{className:"grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7 gap-3 sm:gap-4 mb-6 sm:mb-10 text-center",children:[h.jsxs("div",{className:"bg-green-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full relative",children:[h.jsx("button",{type:"button",className:"absolute top-2 right-2 p-1 rounded-full hover:bg-green-100 transition","aria-label":"Lihat hitung mundur ulang tahun",onClick:()=>m(!0),children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-pink-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7c0-1.105.895-2 2-2s2 .895 2 2"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7c0-1.105-.895-2-2-2s-2 .895-2 2"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v2"})]})}),h.jsx("span",{className:"text-xs text-gray-500 mb-1",children:"Umur Organisasi"}),h.jsx("span",{className:"text-2xl font-bold text-green-700 whitespace-pre-line",children:I}),h.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Sejak 26 Januari 2017"}),f&&h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:[h.jsx("div",{className:"absolute inset-0",onClick:()=>m(!1)}),h.jsxs("div",{className:"relative z-10 bg-white rounded-xl shadow-lg p-8 flex flex-col items-center min-w-[320px]",children:[h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-pink-500 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7c0-1.105.895-2 2-2s2 .895 2 2"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7c0-1.105-.895-2-2-2s-2 .895-2 2"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v2"})]}),h.jsx(DAe,{name:"Organisasi",onClose:()=>m(!1)}),h.jsx(zt,{className:"mt-4",variant:"outline",onClick:()=>m(!1),children:"Tutup"})]})]})]}),h.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full",children:[h.jsx("span",{className:"text-s text-gray-500 mb-1",children:"Jumlah Anggota"}),h.jsx(Mg,{value:R,className:"text-2xl font-bold text-blue-700"}),h.jsx("span",{className:"text-s text-gray-400 mt-1",children:"Total anggota terdaftar"})]}),h.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full",children:[h.jsx("span",{className:"text-s text-gray-500 mb-1",children:"Jumlah Angkatan"}),h.jsx(Mg,{value:B,className:"text-2xl font-bold text-yellow-700"}),h.jsx("span",{className:"text-s text-gray-400 mt-1",children:"Total Angkatan"})]}),h.jsxs("div",{className:"bg-emerald-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full",children:[h.jsx("span",{className:"text-s text-gray-500 mb-1",children:"Anggota Penuh"}),h.jsx(Mg,{value:v?v.filter(K=>K.membershipStatus==="Anggota Penuh").length:0,className:"text-2xl font-bold text-emerald-700"}),h.jsx("span",{className:"text-s text-gray-400 mt-1",children:"Total anggota penuh"})]}),h.jsxs("div",{className:"bg-lime-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full",children:[h.jsx("span",{className:"text-s text-gray-500 mb-1",children:"Anggota Muda"}),h.jsx(Mg,{value:v?v.filter(K=>K.membershipStatus==="Anggota Muda").length:0,className:"text-2xl font-bold text-lime-700"}),h.jsx("span",{className:"text-s text-gray-400 mt-1",children:"Total anggota muda"})]}),h.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full",children:[h.jsx("span",{className:"text-s text-gray-500 mb-1",children:"Anggota Laki-laki"}),h.jsx(Mg,{value:G,className:"text-2xl font-bold text-indigo-700"}),h.jsx("span",{className:"text-s text-gray-400 mt-1",children:"Total anggota laki-laki"})]}),h.jsxs("div",{className:"bg-pink-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full",children:[h.jsx("span",{className:"text-s text-gray-500 mb-1",children:"Anggota Perempuan"}),h.jsx(Mg,{value:H,className:"text-2xl font-bold text-pink-700"}),h.jsx("span",{className:"text-s text-gray-400 mt-1",children:"Total anggota perempuan"})]})]}),i?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"max-w-3xl mx-auto mb-8 sm:mb-10 bg-gray-50 p-3 sm:p-6 rounded-lg shadow-md",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("p",{className:"text-gray-700 mb-4",children:"Masukkan informasi anggota untuk pencarian:"}),h.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[h.jsx("div",{className:"flex-1",children:h.jsxs(DZ,{value:n,onValueChange:e,children:[h.jsx(EO,{children:h.jsx(LZ,{placeholder:"Pilih Tipe Pencarian"})}),h.jsxs(AO,{className:"bg-white",children:[h.jsx(J0,{value:"fullName",children:"Nama Lengkap"}),h.jsx(J0,{value:"batchYear",children:"Tahun Angkatan"}),h.jsx(J0,{value:"registrationNumber",children:"Nomor Registrasi"})]})]})}),h.jsx("div",{className:"flex-1",children:h.jsx(oi,{placeholder:"Masukkan kata kunci...",value:t,onChange:K=>r(K.target.value)})}),h.jsxs(zt,{onClick:w,className:"gap-2",children:[h.jsx(Cme,{className:"h-4 w-4"}),"Cari"]})]})]}),h.jsx("div",{className:"text-sm text-gray-500",children:h.jsxs("p",{className:"flex items-center gap-1",children:[h.jsx("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Data anggota hanya dapat diakses oleh pihak yang berwenang. Hasil pencarian akan menampilkan informasi dasar anggota."]})})]}),t?h.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow-md",children:_?h.jsx("div",{className:"p-8",children:h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsx(_s,{className:"h-8 w-full"}),h.jsx(_s,{className:"h-8 w-full"}),h.jsx(_s,{className:"h-8 w-full"}),h.jsx(_s,{className:"h-8 w-full"})]})}):S&&S.length>0?h.jsxs(k0,{className:"min-w-[600px] text-xs sm:text-sm md:text-base",children:[h.jsx(C0,{children:h.jsxs(Zl,{children:[h.jsx(Rr,{children:"Nama Lengkap"}),h.jsx(Rr,{children:"Nama Lapangan"}),h.jsx(Rr,{children:"Nama Angkatan"}),h.jsx(Rr,{children:"Tahun Angkatan"}),h.jsx(Rr,{children:"No. Registrasi"}),h.jsx(Rr,{children:"Keanggotaan"}),h.jsx(Rr,{children:"Detail"}),h.jsx(Rr,{children:"Aksi"})]})}),h.jsx(M0,{children:S.map(K=>{const ne=`https://mahapalanarotama.web.id/kartu-anggota-detail?type=namalapangan&input=${encodeURIComponent(K.fieldName)}`;return h.jsxs(Zl,{children:[h.jsx(Dr,{className:"font-medium",children:K.fullName}),h.jsx(Dr,{children:K.fieldName}),h.jsx(Dr,{children:K.batchName}),h.jsx(Dr,{children:K.batchYear}),h.jsx(Dr,{children:K.registrationNumber}),h.jsx(Dr,{children:K.membershipStatus==="Anggota Penuh"?h.jsx($s,{variant:"penuh",children:"Anggota Penuh"}):K.membershipStatus==="Anggota Muda"?h.jsx($s,{variant:"muda",children:"Anggota Muda"}):h.jsx($s,{children:K.membershipStatus})}),h.jsx(Dr,{children:h.jsx("a",{href:ne,target:"_blank",rel:"noopener noreferrer",title:"Lihat detail kartu anggota",children:h.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=80x80&data=${encodeURIComponent(ne)}`,alt:"Barcode detail kartu anggota",className:"w-16 h-16 object-contain hover:scale-110 transition cursor-pointer"})})}),h.jsxs(Dr,{className:"flex space-x-2",children:[h.jsx(zt,{variant:"outline",size:"icon",onClick:()=>u({open:!0,photoUrl:K.photoUrl||"",fullName:K.fullName}),className:"text-primary hover:text-primary-foreground hover:bg-primary",disabled:!K.photoUrl,children:h.jsx(xme,{className:"h-4 w-4"})}),h.jsx(zt,{variant:"outline",size:"icon",onClick:()=>d({open:!0,frontUrl:K.photoUrl||"",backUrl:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/back.png",fullName:K.fullName}),className:"text-primary hover:text-primary-foreground hover:bg-primary",disabled:!K.photoUrl,children:h.jsx("span",{className:"font-bold",children:"3D"})})]})]},K.id)})})]}):h.jsxs("div",{className:"text-center py-8",children:[h.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Tidak ada anggota ditemukan"}),h.jsx("p",{className:"text-gray-500",children:"Coba ubah kata kunci pencarian Anda"})]})}):h.jsxs("div",{className:"text-center py-8",children:[h.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Masukkan kata kunci untuk mencari anggota"}),h.jsx("p",{className:"text-gray-500",children:"Anda dapat mencari berdasarkan nama, tahun angkatan, atau nomor registrasi"})]}),h.jsx(wc,{open:l.open,onOpenChange:K=>u(ne=>({...ne,open:K})),children:h.jsx(bu,{className:"flex flex-col items-center max-w-full p-2 sm:p-6",children:l.photoUrl&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"relative overflow-hidden rounded border mt-3 mb-4 bg-white w-full max-w-[480px] h-[220px] sm:h-[300px] flex items-center justify-center cursor-zoom-in",style:{maxWidth:"95vw",maxHeight:"70vh"},tabIndex:0,onClick:K=>{K.stopPropagation(),u(ne=>({...ne,zoom:!0}))},onKeyDown:K=>{(K.key==="Enter"||K.key===" ")&&u(ne=>({...ne,zoom:!0}))},"aria-label":"Perbesar gambar",children:[h.jsx("img",{src:l.photoUrl,alt:l.fullName,className:"object-contain w-full h-full",style:{aspectRatio:"3/2",maxHeight:"100%",maxWidth:"100%"}}),h.jsx("span",{className:"absolute bottom-2 right-2 bg-black/60 text-white text-xs px-2 py-1 rounded pointer-events-none",children:"Klik untuk zoom"})]}),h.jsx(zt,{variant:"default",className:"w-full",onClick:async()=>{try{const ne=await(await fetch(l.photoUrl,{mode:"cors"})).blob(),re=window.URL.createObjectURL(ne),oe=document.createElement("a");oe.href=re,oe.download=l.photoUrl.split("/").pop()||"kartu-anggota.jpg",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),window.URL.revokeObjectURL(re)}catch{window.open(l.photoUrl,"_blank")}},children:"Unduh Kartu"}),l.zoom&&h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",onClick:()=>u(K=>({...K,zoom:!1})),children:h.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg p-2 sm:p-4",style:{maxWidth:"98vw",maxHeight:"95vh"},onClick:K=>K.stopPropagation(),children:[h.jsx("img",{src:l.photoUrl,alt:l.fullName,className:"object-contain",style:{maxHeight:"80vh",maxWidth:"95vw"}}),h.jsx(zt,{variant:"outline",className:"absolute top-2 right-2",onClick:()=>u(K=>({...K,zoom:!1})),children:"Tutup"})]})})]})})}),h.jsx(RAe,{open:c.open,onClose:()=>d(K=>({...K,open:!1})),frontUrl:c.frontUrl,backUrl:c.backUrl,fullName:c.fullName})]}):h.jsx(h.Fragment,{children:h.jsxs("div",{className:"mb-6",children:[h.jsx(zt,{variant:"outline",onClick:x,className:"mb-8",children:" Kembali ke Pencarian"}),E&&h.jsx(IAe,{member:{...E,id:String(E.id)}})]})})]})})})}function OAe(){const[n,e]=M.useState({title:"Hubungi Kami",description:"",whatsapp:"",email:"",instagram:"",cards:[]}),[t,r]=M.useState(!0);return M.useEffect(()=>{let i=()=>{};async function a(){const{db:s}=await gs(async()=>{const{db:c}=await Promise.resolve().then(()=>Jh);return{db:c}},void 0),{doc:o,getDoc:l}=await gs(async()=>{const{doc:c,getDoc:d}=await Promise.resolve().then(()=>Qh);return{doc:c,getDoc:d}},void 0),u=await l(o(s,"homepage","contact"));if(u.exists()){const c=u.data();e({title:c.title||"Hubungi Kami",description:c.description||"",whatsapp:c.whatsapp||"",email:c.email||"",instagram:c.instagram||"",cards:Array.isArray(c.cards)?c.cards:[]})}r(!1)}return a(),()=>i()},[]),{contact:n,loading:t}}function FAe(){const{contact:n,loading:e}=OAe(),t=[{date:"15 Agustus - 30 September 2025",title:"Pendaftaran Online dan Offline",desc:"Pengisian formulir pendaftaran dan pengumpulan berkas persyaratan"},{date:"05 - 07 Oktober 2025",title:"Tes Tertulis & Wawancara",desc:"Tes pengetahuan umum dan wawancara motivasi"},{date:"07 Oktober 2025",title:"Pengumuman Hasil Seleksi",desc:"Pengumuman calon anggota yang lolos seleksi"},{date:"08 Oktober - 13 November 2025",title:"Pra Diklat",desc:"Pelatihan dan Pembekalan Materi serta fisik"},{date:"15 - 17 November 2025",title:"Diklat Dasar",desc:"Pelatihan dasar kepencintaalaman dan team building"},{date:"17 November 2025",title:"Pelantikan Anggota Baru",desc:"Upacara pelantikan dan penyematan Scraft Kuning anggota baru"}];function r({item:w,delay:x}){const S=M.useRef(null),E=DEe(S,{once:!0,margin:"-50px"});return h.jsxs(Xn.div,{ref:S,className:"relative",initial:{opacity:0,y:-30},animate:E?{opacity:1,y:0}:{opacity:0,y:-30},transition:{duration:.5,delay:x},children:[h.jsx("div",{className:"absolute -left-[41px] border-4 border-white rounded-full bg-primary h-6 w-6"}),h.jsxs("div",{children:[h.jsx("span",{className:"text-sm text-gray-500",children:w.date}),h.jsx("h4",{className:"font-medium text-gray-800",children:w.title}),h.jsx("p",{className:"text-gray-600 text-sm",children:w.desc})]})]})}const[i,a]=M.useState(-1),[s,o]=M.useState("general"),[l,u]=M.useState(""),[c,d]=M.useState("");M.useEffect(()=>{zD().then(w=>{w!=null&&w.googleFormUrl&&u(w.googleFormUrl),w!=null&&w.googleFormDownloadUrl&&d(w.googleFormDownloadUrl)})},[]);const[f,m]=M.useState(!1);M.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);const v={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},_={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return h.jsxs(h.Fragment,{children:[h.jsx("section",{className:"py-8 sm:py-12 bg-white",children:h.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[h.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[h.jsxs("h1",{className:"font-heading text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800 mb-3 sm:mb-4 relative inline-block",children:["Informasi Pendaftaran Anggota Baru",h.jsx("span",{className:"absolute -bottom-2 left-0 w-full h-1 bg-primary rounded-full"})]}),h.jsx("p",{className:"text-base sm:text-lg text-gray-600 max-w-3xl mx-auto mt-4 sm:mt-6",children:"Bergabunglah dengan Mahapala Narotama dan jadilah bagian dari komunitas yang peduli terhadap pelestarian lingkungan dan eksplorasi alam."})]}),h.jsx("div",{className:"mb-6 sm:mb-8 flex overflow-x-auto scrollbar-hide",children:h.jsxs("div",{className:"max-w-4xl mx-auto flex space-x-1 p-1 bg-gray-100 rounded-lg w-full",children:[h.jsx(zt,{variant:s==="general"?"default":"ghost",onClick:()=>o("general"),className:"flex-1 whitespace-nowrap",children:"Informasi Umum"}),h.jsx(zt,{variant:s==="requirements"?"default":"ghost",onClick:()=>o("requirements"),className:"flex-1 whitespace-nowrap",children:"Persyaratan"}),h.jsx(zt,{variant:s==="timeline"?"default":"ghost",onClick:()=>o("timeline"),className:"flex-1 whitespace-nowrap",children:"Tahapan Seleksi"}),h.jsx(zt,{variant:s==="faq"?"default":"ghost",onClick:()=>o("faq"),className:"flex-1 whitespace-nowrap",children:"FAQ"})]})}),h.jsxs("div",{className:"max-w-4xl mx-auto",children:[s==="general"&&h.jsxs(Xn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"bg-white p-6 rounded-lg shadow-md",children:[h.jsx("h3",{className:"font-heading text-xl font-semibold mb-4",children:"Informasi Umum Pendaftaran"}),h.jsx("p",{className:"text-gray-700 mb-4",children:"Mahapala Narotama membuka pendaftaran anggota baru untuk mahasiswa aktif Universitas Narotama yang memiliki minat dan kepedulian pada alam, lingkungan, dan kegiatan outdoor. Pendaftaran dilaksanakan setahun sekali pada awal tahun akademik."}),h.jsx("p",{className:"text-gray-700 mb-4",children:"Sebagai anggota Mahapala Narotama, Anda akan memiliki kesempatan untuk:"}),h.jsxs(Xn.ul,{className:"space-y-3 mb-6 pl-6",variants:v,initial:"hidden",animate:"show",children:[h.jsxs(Xn.li,{variants:_,className:"flex items-start",children:[h.jsx(Sg,{className:"text-primary min-w-5 h-5 mr-2 mt-0.5"}),h.jsx("span",{children:"Mengikuti berbagai ekspedisi dan pendakian gunung di Indonesia"})]}),h.jsxs(Xn.li,{variants:_,className:"flex items-start",children:[h.jsx(Sg,{className:"text-primary min-w-5 h-5 mr-2 mt-0.5"}),h.jsx("span",{children:"Berpartisipasi dalam program konservasi dan pelestarian lingkungan"})]}),h.jsxs(Xn.li,{variants:_,className:"flex items-start",children:[h.jsx(Sg,{className:"text-primary min-w-5 h-5 mr-2 mt-0.5"}),h.jsx("span",{children:"Mempelajari keterampilan survival, navigasi, pertolongan pertama, panjat tebing"})]}),h.jsxs(Xn.li,{variants:_,className:"flex items-start",children:[h.jsx(Sg,{className:"text-primary min-w-5 h-5 mr-2 mt-0.5"}),h.jsx("span",{children:"Membangun jaringan dengan komunitas pecinta alam di seluruh Indonesia"})]}),h.jsxs(Xn.li,{variants:_,className:"flex items-start",children:[h.jsx(Sg,{className:"text-primary min-w-5 h-5 mr-2 mt-0.5"}),h.jsx("span",{children:"Mengembangkan kemampuan kepemimpinan dan kerja sama tim"})]})]}),h.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-400 p-4 mb-6",children:h.jsxs("div",{className:"flex",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx(_N,{className:"h-5 w-5 text-amber-400"})}),h.jsx("div",{className:"ml-3",children:h.jsx("p",{className:"text-sm text-amber-700",children:"Pendaftaran hanya dibuka selama periode yang ditentukan. Pastikan Anda melengkapi semua persyaratan dan mengikuti seluruh tahapan seleksi."})})]})}),h.jsx("div",{className:"mt-6 flex justify-center",children:h.jsx("a",{href:l||void 0,target:"_blank",rel:"noopener noreferrer",children:h.jsxs(zt,{className:"gap-2",disabled:!l,children:["Daftar Sekarang ",h.jsx(o$,{className:"h-4 w-4"})]})})})]}),s==="requirements"&&h.jsxs(Xn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"bg-white p-6 rounded-lg shadow-md",children:[h.jsx("h3",{className:"font-heading text-xl font-semibold mb-4",children:"Persyaratan Pendaftaran"}),h.jsxs("div",{className:"mb-6",children:[h.jsx("h4",{className:"font-medium text-lg mb-2",children:"Persyaratan Umum"}),h.jsxs("ul",{className:"space-y-2 pl-6 list-disc text-gray-700",children:[h.jsx("li",{children:"Mahasiswa aktif Universitas Narotama (dibuktikan dengan kartu mahasiswa)"}),h.jsx("li",{children:"Minimal semester 1 dan maksimal semester 5"}),h.jsx("li",{children:"Sehat jasmani dan rohani (dibuktikan dengan surat keterangan sehat)"}),h.jsx("li",{children:"Memiliki minat dalam kegiatan alam terbuka"}),h.jsx("li",{children:"Bersedia mengikuti seluruh rangkaian proses seleksi"}),h.jsx("li",{children:"Mendapat izin dari orang tua/wali (dibuktikan dengan surat pernyataan)"})]})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("h4",{className:"font-medium text-lg mb-2",children:"Dokumen Pendaftaran"}),h.jsxs("ul",{className:"space-y-2 pl-6 list-disc text-gray-700",children:[h.jsx("li",{children:"Formulir pendaftaran yang telah diisi lengkap"}),h.jsx("li",{children:"Pas foto berwarna ukuran 3x4 (1 lembar)"}),h.jsx("li",{children:"Fotokopi Kartu Mahasiswa"}),h.jsx("li",{children:"Surat keterangan sehat dari dokter"}),h.jsx("li",{children:"Surat pernyataan kesediaan mengikuti seleksi"}),h.jsx("li",{children:"Surat izin orang tua/wali"}),h.jsx("li",{children:"Essay singkat tentang motivasi bergabung dengan Mahapala (maksimal 1 halaman)"})]})]}),h.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[h.jsx("h4",{className:"font-medium text-lg mb-2",children:"Biaya Pendaftaran"}),h.jsx("p",{className:"text-gray-700 mb-2",children:"Biaya pendaftaran: Rp 250.000,-"}),h.jsx("p",{className:"text-gray-700 mb-2",children:"Biaya tersebut mencakup:"}),h.jsxs("ul",{className:"space-y-1 pl-6 list-disc text-gray-700",children:[h.jsx("li",{children:"Administrasi pendaftaran"}),h.jsx("li",{children:"Kit pendaftaran (formulir, modul, dan atribut)"}),h.jsx("li",{children:"Biaya Transportasi dan Tiket masuk"}),h.jsx("li",{children:"Biaya operasional diklat dasar"})]}),h.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"*Pembayaran dapat dilakukan melalui transfer bank atau tunai saat pendaftaran"})]}),h.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4",children:h.jsxs("div",{className:"flex",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx(Sg,{className:"h-5 w-5 text-green-400"})}),h.jsx("div",{className:"ml-3",children:h.jsx("p",{className:"text-sm text-green-700",children:'Semua dokumen persyaratan dikumpulkan dalam bentuk hardcopy pada saat pendaftaran dan softcopy dikirim ke email ukm.mahapala@narotama.ac.id dengan subjek "PENDAFTARANCAANG2025_[NAMA]_[NIM]"'})})]})})]}),s==="timeline"&&h.jsxs(Xn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"bg-white p-6 rounded-lg shadow-md",children:[h.jsx("h3",{className:"font-heading text-xl font-semibold mb-4",children:"Timeline Pendaftaran & Seleksi"}),h.jsx("div",{className:"relative ml-6 pl-8 border-l-2 border-primary/30 space-y-10",children:t.map((w,x)=>h.jsx(r,{item:w,delay:x*.15},x))}),h.jsx("div",{className:"mt-6",children:h.jsxs("div",{className:"bg-amber-50 border-l-4 border-amber-400 p-4 flex items-start",children:[h.jsx("span",{className:"flex-shrink-0 flex items-center justify-center mr-4",children:h.jsx(_N,{className:"h-6 w-6 text-amber-400"})}),h.jsx("div",{className:"flex-1 min-w-0",children:h.jsx("span",{className:"text-sm text-amber-700",children:"Jadwal pelaksanaan setiap tahapan seleksi dapat berubah sesuai situasi dan kebijakan panitia. Pastikan Anda selalu memantau pengumuman terbaru melalui kanal resmi Mahapala Narotama."})})]})})]}),s==="faq"&&h.jsxs(Xn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"bg-white p-6 rounded-lg shadow-md",children:[h.jsx("h3",{className:"font-heading text-xl font-semibold mb-6",children:"Pertanyaan Umum (FAQ)"}),(()=>{const w=[{q:"Apakah harus memiliki pengalaman kegiatan outdoor sebelumnya?",a:"Tidak, Anda tidak harus memiliki pengalaman kegiatan outdoor sebelumnya. Mahapala Narotama akan memberikan pelatihan dasar untuk semua anggota baru. Yang terpenting adalah minat dan komitmen untuk belajar."},{q:"Apakah ada persyaratan fisik tertentu?",a:"Tidak ada persyaratan fisik khusus, namun Anda diharapkan dalam kondisi sehat dan siap mengikuti rangkaian kegiatan outdoor yang mungkin membutuhkan stamina dan ketahanan fisik. Latihan fisik dasar akan diberikan selama proses seleksi."},{q:"Berapa banyak waktu yang perlu diluangkan jika menjadi anggota Mahapala?",a:"Sebagai anggota Mahapala, Anda diharapkan dapat menghadiri pertemuan rutin mingguan (2-3 jam) dan berpartisipasi dalam kegiatan bulanan (biasanya pada akhir pekan). Kegiatan ekspedisi atau pendakian biasanya dilakukan pada masa liburan semester."},{q:"Berapa biaya yang diperlukan setelah menjadi anggota?",a:"Anggota Mahapala akan dikenakan iuran bulanan sebesar Rp 25.000,- yang digunakan untuk operasional organisasi. Untuk kegiatan-kegiatan tertentu seperti ekspedisi atau pendakian, akan ada biaya tambahan yang besarnya tergantung pada jenis dan lokasi kegiatan."},{q:"Apakah perlu memiliki perlengkapan outdoor sendiri?",a:"Untuk tahap awal, Anda tidak perlu memiliki semua perlengkapan outdoor. Mahapala memiliki beberapa perlengkapan yang dapat dipinjam oleh anggota. Seiring berjalannya waktu, Anda dapat secara bertahap melengkapi perlengkapan pribadi."},{q:"Apakah saya bisa mengikuti kegiatan Mahapala sambil aktif di organisasi lain?",a:"Tidak disarankan, Tetapi Anda tetap bisa aktif di organisasi lain. Namun, perlu diingat bahwa sebagai anggota Mahapala, Anda diharapkan dapat berkomitmen untuk berpartisipasi dalam kegiatan-kegiatan penting dan memenuhi tanggung jawab sebagai anggota."}];return h.jsx("div",{className:"space-y-2",children:w.map((x,S)=>h.jsxs("div",{className:"border-b",children:[h.jsxs("button",{className:"w-full text-left py-3 font-medium text-lg text-primary flex items-center justify-between focus:outline-none",onClick:()=>a(i===S?-1:S),"aria-expanded":i===S,children:[x.q,h.jsx("span",{className:`ml-2 transition-transform ${i===S?"rotate-90":""}`,children:""})]}),i===S&&h.jsx("div",{className:"text-gray-700 mt-2 pb-3",children:x.a})]},S))})})(),h.jsxs("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[h.jsx("h4",{className:"font-medium text-center mb-3",children:"Masih punya pertanyaan lain?"}),h.jsx("p",{className:"text-gray-700 text-center mb-4",children:"Jika Anda memiliki pertanyaan lain yang belum terjawab, jangan ragu untuk menghubungi kami."}),h.jsx("div",{className:"flex justify-center",children:h.jsxs(zt,{variant:"outline",className:"gap-2",onClick:()=>m(!0),children:[h.jsx(H1,{className:"h-4 w-4"})," Hubungi Kami"]})})]})]})]}),h.jsx(Xn.div,{className:"max-w-4xl mx-auto mb-16",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5},children:h.jsxs("div",{className:"bg-gradient-to-br from-primary/5 to-primary/10 p-8 rounded-xl shadow-md",children:[h.jsxs("div",{className:"flex flex-col md:flex-row justify-between mb-10 space-y-4 md:space-y-0",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h2",{className:"text-2xl font-heading font-bold text-gray-800 mb-2",children:"Periode Pendaftaran 2025"}),h.jsx("p",{className:"text-gray-600",children:"Pendaftaran anggota baru Mahapala tahun 2025"})]}),h.jsx("div",{children:c?h.jsx("a",{href:c,download:"formulir_pendaftaran_ukm_mahapala_narotama_2025.docx",children:h.jsx(zt,{className:"gap-2 bg-primary hover:bg-primary/90",asChild:!0,children:h.jsxs("span",{children:[h.jsx(R6,{size:16}),"Unduh Formulir"]})})}):h.jsxs(zt,{className:"gap-2 bg-primary opacity-50 cursor-not-allowed",disabled:!0,children:[h.jsx(R6,{size:16}),"Unduh Formulir"]})})]}),h.jsxs("div",{className:"mb-8",children:[h.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[h.jsx("div",{className:"bg-primary text-white p-3 rounded-full",children:h.jsx(u$,{size:20})}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium text-lg",children:"Jadwal Pendaftaran"}),h.jsx("p",{className:"text-gray-600",children:"15 Agustus - 30 September 2025"})]})]}),h.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[h.jsx("div",{className:"bg-primary text-white p-3 rounded-full",children:h.jsx(YD,{size:20})}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium text-lg",children:"Kuota Anggota"}),h.jsx("p",{className:"text-gray-600",children:"Maksimal 50 mahasiswa baru"})]})]}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("div",{className:"bg-primary text-white p-3 rounded-full",children:h.jsx(yme,{size:20})}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium text-lg",children:"Persyaratan Utama"}),h.jsx("p",{className:"text-gray-600",children:"Mahasiswa aktif Universitas Narotama"})]})]})]})]})}),h.jsxs("div",{className:"mt-16",children:[h.jsx("h3",{className:"font-heading text-2xl font-bold text-center mb-8",children:"Kontak Informasi Pendaftaran"}),e?h.jsx("div",{className:"text-center text-gray-400",children:"Memuat kontak..."}):h.jsx("div",{className:"grid md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:n.cards&&n.cards.length>0?n.cards.map((w,x)=>h.jsx(_c,{className:"hover:shadow-lg transition duration-300 p-6",children:h.jsxs("div",{children:[h.jsx("div",{className:"font-bold text-lg",style:{marginBottom:0},children:w.title}),w.content.map((S,E)=>S.trim()===""?h.jsx("div",{style:{height:"1em"}},E):h.jsx("div",{className:"text-sm",children:S},E)),w.description&&h.jsx("div",{className:"text-sm text-gray-500",style:{marginTop:0},children:w.description})]})},x)):h.jsx("div",{className:"col-span-3 text-center text-gray-400",children:"Belum ada kontak pendaftaran."})})]})]})}),h.jsx(wc,{open:f,onOpenChange:m,children:h.jsx(bu,{className:"max-w-xs w-full p-0 rounded-xl",children:h.jsxs("div",{className:"p-6 flex flex-col items-center gap-0",children:[h.jsx("h2",{className:"font-heading text-lg font-bold",style:{marginBottom:0},children:n.title||"Hubungi Kami"}),n.description&&h.jsx("div",{className:"text-center text-sm text-gray-600",style:{marginTop:0,marginBottom:0},children:n.description}),h.jsxs("div",{className:"flex gap-6 justify-center",style:{marginTop:15},children:[n.instagram&&h.jsx("a",{href:`https://instagram.com/${n.instagram.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"hover:text-red-500 hover:scale-110 transition-transform",title:"Instagram",children:h.jsx(CT,{size:36})}),n.whatsapp&&h.jsx("a",{href:`https://wa.me/${n.whatsapp.replace(/[^0-9]/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"hover:text-green-600 hover:scale-110 transition-transform",title:"WhatsApp",children:h.jsx(G_,{size:36})}),n.email&&h.jsx("a",{href:`mailto:${n.email}`,className:"hover:text-blue-600 hover:scale-110 transition-transform",title:"Email",children:h.jsx(H1,{size:36})})]}),h.jsxs("div",{className:"text-center text-xs text-gray-500 mt-2",children:[n.instagram&&h.jsxs(h.Fragment,{children:[h.jsxs("span",{children:["Instagram: @",n.instagram.replace("@","")]}),h.jsx("br",{})]}),n.whatsapp&&h.jsxs(h.Fragment,{children:[h.jsxs("span",{children:["WhatsApp: +",n.whatsapp]}),h.jsx("br",{})]}),n.email&&h.jsx(h.Fragment,{children:h.jsxs("span",{children:["Email: ",n.email]})})]})]})})})]})}function jAe({open:n,onOpenChange:e,imageUrl:t,alt:r}){const i=wn.useRef(null),a=()=>{i.current&&i.current.requestFullscreen&&i.current.requestFullscreen()};return h.jsx(wc,{open:n,onOpenChange:e,children:h.jsxs(bu,{className:"max-w-2xl w-full p-0 rounded-xl bg-black/90 flex flex-col items-center relative",children:[h.jsx("button",{className:"absolute top-2 right-2 z-10 bg-white/80 hover:bg-white rounded-full p-1 shadow",onClick:()=>e(!1),"aria-label":"Tutup",children:h.jsx(W_,{size:24})}),h.jsxs("div",{className:"flex flex-col items-center w-full",children:[h.jsx("img",{ref:i,src:t,alt:r||"Preview",className:"max-h-[70vh] w-auto max-w-full rounded-xl object-contain bg-black cursor-zoom-in",onClick:a,style:{margin:"auto"}}),h.jsx("button",{className:"mt-4 px-4 py-2 rounded bg-white/80 hover:bg-white text-black font-semibold shadow",onClick:a,children:"Perbesar / Fullscreen"})]})]})})}function BAe(){const[n,e]=M.useState({title:"Hubungi Kami",description:"",whatsapp:"",email:"",instagram:""}),[t,r]=M.useState(!0);return M.useEffect(()=>{let i=()=>{};async function a(){const{db:s}=await gs(async()=>{const{db:c}=await Promise.resolve().then(()=>Jh);return{db:c}},void 0),{doc:o,getDoc:l}=await gs(async()=>{const{doc:c,getDoc:d}=await Promise.resolve().then(()=>Qh);return{doc:c,getDoc:d}},void 0),u=await l(o(s,"homepage","contact"));if(u.exists()){const c=u.data();e({title:c.title||"Hubungi Kami",description:c.description||"",whatsapp:c.whatsapp||"",email:c.email||"",instagram:c.instagram||""})}r(!1)}return a(),()=>i()},[]),{contact:n,loading:t}}function UAe(){const{contact:n}=BAe(),{data:e,isLoading:t}=fK(),[r,i]=M.useState(!1),[a,s]=M.useState(null);return h.jsx("section",{className:"py-10 sm:py-16 bg-gradient-to-br from-white via-blue-50 to-blue-100 min-h-screen",children:h.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[h.jsxs(Xn.div,{className:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6,type:"spring"},children:[h.jsx("h1",{className:"font-heading text-2xl sm:text-3xl md:text-4xl font-bold text-center sm:text-left bg-gradient-to-r from-primary to-blue-600 bg-clip-text text-transparent drop-shadow-lg",children:"Galeri Kegiatan"}),h.jsxs("div",{className:"flex gap-2 w-full sm:w-auto justify-center",children:[h.jsx(Eo,{href:"/",children:h.jsx(zt,{variant:"outline",className:"w-full sm:w-auto shadow-md hover:scale-105 transition-transform",children:"Kembali ke Beranda"})}),h.jsx(zt,{variant:"default",className:"w-full sm:w-auto shadow-md hover:scale-105 transition-transform bg-gradient-to-r from-primary to-blue-600 text-white",onClick:o=>{o.preventDefault(),i(!0)},children:"Hubungi Kami"})]})]}),t?h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 md:gap-6 animate-pulse",children:[...Array(9)].map((o,l)=>h.jsx("div",{className:"bg-gray-200 h-40 sm:h-56 md:h-64 rounded-xl"},l))}):e&&e.length>0?h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 sm:gap-3 md:gap-4 auto-rows-[120px] sm:auto-rows-[180px] md:auto-rows-[220px]",children:e.map((o,l)=>h.jsxs("div",{className:"relative overflow-hidden rounded-xl shadow-lg group border border-gray-100 bg-white hover:shadow-2xl transition-all duration-300 flex flex-col justify-end "+(l%7===0?"md:row-span-2 md:col-span-2 h-[120px] md:h-[320px]":l%5===0?"md:row-span-2 h-[120px] md:h-[320px]":"h-[120px] md:h-full"),style:{cursor:o.imageUrl?"pointer":"default"},onClick:()=>o.imageUrl&&s(o.imageUrl),children:[o.imageUrl?h.jsx("img",{src:o.imageUrl,alt:o.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",loading:"lazy"}):h.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center text-gray-400",children:"Tidak ada gambar"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition flex items-end justify-center pointer-events-none",children:h.jsxs("div",{className:"w-full p-2 pb-4 text-white text-center bg-gradient-to-t from-black/60 to-transparent rounded-b-xl",children:[h.jsx("h3",{className:"font-bold text-base mb-1 drop-shadow-lg line-clamp-1",children:o.title}),o.description&&h.jsx("p",{className:"text-xs line-clamp-2 drop-shadow",children:o.description})]})})]},o.id))}):h.jsxs(h.Fragment,{children:[h.jsx(jAe,{open:!!a,onOpenChange:o=>s(o?a:null),imageUrl:a||""}),h.jsx("div",{className:"text-center text-gray-500 py-20",children:e&&e.length===0?"Tidak ada data galeri.":null})]}),h.jsx(wc,{open:r,onOpenChange:i,children:h.jsx(bu,{className:"max-w-xs w-full p-0 rounded-xl",children:h.jsxs("div",{className:"p-6 flex flex-col items-center gap-0",children:[h.jsx("h2",{className:"font-heading text-lg font-bold",style:{marginBottom:0},children:n.title||"Hubungi Kami"}),n.description&&h.jsx("div",{className:"text-center text-sm text-gray-600",style:{marginTop:0,marginBottom:0},children:n.description}),h.jsxs("div",{className:"flex gap-6 justify-center",style:{marginTop:15},children:[n.instagram&&h.jsx("a",{href:`https://instagram.com/${n.instagram.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"hover:text-red-500 hover:scale-110 transition-transform",title:"Instagram",children:h.jsx(CT,{size:36})}),n.whatsapp&&h.jsx("a",{href:`https://wa.me/${n.whatsapp.replace(/[^0-9]/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"hover:text-green-600 hover:scale-110 transition-transform",title:"WhatsApp",children:h.jsx(G_,{size:36})}),n.email&&h.jsx("a",{href:`mailto:${n.email}`,className:"hover:text-blue-600 hover:scale-110 transition-transform",title:"Email",children:h.jsx(H1,{size:36})})]}),h.jsxs("div",{className:"text-center text-xs text-gray-500 mt-2",children:[n.instagram&&h.jsxs(h.Fragment,{children:[h.jsxs("span",{children:["Instagram: @",n.instagram.replace("@","")]}),h.jsx("br",{})]}),n.whatsapp&&h.jsxs(h.Fragment,{children:[h.jsxs("span",{children:["WhatsApp: +",n.whatsapp]}),h.jsx("br",{})]}),n.email&&h.jsx(h.Fragment,{children:h.jsxs("span",{children:["Email: ",n.email]})})]})]})})})]})})}function $B(n,e,t){const r=s1e(),i=HAe(n,t.timeZone,t.locale??r.locale);return"formatToParts"in i?VAe(i,e):zAe(i,e)}function VAe(n,e){const t=n.formatToParts(e);for(let r=t.length-1;r>=0;--r)if(t[r].type==="timeZoneName")return t[r].value}function zAe(n,e){const t=n.format(e).replace(/\u200E/g,""),r=/ [\w-+ ]+$/.exec(t);return r?r[0].substr(1):""}function HAe(n,e,t){return new Intl.DateTimeFormat(t?[t.code,"en-US"]:void 0,{timeZone:e,timeZoneName:n})}function GAe(n,e){const t=KAe(e);return"formatToParts"in t?qAe(t,n):$Ae(t,n)}const WAe={year:0,month:1,day:2,hour:3,minute:4,second:5};function qAe(n,e){try{const t=n.formatToParts(e),r=[];for(let i=0;i<t.length;i++){const a=WAe[t[i].type];a!==void 0&&(r[a]=parseInt(t[i].value,10))}return r}catch(t){if(t instanceof RangeError)return[NaN];throw t}}function $Ae(n,e){const t=n.format(e),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(t);return[parseInt(r[3],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10)]}const PM={},XB=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),XAe=XB==="06/25/2014, 00:00:00"||XB==="06/25/2014 00:00:00";function KAe(n){return PM[n]||(PM[n]=XAe?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:n,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),PM[n]}function ZZ(n,e,t,r,i,a,s){const o=new Date(0);return o.setUTCFullYear(n,e,t),o.setUTCHours(r,i,a,s),o}const KB=36e5,YAe=6e4,NM={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function TO(n,e,t){if(!n)return 0;let r=NM.timezoneZ.exec(n);if(r)return 0;let i,a;if(r=NM.timezoneHH.exec(n),r)return i=parseInt(r[1],10),YB(i)?-(i*KB):NaN;if(r=NM.timezoneHHMM.exec(n),r){i=parseInt(r[2],10);const s=parseInt(r[3],10);return YB(i,s)?(a=Math.abs(i)*KB+s*YAe,r[1]==="+"?-a:a):NaN}if(JAe(n)){e=new Date(e||Date.now());const s=t?e:ZAe(e),o=pR(s,n);return-(t?o:QAe(e,o,n))}return NaN}function ZAe(n){return ZZ(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())}function pR(n,e){const t=GAe(n,e),r=ZZ(t[0],t[1]-1,t[2],t[3]%24,t[4],t[5],0).getTime();let i=n.getTime();const a=i%1e3;return i-=a>=0?a:1e3+a,r-i}function QAe(n,e,t){let i=n.getTime()-e;const a=pR(new Date(i),t);if(e===a)return e;i-=a-e;const s=pR(new Date(i),t);return a===s?a:Math.max(a,s)}function YB(n,e){return-23<=n&&n<=23&&(e==null||0<=e&&e<=59)}const ZB={};function JAe(n){if(ZB[n])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:n}),ZB[n]=!0,!0}catch{return!1}}const eTe=60*1e3,tTe={X:function(n,e,t){const r=RM(t.timeZone,n);if(r===0)return"Z";switch(e){case"X":return QB(r);case"XXXX":case"XX":return i0(r);case"XXXXX":case"XXX":default:return i0(r,":")}},x:function(n,e,t){const r=RM(t.timeZone,n);switch(e){case"x":return QB(r);case"xxxx":case"xx":return i0(r);case"xxxxx":case"xxx":default:return i0(r,":")}},O:function(n,e,t){const r=RM(t.timeZone,n);switch(e){case"O":case"OO":case"OOO":return"GMT"+nTe(r,":");case"OOOO":default:return"GMT"+i0(r,":")}},z:function(n,e,t){switch(e){case"z":case"zz":case"zzz":return $B("short",n,t);case"zzzz":default:return $B("long",n,t)}}};function RM(n,e){const t=n?TO(n,e,!0)/eTe:(e==null?void 0:e.getTimezoneOffset())??0;if(Number.isNaN(t))throw new RangeError("Invalid time zone specified: "+n);return t}function PE(n,e){const t=n<0?"-":"";let r=Math.abs(n).toString();for(;r.length<e;)r="0"+r;return t+r}function i0(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=PE(Math.floor(r/60),2),a=PE(Math.floor(r%60),2);return t+i+e+a}function QB(n,e){return n%60===0?(n>0?"-":"+")+PE(Math.abs(n)/60,2):i0(n,e)}function nTe(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),a=r%60;return a===0?t+String(i):t+String(i)+e+PE(a,2)}function JB(n){const e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),+n-+e}const rTe=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,DM=36e5,eU=6e4,iTe=2,Xs={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:rTe};function QZ(n,e={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(n===null)return new Date(NaN);const t=e.additionalDigits==null?iTe:Number(e.additionalDigits);if(t!==2&&t!==1&&t!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]")return new Date(n.getTime());if(typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]")return new Date(n);if(Object.prototype.toString.call(n)!=="[object String]")return new Date(NaN);const r=aTe(n),{year:i,restDateString:a}=sTe(r.date,t),s=oTe(a,i);if(s===null||isNaN(s.getTime()))return new Date(NaN);if(s){const o=s.getTime();let l=0,u;if(r.time&&(l=lTe(r.time),l===null||isNaN(l)))return new Date(NaN);if(r.timeZone||e.timeZone){if(u=TO(r.timeZone||e.timeZone,new Date(o+l)),isNaN(u))return new Date(NaN)}else u=JB(new Date(o+l)),u=JB(new Date(o+l+u));return new Date(o+l+u)}else return new Date(NaN)}function aTe(n){const e={};let t=Xs.dateTimePattern.exec(n),r;if(t?(e.date=t[1],r=t[3]):(t=Xs.datePattern.exec(n),t?(e.date=t[1],r=t[2]):(e.date=null,r=n)),r){const i=Xs.timeZone.exec(r);i?(e.time=r.replace(i[1],""),e.timeZone=i[1].trim()):e.time=r}return e}function sTe(n,e){if(n){const t=Xs.YYY[e],r=Xs.YYYYY[e];let i=Xs.YYYY.exec(n)||r.exec(n);if(i){const a=i[1];return{year:parseInt(a,10),restDateString:n.slice(a.length)}}if(i=Xs.YY.exec(n)||t.exec(n),i){const a=i[1];return{year:parseInt(a,10)*100,restDateString:n.slice(a.length)}}}return{year:null}}function oTe(n,e){if(e===null)return null;let t,r,i;if(!n||!n.length)return t=new Date(0),t.setUTCFullYear(e),t;let a=Xs.MM.exec(n);if(a)return t=new Date(0),r=parseInt(a[1],10)-1,nU(e,r)?(t.setUTCFullYear(e,r),t):new Date(NaN);if(a=Xs.DDD.exec(n),a){t=new Date(0);const s=parseInt(a[1],10);return dTe(e,s)?(t.setUTCFullYear(e,0,s),t):new Date(NaN)}if(a=Xs.MMDD.exec(n),a){t=new Date(0),r=parseInt(a[1],10)-1;const s=parseInt(a[2],10);return nU(e,r,s)?(t.setUTCFullYear(e,r,s),t):new Date(NaN)}if(a=Xs.Www.exec(n),a)return i=parseInt(a[1],10)-1,rU(i)?tU(e,i):new Date(NaN);if(a=Xs.WwwD.exec(n),a){i=parseInt(a[1],10)-1;const s=parseInt(a[2],10)-1;return rU(i,s)?tU(e,i,s):new Date(NaN)}return null}function lTe(n){let e,t,r=Xs.HH.exec(n);if(r)return e=parseFloat(r[1].replace(",",".")),LM(e)?e%24*DM:NaN;if(r=Xs.HHMM.exec(n),r)return e=parseInt(r[1],10),t=parseFloat(r[2].replace(",",".")),LM(e,t)?e%24*DM+t*eU:NaN;if(r=Xs.HHMMSS.exec(n),r){e=parseInt(r[1],10),t=parseInt(r[2],10);const i=parseFloat(r[3].replace(",","."));return LM(e,t,i)?e%24*DM+t*eU+i*1e3:NaN}return null}function tU(n,e,t){e=e||0,t=t||0;const r=new Date(0);r.setUTCFullYear(n,0,4);const i=r.getUTCDay()||7,a=e*7+t+1-i;return r.setUTCDate(r.getUTCDate()+a),r}const uTe=[31,28,31,30,31,30,31,31,30,31,30,31],cTe=[31,29,31,30,31,30,31,31,30,31,30,31];function JZ(n){return n%400===0||n%4===0&&n%100!==0}function nU(n,e,t){if(e<0||e>11)return!1;if(t!=null){if(t<1)return!1;const r=JZ(n);if(r&&t>cTe[e]||!r&&t>uTe[e])return!1}return!0}function dTe(n,e){if(e<1)return!1;const t=JZ(n);return!(t&&e>366||!t&&e>365)}function rU(n,e){return!(n<0||n>52||e!=null&&(e<0||e>6))}function LM(n,e,t){return!(n<0||n>=25||e!=null&&(e<0||e>=60)||t!=null&&(t<0||t>=60))}const hTe=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function fTe(n,e,t={}){e=String(e);const r=e.match(hTe);if(r){const i=QZ(t.originalDate||n,t);e=r.reduce(function(a,s){if(s[0]==="'")return a;const o=a.indexOf(s),l=a[o-1]==="'",u=a.replace(s,"'"+tTe[s[0]](i,s,t)+"'");return l?u.substring(0,o-1)+u.substring(o+1):u},e)}return NL(n,e,t)}function pTe(n,e,t){n=QZ(n,t);const r=TO(e,n,!0),i=new Date(n.getTime()-r),a=new Date(0);return a.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),a.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),a}var OM="rovingFocusGroup.onEntryFocus",mTe={bubbles:!1,cancelable:!0},tw="RovingFocusGroup",[mR,eQ,gTe]=WD(tw),[vTe,tQ]=Bd(tw,[gTe]),[yTe,xTe]=vTe(tw),nQ=M.forwardRef((n,e)=>h.jsx(mR.Provider,{scope:n.__scopeRovingFocusGroup,children:h.jsx(mR.Slot,{scope:n.__scopeRovingFocusGroup,children:h.jsx(_Te,{...n,ref:e})})}));nQ.displayName=tw;var _Te=M.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:a,currentTabStopId:s,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:c=!1,...d}=n,f=M.useRef(null),m=Or(e,f),v=bO(a),[_,w]=Pv({prop:s,defaultProp:o??null,onChange:l,caller:tw}),[x,S]=M.useState(!1),E=Pl(u),T=eQ(t),D=M.useRef(!1),[F,P]=M.useState(0);return M.useEffect(()=>{const N=f.current;if(N)return N.addEventListener(OM,E),()=>N.removeEventListener(OM,E)},[E]),h.jsx(yTe,{scope:t,orientation:r,dir:v,loop:i,currentTabStopId:_,onItemFocus:M.useCallback(N=>w(N),[w]),onItemShiftTab:M.useCallback(()=>S(!0),[]),onFocusableItemAdd:M.useCallback(()=>P(N=>N+1),[]),onFocusableItemRemove:M.useCallback(()=>P(N=>N-1),[]),children:h.jsx(Ln.div,{tabIndex:x||F===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...n.style},onMouseDown:cn(n.onMouseDown,()=>{D.current=!0}),onFocus:cn(n.onFocus,N=>{const I=!D.current;if(N.target===N.currentTarget&&I&&!x){const R=new CustomEvent(OM,mTe);if(N.currentTarget.dispatchEvent(R),!R.defaultPrevented){const B=T().filter(re=>re.focusable),G=B.find(re=>re.active),H=B.find(re=>re.id===_),ne=[G,H,...B].filter(Boolean).map(re=>re.ref.current);aQ(ne,c)}}D.current=!1}),onBlur:cn(n.onBlur,()=>S(!1))})})}),rQ="RovingFocusGroupItem",iQ=M.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:a,children:s,...o}=n,l=mf(),u=a||l,c=xTe(rQ,t),d=c.currentTabStopId===u,f=eQ(t),{onFocusableItemAdd:m,onFocusableItemRemove:v,currentTabStopId:_}=c;return M.useEffect(()=>{if(r)return m(),()=>v()},[r,m,v]),h.jsx(mR.ItemSlot,{scope:t,id:u,focusable:r,active:i,children:h.jsx(Ln.span,{tabIndex:d?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:cn(n.onMouseDown,w=>{r?c.onItemFocus(u):w.preventDefault()}),onFocus:cn(n.onFocus,()=>c.onItemFocus(u)),onKeyDown:cn(n.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){c.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const x=STe(w,c.orientation,c.dir);if(x!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let E=f().filter(T=>T.focusable).map(T=>T.ref.current);if(x==="last")E.reverse();else if(x==="prev"||x==="next"){x==="prev"&&E.reverse();const T=E.indexOf(w.currentTarget);E=c.loop?ETe(E,T+1):E.slice(T+1)}setTimeout(()=>aQ(E))}}),children:typeof s=="function"?s({isCurrentTabStop:d,hasTabStop:_!=null}):s})})});iQ.displayName=rQ;var wTe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function bTe(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function STe(n,e,t){const r=bTe(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return wTe[r]}function aQ(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function ETe(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var ATe=nQ,TTe=iQ,YT="Tabs",[kTe,X6e]=Bd(YT,[tQ]),sQ=tQ(),[CTe,kO]=kTe(YT),oQ=M.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:i,defaultValue:a,orientation:s="horizontal",dir:o,activationMode:l="automatic",...u}=n,c=bO(o),[d,f]=Pv({prop:r,onChange:i,defaultProp:a??"",caller:YT});return h.jsx(CTe,{scope:t,baseId:mf(),value:d,onValueChange:f,orientation:s,dir:c,activationMode:l,children:h.jsx(Ln.div,{dir:c,"data-orientation":s,...u,ref:e})})});oQ.displayName=YT;var lQ="TabsList",uQ=M.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...i}=n,a=kO(lQ,t),s=sQ(t);return h.jsx(ATe,{asChild:!0,...s,orientation:a.orientation,dir:a.dir,loop:r,children:h.jsx(Ln.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});uQ.displayName=lQ;var cQ="TabsTrigger",dQ=M.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:i=!1,...a}=n,s=kO(cQ,t),o=sQ(t),l=pQ(s.baseId,r),u=mQ(s.baseId,r),c=r===s.value;return h.jsx(TTe,{asChild:!0,...o,focusable:!i,active:c,children:h.jsx(Ln.button,{type:"button",role:"tab","aria-selected":c,"aria-controls":u,"data-state":c?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...a,ref:e,onMouseDown:cn(n.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?s.onValueChange(r):d.preventDefault()}),onKeyDown:cn(n.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&s.onValueChange(r)}),onFocus:cn(n.onFocus,()=>{const d=s.activationMode!=="manual";!c&&!i&&d&&s.onValueChange(r)})})})});dQ.displayName=cQ;var hQ="TabsContent",fQ=M.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:i,children:a,...s}=n,o=kO(hQ,t),l=pQ(o.baseId,r),u=mQ(o.baseId,r),c=r===o.value,d=M.useRef(c);return M.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(tg,{present:i||c,children:({present:f})=>h.jsx(Ln.div,{"data-state":c?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:u,tabIndex:0,...s,ref:e,style:{...n.style,animationDuration:d.current?"0s":void 0},children:f&&a})})});fQ.displayName=hQ;function pQ(n,e){return`${n}-trigger-${e}`}function mQ(n,e){return`${n}-content-${e}`}var MTe=oQ,gQ=uQ,vQ=dQ,yQ=fQ;const ITe=MTe,xQ=M.forwardRef(({className:n,...e},t)=>h.jsx(gQ,{ref:t,className:Jt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));xQ.displayName=gQ.displayName;const Dp=M.forwardRef(({className:n,...e},t)=>h.jsx(vQ,{ref:t,className:Jt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));Dp.displayName=vQ.displayName;const Lp=M.forwardRef(({className:n,...e},t)=>h.jsx(yQ,{ref:t,className:Jt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));Lp.displayName=yQ.displayName;var PTe="Label",_Q=M.forwardRef((n,e)=>h.jsx(Ln.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));_Q.displayName=PTe;var wQ=_Q;const NTe=kT("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Jr=M.forwardRef(({className:n,...e},t)=>h.jsx(wQ,{ref:t,className:Jt(NTe(),n),...e}));Jr.displayName=wQ.displayName;var bQ="AlertDialog",[RTe,K6e]=Bd(bQ,[mX]),Ud=mX(),SQ=n=>{const{__scopeAlertDialog:e,...t}=n,r=Ud(e);return h.jsx(PX,{...r,...t,modal:!0})};SQ.displayName=bQ;var DTe="AlertDialogTrigger",LTe=M.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=Ud(t);return h.jsx(fye,{...i,...r,ref:e})});LTe.displayName=DTe;var OTe="AlertDialogPortal",EQ=n=>{const{__scopeAlertDialog:e,...t}=n,r=Ud(e);return h.jsx(NX,{...r,...t})};EQ.displayName=OTe;var FTe="AlertDialogOverlay",AQ=M.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=Ud(t);return h.jsx(mL,{...i,...r,ref:e})});AQ.displayName=FTe;var ev="AlertDialogContent",[jTe,BTe]=RTe(ev),UTe=Rq("AlertDialogContent"),TQ=M.forwardRef((n,e)=>{const{__scopeAlertDialog:t,children:r,...i}=n,a=Ud(t),s=M.useRef(null),o=Or(e,s),l=M.useRef(null);return h.jsx(uye,{contentName:ev,titleName:kQ,docsSlug:"alert-dialog",children:h.jsx(jTe,{scope:t,cancelRef:l,children:h.jsxs(gL,{role:"alertdialog",...a,...i,ref:o,onOpenAutoFocus:cn(i.onOpenAutoFocus,u=>{var c;u.preventDefault(),(c=l.current)==null||c.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[h.jsx(UTe,{children:r}),h.jsx(zTe,{contentRef:s})]})})})});TQ.displayName=ev;var kQ="AlertDialogTitle",CQ=M.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=Ud(t);return h.jsx(vL,{...i,...r,ref:e})});CQ.displayName=kQ;var MQ="AlertDialogDescription",IQ=M.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=Ud(t);return h.jsx(yL,{...i,...r,ref:e})});IQ.displayName=MQ;var VTe="AlertDialogAction",PQ=M.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=Ud(t);return h.jsx(xL,{...i,...r,ref:e})});PQ.displayName=VTe;var NQ="AlertDialogCancel",RQ=M.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,{cancelRef:i}=BTe(NQ,t),a=Ud(t),s=Or(e,i);return h.jsx(xL,{...a,...r,ref:s})});RQ.displayName=NQ;var zTe=({contentRef:n})=>{const e=`\`${ev}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ev}\` by passing a \`${MQ}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ev}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return M.useEffect(()=>{var r;document.getElementById((r=n.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,n]),null},HTe=SQ,GTe=EQ,DQ=AQ,LQ=TQ,OQ=PQ,FQ=RQ,jQ=CQ,BQ=IQ;const WTe=HTe,qTe=GTe,UQ=M.forwardRef(({className:n,...e},t)=>h.jsx(DQ,{className:Jt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e,ref:t}));UQ.displayName=DQ.displayName;const VQ=M.forwardRef(({className:n,...e},t)=>h.jsxs(qTe,{children:[h.jsx(UQ,{}),h.jsx(LQ,{ref:t,className:Jt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...e})]}));VQ.displayName=LQ.displayName;const zQ=({className:n,...e})=>h.jsx("div",{className:Jt("flex flex-col space-y-2 text-center sm:text-left",n),...e});zQ.displayName="AlertDialogHeader";const HQ=({className:n,...e})=>h.jsx("div",{className:Jt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});HQ.displayName="AlertDialogFooter";const GQ=M.forwardRef(({className:n,...e},t)=>h.jsx(jQ,{ref:t,className:Jt("text-lg font-semibold",n),...e}));GQ.displayName=jQ.displayName;const WQ=M.forwardRef(({className:n,...e},t)=>h.jsx(BQ,{ref:t,className:Jt("text-sm text-muted-foreground",n),...e}));WQ.displayName=BQ.displayName;const qQ=M.forwardRef(({className:n,...e},t)=>h.jsx(OQ,{ref:t,className:Jt(uL(),n),...e}));qQ.displayName=OQ.displayName;const $Q=M.forwardRef(({className:n,...e},t)=>h.jsx(FQ,{ref:t,className:Jt(uL({variant:"outline"}),"mt-2 sm:mt-0",n),...e}));$Q.displayName=FQ.displayName;const gR=M.forwardRef(({className:n,...e},t)=>h.jsx("textarea",{className:Jt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...e}));gR.displayName="Textarea";function $Te(n){const e=document.cookie.split(";");for(let t of e){const[r,i]=t.trim().split("=");if(r===n)return decodeURIComponent(i)}return null}function iU(n){document.cookie=`${n}=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT`}async function XTe(){return!0}const KTe="Ov23lisoZfewJvG9HtHK",YTe=window.location.origin+"/github-oauth-callback";function ZTe(){return`https://github.com/login/oauth/authorize?${new URLSearchParams({client_id:KTe,redirect_uri:YTe,scope:"repo user",allow_signup:"true"}).toString()}`}function QTe(){return new URLSearchParams(window.location.search).get("code")}async function JTe(n){try{const e=await fetch("/.netlify/functions/github-oauth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:n})});if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);const t=await e.json();if(!t.access_token)throw new Error("No access token received");return document.cookie=`github_token=${t.access_token}; path=/; max-age=3600; secure; samesite=strict`,t.access_token}catch(e){throw e}}function eke(n){const{repo:e="mahapalanarotama/OfficialWebsite",path:t="uploads",branch:r="main",onUpload:i}=n,[a,s]=M.useState(""),[o,l]=M.useState(null),[u,c]=M.useState(!1),[d,f]=M.useState(""),[m,v]=M.useState(""),[_,w]=M.useState("idle");M.useEffect(()=>{const D=$Te("github_token");D&&(w("testing"),XTe().then(F=>{F?(s(D),w("idle")):(iU("github_token"),w("idle"),f("Stored token is invalid. Please login again."))}))},[]);const x=D=>{var P;const F=(P=D.target.files)==null?void 0:P[0];if(F){if(!F.type.startsWith("image/")){f("Please select an image file.");return}if(F.size>10*1024*1024){f("File size must be less than 10MB.");return}l(F),f(""),v("")}},S=()=>{w("authing"),localStorage.setItem("github_oauth_redirect",window.location.pathname+window.location.search),window.location.href=ZTe()},E=()=>{iU("github_token"),s(""),w("idle"),v(""),f("")},T=async()=>{if(!(!o||!a)){c(!0),f(""),v("");try{const D=new FileReader;D.onload=async()=>{try{const F=D.result.split(",")[1],P=`${Date.now()}-${o.name.replace(/[^a-zA-Z0-9.-]/g,"_")}`,N=`${t}/${P}`,I=await fetch(`https://api.github.com/repos/${e}/contents/${N}`,{method:"PUT",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json",Accept:"application/vnd.github.v3+json"},body:JSON.stringify({message:`Upload image: ${P}`,content:F,branch:r})});if(!I.ok){const H=await I.json();throw new Error(H.message||`Upload failed: ${I.status} ${I.statusText}`)}const B=(await I.json()).content.download_url.replace("https://github.com/","https://raw.githubusercontent.com/").replace("/blob/","/");v(` Image uploaded successfully! URL: ${B}`),l(null),i&&i(B);const G=document.querySelector('input[type="file"]');G&&(G.value="")}catch(F){console.error("Upload error:",F),f(`Upload failed: ${F instanceof Error?F.message:"Unknown error"}`)}finally{c(!1)}},D.onerror=()=>{f("Failed to read file"),c(!1)},D.readAsDataURL(o)}catch(D){console.error("Upload preparation error:",D),f(`Failed to prepare upload: ${D instanceof Error?D.message:"Unknown error"}`),c(!1)}}};return h.jsxs("div",{className:"border p-4 rounded mb-4 bg-gray-50",children:[h.jsx("h3",{className:"font-semibold mb-3",children:" GitHub Image Upload"}),h.jsxs("div",{className:"mb-3 text-sm text-gray-600",children:[h.jsxs("p",{children:[h.jsx("strong",{children:"Repository:"})," ",e]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Upload Path:"})," ",t,"/"]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Branch:"})," ",r]})]}),h.jsx("div",{className:"mb-4",children:a?h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-green-600 font-bold",children:" GitHub Connected"}),h.jsx("button",{className:"bg-red-500 text-white px-3 py-1 text-sm rounded hover:bg-red-600",onClick:E,children:"Disconnect"})]}):h.jsxs("div",{children:[h.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded shadow hover:bg-blue-700 disabled:opacity-50",onClick:S,disabled:_!=="idle",children:_==="authing"?" Authenticating...":_==="testing"?" Verifying...":" Connect GitHub"}),_!=="idle"&&h.jsx("div",{className:"text-sm text-gray-600 mt-1",children:_==="authing"?"Redirecting to GitHub...":"Checking connection..."})]})}),a&&h.jsxs("div",{children:[h.jsxs("div",{className:"mb-3",children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"Select Image:"}),h.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),o&&h.jsxs("div",{className:"mb-3 p-2 bg-blue-50 rounded",children:[h.jsxs("p",{className:"text-sm text-gray-700",children:[" ",h.jsx("strong",{children:"Selected:"})," ",o.name]}),h.jsxs("p",{className:"text-xs text-gray-500",children:["Size: ",(o.size/1024).toFixed(1)," KB"]}),h.jsxs("p",{className:"text-xs text-gray-500",children:["Will upload to: ",e,"/",t,"/",Date.now(),"-",o.name]})]}),h.jsx("button",{onClick:T,disabled:!o||u,className:"bg-green-600 text-white px-4 py-2 rounded shadow hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?" Uploading...":" Upload to GitHub"})]}),d&&h.jsxs("div",{className:"mt-3 p-3 bg-red-100 border border-red-300 rounded text-red-700 text-sm",children:[h.jsx("strong",{children:" Error:"})," ",d]}),m&&h.jsx("div",{className:"mt-3 p-3 bg-green-100 border border-green-300 rounded text-green-700 text-sm",children:m})]})}function tke({value:n,onChange:e,repo:t,branch:r="main",path:i,addToGallery:a=!1}){const[s,o]=M.useState("link");return h.jsxs("div",{className:"mb-4",children:[h.jsxs("div",{className:"flex gap-2 mb-2",children:[h.jsx("button",{type:"button",className:`px-3 py-1 rounded ${s==="link"?"bg-green-600 text-white":"bg-gray-200"}`,onClick:()=>o("link"),children:"Link"}),h.jsx("button",{type:"button",className:`px-3 py-1 rounded ${s==="github"?"bg-green-600 text-white":"bg-gray-200"}`,onClick:()=>o("github"),children:"Upload ke GitHub"})]}),s==="link"?h.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-full",value:n,onChange:l=>e(l.target.value),placeholder:"Paste link gambar di sini"}):h.jsx(eke,{repo:t,branch:r,path:i,onUpload:e,addToGallery:a}),n&&h.jsx("div",{className:"mt-2",children:h.jsx("img",{src:n,alt:"preview",className:"max-h-40 rounded border"})})]})}function nke({open:n,onOpenChange:e,onSubmit:t,type:r,isEditing:i=!1,initialData:a={},activities:s=[],loading:o=!1,error:l}){const u=r==="activity"?a:null,c=r==="gallery"?a:null,d=r==="member"?a:null,f=E=>({fullName:E.namalengkap||E.fullName||"",fieldName:E.namalapangan||E.fieldName||"",batchName:E.namaangkatan||E.batchName||"",batchYear:E.tahun||E.batchYear||new Date().getFullYear(),registrationNumber:E.nomorregistrasi||E.registrationNumber||"",membershipStatus:E.keanggotaan||E.membershipStatus||"Anggota Muda",photoUrl:E.foto||E.photoUrl||"",email:E.email||"",phone:E.phone||"",gender:E.gender||"",statusMahasiswa:E.statusMahasiswa||"",url:E.url||"",updateat:E.updateat||"",id:E.id||""}),[m,v]=M.useState(r==="activity"?{title:(u==null?void 0:u.title)||"",description:(u==null?void 0:u.description)||"",date:(u==null?void 0:u.date)||"",category:(u==null?void 0:u.category)||"",imageUrl:(u==null?void 0:u.imageUrl)||""}:r==="gallery"?{title:(c==null?void 0:c.title)||"",description:(c==null?void 0:c.description)||"",imageUrl:(c==null?void 0:c.imageUrl)||"",activityId:(c==null?void 0:c.activityId)||""}:f(d||{})),[_,w]=M.useState("");M.useEffect(()=>{r==="activity"?v({title:(a==null?void 0:a.title)||"",description:(a==null?void 0:a.description)||"",date:(a==null?void 0:a.date)||"",category:(a==null?void 0:a.category)||"",imageUrl:(a==null?void 0:a.imageUrl)||""}):r==="gallery"?v({title:(a==null?void 0:a.title)||"",description:(a==null?void 0:a.description)||"",imageUrl:(a==null?void 0:a.imageUrl)||"",activityId:(a==null?void 0:a.activityId)||""}):r==="member"&&v(f(a||{}))},[a,r,i,n]),M.useEffect(()=>{async function E(){if(r==="member"&&n&&!i){const D=(await sa(ti(un,"anggota"))).docs.map(P=>parseInt(P.id,10)).filter(P=>!isNaN(P)),F=D.length>0?Math.max(...D)+1:1;w(String(F)),v(P=>({...P,id:String(F)}))}}E()},[r,n,i]);const x=async E=>{E.preventDefault(),r==="member"?await t({namalengkap:m.fullName||"",namalapangan:m.fieldName||"",namaangkatan:m.batchName||"",tahun:m.batchYear||new Date().getFullYear(),nomorregistrasi:m.registrationNumber||"",keanggotaan:m.membershipStatus||"Anggota Muda",foto:m.photoUrl||"",email:m.email||"",phone:m.phone||"",gender:m.gender||"",statusMahasiswa:m.statusMahasiswa,url:m.url||"",updateat:new Date().toISOString(),id:m.id||""}):i&&r==="gallery"&&(a!=null&&a.id)?await t({title:m.title||"",description:m.description||"",imageUrl:m.imageUrl||"",activityId:m.activityId||"",createdAt:m.createdAt||null,...r==="gallery"?{updatedAt:new Date().toISOString()}:{},id:a.id}):i&&r==="activity"&&(a!=null&&a.id)?await t({...m,id:a.id}):r==="gallery"?await t({title:m.title||"",description:m.description||"",imageUrl:m.imageUrl||"",activityId:m.activityId||"",createdAt:m.createdAt||null}):await t(m)},S=E=>{const{name:T,value:D}=E.target;v(F=>T==="tahun"?{...F,[T]:parseInt(D,10)}:{...F,[T]:D})};return h.jsx(wc,{open:n,onOpenChange:e,children:h.jsxs(bu,{className:"max-w-2xl w-full p-0 overflow-hidden","aria-describedby":"form-description",children:[h.jsxs(q1,{className:"bg-primary text-white px-6 py-4",children:[h.jsx(wL,{className:"text-xl",children:i?r==="member"?"Edit Data Anggota":r==="activity"?"Edit Kegiatan":"Edit Galeri":r==="member"?"Tambah Anggota Baru":r==="activity"?"Tambah Kegiatan Baru":"Tambah Galeri Baru"}),h.jsx(bL,{id:"form-description",children:r==="activity"?"Silakan lengkapi detail kegiatan berikut. Semua field wajib diisi.":r==="gallery"?"Silakan lengkapi detail galeri berikut. Semua field wajib diisi.":"Silakan lengkapi data anggota berikut. Field dengan tanda * wajib diisi."})]}),h.jsx("div",{className:"p-6 bg-white max-h-[70vh] overflow-y-auto",children:h.jsxs("form",{onSubmit:x,className:"space-y-4",children:[r==="member"?h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"fullName",children:"Nama Lengkap *"}),h.jsx(oi,{id:"fullName",name:"fullName",value:m.fullName||"",onChange:S,placeholder:"Masukkan nama lengkap",required:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"fieldName",children:"Nama Lapangan *"}),h.jsx(oi,{id:"fieldName",name:"fieldName",value:m.fieldName||"",onChange:S,placeholder:"Masukkan nama lapangan",required:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"batchName",children:"Nama Angkatan *"}),h.jsx(oi,{id:"batchName",name:"batchName",value:m.batchName||"",onChange:S,placeholder:"Contoh: Elang",required:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"batchYear",children:"Tahun Angkatan *"}),h.jsx(oi,{id:"batchYear",name:"batchYear",type:"number",min:"1990",max:new Date().getFullYear(),value:m.batchYear??"",onChange:S,required:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"registrationNumber",children:"Nomor Registrasi *"}),h.jsx(oi,{id:"registrationNumber",name:"registrationNumber",value:m.registrationNumber||"",onChange:S,placeholder:"Contoh: MPN-2025-001",required:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"membershipStatus",children:"Status Keanggotaan *"}),h.jsxs("select",{id:"membershipStatus",name:"membershipStatus",value:m.membershipStatus||"",onChange:S,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",required:!0,children:[h.jsx("option",{value:"Anggota Muda",children:"Anggota Muda"}),h.jsx("option",{value:"Anggota Penuh",children:"Anggota Penuh"}),h.jsx("option",{value:"Tidak Aktif",children:"Tidak Aktif"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"statusMahasiswa",children:"Status Mahasiswa *"}),h.jsxs("select",{id:"statusMahasiswa",name:"statusMahasiswa",value:m.statusMahasiswa||"",onChange:S,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",required:!0,children:[h.jsx("option",{value:"Aktif",children:"Aktif"}),h.jsx("option",{value:"Tidak Aktif",children:"Tidak Aktif"}),h.jsx("option",{value:"Lulus",children:"Lulus"}),h.jsx("option",{value:"Cuti",children:"Cuti"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"gender",children:"Gender"}),h.jsxs("select",{id:"gender",name:"gender",value:m.gender||"",onChange:S,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",children:[h.jsx("option",{value:"",children:"Pilih gender"}),h.jsx("option",{value:"Laki-laki",children:"Laki-laki"}),h.jsx("option",{value:"Perempuan",children:"Perempuan"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"email",children:"Email"}),h.jsx(oi,{id:"email",name:"email",type:"email",value:m.email||"",onChange:S,placeholder:"contoh@email.com"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"phone",children:"Nomor Telepon"}),h.jsx(oi,{id:"phone",name:"phone",type:"tel",value:m.phone||"",onChange:S,placeholder:"Contoh: 081234567890"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"photoUrl",children:"URL Foto KTA"}),h.jsx(oi,{id:"photoUrl",name:"photoUrl",type:"url",placeholder:"Masukkan URL foto KTA",value:m.photoUrl||"",onChange:S}),!!m.photoUrl&&h.jsxs("div",{className:"mt-2",children:[h.jsx("span",{className:"block text-xs text-gray-500 mb-1",children:"Preview:"}),/https?:\/\//.test(m.photoUrl||"")?h.jsx("img",{src:m.photoUrl,alt:"Preview Foto KTA",className:"max-h-32 rounded border",onError:E=>E.currentTarget.style.display="none"}):h.jsx("span",{className:"text-xs text-red-500",children:"URL tidak valid"}),h.jsx("div",{className:"text-xs text-blue-600 break-all mt-1",children:m.photoUrl})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"documentId",children:"Document ID"}),h.jsx(oi,{id:"documentId",name:"documentId",value:i?m.id||"":_||m.id||"",readOnly:!0,className:"bg-gray-100 cursor-not-allowed",placeholder:"ID dokumen Firestore"})]})]}):h.jsx(h.Fragment,{children:r==="learning"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"title",children:"Judul Pembelajaran"}),h.jsx(oi,{id:"title",name:"title",value:m.title||"",onChange:S,required:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"description",children:"Deskripsi Pembelajaran"}),h.jsx(gR,{id:"description",name:"description",value:m.description||"",onChange:S,required:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"icon",children:"Icon (misal: book, graduation-cap, dsb)"}),h.jsx(oi,{id:"icon",name:"icon",value:m.icon||"",onChange:S,placeholder:"Contoh: book",required:!0}),h.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[m.icon&&h.jsxs("span",{className:"inline-flex items-center gap-1 text-lg",children:[h.jsx("i",{className:`fa fa-${m.icon}`})," ",m.icon]}),h.jsx("a",{href:"https://fontawesome.com/v4.7/icons/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-xs hover:text-blue-800 ml-2",children:"Panduan icon (FontAwesome v4.7)"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"link",children:"Link Pembelajaran"}),h.jsx(oi,{id:"link",name:"link",value:m.link||"",onChange:S,placeholder:"https://...",required:!0})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"title",children:"Title"}),h.jsx(oi,{id:"title",name:"title",value:(r==="activity"||r==="gallery")&&m.title||"",onChange:S,required:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"description",children:"Description"}),h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx(gR,{id:"description",name:"description",value:(r==="activity"||r==="gallery")&&m.description||"",onChange:S,required:r==="activity"}),r==="activity"&&h.jsx("button",{type:"button",className:"p-2 rounded bg-blue-100 text-blue-700 hover:bg-blue-200 transition flex items-center justify-center",style:{height:"fit-content"},"aria-label":"Generate deskripsi otomatis dengan AI berdasarkan judul",title:"Generate deskripsi otomatis dengan AI berdasarkan judul",onClick:async()=>{if(!m.title)return alert("Isi judul kegiatan terlebih dahulu!");const E=m.description;v(T=>({...T,description:"Sedang generate deskripsi AI..."}));try{let T="";const D=m.title.trim().toLowerCase();D==="observasi lingkungan terpadu"?T="Observasi Lingkungan Terpadu merupakan salah satu kegiatan inti dalam rangkaian Pendidikan dan Latihan (Diklat) Anggota Baru Mahapala Narotama. Kegiatan ini tidak hanya berfokus pada pengamatan terhadap lingkungan alam, tetapi juga mencakup pelatihan dasar serta praktik lapangan yang berkaitan dengan berbagai keterampilan teknis di medan terbuka. Materi yang diberikan meliputi teknik dasar survival, pertolongan pertama pada gawat darurat (PPGD), manajemen perjalanan, teknik search and rescue (SAR), teknik Single Rope Technique (SRT), serta keterampilan dasar lain yang dibutuhkan dalam kegiatan alam bebas. Melalui kombinasi pelatihan dan praktik langsung di medan, peserta diajak untuk memahami kondisi alam secara komprehensif, sekaligus mengasah ketahanan fisik, mental, serta kemampuan kerja tim. Selain sebagai sarana pembelajaran teknis, kegiatan ini juga bertujuan membentuk karakter anggota baru yang kuat, disiplin, dan tangguh, serta menanamkan nilai-nilai solidaritas dan rasa kekeluargaan yang tinggi antar sesama peserta dan anggota Mahapala Narotama.":D.includes("dies natalis")?T="Dies Natalis VIII Mahapala Narotama adalah perayaan ulang tahun kedelapan Mahasiswa Pecinta Alam Universitas Narotama (Mahapala Narotama), yang dirayakan dengan penuh semangat dan kebersamaan oleh seluruh anggota organisasi. Acara ini bertujuan untuk memperingati perjalanan Mahapala Narotama dalam mengembangkan diri, menjaga kelestarian alam, dan berkontribusi positif di lingkungan kampus maupun masyarakat. Selama perayaan Dies Natalis VIII, berbagai kegiatan menarik dan bermanfaat diselenggarakan, seperti lomba-lomba bertema alam, dan keseruan lainnya bersama seluruh anggota mahapala narotama yang hadir. Melalui rangkaian acara tersebut, Mahapala Narotama berharap dapat semakin memperkuat eksistensinya sebagai organisasi pecinta alam yang peduli terhadap kelestarian lingkungan dan pengembangan karakter anggotanya. Dengan semangat kebersamaan dan dedikasi tinggi, Dies Natalis VIII Mahapala Narotama menjadi momentum penting dalam perjalanan organisasi ini untuk terus berinovasi, berkontribusi, dan menjaga alam sebagai warisan bersama.":D.includes("latihan kepemimpinan mahapala narotama")?T="Latihan Kepemimpinan Mahapala Narotama 2025 merupakan program tahunan yang diselenggarakan oleh Mahasiswa Pecinta Alam Universitas Narotama (Mahapala Narotama) untuk membekali anggota baru dengan keterampilan kepemimpinan dan manajemen organisasi. Kegiatan ini bertujuan untuk membentuk karakter pemimpin yang tangguh, solutif, dan berintegritas. Melalui serangkaian materi, diskusi, dan simulasi, peserta diajak untuk memahami nilai-nilai kepemimpinan, komunikasi efektif, serta strategi dalam menghadapi tantangan organisasi. Dengan pendekatan yang interaktif dan aplikatif, diharapkan peserta dapat mengembangkan potensi diri dan siap mengambil peran kepemimpinan di masa depan.":D.includes("buka bersama")?T="Buka Bersama Keluarga Besar Mahapala Narotama adalah tradisi tahunan yang diadakan oleh Mahasiswa Pecinta Alam Universitas Narotama (Mahapala Narotama) sebagai bentuk syukur dan mempererat tali silaturahmi antaranggota. Acara ini khusus dihadiri oleh seluruh anggota aktif Mahapala Narotama, baik dari angkatan baru maupun senior, serta alumni yang masih terlibat dalam kegiatan organisasi. Dalam suasana penuh kehangatan, kegiatan buka bersama ini menjadi ajang untuk berbagi cerita, pengalaman, dan memperkuat ikatan kekeluargaan di antara anggota Mahapala Narotama. Selain itu, acara ini juga seringkali diisi dengan tausiyah atau ceramah singkat yang bertujuan untuk menambah wawasan dan memperdalam pemahaman agama selama bulan Ramadhan. Melalui kegiatan ini, Mahapala Narotama berharap dapat terus menjaga dan meningkatkan rasa kebersamaan serta solidaritas di antara seluruh keluarga besar Mahapala Narotama, sehingga dapat menciptakan lingkungan yang harmonis dan penuh keberkahan.":T=await WX(`Buatkan deskripsi panjang, informatif, dan menarik untuk kegiatan Mahapala Narotama dengan judul: "${m.title}". Format deskripsi harus seperti contoh berikut:

"Buka Bersama Keluarga Besar Mahapala Narotama adalah tradisi tahunan yang diadakan oleh Mahasiswa Pecinta Alam Universitas Narotama (Mahapala Narotama) sebagai bentuk syukur dan mempererat tali silaturahmi antaranggota. Acara ini khusus dihadiri oleh seluruh anggota aktif Mahapala Narotama, baik dari angkatan baru maupun senior, serta alumni yang masih terlibat dalam kegiatan organisasi. Dalam suasana penuh kehangatan, kegiatan buka bersama ini menjadi ajang untuk berbagi cerita, pengalaman, dan memperkuat ikatan kekeluargaan di antara anggota Mahapala Narotama. Selain itu, acara ini juga seringkali diisi dengan tausiyah atau ceramah singkat yang bertujuan untuk menambah wawasan dan memperdalam pemahaman agama selama bulan Ramadhan. Melalui kegiatan ini, Mahapala Narotama berharap dapat terus menjaga dan meningkatkan rasa kebersamaan serta solidaritas di antara seluruh keluarga besar Mahapala Narotama, sehingga dapat menciptakan lingkungan yang harmonis dan penuh keberkahan."

Deskripsi yang dihasilkan harus menyebutkan "Mahapala Narotama" secara jelas, menjelaskan tujuan, manfaat, suasana, peserta, dan nilai kebersamaan atau karakter yang relevan. Gunakan gaya naratif-informatif, minimal 5 kalimat, dan jangan mengarang fakta yang tidak masuk akal. Jangan gunakan kata 'maaf' atau jawaban singkat.`),!T||T.toLowerCase().includes("maaf")||T.length<10?(v(F=>({...F,description:E})),alert("Gagal generate deskripsi otomatis. Silakan coba lagi atau isi manual.")):v(F=>({...F,description:T}))}catch{v(D=>({...D,description:E})),alert("Terjadi error saat menghubungi AI. Silakan coba lagi nanti.")}},children:h.jsx(Mme,{className:"w-5 h-5"})})]})]}),r==="activity"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"date",children:"Date"}),h.jsx(oi,{id:"date",name:"date",type:"date",value:m.date||"",onChange:S,required:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"category",children:"Category"}),h.jsx(oi,{id:"category",name:"category",value:m.category||"",onChange:S,required:!0})]})]}),r==="gallery"&&h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"activityId",children:"Related Activity"}),h.jsxs("select",{id:"activityId",name:"activityId",value:m.activityId||"",onChange:S,className:"w-full rounded-md border p-2",children:[h.jsx("option",{value:"",children:"None"}),s.map(E=>h.jsx("option",{value:E.id,children:E.title},E.id))]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"imageUrl",children:"Image"}),h.jsx(tke,{value:m.imageUrl||"",onChange:E=>{S({target:{name:"imageUrl",value:E}})},repo:"mahapalanarotama/OfficialWebsite",branch:"main",path:r==="activity"?"Img/activities":"Img/gallery",addToGallery:r==="gallery"})]})]})}),l&&h.jsx("p",{className:"text-sm text-red-500 mt-4",children:l}),h.jsx(_L,{className:"pt-4",children:h.jsxs(zt,{type:"submit",disabled:o,children:[o&&h.jsx(Sme,{className:"mr-2 h-4 w-4 animate-spin"}),i?"Perbarui":"Simpan"]})})]})})]})})}function XQ(n,e){const t=M.useRef(e);M.useEffect(function(){e!==t.current&&n.attributionControl!=null&&(t.current!=null&&n.attributionControl.removeAttribution(t.current),e!=null&&n.attributionControl.addAttribution(e)),t.current=e},[n,e])}const rke=1;function ike(n){return Object.freeze({__version:rke,map:n})}function KQ(n,e){return Object.freeze({...n,...e})}const YQ=M.createContext(null),ZQ=YQ.Provider;function CO(){const n=M.useContext(YQ);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function QQ(n){function e(t,r){const{instance:i,context:a}=n(t).current;return M.useImperativeHandle(r,()=>i),t.children==null?null:wn.createElement(ZQ,{value:a},t.children)}return M.forwardRef(e)}function ake(n){function e(t,r){const[i,a]=M.useState(!1),{instance:s}=n(t,a).current;M.useImperativeHandle(r,()=>s),M.useEffect(function(){i&&s.update()},[s,i,t.children]);const o=s._contentNode;return o?Bf.createPortal(t.children,o):null}return M.forwardRef(e)}function ske(n){function e(t,r){const{instance:i}=n(t).current;return M.useImperativeHandle(r,()=>i),null}return M.forwardRef(e)}function MO(n,e){const t=M.useRef();M.useEffect(function(){return e!=null&&n.instance.on(e),t.current=e,function(){t.current!=null&&n.instance.off(t.current),t.current=null}},[n,e])}function ZT(n,e){const t=n.pane??e.pane;return t?{...n,pane:t}:n}function oke(n,e){return function(r,i){const a=CO(),s=n(ZT(r,a),a);return XQ(a.map,r.attribution),MO(s.current,r.eventHandlers),e(s.current,a,r,i),s}}var vR={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(n,e){(function(t,r){r(e)})(Lne,function(t){var r="1.9.4";function i(p){var b,k,j,z;for(k=1,j=arguments.length;k<j;k++){z=arguments[k];for(b in z)p[b]=z[b]}return p}var a=Object.create||function(){function p(){}return function(b){return p.prototype=b,new p}}();function s(p,b){var k=Array.prototype.slice;if(p.bind)return p.bind.apply(p,k.call(arguments,1));var j=k.call(arguments,2);return function(){return p.apply(b,j.length?j.concat(k.call(arguments)):arguments)}}var o=0;function l(p){return"_leaflet_id"in p||(p._leaflet_id=++o),p._leaflet_id}function u(p,b,k){var j,z,Y,he;return he=function(){j=!1,z&&(Y.apply(k,z),z=!1)},Y=function(){j?z=arguments:(p.apply(k,arguments),setTimeout(he,b),j=!0)},Y}function c(p,b,k){var j=b[1],z=b[0],Y=j-z;return p===j&&k?p:((p-z)%Y+Y)%Y+z}function d(){return!1}function f(p,b){if(b===!1)return p;var k=Math.pow(10,b===void 0?6:b);return Math.round(p*k)/k}function m(p){return p.trim?p.trim():p.replace(/^\s+|\s+$/g,"")}function v(p){return m(p).split(/\s+/)}function _(p,b){Object.prototype.hasOwnProperty.call(p,"options")||(p.options=p.options?a(p.options):{});for(var k in b)p.options[k]=b[k];return p.options}function w(p,b,k){var j=[];for(var z in p)j.push(encodeURIComponent(k?z.toUpperCase():z)+"="+encodeURIComponent(p[z]));return(!b||b.indexOf("?")===-1?"?":"&")+j.join("&")}var x=/\{ *([\w_ -]+) *\}/g;function S(p,b){return p.replace(x,function(k,j){var z=b[j];if(z===void 0)throw new Error("No value provided for variable "+k);return typeof z=="function"&&(z=z(b)),z})}var E=Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"};function T(p,b){for(var k=0;k<p.length;k++)if(p[k]===b)return k;return-1}var D="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function F(p){return window["webkit"+p]||window["moz"+p]||window["ms"+p]}var P=0;function N(p){var b=+new Date,k=Math.max(0,16-(b-P));return P=b+k,window.setTimeout(p,k)}var I=window.requestAnimationFrame||F("RequestAnimationFrame")||N,R=window.cancelAnimationFrame||F("CancelAnimationFrame")||F("CancelRequestAnimationFrame")||function(p){window.clearTimeout(p)};function B(p,b,k){if(k&&I===N)p.call(b);else return I.call(window,s(p,b))}function G(p){p&&R.call(window,p)}var H={__proto__:null,extend:i,create:a,bind:s,get lastId(){return o},stamp:l,throttle:u,wrapNum:c,falseFn:d,formatNum:f,trim:m,splitWords:v,setOptions:_,getParamString:w,template:S,isArray:E,indexOf:T,emptyImageUrl:D,requestFn:I,cancelFn:R,requestAnimFrame:B,cancelAnimFrame:G};function K(){}K.extend=function(p){var b=function(){_(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},k=b.__super__=this.prototype,j=a(k);j.constructor=b,b.prototype=j;for(var z in this)Object.prototype.hasOwnProperty.call(this,z)&&z!=="prototype"&&z!=="__super__"&&(b[z]=this[z]);return p.statics&&i(b,p.statics),p.includes&&(ne(p.includes),i.apply(null,[j].concat(p.includes))),i(j,p),delete j.statics,delete j.includes,j.options&&(j.options=k.options?a(k.options):{},i(j.options,p.options)),j._initHooks=[],j.callInitHooks=function(){if(!this._initHooksCalled){k.callInitHooks&&k.callInitHooks.call(this),this._initHooksCalled=!0;for(var Y=0,he=j._initHooks.length;Y<he;Y++)j._initHooks[Y].call(this)}},b},K.include=function(p){var b=this.prototype.options;return i(this.prototype,p),p.options&&(this.prototype.options=b,this.mergeOptions(p.options)),this},K.mergeOptions=function(p){return i(this.prototype.options,p),this},K.addInitHook=function(p){var b=Array.prototype.slice.call(arguments,1),k=typeof p=="function"?p:function(){this[p].apply(this,b)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(k),this};function ne(p){if(!(typeof L>"u"||!L||!L.Mixin)){p=E(p)?p:[p];for(var b=0;b<p.length;b++)p[b]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var re={on:function(p,b,k){if(typeof p=="object")for(var j in p)this._on(j,p[j],b);else{p=v(p);for(var z=0,Y=p.length;z<Y;z++)this._on(p[z],b,k)}return this},off:function(p,b,k){if(!arguments.length)delete this._events;else if(typeof p=="object")for(var j in p)this._off(j,p[j],b);else{p=v(p);for(var z=arguments.length===1,Y=0,he=p.length;Y<he;Y++)z?this._off(p[Y]):this._off(p[Y],b,k)}return this},_on:function(p,b,k,j){if(typeof b!="function"){console.warn("wrong listener type: "+typeof b);return}if(this._listens(p,b,k)===!1){k===this&&(k=void 0);var z={fn:b,ctx:k};j&&(z.once=!0),this._events=this._events||{},this._events[p]=this._events[p]||[],this._events[p].push(z)}},_off:function(p,b,k){var j,z,Y;if(this._events&&(j=this._events[p],!!j)){if(arguments.length===1){if(this._firingCount)for(z=0,Y=j.length;z<Y;z++)j[z].fn=d;delete this._events[p];return}if(typeof b!="function"){console.warn("wrong listener type: "+typeof b);return}var he=this._listens(p,b,k);if(he!==!1){var Re=j[he];this._firingCount&&(Re.fn=d,this._events[p]=j=j.slice()),j.splice(he,1)}}},fire:function(p,b,k){if(!this.listens(p,k))return this;var j=i({},b,{type:p,target:this,sourceTarget:b&&b.sourceTarget||this});if(this._events){var z=this._events[p];if(z){this._firingCount=this._firingCount+1||1;for(var Y=0,he=z.length;Y<he;Y++){var Re=z[Y],We=Re.fn;Re.once&&this.off(p,We,Re.ctx),We.call(Re.ctx||this,j)}this._firingCount--}}return k&&this._propagateEvent(j),this},listens:function(p,b,k,j){typeof p!="string"&&console.warn('"string" type argument expected');var z=b;typeof b!="function"&&(j=!!b,z=void 0,k=void 0);var Y=this._events&&this._events[p];if(Y&&Y.length&&this._listens(p,z,k)!==!1)return!0;if(j){for(var he in this._eventParents)if(this._eventParents[he].listens(p,b,k,j))return!0}return!1},_listens:function(p,b,k){if(!this._events)return!1;var j=this._events[p]||[];if(!b)return!!j.length;k===this&&(k=void 0);for(var z=0,Y=j.length;z<Y;z++)if(j[z].fn===b&&j[z].ctx===k)return z;return!1},once:function(p,b,k){if(typeof p=="object")for(var j in p)this._on(j,p[j],b,!0);else{p=v(p);for(var z=0,Y=p.length;z<Y;z++)this._on(p[z],b,k,!0)}return this},addEventParent:function(p){return this._eventParents=this._eventParents||{},this._eventParents[l(p)]=p,this},removeEventParent:function(p){return this._eventParents&&delete this._eventParents[l(p)],this},_propagateEvent:function(p){for(var b in this._eventParents)this._eventParents[b].fire(p.type,i({layer:p.target,propagatedFrom:p.target},p),!0)}};re.addEventListener=re.on,re.removeEventListener=re.clearAllEventListeners=re.off,re.addOneTimeEventListener=re.once,re.fireEvent=re.fire,re.hasEventListeners=re.listens;var oe=K.extend(re);function $(p,b,k){this.x=k?Math.round(p):p,this.y=k?Math.round(b):b}var ue=Math.trunc||function(p){return p>0?Math.floor(p):Math.ceil(p)};$.prototype={clone:function(){return new $(this.x,this.y)},add:function(p){return this.clone()._add(se(p))},_add:function(p){return this.x+=p.x,this.y+=p.y,this},subtract:function(p){return this.clone()._subtract(se(p))},_subtract:function(p){return this.x-=p.x,this.y-=p.y,this},divideBy:function(p){return this.clone()._divideBy(p)},_divideBy:function(p){return this.x/=p,this.y/=p,this},multiplyBy:function(p){return this.clone()._multiplyBy(p)},_multiplyBy:function(p){return this.x*=p,this.y*=p,this},scaleBy:function(p){return new $(this.x*p.x,this.y*p.y)},unscaleBy:function(p){return new $(this.x/p.x,this.y/p.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ue(this.x),this.y=ue(this.y),this},distanceTo:function(p){p=se(p);var b=p.x-this.x,k=p.y-this.y;return Math.sqrt(b*b+k*k)},equals:function(p){return p=se(p),p.x===this.x&&p.y===this.y},contains:function(p){return p=se(p),Math.abs(p.x)<=Math.abs(this.x)&&Math.abs(p.y)<=Math.abs(this.y)},toString:function(){return"Point("+f(this.x)+", "+f(this.y)+")"}};function se(p,b,k){return p instanceof $?p:E(p)?new $(p[0],p[1]):p==null?p:typeof p=="object"&&"x"in p&&"y"in p?new $(p.x,p.y):new $(p,b,k)}function pe(p,b){if(p)for(var k=b?[p,b]:p,j=0,z=k.length;j<z;j++)this.extend(k[j])}pe.prototype={extend:function(p){var b,k;if(!p)return this;if(p instanceof $||typeof p[0]=="number"||"x"in p)b=k=se(p);else if(p=Fe(p),b=p.min,k=p.max,!b||!k)return this;return!this.min&&!this.max?(this.min=b.clone(),this.max=k.clone()):(this.min.x=Math.min(b.x,this.min.x),this.max.x=Math.max(k.x,this.max.x),this.min.y=Math.min(b.y,this.min.y),this.max.y=Math.max(k.y,this.max.y)),this},getCenter:function(p){return se((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,p)},getBottomLeft:function(){return se(this.min.x,this.max.y)},getTopRight:function(){return se(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(p){var b,k;return typeof p[0]=="number"||p instanceof $?p=se(p):p=Fe(p),p instanceof pe?(b=p.min,k=p.max):b=k=p,b.x>=this.min.x&&k.x<=this.max.x&&b.y>=this.min.y&&k.y<=this.max.y},intersects:function(p){p=Fe(p);var b=this.min,k=this.max,j=p.min,z=p.max,Y=z.x>=b.x&&j.x<=k.x,he=z.y>=b.y&&j.y<=k.y;return Y&&he},overlaps:function(p){p=Fe(p);var b=this.min,k=this.max,j=p.min,z=p.max,Y=z.x>b.x&&j.x<k.x,he=z.y>b.y&&j.y<k.y;return Y&&he},isValid:function(){return!!(this.min&&this.max)},pad:function(p){var b=this.min,k=this.max,j=Math.abs(b.x-k.x)*p,z=Math.abs(b.y-k.y)*p;return Fe(se(b.x-j,b.y-z),se(k.x+j,k.y+z))},equals:function(p){return p?(p=Fe(p),this.min.equals(p.getTopLeft())&&this.max.equals(p.getBottomRight())):!1}};function Fe(p,b){return!p||p instanceof pe?p:new pe(p,b)}function $e(p,b){if(p)for(var k=b?[p,b]:p,j=0,z=k.length;j<z;j++)this.extend(k[j])}$e.prototype={extend:function(p){var b=this._southWest,k=this._northEast,j,z;if(p instanceof me)j=p,z=p;else if(p instanceof $e){if(j=p._southWest,z=p._northEast,!j||!z)return this}else return p?this.extend(Le(p)||at(p)):this;return!b&&!k?(this._southWest=new me(j.lat,j.lng),this._northEast=new me(z.lat,z.lng)):(b.lat=Math.min(j.lat,b.lat),b.lng=Math.min(j.lng,b.lng),k.lat=Math.max(z.lat,k.lat),k.lng=Math.max(z.lng,k.lng)),this},pad:function(p){var b=this._southWest,k=this._northEast,j=Math.abs(b.lat-k.lat)*p,z=Math.abs(b.lng-k.lng)*p;return new $e(new me(b.lat-j,b.lng-z),new me(k.lat+j,k.lng+z))},getCenter:function(){return new me((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new me(this.getNorth(),this.getWest())},getSouthEast:function(){return new me(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(p){typeof p[0]=="number"||p instanceof me||"lat"in p?p=Le(p):p=at(p);var b=this._southWest,k=this._northEast,j,z;return p instanceof $e?(j=p.getSouthWest(),z=p.getNorthEast()):j=z=p,j.lat>=b.lat&&z.lat<=k.lat&&j.lng>=b.lng&&z.lng<=k.lng},intersects:function(p){p=at(p);var b=this._southWest,k=this._northEast,j=p.getSouthWest(),z=p.getNorthEast(),Y=z.lat>=b.lat&&j.lat<=k.lat,he=z.lng>=b.lng&&j.lng<=k.lng;return Y&&he},overlaps:function(p){p=at(p);var b=this._southWest,k=this._northEast,j=p.getSouthWest(),z=p.getNorthEast(),Y=z.lat>b.lat&&j.lat<k.lat,he=z.lng>b.lng&&j.lng<k.lng;return Y&&he},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(p,b){return p?(p=at(p),this._southWest.equals(p.getSouthWest(),b)&&this._northEast.equals(p.getNorthEast(),b)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function at(p,b){return p instanceof $e?p:new $e(p,b)}function me(p,b,k){if(isNaN(p)||isNaN(b))throw new Error("Invalid LatLng object: ("+p+", "+b+")");this.lat=+p,this.lng=+b,k!==void 0&&(this.alt=+k)}me.prototype={equals:function(p,b){if(!p)return!1;p=Le(p);var k=Math.max(Math.abs(this.lat-p.lat),Math.abs(this.lng-p.lng));return k<=(b===void 0?1e-9:b)},toString:function(p){return"LatLng("+f(this.lat,p)+", "+f(this.lng,p)+")"},distanceTo:function(p){return ge.distance(this,Le(p))},wrap:function(){return ge.wrapLatLng(this)},toBounds:function(p){var b=180*p/40075017,k=b/Math.cos(Math.PI/180*this.lat);return at([this.lat-b,this.lng-k],[this.lat+b,this.lng+k])},clone:function(){return new me(this.lat,this.lng,this.alt)}};function Le(p,b,k){return p instanceof me?p:E(p)&&typeof p[0]!="object"?p.length===3?new me(p[0],p[1],p[2]):p.length===2?new me(p[0],p[1]):null:p==null?p:typeof p=="object"&&"lat"in p?new me(p.lat,"lng"in p?p.lng:p.lon,p.alt):b===void 0?null:new me(p,b,k)}var Se={latLngToPoint:function(p,b){var k=this.projection.project(p),j=this.scale(b);return this.transformation._transform(k,j)},pointToLatLng:function(p,b){var k=this.scale(b),j=this.transformation.untransform(p,k);return this.projection.unproject(j)},project:function(p){return this.projection.project(p)},unproject:function(p){return this.projection.unproject(p)},scale:function(p){return 256*Math.pow(2,p)},zoom:function(p){return Math.log(p/256)/Math.LN2},getProjectedBounds:function(p){if(this.infinite)return null;var b=this.projection.bounds,k=this.scale(p),j=this.transformation.transform(b.min,k),z=this.transformation.transform(b.max,k);return new pe(j,z)},infinite:!1,wrapLatLng:function(p){var b=this.wrapLng?c(p.lng,this.wrapLng,!0):p.lng,k=this.wrapLat?c(p.lat,this.wrapLat,!0):p.lat,j=p.alt;return new me(k,b,j)},wrapLatLngBounds:function(p){var b=p.getCenter(),k=this.wrapLatLng(b),j=b.lat-k.lat,z=b.lng-k.lng;if(j===0&&z===0)return p;var Y=p.getSouthWest(),he=p.getNorthEast(),Re=new me(Y.lat-j,Y.lng-z),We=new me(he.lat-j,he.lng-z);return new $e(Re,We)}},ge=i({},Se,{wrapLng:[-180,180],R:6371e3,distance:function(p,b){var k=Math.PI/180,j=p.lat*k,z=b.lat*k,Y=Math.sin((b.lat-p.lat)*k/2),he=Math.sin((b.lng-p.lng)*k/2),Re=Y*Y+Math.cos(j)*Math.cos(z)*he*he,We=2*Math.atan2(Math.sqrt(Re),Math.sqrt(1-Re));return this.R*We}}),Ge=6378137,Me={R:Ge,MAX_LATITUDE:85.0511287798,project:function(p){var b=Math.PI/180,k=this.MAX_LATITUDE,j=Math.max(Math.min(k,p.lat),-k),z=Math.sin(j*b);return new $(this.R*p.lng*b,this.R*Math.log((1+z)/(1-z))/2)},unproject:function(p){var b=180/Math.PI;return new me((2*Math.atan(Math.exp(p.y/this.R))-Math.PI/2)*b,p.x*b/this.R)},bounds:function(){var p=Ge*Math.PI;return new pe([-p,-p],[p,p])}()};function Ce(p,b,k,j){if(E(p)){this._a=p[0],this._b=p[1],this._c=p[2],this._d=p[3];return}this._a=p,this._b=b,this._c=k,this._d=j}Ce.prototype={transform:function(p,b){return this._transform(p.clone(),b)},_transform:function(p,b){return b=b||1,p.x=b*(this._a*p.x+this._b),p.y=b*(this._c*p.y+this._d),p},untransform:function(p,b){return b=b||1,new $((p.x/b-this._b)/this._a,(p.y/b-this._d)/this._c)}};function Te(p,b,k,j){return new Ce(p,b,k,j)}var te=i({},ge,{code:"EPSG:3857",projection:Me,transformation:function(){var p=.5/(Math.PI*Me.R);return Te(p,.5,-p,.5)}()}),Ee=i({},te,{code:"EPSG:900913"});function Pe(p){return document.createElementNS("http://www.w3.org/2000/svg",p)}function Ke(p,b){var k="",j,z,Y,he,Re,We;for(j=0,Y=p.length;j<Y;j++){for(Re=p[j],z=0,he=Re.length;z<he;z++)We=Re[z],k+=(z?"L":"M")+We.x+" "+We.y;k+=b?Wt.svg?"z":"x":""}return k||"M0 0"}var je=document.documentElement.style,st="ActiveXObject"in window,tt=st&&!document.addEventListener,ee="msLaunchUri"in navigator&&!("documentMode"in document),qe=Qi("webkit"),Ye=Qi("android"),Z=Qi("android 2")||Qi("android 3"),X=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ve=Ye&&Qi("Google")&&X<537&&!("AudioNode"in window),Ie=!!window.opera,He=!ee&&Qi("chrome"),we=Qi("gecko")&&!qe&&!Ie&&!st,pt=!He&&Qi("safari"),lt=Qi("phantom"),St="OTransition"in je,bt=navigator.platform.indexOf("Win")===0,ut=st&&"transition"in je,xt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Z,Bt="MozPerspective"in je,ce=!window.L_DISABLE_3D&&(ut||xt||Bt)&&!St&&!lt,Ne=typeof orientation<"u"||Qi("mobile"),ht=Ne&&qe,de=Ne&&xt,nt=!window.PointerEvent&&window.MSPointerEvent,fe=!!(window.PointerEvent||nt),Ze="ontouchstart"in window||!!window.TouchEvent,Qe=!window.L_NO_TOUCH&&(Ze||fe),Oe=Ne&&Ie,dt=Ne&&we,vt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,En=function(){var p=!1;try{var b=Object.defineProperty({},"passive",{get:function(){p=!0}});window.addEventListener("testPassiveEventSupport",d,b),window.removeEventListener("testPassiveEventSupport",d,b)}catch{}return p}(),xn=function(){return!!document.createElement("canvas").getContext}(),Xr=!!(document.createElementNS&&Pe("svg").createSVGRect),Zn=!!Xr&&function(){var p=document.createElement("div");return p.innerHTML="<svg/>",(p.firstChild&&p.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Cc=!Xr&&function(){try{var p=document.createElement("div");p.innerHTML='<v:shape adj="1"/>';var b=p.firstChild;return b.style.behavior="url(#default#VML)",b&&typeof b.adj=="object"}catch{return!1}}(),Ia=navigator.platform.indexOf("Mac")===0,no=navigator.platform.indexOf("Linux")===0;function Qi(p){return navigator.userAgent.toLowerCase().indexOf(p)>=0}var Wt={ie:st,ielt9:tt,edge:ee,webkit:qe,android:Ye,android23:Z,androidStock:ve,opera:Ie,chrome:He,gecko:we,safari:pt,phantom:lt,opera12:St,win:bt,ie3d:ut,webkit3d:xt,gecko3d:Bt,any3d:ce,mobile:Ne,mobileWebkit:ht,mobileWebkit3d:de,msPointer:nt,pointer:fe,touch:Qe,touchNative:Ze,mobileOpera:Oe,mobileGecko:dt,retina:vt,passiveEvents:En,canvas:xn,svg:Xr,vml:Cc,inlineSvg:Zn,mac:Ia,linux:no},Vi=Wt.msPointer?"MSPointerDown":"pointerdown",Mc=Wt.msPointer?"MSPointerMove":"pointermove",Dl=Wt.msPointer?"MSPointerUp":"pointerup",tl=Wt.msPointer?"MSPointerCancel":"pointercancel",Ll={touchstart:Vi,touchmove:Mc,touchend:Dl,touchcancel:tl},ku={touchstart:be,touchmove:Ve,touchend:Ve,touchcancel:Ve},Ms={},Is=!1;function Ic(p,b,k){return b==="touchstart"&&Ue(),ku[b]?(k=ku[b].bind(this,k),p.addEventListener(Ll[b],k,!1),k):(console.warn("wrong event specified:",b),d)}function zd(p,b,k){if(!Ll[b]){console.warn("wrong event specified:",b);return}p.removeEventListener(Ll[b],k,!1)}function Pc(p){Ms[p.pointerId]=p}function Q(p){Ms[p.pointerId]&&(Ms[p.pointerId]=p)}function _e(p){delete Ms[p.pointerId]}function Ue(){Is||(document.addEventListener(Vi,Pc,!0),document.addEventListener(Mc,Q,!0),document.addEventListener(Dl,_e,!0),document.addEventListener(tl,_e,!0),Is=!0)}function Ve(p,b){if(b.pointerType!==(b.MSPOINTER_TYPE_MOUSE||"mouse")){b.touches=[];for(var k in Ms)b.touches.push(Ms[k]);b.changedTouches=[b],p(b)}}function be(p,b){b.MSPOINTER_TYPE_TOUCH&&b.pointerType===b.MSPOINTER_TYPE_TOUCH&&Kr(b),Ve(p,b)}function ft(p){var b={},k,j;for(j in p)k=p[j],b[j]=k&&k.bind?k.bind(p):k;return p=b,b.type="dblclick",b.detail=2,b.isTrusted=!1,b._simulated=!0,b}var wt=200;function Mt(p,b){p.addEventListener("dblclick",b);var k=0,j;function z(Y){if(Y.detail!==1){j=Y.detail;return}if(!(Y.pointerType==="mouse"||Y.sourceCapabilities&&!Y.sourceCapabilities.firesTouchEvents)){var he=Ya(Y);if(!(he.some(function(We){return We instanceof HTMLLabelElement&&We.attributes.for})&&!he.some(function(We){return We instanceof HTMLInputElement||We instanceof HTMLSelectElement}))){var Re=Date.now();Re-k<=wt?(j++,j===2&&b(ft(Y))):j=1,k=Re}}}return p.addEventListener("click",z),{dblclick:b,simDblclick:z}}function Et(p,b){p.removeEventListener("dblclick",b.dblclick),p.removeEventListener("click",b.simDblclick)}var Yt=ai(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$t=ai(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Lt=$t==="webkitTransition"||$t==="OTransition"?$t+"End":"transitionend";function Ot(p){return typeof p=="string"?document.getElementById(p):p}function Ht(p,b){var k=p.style[b]||p.currentStyle&&p.currentStyle[b];if((!k||k==="auto")&&document.defaultView){var j=document.defaultView.getComputedStyle(p,null);k=j?j[b]:null}return k==="auto"?null:k}function Ft(p,b,k){var j=document.createElement(p);return j.className=b||"",k&&k.appendChild(j),j}function Pt(p){var b=p.parentNode;b&&b.removeChild(p)}function dn(p){for(;p.firstChild;)p.removeChild(p.firstChild)}function Nt(p){var b=p.parentNode;b&&b.lastChild!==p&&b.appendChild(p)}function On(p){var b=p.parentNode;b&&b.firstChild!==p&&b.insertBefore(p,b.firstChild)}function tn(p,b){if(p.classList!==void 0)return p.classList.contains(b);var k=ci(p);return k.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(k)}function Xt(p,b){if(p.classList!==void 0)for(var k=v(b),j=0,z=k.length;j<z;j++)p.classList.add(k[j]);else if(!tn(p,b)){var Y=ci(p);bi(p,(Y?Y+" ":"")+b)}}function er(p,b){p.classList!==void 0?p.classList.remove(b):bi(p,m((" "+ci(p)+" ").replace(" "+b+" "," ")))}function bi(p,b){p.className.baseVal===void 0?p.className=b:p.className.baseVal=b}function ci(p){return p.correspondingElement&&(p=p.correspondingElement),p.className.baseVal===void 0?p.className:p.className.baseVal}function fn(p,b){"opacity"in p.style?p.style.opacity=b:"filter"in p.style&&pr(p,b)}function pr(p,b){var k=!1,j="DXImageTransform.Microsoft.Alpha";try{k=p.filters.item(j)}catch{if(b===1)return}b=Math.round(b*100),k?(k.Enabled=b!==100,k.Opacity=b):p.style.filter+=" progid:"+j+"(opacity="+b+")"}function ai(p){for(var b=document.documentElement.style,k=0;k<p.length;k++)if(p[k]in b)return p[k];return!1}function Pr(p,b,k){var j=b||new $(0,0);p.style[Yt]=(Wt.ie3d?"translate("+j.x+"px,"+j.y+"px)":"translate3d("+j.x+"px,"+j.y+"px,0)")+(k?" scale("+k+")":"")}function qt(p,b){p._leaflet_pos=b,Wt.any3d?Pr(p,b):(p.style.left=b.x+"px",p.style.top=b.y+"px")}function Pi(p){return p._leaflet_pos||new $(0,0)}var si,Pa,Cu;if("onselectstart"in document)si=function(){an(window,"selectstart",Kr)},Pa=function(){yr(window,"selectstart",Kr)};else{var Mu=ai(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);si=function(){if(Mu){var p=document.documentElement.style;Cu=p[Mu],p[Mu]="none"}},Pa=function(){Mu&&(document.documentElement.style[Mu]=Cu,Cu=void 0)}}function Kf(){an(window,"dragstart",Kr)}function Nc(){yr(window,"dragstart",Kr)}var Iu,Ol;function Fl(p){for(;p.tabIndex===-1;)p=p.parentNode;p.style&&(Na(),Iu=p,Ol=p.style.outlineStyle,p.style.outlineStyle="none",an(window,"keydown",Na))}function Na(){Iu&&(Iu.style.outlineStyle=Ol,Iu=void 0,Ol=void 0,yr(window,"keydown",Na))}function Vn(p){do p=p.parentNode;while((!p.offsetWidth||!p.offsetHeight)&&p!==document.body);return p}function Rc(p){var b=p.getBoundingClientRect();return{x:b.width/p.offsetWidth||1,y:b.height/p.offsetHeight||1,boundingClientRect:b}}var Hd={__proto__:null,TRANSFORM:Yt,TRANSITION:$t,TRANSITION_END:Lt,get:Ot,getStyle:Ht,create:Ft,remove:Pt,empty:dn,toFront:Nt,toBack:On,hasClass:tn,addClass:Xt,removeClass:er,setClass:bi,getClass:ci,setOpacity:fn,testProp:ai,setTransform:Pr,setPosition:qt,getPosition:Pi,get disableTextSelection(){return si},get enableTextSelection(){return Pa},disableImageDrag:Kf,enableImageDrag:Nc,preventOutline:Fl,restoreOutline:Na,getSizedParentNode:Vn,getScale:Rc};function an(p,b,k,j){if(b&&typeof b=="object")for(var z in b)Yf(p,z,b[z],k);else{b=v(b);for(var Y=0,he=b.length;Y<he;Y++)Yf(p,b[Y],k,j)}return this}var ro="_leaflet_events";function yr(p,b,k,j){if(arguments.length===1)di(p),delete p[ro];else if(b&&typeof b=="object")for(var z in b)Dc(p,z,b[z],k);else if(b=v(b),arguments.length===2)di(p,function(Re){return T(b,Re)!==-1});else for(var Y=0,he=b.length;Y<he;Y++)Dc(p,b[Y],k,j);return this}function di(p,b){for(var k in p[ro]){var j=k.split(/\d/)[0];(!b||b(j))&&Dc(p,j,null,null,k)}}var Ka={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Yf(p,b,k,j){var z=b+l(k)+(j?"_"+l(j):"");if(p[ro]&&p[ro][z])return this;var Y=function(Re){return k.call(j||p,Re||window.event)},he=Y;!Wt.touchNative&&Wt.pointer&&b.indexOf("touch")===0?Y=Ic(p,b,Y):Wt.touch&&b==="dblclick"?Y=Mt(p,Y):"addEventListener"in p?b==="touchstart"||b==="touchmove"||b==="wheel"||b==="mousewheel"?p.addEventListener(Ka[b]||b,Y,Wt.passiveEvents?{passive:!1}:!1):b==="mouseenter"||b==="mouseleave"?(Y=function(Re){Re=Re||window.event,Wd(p,Re)&&he(Re)},p.addEventListener(Ka[b],Y,!1)):p.addEventListener(b,he,!1):p.attachEvent("on"+b,Y),p[ro]=p[ro]||{},p[ro][z]=Y}function Dc(p,b,k,j,z){z=z||b+l(k)+(j?"_"+l(j):"");var Y=p[ro]&&p[ro][z];if(!Y)return this;!Wt.touchNative&&Wt.pointer&&b.indexOf("touch")===0?zd(p,b,Y):Wt.touch&&b==="dblclick"?Et(p,Y):"removeEventListener"in p?p.removeEventListener(Ka[b]||b,Y,!1):p.detachEvent("on"+b,Y),p[ro][z]=null}function io(p){return p.stopPropagation?p.stopPropagation():p.originalEvent?p.originalEvent._stopped=!0:p.cancelBubble=!0,this}function No(p){return Yf(p,"wheel",io),this}function Ji(p){return an(p,"mousedown touchstart dblclick contextmenu",io),p._leaflet_disable_click=!0,this}function Kr(p){return p.preventDefault?p.preventDefault():p.returnValue=!1,this}function Ps(p){return Kr(p),io(p),this}function Ya(p){if(p.composedPath)return p.composedPath();for(var b=[],k=p.target;k;)b.push(k),k=k.parentNode;return b}function Za(p,b){if(!b)return new $(p.clientX,p.clientY);var k=Rc(b),j=k.boundingClientRect;return new $((p.clientX-j.left)/k.x-b.clientLeft,(p.clientY-j.top)/k.y-b.clientTop)}var Er=Wt.linux&&Wt.chrome?window.devicePixelRatio:Wt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Gd(p){return Wt.edge?p.wheelDeltaY/2:p.deltaY&&p.deltaMode===0?-p.deltaY/Er:p.deltaY&&p.deltaMode===1?-p.deltaY*20:p.deltaY&&p.deltaMode===2?-p.deltaY*60:p.deltaX||p.deltaZ?0:p.wheelDelta?(p.wheelDeltaY||p.wheelDelta)/2:p.detail&&Math.abs(p.detail)<32765?-p.detail*20:p.detail?p.detail/-32765*60:0}function Wd(p,b){var k=b.relatedTarget;if(!k)return!0;try{for(;k&&k!==p;)k=k.parentNode}catch{return!1}return k!==p}var cg={__proto__:null,on:an,off:yr,stopPropagation:io,disableScrollPropagation:No,disableClickPropagation:Ji,preventDefault:Kr,stop:Ps,getPropagationPath:Ya,getMousePosition:Za,getWheelDelta:Gd,isExternalTarget:Wd,addListener:an,removeListener:yr},Qa=oe.extend({run:function(p,b,k,j){this.stop(),this._el=p,this._inProgress=!0,this._duration=k||.25,this._easeOutPower=1/Math.max(j||.5,.2),this._startPos=Pi(p),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=B(this._animate,this),this._step()},_step:function(p){var b=+new Date-this._startTime,k=this._duration*1e3;b<k?this._runFrame(this._easeOut(b/k),p):(this._runFrame(1),this._complete())},_runFrame:function(p,b){var k=this._startPos.add(this._offset.multiplyBy(p));b&&k._round(),qt(this._el,k),this.fire("step")},_complete:function(){G(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(p){return 1-Math.pow(1-p,this._easeOutPower)}}),Fn=oe.extend({options:{crs:te,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(p,b){b=_(this,b),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(p),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.zoom!==void 0&&(this._zoom=this._limitZoom(b.zoom)),b.center&&b.zoom!==void 0&&this.setView(Le(b.center),b.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=$t&&Wt.any3d&&!Wt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),an(this._proxy,Lt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(p,b,k){if(b=b===void 0?this._zoom:this._limitZoom(b),p=this._limitCenter(Le(p),b,this.options.maxBounds),k=k||{},this._stop(),this._loaded&&!k.reset&&k!==!0){k.animate!==void 0&&(k.zoom=i({animate:k.animate},k.zoom),k.pan=i({animate:k.animate,duration:k.duration},k.pan));var j=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(p,b,k.zoom):this._tryAnimatedPan(p,k.pan);if(j)return clearTimeout(this._sizeTimer),this}return this._resetView(p,b,k.pan&&k.pan.noMoveStart),this},setZoom:function(p,b){return this._loaded?this.setView(this.getCenter(),p,{zoom:b}):(this._zoom=p,this)},zoomIn:function(p,b){return p=p||(Wt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+p,b)},zoomOut:function(p,b){return p=p||(Wt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-p,b)},setZoomAround:function(p,b,k){var j=this.getZoomScale(b),z=this.getSize().divideBy(2),Y=p instanceof $?p:this.latLngToContainerPoint(p),he=Y.subtract(z).multiplyBy(1-1/j),Re=this.containerPointToLatLng(z.add(he));return this.setView(Re,b,{zoom:k})},_getBoundsCenterZoom:function(p,b){b=b||{},p=p.getBounds?p.getBounds():at(p);var k=se(b.paddingTopLeft||b.padding||[0,0]),j=se(b.paddingBottomRight||b.padding||[0,0]),z=this.getBoundsZoom(p,!1,k.add(j));if(z=typeof b.maxZoom=="number"?Math.min(b.maxZoom,z):z,z===1/0)return{center:p.getCenter(),zoom:z};var Y=j.subtract(k).divideBy(2),he=this.project(p.getSouthWest(),z),Re=this.project(p.getNorthEast(),z),We=this.unproject(he.add(Re).divideBy(2).add(Y),z);return{center:We,zoom:z}},fitBounds:function(p,b){if(p=at(p),!p.isValid())throw new Error("Bounds are not valid.");var k=this._getBoundsCenterZoom(p,b);return this.setView(k.center,k.zoom,b)},fitWorld:function(p){return this.fitBounds([[-90,-180],[90,180]],p)},panTo:function(p,b){return this.setView(p,this._zoom,{pan:b})},panBy:function(p,b){if(p=se(p).round(),b=b||{},!p.x&&!p.y)return this.fire("moveend");if(b.animate!==!0&&!this.getSize().contains(p))return this._resetView(this.unproject(this.project(this.getCenter()).add(p)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Qa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){Xt(this._mapPane,"leaflet-pan-anim");var k=this._getMapPanePos().subtract(p).round();this._panAnim.run(this._mapPane,k,b.duration||.25,b.easeLinearity)}else this._rawPanBy(p),this.fire("move").fire("moveend");return this},flyTo:function(p,b,k){if(k=k||{},k.animate===!1||!Wt.any3d)return this.setView(p,b,k);this._stop();var j=this.project(this.getCenter()),z=this.project(p),Y=this.getSize(),he=this._zoom;p=Le(p),b=b===void 0?he:b;var Re=Math.max(Y.x,Y.y),We=Re*this.getZoomScale(he,b),ct=z.distanceTo(j)||1,Tt=1.42,ln=Tt*Tt;function Rn(zr){var Uu=zr?-1:1,vg=zr?We:Re,yg=We*We-Re*Re+Uu*ln*ln*ct*ct,Cw=2*vg*ln*ct,Hc=yg/Cw,na=Math.sqrt(Hc*Hc+1)-Hc,Vk=na<1e-9?-18:Math.log(na);return Vk}function Da(zr){return(Math.exp(zr)-Math.exp(-zr))/2}function Ai(zr){return(Math.exp(zr)+Math.exp(-zr))/2}function rs(zr){return Da(zr)/Ai(zr)}var is=Rn(0);function zc(zr){return Re*(Ai(is)/Ai(is+Tt*zr))}function Aw(zr){return Re*(Ai(is)*rs(is+Tt*zr)-Da(is))/ln}function Tw(zr){return 1-Math.pow(1-zr,1.5)}var kw=Date.now(),My=(Rn(1)-is)/Tt,sl=k.duration?1e3*k.duration:1e3*My*.8;function Iy(){var zr=(Date.now()-kw)/sl,Uu=Tw(zr)*My;zr<=1?(this._flyToFrame=B(Iy,this),this._move(this.unproject(j.add(z.subtract(j).multiplyBy(Aw(Uu)/ct)),he),this.getScaleZoom(Re/zc(Uu),he),{flyTo:!0})):this._move(p,b)._moveEnd(!0)}return this._moveStart(!0,k.noMoveStart),Iy.call(this),this},flyToBounds:function(p,b){var k=this._getBoundsCenterZoom(p,b);return this.flyTo(k.center,k.zoom,b)},setMaxBounds:function(p){return p=at(p),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),p.isValid()?(this.options.maxBounds=p,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(p){var b=this.options.minZoom;return this.options.minZoom=p,this._loaded&&b!==p&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(p):this},setMaxZoom:function(p){var b=this.options.maxZoom;return this.options.maxZoom=p,this._loaded&&b!==p&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(p):this},panInsideBounds:function(p,b){this._enforcingBounds=!0;var k=this.getCenter(),j=this._limitCenter(k,this._zoom,at(p));return k.equals(j)||this.panTo(j,b),this._enforcingBounds=!1,this},panInside:function(p,b){b=b||{};var k=se(b.paddingTopLeft||b.padding||[0,0]),j=se(b.paddingBottomRight||b.padding||[0,0]),z=this.project(this.getCenter()),Y=this.project(p),he=this.getPixelBounds(),Re=Fe([he.min.add(k),he.max.subtract(j)]),We=Re.getSize();if(!Re.contains(Y)){this._enforcingBounds=!0;var ct=Y.subtract(Re.getCenter()),Tt=Re.extend(Y).getSize().subtract(We);z.x+=ct.x<0?-Tt.x:Tt.x,z.y+=ct.y<0?-Tt.y:Tt.y,this.panTo(this.unproject(z),b),this._enforcingBounds=!1}return this},invalidateSize:function(p){if(!this._loaded)return this;p=i({animate:!1,pan:!0},p===!0?{animate:!0}:p);var b=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var k=this.getSize(),j=b.divideBy(2).round(),z=k.divideBy(2).round(),Y=j.subtract(z);return!Y.x&&!Y.y?this:(p.animate&&p.pan?this.panBy(Y):(p.pan&&this._rawPanBy(Y),this.fire("move"),p.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:k}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(p){if(p=this._locateOptions=i({timeout:1e4,watch:!1},p),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=s(this._handleGeolocationResponse,this),k=s(this._handleGeolocationError,this);return p.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,k,p):navigator.geolocation.getCurrentPosition(b,k,p),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(p){if(this._container._leaflet_id){var b=p.code,k=p.message||(b===1?"permission denied":b===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+k+"."})}},_handleGeolocationResponse:function(p){if(this._container._leaflet_id){var b=p.coords.latitude,k=p.coords.longitude,j=new me(b,k),z=j.toBounds(p.coords.accuracy*2),Y=this._locateOptions;if(Y.setView){var he=this.getBoundsZoom(z);this.setView(j,Y.maxZoom?Math.min(he,Y.maxZoom):he)}var Re={latlng:j,bounds:z,timestamp:p.timestamp};for(var We in p.coords)typeof p.coords[We]=="number"&&(Re[We]=p.coords[We]);this.fire("locationfound",Re)}},addHandler:function(p,b){if(!b)return this;var k=this[p]=new b(this);return this._handlers.push(k),this.options[p]&&k.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Pt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(G(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var p;for(p in this._layers)this._layers[p].remove();for(p in this._panes)Pt(this._panes[p]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(p,b){var k="leaflet-pane"+(p?" leaflet-"+p.replace("Pane","")+"-pane":""),j=Ft("div",k,b||this._mapPane);return p&&(this._panes[p]=j),j},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var p=this.getPixelBounds(),b=this.unproject(p.getBottomLeft()),k=this.unproject(p.getTopRight());return new $e(b,k)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(p,b,k){p=at(p),k=se(k||[0,0]);var j=this.getZoom()||0,z=this.getMinZoom(),Y=this.getMaxZoom(),he=p.getNorthWest(),Re=p.getSouthEast(),We=this.getSize().subtract(k),ct=Fe(this.project(Re,j),this.project(he,j)).getSize(),Tt=Wt.any3d?this.options.zoomSnap:1,ln=We.x/ct.x,Rn=We.y/ct.y,Da=b?Math.max(ln,Rn):Math.min(ln,Rn);return j=this.getScaleZoom(Da,j),Tt&&(j=Math.round(j/(Tt/100))*(Tt/100),j=b?Math.ceil(j/Tt)*Tt:Math.floor(j/Tt)*Tt),Math.max(z,Math.min(Y,j))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new $(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(p,b){var k=this._getTopLeftPoint(p,b);return new pe(k,k.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(p){return this.options.crs.getProjectedBounds(p===void 0?this.getZoom():p)},getPane:function(p){return typeof p=="string"?this._panes[p]:p},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(p,b){var k=this.options.crs;return b=b===void 0?this._zoom:b,k.scale(p)/k.scale(b)},getScaleZoom:function(p,b){var k=this.options.crs;b=b===void 0?this._zoom:b;var j=k.zoom(p*k.scale(b));return isNaN(j)?1/0:j},project:function(p,b){return b=b===void 0?this._zoom:b,this.options.crs.latLngToPoint(Le(p),b)},unproject:function(p,b){return b=b===void 0?this._zoom:b,this.options.crs.pointToLatLng(se(p),b)},layerPointToLatLng:function(p){var b=se(p).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(p){var b=this.project(Le(p))._round();return b._subtract(this.getPixelOrigin())},wrapLatLng:function(p){return this.options.crs.wrapLatLng(Le(p))},wrapLatLngBounds:function(p){return this.options.crs.wrapLatLngBounds(at(p))},distance:function(p,b){return this.options.crs.distance(Le(p),Le(b))},containerPointToLayerPoint:function(p){return se(p).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(p){return se(p).add(this._getMapPanePos())},containerPointToLatLng:function(p){var b=this.containerPointToLayerPoint(se(p));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(p){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Le(p)))},mouseEventToContainerPoint:function(p){return Za(p,this._container)},mouseEventToLayerPoint:function(p){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(p))},mouseEventToLatLng:function(p){return this.layerPointToLatLng(this.mouseEventToLayerPoint(p))},_initContainer:function(p){var b=this._container=Ot(p);if(b){if(b._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");an(b,"scroll",this._onScroll,this),this._containerId=l(b)},_initLayout:function(){var p=this._container;this._fadeAnimated=this.options.fadeAnimation&&Wt.any3d,Xt(p,"leaflet-container"+(Wt.touch?" leaflet-touch":"")+(Wt.retina?" leaflet-retina":"")+(Wt.ielt9?" leaflet-oldie":"")+(Wt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var b=Ht(p,"position");b!=="absolute"&&b!=="relative"&&b!=="fixed"&&b!=="sticky"&&(p.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var p=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),qt(this._mapPane,new $(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Xt(p.markerPane,"leaflet-zoom-hide"),Xt(p.shadowPane,"leaflet-zoom-hide"))},_resetView:function(p,b,k){qt(this._mapPane,new $(0,0));var j=!this._loaded;this._loaded=!0,b=this._limitZoom(b),this.fire("viewprereset");var z=this._zoom!==b;this._moveStart(z,k)._move(p,b)._moveEnd(z),this.fire("viewreset"),j&&this.fire("load")},_moveStart:function(p,b){return p&&this.fire("zoomstart"),b||this.fire("movestart"),this},_move:function(p,b,k,j){b===void 0&&(b=this._zoom);var z=this._zoom!==b;return this._zoom=b,this._lastCenter=p,this._pixelOrigin=this._getNewPixelOrigin(p),j?k&&k.pinch&&this.fire("zoom",k):((z||k&&k.pinch)&&this.fire("zoom",k),this.fire("move",k)),this},_moveEnd:function(p){return p&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return G(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(p){qt(this._mapPane,this._getMapPanePos().subtract(p))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(p){this._targets={},this._targets[l(this._container)]=this;var b=p?yr:an;b(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&b(window,"resize",this._onResize,this),Wt.any3d&&this.options.transform3DLimit&&(p?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){G(this._resizeRequest),this._resizeRequest=B(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var p=this._getMapPanePos();Math.max(Math.abs(p.x),Math.abs(p.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(p,b){for(var k=[],j,z=b==="mouseout"||b==="mouseover",Y=p.target||p.srcElement,he=!1;Y;){if(j=this._targets[l(Y)],j&&(b==="click"||b==="preclick")&&this._draggableMoved(j)){he=!0;break}if(j&&j.listens(b,!0)&&(z&&!Wd(Y,p)||(k.push(j),z))||Y===this._container)break;Y=Y.parentNode}return!k.length&&!he&&!z&&this.listens(b,!0)&&(k=[this]),k},_isClickDisabled:function(p){for(;p&&p!==this._container;){if(p._leaflet_disable_click)return!0;p=p.parentNode}},_handleDOMEvent:function(p){var b=p.target||p.srcElement;if(!(!this._loaded||b._leaflet_disable_events||p.type==="click"&&this._isClickDisabled(b))){var k=p.type;k==="mousedown"&&Fl(b),this._fireDOMEvent(p,k)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(p,b,k){if(p.type==="click"){var j=i({},p);j.type="preclick",this._fireDOMEvent(j,j.type,k)}var z=this._findEventTargets(p,b);if(k){for(var Y=[],he=0;he<k.length;he++)k[he].listens(b,!0)&&Y.push(k[he]);z=Y.concat(z)}if(z.length){b==="contextmenu"&&Kr(p);var Re=z[0],We={originalEvent:p};if(p.type!=="keypress"&&p.type!=="keydown"&&p.type!=="keyup"){var ct=Re.getLatLng&&(!Re._radius||Re._radius<=10);We.containerPoint=ct?this.latLngToContainerPoint(Re.getLatLng()):this.mouseEventToContainerPoint(p),We.layerPoint=this.containerPointToLayerPoint(We.containerPoint),We.latlng=ct?Re.getLatLng():this.layerPointToLatLng(We.layerPoint)}for(he=0;he<z.length;he++)if(z[he].fire(b,We,!0),We.originalEvent._stopped||z[he].options.bubblingMouseEvents===!1&&T(this._mouseEvents,b)!==-1)return}},_draggableMoved:function(p){return p=p.dragging&&p.dragging.enabled()?p:this,p.dragging&&p.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var p=0,b=this._handlers.length;p<b;p++)this._handlers[p].disable()},whenReady:function(p,b){return this._loaded?p.call(b||this,{target:this}):this.on("load",p,b),this},_getMapPanePos:function(){return Pi(this._mapPane)||new $(0,0)},_moved:function(){var p=this._getMapPanePos();return p&&!p.equals([0,0])},_getTopLeftPoint:function(p,b){var k=p&&b!==void 0?this._getNewPixelOrigin(p,b):this.getPixelOrigin();return k.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(p,b){var k=this.getSize()._divideBy(2);return this.project(p,b)._subtract(k)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(p,b,k){var j=this._getNewPixelOrigin(k,b);return this.project(p,b)._subtract(j)},_latLngBoundsToNewLayerBounds:function(p,b,k){var j=this._getNewPixelOrigin(k,b);return Fe([this.project(p.getSouthWest(),b)._subtract(j),this.project(p.getNorthWest(),b)._subtract(j),this.project(p.getSouthEast(),b)._subtract(j),this.project(p.getNorthEast(),b)._subtract(j)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(p){return this.latLngToLayerPoint(p).subtract(this._getCenterLayerPoint())},_limitCenter:function(p,b,k){if(!k)return p;var j=this.project(p,b),z=this.getSize().divideBy(2),Y=new pe(j.subtract(z),j.add(z)),he=this._getBoundsOffset(Y,k,b);return Math.abs(he.x)<=1&&Math.abs(he.y)<=1?p:this.unproject(j.add(he),b)},_limitOffset:function(p,b){if(!b)return p;var k=this.getPixelBounds(),j=new pe(k.min.add(p),k.max.add(p));return p.add(this._getBoundsOffset(j,b))},_getBoundsOffset:function(p,b,k){var j=Fe(this.project(b.getNorthEast(),k),this.project(b.getSouthWest(),k)),z=j.min.subtract(p.min),Y=j.max.subtract(p.max),he=this._rebound(z.x,-Y.x),Re=this._rebound(z.y,-Y.y);return new $(he,Re)},_rebound:function(p,b){return p+b>0?Math.round(p-b)/2:Math.max(0,Math.ceil(p))-Math.max(0,Math.floor(b))},_limitZoom:function(p){var b=this.getMinZoom(),k=this.getMaxZoom(),j=Wt.any3d?this.options.zoomSnap:1;return j&&(p=Math.round(p/j)*j),Math.max(b,Math.min(k,p))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){er(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(p,b){var k=this._getCenterOffset(p)._trunc();return(b&&b.animate)!==!0&&!this.getSize().contains(k)?!1:(this.panBy(k,b),!0)},_createAnimProxy:function(){var p=this._proxy=Ft("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(p),this.on("zoomanim",function(b){var k=Yt,j=this._proxy.style[k];Pr(this._proxy,this.project(b.center,b.zoom),this.getZoomScale(b.zoom,1)),j===this._proxy.style[k]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Pt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var p=this.getCenter(),b=this.getZoom();Pr(this._proxy,this.project(p,b),this.getZoomScale(b,1))},_catchTransitionEnd:function(p){this._animatingZoom&&p.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(p,b,k){if(this._animatingZoom)return!0;if(k=k||{},!this._zoomAnimated||k.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var j=this.getZoomScale(b),z=this._getCenterOffset(p)._divideBy(1-1/j);return k.animate!==!0&&!this.getSize().contains(z)?!1:(B(function(){this._moveStart(!0,k.noMoveStart||!1)._animateZoom(p,b,!0)},this),!0)},_animateZoom:function(p,b,k,j){this._mapPane&&(k&&(this._animatingZoom=!0,this._animateToCenter=p,this._animateToZoom=b,Xt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:p,zoom:b,noUpdate:j}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&er(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function jl(p,b){return new Fn(p,b)}var Ja=K.extend({options:{position:"topright"},initialize:function(p){_(this,p)},getPosition:function(){return this.options.position},setPosition:function(p){var b=this._map;return b&&b.removeControl(this),this.options.position=p,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(p){this.remove(),this._map=p;var b=this._container=this.onAdd(p),k=this.getPosition(),j=p._controlCorners[k];return Xt(b,"leaflet-control"),k.indexOf("bottom")!==-1?j.insertBefore(b,j.firstChild):j.appendChild(b),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Pt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(p){this._map&&p&&p.screenX>0&&p.screenY>0&&this._map.getContainer().focus()}}),Fr=function(p){return new Ja(p)};Fn.include({addControl:function(p){return p.addTo(this),this},removeControl:function(p){return p.remove(),this},_initControlPos:function(){var p=this._controlCorners={},b="leaflet-",k=this._controlContainer=Ft("div",b+"control-container",this._container);function j(z,Y){var he=b+z+" "+b+Y;p[z+Y]=Ft("div",he,k)}j("top","left"),j("top","right"),j("bottom","left"),j("bottom","right")},_clearControlPos:function(){for(var p in this._controlCorners)Pt(this._controlCorners[p]);Pt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Pu=Ja.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(p,b,k,j){return k<j?-1:j<k?1:0}},initialize:function(p,b,k){_(this,k),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var j in p)this._addLayer(p[j],j);for(j in b)this._addLayer(b[j],j,!0)},onAdd:function(p){this._initLayout(),this._update(),this._map=p,p.on("zoomend",this._checkDisabledLayers,this);for(var b=0;b<this._layers.length;b++)this._layers[b].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(p){return Ja.prototype.addTo.call(this,p),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(p,b){return this._addLayer(p,b),this._map?this._update():this},addOverlay:function(p,b){return this._addLayer(p,b,!0),this._map?this._update():this},removeLayer:function(p){p.off("add remove",this._onLayerChange,this);var b=this._getLayer(l(p));return b&&this._layers.splice(this._layers.indexOf(b),1),this._map?this._update():this},expand:function(){Xt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var p=this._map.getSize().y-(this._container.offsetTop+50);return p<this._section.clientHeight?(Xt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=p+"px"):er(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return er(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var p="leaflet-control-layers",b=this._container=Ft("div",p),k=this.options.collapsed;b.setAttribute("aria-haspopup",!0),Ji(b),No(b);var j=this._section=Ft("section",p+"-list");k&&(this._map.on("click",this.collapse,this),an(b,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var z=this._layersLink=Ft("a",p+"-toggle",b);z.href="#",z.title="Layers",z.setAttribute("role","button"),an(z,{keydown:function(Y){Y.keyCode===13&&this._expandSafely()},click:function(Y){Kr(Y),this._expandSafely()}},this),k||this.expand(),this._baseLayersList=Ft("div",p+"-base",j),this._separator=Ft("div",p+"-separator",j),this._overlaysList=Ft("div",p+"-overlays",j),b.appendChild(j)},_getLayer:function(p){for(var b=0;b<this._layers.length;b++)if(this._layers[b]&&l(this._layers[b].layer)===p)return this._layers[b]},_addLayer:function(p,b,k){this._map&&p.on("add remove",this._onLayerChange,this),this._layers.push({layer:p,name:b,overlay:k}),this.options.sortLayers&&this._layers.sort(s(function(j,z){return this.options.sortFunction(j.layer,z.layer,j.name,z.name)},this)),this.options.autoZIndex&&p.setZIndex&&(this._lastZIndex++,p.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;dn(this._baseLayersList),dn(this._overlaysList),this._layerControlInputs=[];var p,b,k,j,z=0;for(k=0;k<this._layers.length;k++)j=this._layers[k],this._addItem(j),b=b||j.overlay,p=p||!j.overlay,z+=j.overlay?0:1;return this.options.hideSingleBase&&(p=p&&z>1,this._baseLayersList.style.display=p?"":"none"),this._separator.style.display=b&&p?"":"none",this},_onLayerChange:function(p){this._handlingClick||this._update();var b=this._getLayer(l(p.target)),k=b.overlay?p.type==="add"?"overlayadd":"overlayremove":p.type==="add"?"baselayerchange":null;k&&this._map.fire(k,b)},_createRadioElement:function(p,b){var k='<input type="radio" class="leaflet-control-layers-selector" name="'+p+'"'+(b?' checked="checked"':"")+"/>",j=document.createElement("div");return j.innerHTML=k,j.firstChild},_addItem:function(p){var b=document.createElement("label"),k=this._map.hasLayer(p.layer),j;p.overlay?(j=document.createElement("input"),j.type="checkbox",j.className="leaflet-control-layers-selector",j.defaultChecked=k):j=this._createRadioElement("leaflet-base-layers_"+l(this),k),this._layerControlInputs.push(j),j.layerId=l(p.layer),an(j,"click",this._onInputClick,this);var z=document.createElement("span");z.innerHTML=" "+p.name;var Y=document.createElement("span");b.appendChild(Y),Y.appendChild(j),Y.appendChild(z);var he=p.overlay?this._overlaysList:this._baseLayersList;return he.appendChild(b),this._checkDisabledLayers(),b},_onInputClick:function(){if(!this._preventClick){var p=this._layerControlInputs,b,k,j=[],z=[];this._handlingClick=!0;for(var Y=p.length-1;Y>=0;Y--)b=p[Y],k=this._getLayer(b.layerId).layer,b.checked?j.push(k):b.checked||z.push(k);for(Y=0;Y<z.length;Y++)this._map.hasLayer(z[Y])&&this._map.removeLayer(z[Y]);for(Y=0;Y<j.length;Y++)this._map.hasLayer(j[Y])||this._map.addLayer(j[Y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var p=this._layerControlInputs,b,k,j=this._map.getZoom(),z=p.length-1;z>=0;z--)b=p[z],k=this._getLayer(b.layerId).layer,b.disabled=k.options.minZoom!==void 0&&j<k.options.minZoom||k.options.maxZoom!==void 0&&j>k.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var p=this._section;this._preventClick=!0,an(p,"click",Kr),this.expand();var b=this;setTimeout(function(){yr(p,"click",Kr),b._preventClick=!1})}}),qd=function(p,b,k){return new Pu(p,b,k)},es=Ja.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(p){var b="leaflet-control-zoom",k=Ft("div",b+" leaflet-bar"),j=this.options;return this._zoomInButton=this._createButton(j.zoomInText,j.zoomInTitle,b+"-in",k,this._zoomIn),this._zoomOutButton=this._createButton(j.zoomOutText,j.zoomOutTitle,b+"-out",k,this._zoomOut),this._updateDisabled(),p.on("zoomend zoomlevelschange",this._updateDisabled,this),k},onRemove:function(p){p.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(p){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(p.shiftKey?3:1))},_zoomOut:function(p){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(p.shiftKey?3:1))},_createButton:function(p,b,k,j,z){var Y=Ft("a",k,j);return Y.innerHTML=p,Y.href="#",Y.title=b,Y.setAttribute("role","button"),Y.setAttribute("aria-label",b),Ji(Y),an(Y,"click",Ps),an(Y,"click",z,this),an(Y,"click",this._refocusOnMap,this),Y},_updateDisabled:function(){var p=this._map,b="leaflet-disabled";er(this._zoomInButton,b),er(this._zoomOutButton,b),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||p._zoom===p.getMinZoom())&&(Xt(this._zoomOutButton,b),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||p._zoom===p.getMaxZoom())&&(Xt(this._zoomInButton,b),this._zoomInButton.setAttribute("aria-disabled","true"))}});Fn.mergeOptions({zoomControl:!0}),Fn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new es,this.addControl(this.zoomControl))});var $d=function(p){return new es(p)},Nu=Ja.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(p){var b="leaflet-control-scale",k=Ft("div",b),j=this.options;return this._addScales(j,b+"-line",k),p.on(j.updateWhenIdle?"moveend":"move",this._update,this),p.whenReady(this._update,this),k},onRemove:function(p){p.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(p,b,k){p.metric&&(this._mScale=Ft("div",b,k)),p.imperial&&(this._iScale=Ft("div",b,k))},_update:function(){var p=this._map,b=p.getSize().y/2,k=p.distance(p.containerPointToLatLng([0,b]),p.containerPointToLatLng([this.options.maxWidth,b]));this._updateScales(k)},_updateScales:function(p){this.options.metric&&p&&this._updateMetric(p),this.options.imperial&&p&&this._updateImperial(p)},_updateMetric:function(p){var b=this._getRoundNum(p),k=b<1e3?b+" m":b/1e3+" km";this._updateScale(this._mScale,k,b/p)},_updateImperial:function(p){var b=p*3.2808399,k,j,z;b>5280?(k=b/5280,j=this._getRoundNum(k),this._updateScale(this._iScale,j+" mi",j/k)):(z=this._getRoundNum(b),this._updateScale(this._iScale,z+" ft",z/b))},_updateScale:function(p,b,k){p.style.width=Math.round(this.options.maxWidth*k)+"px",p.innerHTML=b},_getRoundNum:function(p){var b=Math.pow(10,(Math.floor(p)+"").length-1),k=p/b;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:1,b*k}}),Lc=function(p){return new Nu(p)},Xd='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',nl=Ja.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Wt.inlineSvg?Xd+" ":"")+"Leaflet</a>"},initialize:function(p){_(this,p),this._attributions={}},onAdd:function(p){p.attributionControl=this,this._container=Ft("div","leaflet-control-attribution"),Ji(this._container);for(var b in p._layers)p._layers[b].getAttribution&&this.addAttribution(p._layers[b].getAttribution());return this._update(),p.on("layeradd",this._addAttribution,this),this._container},onRemove:function(p){p.off("layeradd",this._addAttribution,this)},_addAttribution:function(p){p.layer.getAttribution&&(this.addAttribution(p.layer.getAttribution()),p.layer.once("remove",function(){this.removeAttribution(p.layer.getAttribution())},this))},setPrefix:function(p){return this.options.prefix=p,this._update(),this},addAttribution:function(p){return p?(this._attributions[p]||(this._attributions[p]=0),this._attributions[p]++,this._update(),this):this},removeAttribution:function(p){return p?(this._attributions[p]&&(this._attributions[p]--,this._update()),this):this},_update:function(){if(this._map){var p=[];for(var b in this._attributions)this._attributions[b]&&p.push(b);var k=[];this.options.prefix&&k.push(this.options.prefix),p.length&&k.push(p.join(", ")),this._container.innerHTML=k.join(' <span aria-hidden="true">|</span> ')}}});Fn.mergeOptions({attributionControl:!0}),Fn.addInitHook(function(){this.options.attributionControl&&new nl().addTo(this)});var Ru=function(p){return new nl(p)};Ja.Layers=Pu,Ja.Zoom=es,Ja.Scale=Nu,Ja.Attribution=nl,Fr.layers=qd,Fr.zoom=$d,Fr.scale=Lc,Fr.attribution=Ru;var Vr=K.extend({initialize:function(p){this._map=p},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Vr.addTo=function(p,b){return p.addHandler(b,this),this};var va={Events:re},ao=Wt.touch?"touchstart mousedown":"mousedown",Ns=oe.extend({options:{clickTolerance:3},initialize:function(p,b,k,j){_(this,j),this._element=p,this._dragStartTarget=b||p,this._preventOutline=k},enable:function(){this._enabled||(an(this._dragStartTarget,ao,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ns._dragging===this&&this.finishDrag(!0),yr(this._dragStartTarget,ao,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(p){if(this._enabled&&(this._moved=!1,!tn(this._element,"leaflet-zoom-anim"))){if(p.touches&&p.touches.length!==1){Ns._dragging===this&&this.finishDrag();return}if(!(Ns._dragging||p.shiftKey||p.which!==1&&p.button!==1&&!p.touches)&&(Ns._dragging=this,this._preventOutline&&Fl(this._element),Kf(),si(),!this._moving)){this.fire("down");var b=p.touches?p.touches[0]:p,k=Vn(this._element);this._startPoint=new $(b.clientX,b.clientY),this._startPos=Pi(this._element),this._parentScale=Rc(k);var j=p.type==="mousedown";an(document,j?"mousemove":"touchmove",this._onMove,this),an(document,j?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(p){if(this._enabled){if(p.touches&&p.touches.length>1){this._moved=!0;return}var b=p.touches&&p.touches.length===1?p.touches[0]:p,k=new $(b.clientX,b.clientY)._subtract(this._startPoint);!k.x&&!k.y||Math.abs(k.x)+Math.abs(k.y)<this.options.clickTolerance||(k.x/=this._parentScale.x,k.y/=this._parentScale.y,Kr(p),this._moved||(this.fire("dragstart"),this._moved=!0,Xt(document.body,"leaflet-dragging"),this._lastTarget=p.target||p.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Xt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(k),this._moving=!0,this._lastEvent=p,this._updatePosition())}},_updatePosition:function(){var p={originalEvent:this._lastEvent};this.fire("predrag",p),qt(this._element,this._newPos),this.fire("drag",p)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(p){er(document.body,"leaflet-dragging"),this._lastTarget&&(er(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),yr(document,"mousemove touchmove",this._onMove,this),yr(document,"mouseup touchend touchcancel",this._onUp,this),Nc(),Pa();var b=this._moved&&this._moving;this._moving=!1,Ns._dragging=!1,b&&this.fire("dragend",{noInertia:p,distance:this._newPos.distanceTo(this._startPos)})}});function Oc(p,b,k){var j,z=[1,4,2,8],Y,he,Re,We,ct,Tt,ln,Rn;for(Y=0,Tt=p.length;Y<Tt;Y++)p[Y]._code=so(p[Y],b);for(Re=0;Re<4;Re++){for(ln=z[Re],j=[],Y=0,Tt=p.length,he=Tt-1;Y<Tt;he=Y++)We=p[Y],ct=p[he],We._code&ln?ct._code&ln||(Rn=Ni(ct,We,ln,b,k),Rn._code=so(Rn,b),j.push(Rn)):(ct._code&ln&&(Rn=Ni(ct,We,ln,b,k),Rn._code=so(Rn,b),j.push(Rn)),j.push(We));p=j}return p}function ts(p,b){var k,j,z,Y,he,Re,We,ct,Tt;if(!p||p.length===0)throw new Error("latlngs not passed");A(p)||(console.warn("latlngs are not flat! Only the first ring will be used"),p=p[0]);var ln=Le([0,0]),Rn=at(p),Da=Rn.getNorthWest().distanceTo(Rn.getSouthWest())*Rn.getNorthEast().distanceTo(Rn.getNorthWest());Da<1700&&(ln=Rs(p));var Ai=p.length,rs=[];for(k=0;k<Ai;k++){var is=Le(p[k]);rs.push(b.project(Le([is.lat-ln.lat,is.lng-ln.lng])))}for(Re=We=ct=0,k=0,j=Ai-1;k<Ai;j=k++)z=rs[k],Y=rs[j],he=z.y*Y.x-Y.y*z.x,We+=(z.x+Y.x)*he,ct+=(z.y+Y.y)*he,Re+=he*3;Re===0?Tt=rs[0]:Tt=[We/Re,ct/Re];var zc=b.unproject(se(Tt));return Le([zc.lat+ln.lat,zc.lng+ln.lng])}function Rs(p){for(var b=0,k=0,j=0,z=0;z<p.length;z++){var Y=Le(p[z]);b+=Y.lat,k+=Y.lng,j++}return Le([b/j,k/j])}var Bl={__proto__:null,clipPolygon:Oc,polygonCenter:ts,centroid:Rs};function Kd(p,b){if(!b||!p.length)return p.slice();var k=b*b;return p=Fc(p,k),p=Zf(p,k),p}function Du(p,b,k){return Math.sqrt(ea(p,b,k,!0))}function rl(p,b,k){return ea(p,b,k)}function Zf(p,b){var k=p.length,j=typeof Uint8Array<"u"?Uint8Array:Array,z=new j(k);z[0]=z[k-1]=1,Lu(p,z,b,0,k-1);var Y,he=[];for(Y=0;Y<k;Y++)z[Y]&&he.push(p[Y]);return he}function Lu(p,b,k,j,z){var Y=0,he,Re,We;for(Re=j+1;Re<=z-1;Re++)We=ea(p[Re],p[j],p[z],!0),We>Y&&(he=Re,Y=We);Y>k&&(b[he]=1,Lu(p,b,k,j,he),Lu(p,b,k,he,z))}function Fc(p,b){for(var k=[p[0]],j=1,z=0,Y=p.length;j<Y;j++)Ul(p[j],p[z])>b&&(k.push(p[j]),z=j);return z<Y-1&&k.push(p[Y-1]),k}var Yd;function Ou(p,b,k,j,z){var Y=j?Yd:so(p,k),he=so(b,k),Re,We,ct;for(Yd=he;;){if(!(Y|he))return[p,b];if(Y&he)return!1;Re=Y||he,We=Ni(p,b,Re,k,z),ct=so(We,k),Re===Y?(p=We,Y=ct):(b=We,he=ct)}}function Ni(p,b,k,j,z){var Y=b.x-p.x,he=b.y-p.y,Re=j.min,We=j.max,ct,Tt;return k&8?(ct=p.x+Y*(We.y-p.y)/he,Tt=We.y):k&4?(ct=p.x+Y*(Re.y-p.y)/he,Tt=Re.y):k&2?(ct=We.x,Tt=p.y+he*(We.x-p.x)/Y):k&1&&(ct=Re.x,Tt=p.y+he*(Re.x-p.x)/Y),new $(ct,Tt,z)}function so(p,b){var k=0;return p.x<b.min.x?k|=1:p.x>b.max.x&&(k|=2),p.y<b.min.y?k|=4:p.y>b.max.y&&(k|=8),k}function Ul(p,b){var k=b.x-p.x,j=b.y-p.y;return k*k+j*j}function ea(p,b,k,j){var z=b.x,Y=b.y,he=k.x-z,Re=k.y-Y,We=he*he+Re*Re,ct;return We>0&&(ct=((p.x-z)*he+(p.y-Y)*Re)/We,ct>1?(z=k.x,Y=k.y):ct>0&&(z+=he*ct,Y+=Re*ct)),he=p.x-z,Re=p.y-Y,j?he*he+Re*Re:new $(z,Y)}function A(p){return!E(p[0])||typeof p[0][0]!="object"&&typeof p[0][0]<"u"}function V(p){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),A(p)}function W(p,b){var k,j,z,Y,he,Re,We,ct;if(!p||p.length===0)throw new Error("latlngs not passed");A(p)||(console.warn("latlngs are not flat! Only the first ring will be used"),p=p[0]);var Tt=Le([0,0]),ln=at(p),Rn=ln.getNorthWest().distanceTo(ln.getSouthWest())*ln.getNorthEast().distanceTo(ln.getNorthWest());Rn<1700&&(Tt=Rs(p));var Da=p.length,Ai=[];for(k=0;k<Da;k++){var rs=Le(p[k]);Ai.push(b.project(Le([rs.lat-Tt.lat,rs.lng-Tt.lng])))}for(k=0,j=0;k<Da-1;k++)j+=Ai[k].distanceTo(Ai[k+1])/2;if(j===0)ct=Ai[0];else for(k=0,Y=0;k<Da-1;k++)if(he=Ai[k],Re=Ai[k+1],z=he.distanceTo(Re),Y+=z,Y>j){We=(Y-j)/z,ct=[Re.x-We*(Re.x-he.x),Re.y-We*(Re.y-he.y)];break}var is=b.unproject(se(ct));return Le([is.lat+Tt.lat,is.lng+Tt.lng])}var J={__proto__:null,simplify:Kd,pointToSegmentDistance:Du,closestPointOnSegment:rl,clipSegment:Ou,_getEdgeIntersection:Ni,_getBitCode:so,_sqClosestPointOnSegment:ea,isFlat:A,_flat:V,polylineCenter:W},ke={project:function(p){return new $(p.lng,p.lat)},unproject:function(p){return new me(p.y,p.x)},bounds:new pe([-180,-90],[180,90])},ze={R:6378137,R_MINOR:6356752314245179e-9,bounds:new pe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(p){var b=Math.PI/180,k=this.R,j=p.lat*b,z=this.R_MINOR/k,Y=Math.sqrt(1-z*z),he=Y*Math.sin(j),Re=Math.tan(Math.PI/4-j/2)/Math.pow((1-he)/(1+he),Y/2);return j=-k*Math.log(Math.max(Re,1e-10)),new $(p.lng*b*k,j)},unproject:function(p){for(var b=180/Math.PI,k=this.R,j=this.R_MINOR/k,z=Math.sqrt(1-j*j),Y=Math.exp(-p.y/k),he=Math.PI/2-2*Math.atan(Y),Re=0,We=.1,ct;Re<15&&Math.abs(We)>1e-7;Re++)ct=z*Math.sin(he),ct=Math.pow((1-ct)/(1+ct),z/2),We=Math.PI/2-2*Math.atan(Y*ct)-he,he+=We;return new me(he*b,p.x*b/k)}},mt={__proto__:null,LonLat:ke,Mercator:ze,SphericalMercator:Me},Gn=i({},ge,{code:"EPSG:3395",projection:ze,transformation:function(){var p=.5/(Math.PI*ze.R);return Te(p,.5,-p,.5)}()}),hi=i({},ge,{code:"EPSG:4326",projection:ke,transformation:Te(1/180,1,-1/180,.5)}),zn=i({},Se,{projection:ke,transformation:Te(1,0,-1,0),scale:function(p){return Math.pow(2,p)},zoom:function(p){return Math.log(p)/Math.LN2},distance:function(p,b){var k=b.lng-p.lng,j=b.lat-p.lat;return Math.sqrt(k*k+j*j)},infinite:!0});Se.Earth=ge,Se.EPSG3395=Gn,Se.EPSG3857=te,Se.EPSG900913=Ee,Se.EPSG4326=hi,Se.Simple=zn;var ur=oe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(p){return p.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(p){return p&&p.removeLayer(this),this},getPane:function(p){return this._map.getPane(p?this.options[p]||p:this.options.pane)},addInteractiveTarget:function(p){return this._map._targets[l(p)]=this,this},removeInteractiveTarget:function(p){return delete this._map._targets[l(p)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(p){var b=p.target;if(b.hasLayer(this)){if(this._map=b,this._zoomAnimated=b._zoomAnimated,this.getEvents){var k=this.getEvents();b.on(k,this),this.once("remove",function(){b.off(k,this)},this)}this.onAdd(b),this.fire("add"),b.fire("layeradd",{layer:this})}}});Fn.include({addLayer:function(p){if(!p._layerAdd)throw new Error("The provided object is not a Layer.");var b=l(p);return this._layers[b]?this:(this._layers[b]=p,p._mapToAdd=this,p.beforeAdd&&p.beforeAdd(this),this.whenReady(p._layerAdd,p),this)},removeLayer:function(p){var b=l(p);return this._layers[b]?(this._loaded&&p.onRemove(this),delete this._layers[b],this._loaded&&(this.fire("layerremove",{layer:p}),p.fire("remove")),p._map=p._mapToAdd=null,this):this},hasLayer:function(p){return l(p)in this._layers},eachLayer:function(p,b){for(var k in this._layers)p.call(b,this._layers[k]);return this},_addLayers:function(p){p=p?E(p)?p:[p]:[];for(var b=0,k=p.length;b<k;b++)this.addLayer(p[b])},_addZoomLimit:function(p){(!isNaN(p.options.maxZoom)||!isNaN(p.options.minZoom))&&(this._zoomBoundLayers[l(p)]=p,this._updateZoomLevels())},_removeZoomLimit:function(p){var b=l(p);this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels())},_updateZoomLevels:function(){var p=1/0,b=-1/0,k=this._getZoomSpan();for(var j in this._zoomBoundLayers){var z=this._zoomBoundLayers[j].options;p=z.minZoom===void 0?p:Math.min(p,z.minZoom),b=z.maxZoom===void 0?b:Math.max(b,z.maxZoom)}this._layersMaxZoom=b===-1/0?void 0:b,this._layersMinZoom=p===1/0?void 0:p,k!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Wn=ur.extend({initialize:function(p,b){_(this,b),this._layers={};var k,j;if(p)for(k=0,j=p.length;k<j;k++)this.addLayer(p[k])},addLayer:function(p){var b=this.getLayerId(p);return this._layers[b]=p,this._map&&this._map.addLayer(p),this},removeLayer:function(p){var b=p in this._layers?p:this.getLayerId(p);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(p){var b=typeof p=="number"?p:this.getLayerId(p);return b in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(p){var b=Array.prototype.slice.call(arguments,1),k,j;for(k in this._layers)j=this._layers[k],j[p]&&j[p].apply(j,b);return this},onAdd:function(p){this.eachLayer(p.addLayer,p)},onRemove:function(p){this.eachLayer(p.removeLayer,p)},eachLayer:function(p,b){for(var k in this._layers)p.call(b,this._layers[k]);return this},getLayer:function(p){return this._layers[p]},getLayers:function(){var p=[];return this.eachLayer(p.push,p),p},setZIndex:function(p){return this.invoke("setZIndex",p)},getLayerId:function(p){return l(p)}}),Si=function(p,b){return new Wn(p,b)},_n=Wn.extend({addLayer:function(p){return this.hasLayer(p)?this:(p.addEventParent(this),Wn.prototype.addLayer.call(this,p),this.fire("layeradd",{layer:p}))},removeLayer:function(p){return this.hasLayer(p)?(p in this._layers&&(p=this._layers[p]),p.removeEventParent(this),Wn.prototype.removeLayer.call(this,p),this.fire("layerremove",{layer:p})):this},setStyle:function(p){return this.invoke("setStyle",p)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var p=new $e;for(var b in this._layers){var k=this._layers[b];p.extend(k.getBounds?k.getBounds():k.getLatLng())}return p}}),il=function(p,b){return new _n(p,b)},Ei=K.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(p){_(this,p)},createIcon:function(p){return this._createIcon("icon",p)},createShadow:function(p){return this._createIcon("shadow",p)},_createIcon:function(p,b){var k=this._getIconUrl(p);if(!k){if(p==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var j=this._createImg(k,b&&b.tagName==="IMG"?b:null);return this._setIconStyles(j,p),(this.options.crossOrigin||this.options.crossOrigin==="")&&(j.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),j},_setIconStyles:function(p,b){var k=this.options,j=k[b+"Size"];typeof j=="number"&&(j=[j,j]);var z=se(j),Y=se(b==="shadow"&&k.shadowAnchor||k.iconAnchor||z&&z.divideBy(2,!0));p.className="leaflet-marker-"+b+" "+(k.className||""),Y&&(p.style.marginLeft=-Y.x+"px",p.style.marginTop=-Y.y+"px"),z&&(p.style.width=z.x+"px",p.style.height=z.y+"px")},_createImg:function(p,b){return b=b||document.createElement("img"),b.src=p,b},_getIconUrl:function(p){return Wt.retina&&this.options[p+"RetinaUrl"]||this.options[p+"Url"]}});function yw(p){return new Ei(p)}var Zd=Ei.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(p){return typeof Zd.imagePath!="string"&&(Zd.imagePath=this._detectIconPath()),(this.options.imagePath||Zd.imagePath)+Ei.prototype._getIconUrl.call(this,p)},_stripUrl:function(p){var b=function(k,j,z){var Y=j.exec(k);return Y&&Y[z]};return p=b(p,/^url\((['"])?(.+)\1\)$/,2),p&&b(p,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var p=Ft("div","leaflet-default-icon-path",document.body),b=Ht(p,"background-image")||Ht(p,"backgroundImage");if(document.body.removeChild(p),b=this._stripUrl(b),b)return b;var k=document.querySelector('link[href$="leaflet.css"]');return k?k.href.substring(0,k.href.length-11-1):""}}),dg=Vr.extend({initialize:function(p){this._marker=p},addHooks:function(){var p=this._marker._icon;this._draggable||(this._draggable=new Ns(p,p,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Xt(p,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&er(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(p){var b=this._marker,k=b._map,j=this._marker.options.autoPanSpeed,z=this._marker.options.autoPanPadding,Y=Pi(b._icon),he=k.getPixelBounds(),Re=k.getPixelOrigin(),We=Fe(he.min._subtract(Re).add(z),he.max._subtract(Re).subtract(z));if(!We.contains(Y)){var ct=se((Math.max(We.max.x,Y.x)-We.max.x)/(he.max.x-We.max.x)-(Math.min(We.min.x,Y.x)-We.min.x)/(he.min.x-We.min.x),(Math.max(We.max.y,Y.y)-We.max.y)/(he.max.y-We.max.y)-(Math.min(We.min.y,Y.y)-We.min.y)/(he.min.y-We.min.y)).multiplyBy(j);k.panBy(ct,{animate:!1}),this._draggable._newPos._add(ct),this._draggable._startPos._add(ct),qt(b._icon,this._draggable._newPos),this._onDrag(p),this._panRequest=B(this._adjustPan.bind(this,p))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(p){this._marker.options.autoPan&&(G(this._panRequest),this._panRequest=B(this._adjustPan.bind(this,p)))},_onDrag:function(p){var b=this._marker,k=b._shadow,j=Pi(b._icon),z=b._map.layerPointToLatLng(j);k&&qt(k,j),b._latlng=z,p.latlng=z,p.oldLatLng=this._oldLatLng,b.fire("move",p).fire("drag",p)},_onDragEnd:function(p){G(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",p)}}),Qd=ur.extend({options:{icon:new Zd,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(p,b){_(this,b),this._latlng=Le(p)},onAdd:function(p){this._zoomAnimated=this._zoomAnimated&&p.options.markerZoomAnimation,this._zoomAnimated&&p.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(p){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&p.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(p){var b=this._latlng;return this._latlng=Le(p),this.update(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},setZIndexOffset:function(p){return this.options.zIndexOffset=p,this.update()},getIcon:function(){return this.options.icon},setIcon:function(p){return this.options.icon=p,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var p=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(p)}return this},_initIcon:function(){var p=this.options,b="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),k=p.icon.createIcon(this._icon),j=!1;k!==this._icon&&(this._icon&&this._removeIcon(),j=!0,p.title&&(k.title=p.title),k.tagName==="IMG"&&(k.alt=p.alt||"")),Xt(k,b),p.keyboard&&(k.tabIndex="0",k.setAttribute("role","button")),this._icon=k,p.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&an(k,"focus",this._panOnFocus,this);var z=p.icon.createShadow(this._shadow),Y=!1;z!==this._shadow&&(this._removeShadow(),Y=!0),z&&(Xt(z,b),z.alt=""),this._shadow=z,p.opacity<1&&this._updateOpacity(),j&&this.getPane().appendChild(this._icon),this._initInteraction(),z&&Y&&this.getPane(p.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&yr(this._icon,"focus",this._panOnFocus,this),Pt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Pt(this._shadow),this._shadow=null},_setPos:function(p){this._icon&&qt(this._icon,p),this._shadow&&qt(this._shadow,p),this._zIndex=p.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(p){this._icon&&(this._icon.style.zIndex=this._zIndex+p)},_animateZoom:function(p){var b=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.interactive&&(Xt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),dg)){var p=this.options.draggable;this.dragging&&(p=this.dragging.enabled(),this.dragging.disable()),this.dragging=new dg(this),p&&this.dragging.enable()}},setOpacity:function(p){return this.options.opacity=p,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var p=this.options.opacity;this._icon&&fn(this._icon,p),this._shadow&&fn(this._shadow,p)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var p=this._map;if(p){var b=this.options.icon.options,k=b.iconSize?se(b.iconSize):se(0,0),j=b.iconAnchor?se(b.iconAnchor):se(0,0);p.panInside(this._latlng,{paddingTopLeft:j,paddingBottomRight:k.subtract(j)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function xw(p,b){return new Qd(p,b)}var oo=ur.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(p){this._renderer=p.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(p){return _(this,p),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&p&&Object.prototype.hasOwnProperty.call(p,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Vl=oo.extend({options:{fill:!0,radius:10},initialize:function(p,b){_(this,b),this._latlng=Le(p),this._radius=this.options.radius},setLatLng:function(p){var b=this._latlng;return this._latlng=Le(p),this.redraw(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(p){return this.options.radius=this._radius=p,this.redraw()},getRadius:function(){return this._radius},setStyle:function(p){var b=p&&p.radius||this._radius;return oo.prototype.setStyle.call(this,p),this.setRadius(b),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var p=this._radius,b=this._radiusY||p,k=this._clickTolerance(),j=[p+k,b+k];this._pxBounds=new pe(this._point.subtract(j),this._point.add(j))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(p){return p.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function xy(p,b){return new Vl(p,b)}var jc=Vl.extend({initialize:function(p,b,k){if(typeof b=="number"&&(b=i({},k,{radius:b})),_(this,b),this._latlng=Le(p),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(p){return this._mRadius=p,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var p=[this._radius,this._radiusY||this._radius];return new $e(this._map.layerPointToLatLng(this._point.subtract(p)),this._map.layerPointToLatLng(this._point.add(p)))},setStyle:oo.prototype.setStyle,_project:function(){var p=this._latlng.lng,b=this._latlng.lat,k=this._map,j=k.options.crs;if(j.distance===ge.distance){var z=Math.PI/180,Y=this._mRadius/ge.R/z,he=k.project([b+Y,p]),Re=k.project([b-Y,p]),We=he.add(Re).divideBy(2),ct=k.unproject(We).lat,Tt=Math.acos((Math.cos(Y*z)-Math.sin(b*z)*Math.sin(ct*z))/(Math.cos(b*z)*Math.cos(ct*z)))/z;(isNaN(Tt)||Tt===0)&&(Tt=Y/Math.cos(Math.PI/180*b)),this._point=We.subtract(k.getPixelOrigin()),this._radius=isNaN(Tt)?0:We.x-k.project([ct,p-Tt]).x,this._radiusY=We.y-he.y}else{var ln=j.unproject(j.project(this._latlng).subtract([this._mRadius,0]));this._point=k.latLngToLayerPoint(this._latlng),this._radius=this._point.x-k.latLngToLayerPoint(ln).x}this._updateBounds()}});function hg(p,b,k){return new jc(p,b,k)}var al=oo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(p,b){_(this,b),this._setLatLngs(p)},getLatLngs:function(){return this._latlngs},setLatLngs:function(p){return this._setLatLngs(p),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(p){for(var b=1/0,k=null,j=ea,z,Y,he=0,Re=this._parts.length;he<Re;he++)for(var We=this._parts[he],ct=1,Tt=We.length;ct<Tt;ct++){z=We[ct-1],Y=We[ct];var ln=j(p,z,Y,!0);ln<b&&(b=ln,k=j(p,z,Y))}return k&&(k.distance=Math.sqrt(b)),k},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return W(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(p,b){return b=b||this._defaultShape(),p=Le(p),b.push(p),this._bounds.extend(p),this.redraw()},_setLatLngs:function(p){this._bounds=new $e,this._latlngs=this._convertLatLngs(p)},_defaultShape:function(){return A(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(p){for(var b=[],k=A(p),j=0,z=p.length;j<z;j++)k?(b[j]=Le(p[j]),this._bounds.extend(b[j])):b[j]=this._convertLatLngs(p[j]);return b},_project:function(){var p=new pe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,p),this._bounds.isValid()&&p.isValid()&&(this._rawPxBounds=p,this._updateBounds())},_updateBounds:function(){var p=this._clickTolerance(),b=new $(p,p);this._rawPxBounds&&(this._pxBounds=new pe([this._rawPxBounds.min.subtract(b),this._rawPxBounds.max.add(b)]))},_projectLatlngs:function(p,b,k){var j=p[0]instanceof me,z=p.length,Y,he;if(j){for(he=[],Y=0;Y<z;Y++)he[Y]=this._map.latLngToLayerPoint(p[Y]),k.extend(he[Y]);b.push(he)}else for(Y=0;Y<z;Y++)this._projectLatlngs(p[Y],b,k)},_clipPoints:function(){var p=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(p))){if(this.options.noClip){this._parts=this._rings;return}var b=this._parts,k,j,z,Y,he,Re,We;for(k=0,z=0,Y=this._rings.length;k<Y;k++)for(We=this._rings[k],j=0,he=We.length;j<he-1;j++)Re=Ou(We[j],We[j+1],p,j,!0),Re&&(b[z]=b[z]||[],b[z].push(Re[0]),(Re[1]!==We[j+1]||j===he-2)&&(b[z].push(Re[1]),z++))}},_simplifyPoints:function(){for(var p=this._parts,b=this.options.smoothFactor,k=0,j=p.length;k<j;k++)p[k]=Kd(p[k],b)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(p,b){var k,j,z,Y,he,Re,We=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(k=0,Y=this._parts.length;k<Y;k++)for(Re=this._parts[k],j=0,he=Re.length,z=he-1;j<he;z=j++)if(!(!b&&j===0)&&Du(p,Re[z],Re[j])<=We)return!0;return!1}});function _w(p,b){return new al(p,b)}al._flat=V;var Ro=al.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ts(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(p){var b=al.prototype._convertLatLngs.call(this,p),k=b.length;return k>=2&&b[0]instanceof me&&b[0].equals(b[k-1])&&b.pop(),b},_setLatLngs:function(p){al.prototype._setLatLngs.call(this,p),A(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return A(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var p=this._renderer._bounds,b=this.options.weight,k=new $(b,b);if(p=new pe(p.min.subtract(k),p.max.add(k)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(p))){if(this.options.noClip){this._parts=this._rings;return}for(var j=0,z=this._rings.length,Y;j<z;j++)Y=Oc(this._rings[j],p,!0),Y.length&&this._parts.push(Y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(p){var b=!1,k,j,z,Y,he,Re,We,ct;if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(Y=0,We=this._parts.length;Y<We;Y++)for(k=this._parts[Y],he=0,ct=k.length,Re=ct-1;he<ct;Re=he++)j=k[he],z=k[Re],j.y>p.y!=z.y>p.y&&p.x<(z.x-j.x)*(p.y-j.y)/(z.y-j.y)+j.x&&(b=!b);return b||al.prototype._containsPoint.call(this,p,!0)}});function ww(p,b){return new Ro(p,b)}var Ds=_n.extend({initialize:function(p,b){_(this,b),this._layers={},p&&this.addData(p)},addData:function(p){var b=E(p)?p:p.features,k,j,z;if(b){for(k=0,j=b.length;k<j;k++)z=b[k],(z.geometries||z.geometry||z.features||z.coordinates)&&this.addData(z);return this}var Y=this.options;if(Y.filter&&!Y.filter(p))return this;var he=Ra(p,Y);return he?(he.feature=eh(p),he.defaultOptions=he.options,this.resetStyle(he),Y.onEachFeature&&Y.onEachFeature(p,he),this.addLayer(he)):this},resetStyle:function(p){return p===void 0?this.eachLayer(this.resetStyle,this):(p.options=i({},p.defaultOptions),this._setLayerStyle(p,this.options.style),this)},setStyle:function(p){return this.eachLayer(function(b){this._setLayerStyle(b,p)},this)},_setLayerStyle:function(p,b){p.setStyle&&(typeof b=="function"&&(b=b(p.feature)),p.setStyle(b))}});function Ra(p,b){var k=p.type==="Feature"?p.geometry:p,j=k?k.coordinates:null,z=[],Y=b&&b.pointToLayer,he=b&&b.coordsToLatLng||Fu,Re,We,ct,Tt;if(!j&&!k)return null;switch(k.type){case"Point":return Re=he(j),Jd(Y,p,Re,b);case"MultiPoint":for(ct=0,Tt=j.length;ct<Tt;ct++)Re=he(j[ct]),z.push(Jd(Y,p,Re,b));return new _n(z);case"LineString":case"MultiLineString":return We=Ls(j,k.type==="LineString"?0:1,he),new al(We,b);case"Polygon":case"MultiPolygon":return We=Ls(j,k.type==="Polygon"?1:2,he),new Ro(We,b);case"GeometryCollection":for(ct=0,Tt=k.geometries.length;ct<Tt;ct++){var ln=Ra({geometry:k.geometries[ct],type:"Feature",properties:p.properties},b);ln&&z.push(ln)}return new _n(z);case"FeatureCollection":for(ct=0,Tt=k.features.length;ct<Tt;ct++){var Rn=Ra(k.features[ct],b);Rn&&z.push(Rn)}return new _n(z);default:throw new Error("Invalid GeoJSON object.")}}function Jd(p,b,k,j){return p?p(b,k):new Qd(k,j&&j.markersInheritOptions&&j)}function Fu(p){return new me(p[1],p[0],p[2])}function Ls(p,b,k){for(var j=[],z=0,Y=p.length,he;z<Y;z++)he=b?Ls(p[z],b-1,k):(k||Fu)(p[z]),j.push(he);return j}function Qf(p,b){return p=Le(p),p.alt!==void 0?[f(p.lng,b),f(p.lat,b),f(p.alt,b)]:[f(p.lng,b),f(p.lat,b)]}function zl(p,b,k,j){for(var z=[],Y=0,he=p.length;Y<he;Y++)z.push(b?zl(p[Y],A(p[Y])?0:b-1,k,j):Qf(p[Y],j));return!b&&k&&z.length>0&&z.push(z[0].slice()),z}function Bc(p,b){return p.feature?i({},p.feature,{geometry:b}):eh(b)}function eh(p){return p.type==="Feature"||p.type==="FeatureCollection"?p:{type:"Feature",properties:{},geometry:p}}var jr={toGeoJSON:function(p){return Bc(this,{type:"Point",coordinates:Qf(this.getLatLng(),p)})}};Qd.include(jr),jc.include(jr),Vl.include(jr),al.include({toGeoJSON:function(p){var b=!A(this._latlngs),k=zl(this._latlngs,b?1:0,!1,p);return Bc(this,{type:(b?"Multi":"")+"LineString",coordinates:k})}}),Ro.include({toGeoJSON:function(p){var b=!A(this._latlngs),k=b&&!A(this._latlngs[0]),j=zl(this._latlngs,k?2:b?1:0,!0,p);return b||(j=[j]),Bc(this,{type:(k?"Multi":"")+"Polygon",coordinates:j})}}),Wn.include({toMultiPoint:function(p){var b=[];return this.eachLayer(function(k){b.push(k.toGeoJSON(p).geometry.coordinates)}),Bc(this,{type:"MultiPoint",coordinates:b})},toGeoJSON:function(p){var b=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(b==="MultiPoint")return this.toMultiPoint(p);var k=b==="GeometryCollection",j=[];return this.eachLayer(function(z){if(z.toGeoJSON){var Y=z.toGeoJSON(p);if(k)j.push(Y.geometry);else{var he=eh(Y);he.type==="FeatureCollection"?j.push.apply(j,he.features):j.push(he)}}}),k?Bc(this,{geometries:j,type:"GeometryCollection"}):{type:"FeatureCollection",features:j}}});function Jf(p,b){return new Ds(p,b)}var _y=Jf,th=ur.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(p,b,k){this._url=p,this._bounds=at(b),_(this,k)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Xt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Pt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(p){return this.options.opacity=p,this._image&&this._updateOpacity(),this},setStyle:function(p){return p.opacity&&this.setOpacity(p.opacity),this},bringToFront:function(){return this._map&&Nt(this._image),this},bringToBack:function(){return this._map&&On(this._image),this},setUrl:function(p){return this._url=p,this._image&&(this._image.src=p),this},setBounds:function(p){return this._bounds=at(p),this._map&&this._reset(),this},getEvents:function(){var p={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},setZIndex:function(p){return this.options.zIndex=p,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var p=this._url.tagName==="IMG",b=this._image=p?this._url:Ft("img");if(Xt(b,"leaflet-image-layer"),this._zoomAnimated&&Xt(b,"leaflet-zoom-animated"),this.options.className&&Xt(b,this.options.className),b.onselectstart=d,b.onmousemove=d,b.onload=s(this.fire,this,"load"),b.onerror=s(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),p){this._url=b.src;return}b.src=this._url,b.alt=this.options.alt},_animateZoom:function(p){var b=this._map.getZoomScale(p.zoom),k=this._map._latLngBoundsToNewLayerBounds(this._bounds,p.zoom,p.center).min;Pr(this._image,k,b)},_reset:function(){var p=this._image,b=new pe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),k=b.getSize();qt(p,b.min),p.style.width=k.x+"px",p.style.height=k.y+"px"},_updateOpacity:function(){fn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var p=this.options.errorOverlayUrl;p&&this._url!==p&&(this._url=p,this._image.src=p)},getCenter:function(){return this._bounds.getCenter()}}),fg=function(p,b,k){return new th(p,b,k)},Os=th.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var p=this._url.tagName==="VIDEO",b=this._image=p?this._url:Ft("video");if(Xt(b,"leaflet-image-layer"),this._zoomAnimated&&Xt(b,"leaflet-zoom-animated"),this.options.className&&Xt(b,this.options.className),b.onselectstart=d,b.onmousemove=d,b.onloadeddata=s(this.fire,this,"load"),p){for(var k=b.getElementsByTagName("source"),j=[],z=0;z<k.length;z++)j.push(k[z].src);this._url=k.length>0?j:[b.src];return}E(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(b.style,"objectFit")&&(b.style.objectFit="fill"),b.autoplay=!!this.options.autoplay,b.loop=!!this.options.loop,b.muted=!!this.options.muted,b.playsInline=!!this.options.playsInline;for(var Y=0;Y<this._url.length;Y++){var he=Ft("source");he.src=this._url[Y],b.appendChild(he)}}});function nh(p,b,k){return new Os(p,b,k)}var Yr=th.extend({_initImage:function(){var p=this._image=this._url;Xt(p,"leaflet-image-layer"),this._zoomAnimated&&Xt(p,"leaflet-zoom-animated"),this.options.className&&Xt(p,this.options.className),p.onselectstart=d,p.onmousemove=d}});function ya(p,b,k){return new Yr(p,b,k)}var Ar=ur.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(p,b){p&&(p instanceof me||E(p))?(this._latlng=Le(p),_(this,b)):(_(this,p),this._source=b),this.options.content&&(this._content=this.options.content)},openOn:function(p){return p=arguments.length?p:this._source._map,p.hasLayer(this)||p.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(p){return this._map?this.close():(arguments.length?this._source=p:p=this._source,this._prepareOpen(),this.openOn(p._map)),this},onAdd:function(p){this._zoomAnimated=p._zoomAnimated,this._container||this._initLayout(),p._fadeAnimated&&fn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),p._fadeAnimated&&fn(this._container,1),this.bringToFront(),this.options.interactive&&(Xt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(p){p._fadeAnimated?(fn(this._container,0),this._removeTimeout=setTimeout(s(Pt,void 0,this._container),200)):Pt(this._container),this.options.interactive&&(er(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(p){return this._latlng=Le(p),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(p){return this._content=p,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var p={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Nt(this._container),this},bringToBack:function(){return this._map&&On(this._container),this},_prepareOpen:function(p){var b=this._source;if(!b._map)return!1;if(b instanceof _n){b=null;var k=this._source._layers;for(var j in k)if(k[j]._map){b=k[j];break}if(!b)return!1;this._source=b}if(!p)if(b.getCenter)p=b.getCenter();else if(b.getLatLng)p=b.getLatLng();else if(b.getBounds)p=b.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(p),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var p=this._contentNode,b=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof b=="string")p.innerHTML=b;else{for(;p.hasChildNodes();)p.removeChild(p.firstChild);p.appendChild(b)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var p=this._map.latLngToLayerPoint(this._latlng),b=se(this.options.offset),k=this._getAnchor();this._zoomAnimated?qt(this._container,p.add(k)):b=b.add(p).add(k);var j=this._containerBottom=-b.y,z=this._containerLeft=-Math.round(this._containerWidth/2)+b.x;this._container.style.bottom=j+"px",this._container.style.left=z+"px"}},_getAnchor:function(){return[0,0]}});Fn.include({_initOverlay:function(p,b,k,j){var z=b;return z instanceof p||(z=new p(j).setContent(b)),k&&z.setLatLng(k),z}}),ur.include({_initOverlay:function(p,b,k,j){var z=k;return z instanceof p?(_(z,j),z._source=this):(z=b&&!j?b:new p(j,this),z.setContent(k)),z}});var Uc=Ar.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(p){return p=arguments.length?p:this._source._map,!p.hasLayer(this)&&p._popup&&p._popup.options.autoClose&&p.removeLayer(p._popup),p._popup=this,Ar.prototype.openOn.call(this,p)},onAdd:function(p){Ar.prototype.onAdd.call(this,p),p.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof oo||this._source.on("preclick",io))},onRemove:function(p){Ar.prototype.onRemove.call(this,p),p.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof oo||this._source.off("preclick",io))},getEvents:function(){var p=Ar.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(p.preclick=this.close),this.options.keepInView&&(p.moveend=this._adjustPan),p},_initLayout:function(){var p="leaflet-popup",b=this._container=Ft("div",p+" "+(this.options.className||"")+" leaflet-zoom-animated"),k=this._wrapper=Ft("div",p+"-content-wrapper",b);if(this._contentNode=Ft("div",p+"-content",k),Ji(b),No(this._contentNode),an(b,"contextmenu",io),this._tipContainer=Ft("div",p+"-tip-container",b),this._tip=Ft("div",p+"-tip",this._tipContainer),this.options.closeButton){var j=this._closeButton=Ft("a",p+"-close-button",b);j.setAttribute("role","button"),j.setAttribute("aria-label","Close popup"),j.href="#close",j.innerHTML='<span aria-hidden="true">&#215;</span>',an(j,"click",function(z){Kr(z),this.close()},this)}},_updateLayout:function(){var p=this._contentNode,b=p.style;b.width="",b.whiteSpace="nowrap";var k=p.offsetWidth;k=Math.min(k,this.options.maxWidth),k=Math.max(k,this.options.minWidth),b.width=k+1+"px",b.whiteSpace="",b.height="";var j=p.offsetHeight,z=this.options.maxHeight,Y="leaflet-popup-scrolled";z&&j>z?(b.height=z+"px",Xt(p,Y)):er(p,Y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(p){var b=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center),k=this._getAnchor();qt(this._container,b.add(k))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var p=this._map,b=parseInt(Ht(this._container,"marginBottom"),10)||0,k=this._container.offsetHeight+b,j=this._containerWidth,z=new $(this._containerLeft,-k-this._containerBottom);z._add(Pi(this._container));var Y=p.layerPointToContainerPoint(z),he=se(this.options.autoPanPadding),Re=se(this.options.autoPanPaddingTopLeft||he),We=se(this.options.autoPanPaddingBottomRight||he),ct=p.getSize(),Tt=0,ln=0;Y.x+j+We.x>ct.x&&(Tt=Y.x+j-ct.x+We.x),Y.x-Tt-Re.x<0&&(Tt=Y.x-Re.x),Y.y+k+We.y>ct.y&&(ln=Y.y+k-ct.y+We.y),Y.y-ln-Re.y<0&&(ln=Y.y-Re.y),(Tt||ln)&&(this.options.keepInView&&(this._autopanning=!0),p.fire("autopanstart").panBy([Tt,ln]))}},_getAnchor:function(){return se(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ep=function(p,b){return new Uc(p,b)};Fn.mergeOptions({closePopupOnClick:!0}),Fn.include({openPopup:function(p,b,k){return this._initOverlay(Uc,p,b,k).openOn(this),this},closePopup:function(p){return p=arguments.length?p:this._popup,p&&p.close(),this}}),ur.include({bindPopup:function(p,b){return this._popup=this._initOverlay(Uc,this._popup,p,b),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(p){return this._popup&&(this instanceof _n||(this._popup._source=this),this._popup._prepareOpen(p||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(p){return this._popup&&this._popup.setContent(p),this},getPopup:function(){return this._popup},_openPopup:function(p){if(!(!this._popup||!this._map)){Ps(p);var b=p.layer||p.target;if(this._popup._source===b&&!(b instanceof oo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(p.latlng);return}this._popup._source=b,this.openPopup(p.latlng)}},_movePopup:function(p){this._popup.setLatLng(p.latlng)},_onKeyPress:function(p){p.originalEvent.keyCode===13&&this._openPopup(p)}});var ju=Ar.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(p){Ar.prototype.onAdd.call(this,p),this.setOpacity(this.options.opacity),p.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(p){Ar.prototype.onRemove.call(this,p),p.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var p=Ar.prototype.getEvents.call(this);return this.options.permanent||(p.preclick=this.close),p},_initLayout:function(){var p="leaflet-tooltip",b=p+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ft("div",b),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(p){var b,k,j=this._map,z=this._container,Y=j.latLngToContainerPoint(j.getCenter()),he=j.layerPointToContainerPoint(p),Re=this.options.direction,We=z.offsetWidth,ct=z.offsetHeight,Tt=se(this.options.offset),ln=this._getAnchor();Re==="top"?(b=We/2,k=ct):Re==="bottom"?(b=We/2,k=0):Re==="center"?(b=We/2,k=ct/2):Re==="right"?(b=0,k=ct/2):Re==="left"?(b=We,k=ct/2):he.x<Y.x?(Re="right",b=0,k=ct/2):(Re="left",b=We+(Tt.x+ln.x)*2,k=ct/2),p=p.subtract(se(b,k,!0)).add(Tt).add(ln),er(z,"leaflet-tooltip-right"),er(z,"leaflet-tooltip-left"),er(z,"leaflet-tooltip-top"),er(z,"leaflet-tooltip-bottom"),Xt(z,"leaflet-tooltip-"+Re),qt(z,p)},_updatePosition:function(){var p=this._map.latLngToLayerPoint(this._latlng);this._setPosition(p)},setOpacity:function(p){this.options.opacity=p,this._container&&fn(this._container,p)},_animateZoom:function(p){var b=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center);this._setPosition(b)},_getAnchor:function(){return se(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Uk=function(p,b){return new ju(p,b)};Fn.include({openTooltip:function(p,b,k){return this._initOverlay(ju,p,b,k).openOn(this),this},closeTooltip:function(p){return p.close(),this}}),ur.include({bindTooltip:function(p,b){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ju,this._tooltip,p,b),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(p){if(!(!p&&this._tooltipHandlersAdded)){var b=p?"off":"on",k={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?k.add=this._openTooltip:(k.mouseover=this._openTooltip,k.mouseout=this.closeTooltip,k.click=this._openTooltip,this._map?this._addFocusListeners():k.add=this._addFocusListeners),this._tooltip.options.sticky&&(k.mousemove=this._moveTooltip),this[b](k),this._tooltipHandlersAdded=!p}},openTooltip:function(p){return this._tooltip&&(this instanceof _n||(this._tooltip._source=this),this._tooltip._prepareOpen(p)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(p){return this._tooltip&&this._tooltip.setContent(p),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(p){var b=typeof p.getElement=="function"&&p.getElement();b&&(an(b,"focus",function(){this._tooltip._source=p,this.openTooltip()},this),an(b,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(p){var b=typeof p.getElement=="function"&&p.getElement();b&&b.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(p){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var b=this;this._map.once("moveend",function(){b._openOnceFlag=!1,b._openTooltip(p)});return}this._tooltip._source=p.layer||p.target,this.openTooltip(this._tooltip.options.sticky?p.latlng:void 0)}},_moveTooltip:function(p){var b=p.latlng,k,j;this._tooltip.options.sticky&&p.originalEvent&&(k=this._map.mouseEventToContainerPoint(p.originalEvent),j=this._map.containerPointToLayerPoint(k),b=this._map.layerPointToLatLng(j)),this._tooltip.setLatLng(b)}});var ta=Ei.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(p){var b=p&&p.tagName==="DIV"?p:document.createElement("div"),k=this.options;if(k.html instanceof Element?(dn(b),b.appendChild(k.html)):b.innerHTML=k.html!==!1?k.html:"",k.bgPos){var j=se(k.bgPos);b.style.backgroundPosition=-j.x+"px "+-j.y+"px"}return this._setIconStyles(b,"icon"),b},createShadow:function(){return null}});function wy(p){return new ta(p)}Ei.Default=Zd;var Vc=ur.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Wt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(p){_(this,p)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(p){p._addZoomLimit(this)},onRemove:function(p){this._removeAllTiles(),Pt(this._container),p._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Nt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(On(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(p){return this.options.opacity=p,this._updateOpacity(),this},setZIndex:function(p){return this.options.zIndex=p,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var p=this._clampZoom(this._map.getZoom());p!==this._tileZoom&&(this._tileZoom=p,this._updateLevels()),this._update()}return this},getEvents:function(){var p={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),p.move=this._onMove),this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},createTile:function(){return document.createElement("div")},getTileSize:function(){var p=this.options.tileSize;return p instanceof $?p:new $(p,p)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(p){for(var b=this.getPane().children,k=-p(-1/0,1/0),j=0,z=b.length,Y;j<z;j++)Y=b[j].style.zIndex,b[j]!==this._container&&Y&&(k=p(k,+Y));isFinite(k)&&(this.options.zIndex=k+p(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Wt.ielt9){fn(this._container,this.options.opacity);var p=+new Date,b=!1,k=!1;for(var j in this._tiles){var z=this._tiles[j];if(!(!z.current||!z.loaded)){var Y=Math.min(1,(p-z.loaded)/200);fn(z.el,Y),Y<1?b=!0:(z.active?k=!0:this._onOpaqueTile(z),z.active=!0)}}k&&!this._noPrune&&this._pruneTiles(),b&&(G(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this))}},_onOpaqueTile:d,_initContainer:function(){this._container||(this._container=Ft("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var p=this._tileZoom,b=this.options.maxZoom;if(p!==void 0){for(var k in this._levels)k=Number(k),this._levels[k].el.children.length||k===p?(this._levels[k].el.style.zIndex=b-Math.abs(p-k),this._onUpdateLevel(k)):(Pt(this._levels[k].el),this._removeTilesAtZoom(k),this._onRemoveLevel(k),delete this._levels[k]);var j=this._levels[p],z=this._map;return j||(j=this._levels[p]={},j.el=Ft("div","leaflet-tile-container leaflet-zoom-animated",this._container),j.el.style.zIndex=b,j.origin=z.project(z.unproject(z.getPixelOrigin()),p).round(),j.zoom=p,this._setZoomTransform(j,z.getCenter(),z.getZoom()),d(j.el.offsetWidth),this._onCreateLevel(j)),this._level=j,j}},_onUpdateLevel:d,_onRemoveLevel:d,_onCreateLevel:d,_pruneTiles:function(){if(this._map){var p,b,k=this._map.getZoom();if(k>this.options.maxZoom||k<this.options.minZoom){this._removeAllTiles();return}for(p in this._tiles)b=this._tiles[p],b.retain=b.current;for(p in this._tiles)if(b=this._tiles[p],b.current&&!b.active){var j=b.coords;this._retainParent(j.x,j.y,j.z,j.z-5)||this._retainChildren(j.x,j.y,j.z,j.z+2)}for(p in this._tiles)this._tiles[p].retain||this._removeTile(p)}},_removeTilesAtZoom:function(p){for(var b in this._tiles)this._tiles[b].coords.z===p&&this._removeTile(b)},_removeAllTiles:function(){for(var p in this._tiles)this._removeTile(p)},_invalidateAll:function(){for(var p in this._levels)Pt(this._levels[p].el),this._onRemoveLevel(Number(p)),delete this._levels[p];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(p,b,k,j){var z=Math.floor(p/2),Y=Math.floor(b/2),he=k-1,Re=new $(+z,+Y);Re.z=+he;var We=this._tileCoordsToKey(Re),ct=this._tiles[We];return ct&&ct.active?(ct.retain=!0,!0):(ct&&ct.loaded&&(ct.retain=!0),he>j?this._retainParent(z,Y,he,j):!1)},_retainChildren:function(p,b,k,j){for(var z=2*p;z<2*p+2;z++)for(var Y=2*b;Y<2*b+2;Y++){var he=new $(z,Y);he.z=k+1;var Re=this._tileCoordsToKey(he),We=this._tiles[Re];if(We&&We.active){We.retain=!0;continue}else We&&We.loaded&&(We.retain=!0);k+1<j&&this._retainChildren(z,Y,k+1,j)}},_resetView:function(p){var b=p&&(p.pinch||p.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),b,b)},_animateZoom:function(p){this._setView(p.center,p.zoom,!0,p.noUpdate)},_clampZoom:function(p){var b=this.options;return b.minNativeZoom!==void 0&&p<b.minNativeZoom?b.minNativeZoom:b.maxNativeZoom!==void 0&&b.maxNativeZoom<p?b.maxNativeZoom:p},_setView:function(p,b,k,j){var z=Math.round(b);this.options.maxZoom!==void 0&&z>this.options.maxZoom||this.options.minZoom!==void 0&&z<this.options.minZoom?z=void 0:z=this._clampZoom(z);var Y=this.options.updateWhenZooming&&z!==this._tileZoom;(!j||Y)&&(this._tileZoom=z,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),z!==void 0&&this._update(p),k||this._pruneTiles(),this._noPrune=!!k),this._setZoomTransforms(p,b)},_setZoomTransforms:function(p,b){for(var k in this._levels)this._setZoomTransform(this._levels[k],p,b)},_setZoomTransform:function(p,b,k){var j=this._map.getZoomScale(k,p.zoom),z=p.origin.multiplyBy(j).subtract(this._map._getNewPixelOrigin(b,k)).round();Wt.any3d?Pr(p.el,z,j):qt(p.el,z)},_resetGrid:function(){var p=this._map,b=p.options.crs,k=this._tileSize=this.getTileSize(),j=this._tileZoom,z=this._map.getPixelWorldBounds(this._tileZoom);z&&(this._globalTileRange=this._pxBoundsToTileRange(z)),this._wrapX=b.wrapLng&&!this.options.noWrap&&[Math.floor(p.project([0,b.wrapLng[0]],j).x/k.x),Math.ceil(p.project([0,b.wrapLng[1]],j).x/k.y)],this._wrapY=b.wrapLat&&!this.options.noWrap&&[Math.floor(p.project([b.wrapLat[0],0],j).y/k.x),Math.ceil(p.project([b.wrapLat[1],0],j).y/k.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(p){var b=this._map,k=b._animatingZoom?Math.max(b._animateToZoom,b.getZoom()):b.getZoom(),j=b.getZoomScale(k,this._tileZoom),z=b.project(p,this._tileZoom).floor(),Y=b.getSize().divideBy(j*2);return new pe(z.subtract(Y),z.add(Y))},_update:function(p){var b=this._map;if(b){var k=this._clampZoom(b.getZoom());if(p===void 0&&(p=b.getCenter()),this._tileZoom!==void 0){var j=this._getTiledPixelBounds(p),z=this._pxBoundsToTileRange(j),Y=z.getCenter(),he=[],Re=this.options.keepBuffer,We=new pe(z.getBottomLeft().subtract([Re,-Re]),z.getTopRight().add([Re,-Re]));if(!(isFinite(z.min.x)&&isFinite(z.min.y)&&isFinite(z.max.x)&&isFinite(z.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ct in this._tiles){var Tt=this._tiles[ct].coords;(Tt.z!==this._tileZoom||!We.contains(new $(Tt.x,Tt.y)))&&(this._tiles[ct].current=!1)}if(Math.abs(k-this._tileZoom)>1){this._setView(p,k);return}for(var ln=z.min.y;ln<=z.max.y;ln++)for(var Rn=z.min.x;Rn<=z.max.x;Rn++){var Da=new $(Rn,ln);if(Da.z=this._tileZoom,!!this._isValidTile(Da)){var Ai=this._tiles[this._tileCoordsToKey(Da)];Ai?Ai.current=!0:he.push(Da)}}if(he.sort(function(is,zc){return is.distanceTo(Y)-zc.distanceTo(Y)}),he.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var rs=document.createDocumentFragment();for(Rn=0;Rn<he.length;Rn++)this._addTile(he[Rn],rs);this._level.el.appendChild(rs)}}}},_isValidTile:function(p){var b=this._map.options.crs;if(!b.infinite){var k=this._globalTileRange;if(!b.wrapLng&&(p.x<k.min.x||p.x>k.max.x)||!b.wrapLat&&(p.y<k.min.y||p.y>k.max.y))return!1}if(!this.options.bounds)return!0;var j=this._tileCoordsToBounds(p);return at(this.options.bounds).overlaps(j)},_keyToBounds:function(p){return this._tileCoordsToBounds(this._keyToTileCoords(p))},_tileCoordsToNwSe:function(p){var b=this._map,k=this.getTileSize(),j=p.scaleBy(k),z=j.add(k),Y=b.unproject(j,p.z),he=b.unproject(z,p.z);return[Y,he]},_tileCoordsToBounds:function(p){var b=this._tileCoordsToNwSe(p),k=new $e(b[0],b[1]);return this.options.noWrap||(k=this._map.wrapLatLngBounds(k)),k},_tileCoordsToKey:function(p){return p.x+":"+p.y+":"+p.z},_keyToTileCoords:function(p){var b=p.split(":"),k=new $(+b[0],+b[1]);return k.z=+b[2],k},_removeTile:function(p){var b=this._tiles[p];b&&(Pt(b.el),delete this._tiles[p],this.fire("tileunload",{tile:b.el,coords:this._keyToTileCoords(p)}))},_initTile:function(p){Xt(p,"leaflet-tile");var b=this.getTileSize();p.style.width=b.x+"px",p.style.height=b.y+"px",p.onselectstart=d,p.onmousemove=d,Wt.ielt9&&this.options.opacity<1&&fn(p,this.options.opacity)},_addTile:function(p,b){var k=this._getTilePos(p),j=this._tileCoordsToKey(p),z=this.createTile(this._wrapCoords(p),s(this._tileReady,this,p));this._initTile(z),this.createTile.length<2&&B(s(this._tileReady,this,p,null,z)),qt(z,k),this._tiles[j]={el:z,coords:p,current:!0},b.appendChild(z),this.fire("tileloadstart",{tile:z,coords:p})},_tileReady:function(p,b,k){b&&this.fire("tileerror",{error:b,tile:k,coords:p});var j=this._tileCoordsToKey(p);k=this._tiles[j],k&&(k.loaded=+new Date,this._map._fadeAnimated?(fn(k.el,0),G(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this)):(k.active=!0,this._pruneTiles()),b||(Xt(k.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:k.el,coords:p})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Wt.ielt9||!this._map._fadeAnimated?B(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(p){return p.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(p){var b=new $(this._wrapX?c(p.x,this._wrapX):p.x,this._wrapY?c(p.y,this._wrapY):p.y);return b.z=p.z,b},_pxBoundsToTileRange:function(p){var b=this.getTileSize();return new pe(p.min.unscaleBy(b).floor(),p.max.unscaleBy(b).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var p in this._tiles)if(!this._tiles[p].loaded)return!1;return!0}});function by(p){return new Vc(p)}var ns=Vc.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(p,b){this._url=p,b=_(this,b),b.detectRetina&&Wt.retina&&b.maxZoom>0?(b.tileSize=Math.floor(b.tileSize/2),b.zoomReverse?(b.zoomOffset--,b.minZoom=Math.min(b.maxZoom,b.minZoom+1)):(b.zoomOffset++,b.maxZoom=Math.max(b.minZoom,b.maxZoom-1)),b.minZoom=Math.max(0,b.minZoom)):b.zoomReverse?b.minZoom=Math.min(b.maxZoom,b.minZoom):b.maxZoom=Math.max(b.minZoom,b.maxZoom),typeof b.subdomains=="string"&&(b.subdomains=b.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(p,b){return this._url===p&&b===void 0&&(b=!0),this._url=p,b||this.redraw(),this},createTile:function(p,b){var k=document.createElement("img");return an(k,"load",s(this._tileOnLoad,this,b,k)),an(k,"error",s(this._tileOnError,this,b,k)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(k.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(k.referrerPolicy=this.options.referrerPolicy),k.alt="",k.src=this.getTileUrl(p),k},getTileUrl:function(p){var b={r:Wt.retina?"@2x":"",s:this._getSubdomain(p),x:p.x,y:p.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var k=this._globalTileRange.max.y-p.y;this.options.tms&&(b.y=k),b["-y"]=k}return S(this._url,i(b,this.options))},_tileOnLoad:function(p,b){Wt.ielt9?setTimeout(s(p,this,null,b),0):p(null,b)},_tileOnError:function(p,b,k){var j=this.options.errorTileUrl;j&&b.getAttribute("src")!==j&&(b.src=j),p(k,b)},_onTileRemove:function(p){p.tile.onload=null},_getZoomForUrl:function(){var p=this._tileZoom,b=this.options.maxZoom,k=this.options.zoomReverse,j=this.options.zoomOffset;return k&&(p=b-p),p+j},_getSubdomain:function(p){var b=Math.abs(p.x+p.y)%this.options.subdomains.length;return this.options.subdomains[b]},_abortLoading:function(){var p,b;for(p in this._tiles)if(this._tiles[p].coords.z!==this._tileZoom&&(b=this._tiles[p].el,b.onload=d,b.onerror=d,!b.complete)){b.src=D;var k=this._tiles[p].coords;Pt(b),delete this._tiles[p],this.fire("tileabort",{tile:b,coords:k})}},_removeTile:function(p){var b=this._tiles[p];if(b)return b.el.setAttribute("src",D),Vc.prototype._removeTile.call(this,p)},_tileReady:function(p,b,k){if(!(!this._map||k&&k.getAttribute("src")===D))return Vc.prototype._tileReady.call(this,p,b,k)}});function Do(p,b){return new ns(p,b)}var Bu=ns.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(p,b){this._url=p;var k=i({},this.defaultWmsParams);for(var j in b)j in this.options||(k[j]=b[j]);b=_(this,b);var z=b.detectRetina&&Wt.retina?2:1,Y=this.getTileSize();k.width=Y.x*z,k.height=Y.y*z,this.wmsParams=k},onAdd:function(p){this._crs=this.options.crs||p.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code,ns.prototype.onAdd.call(this,p)},getTileUrl:function(p){var b=this._tileCoordsToNwSe(p),k=this._crs,j=Fe(k.project(b[0]),k.project(b[1])),z=j.min,Y=j.max,he=(this._wmsVersion>=1.3&&this._crs===hi?[z.y,z.x,Y.y,Y.x]:[z.x,z.y,Y.x,Y.y]).join(","),Re=ns.prototype.getTileUrl.call(this,p);return Re+w(this.wmsParams,Re,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+he},setParams:function(p,b){return i(this.wmsParams,p),b||this.redraw(),this}});function pg(p,b){return new Bu(p,b)}ns.WMS=Bu,Do.wms=pg;var lo=ur.extend({options:{padding:.1},initialize:function(p){_(this,p),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Xt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var p={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(p.zoomanim=this._onAnimZoom),p},_onAnimZoom:function(p){this._updateTransform(p.center,p.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(p,b){var k=this._map.getZoomScale(b,this._zoom),j=this._map.getSize().multiplyBy(.5+this.options.padding),z=this._map.project(this._center,b),Y=j.multiplyBy(-k).add(z).subtract(this._map._getNewPixelOrigin(p,b));Wt.any3d?Pr(this._container,Y,k):qt(this._container,Y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var p in this._layers)this._layers[p]._reset()},_onZoomEnd:function(){for(var p in this._layers)this._layers[p]._project()},_updatePaths:function(){for(var p in this._layers)this._layers[p]._update()},_update:function(){var p=this.options.padding,b=this._map.getSize(),k=this._map.containerPointToLayerPoint(b.multiplyBy(-p)).round();this._bounds=new pe(k,k.add(b.multiplyBy(1+p*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Sy=lo.extend({options:{tolerance:0},getEvents:function(){var p=lo.prototype.getEvents.call(this);return p.viewprereset=this._onViewPreReset,p},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){lo.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var p=this._container=document.createElement("canvas");an(p,"mousemove",this._onMouseMove,this),an(p,"click dblclick mousedown mouseup contextmenu",this._onClick,this),an(p,"mouseout",this._handleMouseOut,this),p._leaflet_disable_events=!0,this._ctx=p.getContext("2d")},_destroyContainer:function(){G(this._redrawRequest),delete this._ctx,Pt(this._container),yr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var p;this._redrawBounds=null;for(var b in this._layers)p=this._layers[b],p._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){lo.prototype._update.call(this);var p=this._bounds,b=this._container,k=p.getSize(),j=Wt.retina?2:1;qt(b,p.min),b.width=j*k.x,b.height=j*k.y,b.style.width=k.x+"px",b.style.height=k.y+"px",Wt.retina&&this._ctx.scale(2,2),this._ctx.translate(-p.min.x,-p.min.y),this.fire("update")}},_reset:function(){lo.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(p){this._updateDashArray(p),this._layers[l(p)]=p;var b=p._order={layer:p,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=b),this._drawLast=b,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(p){this._requestRedraw(p)},_removePath:function(p){var b=p._order,k=b.next,j=b.prev;k?k.prev=j:this._drawLast=j,j?j.next=k:this._drawFirst=k,delete p._order,delete this._layers[l(p)],this._requestRedraw(p)},_updatePath:function(p){this._extendRedrawBounds(p),p._project(),p._update(),this._requestRedraw(p)},_updateStyle:function(p){this._updateDashArray(p),this._requestRedraw(p)},_updateDashArray:function(p){if(typeof p.options.dashArray=="string"){var b=p.options.dashArray.split(/[, ]+/),k=[],j,z;for(z=0;z<b.length;z++){if(j=Number(b[z]),isNaN(j))return;k.push(j)}p.options._dashArray=k}else p.options._dashArray=p.options.dashArray},_requestRedraw:function(p){this._map&&(this._extendRedrawBounds(p),this._redrawRequest=this._redrawRequest||B(this._redraw,this))},_extendRedrawBounds:function(p){if(p._pxBounds){var b=(p.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new pe,this._redrawBounds.extend(p._pxBounds.min.subtract([b,b])),this._redrawBounds.extend(p._pxBounds.max.add([b,b]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var p=this._redrawBounds;if(p){var b=p.getSize();this._ctx.clearRect(p.min.x,p.min.y,b.x,b.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var p,b=this._redrawBounds;if(this._ctx.save(),b){var k=b.getSize();this._ctx.beginPath(),this._ctx.rect(b.min.x,b.min.y,k.x,k.y),this._ctx.clip()}this._drawing=!0;for(var j=this._drawFirst;j;j=j.next)p=j.layer,(!b||p._pxBounds&&p._pxBounds.intersects(b))&&p._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(p,b){if(this._drawing){var k,j,z,Y,he=p._parts,Re=he.length,We=this._ctx;if(Re){for(We.beginPath(),k=0;k<Re;k++){for(j=0,z=he[k].length;j<z;j++)Y=he[k][j],We[j?"lineTo":"moveTo"](Y.x,Y.y);b&&We.closePath()}this._fillStroke(We,p)}}},_updateCircle:function(p){if(!(!this._drawing||p._empty())){var b=p._point,k=this._ctx,j=Math.max(Math.round(p._radius),1),z=(Math.max(Math.round(p._radiusY),1)||j)/j;z!==1&&(k.save(),k.scale(1,z)),k.beginPath(),k.arc(b.x,b.y/z,j,0,Math.PI*2,!1),z!==1&&k.restore(),this._fillStroke(k,p)}},_fillStroke:function(p,b){var k=b.options;k.fill&&(p.globalAlpha=k.fillOpacity,p.fillStyle=k.fillColor||k.color,p.fill(k.fillRule||"evenodd")),k.stroke&&k.weight!==0&&(p.setLineDash&&p.setLineDash(b.options&&b.options._dashArray||[]),p.globalAlpha=k.opacity,p.lineWidth=k.weight,p.strokeStyle=k.color,p.lineCap=k.lineCap,p.lineJoin=k.lineJoin,p.stroke())},_onClick:function(p){for(var b=this._map.mouseEventToLayerPoint(p),k,j,z=this._drawFirst;z;z=z.next)k=z.layer,k.options.interactive&&k._containsPoint(b)&&(!(p.type==="click"||p.type==="preclick")||!this._map._draggableMoved(k))&&(j=k);this._fireEvent(j?[j]:!1,p)},_onMouseMove:function(p){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var b=this._map.mouseEventToLayerPoint(p);this._handleMouseHover(p,b)}},_handleMouseOut:function(p){var b=this._hoveredLayer;b&&(er(this._container,"leaflet-interactive"),this._fireEvent([b],p,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(p,b){if(!this._mouseHoverThrottled){for(var k,j,z=this._drawFirst;z;z=z.next)k=z.layer,k.options.interactive&&k._containsPoint(b)&&(j=k);j!==this._hoveredLayer&&(this._handleMouseOut(p),j&&(Xt(this._container,"leaflet-interactive"),this._fireEvent([j],p,"mouseover"),this._hoveredLayer=j)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,p),this._mouseHoverThrottled=!0,setTimeout(s(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(p,b,k){this._map._fireDOMEvent(b,k||b.type,p)},_bringToFront:function(p){var b=p._order;if(b){var k=b.next,j=b.prev;if(k)k.prev=j;else return;j?j.next=k:k&&(this._drawFirst=k),b.prev=this._drawLast,this._drawLast.next=b,b.next=null,this._drawLast=b,this._requestRedraw(p)}},_bringToBack:function(p){var b=p._order;if(b){var k=b.next,j=b.prev;if(j)j.next=k;else return;k?k.prev=j:j&&(this._drawLast=j),b.prev=null,b.next=this._drawFirst,this._drawFirst.prev=b,this._drawFirst=b,this._requestRedraw(p)}}});function Ey(p){return Wt.canvas?new Sy(p):null}var rh=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(p){return document.createElement("<lvml:"+p+' class="lvml">')}}catch{}return function(p){return document.createElement("<"+p+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),bw={_initContainer:function(){this._container=Ft("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(lo.prototype._update.call(this),this.fire("update"))},_initPath:function(p){var b=p._container=rh("shape");Xt(b,"leaflet-vml-shape "+(this.options.className||"")),b.coordsize="1 1",p._path=rh("path"),b.appendChild(p._path),this._updateStyle(p),this._layers[l(p)]=p},_addPath:function(p){var b=p._container;this._container.appendChild(b),p.options.interactive&&p.addInteractiveTarget(b)},_removePath:function(p){var b=p._container;Pt(b),p.removeInteractiveTarget(b),delete this._layers[l(p)]},_updateStyle:function(p){var b=p._stroke,k=p._fill,j=p.options,z=p._container;z.stroked=!!j.stroke,z.filled=!!j.fill,j.stroke?(b||(b=p._stroke=rh("stroke")),z.appendChild(b),b.weight=j.weight+"px",b.color=j.color,b.opacity=j.opacity,j.dashArray?b.dashStyle=E(j.dashArray)?j.dashArray.join(" "):j.dashArray.replace(/( *, *)/g," "):b.dashStyle="",b.endcap=j.lineCap.replace("butt","flat"),b.joinstyle=j.lineJoin):b&&(z.removeChild(b),p._stroke=null),j.fill?(k||(k=p._fill=rh("fill")),z.appendChild(k),k.color=j.fillColor||j.color,k.opacity=j.fillOpacity):k&&(z.removeChild(k),p._fill=null)},_updateCircle:function(p){var b=p._point.round(),k=Math.round(p._radius),j=Math.round(p._radiusY||k);this._setPath(p,p._empty()?"M0 0":"AL "+b.x+","+b.y+" "+k+","+j+" 0,"+65535*360)},_setPath:function(p,b){p._path.v=b},_bringToFront:function(p){Nt(p._container)},_bringToBack:function(p){On(p._container)}},tp=Wt.vml?rh:Pe,ih=lo.extend({_initContainer:function(){this._container=tp("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=tp("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Pt(this._container),yr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){lo.prototype._update.call(this);var p=this._bounds,b=p.getSize(),k=this._container;(!this._svgSize||!this._svgSize.equals(b))&&(this._svgSize=b,k.setAttribute("width",b.x),k.setAttribute("height",b.y)),qt(k,p.min),k.setAttribute("viewBox",[p.min.x,p.min.y,b.x,b.y].join(" ")),this.fire("update")}},_initPath:function(p){var b=p._path=tp("path");p.options.className&&Xt(b,p.options.className),p.options.interactive&&Xt(b,"leaflet-interactive"),this._updateStyle(p),this._layers[l(p)]=p},_addPath:function(p){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(p._path),p.addInteractiveTarget(p._path)},_removePath:function(p){Pt(p._path),p.removeInteractiveTarget(p._path),delete this._layers[l(p)]},_updatePath:function(p){p._project(),p._update()},_updateStyle:function(p){var b=p._path,k=p.options;b&&(k.stroke?(b.setAttribute("stroke",k.color),b.setAttribute("stroke-opacity",k.opacity),b.setAttribute("stroke-width",k.weight),b.setAttribute("stroke-linecap",k.lineCap),b.setAttribute("stroke-linejoin",k.lineJoin),k.dashArray?b.setAttribute("stroke-dasharray",k.dashArray):b.removeAttribute("stroke-dasharray"),k.dashOffset?b.setAttribute("stroke-dashoffset",k.dashOffset):b.removeAttribute("stroke-dashoffset")):b.setAttribute("stroke","none"),k.fill?(b.setAttribute("fill",k.fillColor||k.color),b.setAttribute("fill-opacity",k.fillOpacity),b.setAttribute("fill-rule",k.fillRule||"evenodd")):b.setAttribute("fill","none"))},_updatePoly:function(p,b){this._setPath(p,Ke(p._parts,b))},_updateCircle:function(p){var b=p._point,k=Math.max(Math.round(p._radius),1),j=Math.max(Math.round(p._radiusY),1)||k,z="a"+k+","+j+" 0 1,0 ",Y=p._empty()?"M0 0":"M"+(b.x-k)+","+b.y+z+k*2+",0 "+z+-k*2+",0 ";this._setPath(p,Y)},_setPath:function(p,b){p._path.setAttribute("d",b)},_bringToFront:function(p){Nt(p._path)},_bringToBack:function(p){On(p._path)}});Wt.vml&&ih.include(bw);function mg(p){return Wt.svg||Wt.vml?new ih(p):null}Fn.include({getRenderer:function(p){var b=p.options.renderer||this._getPaneRenderer(p.options.pane)||this.options.renderer||this._renderer;return b||(b=this._renderer=this._createRenderer()),this.hasLayer(b)||this.addLayer(b),b},_getPaneRenderer:function(p){if(p==="overlayPane"||p===void 0)return!1;var b=this._paneRenderers[p];return b===void 0&&(b=this._createRenderer({pane:p}),this._paneRenderers[p]=b),b},_createRenderer:function(p){return this.options.preferCanvas&&Ey(p)||mg(p)}});var ah=Ro.extend({initialize:function(p,b){Ro.prototype.initialize.call(this,this._boundsToLatLngs(p),b)},setBounds:function(p){return this.setLatLngs(this._boundsToLatLngs(p))},_boundsToLatLngs:function(p){return p=at(p),[p.getSouthWest(),p.getNorthWest(),p.getNorthEast(),p.getSouthEast()]}});function Sw(p,b){return new ah(p,b)}ih.create=tp,ih.pointsToPath=Ke,Ds.geometryToLayer=Ra,Ds.coordsToLatLng=Fu,Ds.coordsToLatLngs=Ls,Ds.latLngToCoords=Qf,Ds.latLngsToCoords=zl,Ds.getFeature=Bc,Ds.asFeature=eh,Fn.mergeOptions({boxZoom:!0});var np=Vr.extend({initialize:function(p){this._map=p,this._container=p._container,this._pane=p._panes.overlayPane,this._resetStateTimeout=0,p.on("unload",this._destroy,this)},addHooks:function(){an(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){yr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Pt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(p){if(!p.shiftKey||p.which!==1&&p.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),si(),Kf(),this._startPoint=this._map.mouseEventToContainerPoint(p),an(document,{contextmenu:Ps,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(p){this._moved||(this._moved=!0,this._box=Ft("div","leaflet-zoom-box",this._container),Xt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(p);var b=new pe(this._point,this._startPoint),k=b.getSize();qt(this._box,b.min),this._box.style.width=k.x+"px",this._box.style.height=k.y+"px"},_finish:function(){this._moved&&(Pt(this._box),er(this._container,"leaflet-crosshair")),Pa(),Nc(),yr(document,{contextmenu:Ps,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(p){if(!(p.which!==1&&p.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var b=new $e(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(b).fire("boxzoomend",{boxZoomBounds:b})}},_onKeyDown:function(p){p.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Fn.addInitHook("addHandler","boxZoom",np),Fn.mergeOptions({doubleClickZoom:!0});var rp=Vr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(p){var b=this._map,k=b.getZoom(),j=b.options.zoomDelta,z=p.originalEvent.shiftKey?k-j:k+j;b.options.doubleClickZoom==="center"?b.setZoom(z):b.setZoomAround(p.containerPoint,z)}});Fn.addInitHook("addHandler","doubleClickZoom",rp),Fn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gg=Vr.extend({addHooks:function(){if(!this._draggable){var p=this._map;this._draggable=new Ns(p._mapPane,p._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),p.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),p.on("zoomend",this._onZoomEnd,this),p.whenReady(this._onZoomEnd,this))}Xt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){er(this._map._container,"leaflet-grab"),er(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var p=this._map;if(p._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var b=at(this._map.options.maxBounds);this._offsetLimit=Fe(this._map.latLngToContainerPoint(b.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(b.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;p.fire("movestart").fire("dragstart"),p.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(p){if(this._map.options.inertia){var b=this._lastTime=+new Date,k=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(k),this._times.push(b),this._prunePositions(b)}this._map.fire("move",p).fire("drag",p)},_prunePositions:function(p){for(;this._positions.length>1&&p-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var p=this._map.getSize().divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(p).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(p,b){return p-(p-b)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var p=this._draggable._newPos.subtract(this._draggable._startPos),b=this._offsetLimit;p.x<b.min.x&&(p.x=this._viscousLimit(p.x,b.min.x)),p.y<b.min.y&&(p.y=this._viscousLimit(p.y,b.min.y)),p.x>b.max.x&&(p.x=this._viscousLimit(p.x,b.max.x)),p.y>b.max.y&&(p.y=this._viscousLimit(p.y,b.max.y)),this._draggable._newPos=this._draggable._startPos.add(p)}},_onPreDragWrap:function(){var p=this._worldWidth,b=Math.round(p/2),k=this._initialWorldOffset,j=this._draggable._newPos.x,z=(j-b+k)%p+b-k,Y=(j+b+k)%p-b-k,he=Math.abs(z+k)<Math.abs(Y+k)?z:Y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=he},_onDragEnd:function(p){var b=this._map,k=b.options,j=!k.inertia||p.noInertia||this._times.length<2;if(b.fire("dragend",p),j)b.fire("moveend");else{this._prunePositions(+new Date);var z=this._lastPos.subtract(this._positions[0]),Y=(this._lastTime-this._times[0])/1e3,he=k.easeLinearity,Re=z.multiplyBy(he/Y),We=Re.distanceTo([0,0]),ct=Math.min(k.inertiaMaxSpeed,We),Tt=Re.multiplyBy(ct/We),ln=ct/(k.inertiaDeceleration*he),Rn=Tt.multiplyBy(-ln/2).round();!Rn.x&&!Rn.y?b.fire("moveend"):(Rn=b._limitOffset(Rn,b.options.maxBounds),B(function(){b.panBy(Rn,{duration:ln,easeLinearity:he,noMoveStart:!0,animate:!0})}))}}});Fn.addInitHook("addHandler","dragging",gg),Fn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var sh=Vr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(p){this._map=p,this._setPanDelta(p.options.keyboardPanDelta),this._setZoomDelta(p.options.zoomDelta)},addHooks:function(){var p=this._map._container;p.tabIndex<=0&&(p.tabIndex="0"),an(p,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),yr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var p=document.body,b=document.documentElement,k=p.scrollTop||b.scrollTop,j=p.scrollLeft||b.scrollLeft;this._map._container.focus(),window.scrollTo(j,k)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(p){var b=this._panKeys={},k=this.keyCodes,j,z;for(j=0,z=k.left.length;j<z;j++)b[k.left[j]]=[-1*p,0];for(j=0,z=k.right.length;j<z;j++)b[k.right[j]]=[p,0];for(j=0,z=k.down.length;j<z;j++)b[k.down[j]]=[0,p];for(j=0,z=k.up.length;j<z;j++)b[k.up[j]]=[0,-1*p]},_setZoomDelta:function(p){var b=this._zoomKeys={},k=this.keyCodes,j,z;for(j=0,z=k.zoomIn.length;j<z;j++)b[k.zoomIn[j]]=p;for(j=0,z=k.zoomOut.length;j<z;j++)b[k.zoomOut[j]]=-p},_addHooks:function(){an(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){yr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(p){if(!(p.altKey||p.ctrlKey||p.metaKey)){var b=p.keyCode,k=this._map,j;if(b in this._panKeys){if(!k._panAnim||!k._panAnim._inProgress)if(j=this._panKeys[b],p.shiftKey&&(j=se(j).multiplyBy(3)),k.options.maxBounds&&(j=k._limitOffset(se(j),k.options.maxBounds)),k.options.worldCopyJump){var z=k.wrapLatLng(k.unproject(k.project(k.getCenter()).add(j)));k.panTo(z)}else k.panBy(j)}else if(b in this._zoomKeys)k.setZoom(k.getZoom()+(p.shiftKey?3:1)*this._zoomKeys[b]);else if(b===27&&k._popup&&k._popup.options.closeOnEscapeKey)k.closePopup();else return;Ps(p)}}});Fn.addInitHook("addHandler","keyboard",sh),Fn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ay=Vr.extend({addHooks:function(){an(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){yr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(p){var b=Gd(p),k=this._map.options.wheelDebounceTime;this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(p),this._startTime||(this._startTime=+new Date);var j=Math.max(k-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),j),Ps(p)},_performZoom:function(){var p=this._map,b=p.getZoom(),k=this._map.options.zoomSnap||0;p._stop();var j=this._delta/(this._map.options.wheelPxPerZoomLevel*4),z=4*Math.log(2/(1+Math.exp(-Math.abs(j))))/Math.LN2,Y=k?Math.ceil(z/k)*k:z,he=p._limitZoom(b+(this._delta>0?Y:-Y))-b;this._delta=0,this._startTime=null,he&&(p.options.scrollWheelZoom==="center"?p.setZoom(b+he):p.setZoomAround(this._lastMousePos,b+he))}});Fn.addInitHook("addHandler","scrollWheelZoom",Ay);var Ew=600;Fn.mergeOptions({tapHold:Wt.touchNative&&Wt.safari&&Wt.mobile,tapTolerance:15});var Ty=Vr.extend({addHooks:function(){an(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){yr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(p){if(clearTimeout(this._holdTimeout),p.touches.length===1){var b=p.touches[0];this._startPos=this._newPos=new $(b.clientX,b.clientY),this._holdTimeout=setTimeout(s(function(){this._cancel(),this._isTapValid()&&(an(document,"touchend",Kr),an(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",b))},this),Ew),an(document,"touchend touchcancel contextmenu",this._cancel,this),an(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function p(){yr(document,"touchend",Kr),yr(document,"touchend touchcancel",p)},_cancel:function(){clearTimeout(this._holdTimeout),yr(document,"touchend touchcancel contextmenu",this._cancel,this),yr(document,"touchmove",this._onMove,this)},_onMove:function(p){var b=p.touches[0];this._newPos=new $(b.clientX,b.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(p,b){var k=new MouseEvent(p,{bubbles:!0,cancelable:!0,view:window,screenX:b.screenX,screenY:b.screenY,clientX:b.clientX,clientY:b.clientY});k._simulated=!0,b.target.dispatchEvent(k)}});Fn.addInitHook("addHandler","tapHold",Ty),Fn.mergeOptions({touchZoom:Wt.touch,bounceAtZoomLimits:!0});var ky=Vr.extend({addHooks:function(){Xt(this._map._container,"leaflet-touch-zoom"),an(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){er(this._map._container,"leaflet-touch-zoom"),yr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(p){var b=this._map;if(!(!p.touches||p.touches.length!==2||b._animatingZoom||this._zooming)){var k=b.mouseEventToContainerPoint(p.touches[0]),j=b.mouseEventToContainerPoint(p.touches[1]);this._centerPoint=b.getSize()._divideBy(2),this._startLatLng=b.containerPointToLatLng(this._centerPoint),b.options.touchZoom!=="center"&&(this._pinchStartLatLng=b.containerPointToLatLng(k.add(j)._divideBy(2))),this._startDist=k.distanceTo(j),this._startZoom=b.getZoom(),this._moved=!1,this._zooming=!0,b._stop(),an(document,"touchmove",this._onTouchMove,this),an(document,"touchend touchcancel",this._onTouchEnd,this),Kr(p)}},_onTouchMove:function(p){if(!(!p.touches||p.touches.length!==2||!this._zooming)){var b=this._map,k=b.mouseEventToContainerPoint(p.touches[0]),j=b.mouseEventToContainerPoint(p.touches[1]),z=k.distanceTo(j)/this._startDist;if(this._zoom=b.getScaleZoom(z,this._startZoom),!b.options.bounceAtZoomLimits&&(this._zoom<b.getMinZoom()&&z<1||this._zoom>b.getMaxZoom()&&z>1)&&(this._zoom=b._limitZoom(this._zoom)),b.options.touchZoom==="center"){if(this._center=this._startLatLng,z===1)return}else{var Y=k._add(j)._divideBy(2)._subtract(this._centerPoint);if(z===1&&Y.x===0&&Y.y===0)return;this._center=b.unproject(b.project(this._pinchStartLatLng,this._zoom).subtract(Y),this._zoom)}this._moved||(b._moveStart(!0,!1),this._moved=!0),G(this._animRequest);var he=s(b._move,b,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=B(he,this,!0),Kr(p)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,G(this._animRequest),yr(document,"touchmove",this._onTouchMove,this),yr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Fn.addInitHook("addHandler","touchZoom",ky),Fn.BoxZoom=np,Fn.DoubleClickZoom=rp,Fn.Drag=gg,Fn.Keyboard=sh,Fn.ScrollWheelZoom=Ay,Fn.TapHold=Ty,Fn.TouchZoom=ky,t.Bounds=pe,t.Browser=Wt,t.CRS=Se,t.Canvas=Sy,t.Circle=jc,t.CircleMarker=Vl,t.Class=K,t.Control=Ja,t.DivIcon=ta,t.DivOverlay=Ar,t.DomEvent=cg,t.DomUtil=Hd,t.Draggable=Ns,t.Evented=oe,t.FeatureGroup=_n,t.GeoJSON=Ds,t.GridLayer=Vc,t.Handler=Vr,t.Icon=Ei,t.ImageOverlay=th,t.LatLng=me,t.LatLngBounds=$e,t.Layer=ur,t.LayerGroup=Wn,t.LineUtil=J,t.Map=Fn,t.Marker=Qd,t.Mixin=va,t.Path=oo,t.Point=$,t.PolyUtil=Bl,t.Polygon=Ro,t.Polyline=al,t.Popup=Uc,t.PosAnimation=Qa,t.Projection=mt,t.Rectangle=ah,t.Renderer=lo,t.SVG=ih,t.SVGOverlay=Yr,t.TileLayer=ns,t.Tooltip=ju,t.Transformation=Ce,t.Util=H,t.VideoOverlay=Os,t.bind=s,t.bounds=Fe,t.canvas=Ey,t.circle=hg,t.circleMarker=xy,t.control=Fr,t.divIcon=wy,t.extend=i,t.featureGroup=il,t.geoJSON=Jf,t.geoJson=_y,t.gridLayer=by,t.icon=yw,t.imageOverlay=fg,t.latLng=Le,t.latLngBounds=at,t.layerGroup=Si,t.map=jl,t.marker=xw,t.point=se,t.polygon=ww,t.polyline=_w,t.popup=ep,t.rectangle=Sw,t.setOptions=_,t.stamp=l,t.svg=mg,t.svgOverlay=ya,t.tileLayer=Do,t.tooltip=Uk,t.transformation=Te,t.version=r,t.videoOverlay=nh;var Cy=window.L;t.noConflict=function(){return window.L=Cy,this},window.L=t})})(vR,vR.exports);var nw=vR.exports;function QT(n,e,t){return Object.freeze({instance:n,context:e,container:t})}function JT(n,e){return e==null?function(r,i){const a=M.useRef();return a.current||(a.current=n(r,i)),a}:function(r,i){const a=M.useRef();a.current||(a.current=n(r,i));const s=M.useRef(r),{instance:o}=a.current;return M.useEffect(function(){s.current!==r&&(e(o,r,s.current),s.current=r)},[o,r,i]),a}}function JQ(n,e){M.useEffect(function(){return(e.layerContainer??e.map).addLayer(n.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(n.instance),e.map.removeLayer(n.instance)}},[e,n])}function eJ(n){return function(t){const r=CO(),i=n(ZT(t,r),r);return XQ(r.map,t.attribution),MO(i.current,t.eventHandlers),JQ(i.current,r),i}}function lke(n,e){const t=M.useRef();M.useEffect(function(){if(e.pathOptions!==t.current){const i=e.pathOptions??{};n.instance.setStyle(i),t.current=i}},[n,e])}function uke(n){return function(t){const r=CO(),i=n(ZT(t,r),r);return MO(i.current,t.eventHandlers),JQ(i.current,r),lke(i.current,t),i}}function cke(n,e){const t=JT(n,e),r=eJ(t);return QQ(r)}function dke(n,e){const t=JT(n),r=oke(t,e);return ake(r)}function hke(n,e){const t=JT(n,e),r=uke(t);return QQ(r)}function fke(n,e){const t=JT(n,e),r=eJ(t);return ske(r)}function pke(n,e,t){const{opacity:r,zIndex:i}=e;r!=null&&r!==t.opacity&&n.setOpacity(r),i!=null&&i!==t.zIndex&&n.setZIndex(i)}function yR(){return yR=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},yR.apply(this,arguments)}function mke({bounds:n,boundsOptions:e,center:t,children:r,className:i,id:a,placeholder:s,style:o,whenReady:l,zoom:u,...c},d){const[f]=M.useState({className:i,id:a,style:o}),[m,v]=M.useState(null);M.useImperativeHandle(d,()=>(m==null?void 0:m.map)??null,[m]);const _=M.useCallback(x=>{if(x!==null&&m===null){const S=new nw.Map(x,c);t!=null&&u!=null?S.setView(t,u):n!=null&&S.fitBounds(n,e),l!=null&&S.whenReady(l),v(ike(S))}},[]);M.useEffect(()=>()=>{m==null||m.map.remove()},[m]);const w=m?wn.createElement(ZQ,{value:m},r):s??null;return wn.createElement("div",yR({},f,{ref:_}),w)}const gke=M.forwardRef(mke),vke=cke(function({position:e,...t},r){const i=new nw.Marker(e,t);return QT(i,KQ(r,{overlayContainer:i}))},function(e,t,r){t.position!==r.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==r.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==r.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==r.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),yke=hke(function({positions:e,...t},r){const i=new nw.Polyline(e,t);return QT(i,KQ(r,{overlayContainer:i}))},function(e,t,r){t.positions!==r.positions&&e.setLatLngs(t.positions)}),xke=dke(function(e,t){const r=new nw.Popup(e,t.overlayContainer);return QT(r,t)},function(e,t,{position:r},i){M.useEffect(function(){const{instance:s}=e;function o(u){u.popup===s&&(s.update(),i(!0))}function l(u){u.popup===s&&i(!1)}return t.map.on({popupopen:o,popupclose:l}),t.overlayContainer==null?(r!=null&&s.setLatLng(r),s.openOn(t.map)):t.overlayContainer.bindPopup(s),function(){var c;t.map.off({popupopen:o,popupclose:l}),(c=t.overlayContainer)==null||c.unbindPopup(),t.map.removeLayer(s)}},[e,t,i,r])}),_ke=fke(function({url:e,...t},r){const i=new nw.TileLayer(e,ZT(t,r));return QT(i,r)},function(e,t,r){pke(e,t,r);const{url:i}=t;i!=null&&i!==r.url&&e.setUrl(i)});function tJ(n){let e=0;for(let t=0;t<n.length;t++)e=n.charCodeAt(t)+((e<<5)-e);return`hsl(${e%360}, 70%, 50%)`}const wke=({points:n,history:e=[]})=>{let r=[-7.250445,112.768845],i=13;if(n.length){const o=n[n.length-1];r=[o.lat,o.lon],i=17}else if(e.length){const o=e[e.length-1];r=[o.lat,o.lon],i=17}const a={};e.forEach(o=>{a[o.nama]||(a[o.nama]=[]),a[o.nama].push(o)});const s={};return Object.entries(a).forEach(([o,l])=>{const u=l.slice().sort((c,d)=>c.time&&d.time?(""+c.time).localeCompare(d.time):0);s[o]=u[u.length-1]}),h.jsxs("div",{style:{position:"relative"},children:[h.jsxs(gke,{center:r,zoom:i,style:{height:"400px",width:"100%"},scrollWheelZoom:!0,children:[h.jsx(_ke,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),Object.entries(a).map(([o,l])=>h.jsx(yke,{positions:l.map(u=>[u.lat,u.lon]),pathOptions:{color:tJ(o),weight:4}},o)),Object.values(s).map((o,l)=>h.jsx(vke,{position:[o.lat,o.lon],children:h.jsxs(xke,{children:[h.jsx("b",{children:o.nama}),h.jsx("br",{}),o.time]})},o.nama||l))]}),!n.length&&!e.length&&h.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",background:"rgba(255,255,255,0.7)",fontWeight:"bold",fontSize:"1.1rem",color:"#888"},children:"Tidak ada data tracker."})]})};function bke(){const[n,e]=M.useState(null),[t,r]=M.useState(null),[i,a]=M.useState(""),[s,o]=M.useState(""),[l,u]=M.useState(""),[c,d]=M.useState([]),[f,m]=M.useState([]),[v,_]=M.useState([]),[w,x]=M.useState([]),[S,E]=M.useState([]),[T,D]=M.useState([]),[F,P]=M.useState("activities"),[N,I]=M.useState(!1),[R,B]=M.useState(!1),[G,H]=M.useState(null),[K,ne]=M.useState("activity"),[re,oe]=M.useState(!1),[$,ue]=M.useState([]),[se,pe]=M.useState(!1),[Fe,$e]=M.useState(!1),[at,me]=M.useState([]),Le=S.length>0&&at.length===S.length;M.useEffect(()=>{const ee=$A(Tl,qe=>{r(qe)});return()=>ee()},[]),M.useEffect(()=>{t&&ge()},[t]);const Se=async ee=>{ee.preventDefault(),u("");try{if(await nD(Tl,i,s),i)try{await hl({action:"Login",detail:"Login ke halaman admin",user:i})}catch(qe){window.alert("Gagal menulis log admin: "+((qe==null?void 0:qe.message)||qe))}}catch(qe){u("Login failed: "+qe.message)}},ge=async()=>{try{const ee=await sa(ti(un,"recycle_bin")),qe=new Set(ee.docs.map(we=>we.id)),Ye=await sa(ti(un,"activities"));d(Ye.docs.filter(we=>!qe.has(we.id)).map(we=>({id:we.id,...we.data()})));const Z=await sa(ti(un,"gallerys"));m(Z.docs.filter(we=>!qe.has(we.id)).map(we=>({id:we.id,title:we.data().title||"",description:we.data().description||"",imageUrl:we.data().imageUrl||"",activityId:we.data().activityId||"",createdAt:we.data().createdAt||null,updatedAt:we.data().updatedAt||null})));const X=await sa(ti(un,"learnings"));x(X.docs.filter(we=>!qe.has(we.id)).map(we=>({id:we.id,title:we.data().title||"",description:we.data().description||"",icon:we.data().icon||"",link:we.data().link||"",createdAt:we.data().createdAt||null,updatedAt:we.data().updatedAt||null})));const ve=await sa(ti(un,"anggota")),Ie=["Caba","Cella","Ratel","Lupus","Orca","Loni","Ola"],He=[];ve.docs.forEach(we=>{const pt=we.data();Ie.includes(pt.namalengkap)&&pt.statusMahasiswa!=="Aktif"&&He.push(ms(_r(un,"anggota",we.id),{...pt,statusMahasiswa:"Aktif"},{merge:!0}))}),He.length>0&&await Promise.all(He),_(ve.docs.filter(we=>!qe.has(we.id)).map(we=>{const pt=we.data();return{id:we.id,fullName:pt.namalengkap||"",fieldName:pt.namalapangan||"",batchName:pt.namaangkatan||"",batchYear:pt.tahun||0,registrationNumber:pt.nomorregistrasi||"",membershipStatus:pt.keanggotaan||"Tidak Aktif",photoUrl:pt.foto||"",qrCode:pt.url||"",email:pt.email||"",phone:pt.phone||"",gender:pt.gender||"",statusMahasiswa:pt.statusMahasiswa}}))}catch(ee){console.error("Error fetching data:",ee)}},Ge=async()=>{const ee=await sa(ti(un,"gps_tracker"));E(ee.docs.map(qe=>({id:qe.id,...qe.data()})))},Me=async()=>{const ee=await sa(ti(un,"gps_history"));D(ee.docs.map(qe=>({id:qe.id,...qe.data()})))},Ce=ee=>window.alert(ee),Te=async ee=>{try{let qe=K==="member"?"anggota":K==="learning"?"learnings":K+"s";if(K==="member"&&!re){const Z=(await sa(ti(un,"anggota"))).docs.map(He=>parseInt(He.id,10)).filter(He=>!isNaN(He)),X=Z.length>0?Math.max(...Z)+1:1,ve=String(X).padStart(4,"0"),Ie={namalengkap:ee.namalengkap||ee.fullName||"",namalapangan:ee.namalapangan||ee.fieldName||"",namaangkatan:ee.namaangkatan||ee.batchName||"",tahun:ee.tahun||ee.batchYear||new Date().getFullYear(),nomorregistrasi:ee.nomorregistrasi||ee.registrationNumber||"",keanggotaan:ee.keanggotaan||ee.membershipStatus||"Anggota Muda",foto:ee.foto||ee.photoUrl||"",email:ee.email||"",phone:ee.phone||"",gender:ee.gender||"",statusMahasiswa:ee.statusMahasiswa,url:ee.url||"",updateat:new Date().toISOString(),id:ve};await ms(_r(un,"anggota",ve),Ie);try{await hl({action:"Tambah Member",detail:`Tambah member baru: ${Ie.namalengkap} (${ve})`,user:(t==null?void 0:t.email)||"unknown"})}catch(He){window.alert("Gagal menulis log admin: "+((He==null?void 0:He.message)||He))}Ce("Data anggota berhasil ditambahkan dengan ID otomatis!"),I(!1),await ge();return}if(K==="member"&&(ee.id||ee.customId)){const Ye=ee.customId||ee.id,Z={namalengkap:ee.namalengkap||ee.fullName||"",namalapangan:ee.namalapangan||ee.fieldName||"",namaangkatan:ee.namaangkatan||ee.batchName||"",tahun:ee.tahun||ee.batchYear||new Date().getFullYear(),nomorregistrasi:ee.nomorregistrasi||ee.registrationNumber||"",keanggotaan:ee.keanggotaan||ee.membershipStatus||"Anggota Muda",foto:ee.foto||ee.photoUrl||"",email:ee.email||"",phone:ee.phone||"",gender:ee.gender||"",statusMahasiswa:ee.statusMahasiswa,url:ee.url||"",updateat:new Date().toISOString(),id:Ye};await ms(_r(un,qe,Ye),Z);try{await hl({action:"Edit Member",detail:`Edit member: ${Z.namalengkap} (${Ye})`,user:(t==null?void 0:t.email)||"unknown"})}catch(X){window.alert("Gagal menulis log admin: "+((X==null?void 0:X.message)||X))}Ce("Data anggota berhasil diperbarui!")}else if(re&&K==="activity"&&ee.id){const Ye={title:ee.title||"",description:ee.description||"",date:ee.date||"",category:ee.category||"",imageUrl:ee.imageUrl||"",id:ee.id};await ms(_r(un,"activities",ee.id),Ye);try{await hl({action:"Edit Activity",detail:`Edit activity: ${Ye.title} (${ee.id})`,user:(t==null?void 0:t.email)||"unknown"})}catch(Z){window.alert("Gagal menulis log admin: "+((Z==null?void 0:Z.message)||Z))}Ce("Data kegiatan berhasil diperbarui!")}else if(re&&K==="gallery"&&ee.id){const Ye={title:ee.title||"",description:ee.description||"",imageUrl:ee.imageUrl||"",activityId:ee.activityId||"",createdAt:ee.createdAt||null,updatedAt:new Date().toISOString(),id:ee.id};await ms(_r(un,"gallerys",ee.id),Ye);try{await hl({action:"Edit Gallery",detail:`Edit gallery: ${Ye.title} (${ee.id})`,user:(t==null?void 0:t.email)||"unknown"})}catch(Z){window.alert("Gagal menulis log admin: "+((Z==null?void 0:Z.message)||Z))}Ce("Data galeri berhasil diperbarui!")}else if(re&&K==="learning"&&ee.id){const Ye={title:ee.title||"",description:ee.description||"",icon:ee.icon||"",link:ee.link||"",updatedAt:new Date().toISOString(),id:ee.id};await ms(_r(un,"learnings",ee.id),Ye);try{await hl({action:"Edit Learning",detail:`Edit learning: ${Ye.title} (${ee.id})`,user:(t==null?void 0:t.email)||"unknown"})}catch(Z){window.alert("Gagal menulis log admin: "+((Z==null?void 0:Z.message)||Z))}Ce("Data pembelajaran berhasil diperbarui!")}else if(K==="activity"&&!re){const Ye={title:ee.title||"",description:ee.description||"",date:ee.date||"",category:ee.category||"",imageUrl:ee.imageUrl||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await hm(ti(un,"activities"),Ye);try{await hl({action:"Tambah Activity",detail:`Tambah activity: ${Ye.title}`,user:(t==null?void 0:t.email)||"unknown"})}catch(Z){window.alert("Gagal menulis log admin: "+((Z==null?void 0:Z.message)||Z))}Ce("Data kegiatan berhasil ditambahkan!")}else if(K==="learning"&&!re){const Ye={title:ee.title||"",description:ee.description||"",icon:ee.icon||"",link:ee.link||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await hm(ti(un,"learnings"),Ye);try{await hl({action:"Tambah Learning",detail:`Tambah learning: ${Ye.title}`,user:(t==null?void 0:t.email)||"unknown"})}catch(Z){window.alert("Gagal menulis log admin: "+((Z==null?void 0:Z.message)||Z))}Ce("Data pembelajaran berhasil ditambahkan!")}else if(K==="member"&&ee.customId){const{customId:Ye,...Z}=ee;await ms(_r(un,"anggota",Ye),Z);try{await hl({action:"Tambah Member (Custom ID)",detail:`Tambah member custom: ${Z.namalengkap} (${Ye})`,user:(t==null?void 0:t.email)||"unknown"})}catch(X){window.alert("Gagal menulis log admin: "+((X==null?void 0:X.message)||X))}Ce("Data berhasil ditambahkan dengan ID custom!")}else{await hm(ti(un,qe),ee);try{await hl({action:"Tambah Data",detail:`Tambah data ke ${qe}`,user:(t==null?void 0:t.email)||"unknown"})}catch(Ye){window.alert("Gagal menulis log admin: "+((Ye==null?void 0:Ye.message)||Ye))}Ce("Data berhasil ditambahkan!")}I(!1),await ge()}catch(qe){Ce("Gagal menyimpan data!"),console.error(qe)}},te=ee=>ee==="activity"?"activities":ee==="gallery"?"gallerys":ee==="member"?"anggota":ee==="learning"?"learnings":"",Ee=async(ee,qe)=>{const Ye=ee||K,Z=qe||G;if(!Z||!Z.id){Ce("Data tidak valid atau ID tidak ditemukan!");return}let X=Ye,ve=Z.id,Ie=te(X);try{const He=await Vf(_r(un,Ie,ve));if(!He.exists()){Ce("Data tidak ditemukan di database!");return}const pt={...He.data(),originalType:X,deletedAt:new Date().toISOString()};await ms(_r(un,"recycle_bin",ve),pt),await Ch(_r(un,Ie,ve));try{await hl({action:"Hapus Data",detail:`Hapus data ${X} (${ve})`,user:(t==null?void 0:t.email)||"unknown"})}catch(lt){window.alert("Gagal menulis log admin: "+((lt==null?void 0:lt.message)||lt))}B(!1),$e(!1),H(null),await ge(),await Pe(),Ce("Data berhasil dipindahkan ke Recycle Bin!")}catch(He){Ce("Gagal menghapus data!"),console.error(He)}},Pe=async()=>{pe(!0);const ee=await sa(ti(un,"recycle_bin")),qe=new Date;await Promise.all(ee.docs.map(async Z=>{const X=Z.data();X.deletedAt&&oxe(qe,new Date(X.deletedAt))>30&&await Ch(_r(un,"recycle_bin",Z.id))}));const Ye=await sa(ti(un,"recycle_bin"));ue(Ye.docs.map(Z=>({id:Z.id,...Z.data()}))),pe(!1)};M.useEffect(()=>{F==="recycle"?Pe():F==="tracker"&&(Ge(),Me())},[F]);function Ke(ee){if(!ee)return"-";const qe="Asia/Jakarta";let Ye;if(typeof ee=="string"){if(Ye=new Date(ee),isNaN(Ye.getTime()))return ee}else if(ee instanceof Date)Ye=ee;else return"-";const Z=pTe(Ye,qe);return fTe(Z,"yyyy-MM-dd HH:mm:ss",{timeZone:qe})+" WIB"}function je(){me(Le?[]:S.map(ee=>ee.id))}function st(ee){me(qe=>qe.includes(ee)?qe.filter(Ye=>Ye!==ee):[...qe,ee])}const tt=async()=>{if(window.confirm("Yakin ingin menghapus data tracker yang dipilih?")){for(const ee of at)await Ch(_r(un,"gps_tracker",ee));me([]),Ge(),Ce("Data tracker terpilih berhasil dihapus!")}};return t?h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8",children:[h.jsx("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),h.jsxs(zt,{variant:"ghost",className:"flex items-center gap-2",onClick:()=>Tl.signOut(),children:[h.jsx(Eme,{className:"h-4 w-4"}),"Logout"]})]}),h.jsxs(ITe,{value:F,onValueChange:P,children:[h.jsxs(xQ,{className:"mb-8 overflow-x-auto whitespace-nowrap scrollbar-hide px-2 -mx-4",children:[h.jsxs(Dp,{value:"activities",className:"flex items-center gap-2 group transition-all duration-200 bg-muted data-[state=active]:bg-primary/10 data-[state=active]:shadow-lg data-[state=active]:scale-105 data-[state=inactive]:hover:bg-muted/70 data-[state=inactive]:bg-muted/90",children:[h.jsx(u$,{className:"h-4 w-4"}),h.jsx("span",{className:"hidden sm:inline transition-all duration-200 group-hover:inline group-focus:inline group-active:inline group-data-[state=active]:inline ml-1 group-hover:font-semibold group-data-[state=active]:font-bold group-data-[state=active]:text-primary",children:"Activities"})]}),h.jsxs(Dp,{value:"gallery",className:"flex items-center gap-2 group transition-all duration-200 bg-muted data-[state=active]:bg-primary/10 data-[state=active]:shadow-lg data-[state=active]:scale-105 data-[state=inactive]:hover:bg-muted/70 data-[state=inactive]:bg-muted/90",children:[h.jsx(wme,{className:"h-4 w-4"}),h.jsx("span",{className:"hidden sm:inline transition-all duration-200 group-hover:inline group-focus:inline group-active:inline group-data-[state=active]:inline ml-1 group-hover:font-semibold group-data-[state=active]:font-bold group-data-[state=active]:text-primary",children:"Gallery"})]}),h.jsxs(Dp,{value:"members",className:"flex items-center gap-2 group transition-all duration-200 bg-muted data-[state=active]:bg-primary/10 data-[state=active]:shadow-lg data-[state=active]:scale-105 data-[state=inactive]:hover:bg-muted/70 data-[state=inactive]:bg-muted/90",children:[h.jsx(YD,{className:"h-4 w-4"}),h.jsx("span",{className:"hidden sm:inline transition-all duration-200 group-hover:inline group-focus:inline group-active:inline group-data-[state=active]:inline ml-1 group-hover:font-semibold group-data-[state=active]:font-bold group-data-[state=active]:text-primary",children:"Members"})]}),h.jsxs(Dp,{value:"learning",className:"flex items-center gap-2 group transition-all duration-200 bg-muted data-[state=active]:bg-primary/10 data-[state=active]:shadow-lg data-[state=active]:scale-105 data-[state=inactive]:hover:bg-muted/70 data-[state=inactive]:bg-muted/90",children:[h.jsx(hme,{className:"h-4 w-4"}),h.jsx("span",{className:"hidden sm:inline transition-all duration-200 group-hover:inline group-focus:inline group-active:inline group-data-[state=active]:inline ml-1 group-hover:font-semibold group-data-[state=active]:font-bold group-data-[state=active]:text-primary",children:"Learnings"})]}),h.jsxs(Dp,{value:"recycle",className:"flex items-center gap-2 group transition-all duration-200 bg-muted data-[state=active]:bg-primary/10 data-[state=active]:shadow-lg data-[state=active]:scale-105 data-[state=inactive]:hover:bg-muted/70 data-[state=inactive]:bg-muted/90",children:[h.jsx(Gy,{className:"h-4 w-4"}),h.jsx("span",{className:"hidden sm:inline transition-all duration-200 group-hover:inline group-focus:inline group-active:inline group-data-[state=active]:inline ml-1 group-hover:font-semibold group-data-[state=active]:font-bold group-data-[state=active]:text-primary",children:"Recycle Bin"})]}),h.jsxs(Dp,{value:"tracker",className:"flex items-center gap-2 group transition-all duration-200 bg-muted data-[state=active]:bg-primary/10 data-[state=active]:shadow-lg data-[state=active]:scale-105 data-[state=inactive]:hover:bg-muted/70 data-[state=inactive]:bg-muted/90",children:[h.jsx(d$,{className:"h-4 w-4"}),h.jsx("span",{className:"hidden sm:inline transition-all duration-200 group-hover:inline group-focus:inline group-active:inline group-data-[state=active]:inline ml-1 group-hover:font-semibold group-data-[state=active]:font-bold group-data-[state=active]:text-primary",children:"Tracker"})]})]}),h.jsxs(Lp,{value:"learning",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h2",{className:"text-xl font-semibold",children:"Learning Management"}),h.jsxs(zt,{onClick:()=>{ne("learning"),oe(!1),H(null),I(!0)},className:"flex items-center gap-2",children:[h.jsx(D6,{className:"h-4 w-4"}),"Add Learning"]})]}),h.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto w-full",children:h.jsxs(k0,{children:[h.jsx(C0,{children:h.jsxs(Zl,{children:[h.jsx(Rr,{children:"Title"}),h.jsx(Rr,{children:"Description"}),h.jsx(Rr,{children:"Icon"}),h.jsx(Rr,{children:"Link"}),h.jsx(Rr,{className:"text-right",children:"Actions"})]})}),h.jsx(M0,{children:w.map(ee=>h.jsxs(Zl,{children:[h.jsx(Dr,{className:"font-medium",children:ee.title}),h.jsx(Dr,{children:ee.description}),h.jsx(Dr,{children:ee.icon?h.jsxs("span",{className:"inline-flex items-center gap-1",children:[h.jsx("i",{className:`fa fa-${ee.icon}`})," ",ee.icon]}):h.jsx("span",{className:"text-gray-400",children:"-"})}),h.jsx(Dr,{children:ee.link?h.jsx("a",{href:ee.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline hover:text-blue-800",children:"Lihat"}):h.jsx("span",{className:"text-gray-400",children:"-"})}),h.jsx(Dr,{className:"text-right",children:h.jsxs("div",{className:"flex justify-end gap-2",children:[h.jsx(zt,{variant:"ghost",size:"icon",onClick:()=>{ne("learning"),oe(!0),H(ee),I(!0)},children:h.jsx(Sb,{className:"h-4 w-4"})}),h.jsx(zt,{variant:"ghost",size:"icon",className:"text-red-600",onClick:()=>{H(ee),ne("learning"),B(!0)},children:h.jsx(Gy,{className:"h-4 w-4"})})]})})]},ee.id))})]})})]}),h.jsxs(Lp,{value:"activities",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h2",{className:"text-xl font-semibold",children:"Activities Management"}),h.jsxs(zt,{onClick:()=>{ne("activity"),oe(!1),H(null),I(!0)},className:"flex items-center gap-2",children:[h.jsx(D6,{className:"h-4 w-4"}),"Add Activity"]})]}),h.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:h.jsxs(k0,{className:"min-w-[600px]",children:[h.jsx(C0,{children:h.jsxs(Zl,{children:[h.jsx(Rr,{children:"Title"}),h.jsx(Rr,{children:"Date"}),h.jsx(Rr,{children:"Category"}),h.jsx(Rr,{className:"text-right",children:"Actions"})]})}),h.jsx(M0,{children:c.map(ee=>h.jsxs(Zl,{children:[h.jsx(Dr,{className:"font-medium",children:ee.title}),h.jsx(Dr,{children:new Date(ee.date).toLocaleDateString()}),h.jsx(Dr,{children:h.jsx($s,{children:ee.category})}),h.jsx(Dr,{className:"text-right",children:h.jsxs("div",{className:"flex justify-end gap-2",children:[h.jsx(zt,{variant:"ghost",size:"icon",onClick:()=>{ne("activity"),oe(!0),H(ee),I(!0)},children:h.jsx(Sb,{className:"h-4 w-4"})}),h.jsx(zt,{variant:"ghost",size:"icon",className:"text-red-600",onClick:()=>{H(ee),ne("activity"),B(!0)},children:h.jsx(Gy,{className:"h-4 w-4"})})]})})]},ee.id))})]})})]}),h.jsxs(Lp,{value:"gallery",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h2",{className:"text-xl font-semibold",children:"Gallery Management"}),h.jsxs(zt,{onClick:()=>{ne("gallery"),oe(!1),H(null),I(!0)},className:"flex items-center gap-2",children:[h.jsx(_me,{className:"h-4 w-4"}),"Add Image"]})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(ee=>h.jsxs(_c,{className:"overflow-hidden",children:[h.jsx("div",{className:"relative aspect-video",children:h.jsx("img",{src:ee.imageUrl,alt:ee.title,className:"w-full h-full object-cover"})}),h.jsxs(Im,{className:"p-4",children:[h.jsx("h3",{className:"font-semibold",children:ee.title}),h.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:ee.description}),h.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[h.jsx(zt,{variant:"ghost",size:"sm",onClick:()=>{ne("gallery"),oe(!0),H(ee),I(!0)},children:h.jsx(Sb,{className:"h-4 w-4"})}),h.jsx(zt,{variant:"ghost",size:"sm",className:"text-red-600",onClick:()=>{H(ee),ne("gallery"),B(!0)},children:h.jsx(Gy,{className:"h-4 w-4"})})]})]})]},ee.id))})]}),h.jsxs(Lp,{value:"members",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h2",{className:"text-xl font-semibold",children:"Members Management"}),h.jsxs(zt,{onClick:()=>{ne("member"),oe(!1),H(null),I(!0)},className:"flex items-center gap-2",children:[h.jsx(Nme,{className:"h-4 w-4"}),"Add Member"]})]}),h.jsx("div",{className:"bg-white rounded-lg shadow",children:h.jsxs(k0,{children:[h.jsx(C0,{children:h.jsxs(Zl,{children:[h.jsx(Rr,{className:"w-[250px]",children:"Informasi Anggota"}),h.jsx(Rr,{children:"Info Kontak"}),h.jsx(Rr,{children:"Angkatan"}),h.jsx(Rr,{children:"Keanggotaan"}),h.jsx(Rr,{children:"Status Mahasiswa"}),h.jsx(Rr,{className:"text-right",children:"Actions"})]})}),h.jsx(M0,{children:v.map(ee=>h.jsxs(Zl,{children:[h.jsx(Dr,{children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"h-10 w-10 rounded-full overflow-hidden bg-gray-100",children:ee.photoUrl?h.jsx("img",{src:ee.photoUrl,alt:ee.fullName,className:"h-full w-full object-cover"}):h.jsx("div",{className:"h-full w-full flex items-center justify-center bg-primary/10 text-primary",children:ee.fullName.charAt(0).toUpperCase()})}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium",children:ee.fullName}),h.jsx("div",{className:"text-sm text-gray-500",children:h.jsx($s,{variant:"outline",className:"mt-1",children:ee.fieldName||"Belum ada nama lapangan"})}),h.jsx("div",{className:"text-sm text-gray-500 mt-1",children:ee.registrationNumber||"No. Reg belum diatur"})]})]})}),h.jsx(Dr,{children:h.jsxs("div",{className:"text-sm",children:[h.jsx("div",{children:ee.email||"-"}),h.jsx("div",{className:"text-gray-500",children:ee.phone||"-"}),h.jsx("div",{className:"text-gray-500 mt-1",children:h.jsx($s,{variant:"secondary",className:"text-xs text-zinc-50",children:(()=>{const qe=(ee.gender||"").toString().trim().toUpperCase();return qe==="L"||qe==="LAKI-LAKI"||qe==="LAKI"||qe==="LKI"?"Laki-laki":qe==="P"||qe==="PEREMPUAN"||qe==="PR"||qe==="WANITA"?"Perempuan":qe.length>0?ee.gender:"Belum diatur"})()})})]})}),h.jsx(Dr,{children:h.jsxs("div",{className:"text-sm",children:[h.jsx("div",{children:ee.batchName||"Belum diatur"}),h.jsx("div",{className:"text-gray-500",children:ee.batchYear?`Tahun ${ee.batchYear}`:"Tahun belum diatur"})]})}),h.jsx(Dr,{children:ee.membershipStatus==="Anggota Penuh"?h.jsx($s,{className:"bg-green-600 text-white font-bold border-green-700 shadow",children:ee.membershipStatus}):ee.membershipStatus==="Anggota Muda"?h.jsx($s,{className:"bg-blue-100 text-blue-800 border-blue-200",children:ee.membershipStatus}):ee.membershipStatus==="Aktif"?h.jsx($s,{className:"bg-green-100 text-green-800 border-green-200",children:ee.membershipStatus}):ee.membershipStatus==="Tidak Aktif"?h.jsx($s,{className:"bg-red-100 text-red-800 border-red-200",children:ee.membershipStatus}):h.jsx($s,{className:"bg-gray-100 text-gray-800 border-gray-200",children:ee.membershipStatus})}),h.jsx(Dr,{children:h.jsx($s,{className:ee.statusMahasiswa==="Aktif"?"bg-green-100 text-green-800 border-green-200":ee.statusMahasiswa==="Tidak Aktif"?"bg-red-100 text-red-800 border-red-200":ee.statusMahasiswa==="Lulus"?"bg-blue-100 text-blue-800 border-blue-200":ee.statusMahasiswa==="Cuti"?"bg-yellow-100 text-yellow-900 border-yellow-300":"bg-gray-100 text-gray-800 border-gray-200",children:ee.statusMahasiswa||"Belum diatur"})}),h.jsx(Dr,{className:"text-right",children:h.jsxs("div",{className:"flex justify-end gap-2",children:[h.jsx(zt,{variant:"ghost",size:"icon",onClick:()=>{ne("member"),oe(!0),H(ee),I(!0)},children:h.jsx(Sb,{className:"h-4 w-4"})}),h.jsx(zt,{variant:"ghost",size:"icon",className:"text-red-600",onClick:()=>{H(ee),ne("member"),B(!0)},children:h.jsx(Gy,{className:"h-4 w-4"})})]})})]},ee.id))})]})})]}),h.jsxs(Lp,{value:"recycle",children:[h.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[h.jsx("h2",{className:"text-xl font-semibold",children:"Recycle Bin"}),h.jsx(zt,{onClick:Pe,variant:"outline",size:"sm",children:"Refresh"})]}),se?h.jsx("div",{className:"py-10 text-center text-gray-500",children:"Loading..."}):$.length===0?h.jsx("div",{className:"py-10 text-center text-gray-500",children:"Recycle Bin kosong."}):h.jsx("div",{className:"overflow-x-auto",children:h.jsxs(k0,{children:[h.jsx(C0,{children:h.jsxs(Zl,{children:[h.jsx(Rr,{children:"Jenis"}),h.jsx(Rr,{children:"Nama/Title"}),h.jsx(Rr,{children:"Dihapus Pada"}),h.jsx(Rr,{className:"text-right",children:"Aksi"})]})}),h.jsx(M0,{children:$.map(ee=>h.jsxs(Zl,{children:[h.jsx(Dr,{children:ee.originalType}),h.jsx(Dr,{children:ee.fullName||ee.title||"-"}),h.jsx(Dr,{children:ee.deletedAt?new Date(ee.deletedAt).toLocaleString():"-"}),h.jsxs(Dr,{className:"text-right flex gap-2 justify-end",children:[h.jsx(zt,{size:"sm",variant:"outline",onClick:async()=>{try{const{id:qe,originalType:Ye,deletedAt:Z,...X}=ee;let ve=Ye==="member"?"anggota":Ye==="activity"?"activities":Ye+"s",Ie=X;Ye==="activity"&&(Ie={title:X.title||"",description:X.description||"",date:X.date||"",category:X.category||"",imageUrl:X.imageUrl||"",id:qe}),await ms(_r(un,ve,qe),Ie),await Ch(_r(un,"recycle_bin",qe)),await ge(),await Pe(),Ce("Data berhasil dipulihkan!")}catch(qe){Ce("Gagal memulihkan data!"),console.error(qe)}},children:"Pulihkan"}),h.jsx(zt,{size:"sm",variant:"destructive",onClick:async()=>{if(window.confirm("Yakin ingin menghapus data ini secara permanen?"))try{await Ch(_r(un,"recycle_bin",ee.id)),await Pe(),Ce("Data berhasil dihapus permanen!")}catch(qe){Ce("Gagal menghapus data permanen!"),console.error(qe)}},children:"Hapus Permanen"})]})]},ee.id))})]})})]}),h.jsxs(Lp,{value:"tracker",children:[h.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[h.jsx("h2",{className:"text-xl font-semibold",children:"GPS Tracker"}),h.jsx(zt,{onClick:async()=>{await Ge(),await Me()},variant:"outline",size:"sm",children:"Refresh"})]}),h.jsx("div",{className:"mb-6",children:h.jsx(wke,{points:Array.isArray(S)?S.map(ee=>({lat:ee.lat,lon:ee.lon,nama:ee.nama,time:ee.time})):[],history:Array.isArray(T)?T.map(ee=>({lat:ee.lat,lon:ee.lon,nama:ee.nama,time:ee.time})):[]},Array.isArray(S)&&S.length?`${S[S.length-1].lat},${S[S.length-1].lon},${S[S.length-1].time}`:Array.isArray(T)&&T.length?`${T[T.length-1].lat},${T[T.length-1].lon},${T[T.length-1].time}`:"default-map")}),h.jsxs("div",{className:"overflow-x-auto bg-white rounded-xl shadow-lg p-3 mb-8 border border-gray-200",children:[h.jsxs("table",{className:"w-full text-sm border border-gray-200 rounded-lg overflow-hidden",children:[h.jsx("thead",{className:"bg-gradient-to-r from-blue-50 to-blue-100",children:h.jsxs("tr",{children:[h.jsx("th",{className:"py-2 px-2 border-b font-semibold",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"checkbox",checked:Le,onChange:je,className:"accent-primary h-4 w-4 rounded",title:"Pilih semua"}),"Nama"]})}),h.jsx("th",{className:"py-2 px-2 border-b font-semibold",children:"Waktu"}),h.jsx("th",{className:"py-2 px-2 border-b font-semibold",children:"Lat"}),h.jsx("th",{className:"py-2 px-2 border-b font-semibold",children:"Lon"}),h.jsx("th",{className:"py-2 px-2 border-b font-semibold",children:"Status"}),h.jsx("th",{className:"py-2 px-2 border-b font-semibold",children:"View Maps"})]})}),h.jsx("tbody",{children:S.map(ee=>h.jsxs("tr",{className:"hover:bg-blue-50 transition-all border-b last:border-b-0",children:[h.jsx("td",{className:"py-2 px-2",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"checkbox",checked:at.includes(ee.id),onChange:()=>st(ee.id),className:"accent-primary h-4 w-4 rounded",title:"Pilih baris ini"}),h.jsx("span",{className:"inline-block h-3 w-3 rounded-full mr-2 border border-gray-300",style:{background:typeof ee.nama=="string"?tJ(ee.nama):"#888"},title:"Warna penanda di peta"}),h.jsx("span",{className:"font-medium text-gray-800",children:ee.nama})]})}),h.jsx("td",{className:"py-2 px-2",children:Ke(ee.time)}),h.jsx("td",{className:"py-2 px-2",children:ee.lat}),h.jsx("td",{className:"py-2 px-2",children:ee.lon}),h.jsx("td",{className:"py-2 px-2",children:h.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold shadow-sm ${ee.online?"bg-green-100 text-green-700 border border-green-200":"bg-gray-100 text-gray-500 border border-gray-200"}`,title:ee.online?"Pengguna online":"Pengguna offline",children:[ee.online?h.jsx("span",{className:"h-2 w-2 rounded-full bg-green-500 inline-block"}):h.jsx("span",{className:"h-2 w-2 rounded-full bg-gray-400 inline-block"}),ee.online?"Online":"Offline"]})}),h.jsx("td",{className:"py-2 px-2",children:ee.lat&&ee.lon?h.jsxs("a",{href:`https://www.google.com/maps?q=${ee.lat},${ee.lon}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-blue-100 text-blue-700 hover:bg-blue-200 transition text-xs font-semibold shadow",title:"Lihat di Google Maps",children:[h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 12.414a4 4 0 10-1.414 1.414l4.243 4.243a1 1 0 001.414-1.414z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a4 4 0 11-8 0 4 4 0 018 0z"})]}),"Maps"]}):h.jsx("span",{className:"text-gray-400",children:"-"})})]},ee.id))})]}),h.jsx("div",{className:"mt-3 flex gap-2",children:h.jsxs("button",{type:"button",disabled:at.length===0,onClick:tt,className:`rounded shadow flex items-center gap-1 px-3 py-2 text-sm font-semibold transition
                  ${at.length===0?"bg-gray-100 text-gray-400 cursor-not-allowed border border-gray-200":"bg-red-100 text-red-700 hover:bg-red-200 border border-red-200 cursor-pointer"}
                `,title:"Hapus semua tracker yang dipilih",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Hapus Data Terpilih"]})})]}),h.jsxs("div",{className:"overflow-x-auto bg-white rounded-xl shadow-lg p-3 border border-gray-200 mt-8",children:[h.jsx("div",{className:"font-bold mb-2 text-blue-900 text-lg",children:"Riwayat Jejak (gps_history, per pengguna)"}),h.jsxs("table",{className:"w-full text-xs border border-gray-200 rounded-lg overflow-hidden",children:[h.jsx("thead",{className:"bg-gradient-to-r from-blue-50 to-blue-100",children:h.jsxs("tr",{children:[h.jsx("th",{className:"py-2 px-2 border-b font-semibold",children:"Nama"}),h.jsx("th",{className:"py-2 px-2 border-b font-semibold",children:"Waktu Terakhir"}),h.jsx("th",{className:"py-2 px-2 border-b font-semibold",children:"Lat"}),h.jsx("th",{className:"py-2 px-2 border-b font-semibold",children:"Lon"}),h.jsx("th",{className:"py-2 px-2 border-b font-semibold",children:"View Maps"}),h.jsx("th",{className:"py-2 px-2 border-b font-semibold",children:"Aksi"})]})}),h.jsx("tbody",{children:(()=>{if(T.length===0)return h.jsx("tr",{children:h.jsx("td",{colSpan:6,className:"text-center text-gray-400 py-4",children:"Belum ada data jejak."})});const ee=T.reduce((qe,Ye)=>(Ye.nama&&(!qe[Ye.nama]||Ye.time&&Ye.time>qe[Ye.nama].time)&&(qe[Ye.nama]=Ye),qe),{});return Object.values(ee).map(qe=>h.jsxs(h.Fragment,{children:[h.jsxs("tr",{className:"bg-gray-50 hover:bg-blue-50 transition-all border-b last:border-b-0",children:[h.jsx("td",{className:"py-2 px-2 font-semibold text-blue-900",children:qe.nama}),h.jsx("td",{className:"py-2 px-2",children:Ke(qe.time)}),h.jsx("td",{className:"py-2 px-2",children:qe.lat}),h.jsx("td",{className:"py-2 px-2",children:qe.lon}),h.jsx("td",{className:"py-2 px-2",children:qe.lat&&qe.lon?h.jsxs("a",{href:`https://www.google.com/maps?q=${qe.lat},${qe.lon}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-blue-100 text-blue-700 hover:bg-blue-200 transition text-xs font-semibold shadow",title:"Lihat di Google Maps",children:[h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 12.414a4 4 0 10-1.414 1.414l4.243 4.243a1 1 0 001.414-1.414z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a4 4 0 11-8 0 4 4 0 018 0z"})]}),"Maps"]}):h.jsx("span",{className:"text-gray-400",children:"-"})}),h.jsxs("td",{className:"py-2 px-2 flex flex-col gap-1",children:[h.jsxs("button",{type:"button",className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-semibold shadow ${n===qe.nama?"bg-blue-200 text-blue-900":"bg-blue-100 text-blue-700 hover:bg-blue-200"} mb-1`,onClick:()=>e(n===qe.nama?null:qe.nama),title:n===qe.nama?"Sembunyikan jejak":"Lihat semua jejak",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:n===qe.nama?"M20 12H4":"M12 4v16m8-8H4"})}),n===qe.nama?"Sembunyikan Jejak":"Lihat Semua Jejak"]}),h.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-semibold shadow bg-red-100 text-red-700 hover:bg-red-200",onClick:async()=>{if(window.confirm(`Hapus semua jejak milik '${qe.nama}'?`))try{const Ye=T.filter(Z=>Z.nama===qe.nama);for(const Z of Ye)await Ch(_r(un,"gps_history",Z.id));await Me(),Ce("Semua jejak pengguna berhasil dihapus!"),n===qe.nama&&e(null)}catch(Ye){Ce("Gagal menghapus jejak!"),console.error(Ye)}},title:"Hapus semua jejak pengguna ini",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Hapus Semua Jejak"]})]})]},qe.nama),n===qe.nama&&h.jsx("tr",{children:h.jsx("td",{colSpan:6,className:"bg-white p-0",children:h.jsxs("div",{className:"p-2 border rounded shadow-inner max-h-[300px] overflow-y-auto",children:[h.jsxs("div",{className:"font-semibold mb-1 text-blue-900",children:["Semua Jejak ",qe.nama,":"]}),h.jsxs("table",{className:"w-full text-xs border border-gray-200 rounded-lg overflow-hidden",children:[h.jsx("thead",{className:"bg-gradient-to-r from-blue-50 to-blue-100",children:h.jsxs("tr",{children:[h.jsx("th",{className:"py-1 px-1 border-b",children:"#"}),h.jsx("th",{className:"py-1 px-1 border-b",children:"Waktu"}),h.jsx("th",{className:"py-1 px-1 border-b",children:"Lat"}),h.jsx("th",{className:"py-1 px-1 border-b",children:"Lon"}),h.jsx("th",{className:"py-1 px-1 border-b",children:"Map"}),h.jsx("th",{className:"py-1 px-1 border-b",children:"Aksi"})]})}),h.jsx("tbody",{children:T.filter(Ye=>Ye.nama===qe.nama).sort((Ye,Z)=>(Z.time||0)-(Ye.time||0)).map((Ye,Z)=>h.jsxs("tr",{className:"hover:bg-blue-50 transition-all border-b last:border-b-0",children:[h.jsx("td",{className:"py-1 px-1 font-semibold",children:Z+1}),h.jsx("td",{className:"py-1 px-1",children:Ke(Ye.time)}),h.jsx("td",{className:"py-1 px-1",children:Ye.lat}),h.jsx("td",{className:"py-1 px-1",children:Ye.lon}),h.jsx("td",{className:"py-1 px-1",children:Ye.lat&&Ye.lon?h.jsxs("a",{href:`https://www.google.com/maps?q=${Ye.lat},${Ye.lon}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-blue-100 text-blue-700 hover:bg-blue-200 transition text-xs font-semibold shadow",title:"Lihat di Google Maps",children:[h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 12.414a4 4 0 10-1.414 1.414l4.243 4.243a1 1 0 001.414-1.414z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a4 4 0 11-8 0 4 4 0 018 0z"})]}),"Lokasi"]}):h.jsx("span",{className:"text-gray-400",children:"-"})}),h.jsx("td",{className:"py-1 px-1",children:h.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-semibold shadow bg-red-100 text-red-700 hover:bg-red-200",onClick:async()=>{if(window.confirm("Hapus jejak ini?"))try{await Ch(_r(un,"gps_history",Ye.id)),await Me(),Ce("Jejak berhasil dihapus!")}catch(X){Ce("Gagal menghapus jejak!"),console.error(X)}},title:"Hapus jejak ini",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Hapus"]})})]},Ye.id))})]})]})})})]}))})()})]})]})]})]}),h.jsx(nke,{open:N,onOpenChange:I,type:K,isEditing:re,initialData:G,onSubmit:Te,activities:c}),h.jsx(WTe,{open:R,onOpenChange:B,children:h.jsxs(VQ,{children:[h.jsxs(zQ,{children:[h.jsx(GQ,{children:"Konfirmasi Hapus"}),h.jsx(WQ,{children:"Data akan dipindahkan ke Recycle Bin dan dapat dipulihkan dalam 30 hari. Centang untuk melanjutkan."})]}),h.jsxs("div",{className:"flex items-center gap-2 my-4",children:[h.jsx("input",{type:"checkbox",id:"delete-check",checked:Fe,onChange:ee=>$e(ee.target.checked),className:"accent-red-600 h-4 w-4"}),h.jsx("label",{htmlFor:"delete-check",className:"text-sm select-none",children:"Saya yakin ingin menghapus data ini"})]}),h.jsxs(HQ,{children:[h.jsx($Q,{children:"Batal"}),h.jsx(qQ,{className:"bg-red-600 text-white hover:bg-red-700 disabled:opacity-50",onClick:()=>Ee(G&&K,G),disabled:!Fe,children:"Hapus"})]})]})})]}):h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:h.jsxs(_c,{className:"w-[350px]",children:[h.jsx(lL,{children:h.jsx(nX,{className:"text-2xl font-bold text-center",children:"Admin Login"})}),h.jsx(Im,{children:h.jsxs("form",{onSubmit:Se,className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"email",children:"Email"}),h.jsx(oi,{id:"email",type:"email",placeholder:"admin@example.com",value:i,onChange:ee=>a(ee.target.value),required:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jr,{htmlFor:"password",children:"Password"}),h.jsx(oi,{id:"password",type:"password",value:s,onChange:ee=>o(ee.target.value),required:!0})]}),l&&h.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-md text-sm",children:l}),h.jsx(zt,{type:"submit",className:"w-full",children:"Login"})]})})]})})}function Ske(){const n=kq(),{data:e,isLoading:t}=FL(),r=e==null?void 0:e.find(a=>a.id===n.id);if(t)return h.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});if(!r)return h.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center",children:[h.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Kegiatan Tidak Ditemukan"}),h.jsx("p",{className:"text-gray-500 mb-6",children:"Kegiatan yang Anda cari tidak tersedia atau telah dihapus."}),h.jsx(Eo,{href:"/kegiatan",children:h.jsx("a",{className:"px-6 py-2 bg-primary text-white rounded-lg font-semibold shadow hover:bg-primary/90 transition",children:"Kembali ke Daftar Kegiatan"})})]});const i=NL(new Date(r.date),"EEEE, d MMMM yyyy",{locale:QX});return h.jsx("section",{className:"py-12 bg-gradient-to-br from-white to-blue-50 min-h-[80vh]",children:h.jsxs("div",{className:"container mx-auto px-4 max-w-3xl",children:[h.jsx("div",{className:"mb-8",children:h.jsx(Eo,{href:"/kegiatan",children:h.jsxs("a",{className:"inline-flex items-center gap-2 text-primary hover:underline font-medium mb-4",children:[h.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Kembali ke Daftar Kegiatan"]})})}),h.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[h.jsxs("div",{className:"relative h-64 md:h-80 w-full overflow-hidden",children:[h.jsx("img",{src:r.imageUrl||"https://images.unsplash.com/photo-1511632765486-a01980e01a18?auto=format&fit=crop&w=800&h=450",alt:r.title,className:"w-full h-full object-cover object-center transition hover:scale-105 duration-700"}),h.jsx("div",{className:"absolute top-4 left-4",children:h.jsx($s,{variant:"secondary",className:"text-base px-4 py-2 shadow-lg bg-white/80 text-primary font-bold border border-primary",children:r.category})})]}),h.jsxs("div",{className:"p-8 md:p-10",children:[h.jsx("h1",{className:"font-heading text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:r.title}),h.jsx("div",{className:"flex items-center gap-4 mb-6 flex-wrap",children:h.jsxs("span",{className:"inline-flex items-center gap-2 text-gray-500",children:[h.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),i]})}),h.jsx("div",{className:"prose max-w-none text-lg text-gray-700 mb-8",children:r.description}),h.jsx("div",{className:"flex flex-wrap gap-3 mt-8",children:h.jsxs($s,{className:"bg-gradient-to-r from-primary to-blue-400 text-white px-4 py-2 text-base font-semibold shadow",children:["Kategori: ",r.category]})})]})]})]})})}function Eke(){V_();const[n,e]=M.useState(null),[t,r]=M.useState(!0),[i,a]=M.useState(!1),s=new URLSearchParams(window.location.search),o=s.get("type")||"fieldName",l=s.get("input")||"";M.useEffect(()=>{r(!0),jZ(o,l).then(c=>{e(c?{fullName:c.fullName,fieldName:c.fieldName,batchName:c.batchName,batchYear:c.batchYear,registrationNumber:c.registrationNumber,membershipStatus:c.membershipStatus,photoUrl:c.photoUrl,statusMahasiswa:c.statusMahasiswa}:null),r(!1)})},[o,l]);const u=async()=>{if(n!=null&&n.photoUrl){a(!0);try{const d=await(await fetch(n.photoUrl)).blob(),f=window.URL.createObjectURL(d),m=document.createElement("a");m.href=f,m.download=`kartu-anggota-${n.registrationNumber||n.fieldName}.png`,document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(f);const w=await(await fetch("https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/back.png")).blob(),x=window.URL.createObjectURL(w),S=document.createElement("a");S.href=x,S.download=`kartu-anggota-${n.registrationNumber||n.fieldName}-belakang.png`,document.body.appendChild(S),S.click(),document.body.removeChild(S),window.URL.revokeObjectURL(x)}catch{alert("Gagal mengunduh kartu. Silakan coba lagi.")}a(!1)}};return t?h.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:h.jsx("span",{children:"Loading..."})}):n?h.jsx("div",{className:"max-w-5xl mx-auto p-2 sm:p-4",children:h.jsxs(_c,{className:"p-2 sm:p-6",children:[h.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-center mb-4 sm:mb-6",children:"Verifikasi Kartu Anggota"}),n.photoUrl&&h.jsx("div",{className:"flex justify-center mb-6",children:h.jsxs(zt,{className:"gap-2 bg-primary text-white",onClick:u,disabled:i,children:[h.jsx(KD,{className:"w-4 h-4"}),i?"Mengunduh...":"Unduh Kartu Anggota Untuk Print"]})}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 sm:gap-8 mb-4 sm:mb-8",children:[h.jsxs("div",{className:"flex flex-col items-center justify-center w-full sm:w-1/2 relative",id:"member-card-front",children:[n.statusMahasiswa==="Aktif"&&h.jsx(Xn.span,{initial:{opacity:.7,textShadow:"0 0 0px #22c55e"},animate:{opacity:[.7,1,.7],textShadow:["0 0 0px #22c55e","0 0 12px #22c55e, 0 0 24px #16a34a","0 0 0px #22c55e"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute top-3 right-2 z-10 px-3 py-1 rounded-full font-bold text-sm select-none",style:{color:"#22c55e"},children:" Mahasiswa Aktif"}),n.photoUrl?h.jsx("div",{className:"p-2 border-2 border-gray-400 rounded-lg",children:h.jsx("img",{src:n.photoUrl,alt:"Kartu Anggota",className:"rounded-lg shadow-lg max-w-full h-auto"})}):h.jsx("div",{className:"p-2 border-2 border-gray-400 rounded-lg w-full flex items-center justify-center min-h-[275px]",children:h.jsx("span",{className:"text-gray-400 text-center",children:"Kartu anggota tidak tersedia."})})]}),h.jsxs("div",{className:"w-full sm:w-1/2",children:[h.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"Detail Anggota"}),h.jsxs("div",{className:"divide-y text-xs sm:text-base",children:[h.jsxs("div",{className:"flex justify-between py-2",children:[h.jsx("span",{className:"font-medium",children:"Nama Lengkap"}),h.jsx("span",{children:n.fullName})]}),h.jsxs("div",{className:"flex justify-between py-2",children:[h.jsx("span",{className:"font-medium",children:"Nomor Registrasi"}),h.jsx("span",{children:n.registrationNumber})]}),h.jsxs("div",{className:"flex justify-between py-2",children:[h.jsx("span",{className:"font-medium",children:"Nama Lapangan"}),h.jsx("span",{children:n.fieldName})]}),h.jsxs("div",{className:"flex justify-between py-2",children:[h.jsx("span",{className:"font-medium",children:"Nama Angkatan"}),h.jsx("span",{children:n.batchName})]}),h.jsxs("div",{className:"flex justify-between py-2",children:[h.jsx("span",{className:"font-medium",children:"Tahun Angkatan"}),h.jsx("span",{children:n.batchYear})]}),h.jsxs("div",{className:"flex justify-between py-2",children:[h.jsx("span",{className:"font-medium",children:"Keanggotaan"}),h.jsx("span",{children:n.membershipStatus})]})]})]})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 sm:mt-8 text-xs text-gray-500 gap-2",children:[h.jsxs("span",{children:[" ",new Date().getFullYear()," Mahapala Narotama"]}),h.jsx("span",{children:"www.mahapalanarotama.web.id"})]})]})}):h.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:h.jsx("span",{children:"Data anggota tidak ditemukan."})})}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ek="179",Op={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Fp={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},nJ=0,xR=1,rJ=2,Ake=3,iJ=0,tk=1,a1=2,Ql=3,Rd=0,Qs=1,tc=2,yd=0,pm=1,_R=2,wR=3,bR=4,aJ=5,Uh=100,sJ=101,oJ=102,lJ=103,uJ=104,cJ=200,dJ=201,hJ=202,fJ=203,NE=204,RE=205,pJ=206,mJ=207,gJ=208,vJ=209,yJ=210,xJ=211,_J=212,wJ=213,bJ=214,DE=0,LE=1,OE=2,Bm=3,FE=4,jE=5,BE=6,UE=7,rw=0,SJ=1,EJ=2,pc=0,AJ=1,TJ=2,kJ=3,IO=4,CJ=5,MJ=6,IJ=7,SR="attached",PJ="detached",nk=300,Dd=301,Rf=302,i_=303,a_=304,dy=306,s_=1e3,bl=1001,o_=1002,Ga=1003,PO=1004,Tke=1004,I0=1005,kke=1005,ha=1006,s1=1007,Cke=1007,rc=1008,Mke=1008,Nl=1009,NO=1010,RO=1011,Fv=1012,rk=1013,Ld=1014,Ao=1015,hy=1016,ik=1017,ak=1018,jv=1020,DO=35902,LO=1021,OO=1022,bs=1023,Bv=1026,Uv=1027,sk=1028,iw=1029,FO=1030,ok=1031,Ike=1032,lk=1033,o1=33776,l1=33777,u1=33778,c1=33779,VE=35840,zE=35841,HE=35842,GE=35843,WE=36196,qE=37492,$E=37496,XE=37808,KE=37809,YE=37810,ZE=37811,QE=37812,JE=37813,eA=37814,tA=37815,nA=37816,rA=37817,iA=37818,aA=37819,sA=37820,oA=37821,d1=36492,lA=36494,uA=36495,jO=36283,cA=36284,dA=36285,hA=36286,NJ=2200,RJ=2201,DJ=2202,l_=2300,fA=2301,cS=2302,Kp=2400,Yp=2401,u_=2402,uk=2500,BO=2501,Pke=0,Nke=1,Rke=2,LJ=3200,OJ=3201,Dke=3202,Lke=3203,Wf=0,FJ=1,ad="",xo="srgb",Um="srgb-linear",c_="linear",Cr="srgb",Oke=0,jp=7680,Fke=7681,jke=7682,Bke=7683,Uke=34055,Vke=34056,zke=5386,Hke=512,Gke=513,Wke=514,qke=515,$ke=516,Xke=517,Kke=518,ER=519,jJ=512,BJ=513,UJ=514,UO=515,VJ=516,zJ=517,HJ=518,GJ=519,d_=35044,Yke=35048,Zke=35040,Qke=35045,Jke=35049,eCe=35041,tCe=35046,nCe=35050,rCe=35042,iCe="100",AR="300 es",Ho=2e3,Vv=2001,aCe={COMPUTE:"compute",RENDER:"render"},sCe={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},oCe={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let Ac=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const r=t[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}};const us=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let aU=1234567;const mm=Math.PI/180,zv=180/Math.PI;function Xo(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(us[n&255]+us[n>>8&255]+us[n>>16&255]+us[n>>24&255]+"-"+us[e&255]+us[e>>8&255]+"-"+us[e>>16&15|64]+us[e>>24&255]+"-"+us[t&63|128]+us[t>>8&255]+"-"+us[t>>16&255]+us[t>>24&255]+us[r&255]+us[r>>8&255]+us[r>>16&255]+us[r>>24&255]).toLowerCase()}function pn(n,e,t){return Math.max(e,Math.min(t,n))}function VO(n,e){return(n%e+e)%e}function lCe(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function uCe(n,e,t){return n!==e?(t-n)/(e-n):0}function h1(n,e,t){return(1-t)*n+t*e}function cCe(n,e,t,r){return h1(n,e,1-Math.exp(-t*r))}function dCe(n,e=1){return e-Math.abs(VO(n,e*2)-e)}function hCe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function fCe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function pCe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function mCe(n,e){return n+Math.random()*(e-n)}function gCe(n){return n*(.5-Math.random())}function vCe(n){n!==void 0&&(aU=n);let e=aU+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function yCe(n){return n*mm}function xCe(n){return n*zv}function _Ce(n){return(n&n-1)===0&&n!==0}function wCe(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function bCe(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function SCe(n,e,t,r,i){const a=Math.cos,s=Math.sin,o=a(t/2),l=s(t/2),u=a((e+r)/2),c=s((e+r)/2),d=a((e-r)/2),f=s((e-r)/2),m=a((r-e)/2),v=s((r-e)/2);switch(i){case"XYX":n.set(o*c,l*d,l*f,o*u);break;case"YZY":n.set(l*f,o*c,l*d,o*u);break;case"ZXZ":n.set(l*d,l*f,o*c,o*u);break;case"XZX":n.set(o*c,l*v,l*m,o*u);break;case"YXY":n.set(l*m,o*c,l*v,o*u);break;case"ZYZ":n.set(l*v,l*m,o*c,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Ks(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Mn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const ECe={DEG2RAD:mm,RAD2DEG:zv,generateUUID:Xo,clamp:pn,euclideanModulo:VO,mapLinear:lCe,inverseLerp:uCe,lerp:h1,damp:cCe,pingpong:dCe,smoothstep:hCe,smootherstep:fCe,randInt:pCe,randFloat:mCe,randFloatSpread:gCe,seededRandom:vCe,degToRad:yCe,radToDeg:xCe,isPowerOfTwo:_Ce,ceilPowerOfTwo:wCe,floorPowerOfTwo:bCe,setQuaternionFromProperEuler:SCe,normalize:Mn,denormalize:Ks};class rt{constructor(e=0,t=0){rt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=pn(this.x,e.x,t.x),this.y=pn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=pn(this.x,e,t),this.y=pn(this.y,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(pn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(pn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),a=this.x-e.x,s=this.y-e.y;return this.x=a*r-s*i+e.x,this.y=a*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ss{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,a,s,o){let l=r[i+0],u=r[i+1],c=r[i+2],d=r[i+3];const f=a[s+0],m=a[s+1],v=a[s+2],_=a[s+3];if(o===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d;return}if(o===1){e[t+0]=f,e[t+1]=m,e[t+2]=v,e[t+3]=_;return}if(d!==_||l!==f||u!==m||c!==v){let w=1-o;const x=l*f+u*m+c*v+d*_,S=x>=0?1:-1,E=1-x*x;if(E>Number.EPSILON){const D=Math.sqrt(E),F=Math.atan2(D,x*S);w=Math.sin(w*F)/D,o=Math.sin(o*F)/D}const T=o*S;if(l=l*w+f*T,u=u*w+m*T,c=c*w+v*T,d=d*w+_*T,w===1-o){const D=1/Math.sqrt(l*l+u*u+c*c+d*d);l*=D,u*=D,c*=D,d*=D}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,a,s){const o=r[i],l=r[i+1],u=r[i+2],c=r[i+3],d=a[s],f=a[s+1],m=a[s+2],v=a[s+3];return e[t]=o*v+c*d+l*m-u*f,e[t+1]=l*v+c*f+u*d-o*m,e[t+2]=u*v+c*m+o*f-l*d,e[t+3]=c*v-o*d-l*f-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,a=e._z,s=e._order,o=Math.cos,l=Math.sin,u=o(r/2),c=o(i/2),d=o(a/2),f=l(r/2),m=l(i/2),v=l(a/2);switch(s){case"XYZ":this._x=f*c*d+u*m*v,this._y=u*m*d-f*c*v,this._z=u*c*v+f*m*d,this._w=u*c*d-f*m*v;break;case"YXZ":this._x=f*c*d+u*m*v,this._y=u*m*d-f*c*v,this._z=u*c*v-f*m*d,this._w=u*c*d+f*m*v;break;case"ZXY":this._x=f*c*d-u*m*v,this._y=u*m*d+f*c*v,this._z=u*c*v+f*m*d,this._w=u*c*d-f*m*v;break;case"ZYX":this._x=f*c*d-u*m*v,this._y=u*m*d+f*c*v,this._z=u*c*v-f*m*d,this._w=u*c*d+f*m*v;break;case"YZX":this._x=f*c*d+u*m*v,this._y=u*m*d+f*c*v,this._z=u*c*v-f*m*d,this._w=u*c*d-f*m*v;break;case"XZY":this._x=f*c*d-u*m*v,this._y=u*m*d-f*c*v,this._z=u*c*v+f*m*d,this._w=u*c*d+f*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],a=t[8],s=t[1],o=t[5],l=t[9],u=t[2],c=t[6],d=t[10],f=r+o+d;if(f>0){const m=.5/Math.sqrt(f+1);this._w=.25/m,this._x=(c-l)*m,this._y=(a-u)*m,this._z=(s-i)*m}else if(r>o&&r>d){const m=2*Math.sqrt(1+r-o-d);this._w=(c-l)/m,this._x=.25*m,this._y=(i+s)/m,this._z=(a+u)/m}else if(o>d){const m=2*Math.sqrt(1+o-r-d);this._w=(a-u)/m,this._x=(i+s)/m,this._y=.25*m,this._z=(l+c)/m}else{const m=2*Math.sqrt(1+d-r-o);this._w=(s-i)/m,this._x=(a+u)/m,this._y=(l+c)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<1e-8?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(pn(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,a=e._z,s=e._w,o=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+s*o+i*u-a*l,this._y=i*c+s*l+a*o-r*u,this._z=a*c+s*u+r*l-i*o,this._w=s*c-r*o-i*l-a*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,a=this._z,s=this._w;let o=s*e._w+r*e._x+i*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=r,this._y=i,this._z=a,this;const l=1-o*o;if(l<=Number.EPSILON){const m=1-t;return this._w=m*s+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*a+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,o),d=Math.sin((1-t)*c)/u,f=Math.sin(t*c)/u;return this._w=s*d+this._w*f,this._x=r*d+this._x*f,this._y=i*d+this._y*f,this._z=a*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),a=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ie{constructor(e=0,t=0,r=0){ie.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(sU.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(sU.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[3]*r+a[6]*i,this.y=a[1]*t+a[4]*r+a[7]*i,this.z=a[2]*t+a[5]*r+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=e.elements,s=1/(a[3]*t+a[7]*r+a[11]*i+a[15]);return this.x=(a[0]*t+a[4]*r+a[8]*i+a[12])*s,this.y=(a[1]*t+a[5]*r+a[9]*i+a[13])*s,this.z=(a[2]*t+a[6]*r+a[10]*i+a[14])*s,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,a=e.x,s=e.y,o=e.z,l=e.w,u=2*(s*i-o*r),c=2*(o*t-a*i),d=2*(a*r-s*t);return this.x=t+l*u+s*d-o*c,this.y=r+l*c+o*u-a*d,this.z=i+l*d+a*c-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i,this.y=a[1]*t+a[5]*r+a[9]*i,this.z=a[2]*t+a[6]*r+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=pn(this.x,e.x,t.x),this.y=pn(this.y,e.y,t.y),this.z=pn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=pn(this.x,e,t),this.y=pn(this.y,e,t),this.z=pn(this.z,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(pn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,a=e.z,s=t.x,o=t.y,l=t.z;return this.x=i*l-a*o,this.y=a*s-r*l,this.z=r*o-i*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return FM.copy(this).projectOnVector(e),this.sub(FM)}reflect(e){return this.sub(FM.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(pn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const FM=new ie,sU=new Ss;class Cn{constructor(e,t,r,i,a,s,o,l,u){Cn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,a,s,o,l,u)}set(e,t,r,i,a,s,o,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=o,c[3]=t,c[4]=a,c[5]=l,c[6]=r,c[7]=s,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,s=r[0],o=r[3],l=r[6],u=r[1],c=r[4],d=r[7],f=r[2],m=r[5],v=r[8],_=i[0],w=i[3],x=i[6],S=i[1],E=i[4],T=i[7],D=i[2],F=i[5],P=i[8];return a[0]=s*_+o*S+l*D,a[3]=s*w+o*E+l*F,a[6]=s*x+o*T+l*P,a[1]=u*_+c*S+d*D,a[4]=u*w+c*E+d*F,a[7]=u*x+c*T+d*P,a[2]=f*_+m*S+v*D,a[5]=f*w+m*E+v*F,a[8]=f*x+m*T+v*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8];return t*s*c-t*o*u-r*a*c+r*o*l+i*a*u-i*s*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8],d=c*s-o*u,f=o*l-c*a,m=u*a-s*l,v=t*d+r*f+i*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/v;return e[0]=d*_,e[1]=(i*u-c*r)*_,e[2]=(o*r-i*s)*_,e[3]=f*_,e[4]=(c*t-i*l)*_,e[5]=(i*a-o*t)*_,e[6]=m*_,e[7]=(r*l-u*t)*_,e[8]=(s*t-r*a)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,a,s,o){const l=Math.cos(a),u=Math.sin(a);return this.set(r*l,r*u,-r*(l*s+u*o)+s+e,-i*u,i*l,-i*(-u*s+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(jM.makeScale(e,t)),this}rotate(e){return this.premultiply(jM.makeRotation(-e)),this}translate(e,t){return this.premultiply(jM.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const jM=new Cn;function WJ(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const ACe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function P0(n,e){return new ACe[n](e)}function h_(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function qJ(){const n=h_("canvas");return n.style.display="block",n}const oU={};function tv(n){n in oU||(oU[n]=!0,console.warn(n))}function TCe(n,e,t){return new Promise(function(r,i){function a(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:r()}}setTimeout(a,t)})}const lU=new Cn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),uU=new Cn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function kCe(){const n={enabled:!0,workingColorSpace:Um,spaces:{},convert:function(i,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===Cr&&(i.r=xd(i.r),i.g=xd(i.g),i.b=xd(i.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(i.applyMatrix3(this.spaces[a].toXYZ),i.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Cr&&(i.r=nv(i.r),i.g=nv(i.g),i.b=nv(i.b))),i},workingToColorSpace:function(i,a){return this.convert(i,this.workingColorSpace,a)},colorSpaceToWorking:function(i,a){return this.convert(i,a,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===ad?c_:this.spaces[i].transfer},getLuminanceCoefficients:function(i,a=this.workingColorSpace){return i.fromArray(this.spaces[a].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,a,s){return i.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,a){return tv("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(i,a)},toWorkingColorSpace:function(i,a){return tv("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(i,a)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],r=[.3127,.329];return n.define({[Um]:{primaries:e,whitePoint:r,transfer:c_,toXYZ:lU,fromXYZ:uU,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:xo},outputColorSpaceConfig:{drawingBufferColorSpace:xo}},[xo]:{primaries:e,whitePoint:r,transfer:Cr,toXYZ:lU,fromXYZ:uU,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:xo}}}),n}const rr=kCe();function xd(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function nv(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Ig;class $J{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{Ig===void 0&&(Ig=h_("canvas")),Ig.width=e.width,Ig.height=e.height;const i=Ig.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=Ig}return r.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=h_("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),a=i.data;for(let s=0;s<a.length;s++)a[s]=xd(a[s]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(xd(t[r]/255)*255):t[r]=xd(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let CCe=0;class ef{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:CCe++}),this.uuid=Xo(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?a.push(BM(i[s].image)):a.push(BM(i[s]))}else a=BM(i);r.url=a}return t||(e.images[this.uuid]=r),r}}function BM(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?$J.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let MCe=0;const UM=new ie;class ui extends Ac{constructor(e=ui.DEFAULT_IMAGE,t=ui.DEFAULT_MAPPING,r=bl,i=bl,a=ha,s=rc,o=bs,l=Nl,u=ui.DEFAULT_ANISOTROPY,c=ad){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:MCe++}),this.uuid=Xo(),this.name="",this.source=new ef(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=a,this.minFilter=s,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new rt(0,0),this.repeat=new rt(1,1),this.center=new rt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Cn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(UM).x}get height(){return this.source.getSize(UM).y}get depth(){return this.source.getSize(UM).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}i&&r&&i.isVector2&&r.isVector2||i&&r&&i.isVector3&&r.isVector3||i&&r&&i.isMatrix3&&r.isMatrix3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==nk)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case s_:e.x=e.x-Math.floor(e.x);break;case bl:e.x=e.x<0?0:1;break;case o_:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case s_:e.y=e.y-Math.floor(e.y);break;case bl:e.y=e.y<0?0:1;break;case o_:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ui.DEFAULT_IMAGE=null;ui.DEFAULT_MAPPING=nk;ui.DEFAULT_ANISOTROPY=1;class sr{constructor(e=0,t=0,r=0,i=1){sr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=this.w,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i+s[12]*a,this.y=s[1]*t+s[5]*r+s[9]*i+s[13]*a,this.z=s[2]*t+s[6]*r+s[10]*i+s[14]*a,this.w=s[3]*t+s[7]*r+s[11]*i+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,a;const l=e.elements,u=l[0],c=l[4],d=l[8],f=l[1],m=l[5],v=l[9],_=l[2],w=l[6],x=l[10];if(Math.abs(c-f)<.01&&Math.abs(d-_)<.01&&Math.abs(v-w)<.01){if(Math.abs(c+f)<.1&&Math.abs(d+_)<.1&&Math.abs(v+w)<.1&&Math.abs(u+m+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(u+1)/2,T=(m+1)/2,D=(x+1)/2,F=(c+f)/4,P=(d+_)/4,N=(v+w)/4;return E>T&&E>D?E<.01?(r=0,i=.707106781,a=.707106781):(r=Math.sqrt(E),i=F/r,a=P/r):T>D?T<.01?(r=.707106781,i=0,a=.707106781):(i=Math.sqrt(T),r=F/i,a=N/i):D<.01?(r=.707106781,i=.707106781,a=0):(a=Math.sqrt(D),r=P/a,i=N/a),this.set(r,i,a,t),this}let S=Math.sqrt((w-v)*(w-v)+(d-_)*(d-_)+(f-c)*(f-c));return Math.abs(S)<.001&&(S=1),this.x=(w-v)/S,this.y=(d-_)/S,this.z=(f-c)/S,this.w=Math.acos((u+m+x-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=pn(this.x,e.x,t.x),this.y=pn(this.y,e.y,t.y),this.z=pn(this.z,e.z,t.z),this.w=pn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=pn(this.x,e,t),this.y=pn(this.y,e,t),this.z=pn(this.z,e,t),this.w=pn(this.w,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(pn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class zO extends Ac{constructor(e=1,t=1,r={}){super(),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ha,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},r),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=r.depth,this.scissor=new sr(0,0,e,t),this.scissorTest=!1,this.viewport=new sr(0,0,e,t);const i={width:e,height:t,depth:r.depth},a=new ui(i);this.textures=[];const s=r.count;for(let o=0;o<s;o++)this.textures[o]=a.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(r),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples,this.multiview=r.multiview}_setTextureOptions(e={}){const t={minFilter:ha,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let r=0;r<this.textures.length;r++)this.textures[r].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,a=this.textures.length;i<a;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r,this.textures[i].isArrayTexture=this.textures[i].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,r=e.textures.length;t<r;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const i=Object.assign({},e.textures[t].image);this.textures[t].source=new ef(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class bc extends zO{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class ck extends ui{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Ga,this.minFilter=Ga,this.wrapR=bl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class ICe extends bc{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new ck(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class dk extends ui{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Ga,this.minFilter=Ga,this.wrapR=bl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class PCe extends bc{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new dk(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class Es{constructor(e=new ie(1/0,1/0,1/0),t=new ie(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Gl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Gl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Gl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const a=r.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,Gl):Gl.fromBufferAttribute(a,s),Gl.applyMatrix4(e.matrixWorld),this.expandByPoint(Gl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Db.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Db.copy(r.boundingBox)),Db.applyMatrix4(e.matrixWorld),this.union(Db)}const i=e.children;for(let a=0,s=i.length;a<s;a++)this.expandByObject(i[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Gl),Gl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Yy),Lb.subVectors(this.max,Yy),Pg.subVectors(e.a,Yy),Ng.subVectors(e.b,Yy),Rg.subVectors(e.c,Yy),yh.subVectors(Ng,Pg),xh.subVectors(Rg,Ng),hp.subVectors(Pg,Rg);let t=[0,-yh.z,yh.y,0,-xh.z,xh.y,0,-hp.z,hp.y,yh.z,0,-yh.x,xh.z,0,-xh.x,hp.z,0,-hp.x,-yh.y,yh.x,0,-xh.y,xh.x,0,-hp.y,hp.x,0];return!VM(t,Pg,Ng,Rg,Lb)||(t=[1,0,0,0,1,0,0,0,1],!VM(t,Pg,Ng,Rg,Lb))?!1:(Ob.crossVectors(yh,xh),t=[Ob.x,Ob.y,Ob.z],VM(t,Pg,Ng,Rg,Lb))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Gl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Gl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(qc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),qc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),qc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),qc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),qc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),qc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),qc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),qc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(qc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const qc=[new ie,new ie,new ie,new ie,new ie,new ie,new ie,new ie],Gl=new ie,Db=new Es,Pg=new ie,Ng=new ie,Rg=new ie,yh=new ie,xh=new ie,hp=new ie,Yy=new ie,Lb=new ie,Ob=new ie,fp=new ie;function VM(n,e,t,r,i){for(let a=0,s=n.length-3;a<=s;a+=3){fp.fromArray(n,a);const o=i.x*Math.abs(fp.x)+i.y*Math.abs(fp.y)+i.z*Math.abs(fp.z),l=e.dot(fp),u=t.dot(fp),c=r.dot(fp);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>o)return!1}return!0}const NCe=new Es,Zy=new ie,zM=new ie;class Wa{constructor(e=new ie,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):NCe.setFromPoints(e).getCenter(r);let i=0;for(let a=0,s=e.length;a<s;a++)i=Math.max(i,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Zy.subVectors(e,this.center);const t=Zy.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Zy,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(zM.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Zy.copy(e.center).add(zM)),this.expandByPoint(Zy.copy(e.center).sub(zM))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const $c=new ie,HM=new ie,Fb=new ie,_h=new ie,GM=new ie,jb=new ie,WM=new ie;class ig{constructor(e=new ie,t=new ie(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$c)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=$c.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):($c.copy(this.origin).addScaledVector(this.direction,t),$c.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){HM.copy(e).add(t).multiplyScalar(.5),Fb.copy(t).sub(e).normalize(),_h.copy(this.origin).sub(HM);const a=e.distanceTo(t)*.5,s=-this.direction.dot(Fb),o=_h.dot(this.direction),l=-_h.dot(Fb),u=_h.lengthSq(),c=Math.abs(1-s*s);let d,f,m,v;if(c>0)if(d=s*l-o,f=s*o-l,v=a*c,d>=0)if(f>=-v)if(f<=v){const _=1/c;d*=_,f*=_,m=d*(d+s*f+2*o)+f*(s*d+f+2*l)+u}else f=a,d=Math.max(0,-(s*f+o)),m=-d*d+f*(f+2*l)+u;else f=-a,d=Math.max(0,-(s*f+o)),m=-d*d+f*(f+2*l)+u;else f<=-v?(d=Math.max(0,-(-s*a+o)),f=d>0?-a:Math.min(Math.max(-a,-l),a),m=-d*d+f*(f+2*l)+u):f<=v?(d=0,f=Math.min(Math.max(-a,-l),a),m=f*(f+2*l)+u):(d=Math.max(0,-(s*a+o)),f=d>0?a:Math.min(Math.max(-a,-l),a),m=-d*d+f*(f+2*l)+u);else f=s>0?-a:a,d=Math.max(0,-(s*f+o)),m=-d*d+f*(f+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(HM).addScaledVector(Fb,f),m}intersectSphere(e,t){$c.subVectors(e.center,this.origin);const r=$c.dot(this.direction),i=$c.dot($c)-r*r,a=e.radius*e.radius;if(i>a)return null;const s=Math.sqrt(a-i),o=r-s,l=r+s;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,a,s,o,l;const u=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,f=this.origin;return u>=0?(r=(e.min.x-f.x)*u,i=(e.max.x-f.x)*u):(r=(e.max.x-f.x)*u,i=(e.min.x-f.x)*u),c>=0?(a=(e.min.y-f.y)*c,s=(e.max.y-f.y)*c):(a=(e.max.y-f.y)*c,s=(e.min.y-f.y)*c),r>s||a>i||((a>r||isNaN(r))&&(r=a),(s<i||isNaN(i))&&(i=s),d>=0?(o=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(o=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),r>l||o>i)||((o>r||r!==r)&&(r=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,$c)!==null}intersectTriangle(e,t,r,i,a){GM.subVectors(t,e),jb.subVectors(r,e),WM.crossVectors(GM,jb);let s=this.direction.dot(WM),o;if(s>0){if(i)return null;o=1}else if(s<0)o=-1,s=-s;else return null;_h.subVectors(this.origin,e);const l=o*this.direction.dot(jb.crossVectors(_h,jb));if(l<0)return null;const u=o*this.direction.dot(GM.cross(_h));if(u<0||l+u>s)return null;const c=-o*_h.dot(WM);return c<0?null:this.at(c/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class yn{constructor(e,t,r,i,a,s,o,l,u,c,d,f,m,v,_,w){yn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,a,s,o,l,u,c,d,f,m,v,_,w)}set(e,t,r,i,a,s,o,l,u,c,d,f,m,v,_,w){const x=this.elements;return x[0]=e,x[4]=t,x[8]=r,x[12]=i,x[1]=a,x[5]=s,x[9]=o,x[13]=l,x[2]=u,x[6]=c,x[10]=d,x[14]=f,x[3]=m,x[7]=v,x[11]=_,x[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new yn().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Dg.setFromMatrixColumn(e,0).length(),a=1/Dg.setFromMatrixColumn(e,1).length(),s=1/Dg.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=0,t[8]=r[8]*s,t[9]=r[9]*s,t[10]=r[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,a=e.z,s=Math.cos(r),o=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(a),d=Math.sin(a);if(e.order==="XYZ"){const f=s*c,m=s*d,v=o*c,_=o*d;t[0]=l*c,t[4]=-l*d,t[8]=u,t[1]=m+v*u,t[5]=f-_*u,t[9]=-o*l,t[2]=_-f*u,t[6]=v+m*u,t[10]=s*l}else if(e.order==="YXZ"){const f=l*c,m=l*d,v=u*c,_=u*d;t[0]=f+_*o,t[4]=v*o-m,t[8]=s*u,t[1]=s*d,t[5]=s*c,t[9]=-o,t[2]=m*o-v,t[6]=_+f*o,t[10]=s*l}else if(e.order==="ZXY"){const f=l*c,m=l*d,v=u*c,_=u*d;t[0]=f-_*o,t[4]=-s*d,t[8]=v+m*o,t[1]=m+v*o,t[5]=s*c,t[9]=_-f*o,t[2]=-s*u,t[6]=o,t[10]=s*l}else if(e.order==="ZYX"){const f=s*c,m=s*d,v=o*c,_=o*d;t[0]=l*c,t[4]=v*u-m,t[8]=f*u+_,t[1]=l*d,t[5]=_*u+f,t[9]=m*u-v,t[2]=-u,t[6]=o*l,t[10]=s*l}else if(e.order==="YZX"){const f=s*l,m=s*u,v=o*l,_=o*u;t[0]=l*c,t[4]=_-f*d,t[8]=v*d+m,t[1]=d,t[5]=s*c,t[9]=-o*c,t[2]=-u*c,t[6]=m*d+v,t[10]=f-_*d}else if(e.order==="XZY"){const f=s*l,m=s*u,v=o*l,_=o*u;t[0]=l*c,t[4]=-d,t[8]=u*c,t[1]=f*d+_,t[5]=s*c,t[9]=m*d-v,t[2]=v*d-m,t[6]=o*c,t[10]=_*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(RCe,e,DCe)}lookAt(e,t,r){const i=this.elements;return Fo.subVectors(e,t),Fo.lengthSq()===0&&(Fo.z=1),Fo.normalize(),wh.crossVectors(r,Fo),wh.lengthSq()===0&&(Math.abs(r.z)===1?Fo.x+=1e-4:Fo.z+=1e-4,Fo.normalize(),wh.crossVectors(r,Fo)),wh.normalize(),Bb.crossVectors(Fo,wh),i[0]=wh.x,i[4]=Bb.x,i[8]=Fo.x,i[1]=wh.y,i[5]=Bb.y,i[9]=Fo.y,i[2]=wh.z,i[6]=Bb.z,i[10]=Fo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,s=r[0],o=r[4],l=r[8],u=r[12],c=r[1],d=r[5],f=r[9],m=r[13],v=r[2],_=r[6],w=r[10],x=r[14],S=r[3],E=r[7],T=r[11],D=r[15],F=i[0],P=i[4],N=i[8],I=i[12],R=i[1],B=i[5],G=i[9],H=i[13],K=i[2],ne=i[6],re=i[10],oe=i[14],$=i[3],ue=i[7],se=i[11],pe=i[15];return a[0]=s*F+o*R+l*K+u*$,a[4]=s*P+o*B+l*ne+u*ue,a[8]=s*N+o*G+l*re+u*se,a[12]=s*I+o*H+l*oe+u*pe,a[1]=c*F+d*R+f*K+m*$,a[5]=c*P+d*B+f*ne+m*ue,a[9]=c*N+d*G+f*re+m*se,a[13]=c*I+d*H+f*oe+m*pe,a[2]=v*F+_*R+w*K+x*$,a[6]=v*P+_*B+w*ne+x*ue,a[10]=v*N+_*G+w*re+x*se,a[14]=v*I+_*H+w*oe+x*pe,a[3]=S*F+E*R+T*K+D*$,a[7]=S*P+E*B+T*ne+D*ue,a[11]=S*N+E*G+T*re+D*se,a[15]=S*I+E*H+T*oe+D*pe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],a=e[12],s=e[1],o=e[5],l=e[9],u=e[13],c=e[2],d=e[6],f=e[10],m=e[14],v=e[3],_=e[7],w=e[11],x=e[15];return v*(+a*l*d-i*u*d-a*o*f+r*u*f+i*o*m-r*l*m)+_*(+t*l*m-t*u*f+a*s*f-i*s*m+i*u*c-a*l*c)+w*(+t*u*d-t*o*m-a*s*d+r*s*m+a*o*c-r*u*c)+x*(-i*o*c-t*l*d+t*o*f+i*s*d-r*s*f+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8],d=e[9],f=e[10],m=e[11],v=e[12],_=e[13],w=e[14],x=e[15],S=d*w*u-_*f*u+_*l*m-o*w*m-d*l*x+o*f*x,E=v*f*u-c*w*u-v*l*m+s*w*m+c*l*x-s*f*x,T=c*_*u-v*d*u+v*o*m-s*_*m-c*o*x+s*d*x,D=v*d*l-c*_*l-v*o*f+s*_*f+c*o*w-s*d*w,F=t*S+r*E+i*T+a*D;if(F===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/F;return e[0]=S*P,e[1]=(_*f*a-d*w*a-_*i*m+r*w*m+d*i*x-r*f*x)*P,e[2]=(o*w*a-_*l*a+_*i*u-r*w*u-o*i*x+r*l*x)*P,e[3]=(d*l*a-o*f*a-d*i*u+r*f*u+o*i*m-r*l*m)*P,e[4]=E*P,e[5]=(c*w*a-v*f*a+v*i*m-t*w*m-c*i*x+t*f*x)*P,e[6]=(v*l*a-s*w*a-v*i*u+t*w*u+s*i*x-t*l*x)*P,e[7]=(s*f*a-c*l*a+c*i*u-t*f*u-s*i*m+t*l*m)*P,e[8]=T*P,e[9]=(v*d*a-c*_*a-v*r*m+t*_*m+c*r*x-t*d*x)*P,e[10]=(s*_*a-v*o*a+v*r*u-t*_*u-s*r*x+t*o*x)*P,e[11]=(c*o*a-s*d*a-c*r*u+t*d*u+s*r*m-t*o*m)*P,e[12]=D*P,e[13]=(c*_*i-v*d*i+v*r*f-t*_*f-c*r*w+t*d*w)*P,e[14]=(v*o*i-s*_*i-v*r*l+t*_*l+s*r*w-t*o*w)*P,e[15]=(s*d*i-c*o*i+c*r*l-t*d*l-s*r*f+t*o*f)*P,this}scale(e){const t=this.elements,r=e.x,i=e.y,a=e.z;return t[0]*=r,t[4]*=i,t[8]*=a,t[1]*=r,t[5]*=i,t[9]*=a,t[2]*=r,t[6]*=i,t[10]*=a,t[3]*=r,t[7]*=i,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),a=1-r,s=e.x,o=e.y,l=e.z,u=a*s,c=a*o;return this.set(u*s+r,u*o-i*l,u*l+i*o,0,u*o+i*l,c*o+r,c*l-i*s,0,u*l-i*o,c*l+i*s,a*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,a,s){return this.set(1,r,a,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,a=t._x,s=t._y,o=t._z,l=t._w,u=a+a,c=s+s,d=o+o,f=a*u,m=a*c,v=a*d,_=s*c,w=s*d,x=o*d,S=l*u,E=l*c,T=l*d,D=r.x,F=r.y,P=r.z;return i[0]=(1-(_+x))*D,i[1]=(m+T)*D,i[2]=(v-E)*D,i[3]=0,i[4]=(m-T)*F,i[5]=(1-(f+x))*F,i[6]=(w+S)*F,i[7]=0,i[8]=(v+E)*P,i[9]=(w-S)*P,i[10]=(1-(f+_))*P,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let a=Dg.set(i[0],i[1],i[2]).length();const s=Dg.set(i[4],i[5],i[6]).length(),o=Dg.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],Wl.copy(this);const u=1/a,c=1/s,d=1/o;return Wl.elements[0]*=u,Wl.elements[1]*=u,Wl.elements[2]*=u,Wl.elements[4]*=c,Wl.elements[5]*=c,Wl.elements[6]*=c,Wl.elements[8]*=d,Wl.elements[9]*=d,Wl.elements[10]*=d,t.setFromRotationMatrix(Wl),r.x=a,r.y=s,r.z=o,this}makePerspective(e,t,r,i,a,s,o=Ho,l=!1){const u=this.elements,c=2*a/(t-e),d=2*a/(r-i),f=(t+e)/(t-e),m=(r+i)/(r-i);let v,_;if(l)v=a/(s-a),_=s*a/(s-a);else if(o===Ho)v=-(s+a)/(s-a),_=-2*s*a/(s-a);else if(o===Vv)v=-s/(s-a),_=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return u[0]=c,u[4]=0,u[8]=f,u[12]=0,u[1]=0,u[5]=d,u[9]=m,u[13]=0,u[2]=0,u[6]=0,u[10]=v,u[14]=_,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,r,i,a,s,o=Ho,l=!1){const u=this.elements,c=2/(t-e),d=2/(r-i),f=-(t+e)/(t-e),m=-(r+i)/(r-i);let v,_;if(l)v=1/(s-a),_=s/(s-a);else if(o===Ho)v=-2/(s-a),_=-(s+a)/(s-a);else if(o===Vv)v=-1/(s-a),_=-a/(s-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return u[0]=c,u[4]=0,u[8]=0,u[12]=f,u[1]=0,u[5]=d,u[9]=0,u[13]=m,u[2]=0,u[6]=0,u[10]=v,u[14]=_,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Dg=new ie,Wl=new yn,RCe=new ie(0,0,0),DCe=new ie(1,1,1),wh=new ie,Bb=new ie,Fo=new ie,cU=new yn,dU=new Ss;class Qo{constructor(e=0,t=0,r=0,i=Qo.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,a=i[0],s=i[4],o=i[8],l=i[1],u=i[5],c=i[9],d=i[2],f=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(pn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,m),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-pn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,a),this._z=0);break;case"ZXY":this._x=Math.asin(pn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-pn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,m),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(pn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(o,m));break;case"XZY":this._z=Math.asin(-pn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-c,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return cU.makeRotationFromQuaternion(e),this.setFromRotationMatrix(cU,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return dU.setFromEuler(this),this.setFromQuaternion(dU,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Qo.DEFAULT_ORDER="XYZ";class gm{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let LCe=0;const hU=new ie,Lg=new Ss,Xc=new yn,Ub=new ie,Qy=new ie,OCe=new ie,FCe=new Ss,fU=new ie(1,0,0),pU=new ie(0,1,0),mU=new ie(0,0,1),gU={type:"added"},jCe={type:"removed"},Og={type:"childadded",child:null},qM={type:"childremoved",child:null};class lr extends Ac{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:LCe++}),this.uuid=Xo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=lr.DEFAULT_UP.clone();const e=new ie,t=new Qo,r=new Ss,i=new ie(1,1,1);function a(){r.setFromEuler(t,!1)}function s(){t.setFromQuaternion(r,void 0,!1)}t._onChange(a),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new yn},normalMatrix:{value:new Cn}}),this.matrix=new yn,this.matrixWorld=new yn,this.matrixAutoUpdate=lr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=lr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new gm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Lg.setFromAxisAngle(e,t),this.quaternion.multiply(Lg),this}rotateOnWorldAxis(e,t){return Lg.setFromAxisAngle(e,t),this.quaternion.premultiply(Lg),this}rotateX(e){return this.rotateOnAxis(fU,e)}rotateY(e){return this.rotateOnAxis(pU,e)}rotateZ(e){return this.rotateOnAxis(mU,e)}translateOnAxis(e,t){return hU.copy(e).applyQuaternion(this.quaternion),this.position.add(hU.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(fU,e)}translateY(e){return this.translateOnAxis(pU,e)}translateZ(e){return this.translateOnAxis(mU,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Xc.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Ub.copy(e):Ub.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Qy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xc.lookAt(Qy,Ub,this.up):Xc.lookAt(Ub,Qy,this.up),this.quaternion.setFromRotationMatrix(Xc),i&&(Xc.extractRotation(i.matrixWorld),Lg.setFromRotationMatrix(Xc),this.quaternion.premultiply(Lg.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(gU),Og.child=e,this.dispatchEvent(Og),Og.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(jCe),qM.child=e,this.dispatchEvent(qM),qM.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Xc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Xc.multiply(e.parent.matrixWorld)),e.applyMatrix4(Xc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(gU),Og.child=e,this.dispatchEvent(Og),Og.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qy,e,OCe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qy,FCe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(o=>({...o})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function a(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const d=l[u];a(e.shapes,d)}else a(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(a(e.materials,this.material[l]));i.material=o}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(a(e.animations,l))}}if(t){const o=s(e.geometries),l=s(e.materials),u=s(e.textures),c=s(e.images),d=s(e.shapes),f=s(e.skeletons),m=s(e.animations),v=s(e.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),d.length>0&&(r.shapes=d),f.length>0&&(r.skeletons=f),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=i,r;function s(o){const l=[];for(const u in o){const c=o[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}lr.DEFAULT_UP=new ie(0,1,0);lr.DEFAULT_MATRIX_AUTO_UPDATE=!0;lr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ql=new ie,Kc=new ie,$M=new ie,Yc=new ie,Fg=new ie,jg=new ie,vU=new ie,XM=new ie,KM=new ie,YM=new ie,ZM=new sr,QM=new sr,JM=new sr;class wo{constructor(e=new ie,t=new ie,r=new ie){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),ql.subVectors(e,t),i.cross(ql);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,t,r,i,a){ql.subVectors(i,t),Kc.subVectors(r,t),$M.subVectors(e,t);const s=ql.dot(ql),o=ql.dot(Kc),l=ql.dot($M),u=Kc.dot(Kc),c=Kc.dot($M),d=s*u-o*o;if(d===0)return a.set(0,0,0),null;const f=1/d,m=(u*l-o*c)*f,v=(s*c-o*l)*f;return a.set(1-m-v,v,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Yc)===null?!1:Yc.x>=0&&Yc.y>=0&&Yc.x+Yc.y<=1}static getInterpolation(e,t,r,i,a,s,o,l){return this.getBarycoord(e,t,r,i,Yc)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(a,Yc.x),l.addScaledVector(s,Yc.y),l.addScaledVector(o,Yc.z),l)}static getInterpolatedAttribute(e,t,r,i,a,s){return ZM.setScalar(0),QM.setScalar(0),JM.setScalar(0),ZM.fromBufferAttribute(e,t),QM.fromBufferAttribute(e,r),JM.fromBufferAttribute(e,i),s.setScalar(0),s.addScaledVector(ZM,a.x),s.addScaledVector(QM,a.y),s.addScaledVector(JM,a.z),s}static isFrontFacing(e,t,r,i){return ql.subVectors(r,t),Kc.subVectors(e,t),ql.cross(Kc).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ql.subVectors(this.c,this.b),Kc.subVectors(this.a,this.b),ql.cross(Kc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return wo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return wo.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,a){return wo.getInterpolation(e,this.a,this.b,this.c,t,r,i,a)}containsPoint(e){return wo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return wo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,a=this.c;let s,o;Fg.subVectors(i,r),jg.subVectors(a,r),XM.subVectors(e,r);const l=Fg.dot(XM),u=jg.dot(XM);if(l<=0&&u<=0)return t.copy(r);KM.subVectors(e,i);const c=Fg.dot(KM),d=jg.dot(KM);if(c>=0&&d<=c)return t.copy(i);const f=l*d-c*u;if(f<=0&&l>=0&&c<=0)return s=l/(l-c),t.copy(r).addScaledVector(Fg,s);YM.subVectors(e,a);const m=Fg.dot(YM),v=jg.dot(YM);if(v>=0&&m<=v)return t.copy(a);const _=m*u-l*v;if(_<=0&&u>=0&&v<=0)return o=u/(u-v),t.copy(r).addScaledVector(jg,o);const w=c*v-m*d;if(w<=0&&d-c>=0&&m-v>=0)return vU.subVectors(a,i),o=(d-c)/(d-c+(m-v)),t.copy(i).addScaledVector(vU,o);const x=1/(w+_+f);return s=_*x,o=f*x,t.copy(r).addScaledVector(Fg,s).addScaledVector(jg,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const XJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},bh={h:0,s:0,l:0},Vb={h:0,s:0,l:0};function eI(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Dt{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=xo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,rr.colorSpaceToWorking(this,t),this}setRGB(e,t,r,i=rr.workingColorSpace){return this.r=e,this.g=t,this.b=r,rr.colorSpaceToWorking(this,i),this}setHSL(e,t,r,i=rr.workingColorSpace){if(e=VO(e,1),t=pn(t,0,1),r=pn(r,0,1),t===0)this.r=this.g=this.b=r;else{const a=r<=.5?r*(1+t):r+t-r*t,s=2*r-a;this.r=eI(s,a,e+1/3),this.g=eI(s,a,e),this.b=eI(s,a,e-1/3)}return rr.colorSpaceToWorking(this,i),this}setStyle(e,t=xo){function r(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=xo){const r=XJ[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=xd(e.r),this.g=xd(e.g),this.b=xd(e.b),this}copyLinearToSRGB(e){return this.r=nv(e.r),this.g=nv(e.g),this.b=nv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=xo){return rr.workingToColorSpace(cs.copy(this),e),Math.round(pn(cs.r*255,0,255))*65536+Math.round(pn(cs.g*255,0,255))*256+Math.round(pn(cs.b*255,0,255))}getHexString(e=xo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=rr.workingColorSpace){rr.workingToColorSpace(cs.copy(this),t);const r=cs.r,i=cs.g,a=cs.b,s=Math.max(r,i,a),o=Math.min(r,i,a);let l,u;const c=(o+s)/2;if(o===s)l=0,u=0;else{const d=s-o;switch(u=c<=.5?d/(s+o):d/(2-s-o),s){case r:l=(i-a)/d+(i<a?6:0);break;case i:l=(a-r)/d+2;break;case a:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=rr.workingColorSpace){return rr.workingToColorSpace(cs.copy(this),t),e.r=cs.r,e.g=cs.g,e.b=cs.b,e}getStyle(e=xo){rr.workingToColorSpace(cs.copy(this),e);const t=cs.r,r=cs.g,i=cs.b;return e!==xo?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(bh),this.setHSL(bh.h+e,bh.s+t,bh.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(bh),e.getHSL(Vb);const r=h1(bh.h,Vb.h,t),i=h1(bh.s,Vb.s,t),a=h1(bh.l,Vb.l,t);return this.setHSL(r,i,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,a=e.elements;return this.r=a[0]*t+a[3]*r+a[6]*i,this.g=a[1]*t+a[4]*r+a[7]*i,this.b=a[2]*t+a[5]*r+a[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const cs=new Dt;Dt.NAMES=XJ;let BCe=0;class ks extends Ac{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:BCe++}),this.uuid=Xo(),this.name="",this.type="Material",this.blending=pm,this.side=Rd,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=NE,this.blendDst=RE,this.blendEquation=Uh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Dt(0,0,0),this.blendAlpha=0,this.depthFunc=Bm,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ER,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=jp,this.stencilZFail=jp,this.stencilZPass=jp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==pm&&(r.blending=this.blending),this.side!==Rd&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==NE&&(r.blendSrc=this.blendSrc),this.blendDst!==RE&&(r.blendDst=this.blendDst),this.blendEquation!==Uh&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Bm&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ER&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==jp&&(r.stencilFail=this.stencilFail),this.stencilZFail!==jp&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==jp&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(a){const s=[];for(const o in a){const l=a[o];delete l.metadata,s.push(l)}return s}if(t){const a=i(e.textures),s=i(e.images);a.length>0&&(r.textures=a),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let a=0;a!==i;++a)r[a]=t[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class qf extends ks{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qo,this.combine=rw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const sd=UCe();function UCe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,a[l]=u|c}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:s,offsetTable:o}}function mo(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=pn(n,-65504,65504),sd.floatView[0]=n;const e=sd.uint32View[0],t=e>>23&511;return sd.baseTable[t]+((e&8388607)>>sd.shiftTable[t])}function Mx(n){const e=n>>10;return sd.uint32View[0]=sd.mantissaTable[sd.offsetTable[e]+(n&1023)]+sd.exponentTable[e],sd.floatView[0]}class VCe{static toHalfFloat(e){return mo(e)}static fromHalfFloat(e){return Mx(e)}}const Wi=new ie,zb=new rt;let zCe=0;class Lr{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:zCe++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=d_,this.updateRanges=[],this.gpuType=Ao,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)zb.fromBufferAttribute(this,t),zb.applyMatrix3(e),this.setXY(t,zb.x,zb.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Wi.fromBufferAttribute(this,t),Wi.applyMatrix3(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Wi.fromBufferAttribute(this,t),Wi.applyMatrix4(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Wi.fromBufferAttribute(this,t),Wi.applyNormalMatrix(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Wi.fromBufferAttribute(this,t),Wi.transformDirection(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Ks(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Mn(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ks(t,this.array)),t}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ks(t,this.array)),t}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ks(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ks(t,this.array)),t}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),i=Mn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),i=Mn(i,this.array),a=Mn(a,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==d_&&(e.usage=this.usage),e}}class HCe extends Lr{constructor(e,t,r){super(new Int8Array(e),t,r)}}class GCe extends Lr{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class WCe extends Lr{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class qCe extends Lr{constructor(e,t,r){super(new Int16Array(e),t,r)}}class HO extends Lr{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class $Ce extends Lr{constructor(e,t,r){super(new Int32Array(e),t,r)}}class GO extends Lr{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class XCe extends Lr{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=Mx(this.array[e*this.itemSize]);return this.normalized&&(t=Ks(t,this.array)),t}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize]=mo(t),this}getY(e){let t=Mx(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ks(t,this.array)),t}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+1]=mo(t),this}getZ(e){let t=Mx(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ks(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+2]=mo(t),this}getW(e){let t=Mx(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ks(t,this.array)),t}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+3]=mo(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array)),this.array[e+0]=mo(t),this.array[e+1]=mo(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),i=Mn(i,this.array)),this.array[e+0]=mo(t),this.array[e+1]=mo(r),this.array[e+2]=mo(i),this}setXYZW(e,t,r,i,a){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),i=Mn(i,this.array),a=Mn(a,this.array)),this.array[e+0]=mo(t),this.array[e+1]=mo(r),this.array[e+2]=mo(i),this.array[e+3]=mo(a),this}}class Gt extends Lr{constructor(e,t,r){super(new Float32Array(e),t,r)}}let KCe=0;const dl=new yn,tI=new lr,Bg=new ie,jo=new Es,Jy=new Es,_a=new ie;class In extends Ac{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:KCe++}),this.uuid=Xo(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(WJ(e)?GO:HO)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const a=new Cn().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return dl.makeRotationFromQuaternion(e),this.applyMatrix4(dl),this}rotateX(e){return dl.makeRotationX(e),this.applyMatrix4(dl),this}rotateY(e){return dl.makeRotationY(e),this.applyMatrix4(dl),this}rotateZ(e){return dl.makeRotationZ(e),this.applyMatrix4(dl),this}translate(e,t,r){return dl.makeTranslation(e,t,r),this.applyMatrix4(dl),this}scale(e,t,r){return dl.makeScale(e,t,r),this.applyMatrix4(dl),this}lookAt(e){return tI.lookAt(e),tI.updateMatrix(),this.applyMatrix4(tI.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Bg).negate(),this.translate(Bg.x,Bg.y,Bg.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const r=[];for(let i=0,a=e.length;i<a;i++){const s=e[i];r.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Gt(r,3))}else{const r=Math.min(e.length,t.count);for(let i=0;i<r;i++){const a=e[i];t.setXYZ(i,a.x,a.y,a.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Es);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ie(-1/0,-1/0,-1/0),new ie(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const a=t[r];jo.setFromBufferAttribute(a),this.morphTargetsRelative?(_a.addVectors(this.boundingBox.min,jo.min),this.boundingBox.expandByPoint(_a),_a.addVectors(this.boundingBox.max,jo.max),this.boundingBox.expandByPoint(_a)):(this.boundingBox.expandByPoint(jo.min),this.boundingBox.expandByPoint(jo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Wa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ie,1/0);return}if(e){const r=this.boundingSphere.center;if(jo.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){const o=t[a];Jy.setFromBufferAttribute(o),this.morphTargetsRelative?(_a.addVectors(jo.min,Jy.min),jo.expandByPoint(_a),_a.addVectors(jo.max,Jy.max),jo.expandByPoint(_a)):(jo.expandByPoint(Jy.min),jo.expandByPoint(Jy.max))}jo.getCenter(r);let i=0;for(let a=0,s=e.count;a<s;a++)_a.fromBufferAttribute(e,a),i=Math.max(i,r.distanceToSquared(_a));if(t)for(let a=0,s=t.length;a<s;a++){const o=t[a],l=this.morphTargetsRelative;for(let u=0,c=o.count;u<c;u++)_a.fromBufferAttribute(o,u),l&&(Bg.fromBufferAttribute(e,u),_a.add(Bg)),i=Math.max(i,r.distanceToSquared(_a))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Lr(new Float32Array(4*r.count),4));const s=this.getAttribute("tangent"),o=[],l=[];for(let N=0;N<r.count;N++)o[N]=new ie,l[N]=new ie;const u=new ie,c=new ie,d=new ie,f=new rt,m=new rt,v=new rt,_=new ie,w=new ie;function x(N,I,R){u.fromBufferAttribute(r,N),c.fromBufferAttribute(r,I),d.fromBufferAttribute(r,R),f.fromBufferAttribute(a,N),m.fromBufferAttribute(a,I),v.fromBufferAttribute(a,R),c.sub(u),d.sub(u),m.sub(f),v.sub(f);const B=1/(m.x*v.y-v.x*m.y);isFinite(B)&&(_.copy(c).multiplyScalar(v.y).addScaledVector(d,-m.y).multiplyScalar(B),w.copy(d).multiplyScalar(m.x).addScaledVector(c,-v.x).multiplyScalar(B),o[N].add(_),o[I].add(_),o[R].add(_),l[N].add(w),l[I].add(w),l[R].add(w))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let N=0,I=S.length;N<I;++N){const R=S[N],B=R.start,G=R.count;for(let H=B,K=B+G;H<K;H+=3)x(e.getX(H+0),e.getX(H+1),e.getX(H+2))}const E=new ie,T=new ie,D=new ie,F=new ie;function P(N){D.fromBufferAttribute(i,N),F.copy(D);const I=o[N];E.copy(I),E.sub(D.multiplyScalar(D.dot(I))).normalize(),T.crossVectors(F,I);const B=T.dot(l[N])<0?-1:1;s.setXYZW(N,E.x,E.y,E.z,B)}for(let N=0,I=S.length;N<I;++N){const R=S[N],B=R.start,G=R.count;for(let H=B,K=B+G;H<K;H+=3)P(e.getX(H+0)),P(e.getX(H+1)),P(e.getX(H+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Lr(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let f=0,m=r.count;f<m;f++)r.setXYZ(f,0,0,0);const i=new ie,a=new ie,s=new ie,o=new ie,l=new ie,u=new ie,c=new ie,d=new ie;if(e)for(let f=0,m=e.count;f<m;f+=3){const v=e.getX(f+0),_=e.getX(f+1),w=e.getX(f+2);i.fromBufferAttribute(t,v),a.fromBufferAttribute(t,_),s.fromBufferAttribute(t,w),c.subVectors(s,a),d.subVectors(i,a),c.cross(d),o.fromBufferAttribute(r,v),l.fromBufferAttribute(r,_),u.fromBufferAttribute(r,w),o.add(c),l.add(c),u.add(c),r.setXYZ(v,o.x,o.y,o.z),r.setXYZ(_,l.x,l.y,l.z),r.setXYZ(w,u.x,u.y,u.z)}else for(let f=0,m=t.count;f<m;f+=3)i.fromBufferAttribute(t,f+0),a.fromBufferAttribute(t,f+1),s.fromBufferAttribute(t,f+2),c.subVectors(s,a),d.subVectors(i,a),c.cross(d),r.setXYZ(f+0,c.x,c.y,c.z),r.setXYZ(f+1,c.x,c.y,c.z),r.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)_a.fromBufferAttribute(e,t),_a.normalize(),e.setXYZ(t,_a.x,_a.y,_a.z)}toNonIndexed(){function e(o,l){const u=o.array,c=o.itemSize,d=o.normalized,f=new u.constructor(l.length*c);let m=0,v=0;for(let _=0,w=l.length;_<w;_++){o.isInterleavedBufferAttribute?m=l[_]*o.data.stride+o.offset:m=l[_]*c;for(let x=0;x<c;x++)f[v++]=u[m++]}return new Lr(f,c,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new In,r=this.index.array,i=this.attributes;for(const o in i){const l=i[o],u=e(l,r);t.setAttribute(o,u)}const a=this.morphAttributes;for(const o in a){const l=[],u=a[o];for(let c=0,d=u.length;c<d;c++){const f=u[c],m=e(f,r);l.push(m)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,l=s.length;o<l;o++){const u=s[o];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let a=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let d=0,f=u.length;d<f;d++){const m=u[d];c.push(m.toJSON(e.data))}c.length>0&&(i[l]=c,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const a=e.morphAttributes;for(const u in a){const c=[],d=a[u];for(let f=0,m=d.length;f<m;f++)c.push(d[f].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let u=0,c=s.length;u<c;u++){const d=s[u];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const yU=new yn,pp=new ig,Hb=new Wa,xU=new ie,Gb=new ie,Wb=new ie,qb=new ie,nI=new ie,$b=new ie,_U=new ie,Xb=new ie;class Zi extends lr{constructor(e=new In,t=new qf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,a=r.morphAttributes.position,s=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(a&&o){$b.set(0,0,0);for(let l=0,u=a.length;l<u;l++){const c=o[l],d=a[l];c!==0&&(nI.fromBufferAttribute(d,e),s?$b.addScaledVector(nI,c):$b.addScaledVector(nI.sub(t),c))}t.add($b)}return t}raycast(e,t){const r=this.geometry,i=this.material,a=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Hb.copy(r.boundingSphere),Hb.applyMatrix4(a),pp.copy(e.ray).recast(e.near),!(Hb.containsPoint(pp.origin)===!1&&(pp.intersectSphere(Hb,xU)===null||pp.origin.distanceToSquared(xU)>(e.far-e.near)**2))&&(yU.copy(a).invert(),pp.copy(e.ray).applyMatrix4(yU),!(r.boundingBox!==null&&pp.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,pp)))}_computeIntersections(e,t,r){let i;const a=this.geometry,s=this.material,o=a.index,l=a.attributes.position,u=a.attributes.uv,c=a.attributes.uv1,d=a.attributes.normal,f=a.groups,m=a.drawRange;if(o!==null)if(Array.isArray(s))for(let v=0,_=f.length;v<_;v++){const w=f[v],x=s[w.materialIndex],S=Math.max(w.start,m.start),E=Math.min(o.count,Math.min(w.start+w.count,m.start+m.count));for(let T=S,D=E;T<D;T+=3){const F=o.getX(T),P=o.getX(T+1),N=o.getX(T+2);i=Kb(this,x,e,r,u,c,d,F,P,N),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=w.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),_=Math.min(o.count,m.start+m.count);for(let w=v,x=_;w<x;w+=3){const S=o.getX(w),E=o.getX(w+1),T=o.getX(w+2);i=Kb(this,s,e,r,u,c,d,S,E,T),i&&(i.faceIndex=Math.floor(w/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(s))for(let v=0,_=f.length;v<_;v++){const w=f[v],x=s[w.materialIndex],S=Math.max(w.start,m.start),E=Math.min(l.count,Math.min(w.start+w.count,m.start+m.count));for(let T=S,D=E;T<D;T+=3){const F=T,P=T+1,N=T+2;i=Kb(this,x,e,r,u,c,d,F,P,N),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=w.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),_=Math.min(l.count,m.start+m.count);for(let w=v,x=_;w<x;w+=3){const S=w,E=w+1,T=w+2;i=Kb(this,s,e,r,u,c,d,S,E,T),i&&(i.faceIndex=Math.floor(w/3),t.push(i))}}}}function YCe(n,e,t,r,i,a,s,o){let l;if(e.side===Qs?l=r.intersectTriangle(s,a,i,!0,o):l=r.intersectTriangle(i,a,s,e.side===Rd,o),l===null)return null;Xb.copy(o),Xb.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(Xb);return u<t.near||u>t.far?null:{distance:u,point:Xb.clone(),object:n}}function Kb(n,e,t,r,i,a,s,o,l,u){n.getVertexPosition(o,Gb),n.getVertexPosition(l,Wb),n.getVertexPosition(u,qb);const c=YCe(n,e,t,r,Gb,Wb,qb,_U);if(c){const d=new ie;wo.getBarycoord(_U,Gb,Wb,qb,d),i&&(c.uv=wo.getInterpolatedAttribute(i,o,l,u,d,new rt)),a&&(c.uv1=wo.getInterpolatedAttribute(a,o,l,u,d,new rt)),s&&(c.normal=wo.getInterpolatedAttribute(s,o,l,u,d,new ie),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const f={a:o,b:l,c:u,normal:new ie,materialIndex:0};wo.getNormal(Gb,Wb,qb,f.normal),c.face=f,c.barycoord=d}return c}class ag extends In{constructor(e=1,t=1,r=1,i=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:a,depthSegments:s};const o=this;i=Math.floor(i),a=Math.floor(a),s=Math.floor(s);const l=[],u=[],c=[],d=[];let f=0,m=0;v("z","y","x",-1,-1,r,t,e,s,a,0),v("z","y","x",1,-1,r,t,-e,s,a,1),v("x","z","y",1,1,e,r,t,i,s,2),v("x","z","y",1,-1,e,r,-t,i,s,3),v("x","y","z",1,-1,e,t,r,i,a,4),v("x","y","z",-1,-1,e,t,-r,i,a,5),this.setIndex(l),this.setAttribute("position",new Gt(u,3)),this.setAttribute("normal",new Gt(c,3)),this.setAttribute("uv",new Gt(d,2));function v(_,w,x,S,E,T,D,F,P,N,I){const R=T/P,B=D/N,G=T/2,H=D/2,K=F/2,ne=P+1,re=N+1;let oe=0,$=0;const ue=new ie;for(let se=0;se<re;se++){const pe=se*B-H;for(let Fe=0;Fe<ne;Fe++){const $e=Fe*R-G;ue[_]=$e*S,ue[w]=pe*E,ue[x]=K,u.push(ue.x,ue.y,ue.z),ue[_]=0,ue[w]=0,ue[x]=F>0?1:-1,c.push(ue.x,ue.y,ue.z),d.push(Fe/P),d.push(1-se/N),oe+=1}}for(let se=0;se<N;se++)for(let pe=0;pe<P;pe++){const Fe=f+pe+ne*se,$e=f+pe+ne*(se+1),at=f+(pe+1)+ne*(se+1),me=f+(pe+1)+ne*se;l.push(Fe,$e,me),l.push($e,at,me),$+=6}o.addGroup(m,$,I),m+=$,f+=oe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ag(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Hv(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function zs(n){const e={};for(let t=0;t<n.length;t++){const r=Hv(n[t]);for(const i in r)e[i]=r[i]}return e}function ZCe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function KJ(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:rr.workingColorSpace}const YJ={clone:Hv,merge:zs};var QCe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,JCe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Su extends ks{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=QCe,this.fragmentShader=JCe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Hv(e.uniforms),this.uniformsGroups=ZCe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?t.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[i]={type:"m4",value:s.toArray()}:t.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class aw extends lr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new yn,this.projectionMatrix=new yn,this.projectionMatrixInverse=new yn,this.coordinateSystem=Ho,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Sh=new ie,wU=new rt,bU=new rt;class Bi extends aw{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=zv*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(mm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return zv*2*Math.atan(Math.tan(mm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Sh.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Sh.x,Sh.y).multiplyScalar(-e/Sh.z),Sh.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Sh.x,Sh.y).multiplyScalar(-e/Sh.z)}getViewSize(e,t){return this.getViewBounds(e,wU,bU),t.subVectors(bU,wU)}setViewOffset(e,t,r,i,a,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(mm*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,a=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,u=s.fullHeight;a+=s.offsetX*i/l,t-=s.offsetY*r/u,i*=s.width/l,r*=s.height/u}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,t,t-r,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Ug=-90,Vg=1;class ZJ extends lr{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Bi(Ug,Vg,e,t);i.layers=this.layers,this.add(i);const a=new Bi(Ug,Vg,e,t);a.layers=this.layers,this.add(a);const s=new Bi(Ug,Vg,e,t);s.layers=this.layers,this.add(s);const o=new Bi(Ug,Vg,e,t);o.layers=this.layers,this.add(o);const l=new Bi(Ug,Vg,e,t);l.layers=this.layers,this.add(l);const u=new Bi(Ug,Vg,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,a,s,o,l]=t;for(const u of t)this.remove(u);if(e===Ho)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Vv)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,l,u,c]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const _=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,a),e.setRenderTarget(r,1,i),e.render(t,s),e.setRenderTarget(r,2,i),e.render(t,o),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,u),r.texture.generateMipmaps=_,e.setRenderTarget(r,5,i),e.render(t,c),e.setRenderTarget(d,f,m),e.xr.enabled=v,r.texture.needsPMREMUpdate=!0}}class sw extends ui{constructor(e=[],t=Dd,r,i,a,s,o,l,u,c){super(e,t,r,i,a,s,o,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class QJ extends bc{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new sw(i),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new ag(5,5,5),a=new Su({name:"CubemapFromEquirect",uniforms:Hv(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Qs,blending:yd});a.uniforms.tEquirect.value=t;const s=new Zi(i,a),o=t.minFilter;return t.minFilter===rc&&(t.minFilter=ha),new ZJ(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,r=!0,i=!0){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,r,i);e.setRenderTarget(a)}}class N0 extends lr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const eMe={type:"move"};class dS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new N0,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new N0,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ie,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ie),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new N0,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ie,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ie),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,a=null,s=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(const _ of e.hand.values()){const w=t.getJointPose(_,r),x=this._getHandJoint(u,_);w!==null&&(x.matrix.fromArray(w.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=w.radius),x.visible=w!==null}const c=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],f=c.position.distanceTo(d.position),m=.02,v=.005;u.inputState.pinching&&f>m+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&f<=m-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,r),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&a!==null&&(i=a),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(eMe)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=a!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new N0;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class hk{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Dt(e),this.density=t}clone(){return new hk(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class fk{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Dt(e),this.near=t,this.far=r}clone(){return new fk(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class WO extends lr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Qo,this.environmentIntensity=1,this.environmentRotation=new Qo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class pk{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=d_,this.updateRanges=[],this.version=0,this.uuid=Xo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Xo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Xo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Bs=new ie;class Vm{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Bs.fromBufferAttribute(this,t),Bs.applyMatrix4(e),this.setXYZ(t,Bs.x,Bs.y,Bs.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Bs.fromBufferAttribute(this,t),Bs.applyNormalMatrix(e),this.setXYZ(t,Bs.x,Bs.y,Bs.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Bs.fromBufferAttribute(this,t),Bs.transformDirection(e),this.setXYZ(t,Bs.x,Bs.y,Bs.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=Ks(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Mn(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ks(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ks(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ks(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ks(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),i=Mn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),r=Mn(r,this.array),i=Mn(i,this.array),a=Mn(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return new Lr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Vm(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class qO extends ks{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Dt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let zg;const ex=new ie,Hg=new ie,Gg=new ie,Wg=new rt,tx=new rt,JJ=new yn,Yb=new ie,nx=new ie,Zb=new ie,SU=new rt,rI=new rt,EU=new rt;class eee extends lr{constructor(e=new qO){if(super(),this.isSprite=!0,this.type="Sprite",zg===void 0){zg=new In;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new pk(t,5);zg.setIndex([0,1,2,0,2,3]),zg.setAttribute("position",new Vm(r,3,0,!1)),zg.setAttribute("uv",new Vm(r,2,3,!1))}this.geometry=zg,this.material=e,this.center=new rt(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Hg.setFromMatrixScale(this.matrixWorld),JJ.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Gg.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Hg.multiplyScalar(-Gg.z);const r=this.material.rotation;let i,a;r!==0&&(a=Math.cos(r),i=Math.sin(r));const s=this.center;Qb(Yb.set(-.5,-.5,0),Gg,s,Hg,i,a),Qb(nx.set(.5,-.5,0),Gg,s,Hg,i,a),Qb(Zb.set(.5,.5,0),Gg,s,Hg,i,a),SU.set(0,0),rI.set(1,0),EU.set(1,1);let o=e.ray.intersectTriangle(Yb,nx,Zb,!1,ex);if(o===null&&(Qb(nx.set(-.5,.5,0),Gg,s,Hg,i,a),rI.set(0,1),o=e.ray.intersectTriangle(Yb,Zb,nx,!1,ex),o===null))return;const l=e.ray.origin.distanceTo(ex);l<e.near||l>e.far||t.push({distance:l,point:ex.clone(),uv:wo.getInterpolation(ex,Yb,nx,Zb,SU,rI,EU,new rt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Qb(n,e,t,r,i,a){Wg.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(tx.x=a*Wg.x-i*Wg.y,tx.y=i*Wg.x+a*Wg.y):tx.copy(Wg),n.copy(e),n.x+=tx.x,n.y+=tx.y,n.applyMatrix4(JJ)}const Jb=new ie,AU=new ie;class tee extends lr{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const a=t[r];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let a;for(a=0;a<i.length&&!(t<i[a].distance);a++);return i.splice(a,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let r=0;r<t.length;r++)if(t[r].distance===e){const i=t.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),e<a)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Jb.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Jb);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Jb.setFromMatrixPosition(e.matrixWorld),AU.setFromMatrixPosition(this.matrixWorld);const r=Jb.distanceTo(AU)/e.zoom;t[0].object.visible=!0;let i,a;for(i=1,a=t.length;i<a;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),r>=s)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<a;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,a=r.length;i<a;i++){const s=r[i];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}}const TU=new ie,kU=new sr,CU=new sr,tMe=new ie,MU=new yn,e2=new ie,iI=new Wa,IU=new yn,aI=new ig;class nee extends Zi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=SR,this.bindMatrix=new yn,this.bindMatrixInverse=new yn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Es),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,e2),this.boundingBox.expandByPoint(e2)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Wa),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,e2),this.boundingSphere.expandByPoint(e2)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),iI.copy(this.boundingSphere),iI.applyMatrix4(i),e.ray.intersectsSphere(iI)!==!1&&(IU.copy(i).invert(),aI.copy(e.ray).applyMatrix4(IU),!(this.boundingBox!==null&&aI.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,aI)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new sr,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===SR?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===PJ?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;kU.fromBufferAttribute(i.attributes.skinIndex,e),CU.fromBufferAttribute(i.attributes.skinWeight,e),TU.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const s=CU.getComponent(a);if(s!==0){const o=kU.getComponent(a);MU.multiplyMatrices(r.bones[o].matrixWorld,r.boneInverses[o]),t.addScaledVector(tMe.copy(TU).applyMatrix4(MU),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}class $O extends lr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class mc extends ui{constructor(e=null,t=1,r=1,i,a,s,o,l,u=Ga,c=Ga,d,f){super(null,s,o,l,u,c,i,a,d,f),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const PU=new yn,nMe=new yn;class mk{constructor(e=[],t=[]){this.uuid=Xo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new yn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new yn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const o=e[a]?e[a].matrixWorld:nMe;PU.multiplyMatrices(o,t[a]),PU.toArray(r,a*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new mk(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new mc(t,e,e,bs,Ao);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const a=e.bones[r];let s=t[a];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),s=new $O),this.bones.push(s),this.boneInverses.push(new yn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,a=t.length;i<a;i++){const s=t[i];e.bones.push(s.uuid);const o=r[i];e.boneInverses.push(o.toArray())}return e}}class Gv extends Lr{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const qg=new yn,NU=new yn,t2=[],RU=new Es,rMe=new yn,rx=new Zi,ix=new Wa;class ree extends Zi{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Gv(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,rMe)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Es),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,qg),RU.copy(e.boundingBox).applyMatrix4(qg),this.boundingBox.union(RU)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Wa),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,qg),ix.copy(e.boundingSphere).applyMatrix4(qg),this.boundingSphere.union(ix)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const r=t.morphTargetInfluences,i=this.morphTexture.source.data.data,a=r.length+1,s=e*a+1;for(let o=0;o<r.length;o++)r[o]=i[s+o]}raycast(e,t){const r=this.matrixWorld,i=this.count;if(rx.geometry=this.geometry,rx.material=this.material,rx.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ix.copy(this.boundingSphere),ix.applyMatrix4(r),e.ray.intersectsSphere(ix)!==!1))for(let a=0;a<i;a++){this.getMatrixAt(a,qg),NU.multiplyMatrices(r,qg),rx.matrixWorld=NU,rx.raycast(e,t2);for(let s=0,o=t2.length;s<o;s++){const l=t2[s];l.instanceId=a,l.object=this,t.push(l)}t2.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Gv(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const r=t.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new mc(new Float32Array(i*this.count),i,this.count,sk,Ao));const a=this.morphTexture.source.data.data;let s=0;for(let u=0;u<r.length;u++)s+=r[u];const o=this.geometry.morphTargetsRelative?1:1-s,l=i*e;a[l]=o,a.set(r,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const sI=new ie,iMe=new ie,aMe=new Cn;class nd{constructor(e=new ie(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=sI.subVectors(r,t).cross(iMe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(sI),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:t.copy(e.start).addScaledVector(r,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||aMe.getNormalMatrix(e),i=this.coplanarPoint(sI).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const mp=new Wa,sMe=new rt(.5,.5),n2=new ie;class fy{constructor(e=new nd,t=new nd,r=new nd,i=new nd,a=new nd,s=new nd){this.planes=[e,t,r,i,a,s]}set(e,t,r,i,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(a),o[5].copy(s),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Ho,r=!1){const i=this.planes,a=e.elements,s=a[0],o=a[1],l=a[2],u=a[3],c=a[4],d=a[5],f=a[6],m=a[7],v=a[8],_=a[9],w=a[10],x=a[11],S=a[12],E=a[13],T=a[14],D=a[15];if(i[0].setComponents(u-s,m-c,x-v,D-S).normalize(),i[1].setComponents(u+s,m+c,x+v,D+S).normalize(),i[2].setComponents(u+o,m+d,x+_,D+E).normalize(),i[3].setComponents(u-o,m-d,x-_,D-E).normalize(),r)i[4].setComponents(l,f,w,T).normalize(),i[5].setComponents(u-l,m-f,x-w,D-T).normalize();else if(i[4].setComponents(u-l,m-f,x-w,D-T).normalize(),t===Ho)i[5].setComponents(u+l,m+f,x+w,D+T).normalize();else if(t===Vv)i[5].setComponents(l,f,w,T).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),mp.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),mp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(mp)}intersectsSprite(e){mp.center.set(0,0,0);const t=sMe.distanceTo(e.center);return mp.radius=.7071067811865476+t,mp.applyMatrix4(e.matrixWorld),this.intersectsSphere(mp)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(n2.x=i.normal.x>0?e.max.x:e.min.x,n2.y=i.normal.y>0?e.max.y:e.min.y,n2.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(n2)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const zu=new yn,Hu=new fy;class gk{constructor(){this.coordinateSystem=Ho}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(zu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Hu.setFromProjectionMatrix(zu,i.coordinateSystem,i.reversedDepth),Hu.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(zu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Hu.setFromProjectionMatrix(zu,i.coordinateSystem,i.reversedDepth),Hu.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(zu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Hu.setFromProjectionMatrix(zu,i.coordinateSystem,i.reversedDepth),Hu.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(zu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Hu.setFromProjectionMatrix(zu,i.coordinateSystem,i.reversedDepth),Hu.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(zu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Hu.setFromProjectionMatrix(zu,i.coordinateSystem,i.reversedDepth),Hu.containsPoint(e))return!0}return!1}clone(){return new gk}}function oI(n,e){return n-e}function oMe(n,e){return n.z-e.z}function lMe(n,e){return e.z-n.z}class uMe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,r,i){const a=this.pool,s=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const o=a[this.index];s.push(o),this.index++,o.start=e,o.count=t,o.z=r,o.index=i}reset(){this.list.length=0,this.index=0}}const fo=new yn,cMe=new Dt(1,1,1),DU=new fy,dMe=new gk,r2=new Es,gp=new Wa,ax=new ie,LU=new ie,hMe=new ie,lI=new uMe,ds=new Zi,i2=[];function fMe(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let a=0;a<i;a++)for(let s=0;s<r;s++)e.setComponent(a+t,s,n.getComponent(a,s))}else e.array.set(n.array,t*r);e.needsUpdate=!0}function vp(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++)e[r]=n[r]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class iee extends Zi{constructor(e,t,r=t*2,i){super(new In,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new mc(t,e,e,bs,Ao);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),r=new mc(t,e,e,iw,Ld);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),r=new mc(t,e,e,bs,Ao);r.colorSpace=rr.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const s=e.getAttribute(a),{array:o,itemSize:l,normalized:u}=s,c=new o.constructor(r*l),d=new Lr(c,l,u);t.setAttribute(a,d)}if(e.getIndex()!==null){const a=r>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Lr(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(!e.hasAttribute(r))throw new Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),a=t.getAttribute(r);if(i.itemSize!==a.itemSize||i.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Es);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const a=t[r].geometryIndex;this.getMatrixAt(r,fo),this.getBoundingBoxAt(a,r2).applyMatrix4(fo),e.union(r2)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Wa);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const a=t[r].geometryIndex;this.getMatrixAt(r,fo),this.getBoundingSphereAt(a,gp).applyMatrix4(fo),e.union(gp)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(oI),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));const a=this._matricesTexture;fo.identity().toArray(a.image.data,i*16),a.needsUpdate=!0;const s=this._colorsTexture;return s&&(cMe.toArray(s.image.data,i*4),s.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const s=e.getIndex();if(s!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=r===-1?s.count:r),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(oI),l=this._availableGeometryIds.shift(),a[l]=i):(l=this._geometryCount,this._geometryCount++,a.push(i)),this.setGeometryAt(l,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,a=r.getIndex(),s=t.getIndex(),o=this._geometryInfo[e];if(i&&s.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,u=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const c in r.attributes){const d=t.getAttribute(c),f=r.getAttribute(c);fMe(d,f,l);const m=d.itemSize;for(let v=d.count,_=u;v<_;v++){const w=l+v;for(let x=0;x<m;x++)f.setComponent(w,x,0)}f.needsUpdate=!0,f.addUpdateRange(l*m,u*m)}if(i){const c=o.indexStart,d=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let f=0;f<s.count;f++)a.setX(c+f,l+s.getX(f));for(let f=s.count,m=d;f<m;f++)a.setX(c+f,l);a.needsUpdate=!0,a.addUpdateRange(c,o.reservedIndexCount)}return o.start=i?o.indexStart:o.vertexStart,o.count=i?o.indexCount:o.vertexCount,o.boundingBox=null,t.boundingBox!==null&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,t.boundingSphere!==null&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const r=this._instanceInfo;for(let i=0,a=r.length;i<a;i++)r[i].active&&r[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const r=this._geometryInfo,i=r.map((s,o)=>o).sort((s,o)=>r[s].vertexStart-r[o].vertexStart),a=this.geometry;for(let s=0,o=r.length;s<o;s++){const l=i[s],u=r[l];if(u.active!==!1){if(a.index!==null){if(u.indexStart!==t){const{indexStart:c,vertexStart:d,reservedIndexCount:f}=u,m=a.index,v=m.array,_=e-d;for(let w=c;w<c+f;w++)v[w]=v[w]+_;m.array.copyWithin(t,c,c+f),m.addUpdateRange(t,f),u.indexStart=t}t+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:c,reservedVertexCount:d}=u,f=a.attributes;for(const m in f){const v=f[m],{array:_,itemSize:w}=v;_.copyWithin(e*w,c*w,(c+d)*w),v.addUpdateRange(e*w,d*w)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=a.index?u.indexStart:u.vertexStart,this._nextIndexStart=a.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const a=new Es,s=r.index,o=r.attributes.position;for(let l=i.start,u=i.start+i.count;l<u;l++){let c=l;s&&(c=s.getX(c)),a.expandByPoint(ax.fromBufferAttribute(o,c))}i.boundingBox=a}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const a=new Wa;this.getBoundingBoxAt(e,r2),r2.getCenter(a.center);const s=r.index,o=r.attributes.position;let l=0;for(let u=i.start,c=i.start+i.count;u<c;u++){let d=u;s&&(d=s.getX(d)),ax.fromBufferAttribute(o,d),l=Math.max(l,a.center.distanceToSquared(ax))}a.radius=Math.sqrt(l),i.boundingSphere=a}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const r=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),r.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const r=this._geometryInfo[e];return t.vertexStart=r.vertexStart,t.vertexCount=r.vertexCount,t.reservedVertexCount=r.reservedVertexCount,t.indexStart=r.indexStart,t.indexCount=r.indexCount,t.reservedIndexCount=r.reservedIndexCount,t.start=r.start,t.count=r.count,t}setInstanceCount(e){const t=this._availableInstanceIds,r=this._instanceInfo;for(t.sort(oI);t[t.length-1]===r.length-1;)r.pop(),t.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),a=new Int32Array(e);vp(this._multiDrawCounts,i),vp(this._multiDrawStarts,a),this._multiDrawCounts=i,this._multiDrawStarts=a,this._maxInstanceCount=e;const s=this._indirectTexture,o=this._matricesTexture,l=this._colorsTexture;s.dispose(),this._initIndirectTexture(),vp(s.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),vp(o.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),vp(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const r=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...r.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new In,this._initializeGeometry(a));const s=this.geometry;a.index&&vp(a.index.array,s.index.array);for(const o in a.attributes)vp(a.attributes[o].array,s.attributes[o].array)}raycast(e,t){const r=this._instanceInfo,i=this._geometryInfo,a=this.matrixWorld,s=this.geometry;ds.material=this.material,ds.geometry.index=s.index,ds.geometry.attributes=s.attributes,ds.geometry.boundingBox===null&&(ds.geometry.boundingBox=new Es),ds.geometry.boundingSphere===null&&(ds.geometry.boundingSphere=new Wa);for(let o=0,l=r.length;o<l;o++){if(!r[o].visible||!r[o].active)continue;const u=r[o].geometryIndex,c=i[u];ds.geometry.setDrawRange(c.start,c.count),this.getMatrixAt(o,ds.matrixWorld).premultiply(a),this.getBoundingBoxAt(u,ds.geometry.boundingBox),this.getBoundingSphereAt(u,ds.geometry.boundingSphere),ds.raycast(e,i2);for(let d=0,f=i2.length;d<f;d++){const m=i2[d];m.object=this,m.batchId=o,t.push(m)}i2.length=0}ds.material=null,ds.geometry.index=null,ds.geometry.attributes={},ds.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,r,i,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=i.getIndex(),o=s===null?1:s.array.BYTES_PER_ELEMENT,l=this._instanceInfo,u=this._multiDrawStarts,c=this._multiDrawCounts,d=this._geometryInfo,f=this.perObjectFrustumCulled,m=this._indirectTexture,v=m.image.data,_=r.isArrayCamera?dMe:DU;f&&!r.isArrayCamera&&(fo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),DU.setFromProjectionMatrix(fo,r.coordinateSystem,r.reversedDepth));let w=0;if(this.sortObjects){fo.copy(this.matrixWorld).invert(),ax.setFromMatrixPosition(r.matrixWorld).applyMatrix4(fo),LU.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(fo);for(let E=0,T=l.length;E<T;E++)if(l[E].visible&&l[E].active){const D=l[E].geometryIndex;this.getMatrixAt(E,fo),this.getBoundingSphereAt(D,gp).applyMatrix4(fo);let F=!1;if(f&&(F=!_.intersectsSphere(gp,r)),!F){const P=d[D],N=hMe.subVectors(gp.center,ax).dot(LU);lI.push(P.start,P.count,N,E)}}const x=lI.list,S=this.customSort;S===null?x.sort(a.transparent?lMe:oMe):S.call(this,x,r);for(let E=0,T=x.length;E<T;E++){const D=x[E];u[w]=D.start*o,c[w]=D.count,v[w]=D.index,w++}lI.reset()}else for(let x=0,S=l.length;x<S;x++)if(l[x].visible&&l[x].active){const E=l[x].geometryIndex;let T=!1;if(f&&(this.getMatrixAt(x,fo),this.getBoundingSphereAt(E,gp).applyMatrix4(fo),T=!_.intersectsSphere(gp,r)),!T){const D=d[E];u[w]=D.start*o,c[w]=D.count,v[w]=x,w++}}m.needsUpdate=!0,this._multiDrawCount=w,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,a,s){this.onBeforeRender(e,null,i,a,s)}}class to extends ks{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Dt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const pA=new ie,mA=new ie,OU=new yn,sx=new ig,a2=new Wa,uI=new ie,FU=new ie;class Df extends lr{constructor(e=new In,t=new to){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,a=t.count;i<a;i++)pA.fromBufferAttribute(t,i-1),mA.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=pA.distanceTo(mA);e.setAttribute("lineDistance",new Gt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),a2.copy(r.boundingSphere),a2.applyMatrix4(i),a2.radius+=a,e.ray.intersectsSphere(a2)===!1)return;OU.copy(i).invert(),sx.copy(e.ray).applyMatrix4(OU);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=this.isLineSegments?2:1,c=r.index,f=r.attributes.position;if(c!==null){const m=Math.max(0,s.start),v=Math.min(c.count,s.start+s.count);for(let _=m,w=v-1;_<w;_+=u){const x=c.getX(_),S=c.getX(_+1),E=s2(this,e,sx,l,x,S,_);E&&t.push(E)}if(this.isLineLoop){const _=c.getX(v-1),w=c.getX(m),x=s2(this,e,sx,l,_,w,v-1);x&&t.push(x)}}else{const m=Math.max(0,s.start),v=Math.min(f.count,s.start+s.count);for(let _=m,w=v-1;_<w;_+=u){const x=s2(this,e,sx,l,_,_+1,_);x&&t.push(x)}if(this.isLineLoop){const _=s2(this,e,sx,l,v-1,m,v-1);_&&t.push(_)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function s2(n,e,t,r,i,a,s){const o=n.geometry.attributes.position;if(pA.fromBufferAttribute(o,i),mA.fromBufferAttribute(o,a),t.distanceSqToSegment(pA,mA,uI,FU)>r)return;uI.applyMatrix4(n.matrixWorld);const u=e.ray.origin.distanceTo(uI);if(!(u<e.near||u>e.far))return{distance:u,point:FU.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}const jU=new ie,BU=new ie;class Tc extends Df{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,a=t.count;i<a;i+=2)jU.fromBufferAttribute(t,i),BU.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+jU.distanceTo(BU);e.setAttribute("lineDistance",new Gt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class aee extends Df{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class XO extends ks{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Dt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const UU=new yn,TR=new ig,o2=new Wa,l2=new ie;class see extends lr{constructor(e=new In,t=new XO){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),o2.copy(r.boundingSphere),o2.applyMatrix4(i),o2.radius+=a,e.ray.intersectsSphere(o2)===!1)return;UU.copy(i).invert(),TR.copy(e.ray).applyMatrix4(UU);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=r.index,d=r.attributes.position;if(u!==null){const f=Math.max(0,s.start),m=Math.min(u.count,s.start+s.count);for(let v=f,_=m;v<_;v++){const w=u.getX(v);l2.fromBufferAttribute(d,w),VU(l2,w,l,i,e,t,this)}}else{const f=Math.max(0,s.start),m=Math.min(d.count,s.start+s.count);for(let v=f,_=m;v<_;v++)l2.fromBufferAttribute(d,v),VU(l2,v,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function VU(n,e,t,r,i,a,s){const o=TR.distanceSqToPoint(n);if(o<t){const l=new ie;TR.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;a.push({distance:u,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}class oee extends ui{constructor(e,t,r,i,a=ha,s=ha,o,l,u){super(e,t,r,i,a,s,o,l,u),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const c=this;function d(){c.needsUpdate=!0,c._requestVideoFrameCallbackId=e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(d))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class pMe extends oee{constructor(e,t,r,i,a,s,o,l){super({},e,t,r,i,a,s,o,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class mMe extends ui{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ga,this.minFilter=Ga,this.generateMipmaps=!1,this.needsUpdate=!0}}class vk extends ui{constructor(e,t,r,i,a,s,o,l,u,c,d,f){super(null,s,o,l,u,c,i,a,d,f),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class gMe extends vk{constructor(e,t,r,i,a,s){super(e,t,r,a,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=bl,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class vMe extends vk{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,Dd),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class yMe extends ui{constructor(e,t,r,i,a,s,o,l,u){super(e,t,r,i,a,s,o,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class KO extends ui{constructor(e,t,r=Ld,i,a,s,o=Ga,l=Ga,u,c=Bv,d=1){if(c!==Bv&&c!==Uv)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const f={width:e,height:t,depth:d};super(f,i,a,s,o,l,c,r,u),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new ef(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class yk extends In{constructor(e=1,t=1,r=4,i=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i,heightSegments:a},t=Math.max(0,t),r=Math.max(1,Math.floor(r)),i=Math.max(3,Math.floor(i)),a=Math.max(1,Math.floor(a));const s=[],o=[],l=[],u=[],c=t/2,d=Math.PI/2*e,f=t,m=2*d+f,v=r*2+a,_=i+1,w=new ie,x=new ie;for(let S=0;S<=v;S++){let E=0,T=0,D=0,F=0;if(S<=r){const I=S/r,R=I*Math.PI/2;T=-c-e*Math.cos(R),D=e*Math.sin(R),F=-e*Math.cos(R),E=I*d}else if(S<=r+a){const I=(S-r)/a;T=-c+I*t,D=e,F=0,E=d+I*f}else{const I=(S-r-a)/r,R=I*Math.PI/2;T=c+e*Math.sin(R),D=e*Math.cos(R),F=e*Math.sin(R),E=d+f+I*d}const P=Math.max(0,Math.min(1,E/m));let N=0;S===0?N=.5/i:S===v&&(N=-.5/i);for(let I=0;I<=i;I++){const R=I/i,B=R*Math.PI*2,G=Math.sin(B),H=Math.cos(B);x.x=-D*H,x.y=T,x.z=D*G,o.push(x.x,x.y,x.z),w.set(-D*H,F,D*G),w.normalize(),l.push(w.x,w.y,w.z),u.push(R+N,P)}if(S>0){const I=(S-1)*_;for(let R=0;R<i;R++){const B=I+R,G=I+R+1,H=S*_+R,K=S*_+R+1;s.push(B,G,H),s.push(G,K,H)}}}this.setIndex(s),this.setAttribute("position",new Gt(o,3)),this.setAttribute("normal",new Gt(l,3)),this.setAttribute("uv",new Gt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yk(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class xk extends In{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const a=[],s=[],o=[],l=[],u=new ie,c=new rt;s.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let d=0,f=3;d<=t;d++,f+=3){const m=r+d/t*i;u.x=e*Math.cos(m),u.y=e*Math.sin(m),s.push(u.x,u.y,u.z),o.push(0,0,1),c.x=(s[f]/e+1)/2,c.y=(s[f+1]/e+1)/2,l.push(c.x,c.y)}for(let d=1;d<=t;d++)a.push(d,d+1,0);this.setIndex(a),this.setAttribute("position",new Gt(s,3)),this.setAttribute("normal",new Gt(o,3)),this.setAttribute("uv",new Gt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xk(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ow extends In{constructor(e=1,t=1,r=1,i=32,a=1,s=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:l};const u=this;i=Math.floor(i),a=Math.floor(a);const c=[],d=[],f=[],m=[];let v=0;const _=[],w=r/2;let x=0;S(),s===!1&&(e>0&&E(!0),t>0&&E(!1)),this.setIndex(c),this.setAttribute("position",new Gt(d,3)),this.setAttribute("normal",new Gt(f,3)),this.setAttribute("uv",new Gt(m,2));function S(){const T=new ie,D=new ie;let F=0;const P=(t-e)/r;for(let N=0;N<=a;N++){const I=[],R=N/a,B=R*(t-e)+e;for(let G=0;G<=i;G++){const H=G/i,K=H*l+o,ne=Math.sin(K),re=Math.cos(K);D.x=B*ne,D.y=-R*r+w,D.z=B*re,d.push(D.x,D.y,D.z),T.set(ne,P,re).normalize(),f.push(T.x,T.y,T.z),m.push(H,1-R),I.push(v++)}_.push(I)}for(let N=0;N<i;N++)for(let I=0;I<a;I++){const R=_[I][N],B=_[I+1][N],G=_[I+1][N+1],H=_[I][N+1];(e>0||I!==0)&&(c.push(R,B,H),F+=3),(t>0||I!==a-1)&&(c.push(B,G,H),F+=3)}u.addGroup(x,F,0),x+=F}function E(T){const D=v,F=new rt,P=new ie;let N=0;const I=T===!0?e:t,R=T===!0?1:-1;for(let G=1;G<=i;G++)d.push(0,w*R,0),f.push(0,R,0),m.push(.5,.5),v++;const B=v;for(let G=0;G<=i;G++){const K=G/i*l+o,ne=Math.cos(K),re=Math.sin(K);P.x=I*re,P.y=w*R,P.z=I*ne,d.push(P.x,P.y,P.z),f.push(0,R,0),F.x=ne*.5+.5,F.y=re*.5*R+.5,m.push(F.x,F.y),v++}for(let G=0;G<i;G++){const H=D+G,K=B+G;T===!0?c.push(K,K+1,H):c.push(K+1,K,H),N+=3}u.addGroup(x,N,T===!0?1:2),x+=N}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ow(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class lw extends ow{constructor(e=1,t=1,r=32,i=1,a=!1,s=0,o=Math.PI*2){super(0,e,t,r,i,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new lw(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class $f extends In{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const a=[],s=[];o(i),u(r),c(),this.setAttribute("position",new Gt(a,3)),this.setAttribute("normal",new Gt(a.slice(),3)),this.setAttribute("uv",new Gt(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(S){const E=new ie,T=new ie,D=new ie;for(let F=0;F<t.length;F+=3)m(t[F+0],E),m(t[F+1],T),m(t[F+2],D),l(E,T,D,S)}function l(S,E,T,D){const F=D+1,P=[];for(let N=0;N<=F;N++){P[N]=[];const I=S.clone().lerp(T,N/F),R=E.clone().lerp(T,N/F),B=F-N;for(let G=0;G<=B;G++)G===0&&N===F?P[N][G]=I:P[N][G]=I.clone().lerp(R,G/B)}for(let N=0;N<F;N++)for(let I=0;I<2*(F-N)-1;I++){const R=Math.floor(I/2);I%2===0?(f(P[N][R+1]),f(P[N+1][R]),f(P[N][R])):(f(P[N][R+1]),f(P[N+1][R+1]),f(P[N+1][R]))}}function u(S){const E=new ie;for(let T=0;T<a.length;T+=3)E.x=a[T+0],E.y=a[T+1],E.z=a[T+2],E.normalize().multiplyScalar(S),a[T+0]=E.x,a[T+1]=E.y,a[T+2]=E.z}function c(){const S=new ie;for(let E=0;E<a.length;E+=3){S.x=a[E+0],S.y=a[E+1],S.z=a[E+2];const T=w(S)/2/Math.PI+.5,D=x(S)/Math.PI+.5;s.push(T,1-D)}v(),d()}function d(){for(let S=0;S<s.length;S+=6){const E=s[S+0],T=s[S+2],D=s[S+4],F=Math.max(E,T,D),P=Math.min(E,T,D);F>.9&&P<.1&&(E<.2&&(s[S+0]+=1),T<.2&&(s[S+2]+=1),D<.2&&(s[S+4]+=1))}}function f(S){a.push(S.x,S.y,S.z)}function m(S,E){const T=S*3;E.x=e[T+0],E.y=e[T+1],E.z=e[T+2]}function v(){const S=new ie,E=new ie,T=new ie,D=new ie,F=new rt,P=new rt,N=new rt;for(let I=0,R=0;I<a.length;I+=9,R+=6){S.set(a[I+0],a[I+1],a[I+2]),E.set(a[I+3],a[I+4],a[I+5]),T.set(a[I+6],a[I+7],a[I+8]),F.set(s[R+0],s[R+1]),P.set(s[R+2],s[R+3]),N.set(s[R+4],s[R+5]),D.copy(S).add(E).add(T).divideScalar(3);const B=w(D);_(F,R+0,S,B),_(P,R+2,E,B),_(N,R+4,T,B)}}function _(S,E,T,D){D<0&&S.x===1&&(s[E]=S.x-1),T.x===0&&T.z===0&&(s[E]=D/2/Math.PI+.5)}function w(S){return Math.atan2(S.z,-S.x)}function x(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $f(e.vertices,e.indices,e.radius,e.details)}}class _k extends $f{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new _k(e.radius,e.detail)}}const u2=new ie,c2=new ie,cI=new ie,d2=new wo;class lee extends In{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),a=Math.cos(mm*t),s=e.getIndex(),o=e.getAttribute("position"),l=s?s.count:o.count,u=[0,0,0],c=["a","b","c"],d=new Array(3),f={},m=[];for(let v=0;v<l;v+=3){s?(u[0]=s.getX(v),u[1]=s.getX(v+1),u[2]=s.getX(v+2)):(u[0]=v,u[1]=v+1,u[2]=v+2);const{a:_,b:w,c:x}=d2;if(_.fromBufferAttribute(o,u[0]),w.fromBufferAttribute(o,u[1]),x.fromBufferAttribute(o,u[2]),d2.getNormal(cI),d[0]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,d[1]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,d[2]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let S=0;S<3;S++){const E=(S+1)%3,T=d[S],D=d[E],F=d2[c[S]],P=d2[c[E]],N=`${T}_${D}`,I=`${D}_${T}`;I in f&&f[I]?(cI.dot(f[I].normal)<=a&&(m.push(F.x,F.y,F.z),m.push(P.x,P.y,P.z)),f[I]=null):N in f||(f[N]={index0:u[S],index1:u[E],normal:cI.clone()})}}for(const v in f)if(f[v]){const{index0:_,index1:w}=f[v];u2.fromBufferAttribute(o,_),c2.fromBufferAttribute(o,w),m.push(u2.x,u2.y,u2.z),m.push(c2.x,c2.y,c2.z)}this.setAttribute("position",new Gt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Tu{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),a=0;t.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),a+=r.distanceTo(i),t.push(a),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const r=this.getLengths();let i=0;const a=r.length;let s;t?s=t:s=e*r[a-1];let o=0,l=a-1,u;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),u=r[i]-s,u<0)o=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===s)return i/(a-1);const c=r[i],f=r[i+1]-c,m=(s-c)/f;return(i+m)/(a-1)}getTangent(e,t){let i=e-1e-4,a=e+1e-4;i<0&&(i=0),a>1&&(a=1);const s=this.getPoint(i),o=this.getPoint(a),l=t||(s.isVector2?new rt:new ie);return l.copy(o).sub(s).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t=!1){const r=new ie,i=[],a=[],s=[],o=new ie,l=new yn;for(let m=0;m<=e;m++){const v=m/e;i[m]=this.getTangentAt(v,new ie)}a[0]=new ie,s[0]=new ie;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),d=Math.abs(i[0].y),f=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),d<=u&&(u=d,r.set(0,1,0)),f<=u&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),a[0].crossVectors(i[0],o),s[0].crossVectors(i[0],a[0]);for(let m=1;m<=e;m++){if(a[m]=a[m-1].clone(),s[m]=s[m-1].clone(),o.crossVectors(i[m-1],i[m]),o.length()>Number.EPSILON){o.normalize();const v=Math.acos(pn(i[m-1].dot(i[m]),-1,1));a[m].applyMatrix4(l.makeRotationAxis(o,v))}s[m].crossVectors(i[m],a[m])}if(t===!0){let m=Math.acos(pn(a[0].dot(a[e]),-1,1));m/=e,i[0].dot(o.crossVectors(a[0],a[e]))>0&&(m=-m);for(let v=1;v<=e;v++)a[v].applyMatrix4(l.makeRotationAxis(i[v],m*v)),s[v].crossVectors(i[v],a[v])}return{tangents:i,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class wk extends Tu{constructor(e=0,t=0,r=1,i=1,a=0,s=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=l}getPoint(e,t=new rt){const r=t,i=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(s?a=0:a=i),this.aClockwise===!0&&!s&&(a===i?a=-i:a=a-i);const o=this.aStartAngle+e*a;let l=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),f=l-this.aX,m=u-this.aY;l=f*c-m*d+this.aX,u=f*d+m*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class uee extends wk{constructor(e,t,r,i,a,s){super(e,t,r,r,i,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function YO(){let n=0,e=0,t=0,r=0;function i(a,s,o,l){n=a,e=o,t=-3*a+3*s-2*o-l,r=2*a-2*s+o+l}return{initCatmullRom:function(a,s,o,l,u){i(s,o,u*(o-a),u*(l-s))},initNonuniformCatmullRom:function(a,s,o,l,u,c,d){let f=(s-a)/u-(o-a)/(u+c)+(o-s)/c,m=(o-s)/c-(l-s)/(c+d)+(l-o)/d;f*=c,m*=c,i(s,o,f,m)},calc:function(a){const s=a*a,o=s*a;return n+e*a+t*s+r*o}}}const h2=new ie,dI=new YO,hI=new YO,fI=new YO;class cee extends Tu{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new ie){const r=t,i=this.points,a=i.length,s=(a-(this.closed?0:1))*e;let o=Math.floor(s),l=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:l===0&&o===a-1&&(o=a-2,l=1);let u,c;this.closed||o>0?u=i[(o-1)%a]:(h2.subVectors(i[0],i[1]).add(i[0]),u=h2);const d=i[o%a],f=i[(o+1)%a];if(this.closed||o+2<a?c=i[(o+2)%a]:(h2.subVectors(i[a-1],i[a-2]).add(i[a-1]),c=h2),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(u.distanceToSquared(d),m),_=Math.pow(d.distanceToSquared(f),m),w=Math.pow(f.distanceToSquared(c),m);_<1e-4&&(_=1),v<1e-4&&(v=_),w<1e-4&&(w=_),dI.initNonuniformCatmullRom(u.x,d.x,f.x,c.x,v,_,w),hI.initNonuniformCatmullRom(u.y,d.y,f.y,c.y,v,_,w),fI.initNonuniformCatmullRom(u.z,d.z,f.z,c.z,v,_,w)}else this.curveType==="catmullrom"&&(dI.initCatmullRom(u.x,d.x,f.x,c.x,this.tension),hI.initCatmullRom(u.y,d.y,f.y,c.y,this.tension),fI.initCatmullRom(u.z,d.z,f.z,c.z,this.tension));return r.set(dI.calc(l),hI.calc(l),fI.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new ie().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function zU(n,e,t,r,i){const a=(r-e)*.5,s=(i-t)*.5,o=n*n,l=n*o;return(2*t-2*r+a+s)*l+(-3*t+3*r-2*a-s)*o+a*n+t}function xMe(n,e){const t=1-n;return t*t*e}function _Me(n,e){return 2*(1-n)*n*e}function wMe(n,e){return n*n*e}function f1(n,e,t,r){return xMe(n,e)+_Me(n,t)+wMe(n,r)}function bMe(n,e){const t=1-n;return t*t*t*e}function SMe(n,e){const t=1-n;return 3*t*t*n*e}function EMe(n,e){return 3*(1-n)*n*n*e}function AMe(n,e){return n*n*n*e}function p1(n,e,t,r,i){return bMe(n,e)+SMe(n,t)+EMe(n,r)+AMe(n,i)}class ZO extends Tu{constructor(e=new rt,t=new rt,r=new rt,i=new rt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new rt){const r=t,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(p1(e,i.x,a.x,s.x,o.x),p1(e,i.y,a.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class dee extends Tu{constructor(e=new ie,t=new ie,r=new ie,i=new ie){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new ie){const r=t,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(p1(e,i.x,a.x,s.x,o.x),p1(e,i.y,a.y,s.y,o.y),p1(e,i.z,a.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class QO extends Tu{constructor(e=new rt,t=new rt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new rt){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new rt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hee extends Tu{constructor(e=new ie,t=new ie){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ie){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ie){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class JO extends Tu{constructor(e=new rt,t=new rt,r=new rt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new rt){const r=t,i=this.v0,a=this.v1,s=this.v2;return r.set(f1(e,i.x,a.x,s.x),f1(e,i.y,a.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class e4 extends Tu{constructor(e=new ie,t=new ie,r=new ie){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ie){const r=t,i=this.v0,a=this.v1,s=this.v2;return r.set(f1(e,i.x,a.x,s.x),f1(e,i.y,a.y,s.y),f1(e,i.z,a.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class t4 extends Tu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new rt){const r=t,i=this.points,a=(i.length-1)*e,s=Math.floor(a),o=a-s,l=i[s===0?s:s-1],u=i[s],c=i[s>i.length-2?i.length-1:s+1],d=i[s>i.length-3?i.length-1:s+2];return r.set(zU(o,l.x,u.x,c.x,d.x),zU(o,l.y,u.y,c.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new rt().fromArray(i))}return this}}var gA=Object.freeze({__proto__:null,ArcCurve:uee,CatmullRomCurve3:cee,CubicBezierCurve:ZO,CubicBezierCurve3:dee,EllipseCurve:wk,LineCurve:QO,LineCurve3:hee,QuadraticBezierCurve:JO,QuadraticBezierCurve3:e4,SplineCurve:t4});class fee extends Tu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new gA[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let a=0;for(;a<i.length;){if(i[a]>=r){const s=i[a]-r,o=this.curves[a],l=o.getLength(),u=l===0?0:1-s/l;return o.getPointAt(u,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,a=this.curves;i<a.length;i++){const s=a[i],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(o);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(t.push(c),r=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new gA[i.type]().fromJSON(i))}return this}}class vA extends fee{constructor(e){super(),this.type="Path",this.currentPoint=new rt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new QO(this.currentPoint.clone(),new rt(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const a=new JO(this.currentPoint.clone(),new rt(e,t),new rt(r,i));return this.curves.push(a),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,a,s){const o=new ZO(this.currentPoint.clone(),new rt(e,t),new rt(r,i),new rt(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new t4(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,a,s){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,r,i,a,s),this}absarc(e,t,r,i,a,s){return this.absellipse(e,t,r,r,i,a,s),this}ellipse(e,t,r,i,a,s,o,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,r,i,a,s,o,l),this}absellipse(e,t,r,i,a,s,o,l){const u=new wk(e,t,r,i,a,s,o,l);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class vm extends vA{constructor(e){super(e),this.uuid=Xo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new vA().fromJSON(i))}return this}}function TMe(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let a=pee(n,0,i,t,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,u;if(r&&(a=PMe(n,e,a,t)),n.length>80*t){o=1/0,l=1/0;let c=-1/0,d=-1/0;for(let f=t;f<i;f+=t){const m=n[f],v=n[f+1];m<o&&(o=m),v<l&&(l=v),m>c&&(c=m),v>d&&(d=v)}u=Math.max(c-o,d-l),u=u!==0?32767/u:0}return f_(a,s,t,o,l,u,0),s}function pee(n,e,t,r,i){let a;if(i===zMe(n,e,t,r)>0)for(let s=e;s<t;s+=r)a=HU(s/r|0,n[s],n[s+1],a);else for(let s=t-r;s>=e;s-=r)a=HU(s/r|0,n[s],n[s+1],a);return a&&Wv(a,a.next)&&(m_(a),a=a.next),a}function zm(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(Wv(t,t.next)||yi(t.prev,t,t.next)===0)){if(m_(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function f_(n,e,t,r,i,a,s){if(!n)return;!s&&a&&OMe(n,r,i,a);let o=n;for(;n.prev!==n.next;){const l=n.prev,u=n.next;if(a?CMe(n,r,i,a):kMe(n)){e.push(l.i,n.i,u.i),m_(n),n=u.next,o=u.next;continue}if(n=u,n===o){s?s===1?(n=MMe(zm(n),e),f_(n,e,t,r,i,a,2)):s===2&&IMe(n,e,t,r,i,a):f_(zm(n),e,t,r,i,a,1);break}}}function kMe(n){const e=n.prev,t=n,r=n.next;if(yi(e,t,r)>=0)return!1;const i=e.x,a=t.x,s=r.x,o=e.y,l=t.y,u=r.y,c=Math.min(i,a,s),d=Math.min(o,l,u),f=Math.max(i,a,s),m=Math.max(o,l,u);let v=r.next;for(;v!==e;){if(v.x>=c&&v.x<=f&&v.y>=d&&v.y<=m&&Ix(i,o,a,l,s,u,v.x,v.y)&&yi(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function CMe(n,e,t,r){const i=n.prev,a=n,s=n.next;if(yi(i,a,s)>=0)return!1;const o=i.x,l=a.x,u=s.x,c=i.y,d=a.y,f=s.y,m=Math.min(o,l,u),v=Math.min(c,d,f),_=Math.max(o,l,u),w=Math.max(c,d,f),x=kR(m,v,e,t,r),S=kR(_,w,e,t,r);let E=n.prevZ,T=n.nextZ;for(;E&&E.z>=x&&T&&T.z<=S;){if(E.x>=m&&E.x<=_&&E.y>=v&&E.y<=w&&E!==i&&E!==s&&Ix(o,c,l,d,u,f,E.x,E.y)&&yi(E.prev,E,E.next)>=0||(E=E.prevZ,T.x>=m&&T.x<=_&&T.y>=v&&T.y<=w&&T!==i&&T!==s&&Ix(o,c,l,d,u,f,T.x,T.y)&&yi(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;E&&E.z>=x;){if(E.x>=m&&E.x<=_&&E.y>=v&&E.y<=w&&E!==i&&E!==s&&Ix(o,c,l,d,u,f,E.x,E.y)&&yi(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;T&&T.z<=S;){if(T.x>=m&&T.x<=_&&T.y>=v&&T.y<=w&&T!==i&&T!==s&&Ix(o,c,l,d,u,f,T.x,T.y)&&yi(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function MMe(n,e){let t=n;do{const r=t.prev,i=t.next.next;!Wv(r,i)&&gee(r,t,t.next,i)&&p_(r,i)&&p_(i,r)&&(e.push(r.i,t.i,i.i),m_(t),m_(t.next),t=n=i),t=t.next}while(t!==n);return zm(t)}function IMe(n,e,t,r,i,a){let s=n;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&BMe(s,o)){let l=vee(s,o);s=zm(s,s.next),l=zm(l,l.next),f_(s,e,t,r,i,a,0),f_(l,e,t,r,i,a,0);return}o=o.next}s=s.next}while(s!==n)}function PMe(n,e,t,r){const i=[];for(let a=0,s=e.length;a<s;a++){const o=e[a]*r,l=a<s-1?e[a+1]*r:n.length,u=pee(n,o,l,r,!1);u===u.next&&(u.steiner=!0),i.push(jMe(u))}i.sort(NMe);for(let a=0;a<i.length;a++)t=RMe(i[a],t);return t}function NMe(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const r=(n.next.y-n.y)/(n.next.x-n.x),i=(e.next.y-e.y)/(e.next.x-e.x);t=r-i}return t}function RMe(n,e){const t=DMe(n,e);if(!t)return e;const r=vee(t,n);return zm(r,r.next),zm(t,t.next)}function DMe(n,e){let t=e;const r=n.x,i=n.y;let a=-1/0,s;if(Wv(n,t))return t;do{if(Wv(n,t.next))return t.next;if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const d=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=r&&d>a&&(a=d,s=t.x<t.next.x?t:t.next,d===r))return s}t=t.next}while(t!==e);if(!s)return null;const o=s,l=s.x,u=s.y;let c=1/0;t=s;do{if(r>=t.x&&t.x>=l&&r!==t.x&&mee(i<u?r:a,i,l,u,i<u?a:r,i,t.x,t.y)){const d=Math.abs(i-t.y)/(r-t.x);p_(t,n)&&(d<c||d===c&&(t.x>s.x||t.x===s.x&&LMe(s,t)))&&(s=t,c=d)}t=t.next}while(t!==o);return s}function LMe(n,e){return yi(n.prev,n,e.prev)<0&&yi(e.next,n,n.next)<0}function OMe(n,e,t,r){let i=n;do i.z===0&&(i.z=kR(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,FMe(i)}function FMe(n){let e,t=1;do{let r=n,i;n=null;let a=null;for(e=0;r;){e++;let s=r,o=0;for(let u=0;u<t&&(o++,s=s.nextZ,!!s);u++);let l=t;for(;o>0||l>0&&s;)o!==0&&(l===0||!s||r.z<=s.z)?(i=r,r=r.nextZ,o--):(i=s,s=s.nextZ,l--),a?a.nextZ=i:n=i,i.prevZ=a,a=i;r=s}a.nextZ=null,t*=2}while(e>1);return n}function kR(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function jMe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function mee(n,e,t,r,i,a,s,o){return(i-s)*(e-o)>=(n-s)*(a-o)&&(n-s)*(r-o)>=(t-s)*(e-o)&&(t-s)*(a-o)>=(i-s)*(r-o)}function Ix(n,e,t,r,i,a,s,o){return!(n===s&&e===o)&&mee(n,e,t,r,i,a,s,o)}function BMe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!UMe(n,e)&&(p_(n,e)&&p_(e,n)&&VMe(n,e)&&(yi(n.prev,n,e.prev)||yi(n,e.prev,e))||Wv(n,e)&&yi(n.prev,n,n.next)>0&&yi(e.prev,e,e.next)>0)}function yi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Wv(n,e){return n.x===e.x&&n.y===e.y}function gee(n,e,t,r){const i=p2(yi(n,e,t)),a=p2(yi(n,e,r)),s=p2(yi(t,r,n)),o=p2(yi(t,r,e));return!!(i!==a&&s!==o||i===0&&f2(n,t,e)||a===0&&f2(n,r,e)||s===0&&f2(t,n,r)||o===0&&f2(t,e,r))}function f2(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function p2(n){return n>0?1:n<0?-1:0}function UMe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&gee(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function p_(n,e){return yi(n.prev,n,n.next)<0?yi(n,e,n.next)>=0&&yi(n,n.prev,e)>=0:yi(n,e,n.prev)<0||yi(n,n.next,e)<0}function VMe(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&i<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function vee(n,e){const t=CR(n.i,n.x,n.y),r=CR(e.i,e.x,e.y),i=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,a.next=r,r.prev=a,r}function HU(n,e,t,r){const i=CR(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function m_(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function CR(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function zMe(n,e,t,r){let i=0;for(let a=e,s=t-r;a<t;a+=r)i+=(n[s]-n[a])*(n[a+1]+n[s+1]),s=a;return i}class HMe{static triangulate(e,t,r=2){return TMe(e,t,r)}}class uu{static area(e){const t=e.length;let r=0;for(let i=t-1,a=0;a<t;i=a++)r+=e[i].x*e[a].y-e[a].x*e[i].y;return r*.5}static isClockWise(e){return uu.area(e)<0}static triangulateShape(e,t){const r=[],i=[],a=[];GU(e),WU(r,e);let s=e.length;t.forEach(GU);for(let l=0;l<t.length;l++)i.push(s),s+=t[l].length,WU(r,t[l]);const o=HMe.triangulate(r,i);for(let l=0;l<o.length;l+=3)a.push(o.slice(l,l+3));return a}}function GU(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function WU(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class bk extends In{constructor(e=new vm([new rt(.5,.5),new rt(-.5,.5),new rt(-.5,-.5),new rt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],a=[];for(let o=0,l=e.length;o<l;o++){const u=e[o];s(u)}this.setAttribute("position",new Gt(i,3)),this.setAttribute("uv",new Gt(a,2)),this.computeVertexNormals();function s(o){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,_=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:GMe;let E,T=!1,D,F,P,N;x&&(E=x.getSpacedPoints(c),T=!0,f=!1,D=x.computeFrenetFrames(c,!1),F=new ie,P=new ie,N=new ie),f||(w=0,m=0,v=0,_=0);const I=o.extractPoints(u);let R=I.shape;const B=I.holes;if(!uu.isClockWise(R)){R=R.reverse();for(let Ee=0,Pe=B.length;Ee<Pe;Ee++){const Ke=B[Ee];uu.isClockWise(Ke)&&(B[Ee]=Ke.reverse())}}function H(Ee){const Ke=10000000000000001e-36;let je=Ee[0];for(let st=1;st<=Ee.length;st++){const tt=st%Ee.length,ee=Ee[tt],qe=ee.x-je.x,Ye=ee.y-je.y,Z=qe*qe+Ye*Ye,X=Math.max(Math.abs(ee.x),Math.abs(ee.y),Math.abs(je.x),Math.abs(je.y)),ve=Ke*X*X;if(Z<=ve){Ee.splice(tt,1),st--;continue}je=ee}}H(R),B.forEach(H);const K=B.length,ne=R;for(let Ee=0;Ee<K;Ee++){const Pe=B[Ee];R=R.concat(Pe)}function re(Ee,Pe,Ke){return Pe||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ee.clone().addScaledVector(Pe,Ke)}const oe=R.length;function $(Ee,Pe,Ke){let je,st,tt;const ee=Ee.x-Pe.x,qe=Ee.y-Pe.y,Ye=Ke.x-Ee.x,Z=Ke.y-Ee.y,X=ee*ee+qe*qe,ve=ee*Z-qe*Ye;if(Math.abs(ve)>Number.EPSILON){const Ie=Math.sqrt(X),He=Math.sqrt(Ye*Ye+Z*Z),we=Pe.x-qe/Ie,pt=Pe.y+ee/Ie,lt=Ke.x-Z/He,St=Ke.y+Ye/He,bt=((lt-we)*Z-(St-pt)*Ye)/(ee*Z-qe*Ye);je=we+ee*bt-Ee.x,st=pt+qe*bt-Ee.y;const ut=je*je+st*st;if(ut<=2)return new rt(je,st);tt=Math.sqrt(ut/2)}else{let Ie=!1;ee>Number.EPSILON?Ye>Number.EPSILON&&(Ie=!0):ee<-Number.EPSILON?Ye<-Number.EPSILON&&(Ie=!0):Math.sign(qe)===Math.sign(Z)&&(Ie=!0),Ie?(je=-qe,st=ee,tt=Math.sqrt(X)):(je=ee,st=qe,tt=Math.sqrt(X/2))}return new rt(je/tt,st/tt)}const ue=[];for(let Ee=0,Pe=ne.length,Ke=Pe-1,je=Ee+1;Ee<Pe;Ee++,Ke++,je++)Ke===Pe&&(Ke=0),je===Pe&&(je=0),ue[Ee]=$(ne[Ee],ne[Ke],ne[je]);const se=[];let pe,Fe=ue.concat();for(let Ee=0,Pe=K;Ee<Pe;Ee++){const Ke=B[Ee];pe=[];for(let je=0,st=Ke.length,tt=st-1,ee=je+1;je<st;je++,tt++,ee++)tt===st&&(tt=0),ee===st&&(ee=0),pe[je]=$(Ke[je],Ke[tt],Ke[ee]);se.push(pe),Fe=Fe.concat(pe)}let $e;if(w===0)$e=uu.triangulateShape(ne,B);else{const Ee=[],Pe=[];for(let Ke=0;Ke<w;Ke++){const je=Ke/w,st=m*Math.cos(je*Math.PI/2),tt=v*Math.sin(je*Math.PI/2)+_;for(let ee=0,qe=ne.length;ee<qe;ee++){const Ye=re(ne[ee],ue[ee],tt);Ge(Ye.x,Ye.y,-st),je===0&&Ee.push(Ye)}for(let ee=0,qe=K;ee<qe;ee++){const Ye=B[ee];pe=se[ee];const Z=[];for(let X=0,ve=Ye.length;X<ve;X++){const Ie=re(Ye[X],pe[X],tt);Ge(Ie.x,Ie.y,-st),je===0&&Z.push(Ie)}je===0&&Pe.push(Z)}}$e=uu.triangulateShape(Ee,Pe)}const at=$e.length,me=v+_;for(let Ee=0;Ee<oe;Ee++){const Pe=f?re(R[Ee],Fe[Ee],me):R[Ee];T?(P.copy(D.normals[0]).multiplyScalar(Pe.x),F.copy(D.binormals[0]).multiplyScalar(Pe.y),N.copy(E[0]).add(P).add(F),Ge(N.x,N.y,N.z)):Ge(Pe.x,Pe.y,0)}for(let Ee=1;Ee<=c;Ee++)for(let Pe=0;Pe<oe;Pe++){const Ke=f?re(R[Pe],Fe[Pe],me):R[Pe];T?(P.copy(D.normals[Ee]).multiplyScalar(Ke.x),F.copy(D.binormals[Ee]).multiplyScalar(Ke.y),N.copy(E[Ee]).add(P).add(F),Ge(N.x,N.y,N.z)):Ge(Ke.x,Ke.y,d/c*Ee)}for(let Ee=w-1;Ee>=0;Ee--){const Pe=Ee/w,Ke=m*Math.cos(Pe*Math.PI/2),je=v*Math.sin(Pe*Math.PI/2)+_;for(let st=0,tt=ne.length;st<tt;st++){const ee=re(ne[st],ue[st],je);Ge(ee.x,ee.y,d+Ke)}for(let st=0,tt=B.length;st<tt;st++){const ee=B[st];pe=se[st];for(let qe=0,Ye=ee.length;qe<Ye;qe++){const Z=re(ee[qe],pe[qe],je);T?Ge(Z.x,Z.y+E[c-1].y,E[c-1].x+Ke):Ge(Z.x,Z.y,d+Ke)}}}Le(),Se();function Le(){const Ee=i.length/3;if(f){let Pe=0,Ke=oe*Pe;for(let je=0;je<at;je++){const st=$e[je];Me(st[2]+Ke,st[1]+Ke,st[0]+Ke)}Pe=c+w*2,Ke=oe*Pe;for(let je=0;je<at;je++){const st=$e[je];Me(st[0]+Ke,st[1]+Ke,st[2]+Ke)}}else{for(let Pe=0;Pe<at;Pe++){const Ke=$e[Pe];Me(Ke[2],Ke[1],Ke[0])}for(let Pe=0;Pe<at;Pe++){const Ke=$e[Pe];Me(Ke[0]+oe*c,Ke[1]+oe*c,Ke[2]+oe*c)}}r.addGroup(Ee,i.length/3-Ee,0)}function Se(){const Ee=i.length/3;let Pe=0;ge(ne,Pe),Pe+=ne.length;for(let Ke=0,je=B.length;Ke<je;Ke++){const st=B[Ke];ge(st,Pe),Pe+=st.length}r.addGroup(Ee,i.length/3-Ee,1)}function ge(Ee,Pe){let Ke=Ee.length;for(;--Ke>=0;){const je=Ke;let st=Ke-1;st<0&&(st=Ee.length-1);for(let tt=0,ee=c+w*2;tt<ee;tt++){const qe=oe*tt,Ye=oe*(tt+1),Z=Pe+je+qe,X=Pe+st+qe,ve=Pe+st+Ye,Ie=Pe+je+Ye;Ce(Z,X,ve,Ie)}}}function Ge(Ee,Pe,Ke){l.push(Ee),l.push(Pe),l.push(Ke)}function Me(Ee,Pe,Ke){Te(Ee),Te(Pe),Te(Ke);const je=i.length/3,st=S.generateTopUV(r,i,je-3,je-2,je-1);te(st[0]),te(st[1]),te(st[2])}function Ce(Ee,Pe,Ke,je){Te(Ee),Te(Pe),Te(je),Te(Pe),Te(Ke),Te(je);const st=i.length/3,tt=S.generateSideWallUV(r,i,st-6,st-3,st-2,st-1);te(tt[0]),te(tt[1]),te(tt[3]),te(tt[1]),te(tt[2]),te(tt[3])}function Te(Ee){i.push(l[Ee*3+0]),i.push(l[Ee*3+1]),i.push(l[Ee*3+2])}function te(Ee){a.push(Ee.x),a.push(Ee.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return WMe(t,r,e)}static fromJSON(e,t){const r=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=t[e.shapes[a]];r.push(o)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new gA[i.type]().fromJSON(i)),new bk(r,e.options)}}const GMe={generateTopUV:function(n,e,t,r,i){const a=e[t*3],s=e[t*3+1],o=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new rt(a,s),new rt(o,l),new rt(u,c)]},generateSideWallUV:function(n,e,t,r,i,a){const s=e[t*3],o=e[t*3+1],l=e[t*3+2],u=e[r*3],c=e[r*3+1],d=e[r*3+2],f=e[i*3],m=e[i*3+1],v=e[i*3+2],_=e[a*3],w=e[a*3+1],x=e[a*3+2];return Math.abs(o-c)<Math.abs(s-u)?[new rt(s,1-l),new rt(u,1-d),new rt(f,1-v),new rt(_,1-x)]:[new rt(o,1-l),new rt(c,1-d),new rt(m,1-v),new rt(w,1-x)]}};function WMe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const a=n[r];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Sk extends $f{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Sk(e.radius,e.detail)}}class Ek extends In{constructor(e=[new rt(0,-.5),new rt(.5,0),new rt(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=pn(i,0,Math.PI*2);const a=[],s=[],o=[],l=[],u=[],c=1/t,d=new ie,f=new rt,m=new ie,v=new ie,_=new ie;let w=0,x=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:w=e[S+1].x-e[S].x,x=e[S+1].y-e[S].y,m.x=x*1,m.y=-w,m.z=x*0,_.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(_.x,_.y,_.z);break;default:w=e[S+1].x-e[S].x,x=e[S+1].y-e[S].y,m.x=x*1,m.y=-w,m.z=x*0,v.copy(m),m.x+=_.x,m.y+=_.y,m.z+=_.z,m.normalize(),l.push(m.x,m.y,m.z),_.copy(v)}for(let S=0;S<=t;S++){const E=r+S*c*i,T=Math.sin(E),D=Math.cos(E);for(let F=0;F<=e.length-1;F++){d.x=e[F].x*T,d.y=e[F].y,d.z=e[F].x*D,s.push(d.x,d.y,d.z),f.x=S/t,f.y=F/(e.length-1),o.push(f.x,f.y);const P=l[3*F+0]*T,N=l[3*F+1],I=l[3*F+0]*D;u.push(P,N,I)}}for(let S=0;S<t;S++)for(let E=0;E<e.length-1;E++){const T=E+S*e.length,D=T,F=T+e.length,P=T+e.length+1,N=T+1;a.push(D,F,N),a.push(P,N,F)}this.setIndex(a),this.setAttribute("position",new Gt(s,3)),this.setAttribute("uv",new Gt(o,2)),this.setAttribute("normal",new Gt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ek(e.points,e.segments,e.phiStart,e.phiLength)}}class uw extends $f{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new uw(e.radius,e.detail)}}class py extends In{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const a=e/2,s=t/2,o=Math.floor(r),l=Math.floor(i),u=o+1,c=l+1,d=e/o,f=t/l,m=[],v=[],_=[],w=[];for(let x=0;x<c;x++){const S=x*f-s;for(let E=0;E<u;E++){const T=E*d-a;v.push(T,-S,0),_.push(0,0,1),w.push(E/o),w.push(1-x/l)}}for(let x=0;x<l;x++)for(let S=0;S<o;S++){const E=S+u*x,T=S+u*(x+1),D=S+1+u*(x+1),F=S+1+u*x;m.push(E,T,F),m.push(T,D,F)}this.setIndex(m),this.setAttribute("position",new Gt(v,3)),this.setAttribute("normal",new Gt(_,3)),this.setAttribute("uv",new Gt(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new py(e.width,e.height,e.widthSegments,e.heightSegments)}}class Ak extends In{constructor(e=.5,t=1,r=32,i=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:a,thetaLength:s},r=Math.max(3,r),i=Math.max(1,i);const o=[],l=[],u=[],c=[];let d=e;const f=(t-e)/i,m=new ie,v=new rt;for(let _=0;_<=i;_++){for(let w=0;w<=r;w++){const x=a+w/r*s;m.x=d*Math.cos(x),m.y=d*Math.sin(x),l.push(m.x,m.y,m.z),u.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,c.push(v.x,v.y)}d+=f}for(let _=0;_<i;_++){const w=_*(r+1);for(let x=0;x<r;x++){const S=x+w,E=S,T=S+r+1,D=S+r+2,F=S+1;o.push(E,T,F),o.push(T,D,F)}}this.setIndex(o),this.setAttribute("position",new Gt(l,3)),this.setAttribute("normal",new Gt(u,3)),this.setAttribute("uv",new Gt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ak(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Tk extends In{constructor(e=new vm([new rt(0,.5),new rt(-.5,-.5),new rt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],a=[],s=[];let o=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(o,l,c),o+=l,l=0;this.setIndex(r),this.setAttribute("position",new Gt(i,3)),this.setAttribute("normal",new Gt(a,3)),this.setAttribute("uv",new Gt(s,2));function u(c){const d=i.length/3,f=c.extractPoints(t);let m=f.shape;const v=f.holes;uu.isClockWise(m)===!1&&(m=m.reverse());for(let w=0,x=v.length;w<x;w++){const S=v[w];uu.isClockWise(S)===!0&&(v[w]=S.reverse())}const _=uu.triangulateShape(m,v);for(let w=0,x=v.length;w<x;w++){const S=v[w];m=m.concat(S)}for(let w=0,x=m.length;w<x;w++){const S=m[w];i.push(S.x,S.y,0),a.push(0,0,1),s.push(S.x,S.y)}for(let w=0,x=_.length;w<x;w++){const S=_[w],E=S[0]+d,T=S[1]+d,D=S[2]+d;r.push(E,T,D),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return qMe(t,e)}static fromJSON(e,t){const r=[];for(let i=0,a=e.shapes.length;i<a;i++){const s=t[e.shapes[i]];r.push(s)}return new Tk(r,e.curveSegments)}}function qMe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class cw extends In{constructor(e=1,t=32,r=16,i=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:a,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(s+o,Math.PI);let u=0;const c=[],d=new ie,f=new ie,m=[],v=[],_=[],w=[];for(let x=0;x<=r;x++){const S=[],E=x/r;let T=0;x===0&&s===0?T=.5/t:x===r&&l===Math.PI&&(T=-.5/t);for(let D=0;D<=t;D++){const F=D/t;d.x=-e*Math.cos(i+F*a)*Math.sin(s+E*o),d.y=e*Math.cos(s+E*o),d.z=e*Math.sin(i+F*a)*Math.sin(s+E*o),v.push(d.x,d.y,d.z),f.copy(d).normalize(),_.push(f.x,f.y,f.z),w.push(F+T,1-E),S.push(u++)}c.push(S)}for(let x=0;x<r;x++)for(let S=0;S<t;S++){const E=c[x][S+1],T=c[x][S],D=c[x+1][S],F=c[x+1][S+1];(x!==0||s>0)&&m.push(E,T,F),(x!==r-1||l<Math.PI)&&m.push(T,D,F)}this.setIndex(m),this.setAttribute("position",new Gt(v,3)),this.setAttribute("normal",new Gt(_,3)),this.setAttribute("uv",new Gt(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cw(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class kk extends $f{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new kk(e.radius,e.detail)}}class Ck extends In{constructor(e=1,t=.4,r=12,i=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:a},r=Math.floor(r),i=Math.floor(i);const s=[],o=[],l=[],u=[],c=new ie,d=new ie,f=new ie;for(let m=0;m<=r;m++)for(let v=0;v<=i;v++){const _=v/i*a,w=m/r*Math.PI*2;d.x=(e+t*Math.cos(w))*Math.cos(_),d.y=(e+t*Math.cos(w))*Math.sin(_),d.z=t*Math.sin(w),o.push(d.x,d.y,d.z),c.x=e*Math.cos(_),c.y=e*Math.sin(_),f.subVectors(d,c).normalize(),l.push(f.x,f.y,f.z),u.push(v/i),u.push(m/r)}for(let m=1;m<=r;m++)for(let v=1;v<=i;v++){const _=(i+1)*m+v-1,w=(i+1)*(m-1)+v-1,x=(i+1)*(m-1)+v,S=(i+1)*m+v;s.push(_,w,S),s.push(w,x,S)}this.setIndex(s),this.setAttribute("position",new Gt(o,3)),this.setAttribute("normal",new Gt(l,3)),this.setAttribute("uv",new Gt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ck(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Mk extends In{constructor(e=1,t=.4,r=64,i=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:a,q:s},r=Math.floor(r),i=Math.floor(i);const o=[],l=[],u=[],c=[],d=new ie,f=new ie,m=new ie,v=new ie,_=new ie,w=new ie,x=new ie;for(let E=0;E<=r;++E){const T=E/r*a*Math.PI*2;S(T,a,s,e,m),S(T+.01,a,s,e,v),w.subVectors(v,m),x.addVectors(v,m),_.crossVectors(w,x),x.crossVectors(_,w),_.normalize(),x.normalize();for(let D=0;D<=i;++D){const F=D/i*Math.PI*2,P=-t*Math.cos(F),N=t*Math.sin(F);d.x=m.x+(P*x.x+N*_.x),d.y=m.y+(P*x.y+N*_.y),d.z=m.z+(P*x.z+N*_.z),l.push(d.x,d.y,d.z),f.subVectors(d,m).normalize(),u.push(f.x,f.y,f.z),c.push(E/r),c.push(D/i)}}for(let E=1;E<=r;E++)for(let T=1;T<=i;T++){const D=(i+1)*(E-1)+(T-1),F=(i+1)*E+(T-1),P=(i+1)*E+T,N=(i+1)*(E-1)+T;o.push(D,F,N),o.push(F,P,N)}this.setIndex(o),this.setAttribute("position",new Gt(l,3)),this.setAttribute("normal",new Gt(u,3)),this.setAttribute("uv",new Gt(c,2));function S(E,T,D,F,P){const N=Math.cos(E),I=Math.sin(E),R=D/T*E,B=Math.cos(R);P.x=F*(2+B)*.5*N,P.y=F*(2+B)*I*.5,P.z=F*Math.sin(R)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mk(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Ik extends In{constructor(e=new e4(new ie(-1,-1,0),new ie(-1,1,0),new ie(1,1,0)),t=64,r=1,i=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:a};const s=e.computeFrenetFrames(t,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new ie,l=new ie,u=new rt;let c=new ie;const d=[],f=[],m=[],v=[];_(),this.setIndex(v),this.setAttribute("position",new Gt(d,3)),this.setAttribute("normal",new Gt(f,3)),this.setAttribute("uv",new Gt(m,2));function _(){for(let E=0;E<t;E++)w(E);w(a===!1?t:0),S(),x()}function w(E){c=e.getPointAt(E/t,c);const T=s.normals[E],D=s.binormals[E];for(let F=0;F<=i;F++){const P=F/i*Math.PI*2,N=Math.sin(P),I=-Math.cos(P);l.x=I*T.x+N*D.x,l.y=I*T.y+N*D.y,l.z=I*T.z+N*D.z,l.normalize(),f.push(l.x,l.y,l.z),o.x=c.x+r*l.x,o.y=c.y+r*l.y,o.z=c.z+r*l.z,d.push(o.x,o.y,o.z)}}function x(){for(let E=1;E<=t;E++)for(let T=1;T<=i;T++){const D=(i+1)*(E-1)+(T-1),F=(i+1)*E+(T-1),P=(i+1)*E+T,N=(i+1)*(E-1)+T;v.push(D,F,N),v.push(F,P,N)}}function S(){for(let E=0;E<=t;E++)for(let T=0;T<=i;T++)u.x=E/t,u.y=T/i,m.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Ik(new gA[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class yee extends In{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new ie,a=new ie;if(e.index!==null){const s=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const d=l[u],f=d.start,m=d.count;for(let v=f,_=f+m;v<_;v+=3)for(let w=0;w<3;w++){const x=o.getX(v+w),S=o.getX(v+(w+1)%3);i.fromBufferAttribute(s,x),a.fromBufferAttribute(s,S),qU(i,a,r)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let o=0,l=s.count/3;o<l;o++)for(let u=0;u<3;u++){const c=3*o+u,d=3*o+(u+1)%3;i.fromBufferAttribute(s,c),a.fromBufferAttribute(s,d),qU(i,a,r)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new Gt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function qU(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var $U=Object.freeze({__proto__:null,BoxGeometry:ag,CapsuleGeometry:yk,CircleGeometry:xk,ConeGeometry:lw,CylinderGeometry:ow,DodecahedronGeometry:_k,EdgesGeometry:lee,ExtrudeGeometry:bk,IcosahedronGeometry:Sk,LatheGeometry:Ek,OctahedronGeometry:uw,PlaneGeometry:py,PolyhedronGeometry:$f,RingGeometry:Ak,ShapeGeometry:Tk,SphereGeometry:cw,TetrahedronGeometry:kk,TorusGeometry:Ck,TorusKnotGeometry:Mk,TubeGeometry:Ik,WireframeGeometry:yee});class xee extends ks{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Dt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class _ee extends Su{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class n4 extends ks{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Dt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wf,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qo,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class wee extends n4{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new rt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return pn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Dt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Dt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Dt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class bee extends ks{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Dt(16777215),this.specular=new Dt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wf,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qo,this.combine=rw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class See extends ks{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Dt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wf,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Eee extends ks{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wf,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Aee extends ks{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wf,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qo,this.combine=rw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class r4 extends ks{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=LJ,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class i4 extends ks{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Tee extends ks{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Dt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wf,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kee extends to{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Zp(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function Cee(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Mee(n){function e(i,a){return n[i]-n[a]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function MR(n,e,t){const r=n.length,i=new n.constructor(r);for(let a=0,s=0;s!==r;++a){const o=t[a]*e;for(let l=0;l!==e;++l)i[s++]=n[o+l]}return i}function a4(n,e,t,r){let i=1,a=n[0];for(;a!==void 0&&a[r]===void 0;)a=n[i++];if(a===void 0)return;let s=a[r];if(s!==void 0)if(Array.isArray(s))do s=a[r],s!==void 0&&(e.push(a.time),t.push(...s)),a=n[i++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[r],s!==void 0&&(e.push(a.time),s.toArray(t,t.length)),a=n[i++];while(a!==void 0);else do s=a[r],s!==void 0&&(e.push(a.time),t.push(s)),a=n[i++];while(a!==void 0)}function $Me(n,e,t,r,i=30){const a=n.clone();a.name=e;const s=[];for(let l=0;l<a.tracks.length;++l){const u=a.tracks[l],c=u.getValueSize(),d=[],f=[];for(let m=0;m<u.times.length;++m){const v=u.times[m]*i;if(!(v<t||v>=r)){d.push(u.times[m]);for(let _=0;_<c;++_)f.push(u.values[m*c+_])}}d.length!==0&&(u.times=Zp(d,u.times.constructor),u.values=Zp(f,u.values.constructor),s.push(u))}a.tracks=s;let o=1/0;for(let l=0;l<a.tracks.length;++l)o>a.tracks[l].times[0]&&(o=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*o);return a.resetDuration(),a}function XMe(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,a=e/r;for(let s=0;s<i;++s){const o=t.tracks[s],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(x){return x.name===o.name&&x.ValueTypeName===l});if(u===void 0)continue;let c=0;const d=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=d/3);let f=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=m/3);const v=o.times.length-1;let _;if(a<=o.times[0]){const x=c,S=d-c;_=o.values.slice(x,S)}else if(a>=o.times[v]){const x=v*d+c,S=x+d-c;_=o.values.slice(x,S)}else{const x=o.createInterpolant(),S=c,E=d-c;x.evaluate(a),_=x.resultBuffer.slice(S,E)}l==="quaternion"&&new Ss().fromArray(_).normalize().conjugate().toArray(_);const w=u.times.length;for(let x=0;x<w;++x){const S=x*m+f;if(l==="quaternion")Ss.multiplyQuaternionsFlat(u.values,S,_,0,u.values,S);else{const E=m-f*2;for(let T=0;T<E;++T)u.values[S+T]-=_[T]}}}return n.blendMode=BO,n}class KMe{static convertArray(e,t){return Zp(e,t)}static isTypedArray(e){return Cee(e)}static getKeyframeOrder(e){return Mee(e)}static sortedArray(e,t,r){return MR(e,t,r)}static flattenJSON(e,t,r,i){a4(e,t,r,i)}static subclip(e,t,r,i,a=30){return $Me(e,t,r,i,a)}static makeClipAdditive(e,t=0,r=e,i=30){return XMe(e,t,r,i)}}class dw{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],a=t[r-1];e:{t:{let s;n:{r:if(!(e<i)){for(let o=r+2;;){if(i===void 0){if(e<a)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===o)break;if(a=i,i=t[++r],e<i)break t}s=t.length;break n}if(!(e>=a)){const o=t[1];e<o&&(r=2,a=o);for(let l=r-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=a,a=t[--r-1],e>=a)break t}s=r,r=0;break n}break e}for(;r<s;){const o=r+s>>>1;e<t[o]?s=o:r=o+1}if(i=t[r],a=t[r-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,a,i)}return this.interpolate_(r,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i;for(let s=0;s!==i;++s)t[s]=r[a+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Iee extends dw{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Kp,endingEnd:Kp}}intervalChanged_(e,t,r){const i=this.parameterPositions;let a=e-2,s=e+1,o=i[a],l=i[s];if(o===void 0)switch(this.getSettings_().endingStart){case Yp:a=e,o=2*t-r;break;case u_:a=i.length-2,o=t+i[a]-i[a+1];break;default:a=e,o=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Yp:s=e,l=2*r-t;break;case u_:s=1,l=r+i[1]-i[0];break;default:s=e-1,l=t}const u=(r-t)*.5,c=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(l-r),this._offsetPrev=a*c,this._offsetNext=s*c}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,c=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,m=this._weightNext,v=(r-t)/(i-t),_=v*v,w=_*v,x=-f*w+2*f*_-f*v,S=(1+f)*w+(-1.5-2*f)*_+(-.5+f)*v+1,E=(-1-m)*w+(1.5+m)*_+.5*v,T=m*w-m*_;for(let D=0;D!==o;++D)a[D]=x*s[c+D]+S*s[u+D]+E*s[l+D]+T*s[d+D];return a}}class s4 extends dw{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,c=(r-t)/(i-t),d=1-c;for(let f=0;f!==o;++f)a[f]=s[u+f]*d+s[l+f]*c;return a}}class Pee extends dw{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Rl{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Zp(t,this.TimeBufferType),this.values=Zp(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Zp(e.times,Array),values:Zp(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new Pee(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new s4(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Iee(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case l_:t=this.InterpolantFactoryMethodDiscrete;break;case fA:t=this.InterpolantFactoryMethodLinear;break;case cS:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return l_;case this.InterpolantFactoryMethodLinear:return fA;case this.InterpolantFactoryMethodSmooth:return cS}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let a=0,s=i-1;for(;a!==i&&r[a]<e;)++a;for(;s!==-1&&r[s]>t;)--s;if(++s,a!==0||s!==i){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=r.slice(a,s),this.values=this.values.slice(a*o,s*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,a=r.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const l=r[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,s),e=!1;break}s=l}if(i!==void 0&&Cee(i))for(let o=0,l=i.length;o!==l;++o){const u=i[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===cS,a=e.length-1;let s=1;for(let o=1;o<a;++o){let l=!1;const u=e[o],c=e[o+1];if(u!==c&&(o!==1||u!==e[0]))if(i)l=!0;else{const d=o*r,f=d-r,m=d+r;for(let v=0;v!==r;++v){const _=t[d+v];if(_!==t[f+v]||_!==t[m+v]){l=!0;break}}}if(l){if(o!==s){e[s]=e[o];const d=o*r,f=s*r;for(let m=0;m!==r;++m)t[f+m]=t[d+m]}++s}}if(a>0){e[s]=e[a];for(let o=a*r,l=s*r,u=0;u!==r;++u)t[l+u]=t[o+u];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Rl.prototype.ValueTypeName="";Rl.prototype.TimeBufferType=Float32Array;Rl.prototype.ValueBufferType=Float32Array;Rl.prototype.DefaultInterpolation=fA;class sg extends Rl{constructor(e,t,r){super(e,t,r)}}sg.prototype.ValueTypeName="bool";sg.prototype.ValueBufferType=Array;sg.prototype.DefaultInterpolation=l_;sg.prototype.InterpolantFactoryMethodLinear=void 0;sg.prototype.InterpolantFactoryMethodSmooth=void 0;class o4 extends Rl{constructor(e,t,r,i){super(e,t,r,i)}}o4.prototype.ValueTypeName="color";class g_ extends Rl{constructor(e,t,r,i){super(e,t,r,i)}}g_.prototype.ValueTypeName="number";class Nee extends dw{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=(r-t)/(i-t);let u=e*o;for(let c=u+o;u!==c;u+=4)Ss.slerpFlat(a,0,s,u-o,s,u,l);return a}}class hw extends Rl{constructor(e,t,r,i){super(e,t,r,i)}InterpolantFactoryMethodLinear(e){return new Nee(this.times,this.values,this.getValueSize(),e)}}hw.prototype.ValueTypeName="quaternion";hw.prototype.InterpolantFactoryMethodSmooth=void 0;class og extends Rl{constructor(e,t,r){super(e,t,r)}}og.prototype.ValueTypeName="string";og.prototype.ValueBufferType=Array;og.prototype.DefaultInterpolation=l_;og.prototype.InterpolantFactoryMethodLinear=void 0;og.prototype.InterpolantFactoryMethodSmooth=void 0;class v_ extends Rl{constructor(e,t,r,i){super(e,t,r,i)}}v_.prototype.ValueTypeName="vector";class y_{constructor(e="",t=-1,r=[],i=uk){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Xo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,o=r.length;s!==o;++s)t.push(ZMe(r[s]).scale(i));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,s=r.length;a!==s;++a)t.push(Rl.toJSON(r[a]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const a=t.length,s=[];for(let o=0;o<a;o++){let l=[],u=[];l.push((o+a-1)%a,o,(o+1)%a),u.push(0,1,0);const c=Mee(l);l=MR(l,1,c),u=MR(u,1,c),!i&&l[0]===0&&(l.push(a),u.push(u[0])),s.push(new g_(".morphTargetInfluences["+t[o].name+"]",l,u).scale(1/r))}return new this(e,-1,s)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const u=e[o],c=u.name.match(a);if(c&&c.length>1){const d=c[1];let f=i[d];f||(i[d]=f=[]),f.push(u)}}const s=[];for(const o in i)s.push(this.CreateFromMorphTargetSequence(o,i[o],t,r));return s}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,f,m,v,_){if(m.length!==0){const w=[],x=[];a4(m,w,x,v),w.length!==0&&_.push(new d(f,w,x))}},i=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let d=0;d<u.length;d++){const f=u[d].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const m={};let v;for(v=0;v<f.length;v++)if(f[v].morphTargets)for(let _=0;_<f[v].morphTargets.length;_++)m[f[v].morphTargets[_]]=-1;for(const _ in m){const w=[],x=[];for(let S=0;S!==f[v].morphTargets.length;++S){const E=f[v];w.push(E.time),x.push(E.morphTarget===_?1:0)}i.push(new g_(".morphTargetInfluence["+_+"]",w,x))}l=m.length*s}else{const m=".bones["+t[d].name+"]";r(v_,m+".position",f,"pos",i),r(hw,m+".quaternion",f,"rot",i),r(v_,m+".scale",f,"scl",i)}}return i.length===0?null:new this(a,l,i,o)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const a=this.tracks[r];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function YMe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return g_;case"vector":case"vector2":case"vector3":case"vector4":return v_;case"color":return o4;case"quaternion":return hw;case"bool":case"boolean":return sg;case"string":return og}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function ZMe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=YMe(n.type);if(n.times===void 0){const t=[],r=[];a4(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const ic={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class l4{constructor(e,t,r){const i=this;let a=!1,s=0,o=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.abortController=new AbortController,this.itemStart=function(c){o++,a===!1&&i.onStart!==void 0&&i.onStart(c,s,o),a=!0},this.itemEnd=function(c){s++,i.onProgress!==void 0&&i.onProgress(c,s,o),s===o&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,d){return u.push(c,d),this},this.removeHandler=function(c){const d=u.indexOf(c);return d!==-1&&u.splice(d,2),this},this.getHandler=function(c){for(let d=0,f=u.length;d<f;d+=2){const m=u[d],v=u[d+1];if(m.global&&(m.lastIndex=0),m.test(c))return v}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const Ree=new l4;class Io{constructor(e){this.manager=e!==void 0?e:Ree,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,a){r.load(e,i,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Io.DEFAULT_MATERIAL_NAME="__DEFAULT";const Zc={};class QMe extends Error{constructor(e,t){super(e),this.response=t}}class Od extends Io{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=ic.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(Zc[e]!==void 0){Zc[e].push({onLoad:t,onProgress:r,onError:i});return}Zc[e]=[],Zc[e].push({onLoad:t,onProgress:r,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),o=this.mimeType,l=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=Zc[e],d=u.body.getReader(),f=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),m=f?parseInt(f):0,v=m!==0;let _=0;const w=new ReadableStream({start(x){S();function S(){d.read().then(({done:E,value:T})=>{if(E)x.close();else{_+=T.byteLength;const D=new ProgressEvent("progress",{lengthComputable:v,loaded:_,total:m});for(let F=0,P=c.length;F<P;F++){const N=c[F];N.onProgress&&N.onProgress(D)}x.enqueue(T),S()}},E=>{x.error(E)})}}});return new Response(w)}else throw new QMe(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,o));case"json":return u.json();default:if(o==="")return u.text();{const d=/charset="?([^;"\s]*)"?/i.exec(o),f=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(f);return u.arrayBuffer().then(v=>m.decode(v))}}}).then(u=>{ic.add(`file:${e}`,u);const c=Zc[e];delete Zc[e];for(let d=0,f=c.length;d<f;d++){const m=c[d];m.onLoad&&m.onLoad(u)}}).catch(u=>{const c=Zc[e];if(c===void 0)throw this.manager.itemError(e),u;delete Zc[e];for(let d=0,f=c.length;d<f;d++){const m=c[d];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class JMe extends Io{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new Od(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=y_.parse(e[r]);t.push(i)}return t}}class eIe extends Io{constructor(e){super(e)}load(e,t,r,i){const a=this,s=[],o=new vk,l=new Od(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(a.withCredentials);let u=0;function c(d){l.load(e[d],function(f){const m=a.parse(f,!0);s[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(o.minFilter=ha),o.image=s,o.format=m.format,o.needsUpdate=!0,t&&t(o))},r,i)}if(Array.isArray(e))for(let d=0,f=e.length;d<f;++d)c(d);else l.load(e,function(d){const f=a.parse(d,!0);if(f.isCubemap){const m=f.mipmaps.length/f.mipmapCount;for(let v=0;v<m;v++){s[v]={mipmaps:[]};for(let _=0;_<f.mipmapCount;_++)s[v].mipmaps.push(f.mipmaps[v*f.mipmapCount+_]),s[v].format=f.format,s[v].width=f.width,s[v].height=f.height}o.image=s}else o.image.width=f.width,o.image.height=f.height,o.mipmaps=f.mipmaps;f.mipmapCount===1&&(o.minFilter=ha),o.format=f.format,o.needsUpdate=!0,t&&t(o)},r,i);return o}}const $g=new WeakMap;class x_ extends Io{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=ic.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0);else{let d=$g.get(s);d===void 0&&(d=[],$g.set(s,d)),d.push({onLoad:t,onError:i})}return s}const o=h_("img");function l(){c(),t&&t(this);const d=$g.get(this)||[];for(let f=0;f<d.length;f++){const m=d[f];m.onLoad&&m.onLoad(this)}$g.delete(this),a.manager.itemEnd(e)}function u(d){c(),i&&i(d),ic.remove(`image:${e}`);const f=$g.get(this)||[];for(let m=0;m<f.length;m++){const v=f[m];v.onError&&v.onError(d)}$g.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function c(){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),ic.add(`image:${e}`,o),a.manager.itemStart(e),o.src=e,o}}class tIe extends Io{constructor(e){super(e)}load(e,t,r,i){const a=new sw;a.colorSpace=xo;const s=new x_(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function l(u){s.load(e[u],function(c){a.images[u]=c,o++,o===6&&(a.needsUpdate=!0,t&&t(a))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return a}}class nIe extends Io{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new mc,o=new Od(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,function(l){let u;try{u=a.parse(l)}catch(c){if(i!==void 0)i(c);else{console.error(c);return}}u.image!==void 0?s.image=u.image:u.data!==void 0&&(s.image.width=u.width,s.image.height=u.height,s.image.data=u.data),s.wrapS=u.wrapS!==void 0?u.wrapS:bl,s.wrapT=u.wrapT!==void 0?u.wrapT:bl,s.magFilter=u.magFilter!==void 0?u.magFilter:ha,s.minFilter=u.minFilter!==void 0?u.minFilter:ha,s.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(s.colorSpace=u.colorSpace),u.flipY!==void 0&&(s.flipY=u.flipY),u.format!==void 0&&(s.format=u.format),u.type!==void 0&&(s.type=u.type),u.mipmaps!==void 0&&(s.mipmaps=u.mipmaps,s.minFilter=rc),u.mipmapCount===1&&(s.minFilter=ha),u.generateMipmaps!==void 0&&(s.generateMipmaps=u.generateMipmaps),s.needsUpdate=!0,t&&t(s,u)},r,i),s}}class Pk extends Io{constructor(e){super(e)}load(e,t,r,i){const a=new ui,s=new x_(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o,a.needsUpdate=!0,t!==void 0&&t(a)},r,i),a}}class Xf extends lr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Dt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class Dee extends Xf{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(lr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Dt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const pI=new yn,XU=new ie,KU=new ie;class u4{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new rt(512,512),this.mapType=Nl,this.map=null,this.mapPass=null,this.matrix=new yn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new fy,this._frameExtents=new rt(1,1),this._viewportCount=1,this._viewports=[new sr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;XU.setFromMatrixPosition(e.matrixWorld),t.position.copy(XU),KU.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(KU),t.updateMatrixWorld(),pI.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(pI,t.coordinateSystem,t.reversedDepth),t.reversedDepth?r.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(pI)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class rIe extends u4{constructor(){super(new Bi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,r=zv*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||t.far;(r!==t.fov||i!==t.aspect||a!==t.far)&&(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Lee extends Xf{constructor(e,t,r=0,i=Math.PI/3,a=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(lr.DEFAULT_UP),this.updateMatrix(),this.target=new lr,this.distance=r,this.angle=i,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new rIe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const YU=new yn,ox=new ie,mI=new ie;class iIe extends u4{constructor(){super(new Bi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new rt(4,2),this._viewportCount=6,this._viewports=[new sr(2,1,1,1),new sr(0,1,1,1),new sr(3,1,1,1),new sr(1,1,1,1),new sr(3,0,1,1),new sr(1,0,1,1)],this._cubeDirections=[new ie(1,0,0),new ie(-1,0,0),new ie(0,0,1),new ie(0,0,-1),new ie(0,1,0),new ie(0,-1,0)],this._cubeUps=[new ie(0,1,0),new ie(0,1,0),new ie(0,1,0),new ie(0,1,0),new ie(0,0,1),new ie(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,a=e.distance||r.far;a!==r.far&&(r.far=a,r.updateProjectionMatrix()),ox.setFromMatrixPosition(e.matrixWorld),r.position.copy(ox),mI.copy(r.position),mI.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(mI),r.updateMatrixWorld(),i.makeTranslation(-ox.x,-ox.y,-ox.z),YU.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(YU,r.coordinateSystem,r.reversedDepth)}}class Oee extends Xf{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new iIe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class vf extends aw{constructor(e=-1,t=1,r=1,i=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=r-e,s=r+e,o=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,s=a+u*this.view.width,o-=c*this.view.offsetY,l=o-c*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class aIe extends u4{constructor(){super(new vf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Fee extends Xf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(lr.DEFAULT_UP),this.updateMatrix(),this.target=new lr,this.shadow=new aIe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class jee extends Xf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Bee extends Xf{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Uee{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ie)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*i),t.addScaledVector(s[2],.488603*a),t.addScaledVector(s[3],.488603*r),t.addScaledVector(s[4],1.092548*(r*i)),t.addScaledVector(s[5],1.092548*(i*a)),t.addScaledVector(s[6],.315392*(3*a*a-1)),t.addScaledVector(s[7],1.092548*(r*a)),t.addScaledVector(s[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*i),t.addScaledVector(s[2],2*.511664*a),t.addScaledVector(s[3],2*.511664*r),t.addScaledVector(s[4],2*.429043*r*i),t.addScaledVector(s[5],2*.429043*i*a),t.addScaledVector(s[6],.743125*a*a-.247708),t.addScaledVector(s[7],2*.429043*r*a),t.addScaledVector(s[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,a=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*a,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*r*a,t[8]=.546274*(r*r-i*i)}}class Vee extends Xf{constructor(e=new Uee,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Nk extends Io{constructor(e){super(e),this.textures={}}load(e,t,r,i){const a=this,s=new Od(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Dt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(i.uniforms[a]={},s.type){case"t":i.uniforms[a].value=r(s.value);break;case"c":i.uniforms[a].value=new Dt().setHex(s.value);break;case"v2":i.uniforms[a].value=new rt().fromArray(s.value);break;case"v3":i.uniforms[a].value=new ie().fromArray(s.value);break;case"v4":i.uniforms[a].value=new sr().fromArray(s.value);break;case"m3":i.uniforms[a].value=new Cn().fromArray(s.value);break;case"m4":i.uniforms[a].value=new yn().fromArray(s.value);break;default:i.uniforms[a].value=s.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)i.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),i.normalScale=new rt().fromArray(a)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new rt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Nk.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:xee,SpriteMaterial:qO,RawShaderMaterial:_ee,ShaderMaterial:Su,PointsMaterial:XO,MeshPhysicalMaterial:wee,MeshStandardMaterial:n4,MeshPhongMaterial:bee,MeshToonMaterial:See,MeshNormalMaterial:Eee,MeshLambertMaterial:Aee,MeshDepthMaterial:r4,MeshDistanceMaterial:i4,MeshBasicMaterial:qf,MeshMatcapMaterial:Tee,LineDashedMaterial:kee,LineBasicMaterial:to,Material:ks};return new t[e]}}class IR{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class zee extends In{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Hee extends Io{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new Od(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,v){if(t[v]!==void 0)return t[v];const w=m.interleavedBuffers[v],x=a(m,w.buffer),S=P0(w.type,x),E=new pk(S,w.stride);return E.uuid=w.uuid,t[v]=E,E}function a(m,v){if(r[v]!==void 0)return r[v];const w=m.arrayBuffers[v],x=new Uint32Array(w).buffer;return r[v]=x,x}const s=e.isInstancedBufferGeometry?new zee:new In,o=e.data.index;if(o!==void 0){const m=P0(o.type,o.array);s.setIndex(new Lr(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let _;if(v.isInterleavedBufferAttribute){const w=i(e.data,v.data);_=new Vm(w,v.itemSize,v.offset,v.normalized)}else{const w=P0(v.type,v.array),x=v.isInstancedBufferAttribute?Gv:Lr;_=new x(w,v.itemSize,v.normalized)}v.name!==void 0&&(_.name=v.name),v.usage!==void 0&&_.setUsage(v.usage),s.setAttribute(m,_)}const u=e.data.morphAttributes;if(u)for(const m in u){const v=u[m],_=[];for(let w=0,x=v.length;w<x;w++){const S=v[w];let E;if(S.isInterleavedBufferAttribute){const T=i(e.data,S.data);E=new Vm(T,S.itemSize,S.offset,S.normalized)}else{const T=P0(S.type,S.array);E=new Lr(T,S.itemSize,S.normalized)}S.name!==void 0&&(E.name=S.name),_.push(E)}s.morphAttributes[m]=_}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,v=d.length;m!==v;++m){const _=d[m];s.addGroup(_.start,_.count,_.materialIndex)}const f=e.data.boundingSphere;return f!==void 0&&(s.boundingSphere=new Wa().fromJSON(f)),e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class sIe extends Io{constructor(e){super(e)}load(e,t,r,i){const a=this,s=this.path===""?IR.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new Od(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?IR.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const a=new Od(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,t),o=JSON.parse(s),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(o)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,function(){t!==void 0&&t(u)}),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,a,l,o,r),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),this.bindLightTargets(u),t!==void 0){let d=!1;for(const f in s)if(s[f].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,i,o,s,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const a=new vm().fromJSON(e[r]);t[a.uuid]=a}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(a){a.isBone&&(i[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=new mk().fromJSON(e[a],i);r[o.uuid]=o}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new Hee;for(let a=0,s=e.length;a<s;a++){let o;const l=e[a];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(l);break;default:l.type in $U?o=$U[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),r[l.uuid]=o}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const a=new Nk;a.setTextures(t);for(let s=0,o=e.length;s<o;s++){const l=e[s];r[l.uuid]===void 0&&(r[l.uuid]=a.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],a=y_.parse(i);t[a.uuid]=a}return t}parseImages(e,t){const r=this,i={};let a;function s(l){return r.manager.itemStart(l),a.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return s(c)}else return l.data?{data:P0(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new l4(t);a=new x_(l),a.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const d=e[u],f=d.url;if(Array.isArray(f)){const m=[];for(let v=0,_=f.length;v<_;v++){const w=f[v],x=o(w);x!==null&&(x instanceof HTMLImageElement?m.push(x):m.push(new mc(x.data,x.width,x.height)))}i[d.uuid]=new ef(m)}else{const m=o(d.url);i[d.uuid]=new ef(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function a(s){if(typeof s=="string"){const o=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await i.loadAsync(l)}else return s.data?{data:P0(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){i=new x_(this.manager),i.setCrossOrigin(this.crossOrigin);for(let s=0,o=e.length;s<o;s++){const l=e[s],u=l.url;if(Array.isArray(u)){const c=[];for(let d=0,f=u.length;d<f;d++){const m=u[d],v=await a(m);v!==null&&(v instanceof HTMLImageElement?c.push(v):c.push(new mc(v.data,v.width,v.height)))}r[l.uuid]=new ef(c)}else{const c=await a(l.url);r[l.uuid]=new ef(c)}}}return r}parseTextures(e,t){function r(a,s){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const i={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=e[a];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],u=l.data;let c;Array.isArray(u)?(c=new sw,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new mc:c=new ui,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=o.uuid,o.name!==void 0&&(c.name=o.name),o.mapping!==void 0&&(c.mapping=r(o.mapping,oIe)),o.channel!==void 0&&(c.channel=o.channel),o.offset!==void 0&&c.offset.fromArray(o.offset),o.repeat!==void 0&&c.repeat.fromArray(o.repeat),o.center!==void 0&&c.center.fromArray(o.center),o.rotation!==void 0&&(c.rotation=o.rotation),o.wrap!==void 0&&(c.wrapS=r(o.wrap[0],ZU),c.wrapT=r(o.wrap[1],ZU)),o.format!==void 0&&(c.format=o.format),o.internalFormat!==void 0&&(c.internalFormat=o.internalFormat),o.type!==void 0&&(c.type=o.type),o.colorSpace!==void 0&&(c.colorSpace=o.colorSpace),o.minFilter!==void 0&&(c.minFilter=r(o.minFilter,QU)),o.magFilter!==void 0&&(c.magFilter=r(o.magFilter,QU)),o.anisotropy!==void 0&&(c.anisotropy=o.anisotropy),o.flipY!==void 0&&(c.flipY=o.flipY),o.generateMipmaps!==void 0&&(c.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(c.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(c.compareFunction=o.compareFunction),o.userData!==void 0&&(c.userData=o.userData),i[o.uuid]=c}return i}parseObject(e,t,r,i,a){let s;function o(f){return t[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),t[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const m=[];for(let v=0,_=f.length;v<_;v++){const w=f[v];r[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),m.push(r[w])}return m}return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),r[f]}}function u(f){return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),i[f]}let c,d;switch(e.type){case"Scene":s=new WO,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Dt(e.background):s.background=u(e.background)),e.environment!==void 0&&(s.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new fk(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new hk(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new Bi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new vf(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new jee(e.color,e.intensity);break;case"DirectionalLight":s=new Fee(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new Oee(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new Bee(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new Lee(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new Dee(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new Vee().fromJSON(e);break;case"SkinnedMesh":c=o(e.geometry),d=l(e.material),s=new nee(c,d),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":c=o(e.geometry),d=l(e.material),s=new Zi(c,d);break;case"InstancedMesh":c=o(e.geometry),d=l(e.material);const f=e.count,m=e.instanceMatrix,v=e.instanceColor;s=new ree(c,d,f),s.instanceMatrix=new Gv(new Float32Array(m.array),16),v!==void 0&&(s.instanceColor=new Gv(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":c=o(e.geometry),d=l(e.material),s=new iee(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),s.geometry=c,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._geometryInfo=e.geometryInfo.map(_=>{let w=null,x=null;return _.boundingBox!==void 0&&(w=new Es().fromJSON(_.boundingBox)),_.boundingSphere!==void 0&&(x=new Wa().fromJSON(_.boundingSphere)),{..._,boundingBox:w,boundingSphere:x}}),s._instanceInfo=e.instanceInfo,s._availableInstanceIds=e._availableInstanceIds,s._availableGeometryIds=e._availableGeometryIds,s._nextIndexStart=e.nextIndexStart,s._nextVertexStart=e.nextVertexStart,s._geometryCount=e.geometryCount,s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._matricesTexture=u(e.matricesTexture.uuid),s._indirectTexture=u(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=u(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(s.boundingSphere=new Wa().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(s.boundingBox=new Es().fromJSON(e.boundingBox));break;case"LOD":s=new tee;break;case"Line":s=new Df(o(e.geometry),l(e.material));break;case"LineLoop":s=new aee(o(e.geometry),l(e.material));break;case"LineSegments":s=new Tc(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new see(o(e.geometry),l(e.material));break;case"Sprite":s=new eee(l(e.material));break;case"Group":s=new N0;break;case"Bone":s=new $O;break;default:s=new lr}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let m=0;m<f.length;m++)s.add(this.parseObject(f[m],t,r,i,a))}if(e.animations!==void 0){const f=e.animations;for(let m=0;m<f.length;m++){const v=f[m];s.animations.push(a[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const f=e.levels;for(let m=0;m<f.length;m++){const v=f[m],_=s.getObjectByProperty("uuid",v.object);_!==void 0&&s.addLevel(_,v.distance,v.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const r=t.target,i=e.getObjectByProperty("uuid",r);i!==void 0?t.target=i:t.target=new lr}})}}const oIe={UVMapping:nk,CubeReflectionMapping:Dd,CubeRefractionMapping:Rf,EquirectangularReflectionMapping:i_,EquirectangularRefractionMapping:a_,CubeUVReflectionMapping:dy},ZU={RepeatWrapping:s_,ClampToEdgeWrapping:bl,MirroredRepeatWrapping:o_},QU={NearestFilter:Ga,NearestMipmapNearestFilter:PO,NearestMipmapLinearFilter:I0,LinearFilter:ha,LinearMipmapNearestFilter:s1,LinearMipmapLinearFilter:rc},gI=new WeakMap;class lIe extends Io{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=ic.get(`image-bitmap:${e}`);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(u=>{if(gI.has(s)===!0)i&&i(gI.get(s)),a.manager.itemError(e),a.manager.itemEnd(e);else return t&&t(u),a.manager.itemEnd(e),u});return}return setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,o.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const l=fetch(e,o).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(u){return ic.add(`image-bitmap:${e}`,u),t&&t(u),a.manager.itemEnd(e),u}).catch(function(u){i&&i(u),gI.set(l,u),ic.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});ic.add(`image-bitmap:${e}`,l),a.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let m2;class c4{static getContext(){return m2===void 0&&(m2=new(window.AudioContext||window.webkitAudioContext)),m2}static setContext(e){m2=e}}class uIe extends Io{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new Od(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{const u=l.slice(0);c4.getContext().decodeAudioData(u,function(d){t(d)}).catch(o)}catch(u){o(u)}},r,i);function o(l){i?i(l):console.error(l),a.manager.itemError(e)}}}const JU=new yn,eV=new yn,yp=new yn;class cIe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Bi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Bi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,yp.copy(e.projectionMatrix);const i=t.eyeSep/2,a=i*t.near/t.focus,s=t.near*Math.tan(mm*t.fov*.5)/t.zoom;let o,l;eV.elements[12]=-i,JU.elements[12]=i,o=-s*t.aspect+a,l=s*t.aspect+a,yp.elements[0]=2*t.near/(l-o),yp.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(yp),o=-s*t.aspect-a,l=s*t.aspect-a,yp.elements[0]=2*t.near/(l-o),yp.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(yp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(eV),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(JU)}}class Gee extends Bi{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class d4{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const xp=new ie,vI=new Ss,dIe=new ie,_p=new ie,wp=new ie;class hIe extends lr{constructor(){super(),this.type="AudioListener",this.context=c4.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new d4}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(xp,vI,dIe),_p.set(0,0,-1).applyQuaternion(vI),wp.set(0,1,0).applyQuaternion(vI),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(xp.x,r),t.positionY.linearRampToValueAtTime(xp.y,r),t.positionZ.linearRampToValueAtTime(xp.z,r),t.forwardX.linearRampToValueAtTime(_p.x,r),t.forwardY.linearRampToValueAtTime(_p.y,r),t.forwardZ.linearRampToValueAtTime(_p.z,r),t.upX.linearRampToValueAtTime(wp.x,r),t.upY.linearRampToValueAtTime(wp.y,r),t.upZ.linearRampToValueAtTime(wp.z,r)}else t.setPosition(xp.x,xp.y,xp.z),t.setOrientation(_p.x,_p.y,_p.z,wp.x,wp.y,wp.z)}}class Wee extends lr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const bp=new ie,tV=new Ss,fIe=new ie,Sp=new ie;class pIe extends Wee{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(bp,tV,fIe),Sp.set(0,0,1).applyQuaternion(tV);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(bp.x,r),t.positionY.linearRampToValueAtTime(bp.y,r),t.positionZ.linearRampToValueAtTime(bp.z,r),t.orientationX.linearRampToValueAtTime(Sp.x,r),t.orientationY.linearRampToValueAtTime(Sp.y,r),t.orientationZ.linearRampToValueAtTime(Sp.z,r)}else t.setPosition(bp.x,bp.y,bp.z),t.setOrientation(Sp.x,Sp.y,Sp.z)}}class mIe{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class qee{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,a,s;switch(t){case"quaternion":i=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,a=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==i;++o)r[a+o]=r[o];s=t}else{s+=t;const o=t/s;this._mixBufferRegion(r,a,0,o,i)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-a,t)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){o.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let a=r,s=i;a!==s;++a)t[a]=t[i+a%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,a){if(i>=.5)for(let s=0;s!==a;++s)e[t+s]=e[r+s]}_slerp(e,t,r,i){Ss.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,a){const s=this._workIndex*a;Ss.multiplyQuaternionsFlat(e,s,e,t,e,r),Ss.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,r,i,a){const s=1-i;for(let o=0;o!==a;++o){const l=t+o;e[l]=e[l]*s+e[r+o]*i}}_lerpAdditive(e,t,r,i,a){for(let s=0;s!==a;++s){const o=t+s;e[o]=e[o]+e[r+s]*i}}}const h4="\\[\\]\\.:\\/",gIe=new RegExp("["+h4+"]","g"),f4="[^"+h4+"]",vIe="[^"+h4.replace("\\.","")+"]",yIe=/((?:WC+[\/:])*)/.source.replace("WC",f4),xIe=/(WCOD+)?/.source.replace("WCOD",vIe),_Ie=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",f4),wIe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",f4),bIe=new RegExp("^"+yIe+xIe+_Ie+wIe+"$"),SIe=["material","materials","bones","map"];class EIe{constructor(e,t,r){const i=r||ar.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=r.length;i!==a;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class ar{constructor(e,t,r){this.path=t,this.parsedPath=r||ar.parseTrackName(t),this.node=ar.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new ar.Composite(e,t,r):new ar(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(gIe,"")}static parseTrackName(e){const t=bIe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=r.nodeName.substring(i+1);SIe.indexOf(a)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=a)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===t||o.uuid===t)return o;const l=r(o.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let a=t.propertyIndex;if(e||(e=ar.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const s=e[i];if(s===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ar.Composite=EIe;ar.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ar.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ar.prototype.GetterByBindingType=[ar.prototype._getValue_direct,ar.prototype._getValue_array,ar.prototype._getValue_arrayElement,ar.prototype._getValue_toArray];ar.prototype.SetterByBindingTypeAndVersioning=[[ar.prototype._setValue_direct,ar.prototype._setValue_direct_setNeedsUpdate,ar.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ar.prototype._setValue_array,ar.prototype._setValue_array_setNeedsUpdate,ar.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ar.prototype._setValue_arrayElement,ar.prototype._setValue_arrayElement_setNeedsUpdate,ar.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ar.prototype._setValue_fromArray,ar.prototype._setValue_fromArray_setNeedsUpdate,ar.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AIe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Xo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,a=this._bindings,s=a.length;let o,l=e.length,u=this.nCachedObjects_;for(let c=0,d=arguments.length;c!==d;++c){const f=arguments[c],m=f.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(f);for(let _=0,w=s;_!==w;++_)a[_].push(new ar(f,r[_],i[_]))}else if(v<u){o=e[v];const _=--u,w=e[_];t[w.uuid]=v,e[v]=w,t[m]=_,e[_]=f;for(let x=0,S=s;x!==S;++x){const E=a[x],T=E[_];let D=E[v];E[v]=T,D===void 0&&(D=new ar(f,r[x],i[x])),E[_]=D}}else e[v]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const l=arguments[s],u=l.uuid,c=t[u];if(c!==void 0&&c>=a){const d=a++,f=e[d];t[f.uuid]=c,e[c]=f,t[u]=d,e[d]=l;for(let m=0,v=i;m!==v;++m){const _=r[m],w=_[d],x=_[c];_[c]=w,_[d]=x}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_,s=e.length;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],c=u.uuid,d=t[c];if(d!==void 0)if(delete t[c],d<a){const f=--a,m=e[f],v=--s,_=e[v];t[m.uuid]=d,e[d]=m,t[_.uuid]=f,e[f]=_,e.pop();for(let w=0,x=i;w!==x;++w){const S=r[w],E=S[f],T=S[v];S[d]=E,S[f]=T,S.pop()}}else{const f=--s,m=e[f];f>0&&(t[m.uuid]=d),e[d]=m,e.pop();for(let v=0,_=i;v!==_;++v){const w=r[v];w[d]=w[f],w.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const a=this._bindings;if(i!==void 0)return a[i];const s=this._paths,o=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,d=new Array(u);i=a.length,r[e]=i,s.push(e),o.push(t),a.push(d);for(let f=c,m=l.length;f!==m;++f){const v=l[f];d[f]=new ar(v,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length-1,l=s[o],u=e[o];t[u]=r,s[r]=l,s.pop(),a[r]=a[o],a.pop(),i[r]=i[o],i.pop()}}}class $ee{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const a=t.tracks,s=a.length,o=new Array(s),l={endingStart:Kp,endingEnd:Kp};for(let u=0;u!==s;++u){const c=a[u].createInterpolant(null);o[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=RJ,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r=!1){if(e.fadeOut(t),this.fadeIn(t),r===!0){const i=this._clip.duration,a=e._clip.duration,s=a/i,o=i/a;e.warp(1,s,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,r=!1){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,a=i.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=a,l[1]=a+r,u[0]=e/s,u[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const l=(e-a)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const s=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case BO:for(let c=0,d=l.length;c!==d;++c)l[c].evaluate(s),u[c].accumulateAdditive(o);break;case uk:default:for(let c=0,d=l.length;c!==d;++c)l[c].evaluate(s),u[c].accumulate(i,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,a=this._loopCount;const s=r===DJ;if(e===0)return a===-1?i:s&&(a&1)===1?t-i:i;if(r===NJ){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=t||i<0){const o=Math.floor(i/t);i-=t*o,a+=Math.abs(o);const l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(s&&(a&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Yp,i.endingEnd=Yp):(e?i.endingStart=this.zeroSlopeAtStart?Yp:Kp:i.endingStart=u_,t?i.endingEnd=this.zeroSlopeAtEnd?Yp:Kp:i.endingEnd=u_)}_scheduleFading(e,t,r){const i=this._mixer,a=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=a,l[0]=t,o[1]=a+e,l[1]=r,this}}const TIe=new Float32Array(1);class kIe extends Ac{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,a=i.length,s=e._propertyBindings,o=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let d=0;d!==a;++d){const f=i[d],m=f.name;let v=c[m];if(v!==void 0)++v.referenceCount,s[d]=v;else{if(v=s[d],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const _=t&&t._propertyBindings[d].binding.parsedPath;v=new qee(ar.create(r,m,_),f.ValueTypeName,f.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),s[d]=v}o[d].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,a=this._actionsByClip[i];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,a=this._actionsByClip;let s=a[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,o=s[a],l=o.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const d=o.actionByRoot,f=(e._localRoot||this._root).uuid;delete d[f],l.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,a=this._bindings;let s=i[t];s===void 0&&(s={},i[t]=s),s[r]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,a=r.path,s=this._bindingsByRootAndName,o=s[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete o[a],Object.keys(o).length===0&&delete s[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new s4(new Float32Array(2),new Float32Array(2),1,TIe),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,a=t[i];e.__cacheIndex=i,t[i]=e,a.__cacheIndex=r,t[r]=a}clipAction(e,t,r){const i=t||this._root,a=i.uuid;let s=typeof e=="string"?y_.findByName(i,e):e;const o=s!==null?s.uuid:e,l=this._actionsByClip[o];let u=null;if(r===void 0&&(s!==null?r=s.blendMode:r=uk),l!==void 0){const d=l.actionByRoot[a];if(d!==void 0&&d.blendMode===r)return d;u=l.knownActions[0],s===null&&(s=u._clip)}if(s===null)return null;const c=new $ee(this,s,t,r);return this._bindAction(c,u),this._addInactiveAction(c,o,a),c}existingAction(e,t){const r=t||this._root,i=r.uuid,a=typeof e=="string"?y_.findByName(r,e):e,s=a?a.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,a,s);const o=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)o[u].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,a=i[r];if(a!==void 0){const s=a.knownActions;for(let o=0,l=s.length;o!==l;++o){const u=s[o];this._deactivateAction(u);const c=u._cacheIndex,d=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,d._cacheIndex=c,t[c]=d,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const s in r){const o=r[s].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,a=i[t];if(a!==void 0)for(const s in a){const o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class CIe extends zO{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=r,this.texture=new dk(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class p4{constructor(e){this.value=e}clone(){return new p4(this.value.clone===void 0?this.value:this.value.clone())}}let MIe=0;class IIe extends Ac{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:MIe++}),this.name="",this.usage=d_,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const a=Array.isArray(t[r])?t[r]:[t[r]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class PIe extends pk{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class NIe{constructor(e,t,r,i,a,s=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=a,this.normalized=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const nV=new yn;class Xee{constructor(e,t,r=0,i=1/0){this.ray=new ig(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new gm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return nV.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(nV),this}intersectObject(e,t=!0,r=[]){return PR(e,this,r,t),r.sort(rV),r}intersectObjects(e,t=!0,r=[]){for(let i=0,a=e.length;i<a;i++)PR(e[i],this,r,t);return r.sort(rV),r}}function rV(n,e){return n.distance-e.distance}function PR(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const a=n.children;for(let s=0,o=a.length;s<o;s++)PR(a[s],e,t,!0)}}class RIe{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=DIe.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function DIe(){this._document.hidden===!1&&this.reset()}class NR{constructor(e=1,t=0,r=0){this.radius=e,this.phi=t,this.theta=r}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=pn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(pn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class LIe{constructor(e=1,t=0,r=0){this.radius=e,this.theta=t,this.y=r}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}class m4{constructor(e,t,r,i){m4.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let r=0;r<4;r++)this.elements[r]=e[r+t];return this}set(e,t,r,i){const a=this.elements;return a[0]=e,a[2]=t,a[1]=r,a[3]=i,this}}const iV=new rt;class OIe{constructor(e=new rt(1/0,1/0),t=new rt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=iV.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,iV).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const aV=new ie,g2=new ie,Xg=new ie,Kg=new ie,yI=new ie,FIe=new ie,jIe=new ie;class BIe{constructor(e=new ie,t=new ie){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){aV.subVectors(e,this.start),g2.subVectors(this.end,this.start);const r=g2.dot(g2);let a=g2.dot(aV)/r;return t&&(a=pn(a,0,1)),a}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}distanceSqToLine3(e,t=FIe,r=jIe){const i=10000000000000001e-32;let a,s;const o=this.start,l=e.start,u=this.end,c=e.end;Xg.subVectors(u,o),Kg.subVectors(c,l),yI.subVectors(o,l);const d=Xg.dot(Xg),f=Kg.dot(Kg),m=Kg.dot(yI);if(d<=i&&f<=i)return t.copy(o),r.copy(l),t.sub(r),t.dot(t);if(d<=i)a=0,s=m/f,s=pn(s,0,1);else{const v=Xg.dot(yI);if(f<=i)s=0,a=pn(-v/d,0,1);else{const _=Xg.dot(Kg),w=d*f-_*_;w!==0?a=pn((_*m-v*f)/w,0,1):a=0,s=(_*a+m)/f,s<0?(s=0,a=pn(-v/d,0,1)):s>1&&(s=1,a=pn((_-v)/d,0,1))}}return t.copy(o).add(Xg.multiplyScalar(a)),r.copy(l).add(Kg.multiplyScalar(s)),t.sub(r),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const sV=new ie;class UIe extends lr{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new In,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,l=32;s<l;s++,o++){const u=s/l*Math.PI*2,c=o/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new Gt(i,3));const a=new to({fog:!1,toneMapped:!1});this.cone=new Tc(r,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),sV.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(sV),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Eh=new ie,v2=new yn,xI=new yn;class VIe extends Tc{constructor(e){const t=Kee(e),r=new In,i=[],a=[];for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),a.push(0,0,0),a.push(0,0,0))}r.setAttribute("position",new Gt(i,3)),r.setAttribute("color",new Gt(a,3));const s=new to({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,s),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const o=new Dt(255),l=new Dt(65280);this.setColors(o,l)}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");xI.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<t.length;a++){const o=t[a];o.parent&&o.parent.isBone&&(v2.multiplyMatrices(xI,o.matrixWorld),Eh.setFromMatrixPosition(v2),i.setXYZ(s,Eh.x,Eh.y,Eh.z),v2.multiplyMatrices(xI,o.parent.matrixWorld),Eh.setFromMatrixPosition(v2),i.setXYZ(s+1,Eh.x,Eh.y,Eh.z),s+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const i=this.geometry.getAttribute("color");for(let a=0;a<i.count;a+=2)i.setXYZ(a,e.r,e.g,e.b),i.setXYZ(a+1,t.r,t.g,t.b);return i.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function Kee(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...Kee(n.children[t]));return e}class zIe extends Zi{constructor(e,t,r){const i=new cw(t,4,2),a=new qf({wireframe:!0,fog:!1,toneMapped:!1});super(i,a),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const HIe=new ie,oV=new Dt,lV=new Dt;class GIe extends lr{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new uw(t);i.rotateY(Math.PI*.5),this.material=new qf({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=i.getAttribute("position"),s=new Float32Array(a.count*3);i.setAttribute("color",new Lr(s,3)),this.add(new Zi(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");oV.copy(this.light.color),lV.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const a=r<i/2?oV:lV;t.setXYZ(r,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(HIe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class WIe extends Tc{constructor(e=10,t=10,r=4473924,i=8947848){r=new Dt(r),i=new Dt(i);const a=t/2,s=e/t,o=e/2,l=[],u=[];for(let f=0,m=0,v=-o;f<=t;f++,v+=s){l.push(-o,0,v,o,0,v),l.push(v,0,-o,v,0,o);const _=f===a?r:i;_.toArray(u,m),m+=3,_.toArray(u,m),m+=3,_.toArray(u,m),m+=3,_.toArray(u,m),m+=3}const c=new In;c.setAttribute("position",new Gt(l,3)),c.setAttribute("color",new Gt(u,3));const d=new to({vertexColors:!0,toneMapped:!1});super(c,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class qIe extends Tc{constructor(e=10,t=16,r=8,i=64,a=4473924,s=8947848){a=new Dt(a),s=new Dt(s);const o=[],l=[];if(t>1)for(let d=0;d<t;d++){const f=d/t*(Math.PI*2),m=Math.sin(f)*e,v=Math.cos(f)*e;o.push(0,0,0),o.push(m,0,v);const _=d&1?a:s;l.push(_.r,_.g,_.b),l.push(_.r,_.g,_.b)}for(let d=0;d<r;d++){const f=d&1?a:s,m=e-e/r*d;for(let v=0;v<i;v++){let _=v/i*(Math.PI*2),w=Math.sin(_)*m,x=Math.cos(_)*m;o.push(w,0,x),l.push(f.r,f.g,f.b),_=(v+1)/i*(Math.PI*2),w=Math.sin(_)*m,x=Math.cos(_)*m,o.push(w,0,x),l.push(f.r,f.g,f.b)}}const u=new In;u.setAttribute("position",new Gt(o,3)),u.setAttribute("color",new Gt(l,3));const c=new to({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const uV=new ie,y2=new ie,cV=new ie;class $Ie extends lr{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new In;i.setAttribute("position",new Gt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new to({fog:!1,toneMapped:!1});this.lightPlane=new Df(i,a),this.add(this.lightPlane),i=new In,i.setAttribute("position",new Gt([0,0,0,0,0,1],3)),this.targetLine=new Df(i,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),uV.setFromMatrixPosition(this.light.matrixWorld),y2.setFromMatrixPosition(this.light.target.matrixWorld),cV.subVectors(y2,uV),this.lightPlane.lookAt(y2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(y2),this.targetLine.scale.z=cV.length()}}const x2=new ie,Ti=new aw;class XIe extends Tc{constructor(e){const t=new In,r=new to({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],a=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(v,_){l(v),l(_)}function l(v){i.push(0,0,0),a.push(0,0,0),s[v]===void 0&&(s[v]=[]),s[v].push(i.length/3-1)}t.setAttribute("position",new Gt(i,3)),t.setAttribute("color",new Gt(a,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const u=new Dt(16755200),c=new Dt(16711680),d=new Dt(43775),f=new Dt(16777215),m=new Dt(3355443);this.setColors(u,c,d,f,m)}setColors(e,t,r,i,a){const o=this.geometry.getAttribute("color");return o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,r.r,r.g,r.b),o.setXYZ(33,r.r,r.g,r.b),o.setXYZ(34,r.r,r.g,r.b),o.setXYZ(35,r.r,r.g,r.b),o.setXYZ(36,r.r,r.g,r.b),o.setXYZ(37,r.r,r.g,r.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,a.r,a.g,a.b),o.setXYZ(41,a.r,a.g,a.b),o.setXYZ(42,a.r,a.g,a.b),o.setXYZ(43,a.r,a.g,a.b),o.setXYZ(44,a.r,a.g,a.b),o.setXYZ(45,a.r,a.g,a.b),o.setXYZ(46,a.r,a.g,a.b),o.setXYZ(47,a.r,a.g,a.b),o.setXYZ(48,a.r,a.g,a.b),o.setXYZ(49,a.r,a.g,a.b),o.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;let a,s;if(Ti.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)a=1,s=0;else if(this.camera.coordinateSystem===Ho)a=-1,s=1;else if(this.camera.coordinateSystem===Vv)a=0,s=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Di("c",t,e,Ti,0,0,a),Di("t",t,e,Ti,0,0,s),Di("n1",t,e,Ti,-r,-i,a),Di("n2",t,e,Ti,r,-i,a),Di("n3",t,e,Ti,-r,i,a),Di("n4",t,e,Ti,r,i,a),Di("f1",t,e,Ti,-r,-i,s),Di("f2",t,e,Ti,r,-i,s),Di("f3",t,e,Ti,-r,i,s),Di("f4",t,e,Ti,r,i,s),Di("u1",t,e,Ti,r*.7,i*1.1,a),Di("u2",t,e,Ti,-r*.7,i*1.1,a),Di("u3",t,e,Ti,0,i*2,a),Di("cf1",t,e,Ti,-r,0,s),Di("cf2",t,e,Ti,r,0,s),Di("cf3",t,e,Ti,0,-i,s),Di("cf4",t,e,Ti,0,i,s),Di("cn1",t,e,Ti,-r,0,a),Di("cn2",t,e,Ti,r,0,a),Di("cn3",t,e,Ti,0,-i,a),Di("cn4",t,e,Ti,0,i,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Di(n,e,t,r,i,a,s){x2.set(i,a,s).unproject(r);const o=e[n];if(o!==void 0){const l=t.getAttribute("position");for(let u=0,c=o.length;u<c;u++)l.setXYZ(o[u],x2.x,x2.y,x2.z)}}const _2=new Es;class KIe extends Tc{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),a=new In;a.setIndex(new Lr(r,1)),a.setAttribute("position",new Lr(i,3)),super(a,new to({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&_2.setFromObject(this.object),_2.isEmpty())return;const e=_2.min,t=_2.max,r=this.geometry.attributes.position,i=r.array;i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=e.x,i[4]=t.y,i[5]=t.z,i[6]=e.x,i[7]=e.y,i[8]=t.z,i[9]=t.x,i[10]=e.y,i[11]=t.z,i[12]=t.x,i[13]=t.y,i[14]=e.z,i[15]=e.x,i[16]=t.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=t.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class YIe extends Tc{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new In;a.setIndex(new Lr(r,1)),a.setAttribute("position",new Gt(i,3)),super(a,new to({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class ZIe extends Df{constructor(e,t=1,r=16776960){const i=r,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new In;s.setAttribute("position",new Gt(a,3)),s.computeBoundingSphere(),super(s,new to({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new In;l.setAttribute("position",new Gt(o,3)),l.computeBoundingSphere(),this.add(new Zi(l,new qf({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const dV=new ie;let w2,_I;class QIe extends lr{constructor(e=new ie(0,0,1),t=new ie(0,0,0),r=1,i=16776960,a=r*.2,s=a*.2){super(),this.type="ArrowHelper",w2===void 0&&(w2=new In,w2.setAttribute("position",new Gt([0,0,0,0,1,0],3)),_I=new lw(.5,1,5,1),_I.translate(0,-.5,0)),this.position.copy(t),this.line=new Df(w2,new to({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Zi(_I,new qf({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{dV.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(dV,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class JIe extends Tc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new In;i.setAttribute("position",new Gt(t,3)),i.setAttribute("color",new Gt(r,3));const a=new to({vertexColors:!0,toneMapped:!1});super(i,a),this.type="AxesHelper"}setColors(e,t,r){const i=new Dt,a=this.geometry.attributes.color.array;return i.set(e),i.toArray(a,0),i.toArray(a,3),i.set(t),i.toArray(a,6),i.toArray(a,9),i.set(r),i.toArray(a,12),i.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ePe{constructor(){this.type="ShapePath",this.color=new Dt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new vA,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,a,s){return this.currentPath.bezierCurveTo(e,t,r,i,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(x){const S=[];for(let E=0,T=x.length;E<T;E++){const D=x[E],F=new vm;F.curves=D.curves,S.push(F)}return S}function r(x,S){const E=S.length;let T=!1;for(let D=E-1,F=0;F<E;D=F++){let P=S[D],N=S[F],I=N.x-P.x,R=N.y-P.y;if(Math.abs(R)>Number.EPSILON){if(R<0&&(P=S[F],I=-I,N=S[D],R=-R),x.y<P.y||x.y>N.y)continue;if(x.y===P.y){if(x.x===P.x)return!0}else{const B=R*(x.x-P.x)-I*(x.y-P.y);if(B===0)return!0;if(B<0)continue;T=!T}}else{if(x.y!==P.y)continue;if(N.x<=x.x&&x.x<=P.x||P.x<=x.x&&x.x<=N.x)return!0}}return T}const i=uu.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,o,l;const u=[];if(a.length===1)return o=a[0],l=new vm,l.curves=o.curves,u.push(l),u;let c=!i(a[0].getPoints());c=e?!c:c;const d=[],f=[];let m=[],v=0,_;f[v]=void 0,m[v]=[];for(let x=0,S=a.length;x<S;x++)o=a[x],_=o.getPoints(),s=i(_),s=e?!s:s,s?(!c&&f[v]&&v++,f[v]={s:new vm,p:_},f[v].s.curves=o.curves,c&&v++,m[v]=[]):m[v].push({h:o,p:_[0]});if(!f[0])return t(a);if(f.length>1){let x=!1,S=0;for(let E=0,T=f.length;E<T;E++)d[E]=[];for(let E=0,T=f.length;E<T;E++){const D=m[E];for(let F=0;F<D.length;F++){const P=D[F];let N=!0;for(let I=0;I<f.length;I++)r(P.p,f[I].p)&&(E!==I&&S++,N?(N=!1,d[I].push(P)):x=!0);N&&d[E].push(P)}}S>0&&x===!1&&(m=d)}let w;for(let x=0,S=f.length;x<S;x++){l=f[x].s,u.push(l),w=m[x];for(let E=0,T=w.length;E<T;E++)l.holes.push(w[E].h)}return u}}class tPe extends Ac{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function nPe(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function rPe(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function iPe(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function RR(n,e,t,r){const i=aPe(r);switch(t){case LO:return n*e;case sk:return n*e/i.components*i.byteLength;case iw:return n*e/i.components*i.byteLength;case FO:return n*e*2/i.components*i.byteLength;case ok:return n*e*2/i.components*i.byteLength;case OO:return n*e*3/i.components*i.byteLength;case bs:return n*e*4/i.components*i.byteLength;case lk:return n*e*4/i.components*i.byteLength;case o1:case l1:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case u1:case c1:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case zE:case GE:return Math.max(n,16)*Math.max(e,8)/4;case VE:case HE:return Math.max(n,8)*Math.max(e,8)/2;case WE:case qE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case $E:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case XE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case KE:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case YE:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case ZE:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case QE:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case JE:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case eA:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case tA:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case nA:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case rA:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case iA:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case aA:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case sA:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case oA:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case d1:case lA:case uA:return Math.ceil(n/4)*Math.ceil(e/4)*16;case jO:case cA:return Math.ceil(n/4)*Math.ceil(e/4)*8;case dA:case hA:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function aPe(n){switch(n){case Nl:case NO:return{byteLength:1,components:1};case Fv:case RO:case hy:return{byteLength:2,components:1};case ik:case ak:return{byteLength:2,components:4};case Ld:case rk:case Ao:return{byteLength:4,components:1};case DO:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class sPe{static contain(e,t){return nPe(e,t)}static cover(e,t){return rPe(e,t)}static fill(e){return iPe(e)}static getByteLength(e,t,r,i){return RR(e,t,r,i)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ek}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ek);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function Yee(){let n=null,e=!1,t=null,r=null;function i(a,s){t(a,s),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function oPe(n){const e=new WeakMap;function t(o,l){const u=o.array,c=o.usage,d=u.byteLength,f=n.createBuffer();n.bindBuffer(l,f),n.bufferData(l,u,c),o.onUploadCallback();let m;if(u instanceof Float32Array)m=n.FLOAT;else if(typeof Float16Array<"u"&&u instanceof Float16Array)m=n.HALF_FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)m=n.SHORT;else if(u instanceof Uint32Array)m=n.UNSIGNED_INT;else if(u instanceof Int32Array)m=n.INT;else if(u instanceof Int8Array)m=n.BYTE;else if(u instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:f,type:m,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:d}}function r(o,l,u){const c=l.array,d=l.updateRanges;if(n.bindBuffer(u,o),d.length===0)n.bufferSubData(u,0,c);else{d.sort((m,v)=>m.start-v.start);let f=0;for(let m=1;m<d.length;m++){const v=d[f],_=d[m];_.start<=v.start+v.count+1?v.count=Math.max(v.count,_.start+_.count-v.start):(++f,d[f]=_)}d.length=f+1;for(let m=0,v=d.length;m<v;m++){const _=d[m];n.bufferSubData(u,_.start*c.BYTES_PER_ELEMENT,c,_.start,_.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function a(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(n.deleteBuffer(l.buffer),e.delete(o))}function s(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const c=e.get(o);(!c||c.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const u=e.get(o);if(u===void 0)e.set(o,t(o,l));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(u.buffer,o,l),u.version=o.version}}return{get:i,remove:a,update:s}}var lPe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,uPe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,cPe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,dPe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,hPe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,fPe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,pPe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,mPe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,gPe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,vPe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,yPe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,xPe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,_Pe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,wPe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bPe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,SPe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,EPe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,APe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,TPe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,kPe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,CPe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,MPe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,IPe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,PPe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,NPe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,RPe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,DPe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,LPe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,OPe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,FPe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,jPe="gl_FragColor = linearToOutputTexel( gl_FragColor );",BPe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,UPe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,VPe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,zPe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,HPe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,GPe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,WPe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,qPe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,$Pe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,XPe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,KPe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,YPe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,ZPe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,QPe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,JPe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,eNe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,tNe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,nNe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,rNe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,iNe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,aNe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,sNe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,oNe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lNe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,uNe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,cNe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,dNe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,hNe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,fNe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,pNe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,mNe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,gNe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,vNe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,yNe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,xNe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,_Ne=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,wNe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,bNe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,SNe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,ENe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,ANe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,TNe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,kNe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,CNe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,MNe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,INe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,PNe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,NNe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,RNe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,DNe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,LNe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,ONe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,FNe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,jNe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,BNe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,UNe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,VNe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,zNe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,HNe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSEDEPTHBUF
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSEDEPTHBUF
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare , distribution.x );
		#endif
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,GNe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,WNe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,qNe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,$Ne=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,XNe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,KNe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,YNe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,ZNe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,QNe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,JNe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,eRe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,tRe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,nRe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,rRe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,iRe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,aRe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,sRe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const oRe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,lRe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,uRe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cRe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dRe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,hRe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fRe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,pRe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSEDEPTHBUF
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,mRe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,gRe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vRe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,yRe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xRe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,_Re=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,wRe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,bRe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SRe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ERe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ARe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,TRe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kRe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,CRe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,MRe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,IRe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PRe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,NRe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,RRe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,DRe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LRe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ORe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,FRe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jRe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,BRe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,URe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Nn={alphahash_fragment:lPe,alphahash_pars_fragment:uPe,alphamap_fragment:cPe,alphamap_pars_fragment:dPe,alphatest_fragment:hPe,alphatest_pars_fragment:fPe,aomap_fragment:pPe,aomap_pars_fragment:mPe,batching_pars_vertex:gPe,batching_vertex:vPe,begin_vertex:yPe,beginnormal_vertex:xPe,bsdfs:_Pe,iridescence_fragment:wPe,bumpmap_pars_fragment:bPe,clipping_planes_fragment:SPe,clipping_planes_pars_fragment:EPe,clipping_planes_pars_vertex:APe,clipping_planes_vertex:TPe,color_fragment:kPe,color_pars_fragment:CPe,color_pars_vertex:MPe,color_vertex:IPe,common:PPe,cube_uv_reflection_fragment:NPe,defaultnormal_vertex:RPe,displacementmap_pars_vertex:DPe,displacementmap_vertex:LPe,emissivemap_fragment:OPe,emissivemap_pars_fragment:FPe,colorspace_fragment:jPe,colorspace_pars_fragment:BPe,envmap_fragment:UPe,envmap_common_pars_fragment:VPe,envmap_pars_fragment:zPe,envmap_pars_vertex:HPe,envmap_physical_pars_fragment:eNe,envmap_vertex:GPe,fog_vertex:WPe,fog_pars_vertex:qPe,fog_fragment:$Pe,fog_pars_fragment:XPe,gradientmap_pars_fragment:KPe,lightmap_pars_fragment:YPe,lights_lambert_fragment:ZPe,lights_lambert_pars_fragment:QPe,lights_pars_begin:JPe,lights_toon_fragment:tNe,lights_toon_pars_fragment:nNe,lights_phong_fragment:rNe,lights_phong_pars_fragment:iNe,lights_physical_fragment:aNe,lights_physical_pars_fragment:sNe,lights_fragment_begin:oNe,lights_fragment_maps:lNe,lights_fragment_end:uNe,logdepthbuf_fragment:cNe,logdepthbuf_pars_fragment:dNe,logdepthbuf_pars_vertex:hNe,logdepthbuf_vertex:fNe,map_fragment:pNe,map_pars_fragment:mNe,map_particle_fragment:gNe,map_particle_pars_fragment:vNe,metalnessmap_fragment:yNe,metalnessmap_pars_fragment:xNe,morphinstance_vertex:_Ne,morphcolor_vertex:wNe,morphnormal_vertex:bNe,morphtarget_pars_vertex:SNe,morphtarget_vertex:ENe,normal_fragment_begin:ANe,normal_fragment_maps:TNe,normal_pars_fragment:kNe,normal_pars_vertex:CNe,normal_vertex:MNe,normalmap_pars_fragment:INe,clearcoat_normal_fragment_begin:PNe,clearcoat_normal_fragment_maps:NNe,clearcoat_pars_fragment:RNe,iridescence_pars_fragment:DNe,opaque_fragment:LNe,packing:ONe,premultiplied_alpha_fragment:FNe,project_vertex:jNe,dithering_fragment:BNe,dithering_pars_fragment:UNe,roughnessmap_fragment:VNe,roughnessmap_pars_fragment:zNe,shadowmap_pars_fragment:HNe,shadowmap_pars_vertex:GNe,shadowmap_vertex:WNe,shadowmask_pars_fragment:qNe,skinbase_vertex:$Ne,skinning_pars_vertex:XNe,skinning_vertex:KNe,skinnormal_vertex:YNe,specularmap_fragment:ZNe,specularmap_pars_fragment:QNe,tonemapping_fragment:JNe,tonemapping_pars_fragment:eRe,transmission_fragment:tRe,transmission_pars_fragment:nRe,uv_pars_fragment:rRe,uv_pars_vertex:iRe,uv_vertex:aRe,worldpos_vertex:sRe,background_vert:oRe,background_frag:lRe,backgroundCube_vert:uRe,backgroundCube_frag:cRe,cube_vert:dRe,cube_frag:hRe,depth_vert:fRe,depth_frag:pRe,distanceRGBA_vert:mRe,distanceRGBA_frag:gRe,equirect_vert:vRe,equirect_frag:yRe,linedashed_vert:xRe,linedashed_frag:_Re,meshbasic_vert:wRe,meshbasic_frag:bRe,meshlambert_vert:SRe,meshlambert_frag:ERe,meshmatcap_vert:ARe,meshmatcap_frag:TRe,meshnormal_vert:kRe,meshnormal_frag:CRe,meshphong_vert:MRe,meshphong_frag:IRe,meshphysical_vert:PRe,meshphysical_frag:NRe,meshtoon_vert:RRe,meshtoon_frag:DRe,points_vert:LRe,points_frag:ORe,shadow_vert:FRe,shadow_frag:jRe,sprite_vert:BRe,sprite_frag:URe},At={common:{diffuse:{value:new Dt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Cn},alphaMap:{value:null},alphaMapTransform:{value:new Cn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Cn}},envmap:{envMap:{value:null},envMapRotation:{value:new Cn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Cn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Cn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Cn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Cn},normalScale:{value:new rt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Cn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Cn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Cn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Cn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Dt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Dt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Cn},alphaTest:{value:0},uvTransform:{value:new Cn}},sprite:{diffuse:{value:new Dt(16777215)},opacity:{value:1},center:{value:new rt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Cn},alphaMap:{value:null},alphaMapTransform:{value:new Cn},alphaTest:{value:0}}},iu={basic:{uniforms:zs([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.fog]),vertexShader:Nn.meshbasic_vert,fragmentShader:Nn.meshbasic_frag},lambert:{uniforms:zs([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.fog,At.lights,{emissive:{value:new Dt(0)}}]),vertexShader:Nn.meshlambert_vert,fragmentShader:Nn.meshlambert_frag},phong:{uniforms:zs([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.fog,At.lights,{emissive:{value:new Dt(0)},specular:{value:new Dt(1118481)},shininess:{value:30}}]),vertexShader:Nn.meshphong_vert,fragmentShader:Nn.meshphong_frag},standard:{uniforms:zs([At.common,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.roughnessmap,At.metalnessmap,At.fog,At.lights,{emissive:{value:new Dt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Nn.meshphysical_vert,fragmentShader:Nn.meshphysical_frag},toon:{uniforms:zs([At.common,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.gradientmap,At.fog,At.lights,{emissive:{value:new Dt(0)}}]),vertexShader:Nn.meshtoon_vert,fragmentShader:Nn.meshtoon_frag},matcap:{uniforms:zs([At.common,At.bumpmap,At.normalmap,At.displacementmap,At.fog,{matcap:{value:null}}]),vertexShader:Nn.meshmatcap_vert,fragmentShader:Nn.meshmatcap_frag},points:{uniforms:zs([At.points,At.fog]),vertexShader:Nn.points_vert,fragmentShader:Nn.points_frag},dashed:{uniforms:zs([At.common,At.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Nn.linedashed_vert,fragmentShader:Nn.linedashed_frag},depth:{uniforms:zs([At.common,At.displacementmap]),vertexShader:Nn.depth_vert,fragmentShader:Nn.depth_frag},normal:{uniforms:zs([At.common,At.bumpmap,At.normalmap,At.displacementmap,{opacity:{value:1}}]),vertexShader:Nn.meshnormal_vert,fragmentShader:Nn.meshnormal_frag},sprite:{uniforms:zs([At.sprite,At.fog]),vertexShader:Nn.sprite_vert,fragmentShader:Nn.sprite_frag},background:{uniforms:{uvTransform:{value:new Cn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Nn.background_vert,fragmentShader:Nn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Cn}},vertexShader:Nn.backgroundCube_vert,fragmentShader:Nn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Nn.cube_vert,fragmentShader:Nn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Nn.equirect_vert,fragmentShader:Nn.equirect_frag},distanceRGBA:{uniforms:zs([At.common,At.displacementmap,{referencePosition:{value:new ie},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Nn.distanceRGBA_vert,fragmentShader:Nn.distanceRGBA_frag},shadow:{uniforms:zs([At.lights,At.fog,{color:{value:new Dt(0)},opacity:{value:1}}]),vertexShader:Nn.shadow_vert,fragmentShader:Nn.shadow_frag}};iu.physical={uniforms:zs([iu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Cn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Cn},clearcoatNormalScale:{value:new rt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Cn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Cn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Cn},sheen:{value:0},sheenColor:{value:new Dt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Cn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Cn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Cn},transmissionSamplerSize:{value:new rt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Cn},attenuationDistance:{value:0},attenuationColor:{value:new Dt(0)},specularColor:{value:new Dt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Cn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Cn},anisotropyVector:{value:new rt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Cn}}]),vertexShader:Nn.meshphysical_vert,fragmentShader:Nn.meshphysical_frag};const b2={r:0,b:0,g:0},Ep=new Qo,VRe=new yn;function zRe(n,e,t,r,i,a,s){const o=new Dt(0);let l=a===!0?0:1,u,c,d=null,f=0,m=null;function v(E){let T=E.isScene===!0?E.background:null;return T&&T.isTexture&&(T=(E.backgroundBlurriness>0?t:e).get(T)),T}function _(E){let T=!1;const D=v(E);D===null?x(o,l):D&&D.isColor&&(x(D,1),T=!0);const F=n.xr.getEnvironmentBlendMode();F==="additive"?r.buffers.color.setClear(0,0,0,1,s):F==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(n.autoClear||T)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function w(E,T){const D=v(T);D&&(D.isCubeTexture||D.mapping===dy)?(c===void 0&&(c=new Zi(new ag(1,1,1),new Su({name:"BackgroundCubeMaterial",uniforms:Hv(iu.backgroundCube.uniforms),vertexShader:iu.backgroundCube.vertexShader,fragmentShader:iu.backgroundCube.fragmentShader,side:Qs,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(F,P,N){this.matrixWorld.copyPosition(N.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),Ep.copy(T.backgroundRotation),Ep.x*=-1,Ep.y*=-1,Ep.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(Ep.y*=-1,Ep.z*=-1),c.material.uniforms.envMap.value=D,c.material.uniforms.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=T.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(VRe.makeRotationFromEuler(Ep)),c.material.toneMapped=rr.getTransfer(D.colorSpace)!==Cr,(d!==D||f!==D.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,d=D,f=D.version,m=n.toneMapping),c.layers.enableAll(),E.unshift(c,c.geometry,c.material,0,0,null)):D&&D.isTexture&&(u===void 0&&(u=new Zi(new py(2,2),new Su({name:"BackgroundMaterial",uniforms:Hv(iu.background.uniforms),vertexShader:iu.background.vertexShader,fragmentShader:iu.background.fragmentShader,side:Rd,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=D,u.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,u.material.toneMapped=rr.getTransfer(D.colorSpace)!==Cr,D.matrixAutoUpdate===!0&&D.updateMatrix(),u.material.uniforms.uvTransform.value.copy(D.matrix),(d!==D||f!==D.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,d=D,f=D.version,m=n.toneMapping),u.layers.enableAll(),E.unshift(u,u.geometry,u.material,0,0,null))}function x(E,T){E.getRGB(b2,KJ(n)),r.buffers.color.setClear(b2.r,b2.g,b2.b,T,s)}function S(){c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return o},setClearColor:function(E,T=1){o.set(E),l=T,x(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(E){l=E,x(o,l)},render:_,addToRenderList:w,dispose:S}}function HRe(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=f(null);let a=i,s=!1;function o(R,B,G,H,K){let ne=!1;const re=d(H,G,B);a!==re&&(a=re,u(a.object)),ne=m(R,H,G,K),ne&&v(R,H,G,K),K!==null&&e.update(K,n.ELEMENT_ARRAY_BUFFER),(ne||s)&&(s=!1,T(R,B,G,H),K!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(K).buffer))}function l(){return n.createVertexArray()}function u(R){return n.bindVertexArray(R)}function c(R){return n.deleteVertexArray(R)}function d(R,B,G){const H=G.wireframe===!0;let K=r[R.id];K===void 0&&(K={},r[R.id]=K);let ne=K[B.id];ne===void 0&&(ne={},K[B.id]=ne);let re=ne[H];return re===void 0&&(re=f(l()),ne[H]=re),re}function f(R){const B=[],G=[],H=[];for(let K=0;K<t;K++)B[K]=0,G[K]=0,H[K]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:B,enabledAttributes:G,attributeDivisors:H,object:R,attributes:{},index:null}}function m(R,B,G,H){const K=a.attributes,ne=B.attributes;let re=0;const oe=G.getAttributes();for(const $ in oe)if(oe[$].location>=0){const se=K[$];let pe=ne[$];if(pe===void 0&&($==="instanceMatrix"&&R.instanceMatrix&&(pe=R.instanceMatrix),$==="instanceColor"&&R.instanceColor&&(pe=R.instanceColor)),se===void 0||se.attribute!==pe||pe&&se.data!==pe.data)return!0;re++}return a.attributesNum!==re||a.index!==H}function v(R,B,G,H){const K={},ne=B.attributes;let re=0;const oe=G.getAttributes();for(const $ in oe)if(oe[$].location>=0){let se=ne[$];se===void 0&&($==="instanceMatrix"&&R.instanceMatrix&&(se=R.instanceMatrix),$==="instanceColor"&&R.instanceColor&&(se=R.instanceColor));const pe={};pe.attribute=se,se&&se.data&&(pe.data=se.data),K[$]=pe,re++}a.attributes=K,a.attributesNum=re,a.index=H}function _(){const R=a.newAttributes;for(let B=0,G=R.length;B<G;B++)R[B]=0}function w(R){x(R,0)}function x(R,B){const G=a.newAttributes,H=a.enabledAttributes,K=a.attributeDivisors;G[R]=1,H[R]===0&&(n.enableVertexAttribArray(R),H[R]=1),K[R]!==B&&(n.vertexAttribDivisor(R,B),K[R]=B)}function S(){const R=a.newAttributes,B=a.enabledAttributes;for(let G=0,H=B.length;G<H;G++)B[G]!==R[G]&&(n.disableVertexAttribArray(G),B[G]=0)}function E(R,B,G,H,K,ne,re){re===!0?n.vertexAttribIPointer(R,B,G,K,ne):n.vertexAttribPointer(R,B,G,H,K,ne)}function T(R,B,G,H){_();const K=H.attributes,ne=G.getAttributes(),re=B.defaultAttributeValues;for(const oe in ne){const $=ne[oe];if($.location>=0){let ue=K[oe];if(ue===void 0&&(oe==="instanceMatrix"&&R.instanceMatrix&&(ue=R.instanceMatrix),oe==="instanceColor"&&R.instanceColor&&(ue=R.instanceColor)),ue!==void 0){const se=ue.normalized,pe=ue.itemSize,Fe=e.get(ue);if(Fe===void 0)continue;const $e=Fe.buffer,at=Fe.type,me=Fe.bytesPerElement,Le=at===n.INT||at===n.UNSIGNED_INT||ue.gpuType===rk;if(ue.isInterleavedBufferAttribute){const Se=ue.data,ge=Se.stride,Ge=ue.offset;if(Se.isInstancedInterleavedBuffer){for(let Me=0;Me<$.locationSize;Me++)x($.location+Me,Se.meshPerAttribute);R.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=Se.meshPerAttribute*Se.count)}else for(let Me=0;Me<$.locationSize;Me++)w($.location+Me);n.bindBuffer(n.ARRAY_BUFFER,$e);for(let Me=0;Me<$.locationSize;Me++)E($.location+Me,pe/$.locationSize,at,se,ge*me,(Ge+pe/$.locationSize*Me)*me,Le)}else{if(ue.isInstancedBufferAttribute){for(let Se=0;Se<$.locationSize;Se++)x($.location+Se,ue.meshPerAttribute);R.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let Se=0;Se<$.locationSize;Se++)w($.location+Se);n.bindBuffer(n.ARRAY_BUFFER,$e);for(let Se=0;Se<$.locationSize;Se++)E($.location+Se,pe/$.locationSize,at,se,pe*me,pe/$.locationSize*Se*me,Le)}}else if(re!==void 0){const se=re[oe];if(se!==void 0)switch(se.length){case 2:n.vertexAttrib2fv($.location,se);break;case 3:n.vertexAttrib3fv($.location,se);break;case 4:n.vertexAttrib4fv($.location,se);break;default:n.vertexAttrib1fv($.location,se)}}}}S()}function D(){N();for(const R in r){const B=r[R];for(const G in B){const H=B[G];for(const K in H)c(H[K].object),delete H[K];delete B[G]}delete r[R]}}function F(R){if(r[R.id]===void 0)return;const B=r[R.id];for(const G in B){const H=B[G];for(const K in H)c(H[K].object),delete H[K];delete B[G]}delete r[R.id]}function P(R){for(const B in r){const G=r[B];if(G[R.id]===void 0)continue;const H=G[R.id];for(const K in H)c(H[K].object),delete H[K];delete G[R.id]}}function N(){I(),s=!0,a!==i&&(a=i,u(a.object))}function I(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:N,resetDefaultState:I,dispose:D,releaseStatesOfGeometry:F,releaseStatesOfProgram:P,initAttributes:_,enableAttribute:w,disableUnusedAttributes:S}}function GRe(n,e,t){let r;function i(u){r=u}function a(u,c){n.drawArrays(r,u,c),t.update(c,r,1)}function s(u,c,d){d!==0&&(n.drawArraysInstanced(r,u,c,d),t.update(c,r,d))}function o(u,c,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,u,0,c,0,d);let m=0;for(let v=0;v<d;v++)m+=c[v];t.update(m,r,1)}function l(u,c,d,f){if(d===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<u.length;v++)s(u[v],c[v],f[v]);else{m.multiDrawArraysInstancedWEBGL(r,u,0,c,0,f,0,d);let v=0;for(let _=0;_<d;_++)v+=c[_]*f[_];t.update(v,r,1)}}this.setMode=i,this.render=a,this.renderInstances=s,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function WRe(n,e,t,r){let i;function a(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(P){return!(P!==bs&&r.convert(P)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(P){const N=P===hy&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==Nl&&r.convert(P)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==Ao&&!N)}function l(P){if(P==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const c=l(u);c!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",c,"instead."),u=c);const d=t.logarithmicDepthBuffer===!0,f=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),m=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),_=n.getParameter(n.MAX_TEXTURE_SIZE),w=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),x=n.getParameter(n.MAX_VERTEX_ATTRIBS),S=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),E=n.getParameter(n.MAX_VARYING_VECTORS),T=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),D=v>0,F=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:d,reversedDepthBuffer:f,maxTextures:m,maxVertexTextures:v,maxTextureSize:_,maxCubemapSize:w,maxAttributes:x,maxVertexUniforms:S,maxVaryings:E,maxFragmentUniforms:T,vertexTextures:D,maxSamples:F}}function qRe(n){const e=this;let t=null,r=0,i=!1,a=!1;const s=new nd,o=new Cn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const m=d.length!==0||f||r!==0||i;return i=f,r=d.length,m},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(d,f){t=c(d,f,0)},this.setState=function(d,f,m){const v=d.clippingPlanes,_=d.clipIntersection,w=d.clipShadows,x=n.get(d);if(!i||v===null||v.length===0||a&&!w)a?c(null):u();else{const S=a?0:r,E=S*4;let T=x.clippingState||null;l.value=T,T=c(v,f,E,m);for(let D=0;D!==E;++D)T[D]=t[D];x.clippingState=T,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=S}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(d,f,m,v){const _=d!==null?d.length:0;let w=null;if(_!==0){if(w=l.value,v!==!0||w===null){const x=m+_*4,S=f.matrixWorldInverse;o.getNormalMatrix(S),(w===null||w.length<x)&&(w=new Float32Array(x));for(let E=0,T=m;E!==_;++E,T+=4)s.copy(d[E]).applyMatrix4(S,o),s.normal.toArray(w,T),w[T+3]=s.constant}l.value=w,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,w}}function $Re(n){let e=new WeakMap;function t(s,o){return o===i_?s.mapping=Dd:o===a_&&(s.mapping=Rf),s}function r(s){if(s&&s.isTexture){const o=s.mapping;if(o===i_||o===a_)if(e.has(s)){const l=e.get(s).texture;return t(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const u=new QJ(l.height);return u.fromEquirectangularTexture(n,s),e.set(s,u),s.addEventListener("dispose",i),t(u.texture,s.mapping)}else return null}}return s}function i(s){const o=s.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}const R0=4,hV=[.125,.215,.35,.446,.526,.582],Vp=20,wI=new vf,fV=new Dt;let bI=null,SI=0,EI=0,AI=!1;const Bp=(1+Math.sqrt(5))/2,Yg=1/Bp,pV=[new ie(-Bp,Yg,0),new ie(Bp,Yg,0),new ie(-Yg,0,Bp),new ie(Yg,0,Bp),new ie(0,Bp,-Yg),new ie(0,Bp,Yg),new ie(-1,1,-1),new ie(1,1,-1),new ie(-1,1,1),new ie(1,1,1)],XRe=new ie;class DR{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100,a={}){const{size:s=256,position:o=XRe}=a;bI=this._renderer.getRenderTarget(),SI=this._renderer.getActiveCubeFace(),EI=this._renderer.getActiveMipmapLevel(),AI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,r,i,l,o),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=vV(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=gV(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(bI,SI,EI),this._renderer.xr.enabled=AI,e.scissorTest=!1,S2(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Dd||e.mapping===Rf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),bI=this._renderer.getRenderTarget(),SI=this._renderer.getActiveCubeFace(),EI=this._renderer.getActiveMipmapLevel(),AI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:ha,minFilter:ha,generateMipmaps:!1,type:hy,format:bs,colorSpace:Um,depthBuffer:!1},i=mV(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=mV(e,t,r);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=KRe(a)),this._blurMaterial=YRe(a,e,t)}return i}_compileMaterial(e){const t=new Zi(this._lodPlanes[0],e);this._renderer.compile(t,wI)}_sceneToCubeUV(e,t,r,i,a){const l=new Bi(90,1,t,r),u=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,m=d.toneMapping;d.getClearColor(fV),d.toneMapping=pc,d.autoClear=!1,d.state.buffers.depth.getReversed()&&(d.setRenderTarget(i),d.clearDepth(),d.setRenderTarget(null));const _=new qf({name:"PMREM.Background",side:Qs,depthWrite:!1,depthTest:!1}),w=new Zi(new ag,_);let x=!1;const S=e.background;S?S.isColor&&(_.color.copy(S),e.background=null,x=!0):(_.color.copy(fV),x=!0);for(let E=0;E<6;E++){const T=E%3;T===0?(l.up.set(0,u[E],0),l.position.set(a.x,a.y,a.z),l.lookAt(a.x+c[E],a.y,a.z)):T===1?(l.up.set(0,0,u[E]),l.position.set(a.x,a.y,a.z),l.lookAt(a.x,a.y+c[E],a.z)):(l.up.set(0,u[E],0),l.position.set(a.x,a.y,a.z),l.lookAt(a.x,a.y,a.z+c[E]));const D=this._cubeSize;S2(i,T*D,E>2?D:0,D,D),d.setRenderTarget(i),x&&d.render(w,l),d.render(e,l)}w.geometry.dispose(),w.material.dispose(),d.toneMapping=m,d.autoClear=f,e.background=S}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Dd||e.mapping===Rf;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=vV()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=gV());const a=i?this._cubemapMaterial:this._equirectMaterial,s=new Zi(this._lodPlanes[0],a),o=a.uniforms;o.envMap.value=e;const l=this._cubeSize;S2(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(s,wI)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let a=1;a<i;a++){const s=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),o=pV[(i-a-1)%pV.length];this._blur(e,a-1,a,s,o)}t.autoClear=r}_blur(e,t,r,i,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,r,i,"latitudinal",a),this._halfBlur(s,e,r,r,i,"longitudinal",a)}_halfBlur(e,t,r,i,a,s,o){const l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,d=new Zi(this._lodPlanes[i],u),f=u.uniforms,m=this._sizeLods[r]-1,v=isFinite(a)?Math.PI/(2*m):2*Math.PI/(2*Vp-1),_=a/v,w=isFinite(a)?1+Math.floor(c*_):Vp;w>Vp&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${Vp}`);const x=[];let S=0;for(let P=0;P<Vp;++P){const N=P/_,I=Math.exp(-N*N/2);x.push(I),P===0?S+=I:P<w&&(S+=2*I)}for(let P=0;P<x.length;P++)x[P]=x[P]/S;f.envMap.value=e.texture,f.samples.value=w,f.weights.value=x,f.latitudinal.value=s==="latitudinal",o&&(f.poleAxis.value=o);const{_lodMax:E}=this;f.dTheta.value=v,f.mipInt.value=E-r;const T=this._sizeLods[i],D=3*T*(i>E-R0?i-E+R0:0),F=4*(this._cubeSize-T);S2(t,D,F,3*T,2*T),l.setRenderTarget(t),l.render(d,wI)}}function KRe(n){const e=[],t=[],r=[];let i=n;const a=n-R0+1+hV.length;for(let s=0;s<a;s++){const o=Math.pow(2,i);t.push(o);let l=1/o;s>n-R0?l=hV[s-n+R0-1]:s===0&&(l=0),r.push(l);const u=1/(o-2),c=-u,d=1+u,f=[c,c,d,c,d,d,c,c,d,d,c,d],m=6,v=6,_=3,w=2,x=1,S=new Float32Array(_*v*m),E=new Float32Array(w*v*m),T=new Float32Array(x*v*m);for(let F=0;F<m;F++){const P=F%3*2/3-1,N=F>2?0:-1,I=[P,N,0,P+2/3,N,0,P+2/3,N+1,0,P,N,0,P+2/3,N+1,0,P,N+1,0];S.set(I,_*v*F),E.set(f,w*v*F);const R=[F,F,F,F,F,F];T.set(R,x*v*F)}const D=new In;D.setAttribute("position",new Lr(S,_)),D.setAttribute("uv",new Lr(E,w)),D.setAttribute("faceIndex",new Lr(T,x)),e.push(D),i>R0&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function mV(n,e,t){const r=new bc(n,e,t);return r.texture.mapping=dy,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function S2(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function YRe(n,e,t){const r=new Float32Array(Vp),i=new ie(0,1,0);return new Su({name:"SphericalGaussianBlur",defines:{n:Vp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:g4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:yd,depthTest:!1,depthWrite:!1})}function gV(){return new Su({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:g4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:yd,depthTest:!1,depthWrite:!1})}function vV(){return new Su({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:g4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:yd,depthTest:!1,depthWrite:!1})}function g4(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function ZRe(n){let e=new WeakMap,t=null;function r(o){if(o&&o.isTexture){const l=o.mapping,u=l===i_||l===a_,c=l===Dd||l===Rf;if(u||c){let d=e.get(o);const f=d!==void 0?d.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==f)return t===null&&(t=new DR(n)),d=u?t.fromEquirectangular(o,d):t.fromCubemap(o,d),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),d.texture;if(d!==void 0)return d.texture;{const m=o.image;return u&&m&&m.height>0||c&&m&&i(m)?(t===null&&(t=new DR(n)),d=u?t.fromEquirectangular(o):t.fromCubemap(o),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),o.addEventListener("dispose",a),d.texture):null}}}return o}function i(o){let l=0;const u=6;for(let c=0;c<u;c++)o[c]!==void 0&&l++;return l===u}function a(o){const l=o.target;l.removeEventListener("dispose",a);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:s}}function QRe(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&tv("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function JRe(n,e,t,r){const i={},a=new WeakMap;function s(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const v in f.attributes)e.remove(f.attributes[v]);f.removeEventListener("dispose",s),delete i[f.id];const m=a.get(f);m&&(e.remove(m),a.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function o(d,f){return i[f.id]===!0||(f.addEventListener("dispose",s),i[f.id]=!0,t.memory.geometries++),f}function l(d){const f=d.attributes;for(const m in f)e.update(f[m],n.ARRAY_BUFFER)}function u(d){const f=[],m=d.index,v=d.attributes.position;let _=0;if(m!==null){const S=m.array;_=m.version;for(let E=0,T=S.length;E<T;E+=3){const D=S[E+0],F=S[E+1],P=S[E+2];f.push(D,F,F,P,P,D)}}else if(v!==void 0){const S=v.array;_=v.version;for(let E=0,T=S.length/3-1;E<T;E+=3){const D=E+0,F=E+1,P=E+2;f.push(D,F,F,P,P,D)}}else return;const w=new(WJ(f)?GO:HO)(f,1);w.version=_;const x=a.get(d);x&&e.remove(x),a.set(d,w)}function c(d){const f=a.get(d);if(f){const m=d.index;m!==null&&f.version<m.version&&u(d)}else u(d);return a.get(d)}return{get:o,update:l,getWireframeAttribute:c}}function e3e(n,e,t){let r;function i(f){r=f}let a,s;function o(f){a=f.type,s=f.bytesPerElement}function l(f,m){n.drawElements(r,m,a,f*s),t.update(m,r,1)}function u(f,m,v){v!==0&&(n.drawElementsInstanced(r,m,a,f*s,v),t.update(m,r,v))}function c(f,m,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,m,0,a,f,0,v);let w=0;for(let x=0;x<v;x++)w+=m[x];t.update(w,r,1)}function d(f,m,v,_){if(v===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let x=0;x<f.length;x++)u(f[x]/s,m[x],_[x]);else{w.multiDrawElementsInstancedWEBGL(r,m,0,a,f,0,_,0,v);let x=0;for(let S=0;S<v;S++)x+=m[S]*_[S];t.update(x,r,1)}}this.setMode=i,this.setIndex=o,this.render=l,this.renderInstances=u,this.renderMultiDraw=c,this.renderMultiDrawInstances=d}function t3e(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,s,o){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=o*(a/3);break;case n.LINES:t.lines+=o*(a/2);break;case n.LINE_STRIP:t.lines+=o*(a-1);break;case n.LINE_LOOP:t.lines+=o*a;break;case n.POINTS:t.points+=o*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function n3e(n,e,t){const r=new WeakMap,i=new sr;function a(s,o,l){const u=s.morphTargetInfluences,c=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,d=c!==void 0?c.length:0;let f=r.get(o);if(f===void 0||f.count!==d){let R=function(){N.dispose(),r.delete(o),o.removeEventListener("dispose",R)};var m=R;f!==void 0&&f.texture.dispose();const v=o.morphAttributes.position!==void 0,_=o.morphAttributes.normal!==void 0,w=o.morphAttributes.color!==void 0,x=o.morphAttributes.position||[],S=o.morphAttributes.normal||[],E=o.morphAttributes.color||[];let T=0;v===!0&&(T=1),_===!0&&(T=2),w===!0&&(T=3);let D=o.attributes.position.count*T,F=1;D>e.maxTextureSize&&(F=Math.ceil(D/e.maxTextureSize),D=e.maxTextureSize);const P=new Float32Array(D*F*4*d),N=new ck(P,D,F,d);N.type=Ao,N.needsUpdate=!0;const I=T*4;for(let B=0;B<d;B++){const G=x[B],H=S[B],K=E[B],ne=D*F*4*B;for(let re=0;re<G.count;re++){const oe=re*I;v===!0&&(i.fromBufferAttribute(G,re),P[ne+oe+0]=i.x,P[ne+oe+1]=i.y,P[ne+oe+2]=i.z,P[ne+oe+3]=0),_===!0&&(i.fromBufferAttribute(H,re),P[ne+oe+4]=i.x,P[ne+oe+5]=i.y,P[ne+oe+6]=i.z,P[ne+oe+7]=0),w===!0&&(i.fromBufferAttribute(K,re),P[ne+oe+8]=i.x,P[ne+oe+9]=i.y,P[ne+oe+10]=i.z,P[ne+oe+11]=K.itemSize===4?i.w:1)}}f={count:d,texture:N,size:new rt(D,F)},r.set(o,f),o.addEventListener("dispose",R)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let v=0;for(let w=0;w<u.length;w++)v+=u[w];const _=o.morphTargetsRelative?1:1-v;l.getUniforms().setValue(n,"morphTargetBaseInfluence",_),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",f.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",f.size)}return{update:a}}function r3e(n,e,t,r){let i=new WeakMap;function a(l){const u=r.render.frame,c=l.geometry,d=e.get(l,c);if(i.get(d)!==u&&(e.update(d),i.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==u&&(f.update(),i.set(f,u))}return d}function s(){i=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:a,dispose:s}}const Zee=new ui,yV=new KO(1,1),Qee=new ck,Jee=new dk,ete=new sw,xV=[],_V=[],wV=new Float32Array(16),bV=new Float32Array(9),SV=new Float32Array(4);function my(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let a=xV[i];if(a===void 0&&(a=new Float32Array(i),xV[i]=a),e!==0){r.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=t,n[s].toArray(a,o)}return a}function ma(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function ga(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function Rk(n,e){let t=_V[e];t===void 0&&(t=new Int32Array(e),_V[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function i3e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function a3e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ma(t,e))return;n.uniform2fv(this.addr,e),ga(t,e)}}function s3e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ma(t,e))return;n.uniform3fv(this.addr,e),ga(t,e)}}function o3e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ma(t,e))return;n.uniform4fv(this.addr,e),ga(t,e)}}function l3e(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ma(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ga(t,e)}else{if(ma(t,r))return;SV.set(r),n.uniformMatrix2fv(this.addr,!1,SV),ga(t,r)}}function u3e(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ma(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ga(t,e)}else{if(ma(t,r))return;bV.set(r),n.uniformMatrix3fv(this.addr,!1,bV),ga(t,r)}}function c3e(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ma(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ga(t,e)}else{if(ma(t,r))return;wV.set(r),n.uniformMatrix4fv(this.addr,!1,wV),ga(t,r)}}function d3e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function h3e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ma(t,e))return;n.uniform2iv(this.addr,e),ga(t,e)}}function f3e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ma(t,e))return;n.uniform3iv(this.addr,e),ga(t,e)}}function p3e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ma(t,e))return;n.uniform4iv(this.addr,e),ga(t,e)}}function m3e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function g3e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ma(t,e))return;n.uniform2uiv(this.addr,e),ga(t,e)}}function v3e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ma(t,e))return;n.uniform3uiv(this.addr,e),ga(t,e)}}function y3e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ma(t,e))return;n.uniform4uiv(this.addr,e),ga(t,e)}}function x3e(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let a;this.type===n.SAMPLER_2D_SHADOW?(yV.compareFunction=UO,a=yV):a=Zee,t.setTexture2D(e||a,i)}function _3e(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||Jee,i)}function w3e(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||ete,i)}function b3e(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||Qee,i)}function S3e(n){switch(n){case 5126:return i3e;case 35664:return a3e;case 35665:return s3e;case 35666:return o3e;case 35674:return l3e;case 35675:return u3e;case 35676:return c3e;case 5124:case 35670:return d3e;case 35667:case 35671:return h3e;case 35668:case 35672:return f3e;case 35669:case 35673:return p3e;case 5125:return m3e;case 36294:return g3e;case 36295:return v3e;case 36296:return y3e;case 35678:case 36198:case 36298:case 36306:case 35682:return x3e;case 35679:case 36299:case 36307:return _3e;case 35680:case 36300:case 36308:case 36293:return w3e;case 36289:case 36303:case 36311:case 36292:return b3e}}function E3e(n,e){n.uniform1fv(this.addr,e)}function A3e(n,e){const t=my(e,this.size,2);n.uniform2fv(this.addr,t)}function T3e(n,e){const t=my(e,this.size,3);n.uniform3fv(this.addr,t)}function k3e(n,e){const t=my(e,this.size,4);n.uniform4fv(this.addr,t)}function C3e(n,e){const t=my(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function M3e(n,e){const t=my(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function I3e(n,e){const t=my(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function P3e(n,e){n.uniform1iv(this.addr,e)}function N3e(n,e){n.uniform2iv(this.addr,e)}function R3e(n,e){n.uniform3iv(this.addr,e)}function D3e(n,e){n.uniform4iv(this.addr,e)}function L3e(n,e){n.uniform1uiv(this.addr,e)}function O3e(n,e){n.uniform2uiv(this.addr,e)}function F3e(n,e){n.uniform3uiv(this.addr,e)}function j3e(n,e){n.uniform4uiv(this.addr,e)}function B3e(n,e,t){const r=this.cache,i=e.length,a=Rk(t,i);ma(r,a)||(n.uniform1iv(this.addr,a),ga(r,a));for(let s=0;s!==i;++s)t.setTexture2D(e[s]||Zee,a[s])}function U3e(n,e,t){const r=this.cache,i=e.length,a=Rk(t,i);ma(r,a)||(n.uniform1iv(this.addr,a),ga(r,a));for(let s=0;s!==i;++s)t.setTexture3D(e[s]||Jee,a[s])}function V3e(n,e,t){const r=this.cache,i=e.length,a=Rk(t,i);ma(r,a)||(n.uniform1iv(this.addr,a),ga(r,a));for(let s=0;s!==i;++s)t.setTextureCube(e[s]||ete,a[s])}function z3e(n,e,t){const r=this.cache,i=e.length,a=Rk(t,i);ma(r,a)||(n.uniform1iv(this.addr,a),ga(r,a));for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||Qee,a[s])}function H3e(n){switch(n){case 5126:return E3e;case 35664:return A3e;case 35665:return T3e;case 35666:return k3e;case 35674:return C3e;case 35675:return M3e;case 35676:return I3e;case 5124:case 35670:return P3e;case 35667:case 35671:return N3e;case 35668:case 35672:return R3e;case 35669:case 35673:return D3e;case 5125:return L3e;case 36294:return O3e;case 36295:return F3e;case 36296:return j3e;case 35678:case 36198:case 36298:case 36306:case 35682:return B3e;case 35679:case 36299:case 36307:return U3e;case 35680:case 36300:case 36308:case 36293:return V3e;case 36289:case 36303:case 36311:case 36292:return z3e}}class G3e{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=S3e(t.type)}}class W3e{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=H3e(t.type)}}class q3e{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let a=0,s=i.length;a!==s;++a){const o=i[a];o.setValue(e,t[o.id],r)}}}const TI=/(\w+)(\])?(\[|\.)?/g;function EV(n,e){n.seq.push(e),n.map[e.id]=e}function $3e(n,e,t){const r=n.name,i=r.length;for(TI.lastIndex=0;;){const a=TI.exec(r),s=TI.lastIndex;let o=a[1];const l=a[2]==="]",u=a[3];if(l&&(o=o|0),u===void 0||u==="["&&s+2===i){EV(t,u===void 0?new G3e(o,n,e):new W3e(o,n,e));break}else{let d=t.map[o];d===void 0&&(d=new q3e(o),EV(t,d)),t=d}}}class hS{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const a=e.getActiveUniform(t,i),s=e.getUniformLocation(t,a.name);$3e(a,s,this)}}setValue(e,t,r,i){const a=this.map[t];a!==void 0&&a.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let a=0,s=t.length;a!==s;++a){const o=t[a],l=r[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,a=e.length;i!==a;++i){const s=e[i];s.id in t&&r.push(s)}return r}}function AV(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const X3e=37297;let K3e=0;function Y3e(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let s=i;s<a;s++){const o=s+1;r.push(`${o===e?">":" "} ${o}: ${t[s]}`)}return r.join(`
`)}const TV=new Cn;function Z3e(n){rr._getMatrix(TV,rr.workingColorSpace,n);const e=`mat3( ${TV.elements.map(t=>t.toFixed(4))} )`;switch(rr.getTransfer(n)){case c_:return[e,"LinearTransferOETF"];case Cr:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function kV(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),a=(n.getShaderInfoLog(e)||"").trim();if(r&&a==="")return"";const s=/ERROR: 0:(\d+)/.exec(a);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+a+`

`+Y3e(n.getShaderSource(e),o)}else return a}function Q3e(n,e){const t=Z3e(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function J3e(n,e){let t;switch(e){case AJ:t="Linear";break;case TJ:t="Reinhard";break;case kJ:t="Cineon";break;case IO:t="ACESFilmic";break;case MJ:t="AgX";break;case IJ:t="Neutral";break;case CJ:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const E2=new ie;function eDe(){rr.getLuminanceCoefficients(E2);const n=E2.x.toFixed(4),e=E2.y.toFixed(4),t=E2.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function tDe(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Px).join(`
`)}function nDe(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function rDe(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const a=n.getActiveAttrib(e,i),s=a.name;let o=1;a.type===n.FLOAT_MAT2&&(o=2),a.type===n.FLOAT_MAT3&&(o=3),a.type===n.FLOAT_MAT4&&(o=4),t[s]={type:a.type,location:n.getAttribLocation(e,s),locationSize:o}}return t}function Px(n){return n!==""}function CV(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function MV(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const iDe=/^[ \t]*#include +<([\w\d./]+)>/gm;function LR(n){return n.replace(iDe,sDe)}const aDe=new Map;function sDe(n,e){let t=Nn[e];if(t===void 0){const r=aDe.get(e);if(r!==void 0)t=Nn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return LR(t)}const oDe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function IV(n){return n.replace(oDe,lDe)}function lDe(n,e,t,r){let i="";for(let a=parseInt(e);a<parseInt(t);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function PV(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function uDe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===tk?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===a1?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ql&&(e="SHADOWMAP_TYPE_VSM"),e}function cDe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Dd:case Rf:e="ENVMAP_TYPE_CUBE";break;case dy:e="ENVMAP_TYPE_CUBE_UV";break}return e}function dDe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Rf:e="ENVMAP_MODE_REFRACTION";break}return e}function hDe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case rw:e="ENVMAP_BLENDING_MULTIPLY";break;case SJ:e="ENVMAP_BLENDING_MIX";break;case EJ:e="ENVMAP_BLENDING_ADD";break}return e}function fDe(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function pDe(n,e,t,r){const i=n.getContext(),a=t.defines;let s=t.vertexShader,o=t.fragmentShader;const l=uDe(t),u=cDe(t),c=dDe(t),d=hDe(t),f=fDe(t),m=tDe(t),v=nDe(a),_=i.createProgram();let w,x,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Px).join(`
`),w.length>0&&(w+=`
`),x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Px).join(`
`),x.length>0&&(x+=`
`)):(w=[PV(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Px).join(`
`),x=[PV(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==pc?"#define TONE_MAPPING":"",t.toneMapping!==pc?Nn.tonemapping_pars_fragment:"",t.toneMapping!==pc?J3e("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Nn.colorspace_pars_fragment,Q3e("linearToOutputTexel",t.outputColorSpace),eDe(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Px).join(`
`)),s=LR(s),s=CV(s,t),s=MV(s,t),o=LR(o),o=CV(o,t),o=MV(o,t),s=IV(s),o=IV(o),t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,w=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,x=["#define varying in",t.glslVersion===AR?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===AR?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const E=S+w+s,T=S+x+o,D=AV(i,i.VERTEX_SHADER,E),F=AV(i,i.FRAGMENT_SHADER,T);i.attachShader(_,D),i.attachShader(_,F),t.index0AttributeName!==void 0?i.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(_,0,"position"),i.linkProgram(_);function P(B){if(n.debug.checkShaderErrors){const G=i.getProgramInfoLog(_)||"",H=i.getShaderInfoLog(D)||"",K=i.getShaderInfoLog(F)||"",ne=G.trim(),re=H.trim(),oe=K.trim();let $=!0,ue=!0;if(i.getProgramParameter(_,i.LINK_STATUS)===!1)if($=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,_,D,F);else{const se=kV(i,D,"vertex"),pe=kV(i,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(_,i.VALIDATE_STATUS)+`

Material Name: `+B.name+`
Material Type: `+B.type+`

Program Info Log: `+ne+`
`+se+`
`+pe)}else ne!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ne):(re===""||oe==="")&&(ue=!1);ue&&(B.diagnostics={runnable:$,programLog:ne,vertexShader:{log:re,prefix:w},fragmentShader:{log:oe,prefix:x}})}i.deleteShader(D),i.deleteShader(F),N=new hS(i,_),I=rDe(i,_)}let N;this.getUniforms=function(){return N===void 0&&P(this),N};let I;this.getAttributes=function(){return I===void 0&&P(this),I};let R=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return R===!1&&(R=i.getProgramParameter(_,X3e)),R},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=K3e++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=D,this.fragmentShader=F,this}let mDe=0;class gDe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),a=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new vDe(e),t.set(e,r)),r}}class vDe{constructor(e){this.id=mDe++,this.code=e,this.usedTimes=0}}function yDe(n,e,t,r,i,a,s){const o=new gm,l=new gDe,u=new Set,c=[],d=i.logarithmicDepthBuffer,f=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(I){return u.add(I),I===0?"uv":`uv${I}`}function w(I,R,B,G,H){const K=G.fog,ne=H.geometry,re=I.isMeshStandardMaterial?G.environment:null,oe=(I.isMeshStandardMaterial?t:e).get(I.envMap||re),$=oe&&oe.mapping===dy?oe.image.height:null,ue=v[I.type];I.precision!==null&&(m=i.getMaxPrecision(I.precision),m!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",m,"instead."));const se=ne.morphAttributes.position||ne.morphAttributes.normal||ne.morphAttributes.color,pe=se!==void 0?se.length:0;let Fe=0;ne.morphAttributes.position!==void 0&&(Fe=1),ne.morphAttributes.normal!==void 0&&(Fe=2),ne.morphAttributes.color!==void 0&&(Fe=3);let $e,at,me,Le;if(ue){const xn=iu[ue];$e=xn.vertexShader,at=xn.fragmentShader}else $e=I.vertexShader,at=I.fragmentShader,l.update(I),me=l.getVertexShaderID(I),Le=l.getFragmentShaderID(I);const Se=n.getRenderTarget(),ge=n.state.buffers.depth.getReversed(),Ge=H.isInstancedMesh===!0,Me=H.isBatchedMesh===!0,Ce=!!I.map,Te=!!I.matcap,te=!!oe,Ee=!!I.aoMap,Pe=!!I.lightMap,Ke=!!I.bumpMap,je=!!I.normalMap,st=!!I.displacementMap,tt=!!I.emissiveMap,ee=!!I.metalnessMap,qe=!!I.roughnessMap,Ye=I.anisotropy>0,Z=I.clearcoat>0,X=I.dispersion>0,ve=I.iridescence>0,Ie=I.sheen>0,He=I.transmission>0,we=Ye&&!!I.anisotropyMap,pt=Z&&!!I.clearcoatMap,lt=Z&&!!I.clearcoatNormalMap,St=Z&&!!I.clearcoatRoughnessMap,bt=ve&&!!I.iridescenceMap,ut=ve&&!!I.iridescenceThicknessMap,xt=Ie&&!!I.sheenColorMap,Bt=Ie&&!!I.sheenRoughnessMap,ce=!!I.specularMap,Ne=!!I.specularColorMap,ht=!!I.specularIntensityMap,de=He&&!!I.transmissionMap,nt=He&&!!I.thicknessMap,fe=!!I.gradientMap,Ze=!!I.alphaMap,Qe=I.alphaTest>0,Oe=!!I.alphaHash,dt=!!I.extensions;let vt=pc;I.toneMapped&&(Se===null||Se.isXRRenderTarget===!0)&&(vt=n.toneMapping);const En={shaderID:ue,shaderType:I.type,shaderName:I.name,vertexShader:$e,fragmentShader:at,defines:I.defines,customVertexShaderID:me,customFragmentShaderID:Le,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:m,batching:Me,batchingColor:Me&&H._colorsTexture!==null,instancing:Ge,instancingColor:Ge&&H.instanceColor!==null,instancingMorph:Ge&&H.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:Se===null?n.outputColorSpace:Se.isXRRenderTarget===!0?Se.texture.colorSpace:Um,alphaToCoverage:!!I.alphaToCoverage,map:Ce,matcap:Te,envMap:te,envMapMode:te&&oe.mapping,envMapCubeUVHeight:$,aoMap:Ee,lightMap:Pe,bumpMap:Ke,normalMap:je,displacementMap:f&&st,emissiveMap:tt,normalMapObjectSpace:je&&I.normalMapType===FJ,normalMapTangentSpace:je&&I.normalMapType===Wf,metalnessMap:ee,roughnessMap:qe,anisotropy:Ye,anisotropyMap:we,clearcoat:Z,clearcoatMap:pt,clearcoatNormalMap:lt,clearcoatRoughnessMap:St,dispersion:X,iridescence:ve,iridescenceMap:bt,iridescenceThicknessMap:ut,sheen:Ie,sheenColorMap:xt,sheenRoughnessMap:Bt,specularMap:ce,specularColorMap:Ne,specularIntensityMap:ht,transmission:He,transmissionMap:de,thicknessMap:nt,gradientMap:fe,opaque:I.transparent===!1&&I.blending===pm&&I.alphaToCoverage===!1,alphaMap:Ze,alphaTest:Qe,alphaHash:Oe,combine:I.combine,mapUv:Ce&&_(I.map.channel),aoMapUv:Ee&&_(I.aoMap.channel),lightMapUv:Pe&&_(I.lightMap.channel),bumpMapUv:Ke&&_(I.bumpMap.channel),normalMapUv:je&&_(I.normalMap.channel),displacementMapUv:st&&_(I.displacementMap.channel),emissiveMapUv:tt&&_(I.emissiveMap.channel),metalnessMapUv:ee&&_(I.metalnessMap.channel),roughnessMapUv:qe&&_(I.roughnessMap.channel),anisotropyMapUv:we&&_(I.anisotropyMap.channel),clearcoatMapUv:pt&&_(I.clearcoatMap.channel),clearcoatNormalMapUv:lt&&_(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:St&&_(I.clearcoatRoughnessMap.channel),iridescenceMapUv:bt&&_(I.iridescenceMap.channel),iridescenceThicknessMapUv:ut&&_(I.iridescenceThicknessMap.channel),sheenColorMapUv:xt&&_(I.sheenColorMap.channel),sheenRoughnessMapUv:Bt&&_(I.sheenRoughnessMap.channel),specularMapUv:ce&&_(I.specularMap.channel),specularColorMapUv:Ne&&_(I.specularColorMap.channel),specularIntensityMapUv:ht&&_(I.specularIntensityMap.channel),transmissionMapUv:de&&_(I.transmissionMap.channel),thicknessMapUv:nt&&_(I.thicknessMap.channel),alphaMapUv:Ze&&_(I.alphaMap.channel),vertexTangents:!!ne.attributes.tangent&&(je||Ye),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!ne.attributes.color&&ne.attributes.color.itemSize===4,pointsUvs:H.isPoints===!0&&!!ne.attributes.uv&&(Ce||Ze),fog:!!K,useFog:I.fog===!0,fogExp2:!!K&&K.isFogExp2,flatShading:I.flatShading===!0&&I.wireframe===!1,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:d,reversedDepthBuffer:ge,skinning:H.isSkinnedMesh===!0,morphTargets:ne.morphAttributes.position!==void 0,morphNormals:ne.morphAttributes.normal!==void 0,morphColors:ne.morphAttributes.color!==void 0,morphTargetsCount:pe,morphTextureStride:Fe,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:I.dithering,shadowMapEnabled:n.shadowMap.enabled&&B.length>0,shadowMapType:n.shadowMap.type,toneMapping:vt,decodeVideoTexture:Ce&&I.map.isVideoTexture===!0&&rr.getTransfer(I.map.colorSpace)===Cr,decodeVideoTextureEmissive:tt&&I.emissiveMap.isVideoTexture===!0&&rr.getTransfer(I.emissiveMap.colorSpace)===Cr,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===tc,flipSided:I.side===Qs,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:dt&&I.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(dt&&I.extensions.multiDraw===!0||Me)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return En.vertexUv1s=u.has(1),En.vertexUv2s=u.has(2),En.vertexUv3s=u.has(3),u.clear(),En}function x(I){const R=[];if(I.shaderID?R.push(I.shaderID):(R.push(I.customVertexShaderID),R.push(I.customFragmentShaderID)),I.defines!==void 0)for(const B in I.defines)R.push(B),R.push(I.defines[B]);return I.isRawShaderMaterial===!1&&(S(R,I),E(R,I),R.push(n.outputColorSpace)),R.push(I.customProgramCacheKey),R.join()}function S(I,R){I.push(R.precision),I.push(R.outputColorSpace),I.push(R.envMapMode),I.push(R.envMapCubeUVHeight),I.push(R.mapUv),I.push(R.alphaMapUv),I.push(R.lightMapUv),I.push(R.aoMapUv),I.push(R.bumpMapUv),I.push(R.normalMapUv),I.push(R.displacementMapUv),I.push(R.emissiveMapUv),I.push(R.metalnessMapUv),I.push(R.roughnessMapUv),I.push(R.anisotropyMapUv),I.push(R.clearcoatMapUv),I.push(R.clearcoatNormalMapUv),I.push(R.clearcoatRoughnessMapUv),I.push(R.iridescenceMapUv),I.push(R.iridescenceThicknessMapUv),I.push(R.sheenColorMapUv),I.push(R.sheenRoughnessMapUv),I.push(R.specularMapUv),I.push(R.specularColorMapUv),I.push(R.specularIntensityMapUv),I.push(R.transmissionMapUv),I.push(R.thicknessMapUv),I.push(R.combine),I.push(R.fogExp2),I.push(R.sizeAttenuation),I.push(R.morphTargetsCount),I.push(R.morphAttributeCount),I.push(R.numDirLights),I.push(R.numPointLights),I.push(R.numSpotLights),I.push(R.numSpotLightMaps),I.push(R.numHemiLights),I.push(R.numRectAreaLights),I.push(R.numDirLightShadows),I.push(R.numPointLightShadows),I.push(R.numSpotLightShadows),I.push(R.numSpotLightShadowsWithMaps),I.push(R.numLightProbes),I.push(R.shadowMapType),I.push(R.toneMapping),I.push(R.numClippingPlanes),I.push(R.numClipIntersection),I.push(R.depthPacking)}function E(I,R){o.disableAll(),R.supportsVertexTextures&&o.enable(0),R.instancing&&o.enable(1),R.instancingColor&&o.enable(2),R.instancingMorph&&o.enable(3),R.matcap&&o.enable(4),R.envMap&&o.enable(5),R.normalMapObjectSpace&&o.enable(6),R.normalMapTangentSpace&&o.enable(7),R.clearcoat&&o.enable(8),R.iridescence&&o.enable(9),R.alphaTest&&o.enable(10),R.vertexColors&&o.enable(11),R.vertexAlphas&&o.enable(12),R.vertexUv1s&&o.enable(13),R.vertexUv2s&&o.enable(14),R.vertexUv3s&&o.enable(15),R.vertexTangents&&o.enable(16),R.anisotropy&&o.enable(17),R.alphaHash&&o.enable(18),R.batching&&o.enable(19),R.dispersion&&o.enable(20),R.batchingColor&&o.enable(21),R.gradientMap&&o.enable(22),I.push(o.mask),o.disableAll(),R.fog&&o.enable(0),R.useFog&&o.enable(1),R.flatShading&&o.enable(2),R.logarithmicDepthBuffer&&o.enable(3),R.reversedDepthBuffer&&o.enable(4),R.skinning&&o.enable(5),R.morphTargets&&o.enable(6),R.morphNormals&&o.enable(7),R.morphColors&&o.enable(8),R.premultipliedAlpha&&o.enable(9),R.shadowMapEnabled&&o.enable(10),R.doubleSided&&o.enable(11),R.flipSided&&o.enable(12),R.useDepthPacking&&o.enable(13),R.dithering&&o.enable(14),R.transmission&&o.enable(15),R.sheen&&o.enable(16),R.opaque&&o.enable(17),R.pointsUvs&&o.enable(18),R.decodeVideoTexture&&o.enable(19),R.decodeVideoTextureEmissive&&o.enable(20),R.alphaToCoverage&&o.enable(21),I.push(o.mask)}function T(I){const R=v[I.type];let B;if(R){const G=iu[R];B=YJ.clone(G.uniforms)}else B=I.uniforms;return B}function D(I,R){let B;for(let G=0,H=c.length;G<H;G++){const K=c[G];if(K.cacheKey===R){B=K,++B.usedTimes;break}}return B===void 0&&(B=new pDe(n,R,I,a),c.push(B)),B}function F(I){if(--I.usedTimes===0){const R=c.indexOf(I);c[R]=c[c.length-1],c.pop(),I.destroy()}}function P(I){l.remove(I)}function N(){l.dispose()}return{getParameters:w,getProgramCacheKey:x,getUniforms:T,acquireProgram:D,releaseProgram:F,releaseShaderCache:P,programs:c,dispose:N}}function xDe(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function r(s){n.delete(s)}function i(s,o,l){n.get(s)[o]=l}function a(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:a}}function _De(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function NV(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function RV(){const n=[];let e=0;const t=[],r=[],i=[];function a(){e=0,t.length=0,r.length=0,i.length=0}function s(d,f,m,v,_,w){let x=n[e];return x===void 0?(x={id:d.id,object:d,geometry:f,material:m,groupOrder:v,renderOrder:d.renderOrder,z:_,group:w},n[e]=x):(x.id=d.id,x.object=d,x.geometry=f,x.material=m,x.groupOrder=v,x.renderOrder=d.renderOrder,x.z=_,x.group=w),e++,x}function o(d,f,m,v,_,w){const x=s(d,f,m,v,_,w);m.transmission>0?r.push(x):m.transparent===!0?i.push(x):t.push(x)}function l(d,f,m,v,_,w){const x=s(d,f,m,v,_,w);m.transmission>0?r.unshift(x):m.transparent===!0?i.unshift(x):t.unshift(x)}function u(d,f){t.length>1&&t.sort(d||_De),r.length>1&&r.sort(f||NV),i.length>1&&i.sort(f||NV)}function c(){for(let d=e,f=n.length;d<f;d++){const m=n[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:a,push:o,unshift:l,finish:c,sort:u}}function wDe(){let n=new WeakMap;function e(r,i){const a=n.get(r);let s;return a===void 0?(s=new RV,n.set(r,[s])):i>=a.length?(s=new RV,a.push(s)):s=a[i],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function bDe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ie,color:new Dt};break;case"SpotLight":t={position:new ie,direction:new ie,color:new Dt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ie,color:new Dt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ie,skyColor:new Dt,groundColor:new Dt};break;case"RectAreaLight":t={color:new Dt,position:new ie,halfWidth:new ie,halfHeight:new ie};break}return n[e.id]=t,t}}}function SDe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let EDe=0;function ADe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function TDe(n){const e=new bDe,t=SDe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new ie);const i=new ie,a=new yn,s=new yn;function o(u){let c=0,d=0,f=0;for(let I=0;I<9;I++)r.probe[I].set(0,0,0);let m=0,v=0,_=0,w=0,x=0,S=0,E=0,T=0,D=0,F=0,P=0;u.sort(ADe);for(let I=0,R=u.length;I<R;I++){const B=u[I],G=B.color,H=B.intensity,K=B.distance,ne=B.shadow&&B.shadow.map?B.shadow.map.texture:null;if(B.isAmbientLight)c+=G.r*H,d+=G.g*H,f+=G.b*H;else if(B.isLightProbe){for(let re=0;re<9;re++)r.probe[re].addScaledVector(B.sh.coefficients[re],H);P++}else if(B.isDirectionalLight){const re=e.get(B);if(re.color.copy(B.color).multiplyScalar(B.intensity),B.castShadow){const oe=B.shadow,$=t.get(B);$.shadowIntensity=oe.intensity,$.shadowBias=oe.bias,$.shadowNormalBias=oe.normalBias,$.shadowRadius=oe.radius,$.shadowMapSize=oe.mapSize,r.directionalShadow[m]=$,r.directionalShadowMap[m]=ne,r.directionalShadowMatrix[m]=B.shadow.matrix,S++}r.directional[m]=re,m++}else if(B.isSpotLight){const re=e.get(B);re.position.setFromMatrixPosition(B.matrixWorld),re.color.copy(G).multiplyScalar(H),re.distance=K,re.coneCos=Math.cos(B.angle),re.penumbraCos=Math.cos(B.angle*(1-B.penumbra)),re.decay=B.decay,r.spot[_]=re;const oe=B.shadow;if(B.map&&(r.spotLightMap[D]=B.map,D++,oe.updateMatrices(B),B.castShadow&&F++),r.spotLightMatrix[_]=oe.matrix,B.castShadow){const $=t.get(B);$.shadowIntensity=oe.intensity,$.shadowBias=oe.bias,$.shadowNormalBias=oe.normalBias,$.shadowRadius=oe.radius,$.shadowMapSize=oe.mapSize,r.spotShadow[_]=$,r.spotShadowMap[_]=ne,T++}_++}else if(B.isRectAreaLight){const re=e.get(B);re.color.copy(G).multiplyScalar(H),re.halfWidth.set(B.width*.5,0,0),re.halfHeight.set(0,B.height*.5,0),r.rectArea[w]=re,w++}else if(B.isPointLight){const re=e.get(B);if(re.color.copy(B.color).multiplyScalar(B.intensity),re.distance=B.distance,re.decay=B.decay,B.castShadow){const oe=B.shadow,$=t.get(B);$.shadowIntensity=oe.intensity,$.shadowBias=oe.bias,$.shadowNormalBias=oe.normalBias,$.shadowRadius=oe.radius,$.shadowMapSize=oe.mapSize,$.shadowCameraNear=oe.camera.near,$.shadowCameraFar=oe.camera.far,r.pointShadow[v]=$,r.pointShadowMap[v]=ne,r.pointShadowMatrix[v]=B.shadow.matrix,E++}r.point[v]=re,v++}else if(B.isHemisphereLight){const re=e.get(B);re.skyColor.copy(B.color).multiplyScalar(H),re.groundColor.copy(B.groundColor).multiplyScalar(H),r.hemi[x]=re,x++}}w>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=At.LTC_FLOAT_1,r.rectAreaLTC2=At.LTC_FLOAT_2):(r.rectAreaLTC1=At.LTC_HALF_1,r.rectAreaLTC2=At.LTC_HALF_2)),r.ambient[0]=c,r.ambient[1]=d,r.ambient[2]=f;const N=r.hash;(N.directionalLength!==m||N.pointLength!==v||N.spotLength!==_||N.rectAreaLength!==w||N.hemiLength!==x||N.numDirectionalShadows!==S||N.numPointShadows!==E||N.numSpotShadows!==T||N.numSpotMaps!==D||N.numLightProbes!==P)&&(r.directional.length=m,r.spot.length=_,r.rectArea.length=w,r.point.length=v,r.hemi.length=x,r.directionalShadow.length=S,r.directionalShadowMap.length=S,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=T,r.spotShadowMap.length=T,r.directionalShadowMatrix.length=S,r.pointShadowMatrix.length=E,r.spotLightMatrix.length=T+D-F,r.spotLightMap.length=D,r.numSpotLightShadowsWithMaps=F,r.numLightProbes=P,N.directionalLength=m,N.pointLength=v,N.spotLength=_,N.rectAreaLength=w,N.hemiLength=x,N.numDirectionalShadows=S,N.numPointShadows=E,N.numSpotShadows=T,N.numSpotMaps=D,N.numLightProbes=P,r.version=EDe++)}function l(u,c){let d=0,f=0,m=0,v=0,_=0;const w=c.matrixWorldInverse;for(let x=0,S=u.length;x<S;x++){const E=u[x];if(E.isDirectionalLight){const T=r.directional[d];T.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),T.direction.sub(i),T.direction.transformDirection(w),d++}else if(E.isSpotLight){const T=r.spot[m];T.position.setFromMatrixPosition(E.matrixWorld),T.position.applyMatrix4(w),T.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),T.direction.sub(i),T.direction.transformDirection(w),m++}else if(E.isRectAreaLight){const T=r.rectArea[v];T.position.setFromMatrixPosition(E.matrixWorld),T.position.applyMatrix4(w),s.identity(),a.copy(E.matrixWorld),a.premultiply(w),s.extractRotation(a),T.halfWidth.set(E.width*.5,0,0),T.halfHeight.set(0,E.height*.5,0),T.halfWidth.applyMatrix4(s),T.halfHeight.applyMatrix4(s),v++}else if(E.isPointLight){const T=r.point[f];T.position.setFromMatrixPosition(E.matrixWorld),T.position.applyMatrix4(w),f++}else if(E.isHemisphereLight){const T=r.hemi[_];T.direction.setFromMatrixPosition(E.matrixWorld),T.direction.transformDirection(w),_++}}}return{setup:o,setupView:l,state:r}}function DV(n){const e=new TDe(n),t=[],r=[];function i(c){u.camera=c,t.length=0,r.length=0}function a(c){t.push(c)}function s(c){r.push(c)}function o(){e.setup(t)}function l(c){e.setupView(t,c)}const u={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:u,setupLights:o,setupLightsView:l,pushLight:a,pushShadow:s}}function kDe(n){let e=new WeakMap;function t(i,a=0){const s=e.get(i);let o;return s===void 0?(o=new DV(n),e.set(i,[o])):a>=s.length?(o=new DV(n),s.push(o)):o=s[a],o}function r(){e=new WeakMap}return{get:t,dispose:r}}const CDe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,MDe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function IDe(n,e,t){let r=new fy;const i=new rt,a=new rt,s=new sr,o=new r4({depthPacking:OJ}),l=new i4,u={},c=t.maxTextureSize,d={[Rd]:Qs,[Qs]:Rd,[tc]:tc},f=new Su({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new rt},radius:{value:4}},vertexShader:CDe,fragmentShader:MDe}),m=f.clone();m.defines.HORIZONTAL_PASS=1;const v=new In;v.setAttribute("position",new Lr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Zi(v,f),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=tk;let x=this.type;this.render=function(F,P,N){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||F.length===0)return;const I=n.getRenderTarget(),R=n.getActiveCubeFace(),B=n.getActiveMipmapLevel(),G=n.state;G.setBlending(yd),G.buffers.depth.getReversed()?G.buffers.color.setClear(0,0,0,0):G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);const H=x!==Ql&&this.type===Ql,K=x===Ql&&this.type!==Ql;for(let ne=0,re=F.length;ne<re;ne++){const oe=F[ne],$=oe.shadow;if($===void 0){console.warn("THREE.WebGLShadowMap:",oe,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;i.copy($.mapSize);const ue=$.getFrameExtents();if(i.multiply(ue),a.copy($.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/ue.x),i.x=a.x*ue.x,$.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/ue.y),i.y=a.y*ue.y,$.mapSize.y=a.y)),$.map===null||H===!0||K===!0){const pe=this.type!==Ql?{minFilter:Ga,magFilter:Ga}:{};$.map!==null&&$.map.dispose(),$.map=new bc(i.x,i.y,pe),$.map.texture.name=oe.name+".shadowMap",$.camera.updateProjectionMatrix()}n.setRenderTarget($.map),n.clear();const se=$.getViewportCount();for(let pe=0;pe<se;pe++){const Fe=$.getViewport(pe);s.set(a.x*Fe.x,a.y*Fe.y,a.x*Fe.z,a.y*Fe.w),G.viewport(s),$.updateMatrices(oe,pe),r=$.getFrustum(),T(P,N,$.camera,oe,this.type)}$.isPointLightShadow!==!0&&this.type===Ql&&S($,N),$.needsUpdate=!1}x=this.type,w.needsUpdate=!1,n.setRenderTarget(I,R,B)};function S(F,P){const N=e.update(_);f.defines.VSM_SAMPLES!==F.blurSamples&&(f.defines.VSM_SAMPLES=F.blurSamples,m.defines.VSM_SAMPLES=F.blurSamples,f.needsUpdate=!0,m.needsUpdate=!0),F.mapPass===null&&(F.mapPass=new bc(i.x,i.y)),f.uniforms.shadow_pass.value=F.map.texture,f.uniforms.resolution.value=F.mapSize,f.uniforms.radius.value=F.radius,n.setRenderTarget(F.mapPass),n.clear(),n.renderBufferDirect(P,null,N,f,_,null),m.uniforms.shadow_pass.value=F.mapPass.texture,m.uniforms.resolution.value=F.mapSize,m.uniforms.radius.value=F.radius,n.setRenderTarget(F.map),n.clear(),n.renderBufferDirect(P,null,N,m,_,null)}function E(F,P,N,I){let R=null;const B=N.isPointLight===!0?F.customDistanceMaterial:F.customDepthMaterial;if(B!==void 0)R=B;else if(R=N.isPointLight===!0?l:o,n.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0||P.alphaToCoverage===!0){const G=R.uuid,H=P.uuid;let K=u[G];K===void 0&&(K={},u[G]=K);let ne=K[H];ne===void 0&&(ne=R.clone(),K[H]=ne,P.addEventListener("dispose",D)),R=ne}if(R.visible=P.visible,R.wireframe=P.wireframe,I===Ql?R.side=P.shadowSide!==null?P.shadowSide:P.side:R.side=P.shadowSide!==null?P.shadowSide:d[P.side],R.alphaMap=P.alphaMap,R.alphaTest=P.alphaToCoverage===!0?.5:P.alphaTest,R.map=P.map,R.clipShadows=P.clipShadows,R.clippingPlanes=P.clippingPlanes,R.clipIntersection=P.clipIntersection,R.displacementMap=P.displacementMap,R.displacementScale=P.displacementScale,R.displacementBias=P.displacementBias,R.wireframeLinewidth=P.wireframeLinewidth,R.linewidth=P.linewidth,N.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const G=n.properties.get(R);G.light=N}return R}function T(F,P,N,I,R){if(F.visible===!1)return;if(F.layers.test(P.layers)&&(F.isMesh||F.isLine||F.isPoints)&&(F.castShadow||F.receiveShadow&&R===Ql)&&(!F.frustumCulled||r.intersectsObject(F))){F.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,F.matrixWorld);const H=e.update(F),K=F.material;if(Array.isArray(K)){const ne=H.groups;for(let re=0,oe=ne.length;re<oe;re++){const $=ne[re],ue=K[$.materialIndex];if(ue&&ue.visible){const se=E(F,ue,I,R);F.onBeforeShadow(n,F,P,N,H,se,$),n.renderBufferDirect(N,null,H,se,F,$),F.onAfterShadow(n,F,P,N,H,se,$)}}}else if(K.visible){const ne=E(F,K,I,R);F.onBeforeShadow(n,F,P,N,H,ne,null),n.renderBufferDirect(N,null,H,ne,F,null),F.onAfterShadow(n,F,P,N,H,ne,null)}}const G=F.children;for(let H=0,K=G.length;H<K;H++)T(G[H],P,N,I,R)}function D(F){F.target.removeEventListener("dispose",D);for(const N in u){const I=u[N],R=F.target.uuid;R in I&&(I[R].dispose(),delete I[R])}}}const PDe={[DE]:LE,[OE]:BE,[FE]:UE,[Bm]:jE,[LE]:DE,[BE]:OE,[UE]:FE,[jE]:Bm};function NDe(n,e){function t(){let de=!1;const nt=new sr;let fe=null;const Ze=new sr(0,0,0,0);return{setMask:function(Qe){fe!==Qe&&!de&&(n.colorMask(Qe,Qe,Qe,Qe),fe=Qe)},setLocked:function(Qe){de=Qe},setClear:function(Qe,Oe,dt,vt,En){En===!0&&(Qe*=vt,Oe*=vt,dt*=vt),nt.set(Qe,Oe,dt,vt),Ze.equals(nt)===!1&&(n.clearColor(Qe,Oe,dt,vt),Ze.copy(nt))},reset:function(){de=!1,fe=null,Ze.set(-1,0,0,0)}}}function r(){let de=!1,nt=!1,fe=null,Ze=null,Qe=null;return{setReversed:function(Oe){if(nt!==Oe){const dt=e.get("EXT_clip_control");Oe?dt.clipControlEXT(dt.LOWER_LEFT_EXT,dt.ZERO_TO_ONE_EXT):dt.clipControlEXT(dt.LOWER_LEFT_EXT,dt.NEGATIVE_ONE_TO_ONE_EXT),nt=Oe;const vt=Qe;Qe=null,this.setClear(vt)}},getReversed:function(){return nt},setTest:function(Oe){Oe?Se(n.DEPTH_TEST):ge(n.DEPTH_TEST)},setMask:function(Oe){fe!==Oe&&!de&&(n.depthMask(Oe),fe=Oe)},setFunc:function(Oe){if(nt&&(Oe=PDe[Oe]),Ze!==Oe){switch(Oe){case DE:n.depthFunc(n.NEVER);break;case LE:n.depthFunc(n.ALWAYS);break;case OE:n.depthFunc(n.LESS);break;case Bm:n.depthFunc(n.LEQUAL);break;case FE:n.depthFunc(n.EQUAL);break;case jE:n.depthFunc(n.GEQUAL);break;case BE:n.depthFunc(n.GREATER);break;case UE:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ze=Oe}},setLocked:function(Oe){de=Oe},setClear:function(Oe){Qe!==Oe&&(nt&&(Oe=1-Oe),n.clearDepth(Oe),Qe=Oe)},reset:function(){de=!1,fe=null,Ze=null,Qe=null,nt=!1}}}function i(){let de=!1,nt=null,fe=null,Ze=null,Qe=null,Oe=null,dt=null,vt=null,En=null;return{setTest:function(xn){de||(xn?Se(n.STENCIL_TEST):ge(n.STENCIL_TEST))},setMask:function(xn){nt!==xn&&!de&&(n.stencilMask(xn),nt=xn)},setFunc:function(xn,Xr,Zn){(fe!==xn||Ze!==Xr||Qe!==Zn)&&(n.stencilFunc(xn,Xr,Zn),fe=xn,Ze=Xr,Qe=Zn)},setOp:function(xn,Xr,Zn){(Oe!==xn||dt!==Xr||vt!==Zn)&&(n.stencilOp(xn,Xr,Zn),Oe=xn,dt=Xr,vt=Zn)},setLocked:function(xn){de=xn},setClear:function(xn){En!==xn&&(n.clearStencil(xn),En=xn)},reset:function(){de=!1,nt=null,fe=null,Ze=null,Qe=null,Oe=null,dt=null,vt=null,En=null}}}const a=new t,s=new r,o=new i,l=new WeakMap,u=new WeakMap;let c={},d={},f=new WeakMap,m=[],v=null,_=!1,w=null,x=null,S=null,E=null,T=null,D=null,F=null,P=new Dt(0,0,0),N=0,I=!1,R=null,B=null,G=null,H=null,K=null;const ne=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let re=!1,oe=0;const $=n.getParameter(n.VERSION);$.indexOf("WebGL")!==-1?(oe=parseFloat(/^WebGL (\d)/.exec($)[1]),re=oe>=1):$.indexOf("OpenGL ES")!==-1&&(oe=parseFloat(/^OpenGL ES (\d)/.exec($)[1]),re=oe>=2);let ue=null,se={};const pe=n.getParameter(n.SCISSOR_BOX),Fe=n.getParameter(n.VIEWPORT),$e=new sr().fromArray(pe),at=new sr().fromArray(Fe);function me(de,nt,fe,Ze){const Qe=new Uint8Array(4),Oe=n.createTexture();n.bindTexture(de,Oe),n.texParameteri(de,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(de,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let dt=0;dt<fe;dt++)de===n.TEXTURE_3D||de===n.TEXTURE_2D_ARRAY?n.texImage3D(nt,0,n.RGBA,1,1,Ze,0,n.RGBA,n.UNSIGNED_BYTE,Qe):n.texImage2D(nt+dt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Qe);return Oe}const Le={};Le[n.TEXTURE_2D]=me(n.TEXTURE_2D,n.TEXTURE_2D,1),Le[n.TEXTURE_CUBE_MAP]=me(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Le[n.TEXTURE_2D_ARRAY]=me(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Le[n.TEXTURE_3D]=me(n.TEXTURE_3D,n.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Se(n.DEPTH_TEST),s.setFunc(Bm),Ke(!1),je(xR),Se(n.CULL_FACE),Ee(yd);function Se(de){c[de]!==!0&&(n.enable(de),c[de]=!0)}function ge(de){c[de]!==!1&&(n.disable(de),c[de]=!1)}function Ge(de,nt){return d[de]!==nt?(n.bindFramebuffer(de,nt),d[de]=nt,de===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=nt),de===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=nt),!0):!1}function Me(de,nt){let fe=m,Ze=!1;if(de){fe=f.get(nt),fe===void 0&&(fe=[],f.set(nt,fe));const Qe=de.textures;if(fe.length!==Qe.length||fe[0]!==n.COLOR_ATTACHMENT0){for(let Oe=0,dt=Qe.length;Oe<dt;Oe++)fe[Oe]=n.COLOR_ATTACHMENT0+Oe;fe.length=Qe.length,Ze=!0}}else fe[0]!==n.BACK&&(fe[0]=n.BACK,Ze=!0);Ze&&n.drawBuffers(fe)}function Ce(de){return v!==de?(n.useProgram(de),v=de,!0):!1}const Te={[Uh]:n.FUNC_ADD,[sJ]:n.FUNC_SUBTRACT,[oJ]:n.FUNC_REVERSE_SUBTRACT};Te[lJ]=n.MIN,Te[uJ]=n.MAX;const te={[cJ]:n.ZERO,[dJ]:n.ONE,[hJ]:n.SRC_COLOR,[NE]:n.SRC_ALPHA,[yJ]:n.SRC_ALPHA_SATURATE,[gJ]:n.DST_COLOR,[pJ]:n.DST_ALPHA,[fJ]:n.ONE_MINUS_SRC_COLOR,[RE]:n.ONE_MINUS_SRC_ALPHA,[vJ]:n.ONE_MINUS_DST_COLOR,[mJ]:n.ONE_MINUS_DST_ALPHA,[xJ]:n.CONSTANT_COLOR,[_J]:n.ONE_MINUS_CONSTANT_COLOR,[wJ]:n.CONSTANT_ALPHA,[bJ]:n.ONE_MINUS_CONSTANT_ALPHA};function Ee(de,nt,fe,Ze,Qe,Oe,dt,vt,En,xn){if(de===yd){_===!0&&(ge(n.BLEND),_=!1);return}if(_===!1&&(Se(n.BLEND),_=!0),de!==aJ){if(de!==w||xn!==I){if((x!==Uh||T!==Uh)&&(n.blendEquation(n.FUNC_ADD),x=Uh,T=Uh),xn)switch(de){case pm:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case _R:n.blendFunc(n.ONE,n.ONE);break;case wR:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case bR:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}else switch(de){case pm:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case _R:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case wR:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case bR:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}S=null,E=null,D=null,F=null,P.set(0,0,0),N=0,w=de,I=xn}return}Qe=Qe||nt,Oe=Oe||fe,dt=dt||Ze,(nt!==x||Qe!==T)&&(n.blendEquationSeparate(Te[nt],Te[Qe]),x=nt,T=Qe),(fe!==S||Ze!==E||Oe!==D||dt!==F)&&(n.blendFuncSeparate(te[fe],te[Ze],te[Oe],te[dt]),S=fe,E=Ze,D=Oe,F=dt),(vt.equals(P)===!1||En!==N)&&(n.blendColor(vt.r,vt.g,vt.b,En),P.copy(vt),N=En),w=de,I=!1}function Pe(de,nt){de.side===tc?ge(n.CULL_FACE):Se(n.CULL_FACE);let fe=de.side===Qs;nt&&(fe=!fe),Ke(fe),de.blending===pm&&de.transparent===!1?Ee(yd):Ee(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.blendColor,de.blendAlpha,de.premultipliedAlpha),s.setFunc(de.depthFunc),s.setTest(de.depthTest),s.setMask(de.depthWrite),a.setMask(de.colorWrite);const Ze=de.stencilWrite;o.setTest(Ze),Ze&&(o.setMask(de.stencilWriteMask),o.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),o.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),tt(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),de.alphaToCoverage===!0?Se(n.SAMPLE_ALPHA_TO_COVERAGE):ge(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ke(de){R!==de&&(de?n.frontFace(n.CW):n.frontFace(n.CCW),R=de)}function je(de){de!==nJ?(Se(n.CULL_FACE),de!==B&&(de===xR?n.cullFace(n.BACK):de===rJ?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ge(n.CULL_FACE),B=de}function st(de){de!==G&&(re&&n.lineWidth(de),G=de)}function tt(de,nt,fe){de?(Se(n.POLYGON_OFFSET_FILL),(H!==nt||K!==fe)&&(n.polygonOffset(nt,fe),H=nt,K=fe)):ge(n.POLYGON_OFFSET_FILL)}function ee(de){de?Se(n.SCISSOR_TEST):ge(n.SCISSOR_TEST)}function qe(de){de===void 0&&(de=n.TEXTURE0+ne-1),ue!==de&&(n.activeTexture(de),ue=de)}function Ye(de,nt,fe){fe===void 0&&(ue===null?fe=n.TEXTURE0+ne-1:fe=ue);let Ze=se[fe];Ze===void 0&&(Ze={type:void 0,texture:void 0},se[fe]=Ze),(Ze.type!==de||Ze.texture!==nt)&&(ue!==fe&&(n.activeTexture(fe),ue=fe),n.bindTexture(de,nt||Le[de]),Ze.type=de,Ze.texture=nt)}function Z(){const de=se[ue];de!==void 0&&de.type!==void 0&&(n.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)}function X(){try{n.compressedTexImage2D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ve(){try{n.compressedTexImage3D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ie(){try{n.texSubImage2D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function He(){try{n.texSubImage3D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function we(){try{n.compressedTexSubImage2D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function pt(){try{n.compressedTexSubImage3D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function lt(){try{n.texStorage2D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function St(){try{n.texStorage3D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function bt(){try{n.texImage2D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ut(){try{n.texImage3D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function xt(de){$e.equals(de)===!1&&(n.scissor(de.x,de.y,de.z,de.w),$e.copy(de))}function Bt(de){at.equals(de)===!1&&(n.viewport(de.x,de.y,de.z,de.w),at.copy(de))}function ce(de,nt){let fe=u.get(nt);fe===void 0&&(fe=new WeakMap,u.set(nt,fe));let Ze=fe.get(de);Ze===void 0&&(Ze=n.getUniformBlockIndex(nt,de.name),fe.set(de,Ze))}function Ne(de,nt){const Ze=u.get(nt).get(de);l.get(nt)!==Ze&&(n.uniformBlockBinding(nt,Ze,de.__bindingPointIndex),l.set(nt,Ze))}function ht(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},ue=null,se={},d={},f=new WeakMap,m=[],v=null,_=!1,w=null,x=null,S=null,E=null,T=null,D=null,F=null,P=new Dt(0,0,0),N=0,I=!1,R=null,B=null,G=null,H=null,K=null,$e.set(0,0,n.canvas.width,n.canvas.height),at.set(0,0,n.canvas.width,n.canvas.height),a.reset(),s.reset(),o.reset()}return{buffers:{color:a,depth:s,stencil:o},enable:Se,disable:ge,bindFramebuffer:Ge,drawBuffers:Me,useProgram:Ce,setBlending:Ee,setMaterial:Pe,setFlipSided:Ke,setCullFace:je,setLineWidth:st,setPolygonOffset:tt,setScissorTest:ee,activeTexture:qe,bindTexture:Ye,unbindTexture:Z,compressedTexImage2D:X,compressedTexImage3D:ve,texImage2D:bt,texImage3D:ut,updateUBOMapping:ce,uniformBlockBinding:Ne,texStorage2D:lt,texStorage3D:St,texSubImage2D:Ie,texSubImage3D:He,compressedTexSubImage2D:we,compressedTexSubImage3D:pt,scissor:xt,viewport:Bt,reset:ht}}function RDe(n,e,t,r,i,a,s){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new rt,c=new WeakMap;let d;const f=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(Z,X){return m?new OffscreenCanvas(Z,X):h_("canvas")}function _(Z,X,ve){let Ie=1;const He=Ye(Z);if((He.width>ve||He.height>ve)&&(Ie=ve/Math.max(He.width,He.height)),Ie<1)if(typeof HTMLImageElement<"u"&&Z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Z instanceof ImageBitmap||typeof VideoFrame<"u"&&Z instanceof VideoFrame){const we=Math.floor(Ie*He.width),pt=Math.floor(Ie*He.height);d===void 0&&(d=v(we,pt));const lt=X?v(we,pt):d;return lt.width=we,lt.height=pt,lt.getContext("2d").drawImage(Z,0,0,we,pt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+He.width+"x"+He.height+") to ("+we+"x"+pt+")."),lt}else return"data"in Z&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+He.width+"x"+He.height+")."),Z;return Z}function w(Z){return Z.generateMipmaps}function x(Z){n.generateMipmap(Z)}function S(Z){return Z.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:Z.isWebGL3DRenderTarget?n.TEXTURE_3D:Z.isWebGLArrayRenderTarget||Z.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function E(Z,X,ve,Ie,He=!1){if(Z!==null){if(n[Z]!==void 0)return n[Z];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Z+"'")}let we=X;if(X===n.RED&&(ve===n.FLOAT&&(we=n.R32F),ve===n.HALF_FLOAT&&(we=n.R16F),ve===n.UNSIGNED_BYTE&&(we=n.R8)),X===n.RED_INTEGER&&(ve===n.UNSIGNED_BYTE&&(we=n.R8UI),ve===n.UNSIGNED_SHORT&&(we=n.R16UI),ve===n.UNSIGNED_INT&&(we=n.R32UI),ve===n.BYTE&&(we=n.R8I),ve===n.SHORT&&(we=n.R16I),ve===n.INT&&(we=n.R32I)),X===n.RG&&(ve===n.FLOAT&&(we=n.RG32F),ve===n.HALF_FLOAT&&(we=n.RG16F),ve===n.UNSIGNED_BYTE&&(we=n.RG8)),X===n.RG_INTEGER&&(ve===n.UNSIGNED_BYTE&&(we=n.RG8UI),ve===n.UNSIGNED_SHORT&&(we=n.RG16UI),ve===n.UNSIGNED_INT&&(we=n.RG32UI),ve===n.BYTE&&(we=n.RG8I),ve===n.SHORT&&(we=n.RG16I),ve===n.INT&&(we=n.RG32I)),X===n.RGB_INTEGER&&(ve===n.UNSIGNED_BYTE&&(we=n.RGB8UI),ve===n.UNSIGNED_SHORT&&(we=n.RGB16UI),ve===n.UNSIGNED_INT&&(we=n.RGB32UI),ve===n.BYTE&&(we=n.RGB8I),ve===n.SHORT&&(we=n.RGB16I),ve===n.INT&&(we=n.RGB32I)),X===n.RGBA_INTEGER&&(ve===n.UNSIGNED_BYTE&&(we=n.RGBA8UI),ve===n.UNSIGNED_SHORT&&(we=n.RGBA16UI),ve===n.UNSIGNED_INT&&(we=n.RGBA32UI),ve===n.BYTE&&(we=n.RGBA8I),ve===n.SHORT&&(we=n.RGBA16I),ve===n.INT&&(we=n.RGBA32I)),X===n.RGB&&ve===n.UNSIGNED_INT_5_9_9_9_REV&&(we=n.RGB9_E5),X===n.RGBA){const pt=He?c_:rr.getTransfer(Ie);ve===n.FLOAT&&(we=n.RGBA32F),ve===n.HALF_FLOAT&&(we=n.RGBA16F),ve===n.UNSIGNED_BYTE&&(we=pt===Cr?n.SRGB8_ALPHA8:n.RGBA8),ve===n.UNSIGNED_SHORT_4_4_4_4&&(we=n.RGBA4),ve===n.UNSIGNED_SHORT_5_5_5_1&&(we=n.RGB5_A1)}return(we===n.R16F||we===n.R32F||we===n.RG16F||we===n.RG32F||we===n.RGBA16F||we===n.RGBA32F)&&e.get("EXT_color_buffer_float"),we}function T(Z,X){let ve;return Z?X===null||X===Ld||X===jv?ve=n.DEPTH24_STENCIL8:X===Ao?ve=n.DEPTH32F_STENCIL8:X===Fv&&(ve=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):X===null||X===Ld||X===jv?ve=n.DEPTH_COMPONENT24:X===Ao?ve=n.DEPTH_COMPONENT32F:X===Fv&&(ve=n.DEPTH_COMPONENT16),ve}function D(Z,X){return w(Z)===!0||Z.isFramebufferTexture&&Z.minFilter!==Ga&&Z.minFilter!==ha?Math.log2(Math.max(X.width,X.height))+1:Z.mipmaps!==void 0&&Z.mipmaps.length>0?Z.mipmaps.length:Z.isCompressedTexture&&Array.isArray(Z.image)?X.mipmaps.length:1}function F(Z){const X=Z.target;X.removeEventListener("dispose",F),N(X),X.isVideoTexture&&c.delete(X)}function P(Z){const X=Z.target;X.removeEventListener("dispose",P),R(X)}function N(Z){const X=r.get(Z);if(X.__webglInit===void 0)return;const ve=Z.source,Ie=f.get(ve);if(Ie){const He=Ie[X.__cacheKey];He.usedTimes--,He.usedTimes===0&&I(Z),Object.keys(Ie).length===0&&f.delete(ve)}r.remove(Z)}function I(Z){const X=r.get(Z);n.deleteTexture(X.__webglTexture);const ve=Z.source,Ie=f.get(ve);delete Ie[X.__cacheKey],s.memory.textures--}function R(Z){const X=r.get(Z);if(Z.depthTexture&&(Z.depthTexture.dispose(),r.remove(Z.depthTexture)),Z.isWebGLCubeRenderTarget)for(let Ie=0;Ie<6;Ie++){if(Array.isArray(X.__webglFramebuffer[Ie]))for(let He=0;He<X.__webglFramebuffer[Ie].length;He++)n.deleteFramebuffer(X.__webglFramebuffer[Ie][He]);else n.deleteFramebuffer(X.__webglFramebuffer[Ie]);X.__webglDepthbuffer&&n.deleteRenderbuffer(X.__webglDepthbuffer[Ie])}else{if(Array.isArray(X.__webglFramebuffer))for(let Ie=0;Ie<X.__webglFramebuffer.length;Ie++)n.deleteFramebuffer(X.__webglFramebuffer[Ie]);else n.deleteFramebuffer(X.__webglFramebuffer);if(X.__webglDepthbuffer&&n.deleteRenderbuffer(X.__webglDepthbuffer),X.__webglMultisampledFramebuffer&&n.deleteFramebuffer(X.__webglMultisampledFramebuffer),X.__webglColorRenderbuffer)for(let Ie=0;Ie<X.__webglColorRenderbuffer.length;Ie++)X.__webglColorRenderbuffer[Ie]&&n.deleteRenderbuffer(X.__webglColorRenderbuffer[Ie]);X.__webglDepthRenderbuffer&&n.deleteRenderbuffer(X.__webglDepthRenderbuffer)}const ve=Z.textures;for(let Ie=0,He=ve.length;Ie<He;Ie++){const we=r.get(ve[Ie]);we.__webglTexture&&(n.deleteTexture(we.__webglTexture),s.memory.textures--),r.remove(ve[Ie])}r.remove(Z)}let B=0;function G(){B=0}function H(){const Z=B;return Z>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Z+" texture units while this GPU supports only "+i.maxTextures),B+=1,Z}function K(Z){const X=[];return X.push(Z.wrapS),X.push(Z.wrapT),X.push(Z.wrapR||0),X.push(Z.magFilter),X.push(Z.minFilter),X.push(Z.anisotropy),X.push(Z.internalFormat),X.push(Z.format),X.push(Z.type),X.push(Z.generateMipmaps),X.push(Z.premultiplyAlpha),X.push(Z.flipY),X.push(Z.unpackAlignment),X.push(Z.colorSpace),X.join()}function ne(Z,X){const ve=r.get(Z);if(Z.isVideoTexture&&ee(Z),Z.isRenderTargetTexture===!1&&Z.isExternalTexture!==!0&&Z.version>0&&ve.__version!==Z.version){const Ie=Z.image;if(Ie===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ie.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Le(ve,Z,X);return}}else Z.isExternalTexture&&(ve.__webglTexture=Z.sourceTexture?Z.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,ve.__webglTexture,n.TEXTURE0+X)}function re(Z,X){const ve=r.get(Z);if(Z.isRenderTargetTexture===!1&&Z.version>0&&ve.__version!==Z.version){Le(ve,Z,X);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ve.__webglTexture,n.TEXTURE0+X)}function oe(Z,X){const ve=r.get(Z);if(Z.isRenderTargetTexture===!1&&Z.version>0&&ve.__version!==Z.version){Le(ve,Z,X);return}t.bindTexture(n.TEXTURE_3D,ve.__webglTexture,n.TEXTURE0+X)}function $(Z,X){const ve=r.get(Z);if(Z.version>0&&ve.__version!==Z.version){Se(ve,Z,X);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ve.__webglTexture,n.TEXTURE0+X)}const ue={[s_]:n.REPEAT,[bl]:n.CLAMP_TO_EDGE,[o_]:n.MIRRORED_REPEAT},se={[Ga]:n.NEAREST,[PO]:n.NEAREST_MIPMAP_NEAREST,[I0]:n.NEAREST_MIPMAP_LINEAR,[ha]:n.LINEAR,[s1]:n.LINEAR_MIPMAP_NEAREST,[rc]:n.LINEAR_MIPMAP_LINEAR},pe={[jJ]:n.NEVER,[GJ]:n.ALWAYS,[BJ]:n.LESS,[UO]:n.LEQUAL,[UJ]:n.EQUAL,[HJ]:n.GEQUAL,[VJ]:n.GREATER,[zJ]:n.NOTEQUAL};function Fe(Z,X){if(X.type===Ao&&e.has("OES_texture_float_linear")===!1&&(X.magFilter===ha||X.magFilter===s1||X.magFilter===I0||X.magFilter===rc||X.minFilter===ha||X.minFilter===s1||X.minFilter===I0||X.minFilter===rc)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(Z,n.TEXTURE_WRAP_S,ue[X.wrapS]),n.texParameteri(Z,n.TEXTURE_WRAP_T,ue[X.wrapT]),(Z===n.TEXTURE_3D||Z===n.TEXTURE_2D_ARRAY)&&n.texParameteri(Z,n.TEXTURE_WRAP_R,ue[X.wrapR]),n.texParameteri(Z,n.TEXTURE_MAG_FILTER,se[X.magFilter]),n.texParameteri(Z,n.TEXTURE_MIN_FILTER,se[X.minFilter]),X.compareFunction&&(n.texParameteri(Z,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(Z,n.TEXTURE_COMPARE_FUNC,pe[X.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(X.magFilter===Ga||X.minFilter!==I0&&X.minFilter!==rc||X.type===Ao&&e.has("OES_texture_float_linear")===!1)return;if(X.anisotropy>1||r.get(X).__currentAnisotropy){const ve=e.get("EXT_texture_filter_anisotropic");n.texParameterf(Z,ve.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(X.anisotropy,i.getMaxAnisotropy())),r.get(X).__currentAnisotropy=X.anisotropy}}}function $e(Z,X){let ve=!1;Z.__webglInit===void 0&&(Z.__webglInit=!0,X.addEventListener("dispose",F));const Ie=X.source;let He=f.get(Ie);He===void 0&&(He={},f.set(Ie,He));const we=K(X);if(we!==Z.__cacheKey){He[we]===void 0&&(He[we]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,ve=!0),He[we].usedTimes++;const pt=He[Z.__cacheKey];pt!==void 0&&(He[Z.__cacheKey].usedTimes--,pt.usedTimes===0&&I(X)),Z.__cacheKey=we,Z.__webglTexture=He[we].texture}return ve}function at(Z,X,ve){return Math.floor(Math.floor(Z/ve)/X)}function me(Z,X,ve,Ie){const we=Z.updateRanges;if(we.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,X.width,X.height,ve,Ie,X.data);else{we.sort((ut,xt)=>ut.start-xt.start);let pt=0;for(let ut=1;ut<we.length;ut++){const xt=we[pt],Bt=we[ut],ce=xt.start+xt.count,Ne=at(Bt.start,X.width,4),ht=at(xt.start,X.width,4);Bt.start<=ce+1&&Ne===ht&&at(Bt.start+Bt.count-1,X.width,4)===Ne?xt.count=Math.max(xt.count,Bt.start+Bt.count-xt.start):(++pt,we[pt]=Bt)}we.length=pt+1;const lt=n.getParameter(n.UNPACK_ROW_LENGTH),St=n.getParameter(n.UNPACK_SKIP_PIXELS),bt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,X.width);for(let ut=0,xt=we.length;ut<xt;ut++){const Bt=we[ut],ce=Math.floor(Bt.start/4),Ne=Math.ceil(Bt.count/4),ht=ce%X.width,de=Math.floor(ce/X.width),nt=Ne,fe=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,ht),n.pixelStorei(n.UNPACK_SKIP_ROWS,de),t.texSubImage2D(n.TEXTURE_2D,0,ht,de,nt,fe,ve,Ie,X.data)}Z.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,lt),n.pixelStorei(n.UNPACK_SKIP_PIXELS,St),n.pixelStorei(n.UNPACK_SKIP_ROWS,bt)}}function Le(Z,X,ve){let Ie=n.TEXTURE_2D;(X.isDataArrayTexture||X.isCompressedArrayTexture)&&(Ie=n.TEXTURE_2D_ARRAY),X.isData3DTexture&&(Ie=n.TEXTURE_3D);const He=$e(Z,X),we=X.source;t.bindTexture(Ie,Z.__webglTexture,n.TEXTURE0+ve);const pt=r.get(we);if(we.version!==pt.__version||He===!0){t.activeTexture(n.TEXTURE0+ve);const lt=rr.getPrimaries(rr.workingColorSpace),St=X.colorSpace===ad?null:rr.getPrimaries(X.colorSpace),bt=X.colorSpace===ad||lt===St?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,X.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,X.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,bt);let ut=_(X.image,!1,i.maxTextureSize);ut=qe(X,ut);const xt=a.convert(X.format,X.colorSpace),Bt=a.convert(X.type);let ce=E(X.internalFormat,xt,Bt,X.colorSpace,X.isVideoTexture);Fe(Ie,X);let Ne;const ht=X.mipmaps,de=X.isVideoTexture!==!0,nt=pt.__version===void 0||He===!0,fe=we.dataReady,Ze=D(X,ut);if(X.isDepthTexture)ce=T(X.format===Uv,X.type),nt&&(de?t.texStorage2D(n.TEXTURE_2D,1,ce,ut.width,ut.height):t.texImage2D(n.TEXTURE_2D,0,ce,ut.width,ut.height,0,xt,Bt,null));else if(X.isDataTexture)if(ht.length>0){de&&nt&&t.texStorage2D(n.TEXTURE_2D,Ze,ce,ht[0].width,ht[0].height);for(let Qe=0,Oe=ht.length;Qe<Oe;Qe++)Ne=ht[Qe],de?fe&&t.texSubImage2D(n.TEXTURE_2D,Qe,0,0,Ne.width,Ne.height,xt,Bt,Ne.data):t.texImage2D(n.TEXTURE_2D,Qe,ce,Ne.width,Ne.height,0,xt,Bt,Ne.data);X.generateMipmaps=!1}else de?(nt&&t.texStorage2D(n.TEXTURE_2D,Ze,ce,ut.width,ut.height),fe&&me(X,ut,xt,Bt)):t.texImage2D(n.TEXTURE_2D,0,ce,ut.width,ut.height,0,xt,Bt,ut.data);else if(X.isCompressedTexture)if(X.isCompressedArrayTexture){de&&nt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ze,ce,ht[0].width,ht[0].height,ut.depth);for(let Qe=0,Oe=ht.length;Qe<Oe;Qe++)if(Ne=ht[Qe],X.format!==bs)if(xt!==null)if(de){if(fe)if(X.layerUpdates.size>0){const dt=RR(Ne.width,Ne.height,X.format,X.type);for(const vt of X.layerUpdates){const En=Ne.data.subarray(vt*dt/Ne.data.BYTES_PER_ELEMENT,(vt+1)*dt/Ne.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Qe,0,0,vt,Ne.width,Ne.height,1,xt,En)}X.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Qe,0,0,0,Ne.width,Ne.height,ut.depth,xt,Ne.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Qe,ce,Ne.width,Ne.height,ut.depth,0,Ne.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else de?fe&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Qe,0,0,0,Ne.width,Ne.height,ut.depth,xt,Bt,Ne.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Qe,ce,Ne.width,Ne.height,ut.depth,0,xt,Bt,Ne.data)}else{de&&nt&&t.texStorage2D(n.TEXTURE_2D,Ze,ce,ht[0].width,ht[0].height);for(let Qe=0,Oe=ht.length;Qe<Oe;Qe++)Ne=ht[Qe],X.format!==bs?xt!==null?de?fe&&t.compressedTexSubImage2D(n.TEXTURE_2D,Qe,0,0,Ne.width,Ne.height,xt,Ne.data):t.compressedTexImage2D(n.TEXTURE_2D,Qe,ce,Ne.width,Ne.height,0,Ne.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):de?fe&&t.texSubImage2D(n.TEXTURE_2D,Qe,0,0,Ne.width,Ne.height,xt,Bt,Ne.data):t.texImage2D(n.TEXTURE_2D,Qe,ce,Ne.width,Ne.height,0,xt,Bt,Ne.data)}else if(X.isDataArrayTexture)if(de){if(nt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ze,ce,ut.width,ut.height,ut.depth),fe)if(X.layerUpdates.size>0){const Qe=RR(ut.width,ut.height,X.format,X.type);for(const Oe of X.layerUpdates){const dt=ut.data.subarray(Oe*Qe/ut.data.BYTES_PER_ELEMENT,(Oe+1)*Qe/ut.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Oe,ut.width,ut.height,1,xt,Bt,dt)}X.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ut.width,ut.height,ut.depth,xt,Bt,ut.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ce,ut.width,ut.height,ut.depth,0,xt,Bt,ut.data);else if(X.isData3DTexture)de?(nt&&t.texStorage3D(n.TEXTURE_3D,Ze,ce,ut.width,ut.height,ut.depth),fe&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ut.width,ut.height,ut.depth,xt,Bt,ut.data)):t.texImage3D(n.TEXTURE_3D,0,ce,ut.width,ut.height,ut.depth,0,xt,Bt,ut.data);else if(X.isFramebufferTexture){if(nt)if(de)t.texStorage2D(n.TEXTURE_2D,Ze,ce,ut.width,ut.height);else{let Qe=ut.width,Oe=ut.height;for(let dt=0;dt<Ze;dt++)t.texImage2D(n.TEXTURE_2D,dt,ce,Qe,Oe,0,xt,Bt,null),Qe>>=1,Oe>>=1}}else if(ht.length>0){if(de&&nt){const Qe=Ye(ht[0]);t.texStorage2D(n.TEXTURE_2D,Ze,ce,Qe.width,Qe.height)}for(let Qe=0,Oe=ht.length;Qe<Oe;Qe++)Ne=ht[Qe],de?fe&&t.texSubImage2D(n.TEXTURE_2D,Qe,0,0,xt,Bt,Ne):t.texImage2D(n.TEXTURE_2D,Qe,ce,xt,Bt,Ne);X.generateMipmaps=!1}else if(de){if(nt){const Qe=Ye(ut);t.texStorage2D(n.TEXTURE_2D,Ze,ce,Qe.width,Qe.height)}fe&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,xt,Bt,ut)}else t.texImage2D(n.TEXTURE_2D,0,ce,xt,Bt,ut);w(X)&&x(Ie),pt.__version=we.version,X.onUpdate&&X.onUpdate(X)}Z.__version=X.version}function Se(Z,X,ve){if(X.image.length!==6)return;const Ie=$e(Z,X),He=X.source;t.bindTexture(n.TEXTURE_CUBE_MAP,Z.__webglTexture,n.TEXTURE0+ve);const we=r.get(He);if(He.version!==we.__version||Ie===!0){t.activeTexture(n.TEXTURE0+ve);const pt=rr.getPrimaries(rr.workingColorSpace),lt=X.colorSpace===ad?null:rr.getPrimaries(X.colorSpace),St=X.colorSpace===ad||pt===lt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,X.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,X.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,St);const bt=X.isCompressedTexture||X.image[0].isCompressedTexture,ut=X.image[0]&&X.image[0].isDataTexture,xt=[];for(let Oe=0;Oe<6;Oe++)!bt&&!ut?xt[Oe]=_(X.image[Oe],!0,i.maxCubemapSize):xt[Oe]=ut?X.image[Oe].image:X.image[Oe],xt[Oe]=qe(X,xt[Oe]);const Bt=xt[0],ce=a.convert(X.format,X.colorSpace),Ne=a.convert(X.type),ht=E(X.internalFormat,ce,Ne,X.colorSpace),de=X.isVideoTexture!==!0,nt=we.__version===void 0||Ie===!0,fe=He.dataReady;let Ze=D(X,Bt);Fe(n.TEXTURE_CUBE_MAP,X);let Qe;if(bt){de&&nt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ze,ht,Bt.width,Bt.height);for(let Oe=0;Oe<6;Oe++){Qe=xt[Oe].mipmaps;for(let dt=0;dt<Qe.length;dt++){const vt=Qe[dt];X.format!==bs?ce!==null?de?fe&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,dt,0,0,vt.width,vt.height,ce,vt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,dt,ht,vt.width,vt.height,0,vt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):de?fe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,dt,0,0,vt.width,vt.height,ce,Ne,vt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,dt,ht,vt.width,vt.height,0,ce,Ne,vt.data)}}}else{if(Qe=X.mipmaps,de&&nt){Qe.length>0&&Ze++;const Oe=Ye(xt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Ze,ht,Oe.width,Oe.height)}for(let Oe=0;Oe<6;Oe++)if(ut){de?fe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,0,0,xt[Oe].width,xt[Oe].height,ce,Ne,xt[Oe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,ht,xt[Oe].width,xt[Oe].height,0,ce,Ne,xt[Oe].data);for(let dt=0;dt<Qe.length;dt++){const En=Qe[dt].image[Oe].image;de?fe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,dt+1,0,0,En.width,En.height,ce,Ne,En.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,dt+1,ht,En.width,En.height,0,ce,Ne,En.data)}}else{de?fe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,0,0,ce,Ne,xt[Oe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,ht,ce,Ne,xt[Oe]);for(let dt=0;dt<Qe.length;dt++){const vt=Qe[dt];de?fe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,dt+1,0,0,ce,Ne,vt.image[Oe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,dt+1,ht,ce,Ne,vt.image[Oe])}}}w(X)&&x(n.TEXTURE_CUBE_MAP),we.__version=He.version,X.onUpdate&&X.onUpdate(X)}Z.__version=X.version}function ge(Z,X,ve,Ie,He,we){const pt=a.convert(ve.format,ve.colorSpace),lt=a.convert(ve.type),St=E(ve.internalFormat,pt,lt,ve.colorSpace),bt=r.get(X),ut=r.get(ve);if(ut.__renderTarget=X,!bt.__hasExternalTextures){const xt=Math.max(1,X.width>>we),Bt=Math.max(1,X.height>>we);He===n.TEXTURE_3D||He===n.TEXTURE_2D_ARRAY?t.texImage3D(He,we,St,xt,Bt,X.depth,0,pt,lt,null):t.texImage2D(He,we,St,xt,Bt,0,pt,lt,null)}t.bindFramebuffer(n.FRAMEBUFFER,Z),tt(X)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ie,He,ut.__webglTexture,0,st(X)):(He===n.TEXTURE_2D||He>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&He<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ie,He,ut.__webglTexture,we),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ge(Z,X,ve){if(n.bindRenderbuffer(n.RENDERBUFFER,Z),X.depthBuffer){const Ie=X.depthTexture,He=Ie&&Ie.isDepthTexture?Ie.type:null,we=T(X.stencilBuffer,He),pt=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,lt=st(X);tt(X)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,lt,we,X.width,X.height):ve?n.renderbufferStorageMultisample(n.RENDERBUFFER,lt,we,X.width,X.height):n.renderbufferStorage(n.RENDERBUFFER,we,X.width,X.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,pt,n.RENDERBUFFER,Z)}else{const Ie=X.textures;for(let He=0;He<Ie.length;He++){const we=Ie[He],pt=a.convert(we.format,we.colorSpace),lt=a.convert(we.type),St=E(we.internalFormat,pt,lt,we.colorSpace),bt=st(X);ve&&tt(X)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,bt,St,X.width,X.height):tt(X)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,bt,St,X.width,X.height):n.renderbufferStorage(n.RENDERBUFFER,St,X.width,X.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Me(Z,X){if(X&&X.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,Z),!(X.depthTexture&&X.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ie=r.get(X.depthTexture);Ie.__renderTarget=X,(!Ie.__webglTexture||X.depthTexture.image.width!==X.width||X.depthTexture.image.height!==X.height)&&(X.depthTexture.image.width=X.width,X.depthTexture.image.height=X.height,X.depthTexture.needsUpdate=!0),ne(X.depthTexture,0);const He=Ie.__webglTexture,we=st(X);if(X.depthTexture.format===Bv)tt(X)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,He,0,we):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,He,0);else if(X.depthTexture.format===Uv)tt(X)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,He,0,we):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,He,0);else throw new Error("Unknown depthTexture format")}function Ce(Z){const X=r.get(Z),ve=Z.isWebGLCubeRenderTarget===!0;if(X.__boundDepthTexture!==Z.depthTexture){const Ie=Z.depthTexture;if(X.__depthDisposeCallback&&X.__depthDisposeCallback(),Ie){const He=()=>{delete X.__boundDepthTexture,delete X.__depthDisposeCallback,Ie.removeEventListener("dispose",He)};Ie.addEventListener("dispose",He),X.__depthDisposeCallback=He}X.__boundDepthTexture=Ie}if(Z.depthTexture&&!X.__autoAllocateDepthBuffer){if(ve)throw new Error("target.depthTexture not supported in Cube render targets");const Ie=Z.texture.mipmaps;Ie&&Ie.length>0?Me(X.__webglFramebuffer[0],Z):Me(X.__webglFramebuffer,Z)}else if(ve){X.__webglDepthbuffer=[];for(let Ie=0;Ie<6;Ie++)if(t.bindFramebuffer(n.FRAMEBUFFER,X.__webglFramebuffer[Ie]),X.__webglDepthbuffer[Ie]===void 0)X.__webglDepthbuffer[Ie]=n.createRenderbuffer(),Ge(X.__webglDepthbuffer[Ie],Z,!1);else{const He=Z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,we=X.__webglDepthbuffer[Ie];n.bindRenderbuffer(n.RENDERBUFFER,we),n.framebufferRenderbuffer(n.FRAMEBUFFER,He,n.RENDERBUFFER,we)}}else{const Ie=Z.texture.mipmaps;if(Ie&&Ie.length>0?t.bindFramebuffer(n.FRAMEBUFFER,X.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,X.__webglFramebuffer),X.__webglDepthbuffer===void 0)X.__webglDepthbuffer=n.createRenderbuffer(),Ge(X.__webglDepthbuffer,Z,!1);else{const He=Z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,we=X.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,we),n.framebufferRenderbuffer(n.FRAMEBUFFER,He,n.RENDERBUFFER,we)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Te(Z,X,ve){const Ie=r.get(Z);X!==void 0&&ge(Ie.__webglFramebuffer,Z,Z.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ve!==void 0&&Ce(Z)}function te(Z){const X=Z.texture,ve=r.get(Z),Ie=r.get(X);Z.addEventListener("dispose",P);const He=Z.textures,we=Z.isWebGLCubeRenderTarget===!0,pt=He.length>1;if(pt||(Ie.__webglTexture===void 0&&(Ie.__webglTexture=n.createTexture()),Ie.__version=X.version,s.memory.textures++),we){ve.__webglFramebuffer=[];for(let lt=0;lt<6;lt++)if(X.mipmaps&&X.mipmaps.length>0){ve.__webglFramebuffer[lt]=[];for(let St=0;St<X.mipmaps.length;St++)ve.__webglFramebuffer[lt][St]=n.createFramebuffer()}else ve.__webglFramebuffer[lt]=n.createFramebuffer()}else{if(X.mipmaps&&X.mipmaps.length>0){ve.__webglFramebuffer=[];for(let lt=0;lt<X.mipmaps.length;lt++)ve.__webglFramebuffer[lt]=n.createFramebuffer()}else ve.__webglFramebuffer=n.createFramebuffer();if(pt)for(let lt=0,St=He.length;lt<St;lt++){const bt=r.get(He[lt]);bt.__webglTexture===void 0&&(bt.__webglTexture=n.createTexture(),s.memory.textures++)}if(Z.samples>0&&tt(Z)===!1){ve.__webglMultisampledFramebuffer=n.createFramebuffer(),ve.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ve.__webglMultisampledFramebuffer);for(let lt=0;lt<He.length;lt++){const St=He[lt];ve.__webglColorRenderbuffer[lt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ve.__webglColorRenderbuffer[lt]);const bt=a.convert(St.format,St.colorSpace),ut=a.convert(St.type),xt=E(St.internalFormat,bt,ut,St.colorSpace,Z.isXRRenderTarget===!0),Bt=st(Z);n.renderbufferStorageMultisample(n.RENDERBUFFER,Bt,xt,Z.width,Z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.RENDERBUFFER,ve.__webglColorRenderbuffer[lt])}n.bindRenderbuffer(n.RENDERBUFFER,null),Z.depthBuffer&&(ve.__webglDepthRenderbuffer=n.createRenderbuffer(),Ge(ve.__webglDepthRenderbuffer,Z,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(we){t.bindTexture(n.TEXTURE_CUBE_MAP,Ie.__webglTexture),Fe(n.TEXTURE_CUBE_MAP,X);for(let lt=0;lt<6;lt++)if(X.mipmaps&&X.mipmaps.length>0)for(let St=0;St<X.mipmaps.length;St++)ge(ve.__webglFramebuffer[lt][St],Z,X,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+lt,St);else ge(ve.__webglFramebuffer[lt],Z,X,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+lt,0);w(X)&&x(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(pt){for(let lt=0,St=He.length;lt<St;lt++){const bt=He[lt],ut=r.get(bt);let xt=n.TEXTURE_2D;(Z.isWebGL3DRenderTarget||Z.isWebGLArrayRenderTarget)&&(xt=Z.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(xt,ut.__webglTexture),Fe(xt,bt),ge(ve.__webglFramebuffer,Z,bt,n.COLOR_ATTACHMENT0+lt,xt,0),w(bt)&&x(xt)}t.unbindTexture()}else{let lt=n.TEXTURE_2D;if((Z.isWebGL3DRenderTarget||Z.isWebGLArrayRenderTarget)&&(lt=Z.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(lt,Ie.__webglTexture),Fe(lt,X),X.mipmaps&&X.mipmaps.length>0)for(let St=0;St<X.mipmaps.length;St++)ge(ve.__webglFramebuffer[St],Z,X,n.COLOR_ATTACHMENT0,lt,St);else ge(ve.__webglFramebuffer,Z,X,n.COLOR_ATTACHMENT0,lt,0);w(X)&&x(lt),t.unbindTexture()}Z.depthBuffer&&Ce(Z)}function Ee(Z){const X=Z.textures;for(let ve=0,Ie=X.length;ve<Ie;ve++){const He=X[ve];if(w(He)){const we=S(Z),pt=r.get(He).__webglTexture;t.bindTexture(we,pt),x(we),t.unbindTexture()}}}const Pe=[],Ke=[];function je(Z){if(Z.samples>0){if(tt(Z)===!1){const X=Z.textures,ve=Z.width,Ie=Z.height;let He=n.COLOR_BUFFER_BIT;const we=Z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,pt=r.get(Z),lt=X.length>1;if(lt)for(let bt=0;bt<X.length;bt++)t.bindFramebuffer(n.FRAMEBUFFER,pt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+bt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,pt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+bt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,pt.__webglMultisampledFramebuffer);const St=Z.texture.mipmaps;St&&St.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,pt.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,pt.__webglFramebuffer);for(let bt=0;bt<X.length;bt++){if(Z.resolveDepthBuffer&&(Z.depthBuffer&&(He|=n.DEPTH_BUFFER_BIT),Z.stencilBuffer&&Z.resolveStencilBuffer&&(He|=n.STENCIL_BUFFER_BIT)),lt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,pt.__webglColorRenderbuffer[bt]);const ut=r.get(X[bt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ut,0)}n.blitFramebuffer(0,0,ve,Ie,0,0,ve,Ie,He,n.NEAREST),l===!0&&(Pe.length=0,Ke.length=0,Pe.push(n.COLOR_ATTACHMENT0+bt),Z.depthBuffer&&Z.resolveDepthBuffer===!1&&(Pe.push(we),Ke.push(we),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Ke)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Pe))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),lt)for(let bt=0;bt<X.length;bt++){t.bindFramebuffer(n.FRAMEBUFFER,pt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+bt,n.RENDERBUFFER,pt.__webglColorRenderbuffer[bt]);const ut=r.get(X[bt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,pt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+bt,n.TEXTURE_2D,ut,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,pt.__webglMultisampledFramebuffer)}else if(Z.depthBuffer&&Z.resolveDepthBuffer===!1&&l){const X=Z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[X])}}}function st(Z){return Math.min(i.maxSamples,Z.samples)}function tt(Z){const X=r.get(Z);return Z.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&X.__useRenderToTexture!==!1}function ee(Z){const X=s.render.frame;c.get(Z)!==X&&(c.set(Z,X),Z.update())}function qe(Z,X){const ve=Z.colorSpace,Ie=Z.format,He=Z.type;return Z.isCompressedTexture===!0||Z.isVideoTexture===!0||ve!==Um&&ve!==ad&&(rr.getTransfer(ve)===Cr?(Ie!==bs||He!==Nl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ve)),X}function Ye(Z){return typeof HTMLImageElement<"u"&&Z instanceof HTMLImageElement?(u.width=Z.naturalWidth||Z.width,u.height=Z.naturalHeight||Z.height):typeof VideoFrame<"u"&&Z instanceof VideoFrame?(u.width=Z.displayWidth,u.height=Z.displayHeight):(u.width=Z.width,u.height=Z.height),u}this.allocateTextureUnit=H,this.resetTextureUnits=G,this.setTexture2D=ne,this.setTexture2DArray=re,this.setTexture3D=oe,this.setTextureCube=$,this.rebindTextures=Te,this.setupRenderTarget=te,this.updateRenderTargetMipmap=Ee,this.updateMultisampleRenderTarget=je,this.setupDepthRenderbuffer=Ce,this.setupFrameBufferTexture=ge,this.useMultisampledRTT=tt}function tte(n,e){function t(r,i=ad){let a;const s=rr.getTransfer(i);if(r===Nl)return n.UNSIGNED_BYTE;if(r===ik)return n.UNSIGNED_SHORT_4_4_4_4;if(r===ak)return n.UNSIGNED_SHORT_5_5_5_1;if(r===DO)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===NO)return n.BYTE;if(r===RO)return n.SHORT;if(r===Fv)return n.UNSIGNED_SHORT;if(r===rk)return n.INT;if(r===Ld)return n.UNSIGNED_INT;if(r===Ao)return n.FLOAT;if(r===hy)return n.HALF_FLOAT;if(r===LO)return n.ALPHA;if(r===OO)return n.RGB;if(r===bs)return n.RGBA;if(r===Bv)return n.DEPTH_COMPONENT;if(r===Uv)return n.DEPTH_STENCIL;if(r===sk)return n.RED;if(r===iw)return n.RED_INTEGER;if(r===FO)return n.RG;if(r===ok)return n.RG_INTEGER;if(r===lk)return n.RGBA_INTEGER;if(r===o1||r===l1||r===u1||r===c1)if(s===Cr)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(r===o1)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===l1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===u1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===c1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(r===o1)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===l1)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===u1)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===c1)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===VE||r===zE||r===HE||r===GE)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(r===VE)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===zE)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===HE)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===GE)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===WE||r===qE||r===$E)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(r===WE||r===qE)return s===Cr?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(r===$E)return s===Cr?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===XE||r===KE||r===YE||r===ZE||r===QE||r===JE||r===eA||r===tA||r===nA||r===rA||r===iA||r===aA||r===sA||r===oA)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(r===XE)return s===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===KE)return s===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===YE)return s===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===ZE)return s===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===QE)return s===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===JE)return s===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===eA)return s===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===tA)return s===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===nA)return s===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===rA)return s===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===iA)return s===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===aA)return s===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===sA)return s===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===oA)return s===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===d1||r===lA||r===uA)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(r===d1)return s===Cr?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===lA)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===uA)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===jO||r===cA||r===dA||r===hA)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(r===d1)return a.COMPRESSED_RED_RGTC1_EXT;if(r===cA)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===dA)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===hA)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===jv?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}class nte extends ui{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}}const DDe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,LDe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class ODe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const r=new nte(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new Su({vertexShader:DDe,fragmentShader:LDe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Zi(new py(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class FDe extends Ac{constructor(e,t){super();const r=this;let i=null,a=1,s=null,o="local-floor",l=1,u=null,c=null,d=null,f=null,m=null,v=null;const _=new ODe,w={},x=t.getContextAttributes();let S=null,E=null;const T=[],D=[],F=new rt;let P=null;const N=new Bi;N.viewport=new sr;const I=new Bi;I.viewport=new sr;const R=[N,I],B=new Gee;let G=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(me){let Le=T[me];return Le===void 0&&(Le=new dS,T[me]=Le),Le.getTargetRaySpace()},this.getControllerGrip=function(me){let Le=T[me];return Le===void 0&&(Le=new dS,T[me]=Le),Le.getGripSpace()},this.getHand=function(me){let Le=T[me];return Le===void 0&&(Le=new dS,T[me]=Le),Le.getHandSpace()};function K(me){const Le=D.indexOf(me.inputSource);if(Le===-1)return;const Se=T[Le];Se!==void 0&&(Se.update(me.inputSource,me.frame,u||s),Se.dispatchEvent({type:me.type,data:me.inputSource}))}function ne(){i.removeEventListener("select",K),i.removeEventListener("selectstart",K),i.removeEventListener("selectend",K),i.removeEventListener("squeeze",K),i.removeEventListener("squeezestart",K),i.removeEventListener("squeezeend",K),i.removeEventListener("end",ne),i.removeEventListener("inputsourceschange",re);for(let me=0;me<T.length;me++){const Le=D[me];Le!==null&&(D[me]=null,T[me].disconnect(Le))}G=null,H=null,_.reset();for(const me in w)delete w[me];e.setRenderTarget(S),m=null,f=null,d=null,i=null,E=null,at.stop(),r.isPresenting=!1,e.setPixelRatio(P),e.setSize(F.width,F.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(me){a=me,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(me){o=me,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(me){u=me},this.getBaseLayer=function(){return f!==null?f:m},this.getBinding=function(){return d},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(me){if(i=me,i!==null){if(S=e.getRenderTarget(),i.addEventListener("select",K),i.addEventListener("selectstart",K),i.addEventListener("selectend",K),i.addEventListener("squeeze",K),i.addEventListener("squeezestart",K),i.addEventListener("squeezeend",K),i.addEventListener("end",ne),i.addEventListener("inputsourceschange",re),x.xrCompatible!==!0&&await t.makeXRCompatible(),P=e.getPixelRatio(),e.getSize(F),typeof XRWebGLBinding<"u"&&(d=new XRWebGLBinding(i,t)),d!==null&&"createProjectionLayer"in XRWebGLBinding.prototype){let Se=null,ge=null,Ge=null;x.depth&&(Ge=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Se=x.stencil?Uv:Bv,ge=x.stencil?jv:Ld);const Me={colorFormat:t.RGBA8,depthFormat:Ge,scaleFactor:a};f=d.createProjectionLayer(Me),i.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),E=new bc(f.textureWidth,f.textureHeight,{format:bs,type:Nl,depthTexture:new KO(f.textureWidth,f.textureHeight,ge,void 0,void 0,void 0,void 0,void 0,void 0,Se),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}else{const Se={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:a};m=new XRWebGLLayer(i,t,Se),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),E=new bc(m.framebufferWidth,m.framebufferHeight,{format:bs,type:Nl,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}E.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=await i.requestReferenceSpace(o),at.setContext(i),at.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return _.getDepthTexture()};function re(me){for(let Le=0;Le<me.removed.length;Le++){const Se=me.removed[Le],ge=D.indexOf(Se);ge>=0&&(D[ge]=null,T[ge].disconnect(Se))}for(let Le=0;Le<me.added.length;Le++){const Se=me.added[Le];let ge=D.indexOf(Se);if(ge===-1){for(let Me=0;Me<T.length;Me++)if(Me>=D.length){D.push(Se),ge=Me;break}else if(D[Me]===null){D[Me]=Se,ge=Me;break}if(ge===-1)break}const Ge=T[ge];Ge&&Ge.connect(Se)}}const oe=new ie,$=new ie;function ue(me,Le,Se){oe.setFromMatrixPosition(Le.matrixWorld),$.setFromMatrixPosition(Se.matrixWorld);const ge=oe.distanceTo($),Ge=Le.projectionMatrix.elements,Me=Se.projectionMatrix.elements,Ce=Ge[14]/(Ge[10]-1),Te=Ge[14]/(Ge[10]+1),te=(Ge[9]+1)/Ge[5],Ee=(Ge[9]-1)/Ge[5],Pe=(Ge[8]-1)/Ge[0],Ke=(Me[8]+1)/Me[0],je=Ce*Pe,st=Ce*Ke,tt=ge/(-Pe+Ke),ee=tt*-Pe;if(Le.matrixWorld.decompose(me.position,me.quaternion,me.scale),me.translateX(ee),me.translateZ(tt),me.matrixWorld.compose(me.position,me.quaternion,me.scale),me.matrixWorldInverse.copy(me.matrixWorld).invert(),Ge[10]===-1)me.projectionMatrix.copy(Le.projectionMatrix),me.projectionMatrixInverse.copy(Le.projectionMatrixInverse);else{const qe=Ce+tt,Ye=Te+tt,Z=je-ee,X=st+(ge-ee),ve=te*Te/Ye*qe,Ie=Ee*Te/Ye*qe;me.projectionMatrix.makePerspective(Z,X,ve,Ie,qe,Ye),me.projectionMatrixInverse.copy(me.projectionMatrix).invert()}}function se(me,Le){Le===null?me.matrixWorld.copy(me.matrix):me.matrixWorld.multiplyMatrices(Le.matrixWorld,me.matrix),me.matrixWorldInverse.copy(me.matrixWorld).invert()}this.updateCamera=function(me){if(i===null)return;let Le=me.near,Se=me.far;_.texture!==null&&(_.depthNear>0&&(Le=_.depthNear),_.depthFar>0&&(Se=_.depthFar)),B.near=I.near=N.near=Le,B.far=I.far=N.far=Se,(G!==B.near||H!==B.far)&&(i.updateRenderState({depthNear:B.near,depthFar:B.far}),G=B.near,H=B.far),B.layers.mask=me.layers.mask|6,N.layers.mask=B.layers.mask&3,I.layers.mask=B.layers.mask&5;const ge=me.parent,Ge=B.cameras;se(B,ge);for(let Me=0;Me<Ge.length;Me++)se(Ge[Me],ge);Ge.length===2?ue(B,N,I):B.projectionMatrix.copy(N.projectionMatrix),pe(me,B,ge)};function pe(me,Le,Se){Se===null?me.matrix.copy(Le.matrixWorld):(me.matrix.copy(Se.matrixWorld),me.matrix.invert(),me.matrix.multiply(Le.matrixWorld)),me.matrix.decompose(me.position,me.quaternion,me.scale),me.updateMatrixWorld(!0),me.projectionMatrix.copy(Le.projectionMatrix),me.projectionMatrixInverse.copy(Le.projectionMatrixInverse),me.isPerspectiveCamera&&(me.fov=zv*2*Math.atan(1/me.projectionMatrix.elements[5]),me.zoom=1)}this.getCamera=function(){return B},this.getFoveation=function(){if(!(f===null&&m===null))return l},this.setFoveation=function(me){l=me,f!==null&&(f.fixedFoveation=me),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=me)},this.hasDepthSensing=function(){return _.texture!==null},this.getDepthSensingMesh=function(){return _.getMesh(B)},this.getCameraTexture=function(me){return w[me]};let Fe=null;function $e(me,Le){if(c=Le.getViewerPose(u||s),v=Le,c!==null){const Se=c.views;m!==null&&(e.setRenderTargetFramebuffer(E,m.framebuffer),e.setRenderTarget(E));let ge=!1;Se.length!==B.cameras.length&&(B.cameras.length=0,ge=!0);for(let Te=0;Te<Se.length;Te++){const te=Se[Te];let Ee=null;if(m!==null)Ee=m.getViewport(te);else{const Ke=d.getViewSubImage(f,te);Ee=Ke.viewport,Te===0&&(e.setRenderTargetTextures(E,Ke.colorTexture,Ke.depthStencilTexture),e.setRenderTarget(E))}let Pe=R[Te];Pe===void 0&&(Pe=new Bi,Pe.layers.enable(Te),Pe.viewport=new sr,R[Te]=Pe),Pe.matrix.fromArray(te.transform.matrix),Pe.matrix.decompose(Pe.position,Pe.quaternion,Pe.scale),Pe.projectionMatrix.fromArray(te.projectionMatrix),Pe.projectionMatrixInverse.copy(Pe.projectionMatrix).invert(),Pe.viewport.set(Ee.x,Ee.y,Ee.width,Ee.height),Te===0&&(B.matrix.copy(Pe.matrix),B.matrix.decompose(B.position,B.quaternion,B.scale)),ge===!0&&B.cameras.push(Pe)}const Ge=i.enabledFeatures;if(Ge&&Ge.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&d){const Te=d.getDepthInformation(Se[0]);Te&&Te.isValid&&Te.texture&&_.init(Te,i.renderState)}if(Ge&&Ge.includes("camera-access")&&(e.state.unbindTexture(),d))for(let Te=0;Te<Se.length;Te++){const te=Se[Te].camera;if(te){let Ee=w[te];Ee||(Ee=new nte,w[te]=Ee);const Pe=d.getCameraImage(te);Ee.sourceTexture=Pe}}}for(let Se=0;Se<T.length;Se++){const ge=D[Se],Ge=T[Se];ge!==null&&Ge!==void 0&&Ge.update(ge,Le,u||s)}Fe&&Fe(me,Le),Le.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:Le}),v=null}const at=new Yee;at.setAnimationLoop($e),this.setAnimationLoop=function(me){Fe=me},this.dispose=function(){}}}const Ap=new Qo,jDe=new yn;function BDe(n,e){function t(w,x){w.matrixAutoUpdate===!0&&w.updateMatrix(),x.value.copy(w.matrix)}function r(w,x){x.color.getRGB(w.fogColor.value,KJ(n)),x.isFog?(w.fogNear.value=x.near,w.fogFar.value=x.far):x.isFogExp2&&(w.fogDensity.value=x.density)}function i(w,x,S,E,T){x.isMeshBasicMaterial||x.isMeshLambertMaterial?a(w,x):x.isMeshToonMaterial?(a(w,x),d(w,x)):x.isMeshPhongMaterial?(a(w,x),c(w,x)):x.isMeshStandardMaterial?(a(w,x),f(w,x),x.isMeshPhysicalMaterial&&m(w,x,T)):x.isMeshMatcapMaterial?(a(w,x),v(w,x)):x.isMeshDepthMaterial?a(w,x):x.isMeshDistanceMaterial?(a(w,x),_(w,x)):x.isMeshNormalMaterial?a(w,x):x.isLineBasicMaterial?(s(w,x),x.isLineDashedMaterial&&o(w,x)):x.isPointsMaterial?l(w,x,S,E):x.isSpriteMaterial?u(w,x):x.isShadowMaterial?(w.color.value.copy(x.color),w.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function a(w,x){w.opacity.value=x.opacity,x.color&&w.diffuse.value.copy(x.color),x.emissive&&w.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(w.map.value=x.map,t(x.map,w.mapTransform)),x.alphaMap&&(w.alphaMap.value=x.alphaMap,t(x.alphaMap,w.alphaMapTransform)),x.bumpMap&&(w.bumpMap.value=x.bumpMap,t(x.bumpMap,w.bumpMapTransform),w.bumpScale.value=x.bumpScale,x.side===Qs&&(w.bumpScale.value*=-1)),x.normalMap&&(w.normalMap.value=x.normalMap,t(x.normalMap,w.normalMapTransform),w.normalScale.value.copy(x.normalScale),x.side===Qs&&w.normalScale.value.negate()),x.displacementMap&&(w.displacementMap.value=x.displacementMap,t(x.displacementMap,w.displacementMapTransform),w.displacementScale.value=x.displacementScale,w.displacementBias.value=x.displacementBias),x.emissiveMap&&(w.emissiveMap.value=x.emissiveMap,t(x.emissiveMap,w.emissiveMapTransform)),x.specularMap&&(w.specularMap.value=x.specularMap,t(x.specularMap,w.specularMapTransform)),x.alphaTest>0&&(w.alphaTest.value=x.alphaTest);const S=e.get(x),E=S.envMap,T=S.envMapRotation;E&&(w.envMap.value=E,Ap.copy(T),Ap.x*=-1,Ap.y*=-1,Ap.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(Ap.y*=-1,Ap.z*=-1),w.envMapRotation.value.setFromMatrix4(jDe.makeRotationFromEuler(Ap)),w.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=x.reflectivity,w.ior.value=x.ior,w.refractionRatio.value=x.refractionRatio),x.lightMap&&(w.lightMap.value=x.lightMap,w.lightMapIntensity.value=x.lightMapIntensity,t(x.lightMap,w.lightMapTransform)),x.aoMap&&(w.aoMap.value=x.aoMap,w.aoMapIntensity.value=x.aoMapIntensity,t(x.aoMap,w.aoMapTransform))}function s(w,x){w.diffuse.value.copy(x.color),w.opacity.value=x.opacity,x.map&&(w.map.value=x.map,t(x.map,w.mapTransform))}function o(w,x){w.dashSize.value=x.dashSize,w.totalSize.value=x.dashSize+x.gapSize,w.scale.value=x.scale}function l(w,x,S,E){w.diffuse.value.copy(x.color),w.opacity.value=x.opacity,w.size.value=x.size*S,w.scale.value=E*.5,x.map&&(w.map.value=x.map,t(x.map,w.uvTransform)),x.alphaMap&&(w.alphaMap.value=x.alphaMap,t(x.alphaMap,w.alphaMapTransform)),x.alphaTest>0&&(w.alphaTest.value=x.alphaTest)}function u(w,x){w.diffuse.value.copy(x.color),w.opacity.value=x.opacity,w.rotation.value=x.rotation,x.map&&(w.map.value=x.map,t(x.map,w.mapTransform)),x.alphaMap&&(w.alphaMap.value=x.alphaMap,t(x.alphaMap,w.alphaMapTransform)),x.alphaTest>0&&(w.alphaTest.value=x.alphaTest)}function c(w,x){w.specular.value.copy(x.specular),w.shininess.value=Math.max(x.shininess,1e-4)}function d(w,x){x.gradientMap&&(w.gradientMap.value=x.gradientMap)}function f(w,x){w.metalness.value=x.metalness,x.metalnessMap&&(w.metalnessMap.value=x.metalnessMap,t(x.metalnessMap,w.metalnessMapTransform)),w.roughness.value=x.roughness,x.roughnessMap&&(w.roughnessMap.value=x.roughnessMap,t(x.roughnessMap,w.roughnessMapTransform)),x.envMap&&(w.envMapIntensity.value=x.envMapIntensity)}function m(w,x,S){w.ior.value=x.ior,x.sheen>0&&(w.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),w.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(w.sheenColorMap.value=x.sheenColorMap,t(x.sheenColorMap,w.sheenColorMapTransform)),x.sheenRoughnessMap&&(w.sheenRoughnessMap.value=x.sheenRoughnessMap,t(x.sheenRoughnessMap,w.sheenRoughnessMapTransform))),x.clearcoat>0&&(w.clearcoat.value=x.clearcoat,w.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(w.clearcoatMap.value=x.clearcoatMap,t(x.clearcoatMap,w.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,t(x.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(w.clearcoatNormalMap.value=x.clearcoatNormalMap,t(x.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===Qs&&w.clearcoatNormalScale.value.negate())),x.dispersion>0&&(w.dispersion.value=x.dispersion),x.iridescence>0&&(w.iridescence.value=x.iridescence,w.iridescenceIOR.value=x.iridescenceIOR,w.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(w.iridescenceMap.value=x.iridescenceMap,t(x.iridescenceMap,w.iridescenceMapTransform)),x.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=x.iridescenceThicknessMap,t(x.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),x.transmission>0&&(w.transmission.value=x.transmission,w.transmissionSamplerMap.value=S.texture,w.transmissionSamplerSize.value.set(S.width,S.height),x.transmissionMap&&(w.transmissionMap.value=x.transmissionMap,t(x.transmissionMap,w.transmissionMapTransform)),w.thickness.value=x.thickness,x.thicknessMap&&(w.thicknessMap.value=x.thicknessMap,t(x.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=x.attenuationDistance,w.attenuationColor.value.copy(x.attenuationColor)),x.anisotropy>0&&(w.anisotropyVector.value.set(x.anisotropy*Math.cos(x.anisotropyRotation),x.anisotropy*Math.sin(x.anisotropyRotation)),x.anisotropyMap&&(w.anisotropyMap.value=x.anisotropyMap,t(x.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=x.specularIntensity,w.specularColor.value.copy(x.specularColor),x.specularColorMap&&(w.specularColorMap.value=x.specularColorMap,t(x.specularColorMap,w.specularColorMapTransform)),x.specularIntensityMap&&(w.specularIntensityMap.value=x.specularIntensityMap,t(x.specularIntensityMap,w.specularIntensityMapTransform))}function v(w,x){x.matcap&&(w.matcap.value=x.matcap)}function _(w,x){const S=e.get(x).light;w.referencePosition.value.setFromMatrixPosition(S.matrixWorld),w.nearDistance.value=S.shadow.camera.near,w.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function UDe(n,e,t,r){let i={},a={},s=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(S,E){const T=E.program;r.uniformBlockBinding(S,T)}function u(S,E){let T=i[S.id];T===void 0&&(v(S),T=c(S),i[S.id]=T,S.addEventListener("dispose",w));const D=E.program;r.updateUBOMapping(S,D);const F=e.render.frame;a[S.id]!==F&&(f(S),a[S.id]=F)}function c(S){const E=d();S.__bindingPointIndex=E;const T=n.createBuffer(),D=S.__size,F=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,T),n.bufferData(n.UNIFORM_BUFFER,D,F),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,E,T),T}function d(){for(let S=0;S<o;S++)if(s.indexOf(S)===-1)return s.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(S){const E=i[S.id],T=S.uniforms,D=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,E);for(let F=0,P=T.length;F<P;F++){const N=Array.isArray(T[F])?T[F]:[T[F]];for(let I=0,R=N.length;I<R;I++){const B=N[I];if(m(B,F,I,D)===!0){const G=B.__offset,H=Array.isArray(B.value)?B.value:[B.value];let K=0;for(let ne=0;ne<H.length;ne++){const re=H[ne],oe=_(re);typeof re=="number"||typeof re=="boolean"?(B.__data[0]=re,n.bufferSubData(n.UNIFORM_BUFFER,G+K,B.__data)):re.isMatrix3?(B.__data[0]=re.elements[0],B.__data[1]=re.elements[1],B.__data[2]=re.elements[2],B.__data[3]=0,B.__data[4]=re.elements[3],B.__data[5]=re.elements[4],B.__data[6]=re.elements[5],B.__data[7]=0,B.__data[8]=re.elements[6],B.__data[9]=re.elements[7],B.__data[10]=re.elements[8],B.__data[11]=0):(re.toArray(B.__data,K),K+=oe.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,G,B.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(S,E,T,D){const F=S.value,P=E+"_"+T;if(D[P]===void 0)return typeof F=="number"||typeof F=="boolean"?D[P]=F:D[P]=F.clone(),!0;{const N=D[P];if(typeof F=="number"||typeof F=="boolean"){if(N!==F)return D[P]=F,!0}else if(N.equals(F)===!1)return N.copy(F),!0}return!1}function v(S){const E=S.uniforms;let T=0;const D=16;for(let P=0,N=E.length;P<N;P++){const I=Array.isArray(E[P])?E[P]:[E[P]];for(let R=0,B=I.length;R<B;R++){const G=I[R],H=Array.isArray(G.value)?G.value:[G.value];for(let K=0,ne=H.length;K<ne;K++){const re=H[K],oe=_(re),$=T%D,ue=$%oe.boundary,se=$+ue;T+=ue,se!==0&&D-se<oe.storage&&(T+=D-se),G.__data=new Float32Array(oe.storage/Float32Array.BYTES_PER_ELEMENT),G.__offset=T,T+=oe.storage}}}const F=T%D;return F>0&&(T+=D-F),S.__size=T,S.__cache={},this}function _(S){const E={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(E.boundary=4,E.storage=4):S.isVector2?(E.boundary=8,E.storage=8):S.isVector3||S.isColor?(E.boundary=16,E.storage=12):S.isVector4?(E.boundary=16,E.storage=16):S.isMatrix3?(E.boundary=48,E.storage=48):S.isMatrix4?(E.boundary=64,E.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),E}function w(S){const E=S.target;E.removeEventListener("dispose",w);const T=s.indexOf(E.__bindingPointIndex);s.splice(T,1),n.deleteBuffer(i[E.id]),delete i[E.id],delete a[E.id]}function x(){for(const S in i)n.deleteBuffer(i[S]);s=[],i={},a={}}return{bind:l,update:u,dispose:x}}class rte{constructor(e={}){const{canvas:t=qJ(),context:r=null,depth:i=!0,stencil:a=!1,alpha:s=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:d=!1,reversedDepthBuffer:f=!1}=e;this.isWebGLRenderer=!0;let m;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=r.getContextAttributes().alpha}else m=s;const v=new Uint32Array(4),_=new Int32Array(4);let w=null,x=null;const S=[],E=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=pc,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const T=this;let D=!1;this._outputColorSpace=xo;let F=0,P=0,N=null,I=-1,R=null;const B=new sr,G=new sr;let H=null;const K=new Dt(0);let ne=0,re=t.width,oe=t.height,$=1,ue=null,se=null;const pe=new sr(0,0,re,oe),Fe=new sr(0,0,re,oe);let $e=!1;const at=new fy;let me=!1,Le=!1;const Se=new yn,ge=new ie,Ge=new sr,Me={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ce=!1;function Te(){return N===null?$:1}let te=r;function Ee(Q,_e){return t.getContext(Q,_e)}try{const Q={alpha:!0,depth:i,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${ek}`),t.addEventListener("webglcontextlost",fe,!1),t.addEventListener("webglcontextrestored",Ze,!1),t.addEventListener("webglcontextcreationerror",Qe,!1),te===null){const _e="webgl2";if(te=Ee(_e,Q),te===null)throw Ee(_e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Q){throw console.error("THREE.WebGLRenderer: "+Q.message),Q}let Pe,Ke,je,st,tt,ee,qe,Ye,Z,X,ve,Ie,He,we,pt,lt,St,bt,ut,xt,Bt,ce,Ne,ht;function de(){Pe=new QRe(te),Pe.init(),ce=new tte(te,Pe),Ke=new WRe(te,Pe,e,ce),je=new NDe(te,Pe),Ke.reversedDepthBuffer&&f&&je.buffers.depth.setReversed(!0),st=new t3e(te),tt=new xDe,ee=new RDe(te,Pe,je,tt,Ke,ce,st),qe=new $Re(T),Ye=new ZRe(T),Z=new oPe(te),Ne=new HRe(te,Z),X=new JRe(te,Z,st,Ne),ve=new r3e(te,X,Z,st),ut=new n3e(te,Ke,ee),lt=new qRe(tt),Ie=new yDe(T,qe,Ye,Pe,Ke,Ne,lt),He=new BDe(T,tt),we=new wDe,pt=new kDe(Pe),bt=new zRe(T,qe,Ye,je,ve,m,l),St=new IDe(T,ve,Ke),ht=new UDe(te,st,Ke,je),xt=new GRe(te,Pe,st),Bt=new e3e(te,Pe,st),st.programs=Ie.programs,T.capabilities=Ke,T.extensions=Pe,T.properties=tt,T.renderLists=we,T.shadowMap=St,T.state=je,T.info=st}de();const nt=new FDe(T,te);this.xr=nt,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const Q=Pe.get("WEBGL_lose_context");Q&&Q.loseContext()},this.forceContextRestore=function(){const Q=Pe.get("WEBGL_lose_context");Q&&Q.restoreContext()},this.getPixelRatio=function(){return $},this.setPixelRatio=function(Q){Q!==void 0&&($=Q,this.setSize(re,oe,!1))},this.getSize=function(Q){return Q.set(re,oe)},this.setSize=function(Q,_e,Ue=!0){if(nt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}re=Q,oe=_e,t.width=Math.floor(Q*$),t.height=Math.floor(_e*$),Ue===!0&&(t.style.width=Q+"px",t.style.height=_e+"px"),this.setViewport(0,0,Q,_e)},this.getDrawingBufferSize=function(Q){return Q.set(re*$,oe*$).floor()},this.setDrawingBufferSize=function(Q,_e,Ue){re=Q,oe=_e,$=Ue,t.width=Math.floor(Q*Ue),t.height=Math.floor(_e*Ue),this.setViewport(0,0,Q,_e)},this.getCurrentViewport=function(Q){return Q.copy(B)},this.getViewport=function(Q){return Q.copy(pe)},this.setViewport=function(Q,_e,Ue,Ve){Q.isVector4?pe.set(Q.x,Q.y,Q.z,Q.w):pe.set(Q,_e,Ue,Ve),je.viewport(B.copy(pe).multiplyScalar($).round())},this.getScissor=function(Q){return Q.copy(Fe)},this.setScissor=function(Q,_e,Ue,Ve){Q.isVector4?Fe.set(Q.x,Q.y,Q.z,Q.w):Fe.set(Q,_e,Ue,Ve),je.scissor(G.copy(Fe).multiplyScalar($).round())},this.getScissorTest=function(){return $e},this.setScissorTest=function(Q){je.setScissorTest($e=Q)},this.setOpaqueSort=function(Q){ue=Q},this.setTransparentSort=function(Q){se=Q},this.getClearColor=function(Q){return Q.copy(bt.getClearColor())},this.setClearColor=function(){bt.setClearColor(...arguments)},this.getClearAlpha=function(){return bt.getClearAlpha()},this.setClearAlpha=function(){bt.setClearAlpha(...arguments)},this.clear=function(Q=!0,_e=!0,Ue=!0){let Ve=0;if(Q){let be=!1;if(N!==null){const ft=N.texture.format;be=ft===lk||ft===ok||ft===iw}if(be){const ft=N.texture.type,wt=ft===Nl||ft===Ld||ft===Fv||ft===jv||ft===ik||ft===ak,Mt=bt.getClearColor(),Et=bt.getClearAlpha(),Yt=Mt.r,$t=Mt.g,Lt=Mt.b;wt?(v[0]=Yt,v[1]=$t,v[2]=Lt,v[3]=Et,te.clearBufferuiv(te.COLOR,0,v)):(_[0]=Yt,_[1]=$t,_[2]=Lt,_[3]=Et,te.clearBufferiv(te.COLOR,0,_))}else Ve|=te.COLOR_BUFFER_BIT}_e&&(Ve|=te.DEPTH_BUFFER_BIT),Ue&&(Ve|=te.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),te.clear(Ve)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",fe,!1),t.removeEventListener("webglcontextrestored",Ze,!1),t.removeEventListener("webglcontextcreationerror",Qe,!1),bt.dispose(),we.dispose(),pt.dispose(),tt.dispose(),qe.dispose(),Ye.dispose(),ve.dispose(),Ne.dispose(),ht.dispose(),Ie.dispose(),nt.dispose(),nt.removeEventListener("sessionstart",Zn),nt.removeEventListener("sessionend",Cc),Ia.stop()};function fe(Q){Q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),D=!0}function Ze(){console.log("THREE.WebGLRenderer: Context Restored."),D=!1;const Q=st.autoReset,_e=St.enabled,Ue=St.autoUpdate,Ve=St.needsUpdate,be=St.type;de(),st.autoReset=Q,St.enabled=_e,St.autoUpdate=Ue,St.needsUpdate=Ve,St.type=be}function Qe(Q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Q.statusMessage)}function Oe(Q){const _e=Q.target;_e.removeEventListener("dispose",Oe),dt(_e)}function dt(Q){vt(Q),tt.remove(Q)}function vt(Q){const _e=tt.get(Q).programs;_e!==void 0&&(_e.forEach(function(Ue){Ie.releaseProgram(Ue)}),Q.isShaderMaterial&&Ie.releaseShaderCache(Q))}this.renderBufferDirect=function(Q,_e,Ue,Ve,be,ft){_e===null&&(_e=Me);const wt=be.isMesh&&be.matrixWorld.determinant()<0,Mt=ku(Q,_e,Ue,Ve,be);je.setMaterial(Ve,wt);let Et=Ue.index,Yt=1;if(Ve.wireframe===!0){if(Et=X.getWireframeAttribute(Ue),Et===void 0)return;Yt=2}const $t=Ue.drawRange,Lt=Ue.attributes.position;let Ot=$t.start*Yt,Ht=($t.start+$t.count)*Yt;ft!==null&&(Ot=Math.max(Ot,ft.start*Yt),Ht=Math.min(Ht,(ft.start+ft.count)*Yt)),Et!==null?(Ot=Math.max(Ot,0),Ht=Math.min(Ht,Et.count)):Lt!=null&&(Ot=Math.max(Ot,0),Ht=Math.min(Ht,Lt.count));const Ft=Ht-Ot;if(Ft<0||Ft===1/0)return;Ne.setup(be,Ve,Mt,Ue,Et);let Pt,dn=xt;if(Et!==null&&(Pt=Z.get(Et),dn=Bt,dn.setIndex(Pt)),be.isMesh)Ve.wireframe===!0?(je.setLineWidth(Ve.wireframeLinewidth*Te()),dn.setMode(te.LINES)):dn.setMode(te.TRIANGLES);else if(be.isLine){let Nt=Ve.linewidth;Nt===void 0&&(Nt=1),je.setLineWidth(Nt*Te()),be.isLineSegments?dn.setMode(te.LINES):be.isLineLoop?dn.setMode(te.LINE_LOOP):dn.setMode(te.LINE_STRIP)}else be.isPoints?dn.setMode(te.POINTS):be.isSprite&&dn.setMode(te.TRIANGLES);if(be.isBatchedMesh)if(be._multiDrawInstances!==null)tv("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),dn.renderMultiDrawInstances(be._multiDrawStarts,be._multiDrawCounts,be._multiDrawCount,be._multiDrawInstances);else if(Pe.get("WEBGL_multi_draw"))dn.renderMultiDraw(be._multiDrawStarts,be._multiDrawCounts,be._multiDrawCount);else{const Nt=be._multiDrawStarts,On=be._multiDrawCounts,tn=be._multiDrawCount,Xt=Et?Z.get(Et).bytesPerElement:1,er=tt.get(Ve).currentProgram.getUniforms();for(let bi=0;bi<tn;bi++)er.setValue(te,"_gl_DrawID",bi),dn.render(Nt[bi]/Xt,On[bi])}else if(be.isInstancedMesh)dn.renderInstances(Ot,Ft,be.count);else if(Ue.isInstancedBufferGeometry){const Nt=Ue._maxInstanceCount!==void 0?Ue._maxInstanceCount:1/0,On=Math.min(Ue.instanceCount,Nt);dn.renderInstances(Ot,Ft,On)}else dn.render(Ot,Ft)};function En(Q,_e,Ue){Q.transparent===!0&&Q.side===tc&&Q.forceSinglePass===!1?(Q.side=Qs,Q.needsUpdate=!0,Dl(Q,_e,Ue),Q.side=Rd,Q.needsUpdate=!0,Dl(Q,_e,Ue),Q.side=tc):Dl(Q,_e,Ue)}this.compile=function(Q,_e,Ue=null){Ue===null&&(Ue=Q),x=pt.get(Ue),x.init(_e),E.push(x),Ue.traverseVisible(function(be){be.isLight&&be.layers.test(_e.layers)&&(x.pushLight(be),be.castShadow&&x.pushShadow(be))}),Q!==Ue&&Q.traverseVisible(function(be){be.isLight&&be.layers.test(_e.layers)&&(x.pushLight(be),be.castShadow&&x.pushShadow(be))}),x.setupLights();const Ve=new Set;return Q.traverse(function(be){if(!(be.isMesh||be.isPoints||be.isLine||be.isSprite))return;const ft=be.material;if(ft)if(Array.isArray(ft))for(let wt=0;wt<ft.length;wt++){const Mt=ft[wt];En(Mt,Ue,be),Ve.add(Mt)}else En(ft,Ue,be),Ve.add(ft)}),x=E.pop(),Ve},this.compileAsync=function(Q,_e,Ue=null){const Ve=this.compile(Q,_e,Ue);return new Promise(be=>{function ft(){if(Ve.forEach(function(wt){tt.get(wt).currentProgram.isReady()&&Ve.delete(wt)}),Ve.size===0){be(Q);return}setTimeout(ft,10)}Pe.get("KHR_parallel_shader_compile")!==null?ft():setTimeout(ft,10)})};let xn=null;function Xr(Q){xn&&xn(Q)}function Zn(){Ia.stop()}function Cc(){Ia.start()}const Ia=new Yee;Ia.setAnimationLoop(Xr),typeof self<"u"&&Ia.setContext(self),this.setAnimationLoop=function(Q){xn=Q,nt.setAnimationLoop(Q),Q===null?Ia.stop():Ia.start()},nt.addEventListener("sessionstart",Zn),nt.addEventListener("sessionend",Cc),this.render=function(Q,_e){if(_e!==void 0&&_e.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(D===!0)return;if(Q.matrixWorldAutoUpdate===!0&&Q.updateMatrixWorld(),_e.parent===null&&_e.matrixWorldAutoUpdate===!0&&_e.updateMatrixWorld(),nt.enabled===!0&&nt.isPresenting===!0&&(nt.cameraAutoUpdate===!0&&nt.updateCamera(_e),_e=nt.getCamera()),Q.isScene===!0&&Q.onBeforeRender(T,Q,_e,N),x=pt.get(Q,E.length),x.init(_e),E.push(x),Se.multiplyMatrices(_e.projectionMatrix,_e.matrixWorldInverse),at.setFromProjectionMatrix(Se,Ho,_e.reversedDepth),Le=this.localClippingEnabled,me=lt.init(this.clippingPlanes,Le),w=we.get(Q,S.length),w.init(),S.push(w),nt.enabled===!0&&nt.isPresenting===!0){const ft=T.xr.getDepthSensingMesh();ft!==null&&no(ft,_e,-1/0,T.sortObjects)}no(Q,_e,0,T.sortObjects),w.finish(),T.sortObjects===!0&&w.sort(ue,se),Ce=nt.enabled===!1||nt.isPresenting===!1||nt.hasDepthSensing()===!1,Ce&&bt.addToRenderList(w,Q),this.info.render.frame++,me===!0&&lt.beginShadows();const Ue=x.state.shadowsArray;St.render(Ue,Q,_e),me===!0&&lt.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ve=w.opaque,be=w.transmissive;if(x.setupLights(),_e.isArrayCamera){const ft=_e.cameras;if(be.length>0)for(let wt=0,Mt=ft.length;wt<Mt;wt++){const Et=ft[wt];Wt(Ve,be,Q,Et)}Ce&&bt.render(Q);for(let wt=0,Mt=ft.length;wt<Mt;wt++){const Et=ft[wt];Qi(w,Q,Et,Et.viewport)}}else be.length>0&&Wt(Ve,be,Q,_e),Ce&&bt.render(Q),Qi(w,Q,_e);N!==null&&P===0&&(ee.updateMultisampleRenderTarget(N),ee.updateRenderTargetMipmap(N)),Q.isScene===!0&&Q.onAfterRender(T,Q,_e),Ne.resetDefaultState(),I=-1,R=null,E.pop(),E.length>0?(x=E[E.length-1],me===!0&&lt.setGlobalState(T.clippingPlanes,x.state.camera)):x=null,S.pop(),S.length>0?w=S[S.length-1]:w=null};function no(Q,_e,Ue,Ve){if(Q.visible===!1)return;if(Q.layers.test(_e.layers)){if(Q.isGroup)Ue=Q.renderOrder;else if(Q.isLOD)Q.autoUpdate===!0&&Q.update(_e);else if(Q.isLight)x.pushLight(Q),Q.castShadow&&x.pushShadow(Q);else if(Q.isSprite){if(!Q.frustumCulled||at.intersectsSprite(Q)){Ve&&Ge.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(Se);const wt=ve.update(Q),Mt=Q.material;Mt.visible&&w.push(Q,wt,Mt,Ue,Ge.z,null)}}else if((Q.isMesh||Q.isLine||Q.isPoints)&&(!Q.frustumCulled||at.intersectsObject(Q))){const wt=ve.update(Q),Mt=Q.material;if(Ve&&(Q.boundingSphere!==void 0?(Q.boundingSphere===null&&Q.computeBoundingSphere(),Ge.copy(Q.boundingSphere.center)):(wt.boundingSphere===null&&wt.computeBoundingSphere(),Ge.copy(wt.boundingSphere.center)),Ge.applyMatrix4(Q.matrixWorld).applyMatrix4(Se)),Array.isArray(Mt)){const Et=wt.groups;for(let Yt=0,$t=Et.length;Yt<$t;Yt++){const Lt=Et[Yt],Ot=Mt[Lt.materialIndex];Ot&&Ot.visible&&w.push(Q,wt,Ot,Ue,Ge.z,Lt)}}else Mt.visible&&w.push(Q,wt,Mt,Ue,Ge.z,null)}}const ft=Q.children;for(let wt=0,Mt=ft.length;wt<Mt;wt++)no(ft[wt],_e,Ue,Ve)}function Qi(Q,_e,Ue,Ve){const be=Q.opaque,ft=Q.transmissive,wt=Q.transparent;x.setupLightsView(Ue),me===!0&&lt.setGlobalState(T.clippingPlanes,Ue),Ve&&je.viewport(B.copy(Ve)),be.length>0&&Vi(be,_e,Ue),ft.length>0&&Vi(ft,_e,Ue),wt.length>0&&Vi(wt,_e,Ue),je.buffers.depth.setTest(!0),je.buffers.depth.setMask(!0),je.buffers.color.setMask(!0),je.setPolygonOffset(!1)}function Wt(Q,_e,Ue,Ve){if((Ue.isScene===!0?Ue.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[Ve.id]===void 0&&(x.state.transmissionRenderTarget[Ve.id]=new bc(1,1,{generateMipmaps:!0,type:Pe.has("EXT_color_buffer_half_float")||Pe.has("EXT_color_buffer_float")?hy:Nl,minFilter:rc,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:rr.workingColorSpace}));const ft=x.state.transmissionRenderTarget[Ve.id],wt=Ve.viewport||B;ft.setSize(wt.z*T.transmissionResolutionScale,wt.w*T.transmissionResolutionScale);const Mt=T.getRenderTarget(),Et=T.getActiveCubeFace(),Yt=T.getActiveMipmapLevel();T.setRenderTarget(ft),T.getClearColor(K),ne=T.getClearAlpha(),ne<1&&T.setClearColor(16777215,.5),T.clear(),Ce&&bt.render(Ue);const $t=T.toneMapping;T.toneMapping=pc;const Lt=Ve.viewport;if(Ve.viewport!==void 0&&(Ve.viewport=void 0),x.setupLightsView(Ve),me===!0&&lt.setGlobalState(T.clippingPlanes,Ve),Vi(Q,Ue,Ve),ee.updateMultisampleRenderTarget(ft),ee.updateRenderTargetMipmap(ft),Pe.has("WEBGL_multisampled_render_to_texture")===!1){let Ot=!1;for(let Ht=0,Ft=_e.length;Ht<Ft;Ht++){const Pt=_e[Ht],dn=Pt.object,Nt=Pt.geometry,On=Pt.material,tn=Pt.group;if(On.side===tc&&dn.layers.test(Ve.layers)){const Xt=On.side;On.side=Qs,On.needsUpdate=!0,Mc(dn,Ue,Ve,Nt,On,tn),On.side=Xt,On.needsUpdate=!0,Ot=!0}}Ot===!0&&(ee.updateMultisampleRenderTarget(ft),ee.updateRenderTargetMipmap(ft))}T.setRenderTarget(Mt,Et,Yt),T.setClearColor(K,ne),Lt!==void 0&&(Ve.viewport=Lt),T.toneMapping=$t}function Vi(Q,_e,Ue){const Ve=_e.isScene===!0?_e.overrideMaterial:null;for(let be=0,ft=Q.length;be<ft;be++){const wt=Q[be],Mt=wt.object,Et=wt.geometry,Yt=wt.group;let $t=wt.material;$t.allowOverride===!0&&Ve!==null&&($t=Ve),Mt.layers.test(Ue.layers)&&Mc(Mt,_e,Ue,Et,$t,Yt)}}function Mc(Q,_e,Ue,Ve,be,ft){Q.onBeforeRender(T,_e,Ue,Ve,be,ft),Q.modelViewMatrix.multiplyMatrices(Ue.matrixWorldInverse,Q.matrixWorld),Q.normalMatrix.getNormalMatrix(Q.modelViewMatrix),be.onBeforeRender(T,_e,Ue,Ve,Q,ft),be.transparent===!0&&be.side===tc&&be.forceSinglePass===!1?(be.side=Qs,be.needsUpdate=!0,T.renderBufferDirect(Ue,_e,Ve,be,Q,ft),be.side=Rd,be.needsUpdate=!0,T.renderBufferDirect(Ue,_e,Ve,be,Q,ft),be.side=tc):T.renderBufferDirect(Ue,_e,Ve,be,Q,ft),Q.onAfterRender(T,_e,Ue,Ve,be,ft)}function Dl(Q,_e,Ue){_e.isScene!==!0&&(_e=Me);const Ve=tt.get(Q),be=x.state.lights,ft=x.state.shadowsArray,wt=be.state.version,Mt=Ie.getParameters(Q,be.state,ft,_e,Ue),Et=Ie.getProgramCacheKey(Mt);let Yt=Ve.programs;Ve.environment=Q.isMeshStandardMaterial?_e.environment:null,Ve.fog=_e.fog,Ve.envMap=(Q.isMeshStandardMaterial?Ye:qe).get(Q.envMap||Ve.environment),Ve.envMapRotation=Ve.environment!==null&&Q.envMap===null?_e.environmentRotation:Q.envMapRotation,Yt===void 0&&(Q.addEventListener("dispose",Oe),Yt=new Map,Ve.programs=Yt);let $t=Yt.get(Et);if($t!==void 0){if(Ve.currentProgram===$t&&Ve.lightsStateVersion===wt)return Ll(Q,Mt),$t}else Mt.uniforms=Ie.getUniforms(Q),Q.onBeforeCompile(Mt,T),$t=Ie.acquireProgram(Mt,Et),Yt.set(Et,$t),Ve.uniforms=Mt.uniforms;const Lt=Ve.uniforms;return(!Q.isShaderMaterial&&!Q.isRawShaderMaterial||Q.clipping===!0)&&(Lt.clippingPlanes=lt.uniform),Ll(Q,Mt),Ve.needsLights=Is(Q),Ve.lightsStateVersion=wt,Ve.needsLights&&(Lt.ambientLightColor.value=be.state.ambient,Lt.lightProbe.value=be.state.probe,Lt.directionalLights.value=be.state.directional,Lt.directionalLightShadows.value=be.state.directionalShadow,Lt.spotLights.value=be.state.spot,Lt.spotLightShadows.value=be.state.spotShadow,Lt.rectAreaLights.value=be.state.rectArea,Lt.ltc_1.value=be.state.rectAreaLTC1,Lt.ltc_2.value=be.state.rectAreaLTC2,Lt.pointLights.value=be.state.point,Lt.pointLightShadows.value=be.state.pointShadow,Lt.hemisphereLights.value=be.state.hemi,Lt.directionalShadowMap.value=be.state.directionalShadowMap,Lt.directionalShadowMatrix.value=be.state.directionalShadowMatrix,Lt.spotShadowMap.value=be.state.spotShadowMap,Lt.spotLightMatrix.value=be.state.spotLightMatrix,Lt.spotLightMap.value=be.state.spotLightMap,Lt.pointShadowMap.value=be.state.pointShadowMap,Lt.pointShadowMatrix.value=be.state.pointShadowMatrix),Ve.currentProgram=$t,Ve.uniformsList=null,$t}function tl(Q){if(Q.uniformsList===null){const _e=Q.currentProgram.getUniforms();Q.uniformsList=hS.seqWithValue(_e.seq,Q.uniforms)}return Q.uniformsList}function Ll(Q,_e){const Ue=tt.get(Q);Ue.outputColorSpace=_e.outputColorSpace,Ue.batching=_e.batching,Ue.batchingColor=_e.batchingColor,Ue.instancing=_e.instancing,Ue.instancingColor=_e.instancingColor,Ue.instancingMorph=_e.instancingMorph,Ue.skinning=_e.skinning,Ue.morphTargets=_e.morphTargets,Ue.morphNormals=_e.morphNormals,Ue.morphColors=_e.morphColors,Ue.morphTargetsCount=_e.morphTargetsCount,Ue.numClippingPlanes=_e.numClippingPlanes,Ue.numIntersection=_e.numClipIntersection,Ue.vertexAlphas=_e.vertexAlphas,Ue.vertexTangents=_e.vertexTangents,Ue.toneMapping=_e.toneMapping}function ku(Q,_e,Ue,Ve,be){_e.isScene!==!0&&(_e=Me),ee.resetTextureUnits();const ft=_e.fog,wt=Ve.isMeshStandardMaterial?_e.environment:null,Mt=N===null?T.outputColorSpace:N.isXRRenderTarget===!0?N.texture.colorSpace:Um,Et=(Ve.isMeshStandardMaterial?Ye:qe).get(Ve.envMap||wt),Yt=Ve.vertexColors===!0&&!!Ue.attributes.color&&Ue.attributes.color.itemSize===4,$t=!!Ue.attributes.tangent&&(!!Ve.normalMap||Ve.anisotropy>0),Lt=!!Ue.morphAttributes.position,Ot=!!Ue.morphAttributes.normal,Ht=!!Ue.morphAttributes.color;let Ft=pc;Ve.toneMapped&&(N===null||N.isXRRenderTarget===!0)&&(Ft=T.toneMapping);const Pt=Ue.morphAttributes.position||Ue.morphAttributes.normal||Ue.morphAttributes.color,dn=Pt!==void 0?Pt.length:0,Nt=tt.get(Ve),On=x.state.lights;if(me===!0&&(Le===!0||Q!==R)){const Pr=Q===R&&Ve.id===I;lt.setState(Ve,Q,Pr)}let tn=!1;Ve.version===Nt.__version?(Nt.needsLights&&Nt.lightsStateVersion!==On.state.version||Nt.outputColorSpace!==Mt||be.isBatchedMesh&&Nt.batching===!1||!be.isBatchedMesh&&Nt.batching===!0||be.isBatchedMesh&&Nt.batchingColor===!0&&be.colorTexture===null||be.isBatchedMesh&&Nt.batchingColor===!1&&be.colorTexture!==null||be.isInstancedMesh&&Nt.instancing===!1||!be.isInstancedMesh&&Nt.instancing===!0||be.isSkinnedMesh&&Nt.skinning===!1||!be.isSkinnedMesh&&Nt.skinning===!0||be.isInstancedMesh&&Nt.instancingColor===!0&&be.instanceColor===null||be.isInstancedMesh&&Nt.instancingColor===!1&&be.instanceColor!==null||be.isInstancedMesh&&Nt.instancingMorph===!0&&be.morphTexture===null||be.isInstancedMesh&&Nt.instancingMorph===!1&&be.morphTexture!==null||Nt.envMap!==Et||Ve.fog===!0&&Nt.fog!==ft||Nt.numClippingPlanes!==void 0&&(Nt.numClippingPlanes!==lt.numPlanes||Nt.numIntersection!==lt.numIntersection)||Nt.vertexAlphas!==Yt||Nt.vertexTangents!==$t||Nt.morphTargets!==Lt||Nt.morphNormals!==Ot||Nt.morphColors!==Ht||Nt.toneMapping!==Ft||Nt.morphTargetsCount!==dn)&&(tn=!0):(tn=!0,Nt.__version=Ve.version);let Xt=Nt.currentProgram;tn===!0&&(Xt=Dl(Ve,_e,be));let er=!1,bi=!1,ci=!1;const fn=Xt.getUniforms(),pr=Nt.uniforms;if(je.useProgram(Xt.program)&&(er=!0,bi=!0,ci=!0),Ve.id!==I&&(I=Ve.id,bi=!0),er||R!==Q){je.buffers.depth.getReversed()&&Q.reversedDepth!==!0&&(Q._reversedDepth=!0,Q.updateProjectionMatrix()),fn.setValue(te,"projectionMatrix",Q.projectionMatrix),fn.setValue(te,"viewMatrix",Q.matrixWorldInverse);const qt=fn.map.cameraPosition;qt!==void 0&&qt.setValue(te,ge.setFromMatrixPosition(Q.matrixWorld)),Ke.logarithmicDepthBuffer&&fn.setValue(te,"logDepthBufFC",2/(Math.log(Q.far+1)/Math.LN2)),(Ve.isMeshPhongMaterial||Ve.isMeshToonMaterial||Ve.isMeshLambertMaterial||Ve.isMeshBasicMaterial||Ve.isMeshStandardMaterial||Ve.isShaderMaterial)&&fn.setValue(te,"isOrthographic",Q.isOrthographicCamera===!0),R!==Q&&(R=Q,bi=!0,ci=!0)}if(be.isSkinnedMesh){fn.setOptional(te,be,"bindMatrix"),fn.setOptional(te,be,"bindMatrixInverse");const Pr=be.skeleton;Pr&&(Pr.boneTexture===null&&Pr.computeBoneTexture(),fn.setValue(te,"boneTexture",Pr.boneTexture,ee))}be.isBatchedMesh&&(fn.setOptional(te,be,"batchingTexture"),fn.setValue(te,"batchingTexture",be._matricesTexture,ee),fn.setOptional(te,be,"batchingIdTexture"),fn.setValue(te,"batchingIdTexture",be._indirectTexture,ee),fn.setOptional(te,be,"batchingColorTexture"),be._colorsTexture!==null&&fn.setValue(te,"batchingColorTexture",be._colorsTexture,ee));const ai=Ue.morphAttributes;if((ai.position!==void 0||ai.normal!==void 0||ai.color!==void 0)&&ut.update(be,Ue,Xt),(bi||Nt.receiveShadow!==be.receiveShadow)&&(Nt.receiveShadow=be.receiveShadow,fn.setValue(te,"receiveShadow",be.receiveShadow)),Ve.isMeshGouraudMaterial&&Ve.envMap!==null&&(pr.envMap.value=Et,pr.flipEnvMap.value=Et.isCubeTexture&&Et.isRenderTargetTexture===!1?-1:1),Ve.isMeshStandardMaterial&&Ve.envMap===null&&_e.environment!==null&&(pr.envMapIntensity.value=_e.environmentIntensity),bi&&(fn.setValue(te,"toneMappingExposure",T.toneMappingExposure),Nt.needsLights&&Ms(pr,ci),ft&&Ve.fog===!0&&He.refreshFogUniforms(pr,ft),He.refreshMaterialUniforms(pr,Ve,$,oe,x.state.transmissionRenderTarget[Q.id]),hS.upload(te,tl(Nt),pr,ee)),Ve.isShaderMaterial&&Ve.uniformsNeedUpdate===!0&&(hS.upload(te,tl(Nt),pr,ee),Ve.uniformsNeedUpdate=!1),Ve.isSpriteMaterial&&fn.setValue(te,"center",be.center),fn.setValue(te,"modelViewMatrix",be.modelViewMatrix),fn.setValue(te,"normalMatrix",be.normalMatrix),fn.setValue(te,"modelMatrix",be.matrixWorld),Ve.isShaderMaterial||Ve.isRawShaderMaterial){const Pr=Ve.uniformsGroups;for(let qt=0,Pi=Pr.length;qt<Pi;qt++){const si=Pr[qt];ht.update(si,Xt),ht.bind(si,Xt)}}return Xt}function Ms(Q,_e){Q.ambientLightColor.needsUpdate=_e,Q.lightProbe.needsUpdate=_e,Q.directionalLights.needsUpdate=_e,Q.directionalLightShadows.needsUpdate=_e,Q.pointLights.needsUpdate=_e,Q.pointLightShadows.needsUpdate=_e,Q.spotLights.needsUpdate=_e,Q.spotLightShadows.needsUpdate=_e,Q.rectAreaLights.needsUpdate=_e,Q.hemisphereLights.needsUpdate=_e}function Is(Q){return Q.isMeshLambertMaterial||Q.isMeshToonMaterial||Q.isMeshPhongMaterial||Q.isMeshStandardMaterial||Q.isShadowMaterial||Q.isShaderMaterial&&Q.lights===!0}this.getActiveCubeFace=function(){return F},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(Q,_e,Ue){const Ve=tt.get(Q);Ve.__autoAllocateDepthBuffer=Q.resolveDepthBuffer===!1,Ve.__autoAllocateDepthBuffer===!1&&(Ve.__useRenderToTexture=!1),tt.get(Q.texture).__webglTexture=_e,tt.get(Q.depthTexture).__webglTexture=Ve.__autoAllocateDepthBuffer?void 0:Ue,Ve.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Q,_e){const Ue=tt.get(Q);Ue.__webglFramebuffer=_e,Ue.__useDefaultFramebuffer=_e===void 0};const Ic=te.createFramebuffer();this.setRenderTarget=function(Q,_e=0,Ue=0){N=Q,F=_e,P=Ue;let Ve=!0,be=null,ft=!1,wt=!1;if(Q){const Et=tt.get(Q);if(Et.__useDefaultFramebuffer!==void 0)je.bindFramebuffer(te.FRAMEBUFFER,null),Ve=!1;else if(Et.__webglFramebuffer===void 0)ee.setupRenderTarget(Q);else if(Et.__hasExternalTextures)ee.rebindTextures(Q,tt.get(Q.texture).__webglTexture,tt.get(Q.depthTexture).__webglTexture);else if(Q.depthBuffer){const Lt=Q.depthTexture;if(Et.__boundDepthTexture!==Lt){if(Lt!==null&&tt.has(Lt)&&(Q.width!==Lt.image.width||Q.height!==Lt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ee.setupDepthRenderbuffer(Q)}}const Yt=Q.texture;(Yt.isData3DTexture||Yt.isDataArrayTexture||Yt.isCompressedArrayTexture)&&(wt=!0);const $t=tt.get(Q).__webglFramebuffer;Q.isWebGLCubeRenderTarget?(Array.isArray($t[_e])?be=$t[_e][Ue]:be=$t[_e],ft=!0):Q.samples>0&&ee.useMultisampledRTT(Q)===!1?be=tt.get(Q).__webglMultisampledFramebuffer:Array.isArray($t)?be=$t[Ue]:be=$t,B.copy(Q.viewport),G.copy(Q.scissor),H=Q.scissorTest}else B.copy(pe).multiplyScalar($).floor(),G.copy(Fe).multiplyScalar($).floor(),H=$e;if(Ue!==0&&(be=Ic),je.bindFramebuffer(te.FRAMEBUFFER,be)&&Ve&&je.drawBuffers(Q,be),je.viewport(B),je.scissor(G),je.setScissorTest(H),ft){const Et=tt.get(Q.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_CUBE_MAP_POSITIVE_X+_e,Et.__webglTexture,Ue)}else if(wt){const Et=_e;for(let Yt=0;Yt<Q.textures.length;Yt++){const $t=tt.get(Q.textures[Yt]);te.framebufferTextureLayer(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0+Yt,$t.__webglTexture,Ue,Et)}}else if(Q!==null&&Ue!==0){const Et=tt.get(Q.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,Et.__webglTexture,Ue)}I=-1},this.readRenderTargetPixels=function(Q,_e,Ue,Ve,be,ft,wt,Mt=0){if(!(Q&&Q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Et=tt.get(Q).__webglFramebuffer;if(Q.isWebGLCubeRenderTarget&&wt!==void 0&&(Et=Et[wt]),Et){je.bindFramebuffer(te.FRAMEBUFFER,Et);try{const Yt=Q.textures[Mt],$t=Yt.format,Lt=Yt.type;if(!Ke.textureFormatReadable($t)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ke.textureTypeReadable(Lt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}_e>=0&&_e<=Q.width-Ve&&Ue>=0&&Ue<=Q.height-be&&(Q.textures.length>1&&te.readBuffer(te.COLOR_ATTACHMENT0+Mt),te.readPixels(_e,Ue,Ve,be,ce.convert($t),ce.convert(Lt),ft))}finally{const Yt=N!==null?tt.get(N).__webglFramebuffer:null;je.bindFramebuffer(te.FRAMEBUFFER,Yt)}}},this.readRenderTargetPixelsAsync=async function(Q,_e,Ue,Ve,be,ft,wt,Mt=0){if(!(Q&&Q.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Et=tt.get(Q).__webglFramebuffer;if(Q.isWebGLCubeRenderTarget&&wt!==void 0&&(Et=Et[wt]),Et)if(_e>=0&&_e<=Q.width-Ve&&Ue>=0&&Ue<=Q.height-be){je.bindFramebuffer(te.FRAMEBUFFER,Et);const Yt=Q.textures[Mt],$t=Yt.format,Lt=Yt.type;if(!Ke.textureFormatReadable($t))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ke.textureTypeReadable(Lt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ot=te.createBuffer();te.bindBuffer(te.PIXEL_PACK_BUFFER,Ot),te.bufferData(te.PIXEL_PACK_BUFFER,ft.byteLength,te.STREAM_READ),Q.textures.length>1&&te.readBuffer(te.COLOR_ATTACHMENT0+Mt),te.readPixels(_e,Ue,Ve,be,ce.convert($t),ce.convert(Lt),0);const Ht=N!==null?tt.get(N).__webglFramebuffer:null;je.bindFramebuffer(te.FRAMEBUFFER,Ht);const Ft=te.fenceSync(te.SYNC_GPU_COMMANDS_COMPLETE,0);return te.flush(),await TCe(te,Ft,4),te.bindBuffer(te.PIXEL_PACK_BUFFER,Ot),te.getBufferSubData(te.PIXEL_PACK_BUFFER,0,ft),te.deleteBuffer(Ot),te.deleteSync(Ft),ft}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(Q,_e=null,Ue=0){const Ve=Math.pow(2,-Ue),be=Math.floor(Q.image.width*Ve),ft=Math.floor(Q.image.height*Ve),wt=_e!==null?_e.x:0,Mt=_e!==null?_e.y:0;ee.setTexture2D(Q,0),te.copyTexSubImage2D(te.TEXTURE_2D,Ue,0,0,wt,Mt,be,ft),je.unbindTexture()};const zd=te.createFramebuffer(),Pc=te.createFramebuffer();this.copyTextureToTexture=function(Q,_e,Ue=null,Ve=null,be=0,ft=null){ft===null&&(be!==0?(tv("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ft=be,be=0):ft=0);let wt,Mt,Et,Yt,$t,Lt,Ot,Ht,Ft;const Pt=Q.isCompressedTexture?Q.mipmaps[ft]:Q.image;if(Ue!==null)wt=Ue.max.x-Ue.min.x,Mt=Ue.max.y-Ue.min.y,Et=Ue.isBox3?Ue.max.z-Ue.min.z:1,Yt=Ue.min.x,$t=Ue.min.y,Lt=Ue.isBox3?Ue.min.z:0;else{const ai=Math.pow(2,-be);wt=Math.floor(Pt.width*ai),Mt=Math.floor(Pt.height*ai),Q.isDataArrayTexture?Et=Pt.depth:Q.isData3DTexture?Et=Math.floor(Pt.depth*ai):Et=1,Yt=0,$t=0,Lt=0}Ve!==null?(Ot=Ve.x,Ht=Ve.y,Ft=Ve.z):(Ot=0,Ht=0,Ft=0);const dn=ce.convert(_e.format),Nt=ce.convert(_e.type);let On;_e.isData3DTexture?(ee.setTexture3D(_e,0),On=te.TEXTURE_3D):_e.isDataArrayTexture||_e.isCompressedArrayTexture?(ee.setTexture2DArray(_e,0),On=te.TEXTURE_2D_ARRAY):(ee.setTexture2D(_e,0),On=te.TEXTURE_2D),te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,_e.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_e.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,_e.unpackAlignment);const tn=te.getParameter(te.UNPACK_ROW_LENGTH),Xt=te.getParameter(te.UNPACK_IMAGE_HEIGHT),er=te.getParameter(te.UNPACK_SKIP_PIXELS),bi=te.getParameter(te.UNPACK_SKIP_ROWS),ci=te.getParameter(te.UNPACK_SKIP_IMAGES);te.pixelStorei(te.UNPACK_ROW_LENGTH,Pt.width),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,Pt.height),te.pixelStorei(te.UNPACK_SKIP_PIXELS,Yt),te.pixelStorei(te.UNPACK_SKIP_ROWS,$t),te.pixelStorei(te.UNPACK_SKIP_IMAGES,Lt);const fn=Q.isDataArrayTexture||Q.isData3DTexture,pr=_e.isDataArrayTexture||_e.isData3DTexture;if(Q.isDepthTexture){const ai=tt.get(Q),Pr=tt.get(_e),qt=tt.get(ai.__renderTarget),Pi=tt.get(Pr.__renderTarget);je.bindFramebuffer(te.READ_FRAMEBUFFER,qt.__webglFramebuffer),je.bindFramebuffer(te.DRAW_FRAMEBUFFER,Pi.__webglFramebuffer);for(let si=0;si<Et;si++)fn&&(te.framebufferTextureLayer(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,tt.get(Q).__webglTexture,be,Lt+si),te.framebufferTextureLayer(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,tt.get(_e).__webglTexture,ft,Ft+si)),te.blitFramebuffer(Yt,$t,wt,Mt,Ot,Ht,wt,Mt,te.DEPTH_BUFFER_BIT,te.NEAREST);je.bindFramebuffer(te.READ_FRAMEBUFFER,null),je.bindFramebuffer(te.DRAW_FRAMEBUFFER,null)}else if(be!==0||Q.isRenderTargetTexture||tt.has(Q)){const ai=tt.get(Q),Pr=tt.get(_e);je.bindFramebuffer(te.READ_FRAMEBUFFER,zd),je.bindFramebuffer(te.DRAW_FRAMEBUFFER,Pc);for(let qt=0;qt<Et;qt++)fn?te.framebufferTextureLayer(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,ai.__webglTexture,be,Lt+qt):te.framebufferTexture2D(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,ai.__webglTexture,be),pr?te.framebufferTextureLayer(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,Pr.__webglTexture,ft,Ft+qt):te.framebufferTexture2D(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,Pr.__webglTexture,ft),be!==0?te.blitFramebuffer(Yt,$t,wt,Mt,Ot,Ht,wt,Mt,te.COLOR_BUFFER_BIT,te.NEAREST):pr?te.copyTexSubImage3D(On,ft,Ot,Ht,Ft+qt,Yt,$t,wt,Mt):te.copyTexSubImage2D(On,ft,Ot,Ht,Yt,$t,wt,Mt);je.bindFramebuffer(te.READ_FRAMEBUFFER,null),je.bindFramebuffer(te.DRAW_FRAMEBUFFER,null)}else pr?Q.isDataTexture||Q.isData3DTexture?te.texSubImage3D(On,ft,Ot,Ht,Ft,wt,Mt,Et,dn,Nt,Pt.data):_e.isCompressedArrayTexture?te.compressedTexSubImage3D(On,ft,Ot,Ht,Ft,wt,Mt,Et,dn,Pt.data):te.texSubImage3D(On,ft,Ot,Ht,Ft,wt,Mt,Et,dn,Nt,Pt):Q.isDataTexture?te.texSubImage2D(te.TEXTURE_2D,ft,Ot,Ht,wt,Mt,dn,Nt,Pt.data):Q.isCompressedTexture?te.compressedTexSubImage2D(te.TEXTURE_2D,ft,Ot,Ht,Pt.width,Pt.height,dn,Pt.data):te.texSubImage2D(te.TEXTURE_2D,ft,Ot,Ht,wt,Mt,dn,Nt,Pt);te.pixelStorei(te.UNPACK_ROW_LENGTH,tn),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,Xt),te.pixelStorei(te.UNPACK_SKIP_PIXELS,er),te.pixelStorei(te.UNPACK_SKIP_ROWS,bi),te.pixelStorei(te.UNPACK_SKIP_IMAGES,ci),ft===0&&_e.generateMipmaps&&te.generateMipmap(On),je.unbindTexture()},this.copyTextureToTexture3D=function(Q,_e,Ue=null,Ve=null,be=0){return tv('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Q,_e,Ue,Ve,be)},this.initRenderTarget=function(Q){tt.get(Q).__webglFramebuffer===void 0&&ee.setupRenderTarget(Q)},this.initTexture=function(Q){Q.isCubeTexture?ee.setTextureCube(Q,0):Q.isData3DTexture?ee.setTexture3D(Q,0):Q.isDataArrayTexture||Q.isCompressedArrayTexture?ee.setTexture2DArray(Q,0):ee.setTexture2D(Q,0),je.unbindTexture()},this.resetState=function(){F=0,P=0,N=null,je.reset(),Ne.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ho}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=rr._getDrawingBufferColorSpace(e),t.unpackColorSpace=rr._getUnpackColorSpace()}}const VDe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:IO,AddEquation:Uh,AddOperation:EJ,AdditiveAnimationBlendMode:BO,AdditiveBlending:_R,AgXToneMapping:MJ,AlphaFormat:LO,AlwaysCompare:GJ,AlwaysDepth:LE,AlwaysStencilFunc:ER,AmbientLight:jee,AnimationAction:$ee,AnimationClip:y_,AnimationLoader:JMe,AnimationMixer:kIe,AnimationObjectGroup:AIe,AnimationUtils:KMe,ArcCurve:uee,ArrayCamera:Gee,ArrowHelper:QIe,AttachedBindMode:SR,Audio:Wee,AudioAnalyser:mIe,AudioContext:c4,AudioListener:hIe,AudioLoader:uIe,AxesHelper:JIe,BackSide:Qs,BasicDepthPacking:LJ,BasicShadowMap:iJ,BatchedMesh:iee,Bone:$O,BooleanKeyframeTrack:sg,Box2:OIe,Box3:Es,Box3Helper:YIe,BoxGeometry:ag,BoxHelper:KIe,BufferAttribute:Lr,BufferGeometry:In,BufferGeometryLoader:Hee,ByteType:NO,Cache:ic,Camera:aw,CameraHelper:XIe,CanvasTexture:yMe,CapsuleGeometry:yk,CatmullRomCurve3:cee,CineonToneMapping:kJ,CircleGeometry:xk,ClampToEdgeWrapping:bl,Clock:d4,Color:Dt,ColorKeyframeTrack:o4,ColorManagement:rr,CompressedArrayTexture:gMe,CompressedCubeTexture:vMe,CompressedTexture:vk,CompressedTextureLoader:eIe,ConeGeometry:lw,ConstantAlphaFactor:wJ,ConstantColorFactor:xJ,Controls:tPe,CubeCamera:ZJ,CubeReflectionMapping:Dd,CubeRefractionMapping:Rf,CubeTexture:sw,CubeTextureLoader:tIe,CubeUVReflectionMapping:dy,CubicBezierCurve:ZO,CubicBezierCurve3:dee,CubicInterpolant:Iee,CullFaceBack:xR,CullFaceFront:rJ,CullFaceFrontBack:Ake,CullFaceNone:nJ,Curve:Tu,CurvePath:fee,CustomBlending:aJ,CustomToneMapping:CJ,CylinderGeometry:ow,Cylindrical:LIe,Data3DTexture:dk,DataArrayTexture:ck,DataTexture:mc,DataTextureLoader:nIe,DataUtils:VCe,DecrementStencilOp:Bke,DecrementWrapStencilOp:Vke,DefaultLoadingManager:Ree,DepthFormat:Bv,DepthStencilFormat:Uv,DepthTexture:KO,DetachedBindMode:PJ,DirectionalLight:Fee,DirectionalLightHelper:$Ie,DiscreteInterpolant:Pee,DodecahedronGeometry:_k,DoubleSide:tc,DstAlphaFactor:pJ,DstColorFactor:gJ,DynamicCopyUsage:nCe,DynamicDrawUsage:Yke,DynamicReadUsage:Jke,EdgesGeometry:lee,EllipseCurve:wk,EqualCompare:UJ,EqualDepth:FE,EqualStencilFunc:Wke,EquirectangularReflectionMapping:i_,EquirectangularRefractionMapping:a_,Euler:Qo,EventDispatcher:Ac,ExtrudeGeometry:bk,FileLoader:Od,Float16BufferAttribute:XCe,Float32BufferAttribute:Gt,FloatType:Ao,Fog:fk,FogExp2:hk,FramebufferTexture:mMe,FrontSide:Rd,Frustum:fy,FrustumArray:gk,GLBufferAttribute:NIe,GLSL1:iCe,GLSL3:AR,GreaterCompare:VJ,GreaterDepth:BE,GreaterEqualCompare:HJ,GreaterEqualDepth:jE,GreaterEqualStencilFunc:Kke,GreaterStencilFunc:$ke,GridHelper:WIe,Group:N0,HalfFloatType:hy,HemisphereLight:Dee,HemisphereLightHelper:GIe,IcosahedronGeometry:Sk,ImageBitmapLoader:lIe,ImageLoader:x_,ImageUtils:$J,IncrementStencilOp:jke,IncrementWrapStencilOp:Uke,InstancedBufferAttribute:Gv,InstancedBufferGeometry:zee,InstancedInterleavedBuffer:PIe,InstancedMesh:ree,Int16BufferAttribute:qCe,Int32BufferAttribute:$Ce,Int8BufferAttribute:HCe,IntType:rk,InterleavedBuffer:pk,InterleavedBufferAttribute:Vm,Interpolant:dw,InterpolateDiscrete:l_,InterpolateLinear:fA,InterpolateSmooth:cS,InterpolationSamplingMode:oCe,InterpolationSamplingType:sCe,InvertStencilOp:zke,KeepStencilOp:jp,KeyframeTrack:Rl,LOD:tee,LatheGeometry:Ek,Layers:gm,LessCompare:BJ,LessDepth:OE,LessEqualCompare:UO,LessEqualDepth:Bm,LessEqualStencilFunc:qke,LessStencilFunc:Gke,Light:Xf,LightProbe:Vee,Line:Df,Line3:BIe,LineBasicMaterial:to,LineCurve:QO,LineCurve3:hee,LineDashedMaterial:kee,LineLoop:aee,LineSegments:Tc,LinearFilter:ha,LinearInterpolant:s4,LinearMipMapLinearFilter:Mke,LinearMipMapNearestFilter:Cke,LinearMipmapLinearFilter:rc,LinearMipmapNearestFilter:s1,LinearSRGBColorSpace:Um,LinearToneMapping:AJ,LinearTransfer:c_,Loader:Io,LoaderUtils:IR,LoadingManager:l4,LoopOnce:NJ,LoopPingPong:DJ,LoopRepeat:RJ,MOUSE:Op,Material:ks,MaterialLoader:Nk,MathUtils:ECe,Matrix2:m4,Matrix3:Cn,Matrix4:yn,MaxEquation:uJ,Mesh:Zi,MeshBasicMaterial:qf,MeshDepthMaterial:r4,MeshDistanceMaterial:i4,MeshLambertMaterial:Aee,MeshMatcapMaterial:Tee,MeshNormalMaterial:Eee,MeshPhongMaterial:bee,MeshPhysicalMaterial:wee,MeshStandardMaterial:n4,MeshToonMaterial:See,MinEquation:lJ,MirroredRepeatWrapping:o_,MixOperation:SJ,MultiplyBlending:bR,MultiplyOperation:rw,NearestFilter:Ga,NearestMipMapLinearFilter:kke,NearestMipMapNearestFilter:Tke,NearestMipmapLinearFilter:I0,NearestMipmapNearestFilter:PO,NeutralToneMapping:IJ,NeverCompare:jJ,NeverDepth:DE,NeverStencilFunc:Hke,NoBlending:yd,NoColorSpace:ad,NoToneMapping:pc,NormalAnimationBlendMode:uk,NormalBlending:pm,NotEqualCompare:zJ,NotEqualDepth:UE,NotEqualStencilFunc:Xke,NumberKeyframeTrack:g_,Object3D:lr,ObjectLoader:sIe,ObjectSpaceNormalMap:FJ,OctahedronGeometry:uw,OneFactor:dJ,OneMinusConstantAlphaFactor:bJ,OneMinusConstantColorFactor:_J,OneMinusDstAlphaFactor:mJ,OneMinusDstColorFactor:vJ,OneMinusSrcAlphaFactor:RE,OneMinusSrcColorFactor:fJ,OrthographicCamera:vf,PCFShadowMap:tk,PCFSoftShadowMap:a1,PMREMGenerator:DR,Path:vA,PerspectiveCamera:Bi,Plane:nd,PlaneGeometry:py,PlaneHelper:ZIe,PointLight:Oee,PointLightHelper:zIe,Points:see,PointsMaterial:XO,PolarGridHelper:qIe,PolyhedronGeometry:$f,PositionalAudio:pIe,PropertyBinding:ar,PropertyMixer:qee,QuadraticBezierCurve:JO,QuadraticBezierCurve3:e4,Quaternion:Ss,QuaternionKeyframeTrack:hw,QuaternionLinearInterpolant:Nee,RED_GREEN_RGTC2_Format:dA,RED_RGTC1_Format:jO,REVISION:ek,RGBADepthPacking:OJ,RGBAFormat:bs,RGBAIntegerFormat:lk,RGBA_ASTC_10x10_Format:aA,RGBA_ASTC_10x5_Format:nA,RGBA_ASTC_10x6_Format:rA,RGBA_ASTC_10x8_Format:iA,RGBA_ASTC_12x10_Format:sA,RGBA_ASTC_12x12_Format:oA,RGBA_ASTC_4x4_Format:XE,RGBA_ASTC_5x4_Format:KE,RGBA_ASTC_5x5_Format:YE,RGBA_ASTC_6x5_Format:ZE,RGBA_ASTC_6x6_Format:QE,RGBA_ASTC_8x5_Format:JE,RGBA_ASTC_8x6_Format:eA,RGBA_ASTC_8x8_Format:tA,RGBA_BPTC_Format:d1,RGBA_ETC2_EAC_Format:$E,RGBA_PVRTC_2BPPV1_Format:GE,RGBA_PVRTC_4BPPV1_Format:HE,RGBA_S3TC_DXT1_Format:l1,RGBA_S3TC_DXT3_Format:u1,RGBA_S3TC_DXT5_Format:c1,RGBDepthPacking:Dke,RGBFormat:OO,RGBIntegerFormat:Ike,RGB_BPTC_SIGNED_Format:lA,RGB_BPTC_UNSIGNED_Format:uA,RGB_ETC1_Format:WE,RGB_ETC2_Format:qE,RGB_PVRTC_2BPPV1_Format:zE,RGB_PVRTC_4BPPV1_Format:VE,RGB_S3TC_DXT1_Format:o1,RGDepthPacking:Lke,RGFormat:FO,RGIntegerFormat:ok,RawShaderMaterial:_ee,Ray:ig,Raycaster:Xee,RectAreaLight:Bee,RedFormat:sk,RedIntegerFormat:iw,ReinhardToneMapping:TJ,RenderTarget:zO,RenderTarget3D:CIe,RepeatWrapping:s_,ReplaceStencilOp:Fke,ReverseSubtractEquation:oJ,RingGeometry:Ak,SIGNED_RED_GREEN_RGTC2_Format:hA,SIGNED_RED_RGTC1_Format:cA,SRGBColorSpace:xo,SRGBTransfer:Cr,Scene:WO,ShaderChunk:Nn,ShaderLib:iu,ShaderMaterial:Su,ShadowMaterial:xee,Shape:vm,ShapeGeometry:Tk,ShapePath:ePe,ShapeUtils:uu,ShortType:RO,Skeleton:mk,SkeletonHelper:VIe,SkinnedMesh:nee,Source:ef,Sphere:Wa,SphereGeometry:cw,Spherical:NR,SphericalHarmonics3:Uee,SplineCurve:t4,SpotLight:Lee,SpotLightHelper:UIe,Sprite:eee,SpriteMaterial:qO,SrcAlphaFactor:NE,SrcAlphaSaturateFactor:yJ,SrcColorFactor:hJ,StaticCopyUsage:tCe,StaticDrawUsage:d_,StaticReadUsage:Qke,StereoCamera:cIe,StreamCopyUsage:rCe,StreamDrawUsage:Zke,StreamReadUsage:eCe,StringKeyframeTrack:og,SubtractEquation:sJ,SubtractiveBlending:wR,TOUCH:Fp,TangentSpaceNormalMap:Wf,TetrahedronGeometry:kk,Texture:ui,TextureLoader:Pk,TextureUtils:sPe,Timer:RIe,TimestampQuery:aCe,TorusGeometry:Ck,TorusKnotGeometry:Mk,Triangle:wo,TriangleFanDrawMode:Rke,TriangleStripDrawMode:Nke,TrianglesDrawMode:Pke,TubeGeometry:Ik,UVMapping:nk,Uint16BufferAttribute:HO,Uint32BufferAttribute:GO,Uint8BufferAttribute:GCe,Uint8ClampedBufferAttribute:WCe,Uniform:p4,UniformsGroup:IIe,UniformsLib:At,UniformsUtils:YJ,UnsignedByteType:Nl,UnsignedInt248Type:jv,UnsignedInt5999Type:DO,UnsignedIntType:Ld,UnsignedShort4444Type:ik,UnsignedShort5551Type:ak,UnsignedShortType:Fv,VSMShadowMap:Ql,Vector2:rt,Vector3:ie,Vector4:sr,VectorKeyframeTrack:v_,VideoFrameTexture:pMe,VideoTexture:oee,WebGL3DRenderTarget:PCe,WebGLArrayRenderTarget:ICe,WebGLCoordinateSystem:Ho,WebGLCubeRenderTarget:QJ,WebGLRenderTarget:bc,WebGLRenderer:rte,WebGLUtils:tte,WebGPUCoordinateSystem:Vv,WebXRController:dS,WireframeGeometry:yee,WrapAroundEnding:u_,ZeroCurvatureEnding:Kp,ZeroFactor:cJ,ZeroSlopeEnding:Yp,ZeroStencilOp:Oke,createCanvasElement:qJ},Symbol.toStringTag,{value:"Module"}));var ite={exports:{}},lg={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */lg.ConcurrentRoot=1;lg.ContinuousEventPriority=4;lg.DefaultEventPriority=16;lg.DiscreteEventPriority=1;lg.IdleEventPriority=536870912;lg.LegacyRoot=0;ite.exports=lg;var D0=ite.exports;function zDe(n){let e;const t=new Set,r=(u,c)=>{const d=typeof u=="function"?u(e):u;if(d!==e){const f=e;e=c?d:Object.assign({},e,d),t.forEach(m=>m(e,f))}},i=()=>e,a=(u,c=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=c(e);function m(){const v=c(e);if(!d(f,v)){const _=f;u(f=v,_)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(u,c,d)=>c||d?a(u,c,d):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const HDe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),LV=HDe?M.useEffect:M.useLayoutEffect;function GDe(n){const e=typeof n=="function"?zDe(n):n,t=(r=e.getState,i=Object.is)=>{const[,a]=M.useReducer(w=>w+1,0),s=e.getState(),o=M.useRef(s),l=M.useRef(r),u=M.useRef(i),c=M.useRef(!1),d=M.useRef();d.current===void 0&&(d.current=r(s));let f,m=!1;(o.current!==s||l.current!==r||u.current!==i||c.current)&&(f=r(s),m=!i(d.current,f)),LV(()=>{m&&(d.current=f),o.current=s,l.current=r,u.current=i,c.current=!1});const v=M.useRef(s);LV(()=>{const w=()=>{try{const S=e.getState(),E=l.current(S);u.current(d.current,E)||(o.current=S,d.current=E,a())}catch{c.current=!0,a()}},x=e.subscribe(w);return e.getState()!==v.current&&w(),x},[]);const _=m?f:d.current;return M.useDebugValue(_),_};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const WDe=n=>typeof n=="object"&&typeof n.then=="function",Qp=[];function ate(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function ste(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const a of Qp)if(ate(e,a.keys,a.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return r.lifespan&&r.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,r.lifespan)),a.response;if(!t)throw a.promise}const i={keys:e,equal:r.equal,remove:()=>{const a=Qp.indexOf(i);a!==-1&&Qp.splice(a,1)},promise:(WDe(n)?n:n(...e)).then(a=>{i.response=a,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(a=>i.error=a)};if(Qp.push(i),!t)throw i.promise}const qDe=(n,e,t)=>ste(n,e,!1,t),$De=(n,e,t)=>void ste(n,e,!0,t),XDe=n=>{if(n===void 0||n.length===0)Qp.splice(0,Qp.length);else{const e=Qp.find(t=>ate(n,t.keys,t.equal));e&&e.remove()}};var ote={exports:{}},lte={exports:{}},ute={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e($,ue){var se=$.length;$.push(ue);e:for(;0<se;){var pe=se-1>>>1,Fe=$[pe];if(0<i(Fe,ue))$[pe]=ue,$[se]=Fe,se=pe;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var ue=$[0],se=$.pop();if(se!==ue){$[0]=se;e:for(var pe=0,Fe=$.length,$e=Fe>>>1;pe<$e;){var at=2*(pe+1)-1,me=$[at],Le=at+1,Se=$[Le];if(0>i(me,se))Le<Fe&&0>i(Se,me)?($[pe]=Se,$[Le]=se,pe=Le):($[pe]=me,$[at]=se,pe=at);else if(Le<Fe&&0>i(Se,se))$[pe]=Se,$[Le]=se,pe=Le;else break e}}return ue}function i($,ue){var se=$.sortIndex-ue.sortIndex;return se!==0?se:$.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var l=[],u=[],c=1,d=null,f=3,m=!1,v=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E($){for(var ue=t(u);ue!==null;){if(ue.callback===null)r(u);else if(ue.startTime<=$)r(u),ue.sortIndex=ue.expirationTime,e(l,ue);else break;ue=t(u)}}function T($){if(_=!1,E($),!v)if(t(l)!==null)v=!0,re(D);else{var ue=t(u);ue!==null&&oe(T,ue.startTime-$)}}function D($,ue){v=!1,_&&(_=!1,x(N),N=-1),m=!0;var se=f;try{for(E(ue),d=t(l);d!==null&&(!(d.expirationTime>ue)||$&&!B());){var pe=d.callback;if(typeof pe=="function"){d.callback=null,f=d.priorityLevel;var Fe=pe(d.expirationTime<=ue);ue=n.unstable_now(),typeof Fe=="function"?d.callback=Fe:d===t(l)&&r(l),E(ue)}else r(l);d=t(l)}if(d!==null)var $e=!0;else{var at=t(u);at!==null&&oe(T,at.startTime-ue),$e=!1}return $e}finally{d=null,f=se,m=!1}}var F=!1,P=null,N=-1,I=5,R=-1;function B(){return!(n.unstable_now()-R<I)}function G(){if(P!==null){var $=n.unstable_now();R=$;var ue=!0;try{ue=P(!0,$)}finally{ue?H():(F=!1,P=null)}}else F=!1}var H;if(typeof S=="function")H=function(){S(G)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ne=K.port2;K.port1.onmessage=G,H=function(){ne.postMessage(null)}}else H=function(){w(G,0)};function re($){P=$,F||(F=!0,H())}function oe($,ue){N=w(function(){$(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,re(D))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function($){switch(f){case 1:case 2:case 3:var ue=3;break;default:ue=f}var se=f;f=ue;try{return $()}finally{f=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,ue){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var se=f;f=$;try{return ue()}finally{f=se}},n.unstable_scheduleCallback=function($,ue,se){var pe=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?pe+se:pe):se=pe,$){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=se+Fe,$={id:c++,callback:ue,priorityLevel:$,startTime:se,expirationTime:Fe,sortIndex:-1},se>pe?($.sortIndex=se,e(u,$),t(l)===null&&$===t(u)&&(_?(x(N),N=-1):_=!0,oe(T,se-pe))):($.sortIndex=Fe,e(l,$),v||m||(v=!0,re(D))),$},n.unstable_shouldYield=B,n.unstable_wrapCallback=function($){var ue=f;return function(){var se=f;f=ue;try{return $.apply(this,arguments)}finally{f=se}}}})(ute);lte.exports=ute;var OR=lte.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KDe=function(e){var t={},r=M,i=OR,a=Object.assign;function s(g){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+g,C=1;C<arguments.length;C++)y+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),D=Symbol.iterator;function F(g){return g===null||typeof g!="object"?null:(g=D&&g[D]||g["@@iterator"],typeof g=="function"?g:null)}function P(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case c:return"Fragment";case u:return"Portal";case f:return"Profiler";case d:return"StrictMode";case w:return"Suspense";case x:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case v:return(g.displayName||"Context")+".Consumer";case m:return(g._context.displayName||"Context")+".Provider";case _:var y=g.render;return g=g.displayName,g||(g=y.displayName||y.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case S:return y=g.displayName||null,y!==null?y:P(g.type)||"Memo";case E:y=g._payload,g=g._init;try{return P(g(y))}catch{}}return null}function N(g){var y=g.type;switch(g.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=y.render,g=g.displayName||g.name||"",y.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(y);case 8:return y===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y}return null}function I(g){var y=g,C=g;if(g.alternate)for(;y.return;)y=y.return;else{g=y;do y=g,y.flags&4098&&(C=y.return),g=y.return;while(g)}return y.tag===3?C:null}function R(g){if(I(g)!==g)throw Error(s(188))}function B(g){var y=g.alternate;if(!y){if(y=I(g),y===null)throw Error(s(188));return y!==g?null:g}for(var C=g,O=y;;){var U=C.return;if(U===null)break;var q=U.alternate;if(q===null){if(O=U.return,O!==null){C=O;continue}break}if(U.child===q.child){for(q=U.child;q;){if(q===C)return R(U),g;if(q===O)return R(U),y;q=q.sibling}throw Error(s(188))}if(C.return!==O.return)C=U,O=q;else{for(var le=!1,xe=U.child;xe;){if(xe===C){le=!0,C=U,O=q;break}if(xe===O){le=!0,O=U,C=q;break}xe=xe.sibling}if(!le){for(xe=q.child;xe;){if(xe===C){le=!0,C=q,O=U;break}if(xe===O){le=!0,O=q,C=U;break}xe=xe.sibling}if(!le)throw Error(s(189))}}if(C.alternate!==O)throw Error(s(190))}if(C.tag!==3)throw Error(s(188));return C.stateNode.current===C?g:y}function G(g){return g=B(g),g!==null?H(g):null}function H(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var y=H(g);if(y!==null)return y;g=g.sibling}return null}function K(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){if(g.tag!==4){var y=K(g);if(y!==null)return y}g=g.sibling}return null}var ne=Array.isArray,re=e.getPublicInstance,oe=e.getRootHostContext,$=e.getChildHostContext,ue=e.prepareForCommit,se=e.resetAfterCommit,pe=e.createInstance,Fe=e.appendInitialChild,$e=e.finalizeInitialChildren,at=e.prepareUpdate,me=e.shouldSetTextContent,Le=e.createTextInstance,Se=e.scheduleTimeout,ge=e.cancelTimeout,Ge=e.noTimeout,Me=e.isPrimaryRenderer,Ce=e.supportsMutation,Te=e.supportsPersistence,te=e.supportsHydration,Ee=e.getInstanceFromNode,Pe=e.preparePortalMount,Ke=e.getCurrentEventPriority,je=e.detachDeletedInstance,st=e.supportsMicrotasks,tt=e.scheduleMicrotask,ee=e.supportsTestSelectors,qe=e.findFiberRoot,Ye=e.getBoundingRect,Z=e.getTextContent,X=e.isHiddenSubtree,ve=e.matchAccessibilityRole,Ie=e.setFocusIfFocusable,He=e.setupIntersectionObserver,we=e.appendChild,pt=e.appendChildToContainer,lt=e.commitTextUpdate,St=e.commitMount,bt=e.commitUpdate,ut=e.insertBefore,xt=e.insertInContainerBefore,Bt=e.removeChild,ce=e.removeChildFromContainer,Ne=e.resetTextContent,ht=e.hideInstance,de=e.hideTextInstance,nt=e.unhideInstance,fe=e.unhideTextInstance,Ze=e.clearContainer,Qe=e.cloneInstance,Oe=e.createContainerChildSet,dt=e.appendChildToContainerChildSet,vt=e.finalizeContainerChildren,En=e.replaceContainerChildren,xn=e.cloneHiddenInstance,Xr=e.cloneHiddenTextInstance,Zn=e.canHydrateInstance,Cc=e.canHydrateTextInstance,Ia=e.canHydrateSuspenseInstance,no=e.isSuspenseInstancePending,Qi=e.isSuspenseInstanceFallback,Wt=e.registerSuspenseInstanceRetry,Vi=e.getNextHydratableSibling,Mc=e.getFirstHydratableChild,Dl=e.getFirstHydratableChildWithinContainer,tl=e.getFirstHydratableChildWithinSuspenseInstance,Ll=e.hydrateInstance,ku=e.hydrateTextInstance,Ms=e.hydrateSuspenseInstance,Is=e.getNextHydratableInstanceAfterSuspenseInstance,Ic=e.commitHydratedContainer,zd=e.commitHydratedSuspenseInstance,Pc=e.clearSuspenseBoundary,Q=e.clearSuspenseBoundaryFromContainer,_e=e.shouldDeleteUnhydratedTailInstances,Ue=e.didNotMatchHydratedContainerTextInstance,Ve=e.didNotMatchHydratedTextInstance,be;function ft(g){if(be===void 0)try{throw Error()}catch(C){var y=C.stack.trim().match(/\n( *(at )?)/);be=y&&y[1]||""}return`
`+be+g}var wt=!1;function Mt(g,y){if(!g||wt)return"";wt=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(yt){var O=yt}Reflect.construct(g,[],y)}else{try{y.call()}catch(yt){O=yt}g.call(y.prototype)}else{try{throw Error()}catch(yt){O=yt}g()}}catch(yt){if(yt&&O&&typeof yt.stack=="string"){for(var U=yt.stack.split(`
`),q=O.stack.split(`
`),le=U.length-1,xe=q.length-1;1<=le&&0<=xe&&U[le]!==q[xe];)xe--;for(;1<=le&&0<=xe;le--,xe--)if(U[le]!==q[xe]){if(le!==1||xe!==1)do if(le--,xe--,0>xe||U[le]!==q[xe]){var Je=`
`+U[le].replace(" at new "," at ");return g.displayName&&Je.includes("<anonymous>")&&(Je=Je.replace("<anonymous>",g.displayName)),Je}while(1<=le&&0<=xe);break}}}finally{wt=!1,Error.prepareStackTrace=C}return(g=g?g.displayName||g.name:"")?ft(g):""}var Et=Object.prototype.hasOwnProperty,Yt=[],$t=-1;function Lt(g){return{current:g}}function Ot(g){0>$t||(g.current=Yt[$t],Yt[$t]=null,$t--)}function Ht(g,y){$t++,Yt[$t]=g.current,g.current=y}var Ft={},Pt=Lt(Ft),dn=Lt(!1),Nt=Ft;function On(g,y){var C=g.type.contextTypes;if(!C)return Ft;var O=g.stateNode;if(O&&O.__reactInternalMemoizedUnmaskedChildContext===y)return O.__reactInternalMemoizedMaskedChildContext;var U={},q;for(q in C)U[q]=y[q];return O&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=y,g.__reactInternalMemoizedMaskedChildContext=U),U}function tn(g){return g=g.childContextTypes,g!=null}function Xt(){Ot(dn),Ot(Pt)}function er(g,y,C){if(Pt.current!==Ft)throw Error(s(168));Ht(Pt,y),Ht(dn,C)}function bi(g,y,C){var O=g.stateNode;if(y=y.childContextTypes,typeof O.getChildContext!="function")return C;O=O.getChildContext();for(var U in O)if(!(U in y))throw Error(s(108,N(g)||"Unknown",U));return a({},C,O)}function ci(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||Ft,Nt=Pt.current,Ht(Pt,g),Ht(dn,dn.current),!0}function fn(g,y,C){var O=g.stateNode;if(!O)throw Error(s(169));C?(g=bi(g,y,Nt),O.__reactInternalMemoizedMergedChildContext=g,Ot(dn),Ot(Pt),Ht(Pt,g)):Ot(dn),Ht(dn,C)}var pr=Math.clz32?Math.clz32:qt,ai=Math.log,Pr=Math.LN2;function qt(g){return g>>>=0,g===0?32:31-(ai(g)/Pr|0)|0}var Pi=64,si=4194304;function Pa(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function Cu(g,y){var C=g.pendingLanes;if(C===0)return 0;var O=0,U=g.suspendedLanes,q=g.pingedLanes,le=C&268435455;if(le!==0){var xe=le&~U;xe!==0?O=Pa(xe):(q&=le,q!==0&&(O=Pa(q)))}else le=C&~U,le!==0?O=Pa(le):q!==0&&(O=Pa(q));if(O===0)return 0;if(y!==0&&y!==O&&!(y&U)&&(U=O&-O,q=y&-y,U>=q||U===16&&(q&4194240)!==0))return y;if(O&4&&(O|=C&16),y=g.entangledLanes,y!==0)for(g=g.entanglements,y&=O;0<y;)C=31-pr(y),U=1<<C,O|=g[C],y&=~U;return O}function Mu(g,y){switch(g){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kf(g,y){for(var C=g.suspendedLanes,O=g.pingedLanes,U=g.expirationTimes,q=g.pendingLanes;0<q;){var le=31-pr(q),xe=1<<le,Je=U[le];Je===-1?(!(xe&C)||xe&O)&&(U[le]=Mu(xe,y)):Je<=y&&(g.expiredLanes|=xe),q&=~xe}}function Nc(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function Iu(g){for(var y=[],C=0;31>C;C++)y.push(g);return y}function Ol(g,y,C){g.pendingLanes|=y,y!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,y=31-pr(y),g[y]=C}function Fl(g,y){var C=g.pendingLanes&~y;g.pendingLanes=y,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=y,g.mutableReadLanes&=y,g.entangledLanes&=y,y=g.entanglements;var O=g.eventTimes;for(g=g.expirationTimes;0<C;){var U=31-pr(C),q=1<<U;y[U]=0,O[U]=-1,g[U]=-1,C&=~q}}function Na(g,y){var C=g.entangledLanes|=y;for(g=g.entanglements;C;){var O=31-pr(C),U=1<<O;U&y|g[O]&y&&(g[O]|=y),C&=~U}}var Vn=0;function Rc(g){return g&=-g,1<g?4<g?g&268435455?16:536870912:4:1}var Hd=i.unstable_scheduleCallback,an=i.unstable_cancelCallback,ro=i.unstable_shouldYield,yr=i.unstable_requestPaint,di=i.unstable_now,Ka=i.unstable_ImmediatePriority,Yf=i.unstable_UserBlockingPriority,Dc=i.unstable_NormalPriority,io=i.unstable_IdlePriority,No=null,Ji=null;function Kr(g){if(Ji&&typeof Ji.onCommitFiberRoot=="function")try{Ji.onCommitFiberRoot(No,g,void 0,(g.current.flags&128)===128)}catch{}}function Ps(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var Ya=typeof Object.is=="function"?Object.is:Ps,Za=null,Er=!1,Gd=!1;function Wd(g){Za===null?Za=[g]:Za.push(g)}function cg(g){Er=!0,Wd(g)}function Qa(){if(!Gd&&Za!==null){Gd=!0;var g=0,y=Vn;try{var C=Za;for(Vn=1;g<C.length;g++){var O=C[g];do O=O(!0);while(O!==null)}Za=null,Er=!1}catch(U){throw Za!==null&&(Za=Za.slice(g+1)),Hd(Ka,Qa),U}finally{Vn=y,Gd=!1}}return null}var Fn=o.ReactCurrentBatchConfig;function jl(g,y){if(Ya(g,y))return!0;if(typeof g!="object"||g===null||typeof y!="object"||y===null)return!1;var C=Object.keys(g),O=Object.keys(y);if(C.length!==O.length)return!1;for(O=0;O<C.length;O++){var U=C[O];if(!Et.call(y,U)||!Ya(g[U],y[U]))return!1}return!0}function Ja(g){switch(g.tag){case 5:return ft(g.type);case 16:return ft("Lazy");case 13:return ft("Suspense");case 19:return ft("SuspenseList");case 0:case 2:case 15:return g=Mt(g.type,!1),g;case 11:return g=Mt(g.type.render,!1),g;case 1:return g=Mt(g.type,!0),g;default:return""}}function Fr(g,y){if(g&&g.defaultProps){y=a({},y),g=g.defaultProps;for(var C in g)y[C]===void 0&&(y[C]=g[C]);return y}return y}var Pu=Lt(null),qd=null,es=null,$d=null;function Nu(){$d=es=qd=null}function Lc(g,y,C){Me?(Ht(Pu,y._currentValue),y._currentValue=C):(Ht(Pu,y._currentValue2),y._currentValue2=C)}function Xd(g){var y=Pu.current;Ot(Pu),Me?g._currentValue=y:g._currentValue2=y}function nl(g,y,C){for(;g!==null;){var O=g.alternate;if((g.childLanes&y)!==y?(g.childLanes|=y,O!==null&&(O.childLanes|=y)):O!==null&&(O.childLanes&y)!==y&&(O.childLanes|=y),g===C)break;g=g.return}}function Ru(g,y){qd=g,$d=es=null,g=g.dependencies,g!==null&&g.firstContext!==null&&(g.lanes&y&&(Lo=!0),g.firstContext=null)}function Vr(g){var y=Me?g._currentValue:g._currentValue2;if($d!==g)if(g={context:g,memoizedValue:y,next:null},es===null){if(qd===null)throw Error(s(308));es=g,qd.dependencies={lanes:0,firstContext:g}}else es=es.next=g;return y}var va=null,ao=!1;function Ns(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oc(g,y){g=g.updateQueue,y.updateQueue===g&&(y.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function ts(g,y){return{eventTime:g,lane:y,tag:0,payload:null,callback:null,next:null}}function Rs(g,y){var C=g.updateQueue;C!==null&&(C=C.shared,zi!==null&&g.mode&1&&!(jn&2)?(g=C.interleaved,g===null?(y.next=y,va===null?va=[C]:va.push(C)):(y.next=g.next,g.next=y),C.interleaved=y):(g=C.pending,g===null?y.next=y:(y.next=g.next,g.next=y),C.pending=y))}function Bl(g,y,C){if(y=y.updateQueue,y!==null&&(y=y.shared,(C&4194240)!==0)){var O=y.lanes;O&=g.pendingLanes,C|=O,y.lanes=C,Na(g,C)}}function Kd(g,y){var C=g.updateQueue,O=g.alternate;if(O!==null&&(O=O.updateQueue,C===O)){var U=null,q=null;if(C=C.firstBaseUpdate,C!==null){do{var le={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};q===null?U=q=le:q=q.next=le,C=C.next}while(C!==null);q===null?U=q=y:q=q.next=y}else U=q=y;C={baseState:O.baseState,firstBaseUpdate:U,lastBaseUpdate:q,shared:O.shared,effects:O.effects},g.updateQueue=C;return}g=C.lastBaseUpdate,g===null?C.firstBaseUpdate=y:g.next=y,C.lastBaseUpdate=y}function Du(g,y,C,O){var U=g.updateQueue;ao=!1;var q=U.firstBaseUpdate,le=U.lastBaseUpdate,xe=U.shared.pending;if(xe!==null){U.shared.pending=null;var Je=xe,yt=Je.next;Je.next=null,le===null?q=yt:le.next=yt,le=Je;var Ut=g.alternate;Ut!==null&&(Ut=Ut.updateQueue,xe=Ut.lastBaseUpdate,xe!==le&&(xe===null?Ut.firstBaseUpdate=yt:xe.next=yt,Ut.lastBaseUpdate=Je))}if(q!==null){var Tn=U.baseState;le=0,Ut=yt=Je=null,xe=q;do{var sn=xe.lane,Br=xe.eventTime;if((O&sn)===sn){Ut!==null&&(Ut=Ut.next={eventTime:Br,lane:0,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null});e:{var Qt=g,as=xe;switch(sn=y,Br=C,as.tag){case 1:if(Qt=as.payload,typeof Qt=="function"){Tn=Qt.call(Br,Tn,sn);break e}Tn=Qt;break e;case 3:Qt.flags=Qt.flags&-65537|128;case 0:if(Qt=as.payload,sn=typeof Qt=="function"?Qt.call(Br,Tn,sn):Qt,sn==null)break e;Tn=a({},Tn,sn);break e;case 2:ao=!0}}xe.callback!==null&&xe.lane!==0&&(g.flags|=64,sn=U.effects,sn===null?U.effects=[xe]:sn.push(xe))}else Br={eventTime:Br,lane:sn,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},Ut===null?(yt=Ut=Br,Je=Tn):Ut=Ut.next=Br,le|=sn;if(xe=xe.next,xe===null){if(xe=U.shared.pending,xe===null)break;sn=xe,xe=sn.next,sn.next=null,U.lastBaseUpdate=sn,U.shared.pending=null}}while(!0);if(Ut===null&&(Je=Tn),U.baseState=Je,U.firstBaseUpdate=yt,U.lastBaseUpdate=Ut,y=U.shared.interleaved,y!==null){U=y;do le|=U.lane,U=U.next;while(U!==y)}else q===null&&(U.shared.lanes=0);_g|=le,g.lanes=le,g.memoizedState=Tn}}function rl(g,y,C){if(g=y.effects,y.effects=null,g!==null)for(y=0;y<g.length;y++){var O=g[y],U=O.callback;if(U!==null){if(O.callback=null,O=C,typeof U!="function")throw Error(s(191,U));U.call(O)}}}var Zf=new r.Component().refs;function Lu(g,y,C,O){y=g.memoizedState,C=C(O,y),C=C==null?y:a({},y,C),g.memoizedState=C,g.lanes===0&&(g.updateQueue.baseState=C)}var Fc={isMounted:function(g){return(g=g._reactInternals)?I(g)===g:!1},enqueueSetState:function(g,y,C){g=g._reactInternals;var O=js(),U=uh(g),q=ts(O,U);q.payload=y,C!=null&&(q.callback=C),Rs(g,q),y=ol(g,U,O),y!==null&&Bl(y,g,U)},enqueueReplaceState:function(g,y,C){g=g._reactInternals;var O=js(),U=uh(g),q=ts(O,U);q.tag=1,q.payload=y,C!=null&&(q.callback=C),Rs(g,q),y=ol(g,U,O),y!==null&&Bl(y,g,U)},enqueueForceUpdate:function(g,y){g=g._reactInternals;var C=js(),O=uh(g),U=ts(C,O);U.tag=2,y!=null&&(U.callback=y),Rs(g,U),y=ol(g,O,C),y!==null&&Bl(y,g,O)}};function Yd(g,y,C,O,U,q,le){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(O,q,le):y.prototype&&y.prototype.isPureReactComponent?!jl(C,O)||!jl(U,q):!0}function Ou(g,y,C){var O=!1,U=Ft,q=y.contextType;return typeof q=="object"&&q!==null?q=Vr(q):(U=tn(y)?Nt:Pt.current,O=y.contextTypes,q=(O=O!=null)?On(g,U):Ft),y=new y(C,q),g.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Fc,g.stateNode=y,y._reactInternals=g,O&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=U,g.__reactInternalMemoizedMaskedChildContext=q),y}function Ni(g,y,C,O){g=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(C,O),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(C,O),y.state!==g&&Fc.enqueueReplaceState(y,y.state,null)}function so(g,y,C,O){var U=g.stateNode;U.props=C,U.state=g.memoizedState,U.refs=Zf,Ns(g);var q=y.contextType;typeof q=="object"&&q!==null?U.context=Vr(q):(q=tn(y)?Nt:Pt.current,U.context=On(g,q)),U.state=g.memoizedState,q=y.getDerivedStateFromProps,typeof q=="function"&&(Lu(g,y,q,C),U.state=g.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(y=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),y!==U.state&&Fc.enqueueReplaceState(U,U.state,null),Du(g,C,U,O),U.state=g.memoizedState),typeof U.componentDidMount=="function"&&(g.flags|=4194308)}var Ul=[],ea=0,A=null,V=0,W=[],J=0,ke=null,ze=1,mt="";function Gn(g,y){Ul[ea++]=V,Ul[ea++]=A,A=g,V=y}function hi(g,y,C){W[J++]=ze,W[J++]=mt,W[J++]=ke,ke=g;var O=ze;g=mt;var U=32-pr(O)-1;O&=~(1<<U),C+=1;var q=32-pr(y)+U;if(30<q){var le=U-U%5;q=(O&(1<<le)-1).toString(32),O>>=le,U-=le,ze=1<<32-pr(y)+U|C<<U|O,mt=q+g}else ze=1<<q|C<<U|O,mt=g}function zn(g){g.return!==null&&(Gn(g,1),hi(g,1,0))}function ur(g){for(;g===A;)A=Ul[--ea],Ul[ea]=null,V=Ul[--ea],Ul[ea]=null;for(;g===ke;)ke=W[--J],W[J]=null,mt=W[--J],W[J]=null,ze=W[--J],W[J]=null}var Wn=null,Si=null,_n=!1,il=!1,Ei=null;function yw(g,y){var C=ll(5,null,null,0);C.elementType="DELETED",C.stateNode=y,C.return=g,y=g.deletions,y===null?(g.deletions=[C],g.flags|=16):y.push(C)}function Zd(g,y){switch(g.tag){case 5:return y=Zn(y,g.type,g.pendingProps),y!==null?(g.stateNode=y,Wn=g,Si=Mc(y),!0):!1;case 6:return y=Cc(y,g.pendingProps),y!==null?(g.stateNode=y,Wn=g,Si=null,!0):!1;case 13:if(y=Ia(y),y!==null){var C=ke!==null?{id:ze,overflow:mt}:null;return g.memoizedState={dehydrated:y,treeContext:C,retryLane:1073741824},C=ll(18,null,null,0),C.stateNode=y,C.return=g,g.child=C,Wn=g,Si=null,!0}return!1;default:return!1}}function dg(g){return(g.mode&1)!==0&&(g.flags&128)===0}function Qd(g){if(_n){var y=Si;if(y){var C=y;if(!Zd(g,y)){if(dg(g))throw Error(s(418));y=Vi(C);var O=Wn;y&&Zd(g,y)?yw(O,C):(g.flags=g.flags&-4097|2,_n=!1,Wn=g)}}else{if(dg(g))throw Error(s(418));g.flags=g.flags&-4097|2,_n=!1,Wn=g}}}function xw(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;Wn=g}function oo(g){if(!te||g!==Wn)return!1;if(!_n)return xw(g),_n=!0,!1;if(g.tag!==3&&(g.tag!==5||_e(g.type)&&!me(g.type,g.memoizedProps))){var y=Si;if(y){if(dg(g)){for(g=Si;g;)g=Vi(g);throw Error(s(418))}for(;y;)yw(g,y),y=Vi(y)}}if(xw(g),g.tag===13){if(!te)throw Error(s(316));if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));Si=Is(g)}else Si=Wn?Vi(g.stateNode):null;return!0}function Vl(){te&&(Si=Wn=null,il=_n=!1)}function xy(g){Ei===null?Ei=[g]:Ei.push(g)}function jc(g,y,C){if(g=C.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(s(309));var O=C.stateNode}if(!O)throw Error(s(147,g));var U=O,q=""+g;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===q?y.ref:(y=function(le){var xe=U.refs;xe===Zf&&(xe=U.refs={}),le===null?delete xe[q]:xe[q]=le},y._stringRef=q,y)}if(typeof g!="string")throw Error(s(284));if(!C._owner)throw Error(s(290,g))}return g}function hg(g,y){throw g=Object.prototype.toString.call(y),Error(s(31,g==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":g))}function al(g){var y=g._init;return y(g._payload)}function _w(g){function y(Be,Ae){if(g){var Xe=Be.deletions;Xe===null?(Be.deletions=[Ae],Be.flags|=16):Xe.push(Ae)}}function C(Be,Ae){if(!g)return null;for(;Ae!==null;)y(Be,Ae),Ae=Ae.sibling;return null}function O(Be,Ae){for(Be=new Map;Ae!==null;)Ae.key!==null?Be.set(Ae.key,Ae):Be.set(Ae.index,Ae),Ae=Ae.sibling;return Be}function U(Be,Ae){return Be=dh(Be,Ae),Be.index=0,Be.sibling=null,Be}function q(Be,Ae,Xe){return Be.index=Xe,g?(Xe=Be.alternate,Xe!==null?(Xe=Xe.index,Xe<Ae?(Be.flags|=2,Ae):Xe):(Be.flags|=2,Ae)):(Be.flags|=1048576,Ae)}function le(Be){return g&&Be.alternate===null&&(Be.flags|=2),Be}function xe(Be,Ae,Xe,It){return Ae===null||Ae.tag!==6?(Ae=hC(Xe,Be.mode,It),Ae.return=Be,Ae):(Ae=U(Ae,Xe),Ae.return=Be,Ae)}function Je(Be,Ae,Xe,It){var Zt=Xe.type;return Zt===c?Ut(Be,Ae,Xe.props.children,It,Xe.key):Ae!==null&&(Ae.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===E&&al(Zt)===Ae.type)?(It=U(Ae,Xe.props),It.ref=jc(Be,Ae,Xe),It.return=Be,It):(It=Kw(Xe.type,Xe.key,Xe.props,null,Be.mode,It),It.ref=jc(Be,Ae,Xe),It.return=Be,It)}function yt(Be,Ae,Xe,It){return Ae===null||Ae.tag!==4||Ae.stateNode.containerInfo!==Xe.containerInfo||Ae.stateNode.implementation!==Xe.implementation?(Ae=fC(Xe,Be.mode,It),Ae.return=Be,Ae):(Ae=U(Ae,Xe.children||[]),Ae.return=Be,Ae)}function Ut(Be,Ae,Xe,It,Zt){return Ae===null||Ae.tag!==7?(Ae=up(Xe,Be.mode,It,Zt),Ae.return=Be,Ae):(Ae=U(Ae,Xe),Ae.return=Be,Ae)}function Tn(Be,Ae,Xe){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return Ae=hC(""+Ae,Be.mode,Xe),Ae.return=Be,Ae;if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case l:return Xe=Kw(Ae.type,Ae.key,Ae.props,null,Be.mode,Xe),Xe.ref=jc(Be,null,Ae),Xe.return=Be,Xe;case u:return Ae=fC(Ae,Be.mode,Xe),Ae.return=Be,Ae;case E:var It=Ae._init;return Tn(Be,It(Ae._payload),Xe)}if(ne(Ae)||F(Ae))return Ae=up(Ae,Be.mode,Xe,null),Ae.return=Be,Ae;hg(Be,Ae)}return null}function sn(Be,Ae,Xe,It){var Zt=Ae!==null?Ae.key:null;if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return Zt!==null?null:xe(Be,Ae,""+Xe,It);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case l:return Xe.key===Zt?Je(Be,Ae,Xe,It):null;case u:return Xe.key===Zt?yt(Be,Ae,Xe,It):null;case E:return Zt=Xe._init,sn(Be,Ae,Zt(Xe._payload),It)}if(ne(Xe)||F(Xe))return Zt!==null?null:Ut(Be,Ae,Xe,It,null);hg(Be,Xe)}return null}function Br(Be,Ae,Xe,It,Zt){if(typeof It=="string"&&It!==""||typeof It=="number")return Be=Be.get(Xe)||null,xe(Ae,Be,""+It,Zt);if(typeof It=="object"&&It!==null){switch(It.$$typeof){case l:return Be=Be.get(It.key===null?Xe:It.key)||null,Je(Ae,Be,It,Zt);case u:return Be=Be.get(It.key===null?Xe:It.key)||null,yt(Ae,Be,It,Zt);case E:var Dn=It._init;return Br(Be,Ae,Xe,Dn(It._payload),Zt)}if(ne(It)||F(It))return Be=Be.get(Xe)||null,Ut(Ae,Be,It,Zt,null);hg(Ae,It)}return null}function Qt(Be,Ae,Xe,It){for(var Zt=null,Dn=null,kn=Ae,cr=Ae=0,xa=null;kn!==null&&cr<Xe.length;cr++){kn.index>cr?(xa=kn,kn=null):xa=kn.sibling;var dr=sn(Be,kn,Xe[cr],It);if(dr===null){kn===null&&(kn=xa);break}g&&kn&&dr.alternate===null&&y(Be,kn),Ae=q(dr,Ae,cr),Dn===null?Zt=dr:Dn.sibling=dr,Dn=dr,kn=xa}if(cr===Xe.length)return C(Be,kn),_n&&Gn(Be,cr),Zt;if(kn===null){for(;cr<Xe.length;cr++)kn=Tn(Be,Xe[cr],It),kn!==null&&(Ae=q(kn,Ae,cr),Dn===null?Zt=kn:Dn.sibling=kn,Dn=kn);return _n&&Gn(Be,cr),Zt}for(kn=O(Be,kn);cr<Xe.length;cr++)xa=Br(kn,Be,cr,Xe[cr],It),xa!==null&&(g&&xa.alternate!==null&&kn.delete(xa.key===null?cr:xa.key),Ae=q(xa,Ae,cr),Dn===null?Zt=xa:Dn.sibling=xa,Dn=xa);return g&&kn.forEach(function(hh){return y(Be,hh)}),_n&&Gn(Be,cr),Zt}function as(Be,Ae,Xe,It){var Zt=F(Xe);if(typeof Zt!="function")throw Error(s(150));if(Xe=Zt.call(Xe),Xe==null)throw Error(s(151));for(var Dn=Zt=null,kn=Ae,cr=Ae=0,xa=null,dr=Xe.next();kn!==null&&!dr.done;cr++,dr=Xe.next()){kn.index>cr?(xa=kn,kn=null):xa=kn.sibling;var hh=sn(Be,kn,dr.value,It);if(hh===null){kn===null&&(kn=xa);break}g&&kn&&hh.alternate===null&&y(Be,kn),Ae=q(hh,Ae,cr),Dn===null?Zt=hh:Dn.sibling=hh,Dn=hh,kn=xa}if(dr.done)return C(Be,kn),_n&&Gn(Be,cr),Zt;if(kn===null){for(;!dr.done;cr++,dr=Xe.next())dr=Tn(Be,dr.value,It),dr!==null&&(Ae=q(dr,Ae,cr),Dn===null?Zt=dr:Dn.sibling=dr,Dn=dr);return _n&&Gn(Be,cr),Zt}for(kn=O(Be,kn);!dr.done;cr++,dr=Xe.next())dr=Br(kn,Be,cr,dr.value,It),dr!==null&&(g&&dr.alternate!==null&&kn.delete(dr.key===null?cr:dr.key),Ae=q(dr,Ae,cr),Dn===null?Zt=dr:Dn.sibling=dr,Dn=dr);return g&&kn.forEach(function(Pne){return y(Be,Pne)}),_n&&Gn(Be,cr),Zt}function ul(Be,Ae,Xe,It){if(typeof Xe=="object"&&Xe!==null&&Xe.type===c&&Xe.key===null&&(Xe=Xe.props.children),typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case l:e:{for(var Zt=Xe.key,Dn=Ae;Dn!==null;){if(Dn.key===Zt){if(Zt=Xe.type,Zt===c){if(Dn.tag===7){C(Be,Dn.sibling),Ae=U(Dn,Xe.props.children),Ae.return=Be,Be=Ae;break e}}else if(Dn.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===E&&al(Zt)===Dn.type){C(Be,Dn.sibling),Ae=U(Dn,Xe.props),Ae.ref=jc(Be,Dn,Xe),Ae.return=Be,Be=Ae;break e}C(Be,Dn);break}else y(Be,Dn);Dn=Dn.sibling}Xe.type===c?(Ae=up(Xe.props.children,Be.mode,It,Xe.key),Ae.return=Be,Be=Ae):(It=Kw(Xe.type,Xe.key,Xe.props,null,Be.mode,It),It.ref=jc(Be,Ae,Xe),It.return=Be,Be=It)}return le(Be);case u:e:{for(Dn=Xe.key;Ae!==null;){if(Ae.key===Dn)if(Ae.tag===4&&Ae.stateNode.containerInfo===Xe.containerInfo&&Ae.stateNode.implementation===Xe.implementation){C(Be,Ae.sibling),Ae=U(Ae,Xe.children||[]),Ae.return=Be,Be=Ae;break e}else{C(Be,Ae);break}else y(Be,Ae);Ae=Ae.sibling}Ae=fC(Xe,Be.mode,It),Ae.return=Be,Be=Ae}return le(Be);case E:return Dn=Xe._init,ul(Be,Ae,Dn(Xe._payload),It)}if(ne(Xe))return Qt(Be,Ae,Xe,It);if(F(Xe))return as(Be,Ae,Xe,It);hg(Be,Xe)}return typeof Xe=="string"&&Xe!==""||typeof Xe=="number"?(Xe=""+Xe,Ae!==null&&Ae.tag===6?(C(Be,Ae.sibling),Ae=U(Ae,Xe),Ae.return=Be,Be=Ae):(C(Be,Ae),Ae=hC(Xe,Be.mode,It),Ae.return=Be,Be=Ae),le(Be)):C(Be,Ae)}return ul}var Ro=_w(!0),ww=_w(!1),Ds={},Ra=Lt(Ds),Jd=Lt(Ds),Fu=Lt(Ds);function Ls(g){if(g===Ds)throw Error(s(174));return g}function Qf(g,y){Ht(Fu,y),Ht(Jd,g),Ht(Ra,Ds),g=oe(y),Ot(Ra),Ht(Ra,g)}function zl(){Ot(Ra),Ot(Jd),Ot(Fu)}function Bc(g){var y=Ls(Fu.current),C=Ls(Ra.current);y=$(C,g.type,y),C!==y&&(Ht(Jd,g),Ht(Ra,y))}function eh(g){Jd.current===g&&(Ot(Ra),Ot(Jd))}var jr=Lt(0);function Jf(g){for(var y=g;y!==null;){if(y.tag===13){var C=y.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||no(C)||Qi(C)))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if(y.flags&128)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===g)break;for(;y.sibling===null;){if(y.return===null||y.return===g)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var _y=[];function th(){for(var g=0;g<_y.length;g++){var y=_y[g];Me?y._workInProgressVersionPrimary=null:y._workInProgressVersionSecondary=null}_y.length=0}var fg=o.ReactCurrentDispatcher,Os=o.ReactCurrentBatchConfig,nh=0,Yr=null,ya=null,Ar=null,Uc=!1,ep=!1,ju=0,Uk=0;function ta(){throw Error(s(321))}function wy(g,y){if(y===null)return!1;for(var C=0;C<y.length&&C<g.length;C++)if(!Ya(g[C],y[C]))return!1;return!0}function Vc(g,y,C,O,U,q){if(nh=q,Yr=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,fg.current=g===null||g.memoizedState===null?ln:Rn,g=C(O,U),ep){q=0;do{if(ep=!1,ju=0,25<=q)throw Error(s(301));q+=1,Ar=ya=null,y.updateQueue=null,fg.current=Da,g=C(O,U)}while(ep)}if(fg.current=Tt,y=ya!==null&&ya.next!==null,nh=0,Ar=ya=Yr=null,Uc=!1,y)throw Error(s(300));return g}function by(){var g=ju!==0;return ju=0,g}function ns(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ar===null?Yr.memoizedState=Ar=g:Ar=Ar.next=g,Ar}function Do(){if(ya===null){var g=Yr.alternate;g=g!==null?g.memoizedState:null}else g=ya.next;var y=Ar===null?Yr.memoizedState:Ar.next;if(y!==null)Ar=y,ya=g;else{if(g===null)throw Error(s(310));ya=g,g={memoizedState:ya.memoizedState,baseState:ya.baseState,baseQueue:ya.baseQueue,queue:ya.queue,next:null},Ar===null?Yr.memoizedState=Ar=g:Ar=Ar.next=g}return Ar}function Bu(g,y){return typeof y=="function"?y(g):y}function pg(g){var y=Do(),C=y.queue;if(C===null)throw Error(s(311));C.lastRenderedReducer=g;var O=ya,U=O.baseQueue,q=C.pending;if(q!==null){if(U!==null){var le=U.next;U.next=q.next,q.next=le}O.baseQueue=U=q,C.pending=null}if(U!==null){q=U.next,O=O.baseState;var xe=le=null,Je=null,yt=q;do{var Ut=yt.lane;if((nh&Ut)===Ut)Je!==null&&(Je=Je.next={lane:0,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null}),O=yt.hasEagerState?yt.eagerState:g(O,yt.action);else{var Tn={lane:Ut,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null};Je===null?(xe=Je=Tn,le=O):Je=Je.next=Tn,Yr.lanes|=Ut,_g|=Ut}yt=yt.next}while(yt!==null&&yt!==q);Je===null?le=O:Je.next=xe,Ya(O,y.memoizedState)||(Lo=!0),y.memoizedState=O,y.baseState=le,y.baseQueue=Je,C.lastRenderedState=O}if(g=C.interleaved,g!==null){U=g;do q=U.lane,Yr.lanes|=q,_g|=q,U=U.next;while(U!==g)}else U===null&&(C.lanes=0);return[y.memoizedState,C.dispatch]}function lo(g){var y=Do(),C=y.queue;if(C===null)throw Error(s(311));C.lastRenderedReducer=g;var O=C.dispatch,U=C.pending,q=y.memoizedState;if(U!==null){C.pending=null;var le=U=U.next;do q=g(q,le.action),le=le.next;while(le!==U);Ya(q,y.memoizedState)||(Lo=!0),y.memoizedState=q,y.baseQueue===null&&(y.baseState=q),C.lastRenderedState=q}return[q,O]}function Sy(){}function Ey(g,y){var C=Yr,O=Do(),U=y(),q=!Ya(O.memoizedState,U);if(q&&(O.memoizedState=U,Lo=!0),O=O.queue,sh(tp.bind(null,C,O,g),[g]),O.getSnapshot!==y||q||Ar!==null&&Ar.memoizedState.tag&1){if(C.flags|=2048,ah(9,bw.bind(null,C,O,U,y),void 0,null),zi===null)throw Error(s(349));nh&30||rh(C,y,U)}return U}function rh(g,y,C){g.flags|=16384,g={getSnapshot:y,value:C},y=Yr.updateQueue,y===null?(y={lastEffect:null,stores:null},Yr.updateQueue=y,y.stores=[g]):(C=y.stores,C===null?y.stores=[g]:C.push(g))}function bw(g,y,C,O){y.value=C,y.getSnapshot=O,ih(y)&&ol(g,1,-1)}function tp(g,y,C){return C(function(){ih(y)&&ol(g,1,-1)})}function ih(g){var y=g.getSnapshot;g=g.value;try{var C=y();return!Ya(g,C)}catch{return!0}}function mg(g){var y=ns();return typeof g=="function"&&(g=g()),y.memoizedState=y.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bu,lastRenderedState:g},y.queue=g,g=g.dispatch=Y.bind(null,Yr,g),[y.memoizedState,g]}function ah(g,y,C,O){return g={tag:g,create:y,destroy:C,deps:O,next:null},y=Yr.updateQueue,y===null?(y={lastEffect:null,stores:null},Yr.updateQueue=y,y.lastEffect=g.next=g):(C=y.lastEffect,C===null?y.lastEffect=g.next=g:(O=C.next,C.next=g,g.next=O,y.lastEffect=g)),g}function Sw(){return Do().memoizedState}function np(g,y,C,O){var U=ns();Yr.flags|=g,U.memoizedState=ah(1|y,C,void 0,O===void 0?null:O)}function rp(g,y,C,O){var U=Do();O=O===void 0?null:O;var q=void 0;if(ya!==null){var le=ya.memoizedState;if(q=le.destroy,O!==null&&wy(O,le.deps)){U.memoizedState=ah(y,C,q,O);return}}Yr.flags|=g,U.memoizedState=ah(1|y,C,q,O)}function gg(g,y){return np(8390656,8,g,y)}function sh(g,y){return rp(2048,8,g,y)}function Ay(g,y){return rp(4,2,g,y)}function Ew(g,y){return rp(4,4,g,y)}function Ty(g,y){if(typeof y=="function")return g=g(),y(g),function(){y(null)};if(y!=null)return g=g(),y.current=g,function(){y.current=null}}function ky(g,y,C){return C=C!=null?C.concat([g]):null,rp(4,4,Ty.bind(null,y,g),C)}function Cy(){}function p(g,y){var C=Do();y=y===void 0?null:y;var O=C.memoizedState;return O!==null&&y!==null&&wy(y,O[1])?O[0]:(C.memoizedState=[g,y],g)}function b(g,y){var C=Do();y=y===void 0?null:y;var O=C.memoizedState;return O!==null&&y!==null&&wy(y,O[1])?O[0]:(g=g(),C.memoizedState=[g,y],g)}function k(g,y){var C=Vn;Vn=C!==0&&4>C?C:4,g(!0);var O=Os.transition;Os.transition={};try{g(!1),y()}finally{Vn=C,Os.transition=O}}function j(){return Do().memoizedState}function z(g,y,C){var O=uh(g);C={lane:O,action:C,hasEagerState:!1,eagerState:null,next:null},he(g)?Re(y,C):(We(g,y,C),C=js(),g=ol(g,O,C),g!==null&&ct(g,y,O))}function Y(g,y,C){var O=uh(g),U={lane:O,action:C,hasEagerState:!1,eagerState:null,next:null};if(he(g))Re(y,U);else{We(g,y,U);var q=g.alternate;if(g.lanes===0&&(q===null||q.lanes===0)&&(q=y.lastRenderedReducer,q!==null))try{var le=y.lastRenderedState,xe=q(le,C);if(U.hasEagerState=!0,U.eagerState=xe,Ya(xe,le))return}catch{}finally{}C=js(),g=ol(g,O,C),g!==null&&ct(g,y,O)}}function he(g){var y=g.alternate;return g===Yr||y!==null&&y===Yr}function Re(g,y){ep=Uc=!0;var C=g.pending;C===null?y.next=y:(y.next=C.next,C.next=y),g.pending=y}function We(g,y,C){zi!==null&&g.mode&1&&!(jn&2)?(g=y.interleaved,g===null?(C.next=C,va===null?va=[y]:va.push(y)):(C.next=g.next,g.next=C),y.interleaved=C):(g=y.pending,g===null?C.next=C:(C.next=g.next,g.next=C),y.pending=C)}function ct(g,y,C){if(C&4194240){var O=y.lanes;O&=g.pendingLanes,C|=O,y.lanes=C,Na(g,C)}}var Tt={readContext:Vr,useCallback:ta,useContext:ta,useEffect:ta,useImperativeHandle:ta,useInsertionEffect:ta,useLayoutEffect:ta,useMemo:ta,useReducer:ta,useRef:ta,useState:ta,useDebugValue:ta,useDeferredValue:ta,useTransition:ta,useMutableSource:ta,useSyncExternalStore:ta,useId:ta,unstable_isNewReconciler:!1},ln={readContext:Vr,useCallback:function(g,y){return ns().memoizedState=[g,y===void 0?null:y],g},useContext:Vr,useEffect:gg,useImperativeHandle:function(g,y,C){return C=C!=null?C.concat([g]):null,np(4194308,4,Ty.bind(null,y,g),C)},useLayoutEffect:function(g,y){return np(4194308,4,g,y)},useInsertionEffect:function(g,y){return np(4,2,g,y)},useMemo:function(g,y){var C=ns();return y=y===void 0?null:y,g=g(),C.memoizedState=[g,y],g},useReducer:function(g,y,C){var O=ns();return y=C!==void 0?C(y):y,O.memoizedState=O.baseState=y,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:y},O.queue=g,g=g.dispatch=z.bind(null,Yr,g),[O.memoizedState,g]},useRef:function(g){var y=ns();return g={current:g},y.memoizedState=g},useState:mg,useDebugValue:Cy,useDeferredValue:function(g){var y=mg(g),C=y[0],O=y[1];return gg(function(){var U=Os.transition;Os.transition={};try{O(g)}finally{Os.transition=U}},[g]),C},useTransition:function(){var g=mg(!1),y=g[0];return g=k.bind(null,g[1]),ns().memoizedState=g,[y,g]},useMutableSource:function(){},useSyncExternalStore:function(g,y,C){var O=Yr,U=ns();if(_n){if(C===void 0)throw Error(s(407));C=C()}else{if(C=y(),zi===null)throw Error(s(349));nh&30||rh(O,y,C)}U.memoizedState=C;var q={value:C,getSnapshot:y};return U.queue=q,gg(tp.bind(null,O,q,g),[g]),O.flags|=2048,ah(9,bw.bind(null,O,q,C,y),void 0,null),C},useId:function(){var g=ns(),y=zi.identifierPrefix;if(_n){var C=mt,O=ze;C=(O&~(1<<32-pr(O)-1)).toString(32)+C,y=":"+y+"R"+C,C=ju++,0<C&&(y+="H"+C.toString(32)),y+=":"}else C=Uk++,y=":"+y+"r"+C.toString(32)+":";return g.memoizedState=y},unstable_isNewReconciler:!1},Rn={readContext:Vr,useCallback:p,useContext:Vr,useEffect:sh,useImperativeHandle:ky,useInsertionEffect:Ay,useLayoutEffect:Ew,useMemo:b,useReducer:pg,useRef:Sw,useState:function(){return pg(Bu)},useDebugValue:Cy,useDeferredValue:function(g){var y=pg(Bu),C=y[0],O=y[1];return sh(function(){var U=Os.transition;Os.transition={};try{O(g)}finally{Os.transition=U}},[g]),C},useTransition:function(){var g=pg(Bu)[0],y=Do().memoizedState;return[g,y]},useMutableSource:Sy,useSyncExternalStore:Ey,useId:j,unstable_isNewReconciler:!1},Da={readContext:Vr,useCallback:p,useContext:Vr,useEffect:sh,useImperativeHandle:ky,useInsertionEffect:Ay,useLayoutEffect:Ew,useMemo:b,useReducer:lo,useRef:Sw,useState:function(){return lo(Bu)},useDebugValue:Cy,useDeferredValue:function(g){var y=lo(Bu),C=y[0],O=y[1];return sh(function(){var U=Os.transition;Os.transition={};try{O(g)}finally{Os.transition=U}},[g]),C},useTransition:function(){var g=lo(Bu)[0],y=Do().memoizedState;return[g,y]},useMutableSource:Sy,useSyncExternalStore:Ey,useId:j,unstable_isNewReconciler:!1};function Ai(g,y){try{var C="",O=y;do C+=Ja(O),O=O.return;while(O);var U=C}catch(q){U=`
Error generating stack: `+q.message+`
`+q.stack}return{value:g,source:y,stack:U}}function rs(g,y){try{console.error(y.value)}catch(C){setTimeout(function(){throw C})}}var is=typeof WeakMap=="function"?WeakMap:Map;function zc(g,y,C){C=ts(-1,C),C.tag=3,C.payload={element:null};var O=y.value;return C.callback=function(){zw||(zw=!0,aC=O),rs(g,y)},C}function Aw(g,y,C){C=ts(-1,C),C.tag=3;var O=g.type.getDerivedStateFromError;if(typeof O=="function"){var U=y.value;C.payload=function(){return O(U)},C.callback=function(){rs(g,y)}}var q=g.stateNode;return q!==null&&typeof q.componentDidCatch=="function"&&(C.callback=function(){rs(g,y),typeof O!="function"&&(oh===null?oh=new Set([this]):oh.add(this));var le=y.stack;this.componentDidCatch(y.value,{componentStack:le!==null?le:""})}),C}function Tw(g,y,C){var O=g.pingCache;if(O===null){O=g.pingCache=new is;var U=new Set;O.set(y,U)}else U=O.get(y),U===void 0&&(U=new Set,O.set(y,U));U.has(C)||(U.add(C),g=Sne.bind(null,g,y,C),y.then(g,g))}function kw(g){do{var y;if((y=g.tag===13)&&(y=g.memoizedState,y=y!==null?y.dehydrated!==null:!0),y)return g;g=g.return}while(g!==null);return null}function My(g,y,C,O,U){return g.mode&1?(g.flags|=65536,g.lanes=U,g):(g===y?g.flags|=65536:(g.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(y=ts(-1,1),y.tag=2,Rs(C,y))),C.lanes|=1),g)}function sl(g){g.flags|=4}function Iy(g,y){if(g!==null&&g.child===y.child)return!0;if(y.flags&16)return!1;for(g=y.child;g!==null;){if(g.flags&12854||g.subtreeFlags&12854)return!1;g=g.sibling}return!0}var zr,Uu,vg,yg;if(Ce)zr=function(g,y){for(var C=y.child;C!==null;){if(C.tag===5||C.tag===6)Fe(g,C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===y)break;for(;C.sibling===null;){if(C.return===null||C.return===y)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},Uu=function(){},vg=function(g,y,C,O,U){if(g=g.memoizedProps,g!==O){var q=y.stateNode,le=Ls(Ra.current);C=at(q,C,g,O,U,le),(y.updateQueue=C)&&sl(y)}},yg=function(g,y,C,O){C!==O&&sl(y)};else if(Te){zr=function(g,y,C,O){for(var U=y.child;U!==null;){if(U.tag===5){var q=U.stateNode;C&&O&&(q=xn(q,U.type,U.memoizedProps,U)),Fe(g,q)}else if(U.tag===6)q=U.stateNode,C&&O&&(q=Xr(q,U.memoizedProps,U)),Fe(g,q);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)q=U.child,q!==null&&(q.return=U),zr(g,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===y)break;for(;U.sibling===null;){if(U.return===null||U.return===y)return;U=U.return}U.sibling.return=U.return,U=U.sibling}};var Cw=function(g,y,C,O){for(var U=y.child;U!==null;){if(U.tag===5){var q=U.stateNode;C&&O&&(q=xn(q,U.type,U.memoizedProps,U)),dt(g,q)}else if(U.tag===6)q=U.stateNode,C&&O&&(q=Xr(q,U.memoizedProps,U)),dt(g,q);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)q=U.child,q!==null&&(q.return=U),Cw(g,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===y)break;for(;U.sibling===null;){if(U.return===null||U.return===y)return;U=U.return}U.sibling.return=U.return,U=U.sibling}};Uu=function(g,y){var C=y.stateNode;if(!Iy(g,y)){g=C.containerInfo;var O=Oe(g);Cw(O,y,!1,!1),C.pendingChildren=O,sl(y),vt(g,O)}},vg=function(g,y,C,O,U){var q=g.stateNode,le=g.memoizedProps;if((g=Iy(g,y))&&le===O)y.stateNode=q;else{var xe=y.stateNode,Je=Ls(Ra.current),yt=null;le!==O&&(yt=at(xe,C,le,O,U,Je)),g&&yt===null?y.stateNode=q:(q=Qe(q,yt,C,le,O,y,g,xe),$e(q,C,O,U,Je)&&sl(y),y.stateNode=q,g?sl(y):zr(q,y,!1,!1))}},yg=function(g,y,C,O){C!==O?(g=Ls(Fu.current),C=Ls(Ra.current),y.stateNode=Le(O,g,C,y),sl(y)):y.stateNode=g.stateNode}}else Uu=function(){},vg=function(){},yg=function(){};function Hc(g,y){if(!_n)switch(g.tailMode){case"hidden":y=g.tail;for(var C=null;y!==null;)y.alternate!==null&&(C=y),y=y.sibling;C===null?g.tail=null:C.sibling=null;break;case"collapsed":C=g.tail;for(var O=null;C!==null;)C.alternate!==null&&(O=C),C=C.sibling;O===null?y||g.tail===null?g.tail=null:g.tail.sibling=null:O.sibling=null}}function na(g){var y=g.alternate!==null&&g.alternate.child===g.child,C=0,O=0;if(y)for(var U=g.child;U!==null;)C|=U.lanes|U.childLanes,O|=U.subtreeFlags&14680064,O|=U.flags&14680064,U.return=g,U=U.sibling;else for(U=g.child;U!==null;)C|=U.lanes|U.childLanes,O|=U.subtreeFlags,O|=U.flags,U.return=g,U=U.sibling;return g.subtreeFlags|=O,g.childLanes=C,y}function Vk(g,y,C){var O=y.pendingProps;switch(ur(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return na(y),null;case 1:return tn(y.type)&&Xt(),na(y),null;case 3:return O=y.stateNode,zl(),Ot(dn),Ot(Pt),th(),O.pendingContext&&(O.context=O.pendingContext,O.pendingContext=null),(g===null||g.child===null)&&(oo(y)?sl(y):g===null||g.memoizedState.isDehydrated&&!(y.flags&256)||(y.flags|=1024,Ei!==null&&(lC(Ei),Ei=null))),Uu(g,y),na(y),null;case 5:eh(y),C=Ls(Fu.current);var U=y.type;if(g!==null&&y.stateNode!=null)vg(g,y,U,O,C),g.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!O){if(y.stateNode===null)throw Error(s(166));return na(y),null}if(g=Ls(Ra.current),oo(y)){if(!te)throw Error(s(175));g=Ll(y.stateNode,y.type,y.memoizedProps,C,g,y,!il),y.updateQueue=g,g!==null&&sl(y)}else{var q=pe(U,O,C,g,y);zr(q,y,!1,!1),y.stateNode=q,$e(q,U,O,C,g)&&sl(y)}y.ref!==null&&(y.flags|=512,y.flags|=2097152)}return na(y),null;case 6:if(g&&y.stateNode!=null)yg(g,y,g.memoizedProps,O);else{if(typeof O!="string"&&y.stateNode===null)throw Error(s(166));if(g=Ls(Fu.current),C=Ls(Ra.current),oo(y)){if(!te)throw Error(s(176));if(g=y.stateNode,O=y.memoizedProps,(C=ku(g,O,y,!il))&&(U=Wn,U!==null))switch(q=(U.mode&1)!==0,U.tag){case 3:Ue(U.stateNode.containerInfo,g,O,q);break;case 5:Ve(U.type,U.memoizedProps,U.stateNode,g,O,q)}C&&sl(y)}else y.stateNode=Le(O,g,C,y)}return na(y),null;case 13:if(Ot(jr),O=y.memoizedState,_n&&Si!==null&&y.mode&1&&!(y.flags&128)){for(g=Si;g;)g=Vi(g);return Vl(),y.flags|=98560,y}if(O!==null&&O.dehydrated!==null){if(O=oo(y),g===null){if(!O)throw Error(s(318));if(!te)throw Error(s(344));if(g=y.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));Ms(g,y)}else Vl(),!(y.flags&128)&&(y.memoizedState=null),y.flags|=4;return na(y),null}return Ei!==null&&(lC(Ei),Ei=null),y.flags&128?(y.lanes=C,y):(O=O!==null,C=!1,g===null?oo(y):C=g.memoizedState!==null,O&&!C&&(y.child.flags|=8192,y.mode&1&&(g===null||jr.current&1?ra===0&&(ra=3):cC())),y.updateQueue!==null&&(y.flags|=4),na(y),null);case 4:return zl(),Uu(g,y),g===null&&Pe(y.stateNode.containerInfo),na(y),null;case 10:return Xd(y.type._context),na(y),null;case 17:return tn(y.type)&&Xt(),na(y),null;case 19:if(Ot(jr),U=y.memoizedState,U===null)return na(y),null;if(O=(y.flags&128)!==0,q=U.rendering,q===null)if(O)Hc(U,!1);else{if(ra!==0||g!==null&&g.flags&128)for(g=y.child;g!==null;){if(q=Jf(g),q!==null){for(y.flags|=128,Hc(U,!1),g=q.updateQueue,g!==null&&(y.updateQueue=g,y.flags|=4),y.subtreeFlags=0,g=C,O=y.child;O!==null;)C=O,U=g,C.flags&=14680066,q=C.alternate,q===null?(C.childLanes=0,C.lanes=U,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=q.childLanes,C.lanes=q.lanes,C.child=q.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=q.memoizedProps,C.memoizedState=q.memoizedState,C.updateQueue=q.updateQueue,C.type=q.type,U=q.dependencies,C.dependencies=U===null?null:{lanes:U.lanes,firstContext:U.firstContext}),O=O.sibling;return Ht(jr,jr.current&1|2),y.child}g=g.sibling}U.tail!==null&&di()>iC&&(y.flags|=128,O=!0,Hc(U,!1),y.lanes=4194304)}else{if(!O)if(g=Jf(q),g!==null){if(y.flags|=128,O=!0,g=g.updateQueue,g!==null&&(y.updateQueue=g,y.flags|=4),Hc(U,!0),U.tail===null&&U.tailMode==="hidden"&&!q.alternate&&!_n)return na(y),null}else 2*di()-U.renderingStartTime>iC&&C!==1073741824&&(y.flags|=128,O=!0,Hc(U,!1),y.lanes=4194304);U.isBackwards?(q.sibling=y.child,y.child=q):(g=U.last,g!==null?g.sibling=q:y.child=q,U.last=q)}return U.tail!==null?(y=U.tail,U.rendering=y,U.tail=y.sibling,U.renderingStartTime=di(),y.sibling=null,g=jr.current,Ht(jr,O?g&1|2:g&1),y):(na(y),null);case 22:case 23:return uC(),O=y.memoizedState!==null,g!==null&&g.memoizedState!==null!==O&&(y.flags|=8192),O&&y.mode&1?Oo&1073741824&&(na(y),Ce&&y.subtreeFlags&6&&(y.flags|=8192)):na(y),null;case 24:return null;case 25:return null}throw Error(s(156,y.tag))}var dne=o.ReactCurrentOwner,Lo=!1;function Fs(g,y,C,O){y.child=g===null?ww(y,null,C,O):Ro(y,g.child,C,O)}function L4(g,y,C,O,U){C=C.render;var q=y.ref;return Ru(y,U),O=Vc(g,y,C,O,q,U),C=by(),g!==null&&!Lo?(y.updateQueue=g.updateQueue,y.flags&=-2053,g.lanes&=~U,Gc(g,y,U)):(_n&&C&&zn(y),y.flags|=1,Fs(g,y,O,U),y.child)}function O4(g,y,C,O,U){if(g===null){var q=C.type;return typeof q=="function"&&!dC(q)&&q.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(y.tag=15,y.type=q,F4(g,y,q,O,U)):(g=Kw(C.type,null,O,y,y.mode,U),g.ref=y.ref,g.return=y,y.child=g)}if(q=g.child,!(g.lanes&U)){var le=q.memoizedProps;if(C=C.compare,C=C!==null?C:jl,C(le,O)&&g.ref===y.ref)return Gc(g,y,U)}return y.flags|=1,g=dh(q,O),g.ref=y.ref,g.return=y,y.child=g}function F4(g,y,C,O,U){if(g!==null&&jl(g.memoizedProps,O)&&g.ref===y.ref)if(Lo=!1,(g.lanes&U)!==0)g.flags&131072&&(Lo=!0);else return y.lanes=g.lanes,Gc(g,y,U);return zk(g,y,C,O,U)}function j4(g,y,C){var O=y.pendingProps,U=O.children,q=g!==null?g.memoizedState:null;if(O.mode==="hidden")if(!(y.mode&1))y.memoizedState={baseLanes:0,cachePool:null},Ht(xg,Oo),Oo|=C;else if(C&1073741824)y.memoizedState={baseLanes:0,cachePool:null},O=q!==null?q.baseLanes:C,Ht(xg,Oo),Oo|=O;else return g=q!==null?q.baseLanes|C:C,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:g,cachePool:null},y.updateQueue=null,Ht(xg,Oo),Oo|=g,null;else q!==null?(O=q.baseLanes|C,y.memoizedState=null):O=C,Ht(xg,Oo),Oo|=O;return Fs(g,y,U,C),y.child}function B4(g,y){var C=y.ref;(g===null&&C!==null||g!==null&&g.ref!==C)&&(y.flags|=512,y.flags|=2097152)}function zk(g,y,C,O,U){var q=tn(C)?Nt:Pt.current;return q=On(y,q),Ru(y,U),C=Vc(g,y,C,O,q,U),O=by(),g!==null&&!Lo?(y.updateQueue=g.updateQueue,y.flags&=-2053,g.lanes&=~U,Gc(g,y,U)):(_n&&O&&zn(y),y.flags|=1,Fs(g,y,C,U),y.child)}function U4(g,y,C,O,U){if(tn(C)){var q=!0;ci(y)}else q=!1;if(Ru(y,U),y.stateNode===null)g!==null&&(g.alternate=null,y.alternate=null,y.flags|=2),Ou(y,C,O),so(y,C,O,U),O=!0;else if(g===null){var le=y.stateNode,xe=y.memoizedProps;le.props=xe;var Je=le.context,yt=C.contextType;typeof yt=="object"&&yt!==null?yt=Vr(yt):(yt=tn(C)?Nt:Pt.current,yt=On(y,yt));var Ut=C.getDerivedStateFromProps,Tn=typeof Ut=="function"||typeof le.getSnapshotBeforeUpdate=="function";Tn||typeof le.UNSAFE_componentWillReceiveProps!="function"&&typeof le.componentWillReceiveProps!="function"||(xe!==O||Je!==yt)&&Ni(y,le,O,yt),ao=!1;var sn=y.memoizedState;le.state=sn,Du(y,O,le,U),Je=y.memoizedState,xe!==O||sn!==Je||dn.current||ao?(typeof Ut=="function"&&(Lu(y,C,Ut,O),Je=y.memoizedState),(xe=ao||Yd(y,C,xe,O,sn,Je,yt))?(Tn||typeof le.UNSAFE_componentWillMount!="function"&&typeof le.componentWillMount!="function"||(typeof le.componentWillMount=="function"&&le.componentWillMount(),typeof le.UNSAFE_componentWillMount=="function"&&le.UNSAFE_componentWillMount()),typeof le.componentDidMount=="function"&&(y.flags|=4194308)):(typeof le.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=O,y.memoizedState=Je),le.props=O,le.state=Je,le.context=yt,O=xe):(typeof le.componentDidMount=="function"&&(y.flags|=4194308),O=!1)}else{le=y.stateNode,Oc(g,y),xe=y.memoizedProps,yt=y.type===y.elementType?xe:Fr(y.type,xe),le.props=yt,Tn=y.pendingProps,sn=le.context,Je=C.contextType,typeof Je=="object"&&Je!==null?Je=Vr(Je):(Je=tn(C)?Nt:Pt.current,Je=On(y,Je));var Br=C.getDerivedStateFromProps;(Ut=typeof Br=="function"||typeof le.getSnapshotBeforeUpdate=="function")||typeof le.UNSAFE_componentWillReceiveProps!="function"&&typeof le.componentWillReceiveProps!="function"||(xe!==Tn||sn!==Je)&&Ni(y,le,O,Je),ao=!1,sn=y.memoizedState,le.state=sn,Du(y,O,le,U);var Qt=y.memoizedState;xe!==Tn||sn!==Qt||dn.current||ao?(typeof Br=="function"&&(Lu(y,C,Br,O),Qt=y.memoizedState),(yt=ao||Yd(y,C,yt,O,sn,Qt,Je)||!1)?(Ut||typeof le.UNSAFE_componentWillUpdate!="function"&&typeof le.componentWillUpdate!="function"||(typeof le.componentWillUpdate=="function"&&le.componentWillUpdate(O,Qt,Je),typeof le.UNSAFE_componentWillUpdate=="function"&&le.UNSAFE_componentWillUpdate(O,Qt,Je)),typeof le.componentDidUpdate=="function"&&(y.flags|=4),typeof le.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof le.componentDidUpdate!="function"||xe===g.memoizedProps&&sn===g.memoizedState||(y.flags|=4),typeof le.getSnapshotBeforeUpdate!="function"||xe===g.memoizedProps&&sn===g.memoizedState||(y.flags|=1024),y.memoizedProps=O,y.memoizedState=Qt),le.props=O,le.state=Qt,le.context=Je,O=yt):(typeof le.componentDidUpdate!="function"||xe===g.memoizedProps&&sn===g.memoizedState||(y.flags|=4),typeof le.getSnapshotBeforeUpdate!="function"||xe===g.memoizedProps&&sn===g.memoizedState||(y.flags|=1024),O=!1)}return Hk(g,y,C,O,q,U)}function Hk(g,y,C,O,U,q){B4(g,y);var le=(y.flags&128)!==0;if(!O&&!le)return U&&fn(y,C,!1),Gc(g,y,q);O=y.stateNode,dne.current=y;var xe=le&&typeof C.getDerivedStateFromError!="function"?null:O.render();return y.flags|=1,g!==null&&le?(y.child=Ro(y,g.child,null,q),y.child=Ro(y,null,xe,q)):Fs(g,y,xe,q),y.memoizedState=O.state,U&&fn(y,C,!0),y.child}function V4(g){var y=g.stateNode;y.pendingContext?er(g,y.pendingContext,y.pendingContext!==y.context):y.context&&er(g,y.context,!1),Qf(g,y.containerInfo)}function z4(g,y,C,O,U){return Vl(),xy(U),y.flags|=256,Fs(g,y,C,O),y.child}var Mw={dehydrated:null,treeContext:null,retryLane:0};function Iw(g){return{baseLanes:g,cachePool:null}}function H4(g,y,C){var O=y.pendingProps,U=jr.current,q=!1,le=(y.flags&128)!==0,xe;if((xe=le)||(xe=g!==null&&g.memoizedState===null?!1:(U&2)!==0),xe?(q=!0,y.flags&=-129):(g===null||g.memoizedState!==null)&&(U|=1),Ht(jr,U&1),g===null)return Qd(y),g=y.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?(y.mode&1?Qi(g)?y.lanes=8:y.lanes=1073741824:y.lanes=1,null):(U=O.children,g=O.fallback,q?(O=y.mode,q=y.child,U={mode:"hidden",children:U},!(O&1)&&q!==null?(q.childLanes=0,q.pendingProps=U):q=Yw(U,O,0,null),g=up(g,O,C,null),q.return=y,g.return=y,q.sibling=g,y.child=q,y.child.memoizedState=Iw(C),y.memoizedState=Mw,g):Gk(y,U));if(U=g.memoizedState,U!==null){if(xe=U.dehydrated,xe!==null){if(le)return y.flags&256?(y.flags&=-257,Pw(g,y,C,Error(s(422)))):y.memoizedState!==null?(y.child=g.child,y.flags|=128,null):(q=O.fallback,U=y.mode,O=Yw({mode:"visible",children:O.children},U,0,null),q=up(q,U,C,null),q.flags|=2,O.return=y,q.return=y,O.sibling=q,y.child=O,y.mode&1&&Ro(y,g.child,null,C),y.child.memoizedState=Iw(C),y.memoizedState=Mw,q);if(!(y.mode&1))y=Pw(g,y,C,null);else if(Qi(xe))y=Pw(g,y,C,Error(s(419)));else if(O=(C&g.childLanes)!==0,Lo||O){if(O=zi,O!==null){switch(C&-C){case 4:q=2;break;case 16:q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:q=32;break;case 536870912:q=268435456;break;default:q=0}O=q&(O.suspendedLanes|C)?0:q,O!==0&&O!==U.retryLane&&(U.retryLane=O,ol(g,O,-1))}cC(),y=Pw(g,y,C,Error(s(421)))}else no(xe)?(y.flags|=128,y.child=g.child,y=Ene.bind(null,g),Wt(xe,y),y=null):(C=U.treeContext,te&&(Si=tl(xe),Wn=y,_n=!0,Ei=null,il=!1,C!==null&&(W[J++]=ze,W[J++]=mt,W[J++]=ke,ze=C.id,mt=C.overflow,ke=y)),y=Gk(y,y.pendingProps.children),y.flags|=4096);return y}return q?(O=W4(g,y,O.children,O.fallback,C),q=y.child,U=g.child.memoizedState,q.memoizedState=U===null?Iw(C):{baseLanes:U.baseLanes|C,cachePool:null},q.childLanes=g.childLanes&~C,y.memoizedState=Mw,O):(C=G4(g,y,O.children,C),y.memoizedState=null,C)}return q?(O=W4(g,y,O.children,O.fallback,C),q=y.child,U=g.child.memoizedState,q.memoizedState=U===null?Iw(C):{baseLanes:U.baseLanes|C,cachePool:null},q.childLanes=g.childLanes&~C,y.memoizedState=Mw,O):(C=G4(g,y,O.children,C),y.memoizedState=null,C)}function Gk(g,y){return y=Yw({mode:"visible",children:y},g.mode,0,null),y.return=g,g.child=y}function G4(g,y,C,O){var U=g.child;return g=U.sibling,C=dh(U,{mode:"visible",children:C}),!(y.mode&1)&&(C.lanes=O),C.return=y,C.sibling=null,g!==null&&(O=y.deletions,O===null?(y.deletions=[g],y.flags|=16):O.push(g)),y.child=C}function W4(g,y,C,O,U){var q=y.mode;g=g.child;var le=g.sibling,xe={mode:"hidden",children:C};return!(q&1)&&y.child!==g?(C=y.child,C.childLanes=0,C.pendingProps=xe,y.deletions=null):(C=dh(g,xe),C.subtreeFlags=g.subtreeFlags&14680064),le!==null?O=dh(le,O):(O=up(O,q,U,null),O.flags|=2),O.return=y,C.return=y,C.sibling=O,y.child=C,O}function Pw(g,y,C,O){return O!==null&&xy(O),Ro(y,g.child,null,C),g=Gk(y,y.pendingProps.children),g.flags|=2,y.memoizedState=null,g}function q4(g,y,C){g.lanes|=y;var O=g.alternate;O!==null&&(O.lanes|=y),nl(g.return,y,C)}function Wk(g,y,C,O,U){var q=g.memoizedState;q===null?g.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:O,tail:C,tailMode:U}:(q.isBackwards=y,q.rendering=null,q.renderingStartTime=0,q.last=O,q.tail=C,q.tailMode=U)}function $4(g,y,C){var O=y.pendingProps,U=O.revealOrder,q=O.tail;if(Fs(g,y,O.children,C),O=jr.current,O&2)O=O&1|2,y.flags|=128;else{if(g!==null&&g.flags&128)e:for(g=y.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&q4(g,C,y);else if(g.tag===19)q4(g,C,y);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===y)break e;for(;g.sibling===null;){if(g.return===null||g.return===y)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}O&=1}if(Ht(jr,O),!(y.mode&1))y.memoizedState=null;else switch(U){case"forwards":for(C=y.child,U=null;C!==null;)g=C.alternate,g!==null&&Jf(g)===null&&(U=C),C=C.sibling;C=U,C===null?(U=y.child,y.child=null):(U=C.sibling,C.sibling=null),Wk(y,!1,U,C,q);break;case"backwards":for(C=null,U=y.child,y.child=null;U!==null;){if(g=U.alternate,g!==null&&Jf(g)===null){y.child=U;break}g=U.sibling,U.sibling=C,C=U,U=g}Wk(y,!0,C,null,q);break;case"together":Wk(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function Gc(g,y,C){if(g!==null&&(y.dependencies=g.dependencies),_g|=y.lanes,!(C&y.childLanes))return null;if(g!==null&&y.child!==g.child)throw Error(s(153));if(y.child!==null){for(g=y.child,C=dh(g,g.pendingProps),y.child=C,C.return=y;g.sibling!==null;)g=g.sibling,C=C.sibling=dh(g,g.pendingProps),C.return=y;C.sibling=null}return y.child}function hne(g,y,C){switch(y.tag){case 3:V4(y),Vl();break;case 5:Bc(y);break;case 1:tn(y.type)&&ci(y);break;case 4:Qf(y,y.stateNode.containerInfo);break;case 10:Lc(y,y.type._context,y.memoizedProps.value);break;case 13:var O=y.memoizedState;if(O!==null)return O.dehydrated!==null?(Ht(jr,jr.current&1),y.flags|=128,null):C&y.child.childLanes?H4(g,y,C):(Ht(jr,jr.current&1),g=Gc(g,y,C),g!==null?g.sibling:null);Ht(jr,jr.current&1);break;case 19:if(O=(C&y.childLanes)!==0,g.flags&128){if(O)return $4(g,y,C);y.flags|=128}var U=y.memoizedState;if(U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),Ht(jr,jr.current),O)break;return null;case 22:case 23:return y.lanes=0,j4(g,y,C)}return Gc(g,y,C)}function fne(g,y){switch(ur(y),y.tag){case 1:return tn(y.type)&&Xt(),g=y.flags,g&65536?(y.flags=g&-65537|128,y):null;case 3:return zl(),Ot(dn),Ot(Pt),th(),g=y.flags,g&65536&&!(g&128)?(y.flags=g&-65537|128,y):null;case 5:return eh(y),null;case 13:if(Ot(jr),g=y.memoizedState,g!==null&&g.dehydrated!==null){if(y.alternate===null)throw Error(s(340));Vl()}return g=y.flags,g&65536?(y.flags=g&-65537|128,y):null;case 19:return Ot(jr),null;case 4:return zl(),null;case 10:return Xd(y.type._context),null;case 22:case 23:return uC(),null;case 24:return null;default:return null}}var Nw=!1,ip=!1,pne=typeof WeakSet=="function"?WeakSet:Set,kt=null;function Rw(g,y){var C=g.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(O){ho(g,y,O)}else C.current=null}function qk(g,y,C){try{C()}catch(O){ho(g,y,O)}}var X4=!1;function mne(g,y){for(ue(g.containerInfo),kt=y;kt!==null;)if(g=kt,y=g.child,(g.subtreeFlags&1028)!==0&&y!==null)y.return=g,kt=y;else for(;kt!==null;){g=kt;try{var C=g.alternate;if(g.flags&1024)switch(g.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var O=C.memoizedProps,U=C.memoizedState,q=g.stateNode,le=q.getSnapshotBeforeUpdate(g.elementType===g.type?O:Fr(g.type,O),U);q.__reactInternalSnapshotBeforeUpdate=le}break;case 3:Ce&&Ze(g.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(xe){ho(g,g.return,xe)}if(y=g.sibling,y!==null){y.return=g.return,kt=y;break}kt=g.return}return C=X4,X4=!1,C}function ap(g,y,C){var O=y.updateQueue;if(O=O!==null?O.lastEffect:null,O!==null){var U=O=O.next;do{if((U.tag&g)===g){var q=U.destroy;U.destroy=void 0,q!==void 0&&qk(y,C,q)}U=U.next}while(U!==O)}}function Py(g,y){if(y=y.updateQueue,y=y!==null?y.lastEffect:null,y!==null){var C=y=y.next;do{if((C.tag&g)===g){var O=C.create;C.destroy=O()}C=C.next}while(C!==y)}}function $k(g){var y=g.ref;if(y!==null){var C=g.stateNode;switch(g.tag){case 5:g=re(C);break;default:g=C}typeof y=="function"?y(g):y.current=g}}function K4(g,y,C){if(Ji&&typeof Ji.onCommitFiberUnmount=="function")try{Ji.onCommitFiberUnmount(No,y)}catch{}switch(y.tag){case 0:case 11:case 14:case 15:if(g=y.updateQueue,g!==null&&(g=g.lastEffect,g!==null)){var O=g=g.next;do{var U=O,q=U.destroy;U=U.tag,q!==void 0&&(U&2||U&4)&&qk(y,C,q),O=O.next}while(O!==g)}break;case 1:if(Rw(y,C),g=y.stateNode,typeof g.componentWillUnmount=="function")try{g.props=y.memoizedProps,g.state=y.memoizedState,g.componentWillUnmount()}catch(le){ho(y,C,le)}break;case 5:Rw(y,C);break;case 4:Ce?tF(g,y,C):Te&&Te&&(y=y.stateNode.containerInfo,C=Oe(y),En(y,C))}}function Y4(g,y,C){for(var O=y;;)if(K4(g,O,C),O.child===null||Ce&&O.tag===4){if(O===y)break;for(;O.sibling===null;){if(O.return===null||O.return===y)return;O=O.return}O.sibling.return=O.return,O=O.sibling}else O.child.return=O,O=O.child}function Z4(g){var y=g.alternate;y!==null&&(g.alternate=null,Z4(y)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(y=g.stateNode,y!==null&&je(y)),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function Q4(g){return g.tag===5||g.tag===3||g.tag===4}function J4(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||Q4(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function eF(g){if(Ce){e:{for(var y=g.return;y!==null;){if(Q4(y))break e;y=y.return}throw Error(s(160))}var C=y;switch(C.tag){case 5:y=C.stateNode,C.flags&32&&(Ne(y),C.flags&=-33),C=J4(g),Kk(g,C,y);break;case 3:case 4:y=C.stateNode.containerInfo,C=J4(g),Xk(g,C,y);break;default:throw Error(s(161))}}}function Xk(g,y,C){var O=g.tag;if(O===5||O===6)g=g.stateNode,y?xt(C,g,y):pt(C,g);else if(O!==4&&(g=g.child,g!==null))for(Xk(g,y,C),g=g.sibling;g!==null;)Xk(g,y,C),g=g.sibling}function Kk(g,y,C){var O=g.tag;if(O===5||O===6)g=g.stateNode,y?ut(C,g,y):we(C,g);else if(O!==4&&(g=g.child,g!==null))for(Kk(g,y,C),g=g.sibling;g!==null;)Kk(g,y,C),g=g.sibling}function tF(g,y,C){for(var O=y,U=!1,q,le;;){if(!U){U=O.return;e:for(;;){if(U===null)throw Error(s(160));switch(q=U.stateNode,U.tag){case 5:le=!1;break e;case 3:q=q.containerInfo,le=!0;break e;case 4:q=q.containerInfo,le=!0;break e}U=U.return}U=!0}if(O.tag===5||O.tag===6)Y4(g,O,C),le?ce(q,O.stateNode):Bt(q,O.stateNode);else if(O.tag===18)le?Q(q,O.stateNode):Pc(q,O.stateNode);else if(O.tag===4){if(O.child!==null){q=O.stateNode.containerInfo,le=!0,O.child.return=O,O=O.child;continue}}else if(K4(g,O,C),O.child!==null){O.child.return=O,O=O.child;continue}if(O===y)break;for(;O.sibling===null;){if(O.return===null||O.return===y)return;O=O.return,O.tag===4&&(U=!1)}O.sibling.return=O.return,O=O.sibling}}function Yk(g,y){if(Ce){switch(y.tag){case 0:case 11:case 14:case 15:ap(3,y,y.return),Py(3,y),ap(5,y,y.return);return;case 1:return;case 5:var C=y.stateNode;if(C!=null){var O=y.memoizedProps;g=g!==null?g.memoizedProps:O;var U=y.type,q=y.updateQueue;y.updateQueue=null,q!==null&&bt(C,q,U,g,O,y)}return;case 6:if(y.stateNode===null)throw Error(s(162));C=y.memoizedProps,lt(y.stateNode,g!==null?g.memoizedProps:C,C);return;case 3:te&&g!==null&&g.memoizedState.isDehydrated&&Ic(y.stateNode.containerInfo);return;case 12:return;case 13:Dw(y);return;case 19:Dw(y);return;case 17:return}throw Error(s(163))}switch(y.tag){case 0:case 11:case 14:case 15:ap(3,y,y.return),Py(3,y),ap(5,y,y.return);return;case 12:return;case 13:Dw(y);return;case 19:Dw(y);return;case 3:te&&g!==null&&g.memoizedState.isDehydrated&&Ic(y.stateNode.containerInfo);break;case 22:case 23:return}e:if(Te){switch(y.tag){case 1:case 5:case 6:break e;case 3:case 4:y=y.stateNode,En(y.containerInfo,y.pendingChildren);break e}throw Error(s(163))}}function Dw(g){var y=g.updateQueue;if(y!==null){g.updateQueue=null;var C=g.stateNode;C===null&&(C=g.stateNode=new pne),y.forEach(function(O){var U=Ane.bind(null,g,O);C.has(O)||(C.add(O),O.then(U,U))})}}function gne(g,y){for(kt=y;kt!==null;){y=kt;var C=y.deletions;if(C!==null)for(var O=0;O<C.length;O++){var U=C[O];try{var q=g;Ce?tF(q,U,y):Y4(q,U,y);var le=U.alternate;le!==null&&(le.return=null),U.return=null}catch(Zt){ho(U,y,Zt)}}if(C=y.child,y.subtreeFlags&12854&&C!==null)C.return=y,kt=C;else for(;kt!==null;){y=kt;try{var xe=y.flags;if(xe&32&&Ce&&Ne(y.stateNode),xe&512){var Je=y.alternate;if(Je!==null){var yt=Je.ref;yt!==null&&(typeof yt=="function"?yt(null):yt.current=null)}}if(xe&8192)switch(y.tag){case 13:if(y.memoizedState!==null){var Ut=y.alternate;(Ut===null||Ut.memoizedState===null)&&(rC=di())}break;case 22:var Tn=y.memoizedState!==null,sn=y.alternate,Br=sn!==null&&sn.memoizedState!==null;if(C=y,Ce){e:if(O=C,U=Tn,q=null,Ce)for(var Qt=O;;){if(Qt.tag===5){if(q===null){q=Qt;var as=Qt.stateNode;U?ht(as):nt(Qt.stateNode,Qt.memoizedProps)}}else if(Qt.tag===6){if(q===null){var ul=Qt.stateNode;U?de(ul):fe(ul,Qt.memoizedProps)}}else if((Qt.tag!==22&&Qt.tag!==23||Qt.memoizedState===null||Qt===O)&&Qt.child!==null){Qt.child.return=Qt,Qt=Qt.child;continue}if(Qt===O)break;for(;Qt.sibling===null;){if(Qt.return===null||Qt.return===O)break e;q===Qt&&(q=null),Qt=Qt.return}q===Qt&&(q=null),Qt.sibling.return=Qt.return,Qt=Qt.sibling}}if(Tn&&!Br&&C.mode&1){kt=C;for(var Be=C.child;Be!==null;){for(C=kt=Be;kt!==null;){O=kt;var Ae=O.child;switch(O.tag){case 0:case 11:case 14:case 15:ap(4,O,O.return);break;case 1:Rw(O,O.return);var Xe=O.stateNode;if(typeof Xe.componentWillUnmount=="function"){var It=O.return;try{Xe.props=O.memoizedProps,Xe.state=O.memoizedState,Xe.componentWillUnmount()}catch(Zt){ho(O,It,Zt)}}break;case 5:Rw(O,O.return);break;case 22:if(O.memoizedState!==null){iF(C);continue}}Ae!==null?(Ae.return=O,kt=Ae):iF(C)}Be=Be.sibling}}}switch(xe&4102){case 2:eF(y),y.flags&=-3;break;case 6:eF(y),y.flags&=-3,Yk(y.alternate,y);break;case 4096:y.flags&=-4097;break;case 4100:y.flags&=-4097,Yk(y.alternate,y);break;case 4:Yk(y.alternate,y)}}catch(Zt){ho(y,y.return,Zt)}if(C=y.sibling,C!==null){C.return=y.return,kt=C;break}kt=y.return}}}function vne(g,y,C){kt=g,nF(g)}function nF(g,y,C){for(var O=(g.mode&1)!==0;kt!==null;){var U=kt,q=U.child;if(U.tag===22&&O){var le=U.memoizedState!==null||Nw;if(!le){var xe=U.alternate,Je=xe!==null&&xe.memoizedState!==null||ip;xe=Nw;var yt=ip;if(Nw=le,(ip=Je)&&!yt)for(kt=U;kt!==null;)le=kt,Je=le.child,le.tag===22&&le.memoizedState!==null?aF(U):Je!==null?(Je.return=le,kt=Je):aF(U);for(;q!==null;)kt=q,nF(q),q=q.sibling;kt=U,Nw=xe,ip=yt}rF(g)}else U.subtreeFlags&8772&&q!==null?(q.return=U,kt=q):rF(g)}}function rF(g){for(;kt!==null;){var y=kt;if(y.flags&8772){var C=y.alternate;try{if(y.flags&8772)switch(y.tag){case 0:case 11:case 15:ip||Py(5,y);break;case 1:var O=y.stateNode;if(y.flags&4&&!ip)if(C===null)O.componentDidMount();else{var U=y.elementType===y.type?C.memoizedProps:Fr(y.type,C.memoizedProps);O.componentDidUpdate(U,C.memoizedState,O.__reactInternalSnapshotBeforeUpdate)}var q=y.updateQueue;q!==null&&rl(y,q,O);break;case 3:var le=y.updateQueue;if(le!==null){if(C=null,y.child!==null)switch(y.child.tag){case 5:C=re(y.child.stateNode);break;case 1:C=y.child.stateNode}rl(y,le,C)}break;case 5:var xe=y.stateNode;C===null&&y.flags&4&&St(xe,y.type,y.memoizedProps,y);break;case 6:break;case 4:break;case 12:break;case 13:if(te&&y.memoizedState===null){var Je=y.alternate;if(Je!==null){var yt=Je.memoizedState;if(yt!==null){var Ut=yt.dehydrated;Ut!==null&&zd(Ut)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(s(163))}ip||y.flags&512&&$k(y)}catch(Tn){ho(y,y.return,Tn)}}if(y===g){kt=null;break}if(C=y.sibling,C!==null){C.return=y.return,kt=C;break}kt=y.return}}function iF(g){for(;kt!==null;){var y=kt;if(y===g){kt=null;break}var C=y.sibling;if(C!==null){C.return=y.return,kt=C;break}kt=y.return}}function aF(g){for(;kt!==null;){var y=kt;try{switch(y.tag){case 0:case 11:case 15:var C=y.return;try{Py(4,y)}catch(Je){ho(y,C,Je)}break;case 1:var O=y.stateNode;if(typeof O.componentDidMount=="function"){var U=y.return;try{O.componentDidMount()}catch(Je){ho(y,U,Je)}}var q=y.return;try{$k(y)}catch(Je){ho(y,q,Je)}break;case 5:var le=y.return;try{$k(y)}catch(Je){ho(y,le,Je)}}}catch(Je){ho(y,y.return,Je)}if(y===g){kt=null;break}var xe=y.sibling;if(xe!==null){xe.return=y.return,kt=xe;break}kt=y.return}}var Lw=0,Ow=1,Fw=2,jw=3,Bw=4;if(typeof Symbol=="function"&&Symbol.for){var Ny=Symbol.for;Lw=Ny("selector.component"),Ow=Ny("selector.has_pseudo_class"),Fw=Ny("selector.role"),jw=Ny("selector.test_id"),Bw=Ny("selector.text")}function Zk(g){var y=Ee(g);if(y!=null){if(typeof y.memoizedProps["data-testname"]!="string")throw Error(s(364));return y}if(g=qe(g),g===null)throw Error(s(362));return g.stateNode.current}function Qk(g,y){switch(y.$$typeof){case Lw:if(g.type===y.value)return!0;break;case Ow:e:{y=y.value,g=[g,0];for(var C=0;C<g.length;){var O=g[C++],U=g[C++],q=y[U];if(O.tag!==5||!X(O)){for(;q!=null&&Qk(O,q);)U++,q=y[U];if(U===y.length){y=!0;break e}else for(O=O.child;O!==null;)g.push(O,U),O=O.sibling}}y=!1}return y;case Fw:if(g.tag===5&&ve(g.stateNode,y.value))return!0;break;case Bw:if((g.tag===5||g.tag===6)&&(g=Z(g),g!==null&&0<=g.indexOf(y.value)))return!0;break;case jw:if(g.tag===5&&(g=g.memoizedProps["data-testname"],typeof g=="string"&&g.toLowerCase()===y.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Jk(g){switch(g.$$typeof){case Lw:return"<"+(P(g.value)||"Unknown")+">";case Ow:return":has("+(Jk(g)||"")+")";case Fw:return'[role="'+g.value+'"]';case Bw:return'"'+g.value+'"';case jw:return'[data-testname="'+g.value+'"]';default:throw Error(s(365))}}function sF(g,y){var C=[];g=[g,0];for(var O=0;O<g.length;){var U=g[O++],q=g[O++],le=y[q];if(U.tag!==5||!X(U)){for(;le!=null&&Qk(U,le);)q++,le=y[q];if(q===y.length)C.push(U);else for(U=U.child;U!==null;)g.push(U,q),U=U.sibling}}return C}function eC(g,y){if(!ee)throw Error(s(363));g=Zk(g),g=sF(g,y),y=[],g=Array.from(g);for(var C=0;C<g.length;){var O=g[C++];if(O.tag===5)X(O)||y.push(O.stateNode);else for(O=O.child;O!==null;)g.push(O),O=O.sibling}return y}var yne=Math.ceil,Uw=o.ReactCurrentDispatcher,tC=o.ReactCurrentOwner,Ri=o.ReactCurrentBatchConfig,jn=0,zi=null,Hi=null,La=0,Oo=0,xg=Lt(0),ra=0,Ry=null,_g=0,Vw=0,nC=0,Dy=null,uo=null,rC=0,iC=1/0;function wg(){iC=di()+500}var zw=!1,aC=null,oh=null,Hw=!1,lh=null,Gw=0,Ly=0,sC=null,Ww=-1,qw=0;function js(){return jn&6?di():Ww!==-1?Ww:Ww=di()}function uh(g){return g.mode&1?jn&2&&La!==0?La&-La:Fn.transition!==null?(qw===0&&(g=Pi,Pi<<=1,!(Pi&4194240)&&(Pi=64),qw=g),qw):(g=Vn,g!==0?g:Ke()):1}function ol(g,y,C){if(50<Ly)throw Ly=0,sC=null,Error(s(185));var O=$w(g,y);return O===null?null:(Ol(O,y,C),(!(jn&2)||O!==zi)&&(O===zi&&(!(jn&2)&&(Vw|=y),ra===4&&ch(O,La)),co(O,C),y===1&&jn===0&&!(g.mode&1)&&(wg(),Er&&Qa())),O)}function $w(g,y){g.lanes|=y;var C=g.alternate;for(C!==null&&(C.lanes|=y),C=g,g=g.return;g!==null;)g.childLanes|=y,C=g.alternate,C!==null&&(C.childLanes|=y),C=g,g=g.return;return C.tag===3?C.stateNode:null}function co(g,y){var C=g.callbackNode;Kf(g,y);var O=Cu(g,g===zi?La:0);if(O===0)C!==null&&an(C),g.callbackNode=null,g.callbackPriority=0;else if(y=O&-O,g.callbackPriority!==y){if(C!=null&&an(C),y===1)g.tag===0?cg(lF.bind(null,g)):Wd(lF.bind(null,g)),st?tt(function(){jn===0&&Qa()}):Hd(Ka,Qa),C=null;else{switch(Rc(O)){case 1:C=Ka;break;case 4:C=Yf;break;case 16:C=Dc;break;case 536870912:C=io;break;default:C=Dc}C=vF(C,oF.bind(null,g))}g.callbackPriority=y,g.callbackNode=C}}function oF(g,y){if(Ww=-1,qw=0,jn&6)throw Error(s(327));var C=g.callbackNode;if(lp()&&g.callbackNode!==C)return null;var O=Cu(g,g===zi?La:0);if(O===0)return null;if(O&30||O&g.expiredLanes||y)y=Xw(g,O);else{y=O;var U=jn;jn|=2;var q=dF();(zi!==g||La!==y)&&(wg(),sp(g,y));do try{wne();break}catch(xe){cF(g,xe)}while(!0);Nu(),Uw.current=q,jn=U,Hi!==null?y=0:(zi=null,La=0,y=ra)}if(y!==0){if(y===2&&(U=Nc(g),U!==0&&(O=U,y=oC(g,U))),y===1)throw C=Ry,sp(g,0),ch(g,O),co(g,di()),C;if(y===6)ch(g,O);else{if(U=g.current.alternate,!(O&30)&&!xne(U)&&(y=Xw(g,O),y===2&&(q=Nc(g),q!==0&&(O=q,y=oC(g,q))),y===1))throw C=Ry,sp(g,0),ch(g,O),co(g,di()),C;switch(g.finishedWork=U,g.finishedLanes=O,y){case 0:case 1:throw Error(s(345));case 2:op(g,uo);break;case 3:if(ch(g,O),(O&130023424)===O&&(y=rC+500-di(),10<y)){if(Cu(g,0)!==0)break;if(U=g.suspendedLanes,(U&O)!==O){js(),g.pingedLanes|=g.suspendedLanes&U;break}g.timeoutHandle=Se(op.bind(null,g,uo),y);break}op(g,uo);break;case 4:if(ch(g,O),(O&4194240)===O)break;for(y=g.eventTimes,U=-1;0<O;){var le=31-pr(O);q=1<<le,le=y[le],le>U&&(U=le),O&=~q}if(O=U,O=di()-O,O=(120>O?120:480>O?480:1080>O?1080:1920>O?1920:3e3>O?3e3:4320>O?4320:1960*yne(O/1960))-O,10<O){g.timeoutHandle=Se(op.bind(null,g,uo),O);break}op(g,uo);break;case 5:op(g,uo);break;default:throw Error(s(329))}}}return co(g,di()),g.callbackNode===C?oF.bind(null,g):null}function oC(g,y){var C=Dy;return g.current.memoizedState.isDehydrated&&(sp(g,y).flags|=256),g=Xw(g,y),g!==2&&(y=uo,uo=C,y!==null&&lC(y)),g}function lC(g){uo===null?uo=g:uo.push.apply(uo,g)}function xne(g){for(var y=g;;){if(y.flags&16384){var C=y.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var O=0;O<C.length;O++){var U=C[O],q=U.getSnapshot;U=U.value;try{if(!Ya(q(),U))return!1}catch{return!1}}}if(C=y.child,y.subtreeFlags&16384&&C!==null)C.return=y,y=C;else{if(y===g)break;for(;y.sibling===null;){if(y.return===null||y.return===g)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function ch(g,y){for(y&=~nC,y&=~Vw,g.suspendedLanes|=y,g.pingedLanes&=~y,g=g.expirationTimes;0<y;){var C=31-pr(y),O=1<<C;g[C]=-1,y&=~O}}function lF(g){if(jn&6)throw Error(s(327));lp();var y=Cu(g,0);if(!(y&1))return co(g,di()),null;var C=Xw(g,y);if(g.tag!==0&&C===2){var O=Nc(g);O!==0&&(y=O,C=oC(g,O))}if(C===1)throw C=Ry,sp(g,0),ch(g,y),co(g,di()),C;if(C===6)throw Error(s(345));return g.finishedWork=g.current.alternate,g.finishedLanes=y,op(g,uo),co(g,di()),null}function uF(g){lh!==null&&lh.tag===0&&!(jn&6)&&lp();var y=jn;jn|=1;var C=Ri.transition,O=Vn;try{if(Ri.transition=null,Vn=1,g)return g()}finally{Vn=O,Ri.transition=C,jn=y,!(jn&6)&&Qa()}}function uC(){Oo=xg.current,Ot(xg)}function sp(g,y){g.finishedWork=null,g.finishedLanes=0;var C=g.timeoutHandle;if(C!==Ge&&(g.timeoutHandle=Ge,ge(C)),Hi!==null)for(C=Hi.return;C!==null;){var O=C;switch(ur(O),O.tag){case 1:O=O.type.childContextTypes,O!=null&&Xt();break;case 3:zl(),Ot(dn),Ot(Pt),th();break;case 5:eh(O);break;case 4:zl();break;case 13:Ot(jr);break;case 19:Ot(jr);break;case 10:Xd(O.type._context);break;case 22:case 23:uC()}C=C.return}if(zi=g,Hi=g=dh(g.current,null),La=Oo=y,ra=0,Ry=null,nC=Vw=_g=0,uo=Dy=null,va!==null){for(y=0;y<va.length;y++)if(C=va[y],O=C.interleaved,O!==null){C.interleaved=null;var U=O.next,q=C.pending;if(q!==null){var le=q.next;q.next=U,O.next=le}C.pending=O}va=null}return g}function cF(g,y){do{var C=Hi;try{if(Nu(),fg.current=Tt,Uc){for(var O=Yr.memoizedState;O!==null;){var U=O.queue;U!==null&&(U.pending=null),O=O.next}Uc=!1}if(nh=0,Ar=ya=Yr=null,ep=!1,ju=0,tC.current=null,C===null||C.return===null){ra=1,Ry=y,Hi=null;break}e:{var q=g,le=C.return,xe=C,Je=y;if(y=La,xe.flags|=32768,Je!==null&&typeof Je=="object"&&typeof Je.then=="function"){var yt=Je,Ut=xe,Tn=Ut.tag;if(!(Ut.mode&1)&&(Tn===0||Tn===11||Tn===15)){var sn=Ut.alternate;sn?(Ut.updateQueue=sn.updateQueue,Ut.memoizedState=sn.memoizedState,Ut.lanes=sn.lanes):(Ut.updateQueue=null,Ut.memoizedState=null)}var Br=kw(le);if(Br!==null){Br.flags&=-257,My(Br,le,xe,q,y),Br.mode&1&&Tw(q,yt,y),y=Br,Je=yt;var Qt=y.updateQueue;if(Qt===null){var as=new Set;as.add(Je),y.updateQueue=as}else Qt.add(Je);break e}else{if(!(y&1)){Tw(q,yt,y),cC();break e}Je=Error(s(426))}}else if(_n&&xe.mode&1){var ul=kw(le);if(ul!==null){!(ul.flags&65536)&&(ul.flags|=256),My(ul,le,xe,q,y),xy(Je);break e}}q=Je,ra!==4&&(ra=2),Dy===null?Dy=[q]:Dy.push(q),Je=Ai(Je,xe),xe=le;do{switch(xe.tag){case 3:xe.flags|=65536,y&=-y,xe.lanes|=y;var Be=zc(xe,Je,y);Kd(xe,Be);break e;case 1:q=Je;var Ae=xe.type,Xe=xe.stateNode;if(!(xe.flags&128)&&(typeof Ae.getDerivedStateFromError=="function"||Xe!==null&&typeof Xe.componentDidCatch=="function"&&(oh===null||!oh.has(Xe)))){xe.flags|=65536,y&=-y,xe.lanes|=y;var It=Aw(xe,q,y);Kd(xe,It);break e}}xe=xe.return}while(xe!==null)}fF(C)}catch(Zt){y=Zt,Hi===C&&C!==null&&(Hi=C=C.return);continue}break}while(!0)}function dF(){var g=Uw.current;return Uw.current=Tt,g===null?Tt:g}function cC(){(ra===0||ra===3||ra===2)&&(ra=4),zi===null||!(_g&268435455)&&!(Vw&268435455)||ch(zi,La)}function Xw(g,y){var C=jn;jn|=2;var O=dF();zi===g&&La===y||sp(g,y);do try{_ne();break}catch(U){cF(g,U)}while(!0);if(Nu(),jn=C,Uw.current=O,Hi!==null)throw Error(s(261));return zi=null,La=0,ra}function _ne(){for(;Hi!==null;)hF(Hi)}function wne(){for(;Hi!==null&&!ro();)hF(Hi)}function hF(g){var y=gF(g.alternate,g,Oo);g.memoizedProps=g.pendingProps,y===null?fF(g):Hi=y,tC.current=null}function fF(g){var y=g;do{var C=y.alternate;if(g=y.return,y.flags&32768){if(C=fne(C,y),C!==null){C.flags&=32767,Hi=C;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{ra=6,Hi=null;return}}else if(C=Vk(C,y,Oo),C!==null){Hi=C;return}if(y=y.sibling,y!==null){Hi=y;return}Hi=y=g}while(y!==null);ra===0&&(ra=5)}function op(g,y){var C=Vn,O=Ri.transition;try{Ri.transition=null,Vn=1,bne(g,y,C)}finally{Ri.transition=O,Vn=C}return null}function bne(g,y,C){do lp();while(lh!==null);if(jn&6)throw Error(s(327));var O=g.finishedWork,U=g.finishedLanes;if(O===null)return null;if(g.finishedWork=null,g.finishedLanes=0,O===g.current)throw Error(s(177));g.callbackNode=null,g.callbackPriority=0;var q=O.lanes|O.childLanes;if(Fl(g,q),g===zi&&(Hi=zi=null,La=0),!(O.subtreeFlags&2064)&&!(O.flags&2064)||Hw||(Hw=!0,vF(Dc,function(){return lp(),null})),q=(O.flags&15990)!==0,O.subtreeFlags&15990||q){q=Ri.transition,Ri.transition=null;var le=Vn;Vn=1;var xe=jn;jn|=4,tC.current=null,mne(g,O),gne(g,O),se(g.containerInfo),g.current=O,vne(O),yr(),jn=xe,Vn=le,Ri.transition=q}else g.current=O;if(Hw&&(Hw=!1,lh=g,Gw=U),q=g.pendingLanes,q===0&&(oh=null),Kr(O.stateNode),co(g,di()),y!==null)for(C=g.onRecoverableError,O=0;O<y.length;O++)C(y[O]);if(zw)throw zw=!1,g=aC,aC=null,g;return Gw&1&&g.tag!==0&&lp(),q=g.pendingLanes,q&1?g===sC?Ly++:(Ly=0,sC=g):Ly=0,Qa(),null}function lp(){if(lh!==null){var g=Rc(Gw),y=Ri.transition,C=Vn;try{if(Ri.transition=null,Vn=16>g?16:g,lh===null)var O=!1;else{if(g=lh,lh=null,Gw=0,jn&6)throw Error(s(331));var U=jn;for(jn|=4,kt=g.current;kt!==null;){var q=kt,le=q.child;if(kt.flags&16){var xe=q.deletions;if(xe!==null){for(var Je=0;Je<xe.length;Je++){var yt=xe[Je];for(kt=yt;kt!==null;){var Ut=kt;switch(Ut.tag){case 0:case 11:case 15:ap(8,Ut,q)}var Tn=Ut.child;if(Tn!==null)Tn.return=Ut,kt=Tn;else for(;kt!==null;){Ut=kt;var sn=Ut.sibling,Br=Ut.return;if(Z4(Ut),Ut===yt){kt=null;break}if(sn!==null){sn.return=Br,kt=sn;break}kt=Br}}}var Qt=q.alternate;if(Qt!==null){var as=Qt.child;if(as!==null){Qt.child=null;do{var ul=as.sibling;as.sibling=null,as=ul}while(as!==null)}}kt=q}}if(q.subtreeFlags&2064&&le!==null)le.return=q,kt=le;else e:for(;kt!==null;){if(q=kt,q.flags&2048)switch(q.tag){case 0:case 11:case 15:ap(9,q,q.return)}var Be=q.sibling;if(Be!==null){Be.return=q.return,kt=Be;break e}kt=q.return}}var Ae=g.current;for(kt=Ae;kt!==null;){le=kt;var Xe=le.child;if(le.subtreeFlags&2064&&Xe!==null)Xe.return=le,kt=Xe;else e:for(le=Ae;kt!==null;){if(xe=kt,xe.flags&2048)try{switch(xe.tag){case 0:case 11:case 15:Py(9,xe)}}catch(Zt){ho(xe,xe.return,Zt)}if(xe===le){kt=null;break e}var It=xe.sibling;if(It!==null){It.return=xe.return,kt=It;break e}kt=xe.return}}if(jn=U,Qa(),Ji&&typeof Ji.onPostCommitFiberRoot=="function")try{Ji.onPostCommitFiberRoot(No,g)}catch{}O=!0}return O}finally{Vn=C,Ri.transition=y}}return!1}function pF(g,y,C){y=Ai(C,y),y=zc(g,y,1),Rs(g,y),y=js(),g=$w(g,1),g!==null&&(Ol(g,1,y),co(g,y))}function ho(g,y,C){if(g.tag===3)pF(g,g,C);else for(;y!==null;){if(y.tag===3){pF(y,g,C);break}else if(y.tag===1){var O=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(oh===null||!oh.has(O))){g=Ai(C,g),g=Aw(y,g,1),Rs(y,g),g=js(),y=$w(y,1),y!==null&&(Ol(y,1,g),co(y,g));break}}y=y.return}}function Sne(g,y,C){var O=g.pingCache;O!==null&&O.delete(y),y=js(),g.pingedLanes|=g.suspendedLanes&C,zi===g&&(La&C)===C&&(ra===4||ra===3&&(La&130023424)===La&&500>di()-rC?sp(g,0):nC|=C),co(g,y)}function mF(g,y){y===0&&(g.mode&1?(y=si,si<<=1,!(si&130023424)&&(si=4194304)):y=1);var C=js();g=$w(g,y),g!==null&&(Ol(g,y,C),co(g,C))}function Ene(g){var y=g.memoizedState,C=0;y!==null&&(C=y.retryLane),mF(g,C)}function Ane(g,y){var C=0;switch(g.tag){case 13:var O=g.stateNode,U=g.memoizedState;U!==null&&(C=U.retryLane);break;case 19:O=g.stateNode;break;default:throw Error(s(314))}O!==null&&O.delete(y),mF(g,C)}var gF;gF=function(g,y,C){if(g!==null)if(g.memoizedProps!==y.pendingProps||dn.current)Lo=!0;else{if(!(g.lanes&C)&&!(y.flags&128))return Lo=!1,hne(g,y,C);Lo=!!(g.flags&131072)}else Lo=!1,_n&&y.flags&1048576&&hi(y,V,y.index);switch(y.lanes=0,y.tag){case 2:var O=y.type;g!==null&&(g.alternate=null,y.alternate=null,y.flags|=2),g=y.pendingProps;var U=On(y,Pt.current);Ru(y,C),U=Vc(null,y,O,g,U,C);var q=by();return y.flags|=1,typeof U=="object"&&U!==null&&typeof U.render=="function"&&U.$$typeof===void 0?(y.tag=1,y.memoizedState=null,y.updateQueue=null,tn(O)?(q=!0,ci(y)):q=!1,y.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,Ns(y),U.updater=Fc,y.stateNode=U,U._reactInternals=y,so(y,O,g,C),y=Hk(null,y,O,!0,q,C)):(y.tag=0,_n&&q&&zn(y),Fs(null,y,U,C),y=y.child),y;case 16:O=y.elementType;e:{switch(g!==null&&(g.alternate=null,y.alternate=null,y.flags|=2),g=y.pendingProps,U=O._init,O=U(O._payload),y.type=O,U=y.tag=kne(O),g=Fr(O,g),U){case 0:y=zk(null,y,O,g,C);break e;case 1:y=U4(null,y,O,g,C);break e;case 11:y=L4(null,y,O,g,C);break e;case 14:y=O4(null,y,O,Fr(O.type,g),C);break e}throw Error(s(306,O,""))}return y;case 0:return O=y.type,U=y.pendingProps,U=y.elementType===O?U:Fr(O,U),zk(g,y,O,U,C);case 1:return O=y.type,U=y.pendingProps,U=y.elementType===O?U:Fr(O,U),U4(g,y,O,U,C);case 3:e:{if(V4(y),g===null)throw Error(s(387));O=y.pendingProps,q=y.memoizedState,U=q.element,Oc(g,y),Du(y,O,null,C);var le=y.memoizedState;if(O=le.element,te&&q.isDehydrated)if(q={element:O,isDehydrated:!1,cache:le.cache,transitions:le.transitions},y.updateQueue.baseState=q,y.memoizedState=q,y.flags&256){U=Error(s(423)),y=z4(g,y,O,C,U);break e}else if(O!==U){U=Error(s(424)),y=z4(g,y,O,C,U);break e}else for(te&&(Si=Dl(y.stateNode.containerInfo),Wn=y,_n=!0,Ei=null,il=!1),C=ww(y,null,O,C),y.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(Vl(),O===U){y=Gc(g,y,C);break e}Fs(g,y,O,C)}y=y.child}return y;case 5:return Bc(y),g===null&&Qd(y),O=y.type,U=y.pendingProps,q=g!==null?g.memoizedProps:null,le=U.children,me(O,U)?le=null:q!==null&&me(O,q)&&(y.flags|=32),B4(g,y),Fs(g,y,le,C),y.child;case 6:return g===null&&Qd(y),null;case 13:return H4(g,y,C);case 4:return Qf(y,y.stateNode.containerInfo),O=y.pendingProps,g===null?y.child=Ro(y,null,O,C):Fs(g,y,O,C),y.child;case 11:return O=y.type,U=y.pendingProps,U=y.elementType===O?U:Fr(O,U),L4(g,y,O,U,C);case 7:return Fs(g,y,y.pendingProps,C),y.child;case 8:return Fs(g,y,y.pendingProps.children,C),y.child;case 12:return Fs(g,y,y.pendingProps.children,C),y.child;case 10:e:{if(O=y.type._context,U=y.pendingProps,q=y.memoizedProps,le=U.value,Lc(y,O,le),q!==null)if(Ya(q.value,le)){if(q.children===U.children&&!dn.current){y=Gc(g,y,C);break e}}else for(q=y.child,q!==null&&(q.return=y);q!==null;){var xe=q.dependencies;if(xe!==null){le=q.child;for(var Je=xe.firstContext;Je!==null;){if(Je.context===O){if(q.tag===1){Je=ts(-1,C&-C),Je.tag=2;var yt=q.updateQueue;if(yt!==null){yt=yt.shared;var Ut=yt.pending;Ut===null?Je.next=Je:(Je.next=Ut.next,Ut.next=Je),yt.pending=Je}}q.lanes|=C,Je=q.alternate,Je!==null&&(Je.lanes|=C),nl(q.return,C,y),xe.lanes|=C;break}Je=Je.next}}else if(q.tag===10)le=q.type===y.type?null:q.child;else if(q.tag===18){if(le=q.return,le===null)throw Error(s(341));le.lanes|=C,xe=le.alternate,xe!==null&&(xe.lanes|=C),nl(le,C,y),le=q.sibling}else le=q.child;if(le!==null)le.return=q;else for(le=q;le!==null;){if(le===y){le=null;break}if(q=le.sibling,q!==null){q.return=le.return,le=q;break}le=le.return}q=le}Fs(g,y,U.children,C),y=y.child}return y;case 9:return U=y.type,O=y.pendingProps.children,Ru(y,C),U=Vr(U),O=O(U),y.flags|=1,Fs(g,y,O,C),y.child;case 14:return O=y.type,U=Fr(O,y.pendingProps),U=Fr(O.type,U),O4(g,y,O,U,C);case 15:return F4(g,y,y.type,y.pendingProps,C);case 17:return O=y.type,U=y.pendingProps,U=y.elementType===O?U:Fr(O,U),g!==null&&(g.alternate=null,y.alternate=null,y.flags|=2),y.tag=1,tn(O)?(g=!0,ci(y)):g=!1,Ru(y,C),Ou(y,O,U),so(y,O,U,C),Hk(null,y,O,!0,g,C);case 19:return $4(g,y,C);case 22:return j4(g,y,C)}throw Error(s(156,y.tag))};function vF(g,y){return Hd(g,y)}function Tne(g,y,C,O){this.tag=g,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ll(g,y,C,O){return new Tne(g,y,C,O)}function dC(g){return g=g.prototype,!(!g||!g.isReactComponent)}function kne(g){if(typeof g=="function")return dC(g)?1:0;if(g!=null){if(g=g.$$typeof,g===_)return 11;if(g===S)return 14}return 2}function dh(g,y){var C=g.alternate;return C===null?(C=ll(g.tag,y,g.key,g.mode),C.elementType=g.elementType,C.type=g.type,C.stateNode=g.stateNode,C.alternate=g,g.alternate=C):(C.pendingProps=y,C.type=g.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=g.flags&14680064,C.childLanes=g.childLanes,C.lanes=g.lanes,C.child=g.child,C.memoizedProps=g.memoizedProps,C.memoizedState=g.memoizedState,C.updateQueue=g.updateQueue,y=g.dependencies,C.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},C.sibling=g.sibling,C.index=g.index,C.ref=g.ref,C}function Kw(g,y,C,O,U,q){var le=2;if(O=g,typeof g=="function")dC(g)&&(le=1);else if(typeof g=="string")le=5;else e:switch(g){case c:return up(C.children,U,q,y);case d:le=8,U|=8;break;case f:return g=ll(12,C,y,U|2),g.elementType=f,g.lanes=q,g;case w:return g=ll(13,C,y,U),g.elementType=w,g.lanes=q,g;case x:return g=ll(19,C,y,U),g.elementType=x,g.lanes=q,g;case T:return Yw(C,U,q,y);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case m:le=10;break e;case v:le=9;break e;case _:le=11;break e;case S:le=14;break e;case E:le=16,O=null;break e}throw Error(s(130,g==null?g:typeof g,""))}return y=ll(le,C,y,U),y.elementType=g,y.type=O,y.lanes=q,y}function up(g,y,C,O){return g=ll(7,g,O,y),g.lanes=C,g}function Yw(g,y,C,O){return g=ll(22,g,O,y),g.elementType=T,g.lanes=C,g.stateNode={},g}function hC(g,y,C){return g=ll(6,g,null,y),g.lanes=C,g}function fC(g,y,C){return y=ll(4,g.children!==null?g.children:[],g.key,y),y.lanes=C,y.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},y}function Cne(g,y,C,O,U){this.tag=y,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ge,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Iu(0),this.expirationTimes=Iu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Iu(0),this.identifierPrefix=O,this.onRecoverableError=U,te&&(this.mutableSourceEagerHydrationData=null)}function yF(g,y,C,O,U,q,le,xe,Je){return g=new Cne(g,y,C,xe,Je),y===1?(y=1,q===!0&&(y|=8)):y=0,q=ll(3,null,null,y),g.current=q,q.stateNode=g,q.memoizedState={element:O,isDehydrated:C,cache:null,transitions:null},Ns(q),g}function xF(g){if(!g)return Ft;g=g._reactInternals;e:{if(I(g)!==g||g.tag!==1)throw Error(s(170));var y=g;do{switch(y.tag){case 3:y=y.stateNode.context;break e;case 1:if(tn(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break e}}y=y.return}while(y!==null);throw Error(s(171))}if(g.tag===1){var C=g.type;if(tn(C))return bi(g,C,y)}return y}function _F(g){var y=g._reactInternals;if(y===void 0)throw typeof g.render=="function"?Error(s(188)):(g=Object.keys(g).join(","),Error(s(268,g)));return g=G(y),g===null?null:g.stateNode}function wF(g,y){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var C=g.retryLane;g.retryLane=C!==0&&C<y?C:y}}function pC(g,y){wF(g,y),(g=g.alternate)&&wF(g,y)}function Mne(g){return g=G(g),g===null?null:g.stateNode}function Ine(){return null}return t.attemptContinuousHydration=function(g){if(g.tag===13){var y=js();ol(g,134217728,y),pC(g,134217728)}},t.attemptHydrationAtCurrentPriority=function(g){if(g.tag===13){var y=js(),C=uh(g);ol(g,C,y),pC(g,C)}},t.attemptSynchronousHydration=function(g){switch(g.tag){case 3:var y=g.stateNode;if(y.current.memoizedState.isDehydrated){var C=Pa(y.pendingLanes);C!==0&&(Na(y,C|1),co(y,di()),!(jn&6)&&(wg(),Qa()))}break;case 13:var O=js();uF(function(){return ol(g,1,O)}),pC(g,1)}},t.batchedUpdates=function(g,y){var C=jn;jn|=1;try{return g(y)}finally{jn=C,jn===0&&(wg(),Er&&Qa())}},t.createComponentSelector=function(g){return{$$typeof:Lw,value:g}},t.createContainer=function(g,y,C,O,U,q,le){return yF(g,y,!1,null,C,O,U,q,le)},t.createHasPseudoClassSelector=function(g){return{$$typeof:Ow,value:g}},t.createHydrationContainer=function(g,y,C,O,U,q,le,xe,Je){return g=yF(C,O,!0,g,U,q,le,xe,Je),g.context=xF(null),C=g.current,O=js(),U=uh(C),q=ts(O,U),q.callback=y??null,Rs(C,q),g.current.lanes=U,Ol(g,U,O),co(g,O),g},t.createPortal=function(g,y,C){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:O==null?null:""+O,children:g,containerInfo:y,implementation:C}},t.createRoleSelector=function(g){return{$$typeof:Fw,value:g}},t.createTestNameSelector=function(g){return{$$typeof:jw,value:g}},t.createTextSelector=function(g){return{$$typeof:Bw,value:g}},t.deferredUpdates=function(g){var y=Vn,C=Ri.transition;try{return Ri.transition=null,Vn=16,g()}finally{Vn=y,Ri.transition=C}},t.discreteUpdates=function(g,y,C,O,U){var q=Vn,le=Ri.transition;try{return Ri.transition=null,Vn=1,g(y,C,O,U)}finally{Vn=q,Ri.transition=le,jn===0&&wg()}},t.findAllNodes=eC,t.findBoundingRects=function(g,y){if(!ee)throw Error(s(363));y=eC(g,y),g=[];for(var C=0;C<y.length;C++)g.push(Ye(y[C]));for(y=g.length-1;0<y;y--){C=g[y];for(var O=C.x,U=O+C.width,q=C.y,le=q+C.height,xe=y-1;0<=xe;xe--)if(y!==xe){var Je=g[xe],yt=Je.x,Ut=yt+Je.width,Tn=Je.y,sn=Tn+Je.height;if(O>=yt&&q>=Tn&&U<=Ut&&le<=sn){g.splice(y,1);break}else if(O!==yt||C.width!==Je.width||sn<q||Tn>le){if(!(q!==Tn||C.height!==Je.height||Ut<O||yt>U)){yt>O&&(Je.width+=yt-O,Je.x=O),Ut<U&&(Je.width=U-yt),g.splice(y,1);break}}else{Tn>q&&(Je.height+=Tn-q,Je.y=q),sn<le&&(Je.height=le-Tn),g.splice(y,1);break}}}return g},t.findHostInstance=_F,t.findHostInstanceWithNoPortals=function(g){return g=B(g),g=g!==null?K(g):null,g===null?null:g.stateNode},t.findHostInstanceWithWarning=function(g){return _F(g)},t.flushControlled=function(g){var y=jn;jn|=1;var C=Ri.transition,O=Vn;try{Ri.transition=null,Vn=1,g()}finally{Vn=O,Ri.transition=C,jn=y,jn===0&&(wg(),Qa())}},t.flushPassiveEffects=lp,t.flushSync=uF,t.focusWithin=function(g,y){if(!ee)throw Error(s(363));for(g=Zk(g),y=sF(g,y),y=Array.from(y),g=0;g<y.length;){var C=y[g++];if(!X(C)){if(C.tag===5&&Ie(C.stateNode))return!0;for(C=C.child;C!==null;)y.push(C),C=C.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Vn},t.getFindAllNodesFailureDescription=function(g,y){if(!ee)throw Error(s(363));var C=0,O=[];g=[Zk(g),0];for(var U=0;U<g.length;){var q=g[U++],le=g[U++],xe=y[le];if((q.tag!==5||!X(q))&&(Qk(q,xe)&&(O.push(Jk(xe)),le++,le>C&&(C=le)),le<y.length))for(q=q.child;q!==null;)g.push(q,le),q=q.sibling}if(C<y.length){for(g=[];C<y.length;C++)g.push(Jk(y[C]));return`findAllNodes was able to match part of the selector:
  `+(O.join(" > ")+`

No matching component was found for:
  `)+g.join(" > ")}return null},t.getPublicRootInstance=function(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return re(g.child.stateNode);default:return g.child.stateNode}},t.injectIntoDevTools=function(g){if(g={bundleType:g.bundleType,version:g.version,rendererPackageName:g.rendererPackageName,rendererConfig:g.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:Mne,findFiberByHostInstance:g.findFiberByHostInstance||Ine,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")g=!1;else{var y=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(y.isDisabled||!y.supportsFiber)g=!0;else{try{No=y.inject(g),Ji=y}catch{}g=!!y.checkDCE}}return g},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(g,y,C,O){if(!ee)throw Error(s(363));g=eC(g,y);var U=He(g,C,O).disconnect;return{disconnect:function(){U()}}},t.registerMutableSourceForHydration=function(g,y){var C=y._getVersion;C=C(y._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[y,C]:g.mutableSourceEagerHydrationData.push(y,C)},t.runWithPriority=function(g,y){var C=Vn;try{return Vn=g,y()}finally{Vn=C}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(g,y,C,O){var U=y.current,q=js(),le=uh(U);return C=xF(C),y.context===null?y.context=C:y.pendingContext=C,y=ts(q,le),y.payload={element:g},O=O===void 0?null:O,O!==null&&(y.callback=O),Rs(U,y),g=ol(U,le,q),g!==null&&Bl(g,U,le),le},t};ote.exports=KDe;var YDe=ote.exports;const ZDe=ZR(YDe),v4={},QDe=n=>void Object.assign(v4,n);function JDe(n,e){function t(c,{args:d=[],attach:f,...m},v){let _=`${c[0].toUpperCase()}${c.slice(1)}`,w;if(c==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const x=m.object;w=a0(x,{type:c,root:v,attach:f,primitive:!0})}else{const x=v4[_];if(!x)throw new Error(`R3F: ${_} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");w=a0(new x(...d),{type:c,root:v,attach:f,memoizedProps:{args:d}})}return w.__r3f.attach===void 0&&(w.isBufferGeometry?w.__r3f.attach="geometry":w.isMaterial&&(w.__r3f.attach="material")),_!=="inject"&&MI(w,m),w}function r(c,d){let f=!1;if(d){var m,v;(m=d.__r3f)!=null&&m.attach?CI(c,d,d.__r3f.attach):d.isObject3D&&c.isObject3D&&(c.add(d),f=!0),f||(v=c.__r3f)==null||v.objects.push(d),d.__r3f||a0(d,{}),d.__r3f.parent=c,jR(d),s0(d)}}function i(c,d,f){let m=!1;if(d){var v,_;if((v=d.__r3f)!=null&&v.attach)CI(c,d,d.__r3f.attach);else if(d.isObject3D&&c.isObject3D){d.parent=c,d.dispatchEvent({type:"added"}),c.dispatchEvent({type:"childadded",child:d});const w=c.children.filter(S=>S!==d),x=w.indexOf(f);c.children=[...w.slice(0,x),d,...w.slice(x)],m=!0}m||(_=c.__r3f)==null||_.objects.push(d),d.__r3f||a0(d,{}),d.__r3f.parent=c,jR(d),s0(d)}}function a(c,d,f=!1){c&&[...c].forEach(m=>s(d,m,f))}function s(c,d,f){if(d){var m,v,_;if(d.__r3f&&(d.__r3f.parent=null),(m=c.__r3f)!=null&&m.objects&&(c.__r3f.objects=c.__r3f.objects.filter(T=>T!==d)),(v=d.__r3f)!=null&&v.attach)UV(c,d,d.__r3f.attach);else if(d.isObject3D&&c.isObject3D){var w;c.remove(d),(w=d.__r3f)!=null&&w.root&&oLe(fS(d),d)}const S=(_=d.__r3f)==null?void 0:_.primitive,E=!S&&(f===void 0?d.dispose!==null:f);if(!S){var x;a((x=d.__r3f)==null?void 0:x.objects,d,E),a(d.children,d,E)}if(delete d.__r3f,E&&d.dispose&&d.type!=="Scene"){const T=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?OR.unstable_scheduleCallback(OR.unstable_IdlePriority,T):T()}s0(c)}}function o(c,d,f,m){var v;const _=(v=c.__r3f)==null?void 0:v.parent;if(!_)return;const w=t(d,f,c.__r3f.root);if(c.children){for(const x of c.children)x.__r3f&&r(w,x);c.children=c.children.filter(x=>!x.__r3f)}c.__r3f.objects.forEach(x=>r(w,x)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||s(_,c),w.parent&&(w.__r3f.autoRemovedBeforeAppend=!0),r(_,w),w.raycast&&w.__r3f.eventCount&&fS(w).getState().internal.interaction.push(w),[m,m.alternate].forEach(x=>{x!==null&&(x.stateNode=w,x.ref&&(typeof x.ref=="function"?x.ref(w):x.ref.current=w))})}const l=()=>{};return{reconciler:ZDe({createInstance:t,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,d)=>{if(!d)return;const f=c.getState().scene;f.__r3f&&(f.__r3f.root=c,r(f,d))},removeChildFromContainer:(c,d)=>{d&&s(c.getState().scene,d)},insertInContainerBefore:(c,d,f)=>{if(!d||!f)return;const m=c.getState().scene;m.__r3f&&i(m,d,f)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var d;return!!((d=c==null?void 0:c.__r3f)!=null?d:{}).handlers},prepareUpdate(c,d,f,m){var v;if(((v=c==null?void 0:c.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==c)return[!0];{const{args:w=[],children:x,...S}=m,{args:E=[],children:T,...D}=f;if(!Array.isArray(w))throw new Error("R3F: the args prop must be an array!");if(w.some((P,N)=>P!==E[N]))return[!0];const F=gte(c,S,D,!0);return F.changes.length?[!1,F]:null}},commitUpdate(c,[d,f],m,v,_,w){d?o(c,m,_,w):MI(c,f)},commitMount(c,d,f,m){var v;const _=(v=c.__r3f)!=null?v:{};c.raycast&&_.handlers&&_.eventCount&&fS(c).getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>a0(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var d;const{attach:f,parent:m}=(d=c.__r3f)!=null?d:{};f&&m&&UV(m,c,f),c.isObject3D&&(c.visible=!1),s0(c)},unhideInstance(c,d){var f;const{attach:m,parent:v}=(f=c.__r3f)!=null?f:{};m&&v&&CI(v,c,m),(c.isObject3D&&d.visible==null||d.visible)&&(c.visible=!0),s0(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():D0.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Hr.fun(performance.now)?performance.now:Hr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Hr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Hr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:MI}}var OV,FV;const kI=n=>"colorSpace"in n||"outputColorSpace"in n,cte=()=>{var n;return(n=v4.ColorManagement)!=null?n:null},dte=n=>n&&n.isOrthographicCamera,eLe=n=>n&&n.hasOwnProperty("current"),fw=typeof window<"u"&&((OV=window.document)!=null&&OV.createElement||((FV=window.navigator)==null?void 0:FV.product)==="ReactNative")?M.useLayoutEffect:M.useEffect;function hte(n){const e=M.useRef(n);return fw(()=>void(e.current=n),[n]),e}function tLe({set:n}){return fw(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}let fte=class extends M.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}};fte.getDerivedStateFromError=()=>({error:!0});const pte="__default",jV=new Map,nLe=n=>n&&!!n.memoized&&!!n.changes;function mte(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const lx=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function fS(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Hr={obj:n=>n===Object(n)&&!Hr.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Hr.str(n)||Hr.num(n)||Hr.boo(n))return n===e;const a=Hr.obj(n);if(a&&r==="reference")return n===e;const s=Hr.arr(n);if(s&&t==="reference")return n===e;if((s||a)&&n===e)return!0;let o;for(o in n)if(!(o in e))return!1;if(a&&t==="shallow"&&r==="shallow"){for(o in i?e:n)if(!Hr.equ(n[o],e[o],{strict:i,objects:"reference"}))return!1}else for(o in i?e:n)if(n[o]!==e[o])return!1;if(Hr.und(o)){if(s&&n.length===0&&e.length===0||a&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function rLe(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function iLe(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function a0(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function FR(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((a,s)=>a[s],n),{target:t,key:i}}else return{target:t,key:e}}const BV=/-\d+$/;function CI(n,e,t){if(Hr.str(t)){if(BV.test(t)){const a=t.replace(BV,""),{target:s,key:o}=FR(n,a);Array.isArray(s[o])||(s[o]=[])}const{target:r,key:i}=FR(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function UV(n,e,t){var r,i;if(Hr.str(t)){const{target:a,key:s}=FR(n,t),o=e.__r3f.previousAttach;o===void 0?delete a[s]:a[s]=o}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function gte(n,{children:e,key:t,ref:r,...i},{children:a,key:s,ref:o,...l}={},u=!1){const c=n.__r3f,d=Object.entries(i),f=[];if(u){const v=Object.keys(l);for(let _=0;_<v.length;_++)i.hasOwnProperty(v[_])||d.unshift([v[_],pte+"remove"])}d.forEach(([v,_])=>{var w;if((w=n.__r3f)!=null&&w.primitive&&v==="object"||Hr.equ(_,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return f.push([v,_,!0,[]]);let x=[];v.includes("-")&&(x=v.split("-")),f.push([v,_,!1,x]);for(const S in i){const E=i[S];S.startsWith(`${v}-`)&&f.push([S,E,!1,S.split("-")])}});const m={...i};return c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.args&&(m.args=c.memoizedProps.args),c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.attach&&(m.attach=c.memoizedProps.attach),{memoized:m,changes:f}}function MI(n,e){var t;const r=n.__r3f,i=r==null?void 0:r.root,a=i==null||i.getState==null?void 0:i.getState(),{memoized:s,changes:o}=nLe(e)?e:gte(n,e),l=r==null?void 0:r.eventCount;n.__r3f&&(n.__r3f.memoizedProps=s);for(let f=0;f<o.length;f++){let[m,v,_,w]=o[f];if(kI(n)){const T="srgb",D="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?T:D):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?T:D)}let x=n,S=x[m];if(w.length&&(S=w.reduce((E,T)=>E[T],n),!(S&&S.set))){const[E,...T]=w.reverse();x=T.reverse().reduce((D,F)=>D[F],n),m=E}if(v===pte+"remove")if(x.constructor){let E=jV.get(x.constructor);E||(E=new x.constructor,jV.set(x.constructor,E)),v=E[m]}else v=0;if(_&&r)v?r.handlers[m]=v:delete r.handlers[m],r.eventCount=Object.keys(r.handlers).length;else if(S&&S.set&&(S.copy||S instanceof gm)){if(Array.isArray(v))S.fromArray?S.fromArray(v):S.set(...v);else if(S.copy&&v&&v.constructor&&S.constructor===v.constructor)S.copy(v);else if(v!==void 0){var u;const E=(u=S)==null?void 0:u.isColor;!E&&S.setScalar?S.setScalar(v):S instanceof gm&&v instanceof gm?S.mask=v.mask:S.set(v),!cte()&&a&&!a.linear&&E&&S.convertSRGBToLinear()}}else{var c;if(x[m]=v,(c=x[m])!=null&&c.isTexture&&x[m].format===bs&&x[m].type===Nl&&a){const E=x[m];kI(E)&&kI(a.gl)?E.colorSpace=a.gl.outputColorSpace:E.encoding=a.gl.outputEncoding}}s0(n)}if(r&&r.parent&&n.raycast&&l!==r.eventCount){const f=fS(n).getState().internal,m=f.interaction.indexOf(n);m>-1&&f.interaction.splice(m,1),r.eventCount&&f.interaction.push(n)}return!(o.length===1&&o[0][0]==="onUpdate")&&o.length&&(t=n.__r3f)!=null&&t.parent&&jR(n),n}function s0(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function jR(n){n.onUpdate==null||n.onUpdate(n)}function aLe(n,e){n.manual||(dte(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function A2(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function sLe(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return D0.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return D0.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return D0.ContinuousEventPriority;default:return D0.DefaultEventPriority}}function vte(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function oLe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{vte(t.capturedMap,e,r,i)})}function lLe(n){function e(l){const{internal:u}=n.getState(),c=l.offsetX-u.initialClick[0],d=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+d*d))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var d;return(d=u.__r3f)==null?void 0:d.handlers["onPointer"+c]}))}function r(l,u){const c=n.getState(),d=new Set,f=[],m=u?u(c.internal.interaction):c.internal.interaction;for(let x=0;x<m.length;x++){const S=lx(m[x]);S&&(S.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function v(x){const S=lx(x);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var E;S.events.compute==null||S.events.compute(l,S,(E=S.previousRoot)==null?void 0:E.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(x,!0):[]}let _=m.flatMap(v).sort((x,S)=>{const E=lx(x.object),T=lx(S.object);return!E||!T?x.distance-S.distance:T.events.priority-E.events.priority||x.distance-S.distance}).filter(x=>{const S=A2(x);return d.has(S)?!1:(d.add(S),!0)});c.events.filter&&(_=c.events.filter(_,c));for(const x of _){let S=x.object;for(;S;){var w;(w=S.__r3f)!=null&&w.eventCount&&f.push({...x,eventObject:S}),S=S.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let x of c.internal.capturedMap.get(l.pointerId).values())d.has(A2(x.intersection))||f.push(x.intersection);return f}function i(l,u,c,d){const f=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const _=lx(v.object)||f,{raycaster:w,pointer:x,camera:S,internal:E}=_,T=new ie(x.x,x.y,0).unproject(S),D=R=>{var B,G;return(B=(G=E.capturedMap.get(R))==null?void 0:G.has(v.eventObject))!=null?B:!1},F=R=>{const B={intersection:v,target:u.target};E.capturedMap.has(R)?E.capturedMap.get(R).set(v.eventObject,B):E.capturedMap.set(R,new Map([[v.eventObject,B]])),u.target.setPointerCapture(R)},P=R=>{const B=E.capturedMap.get(R);B&&vte(E.capturedMap,v.eventObject,B,R)};let N={};for(let R in u){let B=u[R];typeof B!="function"&&(N[R]=B)}let I={...v,...N,pointer:x,intersections:l,stopped:m.stopped,delta:c,unprojectedPoint:T,ray:w.ray,camera:S,stopPropagation(){const R="pointerId"in u&&E.capturedMap.get(u.pointerId);if((!R||R.has(v.eventObject))&&(I.stopped=m.stopped=!0,E.hovered.size&&Array.from(E.hovered.values()).find(B=>B.eventObject===v.eventObject))){const B=l.slice(0,l.indexOf(v));a([...B,v])}},target:{hasPointerCapture:D,setPointerCapture:F,releasePointerCapture:P},currentTarget:{hasPointerCapture:D,setPointerCapture:F,releasePointerCapture:P},nativeEvent:u};if(d(I),m.stopped===!0)break}}return l}function a(l){const{internal:u}=n.getState();for(const c of u.hovered.values())if(!l.length||!l.find(d=>d.object===c.object&&d.index===c.index&&d.instanceId===c.instanceId)){const f=c.eventObject.__r3f,m=f==null?void 0:f.handlers;if(u.hovered.delete(A2(c)),f!=null&&f.eventCount){const v={...c,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function s(l,u){for(let c=0;c<u.length;c++){const d=u[c].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return u=>{const{internal:c}=n.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),a([]))})}}return function(c){const{onPointerMissed:d,internal:f}=n.getState();f.lastEvent.current=c;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",w=r(c,m?t:void 0),x=v?e(c):0;l==="onPointerDown"&&(f.initialClick=[c.offsetX,c.offsetY],f.initialHits=w.map(E=>E.eventObject)),v&&!w.length&&x<=2&&(s(c,f.interaction),d&&d(c)),m&&a(w);function S(E){const T=E.eventObject,D=T.__r3f,F=D==null?void 0:D.handlers;if(D!=null&&D.eventCount)if(m){if(F.onPointerOver||F.onPointerEnter||F.onPointerOut||F.onPointerLeave){const P=A2(E),N=f.hovered.get(P);N?N.stopped&&E.stopPropagation():(f.hovered.set(P,E),F.onPointerOver==null||F.onPointerOver(E),F.onPointerEnter==null||F.onPointerEnter(E))}F.onPointerMove==null||F.onPointerMove(E)}else{const P=F[l];P?(!v||f.initialHits.includes(T))&&(s(c,f.interaction.filter(N=>!f.initialHits.includes(N))),P(E)):v&&f.initialHits.includes(T)&&s(c,f.interaction.filter(N=>!f.initialHits.includes(N)))}}i(w,c,x,S)}}return{handlePointer:o}}const yte=n=>!!(n!=null&&n.render),xte=M.createContext(null),uLe=(n,e)=>{const t=GDe((o,l)=>{const u=new ie,c=new ie,d=new ie;function f(x=l().camera,S=c,E=l().size){const{width:T,height:D,top:F,left:P}=E,N=T/D;S.isVector3?d.copy(S):d.set(...S);const I=x.getWorldPosition(u).distanceTo(d);if(dte(x))return{width:T/x.zoom,height:D/x.zoom,top:F,left:P,factor:1,distance:I,aspect:N};{const R=x.fov*Math.PI/180,B=2*Math.tan(R/2)*I,G=B*(T/D);return{width:G,height:B,top:F,left:P,factor:T/G,distance:I,aspect:N}}}let m;const v=x=>o(S=>({performance:{...S.performance,current:x}})),_=new rt;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(x=1)=>n(l(),x),advance:(x,S)=>e(x,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new d4,pointer:_,mouse:_,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=l();m&&clearTimeout(m),x.performance.current!==x.performance.min&&v(x.performance.min),m=setTimeout(()=>v(l().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:f},setEvents:x=>o(S=>({...S,events:{...S.events,...x}})),setSize:(x,S,E,T,D)=>{const F=l().camera,P={width:x,height:S,top:T||0,left:D||0,updateStyle:E};o(N=>({size:P,viewport:{...N.viewport,...f(F,c,P)}}))},setDpr:x=>o(S=>{const E=mte(x);return{viewport:{...S.viewport,dpr:E,initialDpr:S.viewport.initialDpr||E}}}),setFrameloop:(x="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,x!=="never"&&(S.start(),S.elapsedTime=0),o(()=>({frameloop:x}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:M.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(x,S,E)=>{const T=l().internal;return T.priority=T.priority+(S>0?1:0),T.subscribers.push({ref:x,priority:S,store:E}),T.subscribers=T.subscribers.sort((D,F)=>D.priority-F.priority),()=>{const D=l().internal;D!=null&&D.subscribers&&(D.priority=D.priority-(S>0?1:0),D.subscribers=D.subscribers.filter(F=>F.ref!==x))}}}}}),r=t.getState();let i=r.size,a=r.viewport.dpr,s=r.camera;return t.subscribe(()=>{const{camera:o,size:l,viewport:u,gl:c,set:d}=t.getState();if(l.width!==i.width||l.height!==i.height||u.dpr!==a){var f;i=l,a=u.dpr,aLe(o,l),c.setPixelRatio(u.dpr);const m=(f=l.updateStyle)!=null?f:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,m)}o!==s&&(s=o,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>n(o)),t};let T2,cLe=new Set,dLe=new Set,hLe=new Set;function II(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function ux(n,e){switch(n){case"before":return II(cLe,e);case"after":return II(dLe,e);case"tail":return II(hLe,e)}}let PI,NI;function RI(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),PI=e.internal.subscribers,T2=0;T2<PI.length;T2++)NI=PI[T2],NI.ref.current(NI.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function fLe(n){let e=!1,t=!1,r,i,a;function s(u){i=requestAnimationFrame(s),e=!0,r=0,ux("before",u),t=!0;for(const d of n.values()){var c;a=d.store.getState(),a.internal.active&&(a.frameloop==="always"||a.internal.frames>0)&&!((c=a.gl.xr)!=null&&c.isPresenting)&&(r+=RI(u,a))}if(t=!1,ux("after",u),r===0)return ux("tail",u),e=!1,cancelAnimationFrame(i)}function o(u,c=1){var d;if(!u)return n.forEach(f=>o(f.store.getState(),c));(d=u.gl.xr)!=null&&d.isPresenting||!u.internal.active||u.frameloop==="never"||(c>1?u.internal.frames=Math.min(60,u.internal.frames+c):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(s)))}function l(u,c=!0,d,f){if(c&&ux("before",u),d)RI(u,d,f);else for(const m of n.values())RI(u,m.store.getState());c&&ux("after",u)}return{loop:s,invalidate:o,advance:l}}function _te(){const n=M.useContext(xte);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Jc(n=t=>t,e){return _te()(n,e)}function pLe(n,e=0){const t=_te(),r=t.getState().internal.subscribe,i=hte(n);return fw(()=>r(i,e,t),[e,r,t]),null}const VV=new WeakMap;function wte(n,e){return function(t,...r){let i=VV.get(t);return i||(i=new t,VV.set(t,i)),n&&n(i),Promise.all(r.map(a=>new Promise((s,o)=>i.load(a,l=>{l.scene&&Object.assign(l,rLe(l.scene)),s(l)},e,l=>o(new Error(`Could not load ${a}: ${l==null?void 0:l.message}`))))))}}function pw(n,e,t,r){const i=Array.isArray(e)?e:[e],a=qDe(wte(t,r),[n,...i],{equal:Hr.equ});return Array.isArray(e)?a:a[0]}pw.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return $De(wte(t),[n,...r])};pw.clear=function(n,e){const t=Array.isArray(e)?e:[e];return XDe([n,...t])};const qv=new Map,{invalidate:zV,advance:HV}=fLe(qv),{reconciler:yA,applyProps:Zg}=JDe(qv,sLe),Qg={objects:"shallow",strict:!1},mLe=(n,e)=>{const t=typeof n=="function"?n(e):n;return yte(t)?t:new rte({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function gLe(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:a,left:s,updateStyle:o=t}=e;return{width:r,height:i,top:a,left:s,updateStyle:o}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:a,left:s}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:a,left:s,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function vLe(n){const e=qv.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,a=r||uLe(zV,HV),s=t||yA.createContainer(a,D0.ConcurrentRoot,null,!1,null,"",i,null);e||qv.set(n,{fiber:s,store:a});let o,l=!1,u;return{configure(c={}){let{gl:d,size:f,scene:m,events:v,onCreated:_,shadows:w=!1,linear:x=!1,flat:S=!1,legacy:E=!1,orthographic:T=!1,frameloop:D="always",dpr:F=[1,2],performance:P,raycaster:N,camera:I,onPointerMissed:R}=c,B=a.getState(),G=B.gl;B.gl||B.set({gl:G=mLe(d,n)});let H=B.raycaster;H||B.set({raycaster:H=new Xee});const{params:K,...ne}=N||{};if(Hr.equ(ne,H,Qg)||Zg(H,{...ne}),Hr.equ(K,H.params,Qg)||Zg(H,{params:{...H.params,...K}}),!B.camera||B.camera===u&&!Hr.equ(u,I,Qg)){u=I;const se=I instanceof aw,pe=se?I:T?new vf(0,0,0,0,.1,1e3):new Bi(75,0,.1,1e3);se||(pe.position.z=5,I&&(Zg(pe,I),("aspect"in I||"left"in I||"right"in I||"bottom"in I||"top"in I)&&(pe.manual=!0,pe.updateProjectionMatrix())),!B.camera&&!(I!=null&&I.rotation)&&pe.lookAt(0,0,0)),B.set({camera:pe}),H.camera=pe}if(!B.scene){let se;m!=null&&m.isScene?se=m:(se=new WO,m&&Zg(se,m)),B.set({scene:a0(se)})}if(!B.xr){var re;const se=($e,at)=>{const me=a.getState();me.frameloop!=="never"&&HV($e,!0,me,at)},pe=()=>{const $e=a.getState();$e.gl.xr.enabled=$e.gl.xr.isPresenting,$e.gl.xr.setAnimationLoop($e.gl.xr.isPresenting?se:null),$e.gl.xr.isPresenting||zV($e)},Fe={connect(){const $e=a.getState().gl;$e.xr.addEventListener("sessionstart",pe),$e.xr.addEventListener("sessionend",pe)},disconnect(){const $e=a.getState().gl;$e.xr.removeEventListener("sessionstart",pe),$e.xr.removeEventListener("sessionend",pe)}};typeof((re=G.xr)==null?void 0:re.addEventListener)=="function"&&Fe.connect(),B.set({xr:Fe})}if(G.shadowMap){const se=G.shadowMap.enabled,pe=G.shadowMap.type;if(G.shadowMap.enabled=!!w,Hr.boo(w))G.shadowMap.type=a1;else if(Hr.str(w)){var oe;const Fe={basic:iJ,percentage:tk,soft:a1,variance:Ql};G.shadowMap.type=(oe=Fe[w])!=null?oe:a1}else Hr.obj(w)&&Object.assign(G.shadowMap,w);(se!==G.shadowMap.enabled||pe!==G.shadowMap.type)&&(G.shadowMap.needsUpdate=!0)}const $=cte();$&&("enabled"in $?$.enabled=!E:"legacyMode"in $&&($.legacyMode=E)),l||Zg(G,{outputEncoding:x?3e3:3001,toneMapping:S?pc:IO}),B.legacy!==E&&B.set(()=>({legacy:E})),B.linear!==x&&B.set(()=>({linear:x})),B.flat!==S&&B.set(()=>({flat:S})),d&&!Hr.fun(d)&&!yte(d)&&!Hr.equ(d,G,Qg)&&Zg(G,d),v&&!B.events.handlers&&B.set({events:v(a)});const ue=gLe(n,f);return Hr.equ(ue,B.size,Qg)||B.setSize(ue.width,ue.height,ue.updateStyle,ue.top,ue.left),F&&B.viewport.dpr!==mte(F)&&B.setDpr(F),B.frameloop!==D&&B.setFrameloop(D),B.onPointerMissed||B.set({onPointerMissed:R}),P&&!Hr.equ(P,B.performance,Qg)&&B.set(se=>({performance:{...se.performance,...P}})),o=_,l=!0,this},render(c){return l||this.configure(),yA.updateContainer(h.jsx(yLe,{store:a,children:c,onCreated:o,rootElement:n}),s,null,()=>{}),a},unmount(){bte(n)}}}function yLe({store:n,children:e,onCreated:t,rootElement:r}){return fw(()=>{const i=n.getState();i.set(a=>({internal:{...a.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),h.jsx(xte.Provider,{value:n,children:e})}function bte(n,e){const t=qv.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),yA.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var a,s,o,l;i.events.disconnect==null||i.events.disconnect(),(a=i.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(o=i.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),iLe(i),qv.delete(n)}catch{}},500)})}}yA.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:M.version});const DI={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function xLe(n){const{handlePointer:e}=lLe(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(DI).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:a}=n.getState();a.disconnect==null||a.disconnect(),i(s=>({events:{...s.events,connected:t}})),Object.entries((r=a.handlers)!=null?r:[]).forEach(([s,o])=>{const[l,u]=DI[s];t.addEventListener(l,o,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([a,s])=>{if(r&&r.connected instanceof HTMLElement){const[o]=DI[a];r.connected.removeEventListener(o,s)}}),t(a=>({events:{...a.events,connected:void 0}}))}}}}function GV(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function _Le({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=M.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=M.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,c=M.useRef(!1);M.useEffect(()=>(c.current=!0,()=>void(c.current=!1)));const[d,f,m]=M.useMemo(()=>{const x=()=>{if(!o.current.element)return;const{left:S,top:E,width:T,height:D,bottom:F,right:P,x:N,y:I}=o.current.element.getBoundingClientRect(),R={left:S,top:E,width:T,height:D,bottom:F,right:P,x:N,y:I};o.current.element instanceof HTMLElement&&r&&(R.height=o.current.element.offsetHeight,R.width=o.current.element.offsetWidth),Object.freeze(R),c.current&&!ELe(o.current.lastBounds,R)&&s(o.current.lastBounds=R)};return[x,u?GV(x,u):x,l?GV(x,l):x]},[s,r,l,u]);function v(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",m,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function _(){o.current.element&&(o.current.resizeObserver=new i(m),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(x=>x.addEventListener("scroll",m,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const w=x=>{!x||x===o.current.element||(v(),o.current.element=x,o.current.scrollContainers=Ste(x),_())};return bLe(m,!!e),wLe(f),M.useEffect(()=>{v(),_()},[e,m,f]),M.useEffect(()=>v,[]),[w,a,d]}function wLe(n){M.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function bLe(n,e){M.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function Ste(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(a=>a==="auto"||a==="scroll")&&e.push(n),[...e,...Ste(n.parentElement)]}const SLe=["x","y","top","bottom","left","right","width","height"],ELe=(n,e)=>SLe.every(t=>n[t]===e[t]);var ALe=Object.defineProperty,TLe=Object.defineProperties,kLe=Object.getOwnPropertyDescriptors,WV=Object.getOwnPropertySymbols,CLe=Object.prototype.hasOwnProperty,MLe=Object.prototype.propertyIsEnumerable,qV=(n,e,t)=>e in n?ALe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$V=(n,e)=>{for(var t in e||(e={}))CLe.call(e,t)&&qV(n,t,e[t]);if(WV)for(var t of WV(e))MLe.call(e,t)&&qV(n,t,e[t]);return n},ILe=(n,e)=>TLe(n,kLe(e)),XV,KV;typeof window<"u"&&((XV=window.document)!=null&&XV.createElement||((KV=window.navigator)==null?void 0:KV.product)==="ReactNative")?M.useLayoutEffect:M.useEffect;function Ete(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=Ete(r,e,t);if(i)return i;r=r.sibling}}function Ate(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const YV=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=YV;return}return YV.apply(this,arguments)};const y4=Ate(M.createContext(null));class Tte extends M.Component{render(){return M.createElement(y4.Provider,{value:this._reactInternals},this.props.children)}}function PLe(){const n=M.useContext(y4);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=M.useId();return M.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=Ete(r,!1,a=>{let s=a.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[n,e])}function NLe(){const n=PLe(),[e]=M.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==y4&&!e.has(i)&&e.set(i,M.useContext(Ate(i)))}t=t.return}return e}function RLe(){const n=NLe();return M.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>M.createElement(e,null,M.createElement(t.Provider,ILe($V({},r),{value:n.get(t)}))),e=>M.createElement(Tte,$V({},e))),[n])}const DLe=M.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:a,events:s=xLe,eventSource:o,eventPrefix:l,shadows:u,linear:c,flat:d,legacy:f,orthographic:m,frameloop:v,dpr:_,performance:w,raycaster:x,camera:S,scene:E,onPointerMissed:T,onCreated:D,...F},P){M.useMemo(()=>QDe(VDe),[]);const N=RLe(),[I,R]=_Le({scroll:!0,debounce:{scroll:50,resize:0},...r}),B=M.useRef(null),G=M.useRef(null);M.useImperativeHandle(P,()=>B.current);const H=hte(T),[K,ne]=M.useState(!1),[re,oe]=M.useState(!1);if(K)throw K;if(re)throw re;const $=M.useRef(null);fw(()=>{const se=B.current;R.width>0&&R.height>0&&se&&($.current||($.current=vLe(se)),$.current.configure({gl:a,events:s,shadows:u,linear:c,flat:d,legacy:f,orthographic:m,frameloop:v,dpr:_,performance:w,raycaster:x,camera:S,scene:E,size:R,onPointerMissed:(...pe)=>H.current==null?void 0:H.current(...pe),onCreated:pe=>{pe.events.connect==null||pe.events.connect(o?eLe(o)?o.current:o:G.current),l&&pe.setEvents({compute:(Fe,$e)=>{const at=Fe[l+"X"],me=Fe[l+"Y"];$e.pointer.set(at/$e.size.width*2-1,-(me/$e.size.height)*2+1),$e.raycaster.setFromCamera($e.pointer,$e.camera)}}),D==null||D(pe)}}),$.current.render(h.jsx(N,{children:h.jsx(fte,{set:oe,children:h.jsx(M.Suspense,{fallback:h.jsx(tLe,{set:ne}),children:e??null})})})))}),M.useEffect(()=>{const se=B.current;if(se)return()=>bte(se)},[]);const ue=o?"none":"auto";return h.jsx("div",{ref:G,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ue,...i},...F,children:h.jsx("div",{ref:I,style:{width:"100%",height:"100%"},children:h.jsx("canvas",{ref:B,style:{display:"block"},children:t})})})}),LLe=M.forwardRef(function(e,t){return h.jsx(Tte,{children:h.jsx(DLe,{...e,ref:t})})});function BR(){return BR=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},BR.apply(null,arguments)}var OLe=Object.defineProperty,FLe=(n,e,t)=>e in n?OLe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,jLe=(n,e,t)=>(FLe(n,e+"",t),t);class BLe{constructor(){jLe(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}}var ULe=Object.defineProperty,VLe=(n,e,t)=>e in n?ULe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,on=(n,e,t)=>(VLe(n,typeof e!="symbol"?e+"":e,t),t);const k2=new ig,ZV=new nd,zLe=Math.cos(70*(Math.PI/180)),QV=(n,e)=>(n%e+e)%e;let HLe=class extends BLe{constructor(e,t){super(),on(this,"object"),on(this,"domElement"),on(this,"enabled",!0),on(this,"target",new ie),on(this,"minDistance",0),on(this,"maxDistance",1/0),on(this,"minZoom",0),on(this,"maxZoom",1/0),on(this,"minPolarAngle",0),on(this,"maxPolarAngle",Math.PI),on(this,"minAzimuthAngle",-1/0),on(this,"maxAzimuthAngle",1/0),on(this,"enableDamping",!1),on(this,"dampingFactor",.05),on(this,"enableZoom",!0),on(this,"zoomSpeed",1),on(this,"enableRotate",!0),on(this,"rotateSpeed",1),on(this,"enablePan",!0),on(this,"panSpeed",1),on(this,"screenSpacePanning",!0),on(this,"keyPanSpeed",7),on(this,"zoomToCursor",!1),on(this,"autoRotate",!1),on(this,"autoRotateSpeed",2),on(this,"reverseOrbit",!1),on(this,"reverseHorizontalOrbit",!1),on(this,"reverseVerticalOrbit",!1),on(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),on(this,"mouseButtons",{LEFT:Op.ROTATE,MIDDLE:Op.DOLLY,RIGHT:Op.PAN}),on(this,"touches",{ONE:Fp.ROTATE,TWO:Fp.DOLLY_PAN}),on(this,"target0"),on(this,"position0"),on(this,"zoom0"),on(this,"_domElementKeyEvents",null),on(this,"getPolarAngle"),on(this,"getAzimuthalAngle"),on(this,"setPolarAngle"),on(this,"setAzimuthalAngle"),on(this,"getDistance"),on(this,"getZoomScale"),on(this,"listenToKeyEvents"),on(this,"stopListenToKeyEvents"),on(this,"saveState"),on(this,"reset"),on(this,"update"),on(this,"connect"),on(this,"dispose"),on(this,"dollyIn"),on(this,"dollyOut"),on(this,"getScale"),on(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=ce=>{let Ne=QV(ce,2*Math.PI),ht=c.phi;ht<0&&(ht+=2*Math.PI),Ne<0&&(Ne+=2*Math.PI);let de=Math.abs(Ne-ht);2*Math.PI-de<de&&(Ne<ht?Ne+=2*Math.PI:ht+=2*Math.PI),d.phi=Ne-ht,r.update()},this.setAzimuthalAngle=ce=>{let Ne=QV(ce,2*Math.PI),ht=c.theta;ht<0&&(ht+=2*Math.PI),Ne<0&&(Ne+=2*Math.PI);let de=Math.abs(Ne-ht);2*Math.PI-de<de&&(Ne<ht?Ne+=2*Math.PI:ht+=2*Math.PI),d.theta=Ne-ht,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=ce=>{ce.addEventListener("keydown",we),this._domElementKeyEvents=ce},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",we),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=o.NONE},this.update=(()=>{const ce=new ie,Ne=new ie(0,1,0),ht=new Ss().setFromUnitVectors(e.up,Ne),de=ht.clone().invert(),nt=new ie,fe=new Ss,Ze=2*Math.PI;return function(){const Oe=r.object.position;ht.setFromUnitVectors(e.up,Ne),de.copy(ht).invert(),ce.copy(Oe).sub(r.target),ce.applyQuaternion(ht),c.setFromVector3(ce),r.autoRotate&&l===o.NONE&&K(G()),r.enableDamping?(c.theta+=d.theta*r.dampingFactor,c.phi+=d.phi*r.dampingFactor):(c.theta+=d.theta,c.phi+=d.phi);let dt=r.minAzimuthAngle,vt=r.maxAzimuthAngle;isFinite(dt)&&isFinite(vt)&&(dt<-Math.PI?dt+=Ze:dt>Math.PI&&(dt-=Ze),vt<-Math.PI?vt+=Ze:vt>Math.PI&&(vt-=Ze),dt<=vt?c.theta=Math.max(dt,Math.min(vt,c.theta)):c.theta=c.theta>(dt+vt)/2?Math.max(dt,c.theta):Math.min(vt,c.theta)),c.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,c.phi)),c.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),r.zoomToCursor&&I||r.object.isOrthographicCamera?c.radius=$e(c.radius):c.radius=$e(c.radius*f),ce.setFromSpherical(c),ce.applyQuaternion(de),Oe.copy(r.target).add(ce),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(d.theta*=1-r.dampingFactor,d.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(d.set(0,0,0),m.set(0,0,0));let En=!1;if(r.zoomToCursor&&I){let xn=null;if(r.object instanceof Bi&&r.object.isPerspectiveCamera){const Xr=ce.length();xn=$e(Xr*f);const Zn=Xr-xn;r.object.position.addScaledVector(P,Zn),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Xr=new ie(N.x,N.y,0);Xr.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix(),En=!0;const Zn=new ie(N.x,N.y,0);Zn.unproject(r.object),r.object.position.sub(Zn).add(Xr),r.object.updateMatrixWorld(),xn=ce.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;xn!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(xn).add(r.object.position):(k2.origin.copy(r.object.position),k2.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(k2.direction))<zLe?e.lookAt(r.target):(ZV.setFromNormalAndCoplanarPoint(r.object.up,r.target),k2.intersectPlane(ZV,r.target))))}else r.object instanceof vf&&r.object.isOrthographicCamera&&(En=f!==1,En&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix()));return f=1,I=!1,En||nt.distanceToSquared(r.object.position)>u||8*(1-fe.dot(r.object.quaternion))>u?(r.dispatchEvent(i),nt.copy(r.object.position),fe.copy(r.object.quaternion),En=!1,!0):!1}})(),this.connect=ce=>{r.domElement=ce,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",St),r.domElement.addEventListener("pointerdown",Ye),r.domElement.addEventListener("pointercancel",X),r.domElement.addEventListener("wheel",He)},this.dispose=()=>{var ce,Ne,ht,de,nt,fe;r.domElement&&(r.domElement.style.touchAction="auto"),(ce=r.domElement)==null||ce.removeEventListener("contextmenu",St),(Ne=r.domElement)==null||Ne.removeEventListener("pointerdown",Ye),(ht=r.domElement)==null||ht.removeEventListener("pointercancel",X),(de=r.domElement)==null||de.removeEventListener("wheel",He),(nt=r.domElement)==null||nt.ownerDocument.removeEventListener("pointermove",Z),(fe=r.domElement)==null||fe.ownerDocument.removeEventListener("pointerup",X),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",we)};const r=this,i={type:"change"},a={type:"start"},s={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=o.NONE;const u=1e-6,c=new NR,d=new NR;let f=1;const m=new ie,v=new rt,_=new rt,w=new rt,x=new rt,S=new rt,E=new rt,T=new rt,D=new rt,F=new rt,P=new ie,N=new rt;let I=!1;const R=[],B={};function G(){return 2*Math.PI/60/60*r.autoRotateSpeed}function H(){return Math.pow(.95,r.zoomSpeed)}function K(ce){r.reverseOrbit||r.reverseHorizontalOrbit?d.theta+=ce:d.theta-=ce}function ne(ce){r.reverseOrbit||r.reverseVerticalOrbit?d.phi+=ce:d.phi-=ce}const re=(()=>{const ce=new ie;return function(ht,de){ce.setFromMatrixColumn(de,0),ce.multiplyScalar(-ht),m.add(ce)}})(),oe=(()=>{const ce=new ie;return function(ht,de){r.screenSpacePanning===!0?ce.setFromMatrixColumn(de,1):(ce.setFromMatrixColumn(de,0),ce.crossVectors(r.object.up,ce)),ce.multiplyScalar(ht),m.add(ce)}})(),$=(()=>{const ce=new ie;return function(ht,de){const nt=r.domElement;if(nt&&r.object instanceof Bi&&r.object.isPerspectiveCamera){const fe=r.object.position;ce.copy(fe).sub(r.target);let Ze=ce.length();Ze*=Math.tan(r.object.fov/2*Math.PI/180),re(2*ht*Ze/nt.clientHeight,r.object.matrix),oe(2*de*Ze/nt.clientHeight,r.object.matrix)}else nt&&r.object instanceof vf&&r.object.isOrthographicCamera?(re(ht*(r.object.right-r.object.left)/r.object.zoom/nt.clientWidth,r.object.matrix),oe(de*(r.object.top-r.object.bottom)/r.object.zoom/nt.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function ue(ce){r.object instanceof Bi&&r.object.isPerspectiveCamera||r.object instanceof vf&&r.object.isOrthographicCamera?f=ce:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function se(ce){ue(f/ce)}function pe(ce){ue(f*ce)}function Fe(ce){if(!r.zoomToCursor||!r.domElement)return;I=!0;const Ne=r.domElement.getBoundingClientRect(),ht=ce.clientX-Ne.left,de=ce.clientY-Ne.top,nt=Ne.width,fe=Ne.height;N.x=ht/nt*2-1,N.y=-(de/fe)*2+1,P.set(N.x,N.y,1).unproject(r.object).sub(r.object.position).normalize()}function $e(ce){return Math.max(r.minDistance,Math.min(r.maxDistance,ce))}function at(ce){v.set(ce.clientX,ce.clientY)}function me(ce){Fe(ce),T.set(ce.clientX,ce.clientY)}function Le(ce){x.set(ce.clientX,ce.clientY)}function Se(ce){_.set(ce.clientX,ce.clientY),w.subVectors(_,v).multiplyScalar(r.rotateSpeed);const Ne=r.domElement;Ne&&(K(2*Math.PI*w.x/Ne.clientHeight),ne(2*Math.PI*w.y/Ne.clientHeight)),v.copy(_),r.update()}function ge(ce){D.set(ce.clientX,ce.clientY),F.subVectors(D,T),F.y>0?se(H()):F.y<0&&pe(H()),T.copy(D),r.update()}function Ge(ce){S.set(ce.clientX,ce.clientY),E.subVectors(S,x).multiplyScalar(r.panSpeed),$(E.x,E.y),x.copy(S),r.update()}function Me(ce){Fe(ce),ce.deltaY<0?pe(H()):ce.deltaY>0&&se(H()),r.update()}function Ce(ce){let Ne=!1;switch(ce.code){case r.keys.UP:$(0,r.keyPanSpeed),Ne=!0;break;case r.keys.BOTTOM:$(0,-r.keyPanSpeed),Ne=!0;break;case r.keys.LEFT:$(r.keyPanSpeed,0),Ne=!0;break;case r.keys.RIGHT:$(-r.keyPanSpeed,0),Ne=!0;break}Ne&&(ce.preventDefault(),r.update())}function Te(){if(R.length==1)v.set(R[0].pageX,R[0].pageY);else{const ce=.5*(R[0].pageX+R[1].pageX),Ne=.5*(R[0].pageY+R[1].pageY);v.set(ce,Ne)}}function te(){if(R.length==1)x.set(R[0].pageX,R[0].pageY);else{const ce=.5*(R[0].pageX+R[1].pageX),Ne=.5*(R[0].pageY+R[1].pageY);x.set(ce,Ne)}}function Ee(){const ce=R[0].pageX-R[1].pageX,Ne=R[0].pageY-R[1].pageY,ht=Math.sqrt(ce*ce+Ne*Ne);T.set(0,ht)}function Pe(){r.enableZoom&&Ee(),r.enablePan&&te()}function Ke(){r.enableZoom&&Ee(),r.enableRotate&&Te()}function je(ce){if(R.length==1)_.set(ce.pageX,ce.pageY);else{const ht=Bt(ce),de=.5*(ce.pageX+ht.x),nt=.5*(ce.pageY+ht.y);_.set(de,nt)}w.subVectors(_,v).multiplyScalar(r.rotateSpeed);const Ne=r.domElement;Ne&&(K(2*Math.PI*w.x/Ne.clientHeight),ne(2*Math.PI*w.y/Ne.clientHeight)),v.copy(_)}function st(ce){if(R.length==1)S.set(ce.pageX,ce.pageY);else{const Ne=Bt(ce),ht=.5*(ce.pageX+Ne.x),de=.5*(ce.pageY+Ne.y);S.set(ht,de)}E.subVectors(S,x).multiplyScalar(r.panSpeed),$(E.x,E.y),x.copy(S)}function tt(ce){const Ne=Bt(ce),ht=ce.pageX-Ne.x,de=ce.pageY-Ne.y,nt=Math.sqrt(ht*ht+de*de);D.set(0,nt),F.set(0,Math.pow(D.y/T.y,r.zoomSpeed)),se(F.y),T.copy(D)}function ee(ce){r.enableZoom&&tt(ce),r.enablePan&&st(ce)}function qe(ce){r.enableZoom&&tt(ce),r.enableRotate&&je(ce)}function Ye(ce){var Ne,ht;r.enabled!==!1&&(R.length===0&&((Ne=r.domElement)==null||Ne.ownerDocument.addEventListener("pointermove",Z),(ht=r.domElement)==null||ht.ownerDocument.addEventListener("pointerup",X)),bt(ce),ce.pointerType==="touch"?pt(ce):ve(ce))}function Z(ce){r.enabled!==!1&&(ce.pointerType==="touch"?lt(ce):Ie(ce))}function X(ce){var Ne,ht,de;ut(ce),R.length===0&&((Ne=r.domElement)==null||Ne.releasePointerCapture(ce.pointerId),(ht=r.domElement)==null||ht.ownerDocument.removeEventListener("pointermove",Z),(de=r.domElement)==null||de.ownerDocument.removeEventListener("pointerup",X)),r.dispatchEvent(s),l=o.NONE}function ve(ce){let Ne;switch(ce.button){case 0:Ne=r.mouseButtons.LEFT;break;case 1:Ne=r.mouseButtons.MIDDLE;break;case 2:Ne=r.mouseButtons.RIGHT;break;default:Ne=-1}switch(Ne){case Op.DOLLY:if(r.enableZoom===!1)return;me(ce),l=o.DOLLY;break;case Op.ROTATE:if(ce.ctrlKey||ce.metaKey||ce.shiftKey){if(r.enablePan===!1)return;Le(ce),l=o.PAN}else{if(r.enableRotate===!1)return;at(ce),l=o.ROTATE}break;case Op.PAN:if(ce.ctrlKey||ce.metaKey||ce.shiftKey){if(r.enableRotate===!1)return;at(ce),l=o.ROTATE}else{if(r.enablePan===!1)return;Le(ce),l=o.PAN}break;default:l=o.NONE}l!==o.NONE&&r.dispatchEvent(a)}function Ie(ce){if(r.enabled!==!1)switch(l){case o.ROTATE:if(r.enableRotate===!1)return;Se(ce);break;case o.DOLLY:if(r.enableZoom===!1)return;ge(ce);break;case o.PAN:if(r.enablePan===!1)return;Ge(ce);break}}function He(ce){r.enabled===!1||r.enableZoom===!1||l!==o.NONE&&l!==o.ROTATE||(ce.preventDefault(),r.dispatchEvent(a),Me(ce),r.dispatchEvent(s))}function we(ce){r.enabled===!1||r.enablePan===!1||Ce(ce)}function pt(ce){switch(xt(ce),R.length){case 1:switch(r.touches.ONE){case Fp.ROTATE:if(r.enableRotate===!1)return;Te(),l=o.TOUCH_ROTATE;break;case Fp.PAN:if(r.enablePan===!1)return;te(),l=o.TOUCH_PAN;break;default:l=o.NONE}break;case 2:switch(r.touches.TWO){case Fp.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Pe(),l=o.TOUCH_DOLLY_PAN;break;case Fp.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ke(),l=o.TOUCH_DOLLY_ROTATE;break;default:l=o.NONE}break;default:l=o.NONE}l!==o.NONE&&r.dispatchEvent(a)}function lt(ce){switch(xt(ce),l){case o.TOUCH_ROTATE:if(r.enableRotate===!1)return;je(ce),r.update();break;case o.TOUCH_PAN:if(r.enablePan===!1)return;st(ce),r.update();break;case o.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ee(ce),r.update();break;case o.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;qe(ce),r.update();break;default:l=o.NONE}}function St(ce){r.enabled!==!1&&ce.preventDefault()}function bt(ce){R.push(ce)}function ut(ce){delete B[ce.pointerId];for(let Ne=0;Ne<R.length;Ne++)if(R[Ne].pointerId==ce.pointerId){R.splice(Ne,1);return}}function xt(ce){let Ne=B[ce.pointerId];Ne===void 0&&(Ne=new rt,B[ce.pointerId]=Ne),Ne.set(ce.pageX,ce.pageY)}function Bt(ce){const Ne=ce.pointerId===R[0].pointerId?R[1]:R[0];return B[Ne.pointerId]}this.dollyIn=(ce=H())=>{pe(ce),r.update()},this.dollyOut=(ce=H())=>{se(ce),r.update()},this.getScale=()=>f,this.setScale=ce=>{ue(ce),r.update()},this.getZoomScale=()=>H(),t!==void 0&&this.connect(t),this.update()}};const LI=n=>n===Object(n)&&!Array.isArray(n)&&typeof n!="function";function x4(n,e){const t=Jc(a=>a.gl),r=pw(Pk,LI(n)?Object.values(n):n);return M.useLayoutEffect(()=>{e==null||e(r)},[e]),M.useEffect(()=>{if("initTexture"in t){let a=[];Array.isArray(r)?a=r:r instanceof ui?a=[r]:LI(r)&&(a=Object.values(r)),a.forEach(s=>{s instanceof ui&&t.initTexture(s)})}},[t,r]),M.useMemo(()=>{if(LI(n)){const a={};let s=0;for(const o in n)a[o]=r[s++];return a}else return r},[n,r])}x4.preload=n=>pw.preload(Pk,n);x4.clear=n=>pw.clear(Pk,n);const GLe=M.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:a=!1,onChange:s,onStart:o,onEnd:l,...u},c)=>{const d=Jc(F=>F.invalidate),f=Jc(F=>F.camera),m=Jc(F=>F.gl),v=Jc(F=>F.events),_=Jc(F=>F.setEvents),w=Jc(F=>F.set),x=Jc(F=>F.get),S=Jc(F=>F.performance),E=e||f,T=r||v.connected||m.domElement,D=M.useMemo(()=>new HLe(E),[E]);return pLe(()=>{D.enabled&&D.update()},-1),M.useEffect(()=>(a&&D.connect(a===!0?T:a),D.connect(T),()=>void D.dispose()),[a,T,t,D,d]),M.useEffect(()=>{const F=I=>{d(),t&&S.regress(),s&&s(I)},P=I=>{o&&o(I)},N=I=>{l&&l(I)};return D.addEventListener("change",F),D.addEventListener("start",P),D.addEventListener("end",N),()=>{D.removeEventListener("start",P),D.removeEventListener("end",N),D.removeEventListener("change",F)}},[s,o,l,D,d,_]),M.useEffect(()=>{if(n){const F=x().controls;return w({controls:D}),()=>w({controls:F})}},[n,D]),M.createElement("primitive",BR({ref:c,object:D,enableDamping:i},u))});function WLe({frontUrl:n,backUrl:e}){const t=x4([n,e]);return h.jsxs("group",{children:[h.jsxs("mesh",{children:[h.jsx("boxGeometry",{args:[3.4,2.2,.06]}),h.jsx("meshStandardMaterial",{attach:"material-0",color:"#e5e7eb"}),h.jsx("meshStandardMaterial",{attach:"material-1",color:"#e5e7eb"}),h.jsx("meshStandardMaterial",{attach:"material-2",color:"#e5e7eb"}),h.jsx("meshStandardMaterial",{attach:"material-3",color:"#e5e7eb"}),h.jsx("meshStandardMaterial",{attach:"material-4",map:t[0]}),h.jsx("meshStandardMaterial",{attach:"material-5",map:t[1]})]}),h.jsxs("mesh",{position:[0,0,.031],children:[" ",h.jsx("planeGeometry",{args:[3.4,2.2]}),h.jsx("meshBasicMaterial",{map:t[0],transparent:!0})]}),h.jsxs("mesh",{position:[0,0,-.031],rotation:[0,Math.PI,0],children:[" ",h.jsx("planeGeometry",{args:[3.4,2.2]}),h.jsx("meshBasicMaterial",{map:t[1],transparent:!0})]})]})}function qLe({frontUrl:n,backUrl:e}){return h.jsx(M.Suspense,{fallback:null,children:h.jsx(WLe,{frontUrl:n,backUrl:e})})}function $Le(){const[n,e]=M.useState({frontUrl:"",backUrl:"",fullName:""}),[,t]=V_(),[r,i]=M.useState(!1);M.useEffect(()=>{const s=new URLSearchParams(window.location.search);return e({frontUrl:s.get("frontUrl")||"",backUrl:s.get("backUrl")||"",fullName:s.get("fullName")||""}),document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[]);const a=async()=>{i(!0);try{if(n.frontUrl){const o=await(await fetch(n.frontUrl)).blob(),l=window.URL.createObjectURL(o),u=document.createElement("a");u.href=l,u.download=`kartu-anggota-${n.fullName||"depan"}.png`,document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(l)}if(n.backUrl){const o=await(await fetch(n.backUrl)).blob(),l=window.URL.createObjectURL(o),u=document.createElement("a");u.href=l,u.download=`kartu-anggota-${n.fullName||"belakang"}-belakang.png`,document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(l)}}catch{alert("Gagal mengunduh kartu. Silakan coba lagi.")}i(!1)};return!n.frontUrl||!n.backUrl?h.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"URL kartu tidak valid."}):h.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:[h.jsxs("div",{className:"sticky top-0 flex flex-col sm:flex-row items-center justify-between gap-2 p-3 sm:p-4 bg-black/70 z-10 w-full",children:[h.jsxs("span",{className:"text-white font-bold text-base sm:text-lg text-center w-full sm:w-auto truncate",children:["3D Kartu Anggota: ",n.fullName]}),h.jsxs("div",{className:"flex gap-2 w-full sm:w-auto justify-center sm:justify-end",children:[h.jsxs(zt,{className:"bg-primary text-white w-full sm:w-auto",onClick:a,disabled:r,children:[h.jsx(KD,{className:"w-4 h-4 mr-2"}),r?"Mengunduh...":"Unduh Kartu Anggota Untuk Print"]}),h.jsx("button",{className:"text-white bg-gray-800 hover:bg-gray-700 rounded px-4 py-2 w-full sm:w-auto",onClick:()=>t("/kartu-anggota"),children:"Tutup"})]})]}),h.jsx("div",{className:"flex-1 min-h-0",children:h.jsx("div",{className:"w-full h-[60vh] sm:h-full",children:h.jsxs(LLe,{camera:{position:[0,0,6],fov:50},style:{width:"100vw",height:"100%",minHeight:320,maxHeight:"100vh",background:"black"},children:[h.jsx("ambientLight",{intensity:.7}),h.jsx("directionalLight",{position:[5,5,5],intensity:.7}),h.jsx(qLe,{frontUrl:n.frontUrl,backUrl:n.backUrl}),h.jsx(GLe,{enablePan:!1})]})})})]})}function XLe(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function KLe(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var YLe=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ZLe=function(n){YLe(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),XLe(a,i.prototype),KLe(a),a}return e}(Error),QLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Po=function(n){QLe(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(ZLe),JLe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Oi=function(n){JLe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Po),eOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rn=function(n){eOe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Po),kte=function(){function n(e){if(this.binarizer=e,e===null)throw new rn("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),tOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ki=function(n){tOe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Po),nOe=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),qr=function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),rOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_4=function(n){rOe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Po),iOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),JV=function(n){iOe(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(_4),aOe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ca=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new rn("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new JV(t);if(r>e)throw new JV(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=aOe(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=31*i+o}}catch(l){t={error:l}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return qr.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var s=a+i>>1,o=r(t,e[s]);if(o>0)i=s+1;else if(o<0)a=s-1;else return s}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),Hn=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Ta=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);qr.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=r[i]}var o=i*32+Hn.numberOfTrailingZeros(a);return o>t?t:o},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=~r[i]}var o=i*32+Hn.numberOfTrailingZeros(a);return o>t?t:o},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new rn;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,s=r;s<=i;s++){var o=s>r?0:e&31,l=s<i?31:t&31,u=(2<<l)-(1<<o);a[s]|=u}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new rn;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),s=this.bits,o=i;o<=a;o++){var l=o>i?0:e&31,u=o<a?31:t&31,c=(2<<u)-(1<<l)&4294967295;if((s[o]&c)!==(r?c:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new rn("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new rn("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var s=0,o=0;o<8;o++)this.get(e)&&(s|=1<<7-o),e++;t[r+a]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var s=i[a];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-a]=s}if(this.size!==r*32){for(var o=r*32-this.size,l=e[0]>>>o,a=1;a<r;a++){var u=e[a];l|=u<<32-o,e[a-1]=l,l=u>>>o}e[r-1]=l}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&ca.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+ca.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)t&7||(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),UR;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(UR||(UR={}));const $r=UR;var sOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_t=function(n){sOe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Po),oOe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tr;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(Tr||(Tr={}));var ua=function(){function n(e,t,r){for(var i,a,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var l=this.values,u=0,c=l.length;u!==c;u++){var d=l[u];n.VALUES_TO_ECI.set(d,this)}try{for(var f=oOe(s),m=f.next();!m.done;m=f.next()){var v=m.value;n.NAME_TO_ECI.set(v,this)}}catch(_){i={error:_}}finally{try{m&&!m.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new _t("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new _t("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new _t("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(Tr.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(Tr.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(Tr.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(Tr.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(Tr.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(Tr.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(Tr.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(Tr.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(Tr.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(Tr.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(Tr.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(Tr.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(Tr.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(Tr.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(Tr.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(Tr.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(Tr.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(Tr.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(Tr.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(Tr.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(Tr.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(Tr.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(Tr.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(Tr.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(Tr.Big5,28,"Big5"),n.GB18030=new n(Tr.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(Tr.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),lOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pS=function(n){lOe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Po),kl=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof ua?e:ua.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,s=e.length;a<s;a++){var o=e[a].toString(16);o.length<2&&(o="0"+o),i+="%"+o}return decodeURIComponent(i)}if(r.equals(ua.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new pS("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(ua.UTF8)||e.equals(ua.ISO8859_1)||e.equals(ua.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n}(),nr=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return kl.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get($r.CHARACTER_SET)!==void 0)return t.get($r.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,s=!0,o=0,l=0,u=0,c=0,d=0,f=0,m=0,v=0,_=0,w=0,x=0,S=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,E=0;E<r&&(i||a||s);E++){var T=e[E]&255;s&&(o>0?T&128?o--:s=!1:T&128&&(T&64?(o++,T&32?(o++,T&16?(o++,T&8?s=!1:c++):u++):l++):s=!1)),i&&(T>127&&T<160?i=!1:T>159&&(T<192||T===215||T===247)&&x++),a&&(d>0?T<64||T===127||T>252?a=!1:d--:T===128||T===160||T>239?a=!1:T>160&&T<224?(f++,v=0,m++,m>_&&(_=m)):T>127?(d++,m=0,v++,v>w&&(w=v)):(m=0,v=0))}return s&&o>0&&(s=!1),a&&d>0&&(a=!1),s&&(S||l+u+c>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||_>=3||w>=3)?n.SHIFT_JIS:i&&a?_===2&&f===2||x*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(o,l,u,c,d,f){if(o==="%%")return"%";if(t[++i]!==void 0){o=c?parseInt(c.substr(1)):void 0;var m=d?parseInt(d.substr(1)):void 0,v;switch(f){case"s":v=t[i];break;case"c":v=t[i][0];break;case"f":v=parseFloat(t[i]).toFixed(o);break;case"p":v=parseFloat(t[i]).toPrecision(o);break;case"e":v=parseFloat(t[i]).toExponential(o);break;case"x":v=parseInt(t[i]).toString(m||16);break;case"d":v=parseFloat(parseInt(t[i],m||10).toPrecision(o)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(m);for(var _=parseInt(u),w=u&&u[0]+""=="0"?"0":" ";v.length<_;)v=l!==void 0?v+w:w+v;return v}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},n.getBytes=function(e,t){return kl.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=ua.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=ua.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=ua.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),Bn=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=nr.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),Sc=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new rn("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var s=e[a],o=0;o<r;o++)s[o]&&i.set(o,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new rn("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,s=0,o=-1,l=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new rn("row lengths do not match");s=a,l++}u++}else if(e.substring(u,u+t.length)===t)u+=t.length,i[a]=!0,a++;else if(e.substring(u,u+r.length)===r)u+=r.length,i[a]=!1,a++;else throw new rn("illegal character encountered: "+e.substring(u));if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new rn("row lengths do not match");l++}for(var c=new n(o,l),d=0;d<a;d++)i[d]&&c.set(Math.floor(d%o),Math.floor(d/o));return c},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new rn("input matrix dimensions do not match");for(var t=new Ta(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,s=this.height;a<s;a++)for(var o=a*r,l=e.getRow(a,t).getBitArray(),u=0;u<r;u++)i[o+u]^=l[u]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new rn("Left and top must be nonnegative");if(i<1||r<1)throw new rn("Height and width must be at least 1");var a=e+r,s=t+i;if(s>this.height||a>this.width)throw new rn("The region must fit inside the matrix");for(var o=this.rowSize,l=this.bits,u=t;u<s;u++)for(var c=u*o,d=e;d<a;d++)l[c+Math.floor(d/32)]|=1<<(d&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Ta(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,s=0;s<r;s++)t.setBulk(s*32,i[a+s]);return t},n.prototype.setRow=function(e,t){qr.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new Ta(e),i=new Ta(e),a=0,s=Math.floor((t+1)/2);a<s;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,s=t,o=-1,l=-1,u=0;u<t;u++)for(var c=0;c<r;c++){var d=i[u*r+c];if(d!==0){if(u<s&&(s=u),u>l&&(l=u),c*32<a){for(var f=0;!(d<<31-f&4294967295);)f++;c*32+f<a&&(a=c*32+f)}if(c*32+31>o){for(var f=31;!(d>>>f);)f--;c*32+f>o&&(o=c*32+f)}}}return o<a||l<s?null:Int32Array.from([a,s,o-a+1,l-s+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,s=t[r],o=0;!(s<<31-o&4294967295);)o++;return a+=o,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,s=t[r],o=31;!(s>>>o);)o--;return a+=o,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&ca.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ca.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new Bn,a=0,s=this.height;a<s;a++){for(var o=0,l=this.width;o<l;o++)i.append(this.get(o,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),uOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),et=function(n){uOe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Po),cOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dOe=function(n){cOe(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new Ta(a):r.clear(),this.initArrays(a);for(var s=i.getRow(t,this.luminances),o=this.buckets,l=0;l<a;l++)o[(s[l]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(o);if(a<3)for(var l=0;l<a;l++)(s[l]&255)<u&&r.set(l);else for(var c=s[0]&255,d=s[1]&255,l=1;l<a-1;l++){var f=s[l+1]&255;(d*4-c-f)/2<u&&r.set(l),c=d,d=f}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new Sc(r,i);this.initArrays(r);for(var s=this.buckets,o=1;o<5;o++)for(var l=Math.floor(i*o/5),u=t.getRow(l,this.luminances),c=Math.floor(r*4/5),d=Math.floor(r/5);d<c;d++){var f=u[d]&255;s[f>>e.LUMINANCE_SHIFT]++}for(var m=e.estimateBlackPoint(s),v=t.getMatrix(),o=0;o<i;o++)for(var _=o*r,d=0;d<r;d++){var f=v[_+d]&255;f<m&&a.set(d,o)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,s=0,o=0;o<r;o++)t[o]>s&&(a=o,s=t[o]),t[o]>i&&(i=t[o]);for(var l=0,u=0,o=0;o<r;o++){var c=o-a,d=t[o]*c*c;d>u&&(l=o,u=d)}if(a>l){var f=a;a=l,l=f}if(l-a<=r/16)throw new et;for(var m=l-1,v=-1,o=l-1;o>a;o--){var _=o-a,d=_*_*(l-o)*(i-t[o]);d>v&&(m=o,v=d)}return m<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(nOe),hOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cte=function(n){hOe(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;r&e.BLOCK_SIZE_MASK&&s++;var o=i>>e.BLOCK_SIZE_POWER;i&e.BLOCK_SIZE_MASK&&o++;var l=e.calculateBlackPoints(a,s,o,r,i),u=new Sc(r,i);e.calculateThresholdForBlock(a,s,o,r,i,l,u),this.matrix=u}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,s,o,l){for(var u=s-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,d=0;d<i;d++){var f=d<<e.BLOCK_SIZE_POWER;f>u&&(f=u);for(var m=e.cap(d,2,i-3),v=0;v<r;v++){var _=v<<e.BLOCK_SIZE_POWER;_>c&&(_=c);for(var w=e.cap(v,2,r-3),x=0,S=-2;S<=2;S++){var E=o[m+S];x+=E[w-2]+E[w-1]+E[w]+E[w+1]+E[w+2]}var T=x/25;e.thresholdBlock(t,_,f,T,a,l)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,s,o){for(var l=0,u=i*s+r;l<e.BLOCK_SIZE;l++,u+=s)for(var c=0;c<e.BLOCK_SIZE;c++)(t[u+c]&255)<=a&&o.set(r+c,i+l)},e.calculateBlackPoints=function(t,r,i,a,s){for(var o=s-e.BLOCK_SIZE,l=a-e.BLOCK_SIZE,u=new Array(i),c=0;c<i;c++){u[c]=new Int32Array(r);var d=c<<e.BLOCK_SIZE_POWER;d>o&&(d=o);for(var f=0;f<r;f++){var m=f<<e.BLOCK_SIZE_POWER;m>l&&(m=l);for(var v=0,_=255,w=0,x=0,S=d*a+m;x<e.BLOCK_SIZE;x++,S+=a){for(var E=0;E<e.BLOCK_SIZE;E++){var T=t[S+E]&255;v+=T,T<_&&(_=T),T>w&&(w=T)}if(w-_>e.MIN_DYNAMIC_RANGE)for(x++,S+=a;x<e.BLOCK_SIZE;x++,S+=a)for(var E=0;E<e.BLOCK_SIZE;E++)v+=t[S+E]&255}var D=v>>e.BLOCK_SIZE_POWER*2;if(w-_<=e.MIN_DYNAMIC_RANGE&&(D=_/2,c>0&&f>0)){var F=(u[c-1][f]+2*u[c][f-1]+u[c-1][f-1])/4;_<F&&(D=F)}u[c][f]=D}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(dOe),mw=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new pS("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new pS("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new pS("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Bn,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var s=i[a]&255,o=void 0;s<64?o="#":s<128?o="+":s<192?o=".":o=" ",t.append(o)}t.append(`
`)}return t.toString()},n}(),fOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Dk=function(n){fOe(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),s=0;s<a;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(mw),pOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mOe=function(n){pOe(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var o=0,l=0,u=t.length;o<u;o+=4,l++){var c=void 0,d=t[o+3];if(d===0)c=255;else{var f=t[o],m=t[o+1],v=t[o+2];c=306*f+601*m+117*v+512>>10}s[l]=c}else for(var o=0,l=0,_=t.length;o<_;o+=4,l++){var c=void 0,d=t[o+3];if(d===0)c=255;else{var f=t[o],m=t[o+1],v=t[o+2];c=306*f+601*m+117*v+512>>10}s[l]=255-c}return s},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new rn("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,o=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*o),u=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*o);return r.width=l,r.height=u,i.translate(l/2,u/2),i.rotate(a),i.drawImage(this.canvas,s/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new Dk(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(mw),gOe=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),Us=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{u(r.next(c))}catch(d){s(d)}}function l(c){try{u(r.throw(c))}catch(d){s(d)}}function u(c){c.done?a(c.value):i(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})},Vs=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},vOe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gy=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Us(this,void 0,void 0,function(){var e,t,r,i,a,s,o,l,u,c,d,f;return Vs(this,function(m){switch(m.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=m.sent(),t=[];try{for(r=vOe(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(o=a.deviceId||a.id,l=a.label||"Video device "+(t.length+1),u=a.groupId,c={deviceId:o,label:l,kind:s,groupId:u},t.push(c))}catch(v){d={error:v}}finally{try{i&&!i.done&&(f=r.return)&&f.call(r)}finally{if(d)throw d.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Us(this,void 0,void 0,function(){var e;return Vs(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new gOe(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Us(this,void 0,void 0,function(){var t;return Vs(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Us(this,void 0,void 0,function(){return Vs(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Us(this,void 0,void 0,function(){var r,i;return Vs(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Us(this,void 0,void 0,function(){var r;return Vs(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Us(this,void 0,void 0,function(){var r,i;return Vs(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Us(this,void 0,void 0,function(){return Vs(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Us(this,void 0,void 0,function(){var i,a;return Vs(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Us(this,void 0,void 0,function(){var i;return Vs(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Us(this,void 0,void 0,function(){var i;return Vs(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Us(this,void 0,void 0,function(){var r;return Vs(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Us(this,void 0,void 0,function(){return Vs(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new Oi("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new Oi("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new Oi("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new Oi("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new Oi("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new Oi("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Oi("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new Oi("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Oi("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new Oi("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Us(this,void 0,void 0,function(){return Vs(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Us(this,void 0,void 0,function(){return Vs(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(s,o){if(i._stopAsyncDecode){o(new et("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var l=i.decode(e);s(l)}catch(f){var u=t&&f instanceof et,c=f instanceof Ki||f instanceof _t,d=c&&r;if(u||d)return setTimeout(a,i._timeBetweenDecodingAttempts,s,o);o(f)}};return new Promise(function(s,o){return a(s,o)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(l){t(null,l);var s=l instanceof Ki||l instanceof _t,o=l instanceof et;(s||o)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new mOe(r,t),a=new Cte(i);return new kte(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}(),Cs=function(){function n(e,t,r,i,a,s){r===void 0&&(r=t==null?0:8*t.length),s===void 0&&(s=qr.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,s==null?this.timestamp=qr.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);qr.arraycopy(t,0,r,0,t.length),qr.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),VR;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(VR||(VR={}));const nn=VR;var zR;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(zR||(zR={}));const za=zR;var Lk=function(){function n(e,t,r,i,a,s){a===void 0&&(a=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),Nx=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new rn;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),yf=function(){function n(e,t){if(t.length===0)throw new rn;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),qr.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var s=t[i];r=Nx.addOrSubtract(r,s)}return r}r=t[0];for(var o=t.length,l=this.field,i=1;i<o;i++)r=Nx.addOrSubtract(l.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new rn("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;qr.arraycopy(r,0,a,0,s);for(var o=s;o<r.length;o++)a[o]=Nx.addOrSubtract(t[o-s],r[o]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new rn("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),o=this.field,l=0;l<r;l++)for(var u=t[l],c=0;c<a;c++)s[l+c]=Nx.addOrSubtract(s[l+c],o.multiply(u,i[c]));return new n(o,s)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,s=0;s<t;s++)i[s]=r.multiply(a[s],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new rn;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),s=this.field,o=0;o<i;o++)a[o]=s.multiply(r[o],t);return new n(s,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new rn("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new rn("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),s=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var o=i.getDegree()-e.getDegree(),l=t.multiply(i.getCoefficient(i.getDegree()),s),u=e.multiplyByMonomial(o,l),c=t.buildMonomial(o,l);r=r.addOrSubtract(c),i=i.addOrSubtract(u)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),yOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Mte=function(n){yOe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Po),xOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bo=function(n){xOe(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var s=new Int32Array(r),o=1,l=0;l<r;l++)s[l]=o,o*=2,o>=r&&(o^=t,o&=r-1);a.expTable=s;for(var u=new Int32Array(r),l=0;l<r-1;l++)u[s[l]]=l;return a.logTable=u,a.zero=new yf(a,Int32Array.from([0])),a.one=new yf(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new rn;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new yf(this,i)},e.prototype.inverse=function(t){if(t===0)throw new Mte;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Hn.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Nx),_Oe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),C2=function(n){_Oe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Po),wOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gw=function(n){wOe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Po),Ok=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new yf(r,e),a=new Int32Array(t),s=!0,o=0;o<t;o++){var l=i.evaluateAt(r.exp(o+r.getGeneratorBase()));a[a.length-1-o]=l,l!==0&&(s=!1)}if(!s)for(var u=new yf(r,a),c=this.runEuclideanAlgorithm(r.buildMonomial(t,1),u,t),d=c[0],f=c[1],m=this.findErrorLocations(d),v=this.findErrorMagnitudes(f,m),o=0;o<m.length;o++){var _=e.length-1-r.log(m[o]);if(_<0)throw new C2("Bad error location");e[_]=bo.addOrSubtract(e[_],v[o])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,s=e,o=t,l=a.getZero(),u=a.getOne();o.getDegree()>=(r/2|0);){var c=s,d=l;if(s=o,l=u,s.isZero())throw new C2("r_{i-1} was zero");o=c;for(var f=a.getZero(),m=s.getCoefficient(s.getDegree()),v=a.inverse(m);o.getDegree()>=s.getDegree()&&!o.isZero();){var _=o.getDegree()-s.getDegree(),w=a.multiply(o.getCoefficient(o.getDegree()),v);f=f.addOrSubtract(a.buildMonomial(_,w)),o=o.addOrSubtract(s.multiplyByMonomial(_,w))}if(u=f.multiply(l).addOrSubtract(d),o.getDegree()>=s.getDegree())throw new gw("Division algorithm failed to reduce polynomial?")}var x=u.getCoefficient(0);if(x===0)throw new C2("sigmaTilde(0) was zero");var S=a.inverse(x),E=u.multiplyScalar(S),T=o.multiplyScalar(S);return[E,T]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,s=1;s<a.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=a.inverse(s),i++);if(i!==t)throw new C2("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,s=0;s<r;s++){for(var o=a.inverse(t[s]),l=1,u=0;u<r;u++)if(s!==u){var c=a.multiply(t[u],o),d=c&1?c&-2:c|1;l=a.multiply(l,d)}i[s]=a.multiply(e.evaluateAt(o),a.inverse(l)),a.getGeneratorBase()!==0&&(i[s]=a.multiply(i[s],o))}return i},n}(),Oa;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(Oa||(Oa={}));var e7=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),o=new Lk(a,s,null,null);return o.setNumBits(i.length),o},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=Oa.UPPER,i=Oa.UPPER,a="",s=0;s<t;)if(i===Oa.BINARY){if(t-s<5)break;var o=n.readCode(e,s,5);if(s+=5,o===0){if(t-s<11)break;o=n.readCode(e,s,11)+31,s+=11}for(var l=0;l<o;l++){if(t-s<8){s=t;break}var u=n.readCode(e,s,8);a+=nr.castAsNonUtf8Char(u),s+=8}i=r}else{var c=i===Oa.DIGIT?4:5;if(t-s<c)break;var u=n.readCode(e,s,c);s+=c;var d=n.getCharacter(i,u);d.startsWith("CTRL_")?(r=i,i=n.getTable(d.charAt(5)),d.charAt(6)==="L"&&(r=i)):(a+=d,i=r)}return a},n.getTable=function(e){switch(e){case"L":return Oa.LOWER;case"P":return Oa.PUNCT;case"M":return Oa.MIXED;case"D":return Oa.DIGIT;case"B":return Oa.BINARY;case"U":default:return Oa.UPPER}},n.getCharacter=function(e,t){switch(e){case Oa.UPPER:return n.UPPER_TABLE[t];case Oa.LOWER:return n.LOWER_TABLE[t];case Oa.MIXED:return n.MIXED_TABLE[t];case Oa.PUNCT:return n.PUNCT_TABLE[t];case Oa.DIGIT:return n.DIGIT_TABLE[t];default:throw new gw("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=bo.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=bo.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=bo.AZTEC_DATA_10):(r=12,t=bo.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new _t;for(var s=e.length%r,o=new Int32Array(a),l=0;l<a;l++,s+=r)o[l]=n.readCode(e,s,r);try{var u=new Ok(t);u.decode(o,a-i)}catch(w){throw new _t(w)}for(var c=(1<<r)-1,d=0,l=0;l<i;l++){var f=o[l];if(f===0||f===c)throw new _t;(f===1||f===c-1)&&d++}for(var m=new Array(i*r-d),v=0,l=0;l<i;l++){var f=o[l];if(f===1||f===c-1)m.fill(f>1,v,v+r-1),v+=r-1;else for(var _=r-1;_>=0;--_)m[v++]=(f&1<<_)!==0}return m},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,t));if(t)for(var o=0;o<a.length;o++)a[o]=o;else for(var l=i+1+2*Hn.truncDivision(Hn.truncDivision(i,2)-1,15),u=i/2,c=Hn.truncDivision(l,2),o=0;o<u;o++){var d=o+Hn.truncDivision(o,15);a[u-o-1]=c-d-1,a[u+o]=c+d+1}for(var o=0,f=0;o<r;o++){for(var m=(r-o)*4+(t?9:12),v=o*2,_=i-1-v,w=0;w<m;w++)for(var x=w*2,S=0;S<2;S++)s[f+x+S]=e.get(a[v+S],a[v+w]),s[f+2*m+x+S]=e.get(a[v+w],a[_-S]),s[f+4*m+x+S]=e.get(a[_-S],a[_-w]),s[f+6*m+x+S]=e.get(a[_-w],a[v+S]);f+=m*8}return s},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),fr=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,s=t-i;return Math.sqrt(a*a+s*s)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n}(),HR=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),Kt=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*HR.floatToIntBits(this.x)+HR.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,s,o;if(r>=t&&r>=i?(s=e[0],a=e[1],o=e[2]):i>=r&&i>=t?(s=e[1],a=e[0],o=e[2]):(s=e[2],a=e[0],o=e[1]),this.crossProductZ(a,s,o)<0){var l=a;a=o,o=l}e[0]=a,e[1]=s,e[2]=o},n.distance=function(e,t){return fr.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n}(),w4=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),bOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),SOe=function(n){bOe(e,n);function e(t,r,i,a,s){var o=n.call(this,t,r)||this;return o.compact=i,o.nbDatablocks=a,o.nbLayers=s,o}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(w4),GR=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new et}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,s=!0,o=!1,l=!1,u=!1,c=!1,d=!1,f=this.width,m=this.height;s;){s=!1;for(var v=!0;(v||!l)&&t<f;)v=this.containsBlackPoint(r,i,t,!1),v?(t++,s=!0,l=!0):l||t++;if(t>=f){a=!0;break}for(var _=!0;(_||!u)&&i<m;)_=this.containsBlackPoint(e,t,i,!0),_?(i++,s=!0,u=!0):u||i++;if(i>=m){a=!0;break}for(var w=!0;(w||!c)&&e>=0;)w=this.containsBlackPoint(r,i,e,!1),w?(e--,s=!0,c=!0):c||e--;if(e<0){a=!0;break}for(var x=!0;(x||!d)&&r>=0;)x=this.containsBlackPoint(e,t,r,!0),x?(r--,s=!0,d=!0):d||r--;if(r<0){a=!0;break}s&&(o=!0)}if(!a&&o){for(var S=t-e,E=null,T=1;E===null&&T<S;T++)E=this.getBlackPointOnSegment(e,i-T,e+T,i);if(E==null)throw new et;for(var D=null,T=1;D===null&&T<S;T++)D=this.getBlackPointOnSegment(e,r+T,e+T,r);if(D==null)throw new et;for(var F=null,T=1;F===null&&T<S;T++)F=this.getBlackPointOnSegment(t,r+T,t-T,r);if(F==null)throw new et;for(var P=null,T=1;P===null&&T<S;T++)P=this.getBlackPointOnSegment(t,i-T,t-T,i);if(P==null)throw new et;return this.centerEdges(P,E,F,D)}else throw new et},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=fr.round(fr.distance(e,t,r,i)),s=(r-e)/a,o=(i-t)/a,l=this.image,u=0;u<a;u++){var c=fr.round(e+u*s),d=fr.round(t+u*o);if(l.get(c,d))return new Kt(c,d)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),s=e.getY(),o=t.getX(),l=t.getY(),u=r.getX(),c=r.getY(),d=i.getX(),f=i.getY(),m=n.CORR;return a<this.width/2?[new Kt(d-m,f+m),new Kt(o+m,l+m),new Kt(u-m,c-m),new Kt(a+m,s-m)]:[new Kt(d+m,f+m),new Kt(o+m,l-m),new Kt(u-m,c+m),new Kt(a-m,s-m)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var s=e;s<=t;s++)if(a.get(s,r))return!0}else for(var o=e;o<=t;o++)if(a.get(r,o))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),t7=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,s=0;s<t.length&&a;s+=2){var o=Math.floor(t[s]),l=Math.floor(t[s+1]);if(o<-1||o>r||l<-1||l>i)throw new et;a=!1,o===-1?(t[s]=0,a=!0):o===r&&(t[s]=r-1,a=!0),l===-1?(t[s+1]=0,a=!0):l===i&&(t[s+1]=i-1,a=!0)}a=!0;for(var s=t.length-2;s>=0&&a;s-=2){var o=Math.floor(t[s]),l=Math.floor(t[s+1]);if(o<-1||o>r||l<-1||l>i)throw new et;a=!1,o===-1?(t[s]=0,a=!0):o===r&&(t[s]=r-1,a=!0),l===-1?(t[s+1]=0,a=!0):l===i&&(t[s+1]=i-1,a=!0)}},n}(),Ite=function(){function n(e,t,r,i,a,s,o,l,u){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=s,this.a13=o,this.a23=l,this.a33=u}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,s,o,l,u,c,d,f,m,v,_,w){var x=n.quadrilateralToSquare(e,t,r,i,a,s,o,l),S=n.squareToQuadrilateral(u,c,d,f,m,v,_,w);return S.times(x)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,l=this.a23,u=this.a31,c=this.a32,d=this.a33,f=0;f<t;f+=2){var m=e[f],v=e[f+1],_=a*m+l*v+d;e[f]=(r*m+s*v+u)/_,e[f+1]=(i*m+o*v+c)/_}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,l=this.a23,u=this.a31,c=this.a32,d=this.a33,f=e.length,m=0;m<f;m++){var v=e[m],_=t[m],w=a*v+l*_+d;e[m]=(r*v+s*_+u)/w,t[m]=(i*v+o*_+c)/w}},n.squareToQuadrilateral=function(e,t,r,i,a,s,o,l){var u=e-r+a-o,c=t-i+s-l;if(u===0&&c===0)return new n(r-e,a-r,e,i-t,s-i,t,0,0,1);var d=r-a,f=o-a,m=i-s,v=l-s,_=d*v-f*m,w=(u*v-f*c)/_,x=(d*c-u*m)/_;return new n(r-e+w*r,o-e+x*o,e,i-t+w*i,l-t+x*l,t,w,x,1)},n.quadrilateralToSquare=function(e,t,r,i,a,s,o,l){return n.squareToQuadrilateral(e,t,r,i,a,s,o,l).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),EOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),AOe=function(n){EOe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,s,o,l,u,c,d,f,m,v,_,w,x,S,E,T){var D=Ite.quadrilateralToQuadrilateral(a,s,o,l,u,c,d,f,m,v,_,w,x,S,E,T);return this.sampleGridWithTransform(t,r,i,D)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new et;for(var s=new Sc(r,i),o=new Float32Array(2*r),l=0;l<i;l++){for(var u=o.length,c=l+.5,d=0;d<u;d+=2)o[d]=d/2+.5,o[d+1]=c;a.transformPoints(o),t7.checkAndNudgePoints(t,o);try{for(var d=0;d<u;d+=2)t.get(Math.floor(o[d]),Math.floor(o[d+1]))&&s.set(d/2,l)}catch{throw new et}}return s},e}(t7),b4=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new AOe,n}(),po=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Kt(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),TOe=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new SOe(a,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new et;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var s=r[(this.shift+a)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var o=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,s,o){var l=(a>>t-2<<1)+(a&1);r=(r<<3)+l}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Hn.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new et},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,s=new Int32Array(r),o=r-1;o>=0;--o)s[o]=e&15,e>>=4;try{var l=new Ok(bo.AZTEC_PARAM);l.decode(s,a)}catch{throw new et}for(var u=0,o=0;o<i;o++)u=(u<<4)+s[o];return u},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var o=this.getFirstDifferent(t,s,1,-1),l=this.getFirstDifferent(r,s,1,1),u=this.getFirstDifferent(i,s,-1,1),c=this.getFirstDifferent(a,s,-1,-1);if(this.nbCenterLayers>2){var d=this.distancePoint(c,o)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(d<.75||d>1.25||!this.isWhiteOrBlackRectangle(o,l,u,c))break}t=o,r=l,i=u,a=c,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new et;this.compact=this.nbCenterLayers===5;var f=new Kt(t.getX()+.5,t.getY()-.5),m=new Kt(r.getX()+.5,r.getY()+.5),v=new Kt(i.getX()-.5,i.getY()+.5),_=new Kt(a.getX()-.5,a.getY()-.5);return this.expandSquare([f,m,v,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new GR(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var s=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new po(s+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new po(s+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new po(s-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new po(s-7,o-7),!1,-1,-1).toResultPoint()}var l=fr.round((e.getX()+i.getX()+t.getX()+r.getX())/4),u=fr.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new GR(this.image,15,l,u).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new po(l+7,u-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new po(l+7,u+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new po(l-7,u+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new po(l-7,u-7),!1,-1,-1).toResultPoint()}return l=fr.round((e.getX()+i.getX()+t.getX()+r.getX())/4),u=fr.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new po(l,u)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var s=b4.getInstance(),o=this.getDimension(),l=o/2-this.nbCenterLayers,u=o/2+this.nbCenterLayers;return s.sampleGrid(e,o,o,l,l,u,l,u,u,l,u,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),s=a/r,o=e.getX(),l=e.getY(),u=s*(t.getX()-e.getX())/a,c=s*(t.getY()-e.getY())/a,d=0;d<r;d++)this.image.get(fr.round(o+d*u),fr.round(l+d*c))&&(i|=1<<r-d-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new po(e.getX()-a,e.getY()+a),t=new po(t.getX()-a,t.getY()-a),r=new po(r.getX()+a,r.getY()-a),i=new po(i.getX()+a,i.getY()+a);var s=this.getColor(i,e);if(s===0)return!1;var o=this.getColor(e,t);return o!==s||(o=this.getColor(t,r),o!==s)?!1:(o=this.getColor(r,i),o===s)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,s=0,o=e.getX(),l=e.getY(),u=this.image.get(e.getX(),e.getY()),c=Math.ceil(r),d=0;d<c;d++)o+=i,l+=a,this.image.get(fr.round(o),fr.round(l))!==u&&s++;var f=s/r;return f>.1&&f<.9?0:f<=.1===u?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,s=e.getY()+i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r,s+=i;for(a-=r,s-=i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r;for(a-=r;this.isValid(a,s)&&this.image.get(a,s)===t;)s+=i;return s-=i,new po(a,s)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,u=new Kt(o+i*a,l+i*s),c=new Kt(o-i*a,l-i*s);a=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var d=new Kt(o+i*a,l+i*s),f=new Kt(o-i*a,l-i*s),m=[u,d,c,f];return m},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=fr.round(e.getX()),r=fr.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return fr.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return fr.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Hn.truncDivision(this.nbLayers-4,8)+1)+15},n}(),xA=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new TOe(e.getBlackMatrix()),a=null,s=null;try{var o=i.detectMirror(!1);a=o.getPoints(),this.reportFoundResultPoints(t,a),s=new e7().decode(o)}catch(d){r=d}if(s==null)try{var o=i.detectMirror(!0);a=o.getPoints(),this.reportFoundResultPoints(t,a),s=new e7().decode(o)}catch(d){throw r??d}var l=new Cs(s.getText(),s.getRawBytes(),s.getNumBits(),a,nn.AZTEC,qr.currentTimeMillis()),u=s.getByteSegments();u!=null&&l.putMetadata(za.BYTE_SEGMENTS,u);var c=s.getECLevel();return c!=null&&l.putMetadata(za.ERROR_CORRECTION_LEVEL,c),l},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get($r.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),kOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){kOe(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new xA,t)||this}return e})(gy);var fa=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get($r.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),s=a.getResultMetadata(),o=270;s!==null&&s.get(za.ORIENTATION)===!0&&(o=o+s.get(za.ORIENTATION)%360),a.putMetadata(za.ORIENTATION,o);var l=a.getResultPoints();if(l!==null)for(var u=i.getHeight(),c=0;c<l.length;c++)l[c]=new Kt(u-l[c].getY()-1,l[c].getX());return a}else throw new et}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new Ta(r),s=t&&t.get($r.TRY_HARDER)===!0,o=Math.max(1,i>>(s?8:5)),l;s?l=i:l=15;for(var u=Math.trunc(i/2),c=0;c<l;c++){var d=Math.trunc((c+1)/2),f=(c&1)===0,m=u+o*(f?d:-d);if(m<0||m>=i)break;try{a=e.getBlackRow(m,a)}catch{continue}for(var v=function(S){if(S===1&&(a.reverse(),t&&t.get($r.NEED_RESULT_POINT_CALLBACK)===!0)){var E=new Map;t.forEach(function(F,P){return E.set(P,F)}),E.delete($r.NEED_RESULT_POINT_CALLBACK),t=E}try{var T=_.decodeRow(m,a,t);if(S===1){T.putMetadata(za.ORIENTATION,180);var D=T.getResultPoints();D!==null&&(D[0]=new Kt(r-D[0].getX()-1,D[0].getY()),D[1]=new Kt(r-D[1].getX()-1,D[1].getY()))}return{value:T}}catch{}},_=this,w=0;w<2;w++){var x=v(w);if(typeof x=="object")return x.value}}throw new et},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var s=e.getSize();if(t>=s)throw new et;for(var o=!e.get(t),l=0,u=t;u<s;){if(e.get(u)!==o)r[l]++;else{if(++l===i)break;r[l]=1,o=!o}u++}if(!(l===i||l===i-1&&u===s))throw new et},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new et;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=t[o];if(a<s)return Number.POSITIVE_INFINITY;var l=a/s;r*=l;for(var u=0,c=0;c<i;c++){var d=e[c],f=t[c]*l,m=d>f?d-f:f-d;if(m>r)return Number.POSITIVE_INFINITY;u+=m}return u/a},n}(),COe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),n7=function(n){COe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,s=Int32Array.from([0,0,0,0,0,0]),o=i,l=!1,u=6,c=i;c<r;c++)if(t.get(c)!==l)s[a]++;else{if(a===u-1){for(var d=e.MAX_AVG_VARIANCE,f=-1,m=e.CODE_START_A;m<=e.CODE_START_C;m++){var v=fa.patternMatchVariance(s,e.CODE_PATTERNS[m],e.MAX_INDIVIDUAL_VARIANCE);v<d&&(d=v,f=m)}if(f>=0&&t.isRange(Math.max(0,o-(c-o)/2),o,!1))return Int32Array.from([o,c,f]);o+=s[0]+s[1],s=s.slice(2,s.length),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,l=!l}throw new et},e.decodeCode=function(t,r,i){fa.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,s=-1,o=0;o<e.CODE_PATTERNS.length;o++){var l=e.CODE_PATTERNS[o],u=this.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);u<a&&(a=u,s=o)}if(s>=0)return s;throw new et},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get($r.ASSUME_GS1)===!0,s=e.findStartPattern(r),o=s[2],l=0,u=new Uint8Array(20);u[l++]=o;var c;switch(o){case e.CODE_START_A:c=e.CODE_CODE_A;break;case e.CODE_START_B:c=e.CODE_CODE_B;break;case e.CODE_START_C:c=e.CODE_CODE_C;break;default:throw new _t}for(var d=!1,f=!1,m="",v=s[0],_=s[1],w=Int32Array.from([0,0,0,0,0,0]),x=0,S=0,E=o,T=0,D=!0,F=!1,P=!1;!d;){var N=f;switch(f=!1,x=S,S=e.decodeCode(r,w,_),u[l++]=S,S!==e.CODE_STOP&&(D=!0),S!==e.CODE_STOP&&(T++,E+=T*S),v=_,_+=w.reduce(function(oe,$){return oe+$},0),S){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new _t}switch(c){case e.CODE_CODE_A:if(S<64)P===F?m+=String.fromCharCode(32+S):m+=String.fromCharCode(32+S+128),P=!1;else if(S<96)P===F?m+=String.fromCharCode(S-64):m+=String.fromCharCode(S+64),P=!1;else switch(S!==e.CODE_STOP&&(D=!1),S){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!F&&P?(F=!0,P=!1):F&&P?(F=!1,P=!1):P=!0;break;case e.CODE_SHIFT:f=!0,c=e.CODE_CODE_B;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:d=!0;break}break;case e.CODE_CODE_B:if(S<96)P===F?m+=String.fromCharCode(32+S):m+=String.fromCharCode(32+S+128),P=!1;else switch(S!==e.CODE_STOP&&(D=!1),S){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!F&&P?(F=!0,P=!1):F&&P?(F=!1,P=!1):P=!0;break;case e.CODE_SHIFT:f=!0,c=e.CODE_CODE_A;break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:d=!0;break}break;case e.CODE_CODE_C:if(S<100)S<10&&(m+="0"),m+=S;else switch(S!==e.CODE_STOP&&(D=!1),S){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_STOP:d=!0;break}break}N&&(c=c===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var I=_-v;if(_=r.getNextUnset(_),!r.isRange(_,Math.min(r.getSize(),_+(_-v)/2),!1))throw new et;if(E-=T*x,E%103!==x)throw new Ki;var R=m.length;if(R===0)throw new et;R>0&&D&&(c===e.CODE_CODE_C?m=m.substring(0,R-2):m=m.substring(0,R-1));for(var B=(s[1]+s[0])/2,G=v+I/2,H=u.length,K=new Uint8Array(H),ne=0;ne<H;ne++)K[ne]=u[ne];var re=[new Kt(B,t),new Kt(G,t)];return new Cs(m,K,0,re,nn.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(fa),MOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),OI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},r7=function(n){MOe(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,s,o,l,u=this.counters;u.fill(0),this.decodeRowResult="";var c=e.findAsteriskPattern(r,u),d=r.getNextSet(c[1]),f=r.getSize(),m,v;do{e.recordPattern(r,d,u);var _=e.toNarrowWidePattern(u);if(_<0)throw new et;m=e.patternToChar(_),this.decodeRowResult+=m,v=d;try{for(var w=(a=void 0,OI(u)),x=w.next();!x.done;x=w.next()){var S=x.value;d+=S}}catch(H){a={error:H}}finally{try{x&&!x.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}d=r.getNextSet(d)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var E=0;try{for(var T=OI(u),D=T.next();!D.done;D=T.next()){var S=D.value;E+=S}}catch(H){o={error:H}}finally{try{D&&!D.done&&(l=T.return)&&l.call(T)}finally{if(o)throw o.error}}var F=d-v-E;if(d!==f&&F*2<E)throw new et;if(this.usingCheckDigit){for(var P=this.decodeRowResult.length-1,N=0,I=0;I<P;I++)N+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(I));if(this.decodeRowResult.charAt(P)!==e.ALPHABET_STRING.charAt(N%43))throw new Ki;this.decodeRowResult=this.decodeRowResult.substring(0,P)}if(this.decodeRowResult.length===0)throw new et;var R;this.extendedMode?R=e.decodeExtended(this.decodeRowResult):R=this.decodeRowResult;var B=(c[1]+c[0])/2,G=v+E/2;return new Cs(R,null,0,[new Kt(B,t),new Kt(G,t)],nn.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),s=0,o=a,l=!1,u=r.length,c=a;c<i;c++)if(t.get(c)!==l)r[s]++;else{if(s===u-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,o-Math.floor((c-o)/2)),o,!1))return[o,c];o+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,l=!l}throw new et},e.toNarrowWidePattern=function(t){var r,i,a=t.length,s=0,o;do{var l=2147483647;try{for(var u=(r=void 0,OI(t)),c=u.next();!c.done;c=u.next()){var d=c.value;d<l&&d>s&&(l=d)}}catch(_){r={error:_}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}s=l,o=0;for(var f=0,m=0,v=0;v<a;v++){var d=t[v];d>s&&(m|=1<<a-1-v,o++,f+=d)}if(o===3){for(var v=0;v<a&&o>0;v++){var d=t[v];if(d>s&&(o--,d*2>=f))return-1}return m}}while(o>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new et},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s==="+"||s==="$"||s==="%"||s==="/"){var o=t.charAt(a+1),l="\0";switch(s){case"+":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)+32);else throw new _t;break;case"$":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)-64);else throw new _t;break;case"%":if(o>="A"&&o<="E")l=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")l=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")l=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")l="\0";else if(o==="V")l="@";else if(o==="W")l="`";else if(o==="X"||o==="Y"||o==="Z")l="";else throw new _t;break;case"/":if(o>="A"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")l=":";else throw new _t;break}i+=l,a++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(fa),IOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),FI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i7=function(n){IOe(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,s,o,l,u=this.findAsteriskPattern(r),c=r.getNextSet(u[1]),d=r.getSize(),f=this.counters;f.fill(0),this.decodeRowResult="";var m,v;do{e.recordPattern(r,c,f);var _=this.toPattern(f);if(_<0)throw new et;m=this.patternToChar(_),this.decodeRowResult+=m,v=c;try{for(var w=(a=void 0,FI(f)),x=w.next();!x.done;x=w.next()){var S=x.value;c+=S}}catch(I){a={error:I}}finally{try{x&&!x.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}c=r.getNextSet(c)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var E=0;try{for(var T=FI(f),D=T.next();!D.done;D=T.next()){var S=D.value;E+=S}}catch(I){o={error:I}}finally{try{D&&!D.done&&(l=T.return)&&l.call(T)}finally{if(o)throw o.error}}if(c===d||!r.get(c))throw new et;if(this.decodeRowResult.length<2)throw new et;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var F=this.decodeExtended(this.decodeRowResult),P=(u[1]+u[0])/2,N=v+E/2;return new Cs(F,null,0,[new Kt(P,t),new Kt(N,t)],nn.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,s=i,o=!1,l=a.length,u=0,c=i;c<r;c++)if(t.get(c)!==o)a[u]++;else{if(u===l-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([s,c]);s+=a[0]+a[1],a.copyWithin(0,2,2+u-1),a[u-1]=0,a[u]=0,u--}else u++;a[u]=1,o=!o}throw new et},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var s=FI(t),o=s.next();!o.done;o=s.next()){var l=o.value;a+=l}}catch(v){r={error:v}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var u=0,c=t.length,d=0;d<c;d++){var f=Math.round(t[d]*9/a);if(f<1||f>4)return-1;if(d&1)u<<=f;else for(var m=0;m<f;m++)u=u<<1|1}return u},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new et},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s>="a"&&s<="d"){if(a>=r-1)throw new _t;var o=t.charAt(a+1),l="\0";switch(s){case"d":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)+32);else throw new _t;break;case"a":if(o>="A"&&o<="Z")l=String.fromCharCode(o.charCodeAt(0)-64);else throw new _t;break;case"b":if(o>="A"&&o<="E")l=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")l=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")l=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")l="\0";else if(o==="V")l="@";else if(o==="W")l="`";else if(o>="X"&&o<="Z")l="";else throw new _t;break;case"c":if(o>="A"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")l=":";else throw new _t;break}i+=l,a++}else i+=s}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,s=0,o=r-1;o>=0;o--)s+=a*e.ALPHABET_STRING.indexOf(t.charAt(o)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[s%47])throw new Ki},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(fa),POe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),NOe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a7=function(n){POe(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,s,o=this.decodeStart(r),l=this.decodeEnd(r),u=new Bn;e.decodeMiddle(r,o[1],l[0],u);var c=u.toString(),d=null;i!=null&&(d=i.get($r.ALLOWED_LENGTHS)),d==null&&(d=e.DEFAULT_ALLOWED_LENGTHS);var f=c.length,m=!1,v=0;try{for(var _=NOe(d),w=_.next();!w.done;w=_.next()){var x=w.value;if(f===x){m=!0;break}x>v&&(v=x)}}catch(T){a={error:T}}finally{try{w&&!w.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}if(!m&&f>v&&(m=!0),!m)throw new _t;var S=[new Kt(o[1],t),new Kt(l[0],t)],E=new Cs(c,null,0,S,nn.ITF,new Date().getTime());return E},e.decodeMiddle=function(t,r,i,a){var s=new Int32Array(10),o=new Int32Array(5),l=new Int32Array(5);for(s.fill(0),o.fill(0),l.fill(0);r<i;){fa.recordPattern(t,r,s);for(var u=0;u<5;u++){var c=2*u;o[u]=s[c],l[u]=s[c+1]}var d=e.decodeDigit(o);a.append(d.toString()),d=this.decodeDigit(l),a.append(d.toString()),s.forEach(function(f){r+=f})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new et},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new et;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof et&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,s=new Int32Array(a),o=t.getSize(),l=!1,u=0,c=r;s.fill(0);for(var d=r;d<o;d++)if(t.get(d)!==l)s[u]++;else{if(u===a-1){if(fa.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[c,d];c+=s[0]+s[1],qr.arraycopy(s,2,s,0,u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,l=!l}throw new et},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,s=0;s<a;s++){var o=e.PATTERNS[s],l=fa.patternMatchVariance(t,o,e.MAX_INDIVIDUAL_VARIANCE);l<r?(r=l,i=s):l===r&&(i=-1)}if(i>=0)return i%10;throw new et},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(fa),ROe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$v=function(n){ROe(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,s);var o=i[0];a=i[1];var l=o-(a-o);l>=0&&(r=t.isRange(l,o,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new _t;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new _t;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,s){var o=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var l=0,u=r,c=a.length,d=i,f=r;f<o;f++)if(t.get(f)!==d)s[l]++;else{if(l===c-1){if(fa.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,f]);u+=s[0]+s[1];for(var m=s.slice(2,s.length),v=0;v<l-1;v++)s[v]=m[v];s[l-1]=0,s[l]=0,l--}else l++;s[l]=1,d=!d}throw new et},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var s=this.MAX_AVG_VARIANCE,o=-1,l=a.length,u=0;u<l;u++){var c=a[u],d=fa.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);d<s&&(s=d,o=u)}if(o>=0)return o;throw new et},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(fa),DOe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LOe=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),o=n.parseExtensionString(s),l=[new Kt((r[0]+r[1])/2,e),new Kt(a,e)],u=new Cs(s,null,0,l,nn.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&u.putAllMetadata(o),u},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),l=t[1],u=0,c=0;c<5&&l<o;c++){var d=$v.decodeDigit(e,s,l,$v.L_AND_G_PATTERNS);r+=String.fromCharCode(48+d%10);try{for(var f=(i=void 0,DOe(s)),m=f.next();!m.done;m=f.next()){var v=m.value;l+=v}}catch(w){i={error:w}}finally{try{m&&!m.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}d>=10&&(u|=1<<4-c),c!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(r.length!==5)throw new et;var _=this.determineCheckDigit(u);if(n.extensionChecksum(r.toString())!==_)throw new et;return l},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new et},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[za.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,s=a<10?"0"+a:a.toString();return t+i+"."+s},n}(),OOe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FOe=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),o=n.parseExtensionString(s),l=[new Kt((r[0]+r[1])/2,e),new Kt(a,e)],u=new Cs(s,null,0,l,nn.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&u.putAllMetadata(o),u},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),l=t[1],u=0,c=0;c<2&&l<o;c++){var d=$v.decodeDigit(e,s,l,$v.L_AND_G_PATTERNS);r+=String.fromCharCode(48+d%10);try{for(var f=(i=void 0,OOe(s)),m=f.next();!m.done;m=f.next()){var v=m.value;l+=v}}catch(_){i={error:_}}finally{try{m&&!m.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}d>=10&&(u|=1<<1-c),c!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(r.length!==2)throw new et;if(parseInt(r.toString())%4!==u)throw new et;return l},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[za.ISSUE_NUMBER,parseInt(e)]])},n}(),jOe=function(){function n(){}return n.decodeRow=function(e,t,r){var i=$v.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new LOe;return a.decodeRow(e,t,i)}catch{var s=new FOe;return s.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),BOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),la=function(n){BOe(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(o){return Int32Array.from(o)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),s=0;s<i.length;s++)a[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),s=i==null?null:i.get($r.NEED_RESULT_POINT_CALLBACK);if(s!=null){var o=new Kt((a[0]+a[1])/2,t);s.foundPossibleResultPoint(o)}var l=this.decodeMiddle(r,a,this.decodeRowStringBuffer),u=l.rowOffset,c=l.resultString;if(s!=null){var d=new Kt(u,t);s.foundPossibleResultPoint(d)}var f=e.decodeEnd(r,u);if(s!=null){var m=new Kt((f[0]+f[1])/2,t);s.foundPossibleResultPoint(m)}var v=f[1],_=v+(v-f[0]);if(_>=r.getSize()||!r.isRange(v,_,!1))throw new et;var w=c.toString();if(w.length<8)throw new _t;if(!e.checkChecksum(w))throw new Ki;var x=(a[1]+a[0])/2,S=(f[1]+f[0])/2,E=this.getBarcodeFormat(),T=[new Kt(x,t),new Kt(S,t)],D=new Cs(w,null,0,T,E,new Date().getTime()),F=0;try{var P=jOe.decodeRow(t,r,f[1]);D.putMetadata(za.UPC_EAN_EXTENSION,P.getText()),D.putAllMetadata(P.getResultMetadata()),D.addResultPoints(P.getResultPoints()),F=P.getText().length}catch{}var N=i==null?null:i.get($r.ALLOWED_EAN_EXTENSIONS);if(N!=null){var I=!1;for(var R in N)if(F.toString()===R){I=!0;break}if(!I)throw new et}return E===nn.EAN_13||nn.UPC_A,D},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new _t;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new _t;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}($v),UOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),s7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},WR=function(n){UOe(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,o,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=t.getSize(),d=r[1],f=0,m=0;m<6&&d<c;m++){var v=la.decodeDigit(t,u,d,la.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);try{for(var _=(a=void 0,s7(u)),w=_.next();!w.done;w=_.next()){var x=w.value;d+=x}}catch(D){a={error:D}}finally{try{w&&!w.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}v>=10&&(f|=1<<5-m)}i=e.determineFirstDigit(i,f);var S=la.findGuardPattern(t,d,!0,la.MIDDLE_PATTERN,new Int32Array(la.MIDDLE_PATTERN.length).fill(0));d=S[1];for(var m=0;m<6&&d<c;m++){var v=la.decodeDigit(t,u,d,la.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var E=(o=void 0,s7(u)),T=E.next();!T.done;T=E.next()){var x=T.value;d+=x}}catch(P){o={error:P}}finally{try{T&&!T.done&&(l=E.return)&&l.call(E)}finally{if(o)throw o.error}}}return{rowOffset:d,resultString:i}},e.prototype.getBarcodeFormat=function(){return nn.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new et},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(la),VOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),o7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l7=function(n){VOe(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,o,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=t.getSize(),d=r[1],f=0;f<4&&d<c;f++){var m=la.decodeDigit(t,u,d,la.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var v=(a=void 0,o7(u)),_=v.next();!_.done;_=v.next()){var w=_.value;d+=w}}catch(T){a={error:T}}finally{try{_&&!_.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}}var x=la.findGuardPattern(t,d,!0,la.MIDDLE_PATTERN,new Int32Array(la.MIDDLE_PATTERN.length).fill(0));d=x[1];for(var f=0;f<4&&d<c;f++){var m=la.decodeDigit(t,u,d,la.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var S=(o=void 0,o7(u)),E=S.next();!E.done;E=S.next()){var w=E.value;d+=w}}catch(F){o={error:F}}finally{try{E&&!E.done&&(l=S.return)&&l.call(S)}finally{if(o)throw o.error}}}return{rowOffset:d,resultString:i}},e.prototype.getBarcodeFormat=function(){return nn.EAN_8},e}(la),zOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),u7=function(n){zOe(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new WR,t}return e.prototype.getBarcodeFormat=function(){return nn.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new Cs(r.substring(1),null,null,t.getResultPoints(),nn.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new et},e.prototype.reset=function(){this.ean13Reader.reset()},e}(la),HOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),GOe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c7=function(n){HOe(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,o=this.decodeMiddleCounters.map(function(w){return w});o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=t.getSize(),u=r[1],c=0,d=0;d<6&&u<l;d++){var f=e.decodeDigit(t,o,u,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+f%10);try{for(var m=(a=void 0,GOe(o)),v=m.next();!v.done;v=m.next()){var _=v.value;u+=_}}catch(w){a={error:w}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}f>=10&&(c|=1<<5-d)}return e.determineNumSysAndCheckDigit(new Bn(i),c),u},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return la.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw et.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return nn.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new Bn;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(la),WOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),d7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jI=function(n){WOe(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get($r.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(nn.EAN_13)>-1&&a.push(new WR),i.indexOf(nn.UPC_A)>-1&&a.push(new u7),i.indexOf(nn.EAN_8)>-1&&a.push(new l7),i.indexOf(nn.UPC_E)>-1&&a.push(new c7)),a.length===0&&(a.push(new WR),a.push(new u7),a.push(new l7),a.push(new c7)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,s;try{for(var o=d7(this.readers),l=o.next();!l.done;l=o.next()){var u=l.value;try{var c=u.decodeRow(t,r,i),d=c.getBarcodeFormat()===nn.EAN_13&&c.getText().charAt(0)==="0",f=i==null?null:i.get($r.POSSIBLE_FORMATS),m=f==null||f.includes(nn.UPC_A);if(d&&m){var v=c.getRawBytes(),_=new Cs(c.getText().substring(1),v,v?v.length:null,c.getResultPoints(),nn.UPC_A);return _.putAllMetadata(c.getResultMetadata()),_}return c}catch{}}}catch(w){a={error:w}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(a)throw a.error}}throw new et},e.prototype.reset=function(){var t,r;try{for(var i=d7(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;s.reset()}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(fa),qOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$Oe=function(n){qOe(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new et;var s=this.codaBarDecodeRow(a.row);if(!s)throw new et;return new Cs(s,null,0,[new Kt(a.left,t),new Kt(a.right,t)],nn.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var s=[],o=r[0],l=1,u=1;u<r.length;u++)r[u]===o?l++:(o=r[u],s.push(l),l=1);return s.push(l),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(l,u){return(l+u)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),s=a.map(function(l){return l<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var o=r.join("");return this.validCodaBarString(o)?o:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(fa),XOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),KOe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Up=function(n){XOe(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(fa.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new et},e.count=function(t){return fr.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]>a&&(a=r[s],i=s);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]<a&&(a=r[s],i=s);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],s=a+t[2]+t[3],o=a/s;if(o>=e.MIN_FINDER_PATTERN_RATIO&&o<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var c=KOe(t),d=c.next();!d.done;d=c.next()){var f=d.value;f>u&&(u=f),f<l&&(l=f)}}catch(m){r={error:m}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return u<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(fa),_A=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),Pte=function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Kt(r,a)),this.resultPoints.push(new Kt(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),YOe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L0=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,s=0;try{for(var o=YOe(e),l=o.next();!l.done;l=o.next()){var u=l.value;s+=u}}catch(S){i={error:S}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}for(var c=0,d=0,f=e.length,m=0;m<f-1;m++){var v=void 0;for(v=1,d|=1<<m;v<e[m];v++,d&=~(1<<m)){var _=n.combins(s-v-1,f-m-2);if(r&&d===0&&s-v-(f-m-1)>=f-m-1&&(_-=n.combins(s-v-(f-m),f-m-2)),f-m-1>1){for(var w=0,x=s-v-(f-m-2);x>t;x--)w+=n.combins(s-v-x-1,f-m-3);_-=w*(f-1-m)}else s-v>t&&_--;c+=_}s-=v}return c},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,s=1,o=e;o>r;o--)a*=o,s<=i&&(a/=s,s++);for(;s<=i;)a/=s,s++;return a},n}(),ZOe=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new Ta(r),a=0,s=e[0],o=s.getRightChar().getValue(),l=11;l>=0;--l)o&1<<l&&i.set(a),a++;for(var l=1;l<e.length;++l){for(var u=e[l],c=u.getLeftChar().getValue(),d=11;d>=0;--d)c&1<<d&&i.set(a),a++;if(u.getRightChar()!==null)for(var f=u.getRightChar().getValue(),d=11;d>=0;--d)f&1<<d&&i.set(a),a++}return i},n}(),Tp=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),S4=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),QOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$l=function(n){QOe(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(S4),JOe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kp=function(n){JOe(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(S4),e4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Jg=function(n){e4e(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new _t;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(S4),M2=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},t4e=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,s,o,l,u;if(!e)return null;if(e.length<2)throw new et;var c=e.substring(0,2);try{for(var d=M2(n.TWO_DIGIT_DATA_LENGTH),f=d.next();!f.done;f=d.next()){var m=f.value;if(m[0]===c)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,m[2],e):n.processFixedAI(2,m[1],e)}}catch(F){t={error:F}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}if(e.length<3)throw new et;var v=e.substring(0,3);try{for(var _=M2(n.THREE_DIGIT_DATA_LENGTH),w=_.next();!w.done;w=_.next()){var m=w.value;if(m[0]===v)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,m[2],e):n.processFixedAI(3,m[1],e)}}catch(F){i={error:F}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}try{for(var x=M2(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),S=x.next();!S.done;S=x.next()){var m=S.value;if(m[0]===v)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,m[2],e):n.processFixedAI(4,m[1],e)}}catch(F){s={error:F}}finally{try{S&&!S.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}if(e.length<4)throw new et;var E=e.substring(0,4);try{for(var T=M2(n.FOUR_DIGIT_DATA_LENGTH),D=T.next();!D.done;D=T.next()){var m=D.value;if(m[0]===E)return m[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,m[2],e):n.processFixedAI(4,m[1],e)}}catch(F){l={error:F}}finally{try{D&&!D.done&&(u=T.return)&&u.call(T)}finally{if(l)throw l.error}}throw new et},n.processFixedAI=function(e,t,r){if(r.length<e)throw new et;var i=r.substring(0,e);if(r.length<e+t)throw new et;var a=r.substring(e,e+t),s=r.substring(e+t),o="("+i+")"+a,l=n.parseFieldsInGeneralPurpose(s);return l==null?o:o+l},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var s=r.substring(e,a),o=r.substring(a),l="("+i+")"+s,u=n.parseFieldsInGeneralPurpose(o);return u==null?l:l+u},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),mS=function(){function n(e){this.buffer=new Bn,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),s=t4e.parseFieldsInGeneralPurpose(a.getNewString());if(s!=null&&e.append(s),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Jg(this.information.getSize(),Jg.FNC1,Jg.FNC1):new Jg(this.information.getSize(),t-1,Jg.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new Jg(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new kp(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new kp(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new kp(this.current.getPosition(),this.buffer.toString()):t=new kp(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Tp(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new kp(this.current.getPosition(),this.buffer.toString());return new Tp(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Tp(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new kp(this.current.getPosition(),this.buffer.toString());return new Tp(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Tp(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new kp(this.current.getPosition(),this.buffer.toString());return new Tp(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Tp(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new $l(e+5,$l.FNC1);if(t>=5&&t<15)return new $l(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new $l(e+7,""+(r+1));if(r>=90&&r<116)return new $l(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new _t}return new $l(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new $l(e+5,$l.FNC1);if(t>=5&&t<15)return new $l(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new $l(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new gw("Decoding invalid alphanumeric value: "+r)}return new $l(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),Nte=function(){function n(e){this.information=e,this.generalDecoder=new mS(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),n4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),au=function(n){n4e(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var s=t.charAt(a+r).charCodeAt(0)-48;i+=a&1?s:3*s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(Nte),r4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),i4e=function(n){r4e(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Bn;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(au),a4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),s4e=function(n){a4e(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Bn;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(Nte),o4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gS=function(n){o4e(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var s=this.checkWeight(a),o=1e5,l=0;l<5;++l)s/o===0&&t.append("0"),o/=10;t.append(s)},e}(au),l4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rte=function(n){l4e(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+gS.GTIN_SIZE+e.WEIGHT_SIZE)throw new et;var t=new Bn;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+gS.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(gS),u4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),c4e=function(n){u4e(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(Rte),d4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),h4e=function(n){d4e(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(Rte),f4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),p4e=function(n){f4e(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+au.GTIN_SIZE)throw new et;var t=new Bn;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+au.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+au.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(au),m4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),g4e=function(n){m4e(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+au.GTIN_SIZE)throw new et;var t=new Bn;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+au.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+au.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+au.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(au),v4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ah=function(n){v4e(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new et;var t=new Bn;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var s=i%12+1;i/=12;var o=i;o/10===0&&t.append("0"),t.append(o),s/10===0&&t.append("0"),t.append(s),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(gS);function y4e(n){try{if(n.get(1))return new i4e(n);if(!n.get(2))return new s4e(n);var e=mS.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new c4e(n);case 5:return new h4e(n)}var t=mS.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new p4e(n);case 13:return new g4e(n)}var r=mS.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Ah(n,"310","11");case 57:return new Ah(n,"320","11");case 58:return new Ah(n,"310","13");case 59:return new Ah(n,"320","13");case 60:return new Ah(n,"310","15");case 61:return new Ah(n,"320","15");case 62:return new Ah(n,"310","17");case 63:return new Ah(n,"320","17")}}catch(i){throw console.log(i),new gw("unknown decoder: "+n)}}var h7=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),x4e=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),_4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Th=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},w4e=function(n){_4e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(o){if(o instanceof et){if(!this.pairs.length)throw new et;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new et},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,s=r;s<this.rows.length;s++){var o=this.rows[s];this.pairs.length=0;try{for(var l=(i=void 0,Th(t)),u=l.next();!u.done;u=l.next()){var c=u.value;this.pairs.push(c.getPairs())}}catch(f){i={error:f}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}if(this.pairs.push(o.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var d=new Array(t);d.push(o);try{return this.checkRows(d,s+1)}catch(f){console.log(f)}}}throw new et},e.isValidSequence=function(t){var r,i;try{for(var a=Th(e.FINDER_PATTERN_SEQUENCES),s=a.next();!s.done;s=a.next()){var o=s.value;if(!(t.length>o.length)){for(var l=!0,u=0;u<t.length;u++)if(t[u].getFinderPattern().getValue()!==o[u]){l=!1;break}if(l)return!0}}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,s=!1;i<this.rows.length;){var o=this.rows[i];if(o.getRowNumber()>t){s=o.isEquivalent(this.pairs);break}a=o.isEquivalent(this.pairs),i++}s||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new x4e(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,s,o,l,u;try{for(var c=Th(r),d=c.next();!d.done;d=c.next()){var f=d.value;if(f.getPairs().length!==t.length){var m=!0;try{for(var v=(s=void 0,Th(f.getPairs())),_=v.next();!_.done;_=v.next()){var w=_.value,x=!1;try{for(var S=(l=void 0,Th(t)),E=S.next();!E.done;E=S.next()){var T=E.value;if(h7.equals(w,T)){x=!0;break}}}catch(D){l={error:D}}finally{try{E&&!E.done&&(u=S.return)&&u.call(S)}finally{if(l)throw l.error}}x||(m=!1)}}catch(D){s={error:D}}finally{try{_&&!_.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}}}}catch(D){i={error:D}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,s,o,l,u;try{for(var c=Th(r),d=c.next();!d.done;d=c.next()){var f=d.value,m=!0;try{for(var v=(s=void 0,Th(t)),_=v.next();!_.done;_=v.next()){var w=_.value,x=!1;try{for(var S=(l=void 0,Th(f.getPairs())),E=S.next();!E.done;E=S.next()){var T=E.value;if(w.equals(T)){x=!0;break}}}catch(D){l={error:D}}finally{try{E&&!E.done&&(u=S.return)&&u.call(S)}finally{if(l)throw l.error}}if(!x){m=!1;break}}}catch(D){s={error:D}}finally{try{_&&!_.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}if(m)return!0}}catch(D){i={error:D}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=ZOe.buildBitArray(t),i=y4e(r),a=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),o=t[t.length-1].getFinderPattern().getResultPoints(),l=[s[0],s[1],o[0],o[1]];return new Cs(a,null,null,l,nn.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),s=2,o=1;o<this.pairs.size();++o){var l=this.pairs.get(o);a+=l.getLeftChar().getChecksumPortion(),s++;var u=l.getRightChar();u!=null&&(a+=u.getChecksumPortion(),s++)}a%=211;var c=211*(s-4)+a;return c===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var s,o=!0,l=-1;do this.findNextPair(t,r,l),s=this.parseFoundFinderPattern(t,i,a),s===null?l=e.getNextSecondBar(t,this.startEnd[0]):o=!1;while(o);var u=this.decodeDataCharacter(t,s,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new et;var c;try{c=this.decodeDataCharacter(t,s,a,!1)}catch(d){c=null,console.log(d)}return new h7(u,c,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var s=t.getSize(),o;if(i>=0)o=i;else if(this.isEmptyPair(r))o=0;else{var l=r[r.length-1];o=l.getFinderPattern().getStartEnd()[1]}var u=r.length%2!==0;this.startFromEven&&(u=!u);for(var c=!1;o<s&&(c=!t.get(o),!!c);)o++;for(var d=0,f=o,m=o;m<s;m++)if(t.get(m)!==c)a[d]++;else{if(d===3){if(u&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=f,this.startEnd[1]=m;return}u&&e.reverseCounters(a),f+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,d--}else d++;a[d]=1,c=!c}throw new et},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,s,o;if(i){for(var l=this.startEnd[0]-1;l>=0&&!t.get(l);)l--;l++,a=this.startEnd[0]-l,s=l,o=this.startEnd[1]}else s=this.startEnd[0],o=t.getNextUnset(this.startEnd[1]+1),a=o-this.startEnd[1];var u=this.getDecodeFinderCounters();qr.arraycopy(u,0,u,1,u.length-1),u[0]=a;var c;try{c=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new Pte(c,[s,o],s,o,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var s=this.getDataCharacterCounters(),o=0;o<s.length;o++)s[o]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],s);else{e.recordPattern(t,r.getStartEnd()[1],s);for(var l=0,u=s.length-1;l<u;l++,u--){var c=s[l];s[l]=s[u],s[u]=c}}var d=17,f=fr.sum(new Int32Array(s))/d,m=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(f-m)/m>.3)throw new et;for(var v=this.getOddCounts(),_=this.getEvenCounts(),w=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),l=0;l<s.length;l++){var S=1*s[l]/f,E=S+.5;if(E<1){if(S<.3)throw new et;E=1}else if(E>8){if(S>8.7)throw new et;E=8}var T=l/2;l&1?(_[T]=E,x[T]=S-E):(v[T]=E,w[T]=S-E)}this.adjustOddEvenCounts(d);for(var D=4*r.getValue()+(i?0:2)+(a?0:1)-1,F=0,P=0,l=v.length-1;l>=0;l--){if(e.isNotA1left(r,i,a)){var N=e.WEIGHTS[D][2*l];P+=v[l]*N}F+=v[l]}for(var I=0,l=_.length-1;l>=0;l--)if(e.isNotA1left(r,i,a)){var N=e.WEIGHTS[D][2*l+1];I+=_[l]*N}var R=P+I;if(F&1||F>13||F<4)throw new et;var B=(13-F)/2,G=e.SYMBOL_WIDEST[B],H=9-G,K=L0.getRSSvalue(v,G,!0),ne=L0.getRSSvalue(_,H,!1),re=e.EVEN_TOTAL_SUBSET[B],oe=e.GSUM[B],$=K*re+ne+oe;return new _A($,R)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=fr.sum(new Int32Array(this.getOddCounts())),i=fr.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1;r>13?s=!0:r<4&&(a=!0);var o=!1,l=!1;i>13?l=!0:i<4&&(o=!0);var u=r+i-t,c=(r&1)===1,d=(i&1)===0;if(u===1)if(c){if(d)throw new et;s=!0}else{if(!d)throw new et;l=!0}else if(u===-1)if(c){if(d)throw new et;a=!0}else{if(!d)throw new et;o=!0}else if(u===0){if(c){if(!d)throw new et;r<i?(a=!0,l=!0):(s=!0,o=!0)}else if(d)throw new et}else throw new et;if(a){if(s)throw new et;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(l)throw new et;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Up),b4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),S4e=function(n){b4e(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(_A),E4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),BI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f7=function(n){E4e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,s,o,l,u=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,u),r.reverse();var c=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,c),r.reverse();try{for(var d=BI(this.possibleLeftPairs),f=d.next();!f.done;f=d.next()){var m=f.value;if(m.getCount()>1)try{for(var v=(o=void 0,BI(this.possibleRightPairs)),_=v.next();!_.done;_=v.next()){var w=_.value;if(w.getCount()>1&&e.checkChecksum(m,w))return e.constructResult(m,w)}}catch(x){o={error:x}}finally{try{_&&!_.done&&(l=v.return)&&l.call(v)}finally{if(o)throw o.error}}}}catch(x){a={error:x}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}throw new et},e.addOrTally=function(t,r){var i,a;if(r!=null){var s=!1;try{for(var o=BI(t),l=o.next();!l.done;l=o.next()){var u=l.value;if(u.getValue()===r.getValue()){u.incrementCount(),s=!0;break}}}catch(c){i={error:c}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}s||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),s=new Bn,o=13-a.length;o>0;o--)s.append("0");s.append(a);for(var l=0,o=0;o<13;o++){var u=s.charAt(o).charCodeAt(0)-48;l+=o&1?u:3*u}l=10-l%10,l===10&&(l=0),s.append(l.toString());var c=t.getFinderPattern().getResultPoints(),d=r.getFinderPattern().getResultPoints();return new Cs(s.toString(),null,0,[c[0],c[1],d[0],d[1]],nn.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var s=this.findFinderPattern(t,r),o=this.parseFoundFinderPattern(t,i,r,s),l=a==null?null:a.get($r.NEED_RESULT_POINT_CALLBACK);if(l!=null){var u=(s[0]+s[1])/2;r&&(u=t.getSize()-1-u),l.foundPossibleResultPoint(new Kt(u,i))}var c=this.decodeDataCharacter(t,o,!0),d=this.decodeDataCharacter(t,o,!1);return new S4e(1597*c.getValue()+d.getValue(),c.getChecksumPortion()+4*d.getChecksumPortion(),o)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(i)fa.recordPatternInReverse(t,r.getStartEnd()[0],a);else{fa.recordPattern(t,r.getStartEnd()[1]+1,a);for(var o=0,l=a.length-1;o<l;o++,l--){var u=a[o];a[o]=a[l],a[l]=u}}for(var c=i?16:15,d=fr.sum(new Int32Array(a))/c,f=this.getOddCounts(),m=this.getEvenCounts(),v=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors(),o=0;o<a.length;o++){var w=a[o]/d,x=Math.floor(w+.5);x<1?x=1:x>8&&(x=8);var S=Math.floor(o/2);o&1?(m[S]=x,_[S]=w-x):(f[S]=x,v[S]=w-x)}this.adjustOddEvenCounts(i,c);for(var E=0,T=0,o=f.length-1;o>=0;o--)T*=9,T+=f[o],E+=f[o];for(var D=0,F=0,o=m.length-1;o>=0;o--)D*=9,D+=m[o],F+=m[o];var P=T+3*D;if(i){if(E&1||E>12||E<4)throw new et;var N=(12-E)/2,I=e.OUTSIDE_ODD_WIDEST[N],R=9-I,B=L0.getRSSvalue(f,I,!1),G=L0.getRSSvalue(m,R,!0),H=e.OUTSIDE_EVEN_TOTAL_SUBSET[N],K=e.OUTSIDE_GSUM[N];return new _A(B*H+G+K,P)}else{if(F&1||F>10||F<4)throw new et;var N=(10-F)/2,I=e.INSIDE_ODD_WIDEST[N],R=9-I,B=L0.getRSSvalue(f,I,!0),G=L0.getRSSvalue(m,R,!1),ne=e.INSIDE_ODD_TOTAL_SUBSET[N],K=e.INSIDE_GSUM[N];return new _A(G*ne+B+K,P)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),s=!1,o=0;o<a&&(s=!t.get(o),r!==s);)o++;for(var l=0,u=o,c=o;c<a;c++)if(t.get(c)!==s)i[l]++;else{if(l===3){if(Up.isFinderPattern(i))return[u,c];u+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,s=!s}throw new et},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var s=t.get(a[0]),o=a[0]-1;o>=0&&s!==t.get(o);)o--;o++;var l=a[0]-o,u=this.getDecodeFinderCounters(),c=new Int32Array(u.length);qr.arraycopy(u,0,c,1,u.length-1),c[0]=l;var d=this.parseFinderValue(c,e.FINDER_PATTERNS),f=o,m=a[1];return i&&(f=t.getSize()-1-f,m=t.getSize()-1-m),new Pte(d,[o,a[1]],f,m,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=fr.sum(new Int32Array(this.getOddCounts())),a=fr.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1,l=!1,u=!1;t?(i>12?o=!0:i<4&&(s=!0),a>12?u=!0:a<4&&(l=!0)):(i>11?o=!0:i<5&&(s=!0),a>10?u=!0:a<4&&(l=!0));var c=i+a-r,d=(i&1)===(t?1:0),f=(a&1)===1;if(c===1)if(d){if(f)throw new et;o=!0}else{if(!f)throw new et;u=!0}else if(c===-1)if(d){if(f)throw new et;s=!0}else{if(!f)throw new et;l=!0}else if(c===0){if(d){if(!f)throw new et;i<a?(s=!0,u=!0):(o=!0,l=!0)}else if(f)throw new et}else throw new et;if(s){if(o)throw new et;Up.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Up.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(u)throw new et;Up.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&Up.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Up),A4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),O0=function(n){A4e(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get($r.POSSIBLE_FORMATS):null,a=t&&t.get($r.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=t&&t.get($r.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(nn.EAN_13)||i.includes(nn.UPC_A)||i.includes(nn.EAN_8)||i.includes(nn.UPC_E))&&r.readers.push(new jI(t)),i.includes(nn.CODE_39)&&r.readers.push(new r7(a,s)),i.includes(nn.CODE_93)&&r.readers.push(new i7),i.includes(nn.CODE_128)&&r.readers.push(new n7),i.includes(nn.ITF)&&r.readers.push(new a7),i.includes(nn.CODABAR)&&r.readers.push(new $Oe),i.includes(nn.RSS_14)&&r.readers.push(new f7),i.includes(nn.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new w4e))),r.readers.length===0&&(r.readers.push(new jI(t)),r.readers.push(new r7),r.readers.push(new i7),r.readers.push(new jI(t)),r.readers.push(new n7),r.readers.push(new a7),r.readers.push(new f7)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new et},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(fa),T4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){T4e(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new O0(r),t,r)||this}return e})(gy);var p7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xr=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),mr=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),k4e=function(){function n(e,t,r,i,a,s){var o,l;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=s;var u=0,c=s.getECCodewords(),d=s.getECBlocks();try{for(var f=p7(d),m=f.next();!m.done;m=f.next()){var v=m.value;u+=v.getCount()*(v.getDataCodewords()+c)}}catch(_){o={error:_}}finally{try{m&&!m.done&&(l=f.return)&&l.call(f)}finally{if(o)throw o.error}}this.totalCodewords=u}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if(e&1||t&1)throw new _t;try{for(var a=p7(n.VERSIONS),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.symbolSizeRows===e&&o.symbolSizeColumns===t)return o}}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new _t},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new xr(5,new mr(1,3))),new n(2,12,12,10,10,new xr(7,new mr(1,5))),new n(3,14,14,12,12,new xr(10,new mr(1,8))),new n(4,16,16,14,14,new xr(12,new mr(1,12))),new n(5,18,18,16,16,new xr(14,new mr(1,18))),new n(6,20,20,18,18,new xr(18,new mr(1,22))),new n(7,22,22,20,20,new xr(20,new mr(1,30))),new n(8,24,24,22,22,new xr(24,new mr(1,36))),new n(9,26,26,24,24,new xr(28,new mr(1,44))),new n(10,32,32,14,14,new xr(36,new mr(1,62))),new n(11,36,36,16,16,new xr(42,new mr(1,86))),new n(12,40,40,18,18,new xr(48,new mr(1,114))),new n(13,44,44,20,20,new xr(56,new mr(1,144))),new n(14,48,48,22,22,new xr(68,new mr(1,174))),new n(15,52,52,24,24,new xr(42,new mr(2,102))),new n(16,64,64,14,14,new xr(56,new mr(2,140))),new n(17,72,72,16,16,new xr(36,new mr(4,92))),new n(18,80,80,18,18,new xr(48,new mr(4,114))),new n(19,88,88,20,20,new xr(56,new mr(4,144))),new n(20,96,96,22,22,new xr(68,new mr(4,174))),new n(21,104,104,24,24,new xr(56,new mr(6,136))),new n(22,120,120,18,18,new xr(68,new mr(6,175))),new n(23,132,132,20,20,new xr(62,new mr(8,163))),new n(24,144,144,22,22,new xr(62,new mr(8,156),new mr(2,155))),new n(25,8,18,6,16,new xr(7,new mr(1,5))),new n(26,8,32,6,14,new xr(11,new mr(1,10))),new n(27,12,26,10,24,new xr(14,new mr(1,16))),new n(28,12,36,10,16,new xr(18,new mr(1,22))),new n(29,16,36,14,16,new xr(24,new mr(1,32))),new n(30,16,48,14,22,new xr(28,new mr(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),C4e=function(){function n(e){var t=e.getHeight();if(t<8||t>144||t&1)throw new _t;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Sc(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return k4e.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),o=!1,l=!1,u=!1,c=!1;do if(r===a&&i===0&&!o)e[t++]=this.readCorner1(a,s)&255,r-=2,i+=2,o=!0;else if(r===a-2&&i===0&&s&3&&!l)e[t++]=this.readCorner2(a,s)&255,r-=2,i+=2,l=!0;else if(r===a+4&&i===2&&!(s&7)&&!u)e[t++]=this.readCorner3(a,s)&255,r-=2,i+=2,u=!0;else if(r===a-2&&i===0&&(s&7)===4&&!c)e[t++]=this.readCorner4(a,s)&255,r-=2,i+=2,c=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<s);if(t!==this.version.getTotalCodewords())throw new _t;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new rn("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),s=t/i|0,o=r/a|0,l=s*i,u=o*a,c=new Sc(u,l),d=0;d<s;++d)for(var f=d*i,m=0;m<o;++m)for(var v=m*a,_=0;_<i;++_)for(var w=d*(i+2)+1+_,x=f+_,S=0;S<a;++S){var E=m*(a+2)+1+S;if(e.get(E,w)){var T=v+S;c.set(T,x)}}return c},n}(),m7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},M4e=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,s,o=t.getECBlocks(),l=0,u=o.getECBlocks();try{for(var c=m7(u),d=c.next();!d.done;d=c.next()){var f=d.value;l+=f.getCount()}}catch(K){r={error:K}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}var m=new Array(l),v=0;try{for(var _=m7(u),w=_.next();!w.done;w=_.next())for(var f=w.value,x=0;x<f.getCount();x++){var S=f.getDataCodewords(),E=o.getECCodewords()+S;m[v++]=new n(S,new Uint8Array(E))}}catch(K){a={error:K}}finally{try{w&&!w.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}for(var T=m[0].codewords.length,D=T-o.getECCodewords(),F=D-1,P=0,x=0;x<F;x++)for(var N=0;N<v;N++)m[N].codewords[x]=e[P++];for(var I=t.getVersionNumber()===24,R=I?8:v,N=0;N<R;N++)m[N].codewords[D-1]=e[P++];for(var B=m[0].codewords.length,x=D;x<B;x++)for(var N=0;N<v;N++){var G=I?(N+8)%v:N,H=I&&G>7?x-1:x;m[G].codewords[H]=e[P++]}if(P!==e.length)throw new rn;return m},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),Dte=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new rn(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var s=8-r,o=e<s?e:s,l=s-o,u=255>>8-o<<l;t=(a[i]&u)>>l,e-=o,r+=o,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var l=8-e,u=255>>l<<l;t=t<<e|(a[i]&u)>>l,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),ia;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(ia||(ia={}));var I4e=function(){function n(){}return n.decode=function(e){var t=new Dte(e),r=new Bn,i=new Bn,a=new Array,s=ia.ASCII_ENCODE;do if(s===ia.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,i);else{switch(s){case ia.C40_ENCODE:this.decodeC40Segment(t,r);break;case ia.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case ia.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case ia.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case ia.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new _t}s=ia.ASCII_ENCODE}while(s!==ia.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new Lk(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new _t;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),ia.ASCII_ENCODE;if(a===129)return ia.PAD_ENCODE;if(a<=229){var s=a-130;s<10&&t.append("0"),t.append(""+s)}else switch(a){case 230:return ia.C40_ENCODE;case 231:return ia.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return ia.ANSIX12_ENCODE;case 239:return ia.TEXT_ENCODE;case 240:return ia.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new _t;break}}while(e.available()>0);return ia.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var l=i[o];switch(a){case 0:if(l<3)a=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[l];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else throw new _t;break;case 1:r?(t.append(String.fromCharCode(l+128)),r=!1):t.append(String.fromCharCode(l)),a=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[l];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else switch(l){case 27:t.append("");break;case 30:r=!0;break;default:throw new _t}a=0;break;case 3:r?(t.append(String.fromCharCode(l+224)),r=!1):t.append(String.fromCharCode(l+96)),a=0;break;default:throw new _t}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var l=i[o];switch(a){case 0:if(l<3)a=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[l];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else throw new _t;break;case 1:r?(t.append(String.fromCharCode(l+128)),r=!1):t.append(String.fromCharCode(l)),a=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[l];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else switch(l){case 27:t.append("");break;case 30:r=!0;break;default:throw new _t}a=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[l];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u),a=0}else throw new _t;break;default:throw new _t}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new _t;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}i&32||(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),s;if(a===0?s=e.available()/8|0:a<250?s=a:s=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new _t;for(var o=new Uint8Array(s),l=0;l<s;l++){if(e.available()<8)throw new _t;o[l]=this.unrandomize255State(e.readBits(8),i++)}r.push(o);try{t.append(kl.decode(o,nr.ISO88591))}catch(u){throw new gw("Platform does not support required encoding: "+u.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),P4e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},N4e=function(){function n(){this.rsDecoder=new Ok(bo.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new C4e(e),a=i.getVersion(),s=i.readCodewords(),o=M4e.getDataBlocks(s,a),l=0;try{for(var u=P4e(o),c=u.next();!c.done;c=u.next()){var d=c.value;l+=d.getNumDataCodewords()}}catch(E){t={error:E}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}for(var f=new Uint8Array(l),m=o.length,v=0;v<m;v++){var _=o[v],w=_.getCodewords(),x=_.getNumDataCodewords();this.correctErrors(w,x);for(var S=0;S<x;S++)f[S*m+v]=w[S]}return I4e.decode(f)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Ki}for(var i=0;i<t;i++)e[i]=r[i]},n}(),R4e=function(){function n(e){this.image=e,this.rectangleDetector=new GR(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new et;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],s=t[3],o=this.transitionsBetween(r,s)+1,l=this.transitionsBetween(a,s)+1;(o&1)===1&&(o+=1),(l&1)===1&&(l+=1),4*o<7*l&&4*l<7*o&&(o=l=Math.max(o,l));var u=n.sampleGrid(this.image,r,i,a,s,o,l);return new w4(u,[r,i,a,s])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new Kt(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new Kt(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],s=this.transitionsBetween(t,r),o=this.transitionsBetween(r,i),l=this.transitionsBetween(i,a),u=this.transitionsBetween(a,t),c=s,d=[a,t,r,i];return c>o&&(c=o,d[0]=t,d[1]=r,d[2]=i,d[3]=a),c>l&&(c=l,d[0]=r,d[1]=i,d[2]=a,d[3]=t),c>u&&(d[0]=i,d[1]=a,d[2]=t,d[3]=r),d},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),o=n.shiftPoint(r,i,(s+1)*4),l=n.shiftPoint(i,r,(s+1)*4),u=this.transitionsBetween(o,t),c=this.transitionsBetween(l,a);return u<c?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),o=this.transitionsBetween(r,a),l=n.shiftPoint(t,r,(o+1)*4),u=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(l,a),o=this.transitionsBetween(u,a);var c=new Kt(a.getX()+(i.getX()-r.getX())/(s+1),a.getY()+(i.getY()-r.getY())/(s+1)),d=new Kt(a.getX()+(t.getX()-r.getX())/(o+1),a.getY()+(t.getY()-r.getY())/(o+1));if(!this.isValid(c))return this.isValid(d)?d:null;if(!this.isValid(d))return c;var f=this.transitionsBetween(l,c)+this.transitionsBetween(u,c),m=this.transitionsBetween(l,d)+this.transitionsBetween(u,d);return f>m?c:d},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a)+1,o=this.transitionsBetween(i,a)+1,l=n.shiftPoint(t,r,o*4),u=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(l,a)+1,o=this.transitionsBetween(u,a)+1,(s&1)===1&&(s+=1),(o&1)===1&&(o+=1);var c=(t.getX()+r.getX()+i.getX()+a.getX())/4,d=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,c,d),r=n.moveAway(r,c,d),i=n.moveAway(i,c,d),a=n.moveAway(a,c,d);var f,m;return l=n.shiftPoint(t,r,o*4),l=n.shiftPoint(l,a,s*4),f=n.shiftPoint(r,t,o*4),f=n.shiftPoint(f,i,s*4),u=n.shiftPoint(i,a,o*4),u=n.shiftPoint(u,r,s*4),m=n.shiftPoint(a,i,o*4),m=n.shiftPoint(m,t,s*4),[l,f,u,m]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,s,o){var l=b4.getInstance();return l.sampleGrid(e,s,o,.5,.5,s-.5,.5,s-.5,o-.5,.5,o-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),s=Math.trunc(t.getY()),o=Math.abs(s-i)>Math.abs(a-r);if(o){var l=r;r=i,i=l,l=a,a=s,s=l}for(var u=Math.abs(a-r),c=Math.abs(s-i),d=-u/2,f=i<s?1:-1,m=r<a?1:-1,v=0,_=this.image.get(o?i:r,o?r:i),w=r,x=i;w!==a;w+=m){var S=this.image.get(o?x:w,o?w:x);if(S!==_&&(v++,_=S),d+=c,d>0){if(x===s)break;x+=f,d-=u}}return v},n}(),wA=function(){function n(){this.decoder=new N4e}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has($r.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var s=new R4e(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var o=r.getRawBytes(),l=new Cs(r.getText(),o,8*o.length,i,nn.DATA_MATRIX,qr.currentTimeMillis()),u=r.getByteSegments();u!=null&&l.putMetadata(za.BYTE_SEGMENTS,u);var c=r.getECLevel();return c!=null&&l.putMetadata(za.ERROR_CORRECTION_LEVEL,c),l},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new et;var i=this.moduleSize(t,e),a=t[1],s=r[1],o=t[0],l=r[0],u=(l-o+1)/i,c=(s-a+1)/i;if(u<=0||c<=0)throw new et;var d=i/2;a+=d,o+=d;for(var f=new Sc(u,c),m=0;m<c;m++)for(var v=a+m*i,_=0;_<u;_++)e.get(o+_*i,v)&&f.set(_,m);return f},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new et;var s=i-e[0];if(s===0)throw new et;return s},n.NO_POINTS=[],n}(),D4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){D4e(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new wA,t)||this}return e})(gy);var F0;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(F0||(F0={}));var L4e=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new Oi(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new rn;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(F0.L,"L",1),n.M=new n(F0.M,"M",0),n.Q=new n(F0.Q,"Q",3),n.H=new n(F0.H,"H",2),n}(),O4e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lte=function(){function n(e){this.errorCorrectionLevel=L4e.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return Hn.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,s=0;try{for(var o=O4e(n.FORMAT_INFO_DECODE_LOOKUP),l=o.next();!l.done;l=o.next()){var u=l.value,c=u[0];if(c===e||c===t)return new n(u[1]);var d=n.numBitsDiffering(e,c);d<a&&(s=u[1],a=d),e!==t&&(d=n.numBitsDiffering(t,c),d<a&&(s=u[1],a=d))}}catch(f){r={error:f}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),F4e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},De=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=F4e(i),s=a.next();!s.done;s=a.next()){var o=s.value;r+=o.getCount()}}catch(l){e={error:l}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),ae=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),j4e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ym=function(){function n(e,t){for(var r,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var o=0,l=a[0].getECCodewordsPerBlock(),u=a[0].getECBlocks();try{for(var c=j4e(u),d=c.next();!d.done;d=c.next()){var f=d.value;o+=f.getCount()*(f.getDataCodewords()+l)}}catch(m){r={error:m}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}this.totalCodewords=o}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new _t;try{return this.getVersionForNumber((e-17)/4)}catch{throw new _t}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new rn;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var s=Lte.numBitsDiffering(e,a);s<t&&(r=i+7,t=s)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Sc(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new De(7,new ae(1,19)),new De(10,new ae(1,16)),new De(13,new ae(1,13)),new De(17,new ae(1,9))),new n(2,Int32Array.from([6,18]),new De(10,new ae(1,34)),new De(16,new ae(1,28)),new De(22,new ae(1,22)),new De(28,new ae(1,16))),new n(3,Int32Array.from([6,22]),new De(15,new ae(1,55)),new De(26,new ae(1,44)),new De(18,new ae(2,17)),new De(22,new ae(2,13))),new n(4,Int32Array.from([6,26]),new De(20,new ae(1,80)),new De(18,new ae(2,32)),new De(26,new ae(2,24)),new De(16,new ae(4,9))),new n(5,Int32Array.from([6,30]),new De(26,new ae(1,108)),new De(24,new ae(2,43)),new De(18,new ae(2,15),new ae(2,16)),new De(22,new ae(2,11),new ae(2,12))),new n(6,Int32Array.from([6,34]),new De(18,new ae(2,68)),new De(16,new ae(4,27)),new De(24,new ae(4,19)),new De(28,new ae(4,15))),new n(7,Int32Array.from([6,22,38]),new De(20,new ae(2,78)),new De(18,new ae(4,31)),new De(18,new ae(2,14),new ae(4,15)),new De(26,new ae(4,13),new ae(1,14))),new n(8,Int32Array.from([6,24,42]),new De(24,new ae(2,97)),new De(22,new ae(2,38),new ae(2,39)),new De(22,new ae(4,18),new ae(2,19)),new De(26,new ae(4,14),new ae(2,15))),new n(9,Int32Array.from([6,26,46]),new De(30,new ae(2,116)),new De(22,new ae(3,36),new ae(2,37)),new De(20,new ae(4,16),new ae(4,17)),new De(24,new ae(4,12),new ae(4,13))),new n(10,Int32Array.from([6,28,50]),new De(18,new ae(2,68),new ae(2,69)),new De(26,new ae(4,43),new ae(1,44)),new De(24,new ae(6,19),new ae(2,20)),new De(28,new ae(6,15),new ae(2,16))),new n(11,Int32Array.from([6,30,54]),new De(20,new ae(4,81)),new De(30,new ae(1,50),new ae(4,51)),new De(28,new ae(4,22),new ae(4,23)),new De(24,new ae(3,12),new ae(8,13))),new n(12,Int32Array.from([6,32,58]),new De(24,new ae(2,92),new ae(2,93)),new De(22,new ae(6,36),new ae(2,37)),new De(26,new ae(4,20),new ae(6,21)),new De(28,new ae(7,14),new ae(4,15))),new n(13,Int32Array.from([6,34,62]),new De(26,new ae(4,107)),new De(22,new ae(8,37),new ae(1,38)),new De(24,new ae(8,20),new ae(4,21)),new De(22,new ae(12,11),new ae(4,12))),new n(14,Int32Array.from([6,26,46,66]),new De(30,new ae(3,115),new ae(1,116)),new De(24,new ae(4,40),new ae(5,41)),new De(20,new ae(11,16),new ae(5,17)),new De(24,new ae(11,12),new ae(5,13))),new n(15,Int32Array.from([6,26,48,70]),new De(22,new ae(5,87),new ae(1,88)),new De(24,new ae(5,41),new ae(5,42)),new De(30,new ae(5,24),new ae(7,25)),new De(24,new ae(11,12),new ae(7,13))),new n(16,Int32Array.from([6,26,50,74]),new De(24,new ae(5,98),new ae(1,99)),new De(28,new ae(7,45),new ae(3,46)),new De(24,new ae(15,19),new ae(2,20)),new De(30,new ae(3,15),new ae(13,16))),new n(17,Int32Array.from([6,30,54,78]),new De(28,new ae(1,107),new ae(5,108)),new De(28,new ae(10,46),new ae(1,47)),new De(28,new ae(1,22),new ae(15,23)),new De(28,new ae(2,14),new ae(17,15))),new n(18,Int32Array.from([6,30,56,82]),new De(30,new ae(5,120),new ae(1,121)),new De(26,new ae(9,43),new ae(4,44)),new De(28,new ae(17,22),new ae(1,23)),new De(28,new ae(2,14),new ae(19,15))),new n(19,Int32Array.from([6,30,58,86]),new De(28,new ae(3,113),new ae(4,114)),new De(26,new ae(3,44),new ae(11,45)),new De(26,new ae(17,21),new ae(4,22)),new De(26,new ae(9,13),new ae(16,14))),new n(20,Int32Array.from([6,34,62,90]),new De(28,new ae(3,107),new ae(5,108)),new De(26,new ae(3,41),new ae(13,42)),new De(30,new ae(15,24),new ae(5,25)),new De(28,new ae(15,15),new ae(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new De(28,new ae(4,116),new ae(4,117)),new De(26,new ae(17,42)),new De(28,new ae(17,22),new ae(6,23)),new De(30,new ae(19,16),new ae(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new De(28,new ae(2,111),new ae(7,112)),new De(28,new ae(17,46)),new De(30,new ae(7,24),new ae(16,25)),new De(24,new ae(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new De(30,new ae(4,121),new ae(5,122)),new De(28,new ae(4,47),new ae(14,48)),new De(30,new ae(11,24),new ae(14,25)),new De(30,new ae(16,15),new ae(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new De(30,new ae(6,117),new ae(4,118)),new De(28,new ae(6,45),new ae(14,46)),new De(30,new ae(11,24),new ae(16,25)),new De(30,new ae(30,16),new ae(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new De(26,new ae(8,106),new ae(4,107)),new De(28,new ae(8,47),new ae(13,48)),new De(30,new ae(7,24),new ae(22,25)),new De(30,new ae(22,15),new ae(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new De(28,new ae(10,114),new ae(2,115)),new De(28,new ae(19,46),new ae(4,47)),new De(28,new ae(28,22),new ae(6,23)),new De(30,new ae(33,16),new ae(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new De(30,new ae(8,122),new ae(4,123)),new De(28,new ae(22,45),new ae(3,46)),new De(30,new ae(8,23),new ae(26,24)),new De(30,new ae(12,15),new ae(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new De(30,new ae(3,117),new ae(10,118)),new De(28,new ae(3,45),new ae(23,46)),new De(30,new ae(4,24),new ae(31,25)),new De(30,new ae(11,15),new ae(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new De(30,new ae(7,116),new ae(7,117)),new De(28,new ae(21,45),new ae(7,46)),new De(30,new ae(1,23),new ae(37,24)),new De(30,new ae(19,15),new ae(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new De(30,new ae(5,115),new ae(10,116)),new De(28,new ae(19,47),new ae(10,48)),new De(30,new ae(15,24),new ae(25,25)),new De(30,new ae(23,15),new ae(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new De(30,new ae(13,115),new ae(3,116)),new De(28,new ae(2,46),new ae(29,47)),new De(30,new ae(42,24),new ae(1,25)),new De(30,new ae(23,15),new ae(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new De(30,new ae(17,115)),new De(28,new ae(10,46),new ae(23,47)),new De(30,new ae(10,24),new ae(35,25)),new De(30,new ae(19,15),new ae(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new De(30,new ae(17,115),new ae(1,116)),new De(28,new ae(14,46),new ae(21,47)),new De(30,new ae(29,24),new ae(19,25)),new De(30,new ae(11,15),new ae(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new De(30,new ae(13,115),new ae(6,116)),new De(28,new ae(14,46),new ae(23,47)),new De(30,new ae(44,24),new ae(7,25)),new De(30,new ae(59,16),new ae(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new De(30,new ae(12,121),new ae(7,122)),new De(28,new ae(12,47),new ae(26,48)),new De(30,new ae(39,24),new ae(14,25)),new De(30,new ae(22,15),new ae(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new De(30,new ae(6,121),new ae(14,122)),new De(28,new ae(6,47),new ae(34,48)),new De(30,new ae(46,24),new ae(10,25)),new De(30,new ae(2,15),new ae(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new De(30,new ae(17,122),new ae(4,123)),new De(28,new ae(29,46),new ae(14,47)),new De(30,new ae(49,24),new ae(10,25)),new De(30,new ae(24,15),new ae(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new De(30,new ae(4,122),new ae(18,123)),new De(28,new ae(13,46),new ae(32,47)),new De(30,new ae(48,24),new ae(14,25)),new De(30,new ae(42,15),new ae(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new De(30,new ae(20,117),new ae(4,118)),new De(28,new ae(40,47),new ae(7,48)),new De(30,new ae(43,24),new ae(22,25)),new De(30,new ae(10,15),new ae(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new De(30,new ae(19,118),new ae(6,119)),new De(28,new ae(18,47),new ae(31,48)),new De(30,new ae(34,24),new ae(34,25)),new De(30,new ae(20,15),new ae(61,16)))],n}(),wa;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(wa||(wa={}));var g7=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[wa.DATA_MASK_000,new n(wa.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[wa.DATA_MASK_001,new n(wa.DATA_MASK_001,function(e,t){return(e&1)===0})],[wa.DATA_MASK_010,new n(wa.DATA_MASK_010,function(e,t){return t%3===0})],[wa.DATA_MASK_011,new n(wa.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[wa.DATA_MASK_100,new n(wa.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[wa.DATA_MASK_101,new n(wa.DATA_MASK_101,function(e,t){return e*t%6===0})],[wa.DATA_MASK_110,new n(wa.DATA_MASK_110,function(e,t){return e*t%6<3})],[wa.DATA_MASK_111,new n(wa.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),B4e=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new _t;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,s=i-7,r=i-1;r>=s;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=Lte.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new _t},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return ym.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,a,r);var o=ym.decodeVersionInformation(r);if(o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;r=0;for(var s=5;s>=0;s--)for(var a=e-9;a>=i;a--)r=this.copyBit(s,a,r);if(o=ym.decodeVersionInformation(r),o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;throw new _t},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=g7.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),s=!0,o=new Uint8Array(t.getTotalCodewords()),l=0,u=0,c=0,d=i-1;d>0;d-=2){d===6&&d--;for(var f=0;f<i;f++)for(var m=s?i-1-f:f,v=0;v<2;v++)a.get(d-v,m)||(c++,u<<=1,this.bitMatrix.get(d-v,m)&&(u|=1),c===8&&(o[l++]=u,c=0,u=0));s=!s}if(l!==t.getTotalCodewords())throw new _t;return o},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=g7.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),v7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},U4e=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,s,o;if(e.length!==t.getTotalCodewords())throw new rn;var l=t.getECBlocksForLevel(r),u=0,c=l.getECBlocks();try{for(var d=v7(c),f=d.next();!f.done;f=d.next()){var m=f.value;u+=m.getCount()}}catch(H){i={error:H}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}var v=new Array(u),_=0;try{for(var w=v7(c),x=w.next();!x.done;x=w.next())for(var m=x.value,S=0;S<m.getCount();S++){var E=m.getDataCodewords(),T=l.getECCodewordsPerBlock()+E;v[_++]=new n(E,new Uint8Array(T))}}catch(H){s={error:H}}finally{try{x&&!x.done&&(o=w.return)&&o.call(w)}finally{if(s)throw s.error}}for(var D=v[0].codewords.length,F=v.length-1;F>=0;){var P=v[F].codewords.length;if(P===D)break;F--}F++;for(var N=D-l.getECCodewordsPerBlock(),I=0,S=0;S<N;S++)for(var R=0;R<_;R++)v[R].codewords[S]=e[I++];for(var R=F;R<_;R++)v[R].codewords[N]=e[I++];for(var B=v[0].codewords.length,S=N;S<B;S++)for(var R=0;R<_;R++){var G=R<F?S:S+1;v[R].codewords[G]=e[I++]}return v},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),pl;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(pl||(pl={}));var ni=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new rn;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(pl.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(pl.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(pl.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(pl.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(pl.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(pl.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(pl.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(pl.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(pl.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(pl.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),V4e=function(){function n(){}return n.decode=function(e,t,r,i){var a=new Dte(e),s=new Bn,o=new Array,l=-1,u=-1;try{var c=null,d=!1,f=void 0;do{if(a.available()<4)f=ni.TERMINATOR;else{var m=a.readBits(4);f=ni.forBits(m)}switch(f){case ni.TERMINATOR:break;case ni.FNC1_FIRST_POSITION:case ni.FNC1_SECOND_POSITION:d=!0;break;case ni.STRUCTURED_APPEND:if(a.available()<16)throw new _t;l=a.readBits(8),u=a.readBits(8);break;case ni.ECI:var v=n.parseECIValue(a);if(c=ua.getCharacterSetECIByValue(v),c===null)throw new _t;break;case ni.HANZI:var _=a.readBits(4),w=a.readBits(f.getCharacterCountBits(t));_===n.GB2312_SUBSET&&n.decodeHanziSegment(a,s,w);break;default:var x=a.readBits(f.getCharacterCountBits(t));switch(f){case ni.NUMERIC:n.decodeNumericSegment(a,s,x);break;case ni.ALPHANUMERIC:n.decodeAlphanumericSegment(a,s,x,d);break;case ni.BYTE:n.decodeByteSegment(a,s,x,c,o,i);break;case ni.KANJI:n.decodeKanjiSegment(a,s,x);break;default:throw new _t}break}}while(f!==ni.TERMINATOR)}catch{throw new _t}return new Lk(e,s.toString(),o.length===0?null:o,r===null?null:r.toString(),l,u)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new _t;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),o=s/96<<8&4294967295|s%96;o<959?o+=41377:o+=42657,i[a]=o>>8&255,i[a+1]=o&255,a+=2,r--}try{t.append(kl.decode(i,nr.GB2312))}catch(l){throw new _t(l)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new _t;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),o=s/192<<8&4294967295|s%192;o<7936?o+=33088:o+=49472,i[a]=o>>8,i[a+1]=o,a+=2,r--}try{t.append(kl.decode(i,nr.SHIFT_JIS))}catch(l){throw new _t(l)}},n.decodeByteSegment=function(e,t,r,i,a,s){if(8*r>e.available())throw new _t;for(var o=new Uint8Array(r),l=0;l<r;l++)o[l]=e.readBits(8);var u;i===null?u=nr.guessEncoding(o,s):u=i.getName();try{t.append(kl.decode(o,u))}catch(c){throw new _t(c)}a.push(o)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new _t;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new _t;var s=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(s/45))),t.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new _t;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var o=a;o<t.length();o++)t.charAt(o)==="%"&&(o<t.length()-1&&t.charAt(o+1)==="%"?t.deleteCharAt(o+1):t.setCharAt(o,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new _t;var i=e.readBits(10);if(i>=1e3)throw new _t;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new _t;var a=e.readBits(7);if(a>=100)throw new _t;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new _t;var s=e.readBits(4);if(s>=10)throw new _t;t.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(e){var t=e.readBits(8);if(!(t&128))return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new _t},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),Ote=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),y7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},z4e=function(){function n(){this.rsDecoder=new Ok(bo.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Sc.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new B4e(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new Ote(!0)),a}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,s,o=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),c=U4e.getDataBlocks(u,o,l),d=0;try{for(var f=y7(c),m=f.next();!m.done;m=f.next()){var v=m.value;d+=v.getNumDataCodewords()}}catch(F){r={error:F}}finally{try{m&&!m.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}var _=new Uint8Array(d),w=0;try{for(var x=y7(c),S=x.next();!S.done;S=x.next()){var v=S.value,E=v.getCodewords(),T=v.getNumDataCodewords();this.correctErrors(E,T);for(var D=0;D<T;D++)_[w++]=E[D]}}catch(F){a={error:F}}finally{try{S&&!S.done&&(s=x.return)&&s.call(x)}finally{if(a)throw a.error}}return V4e.decode(_,o,l,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Ki}for(var i=0;i<t;i++)e[i]=r[i]},n}(),H4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),G4e=function(n){H4e(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,s=(this.getY()+t)/2,o=(this.estimatedModuleSize+i)/2;return new e(a,s,o)},e}(Kt),W4e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},q4e=function(){function n(e,t,r,i,a,s,o){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,s=new Int32Array(3),o=this.image,l=0;l<t;l++){var u=a+(l&1?-Math.floor((l+1)/2):Math.floor((l+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var c=e;c<i&&!o.get(c,u);)c++;for(var d=0;c<i;){if(o.get(c,u))if(d===1)s[1]++;else if(d===2){if(this.foundPatternCross(s)){var f=this.handlePossibleCenter(s,u,c);if(f!==null)return f}s[0]=s[2],s[1]=1,s[2]=0,d=1}else s[++d]++;else d===1&&d++,s[d]++;c++}if(this.foundPatternCross(s)){var f=this.handlePossibleCenter(s,u,i);if(f!==null)return f}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new et},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,s=a.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var l=e;l>=0&&a.get(t,l)&&o[1]<=r;)o[1]++,l--;if(l<0||o[1]>r)return NaN;for(;l>=0&&!a.get(t,l)&&o[0]<=r;)o[0]++,l--;if(o[0]>r)return NaN;for(l=e+1;l<s&&a.get(t,l)&&o[1]<=r;)o[1]++,l++;if(l===s||o[1]>r)return NaN;for(;l<s&&!a.get(t,l)&&o[2]<=r;)o[2]++,l++;if(o[2]>r)return NaN;var u=o[0]+o[1]+o[2];return 5*Math.abs(u-i)>=2*i?NaN:this.foundPatternCross(o)?n.centerFromEnd(o,l):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,s=e[0]+e[1]+e[2],o=n.centerFromEnd(e,r),l=this.crossCheckVertical(t,o,2*e[1],s);if(!isNaN(l)){var u=(e[0]+e[1]+e[2])/3;try{for(var c=W4e(this.possibleCenters),d=c.next();!d.done;d=c.next()){var f=d.value;if(f.aboutEquals(u,l,o))return f.combineEstimate(l,o,u)}}catch(v){i={error:v}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}var m=new G4e(o,l,u);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null},n}(),$4e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),X4e=function(n){$4e(e,n);function e(t,r,i,a){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s.count=a,a===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,s=(this.count*this.getX()+r)/a,o=(this.count*this.getY()+t)/a,l=(this.count*this.estimatedModuleSize+i)/a;return new e(s,o,l,a)},e}(Kt),K4e=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),cx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y4e=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get($r.TRY_HARDER)!==void 0,r=e!=null&&e.get($r.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),s=i.getWidth(),o=Math.floor(3*a/(4*n.MAX_MODULES));(o<n.MIN_SKIP||t)&&(o=n.MIN_SKIP);for(var l=!1,u=new Int32Array(5),c=o-1;c<a&&!l;c+=o){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var d=0,f=0;f<s;f++)if(i.get(f,c))(d&1)===1&&d++,u[d]++;else if(d&1)u[d]++;else if(d===4)if(n.foundPatternCross(u)){var m=this.handlePossibleCenter(u,c,f,r);if(m===!0)if(o=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var v=this.findRowSkip();v>u[2]&&(c+=v-u[2]-o,f=s-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,d=3;continue}d=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,d=3;else u[++d]++;if(n.foundPatternCross(u)){var m=this.handlePossibleCenter(u,c,s,r);m===!0&&(o=u[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var _=this.selectBestPatterns();return Kt.orderBestPatterns(_),new K4e(_)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,s=a/2;return Math.abs(a-e[0])<s&&Math.abs(a-e[1])<s&&Math.abs(3*a-e[2])<3*s&&Math.abs(a-e[3])<s&&Math.abs(a-e[4])<s},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),s=0,o=this.image;e>=s&&t>=s&&o.get(t-s,e-s);)a[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!o.get(t-s,e-s)&&a[1]<=r;)a[1]++,s++;if(e<s||t<s||a[1]>r)return!1;for(;e>=s&&t>=s&&o.get(t-s,e-s)&&a[0]<=r;)a[0]++,s++;if(a[0]>r)return!1;var l=o.getHeight(),u=o.getWidth();for(s=1;e+s<l&&t+s<u&&o.get(t+s,e+s);)a[2]++,s++;if(e+s>=l||t+s>=u)return!1;for(;e+s<l&&t+s<u&&!o.get(t+s,e+s)&&a[3]<r;)a[3]++,s++;if(e+s>=l||t+s>=u||a[3]>=r)return!1;for(;e+s<l&&t+s<u&&o.get(t+s,e+s)&&a[4]<r;)a[4]++,s++;if(a[4]>=r)return!1;var c=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(c-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,s=a.getHeight(),o=this.getCrossCheckStateCount(),l=e;l>=0&&a.get(t,l);)o[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(t,l)&&o[1]<=r;)o[1]++,l--;if(l<0||o[1]>r)return NaN;for(;l>=0&&a.get(t,l)&&o[0]<=r;)o[0]++,l--;if(o[0]>r)return NaN;for(l=e+1;l<s&&a.get(t,l);)o[2]++,l++;if(l===s)return NaN;for(;l<s&&!a.get(t,l)&&o[3]<r;)o[3]++,l++;if(l===s||o[3]>=r)return NaN;for(;l<s&&a.get(t,l)&&o[4]<r;)o[4]++,l++;if(o[4]>=r)return NaN;var u=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(u-i)>=2*i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,l):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,s=a.getWidth(),o=this.getCrossCheckStateCount(),l=e;l>=0&&a.get(l,t);)o[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(l,t)&&o[1]<=r;)o[1]++,l--;if(l<0||o[1]>r)return NaN;for(;l>=0&&a.get(l,t)&&o[0]<=r;)o[0]++,l--;if(o[0]>r)return NaN;for(l=e+1;l<s&&a.get(l,t);)o[2]++,l++;if(l===s)return NaN;for(;l<s&&!a.get(l,t)&&o[3]<r;)o[3]++,l++;if(l===s||o[3]>=r)return NaN;for(;l<s&&a.get(l,t)&&o[4]<r;)o[4]++,l++;if(o[4]>=r)return NaN;var u=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(u-i)>=i?NaN:n.foundPatternCross(o)?n.centerFromEnd(o,l):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],s=n.centerFromEnd(e,r),o=this.crossCheckVertical(t,Math.floor(s),e[2],a);if(!isNaN(o)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(o),e[2],a),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(o),Math.floor(s),e[2],a)))){for(var l=a/7,u=!1,c=this.possibleCenters,d=0,f=c.length;d<f;d++){var m=c[d];if(m.aboutEquals(l,o,s)){c[d]=m.combineEstimate(o,s,l),u=!0;break}}if(!u){var v=new X4e(s,o,l);c.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=cx(this.possibleCenters),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.getCount()>=n.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2)}}catch(l){e={error:l}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,s=0,o=this.possibleCenters.length;try{for(var l=cx(this.possibleCenters),u=l.next();!u.done;u=l.next()){var c=u.value;c.getCount()>=n.CENTER_QUORUM&&(a++,s+=c.getEstimatedModuleSize())}}catch(_){e={error:_}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}if(a<3)return!1;var d=s/o,f=0;try{for(var m=cx(this.possibleCenters),v=m.next();!v.done;v=m.next()){var c=v.value;f+=Math.abs(c.getEstimatedModuleSize()-d)}}catch(_){r={error:_}}finally{try{v&&!v.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}return f<=.05*s},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new et;var s=this.possibleCenters,o;if(a>3){var l=0,u=0;try{for(var c=cx(this.possibleCenters),d=c.next();!d.done;d=c.next()){var f=d.value,m=f.getEstimatedModuleSize();l+=m,u+=m*m}}catch(D){e={error:D}}finally{try{d&&!d.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}o=l/a;var v=Math.sqrt(u/a-o*o);s.sort(function(D,F){var P=Math.abs(F.getEstimatedModuleSize()-o),N=Math.abs(D.getEstimatedModuleSize()-o);return P<N?-1:P>N?1:0});for(var _=Math.max(.2*o,v),w=0;w<s.length&&s.length>3;w++){var x=s[w];Math.abs(x.getEstimatedModuleSize()-o)>_&&(s.splice(w,1),w--)}}if(s.length>3){var l=0;try{for(var S=cx(s),E=S.next();!E.done;E=S.next()){var T=E.value;l+=T.getEstimatedModuleSize()}}catch(F){r={error:F}}finally{try{E&&!E.done&&(i=S.return)&&i.call(S)}finally{if(r)throw r.error}}o=l/s.length,s.sort(function(F,P){if(P.getCount()===F.getCount()){var N=Math.abs(P.getEstimatedModuleSize()-o),I=Math.abs(F.getEstimatedModuleSize()-o);return N<I?1:N>I?-1:0}else return P.getCount()-F.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),Z4e=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get($r.NEED_RESULT_POINT_CALLBACK);var t=new Y4e(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new et("No pattern found in proccess finder.");var s=n.computeDimension(t,r,i,a),o=ym.getProvisionalVersionForDimension(s),l=o.getDimensionForVersion()-7,u=null;if(o.getAlignmentPatternCenters().length>0)for(var c=r.getX()-t.getX()+i.getX(),d=r.getY()-t.getY()+i.getY(),f=1-3/l,m=Math.floor(t.getX()+f*(c-t.getX())),v=Math.floor(t.getY()+f*(d-t.getY())),_=4;_<=16;_<<=1)try{u=this.findAlignmentInRegion(a,m,v,_);break}catch(E){if(!(E instanceof et))throw E}var w=n.createTransform(t,r,i,u,s),x=n.sampleGrid(this.image,w,s),S;return u===null?S=[i,t,r]:S=[i,t,r,u],new w4(x,S)},n.createTransform=function(e,t,r,i,a){var s=a-3.5,o,l,u,c;return i!==null?(o=i.getX(),l=i.getY(),u=s-3,c=u):(o=t.getX()-e.getX()+r.getX(),l=t.getY()-e.getY()+r.getY(),u=s,c=s),Ite.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,u,c,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),o,l,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=b4.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=fr.round(Kt.distance(e,t)/i),s=fr.round(Kt.distance(e,r)/i),o=Math.floor((a+s)/2)+7;switch(o&3){case 0:o++;break;case 2:o--;break;case 3:throw new et("Dimensions could be not found.")}return o},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),s=1,o=e-(r-e);o<0?(s=e/(e-o),o=0):o>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);var l=Math.floor(t-(i-t)*s);return s=1,l<0?(s=t/(t-l),l=0):l>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(l-t),l=this.image.getHeight()-1),o=Math.floor(e+(o-e)*s),a+=this.sizeOfBlackWhiteBlackRun(e,t,o,l),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var s=e;e=t,t=s,s=r,r=i,i=s}for(var o=Math.abs(r-e),l=Math.abs(i-t),u=-o/2,c=e<r?1:-1,d=t<i?1:-1,f=0,m=r+c,v=e,_=t;v!==m;v+=c){var w=a?_:v,x=a?v:_;if(f===1===this.image.get(w,x)){if(f===2)return fr.distance(v,_,e,t);f++}if(u+=l,u>0){if(_===i)break;_+=d,u-=o}}return f===2?fr.distance(r+c,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),s=Math.max(0,t-a),o=Math.min(this.image.getWidth()-1,t+a);if(o-s<e*3)throw new et("Alignment top exceeds estimated module size.");var l=Math.max(0,r-a),u=Math.min(this.image.getHeight()-1,r+a);if(u-l<e*3)throw new et("Alignment bottom exceeds estimated module size.");var c=new q4e(this.image,s,l,o-s,u-l,e,this.resultPointCallback);return c.find()},n}(),bA=function(){function n(){this.decoder=new z4e}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get($r.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var s=new Z4e(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}r.getOther()instanceof Ote&&r.getOther().applyMirroredCorrection(i);var o=new Cs(r.getText(),r.getRawBytes(),void 0,i,nn.QR_CODE,void 0),l=r.getByteSegments();l!==null&&o.putMetadata(za.BYTE_SEGMENTS,l);var u=r.getECLevel();return u!==null&&o.putMetadata(za.ERROR_CORRECTION_LEVEL,u),r.hasStructuredAppend()&&(o.putMetadata(za.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),o.putMetadata(za.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),o},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new et;var i=this.moduleSize(t,e),a=t[1],s=r[1],o=t[0],l=r[0];if(o>=l||a>=s)throw new et;if(s-a!==l-o&&(l=o+(s-a),l>=e.getWidth()))throw new et;var u=Math.round((l-o+1)/i),c=Math.round((s-a+1)/i);if(u<=0||c<=0)throw new et;if(c!==u)throw new et;var d=Math.floor(i/2);a+=d,o+=d;var f=o+Math.floor((u-1)*i)-l;if(f>0){if(f>d)throw new et;o-=f}var m=a+Math.floor((c-1)*i)-s;if(m>0){if(m>d)throw new et;a-=m}for(var v=new Sc(u,c),_=0;_<c;_++)for(var w=a+Math.floor(_*i),x=0;x<u;x++)e.get(o+Math.floor(x*i),w)&&v.set(x,_);return v},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],s=e[1],o=!0,l=0;a<i&&s<r;){if(o!==t.get(a,s)){if(++l===5)break;o=!o}a++,s++}if(a===i||s===r)throw new et;return(a-e[0])/7},n.NO_POINTS=new Array,n}(),Q4e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ir=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return fr.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var s=Q4e(e),o=s.next();!o.done;o=s.next()){var l=o.value;i[a++]=l}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=ca.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),J4e=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),eFe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tFe=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new J4e(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,s=0,o=0,l=!1;s<t.getHeight();){var u=n.findVertices(t,s,o);if(u[0]==null&&u[3]==null){if(!l)break;l=!1,o=0;try{for(var c=(r=void 0,eFe(a)),d=c.next();!d.done;d=c.next()){var f=d.value;f[1]!=null&&(s=Math.trunc(Math.max(s,f[1].getY()))),f[3]!=null&&(s=Math.max(s,Math.trunc(f[3].getY())))}}catch(m){r={error:m}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(l=!0,a.push(u),!e)break;u[2]!=null?(o=Math.trunc(u[2].getX()),s=Math.trunc(u[2].getY())):(o=Math.trunc(u[4].getX()),s=Math.trunc(u[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,s){for(var o=new Array(4),l=!1,u=new Int32Array(s.length);i<t;i+=n.ROW_STEP){var c=n.findGuardPattern(e,a,i,r,!1,s,u);if(c!=null){for(;i>0;){var d=n.findGuardPattern(e,a,--i,r,!1,s,u);if(d!=null)c=d;else{i++;break}}o[0]=new Kt(c[0],i),o[1]=new Kt(c[1],i),l=!0;break}}var f=i+1;if(l){for(var m=0,d=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);f<t;f++){var c=n.findGuardPattern(e,d[0],f,r,!1,s,u);if(c!=null&&Math.abs(d[0]-c[0])<n.MAX_PATTERN_DRIFT&&Math.abs(d[1]-c[1])<n.MAX_PATTERN_DRIFT)d=c,m=0;else{if(m>n.SKIPPED_ROW_COUNT_MAX)break;m++}}f-=m+1,o[2]=new Kt(d[0],f),o[3]=new Kt(d[1],f)}return f-i<n.BARCODE_MIN_HEIGHT&&ca.fill(o,null),o},n.findGuardPattern=function(e,t,r,i,a,s,o){ca.fillWithin(o,0,o.length,0);for(var l=t,u=0;e.get(l,r)&&l>0&&u++<n.MAX_PIXEL_DRIFT;)l--;for(var c=l,d=0,f=s.length,m=a;c<i;c++){var v=e.get(c,r);if(v!==m)o[d]++;else{if(d===f-1){if(n.patternMatchVariance(o,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([l,c]);l+=o[0]+o[1],qr.arraycopy(o,2,o,0,d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,m=!m}}return d===f-1&&n.patternMatchVariance(o,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([l,c-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=t[o];if(a<s)return 1/0;var l=a/s;r*=l;for(var u=0,c=0;c<i;c++){var d=e[c],f=t[c]*l,m=d>f?d-f:f-d;if(m>r)return 1/0;u+=m}return u/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),nFe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jp=function(){function n(e,t){if(t.length===0)throw new rn;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),qr.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=nFe(this.coefficients),s=a.next();!s.done;s=a.next()){var o=s.value;i=this.field.add(i,o)}}catch(d){t={error:d}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var l=this.coefficients[0],u=this.coefficients.length,c=1;c<u;c++)l=this.field.add(this.field.multiply(e,l),this.coefficients[c]);return l},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new rn("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;qr.arraycopy(r,0,a,0,s);for(var o=s;o<r.length;o++)a[o]=this.field.add(t[o-s],r[o]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new rn("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new rn("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),o=0;o<r;o++)for(var l=t[o],u=0;u<a;u++)s[o+u]=this.field.add(s[o+u],this.field.multiply(l,i[u]));return new n(this.field,s)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new rn;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new Bn,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),rFe=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new rn;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new Mte;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),iFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aFe=function(n){iFe(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,s=0;s<t;s++)i.expTable[s]=a,a=a*r%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new Jp(i,new Int32Array([0])),i.one=new Jp(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new rn;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Jp(this,i)},e.PDF417_GF=new e(ir.NUMBER_OF_CODEWORDS,3),e}(rFe),sFe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oFe=function(){function n(){this.field=aFe.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,s=new Jp(this.field,e),o=new Int32Array(t),l=!1,u=t;u>0;u--){var c=s.evaluateAt(this.field.exp(u));o[t-u]=c,c!==0&&(l=!0)}if(!l)return 0;var d=this.field.getOne();if(r!=null)try{for(var f=sFe(r),m=f.next();!m.done;m=f.next()){var v=m.value,_=this.field.exp(e.length-1-v),w=new Jp(this.field,new Int32Array([this.field.subtract(0,_),1]));d=d.multiply(w)}}catch(N){i={error:N}}finally{try{m&&!m.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}for(var x=new Jp(this.field,o),S=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),x,t),E=S[0],T=S[1],D=this.findErrorLocations(E),F=this.findErrorMagnitudes(T,E,D),u=0;u<D.length;u++){var P=e.length-1-this.field.log(D[u]);if(P<0)throw Ki.getChecksumInstance();e[P]=this.field.subtract(e[P],F[u])}return D.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,s=t,o=this.field.getZero(),l=this.field.getOne();s.getDegree()>=Math.round(r/2);){var u=a,c=o;if(a=s,o=l,a.isZero())throw Ki.getChecksumInstance();s=u;for(var d=this.field.getZero(),f=a.getCoefficient(a.getDegree()),m=this.field.inverse(f);s.getDegree()>=a.getDegree()&&!s.isZero();){var v=s.getDegree()-a.getDegree(),_=this.field.multiply(s.getCoefficient(s.getDegree()),m);d=d.add(this.field.buildMonomial(v,_)),s=s.subtract(a.multiplyByMonomial(v,_))}l=d.multiply(o).subtract(c).negative()}var w=l.getCoefficient(0);if(w===0)throw Ki.getChecksumInstance();var x=this.field.inverse(w),S=l.multiply(x),E=s.multiply(x);return[S,E]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw Ki.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),s=1;s<=i;s++)a[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var o=new Jp(this.field,a),l=r.length,u=new Int32Array(l),s=0;s<l;s++){var c=this.field.inverse(r[s]),d=this.field.subtract(0,e.evaluateAt(c)),f=this.field.inverse(o.evaluateAt(c));u[s]=this.field.multiply(d,f)}return u},n}(),qR=function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var s=t==null||r==null,o=i==null||a==null;if(s&&o)throw new et;s?(t=new Kt(0,i.getY()),r=new Kt(0,a.getY())):o&&(i=new Kt(e.getWidth()-1,t.getY()),a=new Kt(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,s=this.topRight,o=this.bottomRight;if(e>0){var l=r?this.topLeft:this.topRight,u=Math.trunc(l.getY()-e);u<0&&(u=0);var c=new Kt(l.getX(),u);r?i=c:s=c}if(t>0){var d=r?this.bottomLeft:this.bottomRight,f=Math.trunc(d.getY()+t);f>=this.image.getHeight()&&(f=this.image.getHeight()-1);var m=new Kt(d.getX(),f);r?a=m:o=m}return new n(this.image,i,a,s,o)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),lFe=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),E4=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(s,o,l,u,c,d){if(s==="%%")return"%";if(t[++r]!==void 0){s=u?parseInt(u.substr(1)):void 0;var f=c?parseInt(c.substr(1)):void 0,m;switch(d){case"s":m=t[r];break;case"c":m=t[r][0];break;case"f":m=parseFloat(t[r]).toFixed(s);break;case"p":m=parseFloat(t[r]).toPrecision(s);break;case"e":m=parseFloat(t[r]).toExponential(s);break;case"x":m=parseInt(t[r]).toString(f||16);break;case"d":m=parseFloat(parseInt(t[r],f||10).toPrecision(s)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(f);for(var v=parseInt(l),_=l&&l[0]+""=="0"?"0":" ";m.length<v;)m=o!==void 0?m+_:_+m;return m}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),uFe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fte=function(){function n(e){this.boundingBox=new qR(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new E4,i=0;try{for(var a=uFe(this.codewords),s=a.next();!s.done;s=a.next()){var o=s.value;if(o==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}}catch(l){e={error:l}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),cFe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dFe=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a},Rx=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(d,f){var m={getKey:function(){return d},getValue:function(){return f}};m.getValue()>r?(r=m.getValue(),i=[],i.push(m.getKey())):m.getValue()===r&&i.push(m.getKey())};try{for(var s=cFe(this.values.entries()),o=s.next();!o.done;o=s.next()){var l=dFe(o.value,2),u=l[0],c=l[1];a(u,c)}}catch(d){e={error:d}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return ir.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),hFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),UI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},x7=function(n){hFe(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=UI(this.getCodewords()),a=i.next();!a.done;a=i.next()){var s=a.value;s!=null&&s.setRowNumberAsRowIndicatorColumn()}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),u=-1,c=1,d=0,f=o;f<l;f++)if(r[f]!=null){var m=r[f],v=m.getRowNumber()-u;if(v===0)d++;else if(v===1)c=Math.max(c,d),d=1,u=m.getRowNumber();else if(v<0||m.getRowNumber()>=t.getRowCount()||v>f)r[f]=null;else{var _=void 0;c>2?_=(c-2)*v:_=v;for(var w=_>=f,x=1;x<=_&&!w;x++)w=r[f-x]!=null;w?r[f]=null:(u=m.getRowNumber(),d=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var s=UI(this.getCodewords()),o=s.next();!o.done;o=s.next()){var l=o.value;if(l!=null){var u=l.getRowNumber();if(u>=a.length)continue;a[u]++}}}catch(c){t={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.getCodewords(),u=-1,c=s;c<o;c++)if(l[c]!=null){var d=l[c];d.setRowNumberAsRowIndicatorColumn();var f=d.getRowNumber()-u;f===0||(f===1?u=d.getRowNumber():d.getRowNumber()>=t.getRowCount()?l[c]=null:u=d.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new Rx,s=new Rx,o=new Rx,l=new Rx;try{for(var u=UI(i),c=u.next();!c.done;c=u.next()){var d=c.value;if(d!=null){d.setRowNumberAsRowIndicatorColumn();var f=d.getValue()%30,m=d.getRowNumber();switch(this._isLeft||(m+=2),m%3){case 0:s.setValue(f*3+1);break;case 1:l.setValue(f/3),o.setValue(f%3);break;case 2:a.setValue(f+1);break}}}}catch(_){t={error:_}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}if(a.getValue().length===0||s.getValue().length===0||o.getValue().length===0||l.getValue().length===0||a.getValue()[0]<1||s.getValue()[0]+o.getValue()[0]<ir.MIN_ROWS_IN_BARCODE||s.getValue()[0]+o.getValue()[0]>ir.MAX_ROWS_IN_BARCODE)return null;var v=new lFe(a.getValue()[0],s.getValue()[0],o.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(i,v),v},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var s=a.getValue()%30,o=a.getRowNumber();if(o>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(Fte),fFe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pFe=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=ir.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=this.barcodeColumnCount+1;s>0&&a<this.ADJUST_ROW_NUMBER_SKIP;s--){var o=this.detectionResultColumns[s].getCodewords()[r];o!=null&&(a=n.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=1;s<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;s++){var o=this.detectionResultColumns[s].getCodewords()[r];o!=null&&(a=n.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var s=r[t],o=this.detectionResultColumns[e-1].getCodewords(),l=o;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=o[t],u[3]=l[t],t>0&&(u[0]=r[t-1],u[4]=o[t-1],u[5]=l[t-1]),t>1&&(u[8]=r[t-2],u[10]=o[t-2],u[11]=l[t-2]),t<r.length-1&&(u[1]=r[t+1],u[6]=o[t+1],u[7]=l[t+1]),t<r.length-2&&(u[9]=r[t+2],u[12]=o[t+2],u[13]=l[t+2]);try{for(var c=fFe(u),d=c.next();!d.done;d=c.next()){var f=d.value;if(n.adjustRowNumber(s,f))return}}catch(m){i={error:m}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new E4,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n}(),mFe=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),gFe=function(){function n(){}return n.initialize=function(){for(var e=0;e<ir.SYMBOL_TABLE.length;e++)for(var t=ir.SYMBOL_TABLE[e],r=t&1,i=0;i<ir.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(ir.BARS_IN_MODULE)),n.RATIOS_TABLE[e][ir.BARS_IN_MODULE-i-1]=Math.fround(a/ir.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=fr.sum(e),r=new Int32Array(ir.BARS_IN_MODULE),i=0,a=0,s=0;s<ir.MODULES_IN_CODEWORD;s++){var o=t/(2*ir.MODULES_IN_CODEWORD)+s*t/ir.MODULES_IN_CODEWORD;a+e[i]<=o&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return ir.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=fr.sum(e),r=new Array(ir.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=HR.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var o=0;o<n.RATIOS_TABLE.length;o++){for(var l=0,u=n.RATIOS_TABLE[o],c=0;c<ir.BARS_IN_MODULE;c++){var d=Math.fround(u[c]-r[c]);if(l+=Math.fround(d*d),l>=a)break}l<a&&(a=l,s=ir.SYMBOL_TABLE[o])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(ir.SYMBOL_TABLE.length).map(function(e){return new Array(ir.BARS_IN_MODULE)}),n}(),vFe=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),_7=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),yFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xFe=function(n){yFe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Po),_Fe=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new xFe;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new _4;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),wFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bFe=function(n){wFe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(Po),SFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),EFe=function(n){SFe(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new rn("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new bFe;i=Hn.MAX_VALUE}this.buf=ca.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new _4;this.ensureCapacity(this.count+i),qr.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return ca.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(_Fe),Nr;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Nr||(Nr={}));function jte(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var I2;function Dh(n){if(typeof I2>"u"&&(I2=jte()),I2===null)throw new Error("BigInt is not supported!");return I2(n)}function AFe(){var n=[];n[0]=Dh(1);var e=Dh(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var TFe=function(){function n(){}return n.decode=function(e,t){var r=new Bn(""),i=ua.ISO8859_1;r.enableDecoding(i);for(var a=1,s=e[a++],o=new vFe;a<e[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(s,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:ua.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,o);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new _t;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)s=e[a++];else throw _t.getFormatInstance()}if(r.length()===0)throw _t.getFormatInstance();var l=new Lk(null,r.toString(),null,t);return l.setOther(o),l},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw _t.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(Hn.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new Bn;t=n.textCompaction(e,t,s),r.setFileId(s.toString());var o=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new Bn;t=n.textCompaction(e,t+1,l),r.setFileName(l.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new Bn;t=n.textCompaction(e,t+1,u),r.setSender(u.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var c=new Bn;t=n.textCompaction(e,t+1,c),r.setAddressee(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var d=new Bn;t=n.numericCompaction(e,t+1,d),r.setSegmentCount(Hn.parseInt(d.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var f=new Bn;t=n.numericCompaction(e,t+1,f),r.setTimestamp(_7.parseLong(f.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var m=new Bn;t=n.numericCompaction(e,t+1,m),r.setChecksum(Hn.parseInt(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var v=new Bn;t=n.numericCompaction(e,t+1,v),r.setFileSize(_7.parseLong(v.toString()));break;default:throw _t.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw _t.getFormatInstance()}if(o!==-1){var _=t-o;r.isLastSegment()&&_--,r.setOptionalData(ca.copyOfRange(e,o,o+_))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),s=0,o=!1;t<e[0]&&!o;){var l=e[t++];if(l<n.TEXT_COMPACTION_MODE_LATCH)i[s]=l/30,i[s+1]=l%30,s+=2;else switch(l){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,o=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[t++],a[s]=l,s++;break}}return n.decodeTextCompaction(i,a,s,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=Nr.ALPHA,s=Nr.ALPHA,o=0;o<r;){var l=e[o],u="";switch(a){case Nr.ALPHA:if(l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case n.LL:a=Nr.LOWER;break;case n.ML:a=Nr.MIXED;break;case n.PS:s=a,a=Nr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Nr.ALPHA;break}break;case Nr.LOWER:if(l<26)u=String.fromCharCode(97+l);else switch(l){case 26:u=" ";break;case n.AS:s=a,a=Nr.ALPHA_SHIFT;break;case n.ML:a=Nr.MIXED;break;case n.PS:s=a,a=Nr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Nr.ALPHA;break}break;case Nr.MIXED:if(l<n.PL)u=n.MIXED_CHARS[l];else switch(l){case n.PL:a=Nr.PUNCT;break;case 26:u=" ";break;case n.LL:a=Nr.LOWER;break;case n.AL:a=Nr.ALPHA;break;case n.PS:s=a,a=Nr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Nr.ALPHA;break}break;case Nr.PUNCT:if(l<n.PAL)u=n.PUNCT_CHARS[l];else switch(l){case n.PAL:a=Nr.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Nr.ALPHA;break}break;case Nr.ALPHA_SHIFT:if(a=s,l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=Nr.ALPHA;break}break;case Nr.PUNCT_SHIFT:if(a=s,l<n.PAL)u=n.PUNCT_CHARS[l];else switch(l){case n.PAL:a=Nr.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Nr.ALPHA;break}break}u!==""&&i.append(u),o++}},n.byteCompaction=function(e,t,r,i,a){var s=new EFe,o=0,l=0,u=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var c=new Int32Array(6),d=t[i++];i<t[0]&&!u;)switch(c[o++]=d,l=900*l+d,d=t[i++],d){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,u=!0;break;default:if(o%5===0&&o>0){for(var f=0;f<6;++f)s.write(Number(Dh(l)>>Dh(8*(5-f))));l=0,o=0}break}i===t[0]&&d<n.TEXT_COMPACTION_MODE_LATCH&&(c[o++]=d);for(var m=0;m<o;m++)s.write(c[m]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!u;){var v=t[i++];if(v<n.TEXT_COMPACTION_MODE_LATCH)o++,l=900*l+v;else switch(v){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,u=!0;break}if(o%5===0&&o>0){for(var f=0;f<6;++f)s.write(Number(Dh(l)>>Dh(8*(5-f))));l=0,o=0}}break}return a.append(kl.decode(s.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var o=e[t++];if(t===e[0]&&(a=!0),o<n.TEXT_COMPACTION_MODE_LATCH)s[i]=o,i++;else switch(o){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||o===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Dh(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Dh(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new _t;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=jte()?AFe():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),dx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kFe=function(){function n(){}return n.decode=function(e,t,r,i,a,s,o){for(var l=new qR(e,t,r,i,a),u=null,c=null,d,f=!0;;f=!1){if(t!=null&&(u=n.getRowIndicatorColumn(e,l,t,!0,s,o)),i!=null&&(c=n.getRowIndicatorColumn(e,l,i,!1,s,o)),d=n.merge(u,c),d==null)throw et.getNotFoundInstance();var m=d.getBoundingBox();if(f&&m!=null&&(m.getMinY()<l.getMinY()||m.getMaxY()>l.getMaxY()))l=m;else break}d.setBoundingBox(l);var v=d.getBarcodeColumnCount()+1;d.setDetectionResultColumn(0,u),d.setDetectionResultColumn(v,c);for(var _=u!=null,w=1;w<=v;w++){var x=_?w:v-w;if(d.getDetectionResultColumn(x)===void 0){var S=void 0;x===0||x===v?S=new x7(l,x===0):S=new Fte(l),d.setDetectionResultColumn(x,S);for(var E=-1,T=E,D=l.getMinY();D<=l.getMaxY();D++){if(E=n.getStartColumn(d,x,D,_),E<0||E>l.getMaxX()){if(T===-1)continue;E=T}var F=n.detectCodeword(e,l.getMinX(),l.getMaxX(),_,E,D,s,o);F!=null&&(S.setCodeword(D,F),T=E,s=Math.min(s,F.getWidth()),o=Math.max(o,F.getWidth()))}}}return n.createDecoderResult(d)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=qR.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new pFe(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),s=0;try{for(var o=dx(i),l=o.next();!l.done;l=o.next()){var u=l.value;if(s+=a-u,u>0)break}}catch(m){t={error:m}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}for(var c=e.getCodewords(),d=0;s>0&&c[d]==null;d++)s--;for(var f=0,d=i.length-1;d>=0&&(f+=a-i[d],!(i[d]>0));d--);for(var d=c.length-1;f>0&&c[d]==null;d--)f--;return e.getBoundingBox().addMissingRows(s,f,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=dx(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=Math.max(i,o)}}catch(l){t={error:l}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,s){for(var o=new x7(t,i),l=0;l<2;l++)for(var u=l===0?1:-1,c=Math.trunc(Math.trunc(r.getX())),d=Math.trunc(Math.trunc(r.getY()));d<=t.getMaxY()&&d>=t.getMinY();d+=u){var f=n.detectCodeword(e,0,e.getWidth(),i,c,d,a,s);f!=null&&(o.setCodeword(d,f),i?c=f.getStartX():c=f.getEndX())}return o},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>ir.MAX_CODEWORDS_IN_BARCODE)throw et.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],s=new Array,o=0;o<e.getBarcodeRowCount();o++)for(var l=0;l<e.getBarcodeColumnCount();l++){var u=t[o][l+1].getValue(),c=o*e.getBarcodeColumnCount()+l;u.length===0?r.push(c):u.length===1?i[c]=u[0]:(s.push(c),a.push(u))}for(var d=new Array(a.length),f=0;f<d.length;f++)d[f]=a[f];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,ir.toIntArray(r),ir.toIntArray(s),d)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var s=new Int32Array(i.length),o=100;o-- >0;){for(var l=0;l<s.length;l++)t[i[l]]=a[l][s[l]];try{return n.decodeCodewords(t,e,r)}catch(c){var u=c instanceof Ki;if(!u)throw c}if(s.length===0)throw Ki.getChecksumInstance();for(var l=0;l<s.length;l++)if(s[l]<a[l].length-1){s[l]++;break}else if(s[l]=0,l===s.length-1)throw Ki.getChecksumInstance()}throw Ki.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),o=0;o<s.length;o++)for(var l=0;l<s[o].length;l++)s[o][l]=new Rx;var u=0;try{for(var c=dx(e.getDetectionResultColumns()),d=c.next();!d.done;d=c.next()){var f=d.value;if(f!=null)try{for(var m=(i=void 0,dx(f.getCodewords())),v=m.next();!v.done;v=m.next()){var _=v.value;if(_!=null){var w=_.getRowNumber();if(w>=0){if(w>=s.length)continue;s[w][u].setValue(_.getValue())}}}}catch(x){i={error:x}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}u++}}catch(x){t={error:x}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return s},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,s,o=i?1:-1,l=null;if(n.isValidBarcodeColumn(e,t-o)&&(l=e.getDetectionResultColumn(t-o).getCodeword(r)),l!=null)return i?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(t).getCodewordNearby(r),l!=null)return i?l.getStartX():l.getEndX();if(n.isValidBarcodeColumn(e,t-o)&&(l=e.getDetectionResultColumn(t-o).getCodewordNearby(r)),l!=null)return i?l.getEndX():l.getStartX();for(var u=0;n.isValidBarcodeColumn(e,t-o);){t-=o;try{for(var c=(a=void 0,dx(e.getDetectionResultColumn(t).getCodewords())),d=c.next();!d.done;d=c.next()){var f=d.value;if(f!=null)return(i?f.getEndX():f.getStartX())+o*u*(f.getEndX()-f.getStartX())}}catch(m){a={error:m}}finally{try{d&&!d.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}u++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,s,o,l){a=n.adjustCodewordStartColumn(e,t,r,i,a,s);var u=n.getModuleBitCount(e,t,r,i,a,s);if(u==null)return null;var c,d=fr.sum(u);if(i)c=a+d;else{for(var f=0;f<u.length/2;f++){var m=u[f];u[f]=u[u.length-1-f],u[u.length-1-f]=m}c=a,a=c-d}if(!n.checkCodewordSkew(d,o,l))return null;var v=gFe.getDecodedValue(u),_=ir.getCodeword(v);return _===-1?null:new mFe(a,c,n.getCodewordBucketNumber(v),_)},n.getModuleBitCount=function(e,t,r,i,a,s){for(var o=a,l=new Int32Array(8),u=0,c=i?1:-1,d=i;(i?o<r:o>=t)&&u<l.length;)e.get(o,s)===d?(l[u]++,o+=c):(u++,d=!d);return u===l.length||o===(i?r:t)&&u===l.length-1?l:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,s){for(var o=a,l=i?-1:1,u=0;u<2;u++){for(;(i?o>=t:o<r)&&i===e.get(o,s);){if(Math.abs(a-o)>n.CODEWORD_SKEW_SIZE)return a;o+=l}l=-l,i=!i}return o},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw _t.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var s=TFe.decode(e,""+t);return s.setErrorsCorrected(a),s.setErasures(r.length),s},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw Ki.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw _t.getFormatInstance();var r=e[0];if(r>e.length)throw _t.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw _t.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new E4,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new oFe,n}(),CFe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SA=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw et.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof _t||r instanceof Ki?et.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,s=new Array,o=tFe.detectMultiple(e,t,r);try{for(var l=CFe(o.getPoints()),u=l.next();!u.done;u=l.next()){var c=u.value,d=kFe.decode(o.getBits(),c[4],c[5],c[6],c[7],n.getMinCodewordWidth(c),n.getMaxCodewordWidth(c)),f=new Cs(d.getText(),d.getRawBytes(),void 0,c,nn.PDF_417);f.putMetadata(za.ERROR_CORRECTION_LEVEL,d.getECLevel());var m=d.getOther();m!=null&&f.putMetadata(za.PDF417_EXTRA_METADATA,m),s.push(f)}}catch(v){i={error:v}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return s.map(function(v){return v})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?Hn.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*ir.MODULES_IN_CODEWORD/ir.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*ir.MODULES_IN_CODEWORD/ir.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*ir.MODULES_IN_CODEWORD/ir.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*ir.MODULES_IN_CODEWORD/ir.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),MFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),w7=function(n){MFe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(Po),b7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bte=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get($r.TRY_HARDER)!==void 0,r=e==null?null:e.get($r.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(s){return s===nn.UPC_A||s===nn.UPC_E||s===nn.EAN_13||s===nn.EAN_8||s===nn.CODABAR||s===nn.CODE_39||s===nn.CODE_93||s===nn.CODE_128||s===nn.ITF||s===nn.RSS_14||s===nn.RSS_EXPANDED});a&&!t&&i.push(new O0(e)),r.includes(nn.QR_CODE)&&i.push(new bA),r.includes(nn.DATA_MATRIX)&&i.push(new wA),r.includes(nn.AZTEC)&&i.push(new xA),r.includes(nn.PDF_417)&&i.push(new SA),a&&t&&i.push(new O0(e))}i.length===0&&(t||i.push(new O0(e)),i.push(new bA),i.push(new wA),i.push(new xA),i.push(new SA),t&&i.push(new O0(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=b7(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new w7("No readers where selected, nothing can be read.");try{for(var i=b7(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{return s.decode(e,this.hints)}catch(o){if(o instanceof w7)continue}}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new et("No MultiFormat Readers were able to detect the code.")},n}(),IFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){IFe(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new Bte;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(gy);var PFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){PFe(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new SA,t)||this}return e})(gy);var NFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){NFe(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new bA,t)||this}return e})(gy);var $R;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})($R||($R={}));const P2=$R;var Ute=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new yf(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var s=r.multiply(new yf(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(s),r=s}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new rn("No error correction bytes");var r=e.length-t;if(r<=0)throw new rn("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);qr.arraycopy(e,0,a,0,r);var s=new yf(this.field,a);s=s.multiplyByMonomial(t,1);for(var o=s.divide(i)[1],l=o.getCoefficients(),u=t-l.length,c=0;c<u;c++)e[r+c]=0;qr.arraycopy(l,0,e,r+u,l.length)},n}(),Dx=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a-1;s++)for(var o=r[s],l=0;l<i-1;l++){var u=o[l];u===o[l+1]&&u===r[s+1][l]&&u===r[s+1][l+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=0;o<i;o++){var l=r[s];o+6<i&&l[o]===1&&l[o+1]===0&&l[o+2]===1&&l[o+3]===1&&l[o+4]===1&&l[o+5]===0&&l[o+6]===1&&(n.isWhiteHorizontal(l,o-4,o)||n.isWhiteHorizontal(l,o+7,o+11))&&t++,s+6<a&&r[s][o]===1&&r[s+1][o]===0&&r[s+2][o]===1&&r[s+3][o]===1&&r[s+4][o]===1&&r[s+5][o]===0&&r[s+6][o]===1&&(n.isWhiteVertical(r,o,s-4,s)||n.isWhiteVertical(r,o,s+7,s+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=r[s],l=0;l<i;l++)o[l]===1&&t++;var u=e.getHeight()*e.getWidth(),c=Math.floor(Math.abs(t*2-u)*10/u);return c*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new rn("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),s=e.getArray(),o=0;o<i;o++){for(var l=0,u=-1,c=0;c<a;c++){var d=t?s[o][c]:s[c][o];d===u?l++:(l>=5&&(r+=n.N1+(l-5)),l=1,u=d)}l>=5&&(r+=n.N1+(l-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),RFe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DFe=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=RFe(this.bytes),a=i.next();!a.done;a=i.next()){var s=a.value;ca.fill(s,e)}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],s=t.bytes[r],o=0,l=this.width;o<l;++o)if(a[o]!==s[o])return!1;return!0},n.prototype.toString=function(){for(var e=new Bn,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,s=this.width;a<s;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),XR=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new Bn;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),LFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ei=function(n){LFe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(Po),S7=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new Ta;n.makeTypeInfoBits(e,t,i);for(var a=0,s=i.getSize();a<s;++a){var o=i.get(i.getSize()-1-a),l=n.TYPE_INFO_COORDINATES[a],u=l[0],c=l[1];if(r.setBoolean(u,c,o),a<8){var d=r.getWidth()-a-1,f=8;r.setBoolean(d,f,o)}else{var d=8,f=r.getHeight()-7+(a-8);r.setBoolean(d,f,o)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new Ta;n.makeVersionInfoBits(e,r);for(var i=6*3-1,a=0;a<6;++a)for(var s=0;s<3;++s){var o=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+s,o),t.setBoolean(t.getHeight()-11+s,a,o)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,s=r.getWidth()-1,o=r.getHeight()-1;s>0;){for(s===6&&(s-=1);o>=0&&o<r.getHeight();){for(var l=0;l<2;++l){var u=s-l;if(n.isEmpty(r.get(u,o))){var c=void 0;i<e.getSize()?(c=e.get(i),++i):c=!1,t!==255&&Dx.getDataMaskBit(t,u,o)&&(c=!c),r.setBoolean(u,o,c)}}o+=a}a=-a,o+=a,s-=2}if(i!==e.getSize())throw new ei("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-Hn.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new rn("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!XR.isValidMaskPattern(t))throw new ei("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var s=new Ta;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new ei("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new ei("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new ei;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new ei;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new ei;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,s=i.length;a!==s;a++){var o=i[a];if(o>=0)for(var l=0;l!==s;l++){var u=i[l];u>=0&&n.isEmpty(t.get(u,o))&&n.embedPositionAdjustmentPattern(u-2,o-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),OFe=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),E7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return Dx.applyMaskPenaltyRule1(e)+Dx.applyMaskPenaltyRule2(e)+Dx.applyMaskPenaltyRule3(e)+Dx.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(P2.CHARACTER_SET)!==void 0;a&&(i=r.get(P2.CHARACTER_SET).toString());var s=this.chooseMode(e,i),o=new Ta;if(s===ni.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var l=ua.getCharacterSetECIByName(i);l!==void 0&&this.appendECI(l,o)}this.appendModeInfo(s,o);var u=new Ta;this.appendBytes(e,s,u,i);var c;if(r!==null&&r.get(P2.QR_VERSION)!==void 0){var d=Number.parseInt(r.get(P2.QR_VERSION).toString(),10);c=ym.getVersionForNumber(d);var f=this.calculateBitsNeeded(s,o,u,c);if(!this.willFit(f,c,t))throw new ei("Data too big for requested version")}else c=this.recommendVersion(t,s,o,u);var m=new Ta;m.appendBitArray(o);var v=s===ni.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(v,c,s,m),m.appendBitArray(u);var _=c.getECBlocksForLevel(t),w=c.getTotalCodewords()-_.getTotalECCodewords();this.terminateBits(w,m);var x=this.interleaveWithECBytes(m,c.getTotalCodewords(),w,_.getNumBlocks()),S=new XR;S.setECLevel(t),S.setMode(s),S.setVersion(c);var E=c.getDimensionForVersion(),T=new DFe(E,E),D=this.chooseMaskPattern(x,t,c,T);return S.setMaskPattern(D),S7.buildMatrix(x,t,c,D,T),S.setMatrix(T),S},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,ym.getVersionForNumber(1)),s=this.chooseVersion(a,e),o=this.calculateBitsNeeded(t,r,i,s);return this.chooseVersion(o,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),ua.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return ni.KANJI;for(var r=!1,i=!1,a=0,s=e.length;a<s;++a){var o=e.charAt(a);if(n.isDigit(o))r=!0;else if(this.getAlphanumericCode(o.charCodeAt(0))!==-1)i=!0;else return ni.BYTE}return i?ni.ALPHANUMERIC:r?ni.NUMERIC:ni.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=kl.encode(e,ua.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,s=-1,o=0;o<XR.NUM_MASK_PATTERNS;o++){S7.buildMatrix(e,t,r,o,i);var l=this.calculateMaskPenalty(i);l<a&&(a=l,s=o)}return s},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=ym.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new ei("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),s=a.getTotalECCodewords(),o=i-s,l=(e+7)/8;return o>=l},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new ei("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits(i&1?17:236,8);if(t.getSize()!==r)throw new ei("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,s){if(i>=r)throw new ei("Block ID too large");var o=e%r,l=r-o,u=Math.floor(e/r),c=u+1,d=Math.floor(t/r),f=d+1,m=u-d,v=c-f;if(m!==v)throw new ei("EC bytes mismatch");if(r!==l+o)throw new ei("RS blocks mismatch");if(e!==(d+m)*l+(f+v)*o)throw new ei("Total bytes mismatch");i<l?(a[0]=d,s[0]=m):(a[0]=f,s[0]=v)},n.interleaveWithECBytes=function(e,t,r,i){var a,s,o,l;if(e.getSizeInBytes()!==r)throw new ei("Number of bits and data bytes does not match");for(var u=0,c=0,d=0,f=new Array,m=0;m<i;++m){var v=new Int32Array(1),_=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,m,v,_);var w=v[0],x=new Uint8Array(w);e.toBytes(8*u,x,0,w);var S=n.generateECBytes(x,_[0]);f.push(new OFe(x,S)),c=Math.max(c,w),d=Math.max(d,S.length),u+=v[0]}if(r!==u)throw new ei("Data bytes does not match offset");for(var E=new Ta,m=0;m<c;++m)try{for(var T=(a=void 0,E7(f)),D=T.next();!D.done;D=T.next()){var F=D.value,x=F.getDataBytes();m<x.length&&E.appendBits(x[m],8)}}catch(R){a={error:R}}finally{try{D&&!D.done&&(s=T.return)&&s.call(T)}finally{if(a)throw a.error}}for(var m=0;m<d;++m)try{for(var P=(o=void 0,E7(f)),N=P.next();!N.done;N=P.next()){var F=N.value,S=F.getErrorCorrectionBytes();m<S.length&&E.appendBits(S[m],8)}}catch(R){o={error:R}}finally{try{N&&!N.done&&(l=P.return)&&l.call(P)}finally{if(o)throw o.error}}if(t!==E.getSizeInBytes())throw new ei("Interleaving error: "+t+" and "+E.getSizeInBytes()+" differ.");return E},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new Ute(bo.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),a=0;a<t;a++)s[a]=i[r+a];return s},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new ei(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case ni.NUMERIC:n.appendNumericBytes(e,r);break;case ni.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case ni.BYTE:n.append8BitBytes(e,r,i);break;case ni.KANJI:n.appendKanjiBytes(e,r);break;default:throw new ei("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var s=n.getDigit(e.charAt(i+1)),o=n.getDigit(e.charAt(i+2));t.appendBits(a*100+s*10+o,10),i+=3}else if(i+1<r){var s=n.getDigit(e.charAt(i+1));t.appendBits(a*10+s,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new ei;if(i+1<r){var s=n.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new ei;t.appendBits(a*45+s,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=kl.encode(e,r)}catch(l){throw new ei(l)}for(var a=0,s=i.length;a!==s;a++){var o=i[a];t.appendBits(o,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=kl.encode(e,ua.SJIS)}catch(d){throw new ei(d)}for(var i=r.length,a=0;a<i;a+=2){var s=r[a]&255,o=r[a+1]&255,l=s<<8&4294967295|o,u=-1;if(l>=33088&&l<=40956?u=l-33088:l>=57408&&l<=60351&&(u=l-49472),u===-1)throw new ei("Invalid byte sequence");var c=(u>>8)*192+(u&255);t.appendBits(c,13)}},n.appendECI=function(e,t){t.appendBits(ni.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=ua.UTF8.getName(),n})();var FFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){FFe(e,n);function e(t,r,i,a,s,o,l,u){var c=n.call(this,o,l)||this;if(c.yuvData=t,c.dataWidth=r,c.dataHeight=i,c.left=a,c.top=s,a+o>r||s+l>i)throw new rn("Crop rectangle does not fit within image data.");return u&&c.reverseHorizontal(o,l),c}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new rn("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return qr.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return qr.arraycopy(this.yuvData,s,a,0,i),a;for(var o=0;o<r;o++){var l=o*t;qr.arraycopy(this.yuvData,s,a,l,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,s=this.top*this.dataWidth+this.left,o=0;o<r;o++){for(var l=o*t,u=0;u<t;u++){var c=a[s+u*e.THUMBNAIL_SCALE_FACTOR]&255;i[l+u]=4278190080|c*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,s=this.top*this.dataWidth+this.left;a<r;a++,s+=this.dataWidth)for(var o=s+t/2,l=s,u=s+t-1;l<o;l++,u--){var c=i[l];i[l]=i[u],i[u]=c}},e.prototype.invert=function(){return new Dk(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(mw);var jFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){jFe(e,n);function e(t,r,i,a,s,o,l){var u=n.call(this,r,i)||this;if(u.dataWidth=a,u.dataHeight=s,u.left=o,u.top=l,t.BYTES_PER_ELEMENT===4){for(var c=r*i,d=new Uint8ClampedArray(c),f=0;f<c;f++){var m=t[f],v=m>>16&255,_=m>>7&510,w=m&255;d[f]=(v+_+w)/4&255}u.luminances=d}else u.luminances=t;if(a===void 0&&(u.dataWidth=r),s===void 0&&(u.dataHeight=i),o===void 0&&(u.left=0),l===void 0&&(u.top=0),u.left+r>u.dataWidth||u.top+i>u.dataHeight)throw new rn("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new rn("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return qr.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return qr.arraycopy(this.luminances,s,a,0,i),a;for(var o=0;o<r;o++){var l=o*t;qr.arraycopy(this.luminances,s,a,l,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new Dk(this)},e})(mw);var BFe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),UFe=function(n){BFe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(ua),VFe=function(){function n(){}return n.ISO_8859_1=ua.ISO8859_1,n}(),KR,zFe=301,HFe=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=zFe);return{LOG:n,ALOG:e}};KR=HFe([],[]),KR.LOG;KR.ALOG;var A7;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(A7||(A7={}));var T7=129,Vte=230,GFe=231,WFe=235,qFe=236,$Fe=237,XFe=238,KFe=239,YFe=240,VI=254,ZFe=254,k7="[)>05",C7="[)>06",M7="",kr=0,Fa=1,Hs=2,aa=3,ba=4,hs=5,QFe=function(){function n(){}return n.prototype.getEncodingMode=function(){return kr},n.prototype.encode=function(e){var t=su.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=su.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case hs:e.writeCodeword(GFe),e.signalEncoderChange(hs);return;case Fa:e.writeCodeword(Vte),e.signalEncoderChange(Fa);return;case aa:e.writeCodeword(XFe),e.signalEncoderChange(aa);break;case Hs:e.writeCodeword(KFe),e.signalEncoderChange(Hs);break;case ba:e.writeCodeword(YFe),e.signalEncoderChange(ba);break;default:throw new Error("Illegal mode: "+i)}else su.isExtendedASCII(r)?(e.writeCodeword(WFe),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(su.isDigit(e)&&su.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}(),JFe=function(){function n(){}return n.prototype.getEncodingMode=function(){return hs},n.prototype.encode=function(e){var t=new Bn;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=su.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(kr);break}}var a=t.length()-1,s=1,o=e.getCodewordCount()+a+s;e.updateSymbolInfo(o);var l=e.getSymbolInfo().getDataCapacity()-o>0;if(e.hasMoreCharacters()||l)if(a<=249)t.setCharAt(0,nr.getCharAt(a));else if(a<=1555)t.setCharAt(0,nr.getCharAt(Math.floor(a/250)+249)),t.insert(1,nr.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var u=0,r=t.length();u<r;u++)e.writeCodeword(this.randomize255State(t.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}(),A4=function(){function n(){}return n.prototype.getEncodingMode=function(){return Fa},n.prototype.encodeMaximal=function(e){for(var t=new Bn,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var o=Math.floor(t.length()/3*2),l=Math.floor(e.getCodewordCount()+o+1);e.updateSymbolInfo(l);var u=e.getSymbolInfo().getDataCapacity()-l,c=Math.floor(t.length()%3);(c===2&&u!==2||c===1&&(r>3||u!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(Vte),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new Bn;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+a;e.updateSymbolInfo(s);var o=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var l=new Bn;for(t.length()%3===2&&o!==2&&(i=this.backtrackOneCharacter(e,t,l,i));t.length()%3===1&&(i>3||o!==1);)i=this.backtrackOneCharacter(e,t,l,i);break}var u=t.length();if(u%3===0){var c=su.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(c!==this.getEncodingMode()){e.signalEncoderChange(kr);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),s=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(s),e.pos--;var o=e.getCurrentChar();return i=this.encodeChar(o,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(VI)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(VI),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(VI)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(kr)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new Bn;return a.append(r),a.append(i),a.toString()},n}(),e8e=function(){function n(){}return n.prototype.getEncodingMode=function(){return ba},n.prototype.encode=function(e){for(var t=new Bn;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var s=su.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(kr);break}}}t.append(nr.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,o=this.encodeToCodewords(t.toString()),l=!e.hasMoreCharacters(),u=l&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+o.length))}u?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(o)}finally{e.signalEncoderChange(kr)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(nr.getCharAt(e-64)):su.illegalCharacter(nr.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,o=(r<<18)+(i<<12)+(a<<6)+s,l=o>>16&255,u=o>>8&255,c=o&255,d=new Bn;return d.append(l),t>=2&&d.append(u),t>=3&&d.append(c),d.toString()},n}(),t8e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),n8e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gr=function(){function n(e,t,r,i,a,s,o,l){o===void 0&&(o=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=s,this.rsBlockData=o,this.rsBlockError=l}return n.lookup=function(e,t,r,i,a){var s,o;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var l=n8e(i8e),u=l.next();!u.done;u=l.next()){var c=u.value;if(!(t===1&&c.rectangular)&&!(t===2&&!c.rectangular)&&!(r!=null&&(c.getSymbolWidth()<r.getWidth()||c.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(c.getSymbolWidth()>i.getWidth()||c.getSymbolHeight()>i.getHeight()))&&e<=c.dataCapacity)return c}}catch(d){s={error:d}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(s)throw s.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),r8e=function(n){t8e(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(gr),i8e=[new gr(!1,3,5,8,8,1),new gr(!1,5,7,10,10,1),new gr(!0,5,7,16,6,1),new gr(!1,8,10,12,12,1),new gr(!0,10,11,14,6,2),new gr(!1,12,12,14,14,1),new gr(!0,16,14,24,10,1),new gr(!1,18,14,16,16,1),new gr(!1,22,18,18,18,1),new gr(!0,22,18,16,10,2),new gr(!1,30,20,20,20,1),new gr(!0,32,24,16,14,2),new gr(!1,36,24,22,22,1),new gr(!1,44,28,24,24,1),new gr(!0,49,28,22,14,2),new gr(!1,62,36,14,14,4),new gr(!1,86,42,16,16,4),new gr(!1,114,48,18,18,4),new gr(!1,144,56,20,20,4),new gr(!1,174,68,22,22,4),new gr(!1,204,84,24,24,4,102,42),new gr(!1,280,112,14,14,16,140,56),new gr(!1,368,144,16,16,16,92,36),new gr(!1,456,192,18,18,16,114,48),new gr(!1,576,224,20,20,16,144,56),new gr(!1,696,272,22,22,16,174,68),new gr(!1,816,336,24,24,16,136,56),new gr(!1,1050,408,18,18,36,175,68),new gr(!1,1304,496,20,20,36,163,62),new r8e],a8e=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(o){return o.charCodeAt(0)}),r=new Bn,i=0,a=t.length;i<a;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new Bn,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=gr.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),s8e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),o8e=function(n){s8e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return aa},e.prototype.encode=function(t){for(var r=new Bn;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var s=su.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(kr);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):su.illegalCharacter(nr.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(ZFe),t.getNewEncoding()<0&&t.signalEncoderChange(kr)},e}(A4),l8e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),u8e=function(n){l8e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Hs},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}(A4),su=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=T7+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var s=new A4,o=[new QFe,s,new u8e,new o8e,new e8e,new JFe],l=new a8e(e);l.setSymbolShape(t),l.setSizeConstraints(r,i),e.startsWith(k7)&&e.endsWith(M7)?(l.writeCodeword(qFe),l.setSkipAtEnd(2),l.pos+=k7.length):e.startsWith(C7)&&e.endsWith(M7)&&(l.writeCodeword($Fe),l.setSkipAtEnd(2),l.pos+=C7.length);var u=kr;for(a&&(s.encodeMaximal(l),u=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)o[u].encode(l),l.getNewEncoding()>=0&&(u=l.getNewEncoding(),l.resetEncoderSignal());var c=l.getCodewordCount();l.updateSymbolInfo();var d=l.getSymbolInfo().getDataCapacity();c<d&&u!==kr&&u!==hs&&u!==ba&&l.writeCodeword("");var f=l.getCodewords();for(f.length()<d&&f.append(T7);f.length()<d;)f.append(this.randomize253State(f.length()+1));return l.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===aa&&i===aa){for(var a=Math.min(t+3,e.length),s=t;s<a;s++)if(!this.isNativeX12(e.charCodeAt(s)))return kr}else if(r===ba&&i===ba){for(var a=Math.min(t+4,e.length),s=t;s<a;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return kr}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===kr?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,s=new Uint8Array(6),o=[];;){if(t+a===e.length){ca.fill(s,0),ca.fill(o,0);var l=this.findMinimums(i,o,Hn.MAX_VALUE,s),u=this.getMinimumCount(s);if(o[kr]===l)return kr;if(u===1){if(s[hs]>0)return hs;if(s[ba]>0)return ba;if(s[Hs]>0)return Hs;if(s[aa]>0)return aa}return Fa}var c=e.charCodeAt(t+a);if(a++,this.isDigit(c)?i[kr]+=.5:this.isExtendedASCII(c)?(i[kr]=Math.ceil(i[kr]),i[kr]+=2):(i[kr]=Math.ceil(i[kr]),i[kr]++),this.isNativeC40(c)?i[Fa]+=2/3:this.isExtendedASCII(c)?i[Fa]+=8/3:i[Fa]+=4/3,this.isNativeText(c)?i[Hs]+=2/3:this.isExtendedASCII(c)?i[Hs]+=8/3:i[Hs]+=4/3,this.isNativeX12(c)?i[aa]+=2/3:this.isExtendedASCII(c)?i[aa]+=13/3:i[aa]+=10/3,this.isNativeEDIFACT(c)?i[ba]+=3/4:this.isExtendedASCII(c)?i[ba]+=17/4:i[ba]+=13/4,this.isSpecialB256(c)?i[hs]+=4:i[hs]++,a>=4){if(ca.fill(s,0),ca.fill(o,0),this.findMinimums(i,o,Hn.MAX_VALUE,s),o[kr]<this.min(o[hs],o[Fa],o[Hs],o[aa],o[ba]))return kr;if(o[hs]<o[kr]||o[hs]+1<this.min(o[Fa],o[Hs],o[aa],o[ba]))return hs;if(o[ba]+1<this.min(o[hs],o[Fa],o[Hs],o[aa],o[kr]))return ba;if(o[Hs]+1<this.min(o[hs],o[Fa],o[ba],o[aa],o[kr]))return Hs;if(o[aa]+1<this.min(o[hs],o[Fa],o[ba],o[Hs],o[kr]))return aa;if(o[Fa]+1<this.min(o[kr],o[hs],o[ba],o[Hs])){if(o[Fa]<o[aa])return Fa;if(o[Fa]===o[aa]){for(var d=t+a+1;d<e.length;){var f=e.charCodeAt(d);if(this.isX12TermSep(f))return aa;if(!this.isNativeX12(f))break;d++}return Fa}}}}},n.min=function(e,t,r,i,a){var s=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?s:Math.min(s,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var s=t[a]=Math.ceil(e[a]);r>s&&(r=s,ca.fill(i,0)),r===s&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=Hn.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),zI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I7=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return kl.encode(e,this.charset)!=null}catch{return!1}},n}(),c8e=function(){function n(e,t,r){var i,a,s,o,l,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(I){return new I7(UFe.forName(I))}),this.encoders=[];var c=[];c.push(new I7(VFe.ISO_8859_1));for(var d=t!=null&&t.name.startsWith("UTF"),f=0;f<e.length;f++){var m=!1;try{for(var v=(i=void 0,zI(c)),_=v.next();!_.done;_=v.next()){var w=_.value,x=e.charAt(f),S=x.charCodeAt(0);if(S===r||w.canEncode(x)){m=!0;break}}}catch(I){i={error:I}}finally{try{_&&!_.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}if(!m)try{for(var E=(s=void 0,zI(this.ENCODERS)),T=E.next();!T.done;T=E.next()){var w=T.value;if(w.canEncode(e.charAt(f))){c.push(w),m=!0;break}}}catch(I){s={error:I}}finally{try{T&&!T.done&&(o=E.return)&&o.call(E)}finally{if(s)throw s.error}}m||(d=!0)}if(c.length===1&&!d)this.encoders=[c[0]];else{this.encoders=[];var D=0;try{for(var F=zI(c),P=F.next();!P.done;P=F.next()){var w=P.value;this.encoders[D++]=w}}catch(I){l={error:I}}finally{try{P&&!P.done&&(u=F.return)&&u.call(F)}finally{if(l)throw l.error}}}var N=-1;if(t!=null){for(var f=0;f<this.encoders.length;f++)if(this.encoders[f]!=null&&t.name===this.encoders[f].name){N=f;break}}this.priorityEncoderIndex=N}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return kl.encode(nr.getCharAt(e),this.encoders[t].name)},n}(),d8e=3,h8e=function(){function n(e,t,r){this.fnc1=r;var i=new c8e(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var s=e.charAt(a).charCodeAt(0);this.bytes[a]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new Bn,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,s){var o=e.charAt(i).charCodeAt(0),l=0,u=t.length();t.getPriorityEncoderIndex()>=0&&(o===s||t.canEncode(o,t.getPriorityEncoderIndex()))&&(l=t.getPriorityEncoderIndex(),u=l+1);for(var c=l;c<u;c++)(o===s||t.canEncode(o,c))&&this.addEdge(r,i+1,new P7(o,t,c,a,s))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new P7[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var s=1;s<=i;s++){for(var o=0;o<t.length();o++)a[s][o]!=null&&s<i&&this.addEdges(e,t,a,s,a[s][o],r);for(var o=0;o<t.length();o++)a[s-1][o]=null}for(var l=-1,u=Hn.MAX_VALUE,o=0;o<t.length();o++)if(a[i][o]!=null){var c=a[i][o];c.cachedTotalSize<u&&(u=c.cachedTotalSize,l=o)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var d=[],f=a[i][l];f!=null;){if(f.isFNC1())d.unshift(1e3);else for(var m=t.encode(f.c,f.encoderIndex),s=m.length-1;s>=0;s--)d.unshift(m[s]&255);var v=f.previous===null?0:f.previous.encoderIndex;v!==f.encoderIndex&&d.unshift(256+t.getECIValue(f.encoderIndex)),f=f.previous}for(var _=[],s=0;s<_.length;s++)_[s]=d[s];return _},n}(),P7=function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var s=this.isFNC1()?1:t.encode(e,r).length,o=i===null?0:i.encoderIndex;o!==r&&(s+=d8e),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),f8e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var N7;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(N7||(N7={}));(function(n){f8e(e,n);function e(t,r,i,a,s){var o=n.call(this,t,r,i)||this;return o.shape=a,o.macroId=s,o}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(h8e);var p8e=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),R7=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),m8e=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),g8e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),T4=function(n){g8e(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Hn.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(m8e),v8e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),y8e=function(n){v8e(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(T4);function x8e(n,e,t){return new y8e(n,e,t)}function hx(n,e,t){return new T4(n,e,t)}var _8e=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],xf=0,EA=1,Sl=2,zte=3,ac=4,w8e=new T4(null,0,0),HI=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],b8e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function S8e(n){var e,t;try{for(var r=b8e(n),i=r.next();!i.done;i=r.next()){var a=i.value;ca.fill(a,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[xf][ac]=0,n[EA][ac]=0,n[EA][xf]=28,n[zte][ac]=0,n[Sl][ac]=0,n[Sl][xf]=15,n}var Hte=S8e(ca.createInt32Array(6,6)),E8e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A8e=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=HI[this.mode][e];i=hx(i,a&65535,a>>16),r+=a>>16}var s=e===Sl?4:5;return i=hx(i,t,s),new n(i,e,0,r+s)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===Sl?4:5;return r=hx(r,Hte[this.mode][e],i),r=hx(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===ac||this.mode===Sl){var a=HI[r][xf];t=hx(t,a&65535,a>>16),i+=a>>16,r=xf}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new n(t,r,this.binaryShiftByteCount+1,i+s);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=x8e(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(HI[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var s=new Ta;try{for(var o=E8e(i),l=o.next();!l.done;l=o.next()){var u=l.value;u.appendTo(s,e)}}catch(c){t={error:c}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return s},n.prototype.toString=function(){return nr.format("%s bits=%d bytes=%d",_8e[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(w8e,xf,0,0),n}();function T8e(n){var e=nr.getCharCode(" "),t=nr.getCharCode("."),r=nr.getCharCode(",");n[xf][e]=1;for(var i=nr.getCharCode("Z"),a=nr.getCharCode("A"),s=a;s<=i;s++)n[xf][s]=s-a+2;n[EA][e]=1;for(var o=nr.getCharCode("z"),l=nr.getCharCode("a"),s=l;s<=o;s++)n[EA][s]=s-l+2;n[Sl][e]=1;for(var u=nr.getCharCode("9"),c=nr.getCharCode("0"),s=c;s<=u;s++)n[Sl][s]=s-c+2;n[Sl][r]=12,n[Sl][t]=13;for(var d=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],f=0;f<d.length;f++)n[zte][nr.getCharCode(d[f])]=f;for(var m=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],f=0;f<m.length;f++)nr.getCharCode(m[f])>0&&(n[ac][nr.getCharCode(m[f])]=f);return n}var GI=T8e(ca.createInt32Array(5,256)),N2=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k8e=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=nr.getCharCode(" "),t=nr.getCharCode(`
`),r=R7.singletonList(A8e.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case nr.getCharCode("\r"):a=s===t?2:0;break;case nr.getCharCode("."):a=s===e?3:0;break;case nr.getCharCode(","):a=s===e?4:0;break;case nr.getCharCode(":"):a=s===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var o=R7.min(r,function(l,u){return l.getBitCount()-u.getBitCount()});return o.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var s=N2(e),o=s.next();!o.done;o=s.next()){var l=o.value;this.updateStateForChar(l,t,a)}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=GI[e.getMode()][i]>0,s=null,o=0;o<=ac;o++){var l=GI[o][i];if(l>0){if(s==null&&(s=e.endBinaryShift(t)),!a||o===e.getMode()||o===Sl){var u=s.latchAndAppend(o,l);r.push(u)}if(!a&&Hte[e.getMode()][o]>=0){var c=s.shiftAndAppend(o,l);r.push(c)}}}if(e.getBinaryShiftByteCount()>0||GI[e.getMode()][i]===0){var d=e.addBinaryShiftChar(t);r.push(d)}},n.updateStateListForPair=function(e,t,r){var i,a,s=[];try{for(var o=N2(e),l=o.next();!l.done;l=o.next()){var u=l.value;this.updateStateForPair(u,t,r,s)}}catch(c){i={error:c}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(ac,r)),e.getMode()!==ac&&i.push(a.shiftAndAppend(ac,r)),r===3||r===4){var s=a.latchAndAppend(Sl,16-r).latchAndAppend(Sl,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var o=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(o)}},n.simplifyStates=function(e){var t,r,i,a,s=[];try{for(var o=N2(e),l=o.next();!l.done;l=o.next()){var u=l.value,c=!0,d=function(w){if(w.isBetterThanOrEqualTo(u))return c=!1,"break";u.isBetterThanOrEqualTo(w)&&(s=s.filter(function(x){return x!==w}))};try{for(var f=(i=void 0,N2(s)),m=f.next();!m.done;m=f.next()){var v=m.value,_=d(v);if(_==="break")break}}catch(w){i={error:w}}finally{try{m&&!m.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}c&&s.push(u)}}catch(w){t={error:w}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return s},n}(),C8e=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new k8e(e).encode(),a=Hn.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+a,o,l,u,c,d;if(r!==n.DEFAULT_AZTEC_LAYERS){if(o=r<0,l=Math.abs(r),l>(o?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new rn(nr.format("Illegal value %s for layers",r));u=n.totalBitsInLayer(l,o),c=n.WORD_SIZE[l];var f=u-u%c;if(d=n.stuffBits(i,c),d.getSize()+a>f)throw new rn("Data to large for user specified layer");if(o&&d.getSize()>c*64)throw new rn("Data to large for user specified layer")}else{c=0,d=null;for(var m=0;;m++){if(m>n.MAX_NB_BITS)throw new rn("Data too large for an Aztec code");if(o=m<=3,l=o?m+1:m,u=n.totalBitsInLayer(l,o),!(s>u)){(d==null||c!==n.WORD_SIZE[l])&&(c=n.WORD_SIZE[l],d=n.stuffBits(i,c));var f=u-u%c;if(!(o&&d.getSize()>c*64)&&d.getSize()+a<=f)break}}}var v=n.generateCheckWords(d,u,c),_=d.getSize()/c,w=n.generateModeMessage(o,l,_),x=(o?11:14)+l*4,S=new Int32Array(x),E;if(o){E=x;for(var m=0;m<S.length;m++)S[m]=m}else{E=x+1+2*Hn.truncDivision(Hn.truncDivision(x,2)-1,15);for(var T=Hn.truncDivision(x,2),D=Hn.truncDivision(E,2),m=0;m<T;m++){var F=m+Hn.truncDivision(m,15);S[T-m-1]=D-F-1,S[T+m]=D+F+1}}for(var P=new Sc(E),m=0,N=0;m<l;m++){for(var I=(l-m)*4+(o?9:12),R=0;R<I;R++)for(var B=R*2,G=0;G<2;G++)v.get(N+B+G)&&P.set(S[m*2+G],S[m*2+R]),v.get(N+I*2+B+G)&&P.set(S[m*2+R],S[x-1-m*2-G]),v.get(N+I*4+B+G)&&P.set(S[x-1-m*2-G],S[x-1-m*2-R]),v.get(N+I*6+B+G)&&P.set(S[x-1-m*2-R],S[m*2+G]);N+=I*8}if(n.drawModeMessage(P,o,E,w),o)n.drawBullsEye(P,Hn.truncDivision(E,2),5);else{n.drawBullsEye(P,Hn.truncDivision(E,2),7);for(var m=0,R=0;m<Hn.truncDivision(x,2)-1;m+=15,R+=16)for(var G=Hn.truncDivision(E,2)&1;G<E;G+=2)P.set(Hn.truncDivision(E,2)-R,G),P.set(Hn.truncDivision(E,2)+R,G),P.set(G,Hn.truncDivision(E,2)-R),P.set(G,Hn.truncDivision(E,2)+R)}var H=new p8e;return H.setCompact(o),H.setSize(E),H.setLayers(l),H.setCodeWords(_),H.setMatrix(P),H},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new Ta;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=Hn.truncDivision(r,2);if(t)for(var s=0;s<7;s++){var o=a-3+s;i.get(s)&&e.set(o,a-5),i.get(s+7)&&e.set(a+5,o),i.get(20-s)&&e.set(o,a+5),i.get(27-s)&&e.set(a-5,o)}else for(var s=0;s<10;s++){var o=a-5+s+Hn.truncDivision(s,5);i.get(s)&&e.set(o,a-7),i.get(s+10)&&e.set(a+7,o),i.get(29-s)&&e.set(o,a+7),i.get(39-s)&&e.set(a-7,o)}},n.generateCheckWords=function(e,t,r){var i,a,s=e.getSize()/r,o=new Ute(n.getGF(r)),l=Hn.truncDivision(t,r),u=n.bitsToWords(e,r,l);o.encode(u,l-s);var c=t%r,d=new Ta;d.appendBits(0,c);try{for(var f=C8e(Array.from(u)),m=f.next();!m.done;m=f.next()){var v=m.value;d.appendBits(v,r)}}catch(_){i={error:_}}finally{try{m&&!m.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return d},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,s;for(a=0,s=e.getSize()/t;a<s;a++){for(var o=0,l=0;l<t;l++)o|=e.get(a*t+l)?1<<t-l-1:0;i[a]=o}return i},n.getGF=function(e){switch(e){case 4:return bo.AZTEC_PARAM;case 6:return bo.AZTEC_DATA_6;case 8:return bo.AZTEC_DATA_8;case 10:return bo.AZTEC_DATA_10;case 12:return bo.AZTEC_DATA_12;default:throw new rn("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new Ta,i=e.getSize(),a=(1<<t)-2,s=0;s<i;s+=t){for(var o=0,l=0;l<t;l++)(s+l>=i||e.get(s+l))&&(o|=1<<t-1-l);(o&a)===a?(r.appendBits(o&a,t),s--):o&a?r.appendBits(o,t):(r.appendBits(o|1,t),s--)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var M8e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),I8e=function(n){M8e(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var a=new Uint8ClampedArray(r*i),s=0,o=0,l=t.length;s<l;s+=4,o++){var u=void 0,c=t[s+3];if(c===0)u=255;else{var d=t[s],f=t[s+1],m=t[s+2];u=306*d+601*f+117*m+512>>10}a[o]=u}return a},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new rn("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Dk(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,a=this.canvas.width,s=this.canvas.height,o=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*s),l=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*s);r.width=o,r.height=l;var u=r.getContext("2d");if(!u)throw new Error("Could not create a Canvas Context element.");return u.translate(o/2,l/2),u.rotate(i),u.drawImage(this.canvas,a/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(mw);function Gte(){return typeof navigator<"u"}function P8e(){return Gte()&&!!navigator.mediaDevices}function N8e(){return!!(P8e()&&navigator.mediaDevices.enumerateDevices)}var j0=function(){return j0=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},j0.apply(this,arguments)},fi=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{u(r.next(c))}catch(d){s(d)}}function l(c){try{u(r.throw(c))}catch(d){s(d)}}function u(c){c.done?a(c.value):i(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})},pi=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},WI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},R8e={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},vy=function(){function n(e,t,r){t===void 0&&(t=new Map),r===void 0&&(r={}),this.reader=e,this.hints=t,this.options=j0(j0({},R8e),r)}return Object.defineProperty(n.prototype,"possibleFormats",{set:function(e){this.hints.set($r.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),n.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},n.mediaStreamSetTorch=function(e,t){return fi(this,void 0,void 0,function(){return pi(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2]}})})},n.mediaStreamIsTorchCompatible=function(e){var t,r,i=e.getVideoTracks();try{for(var a=WI(i),s=a.next();!s.done;s=a.next()){var o=s.value;if(n.mediaStreamIsTorchCompatibleTrack(o))return!0}}catch(l){t={error:l}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!1},n.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},n.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},n.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new Oi("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new Oi("element with id '".concat(e,"' must be an ").concat(t," element"));return r},n.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return n.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},n.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return n.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},n.prepareVideoElement=function(e){var t=n.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.createBinaryBitmapFromCanvas=function(e){var t=new I8e(e),r=new Cte(t);return new kte(r)},n.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},n.createCaptureCanvas=function(e){if(!e)throw new Oi("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),r=n.getMediaElementDimensions(e),i=r.width,a=r.height;return t.style.width=i+"px",t.style.height=a+"px",t.width=i,t.height=a,t},n.tryPlayVideo=function(e){return fi(this,void 0,void 0,function(){var t;return pi(this,function(r){switch(r.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(n.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return t=r.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},n.createCanvasFromMediaElement=function(e){var t=n.createCaptureCanvas(e),r=t.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return n.drawImageOnCanvas(r,e),t},n.createBinaryBitmapFromMediaElem=function(e){var t=n.createCanvasFromMediaElement(e);return n.createBinaryBitmapFromCanvas(t)},n.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},n.listVideoInputDevices=function(){return fi(this,void 0,void 0,function(){var e,t,r,i,a,s,o,l,u,c,d,f;return pi(this,function(m){switch(m.label){case 0:if(!Gte())throw new Error("Can't enumerate devices, navigator is not present.");if(!N8e())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=m.sent(),t=[];try{for(r=WI(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(o=a.deviceId||a.id,l=a.label||"Video device ".concat(t.length+1),u=a.groupId,c={deviceId:o,label:l,kind:s,groupId:u},t.push(c))}catch(v){d={error:v}}finally{try{i&&!i.done&&(f=r.return)&&f.call(r)}finally{if(d)throw d.error}}return[2,t]}})})},n.findDeviceById=function(e){return fi(this,void 0,void 0,function(){var t;return pi(this,function(r){switch(r.label){case 0:return[4,n.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},n.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},n.releaseAllStreams=function(){n.streamTracker.length!==0&&n.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),n.streamTracker=[]},n.playVideoOnLoadAsync=function(e,t){return fi(this,void 0,void 0,function(){var r;return pi(this,function(i){switch(i.label){case 0:return[4,n.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(a,s){var o=setTimeout(function(){n.isVideoPlaying(e)||(s(!1),e.removeEventListener("canplay",l))},t),l=function(){n.tryPlayVideo(e).then(function(u){clearTimeout(o),e.removeEventListener("canplay",l),a(u)})};e.addEventListener("canplay",l)})]}})})},n.attachStreamToVideo=function(e,t,r){return r===void 0&&(r=5e3),fi(this,void 0,void 0,function(){var i;return pi(this,function(a){switch(a.label){case 0:return i=n.prepareVideoElement(t),n.addVideoSource(i,e),[4,n.playVideoOnLoadAsync(i,r)];case 1:return a.sent(),[2,i]}})})},n._waitImageLoad=function(e){return new Promise(function(t,r){var i=1e4,a=setTimeout(function(){n.isImageLoaded(e)||(e.removeEventListener("load",s),r())},i),s=function(){clearTimeout(a),e.removeEventListener("load",s),t()};e.addEventListener("load",s)})},n.checkCallbackFnOrThrow=function(e){if(!e)throw new Oi("`callbackFn` is a required parameter, you cannot capture results without it.")},n.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},n.prototype.decode=function(e){var t=n.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},n.prototype.decodeFromCanvas=function(e){var t=n.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},n.prototype.decodeFromImageElement=function(e){return fi(this,void 0,void 0,function(){var t;return pi(this,function(r){switch(r.label){case 0:if(!e)throw new Oi("An image element must be provided.");return t=n.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeFromImageUrl=function(e){return fi(this,void 0,void 0,function(){var t;return pi(this,function(r){switch(r.label){case 0:if(!e)throw new Oi("An URL must be provided.");t=n.prepareImageElement(),t.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,r.sent()];case 3:return n.destroyImageElement(t),[7];case 4:return[2]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return fi(this,void 0,void 0,function(){var i,a;return pi(this,function(s){switch(s.label){case 0:return n.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,r)];case 3:return[2,s.sent()];case 4:throw a=s.sent(),n.disposeMediaStream(i),a;case 5:return[2]}})})},n.prototype.decodeFromStream=function(e,t,r){return fi(this,void 0,void 0,function(){var i,a,s,o,l,u,c,d,f,m=this;return pi(this,function(v){switch(v.label){case 0:return n.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,n.attachStreamToVideo(e,t,i)];case 1:return a=v.sent(),s=function(){n.disposeMediaStream(e),n.cleanVideoSource(a)},o=this.scan(a,r,s),l=e.getVideoTracks(),u=j0(j0({},o),{stop:function(){o.stop()},streamVideoConstraintsApply:function(_,w){return fi(this,void 0,void 0,function(){var x,S,E,T,D,F,P;return pi(this,function(N){switch(N.label){case 0:x=w?l.filter(w):l,N.label=1;case 1:N.trys.push([1,6,7,8]),S=WI(x),E=S.next(),N.label=2;case 2:return E.done?[3,5]:(T=E.value,[4,T.applyConstraints(_)]);case 3:N.sent(),N.label=4;case 4:return E=S.next(),[3,2];case 5:return[3,8];case 6:return D=N.sent(),F={error:D},[3,8];case 7:try{E&&!E.done&&(P=S.return)&&P.call(S)}finally{if(F)throw F.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(_){return l.find(_).getConstraints()},streamVideoSettingsGet:function(_){return l.find(_).getSettings()},streamVideoCapabilitiesGet:function(_){return l.find(_).getCapabilities()}}),c=n.mediaStreamIsTorchCompatible(e),c&&(d=l==null?void 0:l.find(function(_){return n.mediaStreamIsTorchCompatibleTrack(_)}),f=function(_){return fi(m,void 0,void 0,function(){return pi(this,function(w){switch(w.label){case 0:return[4,n.mediaStreamSetTorch(d,_)];case 1:return w.sent(),[2]}})})},u.switchTorch=f,u.stop=function(){return fi(m,void 0,void 0,function(){return pi(this,function(_){switch(_.label){case 0:return o.stop(),[4,f(!1)];case 1:return _.sent(),[2]}})})}),[2,u]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return fi(this,void 0,void 0,function(){var i,a;return pi(this,function(s){switch(s.label){case 0:return n.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromVideoElement=function(e,t){return fi(this,void 0,void 0,function(){var r,i;return pi(this,function(a){switch(a.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new Oi("A video element must be provided.");return r=n.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,i)];case 1:return a.sent(),[2,this.scan(r,t)]}})})},n.prototype.decodeFromVideoUrl=function(e,t){return fi(this,void 0,void 0,function(){var r,i,a,s;return pi(this,function(o){switch(o.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new Oi("An URL must be provided.");return r=n.prepareVideoElement(),r.src=e,i=function(){n.cleanVideoSource(r)},a=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,a)];case 1:return o.sent(),s=this.scan(r,t,i),[2,s]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return fi(this,void 0,void 0,function(){var r;return pi(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return fi(this,void 0,void 0,function(){var r,i,a;return pi(this,function(s){switch(s.label){case 0:return r=!!t,[4,n.attachStreamToVideo(e,t)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return a=s.sent(),[2,a];case 4:return r||n.cleanVideoSource(i),[7];case 5:return[2]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return fi(this,void 0,void 0,function(){var r,i;return pi(this,function(a){switch(a.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromVideoElement=function(e){return fi(this,void 0,void 0,function(){var t,r;return pi(this,function(i){switch(i.label){case 0:if(!e)throw new Oi("A video element must be provided.");return t=n.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(t,r)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromVideoUrl=function(e){return fi(this,void 0,void 0,function(){var t,r;return pi(this,function(i){switch(i.label){case 0:if(!e)throw new Oi("An URL must be provided.");t=n.prepareVideoElement(),t.src=e,r=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return n.cleanVideoSource(t),[7];case 4:return[2]}})})},n.prototype.scanOneResult=function(e,t,r,i){var a=this;return t===void 0&&(t=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(s,o){a.scan(e,function(l,u,c){if(l){s(l),c.stop();return}if(u){if(u instanceof et&&t||u instanceof Ki&&r||u instanceof _t&&i)return;c.stop(),o(u)}})})},n.prototype.scan=function(e,t,r){var i=this;n.checkCallbackFnOrThrow(t);var a=n.createCaptureCanvas(e),s;try{s=a.getContext("2d",{willReadFrequently:!0})}catch{s=a.getContext("2d")}if(!s)throw new Error("Couldn't create canvas for visual element scan.");var o=function(){s=void 0,a=void 0},l=!1,u,c=function(){l=!0,clearTimeout(u),o(),r&&r()},d={stop:c},f=function(){if(!l)try{n.drawImageOnCanvas(s,e);var m=i.decodeFromCanvas(a);t(m,void 0,d),u=setTimeout(f,i.options.delayBetweenScanSuccess)}catch(x){t(void 0,x,d);var v=x instanceof Ki,_=x instanceof _t,w=x instanceof et;if(v||_||w){u=setTimeout(f,i.options.delayBetweenScanAttempts);return}o(),r&&r(x)}};return f(),d},n.prototype._decodeOnLoadImage=function(e){return fi(this,void 0,void 0,function(){var t;return pi(this,function(r){switch(r.label){case 0:return t=n.isImageLoaded(e),t?[3,2]:[4,n._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},n.prototype.getUserMedia=function(e){return fi(this,void 0,void 0,function(){var t;return pi(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=r.sent(),n.streamTracker.push(t),[2,t]}})})},n.streamTracker=[],n}(),D8e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){D8e(e,n);function e(t,r){return n.call(this,new xA,t,r)||this}return e})(vy);var L8e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){L8e(e,n);function e(t,r){return n.call(this,new O0(t),t,r)||this}return e})(vy);var O8e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){O8e(e,n);function e(t,r){return n.call(this,new wA,t,r)||this}return e})(vy);var F8e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),j8e=function(n){F8e(e,n);function e(t,r){var i=this,a=new Bte;return a.setHints(t),i=n.call(this,a,t,r)||this,i.reader=a,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set($r.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e}(vy),B8e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){B8e(e,n);function e(t,r){return n.call(this,new SA,t,r)||this}return e})(vy);var U8e=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){U8e(e,n);function e(t,r){return n.call(this,new bA,t,r)||this}return e})(vy);function V8e(){const[n,e]=M.useState(""),[t,r]=M.useState(null),[i,a]=M.useState(""),s=M.useRef(null);return M.useEffect(()=>{const o=new j8e;let l=!0;return o.decodeFromVideoDevice(void 0,s.current,async(u,c)=>{if(l)if(u){const d=u.getText();e(d);try{const f=await jZ("nomorregistrasi",d);f?(r(f),a("")):(r(null),a("Data anggota tidak ditemukan!"))}catch{r(null),a("Gagal mengambil data anggota!")}}else c&&c.name&&!c.name.includes("NotFoundException")&&a("Gagal membaca barcode: "+c)}),()=>{l=!1}},[]),h.jsxs("div",{className:"max-w-5xl mx-auto py-10 p-2 sm:p-4",children:[h.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Scan Barcode Kartu Anggota"}),h.jsxs("div",{className:"flex justify-center mb-8",children:[h.jsxs("div",{className:"relative w-full sm:w-96 h-64 border rounded flex items-center justify-center bg-black overflow-hidden",children:[h.jsx("video",{ref:s,className:"w-full h-full object-cover"}),h.jsxs("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none flex flex-col justify-center items-center",children:[h.jsx("div",{className:"w-3/4 h-0.5 bg-red-500 rounded-full shadow-lg animate-pulse",style:{boxShadow:"0 0 8px 2px #ef4444"}}),h.jsx("div",{className:"absolute left-0 w-full h-1 bg-red-400 opacity-60 animate-scanner",style:{top:"50%"}})]})]}),h.jsx("style",{children:`
          @keyframes scanner {
            0% { top: 10%; }
            50% { top: 90%; }
            100% { top: 10%; }
          }
          .animate-scanner {
            animation: scanner 2s infinite;
          }
        `})]}),n&&h.jsxs("div",{className:"mt-4 text-center",children:[h.jsx("span",{className:"font-semibold",children:"Nomor Registrasi Pokok:"})," ",n]}),t?h.jsxs(_c,{className:"p-2 sm:p-6 mt-8",children:[h.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-center mb-4 sm:mb-6",children:"Verifikasi Kartu Anggota"}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 sm:gap-8 mb-4 sm:mb-8",children:[h.jsxs("div",{className:"flex flex-col items-center justify-center w-full sm:w-1/2 relative",id:"member-card-front",children:[t.statusMahasiswa==="Aktif"&&h.jsx(Xn.span,{initial:{opacity:.7,textShadow:"0 0 0px #22c55e"},animate:{opacity:[.7,1,.7],textShadow:["0 0 0px #22c55e","0 0 12px #22c55e, 0 0 24px #16a34a","0 0 0px #22c55e"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute top-3 right-2 z-10 px-3 py-1 rounded-full font-bold text-sm select-none",style:{color:"#22c55e"},children:" Mahasiswa Aktif"}),t.photoUrl?h.jsx("div",{className:"p-2 border-2 border-gray-400 rounded-lg",children:h.jsx("img",{src:t.photoUrl,alt:"Kartu Anggota",className:"rounded-lg shadow-lg max-w-full h-auto"})}):h.jsx("div",{className:"p-2 border-2 border-gray-400 rounded-lg w-full flex items-center justify-center min-h-[275px]",children:h.jsx("span",{className:"text-gray-400 text-center",children:"Kartu anggota tidak tersedia."})})]}),h.jsxs("div",{className:"w-full sm:w-1/2",children:[h.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"Detail Anggota"}),h.jsxs("div",{className:"divide-y text-xs sm:text-base",children:[h.jsxs("div",{className:"flex justify-between py-2",children:[h.jsx("span",{className:"font-medium",children:"Nama Lengkap"}),h.jsx("span",{children:t.fullName})]}),h.jsxs("div",{className:"flex justify-between py-2",children:[h.jsx("span",{className:"font-medium",children:"Nomor Registrasi"}),h.jsx("span",{children:t.nomorregistrasi||t.registrationNumber})]}),h.jsxs("div",{className:"flex justify-between py-2",children:[h.jsx("span",{className:"font-medium",children:"Nama Lapangan"}),h.jsx("span",{children:t.fieldName})]}),h.jsxs("div",{className:"flex justify-between py-2",children:[h.jsx("span",{className:"font-medium",children:"Nama Angkatan"}),h.jsx("span",{children:t.batchName})]}),h.jsxs("div",{className:"flex justify-between py-2",children:[h.jsx("span",{className:"font-medium",children:"Tahun Angkatan"}),h.jsx("span",{children:t.batchYear})]}),h.jsxs("div",{className:"flex justify-between py-2",children:[h.jsx("span",{className:"font-medium",children:"Keanggotaan"}),h.jsx("span",{children:t.membershipStatus})]})]})]})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 sm:mt-8 text-xs text-gray-500 gap-2",children:[h.jsxs("span",{children:[" ",new Date().getFullYear()," Mahapala Narotama"]}),h.jsx("span",{children:"www.mahapalanarotama.web.id"})]})]}):i?h.jsx("div",{className:"text-red-500 text-center",children:i}):null]})}function z8e(){const[n]=V_();return M.useEffect(()=>{window.scrollTo({top:0,behavior:"auto"})},[n]),null}function H8e(){const[n,e]=M.useState(!1);M.useEffect(()=>{const r=()=>{e(window.scrollY>200)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const t=()=>{window.scrollTo({top:0,behavior:"smooth"})};return h.jsx("button",{onClick:t,"aria-label":"Scroll to top",className:`fixed bottom-6 right-6 z-50 p-3 rounded-full shadow-lg transition-opacity duration-300
        bg-gradient-to-br from-green-600 via-green-400 to-green-700 text-white font-bold
        hover:scale-125 hover:shadow-2xl hover:bg-green-500 active:scale-95
        ${n?"opacity-100":"opacity-0 pointer-events-none"}`,style:{boxShadow:"0 4px 16px rgba(0,0,0,0.2)",transition:"transform 0.3s cubic-bezier(.68,-0.55,.27,1.55), box-shadow 0.3s"},children:h.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"inline-block align-middle",style:{transform:"rotate(0deg)",transition:"transform 0.3s"},children:h.jsx("path",{d:"M18 15l-6-6-6 6"})})})}function G8e(){M.useEffect(()=>{function n(t={}){const r=t&&t.element,i=r||document.body,a=["","",""];let s=window.innerWidth,o=window.innerHeight,l={x:s/2,y:s/2},u=[],c,d,f,m=[];const v=window.matchMedia("(prefers-reduced-motion: reduce)");v.onchange=()=>{v.matches?P():_()};function _(){if(v.matches)return!1;c=document.createElement("canvas"),d=c.getContext("2d"),c.style.top="0px",c.style.left="0px",c.style.pointerEvents="none",r?(c.style.position="absolute",i.appendChild(c),c.width=i.clientWidth,c.height=i.clientHeight):(c.style.position="fixed",document.body.appendChild(c),c.width=s,c.height=o),d&&(d.font="20px serif",d.textBaseline="middle",d.textAlign="center",a.forEach(I=>{if(!d)return;let R=d.measureText(I),B=document.createElement("canvas"),G=B.getContext("2d");B.width=R.width,B.height=(R.actualBoundingBoxAscent||20)*2,G&&(G.textAlign="center",G.font="20px serif",G.textBaseline="middle",G.fillText(I,B.width/2,R.actualBoundingBoxAscent||20),m.push(B))}),w(),F())}function w(){i.addEventListener("mousemove",E),i.addEventListener("touchmove",S,{passive:!0}),i.addEventListener("touchstart",S,{passive:!0}),window.addEventListener("resize",x)}function x(I){s=window.innerWidth,o=window.innerHeight,r?(c.width=i.clientWidth,c.height=i.clientHeight):(c.width=s,c.height=o)}function S(I){if(I.touches.length>0)for(let R=0;R<I.touches.length;R++)T(I.touches[R].clientX,I.touches[R].clientY,m[Math.floor(Math.random()*m.length)])}function E(I){if(r){const R=i.getBoundingClientRect();l.x=I.clientX-R.left,l.y=I.clientY-R.top}else l.x=I.clientX,l.y=I.clientY;T(l.x,l.y,m[Math.floor(Math.random()*m.length)])}function T(I,R,B){u.push(new N(I,R,B))}function D(){if(!(!d||u.length===0)){d.clearRect(0,0,s,o);for(let I=0;I<u.length;I++)u[I].update(d);for(let I=u.length-1;I>=0;I--)u[I].lifeSpan<0&&u.splice(I,1);u.length===0&&d&&d.clearRect(0,0,s,o)}}function F(){D(),f=requestAnimationFrame(F)}function P(){c&&c.parentNode&&c.parentNode.removeChild(c),cancelAnimationFrame(f),i.removeEventListener("mousemove",E),i.removeEventListener("touchmove",S),i.removeEventListener("touchstart",S),window.removeEventListener("resize",x)}class N{constructor(R,B,G){hr(this,"position");hr(this,"velocity");hr(this,"lifeSpan");hr(this,"initialLifeSpan");hr(this,"canv");const H=Math.floor(Math.random()*60+80);this.initialLifeSpan=H,this.lifeSpan=H,this.velocity={x:(Math.random()<.5?-1:1)*(Math.random()/2),y:1+Math.random()},this.position={x:R,y:B},this.canv=G}update(R){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.x+=(Math.random()<.5?-1:1)*2/75,this.velocity.y-=Math.random()/300,this.lifeSpan--;const B=Math.max(this.lifeSpan/this.initialLifeSpan,0),H=2*this.lifeSpan*.0174533;R.save(),R.translate(this.position.x,this.position.y),R.rotate(H),R.drawImage(this.canv,-this.canv.width/2*B,-this.canv.height/2,this.canv.width*B,this.canv.height*B),R.rotate(-H),R.translate(-this.position.x,-this.position.y),R.restore()}}return _(),{destroy:P}}const e=n();return()=>e.destroy()},[])}async function Wte(n){const e=ID(GA());await ms(_r(e,"gps_tracker",n.nama),{...n,updatedAt:lE()}),await hm(ti(e,"gps_history"),{...n,createdAt:lE()})}async function W8e(){const n=localStorage.getItem("gps_track");if(!n)return;const e=JSON.parse(n);for(const t of e)try{await Wte(t)}catch{}localStorage.removeItem("gps_track")}function k4({url:n,label:e}){return h.jsxs("a",{href:n,download:!0,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-green-600 to-green-400 text-white font-semibold shadow hover:from-green-700 hover:to-green-500 transition mb-4",style:{textDecoration:"none"},children:[h.jsx(l$,{className:"w-5 h-5"}),e]})}function q8e(){return h.jsxs("section",{className:"bg-white/90 rounded-2xl shadow-xl p-6 mb-4 text-gray-800",children:[h.jsx(k4,{url:"/panduan-survival.pdf",label:"Download Buku Panduan Survival"}),h.jsx("h2",{className:"text-2xl font-bold mb-3 text-green-800",children:"Panduan Survival Dasar"}),h.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-lg",children:[h.jsx("li",{children:"Tenang, jangan panik. Analisa situasi dan sumber daya sekitar."}),h.jsx("li",{children:"Cari sumber air bersih dan buat perlindungan (bivak/shelter)."}),h.jsx("li",{children:"Jaga suhu tubuh, hindari hipotermia/heatstroke."}),h.jsx("li",{children:"Gunakan api untuk sinyal, hangat, dan memasak."}),h.jsx("li",{children:"Manfaatkan alat survival: kompas, pisau, peluit, senter, dsb."}),h.jsx("li",{children:"Catat lokasi terakhir dan buat tanda jejak jika berpindah."})]})]})}function $8e(){const[n,e]=M.useState(0),[t,r]=M.useState(!1);function i(){r(!0),e(0)}function a(){e(s=>s+1)}return h.jsxs("section",{className:"bg-white/90 rounded-2xl shadow-xl p-6 mb-4 text-gray-800",children:[h.jsx(k4,{url:"/ppgd.pdf",label:"Download Buku PPGD"}),h.jsx("h2",{className:"text-2xl font-bold mb-3 text-green-800",children:"PPGD (Pertolongan Pertama Gawat Darurat)"}),h.jsxs("ol",{className:"list-decimal pl-5 space-y-2 mb-4 text-lg",children:[h.jsx("li",{children:"Pastikan keamanan lokasi sebelum menolong."}),h.jsx("li",{children:"Periksa respons korban: sadar/tidak, napas, denyut nadi."}),h.jsx("li",{children:"Lakukan RJP (Resusitasi Jantung Paru) jika perlu."}),h.jsx("li",{children:"Hentikan perdarahan, atasi syok, imobilisasi patah tulang."}),h.jsx("li",{children:"Gunakan alat P3K, jaga kebersihan luka."}),h.jsx("li",{children:"Segera cari bantuan medis jika kondisi berat."})]}),h.jsxs("div",{className:"bg-green-100 rounded-lg p-4 mb-2 shadow",children:[h.jsx("h3",{className:"font-semibold mb-2 text-green-700",children:"Simulasi RJP"}),t?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"mb-2",children:"Tekan tombol di bawah ini sebanyak 30x untuk simulasi kompresi dada!"}),h.jsxs("button",{className:"btn-nav mb-2",onClick:a,children:["Tekan Dada (",n,"/30)"]}),n>=30&&h.jsx("div",{className:"text-green-700 font-bold",children:"Simulasi selesai! Segera lakukan napas bantuan."})]}):h.jsx("button",{className:"btn-nav",onClick:i,children:"Mulai Simulasi RJP"})]})]})}function X8e(){const[n,e]=M.useState("Tidak tersedia");return M.useEffect(()=>{function t(r){if(r.absolute&&typeof r.alpha=="number"){const i=Math.round(r.alpha);e(`${i} (Utara: 0)`)}}return window.addEventListener("deviceorientationabsolute",t),window.addEventListener("deviceorientation",t),()=>{window.removeEventListener("deviceorientationabsolute",t),window.removeEventListener("deviceorientation",t)}},[]),h.jsxs("section",{className:"bg-white/90 rounded-2xl shadow-xl p-6 mb-4 text-gray-800",children:[h.jsx(k4,{url:"/navigasi-darat.pdf",label:"Download Buku Navigasi Darat"}),h.jsx("h2",{className:"text-2xl font-bold mb-3 text-green-800",children:"Navigasi Darat"}),h.jsxs("ul",{className:"list-disc pl-5 space-y-2 mb-4 text-lg",children:[h.jsx("li",{children:"Gunakan peta topografi dan kompas untuk orientasi."}),h.jsx("li",{children:"Kenali tanda alam: matahari, bintang, arah angin, vegetasi."}),h.jsx("li",{children:"Buat rencana perjalanan dan catat titik penting di jalur."}),h.jsx("li",{children:"Hindari berjalan sendirian, selalu informasikan posisi ke tim."}),h.jsx("li",{children:"Gunakan GPS jika tersedia, tapi tetap siapkan navigasi manual."})]}),h.jsxs("div",{className:"bg-green-100 rounded-lg p-4 shadow",children:[h.jsx("h3",{className:"font-semibold mb-2 text-green-700",children:"Simulasi Kompas"}),h.jsxs("div",{className:"text-lg",children:["Arah Utara: ",h.jsx("span",{className:"font-bold",children:n})]}),h.jsx("div",{className:"text-green-600 text-xs mt-2",children:"(Fitur ini hanya akurat di HP dengan sensor kompas)"})]})]})}function K8e(){const n=["Kompas","Bivak/Shelter","Peluit","Pisau","Senter/Headlamp","Makanan Cadangan","P3K","Botol Air","Jas Hujan","Tali Paracord","Pakaian Cadangan","Korek Api/Firestarter"],[e,t]=M.useState(()=>{const a=localStorage.getItem("survival_checklist");return a?JSON.parse(a):Array(n.length).fill(!1)});function r(a){const s=[...e];s[a]=!s[a],t(s),localStorage.setItem("survival_checklist",JSON.stringify(s))}function i(){const a=Array(n.length).fill(!1);t(a),localStorage.setItem("survival_checklist",JSON.stringify(a))}return h.jsxs("section",{className:"bg-white/90 rounded-2xl shadow-xl p-6 mb-4 text-gray-800",children:[h.jsx("h2",{className:"text-2xl font-bold mb-3 text-green-800",children:"Checklist Survival"}),h.jsx("ul",{className:"space-y-3",children:n.map((a,s)=>h.jsxs("li",{className:"flex items-center gap-3",children:[h.jsx("input",{type:"checkbox",id:a,checked:e[s],onChange:()=>r(s)}),h.jsx("label",{htmlFor:a,className:"text-lg select-none",children:a})]},a))}),h.jsx("button",{className:"btn-nav mt-4",onClick:i,children:"Reset Checklist"}),h.jsx("p",{className:"mt-2 text-green-200 text-sm",children:"Checklist tersimpan otomatis di perangkat Anda."})]})}function Y8e(){const[n,e]=M.useState(!1),[t,r]=M.useState(""),[i,a]=M.useState(()=>{const _=localStorage.getItem("gps_track");return _?JSON.parse(_):[]}),[s,o]=M.useState(""),[l,u]=M.useState(()=>localStorage.getItem("gps_nama")||""),c=M.useRef(null);M.useEffect(()=>{function _(){navigator.onLine&&W8e()}return window.addEventListener("online",_),_(),()=>window.removeEventListener("online",_)},[]);async function d(_){if(navigator.onLine)try{await Wte(_)}catch{}}function f(){e(!1),c.current&&(clearInterval(c.current),c.current=null),a([]),localStorage.removeItem("gps_track"),localStorage.removeItem("gps_tracker"),r("Pelacakan dimatikan dan data dihapus.")}function m(){if(l){if(!navigator.geolocation){r("Geolocation tidak didukung browser.");return}e(!0),r("Pelacakan aktif..."),c.current=setInterval(()=>{navigator.geolocation.getCurrentPosition(_=>{const w=new Date,x={lat:_.coords.latitude,lon:_.coords.longitude,time:w.toLocaleString(),nama:l,online:navigator.onLine};a(S=>{const E=[...S,x];return localStorage.setItem("gps_track",JSON.stringify(E)),d(x),E})},_=>r("Gagal mendapatkan lokasi: "+_.message),{enableHighAccuracy:!0,maximumAge:0,timeout:1e4})},1e4)}}M.useEffect(()=>()=>{c.current&&clearInterval(c.current)},[]);function v(){a([]),localStorage.removeItem("gps_track"),localStorage.removeItem("gps_tracker")}return M.useEffect(()=>{function _(){r(navigator.onLine?"Online":"Mode Offline: Menyimpan data lokal")}return window.addEventListener("online",_),window.addEventListener("offline",_),_(),()=>{window.removeEventListener("online",_),window.removeEventListener("offline",_)}},[]),h.jsxs("section",{className:"bg-white/90 rounded-2xl shadow-xl p-6 mb-4 text-gray-800",children:[h.jsx("h2",{className:"text-2xl font-bold mb-3 text-green-800",children:"Pelacak Lokasi GPS"}),l?null:h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block mb-2 text-green-800 font-semibold",children:"Masukkan Nama Anda:"}),h.jsx("input",{className:"px-3 py-2 rounded border border-green-400 focus:outline-none focus:ring-2 focus:ring-green-600 text-gray-900",value:s,onChange:_=>o(_.target.value),placeholder:"Nama Lengkap"}),h.jsx("button",{className:"btn-nav ml-2 mt-2",onClick:()=>{u(s),localStorage.setItem("gps_nama",s)},disabled:!s.trim(),children:"Simpan Nama"})]}),h.jsx("button",{className:"btn-nav mb-4",onClick:m,disabled:n||!l,children:"Aktifkan Pelacakan"}),h.jsx("button",{className:"btn-nav mb-4 ml-2",onClick:v,children:"Reset Data Lokasi"}),h.jsx("button",{className:"btn-nav mb-4 ml-2 bg-red-600 hover:bg-red-700",onClick:f,disabled:!n,children:"Matikan GPS"}),h.jsx("div",{className:"mb-2 text-green-700 text-sm",children:t}),h.jsx("div",{className:"overflow-x-auto bg-green-100 rounded-lg p-2 text-xs",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Waktu"}),h.jsx("th",{children:"Lat"}),h.jsx("th",{children:"Lon"}),h.jsx("th",{children:"Nama"}),h.jsx("th",{children:"Status"})]})}),h.jsx("tbody",{children:i.map((_,w)=>h.jsxs("tr",{children:[h.jsx("td",{children:_.time}),h.jsx("td",{children:_.lat}),h.jsx("td",{children:_.lon}),h.jsx("td",{children:_.nama||l}),h.jsx("td",{children:h.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold ${_.online?"bg-green-500 text-white":"bg-gray-400 text-white"}`,children:_.online?"Online":"Offline"})})]},w))})]})}),h.jsx("p",{className:"mt-2 text-green-700 text-xs",children:"Data lokasi tersimpan lokal & dikirim ke server jika online."})]})}const Z8e=[{label:"SAR Nasional (Basarnas)",nomor:"115"},{label:"BPBD Surabaya",nomor:"031-8499909"},{label:"Polisi",nomor:"110"},{label:"Ambulans",nomor:"118"},{label:"RSU Dr. Soetomo",nomor:"031-5501078"}],Q8e=["Selalu bawa peluit, senter, dan korek api cadangan.","Jangan panik, tetap tenang dan hemat energi.","Cari sumber air bersih dan buat perlindungan sederhana.","Gunakan sinyal darurat (asap, peluit, cermin) untuk menarik perhatian.","Kenali tanaman dan hewan berbahaya di sekitar.","Lakukan pertolongan pertama pada luka ringan sebelum mencari bantuan."];function J8e(){const[n,e]=M.useState("fitur"),[t,r]=M.useState(null),[i,a]=M.useState(!1);M.useEffect(()=>{const o=l=>{l.preventDefault(),r(l)};return window.addEventListener("beforeinstallprompt",o),window.addEventListener("appinstalled",()=>a(!0)),window.matchMedia("(display-mode: standalone)").matches&&a(!0),()=>window.removeEventListener("beforeinstallprompt",o)},[]);const s=async()=>{if(t){t.prompt();const{outcome:o}=await t.userChoice;o==="accepted"&&(a(!0),r(null))}};return h.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-green-50 py-8 px-2",children:[h.jsxs("div",{className:"max-w-xl mx-auto",children:[h.jsx("div",{className:"flex justify-center mb-4",children:!i&&t&&h.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-6 py-3 rounded-full bg-gradient-to-r from-green-600 to-green-400 shadow-lg hover:from-green-700 hover:to-green-500 text-white font-bold text-xl transition-all duration-200 animate-bounce-soc border-2 border-green-700",style:{minWidth:220,minHeight:56,boxShadow:"0 4px 24px #22c55e55"},children:[h.jsx("img",{src:"/OfflineApp.png",alt:"App Icon",className:"w-8 h-8 rounded-full border-2 border-green-300 bg-white shadow"}),h.jsx("span",{children:"Install di Layar Utama"})]})}),h.jsx("style",{children:`
          @keyframes bounce-soc {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
          }
          .animate-bounce-soc {
            animation: bounce-soc 1.6s infinite;
          }
        `}),h.jsx("h1",{className:"text-2xl font-bold text-center text-green-800 mb-4",children:"Mode Offline & Survival Tools"}),h.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Tetap siap di alam bebas! Semua fitur berikut dapat diakses tanpa internet."}),h.jsxs("nav",{className:"flex flex-wrap justify-center gap-2 mb-6",children:[h.jsx("button",{className:`btn-nav${n==="fitur"?" bg-green-700 text-white":""}`,onClick:()=>e("fitur"),children:"Fitur Survival"}),h.jsx("button",{className:`btn-nav${n==="survival"?" bg-green-700 text-white":""}`,onClick:()=>e("survival"),children:"Panduan Survival"}),h.jsx("button",{className:`btn-nav${n==="ppgd"?" bg-green-700 text-white":""}`,onClick:()=>e("ppgd"),children:"PPGD"}),h.jsx("button",{className:`btn-nav${n==="navigasi"?" bg-green-700 text-white":""}`,onClick:()=>e("navigasi"),children:"Navigasi Darat"}),h.jsx("button",{className:`btn-nav${n==="checklist"?" bg-green-700 text-white":""}`,onClick:()=>e("checklist"),children:"Checklist"}),h.jsx("button",{className:`btn-nav${n==="gps"?" bg-green-700 text-white":""}`,onClick:()=>e("gps"),children:"Pelacak GPS"})]}),n==="fitur"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:[h.jsxs("a",{href:"/panduan-survival.pdf",className:"block bg-white rounded-xl shadow p-4 hover:bg-green-50 transition",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(l$,{className:"w-8 h-8 text-blue-600"}),h.jsx("span",{className:"font-bold text-green-900 text-lg",children:"Panduan Survival Offline"})]}),h.jsx("div",{className:"text-gray-600 text-sm mb-2",children:"Akses panduan survival, P3GD, dan navigasi darat tanpa internet."}),h.jsx("div",{className:"text-green-700 text-xs font-semibold underline",children:"Buka Panduan Survival"})]}),h.jsxs("a",{href:"/navigasi-darat.pdf",className:"block bg-white rounded-xl shadow p-4 hover:bg-green-50 transition",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(h$,{className:"w-8 h-8 text-green-600"}),h.jsx("span",{className:"font-bold text-green-900 text-lg",children:"Navigasi Darat PDF"})]}),h.jsx("div",{className:"text-gray-600 text-sm mb-2",children:"Pelajari teknik navigasi darat dan orientasi peta-kompas."}),h.jsx("div",{className:"text-green-700 text-xs font-semibold underline",children:"Buka Navigasi Darat"})]})]}),h.jsxs("div",{id:"nomor-darurat",className:"mb-8 bg-white rounded-xl shadow p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(G_,{className:"w-6 h-6 text-purple-600"}),h.jsx("span",{className:"font-bold text-purple-800",children:"Nomor Darurat Penting"})]}),h.jsx("ul",{className:"text-gray-700 text-sm space-y-1",children:Z8e.map((o,l)=>h.jsxs("li",{children:[h.jsxs("span",{className:"font-semibold",children:[o.label,":"]})," ",h.jsx("a",{href:`tel:${o.nomor}`,className:"text-blue-700 underline",children:o.nomor})]},l))})]}),h.jsxs("div",{id:"tips-survival",className:"mb-8 bg-white rounded-xl shadow p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(Pme,{className:"w-6 h-6 text-red-600"}),h.jsx("span",{className:"font-bold text-red-800",children:"Tips Bertahan Hidup"})]}),h.jsx("ul",{className:"text-gray-700 text-sm list-disc pl-5 space-y-1",children:Q8e.map((o,l)=>h.jsx("li",{children:o},l))})]})]}),n==="survival"&&h.jsx(q8e,{}),n==="ppgd"&&h.jsx($8e,{}),n==="navigasi"&&h.jsx(X8e,{}),n==="checklist"&&h.jsx(K8e,{}),n==="gps"&&h.jsx(Y8e,{})]}),h.jsx("style",{children:`
        .btn-nav {
          background: #166534;
          color: #fff;
          font-size: 1rem;
          border-radius: 0.5rem;
          padding: 0.5rem 1.1rem;
          font-weight: bold;
          box-shadow: 0 2px 8px #0002;
          border: none;
          margin: 0.2rem;
          transition: background 0.2s;
        }
        .btn-nav:active, .btn-nav:hover, .btn-nav.bg-green-700 {
          background: #22c55e;
          color: #14532d;
        }
        input[type=checkbox] {
          width: 1.3em; height: 1.3em;
        }
      `})]})}function eje(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e="";for(let t=0;t<6;t++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}function tje(){const[n,e]=M.useState(""),[t,r]=M.useState(""),[i,a]=M.useState(null),[s,o]=M.useState(!1),[l,u]=M.useState(""),[c,d]=M.useState(null);M.useEffect(()=>{const D=$A(Tl,F=>d(F));return()=>D()},[]);async function f(){const D=new id;await vle(Tl,D)}async function m(){await Qoe(Tl)}async function v(D){D.preventDefault(),u(""),a(null),o(!0);try{if(!c){u("Anda harus login untuk menggunakan fitur ini."),o(!1);return}try{new URL(n)}catch{u("URL tidak valid."),o(!1);return}let F=t.trim()||eje();if(!/^([a-zA-Z0-9_-]{3,20})$/.test(F)){u("Kode harus 3-20 karakter, huruf/angka/underscore/dash."),o(!1);return}const P=_r(un,"shortlinks",F);if((await Vf(P)).exists()){u("Kode sudah digunakan, pilih kode lain."),o(!1);return}await ms(P,{url:n,created:Date.now(),owner:c.uid,email:c.email}),await hm(ti(un,`users/${c.uid}/shortlinks`),{code:F,url:n,created:Date.now()}),a({code:F,url:n}),T("URL berhasil dipendekkan!","success")}catch{u("Terjadi kesalahan. Coba lagi."),T("Terjadi kesalahan. Coba lagi.","error")}o(!1)}const[_,w]=M.useState(!1),[x,S]=M.useState(null);function E(D){navigator.clipboard.writeText(D).then(()=>{w(!0),T("URL berhasil disalin ke clipboard!","success"),setTimeout(()=>w(!1),2e3)}).catch(()=>{T("Gagal menyalin URL","error")})}function T(D,F){S({msg:D,type:F}),setTimeout(()=>S(null),2500)}return h.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-100 to-blue-100 p-4 relative overflow-x-hidden",children:[[...Array(30)].map((D,F)=>h.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${Math.random()*3+2}s`}},F)),h.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 w-full max-w-md relative z-10 animate-slideUp border border-white/30 backdrop-blur",children:[h.jsx("h1",{className:"text-2xl font-bold mb-4 text-purple-700 animate-glow",children:" URL Shortener"}),h.jsx("p",{className:"text-gray-500 mb-6 text-center animate-fadeIn",children:"Transformasi URL panjang menjadi singkat dan elegan"}),c?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"text-sm text-gray-700",children:["Login sebagai ",h.jsx("span",{className:"font-bold",children:c.displayName||c.email})]}),h.jsx("button",{className:"text-xs text-purple-700 underline",onClick:m,children:"Logout"})]}),h.jsxs("form",{onSubmit:v,children:[h.jsxs("div",{className:"mb-3 relative",children:[h.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-purple-400",children:h.jsx("i",{className:"fas fa-globe"})}),h.jsx("input",{className:"w-full border rounded px-8 py-2 focus:border-purple-400 focus:shadow mb-2 transition",type:"url",placeholder:"Tempel URL panjang di sini",value:n,onChange:D=>e(D.target.value),required:!0})]}),h.jsxs("div",{className:"mb-3 bg-purple-50 border border-purple-100 rounded p-3 animate-slideIn",children:[h.jsxs("label",{className:"block mb-1 font-semibold text-gray-700",children:[h.jsx("i",{className:"fas fa-edit"})," Kode Kustom ",h.jsx("span",{className:"text-gray-400 font-normal",children:"(opsional)"})]}),h.jsxs("div",{className:"relative",children:[h.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-purple-400",children:h.jsx("i",{className:"fas fa-hashtag"})}),h.jsx("input",{className:"w-full border rounded px-8 py-2 focus:border-purple-400 focus:shadow transition",type:"text",placeholder:"Kode kustom (opsional)",value:t,onChange:D=>r(D.target.value)})]}),h.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[h.jsx("i",{className:"fas fa-info-circle"})," Kosongkan untuk kode otomatis. Format: huruf, angka, underscore (_), dan dash (-)"]})]}),h.jsxs("button",{className:`w-full bg-gradient-to-r from-purple-600 to-blue-500 hover:from-purple-700 hover:to-blue-600 text-white font-bold py-2 rounded transition mb-2 relative overflow-hidden ${s?"opacity-80 pointer-events-none":""}`,type:"submit",disabled:s,children:[s?h.jsx("span",{className:"absolute right-6 top-1/2 -translate-y-1/2 animate-spin",children:h.jsx("i",{className:"fas fa-spinner"})}):h.jsx("i",{className:"fas fa-magic mr-2"}),s?"Memproses...":"Pendekkan URL"]})]})]}):h.jsx("button",{className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-2 rounded transition mb-4",onClick:f,children:"Login dengan Google"}),l&&h.jsx("div",{className:"result error bg-red-100 border border-red-300 text-red-700 rounded p-3 mt-2 animate-resultSlideIn",children:l}),i&&h.jsxs("div",{className:"result bg-green-100 border border-green-300 rounded p-3 mt-2 text-center animate-resultSlideIn",children:[h.jsxs("div",{className:"font-semibold text-green-700 mb-2",children:[h.jsx("i",{className:"fas fa-check-circle"})," URL Pendek:"]}),h.jsxs("div",{className:"result-item mb-2 bg-white/70 rounded p-2",children:[h.jsx("span",{className:"text-gray-500 text-xs",children:"URL Asli:"}),h.jsx("br",{}),h.jsx("span",{className:"break-all text-gray-700",children:i.url})]}),h.jsxs("div",{className:"result-item mb-2 bg-white/70 rounded p-2",children:[h.jsx("span",{className:"text-gray-500 text-xs",children:"URL Pendek:"}),h.jsx("br",{}),h.jsx("a",{href:`/s/${i.code}`,className:"short-url-link text-purple-700 underline font-semibold break-all",target:"_blank",rel:"noopener noreferrer",children:window.location.origin+"/s/"+i.code})]}),h.jsxs("div",{className:"result-item mb-2 bg-white/70 rounded p-2",children:[h.jsx("span",{className:"text-gray-500 text-xs",children:"Kode:"})," ",h.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded text-gray-700",children:i.code}),t.trim()?h.jsx("span",{className:"text-green-600 ml-2",children:"(kustom)"}):h.jsx("span",{className:"text-gray-400 ml-2",children:"(otomatis)"})]}),h.jsxs("button",{className:`copy-btn bg-gradient-to-r from-green-500 to-teal-400 hover:from-green-600 hover:to-teal-500 text-white px-4 py-2 rounded mt-2 inline-flex items-center gap-2 transition ${_?"copied bg-gray-500":""}`,onClick:()=>E(window.location.origin+"/s/"+i.code),children:[h.jsx("i",{className:`fas ${_?"fa-check":"fa-copy"}`})," ",_?"Tersalin!":"Salin URL"]})]}),x&&h.jsxs("div",{className:`toast fixed bottom-8 right-8 px-5 py-3 rounded-lg shadow-lg z-50 flex items-center gap-2 animate-toastSlideIn ${x.type==="error"?"bg-gradient-to-r from-red-500 to-pink-400":"bg-gradient-to-r from-green-500 to-teal-400"} text-white`,children:[h.jsx("i",{className:`fas ${x.type==="error"?"fa-exclamation-triangle":"fa-check"}`}),h.jsx("span",{children:x.msg})]})]}),h.jsx("style",{children:`
        .particle {
          position: absolute;
          width: 6px;
          height: 6px;
          background: rgba(102, 126, 234, 0.15);
          border-radius: 50%;
          animation: float 3s infinite ease-in-out;
          z-index: 1;
        }
        @keyframes float {
          0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.3; }
          50% { transform: translateY(-20px) rotate(180deg); opacity: 0.8; }
        }
        .animate-slideUp {
          animation: slideUp 0.6s ease-out;
        }
        @keyframes slideUp {
          from { opacity: 0; transform: translateY(30px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-glow {
          animation: glow 2s ease-in-out infinite alternate;
        }
        @keyframes glow {
          from { text-shadow: 0 0 10px rgba(102, 126, 234, 0.5); }
          to { text-shadow: 0 0 20px rgba(118, 75, 162, 0.8); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.8s ease-out 0.3s forwards;
          opacity: 0;
        }
        @keyframes fadeIn {
          to { opacity: 1; }
        }
        .animate-slideIn {
          animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
          from { opacity: 0; transform: translateX(-20px); }
          to { opacity: 1; transform: translateX(0); }
        }
        .animate-resultSlideIn {
          animation: resultSlideIn 0.5s ease-out;
        }
        @keyframes resultSlideIn {
          from { opacity: 0; transform: translateY(20px) scale(0.95); }
          to { opacity: 1; transform: translateY(0) scale(1); }
        }
        .copy-btn.copied {
          background: linear-gradient(135deg, #6c757d, #5a6268) !important;
        }
        .toast {
          animation: toastSlideIn 0.3s ease-out, toastSlideOut 0.3s ease-in 2.2s;
        }
        @keyframes toastSlideIn {
          from { transform: translateX(100%); opacity: 0; }
          to { transform: translateX(0); opacity: 1; }
        }
        @keyframes toastSlideOut {
          from { transform: translateX(0); opacity: 1; }
          to { transform: translateX(100%); opacity: 0; }
        }
      `})]})}/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qa(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Fd(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function YR({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function C4(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function qte(n,e,t="/"){return nje(n,e,t,!1)}function nje(n,e,t,r){let i=typeof e=="string"?C4(e):e,a=Lf(i.pathname||"/",t);if(a==null)return null;let s=$te(n);rje(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let u=pje(a);o=hje(s[l],u,r)}return o}function $te(n,e=[],t=[],r=""){let i=(a,s,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};l.relativePath.startsWith("/")&&(qa(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=_d([r,l.relativePath]),c=t.concat(l);a.children&&a.children.length>0&&(qa(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),$te(a.children,e,c,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:cje(u,a.index),routesMeta:c})};return n.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let l of Xte(a.path))i(a,s,l)}),e}function Xte(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=Xte(r.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function rje(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:dje(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var ije=/^:[\w-]+$/,aje=3,sje=2,oje=1,lje=10,uje=-2,D7=n=>n==="*";function cje(n,e){let t=n.split("/"),r=t.length;return t.some(D7)&&(r+=uje),e&&(r+=sje),t.filter(i=>!D7(i)).reduce((i,a)=>i+(ije.test(a)?aje:a===""?oje:lje),r)}function dje(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function hje(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",s=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,c=a==="/"?e:e.slice(a.length)||"/",d=AA({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&t&&!r[r.length-1].route.index&&(d=AA({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:_d([a,d.pathname]),pathnameBase:yje(_d([a,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(a=_d([a,d.pathnameBase]))}return s}function AA(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=fje(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:d},f)=>{if(c==="*"){let v=o[f]||"";s=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const m=o[f];return d&&!m?u[c]=void 0:u[c]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:n}}function fje(n,e=!1,t=!0){Fd(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function pje(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fd(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Lf(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function mje(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?C4(n):n;return{pathname:t?t.startsWith("/")?t:gje(t,e):e,search:xje(r),hash:_je(i)}}function gje(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function qI(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vje(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Kte(n){let e=vje(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Yte(n,e,t,r=!1){let i;typeof n=="string"?i=C4(n):(i={...n},qa(!i.pathname||!i.pathname.includes("?"),qI("?","pathname","search",i)),qa(!i.pathname||!i.pathname.includes("#"),qI("#","pathname","hash",i)),qa(!i.search||!i.search.includes("#"),qI("#","search","hash",i)));let a=n===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=t;else{let d=e.length-1;if(!r&&s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}o=d>=0?e[d]:"/"}let l=mje(i,o),u=s&&s!=="/"&&s.endsWith("/"),c=(a||s===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var _d=n=>n.join("/").replace(/\/\/+/g,"/"),yje=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),xje=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,_je=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function wje(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Zte=["POST","PUT","PATCH","DELETE"];new Set(Zte);var bje=["GET",...Zte];new Set(bje);var yy=M.createContext(null);yy.displayName="DataRouter";var Fk=M.createContext(null);Fk.displayName="DataRouterState";M.createContext(!1);var Qte=M.createContext({isTransitioning:!1});Qte.displayName="ViewTransition";var Sje=M.createContext(new Map);Sje.displayName="Fetchers";var Eje=M.createContext(null);Eje.displayName="Await";var Vd=M.createContext(null);Vd.displayName="Navigation";var M4=M.createContext(null);M4.displayName="Location";var kc=M.createContext({outlet:null,matches:[],isDataRoute:!1});kc.displayName="Route";var I4=M.createContext(null);I4.displayName="RouteError";function Aje(n,{relative:e}={}){qa(jk(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=M.useContext(Vd),{hash:i,pathname:a,search:s}=vw(n,{relative:e}),o=a;return t!=="/"&&(o=a==="/"?t:_d([t,a])),r.createHref({pathname:o,search:s,hash:i})}function jk(){return M.useContext(M4)!=null}function ug(){return qa(jk(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(M4).location}var Jte="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ene(n){M.useContext(Vd).static||M.useLayoutEffect(n)}function tne(){let{isDataRoute:n}=M.useContext(kc);return n?Bje():Tje()}function Tje(){qa(jk(),"useNavigate() may be used only in the context of a <Router> component.");let n=M.useContext(yy),{basename:e,navigator:t}=M.useContext(Vd),{matches:r}=M.useContext(kc),{pathname:i}=ug(),a=JSON.stringify(Kte(r)),s=M.useRef(!1);return ene(()=>{s.current=!0}),M.useCallback((l,u={})=>{if(Fd(s.current,Jte),!s.current)return;if(typeof l=="number"){t.go(l);return}let c=Yte(l,JSON.parse(a),i,u.relative==="path");n==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:_d([e,c.pathname])),(u.replace?t.replace:t.push)(c,u.state,u)},[e,t,a,i,n])}M.createContext(null);function kje(){let{matches:n}=M.useContext(kc),e=n[n.length-1];return e?e.params:{}}function vw(n,{relative:e}={}){let{matches:t}=M.useContext(kc),{pathname:r}=ug(),i=JSON.stringify(Kte(t));return M.useMemo(()=>Yte(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function Cje(n,e,t,r){qa(jk(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=M.useContext(Vd),{matches:a}=M.useContext(kc),s=a[a.length-1],o=s?s.params:{},l=s?s.pathname:"/",u=s?s.pathnameBase:"/",c=s&&s.route;{let x=c&&c.path||"";nne(l,!c||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let d=ug(),f;f=d;let m=f.pathname||"/",v=m;if(u!=="/"){let x=u.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let _=qte(n,{pathname:v});return Fd(c||_!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Fd(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Rje(_&&_.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:_d([u,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:_d([u,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,t,r)}function Mje(){let n=jje(),e=wje(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",n),s=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:a},"ErrorBoundary")," or"," ",M.createElement("code",{style:a},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:i},t):null,s)}var Ije=M.createElement(Mje,null),Pje=class extends M.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?M.createElement(kc.Provider,{value:this.props.routeContext},M.createElement(I4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Nje({routeContext:n,match:e,children:t}){let r=M.useContext(yy);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(kc.Provider,{value:n},t)}function Rje(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t==null?void 0:t.errors;if(a!=null){let l=i.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id])!==void 0);qa(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let s=!1,o=-1;if(t)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(o=l),u.route.id){let{loaderData:c,errors:d}=t,f=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!d||d[u.route.id]===void 0);if(u.route.lazy||f){s=!0,o>=0?i=i.slice(0,o+1):i=[i[0]];break}}}return i.reduceRight((l,u,c)=>{let d,f=!1,m=null,v=null;t&&(d=a&&u.route.id?a[u.route.id]:void 0,m=u.route.errorElement||Ije,s&&(o<0&&c===0?(nne("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,v=null):o===c&&(f=!0,v=u.route.hydrateFallbackElement||null)));let _=e.concat(i.slice(0,c+1)),w=()=>{let x;return d?x=m:f?x=v:u.route.Component?x=M.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=l,M.createElement(Nje,{match:u,routeContext:{outlet:l,matches:_,isDataRoute:t!=null},children:x})};return t&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?M.createElement(Pje,{location:t.location,revalidation:t.revalidation,component:m,error:d,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):w()},null)}function P4(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Dje(n){let e=M.useContext(yy);return qa(e,P4(n)),e}function Lje(n){let e=M.useContext(Fk);return qa(e,P4(n)),e}function Oje(n){let e=M.useContext(kc);return qa(e,P4(n)),e}function N4(n){let e=Oje(n),t=e.matches[e.matches.length-1];return qa(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Fje(){return N4("useRouteId")}function jje(){var r;let n=M.useContext(I4),e=Lje("useRouteError"),t=N4("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function Bje(){let{router:n}=Dje("useNavigate"),e=N4("useNavigate"),t=M.useRef(!1);return ene(()=>{t.current=!0}),M.useCallback(async(i,a={})=>{Fd(t.current,Jte),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var L7={};function nne(n,e,t){!e&&!L7[n]&&(L7[n]=!0,Fd(!1,t))}M.memo(Uje);function Uje({routes:n,future:e,state:t}){return Cje(n,void 0,t,e)}var vS="get",yS="application/x-www-form-urlencoded";function Bk(n){return n!=null&&typeof n.tagName=="string"}function Vje(n){return Bk(n)&&n.tagName.toLowerCase()==="button"}function zje(n){return Bk(n)&&n.tagName.toLowerCase()==="form"}function Hje(n){return Bk(n)&&n.tagName.toLowerCase()==="input"}function Gje(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Wje(n,e){return n.button===0&&(!e||e==="_self")&&!Gje(n)}var R2=null;function qje(){if(R2===null)try{new FormData(document.createElement("form"),0),R2=!1}catch{R2=!0}return R2}var $je=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $I(n){return n!=null&&!$je.has(n)?(Fd(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yS}"`),null):n}function Xje(n,e){let t,r,i,a,s;if(zje(n)){let o=n.getAttribute("action");r=o?Lf(o,e):null,t=n.getAttribute("method")||vS,i=$I(n.getAttribute("enctype"))||yS,a=new FormData(n)}else if(Vje(n)||Hje(n)&&(n.type==="submit"||n.type==="image")){let o=n.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||o.getAttribute("action");if(r=l?Lf(l,e):null,t=n.getAttribute("formmethod")||o.getAttribute("method")||vS,i=$I(n.getAttribute("formenctype"))||$I(o.getAttribute("enctype"))||yS,a=new FormData(o,n),!qje()){let{name:u,type:c,value:d}=n;if(c==="image"){let f=u?`${u}.`:"";a.append(`${f}x`,"0"),a.append(`${f}y`,"0")}else u&&a.append(u,d)}}else{if(Bk(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=vS,r=null,i=yS,s=n}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function R4(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Kje(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Lf(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function Yje(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Zje(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Qje(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await Yje(a,t);return s.links?s.links():[]}return[]}));return n6e(r.flat(1).filter(Zje).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function O7(n,e,t,r,i,a){let s=(l,u)=>t[u]?l.route.id!==t[u].route.id:!0,o=(l,u)=>{var c;return t[u].pathname!==l.pathname||((c=t[u].route.path)==null?void 0:c.endsWith("*"))&&t[u].params["*"]!==l.params["*"]};return a==="assets"?e.filter((l,u)=>s(l,u)||o(l,u)):a==="data"?e.filter((l,u)=>{var d;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(s(l,u)||o(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=t[0])==null?void 0:d.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Jje(n,e,{includeHydrateFallback:t}={}){return e6e(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function e6e(n){return[...new Set(n)]}function t6e(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function n6e(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(t6e(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function rne(){let n=M.useContext(yy);return R4(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function r6e(){let n=M.useContext(Fk);return R4(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var D4=M.createContext(void 0);D4.displayName="FrameworkContext";function ine(){let n=M.useContext(D4);return R4(n,"You must render this element inside a <HydratedRouter> element"),n}function i6e(n,e){let t=M.useContext(D4),[r,i]=M.useState(!1),[a,s]=M.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:d}=e,f=M.useRef(null);M.useEffect(()=>{if(n==="render"&&s(!0),n==="viewport"){let _=x=>{x.forEach(S=>{s(S.isIntersecting)})},w=new IntersectionObserver(_,{threshold:.5});return f.current&&w.observe(f.current),()=>{w.disconnect()}}},[n]),M.useEffect(()=>{if(r){let _=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(_)}}},[r]);let m=()=>{i(!0)},v=()=>{i(!1),s(!1)};return t?n!=="intent"?[a,f,{}]:[a,f,{onFocus:fx(o,m),onBlur:fx(l,v),onMouseEnter:fx(u,m),onMouseLeave:fx(c,v),onTouchStart:fx(d,m)}]:[!1,f,{}]}function fx(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function a6e({page:n,...e}){let{router:t}=rne(),r=M.useMemo(()=>qte(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?M.createElement(o6e,{page:n,matches:r,...e}):null}function s6e(n){let{manifest:e,routeModules:t}=ine(),[r,i]=M.useState([]);return M.useEffect(()=>{let a=!1;return Qje(n,e,t).then(s=>{a||i(s)}),()=>{a=!0}},[n,e,t]),r}function o6e({page:n,matches:e,...t}){let r=ug(),{manifest:i,routeModules:a}=ine(),{basename:s}=rne(),{loaderData:o,matches:l}=r6e(),u=M.useMemo(()=>O7(n,e,l,i,r,"data"),[n,e,l,i,r]),c=M.useMemo(()=>O7(n,e,l,i,r,"assets"),[n,e,l,i,r]),d=M.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let v=new Set,_=!1;if(e.forEach(x=>{var E;let S=i.routes[x.route.id];!S||!S.hasLoader||(!u.some(T=>T.route.id===x.route.id)&&x.route.id in o&&((E=a[x.route.id])!=null&&E.shouldRevalidate)||S.hasClientLoader?_=!0:v.add(x.route.id))}),v.size===0)return[];let w=Kje(n,s,"data");return _&&v.size>0&&w.searchParams.set("_routes",e.filter(x=>v.has(x.route.id)).map(x=>x.route.id).join(",")),[w.pathname+w.search]},[s,o,r,i,u,e,n,a]),f=M.useMemo(()=>Jje(c,i),[c,i]),m=s6e(c);return M.createElement(M.Fragment,null,d.map(v=>M.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),f.map(v=>M.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),m.map(({key:v,link:_})=>M.createElement("link",{key:v,..._})))}function l6e(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var ane=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ane&&(window.__reactRouterVersion="7.7.1")}catch{}var sne=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,one=M.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:o,target:l,to:u,preventScrollReset:c,viewTransition:d,...f},m){let{basename:v}=M.useContext(Vd),_=typeof u=="string"&&sne.test(u),w,x=!1;if(typeof u=="string"&&_&&(w=u,ane))try{let I=new URL(window.location.href),R=u.startsWith("//")?new URL(I.protocol+u):new URL(u),B=Lf(R.pathname,v);R.origin===I.origin&&B!=null?u=B+R.search+R.hash:x=!0}catch{Fd(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=Aje(u,{relative:i}),[E,T,D]=i6e(r,f),F=h6e(u,{replace:s,state:o,target:l,preventScrollReset:c,relative:i,viewTransition:d});function P(I){e&&e(I),I.defaultPrevented||F(I)}let N=M.createElement("a",{...f,...D,href:w||S,onClick:x||a?e:P,ref:l6e(m,T),target:l,"data-discover":!_&&t==="render"?"true":void 0});return E&&!_?M.createElement(M.Fragment,null,N,M.createElement(a6e,{page:S})):N});one.displayName="Link";var u6e=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:l,...u},c){let d=vw(s,{relative:u.relative}),f=ug(),m=M.useContext(Fk),{navigator:v,basename:_}=M.useContext(Vd),w=m!=null&&v6e(d)&&o===!0,x=v.encodeLocation?v.encodeLocation(d).pathname:d.pathname,S=f.pathname,E=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(S=S.toLowerCase(),E=E?E.toLowerCase():null,x=x.toLowerCase()),E&&_&&(E=Lf(E,_)||E);const T=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let D=S===x||!i&&S.startsWith(x)&&S.charAt(T)==="/",F=E!=null&&(E===x||!i&&E.startsWith(x)&&E.charAt(x.length)==="/"),P={isActive:D,isPending:F,isTransitioning:w},N=D?e:void 0,I;typeof r=="function"?I=r(P):I=[r,D?"active":null,F?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(P):a;return M.createElement(one,{...u,"aria-current":N,className:I,ref:c,style:R,to:s,viewTransition:o},typeof l=="function"?l(P):l)});u6e.displayName="NavLink";var c6e=M.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:s=vS,action:o,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:d,...f},m)=>{let v=m6e(),_=g6e(o,{relative:u}),w=s.toLowerCase()==="get"?"get":"post",x=typeof o=="string"&&sne.test(o),S=E=>{if(l&&l(E),E.defaultPrevented)return;E.preventDefault();let T=E.nativeEvent.submitter,D=(T==null?void 0:T.getAttribute("formmethod"))||s;v(T||E.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:i,state:a,relative:u,preventScrollReset:c,viewTransition:d})};return M.createElement("form",{ref:m,method:w,action:_,onSubmit:r?l:S,...f,"data-discover":!x&&n==="render"?"true":void 0})});c6e.displayName="Form";function d6e(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lne(n){let e=M.useContext(yy);return qa(e,d6e(n)),e}function h6e(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:s}={}){let o=tne(),l=ug(),u=vw(n,{relative:a});return M.useCallback(c=>{if(Wje(c,e)){c.preventDefault();let d=t!==void 0?t:YR(l)===YR(u);o(n,{replace:d,state:r,preventScrollReset:i,relative:a,viewTransition:s})}},[l,o,u,t,r,e,n,i,a,s])}var f6e=0,p6e=()=>`__${String(++f6e)}__`;function m6e(){let{router:n}=lne("useSubmit"),{basename:e}=M.useContext(Vd),t=Fje();return M.useCallback(async(r,i={})=>{let{action:a,method:s,encType:o,formData:l,body:u}=Xje(r,e);if(i.navigate===!1){let c=i.fetcherKey||p6e();await n.fetch(c,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||o,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function g6e(n,{relative:e}={}){let{basename:t}=M.useContext(Vd),r=M.useContext(kc);qa(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...vw(n||".",{relative:e})},s=ug();if(n==null){a.search=s.search;let o=new URLSearchParams(a.search),l=o.getAll("index");if(l.some(c=>c==="")){o.delete("index"),l.filter(d=>d).forEach(d=>o.append("index",d));let c=o.toString();a.search=c?`?${c}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:_d([t,a.pathname])),YR(a)}function v6e(n,{relative:e}={}){let t=M.useContext(Qte);qa(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=lne("useViewTransitionState"),i=vw(n,{relative:e});if(!t.isTransitioning)return!1;let a=Lf(t.currentLocation.pathname,r)||t.currentLocation.pathname,s=Lf(t.nextLocation.pathname,r)||t.nextLocation.pathname;return AA(i.pathname,s)!=null||AA(i.pathname,a)!=null}function y6e(){const{shortcode:n}=kje(),e=tne();return M.useEffect(()=>{async function t(){if(!n)return;const r=_r(un,"shortlinks",n),i=await Vf(r);if(i.exists()){const{url:a}=i.data();window.location.replace(a)}else e("/shortener-notfound",{replace:!0})}t()},[n,e]),h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-100 to-blue-100",children:h.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[h.jsx("div",{className:"text-2xl font-bold mb-2 text-purple-700",children:" Redirecting..."}),h.jsx("div",{className:"text-gray-600",children:"Mohon tunggu, Anda akan diarahkan ke link tujuan."})]})})}class x6e extends wn.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?h.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 text-center p-8",children:[h.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Terjadi Kesalahan"}),h.jsx("p",{className:"mb-4 text-gray-600",children:"Maaf, terjadi error pada aplikasi. Silakan refresh halaman atau coba lagi nanti."}),h.jsx("button",{className:"px-4 py-2 bg-primary text-white rounded",onClick:()=>window.location.reload(),children:"Refresh"})]}):this.props.children}}function _6e(){const[n,e]=M.useState(null),[t,r]=M.useState(null),[i,a]=M.useState(null),[s,o]=M.useState(null),[l,u]=M.useState(!0);M.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"});async function w(){u(!0);try{const x=await Vf(_r(un,"sejarah_page","main"));if(x.exists()){const S=x.data();e(typeof S.sejarahNarasi=="string"?S.sejarahNarasi:null),r(Array.isArray(S.kilasBalik)?S.kilasBalik:null),a(Array.isArray(S.videoMomentum)?S.videoMomentum:null),o(Array.isArray(S.ketuaList)?S.ketuaList:null)}else e(null),r(null),a(null),o(null)}catch{e(null),r(null),a(null)}u(!1)}w()},[]);const c=M.useRef(null),[d,f]=M.useState(0),[m,v]=M.useState(!0),_=M.useRef(null);return M.useEffect(()=>{if(!m)return;let w;const x=()=>{f(S=>{let E=S+7e-4;return E>1&&(E-=1),E}),w=requestAnimationFrame(x)};return w=requestAnimationFrame(x),()=>cancelAnimationFrame(w)},[m]),l?h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-blue-50 to-green-50",children:h.jsx("div",{className:"text-lg text-gray-600",children:"Memuat data sejarah..."})}):!n||!t||!i||!s?h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-blue-50 to-green-50",children:h.jsx("div",{className:"text-lg text-red-600",children:"Data sejarah belum tersedia."})}):h.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-green-50 py-10",children:h.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[h.jsx(Xn.h1,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.7},className:"text-3xl md:text-4xl font-extrabold text-center text-blue-900 mb-8",children:"Sejarah Mahapala Narotama"}),h.jsx(Xn.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.7},className:"text-lg text-gray-700 text-center mb-10 leading-relaxed",children:n}),h.jsx(Xn.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.7},className:"text-2xl font-bold text-blue-800 mb-4 text-center",children:"Jejak Ketua Umum"}),h.jsxs("div",{className:"relative w-full overflow-hidden py-4",children:[h.jsx("div",{ref:c,className:"flex gap-6 min-w-[700px] pb-2 px-2",style:{width:"max-content",transform:`translateX(-${d*(s.length*190+32)}px)`,transition:m?"none":"transform 0.2s",willChange:"transform"},children:(()=>{const w=[...s,...s],x=s.length-1;return w.map((S,E)=>{let T=null;(E+1)%s.length===0&&(T=h.jsx("div",{className:"flex items-center mx-2 text-3xl font-bold text-gray-400 select-none",children:"|"},"sep-"+E));const D=E%s.length===x;return h.jsxs(wn.Fragment,{children:[h.jsxs(Xn.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{delay:.05*(E%s.length)},className:"bg-white rounded-xl shadow-lg p-4 flex flex-col items-center min-w-[180px] hover:scale-105 transition-transform duration-300 border "+(D?"border-yellow-400 ring-4 ring-yellow-300 animate-glow shadow-yellow-200":"border-blue-100"),children:[h.jsx("img",{src:S.foto,alt:S.nama,className:"w-20 h-20 rounded-full object-cover mb-2 "+(D?"border-4 border-yellow-400 shadow-lg":"border-4 border-blue-200")}),h.jsx("div",{className:"font-bold text-lg text-center "+(D?"text-yellow-700":"text-blue-700"),children:S.nama}),h.jsxs("div",{className:"text-xs text-center "+(D?"text-yellow-600 font-bold":"text-gray-500"),children:["Periode ",S.periode]}),D&&h.jsx("div",{className:"mt-1 px-2 py-0.5 rounded bg-yellow-100 text-yellow-800 text-xs font-semibold animate-pulse",children:"Ketua Umum Sekarang"})]}),T]},E)})})()}),h.jsx("input",{type:"range",min:0,max:s.length-1,step:1,value:Math.round(d*(s.length-1)),onChange:w=>{v(!1),f(Number(w.target.value)/(s.length-1)),_.current&&clearTimeout(_.current),_.current=setTimeout(()=>v(!0),5e3)},onMouseDown:()=>{v(!1),_.current&&clearTimeout(_.current)},onMouseUp:()=>{_.current&&clearTimeout(_.current),_.current=setTimeout(()=>v(!0),5e3)},onTouchStart:()=>{v(!1),_.current&&clearTimeout(_.current)},onTouchEnd:()=>{_.current&&clearTimeout(_.current),_.current=setTimeout(()=>v(!0),5e3)},className:"w-full mt-4 accent-yellow-500","aria-label":"Scroll mantan ketua umum"})]}),h.jsx("style",{children:`
          @keyframes animate-glow {
            0% { box-shadow: 0 0 0 0 #fde68a, 0 0 10px 2px #fde68a44; }
            50% { box-shadow: 0 0 0 8px #fde68a44, 0 0 20px 8px #fde68a44; }
            100% { box-shadow: 0 0 0 0 #fde68a, 0 0 10px 2px #fde68a44; }
          }
          .animate-glow { animation: animate-glow 2s infinite; }
        `}),h.jsx(Xn.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.7},className:"text-2xl font-bold text-green-800 mb-4 mt-10 text-center",children:"Kilas Balik"}),h.jsx("div",{className:"space-y-4 mb-10",children:t.map((w,x)=>h.jsxs(Xn.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.1*x},className:"bg-white rounded-lg shadow p-4 flex items-center gap-4 border-l-4 border-green-400",children:[h.jsx("div",{className:"text-2xl font-bold text-green-600 w-16 text-center",children:w.tahun}),h.jsx("div",{className:"text-gray-700 text-base",children:w.momen})]},x))}),h.jsx(Xn.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.7},className:"text-2xl font-bold text-purple-800 mb-4 mt-10 text-center",children:"Video Momentum"}),h.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:i.map((w,x)=>h.jsxs(Xn.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2*x},className:"bg-white rounded-xl shadow-lg p-2 flex flex-col items-center",children:[h.jsx("div",{className:"aspect-w-16 aspect-h-9 w-full mb-2",children:h.jsx("iframe",{src:w.url,title:w.title,allowFullScreen:!0,className:"w-full h-40 rounded-lg"})}),h.jsx("div",{className:"text-sm text-center text-gray-700 font-semibold",children:w.title})]},x))})]})})}const w6e=({locked:n})=>n?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 17a1.5 1.5 0 001.5-1.5V14a1.5 1.5 0 10-3 0v1.5A1.5 1.5 0 0012 17zm6-6V9a6 6 0 10-12 0v2a2 2 0 00-2 2v7a2 2 0 002 2h12a2 2 0 002-2v-7a2 2 0 00-2-2zm-2 0H8V9a4 4 0 118 0v2z"})}):h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 11V9a5 5 0 00-10 0v2M7 11V9a5 5 0 0110 0v2m-5 4v2m0 0a2 2 0 104 0v-2a2 2 0 10-4 0z"})}),b6e=({ketua:n,onChange:e,onRemove:t})=>{const[r,i]=wn.useState(!n.locked);return wn.useEffect(()=>{i(!n.locked)},[n.locked]),h.jsx("div",{className:"w-full overflow-x-auto",children:h.jsxs("div",{className:`flex gap-2 mb-2 items-center border rounded p-2 bg-yellow-50 min-w-[500px] transition-all duration-200 ${n.locked?"opacity-60 grayscale":""}`,children:[h.jsx("img",{src:n.foto,alt:n.nama,className:"w-12 h-12 rounded-full object-cover"}),h.jsx("input",{value:n.nama,onChange:a=>e({...n,nama:a.target.value}),disabled:!r,placeholder:"Nama Ketua Umum",className:"flex-1 rounded border border-yellow-300 p-1 text-gray-800 bg-white min-w-[120px]"}),h.jsx("input",{value:n.periode,onChange:a=>e({...n,periode:a.target.value}),disabled:!r,placeholder:"Periode",className:"w-24 sm:w-32 rounded border border-yellow-300 p-1 text-gray-800 bg-white"}),h.jsx("input",{value:n.foto,onChange:a=>e({...n,foto:a.target.value}),disabled:!r,placeholder:"URL Foto",className:"w-32 sm:w-40 rounded border border-yellow-300 p-1 text-gray-800 bg-white"}),h.jsx("button",{className:"flex items-center gap-1 text-xs px-2 py-1 rounded bg-transparent hover:bg-yellow-100 focus:outline-none",title:n.locked?"Buka Kunci":"Kunci Data",onClick:()=>{if(n.locked){const a=window.prompt("Masukkan kode untuk membuka kunci data ketua umum!");a==="2601"?(i(!0),e({...n,locked:!1})):a!==null&&alert("Kode salah!")}else i(!1),e({...n,locked:!0})},children:h.jsx(w6e,{locked:n.locked})}),h.jsx("button",{disabled:!r,className:`text-red-600 font-bold px-2 ${r?"":"opacity-50 cursor-not-allowed"}`,onClick:async()=>{if(!r)return;const a=window.prompt("Konfirmasi hapus: Masukkan kode untuk menghapus data ketua umum!");a==="2601"?window.confirm("Yakin ingin menghapus data ketua umum ini?")&&t():a!==null&&alert("Kode salah!")},children:"Hapus"})]})})};function S6e({items:n,renderItem:e,onChange:t}){const r=wn.useRef(null),i=wn.useRef(null),a=l=>{r.current=l},s=l=>{i.current=l},o=()=>{const l=r.current,u=i.current;if(l!==null&&u!==null&&l!==u){const c=[...n],[d]=c.splice(l,1);c.splice(u,0,d),t(c)}r.current=null,i.current=null};return h.jsx("div",{children:n.map((l,u)=>h.jsx("div",{draggable:!0,onDragStart:()=>a(u),onDragEnter:()=>s(u),onDragEnd:o,onDragOver:c=>c.preventDefault(),style:{cursor:"grab"},children:e(l,u,{draggable:!0})},u))})}const kh={sejarahNarasi:"Mahapala Narotama adalah Unit Kegiatan Mahasiswa (UKM) di Universitas Narotama Surabaya yang bergerak di bidang pecinta alam dan petualangan. Berdiri pada tahun 2016, Mahapala Narotama aktif dalam kegiatan pendidikan dasar, ekspedisi gunung, penjelajahan, konservasi alam, bakti sosial, serta pengembangan karakter dan kepemimpinan mahasiswa. Dengan semangat kekeluargaan dan jiwa petualang, Mahapala Narotama telah melahirkan banyak kader yang berkontribusi dalam pelestarian alam dan pengabdian masyarakat, serta menjadi wadah pengembangan minat dan bakat mahasiswa di bidang alam bebas.",ketuaList:[{nama:"Roro Christiatirani Suwoto",periode:"2016-2017",foto:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/main/Img/Mantum/20250805_084125.jpg",locked:!0},{nama:"Arif Muhammad Rizal",periode:"2017-2018",foto:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/main/Img/Mantum/20250805_084151.jpg",locked:!0},{nama:"Ayu Wulandari Narhendra",periode:"2018-2019",foto:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/main/Img/Mantum/20250805_084234.jpg",locked:!0},{nama:"Moch. Fakhrul Islam",periode:"2019-2021",foto:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/main/Img/Mantum/20250805_084327.jpg",locked:!0},{nama:"Agna Mahireksha",periode:"2021-2022",foto:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/main/Img/Mantum/20250805_084401.jpg",locked:!0},{nama:"Robiatul Adawiyah",periode:"2023-2024",foto:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/main/Img/Mantum/20250805_084425.jpg",locked:!0},{nama:"Muhammad Fairus Fawas Afanza",periode:"2024-sekarang",foto:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/main/Img/Mantum/20250805_084448.png",locked:!0}],kilasBalik:[{tahun:"2016",momen:"Pendirian Mahapala Narotama dan Pendidikan Dasar Angkatan I (DIKLATSAR I)."},{tahun:"2017",momen:"Ekspedisi Gunung Lawu dan kegiatan bakti sosial di lereng gunung."},{tahun:"2018",momen:"DIKLATSAR II dan ekspedisi Gunung Semeru."},{tahun:"2019",momen:"Pendidikan Lanjut Rimba Gunung I dan penanaman pohon di kawasan konservasi."},{tahun:"2020",momen:"Aksi peduli lingkungan: penanaman 1000 pohon di Surabaya Timur."},{tahun:"2021",momen:"DIKLATSAR III (Sendang Banthak) dan pelatihan SAR Mahasiswa."},{tahun:"2022",momen:"Ekspedisi Gunung Arjuno-Welirang dan bakti sosial di desa binaan."},{tahun:"2023",momen:"DIKLATSAR IV (Panca Laksamana) dan kegiatan bakti sosial serta buka bersama."},{tahun:"2024",momen:"Penyelenggaraan seminar nasional konservasi dan pelantikan anggota terbanyak."}],videoMomentum:[{title:"Bakti sosial & Buka Bersama 2025",url:"https://www.youtube.com/embed/hTP4gwO7X80"},{title:"DIKLATSAR ANGKATAN KE IV (PANCA LAKSMANA) MAHAPALA NAROTAMA",url:"https://www.youtube.com/embed/A3rabYoh5v0"},{title:"PENDIDIKAN LANJUT RIMBA GUNUNG III MAHAPALA NAROTAMA",url:"https://www.youtube.com/embed/PXqneMBAOoU"},{title:"DIKLATSAR ANGKATAN KE III (SENDANG BANTHAK) MAHAPALA NAROTAMA",url:"https://www.youtube.com/embed/IIi19T-bt70"}]};function E6e(){const[n,e]=M.useState(null),[t,r]=M.useState(""),[i,a]=M.useState(""),[s,o]=M.useState(""),[l,u]=M.useState(!1),[c,d]=M.useState(kh),[f,m]=M.useState(!1),[v,_]=M.useState(kh),[w,x]=M.useState(!1),[S,E]=M.useState("");M.useEffect(()=>{const ne=$A(Tl,re=>e(re));return()=>ne()},[]),M.useEffect(()=>{async function ne(){u(!0);try{const re=await Vf(_r(un,"sejarah_page","main"));if(re.exists()){const oe=re.data();d({sejarahNarasi:oe.sejarahNarasi||kh.sejarahNarasi,ketuaList:Array.isArray(oe.ketuaList)?oe.ketuaList:kh.ketuaList,kilasBalik:Array.isArray(oe.kilasBalik)?oe.kilasBalik:kh.kilasBalik,videoMomentum:Array.isArray(oe.videoMomentum)?oe.videoMomentum:kh.videoMomentum})}else d(kh)}catch{d(kh)}u(!1)}ne()},[]);async function T(ne){ne.preventDefault(),o(""),u(!0);try{await nD(Tl,t,i)}catch(re){o("Login gagal: "+((re==null?void 0:re.message)||""))}u(!1)}function D(){_(c),m(!0)}function F(){m(!1),_(c)}function P(ne){_({...v,sejarahNarasi:ne.target.value})}function N(ne,re,oe){_({...v,kilasBalik:v.kilasBalik.map(($,ue)=>ue===ne?{...$,[re]:oe}:$)})}function I(){_({...v,kilasBalik:[...v.kilasBalik,{tahun:"",momen:""}]})}function R(ne){_({...v,kilasBalik:v.kilasBalik.filter((re,oe)=>oe!==ne)})}function B(ne,re,oe){_({...v,videoMomentum:v.videoMomentum.map(($,ue)=>ue===ne?{...$,[re]:oe}:$)})}function G(){_({...v,videoMomentum:[...v.videoMomentum,{title:"",url:""}]})}function H(ne){_({...v,videoMomentum:v.videoMomentum.filter((re,oe)=>oe!==ne)})}async function K(){x(!1),E(""),u(!0);try{await ms(_r(un,"sejarah_page","main"),v),d(v),m(!1),E("Berhasil disimpan!")}catch(ne){E("Gagal menyimpan: "+((ne==null?void 0:ne.message)||""))}u(!1)}return l?h.jsx("div",{className:"text-center py-20",children:"Loading..."}):n?h.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-green-50 py-4 flex justify-center items-start overflow-x-hidden",children:h.jsxs("div",{className:"w-full max-w-lg sm:max-w-3xl px-2 sm:px-4 rounded-xl shadow-xl bg-white/90 py-4 sm:py-6 border border-blue-100",children:[h.jsx(Xn.h1,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.7},className:"text-3xl md:text-4xl font-extrabold text-center text-blue-900 mb-8",children:"Admin Edit Sejarah Mahapala Narotama"}),f?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"mb-8",children:[h.jsx("label",{className:"block font-bold mb-2 text-yellow-800",children:"Daftar Ketua Umum"}),h.jsx("div",{className:"space-y-2",children:v.ketuaList.map((ne,re)=>h.jsx(wn.Fragment,{children:h.jsx(b6e,{ketua:ne,onChange:oe=>{_({...v,ketuaList:v.ketuaList.map(($,ue)=>ue===re?oe:$)})},onRemove:()=>{_({...v,ketuaList:v.ketuaList.filter((oe,$)=>$!==re)})}})},re))}),h.jsx(zt,{onClick:()=>_({...v,ketuaList:[...v.ketuaList,{nama:"",periode:"",foto:"",locked:!1}]}),className:"mt-2 px-3 py-1 bg-yellow-600 text-white rounded w-full sm:w-auto",children:"Tambah Ketua Umum"})]}),h.jsxs("div",{className:"mb-8",children:[h.jsx("label",{className:"block font-bold mb-2 text-blue-800",children:"Narasi Sejarah"}),h.jsx("textarea",{value:v.sejarahNarasi,onChange:P,rows:5,className:"w-full rounded border border-blue-300 p-2 text-gray-800 text-sm sm:text-base"})]}),h.jsxs("div",{className:"mb-8",children:[h.jsx("label",{className:"block font-bold mb-2 text-green-800",children:"Kilas Balik"}),h.jsx(S6e,{items:v.kilasBalik,onChange:ne=>_({...v,kilasBalik:ne}),renderItem:(ne,re)=>h.jsxs("div",{className:"flex flex-wrap gap-2 mb-2 items-center bg-green-50 rounded p-1 sm:p-2",style:{border:"1px dashed #6ee7b7"},children:[h.jsx("span",{className:"cursor-move text-green-600 font-bold px-2",children:""}),h.jsx("input",{value:ne.tahun,onChange:oe=>N(re,"tahun",oe.target.value),placeholder:"Tahun",className:"w-16 sm:w-20 rounded border border-green-300 p-1 text-gray-800 text-xs sm:text-base"}),h.jsx("input",{value:ne.momen,onChange:oe=>N(re,"momen",oe.target.value),placeholder:"Momen",className:"flex-1 min-w-[120px] rounded border border-green-300 p-1 text-gray-800 text-xs sm:text-base"}),h.jsx("button",{onClick:()=>R(re),className:"text-red-600 font-bold px-2 py-1 text-xs sm:text-base",children:"Hapus"})]})}),h.jsx(zt,{onClick:I,className:"mt-2 px-3 py-1 bg-green-600 text-white rounded w-full sm:w-auto",children:"Tambah Kilas Balik"})]}),h.jsxs("div",{className:"mb-8",children:[h.jsx("label",{className:"block font-bold mb-2 text-purple-800",children:"Video Momentum"}),h.jsx("div",{className:"space-y-2",children:v.videoMomentum.map((ne,re)=>h.jsxs("div",{className:"flex flex-wrap gap-2 mb-2 items-center bg-purple-50 rounded p-1 sm:p-2",style:{border:"1px dashed #a78bfa"},children:[h.jsx("input",{value:ne.title,onChange:oe=>B(re,"title",oe.target.value),placeholder:"Judul Video",className:"flex-1 min-w-[120px] rounded border border-purple-300 p-1 text-gray-800 text-xs sm:text-base"}),h.jsx("input",{value:ne.url,onChange:oe=>B(re,"url",oe.target.value),placeholder:"URL Embed Youtube",className:"flex-1 min-w-[120px] rounded border border-purple-300 p-1 text-gray-800 text-xs sm:text-base"}),h.jsx("button",{onClick:()=>H(re),className:"text-red-600 font-bold px-2 py-1 text-xs sm:text-base",children:"Hapus"})]},re))}),h.jsx(zt,{onClick:G,className:"mt-2 px-3 py-1 bg-purple-600 text-white rounded w-full sm:w-auto",children:"Tambah Video"})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[h.jsx(zt,{onClick:F,className:"bg-gray-400 text-white w-full sm:w-auto",children:"Batal"}),h.jsx(zt,{onClick:()=>x(!0),className:"bg-blue-700 text-white w-full sm:w-auto",children:"Simpan"})]}),S&&h.jsx("div",{className:"mt-4 text-green-700 font-bold",children:S}),w&&h.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-sm w-full",children:[h.jsx("div",{className:"font-bold text-lg mb-4",children:"Konfirmasi Simpan"}),h.jsx("div",{className:"mb-4",children:"Yakin ingin menyimpan perubahan data sejarah?"}),h.jsxs("div",{className:"flex gap-2 justify-end",children:[h.jsx(zt,{onClick:()=>x(!1),className:"bg-gray-400 text-white",children:"Batal"}),h.jsx(zt,{onClick:K,className:"bg-blue-700 text-white",children:"Ya, Simpan"})]})]})})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"mb-8",children:[h.jsx("label",{className:"block font-bold mb-2 text-yellow-800",children:"Daftar Ketua Umum"}),c.ketuaList.map((ne,re)=>h.jsxs("div",{className:"flex gap-2 mb-2 items-center border rounded p-2",children:[h.jsx("img",{src:ne.foto,alt:ne.nama,className:"w-12 h-12 rounded-full object-cover"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-bold text-yellow-900",children:ne.nama}),h.jsxs("div",{className:"text-xs text-gray-600",children:["Periode ",ne.periode]})]})]},re))]}),h.jsxs("div",{className:"mb-8",children:[h.jsx("label",{className:"block font-bold mb-2 text-blue-800",children:"Narasi Sejarah"}),h.jsx("div",{className:"bg-white rounded p-3 border border-blue-200 text-gray-800 whitespace-pre-line",children:c.sejarahNarasi})]}),h.jsxs("div",{className:"mb-8",children:[h.jsx("label",{className:"block font-bold mb-2 text-green-800",children:"Kilas Balik"}),c.kilasBalik.map((ne,re)=>h.jsxs("div",{className:"flex gap-2 mb-2 items-center",children:[h.jsx("div",{className:"w-20 font-bold text-green-700",children:ne.tahun}),h.jsx("div",{className:"flex-1 text-gray-800",children:ne.momen})]},re))]}),h.jsxs("div",{className:"mb-8",children:[h.jsx("label",{className:"block font-bold mb-2 text-purple-800",children:"Video Momentum"}),c.videoMomentum.map((ne,re)=>h.jsxs("div",{className:"flex gap-2 mb-2 items-center",children:[h.jsx("div",{className:"flex-1 text-gray-800 truncate",title:ne.title,children:ne.title.length>32?ne.title.slice(0,32)+"...":ne.title}),h.jsx("div",{className:"flex-1 text-blue-700 underline break-all",children:ne.url})]},re))]}),h.jsx(zt,{onClick:D,className:"bg-blue-700 text-white",children:"Edit Data"}),S&&h.jsx("div",{className:"mt-4 text-green-700 font-bold",children:S})]})]})}):h.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-green-50",children:h.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 w-full max-w-sm",children:[h.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Login Admin Sejarah"}),h.jsxs("form",{onSubmit:T,className:"space-y-4",children:[h.jsx(oi,{className:"w-full",type:"email",placeholder:"Email",value:t,onChange:ne=>r(ne.target.value),required:!0}),h.jsx(oi,{className:"w-full",type:"password",placeholder:"Password",value:i,onChange:ne=>a(ne.target.value),required:!0}),s&&h.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-md text-sm",children:s}),h.jsx(zt,{type:"submit",className:"w-full",children:"Login"})]})]})})}const Gu=[{id:"bivak",title:"Membuat Bivak",badge:"Bivak Builder",lessons:[{id:"bivak-1",title:"Pengantar Bivak",content:"Bivak adalah tempat perlindungan darurat yang dibangun di alam terbuka untuk melindungi diri dari cuaca buruk, hewan liar, dan bahaya lingkungan lainnya. Dalam Mahapala Narotama, pembuatan bivak menjadi latihan wajib yang mengajarkan anggota untuk berpikir kreatif, memanfaatkan sumber daya alam, dan bekerja sama dalam tim. Pembuatan bivak juga melatih kemampuan adaptasi, pengambilan keputusan cepat, dan kesiapsiagaan menghadapi situasi darurat. Setiap anggota diajak untuk memahami pentingnya perlindungan diri, baik secara fisik maupun mental, selama berada di alam bebas."},{id:"bivak-2",title:"Pemilihan Lokasi dan Perencanaan Bivak",content:"Memilih lokasi bivak tidak boleh sembarangan. Lokasi ideal adalah datar, tidak berada di bawah pohon rapuh, jauh dari jalur air, dan terlindung dari angin kencang. Selain itu, perhatikan juga kemungkinan bahaya seperti longsor, serangan hewan, atau banjir. Perencanaan meliputi penentuan arah pintu bivak, akses keluar-masuk, serta pemanfaatan bahan alami di sekitar. Anggota Mahapala Narotama diajarkan untuk selalu melakukan observasi lingkungan sebelum membangun bivak, serta berdiskusi dengan tim untuk menentukan lokasi terbaik."},{id:"bivak-3",title:"Teknik dan Bahan Membangun Bivak",content:"Bivak dapat dibuat dari berbagai bahan, seperti ponco, terpal, plastik, atau bahan alami seperti daun besar, ranting, dan bambu. Teknik membangun meliputi pemasangan tali simpul, pembuatan rangka, dan penutup yang rapat agar tahan angin dan hujan. Penting untuk memastikan struktur bivak kokoh, tidak mudah roboh, dan cukup luas untuk seluruh anggota tim. Dalam pelatihan Mahapala Narotama, anggota juga diajarkan teknik improvisasi jika perlengkapan terbatas, serta pentingnya menjaga kebersihan dan kelestarian lingkungan sekitar bivak."},{id:"bivak-4",title:"Pengalaman, Nilai, dan Evaluasi Bivak",content:"Pembuatan bivak bukan hanya soal teknis, tapi juga menanamkan nilai gotong royong, kepedulian, dan solidaritas antaranggota Mahapala Narotama. Setiap pengalaman membangun bivak menjadi pelajaran berharga tentang pentingnya komunikasi, pembagian tugas, dan saling membantu. Setelah bivak selesai, lakukan evaluasi: cek kekuatan struktur, kenyamanan, dan keamanan. Diskusikan apa yang bisa diperbaiki untuk kegiatan berikutnya. Dengan demikian, setiap anggota tidak hanya mahir secara teknis, tetapi juga tumbuh dalam karakter dan kepedulian sosial."}],quiz:[{id:"bivak-q1",question:"Apa alasan utama memilih lokasi bivak yang datar dan jauh dari jalur air?",options:["Agar bivak tidak mudah tergenang air saat hujan deras","Agar mudah mengambil air minum","Agar dekat dengan sumber makanan","Agar lebih mudah membangun api unggun"],answer:0},{id:"bivak-q2",question:"Dari pilihan berikut, mana yang PALING TEPAT untuk bahan penutup bivak darurat di hutan tropis?",options:["Daun lebar dan ponco","Ranting kecil saja","Tanah dan batu","Tali rafia dan plastik tipis"],answer:0},{id:"bivak-q3",question:"Jika hanya membawa ponco dan tali, apa langkah pertama membangun bivak saat hujan mulai turun?",options:["Cari lokasi aman, pasang ponco sebagai atap, lalu perkuat dengan tali","Langsung pasang ponco di tanah tanpa tali","Buat api dulu baru pasang ponco","Tunggu hujan reda lalu membangun bivak"],answer:0},{id:"bivak-q4",question:"Apa risiko utama membangun bivak di bawah pohon besar yang sudah tua?",options:["Ranting atau pohon bisa tumbang saat angin kencang","Lebih mudah mencari kayu bakar","Lebih teduh dan sejuk","Lebih dekat dengan sumber air"],answer:0},{id:"bivak-q5",question:"Dari pilihan berikut, mana yang PALING BENAR tentang evaluasi bivak setelah selesai dibangun?",options:["Cek kekuatan, kenyamanan, dan keamanan bivak bersama tim","Langsung tidur tanpa cek","Tinggalkan bivak untuk tim lain","Bongkar bivak setelah selesai"],answer:0},{id:"bivak-q6",question:"Jika anggota tim ada yang tidak bisa membuat simpul tali, apa yang sebaiknya dilakukan?",options:["Ajari dan praktik bersama sampai bisa","Biarkan saja, yang penting jadi","Suruh anggota lain saja yang mengikat","Tunda pembuatan bivak"],answer:0},{id:"bivak-q7",question:"Apa manfaat utama membangun bivak bersama tim?",options:["Pekerjaan lebih cepat selesai dan solidaritas meningkat","Lebih banyak diskusi","Lebih banyak bahan terpakai","Lebih banyak waktu istirahat"],answer:0},{id:"bivak-q8",question:"Jika hanya tersedia daun kecil dan ranting, apa solusi terbaik untuk membuat bivak tahan hujan?",options:["Susun daun dan ranting rapat-rapat sebagai atap","Gunakan ranting saja tanpa daun","Buat atap dari tanah","Tunggu sampai ada bahan lain"],answer:0},{id:"bivak-q9",question:"Apa yang PALING PENTING dilakukan sebelum meninggalkan lokasi bivak?",options:["Pastikan tidak ada sampah dan lingkungan tetap bersih","Tinggalkan saja karena sudah selesai","Bakar semua sisa bahan","Tinggalkan alat di lokasi"],answer:0},{id:"bivak-q10",question:"Dari pilihan berikut, mana yang PALING BENAR tentang nilai pembuatan bivak di Mahapala Narotama?",options:["Menanamkan gotong royong, kepedulian, dan evaluasi diri","Hanya soal teknik membangun","Hanya soal kecepatan kerja","Hanya soal perlombaan antar tim"],answer:0}]},{id:"ppgd",title:"Pertolongan Pertama Gawat Darurat",badge:"PPGD Hero",lessons:[{id:"ppgd-1",title:"Pengantar PPGD",content:"Pertolongan Pertama Gawat Darurat (PPGD) adalah serangkaian tindakan awal yang diberikan kepada korban kecelakaan atau sakit mendadak sebelum mendapatkan pertolongan medis lanjutan. Dalam Mahapala Narotama, PPGD menjadi materi wajib karena kegiatan di alam terbuka memiliki risiko tinggi cedera, luka, atau kecelakaan. Anggota dilatih untuk tetap tenang, sigap, dan mampu mengambil keputusan cepat dalam situasi darurat. PPGD tidak hanya soal teknik, tetapi juga soal empati, komunikasi, dan kerja sama tim dalam menyelamatkan nyawa."},{id:"ppgd-2",title:"Penilaian dan Penanganan Korban",content:"Langkah pertama PPGD adalah menilai kondisi korban: cek kesadaran, pernapasan, denyut nadi, dan adanya perdarahan. Prioritaskan penanganan pada masalah yang mengancam nyawa, seperti henti napas, perdarahan hebat, atau syok. Penanganan awal meliputi pembukaan jalan napas, bantuan napas buatan, penekanan luka, dan pembidaian patah tulang. Anggota Mahapala Narotama diajarkan untuk selalu mengutamakan keselamatan diri dan korban, serta meminta bantuan jika situasi tidak terkendali."},{id:"ppgd-3",title:"Teknik CPR, Luka, dan Patah Tulang",content:"Teknik CPR (Cardiopulmonary Resuscitation) digunakan pada korban henti napas dan jantung. Langkahnya: cek respons, panggil bantuan, lakukan kompresi dada dan bantuan napas. Penanganan luka meliputi pembersihan, penekanan, dan pembalutan. Untuk patah tulang, lakukan pembidaian dengan alat yang ada, pastikan tidak ada pergerakan pada bagian yang patah. Semua tindakan harus dilakukan dengan hati-hati, memperhatikan kenyamanan dan keselamatan korban."},{id:"ppgd-4",title:"Evaluasi, Komunikasi, dan Nilai PPGD",content:"Setelah tindakan PPGD, lakukan evaluasi kondisi korban secara berkala. Komunikasikan kondisi korban ke tim dan petugas medis. Nilai utama PPGD di Mahapala Narotama adalah kepedulian, ketenangan, dan kerja sama. Setiap latihan PPGD bertujuan membentuk anggota yang sigap, empati, dan mampu bertindak efektif dalam situasi darurat di alam bebas."}],quiz:[{id:"ppgd-q1",question:"Apa langkah PALING PERTAMA yang harus dilakukan saat menemukan korban tidak sadarkan diri di hutan?",options:["Pastikan keamanan lokasi, lalu cek respons korban","Langsung lakukan CPR tanpa cek","Pindahkan korban ke tempat lain","Berikan minum segera"],answer:0},{id:"ppgd-q2",question:"Dari pilihan berikut, mana yang PALING BENAR tentang urutan penanganan korban patah tulang?",options:["Stabilkan bagian yang patah, lakukan pembidaian, dan pantau kondisi korban","Angkat korban ke tempat aman tanpa pembidaian","Beri makan lalu bawa ke rumah sakit","Tunggu sampai korban bisa berjalan sendiri"],answer:0},{id:"ppgd-q3",question:"Jika korban mengalami perdarahan hebat pada kaki, apa tindakan PALING TEPAT?",options:["Tekan luka dengan perban bersih dan angkat kaki lebih tinggi dari jantung","Beri air minum sebanyak-banyaknya","Tunggu darah berhenti sendiri","Bungkus kaki dengan plastik"],answer:0},{id:"ppgd-q4",question:"Apa tujuan utama melakukan CPR pada korban henti napas dan jantung?",options:["Mengembalikan sirkulasi oksigen ke otak dan organ vital","Membuat korban sadar secepatnya","Mengurangi rasa sakit korban","Menghentikan perdarahan"],answer:0},{id:"ppgd-q5",question:"Jika korban sadar setelah PPGD, apa langkah berikutnya?",options:["Pantau kondisi korban dan siapkan evakuasi ke medis","Tinggalkan korban karena sudah sadar","Beri makan dan minum sebanyak-banyaknya","Langsung angkat korban tanpa cek ulang"],answer:0},{id:"ppgd-q6",question:"Dari pilihan berikut, mana yang PALING BENAR tentang komunikasi dalam PPGD?",options:["Sampaikan kondisi korban secara jelas ke tim dan petugas medis","Hanya tim yang tahu kondisi korban","Tidak perlu komunikasi jika korban sadar","Tunda komunikasi sampai evakuasi selesai"],answer:0},{id:"ppgd-q7",question:"Jika korban tidak bernapas, apa urutan tindakan yang PALING BENAR?",options:["Buka jalan napas, cek pernapasan, lakukan bantuan napas buatan","Langsung lakukan CPR tanpa cek","Beri minum dulu baru CPR","Pindahkan korban sebelum tindakan"],answer:0},{id:"ppgd-q8",question:"Apa yang PALING PENTING dilakukan setelah tindakan PPGD selesai?",options:["Evaluasi kondisi korban secara berkala dan siapkan evakuasi","Langsung tinggalkan korban","Beri makan sebanyak-banyaknya","Bungkus korban dengan selimut saja"],answer:0},{id:"ppgd-q9",question:"Jika korban mengalami syok, apa tindakan PALING TEPAT?",options:["Baringkan korban, jaga kehangatan, dan pantau kondisi vital","Beri minum manis sebanyak-banyaknya","Angkat kaki korban lebih tinggi dari kepala saja","Tunggu sampai korban sadar sendiri"],answer:0},{id:"ppgd-q10",question:"Dari pilihan berikut, mana yang PALING BENAR tentang nilai PPGD di Mahapala Narotama?",options:["Kepedulian, ketenangan, dan kerja sama tim dalam menyelamatkan nyawa","Hanya soal teknik medis","Hanya soal kecepatan tindakan","Hanya soal perlombaan antar tim"],answer:0}]},{id:"navigasi",title:"Navigasi Darat",badge:"Navigator",lessons:[{id:"navigasi-1",title:"Pengantar Navigasi Darat",content:"Navigasi darat adalah kemampuan membaca peta, kompas, dan mengenali tanda-tanda alam untuk menentukan posisi dan arah perjalanan di alam bebas. Dalam Mahapala Narotama, navigasi menjadi materi inti karena sangat penting untuk keselamatan dan keberhasilan setiap ekspedisi. Anggota dilatih untuk memahami prinsip dasar navigasi, seperti orientasi peta, penggunaan kompas, dan membaca medan. Selain itu, navigasi juga melatih ketelitian, logika, dan kerja sama tim dalam mengambil keputusan di lapangan."},{id:"navigasi-2",title:"Membaca Peta Topografi dan Medan",content:"Peta topografi adalah representasi permukaan bumi yang menunjukkan kontur, sungai, jalur, dan objek penting lainnya. Membaca peta membutuhkan pemahaman simbol, skala, dan interpretasi kontur untuk mengenali ketinggian dan kemiringan medan. Anggota Mahapala Narotama diajarkan cara menghubungkan peta dengan kondisi nyata di lapangan, serta teknik mengidentifikasi titik-titik orientasi seperti puncak, lembah, dan persimpangan jalur. Latihan membaca peta dilakukan secara rutin untuk meningkatkan kepercayaan diri dan akurasi navigasi."},{id:"navigasi-3",title:"Teknik Penggunaan Kompas dan Navigasi Alam",content:"Kompas adalah alat utama untuk menentukan arah mata angin. Teknik dasar meliputi menentukan utara magnetik, mengambil bearing, dan mengikuti azimuth. Selain kompas, tanda-tanda alam seperti posisi matahari, arah aliran sungai, dan pertumbuhan lumut juga dapat digunakan sebagai navigasi alternatif. Dalam pelatihan Mahapala Narotama, anggota diajarkan untuk selalu mengonfirmasi arah dengan lebih dari satu metode, serta mengantisipasi gangguan medan magnet atau cuaca buruk yang dapat mempengaruhi akurasi kompas."},{id:"navigasi-4",title:"Latihan Navigasi, Evaluasi, dan Nilai",content:"Latihan navigasi dilakukan di berbagai medan, mulai dari hutan, pegunungan, hingga rawa. Setiap latihan diakhiri dengan evaluasi: cek ketepatan rute, waktu tempuh, dan kerja sama tim. Nilai utama navigasi di Mahapala Narotama adalah ketelitian, komunikasi, dan kemampuan mengambil keputusan bersama. Pengalaman navigasi membentuk anggota yang mandiri, tangguh, dan siap menghadapi tantangan di alam bebas."}],quiz:[{id:"navigasi-q1",question:"Jika peta menunjukkan kontur rapat dan menanjak, apa artinya?",options:["Medan curam dan menanjak tajam","Medan datar dan mudah dilalui","Banyak sungai di sekitar","Jalur tersebut pasti aman"],answer:0},{id:"navigasi-q2",question:"Dari pilihan berikut, mana yang PALING BENAR tentang penggunaan kompas di lapangan?",options:["Selalu jauhkan kompas dari benda logam dan cek bearing secara berkala","Kompas bisa digunakan di mana saja tanpa pengaruh apapun","Kompas hanya digunakan saat tersesat saja","Kompas tidak perlu dikalibrasi"],answer:0},{id:"navigasi-q3",question:"Jika tersesat di hutan tanpa sinyal, apa langkah PALING TEPAT?",options:["Tetap tenang, gunakan peta dan kompas, lalu cari tanda alam untuk orientasi","Langsung berjalan ke arah mana saja","Teriak terus-menerus tanpa arah","Tunggu di tempat tanpa usaha apapun"],answer:0},{id:"navigasi-q4",question:"Apa manfaat utama latihan navigasi secara rutin?",options:["Meningkatkan ketelitian, kepercayaan diri, dan kerja sama tim","Agar cepat sampai tujuan saja","Agar bisa berjalan sendiri tanpa tim","Agar tidak perlu membawa peta"],answer:0},{id:"navigasi-q5",question:"Jika kompas menunjukkan arah berbeda dari peta, apa yang sebaiknya dilakukan?",options:["Cek ulang posisi, pastikan tidak ada gangguan logam, dan konfirmasi dengan tanda alam","Langsung ikuti kompas saja","Abaikan kompas dan gunakan insting","Tunggu sampai kompas berubah sendiri"],answer:0},{id:"navigasi-q6",question:"Dari pilihan berikut, mana yang PALING BENAR tentang membaca peta topografi?",options:["Interpretasi kontur penting untuk mengenali ketinggian dan kemiringan medan","Hanya lihat simbol sungai saja","Peta hanya untuk dekorasi","Peta tidak perlu dibawa"],answer:0},{id:"navigasi-q7",question:"Jika tim kehilangan arah di kabut tebal, apa langkah PALING TEPAT?",options:["Gunakan kompas, tetap bersama tim, dan bergerak perlahan sambil cek orientasi","Berjalan sendiri-sendiri agar cepat keluar","Tunggu sampai kabut hilang tanpa usaha","Teriak tanpa arah"],answer:0},{id:"navigasi-q8",question:"Apa risiko utama jika tidak melakukan evaluasi navigasi setelah latihan?",options:["Kesalahan berulang dan kurangnya perbaikan kemampuan","Tim jadi lebih kompak","Peta jadi lebih mudah dibaca","Kompas jadi lebih akurat"],answer:0},{id:"navigasi-q9",question:"Dari pilihan berikut, mana yang PALING BENAR tentang nilai navigasi di Mahapala Narotama?",options:["Ketelitian, komunikasi, dan pengambilan keputusan bersama","Hanya soal kecepatan berjalan","Hanya soal membawa alat mahal","Hanya soal keberuntungan"],answer:0},{id:"navigasi-q10",question:"Jika menemukan sungai di peta dan di lapangan, apa yang sebaiknya dilakukan?",options:["Cocokkan posisi di peta dengan kondisi nyata untuk orientasi","Abaikan sungai dan terus berjalan","Gunakan sungai hanya untuk minum","Tunggu di sungai sampai tim lain datang"],answer:0}]},{id:"sar",title:"Search and Rescue (SAR)",badge:"SAR Rescuer",lessons:[{id:"sar-1",title:"Pengantar SAR",content:"Search and Rescue (SAR) adalah upaya pencarian dan penyelamatan korban kecelakaan atau hilang di alam bebas. Dalam Mahapala Narotama, SAR menjadi materi lanjutan yang menuntut kesiapsiagaan, keberanian, dan kemampuan bekerja di bawah tekanan. Anggota dilatih untuk memahami prinsip dasar SAR, seperti pencarian sistematis, evakuasi korban, dan penggunaan alat komunikasi darurat. SAR juga menanamkan nilai empati, kepedulian, dan kerja sama lintas tim."},{id:"sar-2",title:"Teknik Pencarian dan Evakuasi",content:"Teknik pencarian meliputi pencatatan titik terakhir korban, pembagian sektor pencarian, dan penggunaan alat bantu seperti peluit, HT, atau anjing pelacak. Evakuasi korban dilakukan dengan hati-hati, memperhatikan kondisi korban dan medan. Anggota Mahapala Narotama diajarkan teknik membawa tandu, improvisasi alat evakuasi, dan penanganan korban syok atau luka berat. Setiap operasi SAR diawali dengan briefing dan pembagian tugas yang jelas."},{id:"sar-3",title:"Komunikasi, Simulasi, dan Evaluasi SAR",content:"Komunikasi adalah kunci keberhasilan SAR. Setiap tim harus melaporkan posisi, temuan, dan perkembangan secara berkala. Simulasi SAR dilakukan secara rutin untuk mengasah kesiapsiagaan dan koordinasi antar tim. Setelah operasi, dilakukan evaluasi menyeluruh: cek efektivitas pencarian, kecepatan evakuasi, dan kendala di lapangan. Evaluasi bertujuan meningkatkan kemampuan dan memperkuat solidaritas antar anggota."},{id:"sar-4",title:"Nilai, Etika, dan Tantangan SAR",content:"SAR menanamkan nilai keberanian, empati, dan etika profesional. Setiap anggota diajarkan untuk selalu mengutamakan keselamatan diri dan tim, menghormati korban, dan menjaga kerahasiaan informasi. Tantangan utama SAR adalah medan berat, cuaca buruk, dan tekanan waktu. Pengalaman SAR membentuk anggota Mahapala Narotama menjadi pribadi yang tangguh, peduli, dan siap membantu siapa saja dalam situasi darurat."}],quiz:[{id:"sar-q1",question:"Jika tim SAR menemukan jejak kaki baru di sekitar lokasi hilangnya korban, apa langkah PALING TEPAT?",options:["Ikuti jejak dengan hati-hati dan laporkan ke koordinator SAR","Abaikan jejak dan lanjutkan pencarian di sektor lain","Tunggu di tempat sampai korban kembali","Langsung teriak memanggil korban tanpa koordinasi"],answer:0},{id:"sar-q2",question:"Dari pilihan berikut, mana yang PALING BENAR tentang evakuasi korban di medan terjal?",options:["Gunakan tandu, jaga kestabilan korban, dan koordinasi dengan tim","Angkat korban secepatnya tanpa alat","Bawa korban sendiri tanpa bantuan","Tunda evakuasi sampai cuaca membaik tanpa persiapan"],answer:0},{id:"sar-q3",question:"Jika komunikasi HT terputus saat operasi SAR, apa langkah PALING TEPAT?",options:["Gunakan sinyal darurat atau cari posisi lebih tinggi untuk sinyal","Tunggu saja tanpa usaha","Tinggalkan tim dan cari sendiri","Matikan HT dan lanjutkan pencarian"],answer:0},{id:"sar-q4",question:"Apa manfaat utama simulasi SAR secara rutin?",options:["Meningkatkan kesiapsiagaan, koordinasi, dan kecepatan respon tim","Agar lebih sering berkumpul saja","Agar bisa menggunakan alat baru","Agar tidak perlu latihan lain"],answer:0},{id:"sar-q5",question:"Jika korban mengalami syok berat, apa tindakan PALING BENAR?",options:["Jaga kehangatan, baringkan korban, dan pantau kondisi vital sambil menunggu evakuasi","Beri makan dan minum sebanyak-banyaknya","Angkat korban berdiri agar cepat pulih","Tinggalkan korban untuk mencari bantuan"],answer:0},{id:"sar-q6",question:"Dari pilihan berikut, mana yang PALING BENAR tentang briefing sebelum operasi SAR?",options:["Pembagian tugas, penjelasan rute, dan penekanan keselamatan tim","Langsung berangkat tanpa briefing","Hanya koordinator yang tahu rute","Briefing hanya untuk tim baru"],answer:0},{id:"sar-q7",question:"Jika menemukan korban dalam kondisi tidak sadar dan luka berat, apa urutan tindakan PALING TEPAT?",options:["Cek respons, lakukan PPGD, dan evakuasi dengan hati-hati","Langsung angkat korban tanpa cek","Beri minum dulu baru evakuasi","Tunggu sampai korban sadar sendiri"],answer:0},{id:"sar-q8",question:"Apa risiko utama jika tim SAR tidak melakukan evaluasi setelah operasi?",options:["Kesalahan berulang dan kurangnya peningkatan kemampuan","Tim jadi lebih kompak","Alat jadi lebih awet","Medan jadi lebih mudah"],answer:0},{id:"sar-q9",question:"Dari pilihan berikut, mana yang PALING BENAR tentang nilai SAR di Mahapala Narotama?",options:["Keberanian, empati, dan etika profesional dalam penyelamatan","Hanya soal kecepatan evakuasi","Hanya soal alat canggih","Hanya soal jumlah korban"],answer:0},{id:"sar-q10",question:"Jika operasi SAR dilakukan di malam hari dengan cuaca buruk, apa langkah PALING TEPAT?",options:["Tingkatkan kewaspadaan, gunakan alat penerangan, dan koordinasi ketat antar tim","Lanjutkan pencarian tanpa alat","Tunggu sampai pagi tanpa persiapan","Pisah tim agar lebih cepat"],answer:0}]},{id:"konservasi",title:"Konservasi Alam",badge:"Conservationist",lessons:[{id:"konservasi-1",title:"Pengantar Konservasi Alam",content:"Konservasi alam adalah upaya menjaga, melindungi, dan memulihkan ekosistem agar tetap lestari untuk generasi sekarang dan mendatang. Dalam Mahapala Narotama, konservasi menjadi bagian penting dari setiap kegiatan, mulai dari edukasi, aksi nyata, hingga advokasi lingkungan. Anggota diajarkan untuk memahami pentingnya keseimbangan ekosistem, peran manusia dalam menjaga alam, dan dampak kerusakan lingkungan terhadap kehidupan. Konservasi juga menanamkan rasa tanggung jawab, kepedulian, dan cinta alam pada setiap anggota."},{id:"konservasi-2",title:"Jenis dan Strategi Konservasi",content:"Konservasi dapat berupa perlindungan flora, fauna, air, tanah, dan udara. Strategi konservasi meliputi penanaman pohon, perlindungan satwa langka, pengelolaan sampah, dan edukasi masyarakat. Anggota Mahapala Narotama dilatih untuk merancang dan melaksanakan program konservasi yang efektif, serta melakukan monitoring dan evaluasi hasilnya. Setiap aksi konservasi harus memperhatikan aspek ekologi, sosial, dan ekonomi agar berkelanjutan."},{id:"konservasi-3",title:"Aksi Konservasi Mahapala Narotama",content:"Aksi konservasi yang rutin dilakukan antara lain penanaman pohon, bersih-bersih lingkungan, kampanye anti sampah plastik, dan penyuluhan ke sekolah-sekolah. Setiap aksi diawali dengan perencanaan matang, pelibatan komunitas, dan dokumentasi hasil. Anggota diajarkan untuk bekerja sama dengan berbagai pihak, seperti pemerintah, LSM, dan masyarakat lokal, agar dampak konservasi lebih luas dan berkelanjutan."},{id:"konservasi-4",title:"Evaluasi, Nilai, dan Tantangan Konservasi",content:"Setelah aksi konservasi, dilakukan evaluasi: cek keberhasilan, tantangan, dan peluang perbaikan. Nilai utama konservasi di Mahapala Narotama adalah kepedulian, tanggung jawab, dan kolaborasi. Tantangan utama konservasi adalah perubahan perilaku, keterbatasan sumber daya, dan tekanan ekonomi. Pengalaman konservasi membentuk anggota yang peduli, inovatif, dan siap menjadi agen perubahan lingkungan."}],quiz:[{id:"konservasi-q1",question:"Jika menemukan sampah plastik di jalur pendakian, apa langkah PALING BENAR?",options:["Ambil dan bawa turun untuk dibuang di tempat sampah","Biarkan saja karena bukan sampah sendiri","Bakar di tempat tanpa pengelolaan","Timbun di tanah agar tidak terlihat"],answer:0},{id:"konservasi-q2",question:"Dari pilihan berikut, mana yang PALING BENAR tentang penanaman pohon?",options:["Pilih jenis pohon lokal, tanam di musim hujan, dan rawat hingga tumbuh","Tanam pohon apa saja tanpa perawatan","Tanam pohon di musim kemarau saja","Tanam pohon lalu tinggalkan tanpa evaluasi"],answer:0},{id:"konservasi-q3",question:"Jika ingin melindungi satwa langka di hutan, apa strategi PALING TEPAT?",options:["Lindungi habitatnya, edukasi masyarakat, dan cegah perburuan liar","Tangkap dan pelihara di rumah","Biarkan saja tanpa perlindungan","Beri makan satwa liar secara langsung"],answer:0},{id:"konservasi-q4",question:"Apa manfaat utama evaluasi setelah aksi konservasi?",options:["Mengetahui keberhasilan, tantangan, dan peluang perbaikan","Agar bisa mengulang aksi yang sama","Agar lebih banyak dokumentasi","Agar bisa mengajak lebih banyak orang"],answer:0},{id:"konservasi-q5",question:"Jika komunitas menolak aksi konservasi, apa langkah PALING BIJAK?",options:["Lakukan pendekatan persuasif, edukasi, dan libatkan tokoh masyarakat","Paksakan aksi tanpa izin","Tinggalkan komunitas dan cari lokasi lain","Abaikan saja penolakan"],answer:0},{id:"konservasi-q6",question:"Dari pilihan berikut, mana yang PALING BENAR tentang nilai konservasi di Mahapala Narotama?",options:["Kepedulian, tanggung jawab, dan kolaborasi lintas pihak","Hanya soal menanam pohon","Hanya soal bersih-bersih","Hanya soal dokumentasi"],answer:0},{id:"konservasi-q7",question:"Jika aksi konservasi gagal mencapai target, apa langkah PALING TEPAT?",options:["Evaluasi penyebab kegagalan dan rancang strategi baru","Biarkan saja tanpa evaluasi","Salahkan tim lain","Tunda aksi berikutnya tanpa alasan"],answer:0},{id:"konservasi-q8",question:"Apa risiko utama jika tidak ada monitoring setelah aksi konservasi?",options:["Dampak aksi tidak terukur dan sulit diperbaiki","Aksi jadi lebih mudah","Pohon tumbuh lebih cepat","Sampah otomatis hilang"],answer:0},{id:"konservasi-q9",question:"Dari pilihan berikut, mana yang PALING BENAR tentang tantangan konservasi?",options:["Perubahan perilaku, keterbatasan sumber daya, dan tekanan ekonomi","Hanya soal cuaca buruk","Hanya soal alat kurang","Hanya soal lokasi jauh"],answer:0},{id:"konservasi-q10",question:"Jika ingin mengajak generasi muda peduli lingkungan, apa strategi PALING EFEKTIF?",options:["Edukasi, aksi nyata, dan libatkan mereka dalam program konservasi","Biarkan mereka belajar sendiri","Hanya beri materi tanpa praktik","Tunda edukasi sampai dewasa"],answer:0}]},{id:"leadership",title:"Kepemimpinan Lapangan",badge:"Field Leader",lessons:[{id:"leadership-1",title:"Pengantar Kepemimpinan Lapangan",content:"Kepemimpinan lapangan adalah kemampuan memimpin tim dalam situasi nyata di alam bebas, di mana tantangan, risiko, dan dinamika kelompok sangat tinggi. Dalam Mahapala Narotama, kepemimpinan bukan hanya soal memberi perintah, tetapi juga soal memberi teladan, membangun kepercayaan, dan menjaga semangat tim. Setiap anggota diajarkan untuk menjadi pemimpin yang adaptif, komunikatif, dan mampu mengambil keputusan cepat di bawah tekanan."},{id:"leadership-2",title:"Tipe, Peran, dan Tantangan Pemimpin",content:"Ada berbagai tipe pemimpin: demokratis, otoriter, partisipatif, dan situasional. Setiap tipe memiliki kelebihan dan tantangan tersendiri. Pemimpin lapangan harus mampu membaca situasi, menyesuaikan gaya kepemimpinan, dan membagi peran secara adil. Tantangan utama adalah mengelola konflik, menjaga motivasi tim, dan memastikan keselamatan semua anggota. Dalam Mahapala Narotama, simulasi kepemimpinan dilakukan untuk melatih kemampuan ini secara langsung."},{id:"leadership-3",title:"Simulasi, Evaluasi, dan Nilai Kepemimpinan",content:"Simulasi kepemimpinan dilakukan dalam setiap kegiatan, mulai dari ekspedisi, pelatihan, hingga aksi sosial. Setelah simulasi, dilakukan evaluasi: cek efektivitas komunikasi, pengambilan keputusan, dan hasil kerja tim. Nilai utama kepemimpinan di Mahapala Narotama adalah tanggung jawab, komunikasi terbuka, dan keteladanan. Pengalaman kepemimpinan membentuk anggota yang percaya diri, bijak, dan siap memimpin di berbagai situasi."},{id:"leadership-4",title:"Etika, Komunikasi, dan Pengembangan Diri",content:"Etika kepemimpinan meliputi kejujuran, keadilan, dan penghargaan terhadap setiap anggota. Komunikasi efektif adalah kunci membangun kepercayaan dan kerja sama. Mahapala Narotama mendorong setiap anggota untuk terus belajar, menerima masukan, dan mengembangkan potensi kepemimpinan melalui refleksi dan mentoring."}],quiz:[{id:"leadership-q1",question:"Jika tim menghadapi konflik internal saat ekspedisi, apa langkah PALING BIJAK seorang pemimpin?",options:["Fasilitasi diskusi terbuka dan cari solusi bersama","Abaikan konflik agar cepat selesai","Pilih satu pihak saja tanpa dengar yang lain","Tunda penyelesaian sampai pulang"],answer:0},{id:"leadership-q2",question:"Dari pilihan berikut, mana yang PALING BENAR tentang tipe pemimpin situasional?",options:["Menyesuaikan gaya kepemimpinan dengan kondisi dan kebutuhan tim","Selalu otoriter di semua situasi","Hanya demokratis tanpa kompromi","Tidak pernah berubah gaya memimpin"],answer:0},{id:"leadership-q3",question:"Jika anggota tim kehilangan motivasi di tengah perjalanan, apa langkah PALING EFEKTIF?",options:["Ajak diskusi, dengarkan keluhan, dan beri semangat baru","Biarkan saja sampai motivasi kembali sendiri","Tegur keras di depan tim","Tunda perjalanan tanpa alasan"],answer:0},{id:"leadership-q4",question:"Apa manfaat utama evaluasi setelah simulasi kepemimpinan?",options:["Mengetahui kelebihan, kekurangan, dan peluang pengembangan diri","Agar bisa mengulang simulasi yang sama","Agar lebih banyak dokumentasi","Agar bisa mengajak lebih banyak orang"],answer:0},{id:"leadership-q5",question:"Jika pemimpin harus mengambil keputusan cepat di situasi darurat, apa prinsip PALING BENAR?",options:["Utamakan keselamatan tim, pertimbangkan risiko, dan komunikasikan keputusan","Ambil keputusan sendiri tanpa diskusi","Tunda keputusan sampai semua setuju","Pilih opsi termudah tanpa pertimbangan"],answer:0},{id:"leadership-q6",question:"Dari pilihan berikut, mana yang PALING BENAR tentang komunikasi dalam kepemimpinan?",options:["Komunikasi terbuka membangun kepercayaan dan kerja sama tim","Komunikasi hanya satu arah dari pemimpin","Tidak perlu komunikasi jika sudah kenal","Komunikasi hanya saat briefing saja"],answer:0},{id:"leadership-q7",question:"Jika pemimpin melakukan kesalahan, apa langkah PALING BIJAK?",options:["Akui kesalahan, minta maaf, dan perbaiki bersama tim","Sembunyikan kesalahan dari tim","Salahkan anggota lain","Abaikan saja karena tidak penting"],answer:0},{id:"leadership-q8",question:"Apa risiko utama jika pemimpin tidak adil dalam membagi tugas?",options:["Menurunnya kepercayaan dan motivasi anggota","Tugas jadi lebih cepat selesai","Tim jadi lebih kompak","Anggota jadi lebih mandiri"],answer:0},{id:"leadership-q9",question:"Dari pilihan berikut, mana yang PALING BENAR tentang etika kepemimpinan?",options:["Kejujuran, keadilan, dan penghargaan pada anggota","Selalu keras dan tegas","Tidak perlu mendengar masukan","Hanya fokus pada hasil akhir"],answer:0},{id:"leadership-q10",question:"Jika ingin mengembangkan potensi kepemimpinan, apa strategi PALING EFEKTIF?",options:["Belajar dari pengalaman, refleksi, dan mentoring","Hanya ikut pelatihan formal","Tunggu sampai jadi pemimpin dulu","Tidak perlu belajar lagi"],answer:0}]},{id:"logistik",title:"Manajemen Logistik Lapangan",badge:"Logistics Master",lessons:[{id:"logistik-1",title:"Pengantar Manajemen Logistik",content:"Manajemen logistik adalah proses perencanaan, pengadaan, distribusi, dan evaluasi perlengkapan serta perbekalan selama kegiatan di alam bebas. Dalam Mahapala Narotama, logistik menjadi fondasi utama kelancaran dan keselamatan setiap ekspedisi. Anggota diajarkan untuk membuat daftar perlengkapan, menghitung kebutuhan makanan dan air, serta mengantisipasi kebutuhan darurat. Logistik juga melatih kemampuan analisis, kerja sama, dan tanggung jawab dalam tim."},{id:"logistik-2",title:"Perencanaan, Pengadaan, dan Distribusi Logistik",content:"Perencanaan logistik meliputi identifikasi kebutuhan, estimasi jumlah, dan penjadwalan pengadaan. Pengadaan dilakukan dengan memperhatikan kualitas, kuantitas, dan efisiensi biaya. Distribusi logistik harus adil, merata, dan sesuai peran anggota. Dalam Mahapala Narotama, setiap anggota dilibatkan dalam proses distribusi agar semua memahami pentingnya logistik dan siap bertanggung jawab atas perlengkapan masing-masing."},{id:"logistik-3",title:"Pengelolaan, Penghematan, dan Solusi Logistik",content:"Pengelolaan logistik mencakup penyimpanan, pemeliharaan, dan penghematan sumber daya selama kegiatan. Anggota diajarkan untuk menghindari pemborosan, memanfaatkan perlengkapan secara optimal, dan mencari solusi jika terjadi kekurangan. Simulasi logistik dilakukan untuk melatih respons cepat dan improvisasi dalam situasi darurat, seperti kehilangan perlengkapan atau keterlambatan distribusi."},{id:"logistik-4",title:"Evaluasi, Nilai, dan Pengembangan Logistik",content:"Setelah kegiatan, dilakukan evaluasi logistik: cek kelengkapan, kerusakan, dan sisa perbekalan. Evaluasi bertujuan memperbaiki perencanaan ke depan dan meningkatkan efisiensi. Nilai utama logistik di Mahapala Narotama adalah tanggung jawab, kerja sama, dan inovasi. Pengalaman logistik membentuk anggota yang teliti, mandiri, dan siap menghadapi tantangan di alam bebas."}],quiz:[{id:"logistik-q1",question:"Jika tim kekurangan air minum di tengah perjalanan, apa langkah PALING BIJAK?",options:["Evaluasi kebutuhan, hemat air, dan cari sumber air terdekat bersama tim","Bagi air hanya untuk pemimpin saja","Tunda minum sampai malam","Abaikan kebutuhan anggota lain"],answer:0},{id:"logistik-q2",question:"Dari pilihan berikut, mana yang PALING BENAR tentang distribusi logistik?",options:["Distribusi adil, merata, dan sesuai peran anggota","Distribusi hanya untuk anggota senior","Distribusi tanpa perencanaan","Distribusi dilakukan setelah kegiatan selesai"],answer:0},{id:"logistik-q3",question:"Jika terjadi kehilangan perlengkapan di lapangan, apa langkah PALING TEPAT?",options:["Cari solusi bersama, improvisasi, dan evaluasi penyebab kehilangan","Salahkan anggota yang kehilangan","Abaikan saja karena tidak penting","Tunda kegiatan sampai perlengkapan ditemukan"],answer:0},{id:"logistik-q4",question:"Apa manfaat utama evaluasi logistik setelah kegiatan?",options:["Memperbaiki perencanaan dan meningkatkan efisiensi ke depan","Agar bisa mengulang kegiatan yang sama","Agar lebih banyak dokumentasi","Agar bisa mengajak lebih banyak orang"],answer:0},{id:"logistik-q5",question:"Jika terjadi kelebihan makanan di akhir kegiatan, apa langkah PALING BIJAK?",options:["Bagi sisa makanan secara adil dan bawa pulang sisa yang bisa disimpan","Buang semua sisa makanan di hutan","Bakar sisa makanan di lokasi","Tinggalkan makanan untuk hewan liar"],answer:0},{id:"logistik-q6",question:"Dari pilihan berikut, mana yang PALING BENAR tentang penghematan logistik?",options:["Gunakan perlengkapan dan perbekalan secara optimal tanpa pemborosan","Gunakan sebanyak-banyaknya agar tidak sisa","Hanya pemimpin yang boleh menghemat","Penghematan tidak penting dalam logistik"],answer:0},{id:"logistik-q7",question:"Jika terjadi keterlambatan distribusi logistik, apa langkah PALING EFEKTIF?",options:["Koordinasi ulang, cek kebutuhan prioritas, dan distribusi bertahap","Tunda kegiatan tanpa alasan","Bagi logistik secara acak","Abaikan kebutuhan anggota"],answer:0},{id:"logistik-q8",question:"Apa risiko utama jika logistik tidak dievaluasi setelah kegiatan?",options:["Kesalahan berulang dan pemborosan sumber daya","Logistik jadi lebih banyak","Anggota jadi lebih kompak","Perlengkapan jadi lebih awet"],answer:0},{id:"logistik-q9",question:"Dari pilihan berikut, mana yang PALING BENAR tentang nilai logistik di Mahapala Narotama?",options:["Tanggung jawab, kerja sama, dan inovasi dalam pengelolaan sumber daya","Hanya soal membawa barang banyak","Hanya soal membagi makanan","Hanya soal alat mahal"],answer:0},{id:"logistik-q10",question:"Jika ingin meningkatkan kemampuan logistik, apa strategi PALING EFEKTIF?",options:["Latihan simulasi, evaluasi, dan belajar dari pengalaman","Hanya ikut pelatihan formal","Tunggu sampai jadi koordinator logistik","Tidak perlu belajar lagi"],answer:0}]},{id:"komunikasi",title:"Komunikasi Lapangan",badge:"Communicator",lessons:[{id:"komunikasi-1",title:"Pengantar Komunikasi Lapangan",content:"Komunikasi lapangan adalah proses pertukaran informasi, instruksi, dan koordinasi antar anggota tim selama kegiatan di alam bebas. Dalam Mahapala Narotama, komunikasi menjadi kunci utama kelancaran, keselamatan, dan efektivitas setiap kegiatan. Anggota diajarkan untuk berkomunikasi secara jelas, singkat, dan sopan, baik secara lisan, tulisan, maupun menggunakan alat bantu komunikasi."},{id:"komunikasi-2",title:"Alat, Kode, dan Sandi Komunikasi",content:"Alat komunikasi lapangan meliputi HT (Handy Talky), peluit, sinyal darurat, dan kode sandi. Setiap alat memiliki fungsi dan cara penggunaan yang berbeda. Kode dan sandi digunakan untuk komunikasi rahasia, efisien, dan menghindari miskomunikasi di situasi darurat. Anggota Mahapala Narotama dilatih untuk memahami dan menggunakan semua alat serta kode komunikasi dengan benar."},{id:"komunikasi-3",title:"Simulasi, Evaluasi, dan Nilai Komunikasi",content:"Simulasi komunikasi dilakukan dalam setiap pelatihan, mulai dari briefing, koordinasi di lapangan, hingga penanganan situasi darurat. Setelah simulasi, dilakukan evaluasi: cek kejelasan pesan, kecepatan respon, dan efektivitas koordinasi. Nilai utama komunikasi di Mahapala Narotama adalah keterbukaan, kejelasan, dan saling menghargai. Pengalaman komunikasi membentuk anggota yang percaya diri, responsif, dan siap menghadapi tantangan di alam bebas."},{id:"komunikasi-4",title:"Tantangan, Etika, dan Pengembangan Komunikasi",content:"Tantangan utama komunikasi lapangan adalah gangguan sinyal, perbedaan persepsi, dan tekanan situasi. Etika komunikasi meliputi kejujuran, kesabaran, dan penghargaan terhadap pendapat orang lain. Mahapala Narotama mendorong setiap anggota untuk terus mengembangkan kemampuan komunikasi melalui latihan, refleksi, dan belajar dari pengalaman."}],quiz:[{id:"komunikasi-q1",question:"Jika HT tidak berfungsi di tengah hutan, apa langkah PALING TEPAT?",options:["Gunakan peluit, sinyal darurat, atau cari posisi lebih tinggi untuk sinyal","Tunggu saja tanpa usaha","Tinggalkan tim dan cari sendiri","Matikan HT dan lanjutkan perjalanan"],answer:0},{id:"komunikasi-q2",question:"Dari pilihan berikut, mana yang PALING BENAR tentang penggunaan kode sandi?",options:["Digunakan untuk komunikasi rahasia dan efisien di situasi darurat","Hanya untuk gaya-gayaan","Tidak perlu dipelajari","Digunakan hanya saat briefing"],answer:0},{id:"komunikasi-q3",question:"Jika terjadi miskomunikasi saat koordinasi tim, apa langkah PALING EFEKTIF?",options:["Klarifikasi pesan, diskusi terbuka, dan pastikan semua paham","Abaikan saja karena tidak penting","Tunda klarifikasi sampai pulang","Salahkan anggota lain"],answer:0},{id:"komunikasi-q4",question:"Apa manfaat utama simulasi komunikasi secara rutin?",options:["Meningkatkan kejelasan pesan, kecepatan respon, dan efektivitas koordinasi","Agar lebih sering berkumpul saja","Agar bisa menggunakan alat baru","Agar tidak perlu latihan lain"],answer:0},{id:"komunikasi-q5",question:"Jika anggota tim tidak memahami instruksi, apa langkah PALING BIJAK?",options:["Ulangi instruksi dengan jelas dan pastikan dipahami semua anggota","Biarkan saja sampai paham sendiri","Tegur keras di depan tim","Tunda instruksi sampai kegiatan selesai"],answer:0},{id:"komunikasi-q6",question:"Dari pilihan berikut, mana yang PALING BENAR tentang etika komunikasi?",options:["Kejujuran, kesabaran, dan penghargaan pada pendapat orang lain","Selalu keras dan tegas","Tidak perlu mendengar masukan","Hanya fokus pada hasil akhir"],answer:0},{id:"komunikasi-q7",question:"Jika terjadi gangguan sinyal saat koordinasi, apa langkah PALING EFEKTIF?",options:["Cari posisi lebih tinggi, gunakan alat alternatif, dan tetap koordinasi","Tunda koordinasi sampai sinyal kembali","Abaikan saja karena tidak penting","Pisah tim agar lebih cepat"],answer:0},{id:"komunikasi-q8",question:"Apa risiko utama jika komunikasi tidak dievaluasi setelah kegiatan?",options:["Kesalahan berulang dan kurangnya peningkatan kemampuan","Komunikasi jadi lebih lancar","Anggota jadi lebih kompak","Alat jadi lebih awet"],answer:0},{id:"komunikasi-q9",question:"Dari pilihan berikut, mana yang PALING BENAR tentang nilai komunikasi di Mahapala Narotama?",options:["Keterbukaan, kejelasan, dan saling menghargai dalam tim","Hanya soal alat canggih","Hanya soal kecepatan bicara","Hanya soal jumlah anggota"],answer:0},{id:"komunikasi-q10",question:"Jika ingin meningkatkan kemampuan komunikasi, apa strategi PALING EFEKTIF?",options:["Latihan simulasi, refleksi, dan belajar dari pengalaman","Hanya ikut pelatihan formal","Tunggu sampai jadi koordinator","Tidak perlu belajar lagi"],answer:0}]},{id:"air",title:"Manajemen Air di Alam",badge:"Water Master",lessons:[{id:"air-1",title:"Pengantar Manajemen Air",content:"Air adalah kebutuhan utama di alam bebas. Mahapala Narotama melatih anggota untuk mengelola air dengan bijak."},{id:"air-2",title:"Sumber Air Alam",content:"Sumber air di alam bisa berupa sungai, mata air, dan embun."},{id:"air-3",title:"Teknik Penyaringan Air",content:"Penyaringan air penting untuk memastikan air layak konsumsi."},{id:"air-4",title:"Hemat Air di Lapangan",content:"Hemat air adalah prinsip utama dalam setiap kegiatan Mahapala Narotama."}],quiz:[{id:"air-q1",question:"Apa tujuan utama manajemen air?",options:["Memenuhi kebutuhan di alam","Membuat bivak","Mendaki gunung","Membuat api"],answer:0},{id:"air-q2",question:"Apa saja sumber air di alam?",options:["Sungai, mata air, embun","Hanya sungai","Hanya mata air","Hanya embun"],answer:0},{id:"air-q3",question:"Apa manfaat penyaringan air?",options:["Memastikan air layak konsumsi","Membuat bivak","Mendaki gunung","Membuat api"],answer:0},{id:"air-q4",question:"Apa manfaat hemat air?",options:["Menghindari kehabisan air","Membuat bivak","Mendaki gunung","Membuat api"],answer:0},{id:"air-q5",question:"Apa yang harus dihindari dalam manajemen air?",options:["Membuang air sembarangan","Menghemat air","Menyaring air","Menggunakan air"],answer:0},{id:"air-q6",question:"Apa yang harus dilakukan jika air habis?",options:["Cari sumber air baru","Panik","Tunggu saja","Membuang perlengkapan"],answer:0},{id:"air-q7",question:"Apa manfaat hemat air bagi tim?",options:["Menjamin kebutuhan terpenuhi","Membuat api","Membuat bivak","Mendaki gunung"],answer:0},{id:"air-q8",question:"Apa yang harus dilakukan sebelum kegiatan?",options:["Perencanaan kebutuhan air","Langsung berangkat","Membawa makanan saja","Tidak membawa air"],answer:0},{id:"air-q9",question:"Apa manfaat manajemen air bagi Mahapala Narotama?",options:["Menjamin kelancaran dan keselamatan kegiatan","Membuat api","Membuat bivak","Mendaki gunung"],answer:0},{id:"air-q10",question:"Apa yang harus dilakukan jika menemukan air keruh?",options:["Saring dan rebus air","Minum langsung","Buang saja","Buat api"],answer:0}]},{id:"api",title:"Teknik Membuat Api",badge:"Fire Maker",lessons:[{id:"api-1",title:"Pengantar Membuat Api",content:"Api sangat penting untuk bertahan hidup di alam. Mahapala Narotama melatih teknik membuat api yang aman dan efisien."},{id:"api-2",title:"Bahan Bakar Alami",content:"Bahan bakar alami seperti kayu kering, daun, dan ranting digunakan untuk membuat api."},{id:"api-3",title:"Teknik Penyulutan Api",content:"Teknik penyulutan api meliputi penggunaan korek, batu, dan gesekan kayu."},{id:"api-4",title:"Keamanan Membuat Api",content:"Keamanan adalah prioritas utama saat membuat api di alam bebas."}],quiz:[{id:"api-q1",question:"Apa tujuan utama membuat api?",options:["Memasak dan menghangatkan diri","Membuat bivak","Mendaki gunung","Membuat logistik"],answer:0},{id:"api-q2",question:"Apa saja bahan bakar alami?",options:["Kayu kering, daun, ranting","Batu","Air","Pasir"],answer:0},{id:"api-q3",question:"Apa teknik penyulutan api?",options:["Korek, batu, gesekan kayu","Melempar batu","Menggali tanah","Membakar daun"],answer:0},{id:"api-q4",question:"Apa manfaat api di alam?",options:["Memasak, menghangatkan, penerangan","Membuat bivak","Mendaki gunung","Membuat logistik"],answer:0},{id:"api-q5",question:"Apa yang harus dihindari saat membuat api?",options:["Membakar hutan","Menggunakan kayu kering","Menggunakan korek","Menggunakan batu"],answer:0},{id:"api-q6",question:"Apa manfaat keamanan saat membuat api?",options:["Mencegah kebakaran","Membuat bivak","Mendaki gunung","Membuat logistik"],answer:0},{id:"api-q7",question:"Apa yang harus dilakukan setelah membuat api?",options:["Pastikan api padam total","Tinggalkan saja","Bakar semua","Buat bivak"],answer:0},{id:"api-q8",question:"Apa manfaat api bagi tim?",options:["Menghangatkan dan memasak","Membuat bivak","Mendaki gunung","Membuat logistik"],answer:0},{id:"api-q9",question:"Apa yang harus dilakukan jika api membesar?",options:["Padamkan segera","Biarkan saja","Tambahkan kayu","Buat bivak"],answer:0},{id:"api-q10",question:"Apa manfaat membuat api bagi Mahapala Narotama?",options:["Meningkatkan kemampuan survival","Membuat bivak","Mendaki gunung","Membuat logistik"],answer:0}]},{id:"flora",title:"Pengenalan Flora Alam",badge:"Flora Explorer",lessons:[{id:"flora-1",title:"Pengantar Flora",content:"Flora adalah tumbuhan yang hidup di alam. Mahapala Narotama mengenalkan berbagai jenis flora lokal kepada anggota."},{id:"flora-2",title:"Jenis-jenis Flora",content:"Jenis flora meliputi pohon, semak, dan tumbuhan bawah."},{id:"flora-3",title:"Manfaat Flora",content:"Flora bermanfaat sebagai sumber makanan, obat, dan perlindungan di alam."},{id:"flora-4",title:"Konservasi Flora",content:"Konservasi flora penting untuk menjaga keseimbangan ekosistem."}],quiz:[{id:"flora-q1",question:"Apa tujuan utama mengenal flora?",options:["Mengetahui manfaat dan jenis tumbuhan","Membuat bivak","Mendaki gunung","Membuat api"],answer:0},{id:"flora-q2",question:"Apa saja jenis flora?",options:["Pohon, semak, tumbuhan bawah","Hanya pohon","Hanya semak","Hanya tumbuhan bawah"],answer:0},{id:"flora-q3",question:"Apa manfaat flora?",options:["Sumber makanan, obat, perlindungan","Membuat bivak","Mendaki gunung","Membuat api"],answer:0},{id:"flora-q4",question:"Apa manfaat konservasi flora?",options:["Menjaga keseimbangan ekosistem","Membuat bivak","Mendaki gunung","Membuat api"],answer:0},{id:"flora-q5",question:"Apa yang harus dihindari saat mengenal flora?",options:["Merusak tumbuhan","Mengamati flora","Mencatat jenis","Mengambil foto"],answer:0},{id:"flora-q6",question:"Apa manfaat flora bagi tim?",options:["Sumber makanan dan obat","Membuat api","Membuat bivak","Mendaki gunung"],answer:0},{id:"flora-q7",question:"Apa yang harus dilakukan jika menemukan flora langka?",options:["Lindungi dan catat","Ambil semua","Bakar","Buat bivak"],answer:0},{id:"flora-q8",question:"Apa manfaat flora bagi Mahapala Narotama?",options:["Menambah pengetahuan dan kepedulian","Membuat api","Membuat bivak","Mendaki gunung"],answer:0},{id:"flora-q9",question:"Apa yang harus dilakukan setelah mengenal flora?",options:["Evaluasi dan edukasi","Langsung pulang","Bakar tumbuhan","Buat api"],answer:0},{id:"flora-q10",question:"Apa manfaat konservasi flora bagi generasi mendatang?",options:["Menjaga warisan alam","Membuat api","Membuat bivak","Mendaki gunung"],answer:0}]},{id:"fauna",title:"Pengenalan Fauna Alam",badge:"Fauna Explorer",lessons:[{id:"fauna-1",title:"Pengantar Fauna",content:"Fauna adalah hewan yang hidup di alam. Mahapala Narotama mengenalkan berbagai jenis fauna lokal kepada anggota."},{id:"fauna-2",title:"Jenis-jenis Fauna",content:"Jenis fauna meliputi mamalia, burung, reptil, dan serangga."},{id:"fauna-3",title:"Manfaat Fauna",content:"Fauna bermanfaat sebagai indikator ekosistem dan sumber pengetahuan."},{id:"fauna-4",title:"Konservasi Fauna",content:"Konservasi fauna penting untuk menjaga keseimbangan ekosistem."}],quiz:[{id:"fauna-q1",question:"Apa tujuan utama mengenal fauna?",options:["Mengetahui manfaat dan jenis hewan","Membuat bivak","Mendaki gunung","Membuat api"],answer:0},{id:"fauna-q2",question:"Apa saja jenis fauna?",options:["Mamalia, burung, reptil, serangga","Hanya mamalia","Hanya burung","Hanya reptil"],answer:0},{id:"fauna-q3",question:"Apa manfaat fauna?",options:["Indikator ekosistem, sumber pengetahuan","Membuat bivak","Mendaki gunung","Membuat api"],answer:0},{id:"fauna-q4",question:"Apa manfaat konservasi fauna?",options:["Menjaga keseimbangan ekosistem","Membuat bivak","Mendaki gunung","Membuat api"],answer:0},{id:"fauna-q5",question:"Apa yang harus dihindari saat mengenal fauna?",options:["Mengganggu atau merusak habitat","Mengamati fauna","Mencatat jenis","Mengambil foto"],answer:0},{id:"fauna-q6",question:"Apa manfaat fauna bagi tim?",options:["Sumber pengetahuan dan indikator ekosistem","Membuat api","Membuat bivak","Mendaki gunung"],answer:0},{id:"fauna-q7",question:"Apa yang harus dilakukan jika menemukan fauna langka?",options:["Lindungi dan catat","Ambil semua","Bakar","Buat bivak"],answer:0},{id:"fauna-q8",question:"Apa manfaat fauna bagi Mahapala Narotama?",options:["Menambah pengetahuan dan kepedulian","Membuat api","Membuat bivak","Mendaki gunung"],answer:0},{id:"fauna-q9",question:"Apa yang harus dilakukan setelah mengenal fauna?",options:["Evaluasi dan edukasi","Langsung pulang","Bakar hewan","Buat api"],answer:0},{id:"fauna-q10",question:"Apa manfaat konservasi fauna bagi generasi mendatang?",options:["Menjaga warisan alam","Membuat api","Membuat bivak","Mendaki gunung"],answer:0}]},{id:"sejarah",title:"Sejarah Mahapala Narotama",badge:"Historian",lessons:[{id:"sejarah-1",title:"Awal Berdiri",content:"Mahapala Narotama berdiri pada tahun 2017 sebagai UKM pecinta alam di Universitas Narotama."},{id:"sejarah-2",title:"Perkembangan Organisasi",content:"Organisasi berkembang pesat dengan berbagai kegiatan dan prestasi."},{id:"sejarah-3",title:"Kegiatan Legendaris",content:"Banyak kegiatan legendaris yang menjadi tradisi Mahapala Narotama."},{id:"sejarah-4",title:"Nilai dan Filosofi",content:"Nilai solidaritas, kepedulian, dan cinta alam menjadi filosofi utama Mahapala Narotama."}],quiz:[{id:"sejarah-q1",question:"Kapan Mahapala Narotama berdiri?",options:["2017","2010","2015","2019"],answer:0},{id:"sejarah-q2",question:"Apa tujuan utama Mahapala Narotama?",options:["Pecinta alam dan pelestarian lingkungan","Membuat bivak","Mendaki gunung","Membuat api"],answer:0},{id:"sejarah-q3",question:"Apa saja kegiatan legendaris Mahapala?",options:["Diklat, ekspedisi, konservasi","Hanya diklat","Hanya ekspedisi","Hanya konservasi"],answer:0},{id:"sejarah-q4",question:"Apa nilai utama Mahapala Narotama?",options:["Solidaritas, kepedulian, cinta alam","Persaingan","Individualisme","Konsumtif"],answer:0},{id:"sejarah-q5",question:"Apa manfaat sejarah bagi anggota?",options:["Menambah wawasan dan kebanggaan","Membuat api","Membuat bivak","Mendaki gunung"],answer:0},{id:"sejarah-q6",question:"Apa filosofi utama Mahapala Narotama?",options:["Cinta alam dan solidaritas","Membuat api","Membuat bivak","Mendaki gunung"],answer:0},{id:"sejarah-q7",question:"Apa yang harus dilakukan untuk menjaga tradisi?",options:["Melestarikan kegiatan dan nilai","Membiarkan saja","Membuat api","Mendaki gunung"],answer:0},{id:"sejarah-q8",question:"Apa manfaat kegiatan Mahapala Narotama?",options:["Meningkatkan kepedulian dan solidaritas","Membuat api","Membuat bivak","Mendaki gunung"],answer:0},{id:"sejarah-q9",question:"Apa yang harus dilakukan setelah mengikuti kegiatan?",options:["Evaluasi dan refleksi","Langsung pulang","Bakar peralatan","Buat api"],answer:0},{id:"sejarah-q10",question:"Apa manfaat sejarah bagi Mahapala Narotama?",options:["Menjadi inspirasi dan motivasi","Membuat api","Membuat bivak","Mendaki gunung"],answer:0}]},{id:"peralatan",title:"Manajemen Peralatan Lapangan",badge:"Gear Keeper",lessons:[{id:"peralatan-1",title:"Pengantar Peralatan",content:"Peralatan lapangan adalah perlengkapan utama dalam setiap kegiatan Mahapala Narotama."},{id:"peralatan-2",title:"Jenis-jenis Peralatan",content:"Peralatan meliputi tenda, sleeping bag, matras, kompor, dan alat masak."},{id:"peralatan-3",title:"Perawatan Peralatan",content:"Peralatan harus dirawat dan dicek sebelum dan sesudah kegiatan."},{id:"peralatan-4",title:"Evaluasi Peralatan",content:"Evaluasi peralatan dilakukan untuk memastikan kelayakan dan keamanan."}],quiz:[{id:"peralatan-q1",question:"Apa tujuan utama manajemen peralatan?",options:["Menjamin kelancaran dan keselamatan kegiatan","Membuat bivak","Mendaki gunung","Membuat api"],answer:0},{id:"peralatan-q2",question:"Apa saja jenis peralatan lapangan?",options:["Tenda, sleeping bag, matras, kompor","Hanya tenda","Hanya sleeping bag","Hanya matras"],answer:0},{id:"peralatan-q3",question:"Apa manfaat perawatan peralatan?",options:["Menjamin kelayakan dan keamanan","Membuat bivak","Mendaki gunung","Membuat api"],answer:0},{id:"peralatan-q4",question:"Apa manfaat evaluasi peralatan?",options:["Perbaikan ke depan","Membuat bivak","Mendaki gunung","Membuat api"],answer:0},{id:"peralatan-q5",question:"Apa yang harus dihindari dalam manajemen peralatan?",options:["Kerusakan dan kehilangan","Membawa peralatan","Merawat peralatan","Mengecek peralatan"],answer:0},{id:"peralatan-q6",question:"Apa yang harus dilakukan sebelum kegiatan?",options:["Cek dan siapkan peralatan","Langsung berangkat","Membawa makanan saja","Tidak membawa alat"],answer:0},{id:"peralatan-q7",question:"Apa manfaat peralatan bagi tim?",options:["Menjamin kebutuhan terpenuhi","Membuat api","Membuat bivak","Mendaki gunung"],answer:0},{id:"peralatan-q8",question:"Apa yang harus dilakukan jika peralatan rusak?",options:["Perbaiki atau ganti","Panik","Tunggu saja","Membuang alat"],answer:0},{id:"peralatan-q9",question:"Apa manfaat evaluasi peralatan?",options:["Perbaikan ke depan","Membuat api","Membuat bivak","Mendaki gunung"],answer:0},{id:"peralatan-q10",question:"Apa manfaat manajemen peralatan bagi Mahapala Narotama?",options:["Menjamin kelancaran dan keselamatan kegiatan","Membuat api","Membuat bivak","Mendaki gunung"],answer:0}]},{id:"ekspedisi",title:"Manajemen Ekspedisi",badge:"Expeditioner",lessons:[{id:"ekspedisi-1",title:"Pengantar Ekspedisi",content:"Ekspedisi adalah perjalanan panjang yang membutuhkan perencanaan matang. Mahapala Narotama rutin mengadakan ekspedisi ilmiah dan petualangan."},{id:"ekspedisi-2",title:"Perencanaan Ekspedisi",content:"Perencanaan ekspedisi meliputi rute, logistik, dan tim."},{id:"ekspedisi-3",title:"Pelaksanaan Ekspedisi",content:"Pelaksanaan ekspedisi membutuhkan kerja sama dan disiplin tinggi."},{id:"ekspedisi-4",title:"Evaluasi Ekspedisi",content:"Evaluasi ekspedisi dilakukan untuk perbaikan dan dokumentasi pengalaman."}],quiz:[{id:"ekspedisi-q1",question:"Apa tujuan utama ekspedisi?",options:["Menambah pengalaman dan pengetahuan","Membuat bivak","Mendaki gunung","Membuat api"],answer:0},{id:"ekspedisi-q2",question:"Apa saja yang harus direncanakan dalam ekspedisi?",options:["Rute, logistik, tim","Hanya rute","Hanya logistik","Hanya tim"],answer:0},{id:"ekspedisi-q3",question:"Apa manfaat pelaksanaan ekspedisi?",options:["Kerja sama dan disiplin","Membuat bivak","Mendaki gunung","Membuat api"],answer:0},{id:"ekspedisi-q4",question:"Apa manfaat evaluasi ekspedisi?",options:["Perbaikan dan dokumentasi","Membuat bivak","Mendaki gunung","Membuat api"],answer:0},{id:"ekspedisi-q5",question:"Apa yang harus dihindari dalam ekspedisi?",options:["Kurang persiapan dan kerja sama","Membawa perlengkapan","Merawat peralatan","Mengecek peralatan"],answer:0},{id:"ekspedisi-q6",question:"Apa yang harus dilakukan sebelum ekspedisi?",options:["Perencanaan matang","Langsung berangkat","Membawa makanan saja","Tidak membawa alat"],answer:0},{id:"ekspedisi-q7",question:"Apa manfaat ekspedisi bagi tim?",options:["Menambah pengalaman dan pengetahuan","Membuat api","Membuat bivak","Mendaki gunung"],answer:0},{id:"ekspedisi-q8",question:"Apa yang harus dilakukan jika terjadi masalah di ekspedisi?",options:["Cari solusi bersama","Panik","Tunggu saja","Membuang perlengkapan"],answer:0},{id:"ekspedisi-q9",question:"Apa manfaat evaluasi ekspedisi?",options:["Perbaikan ke depan","Membuat api","Membuat bivak","Mendaki gunung"],answer:0},{id:"ekspedisi-q10",question:"Apa manfaat ekspedisi bagi Mahapala Narotama?",options:["Menambah pengalaman dan pengetahuan","Membuat api","Membuat bivak","Mendaki gunung"],answer:0}]},{id:"survival",title:"Teknik Survival Dasar",badge:"Survivor",lessons:[{id:"survival-1",title:"Pengantar Survival Dasar",content:"Survival dasar adalah kemampuan bertahan hidup di alam bebas dengan memanfaatkan sumber daya yang ada dan menjaga kondisi fisik serta mental. Dalam Mahapala Narotama, survival bukan sekadar teori, tetapi latihan nyata menghadapi situasi darurat, keterbatasan logistik, dan tekanan lingkungan. Setiap anggota diajarkan untuk tetap tenang, berpikir jernih, dan mengambil keputusan cepat demi keselamatan diri dan tim."},{id:"survival-2",title:"Kebutuhan, Prioritas, dan Risiko Survival",content:"Kebutuhan dasar survival meliputi air, makanan, perlindungan, dan pertolongan. Prioritas utama adalah mencari air bersih, membangun perlindungan dari cuaca, dan mengelola energi. Risiko utama dalam survival adalah dehidrasi, hipotermia, dan cedera. Mahapala Narotama melatih anggota untuk mengenali tanda bahaya, mengelola risiko, dan membuat prioritas tindakan yang tepat."},{id:"survival-3",title:"Teknik, Improvisasi, dan Simulasi Survival",content:"Teknik survival meliputi mencari dan memurnikan air, membuat api dengan berbagai metode, membangun bivak dari bahan alami, serta mencari makanan darurat. Improvisasi sangat penting: gunakan alat seadanya, manfaatkan lingkungan, dan tetap kreatif dalam menghadapi keterbatasan. Simulasi survival dilakukan secara rutin untuk melatih respons cepat dan kesiapsiagaan anggota Mahapala Narotama."},{id:"survival-4",title:"Mental, Etika, dan Pengembangan Survival",content:"Mental survival adalah kemampuan mengendalikan emosi, menjaga semangat, dan tidak panik dalam situasi sulit. Etika survival meliputi menjaga kelestarian alam, tidak merusak lingkungan, dan saling membantu antar anggota. Mahapala Narotama mendorong pengembangan kemampuan survival melalui latihan, refleksi, dan berbagi pengalaman antar anggota."}],quiz:[{id:"survival-q1",question:"Jika kehabisan air di tengah hutan, apa langkah PALING BIJAK?",options:["Cari sumber air terdekat, gunakan teknik pemurnian, dan hemat konsumsi air","Tunda minum sampai malam","Bagi air hanya untuk pemimpin","Abaikan kebutuhan air anggota lain"],answer:0},{id:"survival-q2",question:"Dari pilihan berikut, mana yang PALING BENAR tentang prioritas survival?",options:["Air bersih, perlindungan, makanan, pertolongan","Makanan, air, perlindungan, pertolongan","Perlindungan, makanan, air, pertolongan","Pertolongan, makanan, air, perlindungan"],answer:0},{id:"survival-q3",question:"Jika terjadi hipotermia pada anggota, apa langkah PALING TEPAT?",options:["Hangatkan tubuh, ganti pakaian basah, dan beri minuman hangat jika sadar","Biarkan saja sampai hangat sendiri","Tunda penanganan sampai pagi","Bungkus dengan plastik saja"],answer:0},{id:"survival-q4",question:"Apa manfaat utama simulasi survival secara rutin?",options:["Meningkatkan kesiapsiagaan, respons cepat, dan kemampuan improvisasi","Agar lebih sering berkumpul saja","Agar bisa menggunakan alat baru","Agar tidak perlu latihan lain"],answer:0},{id:"survival-q5",question:"Jika tidak ada alat untuk membuat api, apa strategi PALING EFEKTIF?",options:["Gunakan teknik alami seperti gesek kayu atau batu, dan manfaatkan lingkungan sekitar","Tunda membuat api sampai pulang","Minta api ke tim lain","Bakar perlengkapan saja"],answer:0},{id:"survival-q6",question:"Dari pilihan berikut, mana yang PALING BENAR tentang etika survival?",options:["Jaga kelestarian alam, tidak merusak lingkungan, dan saling membantu","Ambil semua yang ada di alam","Buang sampah sembarangan","Fokus hanya pada diri sendiri"],answer:0},{id:"survival-q7",question:"Jika anggota panik dalam situasi survival, apa langkah PALING BIJAK?",options:["Tenangkan, beri motivasi, dan ajak berpikir jernih","Biarkan saja sampai tenang sendiri","Tegur keras di depan tim","Pisahkan dari tim"],answer:0},{id:"survival-q8",question:"Apa risiko utama jika survival tidak dilatih secara rutin?",options:["Kurang kesiapsiagaan dan respons lambat saat darurat","Survival jadi lebih mudah","Anggota jadi lebih kompak","Alat jadi lebih awet"],answer:0},{id:"survival-q9",question:"Dari pilihan berikut, mana yang PALING BENAR tentang nilai survival di Mahapala Narotama?",options:["Kesiapsiagaan, kreativitas, dan kerja sama dalam menghadapi tantangan","Hanya soal bertahan hidup sendiri","Hanya soal alat mahal","Hanya soal makanan enak"],answer:0},{id:"survival-q10",question:"Jika ingin meningkatkan kemampuan survival, apa strategi PALING EFEKTIF?",options:["Latihan simulasi, refleksi, dan berbagi pengalaman","Hanya ikut pelatihan formal","Tunggu sampai jadi senior","Tidak perlu belajar lagi"],answer:0}]},{id:"observasi",title:"Teknik Observasi Alam",badge:"Nature Observer",lessons:[{id:"observasi-1",title:"Pengantar Observasi Alam",content:"Observasi alam adalah keterampilan mengamati lingkungan sekitar secara sistematis dan teliti. Dalam Mahapala Narotama, observasi bukan sekadar melihat, tetapi juga memahami interaksi antara flora, fauna, dan fenomena alam. Setiap anggota dilatih untuk mencatat detail, mengenali pola, dan mengembangkan rasa ingin tahu yang tinggi terhadap alam."},{id:"observasi-2",title:"Teknik, Alat, dan Proses Observasi",content:"Teknik observasi meliputi pencatatan sistematis, pengamatan visual, penggunaan alat sederhana seperti lup, teropong, dan kamera. Proses observasi dimulai dari perencanaan, pelaksanaan, hingga dokumentasi hasil. Mahapala Narotama menekankan pentingnya objektivitas, ketelitian, dan etika dalam melakukan observasi di alam bebas."},{id:"observasi-3",title:"Manfaat, Simulasi, dan Evaluasi Observasi",content:"Observasi bermanfaat untuk penelitian, edukasi, dan konservasi. Simulasi observasi dilakukan secara rutin untuk melatih kepekaan, ketelitian, dan kemampuan analisis anggota. Setelah observasi, dilakukan evaluasi: cek kelengkapan data, keakuratan identifikasi, dan manfaat hasil observasi bagi tim dan lingkungan."},{id:"observasi-4",title:"Nilai, Etika, dan Pengembangan Observasi",content:"Nilai utama observasi di Mahapala Narotama adalah kepekaan, ketelitian, dan kepedulian terhadap alam. Etika observasi meliputi tidak mengganggu flora dan fauna, menjaga kelestarian lingkungan, dan berbagi pengetahuan. Pengembangan kemampuan observasi dilakukan melalui latihan, refleksi, dan diskusi antar anggota."}],quiz:[{id:"observasi-q1",question:"Jika menemukan spesies langka saat observasi, apa langkah PALING BIJAK?",options:["Catat detail, dokumentasikan tanpa mengganggu, dan laporkan ke tim","Ambil spesimen untuk koleksi pribadi","Abaikan saja karena tidak penting","Buat suara keras di sekitar lokasi"],answer:0},{id:"observasi-q2",question:"Dari pilihan berikut, mana yang PALING BENAR tentang teknik observasi?",options:["Pencatatan sistematis, pengamatan visual, dan penggunaan alat sederhana","Hanya pencatatan saja","Hanya pengamatan visual saja","Hanya alat canggih saja"],answer:0},{id:"observasi-q3",question:"Jika terjadi perbedaan hasil identifikasi antar anggota, apa langkah PALING EFEKTIF?",options:["Diskusi terbuka, cek referensi, dan verifikasi bersama","Abaikan saja karena tidak penting","Tunda klarifikasi sampai pulang","Pilih hasil identifikasi senior saja"],answer:0},{id:"observasi-q4",question:"Apa manfaat utama simulasi observasi secara rutin?",options:["Meningkatkan kepekaan, ketelitian, dan kemampuan analisis","Agar lebih sering berkumpul saja","Agar bisa menggunakan alat baru","Agar tidak perlu latihan lain"],answer:0},{id:"observasi-q5",question:"Jika anggota mengganggu flora/fauna saat observasi, apa risiko PALING BESAR?",options:["Kerusakan ekosistem dan hilangnya data akurat","Observasi jadi lebih mudah","Anggota jadi lebih kompak","Alat jadi lebih awet"],answer:0},{id:"observasi-q6",question:"Dari pilihan berikut, mana yang PALING BENAR tentang etika observasi?",options:["Tidak mengganggu flora/fauna dan menjaga kelestarian lingkungan","Ambil semua yang ada di alam","Buang sampah sembarangan","Fokus hanya pada hasil foto"],answer:0},{id:"observasi-q7",question:"Jika data observasi kurang lengkap, apa langkah PALING EFEKTIF?",options:["Lakukan observasi ulang atau lengkapi data dengan diskusi tim","Abaikan saja karena tidak penting","Tunda sampai ada waktu luang","Pilih data yang ada saja"],answer:0},{id:"observasi-q8",question:"Apa risiko utama jika observasi tidak dievaluasi setelah kegiatan?",options:["Kurang akuratnya data dan hilangnya peluang pembelajaran","Observasi jadi lebih mudah","Anggota jadi lebih kompak","Alat jadi lebih awet"],answer:0},{id:"observasi-q9",question:"Dari pilihan berikut, mana yang PALING BENAR tentang nilai observasi di Mahapala Narotama?",options:["Kepekaan, ketelitian, dan kepedulian terhadap alam","Hanya soal alat mahal","Hanya soal foto bagus","Hanya soal jumlah data"],answer:0},{id:"observasi-q10",question:"Jika ingin meningkatkan kemampuan observasi, apa strategi PALING EFEKTIF?",options:["Latihan simulasi, refleksi, dan diskusi antar anggota","Hanya ikut pelatihan formal","Tunggu sampai jadi senior","Tidak perlu belajar lagi"],answer:0}]},{id:"kerjasama",title:"Kerja Sama Tim",badge:"Team Player",lessons:[{id:"kerjasama-1",title:"Pengantar Kerja Sama Tim",content:"Kerja sama tim adalah fondasi utama keberhasilan setiap kegiatan di Mahapala Narotama. Kerja sama bukan hanya soal membagi tugas, tetapi juga membangun kepercayaan, komunikasi, dan saling mendukung dalam menghadapi tantangan. Setiap anggota diajarkan untuk menghargai peran, mendengarkan pendapat, dan berkontribusi aktif demi tujuan bersama."},{id:"kerjasama-2",title:"Manfaat, Teknik, dan Simulasi Kerja Sama",content:"Manfaat kerja sama meliputi percepatan pekerjaan, penguatan solidaritas, dan peningkatan efektivitas tim. Teknik kerja sama meliputi pembagian tugas, koordinasi, dan komunikasi terbuka. Simulasi kerja sama dilakukan secara rutin untuk melatih respons cepat, adaptasi, dan penyelesaian masalah bersama."},{id:"kerjasama-3",title:"Nilai, Etika, dan Evaluasi Kerja Sama",content:"Nilai utama kerja sama di Mahapala Narotama adalah solidaritas, komunikasi, dan tanggung jawab. Etika kerja sama meliputi kejujuran, saling menghargai, dan mengutamakan kepentingan tim. Setelah kegiatan, dilakukan evaluasi: cek efektivitas kerja sama, penyelesaian konflik, dan peluang pengembangan tim."},{id:"kerjasama-4",title:"Tantangan, Konflik, dan Pengembangan Kerja Sama",content:"Tantangan utama kerja sama adalah perbedaan pendapat, egoisme, dan miskomunikasi. Mahapala Narotama melatih anggota untuk menyelesaikan konflik secara bijak, menjaga komunikasi, dan terus mengembangkan kemampuan kerja sama melalui latihan, refleksi, dan mentoring."}],quiz:[{id:"kerjasama-q1",question:"Jika terjadi konflik pendapat dalam tim, apa langkah PALING BIJAK?",options:["Diskusi terbuka, dengarkan semua pihak, dan cari solusi bersama","Abaikan konflik agar cepat selesai","Pilih satu pihak saja tanpa dengar yang lain","Tunda penyelesaian sampai pulang"],answer:0},{id:"kerjasama-q2",question:"Dari pilihan berikut, mana yang PALING BENAR tentang teknik kerja sama?",options:["Pembagian tugas, koordinasi, dan komunikasi terbuka","Hanya pembagian tugas saja","Hanya koordinasi saja","Hanya komunikasi saja"],answer:0},{id:"kerjasama-q3",question:"Jika anggota tidak aktif berkontribusi, apa langkah PALING EFEKTIF?",options:["Ajak diskusi, motivasi, dan beri peran sesuai kemampuan","Biarkan saja sampai aktif sendiri","Tegur keras di depan tim","Tunda peran sampai kegiatan selesai"],answer:0},{id:"kerjasama-q4",question:"Apa manfaat utama simulasi kerja sama secara rutin?",options:["Meningkatkan respons cepat, adaptasi, dan efektivitas tim","Agar lebih sering berkumpul saja","Agar bisa menggunakan alat baru","Agar tidak perlu latihan lain"],answer:0},{id:"kerjasama-q5",question:"Jika terjadi miskomunikasi dalam tim, apa risiko PALING BESAR?",options:["Terganggunya kerja sama dan pencapaian tujuan","Kerja sama jadi lebih mudah","Anggota jadi lebih kompak","Alat jadi lebih awet"],answer:0},{id:"kerjasama-q6",question:"Dari pilihan berikut, mana yang PALING BENAR tentang etika kerja sama?",options:["Kejujuran, saling menghargai, dan utamakan kepentingan tim","Ambil semua peran sendiri","Buang sampah sembarangan","Fokus hanya pada hasil akhir"],answer:0},{id:"kerjasama-q7",question:"Jika kerja sama tidak dievaluasi setelah kegiatan, apa risiko PALING BESAR?",options:["Kesalahan berulang dan kurangnya pengembangan tim","Kerja sama jadi lebih lancar","Anggota jadi lebih kompak","Alat jadi lebih awet"],answer:0},{id:"kerjasama-q8",question:"Apa risiko utama jika anggota egois dalam tim?",options:["Terganggunya solidaritas dan efektivitas kerja sama","Kerja sama jadi lebih mudah","Anggota jadi lebih kompak","Alat jadi lebih awet"],answer:0},{id:"kerjasama-q9",question:"Dari pilihan berikut, mana yang PALING BENAR tentang nilai kerja sama di Mahapala Narotama?",options:["Solidaritas, komunikasi, dan tanggung jawab dalam tim","Hanya soal alat mahal","Hanya soal pembagian tugas","Hanya soal jumlah anggota"],answer:0},{id:"kerjasama-q10",question:"Jika ingin meningkatkan kemampuan kerja sama, apa strategi PALING EFEKTIF?",options:["Latihan simulasi, refleksi, dan mentoring","Hanya ikut pelatihan formal","Tunggu sampai jadi senior","Tidak perlu belajar lagi"],answer:0}]},{id:"kebersihan",title:"Kebersihan Lingkungan Alam",badge:"Clean Keeper",lessons:[{id:"kebersihan-1",title:"Pengantar Kebersihan Lingkungan",content:"Kebersihan lingkungan adalah tanggung jawab utama setiap anggota Mahapala Narotama. Menjaga kebersihan bukan hanya soal membuang sampah pada tempatnya, tetapi juga menjaga kelestarian alam, kesehatan tim, dan citra organisasi. Setiap anggota diajarkan untuk peduli, teliti, dan konsisten dalam menjaga kebersihan di setiap kegiatan."},{id:"kebersihan-2",title:"Aksi, Teknik, dan Simulasi Kebersihan",content:"Aksi kebersihan dilakukan sebelum, selama, dan setelah kegiatan. Teknik kebersihan meliputi pengelolaan sampah, pemilahan, dan penggunaan alat kebersihan yang tepat. Simulasi kebersihan dilakukan secara rutin untuk melatih kedisiplinan, tanggung jawab, dan kepedulian anggota terhadap lingkungan."},{id:"kebersihan-3",title:"Manfaat, Evaluasi, dan Nilai Kebersihan",content:"Manfaat kebersihan meliputi kesehatan, kenyamanan, dan kelestarian alam. Setelah aksi kebersihan, dilakukan evaluasi: cek kebersihan lokasi, efektivitas pengelolaan sampah, dan dampak aksi terhadap lingkungan. Nilai utama kebersihan di Mahapala Narotama adalah disiplin, tanggung jawab, dan cinta alam."},{id:"kebersihan-4",title:"Tantangan, Etika, dan Pengembangan Kebersihan",content:"Tantangan utama kebersihan adalah kurangnya kesadaran, fasilitas terbatas, dan kebiasaan buruk. Etika kebersihan meliputi tidak membuang sampah sembarangan, mengajak orang lain peduli, dan memberi contoh baik. Pengembangan kebersihan dilakukan melalui edukasi, refleksi, dan aksi nyata di setiap kegiatan."}],quiz:[{id:"kebersihan-q1",question:"Jika menemukan sampah di jalur pendakian, apa langkah PALING BIJAK?",options:["Ambil dan buang pada tempatnya, ajak tim peduli","Biarkan saja karena bukan sampah sendiri","Bakar sampah di lokasi","Tunda sampai turun gunung"],answer:0},{id:"kebersihan-q2",question:"Dari pilihan berikut, mana yang PALING BENAR tentang teknik kebersihan?",options:["Pengelolaan sampah, pemilahan, dan penggunaan alat yang tepat","Hanya buang sampah saja","Hanya pemilahan saja","Hanya alat canggih saja"],answer:0},{id:"kebersihan-q3",question:"Jika anggota tidak peduli kebersihan, apa langkah PALING EFEKTIF?",options:["Ajak diskusi, beri contoh, dan motivasi untuk peduli","Biarkan saja sampai sadar sendiri","Tegur keras di depan tim","Tunda edukasi sampai pulang"],answer:0},{id:"kebersihan-q4",question:"Apa manfaat utama evaluasi kebersihan setelah kegiatan?",options:["Mengetahui efektivitas aksi dan peluang perbaikan","Agar lebih sering berkumpul saja","Agar bisa menggunakan alat baru","Agar tidak perlu aksi lain"],answer:0},{id:"kebersihan-q5",question:"Jika terjadi kekurangan fasilitas kebersihan, apa strategi PALING EFEKTIF?",options:["Improvisasi alat, koordinasi tim, dan tetap jaga kebersihan","Tunda aksi kebersihan","Abaikan saja karena tidak penting","Pisah tim agar lebih cepat"],answer:0},{id:"kebersihan-q6",question:"Dari pilihan berikut, mana yang PALING BENAR tentang etika kebersihan?",options:["Tidak membuang sampah sembarangan dan memberi contoh baik","Ambil semua sampah untuk koleksi","Buang sampah di sungai","Fokus hanya pada sampah sendiri"],answer:0},{id:"kebersihan-q7",question:"Jika aksi kebersihan tidak dievaluasi setelah kegiatan, apa risiko PALING BESAR?",options:["Kurang efektifnya aksi dan berulangnya kesalahan","Aksi jadi lebih mudah","Anggota jadi lebih kompak","Alat jadi lebih awet"],answer:0},{id:"kebersihan-q8",question:"Apa risiko utama jika anggota tidak disiplin dalam kebersihan?",options:["Terganggunya kesehatan, kenyamanan, dan citra organisasi","Kebersihan jadi lebih mudah","Anggota jadi lebih kompak","Alat jadi lebih awet"],answer:0},{id:"kebersihan-q9",question:"Dari pilihan berikut, mana yang PALING BENAR tentang nilai kebersihan di Mahapala Narotama?",options:["Disiplin, tanggung jawab, dan cinta alam","Hanya soal alat mahal","Hanya soal buang sampah","Hanya soal jumlah anggota"],answer:0},{id:"kebersihan-q10",question:"Jika ingin meningkatkan kepedulian kebersihan, apa strategi PALING EFEKTIF?",options:["Edukasi, refleksi, dan aksi nyata di setiap kegiatan","Hanya ikut pelatihan formal","Tunggu sampai jadi senior","Tidak perlu belajar lagi"],answer:0}]},{id:"pendakian",title:"Teknik Pendakian Gunung",badge:"Mountain Climber",lessons:[{id:"pendakian-1",title:"Pengantar Teknik Pendakian Gunung",content:"Pendakian gunung adalah kegiatan utama Mahapala Narotama yang menuntut persiapan matang, teknik yang benar, dan mental yang kuat. Setiap anggota diajarkan untuk memahami medan, cuaca, dan risiko yang mungkin dihadapi. Pendakian bukan hanya soal mencapai puncak, tetapi juga menjaga keselamatan, kerja sama, dan menghargai alam."},{id:"pendakian-2",title:"Persiapan, Peralatan, dan Simulasi Pendakian",content:"Persiapan pendakian meliputi fisik, mental, perlengkapan, dan logistik. Peralatan utama: sepatu gunung, carrier, alat navigasi, dan perlengkapan keselamatan. Simulasi pendakian dilakukan secara rutin untuk melatih teknik, manajemen waktu, dan respons terhadap situasi darurat."},{id:"pendakian-3",title:"Teknik, Evaluasi, dan Nilai Pendakian",content:"Teknik mendaki meliputi langkah yang efisien, ritme yang stabil, dan pengelolaan tenaga. Setelah pendakian, dilakukan evaluasi: cek efektivitas teknik, penggunaan alat, dan kerja sama tim. Nilai utama pendakian di Mahapala Narotama adalah disiplin, tanggung jawab, dan keberanian menghadapi tantangan alam."},{id:"pendakian-4",title:"Tantangan, Etika, dan Pengembangan Pendakian",content:"Tantangan utama pendakian adalah cuaca buruk, cedera, dan tersesat. Etika pendakian meliputi menjaga kelestarian alam, tidak merusak jalur, dan saling membantu antar pendaki. Pengembangan kemampuan pendakian dilakukan melalui latihan, refleksi, dan berbagi pengalaman antar anggota."}],quiz:[{id:"pendakian-q1",question:"Jika cuaca tiba-tiba memburuk saat pendakian, apa langkah PALING BIJAK?",options:["Cari perlindungan, evaluasi rute, dan koordinasi dengan tim","Lanjutkan pendakian tanpa persiapan","Pisah dari tim untuk mencari jalan sendiri","Abaikan cuaca dan tetap berjalan"],answer:0},{id:"pendakian-q2",question:"Dari pilihan berikut, mana yang PALING BENAR tentang persiapan pendakian?",options:["Fisik, mental, perlengkapan, dan logistik","Hanya fisik saja","Hanya perlengkapan saja","Hanya logistik saja"],answer:0},{id:"pendakian-q3",question:"Jika anggota mengalami cedera ringan di tengah pendakian, apa langkah PALING TEPAT?",options:["Lakukan pertolongan pertama, evaluasi kondisi, dan putuskan lanjut atau turun bersama tim","Biarkan saja sampai sembuh sendiri","Tunda penanganan sampai puncak","Pisahkan anggota dari tim"],answer:0},{id:"pendakian-q4",question:"Apa manfaat utama evaluasi pendakian setelah kegiatan?",options:["Mengetahui efektivitas teknik dan peluang perbaikan","Agar lebih sering berkumpul saja","Agar bisa menggunakan alat baru","Agar tidak perlu latihan lain"],answer:0},{id:"pendakian-q5",question:"Jika terjadi kekurangan logistik di tengah perjalanan, apa strategi PALING EFEKTIF?",options:["Evaluasi kebutuhan, hemat logistik, dan cari solusi bersama tim","Tunda makan sampai malam","Bagi logistik hanya untuk pemimpin","Abaikan kebutuhan anggota lain"],answer:0},{id:"pendakian-q6",question:"Dari pilihan berikut, mana yang PALING BENAR tentang etika pendakian?",options:["Jaga kelestarian alam, tidak merusak jalur, dan saling membantu","Ambil semua yang ada di alam","Buang sampah sembarangan","Fokus hanya pada puncak"],answer:0},{id:"pendakian-q7",question:"Jika pendakian tidak dievaluasi setelah kegiatan, apa risiko PALING BESAR?",options:["Kurang efektifnya teknik dan berulangnya kesalahan","Pendakian jadi lebih mudah","Anggota jadi lebih kompak","Alat jadi lebih awet"],answer:0},{id:"pendakian-q8",question:"Apa risiko utama jika anggota tidak disiplin dalam pendakian?",options:["Terganggunya keselamatan, kenyamanan, dan keberhasilan tim","Pendakian jadi lebih mudah","Anggota jadi lebih kompak","Alat jadi lebih awet"],answer:0},{id:"pendakian-q9",question:"Dari pilihan berikut, mana yang PALING BENAR tentang nilai pendakian di Mahapala Narotama?",options:["Disiplin, tanggung jawab, dan keberanian menghadapi tantangan alam","Hanya soal alat mahal","Hanya soal mencapai puncak","Hanya soal jumlah anggota"],answer:0},{id:"pendakian-q10",question:"Jika ingin meningkatkan kemampuan pendakian, apa strategi PALING EFEKTIF?",options:["Latihan simulasi, refleksi, dan berbagi pengalaman","Hanya ikut pelatihan formal","Tunggu sampai jadi senior","Tidak perlu belajar lagi"],answer:0}]}],une="eduhub_leaderboard";async function XI(n,e){if(!n)return;const t=_r(un,une,n);await ms(t,{name:n,progress:Number(e)||0,updatedAt:lE()},{merge:!0})}async function A6e(){try{return(await sa(ti(un,une))).docs.map(e=>{const t=e.data();return{name:t.name,progress:Number(t.progress)||0,updatedAt:t.updatedAt||null}})}catch(n){return console.error("Error fetching leaderboard:",n),[]}}function KI(){return h.jsx("svg",{className:"absolute left-1/2 top-0 -translate-x-1/2 z-10 pointer-events-none",width:"220",height:"120",viewBox:"0 0 220 120",fill:"none",children:h.jsxs("g",{children:[h.jsx("circle",{cx:"30",cy:"30",r:"6",fill:"#34d399"}),h.jsx("circle",{cx:"60",cy:"20",r:"4",fill:"#fbbf24"}),h.jsx("circle",{cx:"110",cy:"10",r:"7",fill:"#38bdf8"}),h.jsx("circle",{cx:"170",cy:"25",r:"5",fill:"#f472b6"}),h.jsx("circle",{cx:"200",cy:"40",r:"4",fill:"#a3e635"}),h.jsx("circle",{cx:"50",cy:"70",r:"5",fill:"#f87171"}),h.jsx("circle",{cx:"180",cy:"80",r:"6",fill:"#facc15"}),h.jsx("circle",{cx:"120",cy:"100",r:"8",fill:"#4ade80"})]})})}function m1(){try{return JSON.parse(localStorage.getItem("eduhub_userdata")||"{}")||{}}catch{return{}}}function cne(n){localStorage.setItem("eduhub_userdata",JSON.stringify(n))}function YI(){return m1().progress||{}}function T6e(n){const e=m1();cne({...e,progress:n})}function F7({className:n="",style:e={}}){return h.jsxs("svg",{className:n,style:e,width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#FFD700",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M8 21h8M12 17v4M17 5V3a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v2M21 5h-4v2a5 5 0 0 1-10 0V5H3v2a7 7 0 0 0 6 6.92"}),h.jsx("path",{d:"M17 5h4v2a7 7 0 0 1-6 6.92"})]})}function k6e(){var Se;const n=M.useRef(null),[e,t]=M.useState(null),[r,i]=M.useState(0),[a,s]=M.useState(0),[o,l]=M.useState([]),[u,c]=M.useState(!1),[d,f]=M.useState(!1),[m,v]=M.useState(YI()),[_,w]=M.useState(m1().name||""),[x,S]=M.useState(!1),[E,T]=M.useState(""),[D,F]=M.useState(!1),[P,N]=M.useState([]),[I,R]=M.useState(!1),[B,G]=M.useState(!1),[H,K]=M.useState(null),[ne,re]=M.useState([]);M.useEffect(()=>{v(YI());const ge=m1();ge.name?(w(ge.name),XI(ge.name,Object.values(YI()).filter(Boolean).length)):S(!0)},[]),M.useEffect(()=>{if(_){const ge=Object.values(m).filter(Boolean).length;XI(_,ge).then(()=>{ge>=1&&Le()})}},[_,m]);function oe(ge,Ge){const Me=ge.map((te,Ee)=>({opt:te,idx:Ee}));for(let te=Me.length-1;te>0;te--){const Ee=Math.floor(Math.random()*(te+1));[Me[te],Me[Ee]]=[Me[Ee],Me[te]]}const Ce=Me.map(te=>te.opt),Te=Me.findIndex(te=>te.idx===Ge);return{newOptions:Ce,newAnswer:Te}}const $=ge=>{const Ge={...m,[ge]:!0};T6e(Ge),v(Ge)},ue=async()=>{E.trim().length<2||(cne({...m1(),name:E.trim(),progress:m}),w(E.trim()),S(!1),await XI(E.trim(),Object.values(m).filter(Boolean).length),Le())},se=()=>{const ge=Gu.find(Me=>Me.id===e);if(!ge)return;const Ge=ge.quiz.map(Me=>{const{newOptions:Ce,newAnswer:Te}=oe(Me.options,Me.answer);return{...Me,options:Ce,answer:Te}});re(Ge),c(!0),s(0),l([]),f(!1)},pe=ge=>{var Ge;l(Me=>{const Ce=[...Me];return Ce[a]=ge,Ce}),a<(((Ge=Gu.find(Me=>Me.id===e))==null?void 0:Ge.quiz.length)||0)-1?s(a+1):f(!0)},Fe=()=>{i(0),c(!1),s(0),l([]),f(!1),re([])},$e=Gu.length,at=Gu.filter(ge=>m[ge.id]).length,me=Math.round(at/$e*100),Le=async()=>{R(!0);try{const ge=await A6e();console.log("LEADERBOARD RAW DATA:",ge),N(Array.isArray(ge)?ge:[])}catch(ge){N([]),console.error("LEADERBOARD ERROR:",ge)}R(!1)};return M.useEffect(()=>{Le()},[]),h.jsxs("div",{className:"relative max-w-3xl mx-auto p-4",children:[h.jsx("div",{className:"hidden md:block fixed left-0 top-24 h-[80vh] w-56 bg-white/80 shadow-lg rounded-r-2xl border-r border-green-200 z-30 overflow-y-auto animate-fade-in",style:{backdropFilter:"blur(4px)"},children:h.jsxs("div",{className:"p-4",children:[h.jsx("div",{className:"font-bold text-green-700 mb-2 text-lg",children:"Navigasi EduHub"}),h.jsx("ul",{className:"space-y-1",children:Gu.map((ge,Ge)=>h.jsxs("li",{children:[h.jsxs("button",{className:`w-full text-left px-3 py-2 rounded-lg transition font-semibold ${e===ge.id?"bg-green-100 text-green-800 border-l-4 border-green-500":"hover:bg-green-50 text-gray-700"}`,onClick:()=>{t(ge.id),i(0),c(!1),f(!1),setTimeout(()=>{if(n.current){const Me=n.current.getBoundingClientRect().top+window.scrollY-80;window.scrollTo({top:Me,behavior:"smooth"})}},100)},children:[h.jsx("span",{className:"inline-block w-5 text-green-400",children:m[ge.id]?h.jsx(_0,{size:18}):Ge+1}),h.jsx("span",{className:"ml-2",children:ge.title})]}),e===ge.id&&h.jsxs("ul",{className:"ml-7 mt-1 space-y-0.5",children:[ge.lessons.map((Me,Ce)=>h.jsx("li",{children:h.jsxs("button",{className:`text-left text-sm px-2 py-1 rounded transition ${r===Ce&&!u?"bg-green-200 text-green-900":"hover:bg-green-50 text-gray-600"}`,onClick:()=>{i(Ce),c(!1),f(!1),setTimeout(()=>{if(n.current){const Te=n.current.getBoundingClientRect().top+window.scrollY-80;window.scrollTo({top:Te,behavior:"smooth"})}},100)},children:[" ",Me.title]})},Me.id)),h.jsx("li",{children:h.jsx("button",{className:`text-left text-sm px-2 py-1 rounded transition ${u?"bg-blue-200 text-blue-900":"hover:bg-blue-50 text-blue-700"}`,onClick:()=>{se(),setTimeout(()=>{if(n.current){const Me=n.current.getBoundingClientRect().top+window.scrollY-80;window.scrollTo({top:Me,behavior:"smooth"})}},100)},children:" Quiz"})})]})]},ge.id))})]})}),h.jsx("h1",{className:"text-2xl font-bold mb-4 text-green-700",children:"EduHub Survival & Teknik Alam Terbuka"}),h.jsxs("div",{className:"md:hidden mb-4",children:[h.jsxs("select",{className:"w-full border rounded p-2 text-green-800 font-semibold bg-green-50",value:e||"",onChange:ge=>{t(ge.target.value),i(0),c(!1),f(!1),setTimeout(()=>{if(n.current){const Ge=n.current.getBoundingClientRect().top+window.scrollY-80;window.scrollTo({top:Ge,behavior:"smooth"})}},100)},children:[h.jsx("option",{value:"",disabled:!0,children:"Pilih Modul..."}),Gu.map((ge,Ge)=>h.jsxs("option",{value:ge.id,children:[Ge+1,". ",ge.title]},ge.id))]}),e&&h.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[(Se=Gu.find(ge=>ge.id===e))==null?void 0:Se.lessons.map((ge,Ge)=>h.jsxs("button",{className:`px-2 py-1 rounded text-xs font-semibold ${r===Ge&&!u?"bg-green-200 text-green-900":"bg-green-50 text-green-700"}`,onClick:()=>{i(Ge),c(!1),f(!1),setTimeout(()=>{if(n.current){const Me=n.current.getBoundingClientRect().top+window.scrollY-80;window.scrollTo({top:Me,behavior:"smooth"})}},100)},children:[" ",ge.title]},ge.id)),h.jsx("button",{className:`px-2 py-1 rounded text-xs font-semibold ${u?"bg-blue-200 text-blue-900":"bg-blue-50 text-blue-700"}`,onClick:()=>{se(),setTimeout(()=>{if(n.current){const ge=n.current.getBoundingClientRect().top+window.scrollY-80;window.scrollTo({top:ge,behavior:"smooth"})}},100)},children:" Quiz"})]})]}),h.jsxs("div",{className:"mb-6",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"font-semibold text-green-700",children:"Progres:"}),h.jsxs("span",{className:"font-mono text-green-900 text-lg",children:[at," / ",$e]}),h.jsx("button",{className:"ml-2 p-1 rounded-full bg-yellow-100 border border-yellow-300 shadow hover:scale-110 transition-transform",title:"Lihat Peringkat",onClick:()=>F(!0),style:{lineHeight:0},children:h.jsx(F7,{})})]}),h.jsx("div",{className:"flex items-center gap-2",children:_&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"text-green-700 font-semibold text-sm truncate max-w-[120px]",title:_,children:_}),h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#22c55e",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"inline-block align-middle",children:[h.jsx("path",{d:"M20 21v-2a4 4 0 0 0-3-3.87"}),h.jsx("path",{d:"M4 21v-2a4 4 0 0 1 3-3.87"}),h.jsx("circle",{cx:"12",cy:"7",r:"4"})]})]})})]}),h.jsx("div",{className:"w-full h-5 bg-gray-200 rounded-full overflow-hidden shadow-inner mb-4",children:h.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 via-green-500 to-green-700 transition-all duration-700 ease-in-out flex items-center justify-end pr-2",style:{width:me+"%"},children:h.jsxs("span",{className:"text-xs text-white font-bold drop-shadow-sm",style:{opacity:me>10?1:0},children:[me,"%"]})})}),h.jsxs(wc,{open:D,onOpenChange:ge=>{F(ge),ge&&Le()},children:[h.jsxs(bu,{children:[h.jsx(q1,{children:h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(F7,{className:"inline-block",style:{verticalAlign:"middle"}}),h.jsx("span",{className:"text-xl font-bold text-yellow-600",children:"Peringkat Terbaik"})]})}),h.jsxs("div",{className:"w-full",style:{maxWidth:"420px",margin:"0 auto"},children:[h.jsx("div",{className:"overflow-y-auto custom-scrollbar",style:{maxHeight:"60vh",minHeight:"180px",paddingRight:"4px"},children:I?h.jsx("div",{className:"text-center py-6",children:"Memuat peringkat..."}):h.jsx(h.Fragment,{children:(()=>{const Ge=[...P].sort((Me,Ce)=>{const Te=(typeof Me.progress=="number"?Me.progress:Number(Me.progress))||0,te=(typeof Ce.progress=="number"?Ce.progress:Number(Ce.progress))||0;if(te!==Te)return te-Te;const Ee=je=>je?typeof je.toDate=="function"?je.toDate().getTime():je instanceof Date?je.getTime():typeof je=="string"||typeof je=="number"?new Date(je).getTime():1/0:1/0,Pe=Me&&typeof Me=="object"&&"updatedAt"in Me&&Me.updatedAt?Ee(Me.updatedAt):1/0,Ke=Ce&&typeof Ce=="object"&&"updatedAt"in Ce&&Ce.updatedAt?Ee(Ce.updatedAt):1/0;return Pe-Ke}).filter(Me=>((typeof Me.progress=="number"?Me.progress:Number(Me.progress))||0)>=1).slice(0,10);return h.jsx(h.Fragment,{children:h.jsx("ol",{className:"space-y-2 mt-2",children:Ge.length===0?h.jsx("div",{className:"text-center text-gray-400",children:"Belum ada data peringkat."}):Ge.map((Me,Ce)=>{const Te=Me.name||"(Tanpa Nama)",te=(typeof Me.progress=="number"?Me.progress:Number(Me.progress))||0,Ee=_&&Te.toLowerCase()===_.toLowerCase();return h.jsxs("li",{className:`flex items-center gap-3 p-2 rounded-lg ${Ce===0?"bg-yellow-100 border-2 border-yellow-400 shadow-lg animate-pulse":Ce===1?"bg-gray-200 border border-gray-400":""} ${Ce<3?"font-bold":Ce===0?"text-yellow-700":Ce===1?"text-gray-700":Ce===2?"text-orange-700":""} ${Ee?"ring-2 ring-green-500":""}`,children:[h.jsx("span",{className:"w-6 text-center text-lg",children:Ce===0?"":Ce===1?"":Ce===2?"":Ce+1}),h.jsxs("span",{className:"flex-1 truncate",children:[Te," ",Ee&&h.jsx("span",{className:"text-green-600 font-bold",children:"(You)"})]}),h.jsxs("span",{className:"font-mono",children:[te," / ",$e]})]},Te+Ce)})})})})()})}),_&&(()=>{const ge=[...P].sort((Ce,Te)=>{const te=(typeof Ce.progress=="number"?Ce.progress:Number(Ce.progress))||0,Ee=(typeof Te.progress=="number"?Te.progress:Number(Te.progress))||0;if(Ee!==te)return Ee-te;const Pe=st=>st?typeof st.toDate=="function"?st.toDate().getTime():st instanceof Date?st.getTime():typeof st=="string"||typeof st=="number"?new Date(st).getTime():1/0:1/0,Ke=Ce&&typeof Ce=="object"&&"updatedAt"in Ce&&Ce.updatedAt?Pe(Ce.updatedAt):1/0,je=Te&&typeof Te=="object"&&"updatedAt"in Te&&Te.updatedAt?Pe(Te.updatedAt):1/0;return Ke-je}),Ge=ge.findIndex(Ce=>(Ce.name||"").toLowerCase()===_.toLowerCase());if(Ge!==-1&&Ge<10)return null;const Me=Ge!==-1&&(typeof ge[Ge].progress=="number"?ge[Ge].progress:Number(ge[Ge].progress))||0;return h.jsxs("div",{className:"mb-2 px-3 py-2 rounded-lg bg-green-50 border border-green-200 flex items-center gap-3 shadow-sm",children:[h.jsx("span",{className:"w-7 text-center font-bold text-green-700",children:Ge!==-1?Ge+1:"-"}),h.jsxs("span",{className:"flex-1 truncate text-green-800 font-semibold",children:[_," ",h.jsx("span",{className:"text-green-500 font-normal",children:"(You)"})]}),h.jsxs("span",{className:"font-mono text-green-700",children:[Me," / ",$e]})]})})(),h.jsx("div",{className:"mt-4 text-xs text-gray-500 text-center",children:"Peringkat dihitung dari jumlah modul selesai. Top 3 mendapat efek khusus!"})]})]}),h.jsx("style",{children:`
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
    background: #f3f4f6;
    border-radius: 8px;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: #d1d5db;
    border-radius: 8px;
  }
`})]}),h.jsx(wc,{open:x,children:h.jsxs(bu,{children:[h.jsx(q1,{children:h.jsx("div",{className:"text-lg font-bold text-green-700 mb-2",children:"Masukkan Nama Anda"})}),h.jsx("div",{className:"mb-2",children:"Nama ini akan tampil di peringkat dan disimpan di perangkat Anda."}),h.jsx(oi,{autoFocus:!0,placeholder:"Nama lengkap atau panggilan",value:E,onChange:ge=>T(ge.target.value),maxLength:32,className:"mb-2"}),h.jsx(zt,{onClick:ue,disabled:E.trim().length<2,className:"w-full bg-green-600 hover:bg-green-700 text-white",children:"Simpan"})]})}),h.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Daftar Modul"}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:Gu.map(ge=>h.jsxs("button",{className:`border rounded-lg p-4 text-left shadow hover:shadow-lg transition bg-white hover:bg-green-50 ${e===ge.id?"border-green-600":"border-gray-300"}`,onClick:()=>{t(ge.id),i(0),c(!1),f(!1),setTimeout(()=>{if(n.current){const Ge=n.current.getBoundingClientRect().top+window.scrollY-80;window.scrollTo({top:Ge,behavior:"smooth"})}},100)},children:[h.jsx("span",{className:"font-bold text-green-700",children:ge.title}),m[ge.id]&&h.jsx("span",{className:"ml-2 inline-block align-middle text-green-600",children:h.jsx(_0,{size:18})})]},ge.id))})]}),e&&h.jsx("div",{ref:n,className:"mb-6 border rounded-lg p-4 bg-gray-50",children:(()=>{const ge=Gu.find(Me=>Me.id===e);if(!ge)return null;if(m[e])return h.jsxs("div",{className:"flex flex-col items-center gap-2 text-green-700 font-bold",children:[h.jsx(_0,{size:32}),h.jsxs("div",{children:["Badge: ",ge.badge]}),h.jsx("button",{className:"mt-2 text-sm underline text-green-600",onClick:Fe,children:"Ulangi Modul"})]});if(d){const Me=ne.length?ne:ge.quiz,Ce=Me.filter((te,Ee)=>o[Ee]===te.answer).length,Te=Ce===Me.length;return h.jsxs("div",{className:"text-center relative overflow-visible min-h-[180px]",children:[h.jsxs("div",{className:"mb-2 font-bold",children:["Hasil Quiz: ",Ce," / ",Me.length," benar"]}),Te?h.jsx(C6e,{badge:ge.badge,onSave:()=>$(e)}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"text-red-600 font-bold",children:"Belum semua jawaban benar. Coba lagi!"}),h.jsx("button",{className:"mt-4 bg-gray-300 text-gray-800 px-4 py-2 rounded shadow hover:bg-gray-400",onClick:Fe,children:"Ulangi Quiz"})]})]})}if(u){const Me=ne.length?ne:ge.quiz,Ce=Me[a];return h.jsxs("div",{children:[h.jsxs("div",{className:"font-bold mb-2",children:["Quiz ",a+1," / ",Me.length]}),h.jsx("div",{className:"mb-4",children:Ce.question}),h.jsx("div",{className:"flex flex-col gap-2",children:Ce.options.map((Te,te)=>h.jsx("button",{className:"border rounded px-3 py-2 text-left hover:bg-green-100",onClick:()=>pe(te),children:Te},te))})]})}const Ge=ge.lessons[r];return h.jsxs("div",{children:[h.jsxs("div",{className:"prose prose-green max-w-none mb-4",children:[h.jsx("h2",{children:Ge.title}),h.jsx("p",{children:Ge.content})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{className:"px-3 py-1 rounded bg-gray-200",disabled:r===0,onClick:()=>i(Me=>Me-1),children:"Sebelumnya"}),r<ge.lessons.length-1?h.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white",onClick:()=>i(Me=>Me+1),children:"Selanjutnya"}):h.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white",onClick:se,children:"Mulai Quiz"})]})]})})()}),h.jsxs("div",{className:"mb-6",children:[h.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Badge/Pencapaian Anda"}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[Gu.filter(ge=>m[ge.id]).map(ge=>h.jsxs("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full flex items-center gap-1 font-semibold border border-green-300",children:[h.jsx(_0,{size:16})," ",ge.badge]},ge.id)),Object.values(m).filter(Boolean).length===0&&h.jsx("span",{className:"text-gray-400",children:"Belum ada badge"})]})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("button",{className:"bg-green-500 text-white px-4 py-2 rounded shadow hover:bg-green-600",onClick:()=>G(ge=>!ge),children:"FAQ Survival & Mahapala"}),B&&h.jsx("div",{className:"mt-4",children:[{q:"Apa itu survival?",a:"Survival adalah kemampuan bertahan hidup di alam terbuka dengan memanfaatkan sumber daya yang ada."},{q:"Apa perlengkapan wajib untuk survival?",a:"Perlengkapan wajib meliputi pisau, tali, pelindung tubuh, makanan cadangan, dan alat navigasi."},{q:"Bagaimana cara membangun bivak yang aman?",a:"Pilih lokasi datar, jauh dari bahaya, gunakan bahan alami atau perlengkapan yang dibawa."},{q:"Apa tips mendaki gunung yang aman?",a:"Persiapkan fisik, bawa perlengkapan sesuai kebutuhan, dan selalu informasikan rencana pendakian."}].map((ge,Ge)=>h.jsxs("div",{className:"border-b",children:[h.jsxs("button",{className:"w-full text-left py-2 font-semibold flex justify-between items-center",onClick:()=>K(H===Ge?null:Ge),children:[h.jsx("span",{children:ge.q}),h.jsx("span",{children:H===Ge?"-":"+"})]}),H===Ge&&h.jsx("div",{className:"py-2 text-gray-700",children:ge.a})]},Ge))})]})]})}function C6e({badge:n,onSave:e}){const[t,r]=wn.useState(!0),[i,a]=wn.useState(!1);wn.useEffect(()=>{r(!0),a(!1)},[]);const s=()=>{a(!0),setTimeout(()=>{a(!1),e()},2200)};return h.jsxs(h.Fragment,{children:[t&&h.jsx(KI,{}),h.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 mt-2",children:[h.jsxs("span",{className:"relative",children:[h.jsx(_0,{size:64,className:"text-green-500 animate-bounce-in",style:{animation:"badgepop 1s cubic-bezier(.2,1.8,.5,1)"}}),h.jsx("style",{children:"@keyframes badgepop{0%{transform:scale(0.2) rotate(-30deg);}60%{transform:scale(1.2) rotate(10deg);}80%{transform:scale(0.95) rotate(-5deg);}100%{transform:scale(1) rotate(0deg);}}"})]}),h.jsx("span",{className:"text-green-700 font-bold text-xl animate-fade-in",style:{animation:"fadein 1.2s"},children:"Selamat! Anda mendapatkan badge:"}),h.jsxs("span",{className:"text-green-800 font-extrabold text-2xl tracking-wide animate-fade-in",style:{animation:"fadein 1.6s"},children:[" ",n]})]}),h.jsx("button",{className:"mt-6 bg-green-600 text-white px-5 py-2 rounded shadow-lg hover:bg-green-700 transition-all duration-300",onClick:s,children:"Simpan Badge"}),h.jsx("style",{children:"@keyframes fadein{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}.animate-fade-in{animation:fadein 1s;}"}),i&&h.jsx("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black bg-opacity-80 animate-fade-in-fast",children:h.jsxs("div",{className:"relative flex flex-col items-center justify-center",children:[h.jsx(KI,{}),h.jsxs("span",{className:"relative",children:[h.jsx(_0,{size:120,className:"text-yellow-400 animate-bounce-in",style:{animation:"badgepopbig 1.2s cubic-bezier(.2,1.8,.5,1)"}}),h.jsx("style",{children:"@keyframes badgepopbig{0%{transform:scale(0.2) rotate(-30deg);}60%{transform:scale(1.3) rotate(10deg);}80%{transform:scale(1.05) rotate(-5deg);}100%{transform:scale(1) rotate(0deg);}}"})]}),h.jsx("span",{className:"text-yellow-300 font-extrabold text-3xl mt-4 animate-fade-in",style:{animation:"fadein 1.2s"},children:"Pencapaian Cemerlang!"}),h.jsxs("span",{className:"text-white font-extrabold text-2xl tracking-wide animate-fade-in",style:{animation:"fadein 1.6s"},children:[" ",n]}),h.jsx("span",{className:"absolute -top-10 left-1/2 -translate-x-1/2",children:h.jsx(KI,{})})]})}),h.jsx("style",{children:".animate-fade-in-fast{animation:fadein .5s;}"})]})}function M6e(){return M.useEffect(()=>{const n=QTe();n?JTe(n).then(e=>{if(e){const t=localStorage.getItem("github_oauth_redirect")||"/admin";localStorage.removeItem("github_oauth_redirect"),window.location.replace(t)}else window.location.replace("/admin")}):window.location.replace("/")},[]),h.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),h.jsx("p",{className:"text-lg font-semibold text-gray-700",children:"Processing GitHub authentication..."}),h.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please wait while we complete the login process."})]})})}function I6e(){G8e(),M.useEffect(()=>{const t=i=>i.preventDefault();document.addEventListener("contextmenu",t);const r=i=>{if(i.key==="F12"||i.ctrlKey&&i.shiftKey&&(i.key==="I"||i.key==="J"||i.key==="C")||i.ctrlKey&&i.key==="U")return i.preventDefault(),!1};return document.addEventListener("keydown",r),()=>{document.removeEventListener("contextmenu",t),document.removeEventListener("keydown",r)}},[]);const[n,e]=wn.useState(null);return wn.useEffect(()=>{zD().then(t=>{t&&e(t)})},[]),wn.useEffect(()=>{if(n){document.title=n.title;const t=(s,o,l)=>{let u=document.querySelector(s);u&&u.setAttribute(o,l)};t('meta[name="description"]',"content",n.description),t('meta[name="keywords"]',"content",n.keywords),t('meta[property="og:title"]',"content",n.title),t('meta[property="og:description"]',"content",n.description),t('meta[property="og:image"]',"content",n.image),t('meta[name="twitter:title"]',"content",n.title),t('meta[name="twitter:description"]',"content",n.description),t('meta[name="twitter:image"]',"content",n.image);const r=document.querySelector('link[rel="icon"][type="image/x-icon"]');r&&r.setAttribute("href",n.favicon);const i=document.querySelectorAll('link[rel="icon"][type="image/x-icon"]')[1];i&&i.setAttribute("href",n.faviconFallback);const a=document.querySelector('link[rel="icon"][type="image/png"]');a&&a.setAttribute("href",n.faviconPng)}},[n]),wn.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(t=>{t.onupdatefound=()=>{const r=t.installing;r&&(r.onstatechange=()=>{r.state==="installed"&&navigator.serviceWorker.controller&&window.location.reload()})}})},[]),h.jsx(x6e,{children:h.jsxs(nve,{children:[h.jsx(gge,{}),h.jsx(z8e,{}),h.jsx(H8e,{}),h.jsx(gye,{children:h.jsxs(hpe,{children:[h.jsx(Gi,{path:"/github-oauth-callback",component:M6e}),h.jsx(Gi,{path:"/offline",component:J8e}),h.jsx(Gi,{path:"/url-shortener",component:tje}),h.jsx(Gi,{path:"/s/:shortcode",component:y6e}),h.jsx(Gi,{path:"/",component:FEe}),h.jsx(Gi,{path:"/kegiatan",component:gAe}),h.jsx(Gi,{path:"/pembelajaran",component:vAe}),h.jsx(Gi,{path:"/kartu-anggota",component:LAe}),h.jsx(Gi,{path:"/pendaftaran",component:FAe}),h.jsx(Gi,{path:"/galeri",component:UAe}),h.jsx(Gi,{path:"/admin",component:bke}),h.jsx(Gi,{path:"/kegiatan/:id",component:Ske}),h.jsx(Gi,{path:"/developer",component:Ffe}),h.jsx(Gi,{path:"/kartu-anggota-detail",component:Eke}),h.jsx(Gi,{path:"/member-card-3d",component:$Le}),h.jsx(Gi,{path:"/sejarah",component:_6e}),h.jsx(Gi,{path:"/sejarahAdmin",component:E6e}),h.jsx(Gi,{path:"/scan-anggota",component:V8e}),h.jsx(Gi,{path:"/eduhub",component:k6e}),h.jsx(Gi,{component:ave})]})})]})})}async function P6e(n){if(!n.ok){const e=await n.text()||n.statusText;throw new Error(`${n.status}: ${e}`)}}const N6e=({on401:n})=>async({queryKey:e})=>{const t=await fetch(e[0],{credentials:"include"});return await P6e(t),await t.json()},R6e=new J1e({defaultOptions:{queries:{queryFn:N6e({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});aH(document.getElementById("root")).render(h.jsx(i_e,{client:R6e,children:h.jsx(I6e,{})}));"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(n=>{n.onupdatefound=()=>{const e=n.installing;e&&(e.onstatechange=()=>{e.state==="installed"&&navigator.serviceWorker.controller&&window.location.reload()})}});window.addEventListener("contextmenu",n=>n.preventDefault());window.addEventListener("keydown",function(n){if(n.key==="F12"||n.ctrlKey&&n.shiftKey&&(n.key==="I"||n.key==="J"||n.key==="C")||n.ctrlKey&&n.key==="U")return n.preventDefault(),!1});
