var AK=Object.defineProperty;var jN=n=>{throw TypeError(n)};var CK=(n,e,t)=>e in n?AK(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Bh=(n,e,t)=>CK(n,typeof e!="symbol"?e+"":e,t),iE=(n,e,t)=>e.has(n)||jN("Cannot "+t);var ce=(n,e,t)=>(iE(n,e,"read from private field"),t?t.call(n):e.get(n)),Mt=(n,e,t)=>e.has(n)?jN("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),lt=(n,e,t,r)=>(iE(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),cn=(n,e,t)=>(iE(n,e,"access private method"),t);var ix=(n,e,t,r)=>({set _(i){lt(n,e,i,t)},get _(){return ce(n,e,r)}});function PK(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function dP(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Yj={exports:{}},k1={},Xj={exports:{}},Jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv=Symbol.for("react.element"),IK=Symbol.for("react.portal"),RK=Symbol.for("react.fragment"),kK=Symbol.for("react.strict_mode"),NK=Symbol.for("react.profiler"),DK=Symbol.for("react.provider"),LK=Symbol.for("react.context"),OK=Symbol.for("react.forward_ref"),FK=Symbol.for("react.suspense"),jK=Symbol.for("react.memo"),VK=Symbol.for("react.lazy"),VN=Symbol.iterator;function UK(n){return n===null||typeof n!="object"?null:(n=VN&&n[VN]||n["@@iterator"],typeof n=="function"?n:null)}var Qj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jj=Object.assign,Zj={};function tm(n,e,t){this.props=n,this.context=e,this.refs=Zj,this.updater=t||Qj}tm.prototype.isReactComponent={};tm.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};tm.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function eV(){}eV.prototype=tm.prototype;function hP(n,e,t){this.props=n,this.context=e,this.refs=Zj,this.updater=t||Qj}var fP=hP.prototype=new eV;fP.constructor=hP;Jj(fP,tm.prototype);fP.isPureReactComponent=!0;var UN=Array.isArray,tV=Object.prototype.hasOwnProperty,pP={current:null},nV={key:!0,ref:!0,__self:!0,__source:!0};function rV(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)tV.call(e,r)&&!nV.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Mv,type:n,key:s,ref:o,props:i,_owner:pP.current}}function zK(n,e){return{$$typeof:Mv,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function mP(n){return typeof n=="object"&&n!==null&&n.$$typeof===Mv}function BK(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var zN=/\/+/g;function sE(n,e){return typeof n=="object"&&n!==null&&n.key!=null?BK(""+n.key):e.toString(36)}function C_(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Mv:case IK:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+sE(o,0):r,UN(i)?(t="",n!=null&&(t=n.replace(zN,"$&/")+"/"),C_(i,e,t,"",function(c){return c})):i!=null&&(mP(i)&&(i=zK(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(zN,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",UN(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+sE(s,a);o+=C_(s,e,t,l,i)}else if(l=UK(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+sE(s,a++),o+=C_(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function sx(n,e,t){if(n==null)return n;var r=[],i=0;return C_(n,r,"","",function(s){return e.call(t,s,i++)}),r}function HK(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ki={current:null},P_={transition:null},WK={ReactCurrentDispatcher:Ki,ReactCurrentBatchConfig:P_,ReactCurrentOwner:pP};function iV(){throw Error("act(...) is not supported in production builds of React.")}Jt.Children={map:sx,forEach:function(n,e,t){sx(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return sx(n,function(){e++}),e},toArray:function(n){return sx(n,function(e){return e})||[]},only:function(n){if(!mP(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Jt.Component=tm;Jt.Fragment=RK;Jt.Profiler=NK;Jt.PureComponent=hP;Jt.StrictMode=kK;Jt.Suspense=FK;Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WK;Jt.act=iV;Jt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=Jj({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=pP.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)tV.call(e,l)&&!nV.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Mv,type:n.type,key:i,ref:s,props:r,_owner:o}};Jt.createContext=function(n){return n={$$typeof:LK,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:DK,_context:n},n.Consumer=n};Jt.createElement=rV;Jt.createFactory=function(n){var e=rV.bind(null,n);return e.type=n,e};Jt.createRef=function(){return{current:null}};Jt.forwardRef=function(n){return{$$typeof:OK,render:n}};Jt.isValidElement=mP;Jt.lazy=function(n){return{$$typeof:VK,_payload:{_status:-1,_result:n},_init:HK}};Jt.memo=function(n,e){return{$$typeof:jK,type:n,compare:e===void 0?null:e}};Jt.startTransition=function(n){var e=P_.transition;P_.transition={};try{n()}finally{P_.transition=e}};Jt.unstable_act=iV;Jt.useCallback=function(n,e){return Ki.current.useCallback(n,e)};Jt.useContext=function(n){return Ki.current.useContext(n)};Jt.useDebugValue=function(){};Jt.useDeferredValue=function(n){return Ki.current.useDeferredValue(n)};Jt.useEffect=function(n,e){return Ki.current.useEffect(n,e)};Jt.useId=function(){return Ki.current.useId()};Jt.useImperativeHandle=function(n,e,t){return Ki.current.useImperativeHandle(n,e,t)};Jt.useInsertionEffect=function(n,e){return Ki.current.useInsertionEffect(n,e)};Jt.useLayoutEffect=function(n,e){return Ki.current.useLayoutEffect(n,e)};Jt.useMemo=function(n,e){return Ki.current.useMemo(n,e)};Jt.useReducer=function(n,e,t){return Ki.current.useReducer(n,e,t)};Jt.useRef=function(n){return Ki.current.useRef(n)};Jt.useState=function(n){return Ki.current.useState(n)};Jt.useSyncExternalStore=function(n,e,t){return Ki.current.useSyncExternalStore(n,e,t)};Jt.useTransition=function(){return Ki.current.useTransition()};Jt.version="18.3.1";Xj.exports=Jt;var R=Xj.exports;const Ht=dP(R),gP=PK({__proto__:null,default:Ht},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GK=R,$K=Symbol.for("react.element"),qK=Symbol.for("react.fragment"),KK=Object.prototype.hasOwnProperty,YK=GK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XK={key:!0,ref:!0,__self:!0,__source:!0};function sV(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)KK.call(e,r)&&!XK.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:$K,type:n,key:s,ref:o,props:i,_owner:YK.current}}k1.Fragment=qK;k1.jsx=sV;k1.jsxs=sV;Yj.exports=k1;var m=Yj.exports,oV={exports:{}},Vs={},aV={exports:{}},lV={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(z,G){var q=z.length;z.push(G);e:for(;0<q;){var se=q-1>>>1,J=z[se];if(0<i(J,G))z[se]=G,z[q]=J,q=se;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var G=z[0],q=z.pop();if(q!==G){z[0]=q;e:for(var se=0,J=z.length,he=J>>>1;se<he;){var _e=2*(se+1)-1,re=z[_e],Y=_e+1,ae=z[Y];if(0>i(re,q))Y<J&&0>i(ae,re)?(z[se]=ae,z[Y]=q,se=Y):(z[se]=re,z[_e]=q,se=_e);else if(Y<J&&0>i(ae,q))z[se]=ae,z[Y]=q,se=Y;else break e}}return G}function i(z,G){var q=z.sortIndex-G.sortIndex;return q!==0?q:z.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,g=!1,v=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var G=t(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=z)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(c)}}function M(z){if(y=!1,S(z),!v)if(t(l)!==null)v=!0,ne(I);else{var G=t(c);G!==null&&oe(M,G.startTime-z)}}function I(z,G){v=!1,y&&(y=!1,_(T),T=-1),g=!0;var q=f;try{for(S(G),d=t(l);d!==null&&(!(d.expirationTime>G)||z&&!O());){var se=d.callback;if(typeof se=="function"){d.callback=null,f=d.priorityLevel;var J=se(d.expirationTime<=G);G=n.unstable_now(),typeof J=="function"?d.callback=J:d===t(l)&&r(l),S(G)}else r(l);d=t(l)}if(d!==null)var he=!0;else{var _e=t(c);_e!==null&&oe(M,_e.startTime-G),he=!1}return he}finally{d=null,f=q,g=!1}}var L=!1,P=null,T=-1,C=5,k=-1;function O(){return!(n.unstable_now()-k<C)}function U(){if(P!==null){var z=n.unstable_now();k=z;var G=!0;try{G=P(!0,z)}finally{G?V():(L=!1,P=null)}}else L=!1}var V;if(typeof w=="function")V=function(){w(U)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,Z=B.port2;B.port1.onmessage=U,V=function(){Z.postMessage(null)}}else V=function(){x(U,0)};function ne(z){P=z,L||(L=!0,V())}function oe(z,G){T=x(function(){z(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){v||g||(v=!0,ne(I))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(z){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var q=f;f=G;try{return z()}finally{f=q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var q=f;f=z;try{return G()}finally{f=q}},n.unstable_scheduleCallback=function(z,G,q){var se=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?se+q:se):q=se,z){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=q+J,z={id:u++,callback:G,priorityLevel:z,startTime:q,expirationTime:J,sortIndex:-1},q>se?(z.sortIndex=q,e(c,z),t(l)===null&&z===t(c)&&(y?(_(T),T=-1):y=!0,oe(M,q-se))):(z.sortIndex=J,e(l,z),v||g||(v=!0,ne(I))),z},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(z){var G=f;return function(){var q=f;f=G;try{return z.apply(this,arguments)}finally{f=q}}}})(lV);aV.exports=lV;var QK=aV.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JK=R,Os=QK;function Ue(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cV=new Set,yy={};function rh(n,e){Ap(n,e),Ap(n+"Capture",e)}function Ap(n,e){for(yy[n]=e,n=0;n<e.length;n++)cV.add(e[n])}var _l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uM=Object.prototype.hasOwnProperty,ZK=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,BN={},HN={};function eY(n){return uM.call(HN,n)?!0:uM.call(BN,n)?!1:ZK.test(n)?HN[n]=!0:(BN[n]=!0,!1)}function tY(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function nY(n,e,t,r){if(e===null||typeof e>"u"||tY(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yi(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ai={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ai[n]=new Yi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ai[e]=new Yi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ai[n]=new Yi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ai[n]=new Yi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ai[n]=new Yi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ai[n]=new Yi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ai[n]=new Yi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ai[n]=new Yi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ai[n]=new Yi(n,5,!1,n.toLowerCase(),null,!1,!1)});var yP=/[\-:]([a-z])/g;function vP(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(yP,vP);ai[e]=new Yi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(yP,vP);ai[e]=new Yi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(yP,vP);ai[e]=new Yi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ai[n]=new Yi(n,1,!1,n.toLowerCase(),null,!1,!1)});ai.xlinkHref=new Yi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ai[n]=new Yi(n,1,!1,n.toLowerCase(),null,!0,!0)});function xP(n,e,t,r){var i=ai.hasOwnProperty(e)?ai[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nY(e,t,i,r)&&(t=null),r||i===null?eY(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Ol=JK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ox=Symbol.for("react.element"),Ef=Symbol.for("react.portal"),Tf=Symbol.for("react.fragment"),_P=Symbol.for("react.strict_mode"),dM=Symbol.for("react.profiler"),uV=Symbol.for("react.provider"),dV=Symbol.for("react.context"),wP=Symbol.for("react.forward_ref"),hM=Symbol.for("react.suspense"),fM=Symbol.for("react.suspense_list"),bP=Symbol.for("react.memo"),uc=Symbol.for("react.lazy"),hV=Symbol.for("react.offscreen"),WN=Symbol.iterator;function Qm(n){return n===null||typeof n!="object"?null:(n=WN&&n[WN]||n["@@iterator"],typeof n=="function"?n:null)}var nr=Object.assign,oE;function bg(n){if(oE===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);oE=e&&e[1]||""}return`
`+oE+n}var aE=!1;function lE(n,e){if(!n||aE)return"";aE=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{aE=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?bg(n):""}function rY(n){switch(n.tag){case 5:return bg(n.type);case 16:return bg("Lazy");case 13:return bg("Suspense");case 19:return bg("SuspenseList");case 0:case 2:case 15:return n=lE(n.type,!1),n;case 11:return n=lE(n.type.render,!1),n;case 1:return n=lE(n.type,!0),n;default:return""}}function pM(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Tf:return"Fragment";case Ef:return"Portal";case dM:return"Profiler";case _P:return"StrictMode";case hM:return"Suspense";case fM:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case dV:return(n.displayName||"Context")+".Consumer";case uV:return(n._context.displayName||"Context")+".Provider";case wP:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case bP:return e=n.displayName||null,e!==null?e:pM(n.type)||"Memo";case uc:e=n._payload,n=n._init;try{return pM(n(e))}catch{}}return null}function iY(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pM(e);case 8:return e===_P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qc(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function fV(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sY(n){var e=fV(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function ax(n){n._valueTracker||(n._valueTracker=sY(n))}function pV(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=fV(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function mw(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function mM(n,e){var t=e.checked;return nr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function GN(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=qc(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mV(n,e){e=e.checked,e!=null&&xP(n,"checked",e,!1)}function gM(n,e){mV(n,e);var t=qc(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?yM(n,e.type,t):e.hasOwnProperty("defaultValue")&&yM(n,e.type,qc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function $N(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function yM(n,e,t){(e!=="number"||mw(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Sg=Array.isArray;function Kf(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+qc(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function vM(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ue(91));return nr({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function qN(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ue(92));if(Sg(t)){if(1<t.length)throw Error(Ue(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:qc(t)}}function gV(n,e){var t=qc(e.value),r=qc(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function KN(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function yV(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xM(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?yV(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var lx,vV=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(lx=lx||document.createElement("div"),lx.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lx.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function vy(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Ug={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oY=["Webkit","ms","Moz","O"];Object.keys(Ug).forEach(function(n){oY.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Ug[e]=Ug[n]})});function xV(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Ug.hasOwnProperty(n)&&Ug[n]?(""+e).trim():e+"px"}function _V(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=xV(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var aY=nr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _M(n,e){if(e){if(aY[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ue(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ue(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ue(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ue(62))}}function wM(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bM=null;function SP(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var SM=null,Yf=null,Xf=null;function YN(n){if(n=Pv(n)){if(typeof SM!="function")throw Error(Ue(280));var e=n.stateNode;e&&(e=F1(e),SM(n.stateNode,n.type,e))}}function wV(n){Yf?Xf?Xf.push(n):Xf=[n]:Yf=n}function bV(){if(Yf){var n=Yf,e=Xf;if(Xf=Yf=null,YN(n),e)for(n=0;n<e.length;n++)YN(e[n])}}function SV(n,e){return n(e)}function EV(){}var cE=!1;function TV(n,e,t){if(cE)return n(e,t);cE=!0;try{return SV(n,e,t)}finally{cE=!1,(Yf!==null||Xf!==null)&&(EV(),bV())}}function xy(n,e){var t=n.stateNode;if(t===null)return null;var r=F1(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ue(231,e,typeof t));return t}var EM=!1;if(_l)try{var Jm={};Object.defineProperty(Jm,"passive",{get:function(){EM=!0}}),window.addEventListener("test",Jm,Jm),window.removeEventListener("test",Jm,Jm)}catch{EM=!1}function lY(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var zg=!1,gw=null,yw=!1,TM=null,cY={onError:function(n){zg=!0,gw=n}};function uY(n,e,t,r,i,s,o,a,l){zg=!1,gw=null,lY.apply(cY,arguments)}function dY(n,e,t,r,i,s,o,a,l){if(uY.apply(this,arguments),zg){if(zg){var c=gw;zg=!1,gw=null}else throw Error(Ue(198));yw||(yw=!0,TM=c)}}function ih(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function MV(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function XN(n){if(ih(n)!==n)throw Error(Ue(188))}function hY(n){var e=n.alternate;if(!e){if(e=ih(n),e===null)throw Error(Ue(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return XN(i),n;if(s===r)return XN(i),e;s=s.sibling}throw Error(Ue(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Ue(189))}}if(t.alternate!==r)throw Error(Ue(190))}if(t.tag!==3)throw Error(Ue(188));return t.stateNode.current===t?n:e}function AV(n){return n=hY(n),n!==null?CV(n):null}function CV(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=CV(n);if(e!==null)return e;n=n.sibling}return null}var PV=Os.unstable_scheduleCallback,QN=Os.unstable_cancelCallback,fY=Os.unstable_shouldYield,pY=Os.unstable_requestPaint,_r=Os.unstable_now,mY=Os.unstable_getCurrentPriorityLevel,EP=Os.unstable_ImmediatePriority,IV=Os.unstable_UserBlockingPriority,vw=Os.unstable_NormalPriority,gY=Os.unstable_LowPriority,RV=Os.unstable_IdlePriority,N1=null,_a=null;function yY(n){if(_a&&typeof _a.onCommitFiberRoot=="function")try{_a.onCommitFiberRoot(N1,n,void 0,(n.current.flags&128)===128)}catch{}}var Vo=Math.clz32?Math.clz32:_Y,vY=Math.log,xY=Math.LN2;function _Y(n){return n>>>=0,n===0?32:31-(vY(n)/xY|0)|0}var cx=64,ux=4194304;function Eg(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function xw(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Eg(a):(s&=o,s!==0&&(r=Eg(s)))}else o=t&~i,o!==0?r=Eg(o):s!==0&&(r=Eg(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Vo(e),i=1<<t,r|=n[t],e&=~i;return r}function wY(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bY(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Vo(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=wY(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function MM(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function kV(){var n=cx;return cx<<=1,!(cx&4194240)&&(cx=64),n}function uE(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Av(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Vo(e),n[e]=t}function SY(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Vo(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function TP(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Vo(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Tn=0;function NV(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var DV,MP,LV,OV,FV,AM=!1,dx=[],Rc=null,kc=null,Nc=null,_y=new Map,wy=new Map,hc=[],EY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function JN(n,e){switch(n){case"focusin":case"focusout":Rc=null;break;case"dragenter":case"dragleave":kc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":_y.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wy.delete(e.pointerId)}}function Zm(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Pv(e),e!==null&&MP(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function TY(n,e,t,r,i){switch(e){case"focusin":return Rc=Zm(Rc,n,e,t,r,i),!0;case"dragenter":return kc=Zm(kc,n,e,t,r,i),!0;case"mouseover":return Nc=Zm(Nc,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return _y.set(s,Zm(_y.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,wy.set(s,Zm(wy.get(s)||null,n,e,t,r,i)),!0}return!1}function jV(n){var e=ad(n.target);if(e!==null){var t=ih(e);if(t!==null){if(e=t.tag,e===13){if(e=MV(t),e!==null){n.blockedOn=e,FV(n.priority,function(){LV(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function I_(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=CM(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);bM=r,t.target.dispatchEvent(r),bM=null}else return e=Pv(t),e!==null&&MP(e),n.blockedOn=t,!1;e.shift()}return!0}function ZN(n,e,t){I_(n)&&t.delete(e)}function MY(){AM=!1,Rc!==null&&I_(Rc)&&(Rc=null),kc!==null&&I_(kc)&&(kc=null),Nc!==null&&I_(Nc)&&(Nc=null),_y.forEach(ZN),wy.forEach(ZN)}function eg(n,e){n.blockedOn===e&&(n.blockedOn=null,AM||(AM=!0,Os.unstable_scheduleCallback(Os.unstable_NormalPriority,MY)))}function by(n){function e(i){return eg(i,n)}if(0<dx.length){eg(dx[0],n);for(var t=1;t<dx.length;t++){var r=dx[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Rc!==null&&eg(Rc,n),kc!==null&&eg(kc,n),Nc!==null&&eg(Nc,n),_y.forEach(e),wy.forEach(e),t=0;t<hc.length;t++)r=hc[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<hc.length&&(t=hc[0],t.blockedOn===null);)jV(t),t.blockedOn===null&&hc.shift()}var Qf=Ol.ReactCurrentBatchConfig,_w=!0;function AY(n,e,t,r){var i=Tn,s=Qf.transition;Qf.transition=null;try{Tn=1,AP(n,e,t,r)}finally{Tn=i,Qf.transition=s}}function CY(n,e,t,r){var i=Tn,s=Qf.transition;Qf.transition=null;try{Tn=4,AP(n,e,t,r)}finally{Tn=i,Qf.transition=s}}function AP(n,e,t,r){if(_w){var i=CM(n,e,t,r);if(i===null)_E(n,e,r,ww,t),JN(n,r);else if(TY(i,n,e,t,r))r.stopPropagation();else if(JN(n,r),e&4&&-1<EY.indexOf(n)){for(;i!==null;){var s=Pv(i);if(s!==null&&DV(s),s=CM(n,e,t,r),s===null&&_E(n,e,r,ww,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else _E(n,e,r,null,t)}}var ww=null;function CM(n,e,t,r){if(ww=null,n=SP(r),n=ad(n),n!==null)if(e=ih(n),e===null)n=null;else if(t=e.tag,t===13){if(n=MV(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return ww=n,null}function VV(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mY()){case EP:return 1;case IV:return 4;case vw:case gY:return 16;case RV:return 536870912;default:return 16}default:return 16}}var Mc=null,CP=null,R_=null;function UV(){if(R_)return R_;var n,e=CP,t=e.length,r,i="value"in Mc?Mc.value:Mc.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return R_=i.slice(n,1<r?1-r:void 0)}function k_(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function hx(){return!0}function eD(){return!1}function Us(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?hx:eD,this.isPropagationStopped=eD,this}return nr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=hx)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=hx)},persist:function(){},isPersistent:hx}),e}var nm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},PP=Us(nm),Cv=nr({},nm,{view:0,detail:0}),PY=Us(Cv),dE,hE,tg,D1=nr({},Cv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:IP,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==tg&&(tg&&n.type==="mousemove"?(dE=n.screenX-tg.screenX,hE=n.screenY-tg.screenY):hE=dE=0,tg=n),dE)},movementY:function(n){return"movementY"in n?n.movementY:hE}}),tD=Us(D1),IY=nr({},D1,{dataTransfer:0}),RY=Us(IY),kY=nr({},Cv,{relatedTarget:0}),fE=Us(kY),NY=nr({},nm,{animationName:0,elapsedTime:0,pseudoElement:0}),DY=Us(NY),LY=nr({},nm,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),OY=Us(LY),FY=nr({},nm,{data:0}),nD=Us(FY),jY={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VY={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UY={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zY(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=UY[n])?!!e[n]:!1}function IP(){return zY}var BY=nr({},Cv,{key:function(n){if(n.key){var e=jY[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=k_(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?VY[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:IP,charCode:function(n){return n.type==="keypress"?k_(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?k_(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),HY=Us(BY),WY=nr({},D1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rD=Us(WY),GY=nr({},Cv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:IP}),$Y=Us(GY),qY=nr({},nm,{propertyName:0,elapsedTime:0,pseudoElement:0}),KY=Us(qY),YY=nr({},D1,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),XY=Us(YY),QY=[9,13,27,32],RP=_l&&"CompositionEvent"in window,Bg=null;_l&&"documentMode"in document&&(Bg=document.documentMode);var JY=_l&&"TextEvent"in window&&!Bg,zV=_l&&(!RP||Bg&&8<Bg&&11>=Bg),iD=" ",sD=!1;function BV(n,e){switch(n){case"keyup":return QY.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HV(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Mf=!1;function ZY(n,e){switch(n){case"compositionend":return HV(e);case"keypress":return e.which!==32?null:(sD=!0,iD);case"textInput":return n=e.data,n===iD&&sD?null:n;default:return null}}function eX(n,e){if(Mf)return n==="compositionend"||!RP&&BV(n,e)?(n=UV(),R_=CP=Mc=null,Mf=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zV&&e.locale!=="ko"?null:e.data;default:return null}}var tX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oD(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!tX[n.type]:e==="textarea"}function WV(n,e,t,r){wV(r),e=bw(e,"onChange"),0<e.length&&(t=new PP("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Hg=null,Sy=null;function nX(n){tU(n,0)}function L1(n){var e=Pf(n);if(pV(e))return n}function rX(n,e){if(n==="change")return e}var GV=!1;if(_l){var pE;if(_l){var mE="oninput"in document;if(!mE){var aD=document.createElement("div");aD.setAttribute("oninput","return;"),mE=typeof aD.oninput=="function"}pE=mE}else pE=!1;GV=pE&&(!document.documentMode||9<document.documentMode)}function lD(){Hg&&(Hg.detachEvent("onpropertychange",$V),Sy=Hg=null)}function $V(n){if(n.propertyName==="value"&&L1(Sy)){var e=[];WV(e,Sy,n,SP(n)),TV(nX,e)}}function iX(n,e,t){n==="focusin"?(lD(),Hg=e,Sy=t,Hg.attachEvent("onpropertychange",$V)):n==="focusout"&&lD()}function sX(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return L1(Sy)}function oX(n,e){if(n==="click")return L1(e)}function aX(n,e){if(n==="input"||n==="change")return L1(e)}function lX(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Go=typeof Object.is=="function"?Object.is:lX;function Ey(n,e){if(Go(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!uM.call(e,i)||!Go(n[i],e[i]))return!1}return!0}function cD(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function uD(n,e){var t=cD(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=cD(t)}}function qV(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?qV(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function KV(){for(var n=window,e=mw();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=mw(n.document)}return e}function kP(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function cX(n){var e=KV(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&qV(t.ownerDocument.documentElement,t)){if(r!==null&&kP(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=uD(t,s);var o=uD(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var uX=_l&&"documentMode"in document&&11>=document.documentMode,Af=null,PM=null,Wg=null,IM=!1;function dD(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;IM||Af==null||Af!==mw(r)||(r=Af,"selectionStart"in r&&kP(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wg&&Ey(Wg,r)||(Wg=r,r=bw(PM,"onSelect"),0<r.length&&(e=new PP("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Af)))}function fx(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Cf={animationend:fx("Animation","AnimationEnd"),animationiteration:fx("Animation","AnimationIteration"),animationstart:fx("Animation","AnimationStart"),transitionend:fx("Transition","TransitionEnd")},gE={},YV={};_l&&(YV=document.createElement("div").style,"AnimationEvent"in window||(delete Cf.animationend.animation,delete Cf.animationiteration.animation,delete Cf.animationstart.animation),"TransitionEvent"in window||delete Cf.transitionend.transition);function O1(n){if(gE[n])return gE[n];if(!Cf[n])return n;var e=Cf[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in YV)return gE[n]=e[t];return n}var XV=O1("animationend"),QV=O1("animationiteration"),JV=O1("animationstart"),ZV=O1("transitionend"),eU=new Map,hD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hu(n,e){eU.set(n,e),rh(e,[n])}for(var yE=0;yE<hD.length;yE++){var vE=hD[yE],dX=vE.toLowerCase(),hX=vE[0].toUpperCase()+vE.slice(1);hu(dX,"on"+hX)}hu(XV,"onAnimationEnd");hu(QV,"onAnimationIteration");hu(JV,"onAnimationStart");hu("dblclick","onDoubleClick");hu("focusin","onFocus");hu("focusout","onBlur");hu(ZV,"onTransitionEnd");Ap("onMouseEnter",["mouseout","mouseover"]);Ap("onMouseLeave",["mouseout","mouseover"]);Ap("onPointerEnter",["pointerout","pointerover"]);Ap("onPointerLeave",["pointerout","pointerover"]);rh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rh("onBeforeInput",["compositionend","keypress","textInput","paste"]);rh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fX=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tg));function fD(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,dY(r,e,void 0,n),n.currentTarget=null}function tU(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;fD(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;fD(i,a,c),s=l}}}if(yw)throw n=TM,yw=!1,TM=null,n}function Vn(n,e){var t=e[LM];t===void 0&&(t=e[LM]=new Set);var r=n+"__bubble";t.has(r)||(nU(e,n,2,!1),t.add(r))}function xE(n,e,t){var r=0;e&&(r|=4),nU(t,n,r,e)}var px="_reactListening"+Math.random().toString(36).slice(2);function Ty(n){if(!n[px]){n[px]=!0,cV.forEach(function(t){t!=="selectionchange"&&(fX.has(t)||xE(t,!1,n),xE(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[px]||(e[px]=!0,xE("selectionchange",!1,e))}}function nU(n,e,t,r){switch(VV(e)){case 1:var i=AY;break;case 4:i=CY;break;default:i=AP}t=i.bind(null,e,t,n),i=void 0,!EM||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function _E(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ad(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}TV(function(){var c=s,u=SP(t),d=[];e:{var f=eU.get(n);if(f!==void 0){var g=PP,v=n;switch(n){case"keypress":if(k_(t)===0)break e;case"keydown":case"keyup":g=HY;break;case"focusin":v="focus",g=fE;break;case"focusout":v="blur",g=fE;break;case"beforeblur":case"afterblur":g=fE;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=tD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=RY;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=$Y;break;case XV:case QV:case JV:g=DY;break;case ZV:g=KY;break;case"scroll":g=PY;break;case"wheel":g=XY;break;case"copy":case"cut":case"paste":g=OY;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=rD}var y=(e&4)!==0,x=!y&&n==="scroll",_=y?f!==null?f+"Capture":null:f;y=[];for(var w=c,S;w!==null;){S=w;var M=S.stateNode;if(S.tag===5&&M!==null&&(S=M,_!==null&&(M=xy(w,_),M!=null&&y.push(My(w,M,S)))),x)break;w=w.return}0<y.length&&(f=new g(f,v,null,t,u),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",f&&t!==bM&&(v=t.relatedTarget||t.fromElement)&&(ad(v)||v[wl]))break e;if((g||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,g?(v=t.relatedTarget||t.toElement,g=c,v=v?ad(v):null,v!==null&&(x=ih(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=c),g!==v)){if(y=tD,M="onMouseLeave",_="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(y=rD,M="onPointerLeave",_="onPointerEnter",w="pointer"),x=g==null?f:Pf(g),S=v==null?f:Pf(v),f=new y(M,w+"leave",g,t,u),f.target=x,f.relatedTarget=S,M=null,ad(u)===c&&(y=new y(_,w+"enter",v,t,u),y.target=S,y.relatedTarget=x,M=y),x=M,g&&v)t:{for(y=g,_=v,w=0,S=y;S;S=Hh(S))w++;for(S=0,M=_;M;M=Hh(M))S++;for(;0<w-S;)y=Hh(y),w--;for(;0<S-w;)_=Hh(_),S--;for(;w--;){if(y===_||_!==null&&y===_.alternate)break t;y=Hh(y),_=Hh(_)}y=null}else y=null;g!==null&&pD(d,f,g,y,!1),v!==null&&x!==null&&pD(d,x,v,y,!0)}}e:{if(f=c?Pf(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var I=rX;else if(oD(f))if(GV)I=aX;else{I=sX;var L=iX}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(I=oX);if(I&&(I=I(n,c))){WV(d,I,t,u);break e}L&&L(n,f,c),n==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&yM(f,"number",f.value)}switch(L=c?Pf(c):window,n){case"focusin":(oD(L)||L.contentEditable==="true")&&(Af=L,PM=c,Wg=null);break;case"focusout":Wg=PM=Af=null;break;case"mousedown":IM=!0;break;case"contextmenu":case"mouseup":case"dragend":IM=!1,dD(d,t,u);break;case"selectionchange":if(uX)break;case"keydown":case"keyup":dD(d,t,u)}var P;if(RP)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Mf?BV(n,t)&&(T="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(T="onCompositionStart");T&&(zV&&t.locale!=="ko"&&(Mf||T!=="onCompositionStart"?T==="onCompositionEnd"&&Mf&&(P=UV()):(Mc=u,CP="value"in Mc?Mc.value:Mc.textContent,Mf=!0)),L=bw(c,T),0<L.length&&(T=new nD(T,n,null,t,u),d.push({event:T,listeners:L}),P?T.data=P:(P=HV(t),P!==null&&(T.data=P)))),(P=JY?ZY(n,t):eX(n,t))&&(c=bw(c,"onBeforeInput"),0<c.length&&(u=new nD("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=P))}tU(d,e)})}function My(n,e,t){return{instance:n,listener:e,currentTarget:t}}function bw(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=xy(n,t),s!=null&&r.unshift(My(n,s,i)),s=xy(n,e),s!=null&&r.push(My(n,s,i))),n=n.return}return r}function Hh(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function pD(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=xy(t,s),l!=null&&o.unshift(My(t,l,a))):i||(l=xy(t,s),l!=null&&o.push(My(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var pX=/\r\n?/g,mX=/\u0000|\uFFFD/g;function mD(n){return(typeof n=="string"?n:""+n).replace(pX,`
`).replace(mX,"")}function mx(n,e,t){if(e=mD(e),mD(n)!==e&&t)throw Error(Ue(425))}function Sw(){}var RM=null,kM=null;function NM(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var DM=typeof setTimeout=="function"?setTimeout:void 0,gX=typeof clearTimeout=="function"?clearTimeout:void 0,gD=typeof Promise=="function"?Promise:void 0,yX=typeof queueMicrotask=="function"?queueMicrotask:typeof gD<"u"?function(n){return gD.resolve(null).then(n).catch(vX)}:DM;function vX(n){setTimeout(function(){throw n})}function wE(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),by(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);by(e)}function Dc(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function yD(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var rm=Math.random().toString(36).slice(2),ga="__reactFiber$"+rm,Ay="__reactProps$"+rm,wl="__reactContainer$"+rm,LM="__reactEvents$"+rm,xX="__reactListeners$"+rm,_X="__reactHandles$"+rm;function ad(n){var e=n[ga];if(e)return e;for(var t=n.parentNode;t;){if(e=t[wl]||t[ga]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=yD(n);n!==null;){if(t=n[ga])return t;n=yD(n)}return e}n=t,t=n.parentNode}return null}function Pv(n){return n=n[ga]||n[wl],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Pf(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ue(33))}function F1(n){return n[Ay]||null}var OM=[],If=-1;function fu(n){return{current:n}}function Bn(n){0>If||(n.current=OM[If],OM[If]=null,If--)}function Fn(n,e){If++,OM[If]=n.current,n.current=e}var Kc={},Li=fu(Kc),cs=fu(!1),Ld=Kc;function Cp(n,e){var t=n.type.contextTypes;if(!t)return Kc;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function us(n){return n=n.childContextTypes,n!=null}function Ew(){Bn(cs),Bn(Li)}function vD(n,e,t){if(Li.current!==Kc)throw Error(Ue(168));Fn(Li,e),Fn(cs,t)}function rU(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ue(108,iY(n)||"Unknown",i));return nr({},t,r)}function Tw(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Kc,Ld=Li.current,Fn(Li,n),Fn(cs,cs.current),!0}function xD(n,e,t){var r=n.stateNode;if(!r)throw Error(Ue(169));t?(n=rU(n,e,Ld),r.__reactInternalMemoizedMergedChildContext=n,Bn(cs),Bn(Li),Fn(Li,n)):Bn(cs),Fn(cs,t)}var nl=null,j1=!1,bE=!1;function iU(n){nl===null?nl=[n]:nl.push(n)}function wX(n){j1=!0,iU(n)}function pu(){if(!bE&&nl!==null){bE=!0;var n=0,e=Tn;try{var t=nl;for(Tn=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}nl=null,j1=!1}catch(i){throw nl!==null&&(nl=nl.slice(n+1)),PV(EP,pu),i}finally{Tn=e,bE=!1}}return null}var Rf=[],kf=0,Mw=null,Aw=0,lo=[],co=0,Od=null,al=1,ll="";function Xu(n,e){Rf[kf++]=Aw,Rf[kf++]=Mw,Mw=n,Aw=e}function sU(n,e,t){lo[co++]=al,lo[co++]=ll,lo[co++]=Od,Od=n;var r=al;n=ll;var i=32-Vo(r)-1;r&=~(1<<i),t+=1;var s=32-Vo(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,al=1<<32-Vo(e)+i|t<<i|r,ll=s+n}else al=1<<s|t<<i|r,ll=n}function NP(n){n.return!==null&&(Xu(n,1),sU(n,1,0))}function DP(n){for(;n===Mw;)Mw=Rf[--kf],Rf[kf]=null,Aw=Rf[--kf],Rf[kf]=null;for(;n===Od;)Od=lo[--co],lo[co]=null,ll=lo[--co],lo[co]=null,al=lo[--co],lo[co]=null}var Rs=null,Ps=null,Kn=!1,No=null;function oU(n,e){var t=fo(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function _D(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Rs=n,Ps=Dc(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Rs=n,Ps=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Od!==null?{id:al,overflow:ll}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=fo(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Rs=n,Ps=null,!0):!1;default:return!1}}function FM(n){return(n.mode&1)!==0&&(n.flags&128)===0}function jM(n){if(Kn){var e=Ps;if(e){var t=e;if(!_D(n,e)){if(FM(n))throw Error(Ue(418));e=Dc(t.nextSibling);var r=Rs;e&&_D(n,e)?oU(r,t):(n.flags=n.flags&-4097|2,Kn=!1,Rs=n)}}else{if(FM(n))throw Error(Ue(418));n.flags=n.flags&-4097|2,Kn=!1,Rs=n}}}function wD(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Rs=n}function gx(n){if(n!==Rs)return!1;if(!Kn)return wD(n),Kn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!NM(n.type,n.memoizedProps)),e&&(e=Ps)){if(FM(n))throw aU(),Error(Ue(418));for(;e;)oU(n,e),e=Dc(e.nextSibling)}if(wD(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ue(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Ps=Dc(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Ps=null}}else Ps=Rs?Dc(n.stateNode.nextSibling):null;return!0}function aU(){for(var n=Ps;n;)n=Dc(n.nextSibling)}function Pp(){Ps=Rs=null,Kn=!1}function LP(n){No===null?No=[n]:No.push(n)}var bX=Ol.ReactCurrentBatchConfig;function ng(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ue(309));var r=t.stateNode}if(!r)throw Error(Ue(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ue(284));if(!t._owner)throw Error(Ue(290,n))}return n}function yx(n,e){throw n=Object.prototype.toString.call(e),Error(Ue(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function bD(n){var e=n._init;return e(n._payload)}function lU(n){function e(_,w){if(n){var S=_.deletions;S===null?(_.deletions=[w],_.flags|=16):S.push(w)}}function t(_,w){if(!n)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function i(_,w){return _=jc(_,w),_.index=0,_.sibling=null,_}function s(_,w,S){return _.index=S,n?(S=_.alternate,S!==null?(S=S.index,S<w?(_.flags|=2,w):S):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return n&&_.alternate===null&&(_.flags|=2),_}function a(_,w,S,M){return w===null||w.tag!==6?(w=PE(S,_.mode,M),w.return=_,w):(w=i(w,S),w.return=_,w)}function l(_,w,S,M){var I=S.type;return I===Tf?u(_,w,S.props.children,M,S.key):w!==null&&(w.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===uc&&bD(I)===w.type)?(M=i(w,S.props),M.ref=ng(_,w,S),M.return=_,M):(M=V_(S.type,S.key,S.props,null,_.mode,M),M.ref=ng(_,w,S),M.return=_,M)}function c(_,w,S,M){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=IE(S,_.mode,M),w.return=_,w):(w=i(w,S.children||[]),w.return=_,w)}function u(_,w,S,M,I){return w===null||w.tag!==7?(w=Cd(S,_.mode,M,I),w.return=_,w):(w=i(w,S),w.return=_,w)}function d(_,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=PE(""+w,_.mode,S),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ox:return S=V_(w.type,w.key,w.props,null,_.mode,S),S.ref=ng(_,null,w),S.return=_,S;case Ef:return w=IE(w,_.mode,S),w.return=_,w;case uc:var M=w._init;return d(_,M(w._payload),S)}if(Sg(w)||Qm(w))return w=Cd(w,_.mode,S,null),w.return=_,w;yx(_,w)}return null}function f(_,w,S,M){var I=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return I!==null?null:a(_,w,""+S,M);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ox:return S.key===I?l(_,w,S,M):null;case Ef:return S.key===I?c(_,w,S,M):null;case uc:return I=S._init,f(_,w,I(S._payload),M)}if(Sg(S)||Qm(S))return I!==null?null:u(_,w,S,M,null);yx(_,S)}return null}function g(_,w,S,M,I){if(typeof M=="string"&&M!==""||typeof M=="number")return _=_.get(S)||null,a(w,_,""+M,I);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case ox:return _=_.get(M.key===null?S:M.key)||null,l(w,_,M,I);case Ef:return _=_.get(M.key===null?S:M.key)||null,c(w,_,M,I);case uc:var L=M._init;return g(_,w,S,L(M._payload),I)}if(Sg(M)||Qm(M))return _=_.get(S)||null,u(w,_,M,I,null);yx(w,M)}return null}function v(_,w,S,M){for(var I=null,L=null,P=w,T=w=0,C=null;P!==null&&T<S.length;T++){P.index>T?(C=P,P=null):C=P.sibling;var k=f(_,P,S[T],M);if(k===null){P===null&&(P=C);break}n&&P&&k.alternate===null&&e(_,P),w=s(k,w,T),L===null?I=k:L.sibling=k,L=k,P=C}if(T===S.length)return t(_,P),Kn&&Xu(_,T),I;if(P===null){for(;T<S.length;T++)P=d(_,S[T],M),P!==null&&(w=s(P,w,T),L===null?I=P:L.sibling=P,L=P);return Kn&&Xu(_,T),I}for(P=r(_,P);T<S.length;T++)C=g(P,_,T,S[T],M),C!==null&&(n&&C.alternate!==null&&P.delete(C.key===null?T:C.key),w=s(C,w,T),L===null?I=C:L.sibling=C,L=C);return n&&P.forEach(function(O){return e(_,O)}),Kn&&Xu(_,T),I}function y(_,w,S,M){var I=Qm(S);if(typeof I!="function")throw Error(Ue(150));if(S=I.call(S),S==null)throw Error(Ue(151));for(var L=I=null,P=w,T=w=0,C=null,k=S.next();P!==null&&!k.done;T++,k=S.next()){P.index>T?(C=P,P=null):C=P.sibling;var O=f(_,P,k.value,M);if(O===null){P===null&&(P=C);break}n&&P&&O.alternate===null&&e(_,P),w=s(O,w,T),L===null?I=O:L.sibling=O,L=O,P=C}if(k.done)return t(_,P),Kn&&Xu(_,T),I;if(P===null){for(;!k.done;T++,k=S.next())k=d(_,k.value,M),k!==null&&(w=s(k,w,T),L===null?I=k:L.sibling=k,L=k);return Kn&&Xu(_,T),I}for(P=r(_,P);!k.done;T++,k=S.next())k=g(P,_,T,k.value,M),k!==null&&(n&&k.alternate!==null&&P.delete(k.key===null?T:k.key),w=s(k,w,T),L===null?I=k:L.sibling=k,L=k);return n&&P.forEach(function(U){return e(_,U)}),Kn&&Xu(_,T),I}function x(_,w,S,M){if(typeof S=="object"&&S!==null&&S.type===Tf&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case ox:e:{for(var I=S.key,L=w;L!==null;){if(L.key===I){if(I=S.type,I===Tf){if(L.tag===7){t(_,L.sibling),w=i(L,S.props.children),w.return=_,_=w;break e}}else if(L.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===uc&&bD(I)===L.type){t(_,L.sibling),w=i(L,S.props),w.ref=ng(_,L,S),w.return=_,_=w;break e}t(_,L);break}else e(_,L);L=L.sibling}S.type===Tf?(w=Cd(S.props.children,_.mode,M,S.key),w.return=_,_=w):(M=V_(S.type,S.key,S.props,null,_.mode,M),M.ref=ng(_,w,S),M.return=_,_=M)}return o(_);case Ef:e:{for(L=S.key;w!==null;){if(w.key===L)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){t(_,w.sibling),w=i(w,S.children||[]),w.return=_,_=w;break e}else{t(_,w);break}else e(_,w);w=w.sibling}w=IE(S,_.mode,M),w.return=_,_=w}return o(_);case uc:return L=S._init,x(_,w,L(S._payload),M)}if(Sg(S))return v(_,w,S,M);if(Qm(S))return y(_,w,S,M);yx(_,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(t(_,w.sibling),w=i(w,S),w.return=_,_=w):(t(_,w),w=PE(S,_.mode,M),w.return=_,_=w),o(_)):t(_,w)}return x}var Ip=lU(!0),cU=lU(!1),Cw=fu(null),Pw=null,Nf=null,OP=null;function FP(){OP=Nf=Pw=null}function jP(n){var e=Cw.current;Bn(Cw),n._currentValue=e}function VM(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Jf(n,e){Pw=n,OP=Nf=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ls=!0),n.firstContext=null)}function go(n){var e=n._currentValue;if(OP!==n)if(n={context:n,memoizedValue:e,next:null},Nf===null){if(Pw===null)throw Error(Ue(308));Nf=n,Pw.dependencies={lanes:0,firstContext:n}}else Nf=Nf.next=n;return e}var ld=null;function VP(n){ld===null?ld=[n]:ld.push(n)}function uU(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,VP(e)):(t.next=i.next,i.next=t),e.interleaved=t,bl(n,r)}function bl(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var dc=!1;function UP(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dU(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function pl(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Lc(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,mn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,bl(n,t)}return i=r.interleaved,i===null?(e.next=e,VP(r)):(e.next=i.next,i.next=e),r.interleaved=e,bl(n,t)}function N_(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,TP(n,t)}}function SD(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Iw(n,e,t,r){var i=n.updateQueue;dc=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,y=a;switch(f=e,g=t,y.tag){case 1:if(v=y.payload,typeof v=="function"){d=v.call(g,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(g,d,f):v,f==null)break e;d=nr({},d,f);break e;case 2:dc=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=d):u=u.next=g,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);jd|=o,n.lanes=o,n.memoizedState=d}}function ED(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Ue(191,i));i.call(r)}}}var Iv={},wa=fu(Iv),Cy=fu(Iv),Py=fu(Iv);function cd(n){if(n===Iv)throw Error(Ue(174));return n}function zP(n,e){switch(Fn(Py,e),Fn(Cy,n),Fn(wa,Iv),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xM(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=xM(e,n)}Bn(wa),Fn(wa,e)}function Rp(){Bn(wa),Bn(Cy),Bn(Py)}function hU(n){cd(Py.current);var e=cd(wa.current),t=xM(e,n.type);e!==t&&(Fn(Cy,n),Fn(wa,t))}function BP(n){Cy.current===n&&(Bn(wa),Bn(Cy))}var Qn=fu(0);function Rw(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var SE=[];function HP(){for(var n=0;n<SE.length;n++)SE[n]._workInProgressVersionPrimary=null;SE.length=0}var D_=Ol.ReactCurrentDispatcher,EE=Ol.ReactCurrentBatchConfig,Fd=0,tr=null,jr=null,Kr=null,kw=!1,Gg=!1,Iy=0,SX=0;function _i(){throw Error(Ue(321))}function WP(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Go(n[t],e[t]))return!1;return!0}function GP(n,e,t,r,i,s){if(Fd=s,tr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,D_.current=n===null||n.memoizedState===null?AX:CX,n=t(r,i),Gg){s=0;do{if(Gg=!1,Iy=0,25<=s)throw Error(Ue(301));s+=1,Kr=jr=null,e.updateQueue=null,D_.current=PX,n=t(r,i)}while(Gg)}if(D_.current=Nw,e=jr!==null&&jr.next!==null,Fd=0,Kr=jr=tr=null,kw=!1,e)throw Error(Ue(300));return n}function $P(){var n=Iy!==0;return Iy=0,n}function da(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kr===null?tr.memoizedState=Kr=n:Kr=Kr.next=n,Kr}function yo(){if(jr===null){var n=tr.alternate;n=n!==null?n.memoizedState:null}else n=jr.next;var e=Kr===null?tr.memoizedState:Kr.next;if(e!==null)Kr=e,jr=n;else{if(n===null)throw Error(Ue(310));jr=n,n={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},Kr===null?tr.memoizedState=Kr=n:Kr=Kr.next=n}return Kr}function Ry(n,e){return typeof e=="function"?e(n):e}function TE(n){var e=yo(),t=e.queue;if(t===null)throw Error(Ue(311));t.lastRenderedReducer=n;var r=jr,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Fd&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,tr.lanes|=u,jd|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Go(r,e.memoizedState)||(ls=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,tr.lanes|=s,jd|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function ME(n){var e=yo(),t=e.queue;if(t===null)throw Error(Ue(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Go(s,e.memoizedState)||(ls=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function fU(){}function pU(n,e){var t=tr,r=yo(),i=e(),s=!Go(r.memoizedState,i);if(s&&(r.memoizedState=i,ls=!0),r=r.queue,qP(yU.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Kr!==null&&Kr.memoizedState.tag&1){if(t.flags|=2048,ky(9,gU.bind(null,t,r,i,e),void 0,null),Yr===null)throw Error(Ue(349));Fd&30||mU(t,e,i)}return i}function mU(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=tr.updateQueue,e===null?(e={lastEffect:null,stores:null},tr.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function gU(n,e,t,r){e.value=t,e.getSnapshot=r,vU(e)&&xU(n)}function yU(n,e,t){return t(function(){vU(e)&&xU(n)})}function vU(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Go(n,t)}catch{return!0}}function xU(n){var e=bl(n,1);e!==null&&Uo(e,n,1,-1)}function TD(n){var e=da();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ry,lastRenderedState:n},e.queue=n,n=n.dispatch=MX.bind(null,tr,n),[e.memoizedState,n]}function ky(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=tr.updateQueue,e===null?(e={lastEffect:null,stores:null},tr.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function _U(){return yo().memoizedState}function L_(n,e,t,r){var i=da();tr.flags|=n,i.memoizedState=ky(1|e,t,void 0,r===void 0?null:r)}function V1(n,e,t,r){var i=yo();r=r===void 0?null:r;var s=void 0;if(jr!==null){var o=jr.memoizedState;if(s=o.destroy,r!==null&&WP(r,o.deps)){i.memoizedState=ky(e,t,s,r);return}}tr.flags|=n,i.memoizedState=ky(1|e,t,s,r)}function MD(n,e){return L_(8390656,8,n,e)}function qP(n,e){return V1(2048,8,n,e)}function wU(n,e){return V1(4,2,n,e)}function bU(n,e){return V1(4,4,n,e)}function SU(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function EU(n,e,t){return t=t!=null?t.concat([n]):null,V1(4,4,SU.bind(null,e,n),t)}function KP(){}function TU(n,e){var t=yo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&WP(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function MU(n,e){var t=yo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&WP(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function AU(n,e,t){return Fd&21?(Go(t,e)||(t=kV(),tr.lanes|=t,jd|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ls=!0),n.memoizedState=t)}function EX(n,e){var t=Tn;Tn=t!==0&&4>t?t:4,n(!0);var r=EE.transition;EE.transition={};try{n(!1),e()}finally{Tn=t,EE.transition=r}}function CU(){return yo().memoizedState}function TX(n,e,t){var r=Fc(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},PU(n))IU(e,t);else if(t=uU(n,e,t,r),t!==null){var i=qi();Uo(t,n,r,i),RU(t,e,r)}}function MX(n,e,t){var r=Fc(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(PU(n))IU(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Go(a,o)){var l=e.interleaved;l===null?(i.next=i,VP(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=uU(n,e,i,r),t!==null&&(i=qi(),Uo(t,n,r,i),RU(t,e,r))}}function PU(n){var e=n.alternate;return n===tr||e!==null&&e===tr}function IU(n,e){Gg=kw=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function RU(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,TP(n,t)}}var Nw={readContext:go,useCallback:_i,useContext:_i,useEffect:_i,useImperativeHandle:_i,useInsertionEffect:_i,useLayoutEffect:_i,useMemo:_i,useReducer:_i,useRef:_i,useState:_i,useDebugValue:_i,useDeferredValue:_i,useTransition:_i,useMutableSource:_i,useSyncExternalStore:_i,useId:_i,unstable_isNewReconciler:!1},AX={readContext:go,useCallback:function(n,e){return da().memoizedState=[n,e===void 0?null:e],n},useContext:go,useEffect:MD,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,L_(4194308,4,SU.bind(null,e,n),t)},useLayoutEffect:function(n,e){return L_(4194308,4,n,e)},useInsertionEffect:function(n,e){return L_(4,2,n,e)},useMemo:function(n,e){var t=da();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=da();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=TX.bind(null,tr,n),[r.memoizedState,n]},useRef:function(n){var e=da();return n={current:n},e.memoizedState=n},useState:TD,useDebugValue:KP,useDeferredValue:function(n){return da().memoizedState=n},useTransition:function(){var n=TD(!1),e=n[0];return n=EX.bind(null,n[1]),da().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=tr,i=da();if(Kn){if(t===void 0)throw Error(Ue(407));t=t()}else{if(t=e(),Yr===null)throw Error(Ue(349));Fd&30||mU(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,MD(yU.bind(null,r,s,n),[n]),r.flags|=2048,ky(9,gU.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=da(),e=Yr.identifierPrefix;if(Kn){var t=ll,r=al;t=(r&~(1<<32-Vo(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Iy++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=SX++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},CX={readContext:go,useCallback:TU,useContext:go,useEffect:qP,useImperativeHandle:EU,useInsertionEffect:wU,useLayoutEffect:bU,useMemo:MU,useReducer:TE,useRef:_U,useState:function(){return TE(Ry)},useDebugValue:KP,useDeferredValue:function(n){var e=yo();return AU(e,jr.memoizedState,n)},useTransition:function(){var n=TE(Ry)[0],e=yo().memoizedState;return[n,e]},useMutableSource:fU,useSyncExternalStore:pU,useId:CU,unstable_isNewReconciler:!1},PX={readContext:go,useCallback:TU,useContext:go,useEffect:qP,useImperativeHandle:EU,useInsertionEffect:wU,useLayoutEffect:bU,useMemo:MU,useReducer:ME,useRef:_U,useState:function(){return ME(Ry)},useDebugValue:KP,useDeferredValue:function(n){var e=yo();return jr===null?e.memoizedState=n:AU(e,jr.memoizedState,n)},useTransition:function(){var n=ME(Ry)[0],e=yo().memoizedState;return[n,e]},useMutableSource:fU,useSyncExternalStore:pU,useId:CU,unstable_isNewReconciler:!1};function Co(n,e){if(n&&n.defaultProps){e=nr({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function UM(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:nr({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var U1={isMounted:function(n){return(n=n._reactInternals)?ih(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=qi(),i=Fc(n),s=pl(r,i);s.payload=e,t!=null&&(s.callback=t),e=Lc(n,s,i),e!==null&&(Uo(e,n,i,r),N_(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=qi(),i=Fc(n),s=pl(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Lc(n,s,i),e!==null&&(Uo(e,n,i,r),N_(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=qi(),r=Fc(n),i=pl(t,r);i.tag=2,e!=null&&(i.callback=e),e=Lc(n,i,r),e!==null&&(Uo(e,n,r,t),N_(e,n,r))}};function AD(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ey(t,r)||!Ey(i,s):!0}function kU(n,e,t){var r=!1,i=Kc,s=e.contextType;return typeof s=="object"&&s!==null?s=go(s):(i=us(e)?Ld:Li.current,r=e.contextTypes,s=(r=r!=null)?Cp(n,i):Kc),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=U1,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function CD(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&U1.enqueueReplaceState(e,e.state,null)}function zM(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},UP(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=go(s):(s=us(e)?Ld:Li.current,i.context=Cp(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(UM(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&U1.enqueueReplaceState(i,i.state,null),Iw(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function kp(n,e){try{var t="",r=e;do t+=rY(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function AE(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function BM(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var IX=typeof WeakMap=="function"?WeakMap:Map;function NU(n,e,t){t=pl(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Lw||(Lw=!0,JM=r),BM(n,e)},t}function DU(n,e,t){t=pl(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){BM(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){BM(n,e),typeof r!="function"&&(Oc===null?Oc=new Set([this]):Oc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function PD(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new IX;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=WX.bind(null,n,e,t),e.then(n,n))}function ID(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function RD(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=pl(-1,1),e.tag=2,Lc(t,e,1))),t.lanes|=1),n)}var RX=Ol.ReactCurrentOwner,ls=!1;function Gi(n,e,t,r){e.child=n===null?cU(e,null,t,r):Ip(e,n.child,t,r)}function kD(n,e,t,r,i){t=t.render;var s=e.ref;return Jf(e,i),r=GP(n,e,t,r,s,i),t=$P(),n!==null&&!ls?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Sl(n,e,i)):(Kn&&t&&NP(e),e.flags|=1,Gi(n,e,r,i),e.child)}function ND(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!n2(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,LU(n,e,s,r,i)):(n=V_(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Ey,t(o,r)&&n.ref===e.ref)return Sl(n,e,i)}return e.flags|=1,n=jc(s,r),n.ref=e.ref,n.return=e,e.child=n}function LU(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Ey(s,r)&&n.ref===e.ref)if(ls=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(ls=!0);else return e.lanes=n.lanes,Sl(n,e,i)}return HM(n,e,t,r,i)}function OU(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fn(Lf,As),As|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Fn(Lf,As),As|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Fn(Lf,As),As|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Fn(Lf,As),As|=r;return Gi(n,e,i,t),e.child}function FU(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function HM(n,e,t,r,i){var s=us(t)?Ld:Li.current;return s=Cp(e,s),Jf(e,i),t=GP(n,e,t,r,s,i),r=$P(),n!==null&&!ls?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Sl(n,e,i)):(Kn&&r&&NP(e),e.flags|=1,Gi(n,e,t,i),e.child)}function DD(n,e,t,r,i){if(us(t)){var s=!0;Tw(e)}else s=!1;if(Jf(e,i),e.stateNode===null)O_(n,e),kU(e,t,r),zM(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=go(c):(c=us(t)?Ld:Li.current,c=Cp(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&CD(e,o,r,c),dc=!1;var f=e.memoizedState;o.state=f,Iw(e,r,o,i),l=e.memoizedState,a!==r||f!==l||cs.current||dc?(typeof u=="function"&&(UM(e,t,u,r),l=e.memoizedState),(a=dc||AD(e,t,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,dU(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Co(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=go(l):(l=us(t)?Ld:Li.current,l=Cp(e,l));var g=t.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&CD(e,o,r,l),dc=!1,f=e.memoizedState,o.state=f,Iw(e,r,o,i);var v=e.memoizedState;a!==d||f!==v||cs.current||dc?(typeof g=="function"&&(UM(e,t,g,r),v=e.memoizedState),(c=dc||AD(e,t,c,r,f,v,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),r=!1)}return WM(n,e,t,r,s,i)}function WM(n,e,t,r,i,s){FU(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&xD(e,t,!1),Sl(n,e,s);r=e.stateNode,RX.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Ip(e,n.child,null,s),e.child=Ip(e,null,a,s)):Gi(n,e,a,s),e.memoizedState=r.state,i&&xD(e,t,!0),e.child}function jU(n){var e=n.stateNode;e.pendingContext?vD(n,e.pendingContext,e.pendingContext!==e.context):e.context&&vD(n,e.context,!1),zP(n,e.containerInfo)}function LD(n,e,t,r,i){return Pp(),LP(i),e.flags|=256,Gi(n,e,t,r),e.child}var GM={dehydrated:null,treeContext:null,retryLane:0};function $M(n){return{baseLanes:n,cachePool:null,transitions:null}}function VU(n,e,t){var r=e.pendingProps,i=Qn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Fn(Qn,i&1),n===null)return jM(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=H1(o,r,0,null),n=Cd(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=$M(t),e.memoizedState=GM,n):YP(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return kX(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=jc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=jc(a,s):(s=Cd(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?$M(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=GM,r}return s=n.child,n=s.sibling,r=jc(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function YP(n,e){return e=H1({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function vx(n,e,t,r){return r!==null&&LP(r),Ip(e,n.child,null,t),n=YP(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function kX(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=AE(Error(Ue(422))),vx(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=H1({mode:"visible",children:r.children},i,0,null),s=Cd(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ip(e,n.child,null,o),e.child.memoizedState=$M(o),e.memoizedState=GM,s);if(!(e.mode&1))return vx(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ue(419)),r=AE(s,r,void 0),vx(n,e,o,r)}if(a=(o&n.childLanes)!==0,ls||a){if(r=Yr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,bl(n,i),Uo(r,n,i,-1))}return t2(),r=AE(Error(Ue(421))),vx(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=GX.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Ps=Dc(i.nextSibling),Rs=e,Kn=!0,No=null,n!==null&&(lo[co++]=al,lo[co++]=ll,lo[co++]=Od,al=n.id,ll=n.overflow,Od=e),e=YP(e,r.children),e.flags|=4096,e)}function OD(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),VM(n.return,e,t)}function CE(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function UU(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Gi(n,e,r.children,t),r=Qn.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&OD(n,t,e);else if(n.tag===19)OD(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Fn(Qn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Rw(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),CE(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Rw(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}CE(e,!0,t,null,s);break;case"together":CE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function O_(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Sl(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),jd|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ue(153));if(e.child!==null){for(n=e.child,t=jc(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=jc(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function NX(n,e,t){switch(e.tag){case 3:jU(e),Pp();break;case 5:hU(e);break;case 1:us(e.type)&&Tw(e);break;case 4:zP(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Fn(Cw,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Fn(Qn,Qn.current&1),e.flags|=128,null):t&e.child.childLanes?VU(n,e,t):(Fn(Qn,Qn.current&1),n=Sl(n,e,t),n!==null?n.sibling:null);Fn(Qn,Qn.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return UU(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Fn(Qn,Qn.current),r)break;return null;case 22:case 23:return e.lanes=0,OU(n,e,t)}return Sl(n,e,t)}var zU,qM,BU,HU;zU=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};qM=function(){};BU=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,cd(wa.current);var s=null;switch(t){case"input":i=mM(n,i),r=mM(n,r),s=[];break;case"select":i=nr({},i,{value:void 0}),r=nr({},r,{value:void 0}),s=[];break;case"textarea":i=vM(n,i),r=vM(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Sw)}_M(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(yy.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(yy.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Vn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};HU=function(n,e,t,r){t!==r&&(e.flags|=4)};function rg(n,e){if(!Kn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function wi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function DX(n,e,t){var r=e.pendingProps;switch(DP(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wi(e),null;case 1:return us(e.type)&&Ew(),wi(e),null;case 3:return r=e.stateNode,Rp(),Bn(cs),Bn(Li),HP(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(gx(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,No!==null&&(tA(No),No=null))),qM(n,e),wi(e),null;case 5:BP(e);var i=cd(Py.current);if(t=e.type,n!==null&&e.stateNode!=null)BU(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ue(166));return wi(e),null}if(n=cd(wa.current),gx(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[ga]=e,r[Ay]=s,n=(e.mode&1)!==0,t){case"dialog":Vn("cancel",r),Vn("close",r);break;case"iframe":case"object":case"embed":Vn("load",r);break;case"video":case"audio":for(i=0;i<Tg.length;i++)Vn(Tg[i],r);break;case"source":Vn("error",r);break;case"img":case"image":case"link":Vn("error",r),Vn("load",r);break;case"details":Vn("toggle",r);break;case"input":GN(r,s),Vn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Vn("invalid",r);break;case"textarea":qN(r,s),Vn("invalid",r)}_M(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&mx(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&mx(r.textContent,a,n),i=["children",""+a]):yy.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Vn("scroll",r)}switch(t){case"input":ax(r),$N(r,s,!0);break;case"textarea":ax(r),KN(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Sw)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=yV(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[ga]=e,n[Ay]=r,zU(n,e,!1,!1),e.stateNode=n;e:{switch(o=wM(t,r),t){case"dialog":Vn("cancel",n),Vn("close",n),i=r;break;case"iframe":case"object":case"embed":Vn("load",n),i=r;break;case"video":case"audio":for(i=0;i<Tg.length;i++)Vn(Tg[i],n);i=r;break;case"source":Vn("error",n),i=r;break;case"img":case"image":case"link":Vn("error",n),Vn("load",n),i=r;break;case"details":Vn("toggle",n),i=r;break;case"input":GN(n,r),i=mM(n,r),Vn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=nr({},r,{value:void 0}),Vn("invalid",n);break;case"textarea":qN(n,r),i=vM(n,r),Vn("invalid",n);break;default:i=r}_M(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?_V(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vV(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&vy(n,l):typeof l=="number"&&vy(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(yy.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Vn("scroll",n):l!=null&&xP(n,s,l,o))}switch(t){case"input":ax(n),$N(n,r,!1);break;case"textarea":ax(n),KN(n);break;case"option":r.value!=null&&n.setAttribute("value",""+qc(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Kf(n,!!r.multiple,s,!1):r.defaultValue!=null&&Kf(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Sw)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wi(e),null;case 6:if(n&&e.stateNode!=null)HU(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ue(166));if(t=cd(Py.current),cd(wa.current),gx(e)){if(r=e.stateNode,t=e.memoizedProps,r[ga]=e,(s=r.nodeValue!==t)&&(n=Rs,n!==null))switch(n.tag){case 3:mx(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&mx(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[ga]=e,e.stateNode=r}return wi(e),null;case 13:if(Bn(Qn),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Kn&&Ps!==null&&e.mode&1&&!(e.flags&128))aU(),Pp(),e.flags|=98560,s=!1;else if(s=gx(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Ue(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ue(317));s[ga]=e}else Pp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wi(e),s=!1}else No!==null&&(tA(No),No=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Qn.current&1?Vr===0&&(Vr=3):t2())),e.updateQueue!==null&&(e.flags|=4),wi(e),null);case 4:return Rp(),qM(n,e),n===null&&Ty(e.stateNode.containerInfo),wi(e),null;case 10:return jP(e.type._context),wi(e),null;case 17:return us(e.type)&&Ew(),wi(e),null;case 19:if(Bn(Qn),s=e.memoizedState,s===null)return wi(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)rg(s,!1);else{if(Vr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Rw(n),o!==null){for(e.flags|=128,rg(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Fn(Qn,Qn.current&1|2),e.child}n=n.sibling}s.tail!==null&&_r()>Np&&(e.flags|=128,r=!0,rg(s,!1),e.lanes=4194304)}else{if(!r)if(n=Rw(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),rg(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Kn)return wi(e),null}else 2*_r()-s.renderingStartTime>Np&&t!==1073741824&&(e.flags|=128,r=!0,rg(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=_r(),e.sibling=null,t=Qn.current,Fn(Qn,r?t&1|2:t&1),e):(wi(e),null);case 22:case 23:return e2(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?As&1073741824&&(wi(e),e.subtreeFlags&6&&(e.flags|=8192)):wi(e),null;case 24:return null;case 25:return null}throw Error(Ue(156,e.tag))}function LX(n,e){switch(DP(e),e.tag){case 1:return us(e.type)&&Ew(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Rp(),Bn(cs),Bn(Li),HP(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return BP(e),null;case 13:if(Bn(Qn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ue(340));Pp()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Bn(Qn),null;case 4:return Rp(),null;case 10:return jP(e.type._context),null;case 22:case 23:return e2(),null;case 24:return null;default:return null}}var xx=!1,Pi=!1,OX=typeof WeakSet=="function"?WeakSet:Set,it=null;function Df(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){dr(n,e,r)}else t.current=null}function KM(n,e,t){try{t()}catch(r){dr(n,e,r)}}var FD=!1;function FX(n,e){if(RM=_w,n=KV(),kP(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=n,f=null;t:for(;;){for(var g;d!==t||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===n)break t;if(f===t&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(kM={focusedElem:n,selectionRange:t},_w=!1,it=e;it!==null;)if(e=it,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,it=n;else for(;it!==null;){e=it;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,x=v.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?y:Co(e.type,y),x);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ue(163))}}catch(M){dr(e,e.return,M)}if(n=e.sibling,n!==null){n.return=e.return,it=n;break}it=e.return}return v=FD,FD=!1,v}function $g(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&KM(e,t,s)}i=i.next}while(i!==r)}}function z1(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function YM(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function WU(n){var e=n.alternate;e!==null&&(n.alternate=null,WU(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ga],delete e[Ay],delete e[LM],delete e[xX],delete e[_X])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function GU(n){return n.tag===5||n.tag===3||n.tag===4}function jD(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||GU(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function XM(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Sw));else if(r!==4&&(n=n.child,n!==null))for(XM(n,e,t),n=n.sibling;n!==null;)XM(n,e,t),n=n.sibling}function QM(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(QM(n,e,t),n=n.sibling;n!==null;)QM(n,e,t),n=n.sibling}var Jr=null,Ro=!1;function Xl(n,e,t){for(t=t.child;t!==null;)$U(n,e,t),t=t.sibling}function $U(n,e,t){if(_a&&typeof _a.onCommitFiberUnmount=="function")try{_a.onCommitFiberUnmount(N1,t)}catch{}switch(t.tag){case 5:Pi||Df(t,e);case 6:var r=Jr,i=Ro;Jr=null,Xl(n,e,t),Jr=r,Ro=i,Jr!==null&&(Ro?(n=Jr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Jr.removeChild(t.stateNode));break;case 18:Jr!==null&&(Ro?(n=Jr,t=t.stateNode,n.nodeType===8?wE(n.parentNode,t):n.nodeType===1&&wE(n,t),by(n)):wE(Jr,t.stateNode));break;case 4:r=Jr,i=Ro,Jr=t.stateNode.containerInfo,Ro=!0,Xl(n,e,t),Jr=r,Ro=i;break;case 0:case 11:case 14:case 15:if(!Pi&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&KM(t,e,o),i=i.next}while(i!==r)}Xl(n,e,t);break;case 1:if(!Pi&&(Df(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){dr(t,e,a)}Xl(n,e,t);break;case 21:Xl(n,e,t);break;case 22:t.mode&1?(Pi=(r=Pi)||t.memoizedState!==null,Xl(n,e,t),Pi=r):Xl(n,e,t);break;default:Xl(n,e,t)}}function VD(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new OX),e.forEach(function(r){var i=$X.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function bo(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Jr=a.stateNode,Ro=!1;break e;case 3:Jr=a.stateNode.containerInfo,Ro=!0;break e;case 4:Jr=a.stateNode.containerInfo,Ro=!0;break e}a=a.return}if(Jr===null)throw Error(Ue(160));$U(s,o,i),Jr=null,Ro=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){dr(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qU(e,n),e=e.sibling}function qU(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(bo(e,n),ca(n),r&4){try{$g(3,n,n.return),z1(3,n)}catch(y){dr(n,n.return,y)}try{$g(5,n,n.return)}catch(y){dr(n,n.return,y)}}break;case 1:bo(e,n),ca(n),r&512&&t!==null&&Df(t,t.return);break;case 5:if(bo(e,n),ca(n),r&512&&t!==null&&Df(t,t.return),n.flags&32){var i=n.stateNode;try{vy(i,"")}catch(y){dr(n,n.return,y)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&mV(i,s),wM(a,o);var c=wM(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?_V(i,d):u==="dangerouslySetInnerHTML"?vV(i,d):u==="children"?vy(i,d):xP(i,u,d,c)}switch(a){case"input":gM(i,s);break;case"textarea":gV(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Kf(i,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?Kf(i,!!s.multiple,s.defaultValue,!0):Kf(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ay]=s}catch(y){dr(n,n.return,y)}}break;case 6:if(bo(e,n),ca(n),r&4){if(n.stateNode===null)throw Error(Ue(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(y){dr(n,n.return,y)}}break;case 3:if(bo(e,n),ca(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{by(e.containerInfo)}catch(y){dr(n,n.return,y)}break;case 4:bo(e,n),ca(n);break;case 13:bo(e,n),ca(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(JP=_r())),r&4&&VD(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Pi=(c=Pi)||u,bo(e,n),Pi=c):bo(e,n),ca(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(it=n,u=n.child;u!==null;){for(d=it=u;it!==null;){switch(f=it,g=f.child,f.tag){case 0:case 11:case 14:case 15:$g(4,f,f.return);break;case 1:Df(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,t=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){dr(r,t,y)}}break;case 5:Df(f,f.return);break;case 22:if(f.memoizedState!==null){zD(d);continue}}g!==null?(g.return=f,it=g):zD(d)}u=u.sibling}e:for(u=null,d=n;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=xV("display",o))}catch(y){dr(n,n.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){dr(n,n.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:bo(e,n),ca(n),r&4&&VD(n);break;case 21:break;default:bo(e,n),ca(n)}}function ca(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(GU(t)){var r=t;break e}t=t.return}throw Error(Ue(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(vy(i,""),r.flags&=-33);var s=jD(n);QM(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=jD(n);XM(n,a,o);break;default:throw Error(Ue(161))}}catch(l){dr(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function jX(n,e,t){it=n,KU(n)}function KU(n,e,t){for(var r=(n.mode&1)!==0;it!==null;){var i=it,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||xx;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Pi;a=xx;var c=Pi;if(xx=o,(Pi=l)&&!c)for(it=i;it!==null;)o=it,l=o.child,o.tag===22&&o.memoizedState!==null?BD(i):l!==null?(l.return=o,it=l):BD(i);for(;s!==null;)it=s,KU(s),s=s.sibling;it=i,xx=a,Pi=c}UD(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,it=s):UD(n)}}function UD(n){for(;it!==null;){var e=it;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pi||z1(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pi)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Co(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ED(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}ED(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&by(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ue(163))}Pi||e.flags&512&&YM(e)}catch(f){dr(e,e.return,f)}}if(e===n){it=null;break}if(t=e.sibling,t!==null){t.return=e.return,it=t;break}it=e.return}}function zD(n){for(;it!==null;){var e=it;if(e===n){it=null;break}var t=e.sibling;if(t!==null){t.return=e.return,it=t;break}it=e.return}}function BD(n){for(;it!==null;){var e=it;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{z1(4,e)}catch(l){dr(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){dr(e,i,l)}}var s=e.return;try{YM(e)}catch(l){dr(e,s,l)}break;case 5:var o=e.return;try{YM(e)}catch(l){dr(e,o,l)}}}catch(l){dr(e,e.return,l)}if(e===n){it=null;break}var a=e.sibling;if(a!==null){a.return=e.return,it=a;break}it=e.return}}var VX=Math.ceil,Dw=Ol.ReactCurrentDispatcher,XP=Ol.ReactCurrentOwner,po=Ol.ReactCurrentBatchConfig,mn=0,Yr=null,kr=null,oi=0,As=0,Lf=fu(0),Vr=0,Ny=null,jd=0,B1=0,QP=0,qg=null,os=null,JP=0,Np=1/0,tl=null,Lw=!1,JM=null,Oc=null,_x=!1,Ac=null,Ow=0,Kg=0,ZM=null,F_=-1,j_=0;function qi(){return mn&6?_r():F_!==-1?F_:F_=_r()}function Fc(n){return n.mode&1?mn&2&&oi!==0?oi&-oi:bX.transition!==null?(j_===0&&(j_=kV()),j_):(n=Tn,n!==0||(n=window.event,n=n===void 0?16:VV(n.type)),n):1}function Uo(n,e,t,r){if(50<Kg)throw Kg=0,ZM=null,Error(Ue(185));Av(n,t,r),(!(mn&2)||n!==Yr)&&(n===Yr&&(!(mn&2)&&(B1|=t),Vr===4&&fc(n,oi)),ds(n,r),t===1&&mn===0&&!(e.mode&1)&&(Np=_r()+500,j1&&pu()))}function ds(n,e){var t=n.callbackNode;bY(n,e);var r=xw(n,n===Yr?oi:0);if(r===0)t!==null&&QN(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&QN(t),e===1)n.tag===0?wX(HD.bind(null,n)):iU(HD.bind(null,n)),yX(function(){!(mn&6)&&pu()}),t=null;else{switch(NV(r)){case 1:t=EP;break;case 4:t=IV;break;case 16:t=vw;break;case 536870912:t=RV;break;default:t=vw}t=n5(t,YU.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function YU(n,e){if(F_=-1,j_=0,mn&6)throw Error(Ue(327));var t=n.callbackNode;if(Zf()&&n.callbackNode!==t)return null;var r=xw(n,n===Yr?oi:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Fw(n,r);else{e=r;var i=mn;mn|=2;var s=QU();(Yr!==n||oi!==e)&&(tl=null,Np=_r()+500,Ad(n,e));do try{BX();break}catch(a){XU(n,a)}while(!0);FP(),Dw.current=s,mn=i,kr!==null?e=0:(Yr=null,oi=0,e=Vr)}if(e!==0){if(e===2&&(i=MM(n),i!==0&&(r=i,e=eA(n,i))),e===1)throw t=Ny,Ad(n,0),fc(n,r),ds(n,_r()),t;if(e===6)fc(n,r);else{if(i=n.current.alternate,!(r&30)&&!UX(i)&&(e=Fw(n,r),e===2&&(s=MM(n),s!==0&&(r=s,e=eA(n,s))),e===1))throw t=Ny,Ad(n,0),fc(n,r),ds(n,_r()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Ue(345));case 2:Qu(n,os,tl);break;case 3:if(fc(n,r),(r&130023424)===r&&(e=JP+500-_r(),10<e)){if(xw(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){qi(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=DM(Qu.bind(null,n,os,tl),e);break}Qu(n,os,tl);break;case 4:if(fc(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Vo(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=_r()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*VX(r/1960))-r,10<r){n.timeoutHandle=DM(Qu.bind(null,n,os,tl),r);break}Qu(n,os,tl);break;case 5:Qu(n,os,tl);break;default:throw Error(Ue(329))}}}return ds(n,_r()),n.callbackNode===t?YU.bind(null,n):null}function eA(n,e){var t=qg;return n.current.memoizedState.isDehydrated&&(Ad(n,e).flags|=256),n=Fw(n,e),n!==2&&(e=os,os=t,e!==null&&tA(e)),n}function tA(n){os===null?os=n:os.push.apply(os,n)}function UX(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Go(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fc(n,e){for(e&=~QP,e&=~B1,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Vo(e),r=1<<t;n[t]=-1,e&=~r}}function HD(n){if(mn&6)throw Error(Ue(327));Zf();var e=xw(n,0);if(!(e&1))return ds(n,_r()),null;var t=Fw(n,e);if(n.tag!==0&&t===2){var r=MM(n);r!==0&&(e=r,t=eA(n,r))}if(t===1)throw t=Ny,Ad(n,0),fc(n,e),ds(n,_r()),t;if(t===6)throw Error(Ue(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Qu(n,os,tl),ds(n,_r()),null}function ZP(n,e){var t=mn;mn|=1;try{return n(e)}finally{mn=t,mn===0&&(Np=_r()+500,j1&&pu())}}function Vd(n){Ac!==null&&Ac.tag===0&&!(mn&6)&&Zf();var e=mn;mn|=1;var t=po.transition,r=Tn;try{if(po.transition=null,Tn=1,n)return n()}finally{Tn=r,po.transition=t,mn=e,!(mn&6)&&pu()}}function e2(){As=Lf.current,Bn(Lf)}function Ad(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,gX(t)),kr!==null)for(t=kr.return;t!==null;){var r=t;switch(DP(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ew();break;case 3:Rp(),Bn(cs),Bn(Li),HP();break;case 5:BP(r);break;case 4:Rp();break;case 13:Bn(Qn);break;case 19:Bn(Qn);break;case 10:jP(r.type._context);break;case 22:case 23:e2()}t=t.return}if(Yr=n,kr=n=jc(n.current,null),oi=As=e,Vr=0,Ny=null,QP=B1=jd=0,os=qg=null,ld!==null){for(e=0;e<ld.length;e++)if(t=ld[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}ld=null}return n}function XU(n,e){do{var t=kr;try{if(FP(),D_.current=Nw,kw){for(var r=tr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}kw=!1}if(Fd=0,Kr=jr=tr=null,Gg=!1,Iy=0,XP.current=null,t===null||t.return===null){Vr=1,Ny=e,kr=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=oi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=ID(o);if(g!==null){g.flags&=-257,RD(g,o,a,s,e),g.mode&1&&PD(s,c,e),e=g,l=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){PD(s,c,e),t2();break e}l=Error(Ue(426))}}else if(Kn&&a.mode&1){var x=ID(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),RD(x,o,a,s,e),LP(kp(l,a));break e}}s=l=kp(l,a),Vr!==4&&(Vr=2),qg===null?qg=[s]:qg.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=NU(s,l,e);SD(s,_);break e;case 1:a=l;var w=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Oc===null||!Oc.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=DU(s,a,e);SD(s,M);break e}}s=s.return}while(s!==null)}ZU(t)}catch(I){e=I,kr===t&&t!==null&&(kr=t=t.return);continue}break}while(!0)}function QU(){var n=Dw.current;return Dw.current=Nw,n===null?Nw:n}function t2(){(Vr===0||Vr===3||Vr===2)&&(Vr=4),Yr===null||!(jd&268435455)&&!(B1&268435455)||fc(Yr,oi)}function Fw(n,e){var t=mn;mn|=2;var r=QU();(Yr!==n||oi!==e)&&(tl=null,Ad(n,e));do try{zX();break}catch(i){XU(n,i)}while(!0);if(FP(),mn=t,Dw.current=r,kr!==null)throw Error(Ue(261));return Yr=null,oi=0,Vr}function zX(){for(;kr!==null;)JU(kr)}function BX(){for(;kr!==null&&!fY();)JU(kr)}function JU(n){var e=t5(n.alternate,n,As);n.memoizedProps=n.pendingProps,e===null?ZU(n):kr=e,XP.current=null}function ZU(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=LX(t,e),t!==null){t.flags&=32767,kr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Vr=6,kr=null;return}}else if(t=DX(t,e,As),t!==null){kr=t;return}if(e=e.sibling,e!==null){kr=e;return}kr=e=n}while(e!==null);Vr===0&&(Vr=5)}function Qu(n,e,t){var r=Tn,i=po.transition;try{po.transition=null,Tn=1,HX(n,e,t,r)}finally{po.transition=i,Tn=r}return null}function HX(n,e,t,r){do Zf();while(Ac!==null);if(mn&6)throw Error(Ue(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ue(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(SY(n,s),n===Yr&&(kr=Yr=null,oi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||_x||(_x=!0,n5(vw,function(){return Zf(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=po.transition,po.transition=null;var o=Tn;Tn=1;var a=mn;mn|=4,XP.current=null,FX(n,t),qU(t,n),cX(kM),_w=!!RM,kM=RM=null,n.current=t,jX(t),pY(),mn=a,Tn=o,po.transition=s}else n.current=t;if(_x&&(_x=!1,Ac=n,Ow=i),s=n.pendingLanes,s===0&&(Oc=null),yY(t.stateNode),ds(n,_r()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Lw)throw Lw=!1,n=JM,JM=null,n;return Ow&1&&n.tag!==0&&Zf(),s=n.pendingLanes,s&1?n===ZM?Kg++:(Kg=0,ZM=n):Kg=0,pu(),null}function Zf(){if(Ac!==null){var n=NV(Ow),e=po.transition,t=Tn;try{if(po.transition=null,Tn=16>n?16:n,Ac===null)var r=!1;else{if(n=Ac,Ac=null,Ow=0,mn&6)throw Error(Ue(331));var i=mn;for(mn|=4,it=n.current;it!==null;){var s=it,o=s.child;if(it.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(it=c;it!==null;){var u=it;switch(u.tag){case 0:case 11:case 15:$g(8,u,s)}var d=u.child;if(d!==null)d.return=u,it=d;else for(;it!==null;){u=it;var f=u.sibling,g=u.return;if(WU(u),u===c){it=null;break}if(f!==null){f.return=g,it=f;break}it=g}}}var v=s.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}it=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,it=o;else e:for(;it!==null;){if(s=it,s.flags&2048)switch(s.tag){case 0:case 11:case 15:$g(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,it=_;break e}it=s.return}}var w=n.current;for(it=w;it!==null;){o=it;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,it=S;else e:for(o=w;it!==null;){if(a=it,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:z1(9,a)}}catch(I){dr(a,a.return,I)}if(a===o){it=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,it=M;break e}it=a.return}}if(mn=i,pu(),_a&&typeof _a.onPostCommitFiberRoot=="function")try{_a.onPostCommitFiberRoot(N1,n)}catch{}r=!0}return r}finally{Tn=t,po.transition=e}}return!1}function WD(n,e,t){e=kp(t,e),e=NU(n,e,1),n=Lc(n,e,1),e=qi(),n!==null&&(Av(n,1,e),ds(n,e))}function dr(n,e,t){if(n.tag===3)WD(n,n,t);else for(;e!==null;){if(e.tag===3){WD(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Oc===null||!Oc.has(r))){n=kp(t,n),n=DU(e,n,1),e=Lc(e,n,1),n=qi(),e!==null&&(Av(e,1,n),ds(e,n));break}}e=e.return}}function WX(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=qi(),n.pingedLanes|=n.suspendedLanes&t,Yr===n&&(oi&t)===t&&(Vr===4||Vr===3&&(oi&130023424)===oi&&500>_r()-JP?Ad(n,0):QP|=t),ds(n,e)}function e5(n,e){e===0&&(n.mode&1?(e=ux,ux<<=1,!(ux&130023424)&&(ux=4194304)):e=1);var t=qi();n=bl(n,e),n!==null&&(Av(n,e,t),ds(n,t))}function GX(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),e5(n,t)}function $X(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Ue(314))}r!==null&&r.delete(e),e5(n,t)}var t5;t5=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||cs.current)ls=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ls=!1,NX(n,e,t);ls=!!(n.flags&131072)}else ls=!1,Kn&&e.flags&1048576&&sU(e,Aw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;O_(n,e),n=e.pendingProps;var i=Cp(e,Li.current);Jf(e,t),i=GP(null,e,r,n,i,t);var s=$P();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,us(r)?(s=!0,Tw(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,UP(e),i.updater=U1,e.stateNode=i,i._reactInternals=e,zM(e,r,n,t),e=WM(null,e,r,!0,s,t)):(e.tag=0,Kn&&s&&NP(e),Gi(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(O_(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=KX(r),n=Co(r,n),i){case 0:e=HM(null,e,r,n,t);break e;case 1:e=DD(null,e,r,n,t);break e;case 11:e=kD(null,e,r,n,t);break e;case 14:e=ND(null,e,r,Co(r.type,n),t);break e}throw Error(Ue(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Co(r,i),HM(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Co(r,i),DD(n,e,r,i,t);case 3:e:{if(jU(e),n===null)throw Error(Ue(387));r=e.pendingProps,s=e.memoizedState,i=s.element,dU(n,e),Iw(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=kp(Error(Ue(423)),e),e=LD(n,e,r,t,i);break e}else if(r!==i){i=kp(Error(Ue(424)),e),e=LD(n,e,r,t,i);break e}else for(Ps=Dc(e.stateNode.containerInfo.firstChild),Rs=e,Kn=!0,No=null,t=cU(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Pp(),r===i){e=Sl(n,e,t);break e}Gi(n,e,r,t)}e=e.child}return e;case 5:return hU(e),n===null&&jM(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,NM(r,i)?o=null:s!==null&&NM(r,s)&&(e.flags|=32),FU(n,e),Gi(n,e,o,t),e.child;case 6:return n===null&&jM(e),null;case 13:return VU(n,e,t);case 4:return zP(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Ip(e,null,r,t):Gi(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Co(r,i),kD(n,e,r,i,t);case 7:return Gi(n,e,e.pendingProps,t),e.child;case 8:return Gi(n,e,e.pendingProps.children,t),e.child;case 12:return Gi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Fn(Cw,r._currentValue),r._currentValue=o,s!==null)if(Go(s.value,o)){if(s.children===i.children&&!cs.current){e=Sl(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=pl(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),VM(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ue(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),VM(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Gi(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Jf(e,t),i=go(i),r=r(i),e.flags|=1,Gi(n,e,r,t),e.child;case 14:return r=e.type,i=Co(r,e.pendingProps),i=Co(r.type,i),ND(n,e,r,i,t);case 15:return LU(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Co(r,i),O_(n,e),e.tag=1,us(r)?(n=!0,Tw(e)):n=!1,Jf(e,t),kU(e,r,i),zM(e,r,i,t),WM(null,e,r,!0,n,t);case 19:return UU(n,e,t);case 22:return OU(n,e,t)}throw Error(Ue(156,e.tag))};function n5(n,e){return PV(n,e)}function qX(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fo(n,e,t,r){return new qX(n,e,t,r)}function n2(n){return n=n.prototype,!(!n||!n.isReactComponent)}function KX(n){if(typeof n=="function")return n2(n)?1:0;if(n!=null){if(n=n.$$typeof,n===wP)return 11;if(n===bP)return 14}return 2}function jc(n,e){var t=n.alternate;return t===null?(t=fo(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function V_(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")n2(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Tf:return Cd(t.children,i,s,e);case _P:o=8,i|=8;break;case dM:return n=fo(12,t,e,i|2),n.elementType=dM,n.lanes=s,n;case hM:return n=fo(13,t,e,i),n.elementType=hM,n.lanes=s,n;case fM:return n=fo(19,t,e,i),n.elementType=fM,n.lanes=s,n;case hV:return H1(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case uV:o=10;break e;case dV:o=9;break e;case wP:o=11;break e;case bP:o=14;break e;case uc:o=16,r=null;break e}throw Error(Ue(130,n==null?n:typeof n,""))}return e=fo(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Cd(n,e,t,r){return n=fo(7,n,r,e),n.lanes=t,n}function H1(n,e,t,r){return n=fo(22,n,r,e),n.elementType=hV,n.lanes=t,n.stateNode={isHidden:!1},n}function PE(n,e,t){return n=fo(6,n,null,e),n.lanes=t,n}function IE(n,e,t){return e=fo(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function YX(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uE(0),this.expirationTimes=uE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uE(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function r2(n,e,t,r,i,s,o,a,l){return n=new YX(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=fo(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},UP(s),n}function XX(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ef,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function r5(n){if(!n)return Kc;n=n._reactInternals;e:{if(ih(n)!==n||n.tag!==1)throw Error(Ue(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(us(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ue(171))}if(n.tag===1){var t=n.type;if(us(t))return rU(n,t,e)}return e}function i5(n,e,t,r,i,s,o,a,l){return n=r2(t,r,!0,n,i,s,o,a,l),n.context=r5(null),t=n.current,r=qi(),i=Fc(t),s=pl(r,i),s.callback=e??null,Lc(t,s,i),n.current.lanes=i,Av(n,i,r),ds(n,r),n}function W1(n,e,t,r){var i=e.current,s=qi(),o=Fc(i);return t=r5(t),e.context===null?e.context=t:e.pendingContext=t,e=pl(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Lc(i,e,o),n!==null&&(Uo(n,i,o,s),N_(n,i,o)),o}function jw(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function GD(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function i2(n,e){GD(n,e),(n=n.alternate)&&GD(n,e)}function QX(){return null}var s5=typeof reportError=="function"?reportError:function(n){console.error(n)};function s2(n){this._internalRoot=n}G1.prototype.render=s2.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ue(409));W1(n,e,null,null)};G1.prototype.unmount=s2.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Vd(function(){W1(null,n,null,null)}),e[wl]=null}};function G1(n){this._internalRoot=n}G1.prototype.unstable_scheduleHydration=function(n){if(n){var e=OV();n={blockedOn:null,target:n,priority:e};for(var t=0;t<hc.length&&e!==0&&e<hc[t].priority;t++);hc.splice(t,0,n),t===0&&jV(n)}};function o2(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function $1(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function $D(){}function JX(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=jw(o);s.call(c)}}var o=i5(e,r,n,0,null,!1,!1,"",$D);return n._reactRootContainer=o,n[wl]=o.current,Ty(n.nodeType===8?n.parentNode:n),Vd(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=jw(l);a.call(c)}}var l=r2(n,0,!1,null,null,!1,!1,"",$D);return n._reactRootContainer=l,n[wl]=l.current,Ty(n.nodeType===8?n.parentNode:n),Vd(function(){W1(e,l,t,r)}),l}function q1(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=jw(o);a.call(l)}}W1(e,o,n,i)}else o=JX(t,e,n,i,r);return jw(o)}DV=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Eg(e.pendingLanes);t!==0&&(TP(e,t|1),ds(e,_r()),!(mn&6)&&(Np=_r()+500,pu()))}break;case 13:Vd(function(){var r=bl(n,1);if(r!==null){var i=qi();Uo(r,n,1,i)}}),i2(n,1)}};MP=function(n){if(n.tag===13){var e=bl(n,134217728);if(e!==null){var t=qi();Uo(e,n,134217728,t)}i2(n,134217728)}};LV=function(n){if(n.tag===13){var e=Fc(n),t=bl(n,e);if(t!==null){var r=qi();Uo(t,n,e,r)}i2(n,e)}};OV=function(){return Tn};FV=function(n,e){var t=Tn;try{return Tn=n,e()}finally{Tn=t}};SM=function(n,e,t){switch(e){case"input":if(gM(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=F1(r);if(!i)throw Error(Ue(90));pV(r),gM(r,i)}}}break;case"textarea":gV(n,t);break;case"select":e=t.value,e!=null&&Kf(n,!!t.multiple,e,!1)}};SV=ZP;EV=Vd;var ZX={usingClientEntryPoint:!1,Events:[Pv,Pf,F1,wV,bV,ZP]},ig={findFiberByHostInstance:ad,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eQ={bundleType:ig.bundleType,version:ig.version,rendererPackageName:ig.rendererPackageName,rendererConfig:ig.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ol.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=AV(n),n===null?null:n.stateNode},findFiberByHostInstance:ig.findFiberByHostInstance||QX,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wx.isDisabled&&wx.supportsFiber)try{N1=wx.inject(eQ),_a=wx}catch{}}Vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZX;Vs.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!o2(e))throw Error(Ue(200));return XX(n,e,null,t)};Vs.createRoot=function(n,e){if(!o2(n))throw Error(Ue(299));var t=!1,r="",i=s5;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=r2(n,1,!1,null,null,t,!1,r,i),n[wl]=e.current,Ty(n.nodeType===8?n.parentNode:n),new s2(e)};Vs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ue(188)):(n=Object.keys(n).join(","),Error(Ue(268,n)));return n=AV(e),n=n===null?null:n.stateNode,n};Vs.flushSync=function(n){return Vd(n)};Vs.hydrate=function(n,e,t){if(!$1(e))throw Error(Ue(200));return q1(null,n,e,!0,t)};Vs.hydrateRoot=function(n,e,t){if(!o2(n))throw Error(Ue(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=s5;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=i5(e,null,n,1,t??null,i,!1,s,o),n[wl]=e.current,Ty(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new G1(e)};Vs.render=function(n,e,t){if(!$1(e))throw Error(Ue(200));return q1(null,n,e,!1,t)};Vs.unmountComponentAtNode=function(n){if(!$1(n))throw Error(Ue(40));return n._reactRootContainer?(Vd(function(){q1(null,null,n,!1,function(){n._reactRootContainer=null,n[wl]=null})}),!0):!1};Vs.unstable_batchedUpdates=ZP;Vs.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!$1(t))throw Error(Ue(200));if(n==null||n._reactInternals===void 0)throw Error(Ue(38));return q1(n,e,t,!1,r)};Vs.version="18.3.1-next-f1338f8080-20240426";function o5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o5)}catch(n){console.error(n)}}o5(),oV.exports=Vs;var sh=oV.exports;const tQ=dP(sh);var a5,qD=sh;a5=qD.createRoot,qD.hydrateRoot;function nQ(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,r,i,s,o=[],a="",l=n.split("/");for(l[0]||l.shift();i=l.shift();)t=i[0],t==="*"?(o.push(t),a+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(r=i.indexOf("?",1),s=i.indexOf(".",1),o.push(i.substring(1,~r?r:~s?s:i.length)),a+=~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(a+=(~r?"?":"")+"\\"+i.substring(s))):a+="/"+i;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var l5={exports:{}},c5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp=R;function rQ(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var iQ=typeof Object.is=="function"?Object.is:rQ,sQ=Dp.useState,oQ=Dp.useEffect,aQ=Dp.useLayoutEffect,lQ=Dp.useDebugValue;function cQ(n,e){var t=e(),r=sQ({inst:{value:t,getSnapshot:e}}),i=r[0].inst,s=r[1];return aQ(function(){i.value=t,i.getSnapshot=e,RE(i)&&s({inst:i})},[n,t,e]),oQ(function(){return RE(i)&&s({inst:i}),n(function(){RE(i)&&s({inst:i})})},[n]),lQ(t),t}function RE(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!iQ(n,t)}catch{return!0}}function uQ(n,e){return e()}var dQ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?uQ:cQ;c5.useSyncExternalStore=Dp.useSyncExternalStore!==void 0?Dp.useSyncExternalStore:dQ;l5.exports=c5;var hQ=l5.exports;const fQ=gP.useInsertionEffect,pQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mQ=pQ?R.useLayoutEffect:R.useEffect,gQ=fQ||mQ,u5=n=>{const e=R.useRef([n,(...t)=>e[0](...t)]).current;return gQ(()=>{e[0]=n}),e[1]},yQ="popstate",a2="pushState",l2="replaceState",vQ="hashchange",KD=[yQ,a2,l2,vQ],xQ=n=>{for(const e of KD)addEventListener(e,n);return()=>{for(const e of KD)removeEventListener(e,n)}},d5=(n,e)=>hQ.useSyncExternalStore(xQ,n,e),_Q=()=>location.search,wQ=({ssrSearch:n=""}={})=>d5(_Q,()=>n),YD=()=>location.pathname,bQ=({ssrPath:n}={})=>d5(YD,n?()=>n:YD),SQ=(n,{replace:e=!1,state:t=null}={})=>history[e?l2:a2](t,"",n),EQ=(n={})=>[bQ(n),SQ],XD=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[XD]>"u"){for(const n of[a2,l2]){const e=history[n];history[n]=function(){const t=e.apply(this,arguments),r=new Event(n);return r.arguments=arguments,dispatchEvent(r),t}}Object.defineProperty(window,XD,{value:!0})}const TQ=(n,e)=>e.toLowerCase().indexOf(n.toLowerCase())?"~"+e:e.slice(n.length)||"/",h5=(n="")=>n==="/"?"":n,MQ=(n,e)=>n[0]==="~"?n.slice(1):h5(e)+n,AQ=(n="",e)=>TQ(QD(h5(n)),QD(e)),QD=n=>{try{return decodeURI(n)}catch{return n}},f5={hook:EQ,searchHook:wQ,parser:nQ,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:n=>n},p5=R.createContext(f5),Rv=()=>R.useContext(p5),m5={},g5=R.createContext(m5),y5=()=>R.useContext(g5),K1=n=>{const[e,t]=n.hook(n);return[AQ(n.base,e),u5((r,i)=>t(MQ(r,n.base),i))]},Y1=()=>K1(Rv()),v5=(n,e,t,r)=>{const{pattern:i,keys:s}=e instanceof RegExp?{keys:!1,pattern:e}:n(e||"*",r),o=i.exec(t)||[],[a,...l]=o;return a!==void 0?[!0,(()=>{const c=s!==!1?Object.fromEntries(s.map((d,f)=>[d,l[f]])):o.groups;let u={...l};return c&&Object.assign(u,c),u})(),...r?[a]:[]]:[!1,null]},CQ=({children:n,...e})=>{var u,d;const t=Rv(),r=e.hook?f5:t;let i=r;const[s,o]=((u=e.ssrPath)==null?void 0:u.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=s),e.hrefs=e.hrefs??((d=e.hook)==null?void 0:d.hrefs);let a=R.useRef({}),l=a.current,c=l;for(let f in r){const g=f==="base"?r[f]+(e[f]||""):e[f]||r[f];l===c&&g!==c[f]&&(a.current=c={...c}),c[f]=g,g!==r[f]&&(i=c)}return R.createElement(p5.Provider,{value:i,children:n})},JD=({children:n,component:e},t)=>e?R.createElement(e,{params:t}):typeof n=="function"?n(t):n,PQ=n=>{let e=R.useRef(m5);const t=e.current;return e.current=Object.keys(n).length!==Object.keys(t).length||Object.entries(n).some(([r,i])=>i!==t[r])?n:t},no=({path:n,nest:e,match:t,...r})=>{const i=Rv(),[s]=K1(i),[o,a,l]=t??v5(i.parser,n,s,e),c=PQ({...y5(),...a});if(!o)return null;const u=l?R.createElement(CQ,{base:l},JD(r,c)):JD(r,c);return R.createElement(g5.Provider,{value:c,children:u})},Is=R.forwardRef((n,e)=>{const t=Rv(),[r,i]=K1(t),{to:s="",href:o=s,onClick:a,asChild:l,children:c,className:u,replace:d,state:f,...g}=n,v=u5(x=>{x.ctrlKey||x.metaKey||x.altKey||x.shiftKey||x.button!==0||(a==null||a(x),x.defaultPrevented||(x.preventDefault(),i(o,n)))}),y=t.hrefs(o[0]==="~"?o.slice(1):t.base+o,t);return l&&R.isValidElement(c)?R.cloneElement(c,{onClick:v,href:y}):R.createElement("a",{...g,onClick:v,href:y,className:u!=null&&u.call?u(r===o):u,children:c,ref:e})}),x5=n=>Array.isArray(n)?n.flatMap(e=>x5(e&&e.type===R.Fragment?e.props.children:e)):[n],IQ=({children:n,location:e})=>{const t=Rv(),[r]=K1(t);for(const i of x5(n)){let s=0;if(R.isValidElement(i)&&(s=v5(t.parser,i.props.path,e||r,i.props.nest))[0])return R.cloneElement(i,{match:s})}return null},RQ=1,kQ=1e6;let kE=0;function NQ(){return kE=(kE+1)%Number.MAX_SAFE_INTEGER,kE.toString()}const NE=new Map,ZD=n=>{if(NE.has(n))return;const e=setTimeout(()=>{NE.delete(n),Yg({type:"REMOVE_TOAST",toastId:n})},kQ);NE.set(n,e)},DQ=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,RQ)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?ZD(t):n.toasts.forEach(r=>{ZD(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},U_=[];let z_={toasts:[]};function Yg(n){z_=DQ(z_,n),U_.forEach(e=>{e(z_)})}function LQ({...n}){const e=NQ(),t=i=>Yg({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Yg({type:"DISMISS_TOAST",toastId:e});return Yg({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function _5(){const[n,e]=R.useState(z_);return R.useEffect(()=>(U_.push(e),()=>{const t=U_.indexOf(e);t>-1&&U_.splice(t,1)}),[n]),{...n,toast:LQ,dismiss:t=>Yg({type:"DISMISS_TOAST",toastId:t})}}function wt(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function eL(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function w5(...n){return e=>{let t=!1;const r=n.map(i=>{const s=eL(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():eL(n[i],null)}}}}function Mn(...n){return R.useCallback(w5(...n),n)}function OQ(n,e){const t=R.createContext(e),r=s=>{const{children:o,...a}=s,l=R.useMemo(()=>a,Object.values(a));return m.jsx(t.Provider,{value:l,children:o})};r.displayName=n+"Provider";function i(s){const o=R.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[r,i]}function Fl(n,e=[]){let t=[];function r(s,o){const a=R.createContext(o),l=t.length;t=[...t,o];const c=d=>{var _;const{scope:f,children:g,...v}=d,y=((_=f==null?void 0:f[n])==null?void 0:_[l])||a,x=R.useMemo(()=>v,Object.values(v));return m.jsx(y.Provider,{value:x,children:g})};c.displayName=s+"Provider";function u(d,f){var y;const g=((y=f==null?void 0:f[n])==null?void 0:y[l])||a,v=R.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=t.map(o=>R.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return R.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,FQ(i,...e)]}function FQ(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return R.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Lp(n){const e=VQ(n),t=R.forwardRef((r,i)=>{const{children:s,...o}=r,a=R.Children.toArray(s),l=a.find(UQ);if(l){const c=l.props.children,u=a.map(d=>d===l?R.Children.count(c)>1?R.Children.only(null):R.isValidElement(c)?c.props.children:null:d);return m.jsx(e,{...o,ref:i,children:R.isValidElement(c)?R.cloneElement(c,void 0,u):null})}return m.jsx(e,{...o,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}var jQ=Lp("Slot");function VQ(n){const e=R.forwardRef((t,r)=>{const{children:i,...s}=t;if(R.isValidElement(i)){const o=BQ(i),a=zQ(s,i.props);return i.type!==R.Fragment&&(a.ref=r?w5(r,o):o),R.cloneElement(i,a)}return R.Children.count(i)>1?R.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var b5=Symbol("radix.slottable");function S5(n){const e=({children:t})=>m.jsx(m.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=b5,e}function UQ(n){return R.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===b5}function zQ(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function BQ(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function c2(n){const e=n+"CollectionProvider",[t,r]=Fl(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:x,children:_}=y,w=Ht.useRef(null),S=Ht.useRef(new Map).current;return m.jsx(i,{scope:x,itemMap:S,collectionRef:w,children:_})};o.displayName=e;const a=n+"CollectionSlot",l=Lp(a),c=Ht.forwardRef((y,x)=>{const{scope:_,children:w}=y,S=s(a,_),M=Mn(x,S.collectionRef);return m.jsx(l,{ref:M,children:w})});c.displayName=a;const u=n+"CollectionItemSlot",d="data-radix-collection-item",f=Lp(u),g=Ht.forwardRef((y,x)=>{const{scope:_,children:w,...S}=y,M=Ht.useRef(null),I=Mn(x,M),L=s(u,_);return Ht.useEffect(()=>(L.itemMap.set(M,{ref:M,...S}),()=>void L.itemMap.delete(M))),m.jsx(f,{[d]:"",ref:I,children:w})});g.displayName=u;function v(y){const x=s(n+"CollectionConsumer",y);return Ht.useCallback(()=>{const w=x.collectionRef.current;if(!w)return[];const S=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(x.itemMap.values()).sort((L,P)=>S.indexOf(L.ref.current)-S.indexOf(P.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},v,r]}var HQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Gt=HQ.reduce((n,e)=>{const t=Lp(`Primitive.${e}`),r=R.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function E5(n,e){n&&sh.flushSync(()=>n.dispatchEvent(e))}function vo(n){const e=R.useRef(n);return R.useEffect(()=>{e.current=n}),R.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function WQ(n,e=globalThis==null?void 0:globalThis.document){const t=vo(n);R.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var GQ="DismissableLayer",nA="dismissableLayer.update",$Q="dismissableLayer.pointerDownOutside",qQ="dismissableLayer.focusOutside",tL,T5=R.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),kv=R.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=n,c=R.useContext(T5),[u,d]=R.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=R.useState({}),v=Mn(e,P=>d(P)),y=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),_=y.indexOf(x),w=u?y.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,M=w>=_,I=YQ(P=>{const T=P.target,C=[...c.branches].some(k=>k.contains(T));!M||C||(i==null||i(P),o==null||o(P),P.defaultPrevented||a==null||a())},f),L=XQ(P=>{const T=P.target;[...c.branches].some(k=>k.contains(T))||(s==null||s(P),o==null||o(P),P.defaultPrevented||a==null||a())},f);return WQ(P=>{w===c.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&a&&(P.preventDefault(),a()))},f),R.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(tL=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),nL(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=tL)}},[u,f,t,c]),R.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),nL())},[u,c]),R.useEffect(()=>{const P=()=>g({});return document.addEventListener(nA,P),()=>document.removeEventListener(nA,P)},[]),m.jsx(Gt.div,{...l,ref:v,style:{pointerEvents:S?M?"auto":"none":void 0,...n.style},onFocusCapture:wt(n.onFocusCapture,L.onFocusCapture),onBlurCapture:wt(n.onBlurCapture,L.onBlurCapture),onPointerDownCapture:wt(n.onPointerDownCapture,I.onPointerDownCapture)})});kv.displayName=GQ;var KQ="DismissableLayerBranch",M5=R.forwardRef((n,e)=>{const t=R.useContext(T5),r=R.useRef(null),i=Mn(e,r);return R.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),m.jsx(Gt.div,{...n,ref:i})});M5.displayName=KQ;function YQ(n,e=globalThis==null?void 0:globalThis.document){const t=vo(n),r=R.useRef(!1),i=R.useRef(()=>{});return R.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){A5($Q,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function XQ(n,e=globalThis==null?void 0:globalThis.document){const t=vo(n),r=R.useRef(!1);return R.useEffect(()=>{const i=s=>{s.target&&!r.current&&A5(qQ,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function nL(){const n=new CustomEvent(nA);document.dispatchEvent(n)}function A5(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?E5(i,s):i.dispatchEvent(s)}var QQ=kv,JQ=M5,li=globalThis!=null&&globalThis.document?R.useLayoutEffect:()=>{},ZQ="Portal",X1=R.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[i,s]=R.useState(!1);li(()=>s(!0),[]);const o=t||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?tQ.createPortal(m.jsx(Gt.div,{...r,ref:e}),o):null});X1.displayName=ZQ;function eJ(n,e){return R.useReducer((t,r)=>e[t][r]??t,n)}var oh=n=>{const{present:e,children:t}=n,r=tJ(e),i=typeof t=="function"?t({present:r.isPresent}):R.Children.only(t),s=Mn(r.ref,nJ(i));return typeof t=="function"||r.isPresent?R.cloneElement(i,{ref:s}):null};oh.displayName="Presence";function tJ(n){const[e,t]=R.useState(),r=R.useRef(null),i=R.useRef(n),s=R.useRef("none"),o=n?"mounted":"unmounted",[a,l]=eJ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return R.useEffect(()=>{const c=bx(r.current);s.current=a==="mounted"?c:"none"},[a]),li(()=>{const c=r.current,u=i.current;if(u!==n){const f=s.current,g=bx(c);n?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),li(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=g=>{const y=bx(r.current).includes(g.animationName);if(g.target===e&&y&&(l("ANIMATION_END"),!i.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},f=g=>{g.target===e&&(s.current=bx(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:R.useCallback(c=>{r.current=c?getComputedStyle(c):null,t(c)},[])}}function bx(n){return(n==null?void 0:n.animationName)||"none"}function nJ(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var rJ=gP[" useInsertionEffect ".trim().toString()]||li;function Op({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,s,o]=iJ({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:i;{const u=R.useRef(n!==void 0);R.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=R.useCallback(u=>{var d;if(a){const f=sJ(u)?u(n):u;f!==n&&((d=o.current)==null||d.call(o,f))}else s(u)},[a,n,s,o]);return[l,c]}function iJ({defaultProp:n,onChange:e}){const[t,r]=R.useState(n),i=R.useRef(t),s=R.useRef(e);return rJ(()=>{s.current=e},[e]),R.useEffect(()=>{var o;i.current!==t&&((o=s.current)==null||o.call(s,t),i.current=t)},[t,i]),[t,r,s]}function sJ(n){return typeof n=="function"}var C5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),oJ="VisuallyHidden",Q1=R.forwardRef((n,e)=>m.jsx(Gt.span,{...n,ref:e,style:{...C5,...n.style}}));Q1.displayName=oJ;var aJ=Q1,u2="ToastProvider",[d2,lJ,cJ]=c2("Toast"),[P5,ZAe]=Fl("Toast",[cJ]),[uJ,J1]=P5(u2),I5=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=n,[a,l]=R.useState(null),[c,u]=R.useState(0),d=R.useRef(!1),f=R.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${u2}\`. Expected non-empty \`string\`.`),m.jsx(d2.Provider,{scope:e,children:m.jsx(uJ,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:R.useCallback(()=>u(g=>g+1),[]),onToastRemove:R.useCallback(()=>u(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};I5.displayName=u2;var R5="ToastViewport",dJ=["F8"],rA="toast.viewportPause",iA="toast.viewportResume",k5=R.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=dJ,label:i="Notifications ({hotkey})",...s}=n,o=J1(R5,t),a=lJ(t),l=R.useRef(null),c=R.useRef(null),u=R.useRef(null),d=R.useRef(null),f=Mn(e,d,o.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;R.useEffect(()=>{const x=_=>{var S;r.length!==0&&r.every(M=>_[M]||_.code===M)&&((S=d.current)==null||S.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),R.useEffect(()=>{const x=l.current,_=d.current;if(v&&x&&_){const w=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(rA);_.dispatchEvent(L),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(iA);_.dispatchEvent(L),o.isClosePausedRef.current=!1}},M=L=>{!x.contains(L.relatedTarget)&&S()},I=()=>{x.contains(document.activeElement)||S()};return x.addEventListener("focusin",w),x.addEventListener("focusout",M),x.addEventListener("pointermove",w),x.addEventListener("pointerleave",I),window.addEventListener("blur",w),window.addEventListener("focus",S),()=>{x.removeEventListener("focusin",w),x.removeEventListener("focusout",M),x.removeEventListener("pointermove",w),x.removeEventListener("pointerleave",I),window.removeEventListener("blur",w),window.removeEventListener("focus",S)}}},[v,o.isClosePausedRef]);const y=R.useCallback(({tabbingDirection:x})=>{const w=a().map(S=>{const M=S.ref.current,I=[M,...EJ(M)];return x==="forwards"?I:I.reverse()});return(x==="forwards"?w.reverse():w).flat()},[a]);return R.useEffect(()=>{const x=d.current;if(x){const _=w=>{var I,L,P;const S=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!S){const T=document.activeElement,C=w.shiftKey;if(w.target===x&&C){(I=c.current)==null||I.focus();return}const U=y({tabbingDirection:C?"backwards":"forwards"}),V=U.findIndex(B=>B===T);DE(U.slice(V+1))?w.preventDefault():C?(L=c.current)==null||L.focus():(P=u.current)==null||P.focus()}};return x.addEventListener("keydown",_),()=>x.removeEventListener("keydown",_)}},[a,y]),m.jsxs(JQ,{ref:l,role:"region","aria-label":i.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&m.jsx(sA,{ref:c,onFocusFromOutsideViewport:()=>{const x=y({tabbingDirection:"forwards"});DE(x)}}),m.jsx(d2.Slot,{scope:t,children:m.jsx(Gt.ol,{tabIndex:-1,...s,ref:f})}),v&&m.jsx(sA,{ref:u,onFocusFromOutsideViewport:()=>{const x=y({tabbingDirection:"backwards"});DE(x)}})]})});k5.displayName=R5;var N5="ToastFocusProxy",sA=R.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=J1(N5,t);return m.jsx(Q1,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});sA.displayName=N5;var Nv="Toast",hJ="toast.swipeStart",fJ="toast.swipeMove",pJ="toast.swipeCancel",mJ="toast.swipeEnd",D5=R.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...o}=n,[a,l]=Op({prop:r,defaultProp:i??!0,onChange:s,caller:Nv});return m.jsx(oh,{present:t||a,children:m.jsx(vJ,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:vo(n.onPause),onResume:vo(n.onResume),onSwipeStart:wt(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:wt(n.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:wt(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:wt(n.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});D5.displayName=Nv;var[gJ,yJ]=P5(Nv,{onClose(){}}),vJ=R.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:g,...v}=n,y=J1(Nv,t),[x,_]=R.useState(null),w=Mn(e,B=>_(B)),S=R.useRef(null),M=R.useRef(null),I=i||y.duration,L=R.useRef(0),P=R.useRef(I),T=R.useRef(0),{onToastAdd:C,onToastRemove:k}=y,O=vo(()=>{var Z;(x==null?void 0:x.contains(document.activeElement))&&((Z=y.viewport)==null||Z.focus()),o()}),U=R.useCallback(B=>{!B||B===1/0||(window.clearTimeout(T.current),L.current=new Date().getTime(),T.current=window.setTimeout(O,B))},[O]);R.useEffect(()=>{const B=y.viewport;if(B){const Z=()=>{U(P.current),c==null||c()},ne=()=>{const oe=new Date().getTime()-L.current;P.current=P.current-oe,window.clearTimeout(T.current),l==null||l()};return B.addEventListener(rA,ne),B.addEventListener(iA,Z),()=>{B.removeEventListener(rA,ne),B.removeEventListener(iA,Z)}}},[y.viewport,I,l,c,U]),R.useEffect(()=>{s&&!y.isClosePausedRef.current&&U(I)},[s,I,y.isClosePausedRef,U]),R.useEffect(()=>(C(),()=>k()),[C,k]);const V=R.useMemo(()=>x?z5(x):null,[x]);return y.viewport?m.jsxs(m.Fragment,{children:[V&&m.jsx(xJ,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:V}),m.jsx(gJ,{scope:t,onClose:O,children:sh.createPortal(m.jsx(d2.ItemSlot,{scope:t,children:m.jsx(QQ,{asChild:!0,onEscapeKeyDown:wt(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||O(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:m.jsx(Gt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":y.swipeDirection,...v,ref:w,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:wt(n.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:wt(n.onPointerDown,B=>{B.button===0&&(S.current={x:B.clientX,y:B.clientY})}),onPointerMove:wt(n.onPointerMove,B=>{if(!S.current)return;const Z=B.clientX-S.current.x,ne=B.clientY-S.current.y,oe=!!M.current,z=["left","right"].includes(y.swipeDirection),G=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,q=z?G(0,Z):0,se=z?0:G(0,ne),J=B.pointerType==="touch"?10:2,he={x:q,y:se},_e={originalEvent:B,delta:he};oe?(M.current=he,Sx(fJ,d,_e,{discrete:!1})):rL(he,y.swipeDirection,J)?(M.current=he,Sx(hJ,u,_e,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(Z)>J||Math.abs(ne)>J)&&(S.current=null)}),onPointerUp:wt(n.onPointerUp,B=>{const Z=M.current,ne=B.target;if(ne.hasPointerCapture(B.pointerId)&&ne.releasePointerCapture(B.pointerId),M.current=null,S.current=null,Z){const oe=B.currentTarget,z={originalEvent:B,delta:Z};rL(Z,y.swipeDirection,y.swipeThreshold)?Sx(mJ,g,z,{discrete:!0}):Sx(pJ,f,z,{discrete:!0}),oe.addEventListener("click",G=>G.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),xJ=n=>{const{__scopeToast:e,children:t,...r}=n,i=J1(Nv,e),[s,o]=R.useState(!1),[a,l]=R.useState(!1);return bJ(()=>o(!0)),R.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:m.jsx(X1,{asChild:!0,children:m.jsx(Q1,{...r,children:s&&m.jsxs(m.Fragment,{children:[i.label," ",t]})})})},_J="ToastTitle",L5=R.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return m.jsx(Gt.div,{...r,ref:e})});L5.displayName=_J;var wJ="ToastDescription",O5=R.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return m.jsx(Gt.div,{...r,ref:e})});O5.displayName=wJ;var F5="ToastAction",j5=R.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?m.jsx(U5,{altText:t,asChild:!0,children:m.jsx(h2,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${F5}\`. Expected non-empty \`string\`.`),null)});j5.displayName=F5;var V5="ToastClose",h2=R.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=yJ(V5,t);return m.jsx(U5,{asChild:!0,children:m.jsx(Gt.button,{type:"button",...r,ref:e,onClick:wt(n.onClick,i.onClose)})})});h2.displayName=V5;var U5=R.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return m.jsx(Gt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function z5(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),SJ(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...z5(r))}}),e}function Sx(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?E5(i,s):i.dispatchEvent(s)}var rL=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function bJ(n=()=>{}){const e=vo(n);li(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function SJ(n){return n.nodeType===n.ELEMENT_NODE}function EJ(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function DE(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var TJ=I5,B5=k5,H5=D5,W5=L5,G5=O5,$5=j5,q5=h2;function K5(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=K5(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Y5(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=K5(n))&&(r&&(r+=" "),r+=e);return r}const iL=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,sL=Y5,Z1=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return sL(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=t==null?void 0:t[c],d=s==null?void 0:s[c];if(u===null)return null;const f=iL(u)||iL(d);return i[c][f]}),a=t&&Object.entries(t).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:f,...g}=u;return Object.entries(g).every(v=>{let[y,x]=v;return Array.isArray(x)?x.includes({...s,...a}[y]):{...s,...a}[y]===x})?[...c,d,f]:c},[]);return sL(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),X5=(...n)=>n.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var AJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CJ=R.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>R.createElement("svg",{ref:l,...AJ,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:X5("lucide",i),...a},[...o.map(([c,u])=>R.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=(n,e)=>{const t=R.forwardRef(({className:r,...i},s)=>R.createElement(CJ,{ref:s,iconNode:e,className:X5(`lucide-${MJ(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PJ=Yt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=Yt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=Yt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IJ=Yt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=Yt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RJ=Yt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=Yt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=Yt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=Yt("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kJ=Yt("Cross",[["path",{d:"M11 2a2 2 0 0 0-2 2v5H4a2 2 0 0 0-2 2v2c0 1.1.9 2 2 2h5v5c0 1.1.9 2 2 2h2a2 2 0 0 0 2-2v-5h5a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-5V4a2 2 0 0 0-2-2h-2z",key:"1t5g7j"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=Yt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DJ=Yt("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LJ=Yt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OJ=Yt("IdCard",[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FJ=Yt("ImagePlus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jJ=Yt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=Yt("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VJ=Yt("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UJ=Yt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zJ=Yt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=Yt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=Yt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=Yt("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HJ=Yt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=Yt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GJ=Yt("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=Yt("PencilLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=Yt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $J=Yt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=Yt("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qJ=Yt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=Yt("Tent",[["path",{d:"M3.5 21 14 3",key:"1szst5"}],["path",{d:"M20.5 21 10 3",key:"1310c3"}],["path",{d:"M15.5 21 12 15l-3.5 6",key:"1ddtfw"}],["path",{d:"M2 21h20",key:"1nyx9w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=Yt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=Yt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=Yt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=Yt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=Yt("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=Yt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=Yt("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),m2="-",ZJ=n=>{const e=tZ(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(m2);return a[0]===""&&a.length!==1&&a.shift(),rz(a,e)||eZ(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},rz=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?rz(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=n.join(m2);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},aL=/^\[(.+)\]$/,eZ=n=>{if(aL.test(n)){const e=aL.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},tZ=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return rZ(Object.entries(n.classGroups),t).forEach(([s,o])=>{oA(o,r,s,e)}),r},oA=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const s=i===""?e:lL(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(nZ(i)){oA(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,o])=>{oA(o,lL(e,s),t,r)})})},lL=(n,e)=>{let t=n;return e.split(m2).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},nZ=n=>n.isThemeGetter,rZ=(n,e)=>e?n.map(([t,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[t,i]}):n,iZ=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){t.has(s)?t.set(s,o):i(s,o)}}},iz="!",sZ=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let c=0,u=0,d;for(let x=0;x<a.length;x++){let _=a[x];if(c===0){if(_===i&&(r||a.slice(x,x+s)===e)){l.push(a.slice(u,x)),u=x+s;continue}if(_==="/"){d=x;continue}}_==="["?c++:_==="]"&&c--}const f=l.length===0?a:a.substring(u),g=f.startsWith(iz),v=g?f.substring(1):f,y=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:y}};return t?a=>t({className:a,parseClassName:o}):o},oZ=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},aZ=n=>({cache:iZ(n.cacheSize),parseClassName:sZ(n),...ZJ(n)}),lZ=/\s+/,cZ=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=n.trim().split(lZ);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:g}=t(c);let v=!!g,y=r(v?f.substring(0,g):f);if(!y){if(!v){a=c+(a.length>0?" "+a:a);continue}if(y=r(f),!y){a=c+(a.length>0?" "+a:a);continue}v=!1}const x=oZ(u).join(":"),_=d?x+iz:x,w=_+y;if(s.includes(w))continue;s.push(w);const S=i(y,v);for(let M=0;M<S.length;++M){const I=S[M];s.push(_+I)}a=c+(a.length>0?" "+a:a)}return a};function uZ(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=sz(e))&&(r&&(r+=" "),r+=t);return r}const sz=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=sz(n[r]))&&(t&&(t+=" "),t+=e);return t};function dZ(n,...e){let t,r,i,s=o;function o(l){const c=e.reduce((u,d)=>d(u),n());return t=aZ(c),r=t.cache.get,i=t.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=cZ(l,t);return i(l,u),u}return function(){return s(uZ.apply(null,arguments))}}const jn=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},oz=/^\[(?:([a-z-]+):)?(.+)\]$/i,hZ=/^\d+\/\d+$/,fZ=new Set(["px","full","screen"]),pZ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,mZ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,gZ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,yZ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,vZ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,$a=n=>ep(n)||fZ.has(n)||hZ.test(n),Ql=n=>im(n,"length",MZ),ep=n=>!!n&&!Number.isNaN(Number(n)),OE=n=>im(n,"number",ep),sg=n=>!!n&&Number.isInteger(Number(n)),xZ=n=>n.endsWith("%")&&ep(n.slice(0,-1)),Vt=n=>oz.test(n),Jl=n=>pZ.test(n),_Z=new Set(["length","size","percentage"]),wZ=n=>im(n,_Z,az),bZ=n=>im(n,"position",az),SZ=new Set(["image","url"]),EZ=n=>im(n,SZ,CZ),TZ=n=>im(n,"",AZ),og=()=>!0,im=(n,e,t)=>{const r=oz.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},MZ=n=>mZ.test(n)&&!gZ.test(n),az=()=>!1,AZ=n=>yZ.test(n),CZ=n=>vZ.test(n),PZ=()=>{const n=jn("colors"),e=jn("spacing"),t=jn("blur"),r=jn("brightness"),i=jn("borderColor"),s=jn("borderRadius"),o=jn("borderSpacing"),a=jn("borderWidth"),l=jn("contrast"),c=jn("grayscale"),u=jn("hueRotate"),d=jn("invert"),f=jn("gap"),g=jn("gradientColorStops"),v=jn("gradientColorStopPositions"),y=jn("inset"),x=jn("margin"),_=jn("opacity"),w=jn("padding"),S=jn("saturate"),M=jn("scale"),I=jn("sepia"),L=jn("skew"),P=jn("space"),T=jn("translate"),C=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Vt,e],U=()=>[Vt,e],V=()=>["",$a,Ql],B=()=>["auto",ep,Vt],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ne=()=>["solid","dashed","dotted","double","none"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],G=()=>["","0",Vt],q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],se=()=>[ep,Vt];return{cacheSize:500,separator:":",theme:{colors:[og],spacing:[$a,Ql],blur:["none","",Jl,Vt],brightness:se(),borderColor:[n],borderRadius:["none","","full",Jl,Vt],borderSpacing:U(),borderWidth:V(),contrast:se(),grayscale:G(),hueRotate:se(),invert:G(),gap:U(),gradientColorStops:[n],gradientColorStopPositions:[xZ,Ql],inset:O(),margin:O(),opacity:se(),padding:U(),saturate:se(),scale:se(),sepia:G(),skew:se(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",Vt]}],container:["container"],columns:[{columns:[Jl]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),Vt]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",sg,Vt]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Vt]}],grow:[{grow:G()}],shrink:[{shrink:G()}],order:[{order:["first","last","none",sg,Vt]}],"grid-cols":[{"grid-cols":[og]}],"col-start-end":[{col:["auto",{span:["full",sg,Vt]},Vt]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[og]}],"row-start-end":[{row:["auto",{span:[sg,Vt]},Vt]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Vt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Vt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Vt,e]}],"min-w":[{"min-w":[Vt,e,"min","max","fit"]}],"max-w":[{"max-w":[Vt,e,"none","full","min","max","fit","prose",{screen:[Jl]},Jl]}],h:[{h:[Vt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Vt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Vt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Vt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Jl,Ql]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",OE]}],"font-family":[{font:[og]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Vt]}],"line-clamp":[{"line-clamp":["none",ep,OE]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",$a,Vt]}],"list-image":[{"list-image":["none",Vt]}],"list-style-type":[{list:["none","disc","decimal",Vt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ne(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",$a,Ql]}],"underline-offset":[{"underline-offset":["auto",$a,Vt]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Vt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Vt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),bZ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",wZ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},EZ]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...ne(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:ne()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...ne()]}],"outline-offset":[{"outline-offset":[$a,Vt]}],"outline-w":[{outline:[$a,Ql]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[$a,Ql]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Jl,TZ]}],"shadow-color":[{shadow:[og]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...oe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":oe()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Jl,Vt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[S]}],sepia:[{sepia:[I]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Vt]}],duration:[{duration:se()}],ease:[{ease:["linear","in","out","in-out",Vt]}],delay:[{delay:se()}],animate:[{animate:["none","spin","ping","pulse","bounce",Vt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[M]}],"scale-x":[{"scale-x":[M]}],"scale-y":[{"scale-y":[M]}],rotate:[{rotate:[sg,Vt]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Vt]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Vt]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Vt]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[$a,Ql,OE]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},IZ=dZ(PZ);function gt(...n){return IZ(Y5(n))}const RZ=TJ,lz=R.forwardRef(({className:n,...e},t)=>m.jsx(B5,{ref:t,className:gt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));lz.displayName=B5.displayName;const kZ=Z1("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),cz=R.forwardRef(({className:n,variant:e,...t},r)=>m.jsx(H5,{ref:r,className:gt(kZ({variant:e}),n),...t}));cz.displayName=H5.displayName;const NZ=R.forwardRef(({className:n,...e},t)=>m.jsx($5,{ref:t,className:gt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));NZ.displayName=$5.displayName;const uz=R.forwardRef(({className:n,...e},t)=>m.jsx(q5,{ref:t,className:gt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:m.jsx(p2,{className:"h-4 w-4"})}));uz.displayName=q5.displayName;const dz=R.forwardRef(({className:n,...e},t)=>m.jsx(W5,{ref:t,className:gt("text-sm font-semibold",n),...e}));dz.displayName=W5.displayName;const hz=R.forwardRef(({className:n,...e},t)=>m.jsx(G5,{ref:t,className:gt("text-sm opacity-90",n),...e}));hz.displayName=G5.displayName;function DZ(){const{toasts:n}=_5();return m.jsxs(RZ,{children:[n.map(function({id:e,title:t,description:r,action:i,...s}){return m.jsxs(cz,{...s,children:[m.jsxs("div",{className:"grid gap-1",children:[t&&m.jsx(dz,{children:t}),r&&m.jsx(hz,{children:r})]}),i,m.jsx(uz,{})]},e)}),m.jsx(lz,{})]})}var LZ=gP[" useId ".trim().toString()]||(()=>{}),OZ=0;function Vc(n){const[e,t]=R.useState(LZ());return li(()=>{t(r=>r??String(OZ++))},[n]),e?`radix-${e}`:""}const FZ=["top","right","bottom","left"],Yc=Math.min,Cs=Math.max,Vw=Math.round,Tx=Math.floor,ba=n=>({x:n,y:n}),jZ={left:"right",right:"left",bottom:"top",top:"bottom"},VZ={start:"end",end:"start"};function aA(n,e,t){return Cs(n,Yc(e,t))}function El(n,e){return typeof n=="function"?n(e):n}function Tl(n){return n.split("-")[0]}function sm(n){return n.split("-")[1]}function g2(n){return n==="x"?"y":"x"}function y2(n){return n==="y"?"height":"width"}function ml(n){return["top","bottom"].includes(Tl(n))?"y":"x"}function v2(n){return g2(ml(n))}function UZ(n,e,t){t===void 0&&(t=!1);const r=sm(n),i=v2(n),s=y2(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Uw(o)),[o,Uw(o)]}function zZ(n){const e=Uw(n);return[lA(n),e,lA(e)]}function lA(n){return n.replace(/start|end/g,e=>VZ[e])}function BZ(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function HZ(n,e,t,r){const i=sm(n);let s=BZ(Tl(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(lA)))),s}function Uw(n){return n.replace(/left|right|bottom|top/g,e=>jZ[e])}function WZ(n){return{top:0,right:0,bottom:0,left:0,...n}}function fz(n){return typeof n!="number"?WZ(n):{top:n,right:n,bottom:n,left:n}}function zw(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function cL(n,e,t){let{reference:r,floating:i}=n;const s=ml(e),o=v2(e),a=y2(o),l=Tl(e),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let g;switch(l){case"top":g={x:u,y:r.y-i.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:d};break;case"left":g={x:r.x-i.width,y:d};break;default:g={x:r.x,y:r.y}}switch(sm(e)){case"start":g[o]-=f*(t&&c?-1:1);break;case"end":g[o]+=f*(t&&c?-1:1);break}return g}const GZ=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:u,y:d}=cL(c,r,l),f=r,g={},v=0;for(let y=0;y<a.length;y++){const{name:x,fn:_}=a[y],{x:w,y:S,data:M,reset:I}=await _({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:g,rects:c,platform:o,elements:{reference:n,floating:e}});u=w??u,d=S??d,g={...g,[x]:{...g[x],...M}},I&&v<=50&&(v++,typeof I=="object"&&(I.placement&&(f=I.placement),I.rects&&(c=I.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):I.rects),{x:u,y:d}=cL(c,f,l)),y=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:g}};async function Ly(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:g=0}=El(e,n),v=fz(g),x=a[f?d==="floating"?"reference":"floating":d],_=zw(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(x)))==null||t?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),M=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},I=zw(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:S,strategy:l}):w);return{top:(_.top-I.top+v.top)/M.y,bottom:(I.bottom-_.bottom+v.bottom)/M.y,left:(_.left-I.left+v.left)/M.x,right:(I.right-_.right+v.right)/M.x}}const $Z=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=El(n,e)||{};if(c==null)return{};const d=fz(u),f={x:t,y:r},g=v2(i),v=y2(g),y=await o.getDimensions(c),x=g==="y",_=x?"top":"left",w=x?"bottom":"right",S=x?"clientHeight":"clientWidth",M=s.reference[v]+s.reference[g]-f[g]-s.floating[v],I=f[g]-s.reference[g],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let P=L?L[S]:0;(!P||!await(o.isElement==null?void 0:o.isElement(L)))&&(P=a.floating[S]||s.floating[v]);const T=M/2-I/2,C=P/2-y[v]/2-1,k=Yc(d[_],C),O=Yc(d[w],C),U=k,V=P-y[v]-O,B=P/2-y[v]/2+T,Z=aA(U,B,V),ne=!l.arrow&&sm(i)!=null&&B!==Z&&s.reference[v]/2-(B<U?k:O)-y[v]/2<0,oe=ne?B<U?B-U:B-V:0;return{[g]:f[g]+oe,data:{[g]:Z,centerOffset:B-Z-oe,...ne&&{alignmentOffset:oe}},reset:ne}}}),qZ=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...x}=El(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const _=Tl(i),w=ml(a),S=Tl(a)===a,M=await(l.isRTL==null?void 0:l.isRTL(c.floating)),I=f||(S||!y?[Uw(a)]:zZ(a)),L=v!=="none";!f&&L&&I.push(...HZ(a,y,v,M));const P=[a,...I],T=await Ly(e,x),C=[];let k=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&C.push(T[_]),d){const Z=UZ(i,o,M);C.push(T[Z[0]],T[Z[1]])}if(k=[...k,{placement:i,overflows:C}],!C.every(Z=>Z<=0)){var O,U;const Z=(((O=s.flip)==null?void 0:O.index)||0)+1,ne=P[Z];if(ne){var V;const z=d==="alignment"?w!==ml(ne):!1,G=((V=k[0])==null?void 0:V.overflows[0])>0;if(!z||G)return{data:{index:Z,overflows:k},reset:{placement:ne}}}let oe=(U=k.filter(z=>z.overflows[0]<=0).sort((z,G)=>z.overflows[1]-G.overflows[1])[0])==null?void 0:U.placement;if(!oe)switch(g){case"bestFit":{var B;const z=(B=k.filter(G=>{if(L){const q=ml(G.placement);return q===w||q==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(q=>q>0).reduce((q,se)=>q+se,0)]).sort((G,q)=>G[1]-q[1])[0])==null?void 0:B[0];z&&(oe=z);break}case"initialPlacement":oe=a;break}if(i!==oe)return{reset:{placement:oe}}}return{}}}};function uL(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function dL(n){return FZ.some(e=>n[e]>=0)}const KZ=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=El(n,e);switch(r){case"referenceHidden":{const s=await Ly(e,{...i,elementContext:"reference"}),o=uL(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:dL(o)}}}case"escaped":{const s=await Ly(e,{...i,altBoundary:!0}),o=uL(s,t.floating);return{data:{escapedOffsets:o,escaped:dL(o)}}}default:return{}}}}};async function YZ(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Tl(t),a=sm(t),l=ml(t)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=El(e,n);let{mainAxis:f,crossAxis:g,alignmentAxis:v}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof v=="number"&&(g=a==="end"?v*-1:v),l?{x:g*u,y:f*c}:{x:f*c,y:g*u}}const XZ=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await YZ(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},QZ=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:_,y:w}=x;return{x:_,y:w}}},...l}=El(n,e),c={x:t,y:r},u=await Ly(e,l),d=ml(Tl(i)),f=g2(d);let g=c[f],v=c[d];if(s){const x=f==="y"?"top":"left",_=f==="y"?"bottom":"right",w=g+u[x],S=g-u[_];g=aA(w,g,S)}if(o){const x=d==="y"?"top":"left",_=d==="y"?"bottom":"right",w=v+u[x],S=v-u[_];v=aA(w,v,S)}const y=a.fn({...e,[f]:g,[d]:v});return{...y,data:{x:y.x-t,y:y.y-r,enabled:{[f]:s,[d]:o}}}}}},JZ=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=El(n,e),u={x:t,y:r},d=ml(i),f=g2(d);let g=u[f],v=u[d];const y=El(a,e),x=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const S=f==="y"?"height":"width",M=s.reference[f]-s.floating[S]+x.mainAxis,I=s.reference[f]+s.reference[S]-x.mainAxis;g<M?g=M:g>I&&(g=I)}if(c){var _,w;const S=f==="y"?"width":"height",M=["top","left"].includes(Tl(i)),I=s.reference[d]-s.floating[S]+(M&&((_=o.offset)==null?void 0:_[d])||0)+(M?0:x.crossAxis),L=s.reference[d]+s.reference[S]+(M?0:((w=o.offset)==null?void 0:w[d])||0)-(M?x.crossAxis:0);v<I?v=I:v>L&&(v=L)}return{[f]:g,[d]:v}}}},ZZ=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=El(n,e),u=await Ly(e,c),d=Tl(i),f=sm(i),g=ml(i)==="y",{width:v,height:y}=s.floating;let x,_;d==="top"||d==="bottom"?(x=d,_=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=d,x=f==="end"?"top":"bottom");const w=y-u.top-u.bottom,S=v-u.left-u.right,M=Yc(y-u[x],w),I=Yc(v-u[_],S),L=!e.middlewareData.shift;let P=M,T=I;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(T=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=w),L&&!f){const k=Cs(u.left,0),O=Cs(u.right,0),U=Cs(u.top,0),V=Cs(u.bottom,0);g?T=v-2*(k!==0||O!==0?k+O:Cs(u.left,u.right)):P=y-2*(U!==0||V!==0?U+V:Cs(u.top,u.bottom))}await l({...e,availableWidth:T,availableHeight:P});const C=await o.getDimensions(a.floating);return v!==C.width||y!==C.height?{reset:{rects:!0}}:{}}}};function nb(){return typeof window<"u"}function om(n){return pz(n)?(n.nodeName||"").toLowerCase():"#document"}function ks(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function La(n){var e;return(e=(pz(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function pz(n){return nb()?n instanceof Node||n instanceof ks(n).Node:!1}function $o(n){return nb()?n instanceof Element||n instanceof ks(n).Element:!1}function Ra(n){return nb()?n instanceof HTMLElement||n instanceof ks(n).HTMLElement:!1}function hL(n){return!nb()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof ks(n).ShadowRoot}function Dv(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=qo(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function eee(n){return["table","td","th"].includes(om(n))}function rb(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function x2(n){const e=_2(),t=$o(n)?qo(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function tee(n){let e=Xc(n);for(;Ra(e)&&!Fp(e);){if(x2(e))return e;if(rb(e))return null;e=Xc(e)}return null}function _2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Fp(n){return["html","body","#document"].includes(om(n))}function qo(n){return ks(n).getComputedStyle(n)}function ib(n){return $o(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Xc(n){if(om(n)==="html")return n;const e=n.assignedSlot||n.parentNode||hL(n)&&n.host||La(n);return hL(e)?e.host:e}function mz(n){const e=Xc(n);return Fp(e)?n.ownerDocument?n.ownerDocument.body:n.body:Ra(e)&&Dv(e)?e:mz(e)}function Oy(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=mz(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=ks(i);if(s){const a=cA(o);return e.concat(o,o.visualViewport||[],Dv(i)?i:[],a&&t?Oy(a):[])}return e.concat(i,Oy(i,[],t))}function cA(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function gz(n){const e=qo(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Ra(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=Vw(t)!==s||Vw(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function w2(n){return $o(n)?n:n.contextElement}function tp(n){const e=w2(n);if(!Ra(e))return ba(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=gz(e);let o=(s?Vw(t.width):t.width)/r,a=(s?Vw(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const nee=ba(0);function yz(n){const e=ks(n);return!_2()||!e.visualViewport?nee:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function ree(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==ks(n)?!1:e}function Ud(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=w2(n);let o=ba(1);e&&(r?$o(r)&&(o=tp(r)):o=tp(n));const a=ree(s,t,r)?yz(s):ba(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const f=ks(s),g=r&&$o(r)?ks(r):r;let v=f,y=cA(v);for(;y&&r&&g!==v;){const x=tp(y),_=y.getBoundingClientRect(),w=qo(y),S=_.left+(y.clientLeft+parseFloat(w.paddingLeft))*x.x,M=_.top+(y.clientTop+parseFloat(w.paddingTop))*x.y;l*=x.x,c*=x.y,u*=x.x,d*=x.y,l+=S,c+=M,v=ks(y),y=cA(v)}}return zw({width:u,height:d,x:l,y:c})}function b2(n,e){const t=ib(n).scrollLeft;return e?e.left+t:Ud(La(n)).left+t}function vz(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:b2(n,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function iee(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=La(r),a=e?rb(e.floating):!1;if(r===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},c=ba(1);const u=ba(0),d=Ra(r);if((d||!d&&!s)&&((om(r)!=="body"||Dv(o))&&(l=ib(r)),Ra(r))){const g=Ud(r);c=tp(r),u.x=g.x+r.clientLeft,u.y=g.y+r.clientTop}const f=o&&!d&&!s?vz(o,l,!0):ba(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:t.y*c.y-l.scrollTop*c.y+u.y+f.y}}function see(n){return Array.from(n.getClientRects())}function oee(n){const e=La(n),t=ib(n),r=n.ownerDocument.body,i=Cs(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Cs(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+b2(n);const a=-t.scrollTop;return qo(r).direction==="rtl"&&(o+=Cs(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function aee(n,e){const t=ks(n),r=La(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=_2();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function lee(n,e){const t=Ud(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=Ra(n)?tp(n):ba(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function fL(n,e,t){let r;if(e==="viewport")r=aee(n,t);else if(e==="document")r=oee(La(n));else if($o(e))r=lee(e,t);else{const i=yz(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return zw(r)}function xz(n,e){const t=Xc(n);return t===e||!$o(t)||Fp(t)?!1:qo(t).position==="fixed"||xz(t,e)}function cee(n,e){const t=e.get(n);if(t)return t;let r=Oy(n,[],!1).filter(a=>$o(a)&&om(a)!=="body"),i=null;const s=qo(n).position==="fixed";let o=s?Xc(n):n;for(;$o(o)&&!Fp(o);){const a=qo(o),l=x2(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Dv(o)&&!l&&xz(n,o))?r=r.filter(u=>u!==o):i=a,o=Xc(o)}return e.set(n,r),r}function uee(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?rb(e)?[]:cee(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,u)=>{const d=fL(e,u,i);return c.top=Cs(d.top,c.top),c.right=Yc(d.right,c.right),c.bottom=Yc(d.bottom,c.bottom),c.left=Cs(d.left,c.left),c},fL(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function dee(n){const{width:e,height:t}=gz(n);return{width:e,height:t}}function hee(n,e,t){const r=Ra(e),i=La(e),s=t==="fixed",o=Ud(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=ba(0);function c(){l.x=b2(i)}if(r||!r&&!s)if((om(e)!=="body"||Dv(i))&&(a=ib(e)),r){const g=Ud(e,!0,s,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else i&&c();s&&!r&&i&&c();const u=i&&!r&&!s?vz(i,a):ba(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function FE(n){return qo(n).position==="static"}function pL(n,e){if(!Ra(n)||qo(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return La(n)===t&&(t=t.ownerDocument.body),t}function _z(n,e){const t=ks(n);if(rb(n))return t;if(!Ra(n)){let i=Xc(n);for(;i&&!Fp(i);){if($o(i)&&!FE(i))return i;i=Xc(i)}return t}let r=pL(n,e);for(;r&&eee(r)&&FE(r);)r=pL(r,e);return r&&Fp(r)&&FE(r)&&!x2(r)?t:r||tee(n)||t}const fee=async function(n){const e=this.getOffsetParent||_z,t=this.getDimensions,r=await t(n.floating);return{reference:hee(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function pee(n){return qo(n).direction==="rtl"}const mee={convertOffsetParentRelativeRectToViewportRelativeRect:iee,getDocumentElement:La,getClippingRect:uee,getOffsetParent:_z,getElementRects:fee,getClientRects:see,getDimensions:dee,getScale:tp,isElement:$o,isRTL:pee};function wz(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function gee(n,e){let t=null,r;const i=La(n);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=n.getBoundingClientRect(),{left:u,top:d,width:f,height:g}=c;if(a||e(),!f||!g)return;const v=Tx(d),y=Tx(i.clientWidth-(u+f)),x=Tx(i.clientHeight-(d+g)),_=Tx(u),S={rootMargin:-v+"px "+-y+"px "+-x+"px "+-_+"px",threshold:Cs(0,Yc(1,l))||1};let M=!0;function I(L){const P=L[0].intersectionRatio;if(P!==l){if(!M)return o();P?o(!1,P):r=setTimeout(()=>{o(!1,1e-7)},1e3)}P===1&&!wz(c,n.getBoundingClientRect())&&o(),M=!1}try{t=new IntersectionObserver(I,{...S,root:i.ownerDocument})}catch{t=new IntersectionObserver(I,S)}t.observe(n)}return o(!0),s}function yee(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=w2(n),u=i||s?[...c?Oy(c):[],...Oy(e)]:[];u.forEach(_=>{i&&_.addEventListener("scroll",t,{passive:!0}),s&&_.addEventListener("resize",t)});const d=c&&a?gee(c,t):null;let f=-1,g=null;o&&(g=new ResizeObserver(_=>{let[w]=_;w&&w.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var S;(S=g)==null||S.observe(e)})),t()}),c&&!l&&g.observe(c),g.observe(e));let v,y=l?Ud(n):null;l&&x();function x(){const _=Ud(n);y&&!wz(y,_)&&t(),y=_,v=requestAnimationFrame(x)}return t(),()=>{var _;u.forEach(w=>{i&&w.removeEventListener("scroll",t),s&&w.removeEventListener("resize",t)}),d==null||d(),(_=g)==null||_.disconnect(),g=null,l&&cancelAnimationFrame(v)}}const vee=XZ,xee=QZ,_ee=qZ,wee=ZZ,bee=KZ,mL=$Z,See=JZ,Eee=(n,e,t)=>{const r=new Map,i={platform:mee,...t},s={...i.platform,_c:r};return GZ(n,e,{...i,platform:s})};var B_=typeof document<"u"?R.useLayoutEffect:R.useEffect;function Bw(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Bw(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!Bw(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function bz(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function gL(n,e){const t=bz(n);return Math.round(e*t)/t}function jE(n){const e=R.useRef(n);return B_(()=>{e.current=n}),e}function Tee(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,d]=R.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[f,g]=R.useState(r);Bw(f,r)||g(r);const[v,y]=R.useState(null),[x,_]=R.useState(null),w=R.useCallback(z=>{z!==L.current&&(L.current=z,y(z))},[]),S=R.useCallback(z=>{z!==P.current&&(P.current=z,_(z))},[]),M=s||v,I=o||x,L=R.useRef(null),P=R.useRef(null),T=R.useRef(u),C=l!=null,k=jE(l),O=jE(i),U=jE(c),V=R.useCallback(()=>{if(!L.current||!P.current)return;const z={placement:e,strategy:t,middleware:f};O.current&&(z.platform=O.current),Eee(L.current,P.current,z).then(G=>{const q={...G,isPositioned:U.current!==!1};B.current&&!Bw(T.current,q)&&(T.current=q,sh.flushSync(()=>{d(q)}))})},[f,e,t,O,U]);B_(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d(z=>({...z,isPositioned:!1})))},[c]);const B=R.useRef(!1);B_(()=>(B.current=!0,()=>{B.current=!1}),[]),B_(()=>{if(M&&(L.current=M),I&&(P.current=I),M&&I){if(k.current)return k.current(M,I,V);V()}},[M,I,V,k,C]);const Z=R.useMemo(()=>({reference:L,floating:P,setReference:w,setFloating:S}),[w,S]),ne=R.useMemo(()=>({reference:M,floating:I}),[M,I]),oe=R.useMemo(()=>{const z={position:t,left:0,top:0};if(!ne.floating)return z;const G=gL(ne.floating,u.x),q=gL(ne.floating,u.y);return a?{...z,transform:"translate("+G+"px, "+q+"px)",...bz(ne.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:G,top:q}},[t,a,ne.floating,u.x,u.y]);return R.useMemo(()=>({...u,update:V,refs:Z,elements:ne,floatingStyles:oe}),[u,V,Z,ne,oe])}const Mee=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?mL({element:r.current,padding:i}).fn(t):{}:r?mL({element:r,padding:i}).fn(t):{}}}},Aee=(n,e)=>({...vee(n),options:[n,e]}),Cee=(n,e)=>({...xee(n),options:[n,e]}),Pee=(n,e)=>({...See(n),options:[n,e]}),Iee=(n,e)=>({..._ee(n),options:[n,e]}),Ree=(n,e)=>({...wee(n),options:[n,e]}),kee=(n,e)=>({...bee(n),options:[n,e]}),Nee=(n,e)=>({...Mee(n),options:[n,e]});var Dee="Arrow",Sz=R.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return m.jsx(Gt.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});Sz.displayName=Dee;var Lee=Sz;function Oee(n){const[e,t]=R.useState(void 0);return li(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var S2="Popper",[Ez,sb]=Fl(S2),[Fee,Tz]=Ez(S2),Mz=n=>{const{__scopePopper:e,children:t}=n,[r,i]=R.useState(null);return m.jsx(Fee,{scope:e,anchor:r,onAnchorChange:i,children:t})};Mz.displayName=S2;var Az="PopperAnchor",Cz=R.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=Tz(Az,t),o=R.useRef(null),a=Mn(e,o);return R.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:m.jsx(Gt.div,{...i,ref:a})});Cz.displayName=Az;var E2="PopperContent",[jee,Vee]=Ez(E2),Pz=R.forwardRef((n,e)=>{var ae,Se,Re,Ae,Te,te;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:g="optimized",onPlaced:v,...y}=n,x=Tz(E2,t),[_,w]=R.useState(null),S=Mn(e,le=>w(le)),[M,I]=R.useState(null),L=Oee(M),P=(L==null?void 0:L.width)??0,T=(L==null?void 0:L.height)??0,C=r+(s!=="center"?"-"+s:""),k=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},O=Array.isArray(c)?c:[c],U=O.length>0,V={padding:k,boundary:O.filter(zee),altBoundary:U},{refs:B,floatingStyles:Z,placement:ne,isPositioned:oe,middlewareData:z}=Tee({strategy:"fixed",placement:C,whileElementsMounted:(...le)=>yee(...le,{animationFrame:g==="always"}),elements:{reference:x.anchor},middleware:[Aee({mainAxis:i+T,alignmentAxis:o}),l&&Cee({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?Pee():void 0,...V}),l&&Iee({...V}),Ree({...V,apply:({elements:le,rects:we,availableWidth:Be,availableHeight:Fe})=>{const{width:Je,height:Ze}=we.reference,et=le.floating.style;et.setProperty("--radix-popper-available-width",`${Be}px`),et.setProperty("--radix-popper-available-height",`${Fe}px`),et.setProperty("--radix-popper-anchor-width",`${Je}px`),et.setProperty("--radix-popper-anchor-height",`${Ze}px`)}}),M&&Nee({element:M,padding:a}),Bee({arrowWidth:P,arrowHeight:T}),f&&kee({strategy:"referenceHidden",...V})]}),[G,q]=kz(ne),se=vo(v);li(()=>{oe&&(se==null||se())},[oe,se]);const J=(ae=z.arrow)==null?void 0:ae.x,he=(Se=z.arrow)==null?void 0:Se.y,_e=((Re=z.arrow)==null?void 0:Re.centerOffset)!==0,[re,Y]=R.useState();return li(()=>{_&&Y(window.getComputedStyle(_).zIndex)},[_]),m.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:oe?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:re,"--radix-popper-transform-origin":[(Ae=z.transformOrigin)==null?void 0:Ae.x,(Te=z.transformOrigin)==null?void 0:Te.y].join(" "),...((te=z.hide)==null?void 0:te.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:m.jsx(jee,{scope:t,placedSide:G,onArrowChange:I,arrowX:J,arrowY:he,shouldHideArrow:_e,children:m.jsx(Gt.div,{"data-side":G,"data-align":q,...y,ref:S,style:{...y.style,animation:oe?void 0:"none"}})})})});Pz.displayName=E2;var Iz="PopperArrow",Uee={top:"bottom",right:"left",bottom:"top",left:"right"},Rz=R.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=Vee(Iz,r),o=Uee[s.placedSide];return m.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:m.jsx(Lee,{...i,ref:t,style:{...i.style,display:"block"}})})});Rz.displayName=Iz;function zee(n){return n!==null}var Bee=n=>({name:"transformOrigin",options:n,fn(e){var x,_,w;const{placement:t,rects:r,middlewareData:i}=e,o=((x=i.arrow)==null?void 0:x.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,u]=kz(t),d={start:"0%",center:"50%",end:"100%"}[u],f=(((_=i.arrow)==null?void 0:_.x)??0)+a/2,g=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let v="",y="";return c==="bottom"?(v=o?d:`${f}px`,y=`${-l}px`):c==="top"?(v=o?d:`${f}px`,y=`${r.floating.height+l}px`):c==="right"?(v=`${-l}px`,y=o?d:`${g}px`):c==="left"&&(v=`${r.floating.width+l}px`,y=o?d:`${g}px`),{data:{x:v,y}}}});function kz(n){const[e,t="center"]=n.split("-");return[e,t]}var Hee=Mz,Nz=Cz,Dz=Pz,Lz=Rz,[ob,eCe]=Fl("Tooltip",[sb]),T2=sb(),Oz="TooltipProvider",Wee=700,yL="tooltip.open",[Gee,Fz]=ob(Oz),jz=n=>{const{__scopeTooltip:e,delayDuration:t=Wee,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=n,o=R.useRef(!0),a=R.useRef(!1),l=R.useRef(0);return R.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),m.jsx(Gee,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:R.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:R.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:R.useCallback(c=>{a.current=c},[]),disableHoverableContent:i,children:s})};jz.displayName=Oz;var Vz="Tooltip",[tCe,ab]=ob(Vz),uA="TooltipTrigger",$ee=R.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=ab(uA,t),s=Fz(uA,t),o=T2(t),a=R.useRef(null),l=Mn(e,a,i.onTriggerChange),c=R.useRef(!1),u=R.useRef(!1),d=R.useCallback(()=>c.current=!1,[]);return R.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),m.jsx(Nz,{asChild:!0,...o,children:m.jsx(Gt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:wt(n.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:wt(n.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:wt(n.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:wt(n.onFocus,()=>{c.current||i.onOpen()}),onBlur:wt(n.onBlur,i.onClose),onClick:wt(n.onClick,i.onClose)})})});$ee.displayName=uA;var qee="TooltipPortal",[nCe,Kee]=ob(qee,{forceMount:void 0}),jp="TooltipContent",Uz=R.forwardRef((n,e)=>{const t=Kee(jp,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=ab(jp,n.__scopeTooltip);return m.jsx(oh,{present:r||o.open,children:o.disableHoverableContent?m.jsx(zz,{side:i,...s,ref:e}):m.jsx(Yee,{side:i,...s,ref:e})})}),Yee=R.forwardRef((n,e)=>{const t=ab(jp,n.__scopeTooltip),r=Fz(jp,n.__scopeTooltip),i=R.useRef(null),s=Mn(e,i),[o,a]=R.useState(null),{trigger:l,onClose:c}=t,u=i.current,{onPointerInTransitChange:d}=r,f=R.useCallback(()=>{a(null),d(!1)},[d]),g=R.useCallback((v,y)=>{const x=v.currentTarget,_={x:v.clientX,y:v.clientY},w=ete(_,x.getBoundingClientRect()),S=tte(_,w),M=nte(y.getBoundingClientRect()),I=ite([...S,...M]);a(I),d(!0)},[d]);return R.useEffect(()=>()=>f(),[f]),R.useEffect(()=>{if(l&&u){const v=x=>g(x,u),y=x=>g(x,l);return l.addEventListener("pointerleave",v),u.addEventListener("pointerleave",y),()=>{l.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",y)}}},[l,u,g,f]),R.useEffect(()=>{if(o){const v=y=>{const x=y.target,_={x:y.clientX,y:y.clientY},w=(l==null?void 0:l.contains(x))||(u==null?void 0:u.contains(x)),S=!rte(_,o);w?f():S&&(f(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,u,o,c,f]),m.jsx(zz,{...n,ref:s})}),[Xee,Qee]=ob(Vz,{isInside:!1}),Jee=S5("TooltipContent"),zz=R.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=ab(jp,t),c=T2(t),{onClose:u}=l;return R.useEffect(()=>(document.addEventListener(yL,u),()=>document.removeEventListener(yL,u)),[u]),R.useEffect(()=>{if(l.trigger){const d=f=>{const g=f.target;g!=null&&g.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),m.jsx(kv,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:m.jsxs(Dz,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[m.jsx(Jee,{children:r}),m.jsx(Xee,{scope:t,isInside:!0,children:m.jsx(aJ,{id:l.contentId,role:"tooltip",children:i||r})})]})})});Uz.displayName=jp;var Bz="TooltipArrow",Zee=R.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=T2(t);return Qee(Bz,t).isInside?null:m.jsx(Lz,{...i,...r,ref:e})});Zee.displayName=Bz;function ete(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function tte(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function nte(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function rte(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,d=l.x,f=l.y;u>r!=f>r&&t<(d-c)*(r-u)/(f-u)+c&&(i=!i)}return i}function ite(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),ste(e)}function ste(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var ote=jz,Hz=Uz;const ate=ote,lte=R.forwardRef(({className:n,sideOffset:e=4,...t},r)=>m.jsx(Hz,{ref:r,sideOffset:e,className:gt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...t}));lte.displayName=Hz.displayName;const zo=R.forwardRef(({className:n,...e},t)=>m.jsx("div",{ref:t,className:gt("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));zo.displayName="Card";const np=R.forwardRef(({className:n,...e},t)=>m.jsx("div",{ref:t,className:gt("flex flex-col space-y-1.5 p-6",n),...e}));np.displayName="CardHeader";const Xg=R.forwardRef(({className:n,...e},t)=>m.jsx("div",{ref:t,className:gt("text-2xl font-semibold leading-none tracking-tight",n),...e}));Xg.displayName="CardTitle";const H_=R.forwardRef(({className:n,...e},t)=>m.jsx("div",{ref:t,className:gt("text-sm text-muted-foreground",n),...e}));H_.displayName="CardDescription";const Sa=R.forwardRef(({className:n,...e},t)=>m.jsx("div",{ref:t,className:gt("p-6 pt-0",n),...e}));Sa.displayName="CardContent";const Wz=R.forwardRef(({className:n,...e},t)=>m.jsx("div",{ref:t,className:gt("flex items-center p-6 pt-0",n),...e}));Wz.displayName="CardFooter";function cte(){return m.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:m.jsx(zo,{className:"w-full max-w-md mx-4",children:m.jsxs(Sa,{className:"pt-6",children:[m.jsxs("div",{className:"flex mb-4 gap-2",children:[m.jsx(ez,{className:"h-8 w-8 text-red-500"}),m.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),m.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const M2=Z1("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),vt=R.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const o=r?jQ:"button";return m.jsx(o,{className:gt(M2({variant:e,size:t,className:n})),ref:s,...i})});vt.displayName="Button";function ute(){const[n,e]=R.useState(!1),[t]=Y1();R.useEffect(()=>{e(!1)},[t]);const r=()=>e(!n),i=[{href:"/",label:"Beranda"},{href:"/kegiatan",label:"Kegiatan"},{href:"/pembelajaran",label:"Pembelajaran"},{href:"/pendaftaran",label:"Informasi Pendaftaran"}];return m.jsxs("header",{className:"sticky top-0 z-50 transition-all duration-300 bg-white shadow-lg",children:[m.jsxs("div",{className:"relative",children:[m.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[m.jsxs(Is,{href:"/",className:"flex items-center gap-3 group",children:[m.jsx("img",{src:"https://raw.githubusercontent.com/mahapalanarotama/mahapalanarotama.github.io/refs/heads/main/Img/Logo%20Mpn.png",alt:"Logo Mahapala",className:"w-10 h-10 rounded-full shadow-md border-2 border-primary bg-white animate-navbar-logo",style:{background:"white"}}),m.jsxs("span",{className:"font-heading font-bold text-2xl tracking-widest text-primary drop-shadow-lg animate-navbar-logo",children:["MAHAPALA ",m.jsx("span",{className:"text-accent font-bold drop-shadow-md",children:"NAROTAMA"})]})]}),m.jsx("nav",{className:"hidden md:flex space-x-6",children:i.map(s=>m.jsxs(Is,{href:s.href,className:`relative px-2 py-1 font-medium transition group/nav ${t===s.href?"text-accent":"text-primary hover:text-accent"} animate-navbar-link`,children:[m.jsx("span",{className:"relative z-10",children:s.label}),m.jsx("span",{className:`absolute left-0 bottom-0 w-full h-0.5 bg-accent rounded transition-all duration-300 scale-x-0 group-hover/nav:scale-x-100 ${t===s.href?"scale-x-100":""}`})]},s.href))}),m.jsx(vt,{variant:"ghost",size:"icon",className:"md:hidden text-primary",onClick:r,"aria-label":"Menu",children:m.jsx(WJ,{className:"h-6 w-6"})})]}),m.jsx("div",{className:"absolute left-0 right-0 top-0 h-8 overflow-hidden pointer-events-none select-none",children:m.jsxs("div",{className:"absolute left-0 top-0 w-full h-full flex gap-8 animate-clouds",children:[m.jsx("div",{className:"w-16 h-8 bg-white rounded-full opacity-70 blur-sm animate-cloud-move",style:{animationDelay:"0s"}}),m.jsx("div",{className:"w-24 h-10 bg-white rounded-full opacity-60 blur-md animate-cloud-move",style:{animationDelay:"2s"}}),m.jsx("div",{className:"w-20 h-8 bg-white rounded-full opacity-50 blur animate-cloud-move",style:{animationDelay:"4s"}})]})})]}),n&&m.jsx("div",{className:"md:hidden bg-white animate-navbar-mobile rounded-b-2xl shadow-2xl",children:m.jsxs("div",{className:"container mx-auto px-4 py-2 flex flex-col space-y-2",children:[m.jsx("div",{className:"flex justify-end",children:m.jsx(vt,{variant:"ghost",size:"icon",className:"text-primary",onClick:r,"aria-label":"Close menu",children:m.jsx(p2,{className:"h-6 w-6"})})}),i.map(s=>m.jsx(Is,{href:s.href,children:m.jsx("a",{className:`block text-lg font-semibold py-2 px-4 rounded transition-all duration-300 hover:bg-accent/20 hover:text-accent ${t===s.href?"text-accent bg-accent/10":"text-primary"}`,children:s.label})},s.href))]})})]})}var Gz={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},vL=Ht.createContext&&Ht.createContext(Gz),dte=["attr","size","title"];function hte(n,e){if(n==null)return{};var t=fte(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function fte(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Hw(){return Hw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Hw.apply(this,arguments)}function xL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ww(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xL(Object(t),!0).forEach(function(r){pte(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xL(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function pte(n,e,t){return e=mte(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mte(n){var e=gte(n,"string");return typeof e=="symbol"?e:e+""}function gte(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function $z(n){return n&&n.map((e,t)=>Ht.createElement(e.tag,Ww({key:t},e.attr),$z(e.child)))}function yte(n){return e=>Ht.createElement(vte,Hw({attr:Ww({},n.attr)},e),$z(n.child))}function vte(n){var e=t=>{var{attr:r,size:i,title:s}=n,o=hte(n,dte),a=i||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),Ht.createElement("svg",Hw({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:l,style:Ww(Ww({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Ht.createElement("title",null,s),n.children)};return vL!==void 0?Ht.createElement(vL.Consumer,null,t=>e(t)):e(Gz)}function xte(n){return yte({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"},child:[]}]})(n)}function _te(){const n=new Date().getFullYear();return m.jsx("footer",{className:"bg-gray-800 text-white pt-12 pb-6",children:m.jsxs("div",{className:"container mx-auto px-4",children:[m.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-8",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-heading text-xl font-bold mb-4",children:"Tentang Kami"}),m.jsx("p",{className:"text-gray-300 mb-4",children:"Mahapala Narotama adalah organisasi yang bergerak di bidang eksplorasi alam dan pelestarian lingkungan."}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("a",{href:"https://www.instagram.com/mahapalanarotama?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition","aria-label":"Instagram",children:m.jsx(eb,{className:"h-5 w-5"})}),m.jsx("a",{href:"https://www.youtube.com/@mahapalanarotama1216",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition","aria-label":"YouTube",children:m.jsx(JJ,{className:"h-5 w-5"})}),m.jsx("a",{href:"https://tiktok.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition","aria-label":"TikTok",children:m.jsx(xte,{className:"h-5 w-5"})})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-heading text-xl font-bold mb-4",children:"Link Terkait"}),m.jsxs("ul",{className:"space-y-2",children:[m.jsx("li",{children:m.jsx("a",{href:"https://narotama.ac.id",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition",children:"Universitas Narotama"})}),m.jsx("li",{children:m.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition",children:"MAPALA Indonesia"})}),m.jsx("li",{children:m.jsx(Is,{href:"/kegiatan",className:"text-gray-300 hover:text-white transition",children:"Daftar Kegiatan"})}),m.jsx("li",{children:m.jsx(Is,{href:"/kegiatan",className:"text-gray-300 hover:text-white transition",children:"Galeri Foto"})})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-heading text-xl font-bold mb-4",children:"Hubungi Kami"}),m.jsxs("address",{className:"not-italic text-gray-300",children:[m.jsxs("p",{className:"mb-2 flex items-center",children:[m.jsx(tz,{className:"h-5 w-5 mr-2",strokeWidth:2}),m.jsx("span",{children:"Jl. Arief Rachman Hakim No. 51, Klampis Ngasem, Sukolilo, Kota Surabaya, Jawa Timur"})]}),m.jsxs("p",{className:"mb-2 flex items-center",children:[m.jsx(tb,{className:"h-5 w-5 mr-2",strokeWidth:2}),m.jsx("span",{children:"(031) 34133 2882"})]}),m.jsxs("p",{className:"flex items-center",children:[m.jsx(Dy,{className:"h-5 w-5 mr-2",strokeWidth:2}),m.jsx("span",{children:"ukm.mahapala@narotama.ac.id"})]})]})]})]}),m.jsx("div",{className:"border-t border-gray-700 pt-6",children:m.jsxs("p",{className:"text-center text-gray-400 text-sm",children:[" ",n," Mahapala Narotama. All rights reserved."]})})]})})}var VE="focusScope.autoFocusOnMount",UE="focusScope.autoFocusOnUnmount",_L={bubbles:!1,cancelable:!0},wte="FocusScope",A2=R.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=n,[a,l]=R.useState(null),c=vo(i),u=vo(s),d=R.useRef(null),f=Mn(e,y=>l(y)),g=R.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;R.useEffect(()=>{if(r){let y=function(S){if(g.paused||!a)return;const M=S.target;a.contains(M)?d.current=M:ac(d.current,{select:!0})},x=function(S){if(g.paused||!a)return;const M=S.relatedTarget;M!==null&&(a.contains(M)||ac(d.current,{select:!0}))},_=function(S){if(document.activeElement===document.body)for(const I of S)I.removedNodes.length>0&&ac(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",x);const w=new MutationObserver(_);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",x),w.disconnect()}}},[r,a,g.paused]),R.useEffect(()=>{if(a){bL.add(g);const y=document.activeElement;if(!a.contains(y)){const _=new CustomEvent(VE,_L);a.addEventListener(VE,c),a.dispatchEvent(_),_.defaultPrevented||(bte(Ate(qz(a)),{select:!0}),document.activeElement===y&&ac(a))}return()=>{a.removeEventListener(VE,c),setTimeout(()=>{const _=new CustomEvent(UE,_L);a.addEventListener(UE,u),a.dispatchEvent(_),_.defaultPrevented||ac(y??document.body,{select:!0}),a.removeEventListener(UE,u),bL.remove(g)},0)}}},[a,c,u,g]);const v=R.useCallback(y=>{if(!t&&!r||g.paused)return;const x=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,_=document.activeElement;if(x&&_){const w=y.currentTarget,[S,M]=Ste(w);S&&M?!y.shiftKey&&_===M?(y.preventDefault(),t&&ac(S,{select:!0})):y.shiftKey&&_===S&&(y.preventDefault(),t&&ac(M,{select:!0})):_===w&&y.preventDefault()}},[t,r,g.paused]);return m.jsx(Gt.div,{tabIndex:-1,...o,ref:f,onKeyDown:v})});A2.displayName=wte;function bte(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(ac(r,{select:e}),document.activeElement!==t)return}function Ste(n){const e=qz(n),t=wL(e,n),r=wL(e.reverse(),n);return[t,r]}function qz(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function wL(n,e){for(const t of n)if(!Ete(t,{upTo:e}))return t}function Ete(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function Tte(n){return n instanceof HTMLInputElement&&"select"in n}function ac(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&Tte(n)&&e&&n.select()}}var bL=Mte();function Mte(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=SL(n,e),n.unshift(e)},remove(e){var t;n=SL(n,e),(t=n[0])==null||t.resume()}}}function SL(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function Ate(n){return n.filter(e=>e.tagName!=="A")}var zE=0;function Kz(){R.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??EL()),document.body.insertAdjacentElement("beforeend",n[1]??EL()),zE++,()=>{zE===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),zE--}},[])}function EL(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var ya=function(){return ya=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},ya.apply(this,arguments)};function Lv(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Cte(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var W_="right-scroll-bar-position",G_="width-before-scroll-bar",Pte="with-scroll-bars-hidden",Ite="--removed-body-scroll-bar-size";function BE(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function Rte(n,e){var t=R.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var kte=typeof window<"u"?R.useLayoutEffect:R.useEffect,TL=new WeakMap;function Nte(n,e){var t=Rte(null,function(r){return n.forEach(function(i){return BE(i,r)})});return kte(function(){var r=TL.get(t);if(r){var i=new Set(r),s=new Set(n),o=t.current;i.forEach(function(a){s.has(a)||BE(a,null)}),s.forEach(function(a){i.has(a)||BE(a,o)})}TL.set(t,n)},[n]),t}function Dte(n){return n}function Lte(n,e){e===void 0&&(e=Dte);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(s){var o=e(s,r);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;t.length;){var o=t;t=[],o.forEach(s)}t={push:function(a){return s(a)},filter:function(){return t}}},assignMedium:function(s){r=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(s),o=t}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return i}function Ote(n){n===void 0&&(n={});var e=Lte(null);return e.options=ya({async:!0,ssr:!1},n),e}var Yz=function(n){var e=n.sideCar,t=Lv(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return R.createElement(r,ya({},t))};Yz.isSideCarExport=!0;function Fte(n,e){return n.useMedium(e),Yz}var Xz=Ote(),HE=function(){},lb=R.forwardRef(function(n,e){var t=R.useRef(null),r=R.useState({onScrollCapture:HE,onWheelCapture:HE,onTouchMoveCapture:HE}),i=r[0],s=r[1],o=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,u=n.enabled,d=n.shards,f=n.sideCar,g=n.noRelative,v=n.noIsolation,y=n.inert,x=n.allowPinchZoom,_=n.as,w=_===void 0?"div":_,S=n.gapMode,M=Lv(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=f,L=Nte([t,e]),P=ya(ya({},M),i);return R.createElement(R.Fragment,null,u&&R.createElement(I,{sideCar:Xz,removeScrollBar:c,shards:d,noRelative:g,noIsolation:v,inert:y,setCallbacks:s,allowPinchZoom:!!x,lockRef:t,gapMode:S}),o?R.cloneElement(R.Children.only(a),ya(ya({},P),{ref:L})):R.createElement(w,ya({},P,{className:l,ref:L}),a))});lb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};lb.classNames={fullWidth:G_,zeroRight:W_};var jte=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Vte(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=jte();return e&&n.setAttribute("nonce",e),n}function Ute(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function zte(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var Bte=function(){var n=0,e=null;return{add:function(t){n==0&&(e=Vte())&&(Ute(e,t),zte(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Hte=function(){var n=Bte();return function(e,t){R.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},Qz=function(){var n=Hte(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},Wte={left:0,top:0,right:0,gap:0},WE=function(n){return parseInt(n||"",10)||0},Gte=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[WE(t),WE(r),WE(i)]},$te=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return Wte;var e=Gte(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},qte=Qz(),rp="data-scroll-locked",Kte=function(n,e,t,r){var i=n.left,s=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(Pte,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(rp,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(W_,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(G_,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(W_," .").concat(W_,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(G_," .").concat(G_,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(rp,`] {
    `).concat(Ite,": ").concat(a,`px;
  }
`)},ML=function(){var n=parseInt(document.body.getAttribute(rp)||"0",10);return isFinite(n)?n:0},Yte=function(){R.useEffect(function(){return document.body.setAttribute(rp,(ML()+1).toString()),function(){var n=ML()-1;n<=0?document.body.removeAttribute(rp):document.body.setAttribute(rp,n.toString())}},[])},Xte=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;Yte();var s=R.useMemo(function(){return $te(i)},[i]);return R.createElement(qte,{styles:Kte(s,!e,i,t?"":"!important")})},dA=!1;if(typeof window<"u")try{var Mx=Object.defineProperty({},"passive",{get:function(){return dA=!0,!0}});window.addEventListener("test",Mx,Mx),window.removeEventListener("test",Mx,Mx)}catch{dA=!1}var Gh=dA?{passive:!1}:!1,Qte=function(n){return n.tagName==="TEXTAREA"},Jz=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!Qte(n)&&t[e]==="visible")},Jte=function(n){return Jz(n,"overflowY")},Zte=function(n){return Jz(n,"overflowX")},AL=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Zz(n,r);if(i){var s=eB(n,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},ene=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},tne=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},Zz=function(n,e){return n==="v"?Jte(e):Zte(e)},eB=function(n,e){return n==="v"?ene(e):tne(e)},nne=function(n,e){return n==="h"&&e==="rtl"?-1:1},rne=function(n,e,t,r,i){var s=nne(n,window.getComputedStyle(e).direction),o=s*r,a=t.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{var g=eB(n,a),v=g[0],y=g[1],x=g[2],_=y-x-s*v;(v||_)&&Zz(n,a)&&(d+=_,f+=v),a=a.parentNode.host||a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},Ax=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},CL=function(n){return[n.deltaX,n.deltaY]},PL=function(n){return n&&"current"in n?n.current:n},ine=function(n,e){return n[0]===e[0]&&n[1]===e[1]},sne=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},one=0,$h=[];function ane(n){var e=R.useRef([]),t=R.useRef([0,0]),r=R.useRef(),i=R.useState(one++)[0],s=R.useState(Qz)[0],o=R.useRef(n);R.useEffect(function(){o.current=n},[n]),R.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var y=Cte([n.lockRef.current],(n.shards||[]).map(PL),!0).filter(Boolean);return y.forEach(function(x){return x.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var a=R.useCallback(function(y,x){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var _=Ax(y),w=t.current,S="deltaX"in y?y.deltaX:w[0]-_[0],M="deltaY"in y?y.deltaY:w[1]-_[1],I,L=y.target,P=Math.abs(S)>Math.abs(M)?"h":"v";if("touches"in y&&P==="h"&&L.type==="range")return!1;var T=AL(P,L);if(!T)return!0;if(T?I=P:(I=P==="v"?"h":"v",T=AL(P,L)),!T)return!1;if(!r.current&&"changedTouches"in y&&(S||M)&&(r.current=I),!I)return!0;var C=r.current||I;return rne(C,x,y,C==="h"?S:M)},[]),l=R.useCallback(function(y){var x=y;if(!(!$h.length||$h[$h.length-1]!==s)){var _="deltaY"in x?CL(x):Ax(x),w=e.current.filter(function(I){return I.name===x.type&&(I.target===x.target||x.target===I.shadowParent)&&ine(I.delta,_)})[0];if(w&&w.should){x.cancelable&&x.preventDefault();return}if(!w){var S=(o.current.shards||[]).map(PL).filter(Boolean).filter(function(I){return I.contains(x.target)}),M=S.length>0?a(x,S[0]):!o.current.noIsolation;M&&x.cancelable&&x.preventDefault()}}},[]),c=R.useCallback(function(y,x,_,w){var S={name:y,delta:x,target:_,should:w,shadowParent:lne(_)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(M){return M!==S})},1)},[]),u=R.useCallback(function(y){t.current=Ax(y),r.current=void 0},[]),d=R.useCallback(function(y){c(y.type,CL(y),y.target,a(y,n.lockRef.current))},[]),f=R.useCallback(function(y){c(y.type,Ax(y),y.target,a(y,n.lockRef.current))},[]);R.useEffect(function(){return $h.push(s),n.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Gh),document.addEventListener("touchmove",l,Gh),document.addEventListener("touchstart",u,Gh),function(){$h=$h.filter(function(y){return y!==s}),document.removeEventListener("wheel",l,Gh),document.removeEventListener("touchmove",l,Gh),document.removeEventListener("touchstart",u,Gh)}},[]);var g=n.removeScrollBar,v=n.inert;return R.createElement(R.Fragment,null,v?R.createElement(s,{styles:sne(i)}):null,g?R.createElement(Xte,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function lne(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const cne=Fte(Xz,ane);var C2=R.forwardRef(function(n,e){return R.createElement(lb,ya({},n,{ref:e,sideCar:cne}))});C2.classNames=lb.classNames;var une=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},qh=new WeakMap,Cx=new WeakMap,Px={},GE=0,tB=function(n){return n&&(n.host||tB(n.parentNode))},dne=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=tB(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},hne=function(n,e,t,r){var i=dne(e,Array.isArray(n)?n:[n]);Px[t]||(Px[t]=new WeakMap);var s=Px[t],o=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var g=f.getAttribute(r),v=g!==null&&g!=="false",y=(qh.get(f)||0)+1,x=(s.get(f)||0)+1;qh.set(f,y),s.set(f,x),o.push(f),y===1&&v&&Cx.set(f,!0),x===1&&f.setAttribute(t,"true"),v||f.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",f,_)}})};return u(e),a.clear(),GE++,function(){o.forEach(function(d){var f=qh.get(d)-1,g=s.get(d)-1;qh.set(d,f),s.set(d,g),f||(Cx.has(d)||d.removeAttribute(r),Cx.delete(d)),g||d.removeAttribute(t)}),GE--,GE||(qh=new WeakMap,qh=new WeakMap,Cx=new WeakMap,Px={})}},nB=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=une(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),hne(r,i,t,"aria-hidden")):function(){return null}},cb="Dialog",[rB,iB]=Fl(cb),[fne,Jo]=rB(cb),sB=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=n,a=R.useRef(null),l=R.useRef(null),[c,u]=Op({prop:r,defaultProp:i??!1,onChange:s,caller:cb});return m.jsx(fne,{scope:e,triggerRef:a,contentRef:l,contentId:Vc(),titleId:Vc(),descriptionId:Vc(),open:c,onOpenChange:u,onOpenToggle:R.useCallback(()=>u(d=>!d),[u]),modal:o,children:t})};sB.displayName=cb;var oB="DialogTrigger",aB=R.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Jo(oB,t),s=Mn(e,i.triggerRef);return m.jsx(Gt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":R2(i.open),...r,ref:s,onClick:wt(n.onClick,i.onOpenToggle)})});aB.displayName=oB;var P2="DialogPortal",[pne,lB]=rB(P2,{forceMount:void 0}),cB=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,s=Jo(P2,e);return m.jsx(pne,{scope:e,forceMount:t,children:R.Children.map(r,o=>m.jsx(oh,{present:t||s.open,children:m.jsx(X1,{asChild:!0,container:i,children:o})}))})};cB.displayName=P2;var Gw="DialogOverlay",uB=R.forwardRef((n,e)=>{const t=lB(Gw,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=Jo(Gw,n.__scopeDialog);return s.modal?m.jsx(oh,{present:r||s.open,children:m.jsx(gne,{...i,ref:e})}):null});uB.displayName=Gw;var mne=Lp("DialogOverlay.RemoveScroll"),gne=R.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Jo(Gw,t);return m.jsx(C2,{as:mne,allowPinchZoom:!0,shards:[i.contentRef],children:m.jsx(Gt.div,{"data-state":R2(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),zd="DialogContent",dB=R.forwardRef((n,e)=>{const t=lB(zd,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=Jo(zd,n.__scopeDialog);return m.jsx(oh,{present:r||s.open,children:s.modal?m.jsx(yne,{...i,ref:e}):m.jsx(vne,{...i,ref:e})})});dB.displayName=zd;var yne=R.forwardRef((n,e)=>{const t=Jo(zd,n.__scopeDialog),r=R.useRef(null),i=Mn(e,t.contentRef,r);return R.useEffect(()=>{const s=r.current;if(s)return nB(s)},[]),m.jsx(hB,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:wt(n.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:wt(n.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:wt(n.onFocusOutside,s=>s.preventDefault())})}),vne=R.forwardRef((n,e)=>{const t=Jo(zd,n.__scopeDialog),r=R.useRef(!1),i=R.useRef(!1);return m.jsx(hB,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=n.onCloseAutoFocus)==null||o.call(n,s),s.defaultPrevented||(r.current||(a=t.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=n.onInteractOutside)==null||l.call(n,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=t.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),hB=R.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=n,a=Jo(zd,t),l=R.useRef(null),c=Mn(e,l);return Kz(),m.jsxs(m.Fragment,{children:[m.jsx(A2,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:m.jsx(kv,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":R2(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx(_ne,{titleId:a.titleId}),m.jsx(bne,{contentRef:l,descriptionId:a.descriptionId})]})]})}),I2="DialogTitle",fB=R.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Jo(I2,t);return m.jsx(Gt.h2,{id:i.titleId,...r,ref:e})});fB.displayName=I2;var pB="DialogDescription",mB=R.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Jo(pB,t);return m.jsx(Gt.p,{id:i.descriptionId,...r,ref:e})});mB.displayName=pB;var gB="DialogClose",yB=R.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Jo(gB,t);return m.jsx(Gt.button,{type:"button",...r,ref:e,onClick:wt(n.onClick,()=>i.onOpenChange(!1))})});yB.displayName=gB;function R2(n){return n?"open":"closed"}var vB="DialogTitleWarning",[xne,xB]=OQ(vB,{contentName:zd,titleName:I2,docsSlug:"dialog"}),_ne=({titleId:n})=>{const e=xB(vB),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return R.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},wne="DialogDescriptionWarning",bne=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${xB(wne).contentName}}.`;return R.useEffect(()=>{var s;const i=(s=n.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},_B=sB,Sne=aB,wB=cB,k2=uB,N2=dB,D2=fB,L2=mB,O2=yB;const Qc=_B,Ene=wB,bB=R.forwardRef(({className:n,...e},t)=>m.jsx(k2,{ref:t,className:gt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));bB.displayName=k2.displayName;const Ml=R.forwardRef(({className:n,children:e,...t},r)=>m.jsxs(Ene,{children:[m.jsx(bB,{}),m.jsxs(N2,{ref:r,className:gt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,m.jsxs(O2,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[m.jsx(p2,{className:"h-4 w-4"}),m.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ml.displayName=N2.displayName;const ub=({className:n,...e})=>m.jsx("div",{className:gt("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});ub.displayName="DialogHeader";const F2=({className:n,...e})=>m.jsx("div",{className:gt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});F2.displayName="DialogFooter";const db=R.forwardRef(({className:n,...e},t)=>m.jsx(D2,{ref:t,className:gt("text-lg font-semibold leading-none tracking-tight",n),...e}));db.displayName=D2.displayName;const j2=R.forwardRef(({className:n,...e},t)=>m.jsx(L2,{ref:t,className:gt("text-sm text-muted-foreground",n),...e}));j2.displayName=L2.displayName;function Tne(){const[n,e]=R.useState(!1);R.useEffect(()=>{localStorage.getItem("cookieConsent")||e(!0)},[]);const t=()=>{localStorage.setItem("cookieConsent","true"),e(!1)},r=()=>{localStorage.setItem("cookieConsent","false"),e(!1)};return m.jsx(Qc,{open:n,onOpenChange:e,children:m.jsxs(Ml,{className:"sm:max-w-[425px]",children:[m.jsxs(ub,{children:[m.jsx(db,{children:"Cookie Preferences"}),m.jsx(j2,{children:"We use cookies to enhance your browsing experience, serve personalized content, and analyze our traffic. This website uses necessary cookies for functionality and third-party cookies for analytics and social media features."})]}),m.jsx("div",{className:"grid gap-4 py-4",children:m.jsxs("div",{className:"space-y-2",children:[m.jsx("h4",{className:"font-medium",children:"We use cookies for:"}),m.jsxs("ul",{className:"list-disc pl-5 text-sm text-muted-foreground",children:[m.jsx("li",{children:"Essential website functionality"}),m.jsx("li",{children:"Authentication and security"}),m.jsx("li",{children:"Analytics and performance"}),m.jsx("li",{children:"Social media integration"})]})]})}),m.jsxs(F2,{children:[m.jsx(vt,{variant:"outline",onClick:r,children:"Essential Only"}),m.jsx(vt,{onClick:t,children:"Accept All"})]})]})})}function Mne({children:n}){const{toast:e}=_5();R.useEffect(()=>{t()},[]);const t=async()=>{try{const r="test";document.cookie=`thirdPartyTest=${r}; SameSite=None; Secure`,document.cookie.includes("thirdPartyTest")||e({title:"Cookie Settings",description:"Beberapa fitur mungkin tidak optimal karena cookie pihak ketiga diblokir. Namun, aplikasi tetap dapat digunakan.",duration:7e3})}catch(r){console.warn("Gagal cek cookie pihak ketiga:",r)}};return m.jsxs("div",{className:"flex flex-col min-h-screen",children:[m.jsx(ute,{}),m.jsx("main",{className:"flex-grow",children:n}),m.jsx(_te,{}),m.jsx(Tne,{})]})}const Ane=Z1("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",penuh:"border-transparent bg-green-700 text-white",muda:"border-transparent bg-green-200 text-green-900"}},defaultVariants:{variant:"default"}});function $i({className:n,variant:e,...t}){return m.jsx("div",{className:gt(Ane({variant:e}),n),...t})}function Fs(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function Bd(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}const SB=6048e5,Cne=864e5;let Pne={};function hb(){return Pne}function Fy(n,e){var a,l,c,u;const t=hb(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=Fs(n),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function $w(n){return Fy(n,{weekStartsOn:1})}function EB(n){const e=Fs(n),t=e.getFullYear(),r=Bd(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const i=$w(r),s=Bd(n,0);s.setFullYear(t,0,4),s.setHours(0,0,0,0);const o=$w(s);return e.getTime()>=i.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function IL(n){const e=Fs(n);return e.setHours(0,0,0,0),e}function RL(n){const e=Fs(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function TB(n,e){const t=IL(n),r=IL(e),i=+t-RL(t),s=+r-RL(r);return Math.round((i-s)/Cne)}function Ine(n){const e=EB(n),t=Bd(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),$w(t)}function Rne(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function kne(n){if(!Rne(n)&&typeof n!="number")return!1;const e=Fs(n);return!isNaN(Number(e))}function Nne(n,e){const t=Fs(n),r=Fs(e),i=kL(t,r),s=Math.abs(TB(t,r));t.setDate(t.getDate()-i*s);const o=+(kL(t,r)===-i),a=i*(s-o);return a===0?0:a}function kL(n,e){const t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Dne(n){const e=Fs(n),t=Bd(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Lne={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},One=(n,e,t)=>{let r;const i=Lne[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function ip(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const Fne={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},jne={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Vne={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Une={date:ip({formats:Fne,defaultWidth:"full"}),time:ip({formats:jne,defaultWidth:"full"}),dateTime:ip({formats:Vne,defaultWidth:"full"})},zne={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Bne=(n,e,t,r)=>zne[n];function va(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):o;i=n.formattingValues[a]||n.formattingValues[o]}else{const o=n.defaultWidth,a=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[a]||n.values[o]}const s=n.argumentCallback?n.argumentCallback(e):e;return i[s]}}const Hne={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Wne={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Gne={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$ne={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Kne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Yne=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Xne={ordinalNumber:Yne,era:va({values:Hne,defaultWidth:"wide"}),quarter:va({values:Wne,defaultWidth:"wide",argumentCallback:n=>n-1}),month:va({values:Gne,defaultWidth:"wide"}),day:va({values:$ne,defaultWidth:"wide"}),dayPeriod:va({values:qne,defaultWidth:"wide",formattingValues:Kne,defaultFormattingWidth:"wide"})};function xa(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?Jne(a,d=>d.test(o)):Qne(a,d=>d.test(o));let c;c=n.valueCallback?n.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function Qne(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function Jne(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function MB(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],s=e.match(n.parsePattern);if(!s)return null;let o=n.valueCallback?n.valueCallback(s[0]):s[0];o=t.valueCallback?t.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const Zne=/^(\d+)(th|st|nd|rd)?/i,ere=/\d+/i,tre={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},nre={any:[/^b/i,/^(a|c)/i]},rre={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ire={any:[/1/i,/2/i,/3/i,/4/i]},sre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ore={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},are={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},lre={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},cre={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ure={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},dre={ordinalNumber:MB({matchPattern:Zne,parsePattern:ere,valueCallback:n=>parseInt(n,10)}),era:xa({matchPatterns:tre,defaultMatchWidth:"wide",parsePatterns:nre,defaultParseWidth:"any"}),quarter:xa({matchPatterns:rre,defaultMatchWidth:"wide",parsePatterns:ire,defaultParseWidth:"any",valueCallback:n=>n+1}),month:xa({matchPatterns:sre,defaultMatchWidth:"wide",parsePatterns:ore,defaultParseWidth:"any"}),day:xa({matchPatterns:are,defaultMatchWidth:"wide",parsePatterns:lre,defaultParseWidth:"any"}),dayPeriod:xa({matchPatterns:cre,defaultMatchWidth:"any",parsePatterns:ure,defaultParseWidth:"any"})},hre={code:"en-US",formatDistance:One,formatLong:Une,formatRelative:Bne,localize:Xne,match:dre,options:{weekStartsOn:0,firstWeekContainsDate:1}};function fre(n){const e=Fs(n);return TB(e,Dne(e))+1}function pre(n){const e=Fs(n),t=+$w(e)-+Ine(e);return Math.round(t/SB)+1}function AB(n,e){var u,d,f,g;const t=Fs(n),r=t.getFullYear(),i=hb(),s=(e==null?void 0:e.firstWeekContainsDate)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(f=i.locale)==null?void 0:f.options)==null?void 0:g.firstWeekContainsDate)??1,o=Bd(n,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=Fy(o,e),l=Bd(n,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=Fy(l,e);return t.getTime()>=a.getTime()?r+1:t.getTime()>=c.getTime()?r:r-1}function mre(n,e){var a,l,c,u;const t=hb(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=AB(n,e),s=Bd(n,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Fy(s,e)}function gre(n,e){const t=Fs(n),r=+Fy(t,e)-+mre(t,e);return Math.round(r/SB)+1}function Sn(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const Zl={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Sn(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Sn(t+1,2)},d(n,e){return Sn(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Sn(n.getHours()%12||12,e.length)},H(n,e){return Sn(n.getHours(),e.length)},m(n,e){return Sn(n.getMinutes(),e.length)},s(n,e){return Sn(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return Sn(i,e.length)}},Kh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},NL={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return Zl.y(n,e)},Y:function(n,e,t,r){const i=AB(n,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Sn(o,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):Sn(s,e.length)},R:function(n,e){const t=EB(n);return Sn(t,e.length)},u:function(n,e){const t=n.getFullYear();return Sn(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Sn(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Sn(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return Zl.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Sn(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=gre(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Sn(i,e.length)},I:function(n,e,t){const r=pre(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Sn(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Zl.d(n,e)},D:function(n,e,t){const r=fre(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Sn(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Sn(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Sn(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Sn(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=Kh.noon:r===0?i=Kh.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=Kh.evening:r>=12?i=Kh.afternoon:r>=4?i=Kh.morning:i=Kh.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Zl.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Zl.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Sn(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Sn(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Zl.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Zl.s(n,e)},S:function(n,e){return Zl.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return LL(r);case"XXXX":case"XX":return Ju(r);case"XXXXX":case"XXX":default:return Ju(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return LL(r);case"xxxx":case"xx":return Ju(r);case"xxxxx":case"xxx":default:return Ju(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+DL(r,":");case"OOOO":default:return"GMT"+Ju(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+DL(r,":");case"zzzz":default:return"GMT"+Ju(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return Sn(r,e.length)},T:function(n,e,t){const r=n.getTime();return Sn(r,e.length)}};function DL(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),s=r%60;return s===0?t+String(i):t+String(i)+e+Sn(s,2)}function LL(n,e){return n%60===0?(n>0?"-":"+")+Sn(Math.abs(n)/60,2):Ju(n,e)}function Ju(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Sn(Math.trunc(r/60),2),s=Sn(r%60,2);return t+i+e+s}const OL=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},CB=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},yre=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return OL(n,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",OL(r,e)).replace("{{time}}",CB(i,e))},vre={p:CB,P:yre},xre=/^D+$/,_re=/^Y+$/,wre=["D","DD","YY","YYYY"];function bre(n){return xre.test(n)}function Sre(n){return _re.test(n)}function Ere(n,e,t){const r=Tre(n,e,t);if(console.warn(r),wre.includes(n))throw new RangeError(r)}function Tre(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Mre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Are=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Cre=/^'([^]*?)'?$/,Pre=/''/g,Ire=/[a-zA-Z]/;function PB(n,e,t){var u,d,f,g,v,y,x,_;const r=hb(),i=(t==null?void 0:t.locale)??r.locale??hre,s=(t==null?void 0:t.firstWeekContainsDate)??((d=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(f=r.locale)==null?void 0:f.options)==null?void 0:g.firstWeekContainsDate)??1,o=(t==null?void 0:t.weekStartsOn)??((y=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:y.weekStartsOn)??r.weekStartsOn??((_=(x=r.locale)==null?void 0:x.options)==null?void 0:_.weekStartsOn)??0,a=Fs(n);if(!kne(a))throw new RangeError("Invalid time value");let l=e.match(Are).map(w=>{const S=w[0];if(S==="p"||S==="P"){const M=vre[S];return M(w,i.formatLong)}return w}).join("").match(Mre).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const S=w[0];if(S==="'")return{isToken:!1,value:Rre(w)};if(NL[S])return{isToken:!0,value:w};if(S.match(Ire))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:w}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(w=>{if(!w.isToken)return w.value;const S=w.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&Sre(S)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&bre(S))&&Ere(S,e,String(n));const M=NL[S[0]];return M(a,S,i.localize,c)}).join("")}function Rre(n){const e=n.match(Cre);return e?e[1].replace(Pre,"'"):n}const kre={lessThanXSeconds:{one:"kurang dari 1 detik",other:"kurang dari {{count}} detik"},xSeconds:{one:"1 detik",other:"{{count}} detik"},halfAMinute:"setengah menit",lessThanXMinutes:{one:"kurang dari 1 menit",other:"kurang dari {{count}} menit"},xMinutes:{one:"1 menit",other:"{{count}} menit"},aboutXHours:{one:"sekitar 1 jam",other:"sekitar {{count}} jam"},xHours:{one:"1 jam",other:"{{count}} jam"},xDays:{one:"1 hari",other:"{{count}} hari"},aboutXWeeks:{one:"sekitar 1 minggu",other:"sekitar {{count}} minggu"},xWeeks:{one:"1 minggu",other:"{{count}} minggu"},aboutXMonths:{one:"sekitar 1 bulan",other:"sekitar {{count}} bulan"},xMonths:{one:"1 bulan",other:"{{count}} bulan"},aboutXYears:{one:"sekitar 1 tahun",other:"sekitar {{count}} tahun"},xYears:{one:"1 tahun",other:"{{count}} tahun"},overXYears:{one:"lebih dari 1 tahun",other:"lebih dari {{count}} tahun"},almostXYears:{one:"hampir 1 tahun",other:"hampir {{count}} tahun"}},Nre=(n,e,t)=>{let r;const i=kre[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"dalam waktu "+r:r+" yang lalu":r},Dre={full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"d/M/yyyy"},Lre={full:"HH.mm.ss",long:"HH.mm.ss",medium:"HH.mm",short:"HH.mm"},Ore={full:"{{date}} 'pukul' {{time}}",long:"{{date}} 'pukul' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Fre={date:ip({formats:Dre,defaultWidth:"full"}),time:ip({formats:Lre,defaultWidth:"full"}),dateTime:ip({formats:Ore,defaultWidth:"full"})},jre={lastWeek:"eeee 'lalu pukul' p",yesterday:"'Kemarin pukul' p",today:"'Hari ini pukul' p",tomorrow:"'Besok pukul' p",nextWeek:"eeee 'pukul' p",other:"P"},Vre=(n,e,t,r)=>jre[n],Ure={narrow:["SM","M"],abbreviated:["SM","M"],wide:["Sebelum Masehi","Masehi"]},zre={narrow:["1","2","3","4"],abbreviated:["K1","K2","K3","K4"],wide:["Kuartal ke-1","Kuartal ke-2","Kuartal ke-3","Kuartal ke-4"]},Bre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"],wide:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]},Hre={narrow:["M","S","S","R","K","J","S"],short:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],abbreviated:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],wide:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},Wre={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},Gre={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},$re=(n,e)=>"ke-"+Number(n),qre={ordinalNumber:$re,era:va({values:Ure,defaultWidth:"wide"}),quarter:va({values:zre,defaultWidth:"wide",argumentCallback:n=>n-1}),month:va({values:Bre,defaultWidth:"wide"}),day:va({values:Hre,defaultWidth:"wide"}),dayPeriod:va({values:Wre,defaultWidth:"wide",formattingValues:Gre,defaultFormattingWidth:"wide"})},Kre=/^ke-(\d+)?/i,Yre=/\d+/i,Xre={narrow:/^(sm|m)/i,abbreviated:/^(s\.?\s?m\.?|s\.?\s?e\.?\s?u\.?|m\.?|e\.?\s?u\.?)/i,wide:/^(sebelum masehi|sebelum era umum|masehi|era umum)/i},Qre={any:[/^s/i,/^(m|e)/i]},Jre={narrow:/^[1234]/i,abbreviated:/^K-?\s[1234]/i,wide:/^Kuartal ke-?\s?[1234]/i},Zre={any:[/1/i,/2/i,/3/i,/4/i]},eie={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|mei|jun|jul|agt|sep|okt|nov|des)/i,wide:/^(januari|februari|maret|april|mei|juni|juli|agustus|september|oktober|november|desember)/i},tie={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^ma/i,/^ap/i,/^me/i,/^jun/i,/^jul/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},nie={narrow:/^[srkjm]/i,short:/^(min|sen|sel|rab|kam|jum|sab)/i,abbreviated:/^(min|sen|sel|rab|kam|jum|sab)/i,wide:/^(minggu|senin|selasa|rabu|kamis|jumat|sabtu)/i},rie={narrow:[/^m/i,/^s/i,/^s/i,/^r/i,/^k/i,/^j/i,/^s/i],any:[/^m/i,/^sen/i,/^sel/i,/^r/i,/^k/i,/^j/i,/^sa/i]},iie={narrow:/^(a|p|tengah m|tengah h|(di(\swaktu)?) (pagi|siang|sore|malam))/i,any:/^([ap]\.?\s?m\.?|tengah malam|tengah hari|(di(\swaktu)?) (pagi|siang|sore|malam))/i},sie={any:{am:/^a/i,pm:/^pm/i,midnight:/^tengah m/i,noon:/^tengah h/i,morning:/pagi/i,afternoon:/siang/i,evening:/sore/i,night:/malam/i}},oie={ordinalNumber:MB({matchPattern:Kre,parsePattern:Yre,valueCallback:n=>parseInt(n,10)}),era:xa({matchPatterns:Xre,defaultMatchWidth:"wide",parsePatterns:Qre,defaultParseWidth:"any"}),quarter:xa({matchPatterns:Jre,defaultMatchWidth:"wide",parsePatterns:Zre,defaultParseWidth:"any",valueCallback:n=>n+1}),month:xa({matchPatterns:eie,defaultMatchWidth:"wide",parsePatterns:tie,defaultParseWidth:"any"}),day:xa({matchPatterns:nie,defaultMatchWidth:"wide",parsePatterns:rie,defaultParseWidth:"any"}),dayPeriod:xa({matchPatterns:iie,defaultMatchWidth:"any",parsePatterns:sie,defaultParseWidth:"any"})},IB={code:"id",formatDistance:Nre,formatLong:Fre,formatRelative:Vre,localize:qre,match:oie,options:{weekStartsOn:1,firstWeekContainsDate:1}};function RB({activity:n}){const e=PB(new Date(n.date),"d MMMM yyyy",{locale:IB}),t=r=>{switch(r.toLowerCase()){case"ekspedisi":return"default";case"konservasi":return"outline";case"edukasi":return"secondary";default:return"default"}};return m.jsxs(zo,{className:"h-full flex flex-col bg-white rounded-lg overflow-hidden shadow-md hover:shadow-lg transition",children:[m.jsx("div",{className:"relative h-48 overflow-hidden",children:m.jsx("img",{src:n.imageUrl||"https://images.unsplash.com/photo-1511632765486-a01980e01a18?auto=format&fit=crop&w=800&h=450",alt:n.title,className:"w-full h-full object-cover transition hover:scale-105 duration-500"})}),m.jsxs(Sa,{className:"flex-grow p-5",children:[m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsx("span",{className:"text-sm text-gray-500",children:e}),m.jsx($i,{variant:t(n.category),children:n.category})]}),m.jsx("h3",{className:"font-heading text-lg font-semibold mb-2",children:n.title}),m.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:n.description})]}),m.jsx(Wz,{className:"pt-0 px-5 pb-5",children:m.jsx(Is,{href:`/kegiatan/${n.id}`,children:m.jsx("a",{className:"text-primary font-medium hover:text-secondary transition",children:"Selengkapnya "})})})]})}function kB({module:n}){const e=t=>{switch(t.toLowerCase()){case"map":case"map-marked-alt":return m.jsx(BJ,{className:"h-5 w-5"});case"campground":case"tent":return m.jsx(KJ,{className:"h-5 w-5"});case"first-aid":case"medkit":return m.jsx(kJ,{className:"h-5 w-5"});case"compass":return m.jsx(oL,{className:"h-5 w-5"});case"mountain":return m.jsx(GJ,{className:"h-5 w-5"});case"leaf":return m.jsx(VJ,{className:"h-5 w-5"});case"water":case"droplets":return m.jsx(DJ,{className:"h-5 w-5"});case"wind":return m.jsx(QJ,{className:"h-5 w-5"});default:return m.jsx(oL,{className:"h-5 w-5"})}};return m.jsx(zo,{className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition h-full",children:m.jsxs(Sa,{className:"p-0",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx("span",{className:"bg-primary/10 text-primary p-3 rounded-full mr-4",children:e(n.icon)}),m.jsx("h3",{className:"font-heading text-lg font-semibold",children:n.title})]}),m.jsx("p",{className:"text-gray-600 mb-4",children:n.description}),m.jsxs("a",{href:n.link,className:"inline-flex items-center text-primary hover:text-secondary transition",target:"_blank",rel:"noopener noreferrer",children:[m.jsx("span",{className:"mr-2",children:"Pelajari"}),m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]})})}var Ov=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Hd=typeof window>"u"||"Deno"in globalThis;function rs(){}function aie(n,e){return typeof n=="function"?n(e):n}function hA(n){return typeof n=="number"&&n>=0&&n!==1/0}function NB(n,e){return Math.max(n+(e||0)-Date.now(),0)}function sp(n,e){return typeof n=="function"?n(e):n}function Do(n,e){return typeof n=="function"?n(e):n}function FL(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==V2(o,e.options))return!1}else if(!Vy(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function jL(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(jy(e.options.mutationKey)!==jy(s))return!1}else if(!Vy(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function V2(n,e){return((e==null?void 0:e.queryKeyHashFn)||jy)(n)}function jy(n){return JSON.stringify(n,(e,t)=>pA(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function Vy(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Vy(n[t],e[t])):!1}function DB(n,e){if(n===e)return n;const t=VL(n)&&VL(e);if(t||pA(n)&&pA(e)){const r=t?n:Object.keys(n),i=r.length,s=t?e:Object.keys(e),o=s.length,a=t?[]:{};let l=0;for(let c=0;c<o;c++){const u=t?c:s[c];(!t&&r.includes(u)||t)&&n[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=DB(n[u],e[u]),a[u]===n[u]&&n[u]!==void 0&&l++)}return i===o&&l===i?n:a}return e}function fA(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function VL(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function pA(n){if(!UL(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!UL(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function UL(n){return Object.prototype.toString.call(n)==="[object Object]"}function lie(n){return new Promise(e=>{setTimeout(e,n)})}function mA(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?DB(n,e):e}function cie(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function uie(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var U2=Symbol();function LB(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===U2?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function die(n,e){return typeof n=="function"?n(...e):!!n}var xd,vc,pp,Uj,hie=(Uj=class extends Ov{constructor(){super();Mt(this,xd);Mt(this,vc);Mt(this,pp);lt(this,pp,e=>{if(!Hd&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ce(this,vc)||this.setEventListener(ce(this,pp))}onUnsubscribe(){var e;this.hasListeners()||((e=ce(this,vc))==null||e.call(this),lt(this,vc,void 0))}setEventListener(e){var t;lt(this,pp,e),(t=ce(this,vc))==null||t.call(this),lt(this,vc,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ce(this,xd)!==e&&(lt(this,xd,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof ce(this,xd)=="boolean"?ce(this,xd):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},xd=new WeakMap,vc=new WeakMap,pp=new WeakMap,Uj),z2=new hie,mp,xc,gp,zj,fie=(zj=class extends Ov{constructor(){super();Mt(this,mp,!0);Mt(this,xc);Mt(this,gp);lt(this,gp,e=>{if(!Hd&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){ce(this,xc)||this.setEventListener(ce(this,gp))}onUnsubscribe(){var e;this.hasListeners()||((e=ce(this,xc))==null||e.call(this),lt(this,xc,void 0))}setEventListener(e){var t;lt(this,gp,e),(t=ce(this,xc))==null||t.call(this),lt(this,xc,e(this.setOnline.bind(this)))}setOnline(e){ce(this,mp)!==e&&(lt(this,mp,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ce(this,mp)}},mp=new WeakMap,xc=new WeakMap,gp=new WeakMap,zj),qw=new fie;function gA(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function pie(n){return Math.min(1e3*2**n,3e4)}function OB(n){return(n??"online")==="online"?qw.isOnline():!0}var FB=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function $E(n){return n instanceof FB}function jB(n){let e=!1,t=0,r=!1,i;const s=gA(),o=y=>{var x;r||(f(new FB(y)),(x=n.abort)==null||x.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>z2.isFocused()&&(n.networkMode==="always"||qw.isOnline())&&n.canRun(),u=()=>OB(n.networkMode)&&n.canRun(),d=y=>{var x;r||(r=!0,(x=n.onSuccess)==null||x.call(n,y),i==null||i(),s.resolve(y))},f=y=>{var x;r||(r=!0,(x=n.onError)==null||x.call(n,y),i==null||i(),s.reject(y))},g=()=>new Promise(y=>{var x;i=_=>{(r||c())&&y(_)},(x=n.onPause)==null||x.call(n)}).then(()=>{var y;i=void 0,r||(y=n.onContinue)==null||y.call(n)}),v=()=>{if(r)return;let y;const x=t===0?n.initialPromise:void 0;try{y=x??n.fn()}catch(_){y=Promise.reject(_)}Promise.resolve(y).then(d).catch(_=>{var L;if(r)return;const w=n.retry??(Hd?0:3),S=n.retryDelay??pie,M=typeof S=="function"?S(t,_):S,I=w===!0||typeof w=="number"&&t<w||typeof w=="function"&&w(t,_);if(e||!I){f(_);return}t++,(L=n.onFail)==null||L.call(n,t,_),lie(M).then(()=>c()?void 0:g()).then(()=>{e?f(_):v()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?v():g().then(v),s)}}var mie=n=>setTimeout(n,0);function gie(){let n=[],e=0,t=a=>{a()},r=a=>{a()},i=mie;const s=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var ni=gie(),_d,Bj,VB=(Bj=class{constructor(){Mt(this,_d)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),hA(this.gcTime)&&lt(this,_d,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Hd?1/0:5*60*1e3))}clearGcTimeout(){ce(this,_d)&&(clearTimeout(ce(this,_d)),lt(this,_d,void 0))}},_d=new WeakMap,Bj),yp,vp,oo,wd,Mi,bv,bd,Po,Za,Hj,yie=(Hj=class extends VB{constructor(t){super();Mt(this,Po);Mt(this,yp);Mt(this,vp);Mt(this,oo);Mt(this,wd);Mt(this,Mi);Mt(this,bv);Mt(this,bd);lt(this,bd,!1),lt(this,bv,t.defaultOptions),this.setOptions(t.options),this.observers=[],lt(this,wd,t.client),lt(this,oo,ce(this,wd).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,lt(this,yp,vie(this.options)),this.state=t.state??ce(this,yp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ce(this,Mi))==null?void 0:t.promise}setOptions(t){this.options={...ce(this,bv),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ce(this,oo).remove(this)}setData(t,r){const i=mA(this.state.data,t,this.options);return cn(this,Po,Za).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(t,r){cn(this,Po,Za).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var i,s;const r=(i=ce(this,Mi))==null?void 0:i.promise;return(s=ce(this,Mi))==null||s.cancel(t),r?r.then(rs).catch(rs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ce(this,yp))}isActive(){return this.observers.some(t=>Do(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===U2||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!NB(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=ce(this,Mi))==null||r.continue()}onOnline(){var r;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=ce(this,Mi))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ce(this,oo).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(ce(this,Mi)&&(ce(this,bd)?ce(this,Mi).cancel({revert:!0}):ce(this,Mi).cancelRetry()),this.scheduleGc()),ce(this,oo).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||cn(this,Po,Za).call(this,{type:"invalidate"})}fetch(t,r){var c,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ce(this,Mi))return ce(this,Mi).continueRetry(),ce(this,Mi).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(g=>g.options.queryFn);f&&this.setOptions(f.options)}const i=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(lt(this,bd,!0),i.signal)})},o=()=>{const f=LB(this.options,r),g={client:ce(this,wd),queryKey:this.queryKey,meta:this.meta};return s(g),lt(this,bd,!1),this.options.persister?this.options.persister(f,g,this):f(g)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:ce(this,wd),state:this.state,fetchFn:o};s(a),(c=this.options.behavior)==null||c.onFetch(a,this),lt(this,vp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&cn(this,Po,Za).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const l=f=>{var g,v,y,x;$E(f)&&f.silent||cn(this,Po,Za).call(this,{type:"error",error:f}),$E(f)||((v=(g=ce(this,oo).config).onError)==null||v.call(g,f,this),(x=(y=ce(this,oo).config).onSettled)==null||x.call(y,this.state.data,f,this)),this.scheduleGc()};return lt(this,Mi,jB({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:i.abort.bind(i),onSuccess:f=>{var g,v,y,x;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(_){l(_);return}(v=(g=ce(this,oo).config).onSuccess)==null||v.call(g,f,this),(x=(y=ce(this,oo).config).onSettled)==null||x.call(y,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,g)=>{cn(this,Po,Za).call(this,{type:"failed",failureCount:f,error:g})},onPause:()=>{cn(this,Po,Za).call(this,{type:"pause"})},onContinue:()=>{cn(this,Po,Za).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),ce(this,Mi).start()}},yp=new WeakMap,vp=new WeakMap,oo=new WeakMap,wd=new WeakMap,Mi=new WeakMap,bv=new WeakMap,bd=new WeakMap,Po=new WeakSet,Za=function(t){const r=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...UB(i.data,this.options),fetchMeta:t.meta??null};case"success":return{...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return $E(s)&&s.revert&&ce(this,vp)?{...ce(this,vp),fetchStatus:"idle"}:{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=r(this.state),ni.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),ce(this,oo).notify({query:this,type:"updated",action:t})})},Hj);function UB(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:OB(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function vie(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var fa,Wj,xie=(Wj=class extends Ov{constructor(e={}){super();Mt(this,fa);this.config=e,lt(this,fa,new Map)}build(e,t,r){const i=t.queryKey,s=t.queryHash??V2(i,t);let o=this.get(s);return o||(o=new yie({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){ce(this,fa).has(e.queryHash)||(ce(this,fa).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=ce(this,fa).get(e.queryHash);t&&(e.destroy(),t===e&&ce(this,fa).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ni.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ce(this,fa).get(e)}getAll(){return[...ce(this,fa).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>FL(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>FL(e,r)):t}notify(e){ni.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ni.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ni.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},fa=new WeakMap,Wj),pa,Hi,Sd,ma,lc,Gj,_ie=(Gj=class extends VB{constructor(t){super();Mt(this,ma);Mt(this,pa);Mt(this,Hi);Mt(this,Sd);this.mutationId=t.mutationId,lt(this,Hi,t.mutationCache),lt(this,pa,[]),this.state=t.state||wie(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ce(this,pa).includes(t)||(ce(this,pa).push(t),this.clearGcTimeout(),ce(this,Hi).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){lt(this,pa,ce(this,pa).filter(r=>r!==t)),this.scheduleGc(),ce(this,Hi).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ce(this,pa).length||(this.state.status==="pending"?this.scheduleGc():ce(this,Hi).remove(this))}continue(){var t;return((t=ce(this,Sd))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,a,l,c,u,d,f,g,v,y,x,_,w,S,M,I,L,P,T,C;const r=()=>{cn(this,ma,lc).call(this,{type:"continue"})};lt(this,Sd,jB({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(k,O)=>{cn(this,ma,lc).call(this,{type:"failed",failureCount:k,error:O})},onPause:()=>{cn(this,ma,lc).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ce(this,Hi).canRun(this)}));const i=this.state.status==="pending",s=!ce(this,Sd).canStart();try{if(i)r();else{cn(this,ma,lc).call(this,{type:"pending",variables:t,isPaused:s}),await((a=(o=ce(this,Hi).config).onMutate)==null?void 0:a.call(o,t,this));const O=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));O!==this.state.context&&cn(this,ma,lc).call(this,{type:"pending",context:O,variables:t,isPaused:s})}const k=await ce(this,Sd).start();return await((d=(u=ce(this,Hi).config).onSuccess)==null?void 0:d.call(u,k,t,this.state.context,this)),await((g=(f=this.options).onSuccess)==null?void 0:g.call(f,k,t,this.state.context)),await((y=(v=ce(this,Hi).config).onSettled)==null?void 0:y.call(v,k,null,this.state.variables,this.state.context,this)),await((_=(x=this.options).onSettled)==null?void 0:_.call(x,k,null,t,this.state.context)),cn(this,ma,lc).call(this,{type:"success",data:k}),k}catch(k){try{throw await((S=(w=ce(this,Hi).config).onError)==null?void 0:S.call(w,k,t,this.state.context,this)),await((I=(M=this.options).onError)==null?void 0:I.call(M,k,t,this.state.context)),await((P=(L=ce(this,Hi).config).onSettled)==null?void 0:P.call(L,void 0,k,this.state.variables,this.state.context,this)),await((C=(T=this.options).onSettled)==null?void 0:C.call(T,void 0,k,t,this.state.context)),k}finally{cn(this,ma,lc).call(this,{type:"error",error:k})}}finally{ce(this,Hi).runNext(this)}}},pa=new WeakMap,Hi=new WeakMap,Sd=new WeakMap,ma=new WeakSet,lc=function(t){const r=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ni.batch(()=>{ce(this,pa).forEach(i=>{i.onMutationUpdate(t)}),ce(this,Hi).notify({mutation:this,type:"updated",action:t})})},Gj);function wie(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var sl,Io,Sv,$j,bie=($j=class extends Ov{constructor(e={}){super();Mt(this,sl);Mt(this,Io);Mt(this,Sv);this.config=e,lt(this,sl,new Set),lt(this,Io,new Map),lt(this,Sv,0)}build(e,t,r){const i=new _ie({mutationCache:this,mutationId:++ix(this,Sv)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){ce(this,sl).add(e);const t=Ix(e);if(typeof t=="string"){const r=ce(this,Io).get(t);r?r.push(e):ce(this,Io).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ce(this,sl).delete(e)){const t=Ix(e);if(typeof t=="string"){const r=ce(this,Io).get(t);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&ce(this,Io).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Ix(e);if(typeof t=="string"){const r=ce(this,Io).get(t),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const t=Ix(e);if(typeof t=="string"){const i=(r=ce(this,Io).get(t))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ni.batch(()=>{ce(this,sl).forEach(e=>{this.notify({type:"removed",mutation:e})}),ce(this,sl).clear(),ce(this,Io).clear()})}getAll(){return Array.from(ce(this,sl))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>jL(t,r))}findAll(e={}){return this.getAll().filter(t=>jL(e,t))}notify(e){ni.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return ni.batch(()=>Promise.all(e.map(t=>t.continue().catch(rs))))}},sl=new WeakMap,Io=new WeakMap,Sv=new WeakMap,$j);function Ix(n){var e;return(e=n.options.scope)==null?void 0:e.id}function zL(n){return{onFetch:(e,t)=>{var u,d,f,g,v;const r=e.options,i=(f=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,s=((g=e.state.data)==null?void 0:g.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let y=!1;const x=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},_=LB(e.options,e.fetchOptions),w=async(S,M,I)=>{if(y)return Promise.reject();if(M==null&&S.pages.length)return Promise.resolve(S);const L={client:e.client,queryKey:e.queryKey,pageParam:M,direction:I?"backward":"forward",meta:e.options.meta};x(L);const P=await _(L),{maxPages:T}=e.options,C=I?uie:cie;return{pages:C(S.pages,P,T),pageParams:C(S.pageParams,M,T)}};if(i&&s.length){const S=i==="backward",M=S?Sie:BL,I={pages:s,pageParams:o},L=M(r,I);a=await w(I,L,S)}else{const S=n??s.length;do{const M=l===0?o[0]??r.initialPageParam:BL(r,a);if(l>0&&M==null)break;a=await w(a,M),l++}while(l<S)}return a};e.options.persister?e.fetchFn=()=>{var y,x;return(x=(y=e.options).persister)==null?void 0:x.call(y,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function BL(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function Sie(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var ar,_c,wc,xp,_p,bc,wp,bp,qj,Eie=(qj=class{constructor(n={}){Mt(this,ar);Mt(this,_c);Mt(this,wc);Mt(this,xp);Mt(this,_p);Mt(this,bc);Mt(this,wp);Mt(this,bp);lt(this,ar,n.queryCache||new xie),lt(this,_c,n.mutationCache||new bie),lt(this,wc,n.defaultOptions||{}),lt(this,xp,new Map),lt(this,_p,new Map),lt(this,bc,0)}mount(){ix(this,bc)._++,ce(this,bc)===1&&(lt(this,wp,z2.subscribe(async n=>{n&&(await this.resumePausedMutations(),ce(this,ar).onFocus())})),lt(this,bp,qw.subscribe(async n=>{n&&(await this.resumePausedMutations(),ce(this,ar).onOnline())})))}unmount(){var n,e;ix(this,bc)._--,ce(this,bc)===0&&((n=ce(this,wp))==null||n.call(this),lt(this,wp,void 0),(e=ce(this,bp))==null||e.call(this),lt(this,bp,void 0))}isFetching(n){return ce(this,ar).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return ce(this,_c).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ce(this,ar).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=ce(this,ar).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(sp(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return ce(this,ar).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=ce(this,ar).get(r.queryHash),s=i==null?void 0:i.state.data,o=aie(e,s);if(o!==void 0)return ce(this,ar).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return ni.batch(()=>ce(this,ar).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ce(this,ar).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=ce(this,ar);ni.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=ce(this,ar);return ni.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=ni.batch(()=>ce(this,ar).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(rs).catch(rs)}invalidateQueries(n,e={}){return ni.batch(()=>(ce(this,ar).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=ni.batch(()=>ce(this,ar).findAll(n).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(rs)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(rs)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=ce(this,ar).build(this,e);return t.isStaleByTime(sp(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(rs).catch(rs)}fetchInfiniteQuery(n){return n.behavior=zL(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(rs).catch(rs)}ensureInfiniteQueryData(n){return n.behavior=zL(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return qw.isOnline()?ce(this,_c).resumePausedMutations():Promise.resolve()}getQueryCache(){return ce(this,ar)}getMutationCache(){return ce(this,_c)}getDefaultOptions(){return ce(this,wc)}setDefaultOptions(n){lt(this,wc,n)}setQueryDefaults(n,e){ce(this,xp).set(jy(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...ce(this,xp).values()],t={};return e.forEach(r=>{Vy(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){ce(this,_p).set(jy(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...ce(this,_p).values()],t={};return e.forEach(r=>{Vy(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...ce(this,wc).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=V2(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===U2&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...ce(this,wc).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){ce(this,ar).clear(),ce(this,_c).clear()}},ar=new WeakMap,_c=new WeakMap,wc=new WeakMap,xp=new WeakMap,_p=new WeakMap,bc=new WeakMap,wp=new WeakMap,bp=new WeakMap,qj),ns,un,Ev,Wi,Ed,Sp,Sc,Ec,Tv,Ep,Tp,Td,Md,Tc,Mp,wn,Mg,yA,vA,xA,_A,wA,bA,SA,zB,Kj,Tie=(Kj=class extends Ov{constructor(e,t){super();Mt(this,wn);Mt(this,ns);Mt(this,un);Mt(this,Ev);Mt(this,Wi);Mt(this,Ed);Mt(this,Sp);Mt(this,Sc);Mt(this,Ec);Mt(this,Tv);Mt(this,Ep);Mt(this,Tp);Mt(this,Td);Mt(this,Md);Mt(this,Tc);Mt(this,Mp,new Set);this.options=t,lt(this,ns,e),lt(this,Ec,null),lt(this,Sc,gA()),this.options.experimental_prefetchInRender||ce(this,Sc).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ce(this,un).addObserver(this),HL(ce(this,un),this.options)?cn(this,wn,Mg).call(this):this.updateResult(),cn(this,wn,_A).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return EA(ce(this,un),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return EA(ce(this,un),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,cn(this,wn,wA).call(this),cn(this,wn,bA).call(this),ce(this,un).removeObserver(this)}setOptions(e){const t=this.options,r=ce(this,un);if(this.options=ce(this,ns).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Do(this.options.enabled,ce(this,un))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");cn(this,wn,SA).call(this),ce(this,un).setOptions(this.options),t._defaulted&&!fA(this.options,t)&&ce(this,ns).getQueryCache().notify({type:"observerOptionsUpdated",query:ce(this,un),observer:this});const i=this.hasListeners();i&&WL(ce(this,un),r,this.options,t)&&cn(this,wn,Mg).call(this),this.updateResult(),i&&(ce(this,un)!==r||Do(this.options.enabled,ce(this,un))!==Do(t.enabled,ce(this,un))||sp(this.options.staleTime,ce(this,un))!==sp(t.staleTime,ce(this,un)))&&cn(this,wn,yA).call(this);const s=cn(this,wn,vA).call(this);i&&(ce(this,un)!==r||Do(this.options.enabled,ce(this,un))!==Do(t.enabled,ce(this,un))||s!==ce(this,Tc))&&cn(this,wn,xA).call(this,s)}getOptimisticResult(e){const t=ce(this,ns).getQueryCache().build(ce(this,ns),e),r=this.createResult(t,e);return Aie(this,r)&&(lt(this,Wi,r),lt(this,Sp,this.options),lt(this,Ed,ce(this,un).state)),r}getCurrentResult(){return ce(this,Wi)}trackResult(e,t){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),t==null||t(i),Reflect.get(r,i))})}trackProp(e){ce(this,Mp).add(e)}getCurrentQuery(){return ce(this,un)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=ce(this,ns).defaultQueryOptions(e),r=ce(this,ns).getQueryCache().build(ce(this,ns),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return cn(this,wn,Mg).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),ce(this,Wi)))}createResult(e,t){var C;const r=ce(this,un),i=this.options,s=ce(this,Wi),o=ce(this,Ed),a=ce(this,Sp),c=e!==r?e.state:ce(this,Ev),{state:u}=e;let d={...u},f=!1,g;if(t._optimisticResults){const k=this.hasListeners(),O=!k&&HL(e,t),U=k&&WL(e,r,t,i);(O||U)&&(d={...d,...UB(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:v,errorUpdatedAt:y,status:x}=d;g=d.data;let _=!1;if(t.placeholderData!==void 0&&g===void 0&&x==="pending"){let k;s!=null&&s.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData)?(k=s.data,_=!0):k=typeof t.placeholderData=="function"?t.placeholderData((C=ce(this,Tp))==null?void 0:C.state.data,ce(this,Tp)):t.placeholderData,k!==void 0&&(x="success",g=mA(s==null?void 0:s.data,k,t),f=!0)}if(t.select&&g!==void 0&&!_)if(s&&g===(o==null?void 0:o.data)&&t.select===ce(this,Tv))g=ce(this,Ep);else try{lt(this,Tv,t.select),g=t.select(g),g=mA(s==null?void 0:s.data,g,t),lt(this,Ep,g),lt(this,Ec,null)}catch(k){lt(this,Ec,k)}ce(this,Ec)&&(v=ce(this,Ec),g=ce(this,Ep),y=Date.now(),x="error");const w=d.fetchStatus==="fetching",S=x==="pending",M=x==="error",I=S&&w,L=g!==void 0,T={status:x,fetchStatus:d.fetchStatus,isPending:S,isSuccess:x==="success",isError:M,isInitialLoading:I,isLoading:I,data:g,dataUpdatedAt:d.dataUpdatedAt,error:v,errorUpdatedAt:y,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:w,isRefetching:w&&!S,isLoadingError:M&&!L,isPaused:d.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:M&&L,isStale:B2(e,t),refetch:this.refetch,promise:ce(this,Sc)};if(this.options.experimental_prefetchInRender){const k=V=>{T.status==="error"?V.reject(T.error):T.data!==void 0&&V.resolve(T.data)},O=()=>{const V=lt(this,Sc,T.promise=gA());k(V)},U=ce(this,Sc);switch(U.status){case"pending":e.queryHash===r.queryHash&&k(U);break;case"fulfilled":(T.status==="error"||T.data!==U.value)&&O();break;case"rejected":(T.status!=="error"||T.error!==U.reason)&&O();break}}return T}updateResult(){const e=ce(this,Wi),t=this.createResult(ce(this,un),this.options);if(lt(this,Ed,ce(this,un).state),lt(this,Sp,this.options),ce(this,Ed).data!==void 0&&lt(this,Tp,ce(this,un)),fA(t,e))return;lt(this,Wi,t);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!ce(this,Mp).size)return!0;const o=new Set(s??ce(this,Mp));return this.options.throwOnError&&o.add("error"),Object.keys(ce(this,Wi)).some(a=>{const l=a;return ce(this,Wi)[l]!==e[l]&&o.has(l)})};cn(this,wn,zB).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&cn(this,wn,_A).call(this)}},ns=new WeakMap,un=new WeakMap,Ev=new WeakMap,Wi=new WeakMap,Ed=new WeakMap,Sp=new WeakMap,Sc=new WeakMap,Ec=new WeakMap,Tv=new WeakMap,Ep=new WeakMap,Tp=new WeakMap,Td=new WeakMap,Md=new WeakMap,Tc=new WeakMap,Mp=new WeakMap,wn=new WeakSet,Mg=function(e){cn(this,wn,SA).call(this);let t=ce(this,un).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(rs)),t},yA=function(){cn(this,wn,wA).call(this);const e=sp(this.options.staleTime,ce(this,un));if(Hd||ce(this,Wi).isStale||!hA(e))return;const r=NB(ce(this,Wi).dataUpdatedAt,e)+1;lt(this,Td,setTimeout(()=>{ce(this,Wi).isStale||this.updateResult()},r))},vA=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ce(this,un)):this.options.refetchInterval)??!1},xA=function(e){cn(this,wn,bA).call(this),lt(this,Tc,e),!(Hd||Do(this.options.enabled,ce(this,un))===!1||!hA(ce(this,Tc))||ce(this,Tc)===0)&&lt(this,Md,setInterval(()=>{(this.options.refetchIntervalInBackground||z2.isFocused())&&cn(this,wn,Mg).call(this)},ce(this,Tc)))},_A=function(){cn(this,wn,yA).call(this),cn(this,wn,xA).call(this,cn(this,wn,vA).call(this))},wA=function(){ce(this,Td)&&(clearTimeout(ce(this,Td)),lt(this,Td,void 0))},bA=function(){ce(this,Md)&&(clearInterval(ce(this,Md)),lt(this,Md,void 0))},SA=function(){const e=ce(this,ns).getQueryCache().build(ce(this,ns),this.options);if(e===ce(this,un))return;const t=ce(this,un);lt(this,un,e),lt(this,Ev,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},zB=function(e){ni.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(ce(this,Wi))}),ce(this,ns).getQueryCache().notify({query:ce(this,un),type:"observerResultsUpdated"})})},Kj);function Mie(n,e){return Do(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function HL(n,e){return Mie(n,e)||n.state.data!==void 0&&EA(n,e,e.refetchOnMount)}function EA(n,e,t){if(Do(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&B2(n,e)}return!1}function WL(n,e,t,r){return(n!==e||Do(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&B2(n,t)}function B2(n,e){return Do(e.enabled,n)!==!1&&n.isStaleByTime(sp(e.staleTime,n))}function Aie(n,e){return!fA(n.getCurrentResult(),e)}var BB=R.createContext(void 0),Cie=n=>{const e=R.useContext(BB);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Pie=({client:n,children:e})=>(R.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),m.jsx(BB.Provider,{value:n,children:e})),HB=R.createContext(!1),Iie=()=>R.useContext(HB);HB.Provider;function Rie(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var kie=R.createContext(Rie()),Nie=()=>R.useContext(kie),Die=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},Lie=n=>{R.useEffect(()=>{n.clearReset()},[n])},Oie=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:i})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(i&&n.data===void 0||die(t,[n.error,r])),Fie=n=>{const e=n.staleTime;n.suspense&&(n.staleTime=typeof e=="function"?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},jie=(n,e)=>n.isLoading&&n.isFetching&&!e,Vie=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,GL=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function Uie(n,e,t){var d,f,g,v,y;const r=Cie(),i=Iie(),s=Nie(),o=r.defaultQueryOptions(n);(f=(d=r.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||f.call(d,o),o._optimisticResults=i?"isRestoring":"optimistic",Fie(o),Die(o,s),Lie(s);const a=!r.getQueryCache().get(o.queryHash),[l]=R.useState(()=>new e(r,o)),c=l.getOptimisticResult(o),u=!i&&n.subscribed!==!1;if(R.useSyncExternalStore(R.useCallback(x=>{const _=u?l.subscribe(ni.batchCalls(x)):rs;return l.updateResult(),_},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),R.useEffect(()=>{l.setOptions(o)},[o,l]),Vie(o,c))throw GL(o,l,s);if(Oie({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((v=(g=r.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||v.call(g,o,c),o.experimental_prefetchInRender&&!Hd&&jie(c,i)){const x=a?GL(o,l,s):(y=r.getQueryCache().get(o.queryHash))==null?void 0:y.promise;x==null||x.catch(rs).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function fb(n,e){return Uie(n,Tie)}const zie=()=>{};var $L={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WB=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Bie=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},GB={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(f=64)),r.push(t[u],t[d],t[f],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(WB(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Bie(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new Hie;const f=s<<2|a>>4;if(r.push(f),c!==64){const g=a<<4&240|c>>2;if(r.push(g),d!==64){const v=c<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Hie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Wie=function(n){const e=WB(n);return GB.encodeByteArray(e,!0)},Kw=function(n){return Wie(n).replace(/\./g,"")},$B=function(n){try{return GB.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ie=()=>Gie().__FIREBASE_DEFAULTS__,qie=()=>{if(typeof process>"u"||typeof $L>"u")return;const n=$L.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Kie=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&$B(n[1]);return e&&JSON.parse(e)},pb=()=>{try{return zie()||$ie()||qie()||Kie()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},qB=n=>{var e,t;return(t=(e=pb())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Yie=n=>{const e=qB(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},KB=()=>{var n;return(n=pb())===null||n===void 0?void 0:n.config},YB=n=>{var e;return(e=pb())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(n){return n.endsWith(".cloudworkstations.dev")}async function XB(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qie(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Kw(JSON.stringify(t)),Kw(JSON.stringify(o)),""].join(".")}const Qg={};function Jie(){const n={prod:[],emulator:[]};for(const e of Object.keys(Qg))Qg[e]?n.emulator.push(e):n.prod.push(e);return n}function Zie(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let qL=!1;function mb(n,e){if(typeof window>"u"||typeof document>"u"||!Fv(window.location.host)||Qg[n]===e||Qg[n]||qL)return;Qg[n]=e;function t(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=Jie().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{qL=!0,o()},f}function u(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=Zie(r),g=t("text"),v=document.getElementById(g)||document.createElement("span"),y=t("learnmore"),x=document.getElementById(y)||document.createElement("a"),_=t("preprendIcon"),w=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const S=f.element;a(S),u(x,y);const M=c();l(w,_),S.append(w,v,x,M),document.body.appendChild(S)}s?(v.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ese(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oi())}function tse(){var n;const e=(n=pb())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nse(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QB(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function rse(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ise(){const n=Oi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function sse(){return!tse()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JB(){try{return typeof indexedDB=="object"}catch{return!1}}function ZB(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function ose(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ase="FirebaseError";class Zo extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ase,Object.setPrototypeOf(this,Zo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ah.prototype.create)}}class ah{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?lse(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Zo(i,a,r)}}function lse(n,e){return n.replace(cse,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const cse=/\{\$([^}]+)}/g;function use(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Jc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(KL(s)&&KL(o)){if(!Jc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function KL(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ag(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Cg(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function dse(n,e){const t=new hse(n,e);return t.subscribe.bind(t)}class hse{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");fse(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=qE),i.error===void 0&&(i.error=qE),i.complete===void 0&&(i.complete=qE);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fse(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function qE(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pse=1e3,mse=2,gse=4*60*60*1e3,yse=.5;function YL(n,e=pse,t=mse){const r=e*Math.pow(t,n),i=Math.round(yse*r*(Math.random()-.5)*2);return Math.min(gse,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(n){return n&&n._delegate?n._delegate:n}class Ko{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vse=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Xie;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_se(e))try{this.getOrInitializeService({instanceIdentifier:Zu})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Zu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zu){return this.instances.has(e)}getOptions(e=Zu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xse(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zu){return this.component?this.component.multipleInstances?e:Zu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function xse(n){return n===Zu?void 0:n}function _se(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wse{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new vse(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(rn||(rn={}));const bse={debug:rn.DEBUG,verbose:rn.VERBOSE,info:rn.INFO,warn:rn.WARN,error:rn.ERROR,silent:rn.SILENT},Sse=rn.INFO,Ese={[rn.DEBUG]:"log",[rn.VERBOSE]:"log",[rn.INFO]:"info",[rn.WARN]:"warn",[rn.ERROR]:"error"},Tse=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=Ese[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gb{constructor(e){this.name=e,this._logLevel=Sse,this._logHandler=Tse,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bse[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rn.DEBUG,...e),this._logHandler(this,rn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rn.VERBOSE,...e),this._logHandler(this,rn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rn.INFO,...e),this._logHandler(this,rn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rn.WARN,...e),this._logHandler(this,rn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rn.ERROR,...e),this._logHandler(this,rn.ERROR,...e)}}const Mse=(n,e)=>e.some(t=>n instanceof t);let XL,QL;function Ase(){return XL||(XL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Cse(){return QL||(QL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const e6=new WeakMap,TA=new WeakMap,t6=new WeakMap,KE=new WeakMap,H2=new WeakMap;function Pse(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Uc(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&e6.set(t,n)}).catch(()=>{}),H2.set(e,n),e}function Ise(n){if(TA.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});TA.set(n,e)}let MA={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return TA.get(n);if(e==="objectStoreNames")return n.objectStoreNames||t6.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Uc(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Rse(n){MA=n(MA)}function kse(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(YE(this),e,...t);return t6.set(r,e.sort?e.sort():[e]),Uc(r)}:Cse().includes(n)?function(...e){return n.apply(YE(this),e),Uc(e6.get(this))}:function(...e){return Uc(n.apply(YE(this),e))}}function Nse(n){return typeof n=="function"?kse(n):(n instanceof IDBTransaction&&Ise(n),Mse(n,Ase())?new Proxy(n,MA):n)}function Uc(n){if(n instanceof IDBRequest)return Pse(n);if(KE.has(n))return KE.get(n);const e=Nse(n);return e!==n&&(KE.set(n,e),H2.set(e,n)),e}const YE=n=>H2.get(n);function n6(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Uc(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Uc(o.result),l.oldVersion,l.newVersion,Uc(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Dse=["get","getKey","getAll","getAllKeys","count"],Lse=["put","add","delete","clear"],XE=new Map;function JL(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(XE.get(e))return XE.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Lse.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Dse.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return XE.set(e,s),s}Rse(n=>({...n,get:(e,t,r)=>JL(e,t)||n.get(e,t,r),has:(e,t)=>!!JL(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ose{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Fse(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Fse(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const AA="@firebase/app",ZL="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=new gb("@firebase/app"),jse="@firebase/app-compat",Vse="@firebase/analytics-compat",Use="@firebase/analytics",zse="@firebase/app-check-compat",Bse="@firebase/app-check",Hse="@firebase/auth",Wse="@firebase/auth-compat",Gse="@firebase/database",$se="@firebase/data-connect",qse="@firebase/database-compat",Kse="@firebase/functions",Yse="@firebase/functions-compat",Xse="@firebase/installations",Qse="@firebase/installations-compat",Jse="@firebase/messaging",Zse="@firebase/messaging-compat",eoe="@firebase/performance",toe="@firebase/performance-compat",noe="@firebase/remote-config",roe="@firebase/remote-config-compat",ioe="@firebase/storage",soe="@firebase/storage-compat",ooe="@firebase/firestore",aoe="@firebase/ai",loe="@firebase/firestore-compat",coe="firebase",uoe="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="[DEFAULT]",doe={[AA]:"fire-core",[jse]:"fire-core-compat",[Use]:"fire-analytics",[Vse]:"fire-analytics-compat",[Bse]:"fire-app-check",[zse]:"fire-app-check-compat",[Hse]:"fire-auth",[Wse]:"fire-auth-compat",[Gse]:"fire-rtdb",[$se]:"fire-data-connect",[qse]:"fire-rtdb-compat",[Kse]:"fire-fn",[Yse]:"fire-fn-compat",[Xse]:"fire-iid",[Qse]:"fire-iid-compat",[Jse]:"fire-fcm",[Zse]:"fire-fcm-compat",[eoe]:"fire-perf",[toe]:"fire-perf-compat",[noe]:"fire-rc",[roe]:"fire-rc-compat",[ioe]:"fire-gcs",[soe]:"fire-gcs-compat",[ooe]:"fire-fst",[loe]:"fire-fst-compat",[aoe]:"fire-vertex","fire-js":"fire-js",[coe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw=new Map,hoe=new Map,PA=new Map;function e3(n,e){try{n.container.addComponent(e)}catch(t){Al.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ka(n){const e=n.name;if(PA.has(e))return Al.debug(`There were multiple attempts to register component ${e}.`),!1;PA.set(e,n);for(const t of Yw.values())e3(t,n);for(const t of hoe.values())e3(t,n);return!0}function lh(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Oo(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const foe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zc=new ah("app","Firebase",foe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class poe{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ko("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am=uoe;function r6(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:CA,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw zc.create("bad-app-name",{appName:String(i)});if(t||(t=KB()),!t)throw zc.create("no-options");const s=Yw.get(i);if(s){if(Jc(t,s.options)&&Jc(r,s.config))return s;throw zc.create("duplicate-app",{appName:i})}const o=new wse(i);for(const l of PA.values())o.addComponent(l);const a=new poe(t,r,o);return Yw.set(i,a),a}function W2(n=CA){const e=Yw.get(n);if(!e&&n===CA&&KB())return r6();if(!e)throw zc.create("no-app",{appName:n});return e}function mo(n,e,t){var r;let i=(r=doe[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Al.warn(a.join(" "));return}ka(new Ko(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const moe="firebase-heartbeat-database",goe=1,Uy="firebase-heartbeat-store";let QE=null;function i6(){return QE||(QE=n6(moe,goe,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Uy)}catch(t){console.warn(t)}}}}).catch(n=>{throw zc.create("idb-open",{originalErrorMessage:n.message})})),QE}async function yoe(n){try{const t=(await i6()).transaction(Uy),r=await t.objectStore(Uy).get(s6(n));return await t.done,r}catch(e){if(e instanceof Zo)Al.warn(e.message);else{const t=zc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Al.warn(t.message)}}}async function t3(n,e){try{const r=(await i6()).transaction(Uy,"readwrite");await r.objectStore(Uy).put(e,s6(n)),await r.done}catch(t){if(t instanceof Zo)Al.warn(t.message);else{const r=zc.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Al.warn(r.message)}}}function s6(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const voe=1024,xoe=30;class _oe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new boe(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=n3();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>xoe){const o=Soe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Al.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=n3(),{heartbeatsToSend:r,unsentEntries:i}=woe(this._heartbeatsCache.heartbeats),s=Kw(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Al.warn(t),""}}}function n3(){return new Date().toISOString().substring(0,10)}function woe(n,e=voe){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),r3(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),r3(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class boe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JB()?ZB().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await yoe(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return t3(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return t3(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function r3(n){return Kw(JSON.stringify({version:2,heartbeats:n})).length}function Soe(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eoe(n){ka(new Ko("platform-logger",e=>new Ose(e),"PRIVATE")),ka(new Ko("heartbeat",e=>new _oe(e),"PRIVATE")),mo(AA,ZL,n),mo(AA,ZL,"esm2017"),mo("fire-js","")}Eoe("");var Toe="firebase",Moe="11.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mo(Toe,Moe,"app");function o6(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Aoe=o6,a6=new ah("auth","Firebase",o6());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=new gb("@firebase/auth");function Coe(n,...e){Xw.logLevel<=rn.WARN&&Xw.warn(`Auth (${am}): ${n}`,...e)}function $_(n,...e){Xw.logLevel<=rn.ERROR&&Xw.error(`Auth (${am}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(n,...e){throw G2(n,...e)}function Ea(n,...e){return G2(n,...e)}function l6(n,e,t){const r=Object.assign(Object.assign({},Aoe()),{[e]:t});return new ah("auth","Firebase",r).create(e,{appName:n.name})}function Bc(n){return l6(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function G2(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return a6.create(n,...e)}function St(n,e,...t){if(!n)throw G2(e,...t)}function cl(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $_(e),new Error(e)}function Cl(n,e){n||cl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Poe(){return i3()==="http:"||i3()==="https:"}function i3(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ioe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Poe()||QB()||"connection"in navigator)?navigator.onLine:!0}function Roe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,t){this.shortDelay=e,this.longDelay=t,Cl(t>e,"Short delay should be less than long delay!"),this.isMobile=ese()||rse()}get(){return Ioe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(n,e){Cl(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const koe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Noe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Doe=new Vv(3e4,6e4);function ch(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function mu(n,e,t,r,i={}){return u6(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=jv(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return nse()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&Fv(n.emulatorConfig.host)&&(c.credentials="include"),c6.fetch()(await d6(n,n.config.apiHost,t,a),c)})}async function u6(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},koe),e);try{const i=new Ooe(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Rx(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rx(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Rx(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Rx(n,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw l6(n,u,c);Yo(n,u)}}catch(i){if(i instanceof Zo)throw i;Yo(n,"network-request-failed",{message:String(i)})}}async function yb(n,e,t,r,i={}){const s=await mu(n,e,t,r,i);return"mfaPendingCredential"in s&&Yo(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function d6(n,e,t,r){const i=`${e}${t}?${r}`,s=n,o=s.config.emulator?$2(n.config,i):`${n.config.apiScheme}://${i}`;return Noe.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function Loe(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ooe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ea(this.auth,"network-request-failed")),Doe.get())})}}function Rx(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ea(n,e,r);return i.customData._tokenResponse=t,i}function s3(n){return n!==void 0&&n.enterprise!==void 0}class Foe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Loe(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function joe(n,e){return mu(n,"GET","/v2/recaptchaConfig",ch(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Voe(n,e){return mu(n,"POST","/v1/accounts:delete",e)}async function Qw(n,e){return mu(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Uoe(n,e=!1){const t=ci(n),r=await t.getIdToken(e),i=q2(r);St(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Jg(JE(i.auth_time)),issuedAtTime:Jg(JE(i.iat)),expirationTime:Jg(JE(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function JE(n){return Number(n)*1e3}function q2(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return $_("JWT malformed, contained fewer than 3 sections"),null;try{const i=$B(t);return i?JSON.parse(i):($_("Failed to decode base64 JWT payload"),null)}catch(i){return $_("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function o3(n){const e=q2(n);return St(e,"internal-error"),St(typeof e.exp<"u","internal-error"),St(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zy(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Zo&&zoe(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function zoe({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Boe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jg(this.lastLoginAt),this.creationTime=Jg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jw(n){var e;const t=n.auth,r=await n.getIdToken(),i=await zy(n,Qw(t,{idToken:r}));St(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?h6(s.providerUserInfo):[],a=Woe(n.providerData,o),l=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new RA(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)}async function Hoe(n){const e=ci(n);await Jw(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Woe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function h6(n){return n.map(e=>{var{providerId:t}=e,r=Lv(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Goe(n,e){const t=await u6(n,{},async()=>{const r=jv({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await d6(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",c6.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function $oe(n,e){return mu(n,"POST","/v2/accounts:revokeToken",ch(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){St(e.idToken,"internal-error"),St(typeof e.idToken<"u","internal-error"),St(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):o3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){St(e.length!==0,"internal-error");const t=o3(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(St(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await Goe(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new op;return r&&(St(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(St(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(St(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new op,this.toJSON())}_performRefresh(){return cl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(n,e){St(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Fo{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Lv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Boe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new RA(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await zy(this,this.stsTokenManager.getToken(this.auth,e));return St(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Uoe(this,e)}reload(){return Hoe(this)}_assign(e){this!==e&&(St(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Fo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){St(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Jw(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Oo(this.auth.app))return Promise.reject(Bc(this.auth));const e=await this.getIdToken();return await zy(this,Voe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,c,u;const d=(r=t.displayName)!==null&&r!==void 0?r:void 0,f=(i=t.email)!==null&&i!==void 0?i:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=t.photoURL)!==null&&o!==void 0?o:void 0,y=(a=t.tenantId)!==null&&a!==void 0?a:void 0,x=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,_=(c=t.createdAt)!==null&&c!==void 0?c:void 0,w=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:S,emailVerified:M,isAnonymous:I,providerData:L,stsTokenManager:P}=t;St(S&&P,e,"internal-error");const T=op.fromJSON(this.name,P);St(typeof S=="string",e,"internal-error"),ec(d,e.name),ec(f,e.name),St(typeof M=="boolean",e,"internal-error"),St(typeof I=="boolean",e,"internal-error"),ec(g,e.name),ec(v,e.name),ec(y,e.name),ec(x,e.name),ec(_,e.name),ec(w,e.name);const C=new Fo({uid:S,auth:e,email:f,emailVerified:M,displayName:d,isAnonymous:I,photoURL:v,phoneNumber:g,tenantId:y,stsTokenManager:T,createdAt:_,lastLoginAt:w});return L&&Array.isArray(L)&&(C.providerData=L.map(k=>Object.assign({},k))),x&&(C._redirectEventId=x),C}static async _fromIdTokenResponse(e,t,r=!1){const i=new op;i.updateFromServerResponse(t);const s=new Fo({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Jw(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];St(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?h6(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new op;a.updateFromIdToken(r);const l=new Fo({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new RA(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3=new Map;function ul(n){Cl(n instanceof Function,"Expected a class definition");let e=a3.get(n);return e?(Cl(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,a3.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}f6.type="NONE";const l3=f6;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(n,e,t){return`firebase:${n}:${e}:${t}`}class ap{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=q_(this.userKey,i.apiKey,s),this.fullPersistenceKey=q_("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Qw(this.auth,{idToken:e}).catch(()=>{});return t?Fo._fromGetAccountInfoResponse(this.auth,t,e):null}return Fo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ap(ul(l3),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||ul(l3);const o=q_(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=await c._get(o);if(u){let d;if(typeof u=="string"){const f=await Qw(e,{idToken:u}).catch(()=>{});if(!f)break;d=await Fo._fromGetAccountInfoResponse(e,f,u)}else d=Fo._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ap(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new ap(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(y6(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(p6(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(x6(e))return"Blackberry";if(_6(e))return"Webos";if(m6(e))return"Safari";if((e.includes("chrome/")||g6(e))&&!e.includes("edge/"))return"Chrome";if(v6(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function p6(n=Oi()){return/firefox\//i.test(n)}function m6(n=Oi()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function g6(n=Oi()){return/crios\//i.test(n)}function y6(n=Oi()){return/iemobile/i.test(n)}function v6(n=Oi()){return/android/i.test(n)}function x6(n=Oi()){return/blackberry/i.test(n)}function _6(n=Oi()){return/webos/i.test(n)}function K2(n=Oi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function qoe(n=Oi()){var e;return K2(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Koe(){return ise()&&document.documentMode===10}function w6(n=Oi()){return K2(n)||v6(n)||_6(n)||x6(n)||/windows phone/i.test(n)||y6(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(n,e=[]){let t;switch(n){case"Browser":t=c3(Oi());break;case"Worker":t=`${c3(Oi())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${am}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yoe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xoe(n,e={}){return mu(n,"GET","/v2/passwordPolicy",ch(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qoe=6;class Joe{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Qoe,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zoe{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new u3(this),this.idTokenSubscription=new u3(this),this.beforeStateQueue=new Yoe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=a6,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ul(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ap.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Qw(this,{idToken:e}),r=await Fo._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Oo(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return St(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Jw(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Roe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Oo(this.app))return Promise.reject(Bc(this));const t=e?ci(e):null;return t&&St(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&St(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Oo(this.app)?Promise.reject(Bc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Oo(this.app)?Promise.reject(Bc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ul(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Xoe(this),t=new Joe(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ah("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await $oe(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ul(e)||this._popupRedirectResolver;St(t,this,"argument-error"),this.redirectPersistenceManager=await ap.create(this,[ul(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(St(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return St(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=b6(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Oo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Coe(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function lm(n){return ci(n)}class u3{constructor(e){this.auth=e,this.observer=null,this.addObserver=dse(t=>this.observer=t)}get next(){return St(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vb={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eae(n){vb=n}function S6(n){return vb.loadJS(n)}function tae(){return vb.recaptchaEnterpriseScript}function nae(){return vb.gapiScript}function rae(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class iae{constructor(){this.enterprise=new sae}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class sae{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const oae="recaptcha-enterprise",E6="NO_RECAPTCHA";class aae{constructor(e){this.type=oae,this.auth=lm(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{joe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new Foe(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;s3(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(E6)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new iae().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&s3(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=tae();l.length!==0&&(l+=a),S6(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function d3(n,e,t,r=!1,i=!1){const s=new aae(n);let o;if(i)o=E6;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function h3(n,e,t,r,i){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await d3(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await d3(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lae(n,e){const t=lh(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Jc(s,e??{}))return i;Yo(i,"already-initialized")}return t.initialize({options:e})}function cae(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ul);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function uae(n,e,t){const r=lm(n);St(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=T6(e),{host:o,port:a}=dae(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){St(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),St(Jc(c,r.config.emulator)&&Jc(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Fv(o)?(mb("Auth",!0),XB(`${s}//${o}${l}`)):hae()}function T6(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function dae(n){const e=T6(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:f3(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:f3(o)}}}function f3(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function hae(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return cl("not implemented")}_getIdTokenResponse(e){return cl("not implemented")}_linkToIdToken(e,t){return cl("not implemented")}_getReauthenticationResolver(e){return cl("not implemented")}}async function fae(n,e){return mu(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pae(n,e){return yb(n,"POST","/v1/accounts:signInWithPassword",ch(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mae(n,e){return yb(n,"POST","/v1/accounts:signInWithEmailLink",ch(n,e))}async function gae(n,e){return yb(n,"POST","/v1/accounts:signInWithEmailLink",ch(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By extends Y2{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new By(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new By(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return h3(e,t,"signInWithPassword",pae);case"emailLink":return mae(e,{email:this._email,oobCode:this._password});default:Yo(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return h3(e,r,"signUpPassword",fae);case"emailLink":return gae(e,{idToken:t,email:this._email,oobCode:this._password});default:Yo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lp(n,e){return yb(n,"POST","/v1/accounts:signInWithIdp",ch(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yae="http://localhost";class Wd extends Y2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Wd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Yo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Lv(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Wd(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return lp(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,lp(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,lp(e,t)}buildRequest(){const e={requestUri:yae,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=jv(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vae(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xae(n){const e=Ag(Cg(n)).link,t=e?Ag(Cg(e)).deep_link_id:null,r=Ag(Cg(n)).deep_link_id;return(r?Ag(Cg(r)).link:null)||r||t||e||n}class X2{constructor(e){var t,r,i,s,o,a;const l=Ag(Cg(e)),c=(t=l.apiKey)!==null&&t!==void 0?t:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=vae((i=l.mode)!==null&&i!==void 0?i:null);St(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=xae(e);try{return new X2(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(){this.providerId=cm.PROVIDER_ID}static credential(e,t){return By._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=X2.parseLink(t);return St(r,"argument-error"),By._fromEmailAndCode(e,r.code,r.tenantId)}}cm.PROVIDER_ID="password";cm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";cm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv extends M6{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends Uv{constructor(){super("facebook.com")}static credential(e){return Wd._fromParams({providerId:pc.PROVIDER_ID,signInMethod:pc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pc.credentialFromTaggedObject(e)}static credentialFromError(e){return pc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pc.credential(e.oauthAccessToken)}catch{return null}}}pc.FACEBOOK_SIGN_IN_METHOD="facebook.com";pc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends Uv{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Wd._fromParams({providerId:mc.PROVIDER_ID,signInMethod:mc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return mc.credentialFromTaggedObject(e)}static credentialFromError(e){return mc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return mc.credential(t,r)}catch{return null}}}mc.GOOGLE_SIGN_IN_METHOD="google.com";mc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends Uv{constructor(){super("github.com")}static credential(e){return Wd._fromParams({providerId:gc.PROVIDER_ID,signInMethod:gc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gc.credentialFromTaggedObject(e)}static credentialFromError(e){return gc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gc.credential(e.oauthAccessToken)}catch{return null}}}gc.GITHUB_SIGN_IN_METHOD="github.com";gc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc extends Uv{constructor(){super("twitter.com")}static credential(e,t){return Wd._fromParams({providerId:yc.PROVIDER_ID,signInMethod:yc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yc.credentialFromTaggedObject(e)}static credentialFromError(e){return yc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return yc.credential(t,r)}catch{return null}}}yc.TWITTER_SIGN_IN_METHOD="twitter.com";yc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Fo._fromIdTokenResponse(e,r,i),o=p3(r);return new Vp({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=p3(r);return new Vp({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function p3(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw extends Zo{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Zw.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Zw(e,t,r,i)}}function A6(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Zw._fromErrorAndOperation(n,s,e,r):s})}async function _ae(n,e,t=!1){const r=await zy(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Vp._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wae(n,e,t=!1){const{auth:r}=n;if(Oo(r.app))return Promise.reject(Bc(r));const i="reauthenticate";try{const s=await zy(n,A6(r,i,e,n),t);St(s.idToken,r,"internal-error");const o=q2(s.idToken);St(o,r,"internal-error");const{sub:a}=o;return St(n.uid===a,r,"user-mismatch"),Vp._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Yo(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C6(n,e,t=!1){if(Oo(n.app))return Promise.reject(Bc(n));const r="signIn",i=await A6(n,r,e),s=await Vp._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function bae(n,e){return C6(lm(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sae(n){const e=lm(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function Eae(n,e,t){return Oo(n.app)?Promise.reject(Bc(n)):bae(ci(n),cm.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Sae(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tae(n,e){return ci(n).setPersistence(e)}function Mae(n,e,t,r){return ci(n).onIdTokenChanged(e,t,r)}function Aae(n,e,t){return ci(n).beforeAuthStateChanged(e,t)}function Cae(n,e,t,r){return ci(n).onAuthStateChanged(e,t,r)}const e1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(e1,"1"),this.storage.removeItem(e1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pae=1e3,Iae=10;class I6 extends P6{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=w6(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Koe()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Iae):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Pae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}I6.type="LOCAL";const R6=I6;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6 extends P6{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}k6.type="SESSION";const N6=k6;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rae(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new xb(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(t.origin,s)),l=await Rae(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xb.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kae{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Q2("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(){return window}function Nae(n){Ta().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D6(){return typeof Ta().WorkerGlobalScope<"u"&&typeof Ta().importScripts=="function"}async function Dae(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Lae(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Oae(){return D6()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6="firebaseLocalStorageDb",Fae=1,t1="firebaseLocalStorage",O6="fbase_key";class zv{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function _b(n,e){return n.transaction([t1],e?"readwrite":"readonly").objectStore(t1)}function jae(){const n=indexedDB.deleteDatabase(L6);return new zv(n).toPromise()}function kA(){const n=indexedDB.open(L6,Fae);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(t1,{keyPath:O6})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(t1)?e(r):(r.close(),await jae(),e(await kA()))})})}async function m3(n,e,t){const r=_b(n,!0).put({[O6]:e,value:t});return new zv(r).toPromise()}async function Vae(n,e){const t=_b(n,!1).get(e),r=await new zv(t).toPromise();return r===void 0?null:r.value}function g3(n,e){const t=_b(n,!0).delete(e);return new zv(t).toPromise()}const Uae=800,zae=3;class F6{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kA(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>zae)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return D6()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xb._getInstance(Oae()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Dae(),!this.activeServiceWorker)return;this.sender=new kae(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Lae()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kA();return await m3(e,e1,"1"),await g3(e,e1),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>m3(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Vae(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>g3(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=_b(i,!1).getAll();return new zv(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Uae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}F6.type="LOCAL";const Bae=F6;new Vv(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hae(n,e){return e?ul(e):(St(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2 extends Y2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lp(e,this._buildIdpRequest())}_linkToIdToken(e,t){return lp(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return lp(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Wae(n){return C6(n.auth,new J2(n),n.bypassAuthState)}function Gae(n){const{auth:e,user:t}=n;return St(t,e,"internal-error"),wae(t,new J2(n),n.bypassAuthState)}async function $ae(n){const{auth:e,user:t}=n;return St(t,e,"internal-error"),_ae(t,new J2(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Wae;case"linkViaPopup":case"linkViaRedirect":return $ae;case"reauthViaPopup":case"reauthViaRedirect":return Gae;default:Yo(this.auth,"internal-error")}}resolve(e){Cl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qae=new Vv(2e3,1e4);class Of extends j6{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Of.currentPopupAction&&Of.currentPopupAction.cancel(),Of.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return St(e,this.auth,"internal-error"),e}async onExecution(){Cl(this.filter.length===1,"Popup operations only handle one event");const e=Q2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ea(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ea(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Of.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ea(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qae.get())};e()}}Of.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kae="pendingRedirect",K_=new Map;class Yae extends j6{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=K_.get(this.auth._key());if(!e){try{const r=await Xae(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}K_.set(this.auth._key(),e)}return this.bypassAuthState||K_.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Xae(n,e){const t=Zae(e),r=Jae(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function Qae(n,e){K_.set(n._key(),e)}function Jae(n){return ul(n._redirectPersistence)}function Zae(n){return q_(Kae,n.config.apiKey,n.name)}async function ele(n,e,t=!1){if(Oo(n.app))return Promise.reject(Bc(n));const r=lm(n),i=Hae(r,e),o=await new Yae(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tle=10*60*1e3;class nle{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rle(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!V6(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ea(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tle&&this.cachedEventUids.clear(),this.cachedEventUids.has(y3(e))}saveEventToCache(e){this.cachedEventUids.add(y3(e)),this.lastProcessedEventTime=Date.now()}}function y3(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function V6({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rle(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return V6(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ile(n,e={}){return mu(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sle=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ole=/^https?/;async function ale(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ile(n);for(const t of e)try{if(lle(t))return}catch{}Yo(n,"unauthorized-domain")}function lle(n){const e=IA(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!ole.test(t))return!1;if(sle.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cle=new Vv(3e4,6e4);function v3(){const n=Ta().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function ule(n){return new Promise((e,t)=>{var r,i,s;function o(){v3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v3(),t(Ea(n,"network-request-failed"))},timeout:cle.get()})}if(!((i=(r=Ta().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ta().gapi)===null||s===void 0)&&s.load)o();else{const a=rae("iframefcb");return Ta()[a]=()=>{gapi.load?o():t(Ea(n,"network-request-failed"))},S6(`${nae()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Y_=null,e})}let Y_=null;function dle(n){return Y_=Y_||ule(n),Y_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hle=new Vv(5e3,15e3),fle="__/auth/iframe",ple="emulator/auth/iframe",mle={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gle=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yle(n){const e=n.config;St(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?$2(e,ple):`https://${n.config.authDomain}/${fle}`,r={apiKey:e.apiKey,appName:n.name,v:am},i=gle.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${jv(r).slice(1)}`}async function vle(n){const e=await dle(n),t=Ta().gapi;return St(t,n,"internal-error"),e.open({where:document.body,url:yle(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mle,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Ea(n,"network-request-failed"),a=Ta().setTimeout(()=>{s(o)},hle.get());function l(){Ta().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xle={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_le=500,wle=600,ble="_blank",Sle="http://localhost";class x3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ele(n,e,t,r=_le,i=wle){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},xle),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Oi().toLowerCase();t&&(a=g6(c)?ble:t),p6(c)&&(e=e||Sle,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[g,v])=>`${f}${g}=${v},`,"");if(qoe(c)&&a!=="_self")return Tle(e||"",a),new x3(null);const d=window.open(e||"",a,u);St(d,n,"popup-blocked");try{d.focus()}catch{}return new x3(d)}function Tle(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mle="__/auth/handler",Ale="emulator/auth/handler",Cle=encodeURIComponent("fac");async function _3(n,e,t,r,i,s){St(n.config.authDomain,n,"auth-domain-config-required"),St(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:am,eventId:i};if(e instanceof M6){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",use(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof Uv){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await n._getAppCheckToken(),c=l?`#${Cle}=${encodeURIComponent(l)}`:"";return`${Ple(n)}?${jv(a).slice(1)}${c}`}function Ple({config:n}){return n.emulator?$2(n,Ale):`https://${n.authDomain}/${Mle}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="webStorageSupport";class Ile{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=N6,this._completeRedirectFn=ele,this._overrideRedirectResult=Qae}async _openPopup(e,t,r,i){var s;Cl((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await _3(e,t,r,IA(),i);return Ele(e,o,Q2())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await _3(e,t,r,IA(),i);return Nae(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Cl(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await vle(e),r=new nle(e);return t.register("authEvent",i=>(St(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ZE,{type:ZE},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[ZE];o!==void 0&&t(!!o),Yo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ale(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return w6()||m6()||K2()}}const Rle=Ile;var w3="@firebase/auth",b3="1.10.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kle{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){St(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nle(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dle(n){ka(new Ko("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;St(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:b6(n)},c=new Zoe(r,i,s,l);return cae(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ka(new Ko("auth-internal",e=>{const t=lm(e.getProvider("auth").getImmediate());return(r=>new kle(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),mo(w3,b3,Nle(n)),mo(w3,b3,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lle=5*60,Ole=YB("authIdTokenMaxAge")||Lle;let S3=null;const Fle=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Ole)return;const i=t==null?void 0:t.token;S3!==i&&(S3=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function jle(n=W2()){const e=lh(n,"auth");if(e.isInitialized())return e.getImmediate();const t=lae(n,{popupRedirectResolver:Rle,persistence:[Bae,R6,N6]}),r=YB("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Fle(s.toString());Aae(t,o,()=>o(t.currentUser)),Mae(t,a=>o(a))}}const i=qB("auth");return i?uae(t,`http://${i}`):mb("Auth",!1),t}function Vle(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}eae({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Ea("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Vle().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Dle("Browser");var E3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hc,U6;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,T){function C(){}C.prototype=T.prototype,P.D=T.prototype,P.prototype=new C,P.prototype.constructor=P,P.C=function(k,O,U){for(var V=Array(arguments.length-2),B=2;B<arguments.length;B++)V[B-2]=arguments[B];return T.prototype[O].apply(k,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,T,C){C||(C=0);var k=Array(16);if(typeof T=="string")for(var O=0;16>O;++O)k[O]=T.charCodeAt(C++)|T.charCodeAt(C++)<<8|T.charCodeAt(C++)<<16|T.charCodeAt(C++)<<24;else for(O=0;16>O;++O)k[O]=T[C++]|T[C++]<<8|T[C++]<<16|T[C++]<<24;T=P.g[0],C=P.g[1],O=P.g[2];var U=P.g[3],V=T+(U^C&(O^U))+k[0]+3614090360&4294967295;T=C+(V<<7&4294967295|V>>>25),V=U+(O^T&(C^O))+k[1]+3905402710&4294967295,U=T+(V<<12&4294967295|V>>>20),V=O+(C^U&(T^C))+k[2]+606105819&4294967295,O=U+(V<<17&4294967295|V>>>15),V=C+(T^O&(U^T))+k[3]+3250441966&4294967295,C=O+(V<<22&4294967295|V>>>10),V=T+(U^C&(O^U))+k[4]+4118548399&4294967295,T=C+(V<<7&4294967295|V>>>25),V=U+(O^T&(C^O))+k[5]+1200080426&4294967295,U=T+(V<<12&4294967295|V>>>20),V=O+(C^U&(T^C))+k[6]+2821735955&4294967295,O=U+(V<<17&4294967295|V>>>15),V=C+(T^O&(U^T))+k[7]+4249261313&4294967295,C=O+(V<<22&4294967295|V>>>10),V=T+(U^C&(O^U))+k[8]+1770035416&4294967295,T=C+(V<<7&4294967295|V>>>25),V=U+(O^T&(C^O))+k[9]+2336552879&4294967295,U=T+(V<<12&4294967295|V>>>20),V=O+(C^U&(T^C))+k[10]+4294925233&4294967295,O=U+(V<<17&4294967295|V>>>15),V=C+(T^O&(U^T))+k[11]+2304563134&4294967295,C=O+(V<<22&4294967295|V>>>10),V=T+(U^C&(O^U))+k[12]+1804603682&4294967295,T=C+(V<<7&4294967295|V>>>25),V=U+(O^T&(C^O))+k[13]+4254626195&4294967295,U=T+(V<<12&4294967295|V>>>20),V=O+(C^U&(T^C))+k[14]+2792965006&4294967295,O=U+(V<<17&4294967295|V>>>15),V=C+(T^O&(U^T))+k[15]+1236535329&4294967295,C=O+(V<<22&4294967295|V>>>10),V=T+(O^U&(C^O))+k[1]+4129170786&4294967295,T=C+(V<<5&4294967295|V>>>27),V=U+(C^O&(T^C))+k[6]+3225465664&4294967295,U=T+(V<<9&4294967295|V>>>23),V=O+(T^C&(U^T))+k[11]+643717713&4294967295,O=U+(V<<14&4294967295|V>>>18),V=C+(U^T&(O^U))+k[0]+3921069994&4294967295,C=O+(V<<20&4294967295|V>>>12),V=T+(O^U&(C^O))+k[5]+3593408605&4294967295,T=C+(V<<5&4294967295|V>>>27),V=U+(C^O&(T^C))+k[10]+38016083&4294967295,U=T+(V<<9&4294967295|V>>>23),V=O+(T^C&(U^T))+k[15]+3634488961&4294967295,O=U+(V<<14&4294967295|V>>>18),V=C+(U^T&(O^U))+k[4]+3889429448&4294967295,C=O+(V<<20&4294967295|V>>>12),V=T+(O^U&(C^O))+k[9]+568446438&4294967295,T=C+(V<<5&4294967295|V>>>27),V=U+(C^O&(T^C))+k[14]+3275163606&4294967295,U=T+(V<<9&4294967295|V>>>23),V=O+(T^C&(U^T))+k[3]+4107603335&4294967295,O=U+(V<<14&4294967295|V>>>18),V=C+(U^T&(O^U))+k[8]+1163531501&4294967295,C=O+(V<<20&4294967295|V>>>12),V=T+(O^U&(C^O))+k[13]+2850285829&4294967295,T=C+(V<<5&4294967295|V>>>27),V=U+(C^O&(T^C))+k[2]+4243563512&4294967295,U=T+(V<<9&4294967295|V>>>23),V=O+(T^C&(U^T))+k[7]+1735328473&4294967295,O=U+(V<<14&4294967295|V>>>18),V=C+(U^T&(O^U))+k[12]+2368359562&4294967295,C=O+(V<<20&4294967295|V>>>12),V=T+(C^O^U)+k[5]+4294588738&4294967295,T=C+(V<<4&4294967295|V>>>28),V=U+(T^C^O)+k[8]+2272392833&4294967295,U=T+(V<<11&4294967295|V>>>21),V=O+(U^T^C)+k[11]+1839030562&4294967295,O=U+(V<<16&4294967295|V>>>16),V=C+(O^U^T)+k[14]+4259657740&4294967295,C=O+(V<<23&4294967295|V>>>9),V=T+(C^O^U)+k[1]+2763975236&4294967295,T=C+(V<<4&4294967295|V>>>28),V=U+(T^C^O)+k[4]+1272893353&4294967295,U=T+(V<<11&4294967295|V>>>21),V=O+(U^T^C)+k[7]+4139469664&4294967295,O=U+(V<<16&4294967295|V>>>16),V=C+(O^U^T)+k[10]+3200236656&4294967295,C=O+(V<<23&4294967295|V>>>9),V=T+(C^O^U)+k[13]+681279174&4294967295,T=C+(V<<4&4294967295|V>>>28),V=U+(T^C^O)+k[0]+3936430074&4294967295,U=T+(V<<11&4294967295|V>>>21),V=O+(U^T^C)+k[3]+3572445317&4294967295,O=U+(V<<16&4294967295|V>>>16),V=C+(O^U^T)+k[6]+76029189&4294967295,C=O+(V<<23&4294967295|V>>>9),V=T+(C^O^U)+k[9]+3654602809&4294967295,T=C+(V<<4&4294967295|V>>>28),V=U+(T^C^O)+k[12]+3873151461&4294967295,U=T+(V<<11&4294967295|V>>>21),V=O+(U^T^C)+k[15]+530742520&4294967295,O=U+(V<<16&4294967295|V>>>16),V=C+(O^U^T)+k[2]+3299628645&4294967295,C=O+(V<<23&4294967295|V>>>9),V=T+(O^(C|~U))+k[0]+4096336452&4294967295,T=C+(V<<6&4294967295|V>>>26),V=U+(C^(T|~O))+k[7]+1126891415&4294967295,U=T+(V<<10&4294967295|V>>>22),V=O+(T^(U|~C))+k[14]+2878612391&4294967295,O=U+(V<<15&4294967295|V>>>17),V=C+(U^(O|~T))+k[5]+4237533241&4294967295,C=O+(V<<21&4294967295|V>>>11),V=T+(O^(C|~U))+k[12]+1700485571&4294967295,T=C+(V<<6&4294967295|V>>>26),V=U+(C^(T|~O))+k[3]+2399980690&4294967295,U=T+(V<<10&4294967295|V>>>22),V=O+(T^(U|~C))+k[10]+4293915773&4294967295,O=U+(V<<15&4294967295|V>>>17),V=C+(U^(O|~T))+k[1]+2240044497&4294967295,C=O+(V<<21&4294967295|V>>>11),V=T+(O^(C|~U))+k[8]+1873313359&4294967295,T=C+(V<<6&4294967295|V>>>26),V=U+(C^(T|~O))+k[15]+4264355552&4294967295,U=T+(V<<10&4294967295|V>>>22),V=O+(T^(U|~C))+k[6]+2734768916&4294967295,O=U+(V<<15&4294967295|V>>>17),V=C+(U^(O|~T))+k[13]+1309151649&4294967295,C=O+(V<<21&4294967295|V>>>11),V=T+(O^(C|~U))+k[4]+4149444226&4294967295,T=C+(V<<6&4294967295|V>>>26),V=U+(C^(T|~O))+k[11]+3174756917&4294967295,U=T+(V<<10&4294967295|V>>>22),V=O+(T^(U|~C))+k[2]+718787259&4294967295,O=U+(V<<15&4294967295|V>>>17),V=C+(U^(O|~T))+k[9]+3951481745&4294967295,P.g[0]=P.g[0]+T&4294967295,P.g[1]=P.g[1]+(O+(V<<21&4294967295|V>>>11))&4294967295,P.g[2]=P.g[2]+O&4294967295,P.g[3]=P.g[3]+U&4294967295}r.prototype.u=function(P,T){T===void 0&&(T=P.length);for(var C=T-this.blockSize,k=this.B,O=this.h,U=0;U<T;){if(O==0)for(;U<=C;)i(this,P,U),U+=this.blockSize;if(typeof P=="string"){for(;U<T;)if(k[O++]=P.charCodeAt(U++),O==this.blockSize){i(this,k),O=0;break}}else for(;U<T;)if(k[O++]=P[U++],O==this.blockSize){i(this,k),O=0;break}}this.h=O,this.o+=T},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var T=1;T<P.length-8;++T)P[T]=0;var C=8*this.o;for(T=P.length-8;T<P.length;++T)P[T]=C&255,C/=256;for(this.u(P),P=Array(16),T=C=0;4>T;++T)for(var k=0;32>k;k+=8)P[C++]=this.g[T]>>>k&255;return P};function s(P,T){var C=a;return Object.prototype.hasOwnProperty.call(C,P)?C[P]:C[P]=T(P)}function o(P,T){this.h=T;for(var C=[],k=!0,O=P.length-1;0<=O;O--){var U=P[O]|0;k&&U==T||(C[O]=U,k=!1)}this.g=C}var a={};function l(P){return-128<=P&&128>P?s(P,function(T){return new o([T|0],0>T?-1:0)}):new o([P|0],0>P?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return d;if(0>P)return x(c(-P));for(var T=[],C=1,k=0;P>=C;k++)T[k]=P/C|0,C*=4294967296;return new o(T,0)}function u(P,T){if(P.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(P.charAt(0)=="-")return x(u(P.substring(1),T));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(T,8)),k=d,O=0;O<P.length;O+=8){var U=Math.min(8,P.length-O),V=parseInt(P.substring(O,O+U),T);8>U?(U=c(Math.pow(T,U)),k=k.j(U).add(c(V))):(k=k.j(C),k=k.add(c(V)))}return k}var d=l(0),f=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(y(this))return-x(this).m();for(var P=0,T=1,C=0;C<this.g.length;C++){var k=this.i(C);P+=(0<=k?k:4294967296+k)*T,T*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(v(this))return"0";if(y(this))return"-"+x(this).toString(P);for(var T=c(Math.pow(P,6)),C=this,k="";;){var O=M(C,T).g;C=_(C,O.j(T));var U=((0<C.g.length?C.g[0]:C.h)>>>0).toString(P);if(C=O,v(C))return U+k;for(;6>U.length;)U="0"+U;k=U+k}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function v(P){if(P.h!=0)return!1;for(var T=0;T<P.g.length;T++)if(P.g[T]!=0)return!1;return!0}function y(P){return P.h==-1}n.l=function(P){return P=_(this,P),y(P)?-1:v(P)?0:1};function x(P){for(var T=P.g.length,C=[],k=0;k<T;k++)C[k]=~P.g[k];return new o(C,~P.h).add(f)}n.abs=function(){return y(this)?x(this):this},n.add=function(P){for(var T=Math.max(this.g.length,P.g.length),C=[],k=0,O=0;O<=T;O++){var U=k+(this.i(O)&65535)+(P.i(O)&65535),V=(U>>>16)+(this.i(O)>>>16)+(P.i(O)>>>16);k=V>>>16,U&=65535,V&=65535,C[O]=V<<16|U}return new o(C,C[C.length-1]&-2147483648?-1:0)};function _(P,T){return P.add(x(T))}n.j=function(P){if(v(this)||v(P))return d;if(y(this))return y(P)?x(this).j(x(P)):x(x(this).j(P));if(y(P))return x(this.j(x(P)));if(0>this.l(g)&&0>P.l(g))return c(this.m()*P.m());for(var T=this.g.length+P.g.length,C=[],k=0;k<2*T;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(var O=0;O<P.g.length;O++){var U=this.i(k)>>>16,V=this.i(k)&65535,B=P.i(O)>>>16,Z=P.i(O)&65535;C[2*k+2*O]+=V*Z,w(C,2*k+2*O),C[2*k+2*O+1]+=U*Z,w(C,2*k+2*O+1),C[2*k+2*O+1]+=V*B,w(C,2*k+2*O+1),C[2*k+2*O+2]+=U*B,w(C,2*k+2*O+2)}for(k=0;k<T;k++)C[k]=C[2*k+1]<<16|C[2*k];for(k=T;k<2*T;k++)C[k]=0;return new o(C,0)};function w(P,T){for(;(P[T]&65535)!=P[T];)P[T+1]+=P[T]>>>16,P[T]&=65535,T++}function S(P,T){this.g=P,this.h=T}function M(P,T){if(v(T))throw Error("division by zero");if(v(P))return new S(d,d);if(y(P))return T=M(x(P),T),new S(x(T.g),x(T.h));if(y(T))return T=M(P,x(T)),new S(x(T.g),T.h);if(30<P.g.length){if(y(P)||y(T))throw Error("slowDivide_ only works with positive integers.");for(var C=f,k=T;0>=k.l(P);)C=I(C),k=I(k);var O=L(C,1),U=L(k,1);for(k=L(k,2),C=L(C,2);!v(k);){var V=U.add(k);0>=V.l(P)&&(O=O.add(C),U=V),k=L(k,1),C=L(C,1)}return T=_(P,O.j(T)),new S(O,T)}for(O=d;0<=P.l(T);){for(C=Math.max(1,Math.floor(P.m()/T.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),U=c(C),V=U.j(T);y(V)||0<V.l(P);)C-=k,U=c(C),V=U.j(T);v(U)&&(U=f),O=O.add(U),P=_(P,V)}return new S(O,P)}n.A=function(P){return M(this,P).h},n.and=function(P){for(var T=Math.max(this.g.length,P.g.length),C=[],k=0;k<T;k++)C[k]=this.i(k)&P.i(k);return new o(C,this.h&P.h)},n.or=function(P){for(var T=Math.max(this.g.length,P.g.length),C=[],k=0;k<T;k++)C[k]=this.i(k)|P.i(k);return new o(C,this.h|P.h)},n.xor=function(P){for(var T=Math.max(this.g.length,P.g.length),C=[],k=0;k<T;k++)C[k]=this.i(k)^P.i(k);return new o(C,this.h^P.h)};function I(P){for(var T=P.g.length+1,C=[],k=0;k<T;k++)C[k]=P.i(k)<<1|P.i(k-1)>>>31;return new o(C,P.h)}function L(P,T){var C=T>>5;T%=32;for(var k=P.g.length-C,O=[],U=0;U<k;U++)O[U]=0<T?P.i(U+C)>>>T|P.i(U+C+1)<<32-T:P.i(U+C);return new o(O,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,U6=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Hc=o}).apply(typeof E3<"u"?E3:typeof self<"u"?self:typeof window<"u"?window:{});var kx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var z6,Pg,B6,X_,NA,H6,W6,G6;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(b,D,F){return b==Array.prototype||b==Object.prototype||(b[D]=F.value),b};function t(b){b=[typeof globalThis=="object"&&globalThis,b,typeof window=="object"&&window,typeof self=="object"&&self,typeof kx=="object"&&kx];for(var D=0;D<b.length;++D){var F=b[D];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var r=t(this);function i(b,D){if(D)e:{var F=r;b=b.split(".");for(var H=0;H<b.length-1;H++){var fe=b[H];if(!(fe in F))break e;F=F[fe]}b=b[b.length-1],H=F[b],D=D(H),D!=H&&D!=null&&e(F,b,{configurable:!0,writable:!0,value:D})}}function s(b,D){b instanceof String&&(b+="");var F=0,H=!1,fe={next:function(){if(!H&&F<b.length){var xe=F++;return{value:D(xe,b[xe]),done:!1}}return H=!0,{done:!0,value:void 0}}};return fe[Symbol.iterator]=function(){return fe},fe}i("Array.prototype.values",function(b){return b||function(){return s(this,function(D,F){return F})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(b){var D=typeof b;return D=D!="object"?D:b?Array.isArray(b)?"array":D:"null",D=="array"||D=="object"&&typeof b.length=="number"}function c(b){var D=typeof b;return D=="object"&&b!=null||D=="function"}function u(b,D,F){return b.call.apply(b.bind,arguments)}function d(b,D,F){if(!b)throw Error();if(2<arguments.length){var H=Array.prototype.slice.call(arguments,2);return function(){var fe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(fe,H),b.apply(D,fe)}}return function(){return b.apply(D,arguments)}}function f(b,D,F){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function g(b,D){var F=Array.prototype.slice.call(arguments,1);return function(){var H=F.slice();return H.push.apply(H,arguments),b.apply(this,H)}}function v(b,D){function F(){}F.prototype=D.prototype,b.aa=D.prototype,b.prototype=new F,b.prototype.constructor=b,b.Qb=function(H,fe,xe){for(var ze=Array(arguments.length-2),ln=2;ln<arguments.length;ln++)ze[ln-2]=arguments[ln];return D.prototype[fe].apply(H,ze)}}function y(b){const D=b.length;if(0<D){const F=Array(D);for(let H=0;H<D;H++)F[H]=b[H];return F}return[]}function x(b,D){for(let F=1;F<arguments.length;F++){const H=arguments[F];if(l(H)){const fe=b.length||0,xe=H.length||0;b.length=fe+xe;for(let ze=0;ze<xe;ze++)b[fe+ze]=H[ze]}else b.push(H)}}class _{constructor(D,F){this.i=D,this.j=F,this.h=0,this.g=null}get(){let D;return 0<this.h?(this.h--,D=this.g,this.g=D.next,D.next=null):D=this.i(),D}}function w(b){return/^[\s\xa0]*$/.test(b)}function S(){var b=a.navigator;return b&&(b=b.userAgent)?b:""}function M(b){return M[" "](b),b}M[" "]=function(){};var I=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function L(b,D,F){for(const H in b)D.call(F,b[H],H,b)}function P(b,D){for(const F in b)D.call(void 0,b[F],F,b)}function T(b){const D={};for(const F in b)D[F]=b[F];return D}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(b,D){let F,H;for(let fe=1;fe<arguments.length;fe++){H=arguments[fe];for(F in H)b[F]=H[F];for(let xe=0;xe<C.length;xe++)F=C[xe],Object.prototype.hasOwnProperty.call(H,F)&&(b[F]=H[F])}}function O(b){var D=1;b=b.split(":");const F=[];for(;0<D&&b.length;)F.push(b.shift()),D--;return b.length&&F.push(b.join(":")),F}function U(b){a.setTimeout(()=>{throw b},0)}function V(){var b=G;let D=null;return b.g&&(D=b.g,b.g=b.g.next,b.g||(b.h=null),D.next=null),D}class B{constructor(){this.h=this.g=null}add(D,F){const H=Z.get();H.set(D,F),this.h?this.h.next=H:this.g=H,this.h=H}}var Z=new _(()=>new ne,b=>b.reset());class ne{constructor(){this.next=this.g=this.h=null}set(D,F){this.h=D,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,z=!1,G=new B,q=()=>{const b=a.Promise.resolve(void 0);oe=()=>{b.then(se)}};var se=()=>{for(var b;b=V();){try{b.h.call(b.g)}catch(F){U(F)}var D=Z;D.j(b),100>D.h&&(D.h++,b.next=D.g,D.g=b)}z=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(b,D){this.type=b,this.g=this.target=D,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var b=!1,D=Object.defineProperty({},"passive",{get:function(){b=!0}});try{const F=()=>{};a.addEventListener("test",F,D),a.removeEventListener("test",F,D)}catch{}return b}();function re(b,D){if(he.call(this,b?b.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,b){var F=this.type=b.type,H=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:null;if(this.target=b.target||b.srcElement,this.g=D,D=b.relatedTarget){if(I){e:{try{M(D.nodeName);var fe=!0;break e}catch{}fe=!1}fe||(D=null)}}else F=="mouseover"?D=b.fromElement:F=="mouseout"&&(D=b.toElement);this.relatedTarget=D,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0),this.button=b.button,this.key=b.key||"",this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.shiftKey=b.shiftKey,this.metaKey=b.metaKey,this.pointerId=b.pointerId||0,this.pointerType=typeof b.pointerType=="string"?b.pointerType:Y[b.pointerType]||"",this.state=b.state,this.i=b,b.defaultPrevented&&re.aa.h.call(this)}}v(re,he);var Y={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var b=this.i;b.preventDefault?b.preventDefault():b.returnValue=!1};var ae="closure_listenable_"+(1e6*Math.random()|0),Se=0;function Re(b,D,F,H,fe){this.listener=b,this.proxy=null,this.src=D,this.type=F,this.capture=!!H,this.ha=fe,this.key=++Se,this.da=this.fa=!1}function Ae(b){b.da=!0,b.listener=null,b.proxy=null,b.src=null,b.ha=null}function Te(b){this.src=b,this.g={},this.h=0}Te.prototype.add=function(b,D,F,H,fe){var xe=b.toString();b=this.g[xe],b||(b=this.g[xe]=[],this.h++);var ze=le(b,D,H,fe);return-1<ze?(D=b[ze],F||(D.fa=!1)):(D=new Re(D,this.src,xe,!!H,fe),D.fa=F,b.push(D)),D};function te(b,D){var F=D.type;if(F in b.g){var H=b.g[F],fe=Array.prototype.indexOf.call(H,D,void 0),xe;(xe=0<=fe)&&Array.prototype.splice.call(H,fe,1),xe&&(Ae(D),b.g[F].length==0&&(delete b.g[F],b.h--))}}function le(b,D,F,H){for(var fe=0;fe<b.length;++fe){var xe=b[fe];if(!xe.da&&xe.listener==D&&xe.capture==!!F&&xe.ha==H)return fe}return-1}var we="closure_lm_"+(1e6*Math.random()|0),Be={};function Fe(b,D,F,H,fe){if(Array.isArray(D)){for(var xe=0;xe<D.length;xe++)Fe(b,D[xe],F,H,fe);return null}return F=Ve(F),b&&b[ae]?b.K(D,F,c(H)?!!H.capture:!1,fe):Je(b,D,F,!1,H,fe)}function Je(b,D,F,H,fe,xe){if(!D)throw Error("Invalid event type");var ze=c(fe)?!!fe.capture:!!fe,ln=W(b);if(ln||(b[we]=ln=new Te(b)),F=ln.add(D,F,H,ze,xe),F.proxy)return F;if(H=Ze(),F.proxy=H,H.src=b,H.listener=F,b.addEventListener)_e||(fe=ze),fe===void 0&&(fe=!1),b.addEventListener(D.toString(),H,fe);else if(b.attachEvent)b.attachEvent(Ot(D.toString()),H);else if(b.addListener&&b.removeListener)b.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return F}function Ze(){function b(F){return D.call(b.src,b.listener,F)}const D=X;return b}function et(b,D,F,H,fe){if(Array.isArray(D))for(var xe=0;xe<D.length;xe++)et(b,D[xe],F,H,fe);else H=c(H)?!!H.capture:!!H,F=Ve(F),b&&b[ae]?(b=b.i,D=String(D).toString(),D in b.g&&(xe=b.g[D],F=le(xe,F,H,fe),-1<F&&(Ae(xe[F]),Array.prototype.splice.call(xe,F,1),xe.length==0&&(delete b.g[D],b.h--)))):b&&(b=W(b))&&(D=b.g[D.toString()],b=-1,D&&(b=le(D,F,H,fe)),(F=-1<b?D[b]:null)&&At(F))}function At(b){if(typeof b!="number"&&b&&!b.da){var D=b.src;if(D&&D[ae])te(D.i,b);else{var F=b.type,H=b.proxy;D.removeEventListener?D.removeEventListener(F,H,b.capture):D.detachEvent?D.detachEvent(Ot(F),H):D.addListener&&D.removeListener&&D.removeListener(H),(F=W(D))?(te(F,b),F.h==0&&(F.src=null,D[we]=null)):Ae(b)}}}function Ot(b){return b in Be?Be[b]:Be[b]="on"+b}function X(b,D){if(b.da)b=!0;else{D=new re(D,this);var F=b.listener,H=b.ha||b.src;b.fa&&At(b),b=F.call(H,D)}return b}function W(b){return b=b[we],b instanceof Te?b:null}var ye="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ve(b){return typeof b=="function"?b:(b[ye]||(b[ye]=function(D){return b.handleEvent(D)}),b[ye])}function Oe(){J.call(this),this.i=new Te(this),this.M=this,this.F=null}v(Oe,J),Oe.prototype[ae]=!0,Oe.prototype.removeEventListener=function(b,D,F,H){et(this,b,D,F,H)};function je(b,D){var F,H=b.F;if(H)for(F=[];H;H=H.F)F.push(H);if(b=b.M,H=D.type||D,typeof D=="string")D=new he(D,b);else if(D instanceof he)D.target=D.target||b;else{var fe=D;D=new he(H,b),k(D,fe)}if(fe=!0,F)for(var xe=F.length-1;0<=xe;xe--){var ze=D.g=F[xe];fe=rt(ze,H,!0,D)&&fe}if(ze=D.g=b,fe=rt(ze,H,!0,D)&&fe,fe=rt(ze,H,!1,D)&&fe,F)for(xe=0;xe<F.length;xe++)ze=D.g=F[xe],fe=rt(ze,H,!1,D)&&fe}Oe.prototype.N=function(){if(Oe.aa.N.call(this),this.i){var b=this.i,D;for(D in b.g){for(var F=b.g[D],H=0;H<F.length;H++)Ae(F[H]);delete b.g[D],b.h--}}this.F=null},Oe.prototype.K=function(b,D,F,H){return this.i.add(String(b),D,!1,F,H)},Oe.prototype.L=function(b,D,F,H){return this.i.add(String(b),D,!0,F,H)};function rt(b,D,F,H){if(D=b.i.g[String(D)],!D)return!0;D=D.concat();for(var fe=!0,xe=0;xe<D.length;++xe){var ze=D[xe];if(ze&&!ze.da&&ze.capture==F){var ln=ze.listener,Tr=ze.ha||ze.src;ze.fa&&te(b.i,ze),fe=ln.call(Tr,H)!==!1&&fe}}return fe&&!H.defaultPrevented}function $e(b,D,F){if(typeof b=="function")F&&(b=f(b,F));else if(b&&typeof b.handleEvent=="function")b=f(b.handleEvent,b);else throw Error("Invalid listener argument");return 2147483647<Number(D)?-1:a.setTimeout(b,D||0)}function Ce(b){b.g=$e(()=>{b.g=null,b.i&&(b.i=!1,Ce(b))},b.l);const D=b.h;b.h=null,b.m.apply(null,D)}class ct extends J{constructor(D,F){super(),this.m=D,this.l=F,this.h=null,this.i=!1,this.g=null}j(D){this.h=arguments,this.g?this.i=!0:Ce(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ye(b){J.call(this),this.h=b,this.g={}}v(Ye,J);var ht=[];function dt(b){L(b.g,function(D,F){this.g.hasOwnProperty(F)&&At(D)},b),b.g={}}Ye.prototype.N=function(){Ye.aa.N.call(this),dt(this)},Ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var at=a.JSON.stringify,ie=a.JSON.parse,De=class{stringify(b){return a.JSON.stringify(b,void 0)}parse(b){return a.JSON.parse(b,void 0)}};function Ke(){}Ke.prototype.h=null;function ee(b){return b.h||(b.h=b.i())}function ve(){}var ke={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function We(){he.call(this,"d")}v(We,he);function Qe(){he.call(this,"c")}v(Qe,he);var jt={},Xt=null;function on(){return Xt=Xt||new Oe}jt.La="serverreachability";function Wn(b){he.call(this,jt.La,b)}v(Wn,he);function Zt(b){const D=on();je(D,new Wn(D))}jt.STAT_EVENT="statevent";function Gn(b,D){he.call(this,jt.STAT_EVENT,b),this.stat=D}v(Gn,he);function hn(b){const D=on();je(D,new Gn(D,b))}jt.Ma="timingevent";function bh(b,D){he.call(this,jt.Ma,b),this.size=D}v(bh,he);function Fa(b,D){if(typeof b!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){b()},D)}function na(){this.g=!0}na.prototype.xa=function(){this.g=!1};function K(b,D,F,H,fe,xe){b.info(function(){if(b.g)if(xe)for(var ze="",ln=xe.split("&"),Tr=0;Tr<ln.length;Tr++){var tn=ln[Tr].split("=");if(1<tn.length){var Mr=tn[0];tn=tn[1];var xn=Mr.split("_");ze=2<=xn.length&&xn[1]=="type"?ze+(Mr+"="+tn+"&"):ze+(Mr+"=redacted&")}}else ze=null;else ze=xe;return"XMLHTTP REQ ("+H+") [attempt "+fe+"]: "+D+`
`+F+`
`+ze})}function me(b,D,F,H,fe,xe,ze){b.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+fe+"]: "+D+`
`+F+`
`+xe+" "+ze})}function Ee(b,D,F,H){b.info(function(){return"XMLHTTP TEXT ("+D+"): "+Pe(b,F)+(H?" "+H:"")})}function pe(b,D){b.info(function(){return"TIMEOUT: "+D})}na.prototype.info=function(){};function Pe(b,D){if(!b.g)return D;if(!D)return null;try{var F=JSON.parse(D);if(F){for(b=0;b<F.length;b++)if(Array.isArray(F[b])){var H=F[b];if(!(2>H.length)){var fe=H[1];if(Array.isArray(fe)&&!(1>fe.length)){var xe=fe[0];if(xe!="noop"&&xe!="stop"&&xe!="close")for(var ze=1;ze<fe.length;ze++)fe[ze]=""}}}}return at(F)}catch{return D}}var ft={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pt;function It(){}v(It,Ke),It.prototype.g=function(){return new XMLHttpRequest},It.prototype.i=function(){return{}},Pt=new It;function kt(b,D,F,H){this.j=b,this.i=D,this.l=F,this.R=H||1,this.U=new Ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ut}function Ut(){this.i=null,this.g="",this.h=!1}var $t={},Nn={};function Dr(b,D,F){b.L=1,b.v=ja(qs(D)),b.m=F,b.P=!0,Qi(b,null)}function Qi(b,D){b.F=Date.now(),Nt(b),b.A=qs(b.v);var F=b.A,H=b.R;Array.isArray(H)||(H=[String(H)]),Th(F.i,"t",H),b.C=0,F=b.j.J,b.h=new Ut,b.g=ku(b.j,F?D:null,!b.m),0<b.O&&(b.M=new ct(f(b.Y,b,b.g),b.O)),D=b.U,F=b.g,H=b.ca;var fe="readystatechange";Array.isArray(fe)||(fe&&(ht[0]=fe.toString()),fe=ht);for(var xe=0;xe<fe.length;xe++){var ze=Fe(F,fe[xe],H||D.handleEvent,!1,D.h||D);if(!ze)break;D.g[ze.key]=ze}D=b.H?T(b.H):{},b.m?(b.u||(b.u="POST"),D["Content-Type"]="application/x-www-form-urlencoded",b.g.ea(b.A,b.u,b.m,D)):(b.u="GET",b.g.ea(b.A,b.u,null,D)),Zt(),K(b.i,b.u,b.A,b.l,b.R,b.m)}kt.prototype.ca=function(b){b=b.target;const D=this.M;D&&hr(b)==3?D.j():this.Y(b)},kt.prototype.Y=function(b){try{if(b==this.g)e:{const xn=hr(this.g);var D=this.g.Ba();const Ar=this.g.Z();if(!(3>xn)&&(xn!=3||this.g&&(this.h.h||this.g.oa()||Cu(this.g)))){this.J||xn!=4||D==7||(D==8||0>=Ar?Zt(3):Zt(2)),Dn(this);var F=this.g.Z();this.X=F;t:if(Bs(this)){var H=Cu(this.g);b="";var fe=H.length,xe=hr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ws(this),Xr(this);var ze="";break t}this.h.i=new a.TextDecoder}for(D=0;D<fe;D++)this.h.h=!0,b+=this.h.i.decode(H[D],{stream:!(xe&&D==fe-1)});H.length=0,this.h.g+=b,this.C=0,ze=this.h.g}else ze=this.g.oa();if(this.o=F==200,me(this.i,this.u,this.A,this.l,this.R,xn,F),this.o){if(this.T&&!this.K){t:{if(this.g){var ln,Tr=this.g;if((ln=Tr.g?Tr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ln)){var tn=ln;break t}}tn=null}if(F=tn)Ee(this.i,this.l,F,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ms(this,F);else{this.o=!1,this.s=3,hn(12),Ws(this),Xr(this);break e}}if(this.P){F=!0;let nn;for(;!this.J&&this.C<ze.length;)if(nn=$n(this,ze),nn==Nn){xn==4&&(this.s=4,hn(14),F=!1),Ee(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==$t){this.s=4,hn(15),Ee(this.i,this.l,ze,"[Invalid Chunk]"),F=!1;break}else Ee(this.i,this.l,nn,null),ms(this,nn);if(Bs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xn!=4||ze.length!=0||this.h.h||(this.s=1,hn(16),F=!1),this.o=this.o&&F,!F)Ee(this.i,this.l,ze,"[Invalid Chunked Response]"),Ws(this),Xr(this);else if(0<ze.length&&!this.W){this.W=!0;var Mr=this.j;Mr.g==this&&Mr.ba&&!Mr.M&&(Mr.j.info("Great, no buffering proxy detected. Bytes received: "+ze.length),ws(Mr),Mr.M=!0,hn(11))}}else Ee(this.i,this.l,ze,null),ms(this,ze);xn==4&&Ws(this),this.o&&!this.J&&(xn==4?km(this.j,this):(this.o=!1,Nt(this)))}else Ah(this.g),F==400&&0<ze.indexOf("Unknown SID")?(this.s=3,hn(12)):(this.s=0,hn(13)),Ws(this),Xr(this)}}}catch{}finally{}};function Bs(b){return b.g?b.u=="GET"&&b.L!=2&&b.j.Ca:!1}function $n(b,D){var F=b.C,H=D.indexOf(`
`,F);return H==-1?Nn:(F=Number(D.substring(F,H)),isNaN(F)?$t:(H+=1,H+F>D.length?Nn:(D=D.slice(H,H+F),b.C=H+F,D)))}kt.prototype.cancel=function(){this.J=!0,Ws(this)};function Nt(b){b.S=Date.now()+b.I,Hs(b,b.I)}function Hs(b,D){if(b.B!=null)throw Error("WatchDog timer not null");b.B=Fa(f(b.ba,b),D)}function Dn(b){b.B&&(a.clearTimeout(b.B),b.B=null)}kt.prototype.ba=function(){this.B=null;const b=Date.now();0<=b-this.S?(pe(this.i,this.A),this.L!=2&&(Zt(),hn(17)),Ws(this),this.s=2,Xr(this)):Hs(this,this.S-b)};function Xr(b){b.j.G==0||b.J||km(b.j,b)}function Ws(b){Dn(b);var D=b.M;D&&typeof D.ma=="function"&&D.ma(),b.M=null,dt(b.U),b.g&&(D=b.g,b.g=null,D.abort(),D.ma())}function ms(b,D){try{var F=b.j;if(F.G!=0&&(F.g==b||Ln(F.h,b))){if(!b.K&&Ln(F.h,b)&&F.G==3){try{var H=F.Da.g.parse(D)}catch{H=null}if(Array.isArray(H)&&H.length==3){var fe=H;if(fe[0]==0){e:if(!F.u){if(F.g)if(F.g.F+3e3<b.F)Ba(F),Iu(F);else break e;Rh(F),hn(18)}}else F.za=fe[1],0<F.za-F.T&&37500>fe[2]&&F.F&&F.v==0&&!F.C&&(F.C=Fa(f(F.Za,F),6e3));if(1>=fn(F.h)&&F.ca){try{F.ca()}catch{}F.ca=void 0}}else ia(F,11)}else if((b.K||F.g==b)&&Ba(F),!w(D))for(fe=F.Da.g.parse(D),D=0;D<fe.length;D++){let tn=fe[D];if(F.T=tn[0],tn=tn[1],F.G==2)if(tn[0]=="c"){F.K=tn[1],F.ia=tn[2];const Mr=tn[3];Mr!=null&&(F.la=Mr,F.j.info("VER="+F.la));const xn=tn[4];xn!=null&&(F.Aa=xn,F.j.info("SVER="+F.Aa));const Ar=tn[5];Ar!=null&&typeof Ar=="number"&&0<Ar&&(H=1.5*Ar,F.L=H,F.j.info("backChannelRequestTimeoutMs_="+H)),H=F;const nn=b.g;if(nn){const sa=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sa){var xe=H.h;xe.g||sa.indexOf("spdy")==-1&&sa.indexOf("quic")==-1&&sa.indexOf("h2")==-1||(xe.j=xe.l,xe.g=new Set,xe.h&&(qn(xe,xe.h),xe.h=null))}if(H.D){const ji=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;ji&&(H.ya=ji,Cn(H.I,H.D,ji))}}F.G=3,F.l&&F.l.ua(),F.ba&&(F.R=Date.now()-b.F,F.j.info("Handshake RTT: "+F.R+"ms")),H=F;var ze=b;if(H.qa=kh(H,H.J?H.ia:null,H.W),ze.K){Lr(H.h,ze);var ln=ze,Tr=H.L;Tr&&(ln.I=Tr),ln.B&&(Dn(ln),Nt(ln)),H.g=ze}else Ih(H);0<F.i.length&&Bl(F)}else tn[0]!="stop"&&tn[0]!="close"||ia(F,7);else F.G==3&&(tn[0]=="stop"||tn[0]=="close"?tn[0]=="stop"?ia(F,7):Pu(F):tn[0]!="noop"&&F.l&&F.l.ta(tn),F.v=0)}}Zt(4)}catch{}}var Gs=class{constructor(b,D){this.g=b,this.map=D}};function An(b){this.l=b||10,a.PerformanceNavigationTiming?(b=a.performance.getEntriesByType("navigation"),b=0<b.length&&(b[0].nextHopProtocol=="hq"||b[0].nextHopProtocol=="h2")):b=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=b?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function en(b){return b.h?!0:b.g?b.g.size>=b.j:!1}function fn(b){return b.h?1:b.g?b.g.size:0}function Ln(b,D){return b.h?b.h==D:b.g?b.g.has(D):!1}function qn(b,D){b.g?b.g.add(D):b.h=D}function Lr(b,D){b.h&&b.h==D?b.h=null:b.g&&b.g.has(D)&&b.g.delete(D)}An.prototype.cancel=function(){if(this.i=gs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const b of this.g.values())b.cancel();this.g.clear()}};function gs(b){if(b.h!=null)return b.i.concat(b.h.D);if(b.g!=null&&b.g.size!==0){let D=b.i;for(const F of b.g.values())D=D.concat(F.D);return D}return y(b.i)}function zl(b){if(b.V&&typeof b.V=="function")return b.V();if(typeof Map<"u"&&b instanceof Map||typeof Set<"u"&&b instanceof Set)return Array.from(b.values());if(typeof b=="string")return b.split("");if(l(b)){for(var D=[],F=b.length,H=0;H<F;H++)D.push(b[H]);return D}D=[],F=0;for(H in b)D[F++]=b[H];return D}function hi(b){if(b.na&&typeof b.na=="function")return b.na();if(!b.V||typeof b.V!="function"){if(typeof Map<"u"&&b instanceof Map)return Array.from(b.keys());if(!(typeof Set<"u"&&b instanceof Set)){if(l(b)||typeof b=="string"){var D=[];b=b.length;for(var F=0;F<b;F++)D.push(F);return D}D=[],F=0;for(const H in b)D[F++]=H;return D}}}function Su(b,D){if(b.forEach&&typeof b.forEach=="function")b.forEach(D,void 0);else if(l(b)||typeof b=="string")Array.prototype.forEach.call(b,D,void 0);else for(var F=hi(b),H=zl(b),fe=H.length,xe=0;xe<fe;xe++)D.call(void 0,H[xe],F&&F[xe],b)}var Mm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function v0(b,D){if(b){b=b.split("&");for(var F=0;F<b.length;F++){var H=b[F].indexOf("="),fe=null;if(0<=H){var xe=b[F].substring(0,H);fe=b[F].substring(H+1)}else xe=b[F];D(xe,fe?decodeURIComponent(fe.replace(/\+/g," ")):"")}}}function $s(b){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,b instanceof $s){this.h=b.h,fi(this,b.j),this.o=b.o,this.g=b.g,Sh(this,b.s),this.l=b.l;var D=b.i,F=new Tu;F.i=D.i,D.g&&(F.g=new Map(D.g),F.h=D.h),x0(this,F),this.m=b.m}else b&&(D=String(b).match(Mm))?(this.h=!1,fi(this,D[1]||"",!0),this.o=ra(D[2]||""),this.g=ra(D[3]||"",!0),Sh(this,D[4]),this.l=ra(D[5]||"",!0),x0(this,D[6]||"",!0),this.m=ra(D[7]||"")):(this.h=!1,this.i=new Tu(null,this.h))}$s.prototype.toString=function(){var b=[],D=this.j;D&&b.push(xo(D,_0,!0),":");var F=this.g;return(F||D=="file")&&(b.push("//"),(D=this.o)&&b.push(xo(D,_0,!0),"@"),b.push(encodeURIComponent(String(F)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.s,F!=null&&b.push(":",String(F))),(F=this.l)&&(this.g&&F.charAt(0)!="/"&&b.push("/"),b.push(xo(F,F.charAt(0)=="/"?Am:hS,!0))),(F=this.i.toString())&&b.push("?",F),(F=this.m)&&b.push("#",xo(F,Eu)),b.join("")};function qs(b){return new $s(b)}function fi(b,D,F){b.j=F?ra(D,!0):D,b.j&&(b.j=b.j.replace(/:$/,""))}function Sh(b,D){if(D){if(D=Number(D),isNaN(D)||0>D)throw Error("Bad port number "+D);b.s=D}else b.s=null}function x0(b,D,F){D instanceof Tu?(b.i=D,fS(b.i,b.h)):(F||(D=xo(D,Cm)),b.i=new Tu(D,b.h))}function Cn(b,D,F){b.i.set(D,F)}function ja(b){return Cn(b,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),b}function ra(b,D){return b?D?decodeURI(b.replace(/%25/g,"%2525")):decodeURIComponent(b):""}function xo(b,D,F){return typeof b=="string"?(b=encodeURI(b).replace(D,Eh),F&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function Eh(b){return b=b.charCodeAt(0),"%"+(b>>4&15).toString(16)+(b&15).toString(16)}var _0=/[#\/\?@]/g,hS=/[#\?:]/g,Am=/[#\?]/g,Cm=/[#\?@]/g,Eu=/#/g;function Tu(b,D){this.h=this.g=null,this.i=b||null,this.j=!!D}function Ks(b){b.g||(b.g=new Map,b.h=0,b.i&&v0(b.i,function(D,F){b.add(decodeURIComponent(D.replace(/\+/g," ")),F)}))}n=Tu.prototype,n.add=function(b,D){Ks(this),this.i=null,b=Va(this,b);var F=this.g.get(b);return F||this.g.set(b,F=[]),F.push(D),this.h+=1,this};function an(b,D){Ks(b),D=Va(b,D),b.g.has(D)&&(b.i=null,b.h-=b.g.get(D).length,b.g.delete(D))}function Pm(b,D){return Ks(b),D=Va(b,D),b.g.has(D)}n.forEach=function(b,D){Ks(this),this.g.forEach(function(F,H){F.forEach(function(fe){b.call(D,fe,H,this)},this)},this)},n.na=function(){Ks(this);const b=Array.from(this.g.values()),D=Array.from(this.g.keys()),F=[];for(let H=0;H<D.length;H++){const fe=b[H];for(let xe=0;xe<fe.length;xe++)F.push(D[H])}return F},n.V=function(b){Ks(this);let D=[];if(typeof b=="string")Pm(this,b)&&(D=D.concat(this.g.get(Va(this,b))));else{b=Array.from(this.g.values());for(let F=0;F<b.length;F++)D=D.concat(b[F])}return D},n.set=function(b,D){return Ks(this),this.i=null,b=Va(this,b),Pm(this,b)&&(this.h-=this.g.get(b).length),this.g.set(b,[D]),this.h+=1,this},n.get=function(b,D){return b?(b=this.V(b),0<b.length?String(b[0]):D):D};function Th(b,D,F){an(b,D),0<F.length&&(b.i=null,b.g.set(Va(b,D),y(F)),b.h+=F.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const b=[],D=Array.from(this.g.keys());for(var F=0;F<D.length;F++){var H=D[F];const xe=encodeURIComponent(String(H)),ze=this.V(H);for(H=0;H<ze.length;H++){var fe=xe;ze[H]!==""&&(fe+="="+encodeURIComponent(String(ze[H]))),b.push(fe)}}return this.i=b.join("&")};function Va(b,D){return D=String(D),b.j&&(D=D.toLowerCase()),D}function fS(b,D){D&&!b.j&&(Ks(b),b.i=null,b.g.forEach(function(F,H){var fe=H.toLowerCase();H!=fe&&(an(this,H),Th(this,fe,F))},b)),b.j=D}function pS(b,D){const F=new na;if(a.Image){const H=new Image;H.onload=g(Ys,F,"TestLoadImage: loaded",!0,D,H),H.onerror=g(Ys,F,"TestLoadImage: error",!1,D,H),H.onabort=g(Ys,F,"TestLoadImage: abort",!1,D,H),H.ontimeout=g(Ys,F,"TestLoadImage: timeout",!1,D,H),a.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=b}else D(!1)}function Er(b,D){const F=new na,H=new AbortController,fe=setTimeout(()=>{H.abort(),Ys(F,"TestPingServer: timeout",!1,D)},1e4);fetch(b,{signal:H.signal}).then(xe=>{clearTimeout(fe),xe.ok?Ys(F,"TestPingServer: ok",!0,D):Ys(F,"TestPingServer: server error",!1,D)}).catch(()=>{clearTimeout(fe),Ys(F,"TestPingServer: error",!1,D)})}function Ys(b,D,F,H,fe){try{fe&&(fe.onload=null,fe.onerror=null,fe.onabort=null,fe.ontimeout=null),H(F)}catch{}}function mS(){this.g=new De}function Im(b,D,F){const H=F||"";try{Su(b,function(fe,xe){let ze=fe;c(fe)&&(ze=at(fe)),D.push(H+xe+"="+encodeURIComponent(ze))})}catch(fe){throw D.push(H+"type="+encodeURIComponent("_badmap")),fe}}function Mh(b){this.l=b.Ub||null,this.j=b.eb||!1}v(Mh,Ke),Mh.prototype.g=function(){return new Ua(this.l,this.j)},Mh.prototype.i=function(b){return function(){return b}}({});function Ua(b,D){Oe.call(this),this.D=b,this.o=D,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Ua,Oe),n=Ua.prototype,n.open=function(b,D){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=b,this.A=D,this.readyState=1,Au(this)},n.send=function(b){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const D={headers:this.u,method:this.B,credentials:this.m,cache:void 0};b&&(D.body=b),(this.D||a).fetch(new Request(this.A,D)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mu(this)),this.readyState=0},n.Sa=function(b){if(this.g&&(this.l=b,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=b.headers,this.readyState=2,Au(this)),this.g&&(this.readyState=3,Au(this),this.g)))if(this.responseType==="arraybuffer")b.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in b){if(this.j=b.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ys(this)}else b.text().then(this.Ra.bind(this),this.ga.bind(this))};function ys(b){b.j.read().then(b.Pa.bind(b)).catch(b.ga.bind(b))}n.Pa=function(b){if(this.g){if(this.o&&b.value)this.response.push(b.value);else if(!this.o){var D=b.value?b.value:new Uint8Array(0);(D=this.v.decode(D,{stream:!b.done}))&&(this.response=this.responseText+=D)}b.done?Mu(this):Au(this),this.readyState==3&&ys(this)}},n.Ra=function(b){this.g&&(this.response=this.responseText=b,Mu(this))},n.Qa=function(b){this.g&&(this.response=b,Mu(this))},n.ga=function(){this.g&&Mu(this)};function Mu(b){b.readyState=4,b.l=null,b.j=null,b.v=null,Au(b)}n.setRequestHeader=function(b,D){this.u.append(b,D)},n.getResponseHeader=function(b){return this.h&&this.h.get(b.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const b=[],D=this.h.entries();for(var F=D.next();!F.done;)F=F.value,b.push(F[0]+": "+F[1]),F=D.next();return b.join(`\r
`)};function Au(b){b.onreadystatechange&&b.onreadystatechange.call(b)}Object.defineProperty(Ua.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(b){this.m=b?"include":"same-origin"}});function vs(b){let D="";return L(b,function(F,H){D+=H,D+=":",D+=F,D+=`\r
`}),D}function xs(b,D,F){e:{for(H in F){var H=!1;break e}H=!0}H||(F=vs(F),typeof b=="string"?F!=null&&encodeURIComponent(String(F)):Cn(b,D,F))}function Pn(b){Oe.call(this),this.headers=new Map,this.o=b||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Pn,Oe);var Rm=/^https?$/i,w0=["POST","PUT"];n=Pn.prototype,n.Ha=function(b){this.J=b},n.ea=function(b,D,F,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+b);D=D?D.toUpperCase():"GET",this.D=b,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pt.g(),this.v=this.o?ee(this.o):ee(Pt),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(D,String(b),!0),this.B=!1}catch(xe){b0(this,xe);return}if(b=F||"",F=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var fe in H)F.set(fe,H[fe]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const xe of H.keys())F.set(xe,H.get(xe));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(F.keys()).find(xe=>xe.toLowerCase()=="content-type"),fe=a.FormData&&b instanceof a.FormData,!(0<=Array.prototype.indexOf.call(w0,D,void 0))||H||fe||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[xe,ze]of F)this.g.setRequestHeader(xe,ze);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{E0(this),this.u=!0,this.g.send(b),this.u=!1}catch(xe){b0(this,xe)}};function b0(b,D){b.h=!1,b.g&&(b.j=!0,b.g.abort(),b.j=!1),b.l=D,b.m=5,_s(b),za(b)}function _s(b){b.A||(b.A=!0,je(b,"complete"),je(b,"error"))}n.abort=function(b){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=b||7,je(this,"complete"),je(this,"abort"),za(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),za(this,!0)),Pn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?S0(this):this.bb())},n.bb=function(){S0(this)};function S0(b){if(b.h&&typeof o<"u"&&(!b.v[1]||hr(b)!=4||b.Z()!=2)){if(b.u&&hr(b)==4)$e(b.Ea,0,b);else if(je(b,"readystatechange"),hr(b)==4){b.h=!1;try{const ze=b.Z();e:switch(ze){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var D=!0;break e;default:D=!1}var F;if(!(F=D)){var H;if(H=ze===0){var fe=String(b.D).match(Mm)[1]||null;!fe&&a.self&&a.self.location&&(fe=a.self.location.protocol.slice(0,-1)),H=!Rm.test(fe?fe.toLowerCase():"")}F=H}if(F)je(b,"complete"),je(b,"success");else{b.m=6;try{var xe=2<hr(b)?b.g.statusText:""}catch{xe=""}b.l=xe+" ["+b.Z()+"]",_s(b)}}finally{za(b)}}}}function za(b,D){if(b.g){E0(b);const F=b.g,H=b.v[0]?()=>{}:null;b.g=null,b.v=null,D||je(b,"ready");try{F.onreadystatechange=H}catch{}}}function E0(b){b.I&&(a.clearTimeout(b.I),b.I=null)}n.isActive=function(){return!!this.g};function hr(b){return b.g?b.g.readyState:0}n.Z=function(){try{return 2<hr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(b){if(this.g){var D=this.g.responseText;return b&&D.indexOf(b)==0&&(D=D.substring(b.length)),ie(D)}};function Cu(b){try{if(!b.g)return null;if("response"in b.g)return b.g.response;switch(b.H){case"":case"text":return b.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in b.g)return b.g.mozResponseArrayBuffer}return null}catch{return null}}function Ah(b){const D={};b=(b.g&&2<=hr(b)&&b.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<b.length;H++){if(w(b[H]))continue;var F=O(b[H]);const fe=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const xe=D[fe]||[];D[fe]=xe,xe.push(F)}P(D,function(H){return H.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xs(b,D,F){return F&&F.internalChannelParams&&F.internalChannelParams[b]||D}function Ch(b){this.Aa=0,this.i=[],this.j=new na,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xs("failFast",!1,b),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xs("baseRetryDelayMs",5e3,b),this.cb=Xs("retryDelaySeedMs",1e4,b),this.Wa=Xs("forwardChannelMaxRetries",2,b),this.wa=Xs("forwardChannelRequestTimeoutMs",2e4,b),this.pa=b&&b.xmlHttpFactory||void 0,this.Xa=b&&b.Tb||void 0,this.Ca=b&&b.useFetchStreams||!1,this.L=void 0,this.J=b&&b.supportsCrossDomainXhr||!1,this.K="",this.h=new An(b&&b.concurrentRequestLimit),this.Da=new mS,this.P=b&&b.fastHandshake||!1,this.O=b&&b.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=b&&b.Rb||!1,b&&b.xa&&this.j.xa(),b&&b.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&b&&b.detectBufferingProxy||!1,this.ja=void 0,b&&b.longPollingTimeout&&0<b.longPollingTimeout&&(this.ja=b.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ch.prototype,n.la=8,n.G=1,n.connect=function(b,D,F,H){hn(0),this.W=b,this.H=D||{},F&&H!==void 0&&(this.H.OSID=F,this.H.OAID=H),this.F=this.X,this.I=kh(this,null,this.W),Bl(this)};function Pu(b){if(Ph(b),b.G==3){var D=b.U++,F=qs(b.I);if(Cn(F,"SID",b.K),Cn(F,"RID",D),Cn(F,"TYPE","terminate"),pi(b,F),D=new kt(b,b.j,D),D.L=2,D.v=ja(qs(F)),F=!1,a.navigator&&a.navigator.sendBeacon)try{F=a.navigator.sendBeacon(D.v.toString(),"")}catch{}!F&&a.Image&&(new Image().src=D.v,F=!0),F||(D.g=ku(D.j,null),D.g.ea(D.v)),D.F=Date.now(),Nt(D)}Nm(b)}function Iu(b){b.g&&(ws(b),b.g.cancel(),b.g=null)}function Ph(b){Iu(b),b.u&&(a.clearTimeout(b.u),b.u=null),Ba(b),b.h.cancel(),b.s&&(typeof b.s=="number"&&a.clearTimeout(b.s),b.s=null)}function Bl(b){if(!en(b.h)&&!b.s){b.s=!0;var D=b.Ga;oe||q(),z||(oe(),z=!0),G.add(D,b),b.B=0}}function Hl(b,D){return fn(b.h)>=b.h.j-(b.s?1:0)?!1:b.s?(b.i=D.D.concat(b.i),!0):b.G==1||b.G==2||b.B>=(b.Va?0:b.Wa)?!1:(b.s=Fa(f(b.Ga,b,D),Ru(b,b.B)),b.B++,!0)}n.Ga=function(b){if(this.s)if(this.s=null,this.G==1){if(!b){this.U=Math.floor(1e5*Math.random()),b=this.U++;const fe=new kt(this,this.j,b);let xe=this.o;if(this.S&&(xe?(xe=T(xe),k(xe,this.S)):xe=this.S),this.m!==null||this.O||(fe.H=xe,xe=null),this.P)e:{for(var D=0,F=0;F<this.i.length;F++){t:{var H=this.i[F];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(D+=H,4096<D){D=F;break e}if(D===4096||F===this.i.length-1){D=F+1;break e}}D=1e3}else D=1e3;D=_o(this,fe,D),F=qs(this.I),Cn(F,"RID",b),Cn(F,"CVER",22),this.D&&Cn(F,"X-HTTP-Session-Id",this.D),pi(this,F),xe&&(this.O?D="headers="+encodeURIComponent(String(vs(xe)))+"&"+D:this.m&&xs(F,this.m,xe)),qn(this.h,fe),this.Ua&&Cn(F,"TYPE","init"),this.P?(Cn(F,"$req",D),Cn(F,"SID","null"),fe.T=!0,Dr(fe,F,null)):Dr(fe,F,D),this.G=2}}else this.G==3&&(b?Fi(this,b):this.i.length==0||en(this.h)||Fi(this))};function Fi(b,D){var F;D?F=D.l:F=b.U++;const H=qs(b.I);Cn(H,"SID",b.K),Cn(H,"RID",F),Cn(H,"AID",b.T),pi(b,H),b.m&&b.o&&xs(H,b.m,b.o),F=new kt(b,b.j,F,b.B+1),b.m===null&&(F.H=b.o),D&&(b.i=D.D.concat(b.i)),D=_o(b,F,1e3),F.I=Math.round(.5*b.wa)+Math.round(.5*b.wa*Math.random()),qn(b.h,F),Dr(F,H,D)}function pi(b,D){b.H&&L(b.H,function(F,H){Cn(D,H,F)}),b.l&&Su({},function(F,H){Cn(D,H,F)})}function _o(b,D,F){F=Math.min(b.i.length,F);var H=b.l?f(b.l.Na,b.l,b):null;e:{var fe=b.i;let xe=-1;for(;;){const ze=["count="+F];xe==-1?0<F?(xe=fe[0].g,ze.push("ofs="+xe)):xe=0:ze.push("ofs="+xe);let ln=!0;for(let Tr=0;Tr<F;Tr++){let tn=fe[Tr].g;const Mr=fe[Tr].map;if(tn-=xe,0>tn)xe=Math.max(0,fe[Tr].g-100),ln=!1;else try{Im(Mr,ze,"req"+tn+"_")}catch{H&&H(Mr)}}if(ln){H=ze.join("&");break e}}}return b=b.i.splice(0,F),D.D=b,H}function Ih(b){if(!b.g&&!b.u){b.Y=1;var D=b.Fa;oe||q(),z||(oe(),z=!0),G.add(D,b),b.v=0}}function Rh(b){return b.g||b.u||3<=b.v?!1:(b.Y++,b.u=Fa(f(b.Fa,b),Ru(b,b.v)),b.v++,!0)}n.Fa=function(){if(this.u=null,wo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var b=2*this.R;this.j.info("BP detection timer enabled: "+b),this.A=Fa(f(this.ab,this),b)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,hn(10),Iu(this),wo(this))};function ws(b){b.A!=null&&(a.clearTimeout(b.A),b.A=null)}function wo(b){b.g=new kt(b,b.j,"rpc",b.Y),b.m===null&&(b.g.H=b.o),b.g.O=0;var D=qs(b.qa);Cn(D,"RID","rpc"),Cn(D,"SID",b.K),Cn(D,"AID",b.T),Cn(D,"CI",b.F?"0":"1"),!b.F&&b.ja&&Cn(D,"TO",b.ja),Cn(D,"TYPE","xmlhttp"),pi(b,D),b.m&&b.o&&xs(D,b.m,b.o),b.L&&(b.g.I=b.L);var F=b.g;b=b.ia,F.L=1,F.v=ja(qs(D)),F.m=null,F.P=!0,Qi(F,b)}n.Za=function(){this.C!=null&&(this.C=null,Iu(this),Rh(this),hn(19))};function Ba(b){b.C!=null&&(a.clearTimeout(b.C),b.C=null)}function km(b,D){var F=null;if(b.g==D){Ba(b),ws(b),b.g=null;var H=2}else if(Ln(b.h,D))F=D.D,Lr(b.h,D),H=1;else return;if(b.G!=0){if(D.o)if(H==1){F=D.m?D.m.length:0,D=Date.now()-D.F;var fe=b.B;H=on(),je(H,new bh(H,F)),Bl(b)}else Ih(b);else if(fe=D.s,fe==3||fe==0&&0<D.X||!(H==1&&Hl(b,D)||H==2&&Rh(b)))switch(F&&0<F.length&&(D=b.h,D.i=D.i.concat(F)),fe){case 1:ia(b,5);break;case 4:ia(b,10);break;case 3:ia(b,6);break;default:ia(b,2)}}}function Ru(b,D){let F=b.Ta+Math.floor(Math.random()*b.cb);return b.isActive()||(F*=2),F*D}function ia(b,D){if(b.j.info("Error code "+D),D==2){var F=f(b.fb,b),H=b.Xa;const fe=!H;H=new $s(H||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fi(H,"https"),ja(H),fe?pS(H.toString(),F):Er(H.toString(),F)}else hn(2);b.G=0,b.l&&b.l.sa(D),Nm(b),Ph(b)}n.fb=function(b){b?(this.j.info("Successfully pinged google.com"),hn(2)):(this.j.info("Failed to ping google.com"),hn(1))};function Nm(b){if(b.G=0,b.ka=[],b.l){const D=gs(b.h);(D.length!=0||b.i.length!=0)&&(x(b.ka,D),x(b.ka,b.i),b.h.i.length=0,y(b.i),b.i.length=0),b.l.ra()}}function kh(b,D,F){var H=F instanceof $s?qs(F):new $s(F);if(H.g!="")D&&(H.g=D+"."+H.g),Sh(H,H.s);else{var fe=a.location;H=fe.protocol,D=D?D+"."+fe.hostname:fe.hostname,fe=+fe.port;var xe=new $s(null);H&&fi(xe,H),D&&(xe.g=D),fe&&Sh(xe,fe),F&&(xe.l=F),H=xe}return F=b.D,D=b.ya,F&&D&&Cn(H,F,D),Cn(H,"VER",b.la),pi(b,H),H}function ku(b,D,F){if(D&&!b.J)throw Error("Can't create secondary domain capable XhrIo object.");return D=b.Ca&&!b.pa?new Pn(new Mh({eb:F})):new Pn(b.pa),D.Ha(b.J),D}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dm(){}n=Dm.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Nu(){}Nu.prototype.g=function(b,D){return new mi(b,D)};function mi(b,D){Oe.call(this),this.g=new Ch(D),this.l=b,this.h=D&&D.messageUrlParams||null,b=D&&D.messageHeaders||null,D&&D.clientProtocolHeaderRequired&&(b?b["X-Client-Protocol"]="webchannel":b={"X-Client-Protocol":"webchannel"}),this.g.o=b,b=D&&D.initMessageHeaders||null,D&&D.messageContentType&&(b?b["X-WebChannel-Content-Type"]=D.messageContentType:b={"X-WebChannel-Content-Type":D.messageContentType}),D&&D.va&&(b?b["X-WebChannel-Client-Profile"]=D.va:b={"X-WebChannel-Client-Profile":D.va}),this.g.S=b,(b=D&&D.Sb)&&!w(b)&&(this.g.m=b),this.v=D&&D.supportsCrossDomainXhr||!1,this.u=D&&D.sendRawJson||!1,(D=D&&D.httpSessionIdParam)&&!w(D)&&(this.g.D=D,b=this.h,b!==null&&D in b&&(b=this.h,D in b&&delete b[D])),this.j=new bs(this)}v(mi,Oe),mi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mi.prototype.close=function(){Pu(this.g)},mi.prototype.o=function(b){var D=this.g;if(typeof b=="string"){var F={};F.__data__=b,b=F}else this.u&&(F={},F.__data__=at(b),b=F);D.i.push(new Gs(D.Ya++,b)),D.G==3&&Bl(D)},mi.prototype.N=function(){this.g.l=null,delete this.j,Pu(this.g),delete this.g,mi.aa.N.call(this)};function Nh(b){We.call(this),b.__headers__&&(this.headers=b.__headers__,this.statusCode=b.__status__,delete b.__headers__,delete b.__status__);var D=b.__sm__;if(D){e:{for(const F in D){b=F;break e}b=void 0}(this.i=b)&&(b=this.i,D=D!==null&&b in D?D[b]:void 0),this.data=D}else this.data=b}v(Nh,We);function Ha(){Qe.call(this),this.status=1}v(Ha,Qe);function bs(b){this.g=b}v(bs,Dm),bs.prototype.ua=function(){je(this.g,"a")},bs.prototype.ta=function(b){je(this.g,new Nh(b))},bs.prototype.sa=function(b){je(this.g,new Ha)},bs.prototype.ra=function(){je(this.g,"b")},Nu.prototype.createWebChannel=Nu.prototype.g,mi.prototype.send=mi.prototype.o,mi.prototype.open=mi.prototype.m,mi.prototype.close=mi.prototype.close,G6=function(){return new Nu},W6=function(){return on()},H6=jt,NA={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ft.NO_ERROR=0,ft.TIMEOUT=8,ft.HTTP_ERROR=6,X_=ft,Tt.COMPLETE="complete",B6=Tt,ve.EventType=ke,ke.OPEN="a",ke.CLOSE="b",ke.ERROR="c",ke.MESSAGE="d",Oe.prototype.listen=Oe.prototype.K,Pg=ve,Pn.prototype.listenOnce=Pn.prototype.L,Pn.prototype.getLastError=Pn.prototype.Ka,Pn.prototype.getLastErrorCode=Pn.prototype.Ba,Pn.prototype.getStatus=Pn.prototype.Z,Pn.prototype.getResponseJson=Pn.prototype.Oa,Pn.prototype.getResponseText=Pn.prototype.oa,Pn.prototype.send=Pn.prototype.ea,Pn.prototype.setWithCredentials=Pn.prototype.Ha,z6=Pn}).apply(typeof kx<"u"?kx:typeof self<"u"?self:typeof window<"u"?window:{});const T3="@firebase/firestore",M3="4.7.15";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ci.UNAUTHENTICATED=new Ci(null),Ci.GOOGLE_CREDENTIALS=new Ci("google-credentials-uid"),Ci.FIRST_PARTY=new Ci("first-party-uid"),Ci.MOCK_USER=new Ci("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let um="11.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=new gb("@firebase/firestore");function gf(){return Gd.logLevel}function tt(n,...e){if(Gd.logLevel<=rn.DEBUG){const t=e.map(Z2);Gd.debug(`Firestore (${um}): ${n}`,...t)}}function Pl(n,...e){if(Gd.logLevel<=rn.ERROR){const t=e.map(Z2);Gd.error(`Firestore (${um}): ${n}`,...t)}}function Up(n,...e){if(Gd.logLevel<=rn.WARN){const t=e.map(Z2);Gd.warn(`Firestore (${um}): ${n}`,...t)}}function Z2(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,$6(n,r,t)}function $6(n,e,t){let r=`FIRESTORE (${um}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Pl(r),new Error(r)}function bn(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||$6(e,i,r)}function Rt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ot extends Zo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ule{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ci.UNAUTHENTICATED))}shutdown(){}}class zle{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ble{constructor(e){this.t=e,this.currentUser=Ci.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bn(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new gl;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new gl,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new gl)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bn(typeof r.accessToken=="string",31837,{l:r}),new q6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bn(e===null||typeof e=="string",2055,{h:e}),new Ci(e)}}class Hle{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ci.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Wle{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Hle(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ci.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class A3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gle{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Oo(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){bn(this.o===void 0,3512);const r=s=>{s.error!=null&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,tt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new A3(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new A3(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $le(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=$le(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function Kt(n,e){return n<e?-1:n>e?1:0}function DA(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Kt(r,i);{const s=K6(),o=qle(s.encode(C3(n,t)),s.encode(C3(e,t)));return o!==0?o:Kt(r,i)}}t+=r>65535?2:1}return Kt(n.length,e.length)}function C3(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function qle(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Kt(n[t],e[t]);return Kt(n.length,e.length)}function zp(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3=-62135596800,I3=1e6;class Ur{static now(){return Ur.fromMillis(Date.now())}static fromDate(e){return Ur.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*I3);return new Ur(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ot(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ot(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<P3)throw new ot(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ot(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/I3}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-P3;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new Ur(0,0))}static max(){return new Ct(new Ur(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3="__name__";class ha{constructor(e,t,r){t===void 0?t=0:t>e.length&&Et(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Et(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ha.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ha?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=ha.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Kt(e.length,t.length)}static compareSegments(e,t){const r=ha.isNumericId(e),i=ha.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?ha.extractNumericId(e).compare(ha.extractNumericId(t)):DA(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hc.fromString(e.substring(4,e.length-2))}}class zn extends ha{construct(e,t,r){return new zn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ot(Le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new zn(t)}static emptyPath(){return new zn([])}}const Kle=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ri extends ha{construct(e,t,r){return new ri(e,t,r)}static isValidIdentifier(e){return Kle.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ri.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===R3}static keyField(){return new ri([R3])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ot(Le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ot(Le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ot(Le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ot(Le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ri(t)}static emptyPath(){return new ri([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.path=e}static fromPath(e){return new yt(zn.fromString(e))}static fromName(e){return new yt(zn.fromString(e).popFirst(5))}static empty(){return new yt(zn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&zn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return zn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yt(new zn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy=-1;function Yle(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ct.fromTimestamp(r===1e9?new Ur(t+1,0):new Ur(t,r));return new Zc(i,yt.empty(),e)}function Xle(n){return new Zc(n.readTime,n.key,Hy)}class Zc{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Zc(Ct.min(),yt.empty(),Hy)}static max(){return new Zc(Ct.max(),yt.empty(),Hy)}}function Qle(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=yt.comparator(n.documentKey,e.documentKey),t!==0?t:Kt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jle="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zle{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dm(n){if(n.code!==Le.FAILED_PRECONDITION||n.message!==Jle)throw n;tt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ne((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ne?t:Ne.resolve(t)}catch(t){return Ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.reject(t)}static resolve(e){return new Ne((t,r)=>{t(e)})}static reject(e){return new Ne((t,r)=>{r(e)})}static waitFor(e){return new Ne((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=Ne.resolve(!1);for(const r of e)t=t.next(i=>i?Ne.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Ne((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new Ne((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function ece(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hm(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}wb.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=-1;function bb(n){return n==null}function n1(n){return n===0&&1/n==-1/0}function tce(n){return typeof n=="number"&&Number.isInteger(n)&&!n1(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6="";function nce(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=k3(e)),e=rce(n.get(t),e);return k3(e)}function rce(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case X6:t+="";break;default:t+=s}}return t}function k3(n){return n+X6+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function uh(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Q6(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,t){this.comparator=e,this.root=t||ti.EMPTY}insert(e,t){return new rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ti.BLACK,null,null))}remove(e){return new rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ti.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nx(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nx(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nx(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nx(this.root,e,this.comparator,!0)}}class Nx{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ti{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ti.RED,this.left=i??ti.EMPTY,this.right=s??ti.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ti(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ti.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ti.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ti.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ti.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Et(27949);return e+(this.isRed()?0:1)}}ti.EMPTY=null,ti.RED=!0,ti.BLACK=!1;ti.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new ti(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.comparator=e,this.data=new rr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new D3(this.data.getIterator())}getIteratorFrom(e){return new D3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof zr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zr(this.comparator);return t.data=e,t}}class D3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.fields=e,e.sort(ri.comparator)}static empty(){return new jo([])}unionWith(e){let t=new zr(ri.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new jo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zp(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new J6("Invalid base64 string: "+s):s}}(e);return new ui(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ui(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ui.EMPTY_BYTE_STRING=new ui("");const ice=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eu(n){if(bn(!!n,39018),typeof n=="string"){let e=0;const t=ice.exec(n);if(bn(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vr(n.seconds),nanos:vr(n.nanos)}}function vr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function tu(n){return typeof n=="string"?ui.fromBase64String(n):ui.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6="server_timestamp",e8="__type__",t8="__previous_value__",n8="__local_write_time__";function tI(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[e8])===null||t===void 0?void 0:t.stringValue)===Z6}function Sb(n){const e=n.mapValue.fields[t8];return tI(e)?Sb(e):e}function Wy(n){const e=eu(n.mapValue.fields[n8].timestampValue);return new Ur(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sce{constructor(e,t,r,i,s,o,a,l,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const r1="(default)";class Gy{constructor(e,t){this.projectId=e,this.database=t||r1}static empty(){return new Gy("","")}get isDefaultDatabase(){return this.database===r1}isEqual(e){return e instanceof Gy&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8="__type__",oce="__max__",Dx={mapValue:{}},i8="__vector__",i1="value";function nu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tI(n)?4:lce(n)?9007199254740991:ace(n)?10:11:Et(28295,{value:n})}function Na(n,e){if(n===e)return!0;const t=nu(n);if(t!==nu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wy(n).isEqual(Wy(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=eu(i.timestampValue),a=eu(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return tu(i.bytesValue).isEqual(tu(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return vr(i.geoPointValue.latitude)===vr(s.geoPointValue.latitude)&&vr(i.geoPointValue.longitude)===vr(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return vr(i.integerValue)===vr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=vr(i.doubleValue),a=vr(s.doubleValue);return o===a?n1(o)===n1(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return zp(n.arrayValue.values||[],e.arrayValue.values||[],Na);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(N3(o)!==N3(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Na(o[l],a[l])))return!1;return!0}(n,e);default:return Et(52216,{left:n})}}function $y(n,e){return(n.values||[]).find(t=>Na(t,e))!==void 0}function Bp(n,e){if(n===e)return 0;const t=nu(n),r=nu(e);if(t!==r)return Kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=vr(s.integerValue||s.doubleValue),l=vr(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return L3(n.timestampValue,e.timestampValue);case 4:return L3(Wy(n),Wy(e));case 5:return DA(n.stringValue,e.stringValue);case 6:return function(s,o){const a=tu(s),l=tu(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Kt(a[c],l[c]);if(u!==0)return u}return Kt(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Kt(vr(s.latitude),vr(o.latitude));return a!==0?a:Kt(vr(s.longitude),vr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return O3(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const d=s.fields||{},f=o.fields||{},g=(a=d[i1])===null||a===void 0?void 0:a.arrayValue,v=(l=f[i1])===null||l===void 0?void 0:l.arrayValue,y=Kt(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0);return y!==0?y:O3(g,v)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Dx.mapValue&&o===Dx.mapValue)return 0;if(s===Dx.mapValue)return 1;if(o===Dx.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=DA(l[d],u[d]);if(f!==0)return f;const g=Bp(a[l[d]],c[u[d]]);if(g!==0)return g}return Kt(l.length,u.length)}(n.mapValue,e.mapValue);default:throw Et(23264,{Pe:t})}}function L3(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Kt(n,e);const t=eu(n),r=eu(e),i=Kt(t.seconds,r.seconds);return i!==0?i:Kt(t.nanos,r.nanos)}function O3(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Bp(t[i],r[i]);if(s)return s}return Kt(t.length,r.length)}function Hp(n){return LA(n)}function LA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=eu(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return tu(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return yt.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=LA(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${LA(t.fields[o])}`;return i+"}"}(n.mapValue):Et(61005,{value:n})}function Q_(n){switch(nu(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sb(n);return e?16+Q_(e):16;case 5:return 2*n.stringValue.length;case 6:return tu(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Q_(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return uh(r.fields,(s,o)=>{i+=s.length+Q_(o)}),i}(n.mapValue);default:throw Et(13486,{value:n})}}function F3(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function OA(n){return!!n&&"integerValue"in n}function nI(n){return!!n&&"arrayValue"in n}function j3(n){return!!n&&"nullValue"in n}function V3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function J_(n){return!!n&&"mapValue"in n}function ace(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[r8])===null||t===void 0?void 0:t.stringValue)===i8}function Zg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return uh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function lce(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===oce}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.value=e}static empty(){return new uo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!J_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zg(t)}setAll(e){let t=ri.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Zg(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());J_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Na(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];J_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){uh(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new uo(Zg(this.value))}}function s8(n){const e=[];return uh(n.fields,(t,r)=>{const i=new ri([t]);if(J_(r)){const s=s8(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new jo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ii(e,0,Ct.min(),Ct.min(),Ct.min(),uo.empty(),0)}static newFoundDocument(e,t,r,i){return new Ii(e,1,t,Ct.min(),r,i,0)}static newNoDocument(e,t){return new Ii(e,2,t,Ct.min(),Ct.min(),uo.empty(),0)}static newUnknownDocument(e,t){return new Ii(e,3,t,Ct.min(),Ct.min(),uo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ct.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=uo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=uo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ii&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ii(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,t){this.position=e,this.inclusive=t}}function U3(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=yt.comparator(yt.fromName(o.referenceValue),t.key):r=Bp(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function z3(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Na(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,t="asc"){this.field=e,this.dir=t}}function cce(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{}class Nr extends o8{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new dce(e,t,r):t==="array-contains"?new pce(e,r):t==="in"?new mce(e,r):t==="not-in"?new gce(e,r):t==="array-contains-any"?new yce(e,r):new Nr(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new hce(e,r):new fce(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Bp(t,this.value)):t!==null&&nu(this.value)===nu(t)&&this.matchesComparison(Bp(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xo extends o8{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Xo(e,t)}matches(e){return a8(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function a8(n){return n.op==="and"}function l8(n){return uce(n)&&a8(n)}function uce(n){for(const e of n.filters)if(e instanceof Xo)return!1;return!0}function FA(n){if(n instanceof Nr)return n.field.canonicalString()+n.op.toString()+Hp(n.value);if(l8(n))return n.filters.map(e=>FA(e)).join(",");{const e=n.filters.map(t=>FA(t)).join(",");return`${n.op}(${e})`}}function c8(n,e){return n instanceof Nr?function(r,i){return i instanceof Nr&&r.op===i.op&&r.field.isEqual(i.field)&&Na(r.value,i.value)}(n,e):n instanceof Xo?function(r,i){return i instanceof Xo&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&c8(o,i.filters[a]),!0):!1}(n,e):void Et(19439)}function u8(n){return n instanceof Nr?function(t){return`${t.field.canonicalString()} ${t.op} ${Hp(t.value)}`}(n):n instanceof Xo?function(t){return t.op.toString()+" {"+t.getFilters().map(u8).join(" ,")+"}"}(n):"Filter"}class dce extends Nr{constructor(e,t,r){super(e,t,r),this.key=yt.fromName(r.referenceValue)}matches(e){const t=yt.comparator(e.key,this.key);return this.matchesComparison(t)}}class hce extends Nr{constructor(e,t){super(e,"in",t),this.keys=d8("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class fce extends Nr{constructor(e,t){super(e,"not-in",t),this.keys=d8("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function d8(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>yt.fromName(r.referenceValue))}class pce extends Nr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return nI(t)&&$y(t.arrayValue,this.value)}}class mce extends Nr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&$y(this.value.arrayValue,t)}}class gce extends Nr{constructor(e,t){super(e,"not-in",t)}matches(e){if($y(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!$y(this.value.arrayValue,t)}}class yce extends Nr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!nI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$y(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vce{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Ie=null}}function B3(n,e=null,t=[],r=[],i=null,s=null,o=null){return new vce(n,e,t,r,i,s,o)}function rI(n){const e=Rt(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>FA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),bb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Hp(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Hp(r)).join(",")),e.Ie=t}return e.Ie}function iI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!cce(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!c8(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!z3(n.startAt,e.startAt)&&z3(n.endAt,e.endAt)}function jA(n){return yt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function xce(n,e,t,r,i,s,o,a){return new Bv(n,e,t,r,i,s,o,a)}function sI(n){return new Bv(n)}function H3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function h8(n){return n.collectionGroup!==null}function ey(n){const e=Rt(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new zr(ri.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new o1(s,r))}),t.has(ri.keyField().canonicalString())||e.Ee.push(new o1(ri.keyField(),r))}return e.Ee}function Ma(n){const e=Rt(n);return e.de||(e.de=_ce(e,ey(n))),e.de}function _ce(n,e){if(n.limitType==="F")return B3(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new o1(i.field,s)});const t=n.endAt?new s1(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new s1(n.startAt.position,n.startAt.inclusive):null;return B3(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function VA(n,e){const t=n.filters.concat([e]);return new Bv(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function a1(n,e,t){return new Bv(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Eb(n,e){return iI(Ma(n),Ma(e))&&n.limitType===e.limitType}function f8(n){return`${rI(Ma(n))}|lt:${n.limitType}`}function yf(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>u8(i)).join(", ")}]`),bb(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Hp(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Hp(i)).join(",")),`Target(${r})`}(Ma(n))}; limitType=${n.limitType})`}function Tb(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):yt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of ey(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=U3(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ey(r),i)||r.endAt&&!function(o,a,l){const c=U3(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ey(r),i))}(n,e)}function wce(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function p8(n){return(e,t)=>{let r=!1;for(const i of ey(n)){const s=bce(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function bce(n,e,t){const r=n.field.isKeyField()?yt.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Bp(l,c):Et(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Et(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){uh(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Q6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sce=new rr(yt.comparator);function Il(){return Sce}const m8=new rr(yt.comparator);function Ig(...n){let e=m8;for(const t of n)e=e.insert(t.key,t);return e}function g8(n){let e=m8;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ud(){return ty()}function y8(){return ty()}function ty(){return new dh(n=>n.toString(),(n,e)=>n.isEqual(e))}const Ece=new rr(yt.comparator),Tce=new zr(yt.comparator);function sn(...n){let e=Tce;for(const t of n)e=e.add(t);return e}const Mce=new zr(Kt);function Ace(){return Mce}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:n1(e)?"-0":e}}function v8(n){return{integerValue:""+n}}function Cce(n,e){return tce(e)?v8(e):oI(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(){this._=void 0}}function Pce(n,e,t){return n instanceof l1?function(i,s){const o={fields:{[e8]:{stringValue:Z6},[n8]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&tI(s)&&(s=Sb(s)),s&&(o.fields[t8]=s),{mapValue:o}}(t,e):n instanceof qy?_8(n,e):n instanceof Ky?w8(n,e):function(i,s){const o=x8(i,s),a=W3(o)+W3(i.Re);return OA(o)&&OA(i.Re)?v8(a):oI(i.serializer,a)}(n,e)}function Ice(n,e,t){return n instanceof qy?_8(n,e):n instanceof Ky?w8(n,e):t}function x8(n,e){return n instanceof c1?function(r){return OA(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class l1 extends Mb{}class qy extends Mb{constructor(e){super(),this.elements=e}}function _8(n,e){const t=b8(e);for(const r of n.elements)t.some(i=>Na(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ky extends Mb{constructor(e){super(),this.elements=e}}function w8(n,e){let t=b8(e);for(const r of n.elements)t=t.filter(i=>!Na(i,r));return{arrayValue:{values:t}}}class c1 extends Mb{constructor(e,t){super(),this.serializer=e,this.Re=t}}function W3(n){return vr(n.integerValue||n.doubleValue)}function b8(n){return nI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Rce(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof qy&&i instanceof qy||r instanceof Ky&&i instanceof Ky?zp(r.elements,i.elements,Na):r instanceof c1&&i instanceof c1?Na(r.Re,i.Re):r instanceof l1&&i instanceof l1}(n.transform,e.transform)}class kce{constructor(e,t){this.version=e,this.transformResults=t}}class Bo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bo}static exists(e){return new Bo(void 0,e)}static updateTime(e){return new Bo(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Z_(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ab{}function S8(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new aI(n.key,Bo.none()):new Hv(n.key,n.data,Bo.none());{const t=n.data,r=uo.empty();let i=new zr(ri.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new hh(n.key,r,new jo(i.toArray()),Bo.none())}}function Nce(n,e,t){n instanceof Hv?function(i,s,o){const a=i.value.clone(),l=$3(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof hh?function(i,s,o){if(!Z_(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=$3(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(E8(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function ny(n,e,t,r){return n instanceof Hv?function(s,o,a,l){if(!Z_(s.precondition,o))return a;const c=s.value.clone(),u=q3(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof hh?function(s,o,a,l){if(!Z_(s.precondition,o))return a;const c=q3(s.fieldTransforms,l,o),u=o.data;return u.setAll(E8(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(s,o,a){return Z_(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Dce(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=x8(r.transform,i||null);s!=null&&(t===null&&(t=uo.empty()),t.set(r.field,s))}return t||null}function G3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&zp(r,i,(s,o)=>Rce(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Hv extends Ab{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class hh extends Ab{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function E8(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function $3(n,e,t){const r=new Map;bn(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Ice(o,a,t[i]))}return r}function q3(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Pce(s,o,e))}return r}class aI extends Ab{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lce extends Ab{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oce{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Nce(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ny(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ny(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=y8();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=S8(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Ct.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),sn())}isEqual(e){return this.batchId===e.batchId&&zp(this.mutations,e.mutations,(t,r)=>G3(t,r))&&zp(this.baseMutations,e.baseMutations,(t,r)=>G3(t,r))}}class lI{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){bn(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return Ece}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new lI(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fce{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jce{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rr,dn;function Vce(n){switch(n){case Le.OK:return Et(64938);case Le.CANCELLED:case Le.UNKNOWN:case Le.DEADLINE_EXCEEDED:case Le.RESOURCE_EXHAUSTED:case Le.INTERNAL:case Le.UNAVAILABLE:case Le.UNAUTHENTICATED:return!1;case Le.INVALID_ARGUMENT:case Le.NOT_FOUND:case Le.ALREADY_EXISTS:case Le.PERMISSION_DENIED:case Le.FAILED_PRECONDITION:case Le.ABORTED:case Le.OUT_OF_RANGE:case Le.UNIMPLEMENTED:case Le.DATA_LOSS:return!0;default:return Et(15467,{code:n})}}function T8(n){if(n===void 0)return Pl("GRPC error has no .code"),Le.UNKNOWN;switch(n){case Rr.OK:return Le.OK;case Rr.CANCELLED:return Le.CANCELLED;case Rr.UNKNOWN:return Le.UNKNOWN;case Rr.DEADLINE_EXCEEDED:return Le.DEADLINE_EXCEEDED;case Rr.RESOURCE_EXHAUSTED:return Le.RESOURCE_EXHAUSTED;case Rr.INTERNAL:return Le.INTERNAL;case Rr.UNAVAILABLE:return Le.UNAVAILABLE;case Rr.UNAUTHENTICATED:return Le.UNAUTHENTICATED;case Rr.INVALID_ARGUMENT:return Le.INVALID_ARGUMENT;case Rr.NOT_FOUND:return Le.NOT_FOUND;case Rr.ALREADY_EXISTS:return Le.ALREADY_EXISTS;case Rr.PERMISSION_DENIED:return Le.PERMISSION_DENIED;case Rr.FAILED_PRECONDITION:return Le.FAILED_PRECONDITION;case Rr.ABORTED:return Le.ABORTED;case Rr.OUT_OF_RANGE:return Le.OUT_OF_RANGE;case Rr.UNIMPLEMENTED:return Le.UNIMPLEMENTED;case Rr.DATA_LOSS:return Le.DATA_LOSS;default:return Et(39323,{code:n})}}(dn=Rr||(Rr={}))[dn.OK=0]="OK",dn[dn.CANCELLED=1]="CANCELLED",dn[dn.UNKNOWN=2]="UNKNOWN",dn[dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dn[dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dn[dn.NOT_FOUND=5]="NOT_FOUND",dn[dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",dn[dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",dn[dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",dn[dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dn[dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dn[dn.ABORTED=10]="ABORTED",dn[dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",dn[dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",dn[dn.INTERNAL=13]="INTERNAL",dn[dn.UNAVAILABLE=14]="UNAVAILABLE",dn[dn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uce=new Hc([4294967295,4294967295],0);function K3(n){const e=K6().encode(n),t=new U6;return t.update(e),new Uint8Array(t.digest())}function Y3(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Hc([t,r],0),new Hc([i,s],0)]}class cI{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Rg(`Invalid padding: ${t}`);if(r<0)throw new Rg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rg(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Rg(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Hc.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(Hc.fromNumber(r)));return i.compare(Uce)===1&&(i=new Hc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=K3(e),[r,i]=Y3(t);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);if(!this.Se(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new cI(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const t=K3(e),[r,i]=Y3(t);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);this.be(o)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Rg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Wv.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Cb(Ct.min(),i,new rr(Kt),Il(),sn())}}class Wv{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Wv(r,t,sn(),sn(),sn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class M8{constructor(e,t){this.targetId=e,this.Ce=t}}class A8{constructor(e,t,r=ui.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class X3{constructor(){this.Fe=0,this.Me=Q3(),this.xe=ui.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=sn(),t=sn(),r=sn();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Et(38017,{changeType:s})}}),new Wv(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=Q3()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,bn(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class zce{constructor(e){this.ze=e,this.je=new Map,this.He=Il(),this.Je=Lx(),this.Ye=Lx(),this.Ze=new rr(Kt)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Et(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const s=i.target;if(jA(s))if(r===0){const o=new yt(s.path);this.tt(t,o,Ii.newNoDocument(o,Ct.min()))}else bn(r===1,20013,{expectedCount:r});else{const o=this.ut(t);if(o!==r){const a=this.ct(e),l=a?this.lt(a,e,o):1;if(l!==0){this.st(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,c)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=tu(r).toUint8Array()}catch(l){if(l instanceof J6)return Up("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new cI(o,i,s)}catch(l){return Up(l instanceof Rg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,s,null),i++)}),i}It(e){const t=new Map;this.je.forEach((s,o)=>{const a=this._t(o);if(a){if(s.current&&jA(a.target)){const l=new yt(a.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,Ii.newNoDocument(l,e))}s.Le&&(t.set(o,s.qe()),s.Qe())}});let r=sn();this.Ye.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this._t(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.He.forEach((s,o)=>o.setReadTime(e));const i=new Cb(e,t,this.Ze,this.He,r);return this.He=Il(),this.Je=Lx(),this.Ye=Lx(),this.Ze=new rr(Kt),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new X3,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new zr(Kt),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new zr(Kt),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||tt("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new X3),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Lx(){return new rr(yt.comparator)}function Q3(){return new rr(yt.comparator)}const Bce={asc:"ASCENDING",desc:"DESCENDING"},Hce={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wce={and:"AND",or:"OR"};class Gce{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function UA(n,e){return n.useProto3Json||bb(e)?e:{value:e}}function u1(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function C8(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function $ce(n,e){return u1(n,e.toTimestamp())}function Aa(n){return bn(!!n,49232),Ct.fromTimestamp(function(t){const r=eu(t);return new Ur(r.seconds,r.nanos)}(n))}function uI(n,e){return zA(n,e).canonicalString()}function zA(n,e){const t=function(i){return new zn(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function P8(n){const e=zn.fromString(n);return bn(D8(e),10190,{key:e.toString()}),e}function BA(n,e){return uI(n.databaseId,e.path)}function eT(n,e){const t=P8(e);if(t.get(1)!==n.databaseId.projectId)throw new ot(Le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ot(Le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new yt(R8(t))}function I8(n,e){return uI(n.databaseId,e)}function qce(n){const e=P8(n);return e.length===4?zn.emptyPath():R8(e)}function HA(n){return new zn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function R8(n){return bn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function J3(n,e,t){return{name:BA(n,e),fields:t.value.mapValue.fields}}function Kce(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Et(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(bn(u===void 0||typeof u=="string",58123),ui.fromBase64String(u||"")):(bn(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),ui.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?Le.UNKNOWN:T8(c.code);return new ot(u,c.message||"")}(o);t=new A8(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=eT(n,r.document.name),s=Aa(r.document.updateTime),o=r.document.createTime?Aa(r.document.createTime):Ct.min(),a=new uo({mapValue:{fields:r.document.fields}}),l=Ii.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];t=new ew(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=eT(n,r.document),s=r.readTime?Aa(r.readTime):Ct.min(),o=Ii.newNoDocument(i,s),a=r.removedTargetIds||[];t=new ew([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=eT(n,r.document),s=r.removedTargetIds||[];t=new ew([],s,i,null)}else{if(!("filter"in e))return Et(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new jce(i,s),a=r.targetId;t=new M8(a,o)}}return t}function Yce(n,e){let t;if(e instanceof Hv)t={update:J3(n,e.key,e.value)};else if(e instanceof aI)t={delete:BA(n,e.key)};else if(e instanceof hh)t={update:J3(n,e.key,e.data),updateMask:iue(e.fieldMask)};else{if(!(e instanceof Lce))return Et(16599,{ft:e.type});t={verify:BA(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof l1)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qy)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ky)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof c1)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw Et(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:$ce(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Et(27497)}(n,e.precondition)),t}function Xce(n,e){return n&&n.length>0?(bn(e!==void 0,14353),n.map(t=>function(i,s){let o=i.updateTime?Aa(i.updateTime):Aa(s);return o.isEqual(Ct.min())&&(o=Aa(s)),new kce(o,i.transformResults||[])}(t,e))):[]}function Qce(n,e){return{documents:[I8(n,e.path)]}}function Jce(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=I8(n,i);const s=function(c){if(c.length!==0)return N8(Xo.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:vf(f.field),direction:tue(f.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=UA(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{gt:t,parent:i}}function Zce(n){let e=qce(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){bn(r===1,65062);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(d){const f=k8(d);return f instanceof Xo&&l8(f)?f.getFilters():[f]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(f=>function(v){return new o1(xf(v.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(t.orderBy));let a=null;t.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,bb(f)?null:f}(t.limit));let l=null;t.startAt&&(l=function(d){const f=!!d.before,g=d.values||[];return new s1(g,f)}(t.startAt));let c=null;return t.endAt&&(c=function(d){const f=!d.before,g=d.values||[];return new s1(g,f)}(t.endAt)),xce(e,i,o,s,a,"F",l,c)}function eue(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function k8(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=xf(t.unaryFilter.field);return Nr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xf(t.unaryFilter.field);return Nr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=xf(t.unaryFilter.field);return Nr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xf(t.unaryFilter.field);return Nr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}}(n):n.fieldFilter!==void 0?function(t){return Nr.create(xf(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Xo.create(t.compositeFilter.filters.map(r=>k8(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Et(1026)}}(t.compositeFilter.op))}(n):Et(30097,{filter:n})}function tue(n){return Bce[n]}function nue(n){return Hce[n]}function rue(n){return Wce[n]}function vf(n){return{fieldPath:n.canonicalString()}}function xf(n){return ri.fromServerFormat(n.fieldPath)}function N8(n){return n instanceof Nr?function(t){if(t.op==="=="){if(V3(t.value))return{unaryFilter:{field:vf(t.field),op:"IS_NAN"}};if(j3(t.value))return{unaryFilter:{field:vf(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(V3(t.value))return{unaryFilter:{field:vf(t.field),op:"IS_NOT_NAN"}};if(j3(t.value))return{unaryFilter:{field:vf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vf(t.field),op:nue(t.op),value:t.value}}}(n):n instanceof Xo?function(t){const r=t.getFilters().map(i=>N8(i));return r.length===1?r[0]:{compositeFilter:{op:rue(t.op),filters:r}}}(n):Et(54877,{filter:n})}function iue(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function D8(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,t,r,i,s=Ct.min(),o=Ct.min(),a=ui.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Cc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Cc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sue{constructor(e){this.wt=e}}function oue(n){const e=Zce({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?a1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aue{constructor(){this.Cn=new lue}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ne.resolve()}getCollectionParents(e,t){return Ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ne.resolve()}deleteFieldIndex(e,t){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,t){return Ne.resolve()}getDocumentsMatchingTarget(e,t){return Ne.resolve(null)}getIndexType(e,t){return Ne.resolve(0)}getFieldIndexes(e,t){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,t){return Ne.resolve(Zc.min())}getMinOffsetFromCollectionGroup(e,t){return Ne.resolve(Zc.min())}updateCollectionGroup(e,t,r){return Ne.resolve()}updateIndexEntries(e,t){return Ne.resolve()}}class lue{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new zr(zn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zr(zn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},L8=41943040;class is{static withCacheSize(e){return new is(e,is.DEFAULT_COLLECTION_PERCENTILE,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */is.DEFAULT_COLLECTION_PERCENTILE=10,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,is.DEFAULT=new is(L8,is.DEFAULT_COLLECTION_PERCENTILE,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),is.DISABLED=new is(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Wp(0)}static lr(){return new Wp(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO="LruGarbageCollector",cue=1048576;function tO([n,e],[t,r]){const i=Kt(n,t);return i===0?Kt(e,r):i}class uue{constructor(e){this.Er=e,this.buffer=new zr(tO),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();tO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class due{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){tt(eO,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hm(t)?tt(eO,"Ignoring IndexedDB error during garbage collection: ",t):await dm(t)}await this.mr(3e5)})}}class hue{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Ne.resolve(wb.le);const r=new uue(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(Z3)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Z3):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,t))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),gf()<=rn.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function fue(n,e){return new hue(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pue{constructor(){this.changes=new dh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ii.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mue{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gue{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ny(r.mutation,i,jo.empty(),Ur.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,sn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=sn()){const i=ud();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Ig();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=ud();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,sn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Il();const o=ty(),a=function(){return ty()}();return t.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof hh)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),ny(u.mutation,c,u.mutation.getFieldMask(),Ur.now())):o.set(c.key,jo.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var d;return a.set(c,new mue(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=ty();let i=new rr((o,a)=>o-a),s=sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=r.get(l)||jo.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||sn()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=y8();u.forEach(f=>{if(!s.has(f)){const g=S8(t.get(f),r.get(f));g!==null&&d.set(f,g),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return Ne.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return yt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):h8(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Ne.resolve(ud());let a=Hy,l=s;return o.next(c=>Ne.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?Ne.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,sn())).next(u=>({batchId:a,changes:g8(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new yt(t)).next(r=>{let i=Ig();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Ig();return this.indexManager.getCollectionParents(e,s).next(a=>Ne.forEach(a,l=>{const c=function(d,f){return new Bv(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Ii.newInvalidDocument(u)))});let a=Ig();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&ny(u.mutation,c,jo.empty(),Ur.now()),Tb(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yue{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return Ne.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Aa(i.createTime)}}(t)),Ne.resolve()}getNamedQuery(e,t){return Ne.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:oue(i.bundledQuery),readTime:Aa(i.readTime)}}(t)),Ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vue{constructor(){this.overlays=new rr(yt.comparator),this.Qr=new Map}getOverlay(e,t){return Ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ud();return Ne.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.bt(e,t,s)}),Ne.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Qr.delete(r)),Ne.resolve()}getOverlaysForCollection(e,t,r){const i=ud(),s=t.length+1,o=new yt(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Ne.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new rr((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=ud(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=ud(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return Ne.resolve(a)}bt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Fce(t,r));let s=this.Qr.get(t);s===void 0&&(s=sn(),this.Qr.set(t,s)),this.Qr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xue{constructor(){this.sessionToken=ui.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.$r=new zr(qr.Ur),this.Kr=new zr(qr.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new qr(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new qr(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new yt(new zn([])),r=new qr(t,e),i=new qr(t,e+1),s=[];return this.Kr.forEachInRange([r,i],o=>{this.zr(o),s.push(o.key)}),s}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new yt(new zn([])),r=new qr(t,e),i=new qr(t,e+1);let s=sn();return this.Kr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new qr(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class qr{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return yt.comparator(e.key,t.key)||Kt(e.Zr,t.Zr)}static Wr(e,t){return Kt(e.Zr,t.Zr)||yt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ue{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new zr(qr.Ur)}checkEmpty(e){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Oce(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.Xr=this.Xr.add(new qr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ne.resolve(o)}lookupMutationBatch(e,t){return Ne.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ti(r),s=i<0?0:i;return Ne.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?eI:this.nr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new qr(t,0),i=new qr(t,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([r,i],o=>{const a=this.ei(o.Zr);s.push(a)}),Ne.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zr(Kt);return t.forEach(i=>{const s=new qr(i,0),o=new qr(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([s,o],a=>{r=r.add(a.Zr)})}),Ne.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;yt.isDocumentKey(s)||(s=s.child(""));const o=new qr(new yt(s),0);let a=new zr(Kt);return this.Xr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Zr)),!0)},o),Ne.resolve(this.ni(a))}ni(e){const t=[];return e.forEach(r=>{const i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){bn(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return Ne.forEach(t.mutations,i=>{const s=new qr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new qr(t,0),i=this.Xr.firstAfterOrEqual(r);return Ne.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wue{constructor(e){this.ii=e,this.docs=function(){return new rr(yt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ne.resolve(r?r.document.mutableCopy():Ii.newInvalidDocument(t))}getEntries(e,t){let r=Il();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ii.newInvalidDocument(i))}),Ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Il();const o=t.path,a=new yt(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Qle(Xle(u),r)<=0||(i.has(u.key)||Tb(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return Ne.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Et(9500)}si(e,t){return Ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bue(this)}getSize(e){return Ne.resolve(this.size)}}class bue extends pue{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),Ne.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sue{constructor(e){this.persistence=e,this.oi=new dh(t=>rI(t),iI),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this._i=0,this.ai=new dI,this.targetCount=0,this.ui=Wp.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),Ne.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Wp(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,Ne.resolve()}updateTargetData(e,t){return this.Tr(t),Ne.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.oi.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Ne.waitFor(s).next(()=>i)}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return Ne.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),Ne.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Ne.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),Ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return Ne.resolve(r)}containsKey(e,t){return Ne.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e,t){this.ci={},this.overlays={},this.li=new wb(0),this.hi=!1,this.hi=!0,this.Pi=new xue,this.referenceDelegate=e(this),this.Ti=new Sue(this),this.indexManager=new aue,this.remoteDocumentCache=function(i){return new wue(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new sue(t),this.Ei=new yue(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vue,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new _ue(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){tt("MemoryPersistence","Starting transaction:",e);const i=new Eue(this.li.next());return this.referenceDelegate.di(),r(i).next(s=>this.referenceDelegate.Ai(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ri(e,t){return Ne.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class Eue extends Zle{constructor(e){super(),this.currentSequenceNumber=e}}class hI{constructor(e){this.persistence=e,this.Vi=new dI,this.mi=null}static fi(e){return new hI(e)}get gi(){if(this.mi)return this.mi;throw Et(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),Ne.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),Ne.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),Ne.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.gi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.gi,r=>{const i=yt.fromPath(r);return this.pi(e,i).next(s=>{s||t.removeEntry(i,Ct.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return Ne.or([()=>Ne.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class d1{constructor(e,t){this.persistence=e,this.yi=new dh(r=>nce(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=fue(this,t)}static fi(e,t){return new d1(e,t)}di(){}Ai(e){return Ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Sr(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return Ne.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(s=>s?Ne.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.si(e,o=>this.Dr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Ct.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),Ne.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),Ne.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Q_(e.data.value)),t}Dr(e,t,r){return Ne.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.yi.get(t);return Ne.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=sn(),i=sn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new fI(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tue{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mue{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return sse()?8:ece(Oi())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ws(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Ss(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Tue;return this.bs(e,t,o).next(a=>{if(s.result=a,this.fs)return this.Ds(e,t,o,a.size)})}).next(()=>s.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(gf()<=rn.DEBUG&&tt("QueryEngine","SDK will not create cache indexes for query:",yf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),Ne.resolve()):(gf()<=rn.DEBUG&&tt("QueryEngine","Query:",yf(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(gf()<=rn.DEBUG&&tt("QueryEngine","The SDK decides to create cache indexes for query:",yf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ma(t))):Ne.resolve())}ws(e,t){if(H3(t))return Ne.resolve(null);let r=Ma(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=a1(t,null,"F"),r=Ma(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=sn(...s);return this.ys.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.vs(t,a);return this.Cs(t,c,o,l.readTime)?this.ws(e,a1(t,null,"F")):this.Fs(e,c,t,l)}))})))}Ss(e,t,r,i){return H3(t)||i.isEqual(Ct.min())?Ne.resolve(null):this.ys.getDocuments(e,r).next(s=>{const o=this.vs(t,s);return this.Cs(t,o,r,i)?Ne.resolve(null):(gf()<=rn.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yf(t)),this.Fs(e,o,t,Yle(i,Hy)).next(a=>a))})}vs(e,t){let r=new zr(p8(e));return t.forEach((i,s)=>{Tb(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}bs(e,t,r){return gf()<=rn.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",yf(t)),this.ys.getDocumentsMatchingQuery(e,t,Zc.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="LocalStore",Aue=3e8;class Cue{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new rr(Kt),this.Os=new dh(s=>rI(s),iI),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gue(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function Pue(n,e,t,r){return new Cue(n,e,t,r)}async function F8(n,e){const t=Rt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=sn();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({ks:c,removedBatchIds:o,addedBatchIds:a}))})})}function Iue(n,e){const t=Rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Bs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,f=d.keys();let g=Ne.resolve();return f.forEach(v=>{g=g.next(()=>u.getEntry(l,v)).next(y=>{const x=c.docVersions.get(v);bn(x!==null,48541),y.version.compareTo(x)<0&&(d.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=sn();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function j8(n){const e=Rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function Rue(n,e){const t=Rt(n),r=e.snapshotVersion;let i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;const a=[];e.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;a.push(t.Ti.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.Ti.addMatchingKeys(s,u.addedDocuments,d)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(ui.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),i=i.insert(d,g),function(y,x,_){return y.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=Aue?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,g,u)&&a.push(t.Ti.updateTargetData(s,g))});let l=Il(),c=sn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(kue(s,o,e.documentUpdates).next(u=>{l=u.qs,c=u.Qs})),!r.isEqual(Ct.min())){const u=t.Ti.getLastRemoteSnapshotVersion(s).next(d=>t.Ti.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return Ne.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.xs=i,s))}function kue(n,e,t){let r=sn(),i=sn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Il();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ct.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):tt(pI,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{qs:o,Qs:i}})}function Nue(n,e){const t=Rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=eI),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Due(n,e){const t=Rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(s=>s?(i=s,Ne.resolve(i)):t.Ti.allocateTargetId(r).next(o=>(i=new Cc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function WA(n,e,t){const r=Rt(n),i=r.xs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!hm(o))throw o;tt(pI,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)}function nO(n,e,t){const r=Rt(n);let i=Ct.min(),s=sn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=Rt(l),f=d.Os.get(u);return f!==void 0?Ne.resolve(d.xs.get(f)):d.Ti.getTargetData(c,u)}(r,o,Ma(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,t?i:Ct.min(),t?s:sn())).next(a=>(Lue(r,wce(e),a),{documents:a,$s:s})))}function Lue(n,e,t){let r=n.Ns.get(e)||Ct.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ns.set(e,r)}class rO{constructor(){this.activeTargetIds=Ace()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Oue{constructor(){this.xo=new rO,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new rO,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fue{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO="ConnectivityMonitor";class sO{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){tt(iO,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){tt(iO,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ox=null;function GA(){return Ox===null?Ox=function(){return 268435456+Math.round(2147483648*Math.random())}():Ox++,"0x"+Ox.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="RestConnection",jue={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Vue{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===r1?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,s){const o=GA(),a=this.jo(e,t.toUriEncodedString());tt(tT,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(l,i,s);const{host:c}=new URL(a),u=Fv(c);return this.Jo(e,a,l,r,u).then(d=>(tt(tT,`Received RPC '${e}' ${o}: `,d),d),d=>{throw Up(tT,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}Yo(e,t,r,i,s,o){return this.zo(e,t,r,i,s)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+um}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}jo(e,t){const r=jue[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uue{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="WebChannelConnection";class zue extends Vue{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const o=GA();return new Promise((a,l)=>{const c=new z6;c.setWithCredentials(!0),c.listenOnce(B6.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case X_.NO_ERROR:const d=c.getResponseJson();tt(bi,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case X_.TIMEOUT:tt(bi,`RPC '${e}' ${o} timed out`),l(new ot(Le.DEADLINE_EXCEEDED,"Request time out"));break;case X_.HTTP_ERROR:const f=c.getStatus();if(tt(bi,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g==null?void 0:g.error;if(v&&v.status&&v.message){const y=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(Le).indexOf(w)>=0?w:Le.UNKNOWN}(v.status);l(new ot(y,v.message))}else l(new ot(Le.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ot(Le.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{tt(bi,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(i);tt(bi,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",u,r,15)})}T_(e,t,r){const i=GA(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=G6(),a=W6(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Ho(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=s.join("");tt(bi,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);let f=!1,g=!1;const v=new Uue({Zo:x=>{g?tt(bi,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(f||(tt(bi,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),tt(bi,`RPC '${e}' stream ${i} sending:`,x),d.send(x))},Xo:()=>d.close()}),y=(x,_,w)=>{x.listen(_,S=>{try{w(S)}catch(M){setTimeout(()=>{throw M},0)}})};return y(d,Pg.EventType.OPEN,()=>{g||(tt(bi,`RPC '${e}' stream ${i} transport opened.`),v.__())}),y(d,Pg.EventType.CLOSE,()=>{g||(g=!0,tt(bi,`RPC '${e}' stream ${i} transport closed`),v.u_())}),y(d,Pg.EventType.ERROR,x=>{g||(g=!0,Up(bi,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),v.u_(new ot(Le.UNAVAILABLE,"The operation could not be completed")))}),y(d,Pg.EventType.MESSAGE,x=>{var _;if(!g){const w=x.data[0];bn(!!w,16349);const S=w,M=(S==null?void 0:S.error)||((_=S[0])===null||_===void 0?void 0:_.error);if(M){tt(bi,`RPC '${e}' stream ${i} received error:`,M);const I=M.status;let L=function(C){const k=Rr[C];if(k!==void 0)return T8(k)}(I),P=M.message;L===void 0&&(L=Le.INTERNAL,P="Unknown error status: "+I+" with message "+M.message),g=!0,v.u_(new ot(L,P)),d.close()}else tt(bi,`RPC '${e}' stream ${i} received:`,w),v.c_(w)}}),y(a,H6.STAT_EVENT,x=>{x.stat===NA.PROXY?tt(bi,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===NA.NOPROXY&&tt(bi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.a_()},0),v}}function nT(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(n){return new Gce(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e,t,r=1e3,i=1.5,s=6e4){this.xi=e,this.timerId=t,this.I_=r,this.E_=i,this.d_=s,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),i=Math.max(0,t-r);i>0&&tt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.A_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO="PersistentStream";class U8{constructor(e,t,r,i,s,o,a,l){this.xi=e,this.y_=r,this.w_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new V8(e,t)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():t&&t.code===Le.RESOURCE_EXHAUSTED?(Pl(t.toString()),Pl("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===Le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.S_===t&&this.K_(r,i)},r=>{e(()=>{const i=new ot(Le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(i)})})}K_(e,t){const r=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.W_(i))}),this.stream.onMessage(i=>{r(()=>++this.v_==1?this.z_(i):this.onNext(i))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return tt(oO,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget(()=>this.S_===e?t():(tt(oO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Bue extends U8{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=Kce(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ct.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ct.min():o.readTime?Aa(o.readTime):Ct.min()}(e);return this.listener.j_(t,r)}H_(e){const t={};t.database=HA(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=jA(l)?{documents:Qce(s,l)}:{query:Jce(s,l).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=C8(s,o.resumeToken);const c=UA(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ct.min())>0){a.readTime=u1(s,o.snapshotVersion.toTimestamp());const c=UA(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=eue(this.serializer,e);r&&(t.labels=r),this.L_(t)}J_(e){const t={};t.database=HA(this.serializer),t.removeTarget=e,this.L_(t)}}class Hue extends U8{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return bn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bn(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){bn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=Xce(e.writeResults,e.commitTime),r=Aa(e.commitTime);return this.listener.ea(r,t)}ta(){const e={};e.database=HA(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Yce(this.serializer,r))};this.L_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wue{}class Gue extends Wue{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.na=!1}ra(){if(this.na)throw new ot(Le.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.zo(e,zA(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ot(Le.UNKNOWN,s.toString())})}Yo(e,t,r,i,s){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(e,zA(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ot(Le.UNKNOWN,o.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class $ue{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Pl(t),this.oa=!1):tt("OnlineStateTracker",t)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="RemoteStore";class que{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=s,this.Ea.No(o=>{r.enqueueAndForget(async()=>{fh(this)&&(tt($d,"Restarting streams for network reachability change."),await async function(l){const c=Rt(l);c.Ta.add(4),await Gv(c),c.da.set("Unknown"),c.Ta.delete(4),await Ib(c)}(this))})}),this.da=new $ue(r,i)}}async function Ib(n){if(fh(n))for(const e of n.Ia)await e(!0)}async function Gv(n){for(const e of n.Ia)await e(!1)}function z8(n,e){const t=Rt(n);t.Pa.has(e.targetId)||(t.Pa.set(e.targetId,e),vI(t)?yI(t):fm(t).M_()&&gI(t,e))}function mI(n,e){const t=Rt(n),r=fm(t);t.Pa.delete(e),r.M_()&&B8(t,e),t.Pa.size===0&&(r.M_()?r.N_():fh(t)&&t.da.set("Unknown"))}function gI(n,e){if(n.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ct.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fm(n).H_(e)}function B8(n,e){n.Aa.Ke(e),fm(n).J_(e)}function yI(n){n.Aa=new zce({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Pa.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),fm(n).start(),n.da._a()}function vI(n){return fh(n)&&!fm(n).F_()&&n.Pa.size>0}function fh(n){return Rt(n).Ta.size===0}function H8(n){n.Aa=void 0}async function Kue(n){n.da.set("Online")}async function Yue(n){n.Pa.forEach((e,t)=>{gI(n,e)})}async function Xue(n,e){H8(n),vI(n)?(n.da.ca(e),yI(n)):n.da.set("Unknown")}async function Que(n,e,t){if(n.da.set("Online"),e instanceof A8&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Pa.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Pa.delete(a),i.Aa.removeTarget(a))}(n,e)}catch(r){tt($d,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await h1(n,r)}else if(e instanceof ew?n.Aa.Xe(e):e instanceof M8?n.Aa.ot(e):n.Aa.nt(e),!t.isEqual(Ct.min()))try{const r=await j8(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.Aa.It(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.Pa.get(c);u&&s.Pa.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.Pa.get(l);if(!u)return;s.Pa.set(l,u.withResumeToken(ui.EMPTY_BYTE_STRING,u.snapshotVersion)),B8(s,l);const d=new Cc(u.target,l,c,u.sequenceNumber);gI(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){tt($d,"Failed to raise snapshot:",r),await h1(n,r)}}async function h1(n,e,t){if(!hm(e))throw e;n.Ta.add(1),await Gv(n),n.da.set("Offline"),t||(t=()=>j8(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{tt($d,"Retrying IndexedDB access"),await t(),n.Ta.delete(1),await Ib(n)})}function W8(n,e){return e().catch(t=>h1(n,t,e))}async function Rb(n){const e=Rt(n),t=ru(e);let r=e.ha.length>0?e.ha[e.ha.length-1].batchId:eI;for(;Jue(e);)try{const i=await Nue(e.localStore,r);if(i===null){e.ha.length===0&&t.N_();break}r=i.batchId,Zue(e,i)}catch(i){await h1(e,i)}G8(e)&&$8(e)}function Jue(n){return fh(n)&&n.ha.length<10}function Zue(n,e){n.ha.push(e);const t=ru(n);t.M_()&&t.Y_&&t.Z_(e.mutations)}function G8(n){return fh(n)&&!ru(n).F_()&&n.ha.length>0}function $8(n){ru(n).start()}async function ede(n){ru(n).ta()}async function tde(n){const e=ru(n);for(const t of n.ha)e.Z_(t.mutations)}async function nde(n,e,t){const r=n.ha.shift(),i=lI.from(r,e,t);await W8(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Rb(n)}async function rde(n,e){e&&ru(n).Y_&&await async function(r,i){if(function(o){return Vce(o)&&o!==Le.ABORTED}(i.code)){const s=r.ha.shift();ru(r).O_(),await W8(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Rb(r)}}(n,e),G8(n)&&$8(n)}async function aO(n,e){const t=Rt(n);t.asyncQueue.verifyOperationInProgress(),tt($d,"RemoteStore received new credentials");const r=fh(t);t.Ta.add(3),await Gv(t),r&&t.da.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ta.delete(3),await Ib(t)}async function ide(n,e){const t=Rt(n);e?(t.Ta.delete(2),await Ib(t)):e||(t.Ta.add(2),await Gv(t),t.da.set("Unknown"))}function fm(n){return n.Ra||(n.Ra=function(t,r,i){const s=Rt(t);return s.ra(),new Bue(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{e_:Kue.bind(null,n),n_:Yue.bind(null,n),i_:Xue.bind(null,n),j_:Que.bind(null,n)}),n.Ia.push(async e=>{e?(n.Ra.O_(),vI(n)?yI(n):n.da.set("Unknown")):(await n.Ra.stop(),H8(n))})),n.Ra}function ru(n){return n.Va||(n.Va=function(t,r,i){const s=Rt(t);return s.ra(),new Hue(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:ede.bind(null,n),i_:rde.bind(null,n),X_:tde.bind(null,n),ea:nde.bind(null,n)}),n.Ia.push(async e=>{e?(n.Va.O_(),await Rb(n)):(await n.Va.stop(),n.ha.length>0&&(tt($d,`Stopping write stream with ${n.ha.length} pending writes`),n.ha=[]))})),n.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new gl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new xI(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ot(Le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _I(n,e){if(Pl("AsyncQueue",`${e}: ${n}`),hm(n))return new ot(Le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{static emptySet(e){return new cp(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||yt.comparator(t.key,r.key):(t,r)=>yt.comparator(t.key,r.key),this.keyedMap=Ig(),this.sortedSet=new rr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cp)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new cp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(){this.ma=new rr(yt.comparator)}track(e){const t=e.doc.key,r=this.ma.get(t);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(t,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(t):e.type===1&&r.type===2?this.ma=this.ma.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):Et(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal((t,r)=>{e.push(r)}),e}}class Gp{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Gp(e,t,cp.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sde{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class ode{constructor(){this.queries=cO(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(t,r){const i=Rt(t),s=i.queries;i.queries=cO(),s.forEach((o,a)=>{for(const l of a.ya)l.onError(r)})})(this,new ot(Le.ABORTED,"Firestore shutting down"))}}function cO(){return new dh(n=>f8(n),Eb)}async function q8(n,e){const t=Rt(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.wa()&&e.Sa()&&(r=2):(s=new sde,r=e.Sa()?0:1);try{switch(r){case 0:s.pa=await t.onListen(i,!0);break;case 1:s.pa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=_I(o,`Initialization of query '${yf(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.ya.push(e),e.Da(t.onlineState),s.pa&&e.va(s.pa)&&wI(t)}async function K8(n,e){const t=Rt(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.ya.indexOf(e);o>=0&&(s.ya.splice(o,1),s.ya.length===0?i=e.Sa()?0:1:!s.wa()&&e.Sa()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function ade(n,e){const t=Rt(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.ya)a.va(i)&&(r=!0);o.pa=i}}r&&wI(t)}function lde(n,e,t){const r=Rt(n),i=r.queries.get(e);if(i)for(const s of i.ya)s.onError(t);r.queries.delete(e)}function wI(n){n.ba.forEach(e=>{e.next()})}var $A,uO;(uO=$A||($A={})).Ca="default",uO.Cache="cache";class Y8{constructor(e,t,r){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Gp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache||!this.Sa())return!0;const r=t!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ba(e){e=Gp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==$A.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(e){this.key=e}}class Q8{constructor(e){this.key=e}}class cde{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=sn(),this.mutatedKeys=sn(),this.Ha=p8(e),this.Ja=new cp(this.Ha)}get Ya(){return this.Ga}Za(e,t){const r=t?t.Xa:new lO,i=t?t.Ja:this.Ja;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const f=i.get(u),g=Tb(this.query,d)?d:null,v=!!f&&this.mutatedKeys.has(f.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let x=!1;f&&g?f.data.isEqual(g.data)?v!==y&&(r.track({type:3,doc:g}),x=!0):this.eu(f,g)||(r.track({type:2,doc:g}),x=!0,(l&&this.Ha(g,l)>0||c&&this.Ha(g,c)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),x=!0):f&&!g&&(r.track({type:1,doc:f}),x=!0,(l||c)&&(a=!0)),x&&(g?(o=o.add(g),s=y?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ja:o,Xa:r,Cs:a,mutatedKeys:s}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const o=e.Xa.ga();o.sort((u,d)=>function(g,v){const y=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{Vt:x})}};return y(g)-y(v)}(u.type,d.type)||this.Ha(u.doc,d.doc)),this.tu(r),i=i!=null&&i;const a=t&&!i?this.nu():[],l=this.ja.size===0&&this.current&&!i?1:0,c=l!==this.za;return this.za=l,o.length!==0||c?{snapshot:new Gp(this.query,e.Ja,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:a}:{ru:a}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new lO,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(t=>this.Ga=this.Ga.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ga=this.Ga.delete(t)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=sn(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const t=[];return e.forEach(r=>{this.ja.has(r)||t.push(new Q8(r))}),this.ja.forEach(r=>{e.has(r)||t.push(new X8(r))}),t}su(e){this.Ga=e.$s,this.ja=sn();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return Gp.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const bI="SyncEngine";class ude{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class dde{constructor(e){this.key=e,this._u=!1}}class hde{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.au={},this.uu=new dh(a=>f8(a),Eb),this.cu=new Map,this.lu=new Set,this.hu=new rr(yt.comparator),this.Pu=new Map,this.Tu=new dI,this.Iu={},this.Eu=new Map,this.du=Wp.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function fde(n,e,t=!0){const r=rH(n);let i;const s=r.uu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ou()):i=await J8(r,e,t,!0),i}async function pde(n,e){const t=rH(n);await J8(t,e,!0,!1)}async function J8(n,e,t,r){const i=await Due(n.localStore,Ma(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await mde(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&z8(n.remoteStore,i),a}async function mde(n,e,t,r,i){n.Ru=(d,f,g)=>async function(y,x,_,w){let S=x.view.Za(_);S.Cs&&(S=await nO(y.localStore,x.query,!1).then(({documents:P})=>x.view.Za(P,S)));const M=w&&w.targetChanges.get(x.targetId),I=w&&w.targetMismatches.get(x.targetId)!=null,L=x.view.applyChanges(S,y.isPrimaryClient,M,I);return hO(y,x.targetId,L.ru),L.snapshot}(n,d,f,g);const s=await nO(n.localStore,e,!0),o=new cde(e,s.$s),a=o.Za(s.documents),l=Wv.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(a,n.isPrimaryClient,l);hO(n,t,c.ru);const u=new ude(e,t,o);return n.uu.set(e,u),n.cu.has(t)?n.cu.get(t).push(e):n.cu.set(t,[e]),c.snapshot}async function gde(n,e,t){const r=Rt(n),i=r.uu.get(e),s=r.cu.get(i.targetId);if(s.length>1)return r.cu.set(i.targetId,s.filter(o=>!Eb(o,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await WA(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&mI(r.remoteStore,i.targetId),qA(r,i.targetId)}).catch(dm)):(qA(r,i.targetId),await WA(r.localStore,i.targetId,!0))}async function yde(n,e){const t=Rt(n),r=t.uu.get(e),i=t.cu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),mI(t.remoteStore,r.targetId))}async function vde(n,e,t){const r=Tde(n);try{const i=await function(o,a){const l=Rt(o),c=Ur.now(),u=a.reduce((g,v)=>g.add(v.key),sn());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=Il(),y=sn();return l.Bs.getEntries(g,u).next(x=>{v=x,v.forEach((_,w)=>{w.isValidDocument()||(y=y.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,v)).next(x=>{d=x;const _=[];for(const w of a){const S=Dce(w,d.get(w.key).overlayedDocument);S!=null&&_.push(new hh(w.key,S,s8(S.value.mapValue),Bo.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,_,a)}).next(x=>{f=x;const _=x.applyToLocalDocumentSet(d,y);return l.documentOverlayCache.saveOverlays(g,x.batchId,_)})}).then(()=>({batchId:f.batchId,changes:g8(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Iu[o.currentUser.toKey()];c||(c=new rr(Kt)),c=c.insert(a,l),o.Iu[o.currentUser.toKey()]=c}(r,i.batchId,t),await $v(r,i.changes),await Rb(r.remoteStore)}catch(i){const s=_I(i,"Failed to persist write");t.reject(s)}}async function Z8(n,e){const t=Rt(n);try{const r=await Rue(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Pu.get(s);o&&(bn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o._u=!0:i.modifiedDocuments.size>0?bn(o._u,14607):i.removedDocuments.size>0&&(bn(o._u,42227),o._u=!1))}),await $v(t,r,e)}catch(r){await dm(r)}}function dO(n,e,t){const r=Rt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.uu.forEach((s,o)=>{const a=o.view.Da(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Rt(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.ya)f.Da(a)&&(c=!0)}),c&&wI(l)}(r.eventManager,e),i.length&&r.au.j_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function xde(n,e,t){const r=Rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Pu.get(e),s=i&&i.key;if(s){let o=new rr(yt.comparator);o=o.insert(s,Ii.newNoDocument(s,Ct.min()));const a=sn().add(s),l=new Cb(Ct.min(),new Map,new rr(Kt),o,a);await Z8(r,l),r.hu=r.hu.remove(s),r.Pu.delete(e),SI(r)}else await WA(r.localStore,e,!1).then(()=>qA(r,e,t)).catch(dm)}async function _de(n,e){const t=Rt(n),r=e.batch.batchId;try{const i=await Iue(t.localStore,e);tH(t,r,null),eH(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await $v(t,i)}catch(i){await dm(i)}}async function wde(n,e,t){const r=Rt(n);try{const i=await function(o,a){const l=Rt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(bn(d!==null,37113),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);tH(r,e,t),eH(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await $v(r,i)}catch(i){await dm(i)}}function eH(n,e){(n.Eu.get(e)||[]).forEach(t=>{t.resolve()}),n.Eu.delete(e)}function tH(n,e,t){const r=Rt(n);let i=r.Iu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Iu[r.currentUser.toKey()]=i}}function qA(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.cu.get(e))n.uu.delete(r),t&&n.au.Vu(r,t);n.cu.delete(e),n.isPrimaryClient&&n.Tu.Hr(e).forEach(r=>{n.Tu.containsKey(r)||nH(n,r)})}function nH(n,e){n.lu.delete(e.path.canonicalString());const t=n.hu.get(e);t!==null&&(mI(n.remoteStore,t),n.hu=n.hu.remove(e),n.Pu.delete(t),SI(n))}function hO(n,e,t){for(const r of t)r instanceof X8?(n.Tu.addReference(r.key,e),bde(n,r)):r instanceof Q8?(tt(bI,"Document no longer in limbo: "+r.key),n.Tu.removeReference(r.key,e),n.Tu.containsKey(r.key)||nH(n,r.key)):Et(19791,{mu:r})}function bde(n,e){const t=e.key,r=t.path.canonicalString();n.hu.get(t)||n.lu.has(r)||(tt(bI,"New document in limbo: "+t),n.lu.add(r),SI(n))}function SI(n){for(;n.lu.size>0&&n.hu.size<n.maxConcurrentLimboResolutions;){const e=n.lu.values().next().value;n.lu.delete(e);const t=new yt(zn.fromString(e)),r=n.du.next();n.Pu.set(r,new dde(t)),n.hu=n.hu.insert(t,r),z8(n.remoteStore,new Cc(Ma(sI(t.path)),r,"TargetPurposeLimboResolution",wb.le))}}async function $v(n,e,t){const r=Rt(n),i=[],s=[],o=[];r.uu.isEmpty()||(r.uu.forEach((a,l)=>{o.push(r.Ru(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=t==null?void 0:t.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=fI.Rs(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.au.j_(i),await async function(l,c){const u=Rt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Ne.forEach(c,f=>Ne.forEach(f.ds,g=>u.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>Ne.forEach(f.As,g=>u.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!hm(d))throw d;tt(pI,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const g=u.xs.get(f),v=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(v);u.xs=u.xs.insert(f,y)}}}(r.localStore,s))}async function Sde(n,e){const t=Rt(n);if(!t.currentUser.isEqual(e)){tt(bI,"User change. New user:",e.toKey());const r=await F8(t.localStore,e);t.currentUser=e,function(s,o){s.Eu.forEach(a=>{a.forEach(l=>{l.reject(new ot(Le.CANCELLED,o))})}),s.Eu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $v(t,r.ks)}}function Ede(n,e){const t=Rt(n),r=t.Pu.get(e);if(r&&r._u)return sn().add(r.key);{let i=sn();const s=t.cu.get(e);if(!s)return i;for(const o of s){const a=t.uu.get(o);i=i.unionWith(a.view.Ya)}return i}}function rH(n){const e=Rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Z8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ede.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xde.bind(null,e),e.au.j_=ade.bind(null,e.eventManager),e.au.Vu=lde.bind(null,e.eventManager),e}function Tde(n){const e=Rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_de.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wde.bind(null,e),e}class f1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pb(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return Pue(this.persistence,new Mue,e.initialUser,this.serializer)}yu(e){return new O8(hI.fi,this.serializer)}pu(e){return new Oue}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}f1.provider={build:()=>new f1};class Mde extends f1{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){bn(this.persistence.referenceDelegate instanceof d1,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new due(r,e.asyncQueue,t)}yu(e){const t=this.cacheSizeBytes!==void 0?is.withCacheSize(this.cacheSizeBytes):is.DEFAULT;return new O8(r=>d1.fi(r,t),this.serializer)}}class KA{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dO(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Sde.bind(null,this.syncEngine),await ide(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ode}()}createDatastore(e){const t=Pb(e.databaseInfo.databaseId),r=function(s){return new zue(s)}(e.databaseInfo);return function(s,o,a,l){return new Gue(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new que(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>dO(this.syncEngine,t,0),function(){return sO.C()?new sO:new Fue}())}createSyncEngine(e,t){return function(i,s,o,a,l,c,u){const d=new hde(i,s,o,a,l,c);return u&&(d.Au=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Rt(i);tt($d,"RemoteStore shutting down."),s.Ta.add(5),await Gv(s),s.Ea.shutdown(),s.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}KA.provider={build:()=>new KA};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iH{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Pl("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu="FirestoreClient";class Ade{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ci.UNAUTHENTICATED,this.clientId=Y6.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{tt(iu,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(tt(iu,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=_I(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function rT(n,e){n.asyncQueue.verifyOperationInProgress(),tt(iu,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await F8(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function fO(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Cde(n);tt(iu,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>aO(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>aO(e.remoteStore,i)),n._onlineComponents=e}async function Cde(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){tt(iu,"Using user provided OfflineComponentProvider");try{await rT(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Le.FAILED_PRECONDITION||i.code===Le.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Up("Error using user provided cache. Falling back to memory cache: "+t),await rT(n,new f1)}}else tt(iu,"Using default OfflineComponentProvider"),await rT(n,new Mde(void 0));return n._offlineComponents}async function sH(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(tt(iu,"Using user provided OnlineComponentProvider"),await fO(n,n._uninitializedComponentsProvider._online)):(tt(iu,"Using default OnlineComponentProvider"),await fO(n,new KA))),n._onlineComponents}function Pde(n){return sH(n).then(e=>e.syncEngine)}async function oH(n){const e=await sH(n),t=e.eventManager;return t.onListen=fde.bind(null,e.syncEngine),t.onUnlisten=gde.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=pde.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=yde.bind(null,e.syncEngine),t}function Ide(n,e,t={}){const r=new gl;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new iH({next:f=>{u.Cu(),o.enqueueAndForget(()=>K8(s,d));const g=f.docs.has(a);!g&&f.fromCache?c.reject(new ot(Le.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new ot(Le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Y8(sI(a.path),u,{includeMetadataChanges:!0,La:!0});return q8(s,d)}(await oH(n),n.asyncQueue,e,t,r)),r.promise}function Rde(n,e,t={}){const r=new gl;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new iH({next:f=>{u.Cu(),o.enqueueAndForget(()=>K8(s,d)),f.fromCache&&l.source==="server"?c.reject(new ot(Le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Y8(a,u,{includeMetadataChanges:!0,La:!0});return q8(s,d)}(await oH(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aH(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lH(n,e,t){if(!t)throw new ot(Le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kde(n,e,t,r){if(e===!0&&r===!0)throw new ot(Le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mO(n){if(!yt.isDocumentKey(n))throw new ot(Le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gO(n){if(yt.isDocumentKey(n))throw new ot(Le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function kb(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Et(12329,{type:typeof n})}function Rl(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ot(Le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kb(n);throw new ot(Le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cH="firestore.googleapis.com",yO=!0;class vO{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ot(Le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cH,this.ssl=yO}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:yO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=L8;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cue)throw new ot(Le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kde("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aH((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ot(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ot(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ot(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nb{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vO({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ot(Le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ot(Le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vO(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ule;switch(r.type){case"firstParty":return new Wle(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ot(Le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,mb("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=pO.get(t);r&&(tt("ComponentProvider","Removing Datastore"),pO.delete(t),r.terminate())}(this),Promise.resolve()}}function Nde(n,e,t,r={}){var i;n=Rl(n,Nb);const s=Fv(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;o.host!==cH&&o.host!==l&&Up("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!Jc(c,a)&&(n._setSettings(c),s&&(XB(`https://${l}`),mb("Firestore",!0)),r.mockUserToken)){let u,d;if(typeof r.mockUserToken=="string")u=r.mockUserToken,d=Ci.MOCK_USER;else{u=Qie(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ot(Le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ci(f)}n._authCredentials=new zle(new q6(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ph(this.firestore,e,this._query)}}class hs{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hs(this.firestore,e,this._key)}}class Wc extends ph{constructor(e,t,r){super(e,t,sI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hs(this.firestore,null,new yt(e))}withConverter(e){return new Wc(this.firestore,e,this._path)}}function ei(n,e,...t){if(n=ci(n),lH("collection","path",e),n instanceof Nb){const r=zn.fromString(e,...t);return gO(r),new Wc(n,null,r)}{if(!(n instanceof hs||n instanceof Wc))throw new ot(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zn.fromString(e,...t));return gO(r),new Wc(n.firestore,null,r)}}function ts(n,e,...t){if(n=ci(n),arguments.length===1&&(e=Y6.newId()),lH("doc","path",e),n instanceof Nb){const r=zn.fromString(e,...t);return mO(r),new hs(n,null,new yt(r))}{if(!(n instanceof hs||n instanceof Wc))throw new ot(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zn.fromString(e,...t));return mO(r),new hs(n.firestore,n instanceof Wc?n.converter:null,new yt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO="AsyncQueue";class _O{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new V8(this,"async_queue_retry"),this.ec=()=>{const r=nT();r&&tt(xO,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;const t=nT();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=nT();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const t=new gl;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!hm(e))throw e;tt(xO,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const t=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,Pl("INTERNAL UNHANDLED ERROR: ",wO(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=t,t}enqueueAfterDelay(e,t,r){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const i=xI.createAndSchedule(this,e,t,r,s=>this.oc(s));return this.Hu.push(i),i}nc(){this.Ju&&Et(47125,{_c:wO(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Hu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function wO(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class pm extends Nb{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new _O,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _O(e),this._firestoreClient=void 0,await e}}}function Dde(n,e){const t=typeof n=="object"?n:W2(),r=typeof n=="string"?n:r1,i=lh(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Yie("firestore");s&&Nde(i,...s)}return i}function EI(n){if(n._terminated)throw new ot(Le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Lde(n),n._firestoreClient}function Lde(n){var e,t,r;const i=n._freezeSettings(),s=function(a,l,c,u){return new sce(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,aH(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Ade(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $p(ui.fromBase64String(e))}catch(t){throw new ot(Le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $p(ui.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ot(Le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ri(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uH{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ot(Le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ot(Le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ode=/^__.*__$/;class Fde{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new hh(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hv(e,this.data,t,this.fieldTransforms)}}function dH(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{hc:n})}}class CI{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Pc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new CI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Tc({path:r,Ec:!1});return i.dc(e),i}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Tc({path:r,Ec:!1});return i.Pc(),i}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return p1(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(dH(this.hc)&&Ode.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class jde{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Pb(e)}gc(e,t,r,i=!1){return new CI({hc:e,methodName:t,fc:r,path:ri.emptyPath(),Ec:!1,mc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function PI(n){const e=n._freezeSettings(),t=Pb(n._databaseId);return new jde(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hH(n,e,t,r,i,s={}){const o=n.gc(s.merge||s.mergeFields?2:0,e,t,i);mH("Data must be an object, but it was:",o,r);const a=fH(r,o);let l,c;if(s.merge)l=new jo(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const f=Ude(e,d,t);if(!o.contains(f))throw new ot(Le.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Bde(u,f)||u.push(f)}l=new jo(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new Fde(new uo(a),l,c)}function Vde(n,e,t,r=!1){return II(t,n.gc(r?4:3,e))}function II(n,e){if(pH(n=ci(n)))return mH("Unsupported field value:",e,n),fH(n,e);if(n instanceof uH)return function(r,i){if(!dH(i.hc))throw i.Vc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Vc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=II(a,i.Rc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=ci(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Cce(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ur.fromDate(r);return{timestampValue:u1(i.serializer,s)}}if(r instanceof Ur){const s=new Ur(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:u1(i.serializer,s)}}if(r instanceof MI)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $p)return{bytesValue:C8(i.serializer,r._byteString)};if(r instanceof hs){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Vc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:uI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof AI)return function(o,a){return{mapValue:{fields:{[r8]:{stringValue:i8},[i1]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Vc("VectorValues must only contain numeric values.");return oI(a.serializer,c)})}}}}}}(r,i);throw i.Vc(`Unsupported field value: ${kb(r)}`)}(n,e)}function fH(n,e){const t={};return Q6(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uh(n,(r,i)=>{const s=II(i,e.Ic(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function pH(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ur||n instanceof MI||n instanceof $p||n instanceof hs||n instanceof uH||n instanceof AI)}function mH(n,e,t){if(!pH(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=kb(t);throw r==="an object"?e.Vc(n+" a custom object"):e.Vc(n+" "+r)}}function Ude(n,e,t){if((e=ci(e))instanceof TI)return e._internalPath;if(typeof e=="string")return gH(n,e);throw p1("Field path arguments must be of type string or ",n,!1,void 0,t)}const zde=new RegExp("[~\\*/\\[\\]]");function gH(n,e,t){if(e.search(zde)>=0)throw p1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new TI(...e.split("."))._internalPath}catch{throw p1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function p1(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ot(Le.INVALID_ARGUMENT,a+n+l)}function Bde(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yH{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new hs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Hde(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(RI("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Hde extends yH{data(){return super.data()}}function RI(n,e){return typeof e=="string"?gH(n,e):e instanceof TI?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wde(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ot(Le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kI{}class vH extends kI{}function xH(n,e,...t){let r=[];e instanceof kI&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof NI).length,a=s.filter(l=>l instanceof Db).length;if(o>1||o>0&&a>0)throw new ot(Le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Db extends vH{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Db(e,t,r)}_apply(e){const t=this._parse(e);return wH(e._query,t),new ph(e.firestore,e.converter,VA(e._query,t))}_parse(e){const t=PI(e.firestore);return function(s,o,a,l,c,u,d){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ot(Le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){SO(d,u);const v=[];for(const y of d)v.push(bO(l,s,y));f={arrayValue:{values:v}}}else f=bO(l,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||SO(d,u),f=Vde(a,o,d,u==="in"||u==="not-in");return Nr.create(c,u,f)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function _H(n,e,t){const r=e,i=RI("where",n);return Db._create(i,r,t)}class NI extends kI{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new NI(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Xo.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)wH(o,l),o=VA(o,l)}(e._query,t),new ph(e.firestore,e.converter,VA(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class DI extends vH{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new DI(e,t,r)}_apply(e){return new ph(e.firestore,e.converter,a1(e._query,this._limit,this._limitType))}}function Gde(n){return DI._create("limit",n,"F")}function bO(n,e,t){if(typeof(t=ci(t))=="string"){if(t==="")throw new ot(Le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!h8(e)&&t.indexOf("/")!==-1)throw new ot(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(zn.fromString(t));if(!yt.isDocumentKey(r))throw new ot(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return F3(n,new yt(r))}if(t instanceof hs)return F3(n,t._key);throw new ot(Le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kb(t)}.`)}function SO(n,e){if(!Array.isArray(n)||n.length===0)throw new ot(Le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wH(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ot(Le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ot(Le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class $de{convertValue(e,t="none"){switch(nu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Et(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return uh(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[i1].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>vr(o.doubleValue));return new AI(s)}convertGeoPoint(e){return new MI(vr(e.latitude),vr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Sb(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wy(e));default:return null}}convertTimestamp(e){const t=eu(e);return new Ur(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=zn.fromString(e);bn(D8(r),9688,{name:e});const i=new Gy(r.get(1),r.get(3)),s=new yt(r.popFirst(5));return i.isEqual(t)||Pl(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bH(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class SH extends yH{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(RI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class tw extends SH{data(e={}){return super.data(e)}}class qde{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new kg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new tw(this._firestore,this._userDataWriter,r.key,r,new kg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ot(Le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new tw(i._firestore,i._userDataWriter,a.doc.key,a.doc,new kg(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new tw(i._firestore,i._userDataWriter,a.doc.key,a.doc,new kg(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:Kde(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Kde(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yde(n){n=Rl(n,hs);const e=Rl(n.firestore,pm);return Ide(EI(e),n._key).then(t=>Xde(e,n,t))}class EH extends $de{constructor(e){super(),this.firestore=e}convertBytes(e){return new $p(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hs(this.firestore,null,t)}}function ss(n){n=Rl(n,ph);const e=Rl(n.firestore,pm),t=EI(e),r=new EH(e);return Wde(n._query),Rde(t,n._query).then(i=>new qde(e,r,n,i))}function tc(n,e,t){n=Rl(n,hs);const r=Rl(n.firestore,pm),i=bH(n.converter,e,t);return LI(r,[hH(PI(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Bo.none())])}function Ng(n){return LI(Rl(n.firestore,pm),[new aI(n._key,Bo.none())])}function YA(n,e){const t=Rl(n.firestore,pm),r=ts(n),i=bH(n.converter,e);return LI(t,[hH(PI(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Bo.exists(!1))]).then(()=>r)}function LI(n,e){return function(r,i){const s=new gl;return r.asyncQueue.enqueueAndForget(async()=>vde(await Pde(r),i,s)),s.promise}(EI(n),e)}function Xde(n,e,t){const r=t.docs.get(e._key),i=new EH(n);return new SH(n,i,e._key,r,new kg(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){um=i})(am),ka(new Ko("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new pm(new Ble(r.getProvider("auth-internal")),new Gle(o,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ot(Le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gy(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),mo(T3,M3,e),mo(T3,M3,"esm2017")})();const TH="@firebase/installations",OI="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MH=1e4,AH=`w:${OI}`,CH="FIS_v2",Qde="https://firebaseinstallations.googleapis.com/v1",Jde=60*60*1e3,Zde="installations",ehe="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const the={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},qd=new ah(Zde,ehe,the);function PH(n){return n instanceof Zo&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IH({projectId:n}){return`${Qde}/projects/${n}/installations`}function RH(n){return{token:n.token,requestStatus:2,expiresIn:rhe(n.expiresIn),creationTime:Date.now()}}async function kH(n,e){const r=(await e.json()).error;return qd.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function NH({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function nhe(n,{refreshToken:e}){const t=NH(n);return t.append("Authorization",ihe(e)),t}async function DH(n){const e=await n();return e.status>=500&&e.status<600?n():e}function rhe(n){return Number(n.replace("s","000"))}function ihe(n){return`${CH} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function she({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=IH(n),i=NH(n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:t,authVersion:CH,appId:n.appId,sdkVersion:AH},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await DH(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:RH(c.authToken)}}else throw await kH("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LH(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ohe(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ahe=/^[cdef][\w-]{21}$/,XA="";function lhe(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=che(n);return ahe.test(t)?t:XA}catch{return XA}}function che(n){return ohe(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OH=new Map;function FH(n,e){const t=Lb(n);jH(t,e),uhe(t,e)}function jH(n,e){const t=OH.get(n);if(t)for(const r of t)r(e)}function uhe(n,e){const t=dhe();t&&t.postMessage({key:n,fid:e}),hhe()}let dd=null;function dhe(){return!dd&&"BroadcastChannel"in self&&(dd=new BroadcastChannel("[Firebase] FID Change"),dd.onmessage=n=>{jH(n.data.key,n.data.fid)}),dd}function hhe(){OH.size===0&&dd&&(dd.close(),dd=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fhe="firebase-installations-database",phe=1,Kd="firebase-installations-store";let iT=null;function FI(){return iT||(iT=n6(fhe,phe,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Kd)}}})),iT}async function m1(n,e){const t=Lb(n),i=(await FI()).transaction(Kd,"readwrite"),s=i.objectStore(Kd),o=await s.get(t);return await s.put(e,t),await i.done,(!o||o.fid!==e.fid)&&FH(n,e.fid),e}async function VH(n){const e=Lb(n),r=(await FI()).transaction(Kd,"readwrite");await r.objectStore(Kd).delete(e),await r.done}async function Ob(n,e){const t=Lb(n),i=(await FI()).transaction(Kd,"readwrite"),s=i.objectStore(Kd),o=await s.get(t),a=e(o);return a===void 0?await s.delete(t):await s.put(a,t),await i.done,a&&(!o||o.fid!==a.fid)&&FH(n,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jI(n){let e;const t=await Ob(n.appConfig,r=>{const i=mhe(r),s=ghe(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===XA?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function mhe(n){const e=n||{fid:lhe(),registrationStatus:0};return UH(e)}function ghe(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(qd.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=yhe(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:vhe(n)}:{installationEntry:e}}async function yhe(n,e){try{const t=await she(n,e);return m1(n.appConfig,t)}catch(t){throw PH(t)&&t.customData.serverCode===409?await VH(n.appConfig):await m1(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function vhe(n){let e=await EO(n.appConfig);for(;e.registrationStatus===1;)await LH(100),e=await EO(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await jI(n);return r||t}return e}function EO(n){return Ob(n,e=>{if(!e)throw qd.create("installation-not-found");return UH(e)})}function UH(n){return xhe(n)?{fid:n.fid,registrationStatus:0}:n}function xhe(n){return n.registrationStatus===1&&n.registrationTime+MH<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _he({appConfig:n,heartbeatServiceProvider:e},t){const r=whe(n,t),i=nhe(n,t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:AH,appId:n.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await DH(()=>fetch(r,a));if(l.ok){const c=await l.json();return RH(c)}else throw await kH("Generate Auth Token",l)}function whe(n,{fid:e}){return`${IH(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VI(n,e=!1){let t;const r=await Ob(n.appConfig,s=>{if(!zH(s))throw qd.create("not-registered");const o=s.authToken;if(!e&&Ehe(o))return s;if(o.requestStatus===1)return t=bhe(n,e),s;{if(!navigator.onLine)throw qd.create("app-offline");const a=Mhe(s);return t=She(n,a),a}});return t?await t:r.authToken}async function bhe(n,e){let t=await TO(n.appConfig);for(;t.authToken.requestStatus===1;)await LH(100),t=await TO(n.appConfig);const r=t.authToken;return r.requestStatus===0?VI(n,e):r}function TO(n){return Ob(n,e=>{if(!zH(e))throw qd.create("not-registered");const t=e.authToken;return Ahe(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function She(n,e){try{const t=await _he(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await m1(n.appConfig,r),t}catch(t){if(PH(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await VH(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await m1(n.appConfig,r)}throw t}}function zH(n){return n!==void 0&&n.registrationStatus===2}function Ehe(n){return n.requestStatus===2&&!The(n)}function The(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Jde}function Mhe(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function Ahe(n){return n.requestStatus===1&&n.requestTime+MH<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Che(n){const e=n,{installationEntry:t,registrationPromise:r}=await jI(e);return r?r.catch(console.error):VI(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Phe(n,e=!1){const t=n;return await Ihe(t),(await VI(t,e)).token}async function Ihe(n){const{registrationPromise:e}=await jI(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rhe(n){if(!n||!n.options)throw sT("App Configuration");if(!n.name)throw sT("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw sT(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function sT(n){return qd.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BH="installations",khe="installations-internal",Nhe=n=>{const e=n.getProvider("app").getImmediate(),t=Rhe(e),r=lh(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Dhe=n=>{const e=n.getProvider("app").getImmediate(),t=lh(e,BH).getImmediate();return{getId:()=>Che(t),getToken:i=>Phe(t,i)}};function Lhe(){ka(new Ko(BH,Nhe,"PUBLIC")),ka(new Ko(khe,Dhe,"PRIVATE"))}Lhe();mo(TH,OI);mo(TH,OI,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="analytics",Ohe="firebase_id",Fhe="origin",jhe=60*1e3,Vhe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",UI="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new gb("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uhe={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ns=new ah("analytics","Analytics",Uhe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zhe(n){if(!n.startsWith(UI)){const e=Ns.create("invalid-gtag-resource",{gtagURL:n});return fs.warn(e.message),""}return n}function HH(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Bhe(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function Hhe(n,e){const t=Bhe("firebase-js-sdk-policy",{createScriptURL:zhe}),r=document.createElement("script"),i=`${UI}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Whe(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function Ghe(n,e,t,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await HH(t)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){fs.error(a)}n("config",i,s)}async function $he(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await HH(t);for(const l of o){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),n("event",r,i||{})}catch(s){fs.error(s)}}function qhe(n,e,t,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await $he(n,e,t,a,l)}else if(s==="config"){const[a,l]=o;await Ghe(n,e,t,r,a,l)}else if(s==="consent"){const[a,l]=o;n("consent",a,l)}else if(s==="get"){const[a,l,c]=o;n("get",a,l,c)}else if(s==="set"){const[a]=o;n("set",a)}else n(s,...o)}catch(a){fs.error(a)}}return i}function Khe(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=qhe(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}function Yhe(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(UI)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xhe=30,Qhe=1e3;class Jhe{constructor(e={},t=Qhe){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const WH=new Jhe;function Zhe(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function efe(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:Zhe(r)},s=Vhe.replace("{app-id}",t),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Ns.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function tfe(n,e=WH,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw Ns.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Ns.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new ife;return setTimeout(async()=>{a.abort()},jhe),GH({appId:r,apiKey:i,measurementId:s},o,a,e)}async function GH(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=WH){var s;const{appId:o,measurementId:a}=n;try{await nfe(r,e)}catch(l){if(a)return fs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await efe(n);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!rfe(c)){if(i.deleteThrottleMetadata(o),a)return fs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?YL(t,i.intervalMillis,Xhe):YL(t,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:t+1};return i.setThrottleMetadata(o,d),fs.debug(`Calling attemptFetch again in ${u} millis`),GH(n,d,r,i)}}function nfe(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Ns.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function rfe(n){if(!(n instanceof Zo)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class ife{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function sfe(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});n("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ofe(){if(JB())try{await ZB()}catch(n){return fs.warn(Ns.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return fs.warn(Ns.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function afe(n,e,t,r,i,s,o){var a;const l=tfe(n);l.then(g=>{t[g.measurementId]=g.appId,n.options.measurementId&&g.measurementId!==n.options.measurementId&&fs.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>fs.error(g)),e.push(l);const c=ofe().then(g=>{if(g)return r.getId()}),[u,d]=await Promise.all([l,c]);Yhe(s)||Hhe(s,u.measurementId),i("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[Fhe]="firebase",f.update=!0,d!=null&&(f[Ohe]=d),i("config",u.measurementId,f),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lfe{constructor(e){this.app=e}_delete(){return delete ry[this.app.options.appId],Promise.resolve()}}let ry={},MO=[];const AO={};let oT="dataLayer",cfe="gtag",CO,$H,PO=!1;function ufe(){const n=[];if(QB()&&n.push("This is a browser extension environment."),ose()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Ns.create("invalid-analytics-context",{errorInfo:e});fs.warn(t.message)}}function dfe(n,e,t){ufe();const r=n.options.appId;if(!r)throw Ns.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)fs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ns.create("no-api-key");if(ry[r]!=null)throw Ns.create("already-exists",{id:r});if(!PO){Whe(oT);const{wrappedGtag:s,gtagCore:o}=Khe(ry,MO,AO,oT,cfe);$H=s,CO=o,PO=!0}return ry[r]=afe(n,MO,AO,e,CO,oT,t),new lfe(n)}function hfe(n=W2()){n=ci(n);const e=lh(n,g1);return e.isInitialized()?e.getImmediate():ffe(n)}function ffe(n,e={}){const t=lh(n,g1);if(t.isInitialized()){const i=t.getImmediate();if(Jc(e,t.getOptions()))return i;throw Ns.create("already-initialized")}return t.initialize({options:e})}function pfe(n,e,t,r){n=ci(n),sfe($H,ry[n.app.options.appId],e,t,r).catch(i=>fs.error(i))}const IO="@firebase/analytics",RO="0.10.16";function mfe(){ka(new Ko(g1,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return dfe(r,i,t)},"PUBLIC")),ka(new Ko("analytics-internal",n,"PRIVATE")),mo(IO,RO),mo(IO,RO,"esm2017");function n(e){try{const t=e.getProvider(g1).getImmediate();return{logEvent:(r,i,s)=>pfe(t,r,i,s)}}catch(t){throw Ns.create("interop-component-reg-failed",{reason:t})}}}mfe();const gfe={apiKey:"AIzaSyBe-XLmVRiMs844VxR1_awMzGEGARb6Xmk",authDomain:"website-mpn-65e8d.firebaseapp.com",projectId:"website-mpn-65e8d",storageBucket:"website-mpn-65e8d.firebasestorage.app",messagingSenderId:"798271486726",appId:"1:798271486726:web:0d0e0178a963804f627c87",measurementId:"G-KSVPVC1Z9D"},zI=r6(gfe),nw=jle(zI);Tae(nw,R6).catch(n=>{console.warn("Auth persistence configuration failed:",n)});const _n=Dde(zI);let yfe=null;if(typeof window<"u")try{localStorage.getItem("cookieConsent")==="true"&&(yfe=hfe(zI))}catch(n){console.warn("Analytics disabled due to cookie/storage restrictions:",n)}console.log("Firebase initialized successfully");const vfe=n=>{var t,r;const e=n.data();return{id:n.id,title:e.title||"",description:e.description||"",date:e.date?typeof e.date=="string"?e.date:((r=(t=e.date)==null?void 0:t.toDate)==null?void 0:r.call(t))??"":"",imageUrl:e.imageUrl||"",category:e.category||""}},xfe=async n=>{const e=ei(_n,"activities");let r=(await ss(e)).docs.filter(i=>{const s=i.data();return!("deletedAt"in s)||s.deletedAt===null});return r=r.sort((i,s)=>{const o=i.data().date?new Date(i.data().date).getTime():0;return(s.data().date?new Date(s.data().date).getTime():0)-o}),n&&(r=r.slice(0,n)),r.map(vfe)},BI=n=>fb({queryKey:["activities",n],queryFn:()=>xfe(n)}),_fe=async()=>{const n=await fetch("/api/learning-modules");if(!n.ok)throw new Error("Failed to fetch learning modules");return n.json()},wfe=async n=>{const e=await fetch(`/api/learning-modules?limit=${n}`);if(!e.ok)throw new Error("Failed to fetch limited learning modules");return e.json()},qH=n=>fb({queryKey:["learningModules",n],queryFn:()=>n?wfe(n):_fe()}),bfe=n=>{const e=n.data();return{id:n.id,title:e.title||"",description:e.description||"",imageUrl:e.imageUrl||"",activityId:e.activityId||null,createdAt:e.createdAt||null,updatedAt:e.updatedAt||null}},Sfe=async()=>{const n=ei(_n,"gallerys");return(await ss(n)).docs.filter(t=>{const r=t.data();return!("deletedAt"in r)||r.deletedAt===null}).map(bfe)},KH=()=>fb({queryKey:["gallery"],queryFn:Sfe});function Efe(n){return Object.prototype.toString.call(n)==="[object Object]"}function kO(n){return Efe(n)||Array.isArray(n)}function Tfe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function HI(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;const i=JSON.stringify(Object.keys(n.breakpoints||{})),s=JSON.stringify(Object.keys(e.breakpoints||{}));return i!==s?!1:t.every(o=>{const a=n[o],l=e[o];return typeof a=="function"?`${a}`==`${l}`:!kO(a)||!kO(l)?a===l:HI(a,l)})}function NO(n){return n.concat().sort((e,t)=>e.name>t.name?1:-1).map(e=>e.options)}function Mfe(n,e){if(n.length!==e.length)return!1;const t=NO(n),r=NO(e);return t.every((i,s)=>{const o=r[s];return HI(i,o)})}function WI(n){return typeof n=="number"}function QA(n){return typeof n=="string"}function Fb(n){return typeof n=="boolean"}function DO(n){return Object.prototype.toString.call(n)==="[object Object]"}function Jn(n){return Math.abs(n)}function GI(n){return Math.sign(n)}function iy(n,e){return Jn(n-e)}function Afe(n,e){if(n===0||e===0||Jn(n)<=Jn(e))return 0;const t=iy(Jn(n),Jn(e));return Jn(t/n)}function Cfe(n){return Math.round(n*100)/100}function Yy(n){return Xy(n).map(Number)}function Ho(n){return n[qv(n)]}function qv(n){return Math.max(0,n.length-1)}function $I(n,e){return e===qv(n)}function LO(n,e=0){return Array.from(Array(n),(t,r)=>e+r)}function Xy(n){return Object.keys(n)}function YH(n,e){return[n,e].reduce((t,r)=>(Xy(r).forEach(i=>{const s=t[i],o=r[i],a=DO(s)&&DO(o);t[i]=a?YH(s,o):o}),t),{})}function JA(n,e){return typeof e.MouseEvent<"u"&&n instanceof e.MouseEvent}function Pfe(n,e){const t={start:r,center:i,end:s};function r(){return 0}function i(l){return s(l)/2}function s(l){return e-l}function o(l,c){return QA(n)?t[n](l):n(e,l,c)}return{measure:o}}function Qy(){let n=[];function e(i,s,o,a={passive:!0}){let l;if("addEventListener"in i)i.addEventListener(s,o,a),l=()=>i.removeEventListener(s,o,a);else{const c=i;c.addListener(o),l=()=>c.removeListener(o)}return n.push(l),r}function t(){n=n.filter(i=>i())}const r={add:e,clear:t};return r}function Ife(n,e,t,r){const i=Qy(),s=1e3/60;let o=null,a=0,l=0;function c(){i.add(n,"visibilitychange",()=>{n.hidden&&v()})}function u(){g(),i.clear()}function d(x){if(!l)return;o||(o=x,t(),t());const _=x-o;for(o=x,a+=_;a>=s;)t(),a-=s;const w=a/s;r(w),l&&(l=e.requestAnimationFrame(d))}function f(){l||(l=e.requestAnimationFrame(d))}function g(){e.cancelAnimationFrame(l),o=null,a=0,l=0}function v(){o=null,a=0}return{init:c,destroy:u,start:f,stop:g,update:t,render:r}}function Rfe(n,e){const t=e==="rtl",r=n==="y",i=r?"y":"x",s=r?"x":"y",o=!r&&t?-1:1,a=u(),l=d();function c(v){const{height:y,width:x}=v;return r?y:x}function u(){return r?"top":t?"right":"left"}function d(){return r?"bottom":t?"left":"right"}function f(v){return v*o}return{scroll:i,cross:s,startEdge:a,endEdge:l,measureSize:c,direction:f}}function Yd(n=0,e=0){const t=Jn(n-e);function r(c){return c<n}function i(c){return c>e}function s(c){return r(c)||i(c)}function o(c){return s(c)?r(c)?n:e:c}function a(c){return t?c-t*Math.ceil((c-e)/t):c}return{length:t,max:e,min:n,constrain:o,reachedAny:s,reachedMax:i,reachedMin:r,removeOffset:a}}function XH(n,e,t){const{constrain:r}=Yd(0,n),i=n+1;let s=o(e);function o(f){return t?Jn((i+f)%i):r(f)}function a(){return s}function l(f){return s=o(f),d}function c(f){return u().set(a()+f)}function u(){return XH(n,a(),t)}const d={get:a,set:l,add:c,clone:u};return d}function kfe(n,e,t,r,i,s,o,a,l,c,u,d,f,g,v,y,x,_,w){const{cross:S,direction:M}=n,I=["INPUT","SELECT","TEXTAREA"],L={passive:!1},P=Qy(),T=Qy(),C=Yd(50,225).constrain(g.measure(20)),k={mouse:300,touch:400},O={mouse:500,touch:600},U=v?43:25;let V=!1,B=0,Z=0,ne=!1,oe=!1,z=!1,G=!1;function q(te){if(!w)return;function le(Be){(Fb(w)||w(te,Be))&&Y(Be)}const we=e;P.add(we,"dragstart",Be=>Be.preventDefault(),L).add(we,"touchmove",()=>{},L).add(we,"touchend",()=>{}).add(we,"touchstart",le).add(we,"mousedown",le).add(we,"touchcancel",Se).add(we,"contextmenu",Se).add(we,"click",Re,!0)}function se(){P.clear(),T.clear()}function J(){const te=G?t:e;T.add(te,"touchmove",ae,L).add(te,"touchend",Se).add(te,"mousemove",ae,L).add(te,"mouseup",Se)}function he(te){const le=te.nodeName||"";return I.includes(le)}function _e(){return(v?O:k)[G?"mouse":"touch"]}function re(te,le){const we=d.add(GI(te)*-1),Be=u.byDistance(te,!v).distance;return v||Jn(te)<C?Be:x&&le?Be*.5:u.byIndex(we.get(),0).distance}function Y(te){const le=JA(te,r);G=le,z=v&&le&&!te.buttons&&V,V=iy(i.get(),o.get())>=2,!(le&&te.button!==0)&&(he(te.target)||(ne=!0,s.pointerDown(te),c.useFriction(0).useDuration(0),i.set(o),J(),B=s.readPoint(te),Z=s.readPoint(te,S),f.emit("pointerDown")))}function ae(te){if(!JA(te,r)&&te.touches.length>=2)return Se(te);const we=s.readPoint(te),Be=s.readPoint(te,S),Fe=iy(we,B),Je=iy(Be,Z);if(!oe&&!G&&(!te.cancelable||(oe=Fe>Je,!oe)))return Se(te);const Ze=s.pointerMove(te);Fe>y&&(z=!0),c.useFriction(.3).useDuration(.75),a.start(),i.add(M(Ze)),te.preventDefault()}function Se(te){const we=u.byDistance(0,!1).index!==d.get(),Be=s.pointerUp(te)*_e(),Fe=re(M(Be),we),Je=Afe(Be,Fe),Ze=U-10*Je,et=_+Je/50;oe=!1,ne=!1,T.clear(),c.useDuration(Ze).useFriction(et),l.distance(Fe,!v),G=!1,f.emit("pointerUp")}function Re(te){z&&(te.stopPropagation(),te.preventDefault(),z=!1)}function Ae(){return ne}return{init:q,destroy:se,pointerDown:Ae}}function Nfe(n,e){let r,i;function s(d){return d.timeStamp}function o(d,f){const v=`client${(f||n.scroll)==="x"?"X":"Y"}`;return(JA(d,e)?d:d.touches[0])[v]}function a(d){return r=d,i=d,o(d)}function l(d){const f=o(d)-o(i),g=s(d)-s(r)>170;return i=d,g&&(r=d),f}function c(d){if(!r||!i)return 0;const f=o(i)-o(r),g=s(d)-s(r),v=s(d)-s(i)>170,y=f/g;return g&&!v&&Jn(y)>.1?y:0}return{pointerDown:a,pointerMove:l,pointerUp:c,readPoint:o}}function Dfe(){function n(t){const{offsetTop:r,offsetLeft:i,offsetWidth:s,offsetHeight:o}=t;return{top:r,right:i+s,bottom:r+o,left:i,width:s,height:o}}return{measure:n}}function Lfe(n){function e(r){return n*(r/100)}return{measure:e}}function Ofe(n,e,t,r,i,s,o){const a=[n].concat(r);let l,c,u=[],d=!1;function f(x){return i.measureSize(o.measure(x))}function g(x){if(!s)return;c=f(n),u=r.map(f);function _(w){for(const S of w){if(d)return;const M=S.target===n,I=r.indexOf(S.target),L=M?c:u[I],P=f(M?n:r[I]);if(Jn(P-L)>=.5){x.reInit(),e.emit("resize");break}}}l=new ResizeObserver(w=>{(Fb(s)||s(x,w))&&_(w)}),t.requestAnimationFrame(()=>{a.forEach(w=>l.observe(w))})}function v(){d=!0,l&&l.disconnect()}return{init:g,destroy:v}}function Ffe(n,e,t,r,i,s){let o=0,a=0,l=i,c=s,u=n.get(),d=0;function f(){const L=r.get()-n.get(),P=!l;let T=0;return P?(o=0,t.set(r),n.set(r),T=L):(t.set(n),o+=L/l,o*=c,u+=o,n.add(o),T=u-d),a=GI(T),d=u,I}function g(){const L=r.get()-e.get();return Jn(L)<.001}function v(){return l}function y(){return a}function x(){return o}function _(){return S(i)}function w(){return M(s)}function S(L){return l=L,I}function M(L){return c=L,I}const I={direction:y,duration:v,velocity:x,seek:f,settled:g,useBaseFriction:w,useBaseDuration:_,useFriction:M,useDuration:S};return I}function jfe(n,e,t,r,i){const s=i.measure(10),o=i.measure(50),a=Yd(.1,.99);let l=!1;function c(){return!(l||!n.reachedAny(t.get())||!n.reachedAny(e.get()))}function u(g){if(!c())return;const v=n.reachedMin(e.get())?"min":"max",y=Jn(n[v]-e.get()),x=t.get()-e.get(),_=a.constrain(y/o);t.subtract(x*_),!g&&Jn(x)<s&&(t.set(n.constrain(t.get())),r.useDuration(25).useBaseFriction())}function d(g){l=!g}return{shouldConstrain:c,constrain:u,toggleActive:d}}function Vfe(n,e,t,r,i){const s=Yd(-e+n,0),o=d(),a=u(),l=f();function c(v,y){return iy(v,y)<=1}function u(){const v=o[0],y=Ho(o),x=o.lastIndexOf(v),_=o.indexOf(y)+1;return Yd(x,_)}function d(){return t.map((v,y)=>{const{min:x,max:_}=s,w=s.constrain(v),S=!y,M=$I(t,y);return S?_:M||c(x,w)?x:c(_,w)?_:w}).map(v=>parseFloat(v.toFixed(3)))}function f(){if(e<=n+i)return[s.max];if(r==="keepSnaps")return o;const{min:v,max:y}=a;return o.slice(v,y)}return{snapsContained:l,scrollContainLimit:a}}function Ufe(n,e,t){const r=e[0],i=t?r-n:Ho(e);return{limit:Yd(i,r)}}function zfe(n,e,t,r){const s=e.min+.1,o=e.max+.1,{reachedMin:a,reachedMax:l}=Yd(s,o);function c(f){return f===1?l(t.get()):f===-1?a(t.get()):!1}function u(f){if(!c(f))return;const g=n*(f*-1);r.forEach(v=>v.add(g))}return{loop:u}}function Bfe(n){const{max:e,length:t}=n;function r(s){const o=s-e;return t?o/-t:0}return{get:r}}function Hfe(n,e,t,r,i){const{startEdge:s,endEdge:o}=n,{groupSlides:a}=i,l=d().map(e.measure),c=f(),u=g();function d(){return a(r).map(y=>Ho(y)[o]-y[0][s]).map(Jn)}function f(){return r.map(y=>t[s]-y[s]).map(y=>-Jn(y))}function g(){return a(c).map(y=>y[0]).map((y,x)=>y+l[x])}return{snaps:c,snapsAligned:u}}function Wfe(n,e,t,r,i,s){const{groupSlides:o}=i,{min:a,max:l}=r,c=u();function u(){const f=o(s),g=!n||e==="keepSnaps";return t.length===1?[s]:g?f:f.slice(a,l).map((v,y,x)=>{const _=!y,w=$I(x,y);if(_){const S=Ho(x[0])+1;return LO(S)}if(w){const S=qv(s)-Ho(x)[0]+1;return LO(S,Ho(x)[0])}return v})}return{slideRegistry:c}}function Gfe(n,e,t,r,i){const{reachedAny:s,removeOffset:o,constrain:a}=r;function l(v){return v.concat().sort((y,x)=>Jn(y)-Jn(x))[0]}function c(v){const y=n?o(v):a(v),x=e.map((w,S)=>({diff:u(w-y,0),index:S})).sort((w,S)=>Jn(w.diff)-Jn(S.diff)),{index:_}=x[0];return{index:_,distance:y}}function u(v,y){const x=[v,v+t,v-t];if(!n)return v;if(!y)return l(x);const _=x.filter(w=>GI(w)===y);return _.length?l(_):Ho(x)-t}function d(v,y){const x=e[v]-i.get(),_=u(x,y);return{index:v,distance:_}}function f(v,y){const x=i.get()+v,{index:_,distance:w}=c(x),S=!n&&s(x);if(!y||S)return{index:_,distance:v};const M=e[_]-w,I=v+u(M,0);return{index:_,distance:I}}return{byDistance:f,byIndex:d,shortcut:u}}function $fe(n,e,t,r,i,s,o){function a(d){const f=d.distance,g=d.index!==e.get();s.add(f),f&&(r.duration()?n.start():(n.update(),n.render(1),n.update())),g&&(t.set(e.get()),e.set(d.index),o.emit("select"))}function l(d,f){const g=i.byDistance(d,f);a(g)}function c(d,f){const g=e.clone().set(d),v=i.byIndex(g.get(),f);a(v)}return{distance:l,index:c}}function qfe(n,e,t,r,i,s,o,a){const l={passive:!0,capture:!0};let c=0;function u(g){if(!a)return;function v(y){if(new Date().getTime()-c>10)return;o.emit("slideFocusStart"),n.scrollLeft=0;const w=t.findIndex(S=>S.includes(y));WI(w)&&(i.useDuration(0),r.index(w,0),o.emit("slideFocus"))}s.add(document,"keydown",d,!1),e.forEach((y,x)=>{s.add(y,"focus",_=>{(Fb(a)||a(g,_))&&v(x)},l)})}function d(g){g.code==="Tab"&&(c=new Date().getTime())}return{init:u}}function Dg(n){let e=n;function t(){return e}function r(l){e=o(l)}function i(l){e+=o(l)}function s(l){e-=o(l)}function o(l){return WI(l)?l:l.get()}return{get:t,set:r,add:i,subtract:s}}function QH(n,e){const t=n.scroll==="x"?o:a,r=e.style;let i=null,s=!1;function o(f){return`translate3d(${f}px,0px,0px)`}function a(f){return`translate3d(0px,${f}px,0px)`}function l(f){if(s)return;const g=Cfe(n.direction(f));g!==i&&(r.transform=t(g),i=g)}function c(f){s=!f}function u(){s||(r.transform="",e.getAttribute("style")||e.removeAttribute("style"))}return{clear:u,to:l,toggleActive:c}}function Kfe(n,e,t,r,i,s,o,a,l){const u=Yy(i),d=Yy(i).reverse(),f=_().concat(w());function g(P,T){return P.reduce((C,k)=>C-i[k],T)}function v(P,T){return P.reduce((C,k)=>g(C,T)>0?C.concat([k]):C,[])}function y(P){return s.map((T,C)=>({start:T-r[C]+.5+P,end:T+e-.5+P}))}function x(P,T,C){const k=y(T);return P.map(O=>{const U=C?0:-t,V=C?t:0,B=C?"end":"start",Z=k[O][B];return{index:O,loopPoint:Z,slideLocation:Dg(-1),translate:QH(n,l[O]),target:()=>a.get()>Z?U:V}})}function _(){const P=o[0],T=v(d,P);return x(T,t,!1)}function w(){const P=e-o[0]-1,T=v(u,P);return x(T,-t,!0)}function S(){return f.every(({index:P})=>{const T=u.filter(C=>C!==P);return g(T,e)<=.1})}function M(){f.forEach(P=>{const{target:T,translate:C,slideLocation:k}=P,O=T();O!==k.get()&&(C.to(O),k.set(O))})}function I(){f.forEach(P=>P.translate.clear())}return{canLoop:S,clear:I,loop:M,loopPoints:f}}function Yfe(n,e,t){let r,i=!1;function s(l){if(!t)return;function c(u){for(const d of u)if(d.type==="childList"){l.reInit(),e.emit("slidesChanged");break}}r=new MutationObserver(u=>{i||(Fb(t)||t(l,u))&&c(u)}),r.observe(n,{childList:!0})}function o(){r&&r.disconnect(),i=!0}return{init:s,destroy:o}}function Xfe(n,e,t,r){const i={};let s=null,o=null,a,l=!1;function c(){a=new IntersectionObserver(v=>{l||(v.forEach(y=>{const x=e.indexOf(y.target);i[x]=y}),s=null,o=null,t.emit("slidesInView"))},{root:n.parentElement,threshold:r}),e.forEach(v=>a.observe(v))}function u(){a&&a.disconnect(),l=!0}function d(v){return Xy(i).reduce((y,x)=>{const _=parseInt(x),{isIntersecting:w}=i[_];return(v&&w||!v&&!w)&&y.push(_),y},[])}function f(v=!0){if(v&&s)return s;if(!v&&o)return o;const y=d(v);return v&&(s=y),v||(o=y),y}return{init:c,destroy:u,get:f}}function Qfe(n,e,t,r,i,s){const{measureSize:o,startEdge:a,endEdge:l}=n,c=t[0]&&i,u=v(),d=y(),f=t.map(o),g=x();function v(){if(!c)return 0;const w=t[0];return Jn(e[a]-w[a])}function y(){if(!c)return 0;const w=s.getComputedStyle(Ho(r));return parseFloat(w.getPropertyValue(`margin-${l}`))}function x(){return t.map((w,S,M)=>{const I=!S,L=$I(M,S);return I?f[S]+u:L?f[S]+d:M[S+1][a]-w[a]}).map(Jn)}return{slideSizes:f,slideSizesWithGaps:g,startGap:u,endGap:d}}function Jfe(n,e,t,r,i,s,o,a,l){const{startEdge:c,endEdge:u,direction:d}=n,f=WI(t);function g(_,w){return Yy(_).filter(S=>S%w===0).map(S=>_.slice(S,S+w))}function v(_){return _.length?Yy(_).reduce((w,S,M)=>{const I=Ho(w)||0,L=I===0,P=S===qv(_),T=i[c]-s[I][c],C=i[c]-s[S][u],k=!r&&L?d(o):0,O=!r&&P?d(a):0,U=Jn(C-O-(T+k));return M&&U>e+l&&w.push(S),P&&w.push(_.length),w},[]).map((w,S,M)=>{const I=Math.max(M[S-1]||0);return _.slice(I,w)}):[]}function y(_){return f?g(_,t):v(_)}return{groupSlides:y}}function Zfe(n,e,t,r,i,s,o){const{align:a,axis:l,direction:c,startIndex:u,loop:d,duration:f,dragFree:g,dragThreshold:v,inViewThreshold:y,slidesToScroll:x,skipSnaps:_,containScroll:w,watchResize:S,watchSlides:M,watchDrag:I,watchFocus:L}=s,P=2,T=Dfe(),C=T.measure(e),k=t.map(T.measure),O=Rfe(l,c),U=O.measureSize(C),V=Lfe(U),B=Pfe(a,U),Z=!d&&!!w,ne=d||!!w,{slideSizes:oe,slideSizesWithGaps:z,startGap:G,endGap:q}=Qfe(O,C,k,t,ne,i),se=Jfe(O,U,x,d,C,k,G,q,P),{snaps:J,snapsAligned:he}=Hfe(O,B,C,k,se),_e=-Ho(J)+Ho(z),{snapsContained:re,scrollContainLimit:Y}=Vfe(U,_e,he,w,P),ae=Z?re:he,{limit:Se}=Ufe(_e,ae,d),Re=XH(qv(ae),u,d),Ae=Re.clone(),Te=Yy(t),te=({dragHandler:Ce,scrollBody:ct,scrollBounds:Ye,options:{loop:ht}})=>{ht||Ye.constrain(Ce.pointerDown()),ct.seek()},le=({scrollBody:Ce,translate:ct,location:Ye,offsetLocation:ht,previousLocation:dt,scrollLooper:at,slideLooper:ie,dragHandler:De,animation:Ke,eventHandler:ee,scrollBounds:ve,options:{loop:ke}},We)=>{const Qe=Ce.settled(),jt=!ve.shouldConstrain(),Xt=ke?Qe:Qe&&jt,on=Xt&&!De.pointerDown();on&&Ke.stop();const Wn=Ye.get()*We+dt.get()*(1-We);ht.set(Wn),ke&&(at.loop(Ce.direction()),ie.loop()),ct.to(ht.get()),on&&ee.emit("settle"),Xt||ee.emit("scroll")},we=Ife(r,i,()=>te($e),Ce=>le($e,Ce)),Be=.68,Fe=ae[Re.get()],Je=Dg(Fe),Ze=Dg(Fe),et=Dg(Fe),At=Dg(Fe),Ot=Ffe(Je,et,Ze,At,f,Be),X=Gfe(d,ae,_e,Se,At),W=$fe(we,Re,Ae,Ot,X,At,o),ye=Bfe(Se),Ve=Qy(),Oe=Xfe(e,t,o,y),{slideRegistry:je}=Wfe(Z,w,ae,Y,se,Te),rt=qfe(n,t,je,W,Ot,Ve,o,L),$e={ownerDocument:r,ownerWindow:i,eventHandler:o,containerRect:C,slideRects:k,animation:we,axis:O,dragHandler:kfe(O,n,r,i,At,Nfe(O,i),Je,we,W,Ot,X,Re,o,V,g,v,_,Be,I),eventStore:Ve,percentOfView:V,index:Re,indexPrevious:Ae,limit:Se,location:Je,offsetLocation:et,previousLocation:Ze,options:s,resizeHandler:Ofe(e,o,i,t,O,S,T),scrollBody:Ot,scrollBounds:jfe(Se,et,At,Ot,V),scrollLooper:zfe(_e,Se,et,[Je,et,Ze,At]),scrollProgress:ye,scrollSnapList:ae.map(ye.get),scrollSnaps:ae,scrollTarget:X,scrollTo:W,slideLooper:Kfe(O,U,_e,oe,z,J,ae,et,t),slideFocus:rt,slidesHandler:Yfe(e,o,M),slidesInView:Oe,slideIndexes:Te,slideRegistry:je,slidesToScroll:se,target:At,translate:QH(O,e)};return $e}function epe(){let n={},e;function t(c){e=c}function r(c){return n[c]||[]}function i(c){return r(c).forEach(u=>u(e,c)),l}function s(c,u){return n[c]=r(c).concat([u]),l}function o(c,u){return n[c]=r(c).filter(d=>d!==u),l}function a(){n={}}const l={init:t,emit:i,off:o,on:s,clear:a};return l}const tpe={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function npe(n){function e(s,o){return YH(s,o||{})}function t(s){const o=s.breakpoints||{},a=Xy(o).filter(l=>n.matchMedia(l).matches).map(l=>o[l]).reduce((l,c)=>e(l,c),{});return e(s,a)}function r(s){return s.map(o=>Xy(o.breakpoints||{})).reduce((o,a)=>o.concat(a),[]).map(n.matchMedia)}return{mergeOptions:e,optionsAtMedia:t,optionsMediaQueries:r}}function rpe(n){let e=[];function t(s,o){return e=o.filter(({options:a})=>n.optionsAtMedia(a).active!==!1),e.forEach(a=>a.init(s,n)),o.reduce((a,l)=>Object.assign(a,{[l.name]:l}),{})}function r(){e=e.filter(s=>s.destroy())}return{init:t,destroy:r}}function y1(n,e,t){const r=n.ownerDocument,i=r.defaultView,s=npe(i),o=rpe(s),a=Qy(),l=epe(),{mergeOptions:c,optionsAtMedia:u,optionsMediaQueries:d}=s,{on:f,off:g,emit:v}=l,y=O;let x=!1,_,w=c(tpe,y1.globalOptions),S=c(w),M=[],I,L,P;function T(){const{container:Te,slides:te}=S;L=(QA(Te)?n.querySelector(Te):Te)||n.children[0];const we=QA(te)?L.querySelectorAll(te):te;P=[].slice.call(we||L.children)}function C(Te){const te=Zfe(n,L,P,r,i,Te,l);if(Te.loop&&!te.slideLooper.canLoop()){const le=Object.assign({},Te,{loop:!1});return C(le)}return te}function k(Te,te){x||(w=c(w,Te),S=u(w),M=te||M,T(),_=C(S),d([w,...M.map(({options:le})=>le)]).forEach(le=>a.add(le,"change",O)),S.active&&(_.translate.to(_.location.get()),_.animation.init(),_.slidesInView.init(),_.slideFocus.init(Ae),_.eventHandler.init(Ae),_.resizeHandler.init(Ae),_.slidesHandler.init(Ae),_.options.loop&&_.slideLooper.loop(),L.offsetParent&&P.length&&_.dragHandler.init(Ae),I=o.init(Ae,M)))}function O(Te,te){const le=se();U(),k(c({startIndex:le},Te),te),l.emit("reInit")}function U(){_.dragHandler.destroy(),_.eventStore.clear(),_.translate.clear(),_.slideLooper.clear(),_.resizeHandler.destroy(),_.slidesHandler.destroy(),_.slidesInView.destroy(),_.animation.destroy(),o.destroy(),a.clear()}function V(){x||(x=!0,a.clear(),U(),l.emit("destroy"),l.clear())}function B(Te,te,le){!S.active||x||(_.scrollBody.useBaseFriction().useDuration(te===!0?0:S.duration),_.scrollTo.index(Te,le||0))}function Z(Te){const te=_.index.add(1).get();B(te,Te,-1)}function ne(Te){const te=_.index.add(-1).get();B(te,Te,1)}function oe(){return _.index.add(1).get()!==se()}function z(){return _.index.add(-1).get()!==se()}function G(){return _.scrollSnapList}function q(){return _.scrollProgress.get(_.offsetLocation.get())}function se(){return _.index.get()}function J(){return _.indexPrevious.get()}function he(){return _.slidesInView.get()}function _e(){return _.slidesInView.get(!1)}function re(){return I}function Y(){return _}function ae(){return n}function Se(){return L}function Re(){return P}const Ae={canScrollNext:oe,canScrollPrev:z,containerNode:Se,internalEngine:Y,destroy:V,off:g,on:f,emit:v,plugins:re,previousScrollSnap:J,reInit:y,rootNode:ae,scrollNext:Z,scrollPrev:ne,scrollProgress:q,scrollSnapList:G,scrollTo:B,selectedScrollSnap:se,slideNodes:Re,slidesInView:he,slidesNotInView:_e};return k(e,t),setTimeout(()=>l.emit("init"),0),Ae}y1.globalOptions=void 0;function qI(n={},e=[]){const t=R.useRef(n),r=R.useRef(e),[i,s]=R.useState(),[o,a]=R.useState(),l=R.useCallback(()=>{i&&i.reInit(t.current,r.current)},[i]);return R.useEffect(()=>{HI(t.current,n)||(t.current=n,l())},[n,l]),R.useEffect(()=>{Mfe(r.current,e)||(r.current=e,l())},[e,l]),R.useEffect(()=>{if(Tfe()&&o){y1.globalOptions=qI.globalOptions;const c=y1(o,t.current,r.current);return s(c),()=>c.destroy()}else s(void 0)},[o,s]),[a,i]}qI.globalOptions=void 0;const JH=R.createContext(null);function jb(){const n=R.useContext(JH);if(!n)throw new Error("useCarousel must be used within a <Carousel />");return n}const ZH=R.forwardRef(({orientation:n="horizontal",opts:e,setApi:t,plugins:r,className:i,children:s,...o},a)=>{const[l,c]=qI({...e,axis:n==="horizontal"?"x":"y"},r),[u,d]=R.useState(!1),[f,g]=R.useState(!1),v=R.useCallback(w=>{w&&(d(w.canScrollPrev()),g(w.canScrollNext()))},[]),y=R.useCallback(()=>{c==null||c.scrollPrev()},[c]),x=R.useCallback(()=>{c==null||c.scrollNext()},[c]),_=R.useCallback(w=>{w.key==="ArrowLeft"?(w.preventDefault(),y()):w.key==="ArrowRight"&&(w.preventDefault(),x())},[y,x]);return R.useEffect(()=>{!c||!t||t(c)},[c,t]),R.useEffect(()=>{if(c)return v(c),c.on("reInit",v),c.on("select",v),()=>{c==null||c.off("select",v)}},[c,v]),m.jsx(JH.Provider,{value:{carouselRef:l,api:c,opts:e,orientation:n||((e==null?void 0:e.axis)==="y"?"vertical":"horizontal"),scrollPrev:y,scrollNext:x,canScrollPrev:u,canScrollNext:f},children:m.jsx("div",{ref:a,onKeyDownCapture:_,className:gt("relative",i),role:"region","aria-roledescription":"carousel",...o,children:s})})});ZH.displayName="Carousel";const eW=R.forwardRef(({className:n,...e},t)=>{const{carouselRef:r,orientation:i}=jb();return m.jsx("div",{ref:r,className:"overflow-hidden",children:m.jsx("div",{ref:t,className:gt("flex",i==="horizontal"?"-ml-4":"-mt-4 flex-col",n),...e})})});eW.displayName="CarouselContent";const rw=R.forwardRef(({className:n,...e},t)=>{const{orientation:r}=jb();return m.jsx("div",{ref:t,role:"group","aria-roledescription":"slide",className:gt("min-w-0 shrink-0 grow-0 basis-full",r==="horizontal"?"pl-4":"pt-4",n),...e})});rw.displayName="CarouselItem";const tW=R.forwardRef(({className:n,variant:e="outline",size:t="icon",...r},i)=>{const{orientation:s,scrollPrev:o,canScrollPrev:a}=jb();return m.jsxs(vt,{ref:i,variant:e,size:t,className:gt("absolute  h-8 w-8 rounded-full",s==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",n),disabled:!a,onClick:o,...r,children:[m.jsx(PJ,{className:"h-4 w-4"}),m.jsx("span",{className:"sr-only",children:"Previous slide"})]})});tW.displayName="CarouselPrevious";const nW=R.forwardRef(({className:n,variant:e="outline",size:t="icon",...r},i)=>{const{orientation:s,scrollNext:o,canScrollNext:a}=jb();return m.jsxs(vt,{ref:i,variant:e,size:t,className:gt("absolute h-8 w-8 rounded-full",s==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",n),disabled:!a,onClick:o,...r,children:[m.jsx(Q5,{className:"h-4 w-4"}),m.jsx("span",{className:"sr-only",children:"Next slide"})]})});nW.displayName="CarouselNext";const ipe={active:!0,breakpoints:{},delay:4e3,jump:!1,playOnInit:!0,stopOnFocusIn:!0,stopOnInteraction:!0,stopOnMouseEnter:!1,stopOnLastSnap:!1,rootNode:null};function spe(n,e){const t=n.scrollSnapList();return typeof e=="number"?t.map(()=>e):e(t,n)}function ope(n,e){const t=n.rootNode();return e&&e(t)||t}function KI(n={}){let e,t,r,i,s=null,o=0,a=!1,l=!1,c=!1,u=!1;function d(B,Z){t=B;const{mergeOptions:ne,optionsAtMedia:oe}=Z,z=ne(ipe,KI.globalOptions),G=ne(z,n);if(e=oe(G),t.scrollSnapList().length<=1)return;u=e.jump,r=!1,i=spe(t,e.delay);const{eventStore:q,ownerDocument:se}=t.internalEngine(),J=!!t.internalEngine().options.watchDrag,he=ope(t,e.rootNode);q.add(se,"visibilitychange",_),J&&t.on("pointerDown",S),J&&!e.stopOnInteraction&&t.on("pointerUp",M),e.stopOnMouseEnter&&q.add(he,"mouseenter",I),e.stopOnMouseEnter&&!e.stopOnInteraction&&q.add(he,"mouseleave",L),e.stopOnFocusIn&&t.on("slideFocusStart",x),e.stopOnFocusIn&&!e.stopOnInteraction&&q.add(t.containerNode(),"focusout",y),e.playOnInit&&y()}function f(){t.off("pointerDown",S).off("pointerUp",M).off("slideFocusStart",x),x(),r=!0,a=!1}function g(){const{ownerWindow:B}=t.internalEngine();B.clearTimeout(o),o=B.setTimeout(O,i[t.selectedScrollSnap()]),s=new Date().getTime(),t.emit("autoplay:timerset")}function v(){const{ownerWindow:B}=t.internalEngine();B.clearTimeout(o),o=0,s=null,t.emit("autoplay:timerstopped")}function y(){if(!r){if(w()){c=!0;return}a||t.emit("autoplay:play"),g(),a=!0}}function x(){r||(a&&t.emit("autoplay:stop"),v(),a=!1)}function _(){if(w())return c=a,x();c&&y()}function w(){const{ownerDocument:B}=t.internalEngine();return B.visibilityState==="hidden"}function S(){l||x()}function M(){l||y()}function I(){l=!0,x()}function L(){l=!1,y()}function P(B){typeof B<"u"&&(u=B),y()}function T(){a&&x()}function C(){a&&y()}function k(){return a}function O(){const{index:B}=t.internalEngine(),Z=B.clone().add(1).get(),ne=t.scrollSnapList().length-1,oe=e.stopOnLastSnap&&Z===ne;if(t.canScrollNext()?t.scrollNext(u):t.scrollTo(0,u),t.emit("autoplay:select"),oe)return x();y()}function U(){if(!s)return null;const B=i[t.selectedScrollSnap()],Z=new Date().getTime()-s;return B-Z}return{name:"autoplay",options:n,init:d,destroy:f,play:P,stop:T,reset:C,isPlaying:k,timeUntilNext:U}}KI.globalOptions=void 0;const ape="/assets/backsound-BBcioZr7.mp3",rW=[{id:1,title:"Dasar-dasar Navigasi Darat",description:"Panduan lengkap membaca peta, kompas, dan teknik orientasi di alam bebas.",icon:"map-marked-alt",link:"https://www.mapalapendaki.com/2017/01/panduan-navigasi-darat.html"},{id:2,title:"Teknik Survival Hutan",description:"Tips dan teknik bertahan hidup di hutan untuk pendaki dan pecinta alam.",icon:"campground",link:"https://www.pendaki.id/2018/07/teknik-survival-hutan.html"},{id:3,title:"Pertolongan Pertama di Alam",description:"Langkah-langkah P3K untuk kecelakaan di alam terbuka.",icon:"first-aid",link:"https://www.kompasiana.com/pendakicerdas/pertolongan-pertama-di-alam-terbuka"},{id:4,title:"Manajemen Logistik Pendakian",description:"Cara mengatur logistik dan perbekalan untuk ekspedisi gunung.",icon:"box",link:"https://www.gunung.id/2019/03/manajemen-logistik-pendakian.html"},{id:5,title:"Teknik Membuat Shelter",description:"Tutorial membuat bivak dan shelter darurat di alam.",icon:"home",link:"https://www.pendaki.id/2017/09/cara-membuat-bivak.html"},{id:6,title:"Penggunaan GPS untuk Pendaki",description:"Cara menggunakan GPS dan aplikasi navigasi digital.",icon:"satellite",link:"https://www.mapalapendaki.com/2018/05/gps-untuk-pendaki.html"},{id:7,title:"Teknik Panjat Tebing Dasar",description:"Dasar-dasar teknik panjat tebing untuk pemula.",icon:"mountain",link:"https://www.kompasiana.com/tebing/teknik-panjat-tebing-dasar"},{id:8,title:"Etika Lingkungan Pecinta Alam",description:"Kode etik dan prinsip Leave No Trace untuk kegiatan outdoor.",icon:"leaf",link:"https://www.leavenotrace.or.id/7-prinsip-leave-no-trace/"},{id:9,title:"Teknik Rescue Air",description:"Teknik penyelamatan di sungai dan perairan terbuka.",icon:"life-ring",link:"https://www.pendaki.id/2018/08/teknik-rescue-air.html"},{id:10,title:"Manajemen Risiko Kegiatan Alam",description:"Identifikasi dan mitigasi risiko dalam kegiatan alam bebas.",icon:"exclamation-triangle",link:"https://www.gunung.id/2018/11/manajemen-risiko-pendakian.html"}];function lpe(){const n=new Date,e=n.getMonth()>0||n.getMonth()===0&&n.getDate()>26?n.getFullYear()+1:n.getFullYear();return new Date(e,0,26,0,0,0,0)}function cpe(){const e=new Date;return(e.getMonth()>0||e.getMonth()===0&&e.getDate()>26?e.getFullYear()+1:e.getFullYear())-2017}function upe({open:n,onClose:e}){const[t,r]=R.useState(null);return R.useEffect(()=>{function i(){const o=new Date,l=lpe().getTime()-o.getTime();if(l<=0)return{days:0,hours:0,minutes:0,seconds:0};const c=Math.floor(l/(1e3*60*60*24)),u=Math.floor(l/(1e3*60*60)%24),d=Math.floor(l/(1e3*60)%60),f=Math.floor(l/1e3%60);return{days:c,hours:u,minutes:d,seconds:f}}r(i());const s=setInterval(()=>{r(i())},1e3);return()=>clearInterval(s)},[]),n?m.jsxs(Qc,{open:n,onOpenChange:e,children:[m.jsxs(Ml,{className:"max-w-md w-full p-0 overflow-visible bg-gradient-to-br from-yellow-50 to-pink-100 border-4 border-yellow-300 relative shadow-2xl rounded-2xl animate-fadeIn",children:[m.jsx("div",{className:"pointer-events-none absolute inset-0 z-10",children:[...Array(30)].map((i,s)=>m.jsx("span",{className:"absolute rounded-full opacity-80 animate-confetti",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,width:`${8+Math.random()*12}px`,height:`${8+Math.random()*12}px`,background:`hsl(${Math.random()*360},90%,70%)`,animationDelay:`${Math.random()*2}s`}},s))}),m.jsxs("div",{className:"relative z-20 flex flex-col items-center justify-center py-10 px-6",children:[m.jsx("div",{className:"mb-4",children:m.jsxs("svg",{className:"mx-auto h-16 w-16 text-yellow-400 drop-shadow-lg animate-bounce",fill:"none",viewBox:"0 0 48 48",stroke:"currentColor",children:[m.jsx("circle",{cx:"24",cy:"24",r:"22",strokeWidth:"4",className:"stroke-yellow-300 fill-yellow-100"}),m.jsx("path",{d:"M16 32c2-2 6-2 8 0m8-8c-2 2-6 2-8 0",strokeWidth:"2",className:"stroke-pink-400"}),m.jsx("circle",{cx:"18",cy:"20",r:"2",className:"fill-pink-400"}),m.jsx("circle",{cx:"30",cy:"20",r:"2",className:"fill-pink-400"})]})}),m.jsxs("h2",{className:"text-2xl font-bold text-yellow-700 mb-2 drop-shadow",children:["Perayaan Ulang Tahun Mahapala Narotama ke-",cpe()]}),m.jsxs("p",{className:"text-lg text-gray-700 mb-4",children:["Menuju hari ulang tahun organisasi pada ",m.jsx("b",{children:"26 Januari"}),"!"]}),t?m.jsxs("div",{className:"mb-6 text-3xl font-mono flex justify-center gap-3 text-pink-600",children:[m.jsxs("span",{children:[t.days," ",m.jsx("span",{className:"text-xs font-normal text-gray-500",children:"hari"})]}),m.jsx("span",{children:":"}),m.jsxs("span",{children:[String(t.hours).padStart(2,"0"),m.jsx("span",{className:"text-xs font-normal text-gray-500",children:"j"})]}),m.jsx("span",{children:":"}),m.jsxs("span",{children:[String(t.minutes).padStart(2,"0"),m.jsx("span",{className:"text-xs font-normal text-gray-500",children:"m"})]}),m.jsx("span",{children:":"}),m.jsxs("span",{children:[String(t.seconds).padStart(2,"0"),m.jsx("span",{className:"text-xs font-normal text-gray-500",children:"d"})]})]}):m.jsx("p",{className:"mb-6",children:"Menghitung..."}),m.jsx(vt,{onClick:e,className:"mt-2 bg-pink-500 hover:bg-pink-600 text-white font-bold shadow-lg rounded-full px-6 py-2",children:"Tutup"})]})]}),m.jsx("style",{children:`
        @keyframes confetti {
          0% { transform: translateY(-40px) scale(1) rotate(0deg); opacity: 1; }
          100% { transform: translateY(400px) scale(0.7) rotate(360deg); opacity: 0.7; }
        }
        .animate-confetti {
          animation: confetti 2.5s linear infinite;
        }
        .animate-fadeIn {
          animation: fadeIn 0.7s cubic-bezier(.4,0,.2,1);
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `})]}):null}function dpe({text:n,speed:e=50}){const[t,r]=R.useState(""),i=R.useRef(null);return R.useEffect(()=>{r("");let s=0;return i.current&&clearInterval(i.current),i.current=setInterval(()=>{r(o=>s<n.length?o+n.charAt(s++):(i.current&&clearInterval(i.current),o))},e),()=>{i.current&&clearInterval(i.current)}},[n,e]),m.jsx("span",{children:t})}const iW=R.createContext({});function hpe(n){const e=R.useRef(null);return e.current===null&&(e.current=n()),e.current}const YI=R.createContext(null),sW=R.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function fpe(n=!0){const e=R.useContext(YI);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,s=R.useId();R.useEffect(()=>{n&&i(s)},[n]);const o=R.useCallback(()=>n&&r&&r(s),[s,r,n]);return!t&&r?[!1,o]:[!0]}const XI=typeof window<"u",ppe=XI?R.useLayoutEffect:R.useEffect,Ds=n=>n;let oW=Ds;function QI(n){let e;return()=>(e===void 0&&(e=n()),e)}const qp=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},yl=n=>n*1e3,vl=n=>n/1e3,mpe={useManualTiming:!1};function gpe(n){let e=new Set,t=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),n()),c(o)}const l={schedule:(c,u=!1,d=!1)=>{const g=d&&r?e:t;return u&&s.add(c),g.has(c)||g.add(c),c},cancel:c=>{t.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,t]=[t,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const Fx=["read","resolveKeyframes","update","preRender","render","postRender"],ype=40;function aW(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=Fx.reduce((_,w)=>(_[w]=gpe(s),_),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:f}=o,g=()=>{const _=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(_-i.timestamp,ype),1),i.timestamp=_,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),d.process(i),f.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(g))},v=()=>{t=!0,r=!0,i.isProcessing||n(g)};return{schedule:Fx.reduce((_,w)=>{const S=o[w];return _[w]=(M,I=!1,L=!1)=>(t||v(),S.schedule(M,I,L)),_},{}),cancel:_=>{for(let w=0;w<Fx.length;w++)o[Fx[w]].cancel(_)},state:i,steps:o}}const{schedule:Hn,cancel:su,state:Zr,steps:aT}=aW(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ds,!0),lW=R.createContext({strict:!1}),OO={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Kp={};for(const n in OO)Kp[n]={isEnabled:e=>OO[n].some(t=>!!e[t])};function vpe(n){for(const e in n)Kp[e]={...Kp[e],...n[e]}}const xpe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function v1(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||xpe.has(n)}let cW=n=>!v1(n);function _pe(n){n&&(cW=e=>e.startsWith("on")?!v1(e):n(e))}try{_pe(require("@emotion/is-prop-valid").default)}catch{}function wpe(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(cW(i)||t===!0&&v1(i)||!e&&!v1(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function bpe(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,i)=>i==="create"?n:(e.has(i)||e.set(i,n(i)),e.get(i))})}const Vb=R.createContext({});function Jy(n){return typeof n=="string"||Array.isArray(n)}function Ub(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const JI=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ZI=["initial",...JI];function zb(n){return Ub(n.animate)||ZI.some(e=>Jy(n[e]))}function uW(n){return!!(zb(n)||n.variants)}function Spe(n,e){if(zb(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Jy(t)?t:void 0,animate:Jy(r)?r:void 0}}return n.inherit!==!1?e:{}}function Epe(n){const{initial:e,animate:t}=Spe(n,R.useContext(Vb));return R.useMemo(()=>({initial:e,animate:t}),[FO(e),FO(t)])}function FO(n){return Array.isArray(n)?n.join(" "):n}const Tpe=Symbol.for("motionComponentSymbol");function Ff(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function Mpe(n,e,t){return R.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Ff(t)&&(t.current=r))},[e])}const eR=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Ape="framerAppearId",dW="data-"+eR(Ape),{schedule:tR}=aW(queueMicrotask,!1),hW=R.createContext({});function Cpe(n,e,t,r,i){var s,o;const{visualElement:a}=R.useContext(Vb),l=R.useContext(lW),c=R.useContext(YI),u=R.useContext(sW).reducedMotion,d=R.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=d.current,g=R.useContext(hW);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&Ppe(d.current,t,i,g);const v=R.useRef(!1);R.useInsertionEffect(()=>{f&&v.current&&f.update(t,c)});const y=t[dW],x=R.useRef(!!y&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,y))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,y)));return ppe(()=>{f&&(v.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),tR.render(f.render),x.current&&f.animationState&&f.animationState.animateChanges())}),R.useEffect(()=>{f&&(!x.current&&f.animationState&&f.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)===null||_===void 0||_.call(window,y)}),x.current=!1))}),f}function Ppe(n,e,t,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:fW(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Ff(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function fW(n){if(n)return n.options.allowProjection!==!1?n.projection:fW(n.parent)}function Ipe({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){var s,o;n&&vpe(n);function a(c,u){let d;const f={...R.useContext(sW),...c,layoutId:Rpe(c)},{isStatic:g}=f,v=Epe(c),y=r(c,g);if(!g&&XI){kpe();const x=Npe(f);d=x.MeasureLayout,v.visualElement=Cpe(i,y,f,e,x.ProjectionNode)}return m.jsxs(Vb.Provider,{value:v,children:[d&&v.visualElement?m.jsx(d,{visualElement:v.visualElement,...f}):null,t(i,c,Mpe(y,v.visualElement,u),y,g,v.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=R.forwardRef(a);return l[Tpe]=i,l}function Rpe({layoutId:n}){const e=R.useContext(iW).id;return e&&n!==void 0?e+"-"+n:n}function kpe(n,e){R.useContext(lW).strict}function Npe(n){const{drag:e,layout:t}=Kp;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Dpe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function nR(n){return typeof n!="string"||n.includes("-")?!1:!!(Dpe.indexOf(n)>-1||/[A-Z]/u.test(n))}function jO(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function rR(n,e,t,r){if(typeof e=="function"){const[i,s]=jO(r);e=e(t!==void 0?t:n.custom,i,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,s]=jO(r);e=e(t!==void 0?t:n.custom,i,s)}return e}const ZA=n=>Array.isArray(n),Lpe=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),Ope=n=>ZA(n)?n[n.length-1]||0:n,Ni=n=>!!(n&&n.getVelocity);function iw(n){const e=Ni(n)?n.get():n;return Lpe(e)?e.toValue():e}function Fpe({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,i,s){const o={latestValues:jpe(r,i,s,n),renderState:e()};return t&&(o.onMount=a=>t({props:r,current:a,...o}),o.onUpdate=a=>t(a)),o}const pW=n=>(e,t)=>{const r=R.useContext(Vb),i=R.useContext(YI),s=()=>Fpe(n,e,r,i);return t?s():hpe(s)};function jpe(n,e,t,r){const i={},s=r(n,{});for(const f in s)i[f]=iw(s[f]);let{initial:o,animate:a}=n;const l=zb(n),c=uW(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=t?t.initial===!1:!1;u=u||o===!1;const d=u?a:o;if(d&&typeof d!="boolean"&&!Ub(d)){const f=Array.isArray(d)?d:[d];for(let g=0;g<f.length;g++){const v=rR(n,f[g]);if(v){const{transitionEnd:y,transition:x,..._}=v;for(const w in _){let S=_[w];if(Array.isArray(S)){const M=u?S.length-1:0;S=S[M]}S!==null&&(i[w]=S)}for(const w in y)i[w]=y[w]}}}return i}const mm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],mh=new Set(mm),mW=n=>e=>typeof e=="string"&&e.startsWith(n),gW=mW("--"),Vpe=mW("var(--"),iR=n=>Vpe(n)?Upe.test(n.split("/*")[0].trim()):!1,Upe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,yW=(n,e)=>e&&typeof n=="number"?e.transform(n):n,kl=(n,e,t)=>t>e?e:t<n?n:t,gm={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Zy={...gm,transform:n=>kl(0,1,n)},jx={...gm,default:1},Kv=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),cc=Kv("deg"),Ca=Kv("%"),bt=Kv("px"),zpe=Kv("vh"),Bpe=Kv("vw"),VO={...Ca,parse:n=>Ca.parse(n)/100,transform:n=>Ca.transform(n*100)},Hpe={borderWidth:bt,borderTopWidth:bt,borderRightWidth:bt,borderBottomWidth:bt,borderLeftWidth:bt,borderRadius:bt,radius:bt,borderTopLeftRadius:bt,borderTopRightRadius:bt,borderBottomRightRadius:bt,borderBottomLeftRadius:bt,width:bt,maxWidth:bt,height:bt,maxHeight:bt,top:bt,right:bt,bottom:bt,left:bt,padding:bt,paddingTop:bt,paddingRight:bt,paddingBottom:bt,paddingLeft:bt,margin:bt,marginTop:bt,marginRight:bt,marginBottom:bt,marginLeft:bt,backgroundPositionX:bt,backgroundPositionY:bt},Wpe={rotate:cc,rotateX:cc,rotateY:cc,rotateZ:cc,scale:jx,scaleX:jx,scaleY:jx,scaleZ:jx,skew:cc,skewX:cc,skewY:cc,distance:bt,translateX:bt,translateY:bt,translateZ:bt,x:bt,y:bt,z:bt,perspective:bt,transformPerspective:bt,opacity:Zy,originX:VO,originY:VO,originZ:bt},UO={...gm,transform:Math.round},sR={...Hpe,...Wpe,zIndex:UO,size:bt,fillOpacity:Zy,strokeOpacity:Zy,numOctaves:UO},Gpe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$pe=mm.length;function qpe(n,e,t){let r="",i=!0;for(let s=0;s<$pe;s++){const o=mm[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const c=yW(a,sR[o]);if(!l){i=!1;const u=Gpe[o]||o;r+=`${u}(${c}) `}t&&(e[o]=c)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function oR(n,e,t){const{style:r,vars:i,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(mh.has(l)){o=!0;continue}else if(gW(l)){i[l]=c;continue}else{const u=yW(c,sR[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||t?r.transform=qpe(e,n.transform,t):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const Kpe={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ype={offset:"strokeDashoffset",array:"strokeDasharray"};function Xpe(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?Kpe:Ype;n[s.offset]=bt.transform(-r);const o=bt.transform(e),a=bt.transform(t);n[s.array]=`${o} ${a}`}function zO(n,e,t){return typeof n=="string"?n:bt.transform(e+t*n)}function Qpe(n,e,t){const r=zO(e,n.x,n.width),i=zO(t,n.y,n.height);return`${r} ${i}`}function aR(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d){if(oR(n,c,d),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:f,style:g,dimensions:v}=n;f.transform&&(v&&(g.transform=f.transform),delete f.transform),v&&(i!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=Qpe(v,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),t!==void 0&&(f.y=t),r!==void 0&&(f.scale=r),o!==void 0&&Xpe(f,o,a,l,!1)}const lR=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),vW=()=>({...lR(),attrs:{}}),cR=n=>typeof n=="string"&&n.toLowerCase()==="svg";function xW(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const _W=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function wW(n,e,t,r){xW(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(_W.has(i)?i:eR(i),e.attrs[i])}const x1={};function Jpe(n){Object.assign(x1,n)}function bW(n,{layout:e,layoutId:t}){return mh.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!x1[n]||n==="opacity")}function uR(n,e,t){var r;const{style:i}=n,s={};for(const o in i)(Ni(i[o])||e.style&&Ni(e.style[o])||bW(o,n)||((r=t==null?void 0:t.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function SW(n,e,t){const r=uR(n,e,t);for(const i in n)if(Ni(n[i])||Ni(e[i])){const s=mm.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}function Zpe(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const BO=["x","y","width","height","cx","cy","r"],eme={useVisualState:pW({scrapeMotionValuesFromProps:SW,createRenderState:vW,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:i})=>{if(!t)return;let s=!!n.drag;if(!s){for(const a in i)if(mh.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<BO.length;a++){const l=BO[a];n[l]!==e[l]&&(o=!0)}o&&Hn.read(()=>{Zpe(t,r),Hn.render(()=>{aR(r,i,cR(t.tagName),n.transformTemplate),wW(t,r)})})}})},tme={useVisualState:pW({scrapeMotionValuesFromProps:uR,createRenderState:lR})};function EW(n,e,t){for(const r in e)!Ni(e[r])&&!bW(r,t)&&(n[r]=e[r])}function nme({transformTemplate:n},e){return R.useMemo(()=>{const t=lR();return oR(t,e,n),Object.assign({},t.vars,t.style)},[e])}function rme(n,e){const t=n.style||{},r={};return EW(r,t,n),Object.assign(r,nme(n,e)),r}function ime(n,e){const t={},r=rme(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}function sme(n,e,t,r){const i=R.useMemo(()=>{const s=vW();return aR(s,e,cR(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};EW(s,n.style,n),i.style={...s,...i.style}}return i}function ome(n=!1){return(t,r,i,{latestValues:s},o)=>{const l=(nR(t)?sme:ime)(r,s,o,t),c=wpe(r,typeof t=="string",n),u=t!==R.Fragment?{...c,...l,ref:i}:{},{children:d}=r,f=R.useMemo(()=>Ni(d)?d.get():d,[d]);return R.createElement(t,{...u,children:f})}}function ame(n,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...nR(r)?eme:tme,preloadedFeatures:n,useRender:ome(i),createVisualElement:e,Component:r};return Ipe(o)}}function TW(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function Bb(n,e,t){const r=n.getProps();return rR(r,e,t!==void 0?t:r.custom,n)}const lme=QI(()=>window.ScrollTimeline!==void 0);class cme{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(i=>{if(lme()&&i.attachTimeline)return i.attachTimeline(e);if(typeof t=="function")return t(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class ume extends cme{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function dR(n,e){return n?n[e]||n.default||n:void 0}const eC=2e4;function MW(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<eC;)e+=t,r=n.next(e);return e>=eC?1/0:e}function hR(n){return typeof n=="function"}function HO(n,e){n.timeline=e,n.onfinish=null}const fR=n=>Array.isArray(n)&&typeof n[0]=="number",dme={linearEasing:void 0};function hme(n,e){const t=QI(n);return()=>{var r;return(r=dme[e])!==null&&r!==void 0?r:t()}}const _1=hme(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),AW=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)r+=n(qp(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function CW(n){return!!(typeof n=="function"&&_1()||!n||typeof n=="string"&&(n in tC||_1())||fR(n)||Array.isArray(n)&&n.every(CW))}const Lg=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,tC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Lg([0,.65,.55,1]),circOut:Lg([.55,0,1,.45]),backIn:Lg([.31,.01,.66,-.59]),backOut:Lg([.33,1.53,.69,.99])};function PW(n,e){if(n)return typeof n=="function"&&_1()?AW(n,e):fR(n)?Lg(n):Array.isArray(n)?n.map(t=>PW(t,e)||tC.easeOut):tC[n]}const Mo={x:!1,y:!1};function IW(){return Mo.x||Mo.y}function fme(n,e,t){var r;if(n instanceof Element)return[n];if(typeof n=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function RW(n,e){const t=fme(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function WO(n){return e=>{e.pointerType==="touch"||IW()||n(e)}}function pme(n,e,t={}){const[r,i,s]=RW(n,t),o=WO(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=WO(d=>{c(d),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const kW=(n,e)=>e?n===e?!0:kW(n,e.parentElement):!1,pR=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,mme=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function gme(n){return mme.has(n.tagName)||n.tabIndex!==-1}const Og=new WeakSet;function GO(n){return e=>{e.key==="Enter"&&n(e)}}function lT(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const yme=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=GO(()=>{if(Og.has(t))return;lT(t,"down");const i=GO(()=>{lT(t,"up")}),s=()=>lT(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function $O(n){return pR(n)&&!IW()}function vme(n,e,t={}){const[r,i,s]=RW(n,t),o=a=>{const l=a.currentTarget;if(!$O(a)||Og.has(l))return;Og.add(l);const c=e(a),u=(g,v)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!$O(g)||!Og.has(l))&&(Og.delete(l),typeof c=="function"&&c(g,{success:v}))},d=g=>{u(g,t.useGlobalTarget||kW(l,g.target))},f=g=>{u(g,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{!gme(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>yme(c,i),i)}),s}function xme(n){return n==="x"||n==="y"?Mo[n]?null:(Mo[n]=!0,()=>{Mo[n]=!1}):Mo.x||Mo.y?null:(Mo.x=Mo.y=!0,()=>{Mo.x=Mo.y=!1})}const NW=new Set(["width","height","top","left","right","bottom",...mm]);let sw;function _me(){sw=void 0}const Pa={now:()=>(sw===void 0&&Pa.set(Zr.isProcessing||mpe.useManualTiming?Zr.timestamp:performance.now()),sw),set:n=>{sw=n,queueMicrotask(_me)}};function mR(n,e){n.indexOf(e)===-1&&n.push(e)}function gR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class yR{constructor(){this.subscriptions=[]}add(e){return mR(this.subscriptions,e),()=>gR(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function DW(n,e){return e?n*(1e3/e):0}const qO=30,wme=n=>!isNaN(parseFloat(n));class bme{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Pa.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Pa.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=wme(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new yR);const r=this.events[e].add(t);return e==="change"?()=>{r(),Hn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Pa.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>qO)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,qO);return DW(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ev(n,e){return new bme(n,e)}function Sme(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,ev(t))}function Eme(n,e){const t=Bb(n,e);let{transitionEnd:r={},transition:i={},...s}=t||{};s={...s,...r};for(const o in s){const a=Ope(s[o]);Sme(n,o,a)}}function Tme(n){return!!(Ni(n)&&n.add)}function nC(n,e){const t=n.getValue("willChange");if(Tme(t))return t.add(e)}function LW(n){return n.props[dW]}const OW=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,Mme=1e-7,Ame=12;function Cme(n,e,t,r,i){let s,o,a=0;do o=e+(t-e)/2,s=OW(o,r,i)-n,s>0?t=o:e=o;while(Math.abs(s)>Mme&&++a<Ame);return o}function Yv(n,e,t,r){if(n===e&&t===r)return Ds;const i=s=>Cme(s,0,1,n,t);return s=>s===0||s===1?s:OW(i(s),e,r)}const FW=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,jW=n=>e=>1-n(1-e),VW=Yv(.33,1.53,.69,.99),vR=jW(VW),UW=FW(vR),zW=n=>(n*=2)<1?.5*vR(n):.5*(2-Math.pow(2,-10*(n-1))),xR=n=>1-Math.sin(Math.acos(n)),BW=jW(xR),HW=FW(xR),WW=n=>/^0[^.\s]+$/u.test(n);function Pme(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||WW(n):!0}const sy=n=>Math.round(n*1e5)/1e5,_R=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Ime(n){return n==null}const Rme=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,wR=(n,e)=>t=>!!(typeof t=="string"&&Rme.test(t)&&t.startsWith(n)||e&&!Ime(t)&&Object.prototype.hasOwnProperty.call(t,e)),GW=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(_R);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},kme=n=>kl(0,255,n),cT={...gm,transform:n=>Math.round(kme(n))},hd={test:wR("rgb","red"),parse:GW("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+cT.transform(n)+", "+cT.transform(e)+", "+cT.transform(t)+", "+sy(Zy.transform(r))+")"};function Nme(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const rC={test:wR("#"),parse:Nme,transform:hd.transform},jf={test:wR("hsl","hue"),parse:GW("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Ca.transform(sy(e))+", "+Ca.transform(sy(t))+", "+sy(Zy.transform(r))+")"},Ai={test:n=>hd.test(n)||rC.test(n)||jf.test(n),parse:n=>hd.test(n)?hd.parse(n):jf.test(n)?jf.parse(n):rC.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?hd.transform(n):jf.transform(n)},Dme=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Lme(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(_R))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(Dme))===null||t===void 0?void 0:t.length)||0)>0}const $W="number",qW="color",Ome="var",Fme="var(",KO="${}",jme=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function tv(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(jme,l=>(Ai.test(l)?(r.color.push(s),i.push(qW),t.push(Ai.parse(l))):l.startsWith(Fme)?(r.var.push(s),i.push(Ome),t.push(l)):(r.number.push(s),i.push($W),t.push(parseFloat(l))),++s,KO)).split(KO);return{values:t,split:a,indexes:r,types:i}}function KW(n){return tv(n).values}function YW(n){const{split:e,types:t}=tv(n),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=t[o];a===$W?s+=sy(i[o]):a===qW?s+=Ai.transform(i[o]):s+=i[o]}return s}}const Vme=n=>typeof n=="number"?0:n;function Ume(n){const e=KW(n);return YW(n)(e.map(Vme))}const ou={test:Lme,parse:KW,createTransformer:YW,getAnimatableNone:Ume},zme=new Set(["brightness","contrast","saturate","opacity"]);function Bme(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(_R)||[];if(!r)return n;const i=t.replace(r,"");let s=zme.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const Hme=/\b([a-z-]*)\(.*?\)/gu,iC={...ou,getAnimatableNone:n=>{const e=n.match(Hme);return e?e.map(Bme).join(" "):n}},Wme={...sR,color:Ai,backgroundColor:Ai,outlineColor:Ai,fill:Ai,stroke:Ai,borderColor:Ai,borderTopColor:Ai,borderRightColor:Ai,borderBottomColor:Ai,borderLeftColor:Ai,filter:iC,WebkitFilter:iC},bR=n=>Wme[n];function XW(n,e){let t=bR(n);return t!==iC&&(t=ou),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Gme=new Set(["auto","none","0"]);function $me(n,e,t){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!Gme.has(s)&&tv(s).values.length&&(i=n[r]),r++}if(i&&t)for(const s of e)n[s]=XW(t,i)}const YO=n=>n===gm||n===bt,XO=(n,e)=>parseFloat(n.split(", ")[e]),QO=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return XO(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?XO(s[1],n):0}},qme=new Set(["x","y","z"]),Kme=mm.filter(n=>!qme.has(n));function Yme(n){const e=[];return Kme.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Yp={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:QO(4,13),y:QO(5,14)};Yp.translateX=Yp.x;Yp.translateY=Yp.y;const Pd=new Set;let sC=!1,oC=!1;function QW(){if(oC){const n=Array.from(Pd).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=Yme(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}oC=!1,sC=!1,Pd.forEach(n=>n.complete()),Pd.clear()}function JW(){Pd.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(oC=!0)})}function Xme(){JW(),QW()}class SR{constructor(e,t,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Pd.add(this),sC||(sC=!0,Hn.read(JW),Hn.resolveKeyframes(QW))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const l=r.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Pd.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Pd.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const ZW=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),Qme=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Jme(n){const e=Qme.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function e9(n,e,t=1){const[r,i]=Jme(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return ZW(o)?parseFloat(o):o}return iR(i)?e9(i,e,t+1):i}const t9=n=>e=>e.test(n),Zme={test:n=>n==="auto",parse:n=>n},n9=[gm,bt,Ca,cc,Bpe,zpe,Zme],JO=n=>n9.find(t9(n));class r9 extends SR{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),iR(c))){const u=e9(c,t.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!NW.has(r)||e.length!==2)return;const[i,s]=e,o=JO(i),a=JO(s);if(o!==a)if(YO(o)&&YO(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)Pme(e[i])&&r.push(i);r.length&&$me(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yp[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Yp[r](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const ZO=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ou.test(n)||n==="0")&&!n.startsWith("url("));function ege(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function tge(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=ZO(i,e),a=ZO(s,e);return!o||!a?!1:ege(n)||(t==="spring"||hR(t))&&r}const nge=n=>n!==null;function Hb(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(nge),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const rge=40;class i9{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Pa.now(),this.options={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>rge?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Xme(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Pa.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!tge(e,r,i,s))if(o)this.options.duration=0;else{l&&l(Hb(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,t);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...u},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Zn=(n,e,t)=>n+(e-n)*t;function uT(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function ige({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,o=0;if(!e)i=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;i=uT(l,a,n+1/3),s=uT(l,a,n),o=uT(l,a,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function w1(n,e){return t=>t>0?e:n}const dT=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},sge=[rC,hd,jf],oge=n=>sge.find(e=>e.test(n));function e4(n){const e=oge(n);if(!e)return!1;let t=e.parse(n);return e===jf&&(t=ige(t)),t}const t4=(n,e)=>{const t=e4(n),r=e4(e);if(!t||!r)return w1(n,e);const i={...t};return s=>(i.red=dT(t.red,r.red,s),i.green=dT(t.green,r.green,s),i.blue=dT(t.blue,r.blue,s),i.alpha=Zn(t.alpha,r.alpha,s),hd.transform(i))},age=(n,e)=>t=>e(n(t)),Xv=(...n)=>n.reduce(age),aC=new Set(["none","hidden"]);function lge(n,e){return aC.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function cge(n,e){return t=>Zn(n,e,t)}function ER(n){return typeof n=="number"?cge:typeof n=="string"?iR(n)?w1:Ai.test(n)?t4:hge:Array.isArray(n)?s9:typeof n=="object"?Ai.test(n)?t4:uge:w1}function s9(n,e){const t=[...n],r=t.length,i=n.map((s,o)=>ER(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)t[o]=i[o](s);return t}}function uge(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=ER(n[i])(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}}function dge(n,e){var t;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][i[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;r[s]=l,i[o]++}return r}const hge=(n,e)=>{const t=ou.createTransformer(e),r=tv(n),i=tv(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?aC.has(n)&&!i.values.length||aC.has(e)&&!r.values.length?lge(n,e):Xv(s9(dge(r,i),i.values),t):w1(n,e)};function o9(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Zn(n,e,t):ER(n)(n,e)}const fge=5;function a9(n,e,t){const r=Math.max(e-fge,0);return DW(t-n(r),e-r)}const ur={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},n4=.001;function pge({duration:n=ur.duration,bounce:e=ur.bounce,velocity:t=ur.velocity,mass:r=ur.mass}){let i,s,o=1-e;o=kl(ur.minDamping,ur.maxDamping,o),n=kl(ur.minDuration,ur.maxDuration,vl(n)),o<1?(i=c=>{const u=c*o,d=u*n,f=u-t,g=lC(c,o),v=Math.exp(-d);return n4-f/g*v},s=c=>{const d=c*o*n,f=d*t+t,g=Math.pow(o,2)*Math.pow(c,2)*n,v=Math.exp(-d),y=lC(Math.pow(c,2),o);return(-i(c)+n4>0?-1:1)*((f-g)*v)/y}):(i=c=>{const u=Math.exp(-c*n),d=(c-t)*n+1;return-.001+u*d},s=c=>{const u=Math.exp(-c*n),d=(t-c)*(n*n);return u*d});const a=5/n,l=gge(i,s,a);if(n=yl(n),isNaN(l))return{stiffness:ur.stiffness,damping:ur.damping,duration:n};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:n}}}const mge=12;function gge(n,e,t){let r=t;for(let i=1;i<mge;i++)r=r-n(r)/e(r);return r}function lC(n,e){return n*Math.sqrt(1-e*e)}const yge=["duration","bounce"],vge=["stiffness","damping","mass"];function r4(n,e){return e.some(t=>n[t]!==void 0)}function xge(n){let e={velocity:ur.velocity,stiffness:ur.stiffness,damping:ur.damping,mass:ur.mass,isResolvedFromDuration:!1,...n};if(!r4(n,vge)&&r4(n,yge))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,s=2*kl(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:ur.mass,stiffness:i,damping:s}}else{const t=pge(n);e={...e,...t,mass:ur.mass},e.isResolvedFromDuration=!0}return e}function l9(n=ur.visualDuration,e=ur.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:g}=xge({...t,velocity:-vl(t.velocity||0)}),v=f||0,y=c/(2*Math.sqrt(l*u)),x=o-s,_=vl(Math.sqrt(l/u)),w=Math.abs(x)<5;r||(r=w?ur.restSpeed.granular:ur.restSpeed.default),i||(i=w?ur.restDelta.granular:ur.restDelta.default);let S;if(y<1){const I=lC(_,y);S=L=>{const P=Math.exp(-y*_*L);return o-P*((v+y*_*x)/I*Math.sin(I*L)+x*Math.cos(I*L))}}else if(y===1)S=I=>o-Math.exp(-_*I)*(x+(v+_*x)*I);else{const I=_*Math.sqrt(y*y-1);S=L=>{const P=Math.exp(-y*_*L),T=Math.min(I*L,300);return o-P*((v+y*_*x)*Math.sinh(T)+I*x*Math.cosh(T))/I}}const M={calculatedDuration:g&&d||null,next:I=>{const L=S(I);if(g)a.done=I>=d;else{let P=0;y<1&&(P=I===0?yl(v):a9(S,I,L));const T=Math.abs(P)<=r,C=Math.abs(o-L)<=i;a.done=T&&C}return a.value=a.done?o:L,a},toString:()=>{const I=Math.min(MW(M),eC),L=AW(P=>M.next(I*P).value,I,30);return I+"ms "+L}};return M}function i4({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=n[0],f={done:!1,value:d},g=T=>a!==void 0&&T<a||l!==void 0&&T>l,v=T=>a===void 0?l:l===void 0||Math.abs(a-T)<Math.abs(l-T)?a:l;let y=t*e;const x=d+y,_=o===void 0?x:o(x);_!==x&&(y=_-d);const w=T=>-y*Math.exp(-T/r),S=T=>_+w(T),M=T=>{const C=w(T),k=S(T);f.done=Math.abs(C)<=c,f.value=f.done?_:k};let I,L;const P=T=>{g(f.value)&&(I=T,L=l9({keyframes:[f.value,v(f.value)],velocity:a9(S,T,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return P(0),{calculatedDuration:null,next:T=>{let C=!1;return!L&&I===void 0&&(C=!0,M(T),P(T)),I!==void 0&&T>=I?L.next(T-I):(!C&&M(T),f)}}}const _ge=Yv(.42,0,1,1),wge=Yv(0,0,.58,1),c9=Yv(.42,0,.58,1),bge=n=>Array.isArray(n)&&typeof n[0]!="number",Sge={linear:Ds,easeIn:_ge,easeInOut:c9,easeOut:wge,circIn:xR,circInOut:HW,circOut:BW,backIn:vR,backInOut:UW,backOut:VW,anticipate:zW},s4=n=>{if(fR(n)){oW(n.length===4);const[e,t,r,i]=n;return Yv(e,t,r,i)}else if(typeof n=="string")return Sge[n];return n};function Ege(n,e,t){const r=[],i=t||o9,s=n.length-1;for(let o=0;o<s;o++){let a=i(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ds:e;a=Xv(l,a)}r.push(a)}return r}function Tge(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(oW(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=Ege(e,r,i),l=a.length,c=u=>{if(o&&u<n[0])return e[0];let d=0;if(l>1)for(;d<n.length-2&&!(u<n[d+1]);d++);const f=qp(n[d],n[d+1],u);return a[d](f)};return t?u=>c(kl(n[0],n[s-1],u)):c}function Mge(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=qp(0,e,r);n.push(Zn(t,1,i))}}function Age(n){const e=[0];return Mge(e,n.length-1),e}function Cge(n,e){return n.map(t=>t*e)}function Pge(n,e){return n.map(()=>e||c9).splice(0,n.length-1)}function b1({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=bge(r)?r.map(s4):s4(r),s={done:!1,value:e[0]},o=Cge(t&&t.length===e.length?t:Age(e),n),a=Tge(o,e,{ease:Array.isArray(i)?i:Pge(e,i)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const Ige=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Hn.update(e,!0),stop:()=>su(e),now:()=>Zr.isProcessing?Zr.timestamp:Pa.now()}},Rge={decay:i4,inertia:i4,tween:b1,keyframes:b1,spring:l9},kge=n=>n/100;class TR extends i9{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||SR,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,t,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=hR(t)?t:Rge[t]||b1;let l,c;a!==b1&&typeof e[0]!="number"&&(l=Xv(kge,o9(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=MW(u));const{calculatedDuration:d}=u,f=d+i,g=f*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:g}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:f,repeat:g,repeatType:v,repeatDelay:y,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const _=this.currentTime-f*(this.speed>=0?1:-1),w=this.speed>=0?_<0:_>u;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let S=this.currentTime,M=s;if(g){const T=Math.min(this.currentTime,u)/d;let C=Math.floor(T),k=T%1;!k&&T>=1&&(k=1),k===1&&C--,C=Math.min(C,g+1),!!(C%2)&&(v==="reverse"?(k=1-k,y&&(k-=y/d)):v==="mirror"&&(M=o)),S=kl(0,1,k)*d}const I=w?{done:!1,value:l[0]}:M.next(S);a&&(I.value=a(I.value));let{done:L}=I;!w&&c!==null&&(L=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return P&&i!==void 0&&(I.value=Hb(l,this.options,i)),x&&x(I.value),P&&this.finish(),I}get duration(){const{resolved:e}=this;return e?vl(e.calculatedDuration):0}get time(){return vl(this.currentTime)}set time(e){e=yl(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=vl(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Ige,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Nge=new Set(["opacity","clipPath","filter","transform"]);function Dge(n,e,t,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:t};l&&(c.offset=l);const u=PW(a,i);return Array.isArray(u)&&(c.easing=u),n.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const Lge=QI(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),S1=10,Oge=2e4;function Fge(n){return hR(n.type)||n.type==="spring"||!CW(n.ease)}function jge(n,e){const t=new TR({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const i=[];let s=0;for(;!r.done&&s<Oge;)r=t.sample(s),i.push(r.value),s+=S1;return{times:void 0,keyframes:i,duration:s-S1,ease:"linear"}}const u9={anticipate:zW,backInOut:UW,circInOut:HW};function Vge(n){return n in u9}class o4 extends i9{constructor(e){super(e);const{name:t,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new r9(s,(o,a)=>this.onKeyframesResolved(o,a),t,r,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&_1()&&Vge(s)&&(s=u9[s]),Fge(this.options)){const{onComplete:d,onUpdate:f,motionValue:g,element:v,...y}=this.options,x=jge(e,y);e=x.keyframes,e.length===1&&(e[1]=e[0]),r=x.duration,i=x.times,s=x.ease,o="keyframes"}const u=Dge(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(HO(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:d}=this.options;a.set(Hb(e,this.options,t)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return vl(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return vl(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=yl(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Ds;const{animation:r}=t;HO(r,e)}return Ds}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:d,element:f,...g}=this.options,v=new TR({...g,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),y=yl(this.time);c.setWithVelocity(v.sample(y-S1).value,v.sample(y).value,S1)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return Lge()&&r&&Nge.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const Uge={type:"spring",stiffness:500,damping:25,restSpeed:10},zge=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Bge={type:"keyframes",duration:.8},Hge={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Wge=(n,{keyframes:e})=>e.length>2?Bge:mh.has(n)?n.startsWith("scale")?zge(e[1]):Uge:Hge;function Gge({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const MR=(n,e,t,r={},i,s)=>o=>{const a=dR(r,n)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-yl(l);let u={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:i};Gge(a)||(u={...u,...Wge(n,u)}),u.duration&&(u.duration=yl(u.duration)),u.repeatDelay&&(u.repeatDelay=yl(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const f=Hb(u.keyframes,a);if(f!==void 0)return Hn.update(()=>{u.onUpdate(f),u.onComplete()}),new ume([])}return!s&&o4.supports(u)?new o4(u):new TR(u)};function $ge({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function d9(n,e,{delay:t=0,transitionOverride:r,type:i}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=i&&n.animationState&&n.animationState.getState()[i];for(const d in l){const f=n.getValue(d,(s=n.latestValues[d])!==null&&s!==void 0?s:null),g=l[d];if(g===void 0||u&&$ge(u,d))continue;const v={delay:t,...dR(o||{},d)};let y=!1;if(window.MotionHandoffAnimation){const _=LW(n);if(_){const w=window.MotionHandoffAnimation(_,d,Hn);w!==null&&(v.startTime=w,y=!0)}}nC(n,d),f.start(MR(d,f,g,n.shouldReduceMotion&&NW.has(d)?{type:!1}:v,n,y));const x=f.animation;x&&c.push(x)}return a&&Promise.all(c).then(()=>{Hn.update(()=>{a&&Eme(n,a)})}),c}function cC(n,e,t={}){var r;const i=Bb(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const o=i?()=>Promise.all(d9(n,i,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=s;return qge(n,e,u+c,d,f,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(t.delay)])}function qge(n,e,t=0,r=0,i=1,s){const o=[],a=(n.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(n.variantChildren).sort(Kge).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(cC(c,e,{...s,delay:t+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Kge(n,e){return n.sortNodePosition(e)}function Yge(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>cC(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=cC(n,e,t);else{const i=typeof e=="function"?Bb(n,e,t.custom):e;r=Promise.all(d9(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const Xge=ZI.length;function h9(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?h9(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<Xge;t++){const r=ZI[t],i=n.props[r];(Jy(i)||i===!1)&&(e[r]=i)}return e}const Qge=[...JI].reverse(),Jge=JI.length;function Zge(n){return e=>Promise.all(e.map(({animation:t,options:r})=>Yge(n,t,r)))}function eye(n){let e=Zge(n),t=a4(),r=!0;const i=l=>(c,u)=>{var d;const f=Bb(n,u,l==="exit"?(d=n.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:g,transitionEnd:v,...y}=f;c={...c,...y,...v}}return c};function s(l){e=l(n)}function o(l){const{props:c}=n,u=h9(n.parent)||{},d=[],f=new Set;let g={},v=1/0;for(let x=0;x<Jge;x++){const _=Qge[x],w=t[_],S=c[_]!==void 0?c[_]:u[_],M=Jy(S),I=_===l?w.isActive:null;I===!1&&(v=x);let L=S===u[_]&&S!==c[_]&&M;if(L&&r&&n.manuallyAnimateOnMount&&(L=!1),w.protectedKeys={...g},!w.isActive&&I===null||!S&&!w.prevProp||Ub(S)||typeof S=="boolean")continue;const P=tye(w.prevProp,S);let T=P||_===l&&w.isActive&&!L&&M||x>v&&M,C=!1;const k=Array.isArray(S)?S:[S];let O=k.reduce(i(_),{});I===!1&&(O={});const{prevResolvedValues:U={}}=w,V={...U,...O},B=oe=>{T=!0,f.has(oe)&&(C=!0,f.delete(oe)),w.needsAnimating[oe]=!0;const z=n.getValue(oe);z&&(z.liveStyle=!1)};for(const oe in V){const z=O[oe],G=U[oe];if(g.hasOwnProperty(oe))continue;let q=!1;ZA(z)&&ZA(G)?q=!TW(z,G):q=z!==G,q?z!=null?B(oe):f.add(oe):z!==void 0&&f.has(oe)?B(oe):w.protectedKeys[oe]=!0}w.prevProp=S,w.prevResolvedValues=O,w.isActive&&(g={...g,...O}),r&&n.blockInitialAnimation&&(T=!1),T&&(!(L&&P)||C)&&d.push(...k.map(oe=>({animation:oe,options:{type:_}})))}if(f.size){const x={};f.forEach(_=>{const w=n.getBaseTarget(_),S=n.getValue(_);S&&(S.liveStyle=!0),x[_]=w??null}),d.push({animation:x})}let y=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(d):Promise.resolve()}function a(l,c){var u;if(t[l].isActive===c)return Promise.resolve();(u=n.variantChildren)===null||u===void 0||u.forEach(f=>{var g;return(g=f.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),t[l].isActive=c;const d=o(l);for(const f in t)t[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=a4(),r=!0}}}function tye(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!TW(e,n):!1}function zu(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function a4(){return{animate:zu(!0),whileInView:zu(),whileHover:zu(),whileTap:zu(),whileDrag:zu(),whileFocus:zu(),exit:zu()}}class gu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class nye extends gu{constructor(e){super(e),e.animationState||(e.animationState=eye(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ub(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let rye=0;class iye extends gu{constructor(){super(...arguments),this.id=rye++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const sye={animation:{Feature:nye},exit:{Feature:iye}};function nv(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function Qv(n){return{point:{x:n.pageX,y:n.pageY}}}const oye=n=>e=>pR(e)&&n(e,Qv(e));function oy(n,e,t,r){return nv(n,e,oye(t),r)}const l4=(n,e)=>Math.abs(n-e);function aye(n,e){const t=l4(n.x,e.x),r=l4(n.y,e.y);return Math.sqrt(t**2+r**2)}class f9{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=fT(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=aye(d.offset,{x:0,y:0})>=3;if(!f&&!g)return;const{point:v}=d,{timestamp:y}=Zr;this.history.push({...v,timestamp:y});const{onStart:x,onMove:_}=this.handlers;f||(x&&x(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=hT(f,this.transformPagePoint),Hn.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=fT(d.type==="pointercancel"?this.lastMoveEventInfo:hT(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(d,x),v&&v(d,x)},!pR(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const o=Qv(e),a=hT(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Zr;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=t;u&&u(e,fT(a,this.history)),this.removeListeners=Xv(oy(this.contextWindow,"pointermove",this.handlePointerMove),oy(this.contextWindow,"pointerup",this.handlePointerUp),oy(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),su(this.updatePoint)}}function hT(n,e){return e?{point:e(n.point)}:n}function c4(n,e){return{x:n.x-e.x,y:n.y-e.y}}function fT({point:n},e){return{point:n,delta:c4(n,p9(e)),offset:c4(n,lye(e)),velocity:cye(e,.1)}}function lye(n){return n[0]}function p9(n){return n[n.length-1]}function cye(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=p9(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>yl(e)));)t--;if(!r)return{x:0,y:0};const s=vl(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const m9=1e-4,uye=1-m9,dye=1+m9,g9=.01,hye=0-g9,fye=0+g9;function js(n){return n.max-n.min}function pye(n,e,t){return Math.abs(n-e)<=t}function u4(n,e,t,r=.5){n.origin=r,n.originPoint=Zn(e.min,e.max,n.origin),n.scale=js(t)/js(e),n.translate=Zn(t.min,t.max,n.origin)-n.originPoint,(n.scale>=uye&&n.scale<=dye||isNaN(n.scale))&&(n.scale=1),(n.translate>=hye&&n.translate<=fye||isNaN(n.translate))&&(n.translate=0)}function ay(n,e,t,r){u4(n.x,e.x,t.x,r?r.originX:void 0),u4(n.y,e.y,t.y,r?r.originY:void 0)}function d4(n,e,t){n.min=t.min+e.min,n.max=n.min+js(e)}function mye(n,e,t){d4(n.x,e.x,t.x),d4(n.y,e.y,t.y)}function h4(n,e,t){n.min=e.min-t.min,n.max=n.min+js(e)}function ly(n,e,t){h4(n.x,e.x,t.x),h4(n.y,e.y,t.y)}function gye(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Zn(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Zn(t,n,r.max):Math.min(n,t)),n}function f4(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function yye(n,{top:e,left:t,bottom:r,right:i}){return{x:f4(n.x,t,i),y:f4(n.y,e,r)}}function p4(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function vye(n,e){return{x:p4(n.x,e.x),y:p4(n.y,e.y)}}function xye(n,e){let t=.5;const r=js(n),i=js(e);return i>r?t=qp(e.min,e.max-r,n.min):r>i&&(t=qp(n.min,n.max-i,e.min)),kl(0,1,t)}function _ye(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const uC=.35;function wye(n=uC){return n===!1?n=0:n===!0&&(n=uC),{x:m4(n,"left","right"),y:m4(n,"top","bottom")}}function m4(n,e,t){return{min:g4(n,e),max:g4(n,t)}}function g4(n,e){return typeof n=="number"?n:n[e]||0}const y4=()=>({translate:0,scale:1,origin:0,originPoint:0}),Vf=()=>({x:y4(),y:y4()}),v4=()=>({min:0,max:0}),gr=()=>({x:v4(),y:v4()});function so(n){return[n("x"),n("y")]}function y9({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function bye({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Sye(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function pT(n){return n===void 0||n===1}function dC({scale:n,scaleX:e,scaleY:t}){return!pT(n)||!pT(e)||!pT(t)}function ed(n){return dC(n)||v9(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function v9(n){return x4(n.x)||x4(n.y)}function x4(n){return n&&n!=="0%"}function E1(n,e,t){const r=n-t,i=e*r;return t+i}function _4(n,e,t,r,i){return i!==void 0&&(n=E1(n,i,r)),E1(n,t,r)+e}function hC(n,e=0,t=1,r,i){n.min=_4(n.min,e,t,r,i),n.max=_4(n.max,e,t,r,i)}function x9(n,{x:e,y:t}){hC(n.x,e.translate,e.scale,e.originPoint),hC(n.y,t.translate,t.scale,t.originPoint)}const w4=.999999999999,b4=1.0000000000001;function Eye(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&zf(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,x9(n,o)),r&&ed(s.latestValues)&&zf(n,s.latestValues))}e.x<b4&&e.x>w4&&(e.x=1),e.y<b4&&e.y>w4&&(e.y=1)}function Uf(n,e){n.min=n.min+e,n.max=n.max+e}function S4(n,e,t,r,i=.5){const s=Zn(n.min,n.max,i);hC(n,e,t,s,r)}function zf(n,e){S4(n.x,e.x,e.scaleX,e.scale,e.originX),S4(n.y,e.y,e.scaleY,e.scale,e.originY)}function _9(n,e){return y9(Sye(n.getBoundingClientRect(),e))}function Tye(n,e,t){const r=_9(n,t),{scroll:i}=e;return i&&(Uf(r.x,i.offset.x),Uf(r.y,i.offset.y)),r}const w9=({current:n})=>n?n.ownerDocument.defaultView:null,Mye=new WeakMap;class Aye{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=gr(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Qv(u).point)},s=(u,d)=>{const{drag:f,dragPropagation:g,onDragStart:v}=this.getProps();if(f&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=xme(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),so(x=>{let _=this.getAxisMotionValue(x).get()||0;if(Ca.test(_)){const{projection:w}=this.visualElement;if(w&&w.layout){const S=w.layout.layoutBox[x];S&&(_=js(S)*(parseFloat(_)/100))}}this.originPoint[x]=_}),v&&Hn.postRender(()=>v(u,d)),nC(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:v,onDrag:y}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:x}=d;if(g&&this.currentDirection===null){this.currentDirection=Cye(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",d.point,x),this.updateAxis("y",d.point,x),this.visualElement.render(),y&&y(u,d)},a=(u,d)=>this.stop(u,d),l=()=>so(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new f9(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:w9(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Hn.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Vx(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=gye(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Ff(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=yye(i.layoutBox,t):this.constraints=!1,this.elastic=wye(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&so(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=_ye(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ff(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Tye(r,i.root,this.visualElement.getTransformPagePoint());let o=vye(i.layout.layoutBox,s);if(t){const a=t(bye(o));this.hasMutatedConstraints=!!a,a&&(o=y9(a))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=so(u=>{if(!Vx(u,t,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const f=i?200:1e6,g=i?40:1e7,v={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return nC(this.visualElement,e),r.start(MR(e,r,0,t,this.visualElement,!1))}stopAnimation(){so(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){so(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){so(t=>{const{drag:r}=this.getProps();if(!Vx(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[t];s.set(e[t]-Zn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Ff(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};so(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=xye({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),so(o=>{if(!Vx(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Zn(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;Mye.set(this.visualElement,this);const e=this.visualElement.current,t=oy(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ff(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Hn.read(r);const o=nv(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(so(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=uC,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Vx(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Cye(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class Pye extends gu{constructor(e){super(e),this.removeGroupControls=Ds,this.removeListeners=Ds,this.controls=new Aye(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ds}unmount(){this.removeGroupControls(),this.removeListeners()}}const E4=n=>(e,t)=>{n&&Hn.postRender(()=>n(e,t))};class Iye extends gu{constructor(){super(...arguments),this.removePointerDownListener=Ds}onPointerDown(e){this.session=new f9(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:w9(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:E4(e),onStart:E4(t),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Hn.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=oy(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ow={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function T4(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const ag={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(bt.test(n))n=parseFloat(n);else return n;const t=T4(n,e.target.x),r=T4(n,e.target.y);return`${t}% ${r}%`}},Rye={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=ou.parse(n);if(i.length>5)return r;const s=ou.createTransformer(n),o=typeof i[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Zn(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class kye extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Jpe(Nye),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),ow.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Hn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),tR.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function b9(n){const[e,t]=fpe(),r=R.useContext(iW);return m.jsx(kye,{...n,layoutGroup:r,switchLayoutGroup:R.useContext(hW),isPresent:e,safeToRemove:t})}const Nye={borderRadius:{...ag,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ag,borderTopRightRadius:ag,borderBottomLeftRadius:ag,borderBottomRightRadius:ag,boxShadow:Rye};function Dye(n,e,t){const r=Ni(n)?n:ev(n);return r.start(MR("",r,e,t)),r.animation}function Lye(n){return n instanceof SVGElement&&n.tagName!=="svg"}const Oye=(n,e)=>n.depth-e.depth;class Fye{constructor(){this.children=[],this.isDirty=!1}add(e){mR(this.children,e),this.isDirty=!0}remove(e){gR(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Oye),this.isDirty=!1,this.children.forEach(e)}}function jye(n,e){const t=Pa.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(su(r),n(s-e))};return Hn.read(r,!0),()=>su(r)}const S9=["TopLeft","TopRight","BottomLeft","BottomRight"],Vye=S9.length,M4=n=>typeof n=="string"?parseFloat(n):n,A4=n=>typeof n=="number"||bt.test(n);function Uye(n,e,t,r,i,s){i?(n.opacity=Zn(0,t.opacity!==void 0?t.opacity:1,zye(r)),n.opacityExit=Zn(e.opacity!==void 0?e.opacity:1,0,Bye(r))):s&&(n.opacity=Zn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let o=0;o<Vye;o++){const a=`border${S9[o]}Radius`;let l=C4(e,a),c=C4(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||A4(l)===A4(c)?(n[a]=Math.max(Zn(M4(l),M4(c),r),0),(Ca.test(c)||Ca.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=Zn(e.rotate||0,t.rotate||0,r))}function C4(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const zye=E9(0,.5,BW),Bye=E9(.5,.95,Ds);function E9(n,e,t){return r=>r<n?0:r>e?1:t(qp(n,e,r))}function P4(n,e){n.min=e.min,n.max=e.max}function ro(n,e){P4(n.x,e.x),P4(n.y,e.y)}function I4(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function R4(n,e,t,r,i){return n-=e,n=E1(n,1/t,r),i!==void 0&&(n=E1(n,1/i,r)),n}function Hye(n,e=0,t=1,r=.5,i,s=n,o=n){if(Ca.test(e)&&(e=parseFloat(e),e=Zn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Zn(s.min,s.max,r);n===s&&(a-=e),n.min=R4(n.min,e,t,a,i),n.max=R4(n.max,e,t,a,i)}function k4(n,e,[t,r,i],s,o){Hye(n,e[t],e[r],e[i],e.scale,s,o)}const Wye=["x","scaleX","originX"],Gye=["y","scaleY","originY"];function N4(n,e,t,r){k4(n.x,e,Wye,t?t.x:void 0,r?r.x:void 0),k4(n.y,e,Gye,t?t.y:void 0,r?r.y:void 0)}function D4(n){return n.translate===0&&n.scale===1}function T9(n){return D4(n.x)&&D4(n.y)}function L4(n,e){return n.min===e.min&&n.max===e.max}function $ye(n,e){return L4(n.x,e.x)&&L4(n.y,e.y)}function O4(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function M9(n,e){return O4(n.x,e.x)&&O4(n.y,e.y)}function F4(n){return js(n.x)/js(n.y)}function j4(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class qye{constructor(){this.members=[]}add(e){mR(this.members,e),e.scheduleRender()}remove(e){if(gR(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Kye(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:f,skewX:g,skewY:v}=t;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),g&&(r+=`skewX(${g}deg) `),v&&(r+=`skewY(${v}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const td={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Fg=typeof window<"u"&&window.MotionDebug!==void 0,mT=["","X","Y","Z"],Yye={visibility:"hidden"},V4=1e3;let Xye=0;function gT(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function A9(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=LW(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Hn,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&A9(r)}function C9({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Xye++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Fg&&(td.totalNodes=td.resolvedTargetDeltas=td.recalculatedProjection=0),this.nodes.forEach(Zye),this.nodes.forEach(ive),this.nodes.forEach(sve),this.nodes.forEach(eve),Fg&&window.MotionDebug.record(td)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Fye)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new yR),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Lye(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let d;const f=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=jye(f,250),ow.hasAnimatedSinceResize&&(ow.hasAnimatedSinceResize=!1,this.nodes.forEach(z4))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||uve,{onLayoutAnimationStart:x,onLayoutAnimationComplete:_}=u.getProps(),w=!this.targetLayout||!M9(this.targetLayout,v)||g,S=!f&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||f&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,S);const M={...dR(y,"layout"),onPlay:x,onComplete:_};(u.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M)}else f||z4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,su(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ove),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&A9(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(U4);return}this.isUpdating||this.nodes.forEach(nve),this.isUpdating=!1,this.nodes.forEach(rve),this.nodes.forEach(Qye),this.nodes.forEach(Jye),this.clearAllSnapshots();const a=Pa.now();Zr.delta=kl(0,1e3/60,a-Zr.timestamp),Zr.timestamp=a,Zr.isProcessing=!0,aT.update.process(Zr),aT.preRender.process(Zr),aT.render.process(Zr),Zr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,tR.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tve),this.sharedNodes.forEach(ave)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Hn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Hn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=gr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!T9(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||ed(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),dve(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return gr();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(hve))){const{scroll:u}=this.root;u&&(Uf(l.x,u.offset.x),Uf(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=gr();if(ro(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&ro(l,o),Uf(l.x,d.offset.x),Uf(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=gr();ro(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&zf(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),ed(u.latestValues)&&zf(l,u.latestValues)}return ed(this.latestValues)&&zf(l,this.latestValues),l}removeTransform(o){const a=gr();ro(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!ed(c.latestValues))continue;dC(c.latestValues)&&c.updateSnapshot();const u=gr(),d=c.measurePageBox();ro(u,d),N4(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return ed(this.latestValues)&&N4(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Zr.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gr(),this.relativeTargetOrigin=gr(),ly(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),ro(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=gr(),this.targetWithTransforms=gr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),mye(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ro(this.target,this.layout.layoutBox),x9(this.target,this.targetDelta)):ro(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gr(),this.relativeTargetOrigin=gr(),ly(this.relativeTargetOrigin,this.target,g.target),ro(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Fg&&td.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||dC(this.parent.latestValues)||v9(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Zr.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;ro(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;Eye(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=gr());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(I4(this.prevProjectionDelta.x,this.projectionDelta.x),I4(this.prevProjectionDelta.y,this.projectionDelta.y)),ay(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==g||!j4(this.projectionDelta.x,this.prevProjectionDelta.x)||!j4(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Fg&&td.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Vf(),this.projectionDelta=Vf(),this.projectionDeltaWithTransform=Vf()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=Vf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=gr(),g=l?l.source:void 0,v=this.layout?this.layout.source:void 0,y=g!==v,x=this.getStack(),_=!x||x.members.length<=1,w=!!(y&&!_&&this.options.crossfade===!0&&!this.path.some(cve));this.animationProgress=0;let S;this.mixTargetDelta=M=>{const I=M/1e3;B4(d.x,o.x,I),B4(d.y,o.y,I),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ly(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lve(this.relativeTarget,this.relativeTargetOrigin,f,I),S&&$ye(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=gr()),ro(S,this.relativeTarget)),y&&(this.animationValues=u,Uye(u,c,this.latestValues,I,w,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(su(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Hn.update(()=>{ow.hasAnimatedSinceResize=!0,this.currentAnimation=Dye(0,V4,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(V4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&P9(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||gr();const d=js(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=js(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}ro(a,l),zf(a,u),ay(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new qye),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&gT("z",o,c,this.animationValues);for(let u=0;u<mT.length;u++)gT(`rotate${mT[u]}`,o,c,this.animationValues),gT(`skew${mT[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Yye;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=iw(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=iw(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ed(this.latestValues)&&(y.transform=u?u({},""):"none",this.hasProjected=!1),y}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=Kye(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:g,y:v}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const y in x1){if(f[y]===void 0)continue;const{correct:x,applyTo:_}=x1[y],w=c.transform==="none"?f[y]:x(f[y],d);if(_){const S=_.length;for(let M=0;M<S;M++)c[_[M]]=w}else c[y]=w}return this.options.layoutId&&(c.pointerEvents=d===this?iw(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(U4),this.root.sharedNodes.clear()}}}function Qye(n){n.updateLayout()}function Jye(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?so(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],g=js(f);f.min=r[d].min,f.max=f.min+g}):P9(s,t.layoutBox,r)&&so(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],g=js(r[d]);f.max=f.min+g,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+g)});const a=Vf();ay(a,r,t.layoutBox);const l=Vf();o?ay(l,n.applyTransform(i,!0),t.measuredBox):ay(l,r,t.layoutBox);const c=!T9(a);let u=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:g}=d;if(f&&g){const v=gr();ly(v,t.layoutBox,f.layoutBox);const y=gr();ly(y,r,g.layoutBox),M9(v,y)||(u=!0),d.options.layoutRoot&&(n.relativeTarget=y,n.relativeTargetOrigin=v,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function Zye(n){Fg&&td.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function eve(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function tve(n){n.clearSnapshot()}function U4(n){n.clearMeasurements()}function nve(n){n.isLayoutDirty=!1}function rve(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function z4(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function ive(n){n.resolveTargetDelta()}function sve(n){n.calcProjection()}function ove(n){n.resetSkewAndRotation()}function ave(n){n.removeLeadSnapshot()}function B4(n,e,t){n.translate=Zn(e.translate,0,t),n.scale=Zn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function H4(n,e,t,r){n.min=Zn(e.min,t.min,r),n.max=Zn(e.max,t.max,r)}function lve(n,e,t,r){H4(n.x,e.x,t.x,r),H4(n.y,e.y,t.y,r)}function cve(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const uve={duration:.45,ease:[.4,0,.1,1]},W4=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),G4=W4("applewebkit/")&&!W4("chrome/")?Math.round:Ds;function $4(n){n.min=G4(n.min),n.max=G4(n.max)}function dve(n){$4(n.x),$4(n.y)}function P9(n,e,t){return n==="position"||n==="preserve-aspect"&&!pye(F4(e),F4(t),.2)}function hve(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const fve=C9({attachResizeListener:(n,e)=>nv(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yT={current:void 0},I9=C9({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!yT.current){const n=new fve({});n.mount(window),n.setOptions({layoutScroll:!0}),yT.current=n}return yT.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),pve={pan:{Feature:Iye},drag:{Feature:Pye,ProjectionNode:I9,MeasureLayout:b9}};function q4(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=r[i];s&&Hn.postRender(()=>s(e,Qv(e)))}class mve extends gu{mount(){const{current:e}=this.node;e&&(this.unmount=pme(e,t=>(q4(this.node,t,"Start"),r=>q4(this.node,r,"End"))))}unmount(){}}class gve extends gu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xv(nv(this.node.current,"focus",()=>this.onFocus()),nv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function K4(n,e,t){const{props:r}=n;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=r[i];s&&Hn.postRender(()=>s(e,Qv(e)))}class yve extends gu{mount(){const{current:e}=this.node;e&&(this.unmount=vme(e,t=>(K4(this.node,t,"Start"),(r,{success:i})=>K4(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const fC=new WeakMap,vT=new WeakMap,vve=n=>{const e=fC.get(n.target);e&&e(n)},xve=n=>{n.forEach(vve)};function _ve({root:n,...e}){const t=n||document;vT.has(t)||vT.set(t,{});const r=vT.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(xve,{root:n,...e})),r[i]}function wve(n,e,t){const r=_ve(e);return fC.set(n,t),r.observe(n),()=>{fC.delete(n),r.unobserve(n)}}const bve={some:0,all:1};class Sve extends gu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:bve[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return wve(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Eve(e,t))&&this.startObserver()}unmount(){}}function Eve({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Tve={inView:{Feature:Sve},tap:{Feature:yve},focus:{Feature:gve},hover:{Feature:mve}},Mve={layout:{ProjectionNode:I9,MeasureLayout:b9}},pC={current:null},R9={current:!1};function Ave(){if(R9.current=!0,!!XI)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>pC.current=n.matches;n.addListener(e),e()}else pC.current=!1}const Cve=[...n9,Ai,ou],Pve=n=>Cve.find(t9(n)),Y4=new WeakMap;function Ive(n,e,t){for(const r in e){const i=e[r],s=t[r];if(Ni(i))n.addValue(r,i);else if(Ni(s))n.addValue(r,ev(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const o=n.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=n.getStaticValue(r);n.addValue(r,ev(o!==void 0?o:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const X4=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Rve{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=SR,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Pa.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Hn.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=zb(t),this.isVariantNode=uW(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(t,{},this);for(const g in f){const v=f[g];l[g]!==void 0&&Ni(v)&&v.set(l[g],!1)}}mount(e){this.current=e,Y4.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),R9.current||Ave(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:pC.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Y4.delete(this.current),this.projection&&this.projection.unmount(),su(this.notifyUpdate),su(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=mh.has(e),i=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Hn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Kp){const t=Kp[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):gr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<X4.length;r++){const i=X4[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Ive(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=ev(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(ZW(i)||WW(i))?i=parseFloat(i):!Pve(i)&&ou.test(t)&&(i=XW(e,t)),this.setBaseTarget(e,Ni(i)?i.get():i)),Ni(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=rR(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ni(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new yR),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class k9 extends Rve{constructor(){super(...arguments),this.KeyframeResolver=r9}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ni(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function kve(n){return window.getComputedStyle(n)}class Nve extends k9{constructor(){super(...arguments),this.type="html",this.renderInstance=xW}readValueFromInstance(e,t){if(mh.has(t)){const r=bR(t);return r&&r.default||0}else{const r=kve(e),i=(gW(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return _9(e,t)}build(e,t,r){oR(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return uR(e,t,r)}}class Dve extends k9{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=gr}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(mh.has(t)){const r=bR(t);return r&&r.default||0}return t=_W.has(t)?t:eR(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return SW(e,t,r)}build(e,t,r){aR(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,i){wW(e,t,r,i)}mount(e){this.isSVGTag=cR(e.tagName),super.mount(e)}}const Lve=(n,e)=>nR(n)?new Dve(e):new Nve(e,{allowProjection:n!==R.Fragment}),Ove=ame({...sye,...Tve,...pve,...Mve},Lve),yr=bpe(Ove);function Fve(){const n=R.useRef(null),[e,t]=R.useState(!1),r=()=>{n.current&&(e?n.current.pause():n.current.play(),t(!e))};return R.useEffect(()=>{if(n.current){const i=n.current.play();i!==void 0&&i.catch(()=>{})}return()=>{n.current&&n.current.pause()}},[]),m.jsxs("div",{className:"fixed bottom-6 left-6 z-50 flex flex-col items-center group select-none",children:[m.jsxs("div",{className:`w-16 h-16 rounded-full bg-gradient-to-tr from-green-300 to-green-700 shadow-lg flex items-center justify-center border-4 border-white transition-transform duration-700 ${e?"animate-spin-slow":""}`,style:{boxShadow:"0 4px 24px 0 rgba(34,139,34,0.15)"},onClick:r,title:e?"Pause backsound":"Putar backsound",children:[m.jsx("img",{src:"https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=200&q=80",alt:"Piringan Backsound Hutan",className:"w-12 h-12 rounded-full object-cover pointer-events-none",style:{filter:"brightness(0.95) contrast(1.1)"}}),m.jsx("button",{className:"absolute w-8 h-8 flex items-center justify-center rounded-full bg-white/80 shadow group-hover:bg-white/90 transition top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2","aria-label":e?"Pause backsound":"Putar backsound",tabIndex:0,children:e?m.jsxs("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[m.jsx("rect",{x:"6",y:"5",width:"4",height:"14",rx:"1"}),m.jsx("rect",{x:"14",y:"5",width:"4",height:"14",rx:"1"})]}):m.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:m.jsx("polygon",{points:"6,4 20,12 6,20 6,4"})})})]}),m.jsx("audio",{ref:n,src:ape,loop:!0,preload:"auto",onPlay:()=>t(!0),onPause:()=>t(!1),style:{display:"none"},onLoadedMetadata:()=>{n.current&&(n.current.volume=.6)}}),m.jsx("span",{className:"mt-2 text-xs text-green-900 bg-white/80 px-2 py-0.5 rounded shadow opacity-0 group-hover:opacity-100 transition",children:e?"Sedang diputar":"Klik untuk backsound"})]})}function jve(){const{data:n,isLoading:e}=BI(3),{data:t}=qH(3),{data:r,isLoading:i}=KH(),[s,o]=R.useState(!1),[a,l]=R.useState(!1);R.useEffect(()=>{const d=new Date;((()=>{const y=d.getMonth()>0||d.getMonth()===0&&d.getDate()>26?d.getFullYear()+1:d.getFullYear();return new Date(y,0,26,0,0,0,0)})().getTime()-d.getTime())/(1e3*60*60*24)<=31&&!sessionStorage.getItem("hideBirthdayPopup")&&l(!0)},[]);const c=()=>{l(!1),sessionStorage.setItem("hideBirthdayPopup","1")},u=[...t||[],...rW.filter(d=>!(t!=null&&t.some(f=>f.title===d.title)))].slice(0,3);return R.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),m.jsxs(m.Fragment,{children:[m.jsx(upe,{open:a,onClose:c}),m.jsx(yr.section,{className:"py-8 sm:py-16 bg-white",initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.7},children:m.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[m.jsxs(yr.div,{className:"text-center mb-12",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.2,duration:.7},children:[m.jsx("h1",{className:"font-heading text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:m.jsx(dpe,{text:"Selamat Datang di Website Resmi Organisasi Mahasiswa Pecinta Alam Universitas Narotama Surabaya",speed:30})}),m.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Menjelajahi alam, berbagi pengetahuan, dan menjaga kelestarian lingkungan."})]}),m.jsx(yr.div,{className:"relative rounded-xl overflow-hidden shadow-xl",initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},transition:{delay:.4,duration:.7},children:m.jsxs(ZH,{opts:{align:"start",loop:!0},className:"w-full",plugins:[KI({delay:5e3})],children:[m.jsxs(eW,{children:[m.jsx(rw,{children:m.jsxs("div",{className:"relative h-96",children:[m.jsx("img",{src:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/anggota%20mahapala%20narotama.jpg",alt:"Anggota Mahapala Narotama",className:"w-full h-full object-cover"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end",children:m.jsxs("div",{className:"p-6 text-white",children:[m.jsx("h2",{className:"font-heading text-2xl font-bold mb-2",children:"Kebersamaan adalah simbol Kekuatan"}),m.jsx("p",{className:"text-gray-200",children:"Bergabunglah dalam misi kami untuk melindungi lingkungan dan eksplorasi alam."})]})})]})}),m.jsx(rw,{children:m.jsxs("div",{className:"relative h-96",children:[m.jsx("img",{src:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/eksplorasi%20alam.jpg",alt:"Pendidikan Rimba Gunung Mahapala Narotama",className:"w-full h-full object-cover"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end",children:m.jsxs("div",{className:"p-6 text-white",children:[m.jsx("h2",{className:"font-heading text-2xl font-bold mb-2",children:"Petualangan Tanpa Batas"}),m.jsx("p",{className:"text-gray-200",children:"Eksplorasi keindahan alam Indonesia bersama Mahapala Narotama."})]})})]})}),m.jsx(rw,{children:m.jsxs("div",{className:"relative h-96",children:[m.jsx("img",{src:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/panjat%20tebing.png",alt:"Pendidikan Panjat Tebing Mahapala Narotama",className:"w-full h-full object-cover"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end",children:m.jsxs("div",{className:"p-6 text-white",children:[m.jsx("h2",{className:"font-heading text-2xl font-bold mb-2",children:"Keseruan dalam Berpetualang"}),m.jsx("p",{className:"text-gray-200",children:"Kami berkomitmen untuk pendidikan lingkungan dan pelestarian alam."})]})})]})})]}),m.jsxs("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-2",children:[m.jsx(tW,{className:"relative -left-0 translate-y-0 bg-white/20 hover:bg-white/40"}),m.jsx(nW,{className:"relative -right-0 translate-y-0 bg-white/20 hover:bg-white/40"})]})]})})]})}),m.jsx(yr.section,{id:"info-organisasi",className:"py-8 sm:py-16 bg-gray-50",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7},children:m.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[m.jsx("h2",{className:"font-heading text-3xl font-bold text-center mb-12",children:"Informasi Organisasi"}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[m.jsx("h3",{className:"font-heading text-xl font-semibold text-primary mb-4",children:"Sejarah"}),m.jsx("p",{className:"text-gray-700 mb-4 text-justify indent-8",children:"Mahapala Narotama adalah Unit Kegiatan Mahasiswa Pecinta Alam di Universitas Narotama, Surabaya yang berdiri sejak tahun 2016. Organisasi ini berperan aktif dalam mengadakan kegiatan alam bebas dan konservasi lingkungan, serta turut serta dalam pengabdian masyarakat. Mahapala Narotama juga berperan dalam meningkatkan kesadaran akan pentingnya pelestarian alam dan lingkungan hidup di kalangan mahasiswa dan masyarakat umum."}),m.jsx("p",{className:"text-gray-700 mb-4 text-justify indent-8",children:'Universitas Narotama sendiri didirikan pada tahun 1981 oleh Yayasan Pawiyatan Gita Patria. Nama "Narotama" diambil dari seorang tokoh sejarah, Mahapatih dari Prabu Airlangga, yang dikenal sebagai guru ilmu kenegaraan, agama, dan kedigdayaan. Sejak awal berdirinya, universitas ini memiliki komitmen kuat dalam bidang pendidikan dan pengabdian kepada masyarakat.'}),m.jsx("p",{className:"text-gray-700 mb-4 text-justify indent-8",children:"Mahapala Narotama, sebagai bagian integral dari universitas, telah menunjukkan dedikasi dalam berbagai kegiatan, termasuk pendakian, ekspedisi, dan program konservasi. Mereka juga aktif dalam kolaborasi dengan organisasi lain untuk meningkatkan dampak positif terhadap lingkungan dan masyarakat."}),m.jsx("p",{className:"text-gray-700 mb-4 text-justify indent-8",children:"Dengan semangat yang terus berkobar, Mahapala Narotama berkomitmen untuk melanjutkan peranannya dalam menjaga kelestarian alam dan meningkatkan kesadaran lingkungan di kalangan generasi muda."})]}),m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[m.jsx("h3",{className:"font-heading text-xl font-semibold text-primary mb-4",children:"Visi & Misi"}),m.jsxs("div",{className:"mb-4",children:[m.jsx("h4",{className:"font-heading font-medium mb-2",children:"Visi:"}),m.jsx("p",{className:"text-gray-700 text-justify",children:"Membangun kembali semangat kebersamaan dan keaktifan anggota untuk menjadikan organisasi Mahapala sebagai wadah yang solid, aktif, dan berprestasi di bidang kepecintaalaman."})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-heading font-medium mb-2",children:"Misi:"}),m.jsxs("ul",{className:"text-gray-700 list-disc pl-5 space-y-1",children:[m.jsx("li",{children:"Membangun dan memperkuat ikatan antaranggota dalam organisasi mahasiswa pecinta alam,"}),m.jsx("li",{children:"Meningkatkan keterlibatan anggota melalui kegiatan berbasis kolaborasi,"}),m.jsx("li",{children:"Menghidupkan kembali program kerja yang relevan dan inovatif,"}),m.jsx("li",{children:"Melakukan rekrutmen anggota baru secara masif dan strategis,"}),m.jsx("li",{children:"Membangun budaya komunikasi yang transparan dan terbuka."})]})]})]})]})]})}),m.jsx(yr.section,{id:"kegiatan",className:"py-8 sm:py-16 bg-white",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7},children:m.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[m.jsx("h2",{className:"font-heading text-3xl font-bold text-center mb-4",children:"Kegiatan Terbaru"}),m.jsx("p",{className:"text-center text-gray-600 mb-12 max-w-2xl mx-auto",children:"Dokumentasi berbagai kegiatan yang telah dilaksanakan oleh Mahapala Narotama dalam menjalankan misi pelestarian dan eksplorasi alam."}),e?m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(d=>m.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-md animate-pulse",children:[m.jsx("div",{className:"w-full h-48 bg-gray-300"}),m.jsxs("div",{className:"p-5",children:[m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsx("div",{className:"h-4 bg-gray-300 rounded w-24"}),m.jsx("div",{className:"h-6 bg-gray-300 rounded w-16"})]}),m.jsx("div",{className:"h-6 bg-gray-300 rounded w-3/4 mb-2"}),m.jsx("div",{className:"h-4 bg-gray-300 rounded w-full mb-4"}),m.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/3"})]})]},d))}):m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:n==null?void 0:n.map(d=>m.jsx(RB,{activity:{...d,date:typeof d.date=="string"?d.date:d.date.toISOString()}},d.id))}),m.jsx("div",{className:"text-center mt-10",children:m.jsx(Is,{href:"/kegiatan",children:m.jsx(vt,{children:"Lihat Semua Kegiatan"})})})]})}),m.jsx(yr.section,{id:"pembelajaran",className:"py-8 sm:py-16 bg-gray-50",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7},children:m.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[m.jsx("h2",{className:"font-heading text-3xl font-bold text-center mb-4",children:"Pembelajaran"}),m.jsx("p",{className:"text-center text-gray-600 mb-12 max-w-2xl mx-auto",children:"Materi dan panduan kegiatan alam bebas yang dapat diakses oleh seluruh anggota Mahapala Narotama."}),m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map(d=>m.jsx(kB,{module:d},d.id+d.title))}),m.jsx("div",{className:"text-center mt-10",children:m.jsx(Is,{href:"/pembelajaran",children:m.jsx(vt,{children:"Lihat Semua Pembelajaran"})})})]})}),m.jsx(yr.section,{className:"py-8 sm:py-16 bg-white",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7},children:m.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[m.jsx("h2",{className:"font-heading text-3xl font-bold text-center mb-4",children:"Galeri Kegiatan"}),m.jsx("p",{className:"text-center text-gray-600 mb-10 max-w-2xl mx-auto",children:"Sekilas dokumentasi kegiatan yang telah dilaksanakan oleh anggota Mahapala Narotama"}),i?m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(d=>m.jsx("div",{className:"bg-gray-200 h-48 rounded-lg animate-pulse"},d))}):r&&r.length>0?m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:r.slice(0,4).map(d=>m.jsxs("div",{className:"relative group overflow-hidden rounded-lg",children:[m.jsx("img",{src:d.imageUrl,alt:d.title,className:"w-full h-full object-cover transition group-hover:scale-110"}),m.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition flex items-center justify-center",children:m.jsxs("div",{children:[m.jsx("p",{className:"text-white text-sm text-center font-medium p-2",children:d.title}),d.description&&m.jsx("p",{className:"text-white text-xs text-center p-1",children:d.description})]})})]},d.id))}):m.jsx("div",{className:"text-center text-gray-500 py-10",children:"Tidak ada data galeri."}),m.jsx("div",{className:"text-center mt-10",children:m.jsx(Is,{href:"/galeri",children:m.jsx(vt,{children:"Lihat Galeri Lengkap"})})})]})}),m.jsxs(yr.section,{className:"py-8 sm:py-16 bg-primary text-white",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7},children:[m.jsxs("div",{className:"container mx-auto px-2 sm:px-4 text-center",children:[m.jsx("h2",{className:"font-heading text-3xl font-bold mb-4",children:"Bergabung dengan Mahapala Narotama"}),m.jsx("p",{className:"text-lg mb-8 max-w-2xl mx-auto",children:"Mari bergabung dalam misi kami untuk melestarikan alam dan mengeksplorasi keindahan Indonesia. Kami membuka pendaftaran anggota baru setiap awal tahun akademik."}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[m.jsx(Is,{href:"/pendaftaran",children:m.jsx(vt,{variant:"secondary",className:"bg-white text-primary hover:bg-gray-100",children:"Informasi Pendaftaran"})}),m.jsx(vt,{variant:"outline",className:"bg-transparent border-2 border-white text-white hover:bg-white/10",onClick:d=>{d.preventDefault(),o(!0)},children:"Hubungi Kami"})]})]}),m.jsx(Qc,{open:s,onOpenChange:o,children:m.jsx(Ml,{className:"max-w-xs w-full p-0 rounded-xl",children:m.jsxs("div",{className:"p-6 flex flex-col items-center gap-4",children:[m.jsx("h2",{className:"font-heading text-lg font-bold mb-2",children:"Hubungi Kami"}),m.jsxs("div",{className:"flex gap-6 justify-center",children:[m.jsx("a",{href:"https://instagram.com/mahapalanarotama",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary hover:scale-110 transition-transform",title:"Instagram",children:m.jsx(eb,{size:36})}),m.jsx("a",{href:"https://wa.me/6281234567890",target:"_blank",rel:"noopener noreferrer",className:"hover:text-green-600 hover:scale-110 transition-transform",title:"WhatsApp",children:m.jsx(tb,{size:36})}),m.jsx("a",{href:"mailto:ukm.mahapala@narotama.ac.id",className:"hover:text-blue-600 hover:scale-110 transition-transform",title:"Email",children:m.jsx(Dy,{size:36})})]}),m.jsxs("div",{className:"text-center text-xs text-gray-500 mt-2",children:["Instagram: @mahapalanarotama",m.jsx("br",{}),"WhatsApp: 0812-3456-7890",m.jsx("br",{}),"Email: ukm.mahapala@narotama.ac.id"]})]})})})]}),m.jsx(Fve,{})]})}function Q4(n,[e,t]){return Math.min(t,Math.max(e,n))}var Vve=R.createContext(void 0);function AR(n){const e=R.useContext(Vve);return n||e||"ltr"}function Uve(n){const e=R.useRef({value:n,previous:n});return R.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var zve=[" ","Enter","ArrowUp","ArrowDown"],Bve=[" ","Enter"],Xd="Select",[Wb,Gb,Hve]=c2(Xd),[ym,lCe]=Fl(Xd,[Hve,sb]),$b=sb(),[Wve,yu]=ym(Xd),[Gve,$ve]=ym(Xd),N9=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:g,form:v}=n,y=$b(e),[x,_]=R.useState(null),[w,S]=R.useState(null),[M,I]=R.useState(!1),L=AR(c),[P,T]=Op({prop:r,defaultProp:i??!1,onChange:s,caller:Xd}),[C,k]=Op({prop:o,defaultProp:a,onChange:l,caller:Xd}),O=R.useRef(null),U=x?v||!!x.closest("form"):!0,[V,B]=R.useState(new Set),Z=Array.from(V).map(ne=>ne.props.value).join(";");return m.jsx(Hee,{...y,children:m.jsxs(Wve,{required:g,scope:e,trigger:x,onTriggerChange:_,valueNode:w,onValueNodeChange:S,valueNodeHasChildren:M,onValueNodeHasChildrenChange:I,contentId:Vc(),value:C,onValueChange:k,open:P,onOpenChange:T,dir:L,triggerPointerDownPosRef:O,disabled:f,children:[m.jsx(Wb.Provider,{scope:e,children:m.jsx(Gve,{scope:n.__scopeSelect,onNativeOptionAdd:R.useCallback(ne=>{B(oe=>new Set(oe).add(ne))},[]),onNativeOptionRemove:R.useCallback(ne=>{B(oe=>{const z=new Set(oe);return z.delete(ne),z})},[]),children:t})}),U?m.jsxs(rG,{"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:d,value:C,onChange:ne=>k(ne.target.value),disabled:f,form:v,children:[C===void 0?m.jsx("option",{value:""}):null,Array.from(V)]},Z):null]})})};N9.displayName=Xd;var D9="SelectTrigger",L9=R.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,s=$b(t),o=yu(D9,t),a=o.disabled||r,l=Mn(e,o.onTriggerChange),c=Gb(t),u=R.useRef("touch"),[d,f,g]=sG(y=>{const x=c().filter(S=>!S.disabled),_=x.find(S=>S.value===o.value),w=oG(x,y,_);w!==void 0&&o.onValueChange(w.value)}),v=y=>{a||(o.onOpenChange(!0),g()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return m.jsx(Nz,{asChild:!0,...s,children:m.jsx(Gt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":iG(o.value)?"":void 0,...i,ref:l,onClick:wt(i.onClick,y=>{y.currentTarget.focus(),u.current!=="mouse"&&v(y)}),onPointerDown:wt(i.onPointerDown,y=>{u.current=y.pointerType;const x=y.target;x.hasPointerCapture(y.pointerId)&&x.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(v(y),y.preventDefault())}),onKeyDown:wt(i.onKeyDown,y=>{const x=d.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&f(y.key),!(x&&y.key===" ")&&zve.includes(y.key)&&(v(),y.preventDefault())})})})});L9.displayName=D9;var O9="SelectValue",F9=R.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:s,placeholder:o="",...a}=n,l=yu(O9,t),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=Mn(e,l.onValueNodeChange);return li(()=>{c(u)},[c,u]),m.jsx(Gt.span,{...a,ref:d,style:{pointerEvents:"none"},children:iG(l.value)?m.jsx(m.Fragment,{children:o}):s})});F9.displayName=O9;var qve="SelectIcon",j9=R.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return m.jsx(Gt.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});j9.displayName=qve;var Kve="SelectPortal",V9=n=>m.jsx(X1,{asChild:!0,...n});V9.displayName=Kve;var Qd="SelectContent",U9=R.forwardRef((n,e)=>{const t=yu(Qd,n.__scopeSelect),[r,i]=R.useState();if(li(()=>{i(new DocumentFragment)},[]),!t.open){const s=r;return s?sh.createPortal(m.jsx(z9,{scope:n.__scopeSelect,children:m.jsx(Wb.Slot,{scope:n.__scopeSelect,children:m.jsx("div",{children:n.children})})}),s):null}return m.jsx(B9,{...n,ref:e})});U9.displayName=Qd;var Ao=10,[z9,vu]=ym(Qd),Yve="SelectContentImpl",Xve=Lp("SelectContent.RemoveScroll"),B9=R.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:x,..._}=n,w=yu(Qd,t),[S,M]=R.useState(null),[I,L]=R.useState(null),P=Mn(e,ae=>M(ae)),[T,C]=R.useState(null),[k,O]=R.useState(null),U=Gb(t),[V,B]=R.useState(!1),Z=R.useRef(!1);R.useEffect(()=>{if(S)return nB(S)},[S]),Kz();const ne=R.useCallback(ae=>{const[Se,...Re]=U().map(te=>te.ref.current),[Ae]=Re.slice(-1),Te=document.activeElement;for(const te of ae)if(te===Te||(te==null||te.scrollIntoView({block:"nearest"}),te===Se&&I&&(I.scrollTop=0),te===Ae&&I&&(I.scrollTop=I.scrollHeight),te==null||te.focus(),document.activeElement!==Te))return},[U,I]),oe=R.useCallback(()=>ne([T,S]),[ne,T,S]);R.useEffect(()=>{V&&oe()},[V,oe]);const{onOpenChange:z,triggerPointerDownPosRef:G}=w;R.useEffect(()=>{if(S){let ae={x:0,y:0};const Se=Ae=>{var Te,te;ae={x:Math.abs(Math.round(Ae.pageX)-(((Te=G.current)==null?void 0:Te.x)??0)),y:Math.abs(Math.round(Ae.pageY)-(((te=G.current)==null?void 0:te.y)??0))}},Re=Ae=>{ae.x<=10&&ae.y<=10?Ae.preventDefault():S.contains(Ae.target)||z(!1),document.removeEventListener("pointermove",Se),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",Se),document.addEventListener("pointerup",Re,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Se),document.removeEventListener("pointerup",Re,{capture:!0})}}},[S,z,G]),R.useEffect(()=>{const ae=()=>z(!1);return window.addEventListener("blur",ae),window.addEventListener("resize",ae),()=>{window.removeEventListener("blur",ae),window.removeEventListener("resize",ae)}},[z]);const[q,se]=sG(ae=>{const Se=U().filter(Te=>!Te.disabled),Re=Se.find(Te=>Te.ref.current===document.activeElement),Ae=oG(Se,ae,Re);Ae&&setTimeout(()=>Ae.ref.current.focus())}),J=R.useCallback((ae,Se,Re)=>{const Ae=!Z.current&&!Re;(w.value!==void 0&&w.value===Se||Ae)&&(C(ae),Ae&&(Z.current=!0))},[w.value]),he=R.useCallback(()=>S==null?void 0:S.focus(),[S]),_e=R.useCallback((ae,Se,Re)=>{const Ae=!Z.current&&!Re;(w.value!==void 0&&w.value===Se||Ae)&&O(ae)},[w.value]),re=r==="popper"?mC:H9,Y=re===mC?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:x}:{};return m.jsx(z9,{scope:t,content:S,viewport:I,onViewportChange:L,itemRefCallback:J,selectedItem:T,onItemLeave:he,itemTextRefCallback:_e,focusSelectedItem:oe,selectedItemText:k,position:r,isPositioned:V,searchRef:q,children:m.jsx(C2,{as:Xve,allowPinchZoom:!0,children:m.jsx(A2,{asChild:!0,trapped:w.open,onMountAutoFocus:ae=>{ae.preventDefault()},onUnmountAutoFocus:wt(i,ae=>{var Se;(Se=w.trigger)==null||Se.focus({preventScroll:!0}),ae.preventDefault()}),children:m.jsx(kv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:ae=>ae.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:m.jsx(re,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:ae=>ae.preventDefault(),..._,...Y,onPlaced:()=>B(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:wt(_.onKeyDown,ae=>{const Se=ae.ctrlKey||ae.altKey||ae.metaKey;if(ae.key==="Tab"&&ae.preventDefault(),!Se&&ae.key.length===1&&se(ae.key),["ArrowUp","ArrowDown","Home","End"].includes(ae.key)){let Ae=U().filter(Te=>!Te.disabled).map(Te=>Te.ref.current);if(["ArrowUp","End"].includes(ae.key)&&(Ae=Ae.slice().reverse()),["ArrowUp","ArrowDown"].includes(ae.key)){const Te=ae.target,te=Ae.indexOf(Te);Ae=Ae.slice(te+1)}setTimeout(()=>ne(Ae)),ae.preventDefault()}})})})})})})});B9.displayName=Yve;var Qve="SelectItemAlignedPosition",H9=R.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,s=yu(Qd,t),o=vu(Qd,t),[a,l]=R.useState(null),[c,u]=R.useState(null),d=Mn(e,P=>u(P)),f=Gb(t),g=R.useRef(!1),v=R.useRef(!0),{viewport:y,selectedItem:x,selectedItemText:_,focusSelectedItem:w}=o,S=R.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&y&&x&&_){const P=s.trigger.getBoundingClientRect(),T=c.getBoundingClientRect(),C=s.valueNode.getBoundingClientRect(),k=_.getBoundingClientRect();if(s.dir!=="rtl"){const Te=k.left-T.left,te=C.left-Te,le=P.left-te,we=P.width+le,Be=Math.max(we,T.width),Fe=window.innerWidth-Ao,Je=Q4(te,[Ao,Math.max(Ao,Fe-Be)]);a.style.minWidth=we+"px",a.style.left=Je+"px"}else{const Te=T.right-k.right,te=window.innerWidth-C.right-Te,le=window.innerWidth-P.right-te,we=P.width+le,Be=Math.max(we,T.width),Fe=window.innerWidth-Ao,Je=Q4(te,[Ao,Math.max(Ao,Fe-Be)]);a.style.minWidth=we+"px",a.style.right=Je+"px"}const O=f(),U=window.innerHeight-Ao*2,V=y.scrollHeight,B=window.getComputedStyle(c),Z=parseInt(B.borderTopWidth,10),ne=parseInt(B.paddingTop,10),oe=parseInt(B.borderBottomWidth,10),z=parseInt(B.paddingBottom,10),G=Z+ne+V+z+oe,q=Math.min(x.offsetHeight*5,G),se=window.getComputedStyle(y),J=parseInt(se.paddingTop,10),he=parseInt(se.paddingBottom,10),_e=P.top+P.height/2-Ao,re=U-_e,Y=x.offsetHeight/2,ae=x.offsetTop+Y,Se=Z+ne+ae,Re=G-Se;if(Se<=_e){const Te=O.length>0&&x===O[O.length-1].ref.current;a.style.bottom="0px";const te=c.clientHeight-y.offsetTop-y.offsetHeight,le=Math.max(re,Y+(Te?he:0)+te+oe),we=Se+le;a.style.height=we+"px"}else{const Te=O.length>0&&x===O[0].ref.current;a.style.top="0px";const le=Math.max(_e,Z+y.offsetTop+(Te?J:0)+Y)+Re;a.style.height=le+"px",y.scrollTop=Se-_e+y.offsetTop}a.style.margin=`${Ao}px 0`,a.style.minHeight=q+"px",a.style.maxHeight=U+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[f,s.trigger,s.valueNode,a,c,y,x,_,s.dir,r]);li(()=>S(),[S]);const[M,I]=R.useState();li(()=>{c&&I(window.getComputedStyle(c).zIndex)},[c]);const L=R.useCallback(P=>{P&&v.current===!0&&(S(),w==null||w(),v.current=!1)},[S,w]);return m.jsx(Zve,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:L,children:m.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:m.jsx(Gt.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});H9.displayName=Qve;var Jve="SelectPopperPosition",mC=R.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=Ao,...s}=n,o=$b(t);return m.jsx(Dz,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});mC.displayName=Jve;var[Zve,CR]=ym(Qd,{}),gC="SelectViewport",W9=R.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...i}=n,s=vu(gC,t),o=CR(gC,t),a=Mn(e,s.onViewportChange),l=R.useRef(0);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),m.jsx(Wb.Slot,{scope:t,children:m.jsx(Gt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:wt(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const g=Math.abs(l.current-u.scrollTop);if(g>0){const v=window.innerHeight-Ao*2,y=parseFloat(d.style.minHeight),x=parseFloat(d.style.height),_=Math.max(y,x);if(_<v){const w=_+g,S=Math.min(v,w),M=w-S;d.style.height=S+"px",d.style.bottom==="0px"&&(u.scrollTop=M>0?M:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});W9.displayName=gC;var G9="SelectGroup",[e0e,t0e]=ym(G9),n0e=R.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Vc();return m.jsx(e0e,{scope:t,id:i,children:m.jsx(Gt.div,{role:"group","aria-labelledby":i,...r,ref:e})})});n0e.displayName=G9;var $9="SelectLabel",q9=R.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=t0e($9,t);return m.jsx(Gt.div,{id:i.id,...r,ref:e})});q9.displayName=$9;var T1="SelectItem",[r0e,K9]=ym(T1),Y9=R.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:s,...o}=n,a=yu(T1,t),l=vu(T1,t),c=a.value===r,[u,d]=R.useState(s??""),[f,g]=R.useState(!1),v=Mn(e,w=>{var S;return(S=l.itemRefCallback)==null?void 0:S.call(l,w,r,i)}),y=Vc(),x=R.useRef("touch"),_=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return m.jsx(r0e,{scope:t,value:r,disabled:i,textId:y,isSelected:c,onItemTextChange:R.useCallback(w=>{d(S=>S||((w==null?void 0:w.textContent)??"").trim())},[]),children:m.jsx(Wb.ItemSlot,{scope:t,value:r,disabled:i,textValue:u,children:m.jsx(Gt.div,{role:"option","aria-labelledby":y,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:v,onFocus:wt(o.onFocus,()=>g(!0)),onBlur:wt(o.onBlur,()=>g(!1)),onClick:wt(o.onClick,()=>{x.current!=="mouse"&&_()}),onPointerUp:wt(o.onPointerUp,()=>{x.current==="mouse"&&_()}),onPointerDown:wt(o.onPointerDown,w=>{x.current=w.pointerType}),onPointerMove:wt(o.onPointerMove,w=>{var S;x.current=w.pointerType,i?(S=l.onItemLeave)==null||S.call(l):x.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:wt(o.onPointerLeave,w=>{var S;w.currentTarget===document.activeElement&&((S=l.onItemLeave)==null||S.call(l))}),onKeyDown:wt(o.onKeyDown,w=>{var M;((M=l.searchRef)==null?void 0:M.current)!==""&&w.key===" "||(Bve.includes(w.key)&&_(),w.key===" "&&w.preventDefault())})})})})});Y9.displayName=T1;var jg="SelectItemText",X9=R.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...s}=n,o=yu(jg,t),a=vu(jg,t),l=K9(jg,t),c=$ve(jg,t),[u,d]=R.useState(null),f=Mn(e,_=>d(_),l.onItemTextChange,_=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,_,l.value,l.disabled)}),g=u==null?void 0:u.textContent,v=R.useMemo(()=>m.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:y,onNativeOptionRemove:x}=c;return li(()=>(y(v),()=>x(v)),[y,x,v]),m.jsxs(m.Fragment,{children:[m.jsx(Gt.span,{id:l.textId,...s,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?sh.createPortal(s.children,o.valueNode):null]})});X9.displayName=jg;var Q9="SelectItemIndicator",J9=R.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return K9(Q9,t).isSelected?m.jsx(Gt.span,{"aria-hidden":!0,...r,ref:e}):null});J9.displayName=Q9;var yC="SelectScrollUpButton",Z9=R.forwardRef((n,e)=>{const t=vu(yC,n.__scopeSelect),r=CR(yC,n.__scopeSelect),[i,s]=R.useState(!1),o=Mn(e,r.onScrollButtonChange);return li(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),i?m.jsx(tG,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});Z9.displayName=yC;var vC="SelectScrollDownButton",eG=R.forwardRef((n,e)=>{const t=vu(vC,n.__scopeSelect),r=CR(vC,n.__scopeSelect),[i,s]=R.useState(!1),o=Mn(e,r.onScrollButtonChange);return li(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),i?m.jsx(tG,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});eG.displayName=vC;var tG=R.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...i}=n,s=vu("SelectScrollButton",t),o=R.useRef(null),a=Gb(t),l=R.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return R.useEffect(()=>()=>l(),[l]),li(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),m.jsx(Gt.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:wt(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:wt(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:wt(i.onPointerLeave,()=>{l()})})}),i0e="SelectSeparator",nG=R.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return m.jsx(Gt.div,{"aria-hidden":!0,...r,ref:e})});nG.displayName=i0e;var xC="SelectArrow",s0e=R.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=$b(t),s=yu(xC,t),o=vu(xC,t);return s.open&&o.position==="popper"?m.jsx(Lz,{...i,...r,ref:e}):null});s0e.displayName=xC;var o0e="SelectBubbleInput",rG=R.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const i=R.useRef(null),s=Mn(r,i),o=Uve(e);return R.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),m.jsx(Gt.select,{...t,style:{...C5,...t.style},ref:s,defaultValue:e})});rG.displayName=o0e;function iG(n){return n===""||n===void 0}function sG(n){const e=vo(n),t=R.useRef(""),r=R.useRef(0),i=R.useCallback(o=>{const a=t.current+o;e(a),function l(c){t.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=R.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return R.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,s]}function oG(n,e,t){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let o=a0e(n,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==t?l:void 0}function a0e(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var l0e=N9,aG=L9,c0e=F9,u0e=j9,d0e=V9,lG=U9,h0e=W9,cG=q9,uG=Y9,f0e=X9,p0e=J9,dG=Z9,hG=eG,fG=nG;const pG=l0e,mG=c0e,PR=R.forwardRef(({className:n,children:e,...t},r)=>m.jsxs(aG,{ref:r,className:gt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,m.jsx(u0e,{asChild:!0,children:m.jsx(Z5,{className:"h-4 w-4 opacity-50"})})]}));PR.displayName=aG.displayName;const gG=R.forwardRef(({className:n,...e},t)=>m.jsx(dG,{ref:t,className:gt("flex cursor-default items-center justify-center py-1",n),...e,children:m.jsx(RJ,{className:"h-4 w-4"})}));gG.displayName=dG.displayName;const yG=R.forwardRef(({className:n,...e},t)=>m.jsx(hG,{ref:t,className:gt("flex cursor-default items-center justify-center py-1",n),...e,children:m.jsx(Z5,{className:"h-4 w-4"})}));yG.displayName=hG.displayName;const IR=R.forwardRef(({className:n,children:e,position:t="popper",...r},i)=>m.jsx(d0e,{children:m.jsxs(lG,{ref:i,className:gt("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[m.jsx(gG,{}),m.jsx(h0e,{className:gt("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),m.jsx(yG,{})]})}));IR.displayName=lG.displayName;const m0e=R.forwardRef(({className:n,...e},t)=>m.jsx(cG,{ref:t,className:gt("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));m0e.displayName=cG.displayName;const up=R.forwardRef(({className:n,children:e,...t},r)=>m.jsxs(uG,{ref:r,className:gt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[m.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m.jsx(p0e,{children:m.jsx(IJ,{className:"h-4 w-4"})})}),m.jsx(f0e,{children:e})]}));up.displayName=uG.displayName;const g0e=R.forwardRef(({className:n,...e},t)=>m.jsx(fG,{ref:t,className:gt("-mx-1 my-1 h-px bg-muted",n),...e}));g0e.displayName=fG.displayName;const Fr=R.forwardRef(({className:n,type:e,...t},r)=>m.jsx("input",{type:e,className:gt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));Fr.displayName="Input";function Ri({className:n,...e}){return m.jsx("div",{className:gt("animate-pulse rounded-md bg-muted",n),...e})}function y0e(){const[n,e]=R.useState("all"),[t,r]=R.useState(""),{data:i,isLoading:s}=BI(),o=i?Array.from(new Set(i.map(l=>(l.category||"").trim()).filter(Boolean))):[],a=i==null?void 0:i.filter(l=>{var d,f;const c=n==="all"?!0:(l.category||"").toLowerCase()===n.toLowerCase(),u=t?((d=l.title)==null?void 0:d.toLowerCase().includes(t.toLowerCase()))||((f=l.description)==null?void 0:f.toLowerCase().includes(t.toLowerCase())):!0;return c&&u});return m.jsx(m.Fragment,{children:m.jsx("section",{className:"py-12 bg-white",children:m.jsxs("div",{className:"container mx-auto px-4",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsx("h1",{className:"font-heading text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:"Kegiatan Mahapala Narotama"}),m.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Eksplorasi alam, konservasi lingkungan, dan berbagi pengetahuan bersama Mahapala Narotama"})]}),m.jsx("div",{className:"max-w-4xl mx-auto mb-10",children:m.jsx("div",{className:"bg-gray-50 p-6 rounded-lg shadow-md",children:m.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Cari Kegiatan"}),m.jsx(Fr,{id:"search",placeholder:"Cari judul atau deskripsi kegiatan...",value:t,onChange:l=>r(l.target.value)})]}),m.jsxs("div",{className:"w-full md:w-48",children:[m.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategori"}),m.jsxs(pG,{value:n,onValueChange:e,children:[m.jsx(PR,{id:"category",children:m.jsx(mG,{placeholder:"Semua Kategori"})}),m.jsxs(IR,{className:"bg-white",children:[m.jsx(up,{value:"all",children:"Semua Kategori"}),o.map(l=>m.jsx(up,{value:l,children:l},l))]})]})]})]})})}),s?m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(l=>m.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-md animate-pulse",children:[m.jsx(Ri,{className:"w-full h-48"}),m.jsxs("div",{className:"p-5",children:[m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsx(Ri,{className:"h-4 w-24"}),m.jsx(Ri,{className:"h-6 w-16"})]}),m.jsx(Ri,{className:"h-6 w-3/4 mb-2"}),m.jsx(Ri,{className:"h-4 w-full mb-4"}),m.jsx(Ri,{className:"h-4 w-1/3"})]})]},l))}):a&&a.length>0?m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(l=>{var c;return m.jsx(RB,{activity:{...l,date:typeof l.date=="string"?l.date:((c=l.date)==null?void 0:c.toISOString())??""}},l.id)})}):m.jsxs("div",{className:"text-center py-8",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Tidak ada kegiatan ditemukan"}),m.jsx("p",{className:"text-gray-500",children:"Coba ubah filter atau kata kunci pencarian Anda"})]})]})})})}function v0e(){const[n,e]=R.useState(""),{data:t,isLoading:r}=qH(),i=[...t||[],...rW.filter(o=>!(t!=null&&t.some(a=>a.title===o.title)))],s=i.filter(o=>n?o.title.toLowerCase().includes(n.toLowerCase())||o.description.toLowerCase().includes(n.toLowerCase()):!0);return m.jsx(m.Fragment,{children:m.jsx("section",{className:"py-12 bg-white",children:m.jsxs("div",{className:"container mx-auto px-4",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsx("h1",{className:"font-heading text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:"Pembelajaran Mahapala Narotama"}),m.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Materi dan panduan kegiatan alam bebas yang dapat diakses oleh seluruh anggota Mahapala Narotama"})]}),m.jsx("div",{className:"max-w-md mx-auto mb-10",children:m.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg shadow-md",children:[m.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cari Materi"}),m.jsx(Fr,{id:"search",placeholder:"Cari judul atau deskripsi materi...",value:n,onChange:o=>e(o.target.value)})]})}),r&&i.length===0?m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(o=>m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-pulse",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx(Ri,{className:"h-12 w-12 rounded-full mr-4"}),m.jsx(Ri,{className:"h-6 w-3/4"})]}),m.jsx(Ri,{className:"h-4 w-full mb-2"}),m.jsx(Ri,{className:"h-4 w-full mb-2"}),m.jsx(Ri,{className:"h-4 w-2/3 mb-4"}),m.jsx(Ri,{className:"h-4 w-24"})]},o))}):s&&s.length>0?m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map(o=>m.jsx(kB,{module:o},o.id+o.title))}):m.jsxs("div",{className:"text-center py-8",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Tidak ada materi pembelajaran ditemukan"}),m.jsx("p",{className:"text-gray-500",children:"Coba ubah kata kunci pencarian Anda"})]})]})})})}const x0e=n=>{const e=n.data();return{id:isNaN(Number(n.id))?Math.floor(Math.random()*1e6):Number(n.id),fullName:e.namalengkap||"",fieldName:e.namalapangan||"",batchName:e.namaangkatan||"",batchYear:e.tahun||0,registrationNumber:e.nomorregistrasi||"",membershipStatus:e.keanggotaan||"Tidak Aktif",photoUrl:e.foto||"",qrCode:e.url||"",email:e.email||"",phone:e.phone||"",gender:e.gender||""}},_0e=async()=>{try{const n=ei(_n,"anggota"),e=await ss(n);return e.empty?(console.log("No members found"),[]):e.docs.map(x0e)}catch(n){throw console.error("Error fetching members:",n),n}},w0e=async(n,e)=>{const t=ei(_n,"anggota"),r=xH(t,_H(n,"==",e),Gde(1)),i=await ss(r);if(i.empty)return null;const o=i.docs[0].data();return{fullName:o.namalengkap||"",fieldName:o.namalapangan||"",batchName:o.namaangkatan||"",batchYear:o.tahun||0,registrationNumber:o.nomorregistrasi||"",membershipStatus:o.keanggotaan||"Tidak Aktif",photoUrl:o.foto||"",statusMahasiswa:o.statusMahasiswa||""}},b0e=n=>fb({queryKey:["members",n],queryFn:()=>_0e()});var S0e=Object.defineProperty,M1=Object.getOwnPropertySymbols,vG=Object.prototype.hasOwnProperty,xG=Object.prototype.propertyIsEnumerable,J4=(n,e,t)=>e in n?S0e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_C=(n,e)=>{for(var t in e||(e={}))vG.call(e,t)&&J4(n,t,e[t]);if(M1)for(var t of M1(e))xG.call(e,t)&&J4(n,t,e[t]);return n},wC=(n,e)=>{var t={};for(var r in n)vG.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&M1)for(var r of M1(n))e.indexOf(r)<0&&xG.call(n,r)&&(t[r]=n[r]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Jd;(n=>{const e=class Qt{constructor(l,c,u,d){if(this.version=l,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],l<Qt.MIN_VERSION||l>Qt.MAX_VERSION)throw new RangeError("Version value out of range");if(d<-1||d>7)throw new RangeError("Mask value out of range");this.size=l*4+17;let f=[];for(let v=0;v<this.size;v++)f.push(!1);for(let v=0;v<this.size;v++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const g=this.addEccAndInterleave(u);if(this.drawCodewords(g),d==-1){let v=1e9;for(let y=0;y<8;y++){this.applyMask(y),this.drawFormatBits(y);const x=this.getPenaltyScore();x<v&&(d=y,v=x),this.applyMask(y)}}i(0<=d&&d<=7),this.mask=d,this.applyMask(d),this.drawFormatBits(d),this.isFunction=[]}static encodeText(l,c){const u=n.QrSegment.makeSegments(l);return Qt.encodeSegments(u,c)}static encodeBinary(l,c){const u=n.QrSegment.makeBytes(l);return Qt.encodeSegments([u],c)}static encodeSegments(l,c,u=1,d=40,f=-1,g=!0){if(!(Qt.MIN_VERSION<=u&&u<=d&&d<=Qt.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let v,y;for(v=u;;v++){const S=Qt.getNumDataCodewords(v,c)*8,M=o.getTotalBits(l,v);if(M<=S){y=M;break}if(v>=d)throw new RangeError("Data too long")}for(const S of[Qt.Ecc.MEDIUM,Qt.Ecc.QUARTILE,Qt.Ecc.HIGH])g&&y<=Qt.getNumDataCodewords(v,S)*8&&(c=S);let x=[];for(const S of l){t(S.mode.modeBits,4,x),t(S.numChars,S.mode.numCharCountBits(v),x);for(const M of S.getData())x.push(M)}i(x.length==y);const _=Qt.getNumDataCodewords(v,c)*8;i(x.length<=_),t(0,Math.min(4,_-x.length),x),t(0,(8-x.length%8)%8,x),i(x.length%8==0);for(let S=236;x.length<_;S^=253)t(S,8,x);let w=[];for(;w.length*8<x.length;)w.push(0);return x.forEach((S,M)=>w[M>>>3]|=S<<7-(M&7)),new Qt(v,c,w,f)}getModule(l,c){return 0<=l&&l<this.size&&0<=c&&c<this.size&&this.modules[c][l]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const l=this.getAlignmentPatternPositions(),c=l.length;for(let u=0;u<c;u++)for(let d=0;d<c;d++)u==0&&d==0||u==0&&d==c-1||u==c-1&&d==0||this.drawAlignmentPattern(l[u],l[d]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(l){const c=this.errorCorrectionLevel.formatBits<<3|l;let u=c;for(let f=0;f<10;f++)u=u<<1^(u>>>9)*1335;const d=(c<<10|u)^21522;i(d>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,r(d,f));this.setFunctionModule(8,7,r(d,6)),this.setFunctionModule(8,8,r(d,7)),this.setFunctionModule(7,8,r(d,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,r(d,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,r(d,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,r(d,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let l=this.version;for(let u=0;u<12;u++)l=l<<1^(l>>>11)*7973;const c=this.version<<12|l;i(c>>>18==0);for(let u=0;u<18;u++){const d=r(c,u),f=this.size-11+u%3,g=Math.floor(u/3);this.setFunctionModule(f,g,d),this.setFunctionModule(g,f,d)}}drawFinderPattern(l,c){for(let u=-4;u<=4;u++)for(let d=-4;d<=4;d++){const f=Math.max(Math.abs(d),Math.abs(u)),g=l+d,v=c+u;0<=g&&g<this.size&&0<=v&&v<this.size&&this.setFunctionModule(g,v,f!=2&&f!=4)}}drawAlignmentPattern(l,c){for(let u=-2;u<=2;u++)for(let d=-2;d<=2;d++)this.setFunctionModule(l+d,c+u,Math.max(Math.abs(d),Math.abs(u))!=1)}setFunctionModule(l,c,u){this.modules[c][l]=u,this.isFunction[c][l]=!0}addEccAndInterleave(l){const c=this.version,u=this.errorCorrectionLevel;if(l.length!=Qt.getNumDataCodewords(c,u))throw new RangeError("Invalid argument");const d=Qt.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c],f=Qt.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c],g=Math.floor(Qt.getNumRawDataModules(c)/8),v=d-g%d,y=Math.floor(g/d);let x=[];const _=Qt.reedSolomonComputeDivisor(f);for(let S=0,M=0;S<d;S++){let I=l.slice(M,M+y-f+(S<v?0:1));M+=I.length;const L=Qt.reedSolomonComputeRemainder(I,_);S<v&&I.push(0),x.push(I.concat(L))}let w=[];for(let S=0;S<x[0].length;S++)x.forEach((M,I)=>{(S!=y-f||I>=v)&&w.push(M[S])});return i(w.length==g),w}drawCodewords(l){if(l.length!=Math.floor(Qt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let d=0;d<this.size;d++)for(let f=0;f<2;f++){const g=u-f,y=(u+1&2)==0?this.size-1-d:d;!this.isFunction[y][g]&&c<l.length*8&&(this.modules[y][g]=r(l[c>>>3],7-(c&7)),c++)}}i(c==l.length*8)}applyMask(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let u=0;u<this.size;u++){let d;switch(l){case 0:d=(u+c)%2==0;break;case 1:d=c%2==0;break;case 2:d=u%3==0;break;case 3:d=(u+c)%3==0;break;case 4:d=(Math.floor(u/3)+Math.floor(c/2))%2==0;break;case 5:d=u*c%2+u*c%3==0;break;case 6:d=(u*c%2+u*c%3)%2==0;break;case 7:d=((u+c)%2+u*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][u]&&d&&(this.modules[c][u]=!this.modules[c][u])}}getPenaltyScore(){let l=0;for(let f=0;f<this.size;f++){let g=!1,v=0,y=[0,0,0,0,0,0,0];for(let x=0;x<this.size;x++)this.modules[f][x]==g?(v++,v==5?l+=Qt.PENALTY_N1:v>5&&l++):(this.finderPenaltyAddHistory(v,y),g||(l+=this.finderPenaltyCountPatterns(y)*Qt.PENALTY_N3),g=this.modules[f][x],v=1);l+=this.finderPenaltyTerminateAndCount(g,v,y)*Qt.PENALTY_N3}for(let f=0;f<this.size;f++){let g=!1,v=0,y=[0,0,0,0,0,0,0];for(let x=0;x<this.size;x++)this.modules[x][f]==g?(v++,v==5?l+=Qt.PENALTY_N1:v>5&&l++):(this.finderPenaltyAddHistory(v,y),g||(l+=this.finderPenaltyCountPatterns(y)*Qt.PENALTY_N3),g=this.modules[x][f],v=1);l+=this.finderPenaltyTerminateAndCount(g,v,y)*Qt.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let g=0;g<this.size-1;g++){const v=this.modules[f][g];v==this.modules[f][g+1]&&v==this.modules[f+1][g]&&v==this.modules[f+1][g+1]&&(l+=Qt.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((g,v)=>g+(v?1:0),c);const u=this.size*this.size,d=Math.ceil(Math.abs(c*20-u*10)/u)-1;return i(0<=d&&d<=9),l+=d*Qt.PENALTY_N4,i(0<=l&&l<=2568888),l}getAlignmentPatternPositions(){if(this.version==1)return[];{const l=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(l*2-2))*2;let u=[6];for(let d=this.size-7;u.length<l;d-=c)u.splice(1,0,d);return u}}static getNumRawDataModules(l){if(l<Qt.MIN_VERSION||l>Qt.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*l+128)*l+64;if(l>=2){const u=Math.floor(l/7)+2;c-=(25*u-10)*u-55,l>=7&&(c-=36)}return i(208<=c&&c<=29648),c}static getNumDataCodewords(l,c){return Math.floor(Qt.getNumRawDataModules(l)/8)-Qt.ECC_CODEWORDS_PER_BLOCK[c.ordinal][l]*Qt.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][l]}static reedSolomonComputeDivisor(l){if(l<1||l>255)throw new RangeError("Degree out of range");let c=[];for(let d=0;d<l-1;d++)c.push(0);c.push(1);let u=1;for(let d=0;d<l;d++){for(let f=0;f<c.length;f++)c[f]=Qt.reedSolomonMultiply(c[f],u),f+1<c.length&&(c[f]^=c[f+1]);u=Qt.reedSolomonMultiply(u,2)}return c}static reedSolomonComputeRemainder(l,c){let u=c.map(d=>0);for(const d of l){const f=d^u.shift();u.push(0),c.forEach((g,v)=>u[v]^=Qt.reedSolomonMultiply(g,f))}return u}static reedSolomonMultiply(l,c){if(l>>>8||c>>>8)throw new RangeError("Byte out of range");let u=0;for(let d=7;d>=0;d--)u=u<<1^(u>>>7)*285,u^=(c>>>d&1)*l;return i(u>>>8==0),u}finderPenaltyCountPatterns(l){const c=l[1];i(c<=this.size*3);const u=c>0&&l[2]==c&&l[3]==c*3&&l[4]==c&&l[5]==c;return(u&&l[0]>=c*4&&l[6]>=c?1:0)+(u&&l[6]>=c*4&&l[0]>=c?1:0)}finderPenaltyTerminateAndCount(l,c,u){return l&&(this.finderPenaltyAddHistory(c,u),c=0),c+=this.size,this.finderPenaltyAddHistory(c,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(l,c){c[0]==0&&(l+=this.size),c.pop(),c.unshift(l)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(a,l,c){if(l<0||l>31||a>>>l)throw new RangeError("Value out of range");for(let u=l-1;u>=0;u--)c.push(a>>>u&1)}function r(a,l){return(a>>>l&1)!=0}function i(a){if(!a)throw new Error("Assertion error")}const s=class or{constructor(l,c,u){if(this.mode=l,this.numChars=c,this.bitData=u,c<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(l){let c=[];for(const u of l)t(u,8,c);return new or(or.Mode.BYTE,l.length,c)}static makeNumeric(l){if(!or.isNumeric(l))throw new RangeError("String contains non-numeric characters");let c=[];for(let u=0;u<l.length;){const d=Math.min(l.length-u,3);t(parseInt(l.substring(u,u+d),10),d*3+1,c),u+=d}return new or(or.Mode.NUMERIC,l.length,c)}static makeAlphanumeric(l){if(!or.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],u;for(u=0;u+2<=l.length;u+=2){let d=or.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u))*45;d+=or.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u+1)),t(d,11,c)}return u<l.length&&t(or.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u)),6,c),new or(or.Mode.ALPHANUMERIC,l.length,c)}static makeSegments(l){return l==""?[]:or.isNumeric(l)?[or.makeNumeric(l)]:or.isAlphanumeric(l)?[or.makeAlphanumeric(l)]:[or.makeBytes(or.toUtf8ByteArray(l))]}static makeEci(l){let c=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)t(l,8,c);else if(l<16384)t(2,2,c),t(l,14,c);else if(l<1e6)t(6,3,c),t(l,21,c);else throw new RangeError("ECI assignment value out of range");return new or(or.Mode.ECI,0,c)}static isNumeric(l){return or.NUMERIC_REGEX.test(l)}static isAlphanumeric(l){return or.ALPHANUMERIC_REGEX.test(l)}getData(){return this.bitData.slice()}static getTotalBits(l,c){let u=0;for(const d of l){const f=d.mode.numCharCountBits(c);if(d.numChars>=1<<f)return 1/0;u+=4+f+d.bitData.length}return u}static toUtf8ByteArray(l){l=encodeURI(l);let c=[];for(let u=0;u<l.length;u++)l.charAt(u)!="%"?c.push(l.charCodeAt(u)):(c.push(parseInt(l.substring(u+1,u+3),16)),u+=2);return c}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=s;n.QrSegment=s})(Jd||(Jd={}));(n=>{(e=>{const t=class{constructor(i,s){this.ordinal=i,this.formatBits=s}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(Jd||(Jd={}));(n=>{(e=>{const t=class{constructor(i,s){this.modeBits=i,this.numBitsCharCount=s}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(Jd||(Jd={}));var Bf=Jd;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var E0e={L:Bf.QrCode.Ecc.LOW,M:Bf.QrCode.Ecc.MEDIUM,Q:Bf.QrCode.Ecc.QUARTILE,H:Bf.QrCode.Ecc.HIGH},_G=128,wG="L",bG="#FFFFFF",SG="#000000",EG=!1,TG=1,T0e=4,M0e=0,A0e=.1;function MG(n,e=0){const t=[];return n.forEach(function(r,i){let s=null;r.forEach(function(o,a){if(!o&&s!==null){t.push(`M${s+e} ${i+e}h${a-s}v1H${s+e}z`),s=null;return}if(a===r.length-1){if(!o)return;s===null?t.push(`M${a+e},${i+e} h1v1H${a+e}z`):t.push(`M${s+e},${i+e} h${a+1-s}v1H${s+e}z`);return}o&&s===null&&(s=a)})}),t.join("")}function AG(n,e){return n.slice().map((t,r)=>r<e.y||r>=e.y+e.h?t:t.map((i,s)=>s<e.x||s>=e.x+e.w?i:!1))}function C0e(n,e,t,r){if(r==null)return null;const i=n.length+t*2,s=Math.floor(e*A0e),o=i/e,a=(r.width||s)*o,l=(r.height||s)*o,c=r.x==null?n.length/2-a/2:r.x*o,u=r.y==null?n.length/2-l/2:r.y*o,d=r.opacity==null?1:r.opacity;let f=null;if(r.excavate){let v=Math.floor(c),y=Math.floor(u),x=Math.ceil(a+c-v),_=Math.ceil(l+u-y);f={x:v,y,w:x,h:_}}const g=r.crossOrigin;return{x:c,y:u,h:l,w:a,excavation:f,opacity:d,crossOrigin:g}}function P0e(n,e){return e!=null?Math.max(Math.floor(e),0):n?T0e:M0e}function CG({value:n,level:e,minVersion:t,includeMargin:r,marginSize:i,imageSettings:s,size:o,boostLevel:a}){let l=Ht.useMemo(()=>{const v=(Array.isArray(n)?n:[n]).reduce((y,x)=>(y.push(...Bf.QrSegment.makeSegments(x)),y),[]);return Bf.QrCode.encodeSegments(v,E0e[e],t,void 0,void 0,a)},[n,e,t,a]);const{cells:c,margin:u,numCells:d,calculatedImageSettings:f}=Ht.useMemo(()=>{let g=l.getModules();const v=P0e(r,i),y=g.length+v*2,x=C0e(g,o,v,s);return{cells:g,margin:v,numCells:y,calculatedImageSettings:x}},[l,o,s,r,i]);return{qrcode:l,margin:u,cells:c,numCells:d,calculatedImageSettings:f}}var I0e=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),R0e=Ht.forwardRef(function(e,t){const r=e,{value:i,size:s=_G,level:o=wG,bgColor:a=bG,fgColor:l=SG,includeMargin:c=EG,minVersion:u=TG,boostLevel:d,marginSize:f,imageSettings:g}=r,y=wC(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:x}=y,_=wC(y,["style"]),w=g==null?void 0:g.src,S=Ht.useRef(null),M=Ht.useRef(null),I=Ht.useCallback(B=>{S.current=B,typeof t=="function"?t(B):t&&(t.current=B)},[t]),[L,P]=Ht.useState(!1),{margin:T,cells:C,numCells:k,calculatedImageSettings:O}=CG({value:i,level:o,minVersion:u,boostLevel:d,includeMargin:c,marginSize:f,imageSettings:g,size:s});Ht.useEffect(()=>{if(S.current!=null){const B=S.current,Z=B.getContext("2d");if(!Z)return;let ne=C;const oe=M.current,z=O!=null&&oe!==null&&oe.complete&&oe.naturalHeight!==0&&oe.naturalWidth!==0;z&&O.excavation!=null&&(ne=AG(C,O.excavation));const G=window.devicePixelRatio||1;B.height=B.width=s*G;const q=s/k*G;Z.scale(q,q),Z.fillStyle=a,Z.fillRect(0,0,k,k),Z.fillStyle=l,I0e?Z.fill(new Path2D(MG(ne,T))):C.forEach(function(se,J){se.forEach(function(he,_e){he&&Z.fillRect(_e+T,J+T,1,1)})}),O&&(Z.globalAlpha=O.opacity),z&&Z.drawImage(oe,O.x+T,O.y+T,O.w,O.h)}}),Ht.useEffect(()=>{P(!1)},[w]);const U=_C({height:s,width:s},x);let V=null;return w!=null&&(V=Ht.createElement("img",{src:w,key:w,style:{display:"none"},onLoad:()=>{P(!0)},ref:M,crossOrigin:O==null?void 0:O.crossOrigin})),Ht.createElement(Ht.Fragment,null,Ht.createElement("canvas",_C({style:U,height:s,width:s,ref:I,role:"img"},_)),V)});R0e.displayName="QRCodeCanvas";var PG=Ht.forwardRef(function(e,t){const r=e,{value:i,size:s=_G,level:o=wG,bgColor:a=bG,fgColor:l=SG,includeMargin:c=EG,minVersion:u=TG,boostLevel:d,title:f,marginSize:g,imageSettings:v}=r,y=wC(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:x,cells:_,numCells:w,calculatedImageSettings:S}=CG({value:i,level:o,minVersion:u,boostLevel:d,includeMargin:c,marginSize:g,imageSettings:v,size:s});let M=_,I=null;v!=null&&S!=null&&(S.excavation!=null&&(M=AG(_,S.excavation)),I=Ht.createElement("image",{href:v.src,height:S.h,width:S.w,x:S.x+x,y:S.y+x,preserveAspectRatio:"none",opacity:S.opacity,crossOrigin:S.crossOrigin}));const L=MG(M,x);return Ht.createElement("svg",_C({height:s,width:s,viewBox:`0 0 ${w} ${w}`,ref:t,role:"img"},y),!!f&&Ht.createElement("title",null,f),Ht.createElement("path",{fill:a,d:`M0,0 h${w}v${w}H0z`,shapeRendering:"crispEdges"}),Ht.createElement("path",{fill:l,d:L,shapeRendering:"crispEdges"}),I)});PG.displayName="QRCodeSVG";function k0e({member:n}){const[e,t]=R.useState(!1),r=()=>{t(!0);const s=document.getElementById("printable-card"),o=document.body.innerHTML;s&&(document.body.innerHTML=s.innerHTML,window.print(),document.body.innerHTML=o,t(!1),window.location.reload())},i=JSON.stringify({id:n.id,name:n.fullName,registrationNumber:n.registrationNumber,status:n.membershipStatus});return m.jsxs("div",{className:"max-w-md mx-auto",children:[m.jsx(zo,{className:"mb-4 border-2 border-primary overflow-hidden",children:m.jsxs("div",{id:"printable-card",children:[m.jsxs(np,{className:"bg-primary text-white p-4 flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-heading font-bold",children:"MAHAPALA NAROTAMA"}),m.jsx("p",{className:"text-xs",children:"Universitas Narotama Surabaya"})]}),m.jsx("div",{className:"text-right",children:m.jsxs("p",{className:"text-xs",children:["ID: ",n.registrationNumber]})})]}),m.jsxs(Sa,{className:"p-4",children:[m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"mr-4",children:m.jsx("div",{className:"w-24 h-32 bg-gray-200 rounded-md flex items-center justify-center",children:n.photoUrl?m.jsx("img",{src:n.photoUrl,alt:n.fullName,className:"w-full h-full object-cover rounded-md"}):m.jsx(XJ,{className:"h-10 w-10 text-gray-400"})})}),m.jsx("div",{className:"flex-1",children:m.jsx("table",{className:"w-full text-sm",children:m.jsxs("tbody",{children:[m.jsxs("tr",{children:[m.jsx("td",{className:"py-1 font-medium",children:"Nama"}),m.jsxs("td",{className:"py-1",children:[": ",n.fullName]})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"py-1 font-medium",children:"Nama Lapangan"}),m.jsxs("td",{className:"py-1",children:[": ",n.fieldName]})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"py-1 font-medium",children:"Angkatan"}),m.jsxs("td",{className:"py-1",children:[": ",n.batchName," ",n.batchYear]})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"py-1 font-medium",children:"Status"}),m.jsxs("td",{className:"py-1",children:[":",m.jsx("span",{className:`${n.membershipStatus==="Aktif"?"text-green-600":"text-amber-600"} font-medium ml-1`,children:n.membershipStatus})]})]})]})})})]}),m.jsx("div",{className:"mt-4 flex justify-center",children:m.jsx("div",{className:"p-2 bg-white rounded-md",children:m.jsx(PG,{value:i,size:128})})})]})]})}),m.jsx("div",{className:"mt-4 flex justify-center",children:m.jsxs(vt,{onClick:r,disabled:e,className:"gap-2",children:[m.jsx(f2,{className:"h-4 w-4"}),"Cetak Kartu"]})})]})}const cy=R.forwardRef(({className:n,...e},t)=>m.jsx("div",{className:"relative w-full overflow-auto",children:m.jsx("table",{ref:t,className:gt("w-full caption-bottom text-sm",n),...e})}));cy.displayName="Table";const uy=R.forwardRef(({className:n,...e},t)=>m.jsx("thead",{ref:t,className:gt("[&_tr]:border-b",n),...e}));uy.displayName="TableHeader";const dy=R.forwardRef(({className:n,...e},t)=>m.jsx("tbody",{ref:t,className:gt("[&_tr:last-child]:border-0",n),...e}));dy.displayName="TableBody";const N0e=R.forwardRef(({className:n,...e},t)=>m.jsx("tfoot",{ref:t,className:gt("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...e}));N0e.displayName="TableFooter";const rl=R.forwardRef(({className:n,...e},t)=>m.jsx("tr",{ref:t,className:gt("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...e}));rl.displayName="TableRow";const lr=R.forwardRef(({className:n,...e},t)=>m.jsx("th",{ref:t,className:gt("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...e}));lr.displayName="TableHead";const cr=R.forwardRef(({className:n,...e},t)=>m.jsx("td",{ref:t,className:gt("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...e}));cr.displayName="TableCell";const D0e=R.forwardRef(({className:n,...e},t)=>m.jsx("caption",{ref:t,className:gt("mt-4 text-sm text-muted-foreground",n),...e}));D0e.displayName="TableCaption";function Yh({value:n,duration:e=1e3,className:t=""}){const[r,i]=R.useState(0),s=R.useRef(),o=R.useRef(),a=R.useRef(0);return R.useEffect(()=>{a.current=0,i(0);function l(c){o.current||(o.current=c);const u=Math.min((c-o.current)/e,1);i(Math.floor(u*(n-a.current)+a.current)),u<1?s.current=requestAnimationFrame(l):i(n)}return s.current=requestAnimationFrame(l),()=>{s.current&&cancelAnimationFrame(s.current),o.current=void 0}},[n,e]),m.jsx("span",{className:t,children:r.toLocaleString()})}function L0e({open:n,onClose:e,frontUrl:t,backUrl:r,fullName:i}){const[s,o]=R.useState(!0);R.useEffect(()=>{n&&o(!0)},[n]);const a=()=>{const l=new URLSearchParams({frontUrl:t,backUrl:r,fullName:i});window.open(`/member-card-3d?${l.toString()}`,"_blank")};return n?m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:[m.jsx("div",{className:"absolute inset-0",onClick:e}),m.jsxs("div",{className:"relative z-10 rounded-2xl overflow-hidden shadow-2xl bg-white/10 p-6 flex flex-col items-center",children:[m.jsxs("div",{className:"w-[340px] h-[220px] mb-4",style:{perspective:1200},children:[m.jsxs("div",{className:`relative w-full h-full transition-transform duration-700 [transform-style:preserve-3d] ${s?"":"[transform:rotateY(180deg)]"}`,children:[m.jsx("img",{src:t,alt:i+" - depan",className:"absolute w-full h-full object-cover rounded-2xl shadow-lg bg-white [backface-visibility:hidden]",style:{backfaceVisibility:"hidden",aspectRatio:"340/220"}}),m.jsx("img",{src:r,alt:i+" - belakang",className:"absolute w-full h-full object-cover rounded-2xl shadow-lg bg-white [backface-visibility:hidden]",style:{transform:"rotateY(180deg)",backfaceVisibility:"hidden",aspectRatio:"340/220"}})]}),m.jsx("button",{className:"absolute top-2 right-2 bg-white/80 hover:bg-white rounded-full p-2 shadow",title:"Tampilkan 3D Fullscreen",onClick:a,children:m.jsx(HJ,{className:"w-5 h-5 text-gray-700"})})]}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx(vt,{variant:"secondary",onClick:()=>o(!s),children:s?"Lihat Belakang":"Lihat Depan"}),m.jsx(vt,{variant:"outline",onClick:e,children:"Tutup"})]})]})]}):null}function O0e({onClose:n}){const[e,t]=R.useState(null);return R.useEffect(()=>{function r(){const o=new Date,a=o.getMonth()>0||o.getMonth()===0&&o.getDate()>26?o.getFullYear()+1:o.getFullYear();return new Date(a,0,26,0,0,0,0)}function i(){const o=new Date,l=r().getTime()-o.getTime();if(l<=0)return{days:0,hours:0,minutes:0,seconds:0};const c=Math.floor(l/(1e3*60*60*24)),u=Math.floor(l/(1e3*60*60)%24),d=Math.floor(l/(1e3*60)%60),f=Math.floor(l/1e3%60);return{days:c,hours:u,minutes:d,seconds:f}}t(i());const s=setInterval(()=>{t(i())},1e3);return()=>clearInterval(s)},[]),m.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/40",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-sm w-full text-center",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Countdown Ulang Tahun"}),e?m.jsxs("div",{className:"mb-4 text-2xl font-mono flex justify-center gap-2",children:[m.jsxs("span",{children:[e.days," ",m.jsx("span",{className:"text-xs font-normal",children:"hari"})]}),m.jsx("span",{children:":"}),m.jsxs("span",{children:[String(e.hours).padStart(2,"0"),m.jsx("span",{className:"text-xs font-normal",children:"j"})]}),m.jsx("span",{children:":"}),m.jsxs("span",{children:[String(e.minutes).padStart(2,"0"),m.jsx("span",{className:"text-xs font-normal",children:"m"})]}),m.jsx("span",{children:":"}),m.jsxs("span",{children:[String(e.seconds).padStart(2,"0"),m.jsx("span",{className:"text-xs font-normal",children:"d"})]})]}):m.jsx("p",{className:"mb-4",children:"Menghitung..."}),m.jsxs("p",{className:"mb-4",children:["Menuju ulang tahun ",m.jsx("b",{children:"Mahapala Narotama"})," yang ke"," ",(()=>{const r=new Date;return(r.getMonth()>0||r.getMonth()===0&&r.getDate()>26?r.getFullYear()+1:r.getFullYear())-2017})()," ","pada tanggal 26 Januari ",(()=>{const r=new Date;return r.getMonth()>0||r.getMonth()===0&&r.getDate()>26?r.getFullYear()+1:r.getFullYear()})()]}),m.jsx(vt,{onClick:n,children:"Tutup"})]})})}function F0e(){const[n,e]=R.useState("fullName"),[t,r]=R.useState(""),[i,s]=R.useState(!0),[o,a]=R.useState(null),[l,c]=R.useState({open:!1,photoUrl:"",fullName:"",zoom:!1}),[u,d]=R.useState({open:!1,frontUrl:"",backUrl:"",fullName:""}),[f,g]=R.useState(!1),{data:v,isLoading:y}=b0e(),x=()=>{},_=()=>{a(null),s(!0)},w=v==null?void 0:v.filter(B=>{if(!t)return!0;const Z=t.toLowerCase();switch(n){case"fullName":return B.fullName.toLowerCase().includes(Z);case"batchYear":return B.batchYear.toString().includes(Z);case"registrationNumber":return B.registrationNumber.toLowerCase().includes(Z);default:return!0}}),S=v==null?void 0:v.find(B=>B.id===o),M=new Date(2017,0,26),I=new Date,L=I.getFullYear()-M.getFullYear(),P=I.getMonth()-M.getMonth(),T=I.getDate()-M.getDate();let C=`${L} tahun`;P>0||P===0&&T>=0?C=`${L} tahun
${P>=0?P:12+P} bulan`:L>0&&(C=`${L-1} tahun
${12+P} bulan`);const k=(v==null?void 0:v.length)||0,O=v?Array.from(new Set(v.map(B=>B.batchName))).length:0,U=v?v.filter(B=>(B.gender||"").toLowerCase()==="laki-laki"||(B.gender||"").toLowerCase()==="l"||(B.gender||"").toLowerCase()==="male").length:0,V=v?v.filter(B=>(B.gender||"").toLowerCase()==="perempuan"||(B.gender||"").toLowerCase()==="p"||(B.gender||"").toLowerCase()==="female").length:0;return m.jsx(m.Fragment,{children:m.jsx("section",{id:"kartu-anggota",className:"py-8 sm:py-12 bg-white",children:m.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[m.jsxs("div",{className:"grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7 gap-3 sm:gap-4 mb-6 sm:mb-10 text-center",children:[m.jsxs("div",{className:"bg-green-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full relative",children:[m.jsx("button",{type:"button",className:"absolute top-2 right-2 p-1 rounded-full hover:bg-green-100 transition","aria-label":"Lihat hitung mundur ulang tahun",onClick:()=>g(!0),children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-pink-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7c0-1.105.895-2 2-2s2 .895 2 2"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7c0-1.105-.895-2-2-2s-2 .895-2 2"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v2"})]})}),m.jsx("span",{className:"text-xs text-gray-500 mb-1",children:"Umur Organisasi"}),m.jsx("span",{className:"text-2xl font-bold text-green-700 whitespace-pre-line",children:C}),m.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Sejak 26 Januari 2017"}),f&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:[m.jsx("div",{className:"absolute inset-0",onClick:()=>g(!1)}),m.jsxs("div",{className:"relative z-10 bg-white rounded-xl shadow-lg p-8 flex flex-col items-center min-w-[320px]",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-pink-500 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7c0-1.105.895-2 2-2s2 .895 2 2"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7c0-1.105-.895-2-2-2s-2 .895-2 2"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v2"})]}),m.jsx(O0e,{name:"Organisasi",onClose:()=>g(!1)}),m.jsx(vt,{className:"mt-4",variant:"outline",onClick:()=>g(!1),children:"Tutup"})]})]})]}),m.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full",children:[m.jsx("span",{className:"text-s text-gray-500 mb-1",children:"Jumlah Anggota"}),m.jsx(Yh,{value:k,className:"text-2xl font-bold text-blue-700"}),m.jsx("span",{className:"text-s text-gray-400 mt-1",children:"Total anggota terdaftar"})]}),m.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full",children:[m.jsx("span",{className:"text-s text-gray-500 mb-1",children:"Jumlah Angkatan"}),m.jsx(Yh,{value:O,className:"text-2xl font-bold text-yellow-700"}),m.jsx("span",{className:"text-s text-gray-400 mt-1",children:"Total Angkatan"})]}),m.jsxs("div",{className:"bg-emerald-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full",children:[m.jsx("span",{className:"text-s text-gray-500 mb-1",children:"Anggota Penuh"}),m.jsx(Yh,{value:v?v.filter(B=>B.membershipStatus==="Anggota Penuh").length:0,className:"text-2xl font-bold text-emerald-700"}),m.jsx("span",{className:"text-s text-gray-400 mt-1",children:"Total anggota penuh"})]}),m.jsxs("div",{className:"bg-lime-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full",children:[m.jsx("span",{className:"text-s text-gray-500 mb-1",children:"Anggota Muda"}),m.jsx(Yh,{value:v?v.filter(B=>B.membershipStatus==="Anggota Muda").length:0,className:"text-2xl font-bold text-lime-700"}),m.jsx("span",{className:"text-s text-gray-400 mt-1",children:"Total anggota muda"})]}),m.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full",children:[m.jsx("span",{className:"text-s text-gray-500 mb-1",children:"Anggota Laki-laki"}),m.jsx(Yh,{value:U,className:"text-2xl font-bold text-indigo-700"}),m.jsx("span",{className:"text-s text-gray-400 mt-1",children:"Total anggota laki-laki"})]}),m.jsxs("div",{className:"bg-pink-50 rounded-lg p-4 flex flex-col items-center justify-center text-center shadow h-full",children:[m.jsx("span",{className:"text-s text-gray-500 mb-1",children:"Anggota Perempuan"}),m.jsx(Yh,{value:V,className:"text-2xl font-bold text-pink-700"}),m.jsx("span",{className:"text-s text-gray-400 mt-1",children:"Total anggota perempuan"})]})]}),i?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"max-w-3xl mx-auto mb-8 sm:mb-10 bg-gray-50 p-3 sm:p-6 rounded-lg shadow-md",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("p",{className:"text-gray-700 mb-4",children:"Masukkan informasi anggota untuk pencarian:"}),m.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[m.jsx("div",{className:"flex-1",children:m.jsxs(pG,{value:n,onValueChange:e,children:[m.jsx(PR,{children:m.jsx(mG,{placeholder:"Pilih Tipe Pencarian"})}),m.jsxs(IR,{className:"bg-white",children:[m.jsx(up,{value:"fullName",children:"Nama Lengkap"}),m.jsx(up,{value:"batchYear",children:"Tahun Angkatan"}),m.jsx(up,{value:"registrationNumber",children:"Nomor Registrasi"})]})]})}),m.jsx("div",{className:"flex-1",children:m.jsx(Fr,{placeholder:"Masukkan kata kunci...",value:t,onChange:B=>r(B.target.value)})}),m.jsxs(vt,{onClick:x,className:"gap-2",children:[m.jsx(qJ,{className:"h-4 w-4"}),"Cari"]})]})]}),m.jsx("div",{className:"text-sm text-gray-500",children:m.jsxs("p",{className:"flex items-center gap-1",children:[m.jsx("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Data anggota hanya dapat diakses oleh pihak yang berwenang. Hasil pencarian akan menampilkan informasi dasar anggota."]})})]}),t?m.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow-md",children:y?m.jsx("div",{className:"p-8",children:m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx(Ri,{className:"h-8 w-full"}),m.jsx(Ri,{className:"h-8 w-full"}),m.jsx(Ri,{className:"h-8 w-full"}),m.jsx(Ri,{className:"h-8 w-full"})]})}):w&&w.length>0?m.jsxs(cy,{className:"min-w-[600px] text-xs sm:text-sm md:text-base",children:[m.jsx(uy,{children:m.jsxs(rl,{children:[m.jsx(lr,{children:"Nama Lengkap"}),m.jsx(lr,{children:"Nama Lapangan"}),m.jsx(lr,{children:"Nama Angkatan"}),m.jsx(lr,{children:"Tahun Angkatan"}),m.jsx(lr,{children:"No. Registrasi"}),m.jsx(lr,{children:"Keanggotaan"}),m.jsx(lr,{children:"Aksi"})]})}),m.jsx(dy,{children:w.map(B=>m.jsxs(rl,{children:[m.jsx(cr,{className:"font-medium",children:B.fullName}),m.jsx(cr,{children:B.fieldName}),m.jsx(cr,{children:B.batchName}),m.jsx(cr,{children:B.batchYear}),m.jsx(cr,{children:B.registrationNumber}),m.jsx(cr,{children:B.membershipStatus==="Anggota Penuh"?m.jsx($i,{variant:"penuh",children:"Anggota Penuh"}):B.membershipStatus==="Anggota Muda"?m.jsx($i,{variant:"muda",children:"Anggota Muda"}):m.jsx($i,{children:B.membershipStatus})}),m.jsxs(cr,{className:"flex space-x-2",children:[m.jsx(vt,{variant:"outline",size:"icon",onClick:()=>c({open:!0,photoUrl:B.photoUrl||"",fullName:B.fullName}),className:"text-primary hover:text-primary-foreground hover:bg-primary",disabled:!B.photoUrl,children:m.jsx(OJ,{className:"h-4 w-4"})}),m.jsx(vt,{variant:"outline",size:"icon",onClick:()=>d({open:!0,frontUrl:B.photoUrl||"",backUrl:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/back.png",fullName:B.fullName}),className:"text-primary hover:text-primary-foreground hover:bg-primary",disabled:!B.photoUrl,children:m.jsx("span",{className:"font-bold",children:"3D"})})]})]},B.id))})]}):m.jsxs("div",{className:"text-center py-8",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Tidak ada anggota ditemukan"}),m.jsx("p",{className:"text-gray-500",children:"Coba ubah kata kunci pencarian Anda"})]})}):m.jsxs("div",{className:"text-center py-8",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Masukkan kata kunci untuk mencari anggota"}),m.jsx("p",{className:"text-gray-500",children:"Anda dapat mencari berdasarkan nama, tahun angkatan, atau nomor registrasi"})]}),m.jsx(Qc,{open:l.open,onOpenChange:B=>c(Z=>({...Z,open:B})),children:m.jsx(Ml,{className:"flex flex-col items-center max-w-full p-2 sm:p-6",children:l.photoUrl&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"relative overflow-hidden rounded border mt-3 mb-4 bg-white w-full max-w-[480px] h-[220px] sm:h-[300px] flex items-center justify-center cursor-zoom-in",style:{maxWidth:"95vw",maxHeight:"70vh"},tabIndex:0,onClick:B=>{B.stopPropagation(),c(Z=>({...Z,zoom:!0}))},onKeyDown:B=>{(B.key==="Enter"||B.key===" ")&&c(Z=>({...Z,zoom:!0}))},"aria-label":"Perbesar gambar",children:[m.jsx("img",{src:l.photoUrl,alt:l.fullName,className:"object-contain w-full h-full",style:{aspectRatio:"3/2",maxHeight:"100%",maxWidth:"100%"}}),m.jsx("span",{className:"absolute bottom-2 right-2 bg-black/60 text-white text-xs px-2 py-1 rounded pointer-events-none",children:"Klik untuk zoom"})]}),m.jsx(vt,{variant:"default",className:"w-full",onClick:async()=>{try{const Z=await(await fetch(l.photoUrl,{mode:"cors"})).blob(),ne=window.URL.createObjectURL(Z),oe=document.createElement("a");oe.href=ne,oe.download=l.photoUrl.split("/").pop()||"kartu-anggota.jpg",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),window.URL.revokeObjectURL(ne)}catch{window.open(l.photoUrl,"_blank")}},children:"Unduh Kartu"}),l.zoom&&m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",onClick:()=>c(B=>({...B,zoom:!1})),children:m.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg p-2 sm:p-4",style:{maxWidth:"98vw",maxHeight:"95vh"},onClick:B=>B.stopPropagation(),children:[m.jsx("img",{src:l.photoUrl,alt:l.fullName,className:"object-contain",style:{maxHeight:"80vh",maxWidth:"95vw"}}),m.jsx(vt,{variant:"outline",className:"absolute top-2 right-2",onClick:()=>c(B=>({...B,zoom:!1})),children:"Tutup"})]})})]})})}),m.jsx(L0e,{open:u.open,onClose:()=>d(B=>({...B,open:!1})),frontUrl:u.frontUrl,backUrl:u.backUrl,fullName:u.fullName})]}):m.jsx(m.Fragment,{children:m.jsxs("div",{className:"mb-6",children:[m.jsx(vt,{variant:"outline",onClick:_,className:"mb-8",children:" Kembali ke Pencarian"}),S&&m.jsx(k0e,{member:{...S,id:String(S.id)}})]})})]})})})}function j0e(){const[n,e]=R.useState("general"),[t,r]=R.useState(!1),[i,s]=R.useState(!1);R.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);const o={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},a={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return m.jsxs(m.Fragment,{children:[m.jsx("section",{className:"py-8 sm:py-12 bg-white",children:m.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[m.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[m.jsxs("h1",{className:"font-heading text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800 mb-3 sm:mb-4 relative inline-block",children:["Informasi Pendaftaran Anggota Baru",m.jsx("span",{className:"absolute -bottom-2 left-0 w-full h-1 bg-primary rounded-full"})]}),m.jsx("p",{className:"text-base sm:text-lg text-gray-600 max-w-3xl mx-auto mt-4 sm:mt-6",children:"Bergabunglah dengan Mahapala Narotama dan jadilah bagian dari komunitas yang peduli terhadap pelestarian lingkungan dan eksplorasi alam."})]}),m.jsx("div",{className:"mb-6 sm:mb-8 flex overflow-x-auto scrollbar-hide",children:m.jsxs("div",{className:"max-w-4xl mx-auto flex space-x-1 p-1 bg-gray-100 rounded-lg w-full",children:[m.jsx(vt,{variant:n==="general"?"default":"ghost",onClick:()=>e("general"),className:"flex-1 whitespace-nowrap",children:"Informasi Umum"}),m.jsx(vt,{variant:n==="requirements"?"default":"ghost",onClick:()=>e("requirements"),className:"flex-1 whitespace-nowrap",children:"Persyaratan"}),m.jsx(vt,{variant:n==="timeline"?"default":"ghost",onClick:()=>e("timeline"),className:"flex-1 whitespace-nowrap",children:"Tahapan Seleksi"}),m.jsx(vt,{variant:n==="faq"?"default":"ghost",onClick:()=>e("faq"),className:"flex-1 whitespace-nowrap",children:"FAQ"})]})}),m.jsxs("div",{className:"max-w-4xl mx-auto",children:[n==="general"&&m.jsxs(yr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"bg-white p-6 rounded-lg shadow-md",children:[m.jsx("h3",{className:"font-heading text-xl font-semibold mb-4",children:"Informasi Umum Pendaftaran"}),m.jsx("p",{className:"text-gray-700 mb-4",children:"Mahapala Narotama membuka pendaftaran anggota baru untuk mahasiswa aktif Universitas Narotama yang memiliki minat dan kepedulian pada alam, lingkungan, dan kegiatan outdoor. Pendaftaran dilaksanakan setahun sekali pada awal tahun akademik."}),m.jsx("p",{className:"text-gray-700 mb-4",children:"Sebagai anggota Mahapala Narotama, Anda akan memiliki kesempatan untuk:"}),m.jsxs(yr.ul,{className:"space-y-3 mb-6 pl-6",variants:o,initial:"hidden",animate:"show",children:[m.jsxs(yr.li,{variants:a,className:"flex items-start",children:[m.jsx(Wh,{className:"text-primary min-w-5 h-5 mr-2 mt-0.5"}),m.jsx("span",{children:"Mengikuti berbagai ekspedisi dan pendakian gunung di Indonesia"})]}),m.jsxs(yr.li,{variants:a,className:"flex items-start",children:[m.jsx(Wh,{className:"text-primary min-w-5 h-5 mr-2 mt-0.5"}),m.jsx("span",{children:"Berpartisipasi dalam program konservasi dan pelestarian lingkungan"})]}),m.jsxs(yr.li,{variants:a,className:"flex items-start",children:[m.jsx(Wh,{className:"text-primary min-w-5 h-5 mr-2 mt-0.5"}),m.jsx("span",{children:"Mempelajari keterampilan survival, navigasi, dan pertolongan pertama"})]}),m.jsxs(yr.li,{variants:a,className:"flex items-start",children:[m.jsx(Wh,{className:"text-primary min-w-5 h-5 mr-2 mt-0.5"}),m.jsx("span",{children:"Membangun jaringan dengan komunitas pecinta alam di seluruh Indonesia"})]}),m.jsxs(yr.li,{variants:a,className:"flex items-start",children:[m.jsx(Wh,{className:"text-primary min-w-5 h-5 mr-2 mt-0.5"}),m.jsx("span",{children:"Mengembangkan kemampuan kepemimpinan dan kerja sama tim"})]})]}),m.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-400 p-4 mb-6",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx(ez,{className:"h-5 w-5 text-amber-400"})}),m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-amber-700",children:"Pendaftaran hanya dibuka selama periode yang ditentukan. Pastikan Anda melengkapi semua persyaratan dan mengikuti seluruh tahapan seleksi."})})]})}),m.jsx("div",{className:"mt-6 flex justify-center",children:m.jsxs(vt,{className:"gap-2",onClick:()=>r(!0),children:["Daftar Sekarang ",m.jsx(Q5,{className:"h-4 w-4"})]})})]}),n==="requirements"&&m.jsxs(yr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"bg-white p-6 rounded-lg shadow-md",children:[m.jsx("h3",{className:"font-heading text-xl font-semibold mb-4",children:"Persyaratan Pendaftaran"}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h4",{className:"font-medium text-lg mb-2",children:"Persyaratan Umum"}),m.jsxs("ul",{className:"space-y-2 pl-6 list-disc text-gray-700",children:[m.jsx("li",{children:"Mahasiswa aktif Universitas Narotama (dibuktikan dengan kartu mahasiswa)"}),m.jsx("li",{children:"Minimal semester 1 dan maksimal semester 4"}),m.jsx("li",{children:"Sehat jasmani dan rohani (dibuktikan dengan surat keterangan sehat)"}),m.jsx("li",{children:"Memiliki minat dalam kegiatan alam terbuka"}),m.jsx("li",{children:"Bersedia mengikuti seluruh rangkaian proses seleksi"}),m.jsx("li",{children:"Mendapat izin dari orang tua/wali (dibuktikan dengan surat pernyataan)"})]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h4",{className:"font-medium text-lg mb-2",children:"Dokumen Pendaftaran"}),m.jsxs("ul",{className:"space-y-2 pl-6 list-disc text-gray-700",children:[m.jsx("li",{children:"Formulir pendaftaran yang telah diisi lengkap"}),m.jsx("li",{children:"Pas foto berwarna ukuran 3x4 (3 lembar)"}),m.jsx("li",{children:"Fotokopi Kartu Mahasiswa"}),m.jsx("li",{children:"Surat keterangan sehat dari dokter"}),m.jsx("li",{children:"Surat pernyataan kesediaan mengikuti seleksi"}),m.jsx("li",{children:"Surat izin orang tua/wali"}),m.jsx("li",{children:"Essay singkat tentang motivasi bergabung dengan Mahapala (maksimal 1 halaman)"})]})]}),m.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[m.jsx("h4",{className:"font-medium text-lg mb-2",children:"Biaya Pendaftaran"}),m.jsx("p",{className:"text-gray-700 mb-2",children:"Biaya pendaftaran: Rp 250.000,-"}),m.jsx("p",{className:"text-gray-700 mb-2",children:"Biaya tersebut mencakup:"}),m.jsxs("ul",{className:"space-y-1 pl-6 list-disc text-gray-700",children:[m.jsx("li",{children:"Administrasi pendaftaran"}),m.jsx("li",{children:"Kit pendaftaran (formulir, modul, dan atribut)"}),m.jsx("li",{children:"Konsumsi selama proses seleksi"}),m.jsx("li",{children:"Biaya operasional diklat dasar"})]}),m.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"*Pembayaran dapat dilakukan melalui transfer bank atau tunai saat pendaftaran"})]}),m.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx(Wh,{className:"h-5 w-5 text-green-400"})}),m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-green-700",children:'Semua dokumen persyaratan dikumpulkan dalam bentuk hardcopy pada saat pendaftaran dan softcopy dikirim ke email ukm.mahapala@narotama.ac.id dengan subjek "PENDAFTARAN2025_[NAMA]_[NIM]"'})})]})})]}),n==="timeline"&&m.jsxs(yr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"bg-white p-6 rounded-lg shadow-md",children:[m.jsx("h3",{className:"font-heading text-xl font-semibold mb-4",children:"Timeline Pendaftaran & Seleksi"}),m.jsxs("div",{className:"relative ml-6 pl-8 border-l-2 border-primary/30 space-y-10",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute -left-[41px] border-4 border-white rounded-full bg-primary h-6 w-6"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-gray-500",children:"15 - 30 Agustus 2025"}),m.jsx("h4",{className:"font-medium text-gray-800",children:"Pendaftaran Online"}),m.jsx("p",{className:"text-gray-600 text-sm",children:"Pengisian formulir pendaftaran dan pengumpulan berkas persyaratan"})]})]}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute -left-[41px] border-4 border-white rounded-full bg-primary h-6 w-6"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-gray-500",children:"5 - 10 September 2025"}),m.jsx("h4",{className:"font-medium text-gray-800",children:"Tes Tertulis & Wawancara"}),m.jsx("p",{className:"text-gray-600 text-sm",children:"Tes pengetahuan umum dan wawancara motivasi"})]})]}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute -left-[41px] border-4 border-white rounded-full bg-primary h-6 w-6"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-gray-500",children:"15 - 20 September 2025"}),m.jsx("h4",{className:"font-medium text-gray-800",children:"Diklat Dasar"}),m.jsx("p",{className:"text-gray-600 text-sm",children:"Pelatihan dasar kepencintaalaman dan team building"})]})]}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute -left-[41px] border-4 border-white rounded-full bg-primary h-6 w-6"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-gray-500",children:"25 September 2025"}),m.jsx("h4",{className:"font-medium text-gray-800",children:"Pengumuman Hasil Seleksi"}),m.jsx("p",{className:"text-gray-600 text-sm",children:"Pengumuman calon anggota yang lolos seleksi"})]})]}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute -left-[41px] border-4 border-white rounded-full bg-primary h-6 w-6"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-gray-500",children:"30 September 2025"}),m.jsx("h4",{className:"font-medium text-gray-800",children:"Pelantikan Anggota Baru"}),m.jsx("p",{className:"text-gray-600 text-sm",children:"Upacara pelantikan dan penerimaan anggota baru"})]})]})]})]}),n==="faq"&&m.jsxs(yr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"bg-white p-6 rounded-lg shadow-md",children:[m.jsx("h3",{className:"font-heading text-xl font-semibold mb-6",children:"Pertanyaan Umum (FAQ)"}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-lg text-primary",children:"Apakah harus memiliki pengalaman kegiatan outdoor sebelumnya?"}),m.jsx("p",{className:"text-gray-700 mt-2",children:"Tidak, Anda tidak harus memiliki pengalaman kegiatan outdoor sebelumnya. Mahapala Narotama akan memberikan pelatihan dasar untuk semua anggota baru. Yang terpenting adalah minat dan komitmen untuk belajar."})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-lg text-primary",children:"Apakah ada persyaratan fisik tertentu?"}),m.jsx("p",{className:"text-gray-700 mt-2",children:"Tidak ada persyaratan fisik khusus, namun Anda diharapkan dalam kondisi sehat dan siap mengikuti rangkaian kegiatan outdoor yang mungkin membutuhkan stamina dan ketahanan fisik. Latihan fisik dasar akan diberikan selama proses seleksi."})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-lg text-primary",children:"Berapa banyak waktu yang perlu diluangkan jika menjadi anggota Mahapala?"}),m.jsx("p",{className:"text-gray-700 mt-2",children:"Sebagai anggota Mahapala, Anda diharapkan dapat menghadiri pertemuan rutin mingguan (2-3 jam) dan berpartisipasi dalam kegiatan bulanan (biasanya pada akhir pekan). Kegiatan ekspedisi atau pendakian biasanya dilakukan pada masa liburan semester."})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-lg text-primary",children:"Berapa biaya yang diperlukan setelah menjadi anggota?"}),m.jsx("p",{className:"text-gray-700 mt-2",children:"Anggota Mahapala akan dikenakan iuran bulanan sebesar Rp 25.000,- yang digunakan untuk operasional organisasi. Untuk kegiatan-kegiatan tertentu seperti ekspedisi atau pendakian, akan ada biaya tambahan yang besarnya tergantung pada jenis dan lokasi kegiatan."})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-lg text-primary",children:"Apakah perlu memiliki perlengkapan outdoor sendiri?"}),m.jsx("p",{className:"text-gray-700 mt-2",children:"Untuk tahap awal, Anda tidak perlu memiliki semua perlengkapan outdoor. Mahapala memiliki beberapa perlengkapan yang dapat dipinjam oleh anggota. Seiring berjalannya waktu, Anda dapat secara bertahap melengkapi perlengkapan pribadi."})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-lg text-primary",children:"Apakah saya bisa mengikuti kegiatan Mahapala sambil aktif di organisasi lain?"}),m.jsx("p",{className:"text-gray-700 mt-2",children:"Ya, Anda tetap bisa aktif di organisasi lain. Namun, perlu diingat bahwa sebagai anggota Mahapala, Anda diharapkan dapat berkomitmen untuk berpartisipasi dalam kegiatan-kegiatan penting dan memenuhi tanggung jawab sebagai anggota."})]})]}),m.jsxs("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[m.jsx("h4",{className:"font-medium text-center mb-3",children:"Masih punya pertanyaan lain?"}),m.jsx("p",{className:"text-gray-700 text-center mb-4",children:"Jika Anda memiliki pertanyaan lain yang belum terjawab, jangan ragu untuk menghubungi kami."}),m.jsx("div",{className:"flex justify-center",children:m.jsxs(vt,{variant:"outline",className:"gap-2",onClick:()=>s(!0),children:[m.jsx(Dy,{className:"h-4 w-4"})," Hubungi Kami"]})})]})]})]}),m.jsx(yr.div,{className:"max-w-4xl mx-auto mb-16",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5},children:m.jsxs("div",{className:"bg-gradient-to-br from-primary/5 to-primary/10 p-8 rounded-xl shadow-md",children:[m.jsxs("div",{className:"flex flex-col md:flex-row justify-between mb-10 space-y-4 md:space-y-0",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h2",{className:"text-2xl font-heading font-bold text-gray-800 mb-2",children:"Periode Pendaftaran 2025"}),m.jsx("p",{className:"text-gray-600",children:"Pendaftaran anggota baru Mahapala tahun 2025"})]}),m.jsx("div",{children:m.jsx("a",{href:"https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/main/assets/form%20pendaftaran%20anggota.docx",download:"formulir_pendaftaran_anggota.docx",children:m.jsx(vt,{className:"gap-2 bg-primary hover:bg-primary/90",asChild:!0,children:m.jsxs("span",{children:[m.jsx(NJ,{size:16}),"Unduh Formulir"]})})})})]}),m.jsxs("div",{className:"mb-8",children:[m.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[m.jsx("div",{className:"bg-primary text-white p-3 rounded-full",children:m.jsx(J5,{size:20})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium text-lg",children:"Jadwal Pendaftaran"}),m.jsx("p",{className:"text-gray-600",children:"15 Agustus - 30 September 2025"})]})]}),m.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[m.jsx("div",{className:"bg-primary text-white p-3 rounded-full",children:m.jsx(nz,{size:20})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium text-lg",children:"Kuota Anggota"}),m.jsx("p",{className:"text-gray-600",children:"Maksimal 50 mahasiswa baru"})]})]}),m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx("div",{className:"bg-primary text-white p-3 rounded-full",children:m.jsx(LJ,{size:20})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium text-lg",children:"Persyaratan Utama"}),m.jsx("p",{className:"text-gray-600",children:"Mahasiswa aktif Universitas Narotama"})]})]})]})]})}),m.jsxs("div",{className:"mt-16",children:[m.jsx("h3",{className:"font-heading text-2xl font-bold text-center mb-8",children:"Kontak Informasi Pendaftaran"}),m.jsxs("div",{className:"grid md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[m.jsxs(zo,{className:"hover:shadow-lg transition duration-300",children:[m.jsxs(np,{className:"pb-2",children:[m.jsx(Xg,{className:"text-lg",children:"Sekretariat"}),m.jsx(H_,{children:"Kesekretariatan Mahapala Narotama"})]}),m.jsxs(Sa,{children:[m.jsx("p",{className:"text-sm",children:"Ruang BEM (D3.01), Gedung D Lt. 3, Universitas Narotama"}),m.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Senin - Jumat, 09:00 - 16:00 WIB"})]})]}),m.jsxs(zo,{className:"hover:shadow-lg transition duration-300",children:[m.jsxs(np,{className:"pb-2",children:[m.jsx(Xg,{className:"text-lg",children:"Narahubung"}),m.jsx(H_,{children:"Informasi Pendaftaran"})]}),m.jsxs(Sa,{children:[m.jsx("p",{className:"text-sm",children:"Yuan (Koordinator): 081234567890"}),m.jsx("p",{className:"text-sm",children:"Nadia (Sekretaris): 089876543210"})]})]}),m.jsxs(zo,{className:"hover:shadow-lg transition duration-300",children:[m.jsxs(np,{className:"pb-2",children:[m.jsx(Xg,{className:"text-lg",children:"Media Sosial"}),m.jsx(H_,{children:"Ikuti kami untuk update"})]}),m.jsxs(Sa,{children:[m.jsx("p",{className:"text-sm",children:"Instagram: @mahapalanarotama"}),m.jsx("p",{className:"text-sm",children:"YouTube: @mahapalanarotama1216"})]})]})]})]})]})}),m.jsx(Qc,{open:t,onOpenChange:r,children:m.jsxs(Ml,{className:"max-w-xl w-full p-0 overflow-hidden",children:[m.jsx(ub,{className:"bg-primary text-white px-6 py-4",children:m.jsx(db,{className:"text-xl",children:"Formulir Pendaftaran Anggota Baru"})}),m.jsx("div",{className:"p-6 bg-white max-h-[70vh] overflow-y-auto",children:m.jsxs("form",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium mb-1",children:"Nama Lengkap"}),m.jsx("input",{type:"text",className:"w-full border rounded px-3 py-2",placeholder:"Nama lengkap",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium mb-1",children:"Email"}),m.jsx("input",{type:"email",className:"w-full border rounded px-3 py-2",placeholder:"Email aktif",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium mb-1",children:"Nomor HP"}),m.jsx("input",{type:"tel",className:"w-full border rounded px-3 py-2",placeholder:"Nomor HP",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium mb-1",children:"NIM"}),m.jsx("input",{type:"text",className:"w-full border rounded px-3 py-2",placeholder:"Nomor Induk Mahasiswa",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium mb-1",children:"Angkatan"}),m.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",placeholder:"Tahun angkatan",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium mb-1",children:"Alasan Bergabung"}),m.jsx("textarea",{className:"w-full border rounded px-3 py-2",placeholder:"Ceritakan motivasi Anda",rows:3,required:!0})]}),m.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[m.jsx(vt,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Batal"}),m.jsx(vt,{type:"submit",className:"bg-primary text-white",children:"Kirim"})]})]})})]})}),m.jsx(Qc,{open:i,onOpenChange:s,children:m.jsx(Ml,{className:"max-w-xs w-full p-0 rounded-xl",children:m.jsxs("div",{className:"p-6 flex flex-col items-center gap-4",children:[m.jsx("h2",{className:"font-heading text-lg font-bold mb-2",children:"Hubungi Kami"}),m.jsxs("div",{className:"flex gap-6 justify-center",children:[m.jsx("a",{href:"https://instagram.com/mahapalanarotama",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary hover:scale-110 transition-transform",title:"Instagram",children:m.jsx(eb,{size:36})}),m.jsx("a",{href:"https://wa.me/6281234567890",target:"_blank",rel:"noopener noreferrer",className:"hover:text-green-600 hover:scale-110 transition-transform",title:"WhatsApp",children:m.jsx(tb,{size:36})}),m.jsx("a",{href:"mailto:ukm.mahapala@narotama.ac.id",className:"hover:text-blue-600 hover:scale-110 transition-transform",title:"Email",children:m.jsx(Dy,{size:36})})]}),m.jsxs("div",{className:"text-center text-xs text-gray-500 mt-2",children:["Instagram: @mahapalanarotama",m.jsx("br",{}),"WhatsApp: 0812-3456-7890",m.jsx("br",{}),"Email: ukm.mahapala@narotama.ac.id"]})]})})})]})}function V0e(){const{data:n,isLoading:e}=KH(),[t,r]=R.useState(!1);return m.jsx("section",{className:"py-10 sm:py-16 bg-gradient-to-br from-white via-blue-50 to-blue-100 min-h-screen",children:m.jsxs("div",{className:"container mx-auto px-2 sm:px-4",children:[m.jsxs(yr.div,{className:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6,type:"spring"},children:[m.jsx("h1",{className:"font-heading text-2xl sm:text-3xl md:text-4xl font-bold text-center sm:text-left bg-gradient-to-r from-primary to-blue-600 bg-clip-text text-transparent drop-shadow-lg",children:"Galeri Kegiatan"}),m.jsxs("div",{className:"flex gap-2 w-full sm:w-auto justify-center",children:[m.jsx(Is,{href:"/",children:m.jsx(vt,{variant:"outline",className:"w-full sm:w-auto shadow-md hover:scale-105 transition-transform",children:"Kembali ke Beranda"})}),m.jsx(vt,{variant:"default",className:"w-full sm:w-auto shadow-md hover:scale-105 transition-transform bg-gradient-to-r from-primary to-blue-600 text-white",onClick:i=>{i.preventDefault(),r(!0)},children:"Hubungi Kami"})]})]}),e?m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 md:gap-6 animate-pulse",children:[...Array(9)].map((i,s)=>m.jsx("div",{className:"bg-gray-200 h-40 sm:h-56 md:h-64 rounded-xl"},s))}):n&&n.length>0?m.jsx("div",{className:"grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 sm:gap-4 md:gap-6 auto-rows-[160px] xs:auto-rows-[180px] sm:auto-rows-[220px] md:auto-rows-[250px]",children:n.map((i,s)=>m.jsxs("div",{className:`relative overflow-hidden rounded-xl shadow-lg group border border-gray-100 bg-white hover:shadow-2xl transition-all duration-300 ${s%7===0?"md:row-span-2 md:col-span-2 h-[320px] md:h-[520px]":s%5===0?"md:row-span-2 h-[320px] md:h-[520px]":"h-full"}`,children:[i.imageUrl?m.jsx("img",{src:i.imageUrl,alt:i.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}):m.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center text-gray-400",children:"Tidak ada gambar"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition flex items-end justify-center",children:m.jsxs("div",{className:"w-full p-4 pb-6 text-white text-center bg-gradient-to-t from-black/60 to-transparent rounded-b-xl",children:[m.jsx("h3",{className:"font-bold text-lg mb-1 drop-shadow-lg",children:i.title}),i.description&&m.jsx("p",{className:"text-sm line-clamp-3 drop-shadow",children:i.description})]})})]},i.id))}):m.jsx("div",{className:"text-center text-gray-500 py-20",children:"Tidak ada data galeri."}),m.jsx(Qc,{open:t,onOpenChange:r,children:m.jsx(Ml,{className:"max-w-xs w-full p-0 rounded-xl",children:m.jsxs("div",{className:"p-6 flex flex-col items-center gap-4",children:[m.jsx("h2",{className:"font-heading text-lg font-bold mb-2",children:"Hubungi Kami"}),m.jsxs("div",{className:"flex gap-6 justify-center",children:[m.jsx("a",{href:"https://instagram.com/mahapalanarotama",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary hover:scale-110 transition-transform",title:"Instagram",children:m.jsx(eb,{size:36})}),m.jsx("a",{href:"https://wa.me/6281234567890",target:"_blank",rel:"noopener noreferrer",className:"hover:text-green-600 hover:scale-110 transition-transform",title:"WhatsApp",children:m.jsx(tb,{size:36})}),m.jsx("a",{href:"mailto:ukm.mahapala@narotama.ac.id",className:"hover:text-blue-600 hover:scale-110 transition-transform",title:"Email",children:m.jsx(Dy,{size:36})})]}),m.jsxs("div",{className:"text-center text-xs text-gray-500 mt-2",children:["Instagram: @mahapalanarotama",m.jsx("br",{}),"WhatsApp: 0812-3456-7890",m.jsx("br",{}),"Email: ukm.mahapala@narotama.ac.id"]})]})})})]})})}var xT="rovingFocusGroup.onEntryFocus",U0e={bubbles:!1,cancelable:!0},Jv="RovingFocusGroup",[bC,IG,z0e]=c2(Jv),[B0e,RG]=Fl(Jv,[z0e]),[H0e,W0e]=B0e(Jv),kG=R.forwardRef((n,e)=>m.jsx(bC.Provider,{scope:n.__scopeRovingFocusGroup,children:m.jsx(bC.Slot,{scope:n.__scopeRovingFocusGroup,children:m.jsx(G0e,{...n,ref:e})})}));kG.displayName=Jv;var G0e=R.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=n,f=R.useRef(null),g=Mn(e,f),v=AR(s),[y,x]=Op({prop:o,defaultProp:a??null,onChange:l,caller:Jv}),[_,w]=R.useState(!1),S=vo(c),M=IG(t),I=R.useRef(!1),[L,P]=R.useState(0);return R.useEffect(()=>{const T=f.current;if(T)return T.addEventListener(xT,S),()=>T.removeEventListener(xT,S)},[S]),m.jsx(H0e,{scope:t,orientation:r,dir:v,loop:i,currentTabStopId:y,onItemFocus:R.useCallback(T=>x(T),[x]),onItemShiftTab:R.useCallback(()=>w(!0),[]),onFocusableItemAdd:R.useCallback(()=>P(T=>T+1),[]),onFocusableItemRemove:R.useCallback(()=>P(T=>T-1),[]),children:m.jsx(Gt.div,{tabIndex:_||L===0?-1:0,"data-orientation":r,...d,ref:g,style:{outline:"none",...n.style},onMouseDown:wt(n.onMouseDown,()=>{I.current=!0}),onFocus:wt(n.onFocus,T=>{const C=!I.current;if(T.target===T.currentTarget&&C&&!_){const k=new CustomEvent(xT,U0e);if(T.currentTarget.dispatchEvent(k),!k.defaultPrevented){const O=M().filter(ne=>ne.focusable),U=O.find(ne=>ne.active),V=O.find(ne=>ne.id===y),Z=[U,V,...O].filter(Boolean).map(ne=>ne.ref.current);LG(Z,u)}}I.current=!1}),onBlur:wt(n.onBlur,()=>w(!1))})})}),NG="RovingFocusGroupItem",DG=R.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=n,l=Vc(),c=s||l,u=W0e(NG,t),d=u.currentTabStopId===c,f=IG(t),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:y}=u;return R.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),m.jsx(bC.ItemSlot,{scope:t,id:c,focusable:r,active:i,children:m.jsx(Gt.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:wt(n.onMouseDown,x=>{r?u.onItemFocus(c):x.preventDefault()}),onFocus:wt(n.onFocus,()=>u.onItemFocus(c)),onKeyDown:wt(n.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const _=K0e(x,u.orientation,u.dir);if(_!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let S=f().filter(M=>M.focusable).map(M=>M.ref.current);if(_==="last")S.reverse();else if(_==="prev"||_==="next"){_==="prev"&&S.reverse();const M=S.indexOf(x.currentTarget);S=u.loop?Y0e(S,M+1):S.slice(M+1)}setTimeout(()=>LG(S))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:y!=null}):o})})});DG.displayName=NG;var $0e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function q0e(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function K0e(n,e,t){const r=q0e(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return $0e[r]}function LG(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function Y0e(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var X0e=kG,Q0e=DG,qb="Tabs",[J0e,dCe]=Fl(qb,[RG]),OG=RG(),[Z0e,RR]=J0e(qb),FG=R.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=n,u=AR(a),[d,f]=Op({prop:r,onChange:i,defaultProp:s??"",caller:qb});return m.jsx(Z0e,{scope:t,baseId:Vc(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:m.jsx(Gt.div,{dir:u,"data-orientation":o,...c,ref:e})})});FG.displayName=qb;var jG="TabsList",VG=R.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...i}=n,s=RR(jG,t),o=OG(t);return m.jsx(X0e,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:m.jsx(Gt.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});VG.displayName=jG;var UG="TabsTrigger",zG=R.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:i=!1,...s}=n,o=RR(UG,t),a=OG(t),l=WG(o.baseId,r),c=GG(o.baseId,r),u=r===o.value;return m.jsx(Q0e,{asChild:!0,...a,focusable:!i,active:u,children:m.jsx(Gt.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:wt(n.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:wt(n.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:wt(n.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!i&&d&&o.onValueChange(r)})})})});zG.displayName=UG;var BG="TabsContent",HG=R.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:i,children:s,...o}=n,a=RR(BG,t),l=WG(a.baseId,r),c=GG(a.baseId,r),u=r===a.value,d=R.useRef(u);return R.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),m.jsx(oh,{present:i||u,children:({present:f})=>m.jsx(Gt.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...n.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});HG.displayName=BG;function WG(n,e){return`${n}-trigger-${e}`}function GG(n,e){return`${n}-content-${e}`}var exe=FG,$G=VG,qG=zG,KG=HG;const txe=exe,YG=R.forwardRef(({className:n,...e},t)=>m.jsx($G,{ref:t,className:gt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));YG.displayName=$G.displayName;const _f=R.forwardRef(({className:n,...e},t)=>m.jsx(qG,{ref:t,className:gt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));_f.displayName=qG.displayName;const wf=R.forwardRef(({className:n,...e},t)=>m.jsx(KG,{ref:t,className:gt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));wf.displayName=KG.displayName;var nxe="Label",XG=R.forwardRef((n,e)=>m.jsx(Gt.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));XG.displayName=nxe;var QG=XG;const rxe=Z1("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),mr=R.forwardRef(({className:n,...e},t)=>m.jsx(QG,{ref:t,className:gt(rxe(),n),...e}));mr.displayName=QG.displayName;var JG="AlertDialog",[ixe,hCe]=Fl(JG,[iB]),jl=iB(),ZG=n=>{const{__scopeAlertDialog:e,...t}=n,r=jl(e);return m.jsx(_B,{...r,...t,modal:!0})};ZG.displayName=JG;var sxe="AlertDialogTrigger",oxe=R.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=jl(t);return m.jsx(Sne,{...i,...r,ref:e})});oxe.displayName=sxe;var axe="AlertDialogPortal",e7=n=>{const{__scopeAlertDialog:e,...t}=n,r=jl(e);return m.jsx(wB,{...r,...t})};e7.displayName=axe;var lxe="AlertDialogOverlay",t7=R.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=jl(t);return m.jsx(k2,{...i,...r,ref:e})});t7.displayName=lxe;var dp="AlertDialogContent",[cxe,uxe]=ixe(dp),dxe=S5("AlertDialogContent"),n7=R.forwardRef((n,e)=>{const{__scopeAlertDialog:t,children:r,...i}=n,s=jl(t),o=R.useRef(null),a=Mn(e,o),l=R.useRef(null);return m.jsx(xne,{contentName:dp,titleName:r7,docsSlug:"alert-dialog",children:m.jsx(cxe,{scope:t,cancelRef:l,children:m.jsxs(N2,{role:"alertdialog",...s,...i,ref:a,onOpenAutoFocus:wt(i.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[m.jsx(dxe,{children:r}),m.jsx(fxe,{contentRef:o})]})})})});n7.displayName=dp;var r7="AlertDialogTitle",i7=R.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=jl(t);return m.jsx(D2,{...i,...r,ref:e})});i7.displayName=r7;var s7="AlertDialogDescription",o7=R.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=jl(t);return m.jsx(L2,{...i,...r,ref:e})});o7.displayName=s7;var hxe="AlertDialogAction",a7=R.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=jl(t);return m.jsx(O2,{...i,...r,ref:e})});a7.displayName=hxe;var l7="AlertDialogCancel",c7=R.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,{cancelRef:i}=uxe(l7,t),s=jl(t),o=Mn(e,i);return m.jsx(O2,{...s,...r,ref:o})});c7.displayName=l7;var fxe=({contentRef:n})=>{const e=`\`${dp}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${dp}\` by passing a \`${s7}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${dp}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return R.useEffect(()=>{var r;document.getElementById((r=n.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,n]),null},pxe=ZG,mxe=e7,u7=t7,d7=n7,h7=a7,f7=c7,p7=i7,m7=o7;const gxe=pxe,yxe=mxe,g7=R.forwardRef(({className:n,...e},t)=>m.jsx(u7,{className:gt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e,ref:t}));g7.displayName=u7.displayName;const y7=R.forwardRef(({className:n,...e},t)=>m.jsxs(yxe,{children:[m.jsx(g7,{}),m.jsx(d7,{ref:t,className:gt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...e})]}));y7.displayName=d7.displayName;const v7=({className:n,...e})=>m.jsx("div",{className:gt("flex flex-col space-y-2 text-center sm:text-left",n),...e});v7.displayName="AlertDialogHeader";const x7=({className:n,...e})=>m.jsx("div",{className:gt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});x7.displayName="AlertDialogFooter";const _7=R.forwardRef(({className:n,...e},t)=>m.jsx(p7,{ref:t,className:gt("text-lg font-semibold",n),...e}));_7.displayName=p7.displayName;const w7=R.forwardRef(({className:n,...e},t)=>m.jsx(m7,{ref:t,className:gt("text-sm text-muted-foreground",n),...e}));w7.displayName=m7.displayName;const b7=R.forwardRef(({className:n,...e},t)=>m.jsx(h7,{ref:t,className:gt(M2(),n),...e}));b7.displayName=h7.displayName;const S7=R.forwardRef(({className:n,...e},t)=>m.jsx(f7,{ref:t,className:gt(M2({variant:"outline"}),"mt-2 sm:mt-0",n),...e}));S7.displayName=f7.displayName;const E7=R.forwardRef(({className:n,...e},t)=>m.jsx("textarea",{className:gt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...e}));E7.displayName="Textarea";function vxe({open:n,onOpenChange:e,onSubmit:t,type:r,isEditing:i=!1,initialData:s={},activities:o=[],loading:a=!1,error:l}){const c=r==="activity"?s:null,u=r==="gallery"?s:null,d=r==="member"?s:null,f=S=>({fullName:S.namalengkap||S.fullName||"",fieldName:S.namalapangan||S.fieldName||"",batchName:S.namaangkatan||S.batchName||"",batchYear:S.tahun||S.batchYear||new Date().getFullYear(),registrationNumber:S.nomorregistrasi||S.registrationNumber||"",membershipStatus:S.keanggotaan||S.membershipStatus||"Anggota Muda",photoUrl:S.foto||S.photoUrl||"",email:S.email||"",phone:S.phone||"",gender:S.gender||"",statusMahasiswa:S.statusMahasiswa||"",url:S.url||"",updateat:S.updateat||"",id:S.id||""}),[g,v]=R.useState(r==="activity"?{title:(c==null?void 0:c.title)||"",description:(c==null?void 0:c.description)||"",date:(c==null?void 0:c.date)||"",category:(c==null?void 0:c.category)||"",imageUrl:(c==null?void 0:c.imageUrl)||""}:r==="gallery"?{title:(u==null?void 0:u.title)||"",description:(u==null?void 0:u.description)||"",imageUrl:(u==null?void 0:u.imageUrl)||"",activityId:(u==null?void 0:u.activityId)||""}:f(d||{})),[y,x]=R.useState("");R.useEffect(()=>{r==="activity"?v({title:(s==null?void 0:s.title)||"",description:(s==null?void 0:s.description)||"",date:(s==null?void 0:s.date)||"",category:(s==null?void 0:s.category)||"",imageUrl:(s==null?void 0:s.imageUrl)||""}):r==="gallery"?v({title:(s==null?void 0:s.title)||"",description:(s==null?void 0:s.description)||"",imageUrl:(s==null?void 0:s.imageUrl)||"",activityId:(s==null?void 0:s.activityId)||""}):r==="member"&&v(f(s||{}))},[s,r,i,n]),R.useEffect(()=>{async function S(){if(r==="member"&&n&&!i){const I=(await ss(ei(_n,"anggota"))).docs.map(P=>parseInt(P.id,10)).filter(P=>!isNaN(P)),L=I.length>0?Math.max(...I)+1:1;x(String(L)),v(P=>({...P,id:String(L)}))}}S()},[r,n,i]);const _=async S=>{S.preventDefault(),r==="member"?await t({namalengkap:g.fullName||"",namalapangan:g.fieldName||"",namaangkatan:g.batchName||"",tahun:g.batchYear||new Date().getFullYear(),nomorregistrasi:g.registrationNumber||"",keanggotaan:g.membershipStatus||"Anggota Muda",foto:g.photoUrl||"",email:g.email||"",phone:g.phone||"",gender:g.gender||"",statusMahasiswa:g.statusMahasiswa,url:g.url||"",updateat:new Date().toISOString(),id:g.id||""}):i&&r==="gallery"&&(s!=null&&s.id)?await t({title:g.title||"",description:g.description||"",imageUrl:g.imageUrl||"",activityId:g.activityId||"",createdAt:g.createdAt||null,...r==="gallery"?{updatedAt:new Date().toISOString()}:{},id:s.id}):i&&r==="activity"&&(s!=null&&s.id)?await t({...g,id:s.id}):r==="gallery"?await t({title:g.title||"",description:g.description||"",imageUrl:g.imageUrl||"",activityId:g.activityId||"",createdAt:g.createdAt||null}):await t(g)},w=S=>{const{name:M,value:I}=S.target;v(L=>M==="tahun"?{...L,[M]:parseInt(I,10)}:{...L,[M]:I})};return m.jsx(Qc,{open:n,onOpenChange:e,children:m.jsxs(Ml,{className:"max-w-2xl w-full p-0 overflow-hidden","aria-describedby":"form-description",children:[m.jsxs(ub,{className:"bg-primary text-white px-6 py-4",children:[m.jsx(db,{className:"text-xl",children:i?r==="member"?"Edit Data Anggota":r==="activity"?"Edit Kegiatan":"Edit Galeri":r==="member"?"Tambah Anggota Baru":r==="activity"?"Tambah Kegiatan Baru":"Tambah Galeri Baru"}),m.jsx(j2,{id:"form-description",children:r==="activity"?"Silakan lengkapi detail kegiatan berikut. Semua field wajib diisi.":r==="gallery"?"Silakan lengkapi detail galeri berikut. Semua field wajib diisi.":"Silakan lengkapi data anggota berikut. Field dengan tanda * wajib diisi."})]}),m.jsx("div",{className:"p-6 bg-white max-h-[70vh] overflow-y-auto",children:m.jsxs("form",{onSubmit:_,className:"space-y-4",children:[r==="member"?m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"fullName",children:"Nama Lengkap *"}),m.jsx(Fr,{id:"fullName",name:"fullName",value:g.fullName||"",onChange:w,placeholder:"Masukkan nama lengkap",required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"fieldName",children:"Nama Lapangan *"}),m.jsx(Fr,{id:"fieldName",name:"fieldName",value:g.fieldName||"",onChange:w,placeholder:"Masukkan nama lapangan",required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"batchName",children:"Nama Angkatan *"}),m.jsx(Fr,{id:"batchName",name:"batchName",value:g.batchName||"",onChange:w,placeholder:"Contoh: Elang",required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"batchYear",children:"Tahun Angkatan *"}),m.jsx(Fr,{id:"batchYear",name:"batchYear",type:"number",min:"1990",max:new Date().getFullYear(),value:g.batchYear??"",onChange:w,required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"registrationNumber",children:"Nomor Registrasi *"}),m.jsx(Fr,{id:"registrationNumber",name:"registrationNumber",value:g.registrationNumber||"",onChange:w,placeholder:"Contoh: MPN-2025-001",required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"membershipStatus",children:"Status Keanggotaan *"}),m.jsxs("select",{id:"membershipStatus",name:"membershipStatus",value:g.membershipStatus||"",onChange:w,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",required:!0,children:[m.jsx("option",{value:"Anggota Muda",children:"Anggota Muda"}),m.jsx("option",{value:"Anggota Penuh",children:"Anggota Penuh"}),m.jsx("option",{value:"Tidak Aktif",children:"Tidak Aktif"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"statusMahasiswa",children:"Status Mahasiswa *"}),m.jsxs("select",{id:"statusMahasiswa",name:"statusMahasiswa",value:g.statusMahasiswa||"",onChange:w,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",required:!0,children:[m.jsx("option",{value:"Aktif",children:"Aktif"}),m.jsx("option",{value:"Tidak Aktif",children:"Tidak Aktif"}),m.jsx("option",{value:"Lulus",children:"Lulus"}),m.jsx("option",{value:"Cuti",children:"Cuti"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"gender",children:"Gender"}),m.jsxs("select",{id:"gender",name:"gender",value:g.gender||"",onChange:w,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",children:[m.jsx("option",{value:"",children:"Pilih gender"}),m.jsx("option",{value:"Laki-laki",children:"Laki-laki"}),m.jsx("option",{value:"Perempuan",children:"Perempuan"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"email",children:"Email"}),m.jsx(Fr,{id:"email",name:"email",type:"email",value:g.email||"",onChange:w,placeholder:"contoh@email.com"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"phone",children:"Nomor Telepon"}),m.jsx(Fr,{id:"phone",name:"phone",type:"tel",value:g.phone||"",onChange:w,placeholder:"Contoh: 081234567890"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"photoUrl",children:"URL Foto KTA"}),m.jsx(Fr,{id:"photoUrl",name:"photoUrl",type:"url",placeholder:"Masukkan URL foto KTA",value:g.photoUrl||"",onChange:w}),!!g.photoUrl&&m.jsxs("div",{className:"mt-2",children:[m.jsx("span",{className:"block text-xs text-gray-500 mb-1",children:"Preview:"}),/https?:\/\//.test(g.photoUrl||"")?m.jsx("img",{src:g.photoUrl,alt:"Preview Foto KTA",className:"max-h-32 rounded border",onError:S=>S.currentTarget.style.display="none"}):m.jsx("span",{className:"text-xs text-red-500",children:"URL tidak valid"}),m.jsx("div",{className:"text-xs text-blue-600 break-all mt-1",children:g.photoUrl})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"documentId",children:"Document ID"}),m.jsx(Fr,{id:"documentId",name:"documentId",value:i?g.id||"":y||g.id||"",readOnly:!0,className:"bg-gray-100 cursor-not-allowed",placeholder:"ID dokumen Firestore"})]})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"title",children:"Title"}),m.jsx(Fr,{id:"title",name:"title",value:(r==="activity"||r==="gallery")&&g.title||"",onChange:w,required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"description",children:"Description"}),m.jsx(E7,{id:"description",name:"description",value:(r==="activity"||r==="gallery")&&g.description||"",onChange:w,required:r==="activity"})]}),r==="activity"&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"date",children:"Date"}),m.jsx(Fr,{id:"date",name:"date",type:"date",value:g.date||"",onChange:w,required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"category",children:"Category"}),m.jsx(Fr,{id:"category",name:"category",value:g.category||"",onChange:w,required:!0})]})]}),r==="gallery"&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"activityId",children:"Related Activity"}),m.jsxs("select",{id:"activityId",name:"activityId",value:g.activityId||"",onChange:w,className:"w-full rounded-md border p-2",children:[m.jsx("option",{value:"",children:"None"}),o.map(S=>m.jsx("option",{value:S.id,children:S.title},S.id))]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"imageUrl",children:"Image URL"}),m.jsx(Fr,{id:"imageUrl",name:"imageUrl",type:"url",placeholder:"Enter the URL of the image",value:(r==="activity"||r==="gallery")&&g.imageUrl||"",onChange:w,required:!0})]})]}),l&&m.jsx("p",{className:"text-sm text-red-500 mt-4",children:l}),m.jsx(F2,{className:"pt-4",children:m.jsxs(vt,{type:"submit",disabled:a,children:[a&&m.jsx(UJ,{className:"mr-2 h-4 w-4 animate-spin"}),i?"Perbarui":"Simpan"]})})]})})]})})}function xxe(){const[n,e]=R.useState(null),[t,r]=R.useState(""),[i,s]=R.useState(""),[o,a]=R.useState(""),[l,c]=R.useState([]),[u,d]=R.useState([]),[f,g]=R.useState([]),[v,y]=R.useState([]),[x,_]=R.useState("activities"),[w,S]=R.useState(!1),[M,I]=R.useState(!1),[L,P]=R.useState(null),[T,C]=R.useState("activity"),[k,O]=R.useState(!1),[U,V]=R.useState([]),[B,Z]=R.useState(!1),[ne,oe]=R.useState(!1);R.useEffect(()=>{const Y=Cae(nw,ae=>{e(ae)});return()=>Y()},[]),R.useEffect(()=>{n&&G()},[n]);const z=async Y=>{Y.preventDefault(),a("");try{await Eae(nw,t,i)}catch(ae){a("Login failed: "+ae.message)}},G=async()=>{try{const Y=await ss(ei(_n,"recycle_bin")),ae=new Set(Y.docs.map(le=>le.id)),Se=await ss(ei(_n,"activities"));c(Se.docs.filter(le=>!ae.has(le.id)).map(le=>({id:le.id,...le.data()})));const Re=await ss(ei(_n,"gallerys"));d(Re.docs.filter(le=>!ae.has(le.id)).map(le=>({id:le.id,title:le.data().title||"",description:le.data().description||"",imageUrl:le.data().imageUrl||"",activityId:le.data().activityId||"",createdAt:le.data().createdAt||null,updatedAt:le.data().updatedAt||null})));const Ae=await ss(ei(_n,"anggota")),Te=["Caba","Cella","Ratel","Lupus","Orca","Loni","Ola"],te=[];Ae.docs.forEach(le=>{const we=le.data();Te.includes(we.namalengkap)&&we.statusMahasiswa!=="Aktif"&&te.push(tc(ts(_n,"anggota",le.id),{...we,statusMahasiswa:"Aktif"},{merge:!0}))}),te.length>0&&await Promise.all(te),g(Ae.docs.filter(le=>!ae.has(le.id)).map(le=>{const we=le.data();return{id:le.id,fullName:we.namalengkap||"",fieldName:we.namalapangan||"",batchName:we.namaangkatan||"",batchYear:we.tahun||0,registrationNumber:we.nomorregistrasi||"",membershipStatus:we.keanggotaan||"Tidak Aktif",photoUrl:we.foto||"",qrCode:we.url||"",email:we.email||"",phone:we.phone||"",gender:we.gender||"",statusMahasiswa:we.statusMahasiswa}}))}catch(Y){console.error("Error fetching data:",Y)}},q=async()=>{const Y=await ss(ei(_n,"gps_tracker"));y(Y.docs.map(ae=>({id:ae.id,...ae.data()})))},se=Y=>window.alert(Y),J=async Y=>{try{let ae=T==="member"?"anggota":T+"s";if(T==="member"&&!k){const Re=(await ss(ei(_n,"anggota"))).docs.map(le=>parseInt(le.id,10)).filter(le=>!isNaN(le)),Ae=Re.length>0?Math.max(...Re)+1:1,Te=String(Ae).padStart(4,"0"),te={namalengkap:Y.namalengkap||Y.fullName||"",namalapangan:Y.namalapangan||Y.fieldName||"",namaangkatan:Y.namaangkatan||Y.batchName||"",tahun:Y.tahun||Y.batchYear||new Date().getFullYear(),nomorregistrasi:Y.nomorregistrasi||Y.registrationNumber||"",keanggotaan:Y.keanggotaan||Y.membershipStatus||"Anggota Muda",foto:Y.foto||Y.photoUrl||"",email:Y.email||"",phone:Y.phone||"",gender:Y.gender||"",statusMahasiswa:Y.statusMahasiswa,url:Y.url||"",updateat:new Date().toISOString(),id:Te};await tc(ts(_n,"anggota",Te),te),se("Data anggota berhasil ditambahkan dengan ID otomatis!"),S(!1),await G();return}if(T==="member"&&(Y.id||Y.customId)){const Se=Y.customId||Y.id,Re={namalengkap:Y.namalengkap||Y.fullName||"",namalapangan:Y.namalapangan||Y.fieldName||"",namaangkatan:Y.namaangkatan||Y.batchName||"",tahun:Y.tahun||Y.batchYear||new Date().getFullYear(),nomorregistrasi:Y.nomorregistrasi||Y.registrationNumber||"",keanggotaan:Y.keanggotaan||Y.membershipStatus||"Anggota Muda",foto:Y.foto||Y.photoUrl||"",email:Y.email||"",phone:Y.phone||"",gender:Y.gender||"",statusMahasiswa:Y.statusMahasiswa,url:Y.url||"",updateat:new Date().toISOString(),id:Se};await tc(ts(_n,ae,Se),Re),se("Data anggota berhasil diperbarui!")}else if(k&&T==="activity"&&Y.id){const Se={title:Y.title||"",description:Y.description||"",date:Y.date||"",category:Y.category||"",imageUrl:Y.imageUrl||"",id:Y.id};await tc(ts(_n,"activities",Y.id),Se),se("Data kegiatan berhasil diperbarui!")}else if(k&&T==="gallery"&&Y.id){const Se={title:Y.title||"",description:Y.description||"",imageUrl:Y.imageUrl||"",activityId:Y.activityId||"",createdAt:Y.createdAt||null,updatedAt:new Date().toISOString(),id:Y.id};await tc(ts(_n,"gallerys",Y.id),Se),se("Data galeri berhasil diperbarui!")}else if(T==="activity"&&!k){const Se={title:Y.title||"",description:Y.description||"",date:Y.date||"",category:Y.category||"",imageUrl:Y.imageUrl||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await YA(ei(_n,"activities"),Se),se("Data kegiatan berhasil ditambahkan!")}else if(T==="member"&&Y.customId){const{customId:Se,...Re}=Y;await tc(ts(_n,"anggota",Se),Re),se("Data berhasil ditambahkan dengan ID custom!")}else await YA(ei(_n,ae),Y),se("Data berhasil ditambahkan!");S(!1),await G()}catch(ae){se("Gagal menyimpan data!"),console.error(ae)}},he=Y=>Y==="activity"?"activities":Y==="gallery"?"gallerys":Y==="member"?"anggota":"",_e=async(Y,ae)=>{const Se=Y||T,Re=ae||L;if(!Re||!Re.id){se("Data tidak valid atau ID tidak ditemukan!");return}let Ae=Se,Te=Re.id,te=he(Ae);try{const le=await Yde(ts(_n,te,Te));if(!le.exists()){se("Data tidak ditemukan di database!");return}const Be={...le.data(),originalType:Ae,deletedAt:new Date().toISOString()};await tc(ts(_n,"recycle_bin",Te),Be),await Ng(ts(_n,te,Te)),I(!1),oe(!1),P(null),await G(),await re(),se("Data berhasil dipindahkan ke Recycle Bin!")}catch(le){se("Gagal menghapus data!"),console.error(le)}},re=async()=>{Z(!0);const Y=await ss(ei(_n,"recycle_bin")),ae=new Date;await Promise.all(Y.docs.map(async Re=>{const Ae=Re.data();Ae.deletedAt&&Nne(ae,new Date(Ae.deletedAt))>30&&await Ng(ts(_n,"recycle_bin",Re.id))}));const Se=await ss(ei(_n,"recycle_bin"));V(Se.docs.map(Re=>({id:Re.id,...Re.data()}))),Z(!1)};return R.useEffect(()=>{x==="recycle"?re():x==="tracker"&&q()},[x]),n?m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),m.jsxs(vt,{variant:"ghost",className:"flex items-center gap-2",onClick:()=>nw.signOut(),children:[m.jsx(zJ,{className:"h-4 w-4"}),"Logout"]})]}),m.jsxs(txe,{value:x,onValueChange:_,children:[m.jsxs(YG,{className:"mb-8",children:[m.jsxs(_f,{value:"activities",className:"flex items-center gap-2",children:[m.jsx(J5,{className:"h-4 w-4"}),"Activities"]}),m.jsxs(_f,{value:"gallery",className:"flex items-center gap-2",children:[m.jsx(jJ,{className:"h-4 w-4"}),"Gallery"]}),m.jsxs(_f,{value:"members",className:"flex items-center gap-2",children:[m.jsx(nz,{className:"h-4 w-4"}),"Members"]}),m.jsxs(_f,{value:"recycle",className:"flex items-center gap-2",children:[m.jsx(Ex,{className:"h-4 w-4"}),"Recycle Bin"]}),m.jsxs(_f,{value:"tracker",className:"flex items-center gap-2",children:[m.jsx(tz,{className:"h-4 w-4"}),"Tracker"]})]}),m.jsxs(wf,{value:"activities",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold",children:"Activities Management"}),m.jsxs(vt,{onClick:()=>{C("activity"),O(!1),P(null),S(!0)},className:"flex items-center gap-2",children:[m.jsx($J,{className:"h-4 w-4"}),"Add Activity"]})]}),m.jsx("div",{className:"bg-white rounded-lg shadow",children:m.jsxs(cy,{children:[m.jsx(uy,{children:m.jsxs(rl,{children:[m.jsx(lr,{children:"Title"}),m.jsx(lr,{children:"Date"}),m.jsx(lr,{children:"Category"}),m.jsx(lr,{className:"text-right",children:"Actions"})]})}),m.jsx(dy,{children:l.map(Y=>m.jsxs(rl,{children:[m.jsx(cr,{className:"font-medium",children:Y.title}),m.jsx(cr,{children:new Date(Y.date).toLocaleDateString()}),m.jsx(cr,{children:m.jsx($i,{children:Y.category})}),m.jsx(cr,{className:"text-right",children:m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx(vt,{variant:"ghost",size:"icon",onClick:()=>{C("activity"),O(!0),P(Y),S(!0)},children:m.jsx(LE,{className:"h-4 w-4"})}),m.jsx(vt,{variant:"ghost",size:"icon",className:"text-red-600",onClick:()=>{P(Y),C("activity"),I(!0)},children:m.jsx(Ex,{className:"h-4 w-4"})})]})})]},Y.id))})]})})]}),m.jsxs(wf,{value:"gallery",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold",children:"Gallery Management"}),m.jsxs(vt,{onClick:()=>{C("gallery"),O(!1),P(null),S(!0)},className:"flex items-center gap-2",children:[m.jsx(FJ,{className:"h-4 w-4"}),"Add Image"]})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(Y=>m.jsxs(zo,{className:"overflow-hidden",children:[m.jsx("div",{className:"relative aspect-video",children:m.jsx("img",{src:Y.imageUrl,alt:Y.title,className:"w-full h-full object-cover"})}),m.jsxs(Sa,{className:"p-4",children:[m.jsx("h3",{className:"font-semibold",children:Y.title}),m.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:Y.description}),m.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[m.jsx(vt,{variant:"ghost",size:"sm",onClick:()=>{C("gallery"),O(!0),P(Y),S(!0)},children:m.jsx(LE,{className:"h-4 w-4"})}),m.jsx(vt,{variant:"ghost",size:"sm",className:"text-red-600",onClick:()=>{P(Y),C("gallery"),I(!0)},children:m.jsx(Ex,{className:"h-4 w-4"})})]})]})]},Y.id))})]}),m.jsxs(wf,{value:"members",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold",children:"Members Management"}),m.jsxs(vt,{onClick:()=>{C("member"),O(!1),P(null),S(!0)},className:"flex items-center gap-2",children:[m.jsx(YJ,{className:"h-4 w-4"}),"Add Member"]})]}),m.jsx("div",{className:"bg-white rounded-lg shadow",children:m.jsxs(cy,{children:[m.jsx(uy,{children:m.jsxs(rl,{children:[m.jsx(lr,{className:"w-[250px]",children:"Informasi Anggota"}),m.jsx(lr,{children:"Info Kontak"}),m.jsx(lr,{children:"Angkatan"}),m.jsx(lr,{children:"Keanggotaan"}),m.jsx(lr,{children:"Status Mahasiswa"}),m.jsx(lr,{className:"text-right",children:"Actions"})]})}),m.jsx(dy,{children:f.map(Y=>m.jsxs(rl,{children:[m.jsx(cr,{children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"h-10 w-10 rounded-full overflow-hidden bg-gray-100",children:Y.photoUrl?m.jsx("img",{src:Y.photoUrl,alt:Y.fullName,className:"h-full w-full object-cover"}):m.jsx("div",{className:"h-full w-full flex items-center justify-center bg-primary/10 text-primary",children:Y.fullName.charAt(0).toUpperCase()})}),m.jsxs("div",{children:[m.jsx("div",{className:"font-medium",children:Y.fullName}),m.jsx("div",{className:"text-sm text-gray-500",children:m.jsx($i,{variant:"outline",className:"mt-1",children:Y.fieldName||"Belum ada nama lapangan"})}),m.jsx("div",{className:"text-sm text-gray-500 mt-1",children:Y.registrationNumber||"No. Reg belum diatur"})]})]})}),m.jsx(cr,{children:m.jsxs("div",{className:"text-sm",children:[m.jsx("div",{children:Y.email||"-"}),m.jsx("div",{className:"text-gray-500",children:Y.phone||"-"}),m.jsx("div",{className:"text-gray-500 mt-1",children:m.jsx($i,{variant:"secondary",className:"text-xs text-zinc-50",children:(()=>{const ae=(Y.gender||"").toString().trim().toUpperCase();return ae==="L"||ae==="LAKI-LAKI"||ae==="LAKI"||ae==="LKI"?"Laki-laki":ae==="P"||ae==="PEREMPUAN"||ae==="PR"||ae==="WANITA"?"Perempuan":ae.length>0?Y.gender:"Belum diatur"})()})})]})}),m.jsx(cr,{children:m.jsxs("div",{className:"text-sm",children:[m.jsx("div",{children:Y.batchName||"Belum diatur"}),m.jsx("div",{className:"text-gray-500",children:Y.batchYear?`Tahun ${Y.batchYear}`:"Tahun belum diatur"})]})}),m.jsx(cr,{children:Y.membershipStatus==="Anggota Penuh"?m.jsx($i,{className:"bg-green-600 text-white font-bold border-green-700 shadow",children:Y.membershipStatus}):Y.membershipStatus==="Anggota Muda"?m.jsx($i,{className:"bg-blue-100 text-blue-800 border-blue-200",children:Y.membershipStatus}):Y.membershipStatus==="Aktif"?m.jsx($i,{className:"bg-green-100 text-green-800 border-green-200",children:Y.membershipStatus}):Y.membershipStatus==="Tidak Aktif"?m.jsx($i,{className:"bg-red-100 text-red-800 border-red-200",children:Y.membershipStatus}):m.jsx($i,{className:"bg-gray-100 text-gray-800 border-gray-200",children:Y.membershipStatus})}),m.jsx(cr,{children:m.jsx($i,{className:Y.statusMahasiswa==="Aktif"?"bg-green-100 text-green-800 border-green-200":Y.statusMahasiswa==="Tidak Aktif"?"bg-red-100 text-red-800 border-red-200":Y.statusMahasiswa==="Lulus"?"bg-blue-100 text-blue-800 border-blue-200":Y.statusMahasiswa==="Cuti"?"bg-yellow-100 text-yellow-900 border-yellow-300":"bg-gray-100 text-gray-800 border-gray-200",children:Y.statusMahasiswa||"Belum diatur"})}),m.jsx(cr,{className:"text-right",children:m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx(vt,{variant:"ghost",size:"icon",onClick:()=>{C("member"),O(!0),P(Y),S(!0)},children:m.jsx(LE,{className:"h-4 w-4"})}),m.jsx(vt,{variant:"ghost",size:"icon",className:"text-red-600",onClick:()=>{P(Y),C("member"),I(!0)},children:m.jsx(Ex,{className:"h-4 w-4"})})]})})]},Y.id))})]})})]}),m.jsxs(wf,{value:"recycle",children:[m.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[m.jsx("h2",{className:"text-xl font-semibold",children:"Recycle Bin"}),m.jsx(vt,{onClick:re,variant:"outline",size:"sm",children:"Refresh"})]}),B?m.jsx("div",{className:"py-10 text-center text-gray-500",children:"Loading..."}):U.length===0?m.jsx("div",{className:"py-10 text-center text-gray-500",children:"Recycle Bin kosong."}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs(cy,{children:[m.jsx(uy,{children:m.jsxs(rl,{children:[m.jsx(lr,{children:"Jenis"}),m.jsx(lr,{children:"Nama/Title"}),m.jsx(lr,{children:"Dihapus Pada"}),m.jsx(lr,{className:"text-right",children:"Aksi"})]})}),m.jsx(dy,{children:U.map(Y=>m.jsxs(rl,{children:[m.jsx(cr,{children:Y.originalType}),m.jsx(cr,{children:Y.fullName||Y.title||"-"}),m.jsx(cr,{children:Y.deletedAt?new Date(Y.deletedAt).toLocaleString():"-"}),m.jsxs(cr,{className:"text-right flex gap-2 justify-end",children:[m.jsx(vt,{size:"sm",variant:"outline",onClick:async()=>{try{const{id:ae,originalType:Se,deletedAt:Re,...Ae}=Y;let Te=Se==="member"?"anggota":Se==="activity"?"activities":Se+"s",te=Ae;Se==="activity"&&(te={title:Ae.title||"",description:Ae.description||"",date:Ae.date||"",category:Ae.category||"",imageUrl:Ae.imageUrl||"",id:ae}),await tc(ts(_n,Te,ae),te),await Ng(ts(_n,"recycle_bin",ae)),await G(),await re(),se("Data berhasil dipulihkan!")}catch(ae){se("Gagal memulihkan data!"),console.error(ae)}},children:"Pulihkan"}),m.jsx(vt,{size:"sm",variant:"destructive",onClick:async()=>{if(window.confirm("Yakin ingin menghapus data ini secara permanen?"))try{await Ng(ts(_n,"recycle_bin",Y.id)),await re(),se("Data berhasil dihapus permanen!")}catch(ae){se("Gagal menghapus data permanen!"),console.error(ae)}},children:"Hapus Permanen"})]})]},Y.id))})]})})]}),m.jsxs(wf,{value:"tracker",children:[m.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[m.jsx("h2",{className:"text-xl font-semibold",children:"GPS Tracker"}),m.jsx(vt,{onClick:q,variant:"outline",size:"sm",children:"Refresh"})]}),m.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow p-2",children:m.jsxs("table",{className:"w-full text-sm",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Nama"}),m.jsx("th",{children:"Waktu"}),m.jsx("th",{children:"Lat"}),m.jsx("th",{children:"Lon"}),m.jsx("th",{children:"Status"}),m.jsx("th",{children:"View Maps"})]})}),m.jsx("tbody",{children:v.map(Y=>m.jsxs("tr",{children:[m.jsx("td",{children:Y.nama}),m.jsx("td",{children:Y.time}),m.jsx("td",{children:Y.lat}),m.jsx("td",{children:Y.lon}),m.jsx("td",{children:m.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold ${Y.online?"bg-green-500 text-white":"bg-gray-400 text-white"}`,children:Y.online?"Online":"Offline"})}),m.jsx("td",{children:Y.lat&&Y.lon?m.jsx("a",{href:`https://www.google.com/maps?q=${Y.lat},${Y.lon}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline hover:text-blue-800",title:"Lihat di Google Maps",children:"Lihat Maps"}):m.jsx("span",{className:"text-gray-400",children:"-"})})]},Y.id))})]})})]})]}),m.jsx(vxe,{open:w,onOpenChange:S,type:T,isEditing:k,initialData:L,onSubmit:J,activities:l}),m.jsx(gxe,{open:M,onOpenChange:I,children:m.jsxs(y7,{children:[m.jsxs(v7,{children:[m.jsx(_7,{children:"Konfirmasi Hapus"}),m.jsx(w7,{children:"Data akan dipindahkan ke Recycle Bin dan dapat dipulihkan dalam 30 hari. Centang untuk melanjutkan."})]}),m.jsxs("div",{className:"flex items-center gap-2 my-4",children:[m.jsx("input",{type:"checkbox",id:"delete-check",checked:ne,onChange:Y=>oe(Y.target.checked),className:"accent-red-600 h-4 w-4"}),m.jsx("label",{htmlFor:"delete-check",className:"text-sm select-none",children:"Saya yakin ingin menghapus data ini"})]}),m.jsxs(x7,{children:[m.jsx(S7,{children:"Batal"}),m.jsx(b7,{className:"bg-red-600 text-white hover:bg-red-700 disabled:opacity-50",onClick:()=>_e(L&&T,L),disabled:!ne,children:"Hapus"})]})]})})]}):m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:m.jsxs(zo,{className:"w-[350px]",children:[m.jsx(np,{children:m.jsx(Xg,{className:"text-2xl font-bold text-center",children:"Admin Login"})}),m.jsx(Sa,{children:m.jsxs("form",{onSubmit:z,className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"email",children:"Email"}),m.jsx(Fr,{id:"email",type:"email",placeholder:"admin@example.com",value:t,onChange:Y=>r(Y.target.value),required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(mr,{htmlFor:"password",children:"Password"}),m.jsx(Fr,{id:"password",type:"password",value:i,onChange:Y=>s(Y.target.value),required:!0})]}),o&&m.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-md text-sm",children:o}),m.jsx(vt,{type:"submit",className:"w-full",children:"Login"})]})})]})})}function _xe(){const n=y5(),{data:e,isLoading:t}=BI(),r=e==null?void 0:e.find(s=>s.id===n.id);if(t)return m.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});if(!r)return m.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center",children:[m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Kegiatan Tidak Ditemukan"}),m.jsx("p",{className:"text-gray-500 mb-6",children:"Kegiatan yang Anda cari tidak tersedia atau telah dihapus."}),m.jsx(Is,{href:"/kegiatan",children:m.jsx("a",{className:"px-6 py-2 bg-primary text-white rounded-lg font-semibold shadow hover:bg-primary/90 transition",children:"Kembali ke Daftar Kegiatan"})})]});const i=PB(new Date(r.date),"EEEE, d MMMM yyyy",{locale:IB});return m.jsx("section",{className:"py-12 bg-gradient-to-br from-white to-blue-50 min-h-[80vh]",children:m.jsxs("div",{className:"container mx-auto px-4 max-w-3xl",children:[m.jsx("div",{className:"mb-8",children:m.jsx(Is,{href:"/kegiatan",children:m.jsxs("a",{className:"inline-flex items-center gap-2 text-primary hover:underline font-medium mb-4",children:[m.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Kembali ke Daftar Kegiatan"]})})}),m.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[m.jsxs("div",{className:"relative h-64 md:h-80 w-full overflow-hidden",children:[m.jsx("img",{src:r.imageUrl||"https://images.unsplash.com/photo-1511632765486-a01980e01a18?auto=format&fit=crop&w=800&h=450",alt:r.title,className:"w-full h-full object-cover object-center transition hover:scale-105 duration-700"}),m.jsx("div",{className:"absolute top-4 left-4",children:m.jsx($i,{variant:"secondary",className:"text-base px-4 py-2 shadow-lg bg-white/80 text-primary font-bold border border-primary",children:r.category})})]}),m.jsxs("div",{className:"p-8 md:p-10",children:[m.jsx("h1",{className:"font-heading text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:r.title}),m.jsx("div",{className:"flex items-center gap-4 mb-6 flex-wrap",children:m.jsxs("span",{className:"inline-flex items-center gap-2 text-gray-500",children:[m.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),i]})}),m.jsx("div",{className:"prose max-w-none text-lg text-gray-700 mb-8",children:r.description}),m.jsx("div",{className:"flex flex-wrap gap-3 mt-8",children:m.jsxs($i,{className:"bg-gradient-to-r from-primary to-blue-400 text-white px-4 py-2 text-base font-semibold shadow",children:["Kategori: ",r.category]})})]})]})]})})}function wxe(){Y1();const[n,e]=R.useState(null),[t,r]=R.useState(!0),[i,s]=R.useState(!1),o=new URLSearchParams(window.location.search),a=o.get("type")||"fieldName",l=o.get("input")||"";R.useEffect(()=>{r(!0),w0e(a,l).then(u=>{e(u?{fullName:u.fullName,fieldName:u.fieldName,batchName:u.batchName,batchYear:u.batchYear,registrationNumber:u.registrationNumber,membershipStatus:u.membershipStatus,photoUrl:u.photoUrl,statusMahasiswa:u.statusMahasiswa}:null),r(!1)})},[a,l]);const c=async()=>{if(n!=null&&n.photoUrl){s(!0);try{const d=await(await fetch(n.photoUrl)).blob(),f=window.URL.createObjectURL(d),g=document.createElement("a");g.href=f,g.download=`kartu-anggota-${n.registrationNumber||n.fieldName}.png`,document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(f);const x=await(await fetch("https://raw.githubusercontent.com/mahapalanarotama/OfficialWebsite/refs/heads/main/Img/back.png")).blob(),_=window.URL.createObjectURL(x),w=document.createElement("a");w.href=_,w.download=`kartu-anggota-${n.registrationNumber||n.fieldName}-belakang.png`,document.body.appendChild(w),w.click(),document.body.removeChild(w),window.URL.revokeObjectURL(_)}catch{alert("Gagal mengunduh kartu. Silakan coba lagi.")}s(!1)}};return t?m.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:m.jsx("span",{children:"Loading..."})}):n?m.jsx("div",{className:"max-w-5xl mx-auto p-2 sm:p-4",children:m.jsxs(zo,{className:"p-2 sm:p-6",children:[m.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-center mb-4 sm:mb-6",children:"Verifikasi Kartu Anggota"}),n.photoUrl&&m.jsx("div",{className:"flex justify-center mb-6",children:m.jsxs(vt,{className:"gap-2 bg-primary text-white",onClick:c,disabled:i,children:[m.jsx(f2,{className:"w-4 h-4"}),i?"Mengunduh...":"Unduh Kartu Anggota Untuk Print"]})}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 sm:gap-8 mb-4 sm:mb-8",children:[m.jsxs("div",{className:"flex flex-col items-center justify-center w-full sm:w-1/2 relative",id:"member-card-front",children:[n.statusMahasiswa==="Aktif"&&m.jsx(yr.span,{initial:{opacity:.7,textShadow:"0 0 0px #22c55e"},animate:{opacity:[.7,1,.7],textShadow:["0 0 0px #22c55e","0 0 12px #22c55e, 0 0 24px #16a34a","0 0 0px #22c55e"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute top-3 right-2 z-10 px-3 py-1 rounded-full font-bold text-sm select-none",style:{color:"#22c55e"},children:" Mahasiswa Aktif"}),n.photoUrl?m.jsx("div",{className:"p-2 border-2 border-gray-400 rounded-lg",children:m.jsx("img",{src:n.photoUrl,alt:"Kartu Anggota",className:"rounded-lg shadow-lg max-w-full h-auto"})}):m.jsx("div",{className:"p-2 border-2 border-gray-400 rounded-lg w-full flex items-center justify-center min-h-[275px]",children:m.jsx("span",{className:"text-gray-400 text-center",children:"Kartu anggota tidak tersedia."})})]}),m.jsxs("div",{className:"w-full sm:w-1/2",children:[m.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"Detail Anggota"}),m.jsxs("div",{className:"divide-y text-xs sm:text-base",children:[m.jsxs("div",{className:"flex justify-between py-2",children:[m.jsx("span",{className:"font-medium",children:"Nama Lengkap"}),m.jsx("span",{children:n.fullName})]}),m.jsxs("div",{className:"flex justify-between py-2",children:[m.jsx("span",{className:"font-medium",children:"Nomor Registrasi"}),m.jsx("span",{children:n.registrationNumber})]}),m.jsxs("div",{className:"flex justify-between py-2",children:[m.jsx("span",{className:"font-medium",children:"Nama Lapangan"}),m.jsx("span",{children:n.fieldName})]}),m.jsxs("div",{className:"flex justify-between py-2",children:[m.jsx("span",{className:"font-medium",children:"Nama Angkatan"}),m.jsx("span",{children:n.batchName})]}),m.jsxs("div",{className:"flex justify-between py-2",children:[m.jsx("span",{className:"font-medium",children:"Tahun Angkatan"}),m.jsx("span",{children:n.batchYear})]}),m.jsxs("div",{className:"flex justify-between py-2",children:[m.jsx("span",{className:"font-medium",children:"Keanggotaan"}),m.jsx("span",{children:n.membershipStatus})]})]})]})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 sm:mt-8 text-xs text-gray-500 gap-2",children:[m.jsxs("span",{children:[" ",new Date().getFullYear()," Mahapala Narotama"]}),m.jsx("span",{children:"www.mahapalanarotama.web.id"})]})]})}):m.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:m.jsx("span",{children:"Data anggota tidak ditemukan."})})}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Kb="150",nd={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},rd={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},T7=0,SC=1,M7=2,bxe=3,A7=0,Yb=1,hy=2,fd=3,Nl=0,ps=1,dl=2,Sxe=2,xl=0,Id=1,EC=2,TC=3,MC=4,C7=5,sd=100,P7=101,I7=102,AC=103,CC=104,R7=200,k7=201,N7=202,D7=203,kR=204,NR=205,L7=206,O7=207,F7=208,j7=209,V7=210,U7=0,z7=1,B7=2,A1=3,H7=4,W7=5,G7=6,$7=7,Zv=0,q7=1,K7=2,Wo=0,Y7=1,X7=2,Q7=3,DR=4,J7=5,Xb=300,au=301,lu=302,rv=303,iv=304,vm=306,sv=1e3,ki=1001,ov=1002,xr=1003,C1=1004,Exe=1004,fy=1005,Txe=1005,wr=1006,LR=1007,Mxe=1007,cu=1008,Axe=1008,Dl=1009,Z7=1010,e$=1011,OR=1012,t$=1013,Pc=1014,hl=1015,Xp=1016,n$=1017,r$=1018,Rd=1020,i$=1021,as=1023,s$=1024,o$=1025,Gc=1026,Zd=1027,a$=1028,l$=1029,c$=1030,u$=1031,d$=1033,aw=33776,lw=33777,cw=33778,uw=33779,PC=35840,IC=35841,RC=35842,kC=35843,h$=36196,NC=37492,DC=37496,LC=37808,OC=37809,FC=37810,jC=37811,VC=37812,UC=37813,zC=37814,BC=37815,HC=37816,WC=37817,GC=37818,$C=37819,qC=37820,KC=37821,dw=36492,f$=36283,YC=36284,XC=36285,QC=36286,p$=2200,m$=2201,g$=2202,av=2300,lv=2301,hw=2302,pd=2400,md=2401,cv=2402,Qb=2500,FR=2501,Cxe=0,Pxe=1,Ixe=2,uu=3e3,On=3001,y$=3200,v$=3201,xu=0,x$=1,Rxe="",ko="srgb",Qp="srgb-linear",jR="display-p3",kxe=0,fw=7680,Nxe=7681,Dxe=7682,Lxe=7683,Oxe=34055,Fxe=34056,jxe=5386,Vxe=512,Uxe=513,zxe=514,Bxe=515,Hxe=516,Wxe=517,Gxe=518,_$=519,uv=35044,$xe=35048,qxe=35040,Kxe=35045,Yxe=35049,Xxe=35041,Qxe=35046,Jxe=35050,Zxe=35042,e_e="100",JC="300 es",P1=1035;let Vl=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const Si=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Z4=1234567;const kd=Math.PI/180,dv=180/Math.PI;function Ls(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Si[n&255]+Si[n>>8&255]+Si[n>>16&255]+Si[n>>24&255]+"-"+Si[e&255]+Si[e>>8&255]+"-"+Si[e>>16&15|64]+Si[e>>24&255]+"-"+Si[t&63|128]+Si[t>>8&255]+"-"+Si[t>>16&255]+Si[t>>24&255]+Si[r&255]+Si[r>>8&255]+Si[r>>16&255]+Si[r>>24&255]).toLowerCase()}function br(n,e,t){return Math.max(e,Math.min(t,n))}function VR(n,e){return(n%e+e)%e}function t_e(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function n_e(n,e,t){return n!==e?(t-n)/(e-n):0}function py(n,e,t){return(1-t)*n+t*e}function r_e(n,e,t,r){return py(n,e,1-Math.exp(-t*r))}function i_e(n,e=1){return e-Math.abs(VR(n,e*2)-e)}function s_e(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function o_e(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function a_e(n,e){return n+Math.floor(Math.random()*(e-n+1))}function l_e(n,e){return n+Math.random()*(e-n)}function c_e(n){return n*(.5-Math.random())}function u_e(n){n!==void 0&&(Z4=n);let e=Z4+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function d_e(n){return n*kd}function h_e(n){return n*dv}function ZC(n){return(n&n-1)===0&&n!==0}function w$(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function b$(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function f_e(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),u=o((e+r)/2),d=s((e-r)/2),f=o((e-r)/2),g=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":n.set(a*u,l*d,l*f,a*c);break;case"YZY":n.set(l*f,a*u,l*d,a*c);break;case"ZXZ":n.set(l*d,l*f,a*u,a*c);break;case"XZX":n.set(a*u,l*v,l*g,a*c);break;case"YXY":n.set(l*g,a*u,l*v,a*c);break;case"ZYZ":n.set(l*v,l*g,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function fl(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Rn(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const p_e={DEG2RAD:kd,RAD2DEG:dv,generateUUID:Ls,clamp:br,euclideanModulo:VR,mapLinear:t_e,inverseLerp:n_e,lerp:py,damp:r_e,pingpong:i_e,smoothstep:s_e,smootherstep:o_e,randInt:a_e,randFloat:l_e,randFloatSpread:c_e,seededRandom:u_e,degToRad:d_e,radToDeg:h_e,isPowerOfTwo:ZC,ceilPowerOfTwo:w$,floorPowerOfTwo:b$,setQuaternionFromProperEuler:f_e,normalize:Rn,denormalize:fl};class Ie{constructor(e=0,t=0){Ie.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ii{constructor(){ii.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],f=r[2],g=r[5],v=r[8],y=i[0],x=i[3],_=i[6],w=i[1],S=i[4],M=i[7],I=i[2],L=i[5],P=i[8];return s[0]=o*y+a*w+l*I,s[3]=o*x+a*S+l*L,s[6]=o*_+a*M+l*P,s[1]=c*y+u*w+d*I,s[4]=c*x+u*S+d*L,s[7]=c*_+u*M+d*P,s[2]=f*y+g*w+v*I,s[5]=f*x+g*S+v*L,s[8]=f*_+g*M+v*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,f=a*l-u*s,g=c*s-o*l,v=t*d+r*f+i*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/v;return e[0]=d*y,e[1]=(i*c-u*r)*y,e[2]=(a*r-i*o)*y,e[3]=f*y,e[4]=(u*t-i*l)*y,e[5]=(i*s-a*t)*y,e[6]=g*y,e[7]=(r*l-c*t)*y,e[8]=(o*t-r*s)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(_T.makeScale(e,t)),this}rotate(e){return this.premultiply(_T.makeRotation(-e)),this}translate(e,t){return this.premultiply(_T.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const _T=new ii;function S$(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const m_e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Hf(n,e){return new m_e[n](e)}function hv(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}class Di{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const f=s[o+0],g=s[o+1],v=s[o+2],y=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(a===1){e[t+0]=f,e[t+1]=g,e[t+2]=v,e[t+3]=y;return}if(d!==y||l!==f||c!==g||u!==v){let x=1-a;const _=l*f+c*g+u*v+d*y,w=_>=0?1:-1,S=1-_*_;if(S>Number.EPSILON){const I=Math.sqrt(S),L=Math.atan2(I,_*w);x=Math.sin(x*L)/I,a=Math.sin(a*L)/I}const M=a*w;if(l=l*x+f*M,c=c*x+g*M,u=u*x+v*M,d=d*x+y*M,x===1-a){const I=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=I,c*=I,u*=I,d*=I}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=s[o],f=s[o+1],g=s[o+2],v=s[o+3];return e[t]=a*v+u*d+l*g-c*f,e[t+1]=l*v+u*f+c*d-a*g,e[t+2]=c*v+u*g+a*f-l*d,e[t+3]=u*v-a*d-l*f-c*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(s/2),f=l(r/2),g=l(i/2),v=l(s/2);switch(o){case"XYZ":this._x=f*u*d+c*g*v,this._y=c*g*d-f*u*v,this._z=c*u*v+f*g*d,this._w=c*u*d-f*g*v;break;case"YXZ":this._x=f*u*d+c*g*v,this._y=c*g*d-f*u*v,this._z=c*u*v-f*g*d,this._w=c*u*d+f*g*v;break;case"ZXY":this._x=f*u*d-c*g*v,this._y=c*g*d+f*u*v,this._z=c*u*v+f*g*d,this._w=c*u*d-f*g*v;break;case"ZYX":this._x=f*u*d-c*g*v,this._y=c*g*d+f*u*v,this._z=c*u*v-f*g*d,this._w=c*u*d+f*g*v;break;case"YZX":this._x=f*u*d+c*g*v,this._y=c*g*d+f*u*v,this._z=c*u*v-f*g*d,this._w=c*u*d-f*g*v;break;case"XZY":this._x=f*u*d-c*g*v,this._y=c*g*d-f*u*v,this._z=c*u*v+f*g*d,this._w=c*u*d+f*g*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],f=r+a+d;if(f>0){const g=.5/Math.sqrt(f+1);this._w=.25/g,this._x=(u-l)*g,this._y=(s-c)*g,this._z=(o-i)*g}else if(r>a&&r>d){const g=2*Math.sqrt(1+r-a-d);this._w=(u-l)/g,this._x=.25*g,this._y=(i+o)/g,this._z=(s+c)/g}else if(a>d){const g=2*Math.sqrt(1+a-r-d);this._w=(s-c)/g,this._x=(i+o)/g,this._y=.25*g,this._z=(l+u)/g}else{const g=2*Math.sqrt(1+d-r-a);this._w=(o-i)/g,this._x=(s+c)/g,this._y=(l+u)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(br(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const g=1-t;return this._w=g*o+t*this._w,this._x=g*r+t*this._x,this._y=g*i+t*this._y,this._z=g*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,f=Math.sin(t*u)/c;return this._w=o*d+this._w*f,this._x=r*d+this._x*f,this._y=i*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ${constructor(e=0,t=0,r=0){$.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(eF.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(eF.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*i-a*r,u=l*r+a*t-s*i,d=l*i+s*r-o*t,f=-s*t-o*r-a*i;return this.x=c*l+f*-s+u*-a-d*-o,this.y=u*l+f*-o+d*-s-c*-a,this.z=d*l+f*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return wT.copy(this).projectOnVector(e),this.sub(wT)}reflect(e){return this.sub(wT.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(br(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const wT=new $,eF=new Di;function hp(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function bT(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const g_e=new ii().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),y_e=new ii().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),Ic=new $;function v_e(n){return n.convertSRGBToLinear(),Ic.set(n.r,n.g,n.b).applyMatrix3(y_e),n.setRGB(Ic.x,Ic.y,Ic.z)}function x_e(n){return Ic.set(n.r,n.g,n.b).applyMatrix3(g_e),n.setRGB(Ic.x,Ic.y,Ic.z).convertLinearToSRGB()}const __e={[Qp]:n=>n,[ko]:n=>n.convertSRGBToLinear(),[jR]:v_e},w_e={[Qp]:n=>n,[ko]:n=>n.convertLinearToSRGB(),[jR]:x_e},Ti={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return Qp},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=__e[e],i=w_e[t];if(r===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let Xh;class UR{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Xh===void 0&&(Xh=hv("canvas")),Xh.width=e.width,Xh.height=e.height;const r=Xh.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Xh}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=hv("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=hp(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(hp(t[r]/255)*255):t[r]=hp(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class gd{constructor(e=null){this.isSource=!0,this.uuid=Ls(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(ST(i[o].image)):s.push(ST(i[o]))}else s=ST(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function ST(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?UR.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let b_e=0;class Yn extends Vl{constructor(e=Yn.DEFAULT_IMAGE,t=Yn.DEFAULT_MAPPING,r=ki,i=ki,s=wr,o=cu,a=as,l=Dl,c=Yn.DEFAULT_ANISOTROPY,u=uu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:b_e++}),this.uuid=Ls(),this.name="",this.source=new gd(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ie(0,0),this.repeat=new Ie(1,1),this.center=new Ie(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ii,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Xb)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case sv:e.x=e.x-Math.floor(e.x);break;case ki:e.x=e.x<0?0:1;break;case ov:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case sv:e.y=e.y-Math.floor(e.y);break;case ki:e.y=e.y<0?0:1;break;case ov:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Yn.DEFAULT_IMAGE=null;Yn.DEFAULT_MAPPING=Xb;Yn.DEFAULT_ANISOTROPY=1;class En{constructor(e=0,t=0,r=0,i=1){En.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],d=l[8],f=l[1],g=l[5],v=l[9],y=l[2],x=l[6],_=l[10];if(Math.abs(u-f)<.01&&Math.abs(d-y)<.01&&Math.abs(v-x)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+y)<.1&&Math.abs(v+x)<.1&&Math.abs(c+g+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(c+1)/2,M=(g+1)/2,I=(_+1)/2,L=(u+f)/4,P=(d+y)/4,T=(v+x)/4;return S>M&&S>I?S<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(S),i=L/r,s=P/r):M>I?M<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(M),r=L/i,s=T/i):I<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(I),r=P/s,i=T/s),this.set(r,i,s,t),this}let w=Math.sqrt((x-v)*(x-v)+(d-y)*(d-y)+(f-u)*(f-u));return Math.abs(w)<.001&&(w=1),this.x=(x-v)/w,this.y=(d-y)/w,this.z=(f-u)/w,this.w=Math.acos((c+g+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Qo extends Vl{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new En(0,0,e,t),this.scissorTest=!1,this.viewport=new En(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new Yn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:wr,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new gd(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Jb extends Yn{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=xr,this.minFilter=xr,this.wrapR=ki,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class S_e extends Qo{constructor(e=1,t=1,r=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new Jb(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class zR extends Yn{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=xr,this.minFilter=xr,this.wrapR=ki,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class E_e extends Qo{constructor(e=1,t=1,r=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new zR(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class T_e extends Qo{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class gh{constructor(e=new $(1/0,1/0,1/0),t=new $(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],d=e[l+1],f=e[l+2];u<t&&(t=u),d<r&&(r=d),f<i&&(i=f),u>s&&(s=u),d>o&&(o=d),f>a&&(a=f)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),d=e.getY(l),f=e.getZ(l);u<t&&(t=u),d<r&&(r=d),f<i&&(i=f),u>s&&(s=u),d>o&&(o=d),f>a&&(a=f)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Bu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)Bu.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Bu)}else r.boundingBox===null&&r.computeBoundingBox(),ET.copy(r.boundingBox),ET.applyMatrix4(e.matrixWorld),this.union(ET);const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Bu),Bu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(lg),Ux.subVectors(this.max,lg),Qh.subVectors(e.a,lg),Jh.subVectors(e.b,lg),Zh.subVectors(e.c,lg),nc.subVectors(Jh,Qh),rc.subVectors(Zh,Jh),Hu.subVectors(Qh,Zh);let t=[0,-nc.z,nc.y,0,-rc.z,rc.y,0,-Hu.z,Hu.y,nc.z,0,-nc.x,rc.z,0,-rc.x,Hu.z,0,-Hu.x,-nc.y,nc.x,0,-rc.y,rc.x,0,-Hu.y,Hu.x,0];return!TT(t,Qh,Jh,Zh,Ux)||(t=[1,0,0,0,1,0,0,0,1],!TT(t,Qh,Jh,Zh,Ux))?!1:(zx.crossVectors(nc,rc),t=[zx.x,zx.y,zx.z],TT(t,Qh,Jh,Zh,Ux))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Bu).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Bu).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(qa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),qa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),qa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),qa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),qa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),qa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),qa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),qa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(qa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const qa=[new $,new $,new $,new $,new $,new $,new $,new $],Bu=new $,ET=new gh,Qh=new $,Jh=new $,Zh=new $,nc=new $,rc=new $,Hu=new $,lg=new $,Ux=new $,zx=new $,Wu=new $;function TT(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Wu.fromArray(n,s);const a=i.x*Math.abs(Wu.x)+i.y*Math.abs(Wu.y)+i.z*Math.abs(Wu.z),l=e.dot(Wu),c=t.dot(Wu),u=r.dot(Wu);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const M_e=new gh,cg=new $,MT=new $;class yh{constructor(e=new $,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):M_e.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;cg.subVectors(e,this.center);const t=cg.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(cg,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(MT.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(cg.copy(e.center).add(MT)),this.expandByPoint(cg.copy(e.center).sub(MT))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ka=new $,AT=new $,Bx=new $,ic=new $,CT=new $,Hx=new $,PT=new $;class xm{constructor(e=new $,t=new $(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ka)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ka.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ka.copy(this.origin).addScaledVector(this.direction,t),Ka.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){AT.copy(e).add(t).multiplyScalar(.5),Bx.copy(t).sub(e).normalize(),ic.copy(this.origin).sub(AT);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Bx),a=ic.dot(this.direction),l=-ic.dot(Bx),c=ic.lengthSq(),u=Math.abs(1-o*o);let d,f,g,v;if(u>0)if(d=o*l-a,f=o*a-l,v=s*u,d>=0)if(f>=-v)if(f<=v){const y=1/u;d*=y,f*=y,g=d*(d+o*f+2*a)+f*(o*d+f+2*l)+c}else f=s,d=Math.max(0,-(o*f+a)),g=-d*d+f*(f+2*l)+c;else f=-s,d=Math.max(0,-(o*f+a)),g=-d*d+f*(f+2*l)+c;else f<=-v?(d=Math.max(0,-(-o*s+a)),f=d>0?-s:Math.min(Math.max(-s,-l),s),g=-d*d+f*(f+2*l)+c):f<=v?(d=0,f=Math.min(Math.max(-s,-l),s),g=f*(f+2*l)+c):(d=Math.max(0,-(o*s+a)),f=d>0?s:Math.min(Math.max(-s,-l),s),g=-d*d+f*(f+2*l)+c);else f=o>0?-s:s,d=Math.max(0,-(o*f+a)),g=-d*d+f*(f+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(AT).addScaledVector(Bx,f),g}intersectSphere(e,t){Ka.subVectors(e.center,this.origin);const r=Ka.dot(this.direction),i=Ka.dot(Ka)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return c>=0?(r=(e.min.x-f.x)*c,i=(e.max.x-f.x)*c):(r=(e.max.x-f.x)*c,i=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,o=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,o=(e.min.y-f.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(a=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Ka)!==null}intersectTriangle(e,t,r,i,s){CT.subVectors(t,e),Hx.subVectors(r,e),PT.crossVectors(CT,Hx);let o=this.direction.dot(PT),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;ic.subVectors(this.origin,e);const l=a*this.direction.dot(Hx.crossVectors(ic,Hx));if(l<0)return null;const c=a*this.direction.dot(CT.cross(ic));if(c<0||l+c>o)return null;const u=-a*ic.dot(PT);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ft{constructor(){Ft.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,s,o,a,l,c,u,d,f,g,v,y,x){const _=this.elements;return _[0]=e,_[4]=t,_[8]=r,_[12]=i,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=c,_[6]=u,_[10]=d,_[14]=f,_[3]=g,_[7]=v,_[11]=y,_[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ft().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/ef.setFromMatrixColumn(e,0).length(),s=1/ef.setFromMatrixColumn(e,1).length(),o=1/ef.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const f=o*u,g=o*d,v=a*u,y=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=g+v*c,t[5]=f-y*c,t[9]=-a*l,t[2]=y-f*c,t[6]=v+g*c,t[10]=o*l}else if(e.order==="YXZ"){const f=l*u,g=l*d,v=c*u,y=c*d;t[0]=f+y*a,t[4]=v*a-g,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=g*a-v,t[6]=y+f*a,t[10]=o*l}else if(e.order==="ZXY"){const f=l*u,g=l*d,v=c*u,y=c*d;t[0]=f-y*a,t[4]=-o*d,t[8]=v+g*a,t[1]=g+v*a,t[5]=o*u,t[9]=y-f*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const f=o*u,g=o*d,v=a*u,y=a*d;t[0]=l*u,t[4]=v*c-g,t[8]=f*c+y,t[1]=l*d,t[5]=y*c+f,t[9]=g*c-v,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const f=o*l,g=o*c,v=a*l,y=a*c;t[0]=l*u,t[4]=y-f*d,t[8]=v*d+g,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=g*d+v,t[10]=f-y*d}else if(e.order==="XZY"){const f=o*l,g=o*c,v=a*l,y=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=f*d+y,t[5]=o*u,t[9]=g*d-v,t[2]=v*d-g,t[6]=a*u,t[10]=y*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(A_e,e,C_e)}lookAt(e,t,r){const i=this.elements;return Ts.subVectors(e,t),Ts.lengthSq()===0&&(Ts.z=1),Ts.normalize(),sc.crossVectors(r,Ts),sc.lengthSq()===0&&(Math.abs(r.z)===1?Ts.x+=1e-4:Ts.z+=1e-4,Ts.normalize(),sc.crossVectors(r,Ts)),sc.normalize(),Wx.crossVectors(Ts,sc),i[0]=sc.x,i[4]=Wx.x,i[8]=Ts.x,i[1]=sc.y,i[5]=Wx.y,i[9]=Ts.y,i[2]=sc.z,i[6]=Wx.z,i[10]=Ts.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],f=r[9],g=r[13],v=r[2],y=r[6],x=r[10],_=r[14],w=r[3],S=r[7],M=r[11],I=r[15],L=i[0],P=i[4],T=i[8],C=i[12],k=i[1],O=i[5],U=i[9],V=i[13],B=i[2],Z=i[6],ne=i[10],oe=i[14],z=i[3],G=i[7],q=i[11],se=i[15];return s[0]=o*L+a*k+l*B+c*z,s[4]=o*P+a*O+l*Z+c*G,s[8]=o*T+a*U+l*ne+c*q,s[12]=o*C+a*V+l*oe+c*se,s[1]=u*L+d*k+f*B+g*z,s[5]=u*P+d*O+f*Z+g*G,s[9]=u*T+d*U+f*ne+g*q,s[13]=u*C+d*V+f*oe+g*se,s[2]=v*L+y*k+x*B+_*z,s[6]=v*P+y*O+x*Z+_*G,s[10]=v*T+y*U+x*ne+_*q,s[14]=v*C+y*V+x*oe+_*se,s[3]=w*L+S*k+M*B+I*z,s[7]=w*P+S*O+M*Z+I*G,s[11]=w*T+S*U+M*ne+I*q,s[15]=w*C+S*V+M*oe+I*se,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],f=e[10],g=e[14],v=e[3],y=e[7],x=e[11],_=e[15];return v*(+s*l*d-i*c*d-s*a*f+r*c*f+i*a*g-r*l*g)+y*(+t*l*g-t*c*f+s*o*f-i*o*g+i*c*u-s*l*u)+x*(+t*c*d-t*a*g-s*o*d+r*o*g+s*a*u-r*c*u)+_*(-i*a*u-t*l*d+t*a*f+i*o*d-r*o*f+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],g=e[11],v=e[12],y=e[13],x=e[14],_=e[15],w=d*x*c-y*f*c+y*l*g-a*x*g-d*l*_+a*f*_,S=v*f*c-u*x*c-v*l*g+o*x*g+u*l*_-o*f*_,M=u*y*c-v*d*c+v*a*g-o*y*g-u*a*_+o*d*_,I=v*d*l-u*y*l-v*a*f+o*y*f+u*a*x-o*d*x,L=t*w+r*S+i*M+s*I;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/L;return e[0]=w*P,e[1]=(y*f*s-d*x*s-y*i*g+r*x*g+d*i*_-r*f*_)*P,e[2]=(a*x*s-y*l*s+y*i*c-r*x*c-a*i*_+r*l*_)*P,e[3]=(d*l*s-a*f*s-d*i*c+r*f*c+a*i*g-r*l*g)*P,e[4]=S*P,e[5]=(u*x*s-v*f*s+v*i*g-t*x*g-u*i*_+t*f*_)*P,e[6]=(v*l*s-o*x*s-v*i*c+t*x*c+o*i*_-t*l*_)*P,e[7]=(o*f*s-u*l*s+u*i*c-t*f*c-o*i*g+t*l*g)*P,e[8]=M*P,e[9]=(v*d*s-u*y*s-v*r*g+t*y*g+u*r*_-t*d*_)*P,e[10]=(o*y*s-v*a*s+v*r*c-t*y*c-o*r*_+t*a*_)*P,e[11]=(u*a*s-o*d*s-u*r*c+t*d*c+o*r*g-t*a*g)*P,e[12]=I*P,e[13]=(u*y*i-v*d*i+v*r*f-t*y*f-u*r*x+t*d*x)*P,e[14]=(v*a*i-o*y*i-v*r*l+t*y*l+o*r*x-t*a*x)*P,e[15]=(o*d*i-u*a*i+u*r*l-t*d*l-o*r*f+t*a*f)*P,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,f=s*c,g=s*u,v=s*d,y=o*u,x=o*d,_=a*d,w=l*c,S=l*u,M=l*d,I=r.x,L=r.y,P=r.z;return i[0]=(1-(y+_))*I,i[1]=(g+M)*I,i[2]=(v-S)*I,i[3]=0,i[4]=(g-M)*L,i[5]=(1-(f+_))*L,i[6]=(x+w)*L,i[7]=0,i[8]=(v+S)*P,i[9]=(x-w)*P,i[10]=(1-(f+y))*P,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=ef.set(i[0],i[1],i[2]).length();const o=ef.set(i[4],i[5],i[6]).length(),a=ef.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],So.copy(this);const c=1/s,u=1/o,d=1/a;return So.elements[0]*=c,So.elements[1]*=c,So.elements[2]*=c,So.elements[4]*=u,So.elements[5]*=u,So.elements[6]*=u,So.elements[8]*=d,So.elements[9]*=d,So.elements[10]*=d,t.setFromRotationMatrix(So),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o){const a=this.elements,l=2*s/(t-e),c=2*s/(r-i),u=(t+e)/(t-e),d=(r+i)/(r-i),f=-(o+s)/(o-s),g=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=g,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,s,o){const a=this.elements,l=1/(t-e),c=1/(r-i),u=1/(o-s),d=(t+e)*l,f=(r+i)*c,g=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-g,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const ef=new $,So=new Ft,A_e=new $(0,0,0),C_e=new $(1,1,1),sc=new $,Wx=new $,Ts=new $,tF=new Ft,nF=new Di;class e0{constructor(e=0,t=0,r=0,i=e0.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],f=i[6],g=i[10];switch(t){case"XYZ":this._y=Math.asin(br(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,g),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-br(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,g),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(br(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,g),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-br(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,g),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(br(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,g));break;case"XZY":this._z=Math.asin(-br(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return tF.makeRotationFromQuaternion(e),this.setFromRotationMatrix(tF,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return nF.setFromEuler(this),this.setFromQuaternion(nF,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}e0.DEFAULT_ORDER="XYZ";class Nd{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let P_e=0;const rF=new $,tf=new Di,Ya=new Ft,Gx=new $,ug=new $,I_e=new $,R_e=new Di,iF=new $(1,0,0),sF=new $(0,1,0),oF=new $(0,0,1),k_e={type:"added"},aF={type:"removed"};class vn extends Vl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:P_e++}),this.uuid=Ls(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=vn.DEFAULT_UP.clone();const e=new $,t=new e0,r=new Di,i=new $(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ft},normalMatrix:{value:new ii}}),this.matrix=new Ft,this.matrixWorld=new Ft,this.matrixAutoUpdate=vn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=vn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Nd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return tf.setFromAxisAngle(e,t),this.quaternion.multiply(tf),this}rotateOnWorldAxis(e,t){return tf.setFromAxisAngle(e,t),this.quaternion.premultiply(tf),this}rotateX(e){return this.rotateOnAxis(iF,e)}rotateY(e){return this.rotateOnAxis(sF,e)}rotateZ(e){return this.rotateOnAxis(oF,e)}translateOnAxis(e,t){return rF.copy(e).applyQuaternion(this.quaternion),this.position.add(rF.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(iF,e)}translateY(e){return this.translateOnAxis(sF,e)}translateZ(e){return this.translateOnAxis(oF,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ya.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Gx.copy(e):Gx.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),ug.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ya.lookAt(ug,Gx,this.up):Ya.lookAt(Gx,ug,this.up),this.quaternion.setFromRotationMatrix(Ya),i&&(Ya.extractRotation(i.matrixWorld),tf.setFromRotationMatrix(Ya),this.quaternion.premultiply(tf.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(k_e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(aF)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(aF)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ya.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ya.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ya),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,t);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ug,e,I_e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ug,R_e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),f=o(e.skeletons),g=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),f.length>0&&(r.skeletons=f),g.length>0&&(r.animations=g),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}vn.DEFAULT_UP=new $(0,1,0);vn.DEFAULT_MATRIX_AUTO_UPDATE=!0;vn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Eo=new $,Xa=new $,IT=new $,Qa=new $,nf=new $,rf=new $,lF=new $,RT=new $,kT=new $,NT=new $;class ho{constructor(e=new $,t=new $,r=new $){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Eo.subVectors(e,t),i.cross(Eo);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Eo.subVectors(i,t),Xa.subVectors(r,t),IT.subVectors(e,t);const o=Eo.dot(Eo),a=Eo.dot(Xa),l=Eo.dot(IT),c=Xa.dot(Xa),u=Xa.dot(IT),d=o*c-a*a;if(d===0)return s.set(-2,-1,-1);const f=1/d,g=(c*l-a*u)*f,v=(o*u-a*l)*f;return s.set(1-g-v,v,g)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Qa),Qa.x>=0&&Qa.y>=0&&Qa.x+Qa.y<=1}static getUV(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,Qa),l.set(0,0),l.addScaledVector(s,Qa.x),l.addScaledVector(o,Qa.y),l.addScaledVector(a,Qa.z),l}static isFrontFacing(e,t,r,i){return Eo.subVectors(r,t),Xa.subVectors(e,t),Eo.cross(Xa).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Eo.subVectors(this.c,this.b),Xa.subVectors(this.a,this.b),Eo.cross(Xa).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ho.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ho.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return ho.getUV(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return ho.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ho.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;nf.subVectors(i,r),rf.subVectors(s,r),RT.subVectors(e,r);const l=nf.dot(RT),c=rf.dot(RT);if(l<=0&&c<=0)return t.copy(r);kT.subVectors(e,i);const u=nf.dot(kT),d=rf.dot(kT);if(u>=0&&d<=u)return t.copy(i);const f=l*d-u*c;if(f<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(nf,o);NT.subVectors(e,s);const g=nf.dot(NT),v=rf.dot(NT);if(v>=0&&g<=v)return t.copy(s);const y=g*c-l*v;if(y<=0&&c>=0&&v<=0)return a=c/(c-v),t.copy(r).addScaledVector(rf,a);const x=u*v-g*d;if(x<=0&&d-u>=0&&g-v>=0)return lF.subVectors(s,i),a=(d-u)/(d-u+(g-v)),t.copy(i).addScaledVector(lF,a);const _=1/(x+y+f);return o=y*_,a=f*_,t.copy(r).addScaledVector(nf,o).addScaledVector(rf,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let N_e=0;class di extends Vl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:N_e++}),this.uuid=Ls(),this.name="",this.type="Material",this.blending=Id,this.side=Nl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=kR,this.blendDst=NR,this.blendEquation=sd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=A1,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=_$,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=fw,this.stencilZFail=fw,this.stencilZPass=fw,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Id&&(r.blending=this.blending),this.side!==Nl&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const E$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},To={h:0,s:0,l:0},$x={h:0,s:0,l:0};function DT(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class nt{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ko){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ti.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Ti.workingColorSpace){return this.r=e,this.g=t,this.b=r,Ti.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Ti.workingColorSpace){if(e=VR(e,1),t=br(t,0,1),r=br(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=DT(o,s,e+1/3),this.g=DT(o,s,e),this.b=DT(o,s,e-1/3)}return Ti.toWorkingColorSpace(this,i),this}setStyle(e,t=ko){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Ti.toWorkingColorSpace(this,t),r(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Ti.toWorkingColorSpace(this,t),r(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseFloat(s[2])/100,u=parseFloat(s[3])/100;return r(s[4]),this.setHSL(l,c,u,t)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Ti.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Ti.toWorkingColorSpace(this,t),this;console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ko){const r=E$[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=hp(e.r),this.g=hp(e.g),this.b=hp(e.b),this}copyLinearToSRGB(e){return this.r=bT(e.r),this.g=bT(e.g),this.b=bT(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ko){return Ti.fromWorkingColorSpace(Ei.copy(this),e),br(Ei.r*255,0,255)<<16^br(Ei.g*255,0,255)<<8^br(Ei.b*255,0,255)<<0}getHexString(e=ko){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ti.workingColorSpace){Ti.fromWorkingColorSpace(Ei.copy(this),t);const r=Ei.r,i=Ei.g,s=Ei.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Ti.workingColorSpace){return Ti.fromWorkingColorSpace(Ei.copy(this),t),e.r=Ei.r,e.g=Ei.g,e.b=Ei.b,e}getStyle(e=ko){Ti.fromWorkingColorSpace(Ei.copy(this),e);const t=Ei.r,r=Ei.g,i=Ei.b;return e!==ko?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${t*255|0},${r*255|0},${i*255|0})`}offsetHSL(e,t,r){return this.getHSL(To),To.h+=e,To.s+=t,To.l+=r,this.setHSL(To.h,To.s,To.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(To),e.getHSL($x);const r=py(To.h,$x.h,t),i=py(To.s,$x.s,t),s=py(To.l,$x.l,t);return this.setHSL(r,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ei=new nt;nt.NAMES=E$;class _u extends di{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new nt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Zv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ir=new $,qx=new Ie;class kn{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=uv,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)qx.fromBufferAttribute(this,t),qx.applyMatrix3(e),this.setXY(t,qx.x,qx.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Ir.fromBufferAttribute(this,t),Ir.applyMatrix3(e),this.setXYZ(t,Ir.x,Ir.y,Ir.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Ir.fromBufferAttribute(this,t),Ir.applyMatrix4(e),this.setXYZ(t,Ir.x,Ir.y,Ir.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Ir.fromBufferAttribute(this,t),Ir.applyNormalMatrix(e),this.setXYZ(t,Ir.x,Ir.y,Ir.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Ir.fromBufferAttribute(this,t),Ir.transformDirection(e),this.setXYZ(t,Ir.x,Ir.y,Ir.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=fl(t,this.array)),t}setX(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=fl(t,this.array)),t}setY(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=fl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=fl(t,this.array)),t}setW(e,t){return this.normalized&&(t=Rn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),r=Rn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),r=Rn(r,this.array),i=Rn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Rn(t,this.array),r=Rn(r,this.array),i=Rn(i,this.array),s=Rn(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==uv&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class D_e extends kn{constructor(e,t,r){super(new Int8Array(e),t,r)}}class L_e extends kn{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class O_e extends kn{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class F_e extends kn{constructor(e,t,r){super(new Int16Array(e),t,r)}}class BR extends kn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class j_e extends kn{constructor(e,t,r){super(new Int32Array(e),t,r)}}class HR extends kn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class V_e extends kn{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}}class ut extends kn{constructor(e,t,r){super(new Float32Array(e),t,r)}}class U_e extends kn{constructor(e,t,r){super(new Float64Array(e),t,r)}}let z_e=0;const io=new Ft,LT=new vn,sf=new $,Ms=new gh,dg=new gh,$r=new $;class Wt extends Vl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:z_e++}),this.uuid=Ls(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(S$(e)?HR:BR)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new ii().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return io.makeRotationFromQuaternion(e),this.applyMatrix4(io),this}rotateX(e){return io.makeRotationX(e),this.applyMatrix4(io),this}rotateY(e){return io.makeRotationY(e),this.applyMatrix4(io),this}rotateZ(e){return io.makeRotationZ(e),this.applyMatrix4(io),this}translate(e,t,r){return io.makeTranslation(e,t,r),this.applyMatrix4(io),this}scale(e,t,r){return io.makeScale(e,t,r),this.applyMatrix4(io),this}lookAt(e){return LT.lookAt(e),LT.updateMatrix(),this.applyMatrix4(LT.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(sf).negate(),this.translate(sf.x,sf.y,sf.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ut(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new gh);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new $(-1/0,-1/0,-1/0),new $(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Ms.setFromBufferAttribute(s),this.morphTargetsRelative?($r.addVectors(this.boundingBox.min,Ms.min),this.boundingBox.expandByPoint($r),$r.addVectors(this.boundingBox.max,Ms.max),this.boundingBox.expandByPoint($r)):(this.boundingBox.expandByPoint(Ms.min),this.boundingBox.expandByPoint(Ms.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new yh);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new $,1/0);return}if(e){const r=this.boundingSphere.center;if(Ms.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];dg.setFromBufferAttribute(a),this.morphTargetsRelative?($r.addVectors(Ms.min,dg.min),Ms.expandByPoint($r),$r.addVectors(Ms.max,dg.max),Ms.expandByPoint($r)):(Ms.expandByPoint(dg.min),Ms.expandByPoint(dg.max))}Ms.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)$r.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared($r));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)$r.fromBufferAttribute(a,c),l&&(sf.fromBufferAttribute(e,c),$r.add(sf)),i=Math.max(i,r.distanceToSquared($r))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new kn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let k=0;k<a;k++)c[k]=new $,u[k]=new $;const d=new $,f=new $,g=new $,v=new Ie,y=new Ie,x=new Ie,_=new $,w=new $;function S(k,O,U){d.fromArray(i,k*3),f.fromArray(i,O*3),g.fromArray(i,U*3),v.fromArray(o,k*2),y.fromArray(o,O*2),x.fromArray(o,U*2),f.sub(d),g.sub(d),y.sub(v),x.sub(v);const V=1/(y.x*x.y-x.x*y.y);isFinite(V)&&(_.copy(f).multiplyScalar(x.y).addScaledVector(g,-y.y).multiplyScalar(V),w.copy(g).multiplyScalar(y.x).addScaledVector(f,-x.x).multiplyScalar(V),c[k].add(_),c[O].add(_),c[U].add(_),u[k].add(w),u[O].add(w),u[U].add(w))}let M=this.groups;M.length===0&&(M=[{start:0,count:r.length}]);for(let k=0,O=M.length;k<O;++k){const U=M[k],V=U.start,B=U.count;for(let Z=V,ne=V+B;Z<ne;Z+=3)S(r[Z+0],r[Z+1],r[Z+2])}const I=new $,L=new $,P=new $,T=new $;function C(k){P.fromArray(s,k*3),T.copy(P);const O=c[k];I.copy(O),I.sub(P.multiplyScalar(P.dot(O))).normalize(),L.crossVectors(T,O);const V=L.dot(u[k])<0?-1:1;l[k*4]=I.x,l[k*4+1]=I.y,l[k*4+2]=I.z,l[k*4+3]=V}for(let k=0,O=M.length;k<O;++k){const U=M[k],V=U.start,B=U.count;for(let Z=V,ne=V+B;Z<ne;Z+=3)C(r[Z+0]),C(r[Z+1]),C(r[Z+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new kn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let f=0,g=r.count;f<g;f++)r.setXYZ(f,0,0,0);const i=new $,s=new $,o=new $,a=new $,l=new $,c=new $,u=new $,d=new $;if(e)for(let f=0,g=e.count;f<g;f+=3){const v=e.getX(f+0),y=e.getX(f+1),x=e.getX(f+2);i.fromBufferAttribute(t,v),s.fromBufferAttribute(t,y),o.fromBufferAttribute(t,x),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,y),c.fromBufferAttribute(r,x),a.add(u),l.add(u),c.add(u),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(y,l.x,l.y,l.z),r.setXYZ(x,c.x,c.y,c.z)}else for(let f=0,g=t.count;f<g;f+=3)i.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),r.setXYZ(f+0,u.x,u.y,u.z),r.setXYZ(f+1,u.x,u.y,u.z),r.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)$r.fromBufferAttribute(e,t),$r.normalize(),e.setXYZ(t,$r.x,$r.y,$r.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,f=new c.constructor(l.length*u);let g=0,v=0;for(let y=0,x=l.length;y<x;y++){a.isInterleavedBufferAttribute?g=l[y]*a.data.stride+a.offset:g=l[y]*u;for(let _=0;_<u;_++)f[v++]=c[g++]}return new kn(f,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Wt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=c[u],g=e(f,r);l.push(g)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,f=c.length;d<f;d++){const g=c[d];u.push(g.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let f=0,g=d.length;f<g;f++)u.push(d[f].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const cF=new Ft,ua=new xm,Kx=new yh,uF=new $,hg=new $,fg=new $,pg=new $,OT=new $,Yx=new $,Xx=new Ie,Qx=new Ie,Jx=new Ie,FT=new $,Zx=new $;class si extends vn{constructor(e=new Wt,t=new _u){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){Yx.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],d=s[l];u!==0&&(OT.fromBufferAttribute(d,e),o?Yx.addScaledVector(OT,u):Yx.addScaledVector(OT.sub(t),u))}t.add(Yx)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),Kx.copy(r.boundingSphere),Kx.applyMatrix4(s),ua.copy(e.ray).recast(e.near),Kx.containsPoint(ua.origin)===!1&&(ua.intersectSphere(Kx,uF)===null||ua.origin.distanceToSquared(uF)>(e.far-e.near)**2))||(cF.copy(s).invert(),ua.copy(e.ray).applyMatrix4(cF),r.boundingBox!==null&&ua.intersectsBox(r.boundingBox)===!1))return;let o;const a=r.index,l=r.attributes.position,c=r.attributes.uv,u=r.attributes.uv2,d=r.groups,f=r.drawRange;if(a!==null)if(Array.isArray(i))for(let g=0,v=d.length;g<v;g++){const y=d[g],x=i[y.materialIndex],_=Math.max(y.start,f.start),w=Math.min(a.count,Math.min(y.start+y.count,f.start+f.count));for(let S=_,M=w;S<M;S+=3){const I=a.getX(S),L=a.getX(S+1),P=a.getX(S+2);o=e_(this,x,e,ua,c,u,I,L,P),o&&(o.faceIndex=Math.floor(S/3),o.face.materialIndex=y.materialIndex,t.push(o))}}else{const g=Math.max(0,f.start),v=Math.min(a.count,f.start+f.count);for(let y=g,x=v;y<x;y+=3){const _=a.getX(y),w=a.getX(y+1),S=a.getX(y+2);o=e_(this,i,e,ua,c,u,_,w,S),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(i))for(let g=0,v=d.length;g<v;g++){const y=d[g],x=i[y.materialIndex],_=Math.max(y.start,f.start),w=Math.min(l.count,Math.min(y.start+y.count,f.start+f.count));for(let S=_,M=w;S<M;S+=3){const I=S,L=S+1,P=S+2;o=e_(this,x,e,ua,c,u,I,L,P),o&&(o.faceIndex=Math.floor(S/3),o.face.materialIndex=y.materialIndex,t.push(o))}}else{const g=Math.max(0,f.start),v=Math.min(l.count,f.start+f.count);for(let y=g,x=v;y<x;y+=3){const _=y,w=y+1,S=y+2;o=e_(this,i,e,ua,c,u,_,w,S),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}}}}function B_e(n,e,t,r,i,s,o,a){let l;if(e.side===ps?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Nl,a),l===null)return null;Zx.copy(a),Zx.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Zx);return c<t.near||c>t.far?null:{distance:c,point:Zx.clone(),object:n}}function e_(n,e,t,r,i,s,o,a,l){n.getVertexPosition(o,hg),n.getVertexPosition(a,fg),n.getVertexPosition(l,pg);const c=B_e(n,e,t,r,hg,fg,pg,FT);if(c){i&&(Xx.fromBufferAttribute(i,o),Qx.fromBufferAttribute(i,a),Jx.fromBufferAttribute(i,l),c.uv=ho.getUV(FT,hg,fg,pg,Xx,Qx,Jx,new Ie)),s&&(Xx.fromBufferAttribute(s,o),Qx.fromBufferAttribute(s,a),Jx.fromBufferAttribute(s,l),c.uv2=ho.getUV(FT,hg,fg,pg,Xx,Qx,Jx,new Ie));const u={a:o,b:a,c:l,normal:new $,materialIndex:0};ho.getNormal(hg,fg,pg,u.normal),c.face=u}return c}class wu extends Wt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let f=0,g=0;v("z","y","x",-1,-1,r,t,e,o,s,0),v("z","y","x",1,-1,r,t,-e,o,s,1),v("x","z","y",1,1,e,r,t,i,o,2),v("x","z","y",1,-1,e,r,-t,i,o,3),v("x","y","z",1,-1,e,t,r,i,s,4),v("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new ut(c,3)),this.setAttribute("normal",new ut(u,3)),this.setAttribute("uv",new ut(d,2));function v(y,x,_,w,S,M,I,L,P,T,C){const k=M/P,O=I/T,U=M/2,V=I/2,B=L/2,Z=P+1,ne=T+1;let oe=0,z=0;const G=new $;for(let q=0;q<ne;q++){const se=q*O-V;for(let J=0;J<Z;J++){const he=J*k-U;G[y]=he*w,G[x]=se*S,G[_]=B,c.push(G.x,G.y,G.z),G[y]=0,G[x]=0,G[_]=L>0?1:-1,u.push(G.x,G.y,G.z),d.push(J/P),d.push(1-q/T),oe+=1}}for(let q=0;q<T;q++)for(let se=0;se<P;se++){const J=f+se+Z*q,he=f+se+Z*(q+1),_e=f+(se+1)+Z*(q+1),re=f+(se+1)+Z*q;l.push(J,he,re),l.push(he,_e,re),z+=6}a.addGroup(g,z,C),g+=z,f+=oe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Jp(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Bi(n){const e={};for(let t=0;t<n.length;t++){const r=Jp(n[t]);for(const i in r)e[i]=r[i]}return e}function H_e(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function T$(n){return n.getRenderTarget()===null&&n.outputEncoding===On?ko:Qp}const M$={clone:Jp,merge:Bi};var W_e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,G_e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Da extends di{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=W_e,this.fragmentShader=G_e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Jp(e.uniforms),this.uniformsGroups=H_e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class t0 extends vn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ft,this.projectionMatrix=new Ft,this.projectionMatrixInverse=new Ft}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Sr extends t0{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=dv*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(kd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return dv*2*Math.atan(Math.tan(kd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(kd*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const of=-90,af=1;class A$ extends vn{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new Sr(of,af,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const s=new Sr(of,af,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new Sr(of,af,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new Sr(of,af,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new Sr(of,af,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const c=new Sr(of,af,e,t);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),this.add(c)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,c]=this.children,u=e.getRenderTarget(),d=e.toneMapping,f=e.xr.enabled;e.toneMapping=Wo,e.xr.enabled=!1;const g=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=g,e.setRenderTarget(r,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=d,e.xr.enabled=f,r.texture.needsPMREMUpdate=!0}}class n0 extends Yn{constructor(e,t,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:au,super(e,t,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class C$ extends Qo{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new n0(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:wr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new wu(5,5,5),s=new Da({name:"CubemapFromEquirect",uniforms:Jp(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ps,blending:xl});s.uniforms.tEquirect.value=t;const o=new si(i,s),a=t.minFilter;return t.minFilter===cu&&(t.minFilter=wr),new A$(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const jT=new $,$_e=new $,q_e=new ii;class il{constructor(e=new $(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=jT.subVectors(r,t).cross($_e.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(jT),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||q_e.getNormalMatrix(e),i=this.coplanarPoint(jT).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const lf=new yh,t_=new $;class Zb{constructor(e=new il,t=new il,r=new il,i=new il,s=new il,o=new il){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],c=r[5],u=r[6],d=r[7],f=r[8],g=r[9],v=r[10],y=r[11],x=r[12],_=r[13],w=r[14],S=r[15];return t[0].setComponents(a-i,d-l,y-f,S-x).normalize(),t[1].setComponents(a+i,d+l,y+f,S+x).normalize(),t[2].setComponents(a+s,d+c,y+g,S+_).normalize(),t[3].setComponents(a-s,d-c,y-g,S-_).normalize(),t[4].setComponents(a-o,d-u,y-v,S-w).normalize(),t[5].setComponents(a+o,d+u,y+v,S+w).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),lf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(lf)}intersectsSprite(e){return lf.center.set(0,0,0),lf.radius=.7071067811865476,lf.applyMatrix4(e.matrixWorld),this.intersectsSphere(lf)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(t_.x=i.normal.x>0?e.max.x:e.min.x,t_.y=i.normal.y>0?e.max.y:e.min.y,t_.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(t_)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function P$(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function K_e(n,e){const t=e.isWebGL2,r=new WeakMap;function i(c,u){const d=c.array,f=c.usage,g=n.createBuffer();n.bindBuffer(u,g),n.bufferData(u,d,f),c.onUploadCallback();let v;if(d instanceof Float32Array)v=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)v=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=5123;else if(d instanceof Int16Array)v=5122;else if(d instanceof Uint32Array)v=5125;else if(d instanceof Int32Array)v=5124;else if(d instanceof Int8Array)v=5120;else if(d instanceof Uint8Array)v=5121;else if(d instanceof Uint8ClampedArray)v=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:g,type:v,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,d){const f=u.array,g=u.updateRange;n.bindBuffer(d,c),g.count===-1?n.bufferSubData(d,0,f):(t?n.bufferSubData(d,g.offset*f.BYTES_PER_ELEMENT,f,g.offset,g.count):n.bufferSubData(d,g.offset*f.BYTES_PER_ELEMENT,f.subarray(g.offset,g.offset+g.count)),g.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(n.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const f=r.get(c);(!f||f.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);d===void 0?r.set(c,i(c,u)):d.version<c.version&&(s(d.buffer,c,u),d.version=c.version)}return{get:o,remove:a,update:l}}class _m extends Wt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,f=t/l,g=[],v=[],y=[],x=[];for(let _=0;_<u;_++){const w=_*f-o;for(let S=0;S<c;S++){const M=S*d-s;v.push(M,-w,0),y.push(0,0,1),x.push(S/a),x.push(1-_/l)}}for(let _=0;_<l;_++)for(let w=0;w<a;w++){const S=w+c*_,M=w+c*(_+1),I=w+1+c*(_+1),L=w+1+c*_;g.push(S,M,L),g.push(M,I,L)}this.setIndex(g),this.setAttribute("position",new ut(v,3)),this.setAttribute("normal",new ut(y,3)),this.setAttribute("uv",new ut(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _m(e.width,e.height,e.widthSegments,e.heightSegments)}}var Y_e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,X_e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Q_e=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,J_e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Z_e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,ewe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,twe="vec3 transformed = vec3( position );",nwe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,rwe=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,iwe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,swe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,owe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,awe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,lwe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,cwe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,uwe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,dwe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,hwe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,fwe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,pwe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,mwe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,gwe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ywe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,vwe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,xwe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,_we=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,wwe="gl_FragColor = linearToOutputTexel( gl_FragColor );",bwe=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Swe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Ewe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Twe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Mwe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Awe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Cwe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Pwe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Iwe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Rwe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,kwe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Nwe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Dwe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Lwe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Owe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Fwe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,jwe=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Vwe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Uwe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,zwe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Bwe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Hwe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Wwe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Gwe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,$we=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,qwe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Kwe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Ywe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Xwe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Qwe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Jwe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Zwe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,e1e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,t1e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,n1e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,r1e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,i1e=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,s1e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,o1e=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,a1e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,l1e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,c1e=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,u1e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,d1e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,h1e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,f1e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,p1e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,m1e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,g1e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,y1e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,v1e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,x1e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,_1e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,w1e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,b1e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,S1e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,E1e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,T1e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,M1e=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,A1e=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,C1e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,P1e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,I1e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,R1e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,k1e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,N1e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,D1e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,L1e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,O1e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,F1e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,j1e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,V1e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		
		vec2 lodFudge = pow( 1.95, lod ) / fullSize;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec2 fullSize = vec2( textureSize( sampler, 0 ) );
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,U1e=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,z1e=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,B1e=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,H1e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,W1e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,G1e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,$1e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const q1e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,K1e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Y1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,X1e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Q1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,J1e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Z1e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,ebe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,tbe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,nbe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,rbe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,ibe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,sbe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,obe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,abe=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,lbe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cbe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ube=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dbe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,hbe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fbe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,pbe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,mbe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gbe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ybe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,vbe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xbe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_be=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wbe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,bbe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Sbe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ebe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Tbe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Mbe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Bt={alphamap_fragment:Y_e,alphamap_pars_fragment:X_e,alphatest_fragment:Q_e,alphatest_pars_fragment:J_e,aomap_fragment:Z_e,aomap_pars_fragment:ewe,begin_vertex:twe,beginnormal_vertex:nwe,bsdfs:rwe,iridescence_fragment:iwe,bumpmap_pars_fragment:swe,clipping_planes_fragment:owe,clipping_planes_pars_fragment:awe,clipping_planes_pars_vertex:lwe,clipping_planes_vertex:cwe,color_fragment:uwe,color_pars_fragment:dwe,color_pars_vertex:hwe,color_vertex:fwe,common:pwe,cube_uv_reflection_fragment:mwe,defaultnormal_vertex:gwe,displacementmap_pars_vertex:ywe,displacementmap_vertex:vwe,emissivemap_fragment:xwe,emissivemap_pars_fragment:_we,encodings_fragment:wwe,encodings_pars_fragment:bwe,envmap_fragment:Swe,envmap_common_pars_fragment:Ewe,envmap_pars_fragment:Twe,envmap_pars_vertex:Mwe,envmap_physical_pars_fragment:jwe,envmap_vertex:Awe,fog_vertex:Cwe,fog_pars_vertex:Pwe,fog_fragment:Iwe,fog_pars_fragment:Rwe,gradientmap_pars_fragment:kwe,lightmap_fragment:Nwe,lightmap_pars_fragment:Dwe,lights_lambert_fragment:Lwe,lights_lambert_pars_fragment:Owe,lights_pars_begin:Fwe,lights_toon_fragment:Vwe,lights_toon_pars_fragment:Uwe,lights_phong_fragment:zwe,lights_phong_pars_fragment:Bwe,lights_physical_fragment:Hwe,lights_physical_pars_fragment:Wwe,lights_fragment_begin:Gwe,lights_fragment_maps:$we,lights_fragment_end:qwe,logdepthbuf_fragment:Kwe,logdepthbuf_pars_fragment:Ywe,logdepthbuf_pars_vertex:Xwe,logdepthbuf_vertex:Qwe,map_fragment:Jwe,map_pars_fragment:Zwe,map_particle_fragment:e1e,map_particle_pars_fragment:t1e,metalnessmap_fragment:n1e,metalnessmap_pars_fragment:r1e,morphcolor_vertex:i1e,morphnormal_vertex:s1e,morphtarget_pars_vertex:o1e,morphtarget_vertex:a1e,normal_fragment_begin:l1e,normal_fragment_maps:c1e,normal_pars_fragment:u1e,normal_pars_vertex:d1e,normal_vertex:h1e,normalmap_pars_fragment:f1e,clearcoat_normal_fragment_begin:p1e,clearcoat_normal_fragment_maps:m1e,clearcoat_pars_fragment:g1e,iridescence_pars_fragment:y1e,output_fragment:v1e,packing:x1e,premultiplied_alpha_fragment:_1e,project_vertex:w1e,dithering_fragment:b1e,dithering_pars_fragment:S1e,roughnessmap_fragment:E1e,roughnessmap_pars_fragment:T1e,shadowmap_pars_fragment:M1e,shadowmap_pars_vertex:A1e,shadowmap_vertex:C1e,shadowmask_pars_fragment:P1e,skinbase_vertex:I1e,skinning_pars_vertex:R1e,skinning_vertex:k1e,skinnormal_vertex:N1e,specularmap_fragment:D1e,specularmap_pars_fragment:L1e,tonemapping_fragment:O1e,tonemapping_pars_fragment:F1e,transmission_fragment:j1e,transmission_pars_fragment:V1e,uv_pars_fragment:U1e,uv_pars_vertex:z1e,uv_vertex:B1e,uv2_pars_fragment:H1e,uv2_pars_vertex:W1e,uv2_vertex:G1e,worldpos_vertex:$1e,background_vert:q1e,background_frag:K1e,backgroundCube_vert:Y1e,backgroundCube_frag:X1e,cube_vert:Q1e,cube_frag:J1e,depth_vert:Z1e,depth_frag:ebe,distanceRGBA_vert:tbe,distanceRGBA_frag:nbe,equirect_vert:rbe,equirect_frag:ibe,linedashed_vert:sbe,linedashed_frag:obe,meshbasic_vert:abe,meshbasic_frag:lbe,meshlambert_vert:cbe,meshlambert_frag:ube,meshmatcap_vert:dbe,meshmatcap_frag:hbe,meshnormal_vert:fbe,meshnormal_frag:pbe,meshphong_vert:mbe,meshphong_frag:gbe,meshphysical_vert:ybe,meshphysical_frag:vbe,meshtoon_vert:xbe,meshtoon_frag:_be,points_vert:wbe,points_frag:bbe,shadow_vert:Sbe,shadow_frag:Ebe,sprite_vert:Tbe,sprite_frag:Mbe},Ge={common:{diffuse:{value:new nt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ii},uv2Transform:{value:new ii},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ie(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new nt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new nt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ii}},sprite:{diffuse:{value:new nt(16777215)},opacity:{value:1},center:{value:new Ie(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ii}}},Lo={basic:{uniforms:Bi([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.fog]),vertexShader:Bt.meshbasic_vert,fragmentShader:Bt.meshbasic_frag},lambert:{uniforms:Bi([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,Ge.lights,{emissive:{value:new nt(0)}}]),vertexShader:Bt.meshlambert_vert,fragmentShader:Bt.meshlambert_frag},phong:{uniforms:Bi([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,Ge.lights,{emissive:{value:new nt(0)},specular:{value:new nt(1118481)},shininess:{value:30}}]),vertexShader:Bt.meshphong_vert,fragmentShader:Bt.meshphong_frag},standard:{uniforms:Bi([Ge.common,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.roughnessmap,Ge.metalnessmap,Ge.fog,Ge.lights,{emissive:{value:new nt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Bt.meshphysical_vert,fragmentShader:Bt.meshphysical_frag},toon:{uniforms:Bi([Ge.common,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.gradientmap,Ge.fog,Ge.lights,{emissive:{value:new nt(0)}}]),vertexShader:Bt.meshtoon_vert,fragmentShader:Bt.meshtoon_frag},matcap:{uniforms:Bi([Ge.common,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,{matcap:{value:null}}]),vertexShader:Bt.meshmatcap_vert,fragmentShader:Bt.meshmatcap_frag},points:{uniforms:Bi([Ge.points,Ge.fog]),vertexShader:Bt.points_vert,fragmentShader:Bt.points_frag},dashed:{uniforms:Bi([Ge.common,Ge.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Bt.linedashed_vert,fragmentShader:Bt.linedashed_frag},depth:{uniforms:Bi([Ge.common,Ge.displacementmap]),vertexShader:Bt.depth_vert,fragmentShader:Bt.depth_frag},normal:{uniforms:Bi([Ge.common,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,{opacity:{value:1}}]),vertexShader:Bt.meshnormal_vert,fragmentShader:Bt.meshnormal_frag},sprite:{uniforms:Bi([Ge.sprite,Ge.fog]),vertexShader:Bt.sprite_vert,fragmentShader:Bt.sprite_frag},background:{uniforms:{uvTransform:{value:new ii},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Bt.background_vert,fragmentShader:Bt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Bt.backgroundCube_vert,fragmentShader:Bt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Bt.cube_vert,fragmentShader:Bt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Bt.equirect_vert,fragmentShader:Bt.equirect_frag},distanceRGBA:{uniforms:Bi([Ge.common,Ge.displacementmap,{referencePosition:{value:new $},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Bt.distanceRGBA_vert,fragmentShader:Bt.distanceRGBA_frag},shadow:{uniforms:Bi([Ge.lights,Ge.fog,{color:{value:new nt(0)},opacity:{value:1}}]),vertexShader:Bt.shadow_vert,fragmentShader:Bt.shadow_frag}};Lo.physical={uniforms:Bi([Lo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ie(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new nt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ie},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new nt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new nt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Bt.meshphysical_vert,fragmentShader:Bt.meshphysical_frag};const n_={r:0,b:0,g:0};function Abe(n,e,t,r,i,s,o){const a=new nt(0);let l=s===!0?0:1,c,u,d=null,f=0,g=null;function v(x,_){let w=!1,S=_.isScene===!0?_.background:null;S&&S.isTexture&&(S=(_.backgroundBlurriness>0?t:e).get(S));const M=n.xr,I=M.getSession&&M.getSession();I&&I.environmentBlendMode==="additive"&&(S=null),S===null?y(a,l):S&&S.isColor&&(y(S,1),w=!0),(n.autoClear||w)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===vm)?(u===void 0&&(u=new si(new wu(1,1,1),new Da({name:"BackgroundCubeMaterial",uniforms:Jp(Lo.backgroundCube.uniforms),vertexShader:Lo.backgroundCube.vertexShader,fragmentShader:Lo.backgroundCube.fragmentShader,side:ps,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(L,P,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=S,u.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,u.material.toneMapped=S.encoding!==On,(d!==S||f!==S.version||g!==n.toneMapping)&&(u.material.needsUpdate=!0,d=S,f=S.version,g=n.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null)):S&&S.isTexture&&(c===void 0&&(c=new si(new _m(2,2),new Da({name:"BackgroundMaterial",uniforms:Jp(Lo.background.uniforms),vertexShader:Lo.background.vertexShader,fragmentShader:Lo.background.fragmentShader,side:Nl,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=S,c.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,c.material.toneMapped=S.encoding!==On,S.matrixAutoUpdate===!0&&S.updateMatrix(),c.material.uniforms.uvTransform.value.copy(S.matrix),(d!==S||f!==S.version||g!==n.toneMapping)&&(c.material.needsUpdate=!0,d=S,f=S.version,g=n.toneMapping),c.layers.enableAll(),x.unshift(c,c.geometry,c.material,0,0,null))}function y(x,_){x.getRGB(n_,T$(n)),r.buffers.color.setClear(n_.r,n_.g,n_.b,_,o)}return{getClearColor:function(){return a},setClearColor:function(x,_=1){a.set(x),l=_,y(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(x){l=x,y(a,l)},render:v}}function Cbe(n,e,t,r){const i=n.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=x(null);let c=l,u=!1;function d(B,Z,ne,oe,z){let G=!1;if(o){const q=y(oe,ne,Z);c!==q&&(c=q,g(c.object)),G=_(B,oe,ne,z),G&&w(B,oe,ne,z)}else{const q=Z.wireframe===!0;(c.geometry!==oe.id||c.program!==ne.id||c.wireframe!==q)&&(c.geometry=oe.id,c.program=ne.id,c.wireframe=q,G=!0)}z!==null&&t.update(z,34963),(G||u)&&(u=!1,T(B,Z,ne,oe),z!==null&&n.bindBuffer(34963,t.get(z).buffer))}function f(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function g(B){return r.isWebGL2?n.bindVertexArray(B):s.bindVertexArrayOES(B)}function v(B){return r.isWebGL2?n.deleteVertexArray(B):s.deleteVertexArrayOES(B)}function y(B,Z,ne){const oe=ne.wireframe===!0;let z=a[B.id];z===void 0&&(z={},a[B.id]=z);let G=z[Z.id];G===void 0&&(G={},z[Z.id]=G);let q=G[oe];return q===void 0&&(q=x(f()),G[oe]=q),q}function x(B){const Z=[],ne=[],oe=[];for(let z=0;z<i;z++)Z[z]=0,ne[z]=0,oe[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Z,enabledAttributes:ne,attributeDivisors:oe,object:B,attributes:{},index:null}}function _(B,Z,ne,oe){const z=c.attributes,G=Z.attributes;let q=0;const se=ne.getAttributes();for(const J in se)if(se[J].location>=0){const _e=z[J];let re=G[J];if(re===void 0&&(J==="instanceMatrix"&&B.instanceMatrix&&(re=B.instanceMatrix),J==="instanceColor"&&B.instanceColor&&(re=B.instanceColor)),_e===void 0||_e.attribute!==re||re&&_e.data!==re.data)return!0;q++}return c.attributesNum!==q||c.index!==oe}function w(B,Z,ne,oe){const z={},G=Z.attributes;let q=0;const se=ne.getAttributes();for(const J in se)if(se[J].location>=0){let _e=G[J];_e===void 0&&(J==="instanceMatrix"&&B.instanceMatrix&&(_e=B.instanceMatrix),J==="instanceColor"&&B.instanceColor&&(_e=B.instanceColor));const re={};re.attribute=_e,_e&&_e.data&&(re.data=_e.data),z[J]=re,q++}c.attributes=z,c.attributesNum=q,c.index=oe}function S(){const B=c.newAttributes;for(let Z=0,ne=B.length;Z<ne;Z++)B[Z]=0}function M(B){I(B,0)}function I(B,Z){const ne=c.newAttributes,oe=c.enabledAttributes,z=c.attributeDivisors;ne[B]=1,oe[B]===0&&(n.enableVertexAttribArray(B),oe[B]=1),z[B]!==Z&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](B,Z),z[B]=Z)}function L(){const B=c.newAttributes,Z=c.enabledAttributes;for(let ne=0,oe=Z.length;ne<oe;ne++)Z[ne]!==B[ne]&&(n.disableVertexAttribArray(ne),Z[ne]=0)}function P(B,Z,ne,oe,z,G){r.isWebGL2===!0&&(ne===5124||ne===5125)?n.vertexAttribIPointer(B,Z,ne,z,G):n.vertexAttribPointer(B,Z,ne,oe,z,G)}function T(B,Z,ne,oe){if(r.isWebGL2===!1&&(B.isInstancedMesh||oe.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const z=oe.attributes,G=ne.getAttributes(),q=Z.defaultAttributeValues;for(const se in G){const J=G[se];if(J.location>=0){let he=z[se];if(he===void 0&&(se==="instanceMatrix"&&B.instanceMatrix&&(he=B.instanceMatrix),se==="instanceColor"&&B.instanceColor&&(he=B.instanceColor)),he!==void 0){const _e=he.normalized,re=he.itemSize,Y=t.get(he);if(Y===void 0)continue;const ae=Y.buffer,Se=Y.type,Re=Y.bytesPerElement;if(he.isInterleavedBufferAttribute){const Ae=he.data,Te=Ae.stride,te=he.offset;if(Ae.isInstancedInterleavedBuffer){for(let le=0;le<J.locationSize;le++)I(J.location+le,Ae.meshPerAttribute);B.isInstancedMesh!==!0&&oe._maxInstanceCount===void 0&&(oe._maxInstanceCount=Ae.meshPerAttribute*Ae.count)}else for(let le=0;le<J.locationSize;le++)M(J.location+le);n.bindBuffer(34962,ae);for(let le=0;le<J.locationSize;le++)P(J.location+le,re/J.locationSize,Se,_e,Te*Re,(te+re/J.locationSize*le)*Re)}else{if(he.isInstancedBufferAttribute){for(let Ae=0;Ae<J.locationSize;Ae++)I(J.location+Ae,he.meshPerAttribute);B.isInstancedMesh!==!0&&oe._maxInstanceCount===void 0&&(oe._maxInstanceCount=he.meshPerAttribute*he.count)}else for(let Ae=0;Ae<J.locationSize;Ae++)M(J.location+Ae);n.bindBuffer(34962,ae);for(let Ae=0;Ae<J.locationSize;Ae++)P(J.location+Ae,re/J.locationSize,Se,_e,re*Re,re/J.locationSize*Ae*Re)}}else if(q!==void 0){const _e=q[se];if(_e!==void 0)switch(_e.length){case 2:n.vertexAttrib2fv(J.location,_e);break;case 3:n.vertexAttrib3fv(J.location,_e);break;case 4:n.vertexAttrib4fv(J.location,_e);break;default:n.vertexAttrib1fv(J.location,_e)}}}}L()}function C(){U();for(const B in a){const Z=a[B];for(const ne in Z){const oe=Z[ne];for(const z in oe)v(oe[z].object),delete oe[z];delete Z[ne]}delete a[B]}}function k(B){if(a[B.id]===void 0)return;const Z=a[B.id];for(const ne in Z){const oe=Z[ne];for(const z in oe)v(oe[z].object),delete oe[z];delete Z[ne]}delete a[B.id]}function O(B){for(const Z in a){const ne=a[Z];if(ne[B.id]===void 0)continue;const oe=ne[B.id];for(const z in oe)v(oe[z].object),delete oe[z];delete ne[B.id]}}function U(){V(),u=!0,c!==l&&(c=l,g(c.object))}function V(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:U,resetDefaultState:V,dispose:C,releaseStatesOfGeometry:k,releaseStatesOfProgram:O,initAttributes:S,enableAttribute:M,disableUnusedAttributes:L}}function Pbe(n,e,t,r){const i=r.isWebGL2;let s;function o(c){s=c}function a(c,u){n.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,d){if(d===0)return;let f,g;if(i)f=n,g="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[g](s,c,u,d),t.update(u,s,d)}this.setMode=o,this.render=a,this.renderInstances=l}function Ibe(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(P){if(P==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext;let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,d=n.getParameter(34930),f=n.getParameter(35660),g=n.getParameter(3379),v=n.getParameter(34076),y=n.getParameter(34921),x=n.getParameter(36347),_=n.getParameter(36348),w=n.getParameter(36349),S=f>0,M=o||e.has("OES_texture_float"),I=S&&M,L=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:f,maxTextureSize:g,maxCubemapSize:v,maxAttributes:y,maxVertexUniforms:x,maxVaryings:_,maxFragmentUniforms:w,vertexTextures:S,floatFragmentTextures:M,floatVertexTextures:I,maxSamples:L}}function Rbe(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new il,a=new ii,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const g=d.length!==0||f||r!==0||i;return i=f,r=d.length,g},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,f){t=u(d,f,0)},this.setState=function(d,f,g){const v=d.clippingPlanes,y=d.clipIntersection,x=d.clipShadows,_=n.get(d);if(!i||v===null||v.length===0||s&&!x)s?u(null):c();else{const w=s?0:r,S=w*4;let M=_.clippingState||null;l.value=M,M=u(v,f,S,g);for(let I=0;I!==S;++I)M[I]=t[I];_.clippingState=M,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=w}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,f,g,v){const y=d!==null?d.length:0;let x=null;if(y!==0){if(x=l.value,v!==!0||x===null){const _=g+y*4,w=f.matrixWorldInverse;a.getNormalMatrix(w),(x===null||x.length<_)&&(x=new Float32Array(_));for(let S=0,M=g;S!==y;++S,M+=4)o.copy(d[S]).applyMatrix4(w,a),o.normal.toArray(x,M),x[M+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,x}}function kbe(n){let e=new WeakMap;function t(o,a){return a===rv?o.mapping=au:a===iv&&(o.mapping=lu),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===rv||a===iv)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new C$(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class $c extends t0{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Wf=4,dF=[.125,.215,.35,.446,.526,.582],od=20,VT=new $c,hF=new nt;let UT=null;const id=(1+Math.sqrt(5))/2,cf=1/id,fF=[new $(1,1,1),new $(-1,1,1),new $(1,1,-1),new $(-1,1,-1),new $(0,id,cf),new $(0,id,-cf),new $(cf,0,id),new $(-cf,0,id),new $(id,cf,0),new $(-id,cf,0)];class eP{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){UT=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=gF(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=mF(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(UT),e.scissorTest=!1,r_(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===au||e.mapping===lu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),UT=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:wr,minFilter:wr,generateMipmaps:!1,type:Xp,format:as,encoding:uu,depthBuffer:!1},i=pF(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=pF(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Nbe(s)),this._blurMaterial=Dbe(s,e,t)}return i}_compileMaterial(e){const t=new si(this._lodPlanes[0],e);this._renderer.compile(t,VT)}_sceneToCubeUV(e,t,r,i){const a=new Sr(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,f=u.toneMapping;u.getClearColor(hF),u.toneMapping=Wo,u.autoClear=!1;const g=new _u({name:"PMREM.Background",side:ps,depthWrite:!1,depthTest:!1}),v=new si(new wu,g);let y=!1;const x=e.background;x?x.isColor&&(g.color.copy(x),e.background=null,y=!0):(g.color.copy(hF),y=!0);for(let _=0;_<6;_++){const w=_%3;w===0?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):w===1?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_]));const S=this._cubeSize;r_(i,w*S,_>2?S:0,S,S),u.setRenderTarget(i),y&&u.render(v,a),u.render(e,a)}v.geometry.dispose(),v.material.dispose(),u.toneMapping=f,u.autoClear=d,e.background=x}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===au||e.mapping===lu;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=gF()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=mF());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new si(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;r_(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,VT)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=fF[(i-1)%fF.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new si(this._lodPlanes[i],c),f=c.uniforms,g=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*od-1),y=s/v,x=isFinite(s)?1+Math.floor(u*y):od;x>od&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${od}`);const _=[];let w=0;for(let P=0;P<od;++P){const T=P/y,C=Math.exp(-T*T/2);_.push(C),P===0?w+=C:P<x&&(w+=2*C)}for(let P=0;P<_.length;P++)_[P]=_[P]/w;f.envMap.value=e.texture,f.samples.value=x,f.weights.value=_,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:S}=this;f.dTheta.value=v,f.mipInt.value=S-r;const M=this._sizeLods[i],I=3*M*(i>S-Wf?i-S+Wf:0),L=4*(this._cubeSize-M);r_(t,I,L,3*M,2*M),l.setRenderTarget(t),l.render(d,VT)}}function Nbe(n){const e=[],t=[],r=[];let i=n;const s=n-Wf+1+dF.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Wf?l=dF[o-n+Wf-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,f=[u,u,d,u,d,d,u,u,d,d,u,d],g=6,v=6,y=3,x=2,_=1,w=new Float32Array(y*v*g),S=new Float32Array(x*v*g),M=new Float32Array(_*v*g);for(let L=0;L<g;L++){const P=L%3*2/3-1,T=L>2?0:-1,C=[P,T,0,P+2/3,T,0,P+2/3,T+1,0,P,T,0,P+2/3,T+1,0,P,T+1,0];w.set(C,y*v*L),S.set(f,x*v*L);const k=[L,L,L,L,L,L];M.set(k,_*v*L)}const I=new Wt;I.setAttribute("position",new kn(w,y)),I.setAttribute("uv",new kn(S,x)),I.setAttribute("faceIndex",new kn(M,_)),e.push(I),i>Wf&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function pF(n,e,t){const r=new Qo(n,e,t);return r.texture.mapping=vm,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function r_(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function Dbe(n,e,t){const r=new Float32Array(od),i=new $(0,1,0);return new Da({name:"SphericalGaussianBlur",defines:{n:od,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:WR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:xl,depthTest:!1,depthWrite:!1})}function mF(){return new Da({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:WR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:xl,depthTest:!1,depthWrite:!1})}function gF(){return new Da({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:WR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:xl,depthTest:!1,depthWrite:!1})}function WR(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Lbe(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===rv||l===iv,u=l===au||l===lu;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return t===null&&(t=new eP(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&i(d)){t===null&&(t=new eP(n));const f=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,f),a.addEventListener("dispose",s),f.texture}else return null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function Obe(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Fbe(n,e,t,r){const i={},s=new WeakMap;function o(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const v in f.attributes)e.remove(f.attributes[v]);f.removeEventListener("dispose",o),delete i[f.id];const g=s.get(f);g&&(e.remove(g),s.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(d,f){return i[f.id]===!0||(f.addEventListener("dispose",o),i[f.id]=!0,t.memory.geometries++),f}function l(d){const f=d.attributes;for(const v in f)e.update(f[v],34962);const g=d.morphAttributes;for(const v in g){const y=g[v];for(let x=0,_=y.length;x<_;x++)e.update(y[x],34962)}}function c(d){const f=[],g=d.index,v=d.attributes.position;let y=0;if(g!==null){const w=g.array;y=g.version;for(let S=0,M=w.length;S<M;S+=3){const I=w[S+0],L=w[S+1],P=w[S+2];f.push(I,L,L,P,P,I)}}else{const w=v.array;y=v.version;for(let S=0,M=w.length/3-1;S<M;S+=3){const I=S+0,L=S+1,P=S+2;f.push(I,L,L,P,P,I)}}const x=new(S$(f)?HR:BR)(f,1);x.version=y;const _=s.get(d);_&&e.remove(_),s.set(d,x)}function u(d){const f=s.get(d);if(f){const g=d.index;g!==null&&f.version<g.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function jbe(n,e,t,r){const i=r.isWebGL2;let s;function o(f){s=f}let a,l;function c(f){a=f.type,l=f.bytesPerElement}function u(f,g){n.drawElements(s,g,a,f*l),t.update(g,s,1)}function d(f,g,v){if(v===0)return;let y,x;if(i)y=n,x="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[x](s,g,a,f*l,v),t.update(g,s,v)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=d}function Vbe(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function Ube(n,e){return n[0]-e[0]}function zbe(n,e){return Math.abs(e[1])-Math.abs(n[1])}function Bbe(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new En,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,d){const f=c.morphTargetInfluences;if(e.isWebGL2===!0){const v=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,y=v!==void 0?v.length:0;let x=s.get(u);if(x===void 0||x.count!==y){let Z=function(){V.dispose(),s.delete(u),u.removeEventListener("dispose",Z)};var g=Z;x!==void 0&&x.texture.dispose();const S=u.morphAttributes.position!==void 0,M=u.morphAttributes.normal!==void 0,I=u.morphAttributes.color!==void 0,L=u.morphAttributes.position||[],P=u.morphAttributes.normal||[],T=u.morphAttributes.color||[];let C=0;S===!0&&(C=1),M===!0&&(C=2),I===!0&&(C=3);let k=u.attributes.position.count*C,O=1;k>e.maxTextureSize&&(O=Math.ceil(k/e.maxTextureSize),k=e.maxTextureSize);const U=new Float32Array(k*O*4*y),V=new Jb(U,k,O,y);V.type=hl,V.needsUpdate=!0;const B=C*4;for(let ne=0;ne<y;ne++){const oe=L[ne],z=P[ne],G=T[ne],q=k*O*4*ne;for(let se=0;se<oe.count;se++){const J=se*B;S===!0&&(o.fromBufferAttribute(oe,se),U[q+J+0]=o.x,U[q+J+1]=o.y,U[q+J+2]=o.z,U[q+J+3]=0),M===!0&&(o.fromBufferAttribute(z,se),U[q+J+4]=o.x,U[q+J+5]=o.y,U[q+J+6]=o.z,U[q+J+7]=0),I===!0&&(o.fromBufferAttribute(G,se),U[q+J+8]=o.x,U[q+J+9]=o.y,U[q+J+10]=o.z,U[q+J+11]=G.itemSize===4?o.w:1)}}x={count:y,texture:V,size:new Ie(k,O)},s.set(u,x),u.addEventListener("dispose",Z)}let _=0;for(let S=0;S<f.length;S++)_+=f[S];const w=u.morphTargetsRelative?1:1-_;d.getUniforms().setValue(n,"morphTargetBaseInfluence",w),d.getUniforms().setValue(n,"morphTargetInfluences",f),d.getUniforms().setValue(n,"morphTargetsTexture",x.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",x.size)}else{const v=f===void 0?0:f.length;let y=r[u.id];if(y===void 0||y.length!==v){y=[];for(let M=0;M<v;M++)y[M]=[M,0];r[u.id]=y}for(let M=0;M<v;M++){const I=y[M];I[0]=M,I[1]=f[M]}y.sort(zbe);for(let M=0;M<8;M++)M<v&&y[M][1]?(a[M][0]=y[M][0],a[M][1]=y[M][1]):(a[M][0]=Number.MAX_SAFE_INTEGER,a[M][1]=0);a.sort(Ube);const x=u.morphAttributes.position,_=u.morphAttributes.normal;let w=0;for(let M=0;M<8;M++){const I=a[M],L=I[0],P=I[1];L!==Number.MAX_SAFE_INTEGER&&P?(x&&u.getAttribute("morphTarget"+M)!==x[L]&&u.setAttribute("morphTarget"+M,x[L]),_&&u.getAttribute("morphNormal"+M)!==_[L]&&u.setAttribute("morphNormal"+M,_[L]),i[M]=P,w+=P):(x&&u.hasAttribute("morphTarget"+M)===!0&&u.deleteAttribute("morphTarget"+M),_&&u.hasAttribute("morphNormal"+M)===!0&&u.deleteAttribute("morphNormal"+M),i[M]=0)}const S=u.morphTargetsRelative?1:1-w;d.getUniforms().setValue(n,"morphTargetBaseInfluence",S),d.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function Hbe(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);return i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),d}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const I$=new Yn,R$=new Jb,k$=new zR,N$=new n0,yF=[],vF=[],xF=new Float32Array(16),_F=new Float32Array(9),wF=new Float32Array(4);function wm(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=yF[i];if(s===void 0&&(s=new Float32Array(i),yF[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Br(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Hr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function eS(n,e){let t=vF[e];t===void 0&&(t=new Int32Array(e),vF[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function Wbe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Gbe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Br(t,e))return;n.uniform2fv(this.addr,e),Hr(t,e)}}function $be(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Br(t,e))return;n.uniform3fv(this.addr,e),Hr(t,e)}}function qbe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Br(t,e))return;n.uniform4fv(this.addr,e),Hr(t,e)}}function Kbe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Br(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Hr(t,e)}else{if(Br(t,r))return;wF.set(r),n.uniformMatrix2fv(this.addr,!1,wF),Hr(t,r)}}function Ybe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Br(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Hr(t,e)}else{if(Br(t,r))return;_F.set(r),n.uniformMatrix3fv(this.addr,!1,_F),Hr(t,r)}}function Xbe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Br(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Hr(t,e)}else{if(Br(t,r))return;xF.set(r),n.uniformMatrix4fv(this.addr,!1,xF),Hr(t,r)}}function Qbe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Jbe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Br(t,e))return;n.uniform2iv(this.addr,e),Hr(t,e)}}function Zbe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Br(t,e))return;n.uniform3iv(this.addr,e),Hr(t,e)}}function eSe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Br(t,e))return;n.uniform4iv(this.addr,e),Hr(t,e)}}function tSe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function nSe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Br(t,e))return;n.uniform2uiv(this.addr,e),Hr(t,e)}}function rSe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Br(t,e))return;n.uniform3uiv(this.addr,e),Hr(t,e)}}function iSe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Br(t,e))return;n.uniform4uiv(this.addr,e),Hr(t,e)}}function sSe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||I$,i)}function oSe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||k$,i)}function aSe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||N$,i)}function lSe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||R$,i)}function cSe(n){switch(n){case 5126:return Wbe;case 35664:return Gbe;case 35665:return $be;case 35666:return qbe;case 35674:return Kbe;case 35675:return Ybe;case 35676:return Xbe;case 5124:case 35670:return Qbe;case 35667:case 35671:return Jbe;case 35668:case 35672:return Zbe;case 35669:case 35673:return eSe;case 5125:return tSe;case 36294:return nSe;case 36295:return rSe;case 36296:return iSe;case 35678:case 36198:case 36298:case 36306:case 35682:return sSe;case 35679:case 36299:case 36307:return oSe;case 35680:case 36300:case 36308:case 36293:return aSe;case 36289:case 36303:case 36311:case 36292:return lSe}}function uSe(n,e){n.uniform1fv(this.addr,e)}function dSe(n,e){const t=wm(e,this.size,2);n.uniform2fv(this.addr,t)}function hSe(n,e){const t=wm(e,this.size,3);n.uniform3fv(this.addr,t)}function fSe(n,e){const t=wm(e,this.size,4);n.uniform4fv(this.addr,t)}function pSe(n,e){const t=wm(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function mSe(n,e){const t=wm(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function gSe(n,e){const t=wm(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function ySe(n,e){n.uniform1iv(this.addr,e)}function vSe(n,e){n.uniform2iv(this.addr,e)}function xSe(n,e){n.uniform3iv(this.addr,e)}function _Se(n,e){n.uniform4iv(this.addr,e)}function wSe(n,e){n.uniform1uiv(this.addr,e)}function bSe(n,e){n.uniform2uiv(this.addr,e)}function SSe(n,e){n.uniform3uiv(this.addr,e)}function ESe(n,e){n.uniform4uiv(this.addr,e)}function TSe(n,e,t){const r=this.cache,i=e.length,s=eS(t,i);Br(r,s)||(n.uniform1iv(this.addr,s),Hr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||I$,s[o])}function MSe(n,e,t){const r=this.cache,i=e.length,s=eS(t,i);Br(r,s)||(n.uniform1iv(this.addr,s),Hr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||k$,s[o])}function ASe(n,e,t){const r=this.cache,i=e.length,s=eS(t,i);Br(r,s)||(n.uniform1iv(this.addr,s),Hr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||N$,s[o])}function CSe(n,e,t){const r=this.cache,i=e.length,s=eS(t,i);Br(r,s)||(n.uniform1iv(this.addr,s),Hr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||R$,s[o])}function PSe(n){switch(n){case 5126:return uSe;case 35664:return dSe;case 35665:return hSe;case 35666:return fSe;case 35674:return pSe;case 35675:return mSe;case 35676:return gSe;case 5124:case 35670:return ySe;case 35667:case 35671:return vSe;case 35668:case 35672:return xSe;case 35669:case 35673:return _Se;case 5125:return wSe;case 36294:return bSe;case 36295:return SSe;case 36296:return ESe;case 35678:case 36198:case 36298:case 36306:case 35682:return TSe;case 35679:case 36299:case 36307:return MSe;case 35680:case 36300:case 36308:case 36293:return ASe;case 36289:case 36303:case 36311:case 36292:return CSe}}class ISe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=cSe(t.type)}}class RSe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=PSe(t.type)}}class kSe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const zT=/(\w+)(\])?(\[|\.)?/g;function bF(n,e){n.seq.push(e),n.map[e.id]=e}function NSe(n,e,t){const r=n.name,i=r.length;for(zT.lastIndex=0;;){const s=zT.exec(r),o=zT.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){bF(t,c===void 0?new ISe(a,n,e):new RSe(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new kSe(a),bF(t,d)),t=d}}}class pw{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);NSe(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function SF(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let DSe=0;function LSe(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function OSe(n){switch(n){case uu:return["Linear","( value )"];case On:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function EF(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+LSe(n.getShaderSource(e),o)}else return i}function FSe(n,e){const t=OSe(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function jSe(n,e){let t;switch(e){case Y7:t="Linear";break;case X7:t="Reinhard";break;case Q7:t="OptimizedCineon";break;case DR:t="ACESFilmic";break;case J7:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function VSe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Vg).join(`
`)}function USe(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function zSe(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Vg(n){return n!==""}function TF(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function MF(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const BSe=/^[ \t]*#include +<([\w\d./]+)>/gm;function tP(n){return n.replace(BSe,HSe)}function HSe(n,e){const t=Bt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return tP(t)}const WSe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function AF(n){return n.replace(WSe,GSe)}function GSe(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function CF(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function $Se(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Yb?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===hy?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===fd&&(e="SHADOWMAP_TYPE_VSM"),e}function qSe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case au:case lu:e="ENVMAP_TYPE_CUBE";break;case vm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function KSe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case lu:e="ENVMAP_MODE_REFRACTION";break}return e}function YSe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Zv:e="ENVMAP_BLENDING_MULTIPLY";break;case q7:e="ENVMAP_BLENDING_MIX";break;case K7:e="ENVMAP_BLENDING_ADD";break}return e}function XSe(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function QSe(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=$Se(t),c=qSe(t),u=KSe(t),d=YSe(t),f=XSe(t),g=t.isWebGL2?"":VSe(t),v=USe(s),y=i.createProgram();let x,_,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=[v].filter(Vg).join(`
`),x.length>0&&(x+=`
`),_=[g,v].filter(Vg).join(`
`),_.length>0&&(_+=`
`)):(x=[CF(t),"#define SHADER_NAME "+t.shaderName,v,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Vg).join(`
`),_=[g,CF(t),"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Wo?"#define TONE_MAPPING":"",t.toneMapping!==Wo?Bt.tonemapping_pars_fragment:"",t.toneMapping!==Wo?jSe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Bt.encodings_pars_fragment,FSe("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Vg).join(`
`)),o=tP(o),o=TF(o,t),o=MF(o,t),a=tP(a),a=TF(a,t),a=MF(a,t),o=AF(o),a=AF(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,x=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,_=["#define varying in",t.glslVersion===JC?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===JC?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const S=w+x+o,M=w+_+a,I=SF(i,35633,S),L=SF(i,35632,M);if(i.attachShader(y,I),i.attachShader(y,L),t.index0AttributeName!==void 0?i.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y),n.debug.checkShaderErrors){const C=i.getProgramInfoLog(y).trim(),k=i.getShaderInfoLog(I).trim(),O=i.getShaderInfoLog(L).trim();let U=!0,V=!0;if(i.getProgramParameter(y,35714)===!1){U=!1;const B=EF(i,I,"vertex"),Z=EF(i,L,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,35715)+`

Program Info Log: `+C+`
`+B+`
`+Z)}else C!==""?console.warn("THREE.WebGLProgram: Program Info Log:",C):(k===""||O==="")&&(V=!1);V&&(this.diagnostics={runnable:U,programLog:C,vertexShader:{log:k,prefix:x},fragmentShader:{log:O,prefix:_}})}i.deleteShader(I),i.deleteShader(L);let P;this.getUniforms=function(){return P===void 0&&(P=new pw(i,y)),P};let T;return this.getAttributes=function(){return T===void 0&&(T=zSe(i,y)),T},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.name=t.shaderName,this.id=DSe++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=I,this.fragmentShader=L,this}let JSe=0;class ZSe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new eEe(e),t.set(e,r)),r}}class eEe{constructor(e){this.id=JSe++,this.code=e,this.usedTimes=0}}function tEe(n,e,t,r,i,s,o){const a=new Nd,l=new ZSe,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,f=i.vertexTextures;let g=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(T,C,k,O,U){const V=O.fog,B=U.geometry,Z=T.isMeshStandardMaterial?O.environment:null,ne=(T.isMeshStandardMaterial?t:e).get(T.envMap||Z),oe=ne&&ne.mapping===vm?ne.image.height:null,z=v[T.type];T.precision!==null&&(g=i.getMaxPrecision(T.precision),g!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",g,"instead."));const G=B.morphAttributes.position||B.morphAttributes.normal||B.morphAttributes.color,q=G!==void 0?G.length:0;let se=0;B.morphAttributes.position!==void 0&&(se=1),B.morphAttributes.normal!==void 0&&(se=2),B.morphAttributes.color!==void 0&&(se=3);let J,he,_e,re;if(z){const Te=Lo[z];J=Te.vertexShader,he=Te.fragmentShader}else J=T.vertexShader,he=T.fragmentShader,l.update(T),_e=l.getVertexShaderID(T),re=l.getFragmentShaderID(T);const Y=n.getRenderTarget(),ae=T.alphaTest>0,Se=T.clearcoat>0,Re=T.iridescence>0;return{isWebGL2:u,shaderID:z,shaderName:T.type,vertexShader:J,fragmentShader:he,defines:T.defines,customVertexShaderID:_e,customFragmentShaderID:re,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:g,instancing:U.isInstancedMesh===!0,instancingColor:U.isInstancedMesh===!0&&U.instanceColor!==null,supportsVertexTextures:f,outputEncoding:Y===null?n.outputEncoding:Y.isXRRenderTarget===!0?Y.texture.encoding:uu,map:!!T.map,matcap:!!T.matcap,envMap:!!ne,envMapMode:ne&&ne.mapping,envMapCubeUVHeight:oe,lightMap:!!T.lightMap,aoMap:!!T.aoMap,emissiveMap:!!T.emissiveMap,bumpMap:!!T.bumpMap,normalMap:!!T.normalMap,objectSpaceNormalMap:T.normalMapType===x$,tangentSpaceNormalMap:T.normalMapType===xu,decodeVideoTexture:!!T.map&&T.map.isVideoTexture===!0&&T.map.encoding===On,clearcoat:Se,clearcoatMap:Se&&!!T.clearcoatMap,clearcoatRoughnessMap:Se&&!!T.clearcoatRoughnessMap,clearcoatNormalMap:Se&&!!T.clearcoatNormalMap,iridescence:Re,iridescenceMap:Re&&!!T.iridescenceMap,iridescenceThicknessMap:Re&&!!T.iridescenceThicknessMap,displacementMap:!!T.displacementMap,roughnessMap:!!T.roughnessMap,metalnessMap:!!T.metalnessMap,specularMap:!!T.specularMap,specularIntensityMap:!!T.specularIntensityMap,specularColorMap:!!T.specularColorMap,opaque:T.transparent===!1&&T.blending===Id,alphaMap:!!T.alphaMap,alphaTest:ae,gradientMap:!!T.gradientMap,sheen:T.sheen>0,sheenColorMap:!!T.sheenColorMap,sheenRoughnessMap:!!T.sheenRoughnessMap,transmission:T.transmission>0,transmissionMap:!!T.transmissionMap,thicknessMap:!!T.thicknessMap,combine:T.combine,vertexTangents:!!T.normalMap&&!!B.attributes.tangent,vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!B.attributes.color&&B.attributes.color.itemSize===4,vertexUvs:!!T.map||!!T.bumpMap||!!T.normalMap||!!T.specularMap||!!T.alphaMap||!!T.emissiveMap||!!T.roughnessMap||!!T.metalnessMap||!!T.clearcoatMap||!!T.clearcoatRoughnessMap||!!T.clearcoatNormalMap||!!T.iridescenceMap||!!T.iridescenceThicknessMap||!!T.displacementMap||!!T.transmissionMap||!!T.thicknessMap||!!T.specularIntensityMap||!!T.specularColorMap||!!T.sheenColorMap||!!T.sheenRoughnessMap,uvsVertexOnly:!(T.map||T.bumpMap||T.normalMap||T.specularMap||T.alphaMap||T.emissiveMap||T.roughnessMap||T.metalnessMap||T.clearcoatNormalMap||T.iridescenceMap||T.iridescenceThicknessMap||T.transmission>0||T.transmissionMap||T.thicknessMap||T.specularIntensityMap||T.specularColorMap||T.sheen>0||T.sheenColorMap||T.sheenRoughnessMap)&&!!T.displacementMap,fog:!!V,useFog:T.fog===!0,fogExp2:V&&V.isFogExp2,flatShading:!!T.flatShading,sizeAttenuation:T.sizeAttenuation,logarithmicDepthBuffer:d,skinning:U.isSkinnedMesh===!0,morphTargets:B.morphAttributes.position!==void 0,morphNormals:B.morphAttributes.normal!==void 0,morphColors:B.morphAttributes.color!==void 0,morphTargetsCount:q,morphTextureStride:se,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&k.length>0,shadowMapType:n.shadowMap.type,toneMapping:T.toneMapped?n.toneMapping:Wo,useLegacyLights:n.useLegacyLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===dl,flipSided:T.side===ps,useDepthPacking:!!T.depthPacking,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:T.extensions&&T.extensions.derivatives,extensionFragDepth:T.extensions&&T.extensions.fragDepth,extensionDrawBuffers:T.extensions&&T.extensions.drawBuffers,extensionShaderTextureLOD:T.extensions&&T.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function x(T){const C=[];if(T.shaderID?C.push(T.shaderID):(C.push(T.customVertexShaderID),C.push(T.customFragmentShaderID)),T.defines!==void 0)for(const k in T.defines)C.push(k),C.push(T.defines[k]);return T.isRawShaderMaterial===!1&&(_(C,T),w(C,T),C.push(n.outputEncoding)),C.push(T.customProgramCacheKey),C.join()}function _(T,C){T.push(C.precision),T.push(C.outputEncoding),T.push(C.envMapMode),T.push(C.envMapCubeUVHeight),T.push(C.combine),T.push(C.vertexUvs),T.push(C.fogExp2),T.push(C.sizeAttenuation),T.push(C.morphTargetsCount),T.push(C.morphAttributeCount),T.push(C.numDirLights),T.push(C.numPointLights),T.push(C.numSpotLights),T.push(C.numSpotLightMaps),T.push(C.numHemiLights),T.push(C.numRectAreaLights),T.push(C.numDirLightShadows),T.push(C.numPointLightShadows),T.push(C.numSpotLightShadows),T.push(C.numSpotLightShadowsWithMaps),T.push(C.shadowMapType),T.push(C.toneMapping),T.push(C.numClippingPlanes),T.push(C.numClipIntersection),T.push(C.depthPacking)}function w(T,C){a.disableAll(),C.isWebGL2&&a.enable(0),C.supportsVertexTextures&&a.enable(1),C.instancing&&a.enable(2),C.instancingColor&&a.enable(3),C.map&&a.enable(4),C.matcap&&a.enable(5),C.envMap&&a.enable(6),C.lightMap&&a.enable(7),C.aoMap&&a.enable(8),C.emissiveMap&&a.enable(9),C.bumpMap&&a.enable(10),C.normalMap&&a.enable(11),C.objectSpaceNormalMap&&a.enable(12),C.tangentSpaceNormalMap&&a.enable(13),C.clearcoat&&a.enable(14),C.clearcoatMap&&a.enable(15),C.clearcoatRoughnessMap&&a.enable(16),C.clearcoatNormalMap&&a.enable(17),C.iridescence&&a.enable(18),C.iridescenceMap&&a.enable(19),C.iridescenceThicknessMap&&a.enable(20),C.displacementMap&&a.enable(21),C.specularMap&&a.enable(22),C.roughnessMap&&a.enable(23),C.metalnessMap&&a.enable(24),C.gradientMap&&a.enable(25),C.alphaMap&&a.enable(26),C.alphaTest&&a.enable(27),C.vertexColors&&a.enable(28),C.vertexAlphas&&a.enable(29),C.vertexUvs&&a.enable(30),C.vertexTangents&&a.enable(31),C.uvsVertexOnly&&a.enable(32),T.push(a.mask),a.disableAll(),C.fog&&a.enable(0),C.useFog&&a.enable(1),C.flatShading&&a.enable(2),C.logarithmicDepthBuffer&&a.enable(3),C.skinning&&a.enable(4),C.morphTargets&&a.enable(5),C.morphNormals&&a.enable(6),C.morphColors&&a.enable(7),C.premultipliedAlpha&&a.enable(8),C.shadowMapEnabled&&a.enable(9),C.useLegacyLights&&a.enable(10),C.doubleSided&&a.enable(11),C.flipSided&&a.enable(12),C.useDepthPacking&&a.enable(13),C.dithering&&a.enable(14),C.specularIntensityMap&&a.enable(15),C.specularColorMap&&a.enable(16),C.transmission&&a.enable(17),C.transmissionMap&&a.enable(18),C.thicknessMap&&a.enable(19),C.sheen&&a.enable(20),C.sheenColorMap&&a.enable(21),C.sheenRoughnessMap&&a.enable(22),C.decodeVideoTexture&&a.enable(23),C.opaque&&a.enable(24),T.push(a.mask)}function S(T){const C=v[T.type];let k;if(C){const O=Lo[C];k=M$.clone(O.uniforms)}else k=T.uniforms;return k}function M(T,C){let k;for(let O=0,U=c.length;O<U;O++){const V=c[O];if(V.cacheKey===C){k=V,++k.usedTimes;break}}return k===void 0&&(k=new QSe(n,C,T,s),c.push(k)),k}function I(T){if(--T.usedTimes===0){const C=c.indexOf(T);c[C]=c[c.length-1],c.pop(),T.destroy()}}function L(T){l.remove(T)}function P(){l.dispose()}return{getParameters:y,getProgramCacheKey:x,getUniforms:S,acquireProgram:M,releaseProgram:I,releaseShaderCache:L,programs:c,dispose:P}}function nEe(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function rEe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function PF(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function IF(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(d,f,g,v,y,x){let _=n[e];return _===void 0?(_={id:d.id,object:d,geometry:f,material:g,groupOrder:v,renderOrder:d.renderOrder,z:y,group:x},n[e]=_):(_.id=d.id,_.object=d,_.geometry=f,_.material=g,_.groupOrder=v,_.renderOrder=d.renderOrder,_.z=y,_.group=x),e++,_}function a(d,f,g,v,y,x){const _=o(d,f,g,v,y,x);g.transmission>0?r.push(_):g.transparent===!0?i.push(_):t.push(_)}function l(d,f,g,v,y,x){const _=o(d,f,g,v,y,x);g.transmission>0?r.unshift(_):g.transparent===!0?i.unshift(_):t.unshift(_)}function c(d,f){t.length>1&&t.sort(d||rEe),r.length>1&&r.sort(f||PF),i.length>1&&i.sort(f||PF)}function u(){for(let d=e,f=n.length;d<f;d++){const g=n[d];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function iEe(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new IF,n.set(r,[o])):i>=s.length?(o=new IF,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function sEe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new $,color:new nt};break;case"SpotLight":t={position:new $,direction:new $,color:new nt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new $,color:new nt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new $,skyColor:new nt,groundColor:new nt};break;case"RectAreaLight":t={color:new nt,position:new $,halfWidth:new $,halfHeight:new $};break}return n[e.id]=t,t}}}function oEe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let aEe=0;function lEe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function cEe(n,e){const t=new sEe,r=oEe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)i.probe.push(new $);const s=new $,o=new Ft,a=new Ft;function l(u,d){let f=0,g=0,v=0;for(let O=0;O<9;O++)i.probe[O].set(0,0,0);let y=0,x=0,_=0,w=0,S=0,M=0,I=0,L=0,P=0,T=0;u.sort(lEe);const C=d===!0?Math.PI:1;for(let O=0,U=u.length;O<U;O++){const V=u[O],B=V.color,Z=V.intensity,ne=V.distance,oe=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)f+=B.r*Z*C,g+=B.g*Z*C,v+=B.b*Z*C;else if(V.isLightProbe)for(let z=0;z<9;z++)i.probe[z].addScaledVector(V.sh.coefficients[z],Z);else if(V.isDirectionalLight){const z=t.get(V);if(z.color.copy(V.color).multiplyScalar(V.intensity*C),V.castShadow){const G=V.shadow,q=r.get(V);q.shadowBias=G.bias,q.shadowNormalBias=G.normalBias,q.shadowRadius=G.radius,q.shadowMapSize=G.mapSize,i.directionalShadow[y]=q,i.directionalShadowMap[y]=oe,i.directionalShadowMatrix[y]=V.shadow.matrix,M++}i.directional[y]=z,y++}else if(V.isSpotLight){const z=t.get(V);z.position.setFromMatrixPosition(V.matrixWorld),z.color.copy(B).multiplyScalar(Z*C),z.distance=ne,z.coneCos=Math.cos(V.angle),z.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),z.decay=V.decay,i.spot[_]=z;const G=V.shadow;if(V.map&&(i.spotLightMap[P]=V.map,P++,G.updateMatrices(V),V.castShadow&&T++),i.spotLightMatrix[_]=G.matrix,V.castShadow){const q=r.get(V);q.shadowBias=G.bias,q.shadowNormalBias=G.normalBias,q.shadowRadius=G.radius,q.shadowMapSize=G.mapSize,i.spotShadow[_]=q,i.spotShadowMap[_]=oe,L++}_++}else if(V.isRectAreaLight){const z=t.get(V);z.color.copy(B).multiplyScalar(Z),z.halfWidth.set(V.width*.5,0,0),z.halfHeight.set(0,V.height*.5,0),i.rectArea[w]=z,w++}else if(V.isPointLight){const z=t.get(V);if(z.color.copy(V.color).multiplyScalar(V.intensity*C),z.distance=V.distance,z.decay=V.decay,V.castShadow){const G=V.shadow,q=r.get(V);q.shadowBias=G.bias,q.shadowNormalBias=G.normalBias,q.shadowRadius=G.radius,q.shadowMapSize=G.mapSize,q.shadowCameraNear=G.camera.near,q.shadowCameraFar=G.camera.far,i.pointShadow[x]=q,i.pointShadowMap[x]=oe,i.pointShadowMatrix[x]=V.shadow.matrix,I++}i.point[x]=z,x++}else if(V.isHemisphereLight){const z=t.get(V);z.skyColor.copy(V.color).multiplyScalar(Z*C),z.groundColor.copy(V.groundColor).multiplyScalar(Z*C),i.hemi[S]=z,S++}}w>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ge.LTC_FLOAT_1,i.rectAreaLTC2=Ge.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Ge.LTC_HALF_1,i.rectAreaLTC2=Ge.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=f,i.ambient[1]=g,i.ambient[2]=v;const k=i.hash;(k.directionalLength!==y||k.pointLength!==x||k.spotLength!==_||k.rectAreaLength!==w||k.hemiLength!==S||k.numDirectionalShadows!==M||k.numPointShadows!==I||k.numSpotShadows!==L||k.numSpotMaps!==P)&&(i.directional.length=y,i.spot.length=_,i.rectArea.length=w,i.point.length=x,i.hemi.length=S,i.directionalShadow.length=M,i.directionalShadowMap.length=M,i.pointShadow.length=I,i.pointShadowMap.length=I,i.spotShadow.length=L,i.spotShadowMap.length=L,i.directionalShadowMatrix.length=M,i.pointShadowMatrix.length=I,i.spotLightMatrix.length=L+P-T,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=T,k.directionalLength=y,k.pointLength=x,k.spotLength=_,k.rectAreaLength=w,k.hemiLength=S,k.numDirectionalShadows=M,k.numPointShadows=I,k.numSpotShadows=L,k.numSpotMaps=P,i.version=aEe++)}function c(u,d){let f=0,g=0,v=0,y=0,x=0;const _=d.matrixWorldInverse;for(let w=0,S=u.length;w<S;w++){const M=u[w];if(M.isDirectionalLight){const I=i.directional[f];I.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(_),f++}else if(M.isSpotLight){const I=i.spot[v];I.position.setFromMatrixPosition(M.matrixWorld),I.position.applyMatrix4(_),I.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(_),v++}else if(M.isRectAreaLight){const I=i.rectArea[y];I.position.setFromMatrixPosition(M.matrixWorld),I.position.applyMatrix4(_),a.identity(),o.copy(M.matrixWorld),o.premultiply(_),a.extractRotation(o),I.halfWidth.set(M.width*.5,0,0),I.halfHeight.set(0,M.height*.5,0),I.halfWidth.applyMatrix4(a),I.halfHeight.applyMatrix4(a),y++}else if(M.isPointLight){const I=i.point[g];I.position.setFromMatrixPosition(M.matrixWorld),I.position.applyMatrix4(_),g++}else if(M.isHemisphereLight){const I=i.hemi[x];I.direction.setFromMatrixPosition(M.matrixWorld),I.direction.transformDirection(_),x++}}}return{setup:l,setupView:c,state:i}}function RF(n,e){const t=new cEe(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(d){r.push(d)}function a(d){i.push(d)}function l(d){t.setup(r,d)}function c(d){t.setupView(r,d)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function uEe(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new RF(n,e),t.set(s,[l])):o>=a.length?(l=new RF(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class GR extends di{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=y$,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class $R extends di{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new $,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const dEe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,hEe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function fEe(n,e,t){let r=new Zb;const i=new Ie,s=new Ie,o=new En,a=new GR({depthPacking:v$}),l=new $R,c={},u=t.maxTextureSize,d={[Nl]:ps,[ps]:Nl,[dl]:dl},f=new Da({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ie},radius:{value:4}},vertexShader:dEe,fragmentShader:hEe}),g=f.clone();g.defines.HORIZONTAL_PASS=1;const v=new Wt;v.setAttribute("position",new kn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new si(v,f),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Yb,this.render=function(M,I,L){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||M.length===0)return;const P=n.getRenderTarget(),T=n.getActiveCubeFace(),C=n.getActiveMipmapLevel(),k=n.state;k.setBlending(xl),k.buffers.color.setClear(1,1,1,1),k.buffers.depth.setTest(!0),k.setScissorTest(!1);for(let O=0,U=M.length;O<U;O++){const V=M[O],B=V.shadow;if(B===void 0){console.warn("THREE.WebGLShadowMap:",V,"has no shadow.");continue}if(B.autoUpdate===!1&&B.needsUpdate===!1)continue;i.copy(B.mapSize);const Z=B.getFrameExtents();if(i.multiply(Z),s.copy(B.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/Z.x),i.x=s.x*Z.x,B.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/Z.y),i.y=s.y*Z.y,B.mapSize.y=s.y)),B.map===null){const oe=this.type!==fd?{minFilter:xr,magFilter:xr}:{};B.map=new Qo(i.x,i.y,oe),B.map.texture.name=V.name+".shadowMap",B.camera.updateProjectionMatrix()}n.setRenderTarget(B.map),n.clear();const ne=B.getViewportCount();for(let oe=0;oe<ne;oe++){const z=B.getViewport(oe);o.set(s.x*z.x,s.y*z.y,s.x*z.z,s.y*z.w),k.viewport(o),B.updateMatrices(V,oe),r=B.getFrustum(),S(I,L,B.camera,V,this.type)}B.isPointLightShadow!==!0&&this.type===fd&&_(B,L),B.needsUpdate=!1}x.needsUpdate=!1,n.setRenderTarget(P,T,C)};function _(M,I){const L=e.update(y);f.defines.VSM_SAMPLES!==M.blurSamples&&(f.defines.VSM_SAMPLES=M.blurSamples,g.defines.VSM_SAMPLES=M.blurSamples,f.needsUpdate=!0,g.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new Qo(i.x,i.y)),f.uniforms.shadow_pass.value=M.map.texture,f.uniforms.resolution.value=M.mapSize,f.uniforms.radius.value=M.radius,n.setRenderTarget(M.mapPass),n.clear(),n.renderBufferDirect(I,null,L,f,y,null),g.uniforms.shadow_pass.value=M.mapPass.texture,g.uniforms.resolution.value=M.mapSize,g.uniforms.radius.value=M.radius,n.setRenderTarget(M.map),n.clear(),n.renderBufferDirect(I,null,L,g,y,null)}function w(M,I,L,P,T,C){let k=null;const O=L.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(O!==void 0)k=O;else if(k=L.isPointLight===!0?l:a,n.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0){const U=k.uuid,V=I.uuid;let B=c[U];B===void 0&&(B={},c[U]=B);let Z=B[V];Z===void 0&&(Z=k.clone(),B[V]=Z),k=Z}return k.visible=I.visible,k.wireframe=I.wireframe,C===fd?k.side=I.shadowSide!==null?I.shadowSide:I.side:k.side=I.shadowSide!==null?I.shadowSide:d[I.side],k.alphaMap=I.alphaMap,k.alphaTest=I.alphaTest,k.map=I.map,k.clipShadows=I.clipShadows,k.clippingPlanes=I.clippingPlanes,k.clipIntersection=I.clipIntersection,k.displacementMap=I.displacementMap,k.displacementScale=I.displacementScale,k.displacementBias=I.displacementBias,k.wireframeLinewidth=I.wireframeLinewidth,k.linewidth=I.linewidth,L.isPointLight===!0&&k.isMeshDistanceMaterial===!0&&(k.referencePosition.setFromMatrixPosition(L.matrixWorld),k.nearDistance=P,k.farDistance=T),k}function S(M,I,L,P,T){if(M.visible===!1)return;if(M.layers.test(I.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&T===fd)&&(!M.frustumCulled||r.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,M.matrixWorld);const O=e.update(M),U=M.material;if(Array.isArray(U)){const V=O.groups;for(let B=0,Z=V.length;B<Z;B++){const ne=V[B],oe=U[ne.materialIndex];if(oe&&oe.visible){const z=w(M,oe,P,L.near,L.far,T);n.renderBufferDirect(L,null,O,z,M,ne)}}}else if(U.visible){const V=w(M,U,P,L.near,L.far,T);n.renderBufferDirect(L,null,O,V,M,null)}}const k=M.children;for(let O=0,U=k.length;O<U;O++)S(k[O],I,L,P,T)}}function pEe(n,e,t){const r=t.isWebGL2;function i(){let ee=!1;const ve=new En;let ke=null;const We=new En(0,0,0,0);return{setMask:function(Qe){ke!==Qe&&!ee&&(n.colorMask(Qe,Qe,Qe,Qe),ke=Qe)},setLocked:function(Qe){ee=Qe},setClear:function(Qe,jt,Xt,on,Wn){Wn===!0&&(Qe*=on,jt*=on,Xt*=on),ve.set(Qe,jt,Xt,on),We.equals(ve)===!1&&(n.clearColor(Qe,jt,Xt,on),We.copy(ve))},reset:function(){ee=!1,ke=null,We.set(-1,0,0,0)}}}function s(){let ee=!1,ve=null,ke=null,We=null;return{setTest:function(Qe){Qe?ae(2929):Se(2929)},setMask:function(Qe){ve!==Qe&&!ee&&(n.depthMask(Qe),ve=Qe)},setFunc:function(Qe){if(ke!==Qe){switch(Qe){case U7:n.depthFunc(512);break;case z7:n.depthFunc(519);break;case B7:n.depthFunc(513);break;case A1:n.depthFunc(515);break;case H7:n.depthFunc(514);break;case W7:n.depthFunc(518);break;case G7:n.depthFunc(516);break;case $7:n.depthFunc(517);break;default:n.depthFunc(515)}ke=Qe}},setLocked:function(Qe){ee=Qe},setClear:function(Qe){We!==Qe&&(n.clearDepth(Qe),We=Qe)},reset:function(){ee=!1,ve=null,ke=null,We=null}}}function o(){let ee=!1,ve=null,ke=null,We=null,Qe=null,jt=null,Xt=null,on=null,Wn=null;return{setTest:function(Zt){ee||(Zt?ae(2960):Se(2960))},setMask:function(Zt){ve!==Zt&&!ee&&(n.stencilMask(Zt),ve=Zt)},setFunc:function(Zt,Gn,hn){(ke!==Zt||We!==Gn||Qe!==hn)&&(n.stencilFunc(Zt,Gn,hn),ke=Zt,We=Gn,Qe=hn)},setOp:function(Zt,Gn,hn){(jt!==Zt||Xt!==Gn||on!==hn)&&(n.stencilOp(Zt,Gn,hn),jt=Zt,Xt=Gn,on=hn)},setLocked:function(Zt){ee=Zt},setClear:function(Zt){Wn!==Zt&&(n.clearStencil(Zt),Wn=Zt)},reset:function(){ee=!1,ve=null,ke=null,We=null,Qe=null,jt=null,Xt=null,on=null,Wn=null}}}const a=new i,l=new s,c=new o,u=new WeakMap,d=new WeakMap;let f={},g={},v=new WeakMap,y=[],x=null,_=!1,w=null,S=null,M=null,I=null,L=null,P=null,T=null,C=!1,k=null,O=null,U=null,V=null,B=null;const Z=n.getParameter(35661);let ne=!1,oe=0;const z=n.getParameter(7938);z.indexOf("WebGL")!==-1?(oe=parseFloat(/^WebGL (\d)/.exec(z)[1]),ne=oe>=1):z.indexOf("OpenGL ES")!==-1&&(oe=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),ne=oe>=2);let G=null,q={};const se=n.getParameter(3088),J=n.getParameter(2978),he=new En().fromArray(se),_e=new En().fromArray(J);function re(ee,ve,ke){const We=new Uint8Array(4),Qe=n.createTexture();n.bindTexture(ee,Qe),n.texParameteri(ee,10241,9728),n.texParameteri(ee,10240,9728);for(let jt=0;jt<ke;jt++)n.texImage2D(ve+jt,0,6408,1,1,0,6408,5121,We);return Qe}const Y={};Y[3553]=re(3553,3553,1),Y[34067]=re(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ae(2929),l.setFunc(A1),Fe(!1),Je(SC),ae(2884),we(xl);function ae(ee){f[ee]!==!0&&(n.enable(ee),f[ee]=!0)}function Se(ee){f[ee]!==!1&&(n.disable(ee),f[ee]=!1)}function Re(ee,ve){return g[ee]!==ve?(n.bindFramebuffer(ee,ve),g[ee]=ve,r&&(ee===36009&&(g[36160]=ve),ee===36160&&(g[36009]=ve)),!0):!1}function Ae(ee,ve){let ke=y,We=!1;if(ee)if(ke=v.get(ve),ke===void 0&&(ke=[],v.set(ve,ke)),ee.isWebGLMultipleRenderTargets){const Qe=ee.texture;if(ke.length!==Qe.length||ke[0]!==36064){for(let jt=0,Xt=Qe.length;jt<Xt;jt++)ke[jt]=36064+jt;ke.length=Qe.length,We=!0}}else ke[0]!==36064&&(ke[0]=36064,We=!0);else ke[0]!==1029&&(ke[0]=1029,We=!0);We&&(t.isWebGL2?n.drawBuffers(ke):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ke))}function Te(ee){return x!==ee?(n.useProgram(ee),x=ee,!0):!1}const te={[sd]:32774,[P7]:32778,[I7]:32779};if(r)te[AC]=32775,te[CC]=32776;else{const ee=e.get("EXT_blend_minmax");ee!==null&&(te[AC]=ee.MIN_EXT,te[CC]=ee.MAX_EXT)}const le={[R7]:0,[k7]:1,[N7]:768,[kR]:770,[V7]:776,[F7]:774,[L7]:772,[D7]:769,[NR]:771,[j7]:775,[O7]:773};function we(ee,ve,ke,We,Qe,jt,Xt,on){if(ee===xl){_===!0&&(Se(3042),_=!1);return}if(_===!1&&(ae(3042),_=!0),ee!==C7){if(ee!==w||on!==C){if((S!==sd||L!==sd)&&(n.blendEquation(32774),S=sd,L=sd),on)switch(ee){case Id:n.blendFuncSeparate(1,771,1,771);break;case EC:n.blendFunc(1,1);break;case TC:n.blendFuncSeparate(0,769,0,1);break;case MC:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee);break}else switch(ee){case Id:n.blendFuncSeparate(770,771,1,771);break;case EC:n.blendFunc(770,1);break;case TC:n.blendFuncSeparate(0,769,0,1);break;case MC:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee);break}M=null,I=null,P=null,T=null,w=ee,C=on}return}Qe=Qe||ve,jt=jt||ke,Xt=Xt||We,(ve!==S||Qe!==L)&&(n.blendEquationSeparate(te[ve],te[Qe]),S=ve,L=Qe),(ke!==M||We!==I||jt!==P||Xt!==T)&&(n.blendFuncSeparate(le[ke],le[We],le[jt],le[Xt]),M=ke,I=We,P=jt,T=Xt),w=ee,C=!1}function Be(ee,ve){ee.side===dl?Se(2884):ae(2884);let ke=ee.side===ps;ve&&(ke=!ke),Fe(ke),ee.blending===Id&&ee.transparent===!1?we(xl):we(ee.blending,ee.blendEquation,ee.blendSrc,ee.blendDst,ee.blendEquationAlpha,ee.blendSrcAlpha,ee.blendDstAlpha,ee.premultipliedAlpha),l.setFunc(ee.depthFunc),l.setTest(ee.depthTest),l.setMask(ee.depthWrite),a.setMask(ee.colorWrite);const We=ee.stencilWrite;c.setTest(We),We&&(c.setMask(ee.stencilWriteMask),c.setFunc(ee.stencilFunc,ee.stencilRef,ee.stencilFuncMask),c.setOp(ee.stencilFail,ee.stencilZFail,ee.stencilZPass)),et(ee.polygonOffset,ee.polygonOffsetFactor,ee.polygonOffsetUnits),ee.alphaToCoverage===!0?ae(32926):Se(32926)}function Fe(ee){k!==ee&&(ee?n.frontFace(2304):n.frontFace(2305),k=ee)}function Je(ee){ee!==T7?(ae(2884),ee!==O&&(ee===SC?n.cullFace(1029):ee===M7?n.cullFace(1028):n.cullFace(1032))):Se(2884),O=ee}function Ze(ee){ee!==U&&(ne&&n.lineWidth(ee),U=ee)}function et(ee,ve,ke){ee?(ae(32823),(V!==ve||B!==ke)&&(n.polygonOffset(ve,ke),V=ve,B=ke)):Se(32823)}function At(ee){ee?ae(3089):Se(3089)}function Ot(ee){ee===void 0&&(ee=33984+Z-1),G!==ee&&(n.activeTexture(ee),G=ee)}function X(ee,ve,ke){ke===void 0&&(G===null?ke=33984+Z-1:ke=G);let We=q[ke];We===void 0&&(We={type:void 0,texture:void 0},q[ke]=We),(We.type!==ee||We.texture!==ve)&&(G!==ke&&(n.activeTexture(ke),G=ke),n.bindTexture(ee,ve||Y[ee]),We.type=ee,We.texture=ve)}function W(){const ee=q[G];ee!==void 0&&ee.type!==void 0&&(n.bindTexture(ee.type,null),ee.type=void 0,ee.texture=void 0)}function ye(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Ve(){try{n.compressedTexImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Oe(){try{n.texSubImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function je(){try{n.texSubImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function rt(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function $e(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Ce(){try{n.texStorage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function ct(){try{n.texStorage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Ye(){try{n.texImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function ht(){try{n.texImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function dt(ee){he.equals(ee)===!1&&(n.scissor(ee.x,ee.y,ee.z,ee.w),he.copy(ee))}function at(ee){_e.equals(ee)===!1&&(n.viewport(ee.x,ee.y,ee.z,ee.w),_e.copy(ee))}function ie(ee,ve){let ke=d.get(ve);ke===void 0&&(ke=new WeakMap,d.set(ve,ke));let We=ke.get(ee);We===void 0&&(We=n.getUniformBlockIndex(ve,ee.name),ke.set(ee,We))}function De(ee,ve){const We=d.get(ve).get(ee);u.get(ve)!==We&&(n.uniformBlockBinding(ve,We,ee.__bindingPointIndex),u.set(ve,We))}function Ke(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),r===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},G=null,q={},g={},v=new WeakMap,y=[],x=null,_=!1,w=null,S=null,M=null,I=null,L=null,P=null,T=null,C=!1,k=null,O=null,U=null,V=null,B=null,he.set(0,0,n.canvas.width,n.canvas.height),_e.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:ae,disable:Se,bindFramebuffer:Re,drawBuffers:Ae,useProgram:Te,setBlending:we,setMaterial:Be,setFlipSided:Fe,setCullFace:Je,setLineWidth:Ze,setPolygonOffset:et,setScissorTest:At,activeTexture:Ot,bindTexture:X,unbindTexture:W,compressedTexImage2D:ye,compressedTexImage3D:Ve,texImage2D:Ye,texImage3D:ht,updateUBOMapping:ie,uniformBlockBinding:De,texStorage2D:Ce,texStorage3D:ct,texSubImage2D:Oe,texSubImage3D:je,compressedTexSubImage2D:rt,compressedTexSubImage3D:$e,scissor:dt,viewport:at,reset:Ke}}function mEe(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,d=i.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,g=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let y;const x=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function w(X,W){return _?new OffscreenCanvas(X,W):hv("canvas")}function S(X,W,ye,Ve){let Oe=1;if((X.width>Ve||X.height>Ve)&&(Oe=Ve/Math.max(X.width,X.height)),Oe<1||W===!0)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap){const je=W?b$:Math.floor,rt=je(Oe*X.width),$e=je(Oe*X.height);y===void 0&&(y=w(rt,$e));const Ce=ye?w(rt,$e):y;return Ce.width=rt,Ce.height=$e,Ce.getContext("2d").drawImage(X,0,0,rt,$e),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+X.width+"x"+X.height+") to ("+rt+"x"+$e+")."),Ce}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+X.width+"x"+X.height+")."),X;return X}function M(X){return ZC(X.width)&&ZC(X.height)}function I(X){return a?!1:X.wrapS!==ki||X.wrapT!==ki||X.minFilter!==xr&&X.minFilter!==wr}function L(X,W){return X.generateMipmaps&&W&&X.minFilter!==xr&&X.minFilter!==wr}function P(X){n.generateMipmap(X)}function T(X,W,ye,Ve,Oe=!1){if(a===!1)return W;if(X!==null){if(n[X]!==void 0)return n[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let je=W;return W===6403&&(ye===5126&&(je=33326),ye===5131&&(je=33325),ye===5121&&(je=33321)),W===33319&&(ye===5126&&(je=33328),ye===5131&&(je=33327),ye===5121&&(je=33323)),W===6408&&(ye===5126&&(je=34836),ye===5131&&(je=34842),ye===5121&&(je=Ve===On&&Oe===!1?35907:32856),ye===32819&&(je=32854),ye===32820&&(je=32855)),(je===33325||je===33326||je===33327||je===33328||je===34842||je===34836)&&e.get("EXT_color_buffer_float"),je}function C(X,W,ye){return L(X,ye)===!0||X.isFramebufferTexture&&X.minFilter!==xr&&X.minFilter!==wr?Math.log2(Math.max(W.width,W.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?W.mipmaps.length:1}function k(X){return X===xr||X===C1||X===fy?9728:9729}function O(X){const W=X.target;W.removeEventListener("dispose",O),V(W),W.isVideoTexture&&v.delete(W)}function U(X){const W=X.target;W.removeEventListener("dispose",U),Z(W)}function V(X){const W=r.get(X);if(W.__webglInit===void 0)return;const ye=X.source,Ve=x.get(ye);if(Ve){const Oe=Ve[W.__cacheKey];Oe.usedTimes--,Oe.usedTimes===0&&B(X),Object.keys(Ve).length===0&&x.delete(ye)}r.remove(X)}function B(X){const W=r.get(X);n.deleteTexture(W.__webglTexture);const ye=X.source,Ve=x.get(ye);delete Ve[W.__cacheKey],o.memory.textures--}function Z(X){const W=X.texture,ye=r.get(X),Ve=r.get(W);if(Ve.__webglTexture!==void 0&&(n.deleteTexture(Ve.__webglTexture),o.memory.textures--),X.depthTexture&&X.depthTexture.dispose(),X.isWebGLCubeRenderTarget)for(let Oe=0;Oe<6;Oe++)n.deleteFramebuffer(ye.__webglFramebuffer[Oe]),ye.__webglDepthbuffer&&n.deleteRenderbuffer(ye.__webglDepthbuffer[Oe]);else{if(n.deleteFramebuffer(ye.__webglFramebuffer),ye.__webglDepthbuffer&&n.deleteRenderbuffer(ye.__webglDepthbuffer),ye.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ye.__webglMultisampledFramebuffer),ye.__webglColorRenderbuffer)for(let Oe=0;Oe<ye.__webglColorRenderbuffer.length;Oe++)ye.__webglColorRenderbuffer[Oe]&&n.deleteRenderbuffer(ye.__webglColorRenderbuffer[Oe]);ye.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ye.__webglDepthRenderbuffer)}if(X.isWebGLMultipleRenderTargets)for(let Oe=0,je=W.length;Oe<je;Oe++){const rt=r.get(W[Oe]);rt.__webglTexture&&(n.deleteTexture(rt.__webglTexture),o.memory.textures--),r.remove(W[Oe])}r.remove(W),r.remove(X)}let ne=0;function oe(){ne=0}function z(){const X=ne;return X>=l&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+l),ne+=1,X}function G(X){const W=[];return W.push(X.wrapS),W.push(X.wrapT),W.push(X.wrapR||0),W.push(X.magFilter),W.push(X.minFilter),W.push(X.anisotropy),W.push(X.internalFormat),W.push(X.format),W.push(X.type),W.push(X.generateMipmaps),W.push(X.premultiplyAlpha),W.push(X.flipY),W.push(X.unpackAlignment),W.push(X.encoding),W.join()}function q(X,W){const ye=r.get(X);if(X.isVideoTexture&&At(X),X.isRenderTargetTexture===!1&&X.version>0&&ye.__version!==X.version){const Ve=X.image;if(Ve===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ve.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Se(ye,X,W);return}}t.bindTexture(3553,ye.__webglTexture,33984+W)}function se(X,W){const ye=r.get(X);if(X.version>0&&ye.__version!==X.version){Se(ye,X,W);return}t.bindTexture(35866,ye.__webglTexture,33984+W)}function J(X,W){const ye=r.get(X);if(X.version>0&&ye.__version!==X.version){Se(ye,X,W);return}t.bindTexture(32879,ye.__webglTexture,33984+W)}function he(X,W){const ye=r.get(X);if(X.version>0&&ye.__version!==X.version){Re(ye,X,W);return}t.bindTexture(34067,ye.__webglTexture,33984+W)}const _e={[sv]:10497,[ki]:33071,[ov]:33648},re={[xr]:9728,[C1]:9984,[fy]:9986,[wr]:9729,[LR]:9985,[cu]:9987};function Y(X,W,ye){if(ye?(n.texParameteri(X,10242,_e[W.wrapS]),n.texParameteri(X,10243,_e[W.wrapT]),(X===32879||X===35866)&&n.texParameteri(X,32882,_e[W.wrapR]),n.texParameteri(X,10240,re[W.magFilter]),n.texParameteri(X,10241,re[W.minFilter])):(n.texParameteri(X,10242,33071),n.texParameteri(X,10243,33071),(X===32879||X===35866)&&n.texParameteri(X,32882,33071),(W.wrapS!==ki||W.wrapT!==ki)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(X,10240,k(W.magFilter)),n.texParameteri(X,10241,k(W.minFilter)),W.minFilter!==xr&&W.minFilter!==wr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Ve=e.get("EXT_texture_filter_anisotropic");if(W.magFilter===xr||W.minFilter!==fy&&W.minFilter!==cu||W.type===hl&&e.has("OES_texture_float_linear")===!1||a===!1&&W.type===Xp&&e.has("OES_texture_half_float_linear")===!1)return;(W.anisotropy>1||r.get(W).__currentAnisotropy)&&(n.texParameterf(X,Ve.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,i.getMaxAnisotropy())),r.get(W).__currentAnisotropy=W.anisotropy)}}function ae(X,W){let ye=!1;X.__webglInit===void 0&&(X.__webglInit=!0,W.addEventListener("dispose",O));const Ve=W.source;let Oe=x.get(Ve);Oe===void 0&&(Oe={},x.set(Ve,Oe));const je=G(W);if(je!==X.__cacheKey){Oe[je]===void 0&&(Oe[je]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ye=!0),Oe[je].usedTimes++;const rt=Oe[X.__cacheKey];rt!==void 0&&(Oe[X.__cacheKey].usedTimes--,rt.usedTimes===0&&B(W)),X.__cacheKey=je,X.__webglTexture=Oe[je].texture}return ye}function Se(X,W,ye){let Ve=3553;(W.isDataArrayTexture||W.isCompressedArrayTexture)&&(Ve=35866),W.isData3DTexture&&(Ve=32879);const Oe=ae(X,W),je=W.source;t.bindTexture(Ve,X.__webglTexture,33984+ye);const rt=r.get(je);if(je.version!==rt.__version||Oe===!0){t.activeTexture(33984+ye),n.pixelStorei(37440,W.flipY),n.pixelStorei(37441,W.premultiplyAlpha),n.pixelStorei(3317,W.unpackAlignment),n.pixelStorei(37443,0);const $e=I(W)&&M(W.image)===!1;let Ce=S(W.image,$e,!1,u);Ce=Ot(W,Ce);const ct=M(Ce)||a,Ye=s.convert(W.format,W.encoding);let ht=s.convert(W.type),dt=T(W.internalFormat,Ye,ht,W.encoding,W.isVideoTexture);Y(Ve,W,ct);let at;const ie=W.mipmaps,De=a&&W.isVideoTexture!==!0,Ke=rt.__version===void 0||Oe===!0,ee=C(W,Ce,ct);if(W.isDepthTexture)dt=6402,a?W.type===hl?dt=36012:W.type===Pc?dt=33190:W.type===Rd?dt=35056:dt=33189:W.type===hl&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),W.format===Gc&&dt===6402&&W.type!==OR&&W.type!==Pc&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),W.type=Pc,ht=s.convert(W.type)),W.format===Zd&&dt===6402&&(dt=34041,W.type!==Rd&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),W.type=Rd,ht=s.convert(W.type))),Ke&&(De?t.texStorage2D(3553,1,dt,Ce.width,Ce.height):t.texImage2D(3553,0,dt,Ce.width,Ce.height,0,Ye,ht,null));else if(W.isDataTexture)if(ie.length>0&&ct){De&&Ke&&t.texStorage2D(3553,ee,dt,ie[0].width,ie[0].height);for(let ve=0,ke=ie.length;ve<ke;ve++)at=ie[ve],De?t.texSubImage2D(3553,ve,0,0,at.width,at.height,Ye,ht,at.data):t.texImage2D(3553,ve,dt,at.width,at.height,0,Ye,ht,at.data);W.generateMipmaps=!1}else De?(Ke&&t.texStorage2D(3553,ee,dt,Ce.width,Ce.height),t.texSubImage2D(3553,0,0,0,Ce.width,Ce.height,Ye,ht,Ce.data)):t.texImage2D(3553,0,dt,Ce.width,Ce.height,0,Ye,ht,Ce.data);else if(W.isCompressedTexture)if(W.isCompressedArrayTexture){De&&Ke&&t.texStorage3D(35866,ee,dt,ie[0].width,ie[0].height,Ce.depth);for(let ve=0,ke=ie.length;ve<ke;ve++)at=ie[ve],W.format!==as?Ye!==null?De?t.compressedTexSubImage3D(35866,ve,0,0,0,at.width,at.height,Ce.depth,Ye,at.data,0,0):t.compressedTexImage3D(35866,ve,dt,at.width,at.height,Ce.depth,0,at.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):De?t.texSubImage3D(35866,ve,0,0,0,at.width,at.height,Ce.depth,Ye,ht,at.data):t.texImage3D(35866,ve,dt,at.width,at.height,Ce.depth,0,Ye,ht,at.data)}else{De&&Ke&&t.texStorage2D(3553,ee,dt,ie[0].width,ie[0].height);for(let ve=0,ke=ie.length;ve<ke;ve++)at=ie[ve],W.format!==as?Ye!==null?De?t.compressedTexSubImage2D(3553,ve,0,0,at.width,at.height,Ye,at.data):t.compressedTexImage2D(3553,ve,dt,at.width,at.height,0,at.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):De?t.texSubImage2D(3553,ve,0,0,at.width,at.height,Ye,ht,at.data):t.texImage2D(3553,ve,dt,at.width,at.height,0,Ye,ht,at.data)}else if(W.isDataArrayTexture)De?(Ke&&t.texStorage3D(35866,ee,dt,Ce.width,Ce.height,Ce.depth),t.texSubImage3D(35866,0,0,0,0,Ce.width,Ce.height,Ce.depth,Ye,ht,Ce.data)):t.texImage3D(35866,0,dt,Ce.width,Ce.height,Ce.depth,0,Ye,ht,Ce.data);else if(W.isData3DTexture)De?(Ke&&t.texStorage3D(32879,ee,dt,Ce.width,Ce.height,Ce.depth),t.texSubImage3D(32879,0,0,0,0,Ce.width,Ce.height,Ce.depth,Ye,ht,Ce.data)):t.texImage3D(32879,0,dt,Ce.width,Ce.height,Ce.depth,0,Ye,ht,Ce.data);else if(W.isFramebufferTexture){if(Ke)if(De)t.texStorage2D(3553,ee,dt,Ce.width,Ce.height);else{let ve=Ce.width,ke=Ce.height;for(let We=0;We<ee;We++)t.texImage2D(3553,We,dt,ve,ke,0,Ye,ht,null),ve>>=1,ke>>=1}}else if(ie.length>0&&ct){De&&Ke&&t.texStorage2D(3553,ee,dt,ie[0].width,ie[0].height);for(let ve=0,ke=ie.length;ve<ke;ve++)at=ie[ve],De?t.texSubImage2D(3553,ve,0,0,Ye,ht,at):t.texImage2D(3553,ve,dt,Ye,ht,at);W.generateMipmaps=!1}else De?(Ke&&t.texStorage2D(3553,ee,dt,Ce.width,Ce.height),t.texSubImage2D(3553,0,0,0,Ye,ht,Ce)):t.texImage2D(3553,0,dt,Ye,ht,Ce);L(W,ct)&&P(Ve),rt.__version=je.version,W.onUpdate&&W.onUpdate(W)}X.__version=W.version}function Re(X,W,ye){if(W.image.length!==6)return;const Ve=ae(X,W),Oe=W.source;t.bindTexture(34067,X.__webglTexture,33984+ye);const je=r.get(Oe);if(Oe.version!==je.__version||Ve===!0){t.activeTexture(33984+ye),n.pixelStorei(37440,W.flipY),n.pixelStorei(37441,W.premultiplyAlpha),n.pixelStorei(3317,W.unpackAlignment),n.pixelStorei(37443,0);const rt=W.isCompressedTexture||W.image[0].isCompressedTexture,$e=W.image[0]&&W.image[0].isDataTexture,Ce=[];for(let ve=0;ve<6;ve++)!rt&&!$e?Ce[ve]=S(W.image[ve],!1,!0,c):Ce[ve]=$e?W.image[ve].image:W.image[ve],Ce[ve]=Ot(W,Ce[ve]);const ct=Ce[0],Ye=M(ct)||a,ht=s.convert(W.format,W.encoding),dt=s.convert(W.type),at=T(W.internalFormat,ht,dt,W.encoding),ie=a&&W.isVideoTexture!==!0,De=je.__version===void 0||Ve===!0;let Ke=C(W,ct,Ye);Y(34067,W,Ye);let ee;if(rt){ie&&De&&t.texStorage2D(34067,Ke,at,ct.width,ct.height);for(let ve=0;ve<6;ve++){ee=Ce[ve].mipmaps;for(let ke=0;ke<ee.length;ke++){const We=ee[ke];W.format!==as?ht!==null?ie?t.compressedTexSubImage2D(34069+ve,ke,0,0,We.width,We.height,ht,We.data):t.compressedTexImage2D(34069+ve,ke,at,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ie?t.texSubImage2D(34069+ve,ke,0,0,We.width,We.height,ht,dt,We.data):t.texImage2D(34069+ve,ke,at,We.width,We.height,0,ht,dt,We.data)}}}else{ee=W.mipmaps,ie&&De&&(ee.length>0&&Ke++,t.texStorage2D(34067,Ke,at,Ce[0].width,Ce[0].height));for(let ve=0;ve<6;ve++)if($e){ie?t.texSubImage2D(34069+ve,0,0,0,Ce[ve].width,Ce[ve].height,ht,dt,Ce[ve].data):t.texImage2D(34069+ve,0,at,Ce[ve].width,Ce[ve].height,0,ht,dt,Ce[ve].data);for(let ke=0;ke<ee.length;ke++){const Qe=ee[ke].image[ve].image;ie?t.texSubImage2D(34069+ve,ke+1,0,0,Qe.width,Qe.height,ht,dt,Qe.data):t.texImage2D(34069+ve,ke+1,at,Qe.width,Qe.height,0,ht,dt,Qe.data)}}else{ie?t.texSubImage2D(34069+ve,0,0,0,ht,dt,Ce[ve]):t.texImage2D(34069+ve,0,at,ht,dt,Ce[ve]);for(let ke=0;ke<ee.length;ke++){const We=ee[ke];ie?t.texSubImage2D(34069+ve,ke+1,0,0,ht,dt,We.image[ve]):t.texImage2D(34069+ve,ke+1,at,ht,dt,We.image[ve])}}}L(W,Ye)&&P(34067),je.__version=Oe.version,W.onUpdate&&W.onUpdate(W)}X.__version=W.version}function Ae(X,W,ye,Ve,Oe){const je=s.convert(ye.format,ye.encoding),rt=s.convert(ye.type),$e=T(ye.internalFormat,je,rt,ye.encoding);r.get(W).__hasExternalTextures||(Oe===32879||Oe===35866?t.texImage3D(Oe,0,$e,W.width,W.height,W.depth,0,je,rt,null):t.texImage2D(Oe,0,$e,W.width,W.height,0,je,rt,null)),t.bindFramebuffer(36160,X),et(W)?f.framebufferTexture2DMultisampleEXT(36160,Ve,Oe,r.get(ye).__webglTexture,0,Ze(W)):(Oe===3553||Oe>=34069&&Oe<=34074)&&n.framebufferTexture2D(36160,Ve,Oe,r.get(ye).__webglTexture,0),t.bindFramebuffer(36160,null)}function Te(X,W,ye){if(n.bindRenderbuffer(36161,X),W.depthBuffer&&!W.stencilBuffer){let Ve=33189;if(ye||et(W)){const Oe=W.depthTexture;Oe&&Oe.isDepthTexture&&(Oe.type===hl?Ve=36012:Oe.type===Pc&&(Ve=33190));const je=Ze(W);et(W)?f.renderbufferStorageMultisampleEXT(36161,je,Ve,W.width,W.height):n.renderbufferStorageMultisample(36161,je,Ve,W.width,W.height)}else n.renderbufferStorage(36161,Ve,W.width,W.height);n.framebufferRenderbuffer(36160,36096,36161,X)}else if(W.depthBuffer&&W.stencilBuffer){const Ve=Ze(W);ye&&et(W)===!1?n.renderbufferStorageMultisample(36161,Ve,35056,W.width,W.height):et(W)?f.renderbufferStorageMultisampleEXT(36161,Ve,35056,W.width,W.height):n.renderbufferStorage(36161,34041,W.width,W.height),n.framebufferRenderbuffer(36160,33306,36161,X)}else{const Ve=W.isWebGLMultipleRenderTargets===!0?W.texture:[W.texture];for(let Oe=0;Oe<Ve.length;Oe++){const je=Ve[Oe],rt=s.convert(je.format,je.encoding),$e=s.convert(je.type),Ce=T(je.internalFormat,rt,$e,je.encoding),ct=Ze(W);ye&&et(W)===!1?n.renderbufferStorageMultisample(36161,ct,Ce,W.width,W.height):et(W)?f.renderbufferStorageMultisampleEXT(36161,ct,Ce,W.width,W.height):n.renderbufferStorage(36161,Ce,W.width,W.height)}}n.bindRenderbuffer(36161,null)}function te(X,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,X),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(W.depthTexture).__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),q(W.depthTexture,0);const Ve=r.get(W.depthTexture).__webglTexture,Oe=Ze(W);if(W.depthTexture.format===Gc)et(W)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ve,0,Oe):n.framebufferTexture2D(36160,36096,3553,Ve,0);else if(W.depthTexture.format===Zd)et(W)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ve,0,Oe):n.framebufferTexture2D(36160,33306,3553,Ve,0);else throw new Error("Unknown depthTexture format")}function le(X){const W=r.get(X),ye=X.isWebGLCubeRenderTarget===!0;if(X.depthTexture&&!W.__autoAllocateDepthBuffer){if(ye)throw new Error("target.depthTexture not supported in Cube render targets");te(W.__webglFramebuffer,X)}else if(ye){W.__webglDepthbuffer=[];for(let Ve=0;Ve<6;Ve++)t.bindFramebuffer(36160,W.__webglFramebuffer[Ve]),W.__webglDepthbuffer[Ve]=n.createRenderbuffer(),Te(W.__webglDepthbuffer[Ve],X,!1)}else t.bindFramebuffer(36160,W.__webglFramebuffer),W.__webglDepthbuffer=n.createRenderbuffer(),Te(W.__webglDepthbuffer,X,!1);t.bindFramebuffer(36160,null)}function we(X,W,ye){const Ve=r.get(X);W!==void 0&&Ae(Ve.__webglFramebuffer,X,X.texture,36064,3553),ye!==void 0&&le(X)}function Be(X){const W=X.texture,ye=r.get(X),Ve=r.get(W);X.addEventListener("dispose",U),X.isWebGLMultipleRenderTargets!==!0&&(Ve.__webglTexture===void 0&&(Ve.__webglTexture=n.createTexture()),Ve.__version=W.version,o.memory.textures++);const Oe=X.isWebGLCubeRenderTarget===!0,je=X.isWebGLMultipleRenderTargets===!0,rt=M(X)||a;if(Oe){ye.__webglFramebuffer=[];for(let $e=0;$e<6;$e++)ye.__webglFramebuffer[$e]=n.createFramebuffer()}else{if(ye.__webglFramebuffer=n.createFramebuffer(),je)if(i.drawBuffers){const $e=X.texture;for(let Ce=0,ct=$e.length;Ce<ct;Ce++){const Ye=r.get($e[Ce]);Ye.__webglTexture===void 0&&(Ye.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&X.samples>0&&et(X)===!1){const $e=je?W:[W];ye.__webglMultisampledFramebuffer=n.createFramebuffer(),ye.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ye.__webglMultisampledFramebuffer);for(let Ce=0;Ce<$e.length;Ce++){const ct=$e[Ce];ye.__webglColorRenderbuffer[Ce]=n.createRenderbuffer(),n.bindRenderbuffer(36161,ye.__webglColorRenderbuffer[Ce]);const Ye=s.convert(ct.format,ct.encoding),ht=s.convert(ct.type),dt=T(ct.internalFormat,Ye,ht,ct.encoding,X.isXRRenderTarget===!0),at=Ze(X);n.renderbufferStorageMultisample(36161,at,dt,X.width,X.height),n.framebufferRenderbuffer(36160,36064+Ce,36161,ye.__webglColorRenderbuffer[Ce])}n.bindRenderbuffer(36161,null),X.depthBuffer&&(ye.__webglDepthRenderbuffer=n.createRenderbuffer(),Te(ye.__webglDepthRenderbuffer,X,!0)),t.bindFramebuffer(36160,null)}}if(Oe){t.bindTexture(34067,Ve.__webglTexture),Y(34067,W,rt);for(let $e=0;$e<6;$e++)Ae(ye.__webglFramebuffer[$e],X,W,36064,34069+$e);L(W,rt)&&P(34067),t.unbindTexture()}else if(je){const $e=X.texture;for(let Ce=0,ct=$e.length;Ce<ct;Ce++){const Ye=$e[Ce],ht=r.get(Ye);t.bindTexture(3553,ht.__webglTexture),Y(3553,Ye,rt),Ae(ye.__webglFramebuffer,X,Ye,36064+Ce,3553),L(Ye,rt)&&P(3553)}t.unbindTexture()}else{let $e=3553;(X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(a?$e=X.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture($e,Ve.__webglTexture),Y($e,W,rt),Ae(ye.__webglFramebuffer,X,W,36064,$e),L(W,rt)&&P($e),t.unbindTexture()}X.depthBuffer&&le(X)}function Fe(X){const W=M(X)||a,ye=X.isWebGLMultipleRenderTargets===!0?X.texture:[X.texture];for(let Ve=0,Oe=ye.length;Ve<Oe;Ve++){const je=ye[Ve];if(L(je,W)){const rt=X.isWebGLCubeRenderTarget?34067:3553,$e=r.get(je).__webglTexture;t.bindTexture(rt,$e),P(rt),t.unbindTexture()}}}function Je(X){if(a&&X.samples>0&&et(X)===!1){const W=X.isWebGLMultipleRenderTargets?X.texture:[X.texture],ye=X.width,Ve=X.height;let Oe=16384;const je=[],rt=X.stencilBuffer?33306:36096,$e=r.get(X),Ce=X.isWebGLMultipleRenderTargets===!0;if(Ce)for(let ct=0;ct<W.length;ct++)t.bindFramebuffer(36160,$e.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+ct,36161,null),t.bindFramebuffer(36160,$e.__webglFramebuffer),n.framebufferTexture2D(36009,36064+ct,3553,null,0);t.bindFramebuffer(36008,$e.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,$e.__webglFramebuffer);for(let ct=0;ct<W.length;ct++){je.push(36064+ct),X.depthBuffer&&je.push(rt);const Ye=$e.__ignoreDepthValues!==void 0?$e.__ignoreDepthValues:!1;if(Ye===!1&&(X.depthBuffer&&(Oe|=256),X.stencilBuffer&&(Oe|=1024)),Ce&&n.framebufferRenderbuffer(36008,36064,36161,$e.__webglColorRenderbuffer[ct]),Ye===!0&&(n.invalidateFramebuffer(36008,[rt]),n.invalidateFramebuffer(36009,[rt])),Ce){const ht=r.get(W[ct]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,ht,0)}n.blitFramebuffer(0,0,ye,Ve,0,0,ye,Ve,Oe,9728),g&&n.invalidateFramebuffer(36008,je)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Ce)for(let ct=0;ct<W.length;ct++){t.bindFramebuffer(36160,$e.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+ct,36161,$e.__webglColorRenderbuffer[ct]);const Ye=r.get(W[ct]).__webglTexture;t.bindFramebuffer(36160,$e.__webglFramebuffer),n.framebufferTexture2D(36009,36064+ct,3553,Ye,0)}t.bindFramebuffer(36009,$e.__webglMultisampledFramebuffer)}}function Ze(X){return Math.min(d,X.samples)}function et(X){const W=r.get(X);return a&&X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&W.__useRenderToTexture!==!1}function At(X){const W=o.render.frame;v.get(X)!==W&&(v.set(X,W),X.update())}function Ot(X,W){const ye=X.encoding,Ve=X.format,Oe=X.type;return X.isCompressedTexture===!0||X.isVideoTexture===!0||X.format===P1||ye!==uu&&(ye===On?a===!1?e.has("EXT_sRGB")===!0&&Ve===as?(X.format=P1,X.minFilter=wr,X.generateMipmaps=!1):W=UR.sRGBToLinear(W):(Ve!==as||Oe!==Dl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ye)),W}this.allocateTextureUnit=z,this.resetTextureUnits=oe,this.setTexture2D=q,this.setTexture2DArray=se,this.setTexture3D=J,this.setTextureCube=he,this.rebindTextures=we,this.setupRenderTarget=Be,this.updateRenderTargetMipmap=Fe,this.updateMultisampleRenderTarget=Je,this.setupDepthRenderbuffer=le,this.setupFrameBufferTexture=Ae,this.useMultisampledRTT=et}function D$(n,e,t){const r=t.isWebGL2;function i(s,o=null){let a;if(s===Dl)return 5121;if(s===n$)return 32819;if(s===r$)return 32820;if(s===Z7)return 5120;if(s===e$)return 5122;if(s===OR)return 5123;if(s===t$)return 5124;if(s===Pc)return 5125;if(s===hl)return 5126;if(s===Xp)return r?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===i$)return 6406;if(s===as)return 6408;if(s===s$)return 6409;if(s===o$)return 6410;if(s===Gc)return 6402;if(s===Zd)return 34041;if(s===P1)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===a$)return 6403;if(s===l$)return 36244;if(s===c$)return 33319;if(s===u$)return 33320;if(s===d$)return 36249;if(s===aw||s===lw||s===cw||s===uw)if(o===On)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===aw)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===lw)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===cw)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===uw)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===aw)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===lw)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===cw)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===uw)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===PC||s===IC||s===RC||s===kC)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===PC)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===IC)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===RC)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===kC)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===h$)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===NC||s===DC)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===NC)return o===On?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===DC)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===LC||s===OC||s===FC||s===jC||s===VC||s===UC||s===zC||s===BC||s===HC||s===WC||s===GC||s===$C||s===qC||s===KC)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===LC)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===OC)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===FC)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===jC)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===VC)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===UC)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===zC)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===BC)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===HC)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===WC)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===GC)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===$C)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===qC)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===KC)return o===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===dw)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===dw)return o===On?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===f$||s===YC||s===XC||s===QC)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===dw)return a.COMPRESSED_RED_RGTC1_EXT;if(s===YC)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===XC)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===QC)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Rd?r?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class L$ extends Sr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Gf extends vn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const gEe={type:"move"};class BT{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Gf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Gf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new $,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new $),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Gf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new $,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new $),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const y of e.hand.values()){const x=t.getJointPose(y,r),_=this._getHandJoint(c,y);x!==null&&(_.matrix.fromArray(x.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=x.radius),_.visible=x!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],f=u.position.distanceTo(d.position),g=.02,v=.005;c.inputState.pinching&&f>g+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=g-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(gEe)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Gf;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class O$ extends Yn{constructor(e,t,r,i,s,o,a,l,c,u){if(u=u!==void 0?u:Gc,u!==Gc&&u!==Zd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Gc&&(r=Pc),r===void 0&&u===Zd&&(r=Rd),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:xr,this.minFilter=l!==void 0?l:xr,this.flipY=!1,this.generateMipmaps=!1}}class yEe extends Vl{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,f=null,g=null,v=null;const y=t.getContextAttributes();let x=null,_=null;const w=[],S=[],M=new Set,I=new Map,L=new Sr;L.layers.enable(1),L.viewport=new En;const P=new Sr;P.layers.enable(2),P.viewport=new En;const T=[L,P],C=new L$;C.layers.enable(1),C.layers.enable(2);let k=null,O=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(J){let he=w[J];return he===void 0&&(he=new BT,w[J]=he),he.getTargetRaySpace()},this.getControllerGrip=function(J){let he=w[J];return he===void 0&&(he=new BT,w[J]=he),he.getGripSpace()},this.getHand=function(J){let he=w[J];return he===void 0&&(he=new BT,w[J]=he),he.getHandSpace()};function U(J){const he=S.indexOf(J.inputSource);if(he===-1)return;const _e=w[he];_e!==void 0&&_e.dispatchEvent({type:J.type,data:J.inputSource})}function V(){i.removeEventListener("select",U),i.removeEventListener("selectstart",U),i.removeEventListener("selectend",U),i.removeEventListener("squeeze",U),i.removeEventListener("squeezestart",U),i.removeEventListener("squeezeend",U),i.removeEventListener("end",V),i.removeEventListener("inputsourceschange",B);for(let J=0;J<w.length;J++){const he=S[J];he!==null&&(S[J]=null,w[J].disconnect(he))}k=null,O=null,e.setRenderTarget(x),g=null,f=null,d=null,i=null,_=null,se.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(J){s=J,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(J){a=J,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(J){c=J},this.getBaseLayer=function(){return f!==null?f:g},this.getBinding=function(){return d},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(J){if(i=J,i!==null){if(x=e.getRenderTarget(),i.addEventListener("select",U),i.addEventListener("selectstart",U),i.addEventListener("selectend",U),i.addEventListener("squeeze",U),i.addEventListener("squeezestart",U),i.addEventListener("squeezeend",U),i.addEventListener("end",V),i.addEventListener("inputsourceschange",B),y.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const he={antialias:i.renderState.layers===void 0?y.antialias:!0,alpha:y.alpha,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(i,t,he),i.updateRenderState({baseLayer:g}),_=new Qo(g.framebufferWidth,g.framebufferHeight,{format:as,type:Dl,encoding:e.outputEncoding,stencilBuffer:y.stencil})}else{let he=null,_e=null,re=null;y.depth&&(re=y.stencil?35056:33190,he=y.stencil?Zd:Gc,_e=y.stencil?Rd:Pc);const Y={colorFormat:32856,depthFormat:re,scaleFactor:s};d=new XRWebGLBinding(i,t),f=d.createProjectionLayer(Y),i.updateRenderState({layers:[f]}),_=new Qo(f.textureWidth,f.textureHeight,{format:as,type:Dl,depthTexture:new O$(f.textureWidth,f.textureHeight,_e,void 0,void 0,void 0,void 0,void 0,void 0,he),stencilBuffer:y.stencil,encoding:e.outputEncoding,samples:y.antialias?4:0});const ae=e.properties.get(_);ae.__ignoreDepthValues=f.ignoreDepthValues}_.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),se.setContext(i),se.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function B(J){for(let he=0;he<J.removed.length;he++){const _e=J.removed[he],re=S.indexOf(_e);re>=0&&(S[re]=null,w[re].disconnect(_e))}for(let he=0;he<J.added.length;he++){const _e=J.added[he];let re=S.indexOf(_e);if(re===-1){for(let ae=0;ae<w.length;ae++)if(ae>=S.length){S.push(_e),re=ae;break}else if(S[ae]===null){S[ae]=_e,re=ae;break}if(re===-1)break}const Y=w[re];Y&&Y.connect(_e)}}const Z=new $,ne=new $;function oe(J,he,_e){Z.setFromMatrixPosition(he.matrixWorld),ne.setFromMatrixPosition(_e.matrixWorld);const re=Z.distanceTo(ne),Y=he.projectionMatrix.elements,ae=_e.projectionMatrix.elements,Se=Y[14]/(Y[10]-1),Re=Y[14]/(Y[10]+1),Ae=(Y[9]+1)/Y[5],Te=(Y[9]-1)/Y[5],te=(Y[8]-1)/Y[0],le=(ae[8]+1)/ae[0],we=Se*te,Be=Se*le,Fe=re/(-te+le),Je=Fe*-te;he.matrixWorld.decompose(J.position,J.quaternion,J.scale),J.translateX(Je),J.translateZ(Fe),J.matrixWorld.compose(J.position,J.quaternion,J.scale),J.matrixWorldInverse.copy(J.matrixWorld).invert();const Ze=Se+Fe,et=Re+Fe,At=we-Je,Ot=Be+(re-Je),X=Ae*Re/et*Ze,W=Te*Re/et*Ze;J.projectionMatrix.makePerspective(At,Ot,X,W,Ze,et)}function z(J,he){he===null?J.matrixWorld.copy(J.matrix):J.matrixWorld.multiplyMatrices(he.matrixWorld,J.matrix),J.matrixWorldInverse.copy(J.matrixWorld).invert()}this.updateCamera=function(J){if(i===null)return;C.near=P.near=L.near=J.near,C.far=P.far=L.far=J.far,(k!==C.near||O!==C.far)&&(i.updateRenderState({depthNear:C.near,depthFar:C.far}),k=C.near,O=C.far);const he=J.parent,_e=C.cameras;z(C,he);for(let Y=0;Y<_e.length;Y++)z(_e[Y],he);C.matrixWorld.decompose(C.position,C.quaternion,C.scale),J.matrix.copy(C.matrix),J.matrix.decompose(J.position,J.quaternion,J.scale);const re=J.children;for(let Y=0,ae=re.length;Y<ae;Y++)re[Y].updateMatrixWorld(!0);_e.length===2?oe(C,L,P):C.projectionMatrix.copy(L.projectionMatrix)},this.getCamera=function(){return C},this.getFoveation=function(){if(!(f===null&&g===null))return l},this.setFoveation=function(J){l=J,f!==null&&(f.fixedFoveation=J),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=J)},this.getPlanes=function(){return M};let G=null;function q(J,he){if(u=he.getViewerPose(c||o),v=he,u!==null){const _e=u.views;g!==null&&(e.setRenderTargetFramebuffer(_,g.framebuffer),e.setRenderTarget(_));let re=!1;_e.length!==C.cameras.length&&(C.cameras.length=0,re=!0);for(let Y=0;Y<_e.length;Y++){const ae=_e[Y];let Se=null;if(g!==null)Se=g.getViewport(ae);else{const Ae=d.getViewSubImage(f,ae);Se=Ae.viewport,Y===0&&(e.setRenderTargetTextures(_,Ae.colorTexture,f.ignoreDepthValues?void 0:Ae.depthStencilTexture),e.setRenderTarget(_))}let Re=T[Y];Re===void 0&&(Re=new Sr,Re.layers.enable(Y),Re.viewport=new En,T[Y]=Re),Re.matrix.fromArray(ae.transform.matrix),Re.projectionMatrix.fromArray(ae.projectionMatrix),Re.viewport.set(Se.x,Se.y,Se.width,Se.height),Y===0&&C.matrix.copy(Re.matrix),re===!0&&C.cameras.push(Re)}}for(let _e=0;_e<w.length;_e++){const re=S[_e],Y=w[_e];re!==null&&Y!==void 0&&Y.update(re,he,c||o)}if(G&&G(J,he),he.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:he.detectedPlanes});let _e=null;for(const re of M)he.detectedPlanes.has(re)||(_e===null&&(_e=[]),_e.push(re));if(_e!==null)for(const re of _e)M.delete(re),I.delete(re),r.dispatchEvent({type:"planeremoved",data:re});for(const re of he.detectedPlanes)if(!M.has(re))M.add(re),I.set(re,he.lastChangedTime),r.dispatchEvent({type:"planeadded",data:re});else{const Y=I.get(re);re.lastChangedTime>Y&&(I.set(re,re.lastChangedTime),r.dispatchEvent({type:"planechanged",data:re}))}}v=null}const se=new P$;se.setAnimationLoop(q),this.setAnimationLoop=function(J){G=J},this.dispose=function(){}}}function vEe(n,e){function t(y,x){x.color.getRGB(y.fogColor.value,T$(n)),x.isFog?(y.fogNear.value=x.near,y.fogFar.value=x.far):x.isFogExp2&&(y.fogDensity.value=x.density)}function r(y,x,_,w,S){x.isMeshBasicMaterial||x.isMeshLambertMaterial?i(y,x):x.isMeshToonMaterial?(i(y,x),u(y,x)):x.isMeshPhongMaterial?(i(y,x),c(y,x)):x.isMeshStandardMaterial?(i(y,x),d(y,x),x.isMeshPhysicalMaterial&&f(y,x,S)):x.isMeshMatcapMaterial?(i(y,x),g(y,x)):x.isMeshDepthMaterial?i(y,x):x.isMeshDistanceMaterial?(i(y,x),v(y,x)):x.isMeshNormalMaterial?i(y,x):x.isLineBasicMaterial?(s(y,x),x.isLineDashedMaterial&&o(y,x)):x.isPointsMaterial?a(y,x,_,w):x.isSpriteMaterial?l(y,x):x.isShadowMaterial?(y.color.value.copy(x.color),y.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function i(y,x){y.opacity.value=x.opacity,x.color&&y.diffuse.value.copy(x.color),x.emissive&&y.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(y.map.value=x.map),x.alphaMap&&(y.alphaMap.value=x.alphaMap),x.bumpMap&&(y.bumpMap.value=x.bumpMap,y.bumpScale.value=x.bumpScale,x.side===ps&&(y.bumpScale.value*=-1)),x.displacementMap&&(y.displacementMap.value=x.displacementMap,y.displacementScale.value=x.displacementScale,y.displacementBias.value=x.displacementBias),x.emissiveMap&&(y.emissiveMap.value=x.emissiveMap),x.normalMap&&(y.normalMap.value=x.normalMap,y.normalScale.value.copy(x.normalScale),x.side===ps&&y.normalScale.value.negate()),x.specularMap&&(y.specularMap.value=x.specularMap),x.alphaTest>0&&(y.alphaTest.value=x.alphaTest);const _=e.get(x).envMap;if(_&&(y.envMap.value=_,y.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=x.reflectivity,y.ior.value=x.ior,y.refractionRatio.value=x.refractionRatio),x.lightMap){y.lightMap.value=x.lightMap;const M=n.useLegacyLights===!0?Math.PI:1;y.lightMapIntensity.value=x.lightMapIntensity*M}x.aoMap&&(y.aoMap.value=x.aoMap,y.aoMapIntensity.value=x.aoMapIntensity);let w;x.map?w=x.map:x.specularMap?w=x.specularMap:x.displacementMap?w=x.displacementMap:x.normalMap?w=x.normalMap:x.bumpMap?w=x.bumpMap:x.roughnessMap?w=x.roughnessMap:x.metalnessMap?w=x.metalnessMap:x.alphaMap?w=x.alphaMap:x.emissiveMap?w=x.emissiveMap:x.clearcoatMap?w=x.clearcoatMap:x.clearcoatNormalMap?w=x.clearcoatNormalMap:x.clearcoatRoughnessMap?w=x.clearcoatRoughnessMap:x.iridescenceMap?w=x.iridescenceMap:x.iridescenceThicknessMap?w=x.iridescenceThicknessMap:x.specularIntensityMap?w=x.specularIntensityMap:x.specularColorMap?w=x.specularColorMap:x.transmissionMap?w=x.transmissionMap:x.thicknessMap?w=x.thicknessMap:x.sheenColorMap?w=x.sheenColorMap:x.sheenRoughnessMap&&(w=x.sheenRoughnessMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),y.uvTransform.value.copy(w.matrix));let S;x.aoMap?S=x.aoMap:x.lightMap&&(S=x.lightMap),S!==void 0&&(S.isWebGLRenderTarget&&(S=S.texture),S.matrixAutoUpdate===!0&&S.updateMatrix(),y.uv2Transform.value.copy(S.matrix))}function s(y,x){y.diffuse.value.copy(x.color),y.opacity.value=x.opacity}function o(y,x){y.dashSize.value=x.dashSize,y.totalSize.value=x.dashSize+x.gapSize,y.scale.value=x.scale}function a(y,x,_,w){y.diffuse.value.copy(x.color),y.opacity.value=x.opacity,y.size.value=x.size*_,y.scale.value=w*.5,x.map&&(y.map.value=x.map),x.alphaMap&&(y.alphaMap.value=x.alphaMap),x.alphaTest>0&&(y.alphaTest.value=x.alphaTest);let S;x.map?S=x.map:x.alphaMap&&(S=x.alphaMap),S!==void 0&&(S.matrixAutoUpdate===!0&&S.updateMatrix(),y.uvTransform.value.copy(S.matrix))}function l(y,x){y.diffuse.value.copy(x.color),y.opacity.value=x.opacity,y.rotation.value=x.rotation,x.map&&(y.map.value=x.map),x.alphaMap&&(y.alphaMap.value=x.alphaMap),x.alphaTest>0&&(y.alphaTest.value=x.alphaTest);let _;x.map?_=x.map:x.alphaMap&&(_=x.alphaMap),_!==void 0&&(_.matrixAutoUpdate===!0&&_.updateMatrix(),y.uvTransform.value.copy(_.matrix))}function c(y,x){y.specular.value.copy(x.specular),y.shininess.value=Math.max(x.shininess,1e-4)}function u(y,x){x.gradientMap&&(y.gradientMap.value=x.gradientMap)}function d(y,x){y.roughness.value=x.roughness,y.metalness.value=x.metalness,x.roughnessMap&&(y.roughnessMap.value=x.roughnessMap),x.metalnessMap&&(y.metalnessMap.value=x.metalnessMap),e.get(x).envMap&&(y.envMapIntensity.value=x.envMapIntensity)}function f(y,x,_){y.ior.value=x.ior,x.sheen>0&&(y.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),y.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(y.sheenColorMap.value=x.sheenColorMap),x.sheenRoughnessMap&&(y.sheenRoughnessMap.value=x.sheenRoughnessMap)),x.clearcoat>0&&(y.clearcoat.value=x.clearcoat,y.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(y.clearcoatMap.value=x.clearcoatMap),x.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap),x.clearcoatNormalMap&&(y.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),y.clearcoatNormalMap.value=x.clearcoatNormalMap,x.side===ps&&y.clearcoatNormalScale.value.negate())),x.iridescence>0&&(y.iridescence.value=x.iridescence,y.iridescenceIOR.value=x.iridescenceIOR,y.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(y.iridescenceMap.value=x.iridescenceMap),x.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=x.iridescenceThicknessMap)),x.transmission>0&&(y.transmission.value=x.transmission,y.transmissionSamplerMap.value=_.texture,y.transmissionSamplerSize.value.set(_.width,_.height),x.transmissionMap&&(y.transmissionMap.value=x.transmissionMap),y.thickness.value=x.thickness,x.thicknessMap&&(y.thicknessMap.value=x.thicknessMap),y.attenuationDistance.value=x.attenuationDistance,y.attenuationColor.value.copy(x.attenuationColor)),y.specularIntensity.value=x.specularIntensity,y.specularColor.value.copy(x.specularColor),x.specularIntensityMap&&(y.specularIntensityMap.value=x.specularIntensityMap),x.specularColorMap&&(y.specularColorMap.value=x.specularColorMap)}function g(y,x){x.matcap&&(y.matcap.value=x.matcap)}function v(y,x){y.referencePosition.value.copy(x.referencePosition),y.nearDistance.value=x.nearDistance,y.farDistance.value=x.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function xEe(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function l(w,S){const M=S.program;r.uniformBlockBinding(w,M)}function c(w,S){let M=i[w.id];M===void 0&&(v(w),M=u(w),i[w.id]=M,w.addEventListener("dispose",x));const I=S.program;r.updateUBOMapping(w,I);const L=e.render.frame;s[w.id]!==L&&(f(w),s[w.id]=L)}function u(w){const S=d();w.__bindingPointIndex=S;const M=n.createBuffer(),I=w.__size,L=w.usage;return n.bindBuffer(35345,M),n.bufferData(35345,I,L),n.bindBuffer(35345,null),n.bindBufferBase(35345,S,M),M}function d(){for(let w=0;w<a;w++)if(o.indexOf(w)===-1)return o.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(w){const S=i[w.id],M=w.uniforms,I=w.__cache;n.bindBuffer(35345,S);for(let L=0,P=M.length;L<P;L++){const T=M[L];if(g(T,L,I)===!0){const C=T.__offset,k=Array.isArray(T.value)?T.value:[T.value];let O=0;for(let U=0;U<k.length;U++){const V=k[U],B=y(V);typeof V=="number"?(T.__data[0]=V,n.bufferSubData(35345,C+O,T.__data)):V.isMatrix3?(T.__data[0]=V.elements[0],T.__data[1]=V.elements[1],T.__data[2]=V.elements[2],T.__data[3]=V.elements[0],T.__data[4]=V.elements[3],T.__data[5]=V.elements[4],T.__data[6]=V.elements[5],T.__data[7]=V.elements[0],T.__data[8]=V.elements[6],T.__data[9]=V.elements[7],T.__data[10]=V.elements[8],T.__data[11]=V.elements[0]):(V.toArray(T.__data,O),O+=B.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(35345,C,T.__data)}}n.bindBuffer(35345,null)}function g(w,S,M){const I=w.value;if(M[S]===void 0){if(typeof I=="number")M[S]=I;else{const L=Array.isArray(I)?I:[I],P=[];for(let T=0;T<L.length;T++)P.push(L[T].clone());M[S]=P}return!0}else if(typeof I=="number"){if(M[S]!==I)return M[S]=I,!0}else{const L=Array.isArray(M[S])?M[S]:[M[S]],P=Array.isArray(I)?I:[I];for(let T=0;T<L.length;T++){const C=L[T];if(C.equals(P[T])===!1)return C.copy(P[T]),!0}}return!1}function v(w){const S=w.uniforms;let M=0;const I=16;let L=0;for(let P=0,T=S.length;P<T;P++){const C=S[P],k={boundary:0,storage:0},O=Array.isArray(C.value)?C.value:[C.value];for(let U=0,V=O.length;U<V;U++){const B=O[U],Z=y(B);k.boundary+=Z.boundary,k.storage+=Z.storage}if(C.__data=new Float32Array(k.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=M,P>0){L=M%I;const U=I-L;L!==0&&U-k.boundary<0&&(M+=I-L,C.__offset=M)}M+=k.storage}return L=M%I,L>0&&(M+=I-L),w.__size=M,w.__cache={},this}function y(w){const S={boundary:0,storage:0};return typeof w=="number"?(S.boundary=4,S.storage=4):w.isVector2?(S.boundary=8,S.storage=8):w.isVector3||w.isColor?(S.boundary=16,S.storage=12):w.isVector4?(S.boundary=16,S.storage=16):w.isMatrix3?(S.boundary=48,S.storage=48):w.isMatrix4?(S.boundary=64,S.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),S}function x(w){const S=w.target;S.removeEventListener("dispose",x);const M=o.indexOf(S.__bindingPointIndex);o.splice(M,1),n.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function _(){for(const w in i)n.deleteBuffer(i[w]);o=[],i={},s={}}return{bind:l,update:c,dispose:_}}function _Ee(){const n=hv("canvas");return n.style.display="block",n}function tS(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:_Ee(),t=n.context!==void 0?n.context:null,r=n.depth!==void 0?n.depth:!0,i=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,a=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",c=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let u;t!==null?u=t.getContextAttributes().alpha:u=n.alpha!==void 0?n.alpha:!1;let d=null,f=null;const g=[],v=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=uu,this.useLegacyLights=!0,this.toneMapping=Wo,this.toneMappingExposure=1;const y=this;let x=!1,_=0,w=0,S=null,M=-1,I=null;const L=new En,P=new En;let T=null,C=e.width,k=e.height,O=1,U=null,V=null;const B=new En(0,0,C,k),Z=new En(0,0,C,k);let ne=!1;const oe=new Zb;let z=!1,G=!1,q=null;const se=new Ft,J=new $,he={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function _e(){return S===null?O:1}let re=t;function Y(K,me){for(let Ee=0;Ee<K.length;Ee++){const pe=K[Ee],Pe=e.getContext(pe,me);if(Pe!==null)return Pe}return null}try{const K={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Kb}`),e.addEventListener("webglcontextlost",ht,!1),e.addEventListener("webglcontextrestored",dt,!1),e.addEventListener("webglcontextcreationerror",at,!1),re===null){const me=["webgl2","webgl","experimental-webgl"];if(y.isWebGL1Renderer===!0&&me.shift(),re=Y(me,K),re===null)throw Y(me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}re.getShaderPrecisionFormat===void 0&&(re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(K){throw console.error("THREE.WebGLRenderer: "+K.message),K}let ae,Se,Re,Ae,Te,te,le,we,Be,Fe,Je,Ze,et,At,Ot,X,W,ye,Ve,Oe,je,rt,$e,Ce;function ct(){ae=new Obe(re),Se=new Ibe(re,ae,n),ae.init(Se),rt=new D$(re,ae,Se),Re=new pEe(re,ae,Se),Ae=new Vbe,Te=new nEe,te=new mEe(re,ae,Re,Te,Se,rt,Ae),le=new kbe(y),we=new Lbe(y),Be=new K_e(re,Se),$e=new Cbe(re,ae,Be,Se),Fe=new Fbe(re,Be,Ae,$e),Je=new Hbe(re,Fe,Be,Ae),Ve=new Bbe(re,Se,te),X=new Rbe(Te),Ze=new tEe(y,le,we,ae,Se,$e,X),et=new vEe(y,Te),At=new iEe,Ot=new uEe(ae,Se),ye=new Abe(y,le,we,Re,Je,u,o),W=new fEe(y,Je,Se),Ce=new xEe(re,Ae,Se,Re),Oe=new Pbe(re,ae,Ae,Se),je=new jbe(re,ae,Ae,Se),Ae.programs=Ze.programs,y.capabilities=Se,y.extensions=ae,y.properties=Te,y.renderLists=At,y.shadowMap=W,y.state=Re,y.info=Ae}ct();const Ye=new yEe(y,re);this.xr=Ye,this.getContext=function(){return re},this.getContextAttributes=function(){return re.getContextAttributes()},this.forceContextLoss=function(){const K=ae.get("WEBGL_lose_context");K&&K.loseContext()},this.forceContextRestore=function(){const K=ae.get("WEBGL_lose_context");K&&K.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(K){K!==void 0&&(O=K,this.setSize(C,k,!1))},this.getSize=function(K){return K.set(C,k)},this.setSize=function(K,me,Ee=!0){if(Ye.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}C=K,k=me,e.width=Math.floor(K*O),e.height=Math.floor(me*O),Ee===!0&&(e.style.width=K+"px",e.style.height=me+"px"),this.setViewport(0,0,K,me)},this.getDrawingBufferSize=function(K){return K.set(C*O,k*O).floor()},this.setDrawingBufferSize=function(K,me,Ee){C=K,k=me,O=Ee,e.width=Math.floor(K*Ee),e.height=Math.floor(me*Ee),this.setViewport(0,0,K,me)},this.getCurrentViewport=function(K){return K.copy(L)},this.getViewport=function(K){return K.copy(B)},this.setViewport=function(K,me,Ee,pe){K.isVector4?B.set(K.x,K.y,K.z,K.w):B.set(K,me,Ee,pe),Re.viewport(L.copy(B).multiplyScalar(O).floor())},this.getScissor=function(K){return K.copy(Z)},this.setScissor=function(K,me,Ee,pe){K.isVector4?Z.set(K.x,K.y,K.z,K.w):Z.set(K,me,Ee,pe),Re.scissor(P.copy(Z).multiplyScalar(O).floor())},this.getScissorTest=function(){return ne},this.setScissorTest=function(K){Re.setScissorTest(ne=K)},this.setOpaqueSort=function(K){U=K},this.setTransparentSort=function(K){V=K},this.getClearColor=function(K){return K.copy(ye.getClearColor())},this.setClearColor=function(){ye.setClearColor.apply(ye,arguments)},this.getClearAlpha=function(){return ye.getClearAlpha()},this.setClearAlpha=function(){ye.setClearAlpha.apply(ye,arguments)},this.clear=function(K=!0,me=!0,Ee=!0){let pe=0;K&&(pe|=16384),me&&(pe|=256),Ee&&(pe|=1024),re.clear(pe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ht,!1),e.removeEventListener("webglcontextrestored",dt,!1),e.removeEventListener("webglcontextcreationerror",at,!1),At.dispose(),Ot.dispose(),Te.dispose(),le.dispose(),we.dispose(),Je.dispose(),$e.dispose(),Ce.dispose(),Ze.dispose(),Ye.dispose(),Ye.removeEventListener("sessionstart",ke),Ye.removeEventListener("sessionend",We),q&&(q.dispose(),q=null),Qe.stop()};function ht(K){K.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function dt(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const K=Ae.autoReset,me=W.enabled,Ee=W.autoUpdate,pe=W.needsUpdate,Pe=W.type;ct(),Ae.autoReset=K,W.enabled=me,W.autoUpdate=Ee,W.needsUpdate=pe,W.type=Pe}function at(K){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",K.statusMessage)}function ie(K){const me=K.target;me.removeEventListener("dispose",ie),De(me)}function De(K){Ke(K),Te.remove(K)}function Ke(K){const me=Te.get(K).programs;me!==void 0&&(me.forEach(function(Ee){Ze.releaseProgram(Ee)}),K.isShaderMaterial&&Ze.releaseShaderCache(K))}this.renderBufferDirect=function(K,me,Ee,pe,Pe,ft){me===null&&(me=he);const Tt=Pe.isMesh&&Pe.matrixWorld.determinant()<0,Pt=bh(K,me,Ee,pe,Pe);Re.setMaterial(pe,Tt);let It=Ee.index,kt=1;pe.wireframe===!0&&(It=Fe.getWireframeAttribute(Ee),kt=2);const Ut=Ee.drawRange,$t=Ee.attributes.position;let Nn=Ut.start*kt,Dr=(Ut.start+Ut.count)*kt;ft!==null&&(Nn=Math.max(Nn,ft.start*kt),Dr=Math.min(Dr,(ft.start+ft.count)*kt)),It!==null?(Nn=Math.max(Nn,0),Dr=Math.min(Dr,It.count)):$t!=null&&(Nn=Math.max(Nn,0),Dr=Math.min(Dr,$t.count));const Qi=Dr-Nn;if(Qi<0||Qi===1/0)return;$e.setup(Pe,pe,Pt,Ee,It);let Bs,$n=Oe;if(It!==null&&(Bs=Be.get(It),$n=je,$n.setIndex(Bs)),Pe.isMesh)pe.wireframe===!0?(Re.setLineWidth(pe.wireframeLinewidth*_e()),$n.setMode(1)):$n.setMode(4);else if(Pe.isLine){let Nt=pe.linewidth;Nt===void 0&&(Nt=1),Re.setLineWidth(Nt*_e()),Pe.isLineSegments?$n.setMode(1):Pe.isLineLoop?$n.setMode(2):$n.setMode(3)}else Pe.isPoints?$n.setMode(0):Pe.isSprite&&$n.setMode(4);if(Pe.isInstancedMesh)$n.renderInstances(Nn,Qi,Pe.count);else if(Ee.isInstancedBufferGeometry){const Nt=Ee._maxInstanceCount!==void 0?Ee._maxInstanceCount:1/0,Hs=Math.min(Ee.instanceCount,Nt);$n.renderInstances(Nn,Qi,Hs)}else $n.render(Nn,Qi)},this.compile=function(K,me){function Ee(pe,Pe,ft){pe.transparent===!0&&pe.side===dl&&pe.forceSinglePass===!1?(pe.side=ps,pe.needsUpdate=!0,Gn(pe,Pe,ft),pe.side=Nl,pe.needsUpdate=!0,Gn(pe,Pe,ft),pe.side=dl):Gn(pe,Pe,ft)}f=Ot.get(K),f.init(),v.push(f),K.traverseVisible(function(pe){pe.isLight&&pe.layers.test(me.layers)&&(f.pushLight(pe),pe.castShadow&&f.pushShadow(pe))}),f.setupLights(y.useLegacyLights),K.traverse(function(pe){const Pe=pe.material;if(Pe)if(Array.isArray(Pe))for(let ft=0;ft<Pe.length;ft++){const Tt=Pe[ft];Ee(Tt,K,pe)}else Ee(Pe,K,pe)}),v.pop(),f=null};let ee=null;function ve(K){ee&&ee(K)}function ke(){Qe.stop()}function We(){Qe.start()}const Qe=new P$;Qe.setAnimationLoop(ve),typeof self<"u"&&Qe.setContext(self),this.setAnimationLoop=function(K){ee=K,Ye.setAnimationLoop(K),K===null?Qe.stop():Qe.start()},Ye.addEventListener("sessionstart",ke),Ye.addEventListener("sessionend",We),this.render=function(K,me){if(me!==void 0&&me.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x===!0)return;K.matrixWorldAutoUpdate===!0&&K.updateMatrixWorld(),me.parent===null&&me.matrixWorldAutoUpdate===!0&&me.updateMatrixWorld(),Ye.enabled===!0&&Ye.isPresenting===!0&&(Ye.cameraAutoUpdate===!0&&Ye.updateCamera(me),me=Ye.getCamera()),K.isScene===!0&&K.onBeforeRender(y,K,me,S),f=Ot.get(K,v.length),f.init(),v.push(f),se.multiplyMatrices(me.projectionMatrix,me.matrixWorldInverse),oe.setFromProjectionMatrix(se),G=this.localClippingEnabled,z=X.init(this.clippingPlanes,G),d=At.get(K,g.length),d.init(),g.push(d),jt(K,me,0,y.sortObjects),d.finish(),y.sortObjects===!0&&d.sort(U,V),z===!0&&X.beginShadows();const Ee=f.state.shadowsArray;if(W.render(Ee,K,me),z===!0&&X.endShadows(),this.info.autoReset===!0&&this.info.reset(),ye.render(d,K),f.setupLights(y.useLegacyLights),me.isArrayCamera){const pe=me.cameras;for(let Pe=0,ft=pe.length;Pe<ft;Pe++){const Tt=pe[Pe];Xt(d,K,Tt,Tt.viewport)}}else Xt(d,K,me);S!==null&&(te.updateMultisampleRenderTarget(S),te.updateRenderTargetMipmap(S)),K.isScene===!0&&K.onAfterRender(y,K,me),$e.resetDefaultState(),M=-1,I=null,v.pop(),v.length>0?f=v[v.length-1]:f=null,g.pop(),g.length>0?d=g[g.length-1]:d=null};function jt(K,me,Ee,pe){if(K.visible===!1)return;if(K.layers.test(me.layers)){if(K.isGroup)Ee=K.renderOrder;else if(K.isLOD)K.autoUpdate===!0&&K.update(me);else if(K.isLight)f.pushLight(K),K.castShadow&&f.pushShadow(K);else if(K.isSprite){if(!K.frustumCulled||oe.intersectsSprite(K)){pe&&J.setFromMatrixPosition(K.matrixWorld).applyMatrix4(se);const Tt=Je.update(K),Pt=K.material;Pt.visible&&d.push(K,Tt,Pt,Ee,J.z,null)}}else if((K.isMesh||K.isLine||K.isPoints)&&(K.isSkinnedMesh&&K.skeleton.frame!==Ae.render.frame&&(K.skeleton.update(),K.skeleton.frame=Ae.render.frame),!K.frustumCulled||oe.intersectsObject(K))){pe&&J.setFromMatrixPosition(K.matrixWorld).applyMatrix4(se);const Tt=Je.update(K),Pt=K.material;if(Array.isArray(Pt)){const It=Tt.groups;for(let kt=0,Ut=It.length;kt<Ut;kt++){const $t=It[kt],Nn=Pt[$t.materialIndex];Nn&&Nn.visible&&d.push(K,Tt,Nn,Ee,J.z,$t)}}else Pt.visible&&d.push(K,Tt,Pt,Ee,J.z,null)}}const ft=K.children;for(let Tt=0,Pt=ft.length;Tt<Pt;Tt++)jt(ft[Tt],me,Ee,pe)}function Xt(K,me,Ee,pe){const Pe=K.opaque,ft=K.transmissive,Tt=K.transparent;f.setupLightsView(Ee),z===!0&&X.setGlobalState(y.clippingPlanes,Ee),ft.length>0&&on(Pe,me,Ee),pe&&Re.viewport(L.copy(pe)),Pe.length>0&&Wn(Pe,me,Ee),ft.length>0&&Wn(ft,me,Ee),Tt.length>0&&Wn(Tt,me,Ee),Re.buffers.depth.setTest(!0),Re.buffers.depth.setMask(!0),Re.buffers.color.setMask(!0),Re.setPolygonOffset(!1)}function on(K,me,Ee){const pe=Se.isWebGL2;q===null&&(q=new Qo(1024,1024,{generateMipmaps:!0,type:ae.has("EXT_color_buffer_half_float")?Xp:Dl,minFilter:cu,samples:pe&&s===!0?4:0}));const Pe=y.getRenderTarget();y.setRenderTarget(q),y.clear();const ft=y.toneMapping;y.toneMapping=Wo,Wn(K,me,Ee),y.toneMapping=ft,te.updateMultisampleRenderTarget(q),te.updateRenderTargetMipmap(q),y.setRenderTarget(Pe)}function Wn(K,me,Ee){const pe=me.isScene===!0?me.overrideMaterial:null;for(let Pe=0,ft=K.length;Pe<ft;Pe++){const Tt=K[Pe],Pt=Tt.object,It=Tt.geometry,kt=pe===null?Tt.material:pe,Ut=Tt.group;Pt.layers.test(Ee.layers)&&Zt(Pt,me,Ee,It,kt,Ut)}}function Zt(K,me,Ee,pe,Pe,ft){K.onBeforeRender(y,me,Ee,pe,Pe,ft),K.modelViewMatrix.multiplyMatrices(Ee.matrixWorldInverse,K.matrixWorld),K.normalMatrix.getNormalMatrix(K.modelViewMatrix),Pe.onBeforeRender(y,me,Ee,pe,K,ft),Pe.transparent===!0&&Pe.side===dl&&Pe.forceSinglePass===!1?(Pe.side=ps,Pe.needsUpdate=!0,y.renderBufferDirect(Ee,me,pe,Pe,K,ft),Pe.side=Nl,Pe.needsUpdate=!0,y.renderBufferDirect(Ee,me,pe,Pe,K,ft),Pe.side=dl):y.renderBufferDirect(Ee,me,pe,Pe,K,ft),K.onAfterRender(y,me,Ee,pe,Pe,ft)}function Gn(K,me,Ee){me.isScene!==!0&&(me=he);const pe=Te.get(K),Pe=f.state.lights,ft=f.state.shadowsArray,Tt=Pe.state.version,Pt=Ze.getParameters(K,Pe.state,ft,me,Ee),It=Ze.getProgramCacheKey(Pt);let kt=pe.programs;pe.environment=K.isMeshStandardMaterial?me.environment:null,pe.fog=me.fog,pe.envMap=(K.isMeshStandardMaterial?we:le).get(K.envMap||pe.environment),kt===void 0&&(K.addEventListener("dispose",ie),kt=new Map,pe.programs=kt);let Ut=kt.get(It);if(Ut!==void 0){if(pe.currentProgram===Ut&&pe.lightsStateVersion===Tt)return hn(K,Pt),Ut}else Pt.uniforms=Ze.getUniforms(K),K.onBuild(Ee,Pt,y),K.onBeforeCompile(Pt,y),Ut=Ze.acquireProgram(Pt,It),kt.set(It,Ut),pe.uniforms=Pt.uniforms;const $t=pe.uniforms;(!K.isShaderMaterial&&!K.isRawShaderMaterial||K.clipping===!0)&&($t.clippingPlanes=X.uniform),hn(K,Pt),pe.needsLights=na(K),pe.lightsStateVersion=Tt,pe.needsLights&&($t.ambientLightColor.value=Pe.state.ambient,$t.lightProbe.value=Pe.state.probe,$t.directionalLights.value=Pe.state.directional,$t.directionalLightShadows.value=Pe.state.directionalShadow,$t.spotLights.value=Pe.state.spot,$t.spotLightShadows.value=Pe.state.spotShadow,$t.rectAreaLights.value=Pe.state.rectArea,$t.ltc_1.value=Pe.state.rectAreaLTC1,$t.ltc_2.value=Pe.state.rectAreaLTC2,$t.pointLights.value=Pe.state.point,$t.pointLightShadows.value=Pe.state.pointShadow,$t.hemisphereLights.value=Pe.state.hemi,$t.directionalShadowMap.value=Pe.state.directionalShadowMap,$t.directionalShadowMatrix.value=Pe.state.directionalShadowMatrix,$t.spotShadowMap.value=Pe.state.spotShadowMap,$t.spotLightMatrix.value=Pe.state.spotLightMatrix,$t.spotLightMap.value=Pe.state.spotLightMap,$t.pointShadowMap.value=Pe.state.pointShadowMap,$t.pointShadowMatrix.value=Pe.state.pointShadowMatrix);const Nn=Ut.getUniforms(),Dr=pw.seqWithValue(Nn.seq,$t);return pe.currentProgram=Ut,pe.uniformsList=Dr,Ut}function hn(K,me){const Ee=Te.get(K);Ee.outputEncoding=me.outputEncoding,Ee.instancing=me.instancing,Ee.skinning=me.skinning,Ee.morphTargets=me.morphTargets,Ee.morphNormals=me.morphNormals,Ee.morphColors=me.morphColors,Ee.morphTargetsCount=me.morphTargetsCount,Ee.numClippingPlanes=me.numClippingPlanes,Ee.numIntersection=me.numClipIntersection,Ee.vertexAlphas=me.vertexAlphas,Ee.vertexTangents=me.vertexTangents,Ee.toneMapping=me.toneMapping}function bh(K,me,Ee,pe,Pe){me.isScene!==!0&&(me=he),te.resetTextureUnits();const ft=me.fog,Tt=pe.isMeshStandardMaterial?me.environment:null,Pt=S===null?y.outputEncoding:S.isXRRenderTarget===!0?S.texture.encoding:uu,It=(pe.isMeshStandardMaterial?we:le).get(pe.envMap||Tt),kt=pe.vertexColors===!0&&!!Ee.attributes.color&&Ee.attributes.color.itemSize===4,Ut=!!pe.normalMap&&!!Ee.attributes.tangent,$t=!!Ee.morphAttributes.position,Nn=!!Ee.morphAttributes.normal,Dr=!!Ee.morphAttributes.color,Qi=pe.toneMapped?y.toneMapping:Wo,Bs=Ee.morphAttributes.position||Ee.morphAttributes.normal||Ee.morphAttributes.color,$n=Bs!==void 0?Bs.length:0,Nt=Te.get(pe),Hs=f.state.lights;if(z===!0&&(G===!0||K!==I)){const Ln=K===I&&pe.id===M;X.setState(pe,K,Ln)}let Dn=!1;pe.version===Nt.__version?(Nt.needsLights&&Nt.lightsStateVersion!==Hs.state.version||Nt.outputEncoding!==Pt||Pe.isInstancedMesh&&Nt.instancing===!1||!Pe.isInstancedMesh&&Nt.instancing===!0||Pe.isSkinnedMesh&&Nt.skinning===!1||!Pe.isSkinnedMesh&&Nt.skinning===!0||Nt.envMap!==It||pe.fog===!0&&Nt.fog!==ft||Nt.numClippingPlanes!==void 0&&(Nt.numClippingPlanes!==X.numPlanes||Nt.numIntersection!==X.numIntersection)||Nt.vertexAlphas!==kt||Nt.vertexTangents!==Ut||Nt.morphTargets!==$t||Nt.morphNormals!==Nn||Nt.morphColors!==Dr||Nt.toneMapping!==Qi||Se.isWebGL2===!0&&Nt.morphTargetsCount!==$n)&&(Dn=!0):(Dn=!0,Nt.__version=pe.version);let Xr=Nt.currentProgram;Dn===!0&&(Xr=Gn(pe,me,Pe));let Ws=!1,ms=!1,Gs=!1;const An=Xr.getUniforms(),en=Nt.uniforms;if(Re.useProgram(Xr.program)&&(Ws=!0,ms=!0,Gs=!0),pe.id!==M&&(M=pe.id,ms=!0),Ws||I!==K){if(An.setValue(re,"projectionMatrix",K.projectionMatrix),Se.logarithmicDepthBuffer&&An.setValue(re,"logDepthBufFC",2/(Math.log(K.far+1)/Math.LN2)),I!==K&&(I=K,ms=!0,Gs=!0),pe.isShaderMaterial||pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshStandardMaterial||pe.envMap){const Ln=An.map.cameraPosition;Ln!==void 0&&Ln.setValue(re,J.setFromMatrixPosition(K.matrixWorld))}(pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshLambertMaterial||pe.isMeshBasicMaterial||pe.isMeshStandardMaterial||pe.isShaderMaterial)&&An.setValue(re,"isOrthographic",K.isOrthographicCamera===!0),(pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshLambertMaterial||pe.isMeshBasicMaterial||pe.isMeshStandardMaterial||pe.isShaderMaterial||pe.isShadowMaterial||Pe.isSkinnedMesh)&&An.setValue(re,"viewMatrix",K.matrixWorldInverse)}if(Pe.isSkinnedMesh){An.setOptional(re,Pe,"bindMatrix"),An.setOptional(re,Pe,"bindMatrixInverse");const Ln=Pe.skeleton;Ln&&(Se.floatVertexTextures?(Ln.boneTexture===null&&Ln.computeBoneTexture(),An.setValue(re,"boneTexture",Ln.boneTexture,te),An.setValue(re,"boneTextureSize",Ln.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const fn=Ee.morphAttributes;if((fn.position!==void 0||fn.normal!==void 0||fn.color!==void 0&&Se.isWebGL2===!0)&&Ve.update(Pe,Ee,Xr),(ms||Nt.receiveShadow!==Pe.receiveShadow)&&(Nt.receiveShadow=Pe.receiveShadow,An.setValue(re,"receiveShadow",Pe.receiveShadow)),pe.isMeshGouraudMaterial&&pe.envMap!==null&&(en.envMap.value=It,en.flipEnvMap.value=It.isCubeTexture&&It.isRenderTargetTexture===!1?-1:1),ms&&(An.setValue(re,"toneMappingExposure",y.toneMappingExposure),Nt.needsLights&&Fa(en,Gs),ft&&pe.fog===!0&&et.refreshFogUniforms(en,ft),et.refreshMaterialUniforms(en,pe,O,k,q),pw.upload(re,Nt.uniformsList,en,te)),pe.isShaderMaterial&&pe.uniformsNeedUpdate===!0&&(pw.upload(re,Nt.uniformsList,en,te),pe.uniformsNeedUpdate=!1),pe.isSpriteMaterial&&An.setValue(re,"center",Pe.center),An.setValue(re,"modelViewMatrix",Pe.modelViewMatrix),An.setValue(re,"normalMatrix",Pe.normalMatrix),An.setValue(re,"modelMatrix",Pe.matrixWorld),pe.isShaderMaterial||pe.isRawShaderMaterial){const Ln=pe.uniformsGroups;for(let qn=0,Lr=Ln.length;qn<Lr;qn++)if(Se.isWebGL2){const gs=Ln[qn];Ce.update(gs,Xr),Ce.bind(gs,Xr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Xr}function Fa(K,me){K.ambientLightColor.needsUpdate=me,K.lightProbe.needsUpdate=me,K.directionalLights.needsUpdate=me,K.directionalLightShadows.needsUpdate=me,K.pointLights.needsUpdate=me,K.pointLightShadows.needsUpdate=me,K.spotLights.needsUpdate=me,K.spotLightShadows.needsUpdate=me,K.rectAreaLights.needsUpdate=me,K.hemisphereLights.needsUpdate=me}function na(K){return K.isMeshLambertMaterial||K.isMeshToonMaterial||K.isMeshPhongMaterial||K.isMeshStandardMaterial||K.isShadowMaterial||K.isShaderMaterial&&K.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(K,me,Ee){Te.get(K.texture).__webglTexture=me,Te.get(K.depthTexture).__webglTexture=Ee;const pe=Te.get(K);pe.__hasExternalTextures=!0,pe.__hasExternalTextures&&(pe.__autoAllocateDepthBuffer=Ee===void 0,pe.__autoAllocateDepthBuffer||ae.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),pe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(K,me){const Ee=Te.get(K);Ee.__webglFramebuffer=me,Ee.__useDefaultFramebuffer=me===void 0},this.setRenderTarget=function(K,me=0,Ee=0){S=K,_=me,w=Ee;let pe=!0,Pe=null,ft=!1,Tt=!1;if(K){const It=Te.get(K);It.__useDefaultFramebuffer!==void 0?(Re.bindFramebuffer(36160,null),pe=!1):It.__webglFramebuffer===void 0?te.setupRenderTarget(K):It.__hasExternalTextures&&te.rebindTextures(K,Te.get(K.texture).__webglTexture,Te.get(K.depthTexture).__webglTexture);const kt=K.texture;(kt.isData3DTexture||kt.isDataArrayTexture||kt.isCompressedArrayTexture)&&(Tt=!0);const Ut=Te.get(K).__webglFramebuffer;K.isWebGLCubeRenderTarget?(Pe=Ut[me],ft=!0):Se.isWebGL2&&K.samples>0&&te.useMultisampledRTT(K)===!1?Pe=Te.get(K).__webglMultisampledFramebuffer:Pe=Ut,L.copy(K.viewport),P.copy(K.scissor),T=K.scissorTest}else L.copy(B).multiplyScalar(O).floor(),P.copy(Z).multiplyScalar(O).floor(),T=ne;if(Re.bindFramebuffer(36160,Pe)&&Se.drawBuffers&&pe&&Re.drawBuffers(K,Pe),Re.viewport(L),Re.scissor(P),Re.setScissorTest(T),ft){const It=Te.get(K.texture);re.framebufferTexture2D(36160,36064,34069+me,It.__webglTexture,Ee)}else if(Tt){const It=Te.get(K.texture),kt=me||0;re.framebufferTextureLayer(36160,36064,It.__webglTexture,Ee||0,kt)}M=-1},this.readRenderTargetPixels=function(K,me,Ee,pe,Pe,ft,Tt){if(!(K&&K.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Pt=Te.get(K).__webglFramebuffer;if(K.isWebGLCubeRenderTarget&&Tt!==void 0&&(Pt=Pt[Tt]),Pt){Re.bindFramebuffer(36160,Pt);try{const It=K.texture,kt=It.format,Ut=It.type;if(kt!==as&&rt.convert(kt)!==re.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const $t=Ut===Xp&&(ae.has("EXT_color_buffer_half_float")||Se.isWebGL2&&ae.has("EXT_color_buffer_float"));if(Ut!==Dl&&rt.convert(Ut)!==re.getParameter(35738)&&!(Ut===hl&&(Se.isWebGL2||ae.has("OES_texture_float")||ae.has("WEBGL_color_buffer_float")))&&!$t){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}me>=0&&me<=K.width-pe&&Ee>=0&&Ee<=K.height-Pe&&re.readPixels(me,Ee,pe,Pe,rt.convert(kt),rt.convert(Ut),ft)}finally{const It=S!==null?Te.get(S).__webglFramebuffer:null;Re.bindFramebuffer(36160,It)}}},this.copyFramebufferToTexture=function(K,me,Ee=0){const pe=Math.pow(2,-Ee),Pe=Math.floor(me.image.width*pe),ft=Math.floor(me.image.height*pe);te.setTexture2D(me,0),re.copyTexSubImage2D(3553,Ee,0,0,K.x,K.y,Pe,ft),Re.unbindTexture()},this.copyTextureToTexture=function(K,me,Ee,pe=0){const Pe=me.image.width,ft=me.image.height,Tt=rt.convert(Ee.format),Pt=rt.convert(Ee.type);te.setTexture2D(Ee,0),re.pixelStorei(37440,Ee.flipY),re.pixelStorei(37441,Ee.premultiplyAlpha),re.pixelStorei(3317,Ee.unpackAlignment),me.isDataTexture?re.texSubImage2D(3553,pe,K.x,K.y,Pe,ft,Tt,Pt,me.image.data):me.isCompressedTexture?re.compressedTexSubImage2D(3553,pe,K.x,K.y,me.mipmaps[0].width,me.mipmaps[0].height,Tt,me.mipmaps[0].data):re.texSubImage2D(3553,pe,K.x,K.y,Tt,Pt,me.image),pe===0&&Ee.generateMipmaps&&re.generateMipmap(3553),Re.unbindTexture()},this.copyTextureToTexture3D=function(K,me,Ee,pe,Pe=0){if(y.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ft=K.max.x-K.min.x+1,Tt=K.max.y-K.min.y+1,Pt=K.max.z-K.min.z+1,It=rt.convert(pe.format),kt=rt.convert(pe.type);let Ut;if(pe.isData3DTexture)te.setTexture3D(pe,0),Ut=32879;else if(pe.isDataArrayTexture)te.setTexture2DArray(pe,0),Ut=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}re.pixelStorei(37440,pe.flipY),re.pixelStorei(37441,pe.premultiplyAlpha),re.pixelStorei(3317,pe.unpackAlignment);const $t=re.getParameter(3314),Nn=re.getParameter(32878),Dr=re.getParameter(3316),Qi=re.getParameter(3315),Bs=re.getParameter(32877),$n=Ee.isCompressedTexture?Ee.mipmaps[0]:Ee.image;re.pixelStorei(3314,$n.width),re.pixelStorei(32878,$n.height),re.pixelStorei(3316,K.min.x),re.pixelStorei(3315,K.min.y),re.pixelStorei(32877,K.min.z),Ee.isDataTexture||Ee.isData3DTexture?re.texSubImage3D(Ut,Pe,me.x,me.y,me.z,ft,Tt,Pt,It,kt,$n.data):Ee.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),re.compressedTexSubImage3D(Ut,Pe,me.x,me.y,me.z,ft,Tt,Pt,It,$n.data)):re.texSubImage3D(Ut,Pe,me.x,me.y,me.z,ft,Tt,Pt,It,kt,$n),re.pixelStorei(3314,$t),re.pixelStorei(32878,Nn),re.pixelStorei(3316,Dr),re.pixelStorei(3315,Qi),re.pixelStorei(32877,Bs),Pe===0&&pe.generateMipmaps&&re.generateMipmap(Ut),Re.unbindTexture()},this.initTexture=function(K){K.isCubeTexture?te.setTextureCube(K,0):K.isData3DTexture?te.setTexture3D(K,0):K.isDataArrayTexture||K.isCompressedArrayTexture?te.setTexture2DArray(K,0):te.setTexture2D(K,0),Re.unbindTexture()},this.resetState=function(){_=0,w=0,S=null,Re.reset(),$e.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object.defineProperties(tS.prototype,{physicallyCorrectLights:{get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(n){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!n}}});class F$ extends tS{}F$.prototype.isWebGL1Renderer=!0;class nS{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new nt(e),this.density=t}clone(){return new nS(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class rS{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new nt(e),this.near=t,this.far=r}clone(){return new rS(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class I1 extends vn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class iS{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=uv,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ls()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ls()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ls()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const zi=new $;class eh{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)zi.fromBufferAttribute(this,t),zi.applyMatrix4(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)zi.fromBufferAttribute(this,t),zi.applyNormalMatrix(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)zi.fromBufferAttribute(this,t),zi.transformDirection(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}setX(e,t){return this.normalized&&(t=Rn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=fl(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=fl(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=fl(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=fl(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Rn(t,this.array),r=Rn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Rn(t,this.array),r=Rn(r,this.array),i=Rn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Rn(t,this.array),r=Rn(r,this.array),i=Rn(i,this.array),s=Rn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new kn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new eh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class qR extends di{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new nt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let uf;const mg=new $,df=new $,hf=new $,ff=new Ie,gg=new Ie,j$=new Ft,i_=new $,yg=new $,s_=new $,kF=new Ie,HT=new Ie,NF=new Ie;class V$ extends vn{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",uf===void 0){uf=new Wt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new iS(t,5);uf.setIndex([0,1,2,0,2,3]),uf.setAttribute("position",new eh(r,3,0,!1)),uf.setAttribute("uv",new eh(r,2,3,!1))}this.geometry=uf,this.material=e!==void 0?e:new qR,this.center=new Ie(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),df.setFromMatrixScale(this.matrixWorld),j$.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),hf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&df.multiplyScalar(-hf.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;o_(i_.set(-.5,-.5,0),hf,o,df,i,s),o_(yg.set(.5,-.5,0),hf,o,df,i,s),o_(s_.set(.5,.5,0),hf,o,df,i,s),kF.set(0,0),HT.set(1,0),NF.set(1,1);let a=e.ray.intersectTriangle(i_,yg,s_,!1,mg);if(a===null&&(o_(yg.set(-.5,.5,0),hf,o,df,i,s),HT.set(0,1),a=e.ray.intersectTriangle(i_,s_,yg,!1,mg),a===null))return;const l=e.ray.origin.distanceTo(mg);l<e.near||l>e.far||t.push({distance:l,point:mg.clone(),uv:ho.getUV(mg,i_,yg,s_,kF,HT,NF,new Ie),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function o_(n,e,t,r,i,s){ff.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(gg.x=s*ff.x-i*ff.y,gg.y=i*ff.x+s*ff.y):gg.copy(ff),n.copy(e),n.x+=gg.x,n.y+=gg.y,n.applyMatrix4(j$)}const a_=new $,DF=new $;class U$ extends vn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){a_.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(a_);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){a_.setFromMatrixPosition(e.matrixWorld),DF.setFromMatrixPosition(this.matrixWorld);const r=a_.distanceTo(DF)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const LF=new $,OF=new En,FF=new En,wEe=new $,jF=new Ft;class z$ extends si{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ft,this.bindMatrixInverse=new Ft}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new En,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,i=this.geometry;OF.fromBufferAttribute(i.attributes.skinIndex,e),FF.fromBufferAttribute(i.attributes.skinWeight,e),LF.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=FF.getComponent(s);if(o!==0){const a=OF.getComponent(s);jF.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(wEe.copy(LF).applyMatrix4(jF),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class KR extends vn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class fp extends Yn{constructor(e=null,t=1,r=1,i,s,o,a,l,c=xr,u=xr,d,f){super(null,o,a,l,c,u,i,s,d,f),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const VF=new Ft,bEe=new Ft;class sS{constructor(e=[],t=[]){this.uuid=Ls(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Ft)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Ft;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:bEe;VF.multiplyMatrices(a,t[s]),VF.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new sS(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=w$(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new fp(t,e,e,as,hl);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new KR),this.bones.push(o),this.boneInverses.push(new Ft().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Zp extends kn{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const UF=new Ft,zF=new Ft,l_=[],SEe=new Ft,vg=new si;class B$ extends si{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Zp(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1;for(let i=0;i<r;i++)this.setMatrixAt(i,SEe)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(vg.geometry=this.geometry,vg.material=this.material,vg.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,UF),zF.multiplyMatrices(r,UF),vg.matrixWorld=zF,vg.raycast(e,l_);for(let o=0,a=l_.length;o<a;o++){const l=l_[o];l.instanceId=s,l.object=this,t.push(l)}l_.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Zp(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Xi extends di{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new nt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const BF=new $,HF=new $,WF=new Ft,WT=new xm,c_=new yh;class du extends vn{constructor(e=new Wt,t=new Xi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)BF.fromBufferAttribute(t,i-1),HF.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=BF.distanceTo(HF);e.setAttribute("lineDistance",new ut(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),c_.copy(r.boundingSphere),c_.applyMatrix4(i),c_.radius+=s,e.ray.intersectsSphere(c_)===!1)return;WF.copy(i).invert(),WT.copy(e.ray).applyMatrix4(WF);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new $,u=new $,d=new $,f=new $,g=this.isLineSegments?2:1,v=r.index,x=r.attributes.position;if(v!==null){const _=Math.max(0,o.start),w=Math.min(v.count,o.start+o.count);for(let S=_,M=w-1;S<M;S+=g){const I=v.getX(S),L=v.getX(S+1);if(c.fromBufferAttribute(x,I),u.fromBufferAttribute(x,L),WT.distanceSqToSegment(c,u,f,d)>l)continue;f.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(f);T<e.near||T>e.far||t.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const _=Math.max(0,o.start),w=Math.min(x.count,o.start+o.count);for(let S=_,M=w-1;S<M;S+=g){if(c.fromBufferAttribute(x,S),u.fromBufferAttribute(x,S+1),WT.distanceSqToSegment(c,u,f,d)>l)continue;f.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(f);L<e.near||L>e.far||t.push({distance:L,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const GF=new $,$F=new $;class Oa extends du{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)GF.fromBufferAttribute(t,i),$F.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+GF.distanceTo($F);e.setAttribute("lineDistance",new ut(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class H$ extends du{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class YR extends di{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new nt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const qF=new Ft,nP=new xm,u_=new yh,d_=new $;class W$ extends vn{constructor(e=new Wt,t=new YR){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),u_.copy(r.boundingSphere),u_.applyMatrix4(i),u_.radius+=s,e.ray.intersectsSphere(u_)===!1)return;qF.copy(i).invert(),nP.copy(e.ray).applyMatrix4(qF);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,d=r.attributes.position;if(c!==null){const f=Math.max(0,o.start),g=Math.min(c.count,o.start+o.count);for(let v=f,y=g;v<y;v++){const x=c.getX(v);d_.fromBufferAttribute(d,x),KF(d_,x,l,i,e,t,this)}}else{const f=Math.max(0,o.start),g=Math.min(d.count,o.start+o.count);for(let v=f,y=g;v<y;v++)d_.fromBufferAttribute(d,v),KF(d_,v,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function KF(n,e,t,r,i,s,o){const a=nP.distanceSqToPoint(n);if(a<t){const l=new $;nP.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class EEe extends Yn{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:wr,this.magFilter=s!==void 0?s:wr,this.generateMipmaps=!1;const u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class TEe extends Yn{constructor(e,t,r){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=r,this.magFilter=xr,this.minFilter=xr,this.generateMipmaps=!1,this.needsUpdate=!0}}class XR extends Yn{constructor(e,t,r,i,s,o,a,l,c,u,d,f){super(null,o,a,l,c,u,i,s,d,f),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class MEe extends XR{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=ki}}class AEe extends Yn{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ea{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],f=r[i+1]-u,g=(o-u)/f;return(i+g)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Ie:new $);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new $,i=[],s=[],o=[],a=new $,l=new Ft;for(let g=0;g<=e;g++){const v=g/e;i[g]=this.getTangentAt(v,new $)}s[0]=new $,o[0]=new $;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),f=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),f<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),a.crossVectors(i[g-1],i[g]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(br(i[g-1].dot(i[g]),-1,1));s[g].applyMatrix4(l.makeRotationAxis(a,v))}o[g].crossVectors(i[g],s[g])}if(t===!0){let g=Math.acos(br(s[0].dot(s[e]),-1,1));g/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(g=-g);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],g*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class oS extends ea{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new Ie,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),f=l-this.aX,g=c-this.aY;l=f*u-g*d+this.aX,c=f*d+g*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class G$ extends oS{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function QR(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let f=(o-s)/c-(a-s)/(c+u)+(a-o)/u,g=(a-o)/u-(l-o)/(u+d)+(l-a)/d;f*=u,g*=u,i(o,a,f,g)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const h_=new $,GT=new QR,$T=new QR,qT=new QR;class $$ extends ea{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new $){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(h_.subVectors(i[0],i[1]).add(i[0]),c=h_);const d=i[a%s],f=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(h_.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=h_),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(d),g),y=Math.pow(d.distanceToSquared(f),g),x=Math.pow(f.distanceToSquared(u),g);y<1e-4&&(y=1),v<1e-4&&(v=y),x<1e-4&&(x=y),GT.initNonuniformCatmullRom(c.x,d.x,f.x,u.x,v,y,x),$T.initNonuniformCatmullRom(c.y,d.y,f.y,u.y,v,y,x),qT.initNonuniformCatmullRom(c.z,d.z,f.z,u.z,v,y,x)}else this.curveType==="catmullrom"&&(GT.initCatmullRom(c.x,d.x,f.x,u.x,this.tension),$T.initCatmullRom(c.y,d.y,f.y,u.y,this.tension),qT.initCatmullRom(c.z,d.z,f.z,u.z,this.tension));return r.set(GT.calc(l),$T.calc(l),qT.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new $().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function YF(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function CEe(n,e){const t=1-n;return t*t*e}function PEe(n,e){return 2*(1-n)*n*e}function IEe(n,e){return n*n*e}function my(n,e,t,r){return CEe(n,e)+PEe(n,t)+IEe(n,r)}function REe(n,e){const t=1-n;return t*t*t*e}function kEe(n,e){const t=1-n;return 3*t*t*n*e}function NEe(n,e){return 3*(1-n)*n*n*e}function DEe(n,e){return n*n*n*e}function gy(n,e,t,r,i){return REe(n,e)+kEe(n,t)+NEe(n,r)+DEe(n,i)}class JR extends ea{constructor(e=new Ie,t=new Ie,r=new Ie,i=new Ie){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Ie){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(gy(e,i.x,s.x,o.x,a.x),gy(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class q$ extends ea{constructor(e=new $,t=new $,r=new $,i=new $){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new $){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(gy(e,i.x,s.x,o.x,a.x),gy(e,i.y,s.y,o.y,a.y),gy(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class aS extends ea{constructor(e=new Ie,t=new Ie){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ie){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ie){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class K$ extends ea{constructor(e=new $,t=new $){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new $){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new $){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ZR extends ea{constructor(e=new Ie,t=new Ie,r=new Ie){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Ie){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(my(e,i.x,s.x,o.x),my(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ek extends ea{constructor(e=new $,t=new $,r=new $){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new $){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(my(e,i.x,s.x,o.x),my(e,i.y,s.y,o.y),my(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class tk extends ea{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ie){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(YF(a,l.x,c.x,u.x,d.x),YF(a,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Ie().fromArray(i))}return this}}var nk=Object.freeze({__proto__:null,ArcCurve:G$,CatmullRomCurve3:$$,CubicBezierCurve:JR,CubicBezierCurve3:q$,EllipseCurve:oS,LineCurve:aS,LineCurve3:K$,QuadraticBezierCurve:ZR,QuadraticBezierCurve3:ek,SplineCurve:tk});class Y$ extends ea{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new aS(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new nk[i.type]().fromJSON(i))}return this}}class fv extends Y${constructor(e){super(),this.type="Path",this.currentPoint=new Ie,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new aS(this.currentPoint.clone(),new Ie(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new ZR(this.currentPoint.clone(),new Ie(e,t),new Ie(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new JR(this.currentPoint.clone(),new Ie(e,t),new Ie(r,i),new Ie(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new tk(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const c=new oS(e,t,r,i,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class bm extends Wt{constructor(e=[new Ie(0,-.5),new Ie(.5,0),new Ie(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=br(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,d=new $,f=new Ie,g=new $,v=new $,y=new $;let x=0,_=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:x=e[w+1].x-e[w].x,_=e[w+1].y-e[w].y,g.x=_*1,g.y=-x,g.z=_*0,y.copy(g),g.normalize(),l.push(g.x,g.y,g.z);break;case e.length-1:l.push(y.x,y.y,y.z);break;default:x=e[w+1].x-e[w].x,_=e[w+1].y-e[w].y,g.x=_*1,g.y=-x,g.z=_*0,v.copy(g),g.x+=y.x,g.y+=y.y,g.z+=y.z,g.normalize(),l.push(g.x,g.y,g.z),y.copy(v)}for(let w=0;w<=t;w++){const S=r+w*u*i,M=Math.sin(S),I=Math.cos(S);for(let L=0;L<=e.length-1;L++){d.x=e[L].x*M,d.y=e[L].y,d.z=e[L].x*I,o.push(d.x,d.y,d.z),f.x=w/t,f.y=L/(e.length-1),a.push(f.x,f.y);const P=l[3*L+0]*M,T=l[3*L+1],C=l[3*L+0]*I;c.push(P,T,C)}}for(let w=0;w<t;w++)for(let S=0;S<e.length-1;S++){const M=S+w*e.length,I=M,L=M+e.length,P=M+e.length+1,T=M+1;s.push(I,L,T),s.push(P,T,L)}this.setIndex(s),this.setAttribute("position",new ut(o,3)),this.setAttribute("uv",new ut(a,2)),this.setAttribute("normal",new ut(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bm(e.points,e.segments,e.phiStart,e.phiLength)}}class r0 extends bm{constructor(e=1,t=1,r=4,i=8){const s=new fv;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new r0(e.radius,e.length,e.capSegments,e.radialSegments)}}class i0 extends Wt{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new $,u=new Ie;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,f=3;d<=t;d++,f+=3){const g=r+d/t*i;c.x=e*Math.cos(g),c.y=e*Math.sin(g),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[f]/e+1)/2,u.y=(o[f+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new ut(o,3)),this.setAttribute("normal",new ut(a,3)),this.setAttribute("uv",new ut(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i0(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class vh extends Wt{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],d=[],f=[],g=[];let v=0;const y=[],x=r/2;let _=0;w(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(u),this.setAttribute("position",new ut(d,3)),this.setAttribute("normal",new ut(f,3)),this.setAttribute("uv",new ut(g,2));function w(){const M=new $,I=new $;let L=0;const P=(t-e)/r;for(let T=0;T<=s;T++){const C=[],k=T/s,O=k*(t-e)+e;for(let U=0;U<=i;U++){const V=U/i,B=V*l+a,Z=Math.sin(B),ne=Math.cos(B);I.x=O*Z,I.y=-k*r+x,I.z=O*ne,d.push(I.x,I.y,I.z),M.set(Z,P,ne).normalize(),f.push(M.x,M.y,M.z),g.push(V,1-k),C.push(v++)}y.push(C)}for(let T=0;T<i;T++)for(let C=0;C<s;C++){const k=y[C][T],O=y[C+1][T],U=y[C+1][T+1],V=y[C][T+1];u.push(k,O,V),u.push(O,U,V),L+=6}c.addGroup(_,L,0),_+=L}function S(M){const I=v,L=new Ie,P=new $;let T=0;const C=M===!0?e:t,k=M===!0?1:-1;for(let U=1;U<=i;U++)d.push(0,x*k,0),f.push(0,k,0),g.push(.5,.5),v++;const O=v;for(let U=0;U<=i;U++){const B=U/i*l+a,Z=Math.cos(B),ne=Math.sin(B);P.x=C*ne,P.y=x*k,P.z=C*Z,d.push(P.x,P.y,P.z),f.push(0,k,0),L.x=Z*.5+.5,L.y=ne*.5*k+.5,g.push(L.x,L.y),v++}for(let U=0;U<i;U++){const V=I+U,B=O+U;M===!0?u.push(B,B+1,V):u.push(B+1,B,V),T+=3}c.addGroup(_,T,M===!0?1:2),_+=T}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class s0 extends vh{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new s0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ul extends Wt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new ut(s,3)),this.setAttribute("normal",new ut(s.slice(),3)),this.setAttribute("uv",new ut(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(w){const S=new $,M=new $,I=new $;for(let L=0;L<t.length;L+=3)g(t[L+0],S),g(t[L+1],M),g(t[L+2],I),l(S,M,I,w)}function l(w,S,M,I){const L=I+1,P=[];for(let T=0;T<=L;T++){P[T]=[];const C=w.clone().lerp(M,T/L),k=S.clone().lerp(M,T/L),O=L-T;for(let U=0;U<=O;U++)U===0&&T===L?P[T][U]=C:P[T][U]=C.clone().lerp(k,U/O)}for(let T=0;T<L;T++)for(let C=0;C<2*(L-T)-1;C++){const k=Math.floor(C/2);C%2===0?(f(P[T][k+1]),f(P[T+1][k]),f(P[T][k])):(f(P[T][k+1]),f(P[T+1][k+1]),f(P[T+1][k]))}}function c(w){const S=new $;for(let M=0;M<s.length;M+=3)S.x=s[M+0],S.y=s[M+1],S.z=s[M+2],S.normalize().multiplyScalar(w),s[M+0]=S.x,s[M+1]=S.y,s[M+2]=S.z}function u(){const w=new $;for(let S=0;S<s.length;S+=3){w.x=s[S+0],w.y=s[S+1],w.z=s[S+2];const M=x(w)/2/Math.PI+.5,I=_(w)/Math.PI+.5;o.push(M,1-I)}v(),d()}function d(){for(let w=0;w<o.length;w+=6){const S=o[w+0],M=o[w+2],I=o[w+4],L=Math.max(S,M,I),P=Math.min(S,M,I);L>.9&&P<.1&&(S<.2&&(o[w+0]+=1),M<.2&&(o[w+2]+=1),I<.2&&(o[w+4]+=1))}}function f(w){s.push(w.x,w.y,w.z)}function g(w,S){const M=w*3;S.x=e[M+0],S.y=e[M+1],S.z=e[M+2]}function v(){const w=new $,S=new $,M=new $,I=new $,L=new Ie,P=new Ie,T=new Ie;for(let C=0,k=0;C<s.length;C+=9,k+=6){w.set(s[C+0],s[C+1],s[C+2]),S.set(s[C+3],s[C+4],s[C+5]),M.set(s[C+6],s[C+7],s[C+8]),L.set(o[k+0],o[k+1]),P.set(o[k+2],o[k+3]),T.set(o[k+4],o[k+5]),I.copy(w).add(S).add(M).divideScalar(3);const O=x(I);y(L,k+0,w,O),y(P,k+2,S,O),y(T,k+4,M,O)}}function y(w,S,M,I){I<0&&w.x===1&&(o[S]=w.x-1),M.x===0&&M.z===0&&(o[S]=I/2/Math.PI+.5)}function x(w){return Math.atan2(w.z,-w.x)}function _(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ul(e.vertices,e.indices,e.radius,e.details)}}class o0 extends Ul{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new o0(e.radius,e.detail)}}const f_=new $,p_=new $,KT=new $,m_=new ho;class X$ extends Wt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(kd*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),f={},g=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:y,b:x,c:_}=m_;if(y.fromBufferAttribute(a,c[0]),x.fromBufferAttribute(a,c[1]),_.fromBufferAttribute(a,c[2]),m_.getNormal(KT),d[0]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,d[1]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,d[2]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let w=0;w<3;w++){const S=(w+1)%3,M=d[w],I=d[S],L=m_[u[w]],P=m_[u[S]],T=`${M}_${I}`,C=`${I}_${M}`;C in f&&f[C]?(KT.dot(f[C].normal)<=s&&(g.push(L.x,L.y,L.z),g.push(P.x,P.y,P.z)),f[C]=null):T in f||(f[T]={index0:c[w],index1:c[S],normal:KT.clone()})}}for(const v in f)if(f[v]){const{index0:y,index1:x}=f[v];f_.fromBufferAttribute(a,y),p_.fromBufferAttribute(a,x),g.push(f_.x,f_.y,f_.z),g.push(p_.x,p_.y,p_.z)}this.setAttribute("position",new ut(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Dd extends fv{constructor(e){super(e),this.uuid=Ls(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new fv().fromJSON(i))}return this}}const LEe={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=Q$(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,f,g;if(r&&(s=UEe(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let v=t;v<i;v+=t)d=n[v],f=n[v+1],d<a&&(a=d),f<l&&(l=f),d>c&&(c=d),f>u&&(u=f);g=Math.max(c-a,u-l),g=g!==0?32767/g:0}return pv(s,o,t,a,l,g,0),o}};function Q$(n,e,t,r,i){let s,o;if(i===QEe(n,e,t,r)>0)for(s=e;s<t;s+=r)o=XF(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=XF(s,n[s],n[s+1],o);return o&&lS(o,o.next)&&(gv(o),o=o.next),o}function th(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(lS(t,t.next)||er(t.prev,t,t.next)===0)){if(gv(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function pv(n,e,t,r,i,s,o){if(!n)return;!o&&s&&GEe(n,r,i,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?FEe(n,r,i,s):OEe(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),gv(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=jEe(th(n),e,t),pv(n,e,t,r,i,s,2)):o===2&&VEe(n,e,t,r,i,s):pv(th(n),e,t,r,i,s,1);break}}}function OEe(n){const e=n.prev,t=n,r=n.next;if(er(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,f=i>s?i>o?i:o:s>o?s:o,g=a>l?a>c?a:c:l>c?l:c;let v=r.next;for(;v!==e;){if(v.x>=u&&v.x<=f&&v.y>=d&&v.y<=g&&$f(i,a,s,l,o,c,v.x,v.y)&&er(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function FEe(n,e,t,r){const i=n.prev,s=n,o=n.next;if(er(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,d=s.y,f=o.y,g=a<l?a<c?a:c:l<c?l:c,v=u<d?u<f?u:f:d<f?d:f,y=a>l?a>c?a:c:l>c?l:c,x=u>d?u>f?u:f:d>f?d:f,_=rP(g,v,e,t,r),w=rP(y,x,e,t,r);let S=n.prevZ,M=n.nextZ;for(;S&&S.z>=_&&M&&M.z<=w;){if(S.x>=g&&S.x<=y&&S.y>=v&&S.y<=x&&S!==i&&S!==o&&$f(a,u,l,d,c,f,S.x,S.y)&&er(S.prev,S,S.next)>=0||(S=S.prevZ,M.x>=g&&M.x<=y&&M.y>=v&&M.y<=x&&M!==i&&M!==o&&$f(a,u,l,d,c,f,M.x,M.y)&&er(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;S&&S.z>=_;){if(S.x>=g&&S.x<=y&&S.y>=v&&S.y<=x&&S!==i&&S!==o&&$f(a,u,l,d,c,f,S.x,S.y)&&er(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;M&&M.z<=w;){if(M.x>=g&&M.x<=y&&M.y>=v&&M.y<=x&&M!==i&&M!==o&&$f(a,u,l,d,c,f,M.x,M.y)&&er(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function jEe(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!lS(i,s)&&J$(i,r,r.next,s)&&mv(i,s)&&mv(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),gv(r),gv(r.next),r=n=s),r=r.next}while(r!==n);return th(r)}function VEe(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&KEe(o,a)){let l=Z$(o,a);o=th(o,o.next),l=th(l,l.next),pv(o,e,t,r,i,s,0),pv(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function UEe(n,e,t,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,c=Q$(n,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(qEe(c));for(i.sort(zEe),s=0;s<i.length;s++)t=BEe(i[s],t);return t}function zEe(n,e){return n.x-e.x}function BEe(n,e){const t=HEe(n,e);if(!t)return e;const r=Z$(t,n);return th(r,r.next),th(t,t.next)}function HEe(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const f=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=s&&f>r&&(r=f,i=t.x<t.next.x?t:t.next,f===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let u=1/0,d;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&$f(o<c?s:r,o,l,c,o<c?r:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),mv(t,n)&&(d<u||d===u&&(t.x>i.x||t.x===i.x&&WEe(i,t)))&&(i=t,u=d)),t=t.next;while(t!==a);return i}function WEe(n,e){return er(n.prev,n,e.prev)<0&&er(e.next,n,n.next)<0}function GEe(n,e,t,r){let i=n;do i.z===0&&(i.z=rP(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,$Ee(i)}function $Ee(n){let e,t,r,i,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,c*=2}while(o>1);return n}function rP(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function qEe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function $f(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function KEe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!YEe(n,e)&&(mv(n,e)&&mv(e,n)&&XEe(n,e)&&(er(n.prev,n,e.prev)||er(n,e.prev,e))||lS(n,e)&&er(n.prev,n,n.next)>0&&er(e.prev,e,e.next)>0)}function er(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function lS(n,e){return n.x===e.x&&n.y===e.y}function J$(n,e,t,r){const i=y_(er(n,e,t)),s=y_(er(n,e,r)),o=y_(er(t,r,n)),a=y_(er(t,r,e));return!!(i!==s&&o!==a||i===0&&g_(n,t,e)||s===0&&g_(n,r,e)||o===0&&g_(t,n,r)||a===0&&g_(t,e,r))}function g_(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function y_(n){return n>0?1:n<0?-1:0}function YEe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&J$(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function mv(n,e){return er(n.prev,n,n.next)<0?er(n,e,n.next)>=0&&er(n,n.prev,e)>=0:er(n,e,n.prev)<0||er(n,n.next,e)<0}function XEe(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function Z$(n,e){const t=new iP(n.i,n.x,n.y),r=new iP(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function XF(n,e,t,r){const i=new iP(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function gv(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function iP(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function QEe(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class Ia{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Ia.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];QF(e),JF(r,e);let o=e.length;t.forEach(QF);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,JF(r,t[l]);const a=LEe.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function QF(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function JF(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class a0 extends Wt{constructor(e=new Dd([new Ie(.5,.5),new Ie(-.5,.5),new Ie(-.5,-.5),new Ie(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new ut(i,3)),this.setAttribute("uv",new ut(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,g=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:g-.1,y=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:JEe;let S,M=!1,I,L,P,T;_&&(S=_.getSpacedPoints(u),M=!0,f=!1,I=_.computeFrenetFrames(u,!1),L=new $,P=new $,T=new $),f||(x=0,g=0,v=0,y=0);const C=a.extractPoints(c);let k=C.shape;const O=C.holes;if(!Ia.isClockWise(k)){k=k.reverse();for(let te=0,le=O.length;te<le;te++){const we=O[te];Ia.isClockWise(we)&&(O[te]=we.reverse())}}const V=Ia.triangulateShape(k,O),B=k;for(let te=0,le=O.length;te<le;te++){const we=O[te];k=k.concat(we)}function Z(te,le,we){return le||console.error("THREE.ExtrudeGeometry: vec does not exist"),te.clone().addScaledVector(le,we)}const ne=k.length,oe=V.length;function z(te,le,we){let Be,Fe,Je;const Ze=te.x-le.x,et=te.y-le.y,At=we.x-te.x,Ot=we.y-te.y,X=Ze*Ze+et*et,W=Ze*Ot-et*At;if(Math.abs(W)>Number.EPSILON){const ye=Math.sqrt(X),Ve=Math.sqrt(At*At+Ot*Ot),Oe=le.x-et/ye,je=le.y+Ze/ye,rt=we.x-Ot/Ve,$e=we.y+At/Ve,Ce=((rt-Oe)*Ot-($e-je)*At)/(Ze*Ot-et*At);Be=Oe+Ze*Ce-te.x,Fe=je+et*Ce-te.y;const ct=Be*Be+Fe*Fe;if(ct<=2)return new Ie(Be,Fe);Je=Math.sqrt(ct/2)}else{let ye=!1;Ze>Number.EPSILON?At>Number.EPSILON&&(ye=!0):Ze<-Number.EPSILON?At<-Number.EPSILON&&(ye=!0):Math.sign(et)===Math.sign(Ot)&&(ye=!0),ye?(Be=-et,Fe=Ze,Je=Math.sqrt(X)):(Be=Ze,Fe=et,Je=Math.sqrt(X/2))}return new Ie(Be/Je,Fe/Je)}const G=[];for(let te=0,le=B.length,we=le-1,Be=te+1;te<le;te++,we++,Be++)we===le&&(we=0),Be===le&&(Be=0),G[te]=z(B[te],B[we],B[Be]);const q=[];let se,J=G.concat();for(let te=0,le=O.length;te<le;te++){const we=O[te];se=[];for(let Be=0,Fe=we.length,Je=Fe-1,Ze=Be+1;Be<Fe;Be++,Je++,Ze++)Je===Fe&&(Je=0),Ze===Fe&&(Ze=0),se[Be]=z(we[Be],we[Je],we[Ze]);q.push(se),J=J.concat(se)}for(let te=0;te<x;te++){const le=te/x,we=g*Math.cos(le*Math.PI/2),Be=v*Math.sin(le*Math.PI/2)+y;for(let Fe=0,Je=B.length;Fe<Je;Fe++){const Ze=Z(B[Fe],G[Fe],Be);ae(Ze.x,Ze.y,-we)}for(let Fe=0,Je=O.length;Fe<Je;Fe++){const Ze=O[Fe];se=q[Fe];for(let et=0,At=Ze.length;et<At;et++){const Ot=Z(Ze[et],se[et],Be);ae(Ot.x,Ot.y,-we)}}}const he=v+y;for(let te=0;te<ne;te++){const le=f?Z(k[te],J[te],he):k[te];M?(P.copy(I.normals[0]).multiplyScalar(le.x),L.copy(I.binormals[0]).multiplyScalar(le.y),T.copy(S[0]).add(P).add(L),ae(T.x,T.y,T.z)):ae(le.x,le.y,0)}for(let te=1;te<=u;te++)for(let le=0;le<ne;le++){const we=f?Z(k[le],J[le],he):k[le];M?(P.copy(I.normals[te]).multiplyScalar(we.x),L.copy(I.binormals[te]).multiplyScalar(we.y),T.copy(S[te]).add(P).add(L),ae(T.x,T.y,T.z)):ae(we.x,we.y,d/u*te)}for(let te=x-1;te>=0;te--){const le=te/x,we=g*Math.cos(le*Math.PI/2),Be=v*Math.sin(le*Math.PI/2)+y;for(let Fe=0,Je=B.length;Fe<Je;Fe++){const Ze=Z(B[Fe],G[Fe],Be);ae(Ze.x,Ze.y,d+we)}for(let Fe=0,Je=O.length;Fe<Je;Fe++){const Ze=O[Fe];se=q[Fe];for(let et=0,At=Ze.length;et<At;et++){const Ot=Z(Ze[et],se[et],Be);M?ae(Ot.x,Ot.y+S[u-1].y,S[u-1].x+we):ae(Ot.x,Ot.y,d+we)}}}_e(),re();function _e(){const te=i.length/3;if(f){let le=0,we=ne*le;for(let Be=0;Be<oe;Be++){const Fe=V[Be];Se(Fe[2]+we,Fe[1]+we,Fe[0]+we)}le=u+x*2,we=ne*le;for(let Be=0;Be<oe;Be++){const Fe=V[Be];Se(Fe[0]+we,Fe[1]+we,Fe[2]+we)}}else{for(let le=0;le<oe;le++){const we=V[le];Se(we[2],we[1],we[0])}for(let le=0;le<oe;le++){const we=V[le];Se(we[0]+ne*u,we[1]+ne*u,we[2]+ne*u)}}r.addGroup(te,i.length/3-te,0)}function re(){const te=i.length/3;let le=0;Y(B,le),le+=B.length;for(let we=0,Be=O.length;we<Be;we++){const Fe=O[we];Y(Fe,le),le+=Fe.length}r.addGroup(te,i.length/3-te,1)}function Y(te,le){let we=te.length;for(;--we>=0;){const Be=we;let Fe=we-1;Fe<0&&(Fe=te.length-1);for(let Je=0,Ze=u+x*2;Je<Ze;Je++){const et=ne*Je,At=ne*(Je+1),Ot=le+Be+et,X=le+Fe+et,W=le+Fe+At,ye=le+Be+At;Re(Ot,X,W,ye)}}}function ae(te,le,we){l.push(te),l.push(le),l.push(we)}function Se(te,le,we){Ae(te),Ae(le),Ae(we);const Be=i.length/3,Fe=w.generateTopUV(r,i,Be-3,Be-2,Be-1);Te(Fe[0]),Te(Fe[1]),Te(Fe[2])}function Re(te,le,we,Be){Ae(te),Ae(le),Ae(Be),Ae(le),Ae(we),Ae(Be);const Fe=i.length/3,Je=w.generateSideWallUV(r,i,Fe-6,Fe-3,Fe-2,Fe-1);Te(Je[0]),Te(Je[1]),Te(Je[3]),Te(Je[1]),Te(Je[2]),Te(Je[3])}function Ae(te){i.push(l[te*3+0]),i.push(l[te*3+1]),i.push(l[te*3+2])}function Te(te){s.push(te.x),s.push(te.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return ZEe(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new nk[i.type]().fromJSON(i)),new a0(r,e.options)}}const JEe={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new Ie(s,o),new Ie(a,l),new Ie(c,u)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[r*3],u=e[r*3+1],d=e[r*3+2],f=e[i*3],g=e[i*3+1],v=e[i*3+2],y=e[s*3],x=e[s*3+1],_=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Ie(o,1-l),new Ie(c,1-d),new Ie(f,1-v),new Ie(y,1-_)]:[new Ie(a,1-l),new Ie(u,1-d),new Ie(g,1-v),new Ie(x,1-_)]}};function ZEe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class l0 extends Ul{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new l0(e.radius,e.detail)}}class Sm extends Ul{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Sm(e.radius,e.detail)}}class c0 extends Wt{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let d=e;const f=(t-e)/i,g=new $,v=new Ie;for(let y=0;y<=i;y++){for(let x=0;x<=r;x++){const _=s+x/r*o;g.x=d*Math.cos(_),g.y=d*Math.sin(_),l.push(g.x,g.y,g.z),c.push(0,0,1),v.x=(g.x/t+1)/2,v.y=(g.y/t+1)/2,u.push(v.x,v.y)}d+=f}for(let y=0;y<i;y++){const x=y*(r+1);for(let _=0;_<r;_++){const w=_+x,S=w,M=w+r+1,I=w+r+2,L=w+1;a.push(S,M,L),a.push(M,I,L)}}this.setIndex(a),this.setAttribute("position",new ut(l,3)),this.setAttribute("normal",new ut(c,3)),this.setAttribute("uv",new ut(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new c0(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class u0 extends Wt{constructor(e=new Dd([new Ie(0,.5),new Ie(-.5,-.5),new Ie(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new ut(i,3)),this.setAttribute("normal",new ut(s,3)),this.setAttribute("uv",new ut(o,2));function c(u){const d=i.length/3,f=u.extractPoints(t);let g=f.shape;const v=f.holes;Ia.isClockWise(g)===!1&&(g=g.reverse());for(let x=0,_=v.length;x<_;x++){const w=v[x];Ia.isClockWise(w)===!0&&(v[x]=w.reverse())}const y=Ia.triangulateShape(g,v);for(let x=0,_=v.length;x<_;x++){const w=v[x];g=g.concat(w)}for(let x=0,_=g.length;x<_;x++){const w=g[x];i.push(w.x,w.y,0),s.push(0,0,1),o.push(w.x,w.y)}for(let x=0,_=y.length;x<_;x++){const w=y[x],S=w[0]+d,M=w[1]+d,I=w[2]+d;r.push(S,M,I),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return eTe(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new u0(r,e.curveSegments)}}function eTe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class Em extends Wt{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new $,f=new $,g=[],v=[],y=[],x=[];for(let _=0;_<=r;_++){const w=[],S=_/r;let M=0;_==0&&o==0?M=.5/t:_==r&&l==Math.PI&&(M=-.5/t);for(let I=0;I<=t;I++){const L=I/t;d.x=-e*Math.cos(i+L*s)*Math.sin(o+S*a),d.y=e*Math.cos(o+S*a),d.z=e*Math.sin(i+L*s)*Math.sin(o+S*a),v.push(d.x,d.y,d.z),f.copy(d).normalize(),y.push(f.x,f.y,f.z),x.push(L+M,1-S),w.push(c++)}u.push(w)}for(let _=0;_<r;_++)for(let w=0;w<t;w++){const S=u[_][w+1],M=u[_][w],I=u[_+1][w],L=u[_+1][w+1];(_!==0||o>0)&&g.push(S,M,L),(_!==r-1||l<Math.PI)&&g.push(M,I,L)}this.setIndex(g),this.setAttribute("position",new ut(v,3)),this.setAttribute("normal",new ut(y,3)),this.setAttribute("uv",new ut(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Em(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class d0 extends Ul{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new d0(e.radius,e.detail)}}class h0 extends Wt{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new $,d=new $,f=new $;for(let g=0;g<=r;g++)for(let v=0;v<=i;v++){const y=v/i*s,x=g/r*Math.PI*2;d.x=(e+t*Math.cos(x))*Math.cos(y),d.y=(e+t*Math.cos(x))*Math.sin(y),d.z=t*Math.sin(x),a.push(d.x,d.y,d.z),u.x=e*Math.cos(y),u.y=e*Math.sin(y),f.subVectors(d,u).normalize(),l.push(f.x,f.y,f.z),c.push(v/i),c.push(g/r)}for(let g=1;g<=r;g++)for(let v=1;v<=i;v++){const y=(i+1)*g+v-1,x=(i+1)*(g-1)+v-1,_=(i+1)*(g-1)+v,w=(i+1)*g+v;o.push(y,x,w),o.push(x,_,w)}this.setIndex(o),this.setAttribute("position",new ut(a,3)),this.setAttribute("normal",new ut(l,3)),this.setAttribute("uv",new ut(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new h0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class f0 extends Wt{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],d=new $,f=new $,g=new $,v=new $,y=new $,x=new $,_=new $;for(let S=0;S<=r;++S){const M=S/r*s*Math.PI*2;w(M,s,o,e,g),w(M+.01,s,o,e,v),x.subVectors(v,g),_.addVectors(v,g),y.crossVectors(x,_),_.crossVectors(y,x),y.normalize(),_.normalize();for(let I=0;I<=i;++I){const L=I/i*Math.PI*2,P=-t*Math.cos(L),T=t*Math.sin(L);d.x=g.x+(P*_.x+T*y.x),d.y=g.y+(P*_.y+T*y.y),d.z=g.z+(P*_.z+T*y.z),l.push(d.x,d.y,d.z),f.subVectors(d,g).normalize(),c.push(f.x,f.y,f.z),u.push(S/r),u.push(I/i)}}for(let S=1;S<=r;S++)for(let M=1;M<=i;M++){const I=(i+1)*(S-1)+(M-1),L=(i+1)*S+(M-1),P=(i+1)*S+M,T=(i+1)*(S-1)+M;a.push(I,L,T),a.push(L,P,T)}this.setIndex(a),this.setAttribute("position",new ut(l,3)),this.setAttribute("normal",new ut(c,3)),this.setAttribute("uv",new ut(u,2));function w(S,M,I,L,P){const T=Math.cos(S),C=Math.sin(S),k=I/M*S,O=Math.cos(k);P.x=L*(2+O)*.5*T,P.y=L*(2+O)*C*.5,P.z=L*Math.sin(k)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new f0(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class p0 extends Wt{constructor(e=new ek(new $(-1,-1,0),new $(-1,1,0),new $(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new $,l=new $,c=new Ie;let u=new $;const d=[],f=[],g=[],v=[];y(),this.setIndex(v),this.setAttribute("position",new ut(d,3)),this.setAttribute("normal",new ut(f,3)),this.setAttribute("uv",new ut(g,2));function y(){for(let S=0;S<t;S++)x(S);x(s===!1?t:0),w(),_()}function x(S){u=e.getPointAt(S/t,u);const M=o.normals[S],I=o.binormals[S];for(let L=0;L<=i;L++){const P=L/i*Math.PI*2,T=Math.sin(P),C=-Math.cos(P);l.x=C*M.x+T*I.x,l.y=C*M.y+T*I.y,l.z=C*M.z+T*I.z,l.normalize(),f.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,d.push(a.x,a.y,a.z)}}function _(){for(let S=1;S<=t;S++)for(let M=1;M<=i;M++){const I=(i+1)*(S-1)+(M-1),L=(i+1)*S+(M-1),P=(i+1)*S+M,T=(i+1)*(S-1)+M;v.push(I,L,T),v.push(L,P,T)}}function w(){for(let S=0;S<=t;S++)for(let M=0;M<=i;M++)c.x=S/t,c.y=M/i,g.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new p0(new nk[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class eq extends Wt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new $,s=new $;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],f=d.start,g=d.count;for(let v=f,y=f+g;v<y;v+=3)for(let x=0;x<3;x++){const _=a.getX(v+x),w=a.getX(v+(x+1)%3);i.fromBufferAttribute(o,_),s.fromBufferAttribute(o,w),ZF(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,d=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,d),ZF(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new ut(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function ZF(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var ej=Object.freeze({__proto__:null,BoxGeometry:wu,CapsuleGeometry:r0,CircleGeometry:i0,ConeGeometry:s0,CylinderGeometry:vh,DodecahedronGeometry:o0,EdgesGeometry:X$,ExtrudeGeometry:a0,IcosahedronGeometry:l0,LatheGeometry:bm,OctahedronGeometry:Sm,PlaneGeometry:_m,PolyhedronGeometry:Ul,RingGeometry:c0,ShapeGeometry:u0,SphereGeometry:Em,TetrahedronGeometry:d0,TorusGeometry:h0,TorusKnotGeometry:f0,TubeGeometry:p0,WireframeGeometry:eq});class tq extends di{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new nt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class nq extends Da{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class rk extends di{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new nt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xu,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rq extends rk{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ie(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return br(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new nt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new nt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new nt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class iq extends di{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new nt(16777215),this.specular=new nt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xu,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Zv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sq extends di{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new nt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xu,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class oq extends di{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xu,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class aq extends di{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new nt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xu,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Zv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class lq extends di{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new nt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xu,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cq extends Xi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function ao(n,e,t){return ik(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function yd(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function ik(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function uq(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function sP(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function sk(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function tTe(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],f=[];for(let g=0;g<c.times.length;++g){const v=c.times[g]*i;if(!(v<t||v>=r)){d.push(c.times[g]);for(let y=0;y<u;++y)f.push(c.values[g*u+y])}}d.length!==0&&(c.times=yd(d,c.times.constructor),c.values=yd(f,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function nTe(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let f=0;const g=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=g/3);const v=a.times.length-1;let y;if(s<=a.times[0]){const _=u,w=d-u;y=ao(a.values,_,w)}else if(s>=a.times[v]){const _=v*d+u,w=_+d-u;y=ao(a.values,_,w)}else{const _=a.createInterpolant(),w=u,S=d-u;_.evaluate(s),y=ao(_.resultBuffer,w,S)}l==="quaternion"&&new Di().fromArray(y).normalize().conjugate().toArray(y);const x=c.times.length;for(let _=0;_<x;++_){const w=_*g+f;if(l==="quaternion")Di.multiplyQuaternionsFlat(c.values,w,y,0,c.values,w);else{const S=g-f*2;for(let M=0;M<S;++M)c.values[w+M]-=y[M]}}}return n.blendMode=FR,n}const rTe={arraySlice:ao,convertArray:yd,isTypedArray:ik,getKeyframeOrder:uq,sortedArray:sP,flattenJSON:sk,subclip:tTe,makeClipAdditive:nTe};class m0{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class dq extends m0{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:pd,endingEnd:pd}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case md:s=e,a=2*t-r;break;case cv:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case md:o=e,l=2*r-t;break;case cv:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const c=(r-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,g=this._weightNext,v=(r-t)/(i-t),y=v*v,x=y*v,_=-f*x+2*f*y-f*v,w=(1+f)*x+(-1.5-2*f)*y+(-.5+f)*v+1,S=(-1-g)*x+(1.5+g)*y+.5*v,M=g*x-g*y;for(let I=0;I!==a;++I)s[I]=_*o[u+I]+w*o[c+I]+S*o[l+I]+M*o[d+I];return s}}class ok extends m0{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-t)/(i-t),d=1-u;for(let f=0;f!==a;++f)s[f]=o[c+f]*d+o[l+f]*u;return s}}class hq extends m0{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class ta{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=yd(t,this.TimeBufferType),this.values=yd(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:yd(e.times,Array),values:yd(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new hq(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ok(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new dq(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case av:t=this.InterpolantFactoryMethodDiscrete;break;case lv:t=this.InterpolantFactoryMethodLinear;break;case hw:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return av;case this.InterpolantFactoryMethodLinear:return lv;case this.InterpolantFactoryMethodSmooth:return hw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=ao(r,s,o),this.values=ao(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&ik(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=ao(this.times),t=ao(this.values),r=this.getValueSize(),i=this.getInterpolation()===hw,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const d=a*r,f=d-r,g=d+r;for(let v=0;v!==r;++v){const y=t[d+v];if(y!==t[f+v]||y!==t[g+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*r,f=o*r;for(let g=0;g!==r;++g)t[f+g]=t[d+g]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=ao(e,0,o),this.values=ao(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=ao(this.times,0),t=ao(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}ta.prototype.TimeBufferType=Float32Array;ta.prototype.ValueBufferType=Float32Array;ta.prototype.DefaultInterpolation=lv;class xh extends ta{}xh.prototype.ValueTypeName="bool";xh.prototype.ValueBufferType=Array;xh.prototype.DefaultInterpolation=av;xh.prototype.InterpolantFactoryMethodLinear=void 0;xh.prototype.InterpolantFactoryMethodSmooth=void 0;class ak extends ta{}ak.prototype.ValueTypeName="color";class yv extends ta{}yv.prototype.ValueTypeName="number";class fq extends m0{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Di.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Tm extends ta{InterpolantFactoryMethodLinear(e){return new fq(this.times,this.values,this.getValueSize(),e)}}Tm.prototype.ValueTypeName="quaternion";Tm.prototype.DefaultInterpolation=lv;Tm.prototype.InterpolantFactoryMethodSmooth=void 0;class _h extends ta{}_h.prototype.ValueTypeName="string";_h.prototype.ValueBufferType=Array;_h.prototype.DefaultInterpolation=av;_h.prototype.InterpolantFactoryMethodLinear=void 0;_h.prototype.InterpolantFactoryMethodSmooth=void 0;class vv extends ta{}vv.prototype.ValueTypeName="vector";class xv{constructor(e,t=-1,r,i=Qb){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Ls(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(sTe(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(ta.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=uq(l);l=sP(l,1,u),c=sP(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new yv(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let f=i[d];f||(i[d]=f=[]),f.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,f,g,v,y){if(g.length!==0){const x=[],_=[];sk(g,x,_,v),x.length!==0&&y.push(new d(f,x,_))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const f=c[d].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const g={};let v;for(v=0;v<f.length;v++)if(f[v].morphTargets)for(let y=0;y<f[v].morphTargets.length;y++)g[f[v].morphTargets[y]]=-1;for(const y in g){const x=[],_=[];for(let w=0;w!==f[v].morphTargets.length;++w){const S=f[v];x.push(S.time),_.push(S.morphTarget===y?1:0)}i.push(new yv(".morphTargetInfluence["+y+"]",x,_))}l=g.length*o}else{const g=".bones["+t[d].name+"]";r(vv,g+".position",f,"pos",i),r(Tm,g+".quaternion",f,"rot",i),r(vv,g+".scale",f,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function iTe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return yv;case"vector":case"vector2":case"vector3":case"vector4":return vv;case"color":return ak;case"quaternion":return Tm;case"bool":case"boolean":return xh;case"string":return _h}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function sTe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=iTe(n.type);if(n.times===void 0){const t=[],r=[];sk(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const nh={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class lk{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,f=c.length;d<f;d+=2){const g=c[d],v=c[d+1];if(g.global&&(g.lastIndex=0),g.test(u))return v}return null}}}const pq=new lk;class zs{constructor(e){this.manager=e!==void 0?e:pq,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Ja={};class oTe extends Error{constructor(e,t){super(e),this.response=t}}class Ll extends zs{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=nh.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ja[e]!==void 0){Ja[e].push({onLoad:t,onProgress:r,onError:i});return}Ja[e]=[],Ja[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Ja[e],d=c.body.getReader(),f=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),g=f?parseInt(f):0,v=g!==0;let y=0;const x=new ReadableStream({start(_){w();function w(){d.read().then(({done:S,value:M})=>{if(S)_.close();else{y+=M.byteLength;const I=new ProgressEvent("progress",{lengthComputable:v,loaded:y,total:g});for(let L=0,P=u.length;L<P;L++){const T=u[L];T.onProgress&&T.onProgress(I)}_.enqueue(M),w()}})}}});return new Response(x)}else throw new oTe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),f=d&&d[1]?d[1].toLowerCase():void 0,g=new TextDecoder(f);return c.arrayBuffer().then(v=>g.decode(v))}}}).then(c=>{nh.add(e,c);const u=Ja[e];delete Ja[e];for(let d=0,f=u.length;d<f;d++){const g=u[d];g.onLoad&&g.onLoad(c)}}).catch(c=>{const u=Ja[e];if(u===void 0)throw this.manager.itemError(e),c;delete Ja[e];for(let d=0,f=u.length;d<f;d++){const g=u[d];g.onError&&g.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class aTe extends zs{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Ll(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=xv.parse(e[r]);t.push(i)}return t}}class lTe extends zs{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new XR,l=new Ll(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(d){l.load(e[d],function(f){const g=s.parse(f,!0);o[d]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},c+=1,c===6&&(g.mipmapCount===1&&(a.minFilter=wr),a.image=o,a.format=g.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let d=0,f=e.length;d<f;++d)u(d);else l.load(e,function(d){const f=s.parse(d,!0);if(f.isCubemap){const g=f.mipmaps.length/f.mipmapCount;for(let v=0;v<g;v++){o[v]={mipmaps:[]};for(let y=0;y<f.mipmapCount;y++)o[v].mipmaps.push(f.mipmaps[v*f.mipmapCount+y]),o[v].format=f.format,o[v].width=f.width,o[v].height=f.height}a.image=o}else a.image.width=f.width,a.image.height=f.height,a.mipmaps=f.mipmaps;f.mipmapCount===1&&(a.minFilter=wr),a.format=f.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class _v extends zs{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=nh.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=hv("img");function l(){u(),nh.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class cTe extends zs{constructor(e){super(e)}load(e,t,r,i){const s=new n0,o=new _v(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class uTe extends zs{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new fp,a=new Ll(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:ki,o.wrapT=c.wrapT!==void 0?c.wrapT:ki,o.magFilter=c.magFilter!==void 0?c.magFilter:wr,o.minFilter=c.minFilter!==void 0?c.minFilter:wr,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=cu),c.mipmapCount===1&&(o.minFilter=wr),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c))},r,i),o}}class cS extends zs{constructor(e){super(e)}load(e,t,r,i){const s=new Yn,o=new _v(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class bu extends vn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new nt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class mq extends bu{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(vn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new nt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const YT=new Ft,tj=new $,nj=new $;class ck{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ie(512,512),this.map=null,this.mapPass=null,this.matrix=new Ft,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Zb,this._frameExtents=new Ie(1,1),this._viewportCount=1,this._viewports=[new En(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;tj.setFromMatrixPosition(e.matrixWorld),t.position.copy(tj),nj.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(nj),t.updateMatrixWorld(),YT.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(YT),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(YT)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class dTe extends ck{constructor(){super(new Sr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=dv*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class gq extends bu{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(vn.DEFAULT_UP),this.updateMatrix(),this.target=new vn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new dTe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const rj=new Ft,xg=new $,XT=new $;class hTe extends ck{constructor(){super(new Sr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ie(4,2),this._viewportCount=6,this._viewports=[new En(2,1,1,1),new En(0,1,1,1),new En(3,1,1,1),new En(1,1,1,1),new En(3,0,1,1),new En(1,0,1,1)],this._cubeDirections=[new $(1,0,0),new $(-1,0,0),new $(0,0,1),new $(0,0,-1),new $(0,1,0),new $(0,-1,0)],this._cubeUps=[new $(0,1,0),new $(0,1,0),new $(0,1,0),new $(0,1,0),new $(0,0,1),new $(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),xg.setFromMatrixPosition(e.matrixWorld),r.position.copy(xg),XT.copy(r.position),XT.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(XT),r.updateMatrixWorld(),i.makeTranslation(-xg.x,-xg.y,-xg.z),rj.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(rj)}}class yq extends bu{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new hTe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class fTe extends ck{constructor(){super(new $c(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class vq extends bu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(vn.DEFAULT_UP),this.updateMatrix(),this.target=new vn,this.shadow=new fTe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class xq extends bu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class _q extends bu{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class wq{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new $)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class uS extends bu{constructor(e=new wq,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class dS extends zs{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new Ll(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=dS.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new nt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new nt().setHex(o.value);break;case"v2":i.uniforms[s].value=new Ie().fromArray(o.value);break;case"v3":i.uniforms[s].value=new $().fromArray(o.value);break;case"v4":i.uniforms[s].value=new En().fromArray(o.value);break;case"m3":i.uniforms[s].value=new ii().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Ft().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Ie().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ie().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:tq,SpriteMaterial:qR,RawShaderMaterial:nq,ShaderMaterial:Da,PointsMaterial:YR,MeshPhysicalMaterial:rq,MeshStandardMaterial:rk,MeshPhongMaterial:iq,MeshToonMaterial:sq,MeshNormalMaterial:oq,MeshLambertMaterial:aq,MeshDepthMaterial:GR,MeshDistanceMaterial:$R,MeshBasicMaterial:_u,MeshMatcapMaterial:lq,LineDashedMaterial:cq,LineBasicMaterial:Xi,Material:di};return new t[e]}}class oP{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class bq extends Wt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Sq extends zs{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Ll(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(g,v){if(t[v]!==void 0)return t[v];const x=g.interleavedBuffers[v],_=s(g,x.buffer),w=Hf(x.type,_),S=new iS(w,x.stride);return S.uuid=x.uuid,t[v]=S,S}function s(g,v){if(r[v]!==void 0)return r[v];const x=g.arrayBuffers[v],_=new Uint32Array(x).buffer;return r[v]=_,_}const o=e.isInstancedBufferGeometry?new bq:new Wt,a=e.data.index;if(a!==void 0){const g=Hf(a.type,a.array);o.setIndex(new kn(g,1))}const l=e.data.attributes;for(const g in l){const v=l[g];let y;if(v.isInterleavedBufferAttribute){const x=i(e.data,v.data);y=new eh(x,v.itemSize,v.offset,v.normalized)}else{const x=Hf(v.type,v.array),_=v.isInstancedBufferAttribute?Zp:kn;y=new _(x,v.itemSize,v.normalized)}v.name!==void 0&&(y.name=v.name),v.usage!==void 0&&y.setUsage(v.usage),v.updateRange!==void 0&&(y.updateRange.offset=v.updateRange.offset,y.updateRange.count=v.updateRange.count),o.setAttribute(g,y)}const c=e.data.morphAttributes;if(c)for(const g in c){const v=c[g],y=[];for(let x=0,_=v.length;x<_;x++){const w=v[x];let S;if(w.isInterleavedBufferAttribute){const M=i(e.data,w.data);S=new eh(M,w.itemSize,w.offset,w.normalized)}else{const M=Hf(w.type,w.array);S=new kn(M,w.itemSize,w.normalized)}w.name!==void 0&&(S.name=w.name),y.push(S)}o.morphAttributes[g]=y}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let g=0,v=d.length;g!==v;++g){const y=d[g];o.addGroup(y.start,y.count,y.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const g=new $;f.center!==void 0&&g.fromArray(f.center),o.boundingSphere=new yh(g,f.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class pTe extends zs{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?oP.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Ll(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?oP.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Ll(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let d=!1;for(const f in o)if(o[f].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Dd().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new sS().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new Sq;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in ej?a=ej[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new dS;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=xv.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:Hf(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new lk(t);s=new _v(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],f=d.url;if(Array.isArray(f)){const g=[];for(let v=0,y=f.length;v<y;v++){const x=f[v],_=a(x);_!==null&&(_ instanceof HTMLImageElement?g.push(_):g.push(new fp(_.data,_.width,_.height)))}i[d.uuid]=new gd(g)}else{const g=a(d.url);i[d.uuid]=new gd(g)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Hf(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new _v(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,f=c.length;d<f;d++){const g=c[d],v=await s(g);v!==null&&(v instanceof HTMLImageElement?u.push(v):u.push(new fp(v.data,v.width,v.height)))}r[l.uuid]=new gd(u)}else{const u=await s(l.url);r[l.uuid]=new gd(u)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new n0,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new fp:u=new Yn,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,mTe)),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],ij),u.wrapT=r(a.wrap[1],ij)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,sj)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,sj)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,t,r,i,s){let o;function a(f){return t[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),t[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const g=[];for(let v=0,y=f.length;v<y;v++){const x=f[v];r[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),g.push(r[x])}return g}return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),r[f]}}function c(f){return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),i[f]}let u,d;switch(e.type){case"Scene":o=new I1,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new nt(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new rS(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new nS(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Sr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new $c(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new xq(e.color,e.intensity);break;case"DirectionalLight":o=new vq(e.color,e.intensity);break;case"PointLight":o=new yq(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new _q(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new gq(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new mq(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new uS().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),d=l(e.material),o=new z$(u,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),d=l(e.material),o=new si(u,d);break;case"InstancedMesh":u=a(e.geometry),d=l(e.material);const f=e.count,g=e.instanceMatrix,v=e.instanceColor;o=new B$(u,d,f),o.instanceMatrix=new Zp(new Float32Array(g.array),16),v!==void 0&&(o.instanceColor=new Zp(new Float32Array(v.array),v.itemSize));break;case"LOD":o=new U$;break;case"Line":o=new du(a(e.geometry),l(e.material));break;case"LineLoop":o=new H$(a(e.geometry),l(e.material));break;case"LineSegments":o=new Oa(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new W$(a(e.geometry),l(e.material));break;case"Sprite":o=new V$(l(e.material));break;case"Group":o=new Gf;break;case"Bone":o=new KR;break;default:o=new vn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let g=0;g<f.length;g++)o.add(this.parseObject(f[g],t,r,i,s))}if(e.animations!==void 0){const f=e.animations;for(let g=0;g<f.length;g++){const v=f[g];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const f=e.levels;for(let g=0;g<f.length;g++){const v=f[g],y=o.getObjectByProperty("uuid",v.object);y!==void 0&&o.addLevel(y,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const mTe={UVMapping:Xb,CubeReflectionMapping:au,CubeRefractionMapping:lu,EquirectangularReflectionMapping:rv,EquirectangularRefractionMapping:iv,CubeUVReflectionMapping:vm},ij={RepeatWrapping:sv,ClampToEdgeWrapping:ki,MirroredRepeatWrapping:ov},sj={NearestFilter:xr,NearestMipmapNearestFilter:C1,NearestMipmapLinearFilter:fy,LinearFilter:wr,LinearMipmapNearestFilter:LR,LinearMipmapLinearFilter:cu};class gTe extends zs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=nh.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){nh.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let v_;class uk{static getContext(){return v_===void 0&&(v_=new(window.AudioContext||window.webkitAudioContext)),v_}static setContext(e){v_=e}}class yTe extends zs{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Ll(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);uk.getContext().decodeAudioData(l,function(u){t(u)})}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}}class vTe extends uS{constructor(e,t,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new nt().set(e),s=new nt().set(t),o=new $(i.r,i.g,i.b),a=new $(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class xTe extends uS{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const r=new nt().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const oj=new Ft,aj=new Ft,Gu=new Ft;class _Te{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Sr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Sr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Gu.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(kd*t.fov*.5)/t.zoom;let a,l;aj.elements[12]=-i,oj.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,Gu.elements[0]=2*t.near/(l-a),Gu.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Gu),a=-o*t.aspect-s,l=o*t.aspect-s,Gu.elements[0]=2*t.near/(l-a),Gu.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Gu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(aj),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(oj)}}class dk{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=lj(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=lj();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function lj(){return(typeof performance>"u"?Date:performance).now()}const $u=new $,cj=new Di,wTe=new $,qu=new $;class bTe extends vn{constructor(){super(),this.type="AudioListener",this.context=uk.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new dk}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose($u,cj,wTe),qu.set(0,0,-1).applyQuaternion(cj),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime($u.x,i),t.positionY.linearRampToValueAtTime($u.y,i),t.positionZ.linearRampToValueAtTime($u.z,i),t.forwardX.linearRampToValueAtTime(qu.x,i),t.forwardY.linearRampToValueAtTime(qu.y,i),t.forwardZ.linearRampToValueAtTime(qu.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition($u.x,$u.y,$u.z),t.setOrientation(qu.x,qu.y,qu.z,r.x,r.y,r.z)}}class Eq extends vn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Ku=new $,uj=new Di,STe=new $,Yu=new $;class ETe extends Eq{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ku,uj,STe),Yu.set(0,0,1).applyQuaternion(uj);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ku.x,r),t.positionY.linearRampToValueAtTime(Ku.y,r),t.positionZ.linearRampToValueAtTime(Ku.z,r),t.orientationX.linearRampToValueAtTime(Yu.x,r),t.orientationY.linearRampToValueAtTime(Yu.y,r),t.orientationZ.linearRampToValueAtTime(Yu.z,r)}else t.setPosition(Ku.x,Ku.y,Ku.z),t.setOrientation(Yu.x,Yu.y,Yu.z)}}class TTe{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class Tq{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){Di.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;Di.multiplyQuaternionsFlat(e,o,e,t,e,r),Di.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const hk="\\[\\]\\.:\\/",MTe=new RegExp("["+hk+"]","g"),fk="[^"+hk+"]",ATe="[^"+hk.replace("\\.","")+"]",CTe=/((?:WC+[\/:])*)/.source.replace("WC",fk),PTe=/(WCOD+)?/.source.replace("WCOD",ATe),ITe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",fk),RTe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",fk),kTe=new RegExp("^"+CTe+PTe+ITe+RTe+"$"),NTe=["material","materials","bones","map"];class DTe{constructor(e,t,r){const i=r||pn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class pn{constructor(e,t,r){this.path=t,this.parsedPath=r||pn.parseTrackName(t),this.node=pn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new pn.Composite(e,t,r):new pn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(MTe,"")}static parseTrackName(e){const t=kTe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);NTe.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=pn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}pn.Composite=DTe;pn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};pn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};pn.prototype.GetterByBindingType=[pn.prototype._getValue_direct,pn.prototype._getValue_array,pn.prototype._getValue_arrayElement,pn.prototype._getValue_toArray];pn.prototype.SetterByBindingTypeAndVersioning=[[pn.prototype._setValue_direct,pn.prototype._setValue_direct_setNeedsUpdate,pn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[pn.prototype._setValue_array,pn.prototype._setValue_array_setNeedsUpdate,pn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[pn.prototype._setValue_arrayElement,pn.prototype._setValue_arrayElement_setNeedsUpdate,pn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[pn.prototype._setValue_fromArray,pn.prototype._setValue_fromArray_setNeedsUpdate,pn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class LTe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ls(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const f=arguments[u],g=f.uuid;let v=t[g];if(v===void 0){v=l++,t[g]=v,e.push(f);for(let y=0,x=o;y!==x;++y)s[y].push(new pn(f,r[y],i[y]))}else if(v<c){a=e[v];const y=--c,x=e[y];t[x.uuid]=v,e[v]=x,t[g]=y,e[y]=f;for(let _=0,w=o;_!==w;++_){const S=s[_],M=S[y];let I=S[v];S[v]=M,I===void 0&&(I=new pn(f,r[_],i[_])),S[y]=I}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const d=s++,f=e[d];t[f.uuid]=u,e[u]=f,t[c]=d,e[d]=l;for(let g=0,v=i;g!==v;++g){const y=r[g],x=y[d],_=y[u];y[u]=x,y[d]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,d=t[u];if(d!==void 0)if(delete t[u],d<s){const f=--s,g=e[f],v=--o,y=e[v];t[g.uuid]=d,e[d]=g,t[y.uuid]=f,e[f]=y,e.pop();for(let x=0,_=i;x!==_;++x){const w=r[x],S=w[f],M=w[v];w[d]=S,w[f]=M,w.pop()}}else{const f=--o,g=e[f];f>0&&(t[g.uuid]=d),e[d]=g,e.pop();for(let v=0,y=i;v!==y;++v){const x=r[v];x[d]=x[f],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(d);for(let f=u,g=l.length;f!==g;++f){const v=l[f];d[f]=new pn(v,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class OTe{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:pd,endingEnd:pd};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=m$,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case FR:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case Qb:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===g$;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===p$){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=md,i.endingEnd=md):(e?i.endingStart=this.zeroSlopeAtStart?md:pd:i.endingStart=cv,t?i.endingEnd=this.zeroSlopeAtEnd?md:pd:i.endingEnd=cv)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const FTe=new Float32Array(1);class jTe extends Vl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==s;++d){const f=i[d],g=f.name;let v=u[g];if(v!==void 0)++v.referenceCount,o[d]=v;else{if(v=o[d],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,g));continue}const y=t&&t._propertyBindings[d].binding.parsedPath;v=new Tq(pn.create(r,g,y),f.ValueTypeName,f.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,g),o[d]=v}a[d].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete d[f],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new ok(new Float32Array(2),new Float32Array(2),1,FTe),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?xv.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=Qb),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new OTe(this,o,t,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?xv.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class pk{constructor(e){this.value=e}clone(){return new pk(this.value.clone===void 0?this.value:this.value.clone())}}let VTe=0;class UTe extends Vl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:VTe++}),this.name="",this.usage=uv,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class zTe extends iS{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class BTe{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Mq{constructor(e,t,r=0,i=1/0){this.ray=new xm(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Nd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return aP(e,this,r,t),r.sort(dj),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)aP(e[i],this,r,t);return r.sort(dj),r}}function dj(n,e){return n.distance-e.distance}function aP(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)aP(i[s],e,t,!0)}}class lP{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(br(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class HTe{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const hj=new Ie;class WTe{constructor(e=new Ie(1/0,1/0),t=new Ie(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=hj.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,hj).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const fj=new $,x_=new $;class GTe{constructor(e=new $,t=new $){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){fj.subVectors(e,this.start),x_.subVectors(this.end,this.start);const r=x_.dot(x_);let s=x_.dot(fj)/r;return t&&(s=br(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const pj=new $;class $Te extends vn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new Wt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new ut(i,3));const s=new Xi({fog:!1,toneMapped:!1});this.cone=new Oa(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),pj.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(pj),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const oc=new $,__=new Ft,QT=new Ft;class qTe extends Oa{constructor(e){const t=Aq(e),r=new Wt,i=[],s=[],o=new nt(0,0,1),a=new nt(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new ut(i,3)),r.setAttribute("color",new ut(s,3));const l=new Xi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");QT.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(__.multiplyMatrices(QT,a.matrixWorld),oc.setFromMatrixPosition(__),i.setXYZ(o,oc.x,oc.y,oc.z),__.multiplyMatrices(QT,a.parent.matrixWorld),oc.setFromMatrixPosition(__),i.setXYZ(o+1,oc.x,oc.y,oc.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Aq(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,Aq(n.children[t]));return e}class KTe extends si{constructor(e,t,r){const i=new Em(t,4,2),s=new _u({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const YTe=new $,mj=new nt,gj=new nt;class XTe extends vn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Sm(t);i.rotateY(Math.PI*.5),this.material=new _u({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new kn(o,3)),this.add(new si(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");mj.copy(this.light.color),gj.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?mj:gj;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(YTe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class QTe extends Oa{constructor(e=10,t=10,r=4473924,i=8947848){r=new nt(r),i=new nt(i);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let f=0,g=0,v=-a;f<=t;f++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const y=f===s?r:i;y.toArray(c,g),g+=3,y.toArray(c,g),g+=3,y.toArray(c,g),g+=3,y.toArray(c,g),g+=3}const u=new Wt;u.setAttribute("position",new ut(l,3)),u.setAttribute("color",new ut(c,3));const d=new Xi({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class JTe extends Oa{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new nt(s),o=new nt(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const f=d/t*(Math.PI*2),g=Math.sin(f)*e,v=Math.cos(f)*e;a.push(0,0,0),a.push(g,0,v);const y=d&1?s:o;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let d=0;d<r;d++){const f=d&1?s:o,g=e-e/r*d;for(let v=0;v<i;v++){let y=v/i*(Math.PI*2),x=Math.sin(y)*g,_=Math.cos(y)*g;a.push(x,0,_),l.push(f.r,f.g,f.b),y=(v+1)/i*(Math.PI*2),x=Math.sin(y)*g,_=Math.cos(y)*g,a.push(x,0,_),l.push(f.r,f.g,f.b)}}const c=new Wt;c.setAttribute("position",new ut(a,3)),c.setAttribute("color",new ut(l,3));const u=new Xi({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const yj=new $,w_=new $,vj=new $;class ZTe extends vn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Wt;i.setAttribute("position",new ut([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Xi({fog:!1,toneMapped:!1});this.lightPlane=new du(i,s),this.add(this.lightPlane),i=new Wt,i.setAttribute("position",new ut([0,0,0,0,0,1],3)),this.targetLine=new du(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),yj.setFromMatrixPosition(this.light.matrixWorld),w_.setFromMatrixPosition(this.light.target.matrixWorld),vj.subVectors(w_,yj),this.lightPlane.lookAt(w_),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(w_),this.targetLine.scale.z=vj.length()}}const b_=new $,sr=new t0;class eMe extends Oa{constructor(e){const t=new Wt,r=new Xi({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,y){l(v),l(y)}function l(v){i.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}t.setAttribute("position",new ut(i,3)),t.setAttribute("color",new ut(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new nt(16755200),u=new nt(16711680),d=new nt(43775),f=new nt(16777215),g=new nt(3355443);this.setColors(c,u,d,f,g)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;sr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),pr("c",t,e,sr,0,0,-1),pr("t",t,e,sr,0,0,1),pr("n1",t,e,sr,-1,-1,-1),pr("n2",t,e,sr,r,-1,-1),pr("n3",t,e,sr,-1,i,-1),pr("n4",t,e,sr,r,i,-1),pr("f1",t,e,sr,-1,-1,1),pr("f2",t,e,sr,r,-1,1),pr("f3",t,e,sr,-1,i,1),pr("f4",t,e,sr,r,i,1),pr("u1",t,e,sr,r*.7,i*1.1,-1),pr("u2",t,e,sr,-1*.7,i*1.1,-1),pr("u3",t,e,sr,0,i*2,-1),pr("cf1",t,e,sr,-1,0,1),pr("cf2",t,e,sr,r,0,1),pr("cf3",t,e,sr,0,-1,1),pr("cf4",t,e,sr,0,i,1),pr("cn1",t,e,sr,-1,0,-1),pr("cn2",t,e,sr,r,0,-1),pr("cn3",t,e,sr,0,-1,-1),pr("cn4",t,e,sr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function pr(n,e,t,r,i,s,o){b_.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],b_.x,b_.y,b_.z)}}const S_=new gh;class tMe extends Oa{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Wt;s.setIndex(new kn(r,1)),s.setAttribute("position",new kn(i,3)),super(s,new Xi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&S_.setFromObject(this.object),S_.isEmpty())return;const t=S_.min,r=S_.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class nMe extends Oa{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Wt;s.setIndex(new kn(r,1)),s.setAttribute("position",new ut(i,3)),super(s,new Xi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class rMe extends du{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Wt;o.setAttribute("position",new ut(s,3)),o.computeBoundingSphere(),super(o,new Xi({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Wt;l.setAttribute("position",new ut(a,3)),l.computeBoundingSphere(),this.add(new si(l,new _u({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const xj=new $;let E_,JT;class iMe extends vn{constructor(e=new $(0,0,1),t=new $(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",E_===void 0&&(E_=new Wt,E_.setAttribute("position",new ut([0,0,0,0,1,0],3)),JT=new vh(0,.5,1,5,1),JT.translate(0,-.5,0)),this.position.copy(t),this.line=new du(E_,new Xi({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new si(JT,new _u({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{xj.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(xj,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class sMe extends Oa{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Wt;i.setAttribute("position",new ut(t,3)),i.setAttribute("color",new ut(r,3));const s=new Xi({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new nt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class oMe{constructor(){this.type="ShapePath",this.color=new nt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new fv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const w=[];for(let S=0,M=_.length;S<M;S++){const I=_[S],L=new Dd;L.curves=I.curves,w.push(L)}return w}function r(_,w){const S=w.length;let M=!1;for(let I=S-1,L=0;L<S;I=L++){let P=w[I],T=w[L],C=T.x-P.x,k=T.y-P.y;if(Math.abs(k)>Number.EPSILON){if(k<0&&(P=w[L],C=-C,T=w[I],k=-k),_.y<P.y||_.y>T.y)continue;if(_.y===P.y){if(_.x===P.x)return!0}else{const O=k*(_.x-P.x)-C*(_.y-P.y);if(O===0)return!0;if(O<0)continue;M=!M}}else{if(_.y!==P.y)continue;if(T.x<=_.x&&_.x<=P.x||P.x<=_.x&&_.x<=T.x)return!0}}return M}const i=Ia.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Dd,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const d=[],f=[];let g=[],v=0,y;f[v]=void 0,g[v]=[];for(let _=0,w=s.length;_<w;_++)a=s[_],y=a.getPoints(),o=i(y),o=e?!o:o,o?(!u&&f[v]&&v++,f[v]={s:new Dd,p:y},f[v].s.curves=a.curves,u&&v++,g[v]=[]):g[v].push({h:a,p:y[0]});if(!f[0])return t(s);if(f.length>1){let _=!1,w=0;for(let S=0,M=f.length;S<M;S++)d[S]=[];for(let S=0,M=f.length;S<M;S++){const I=g[S];for(let L=0;L<I.length;L++){const P=I[L];let T=!0;for(let C=0;C<f.length;C++)r(P.p,f[C].p)&&(S!==C&&w++,T?(T=!1,d[C].push(P)):_=!0);T&&d[S].push(P)}}w>0&&_===!1&&(g=d)}let x;for(let _=0,w=f.length;_<w;_++){l=f[_].s,c.push(l),x=g[_];for(let S=0,M=x.length;S<M;S++)l.holes.push(x[S].h)}return c}}const ol=aMe();function aMe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function lMe(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=br(n,-65504,65504),ol.floatView[0]=n;const e=ol.uint32View[0],t=e>>23&511;return ol.baseTable[t]+((e&8388607)>>ol.shiftTable[t])}function cMe(n){const e=n>>10;return ol.uint32View[0]=ol.mantissaTable[ol.offsetTable[e]+(n&1023)]+ol.exponentTable[e],ol.floatView[0]}const uMe={toHalfFloat:lMe,fromHalfFloat:cMe};class dMe extends wu{constructor(e,t,r,i,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,r,i,s,o)}}class hMe extends r0{constructor(e,t,r,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,r,i)}}class fMe extends i0{constructor(e,t,r,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,r,i)}}class pMe extends s0{constructor(e,t,r,i,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,r,i,s,o,a)}}class mMe extends vh{constructor(e,t,r,i,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,r,i,s,o,a,l)}}class gMe extends o0{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class yMe extends a0{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class vMe extends l0{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class xMe extends bm{constructor(e,t,r,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,r,i)}}class _Me extends Sm{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class wMe extends _m{constructor(e,t,r,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,r,i)}}class bMe extends Ul{constructor(e,t,r,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,r,i)}}class SMe extends c0{constructor(e,t,r,i,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,r,i,s,o)}}class EMe extends u0{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class TMe extends Em{constructor(e,t,r,i,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,r,i,s,o,a)}}class MMe extends d0{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class AMe extends h0{constructor(e,t,r,i,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,r,i,s)}}class CMe extends f0{constructor(e,t,r,i,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,r,i,s,o)}}class PMe extends p0{constructor(e,t,r,i,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,r,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Kb}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Kb);const IMe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:DR,AddEquation:sd,AddOperation:K7,AdditiveAnimationBlendMode:FR,AdditiveBlending:EC,AlphaFormat:i$,AlwaysDepth:z7,AlwaysStencilFunc:_$,AmbientLight:xq,AmbientLightProbe:xTe,AnimationClip:xv,AnimationLoader:aTe,AnimationMixer:jTe,AnimationObjectGroup:LTe,AnimationUtils:rTe,ArcCurve:G$,ArrayCamera:L$,ArrowHelper:iMe,Audio:Eq,AudioAnalyser:TTe,AudioContext:uk,AudioListener:bTe,AudioLoader:yTe,AxesHelper:sMe,BackSide:ps,BasicDepthPacking:y$,BasicShadowMap:A7,Bone:KR,BooleanKeyframeTrack:xh,Box2:WTe,Box3:gh,Box3Helper:nMe,BoxBufferGeometry:dMe,BoxGeometry:wu,BoxHelper:tMe,BufferAttribute:kn,BufferGeometry:Wt,BufferGeometryLoader:Sq,ByteType:Z7,Cache:nh,Camera:t0,CameraHelper:eMe,CanvasTexture:AEe,CapsuleBufferGeometry:hMe,CapsuleGeometry:r0,CatmullRomCurve3:$$,CineonToneMapping:Q7,CircleBufferGeometry:fMe,CircleGeometry:i0,ClampToEdgeWrapping:ki,Clock:dk,Color:nt,ColorKeyframeTrack:ak,ColorManagement:Ti,CompressedArrayTexture:MEe,CompressedTexture:XR,CompressedTextureLoader:lTe,ConeBufferGeometry:pMe,ConeGeometry:s0,CubeCamera:A$,CubeReflectionMapping:au,CubeRefractionMapping:lu,CubeTexture:n0,CubeTextureLoader:cTe,CubeUVReflectionMapping:vm,CubicBezierCurve:JR,CubicBezierCurve3:q$,CubicInterpolant:dq,CullFaceBack:SC,CullFaceFront:M7,CullFaceFrontBack:bxe,CullFaceNone:T7,Curve:ea,CurvePath:Y$,CustomBlending:C7,CustomToneMapping:J7,CylinderBufferGeometry:mMe,CylinderGeometry:vh,Cylindrical:HTe,Data3DTexture:zR,DataArrayTexture:Jb,DataTexture:fp,DataTextureLoader:uTe,DataUtils:uMe,DecrementStencilOp:Lxe,DecrementWrapStencilOp:Fxe,DefaultLoadingManager:pq,DepthFormat:Gc,DepthStencilFormat:Zd,DepthTexture:O$,DirectionalLight:vq,DirectionalLightHelper:ZTe,DiscreteInterpolant:hq,DisplayP3ColorSpace:jR,DodecahedronBufferGeometry:gMe,DodecahedronGeometry:o0,DoubleSide:dl,DstAlphaFactor:L7,DstColorFactor:F7,DynamicCopyUsage:Jxe,DynamicDrawUsage:$xe,DynamicReadUsage:Yxe,EdgesGeometry:X$,EllipseCurve:oS,EqualDepth:H7,EqualStencilFunc:zxe,EquirectangularReflectionMapping:rv,EquirectangularRefractionMapping:iv,Euler:e0,EventDispatcher:Vl,ExtrudeBufferGeometry:yMe,ExtrudeGeometry:a0,FileLoader:Ll,Float16BufferAttribute:V_e,Float32BufferAttribute:ut,Float64BufferAttribute:U_e,FloatType:hl,Fog:rS,FogExp2:nS,FramebufferTexture:TEe,FrontSide:Nl,Frustum:Zb,GLBufferAttribute:BTe,GLSL1:e_e,GLSL3:JC,GreaterDepth:G7,GreaterEqualDepth:W7,GreaterEqualStencilFunc:Gxe,GreaterStencilFunc:Hxe,GridHelper:QTe,Group:Gf,HalfFloatType:Xp,HemisphereLight:mq,HemisphereLightHelper:XTe,HemisphereLightProbe:vTe,IcosahedronBufferGeometry:vMe,IcosahedronGeometry:l0,ImageBitmapLoader:gTe,ImageLoader:_v,ImageUtils:UR,IncrementStencilOp:Dxe,IncrementWrapStencilOp:Oxe,InstancedBufferAttribute:Zp,InstancedBufferGeometry:bq,InstancedInterleavedBuffer:zTe,InstancedMesh:B$,Int16BufferAttribute:F_e,Int32BufferAttribute:j_e,Int8BufferAttribute:D_e,IntType:t$,InterleavedBuffer:iS,InterleavedBufferAttribute:eh,Interpolant:m0,InterpolateDiscrete:av,InterpolateLinear:lv,InterpolateSmooth:hw,InvertStencilOp:jxe,KeepStencilOp:fw,KeyframeTrack:ta,LOD:U$,LatheBufferGeometry:xMe,LatheGeometry:bm,Layers:Nd,LessDepth:B7,LessEqualDepth:A1,LessEqualStencilFunc:Bxe,LessStencilFunc:Uxe,Light:bu,LightProbe:uS,Line:du,Line3:GTe,LineBasicMaterial:Xi,LineCurve:aS,LineCurve3:K$,LineDashedMaterial:cq,LineLoop:H$,LineSegments:Oa,LinearEncoding:uu,LinearFilter:wr,LinearInterpolant:ok,LinearMipMapLinearFilter:Axe,LinearMipMapNearestFilter:Mxe,LinearMipmapLinearFilter:cu,LinearMipmapNearestFilter:LR,LinearSRGBColorSpace:Qp,LinearToneMapping:Y7,Loader:zs,LoaderUtils:oP,LoadingManager:lk,LoopOnce:p$,LoopPingPong:g$,LoopRepeat:m$,LuminanceAlphaFormat:o$,LuminanceFormat:s$,MOUSE:nd,Material:di,MaterialLoader:dS,MathUtils:p_e,Matrix3:ii,Matrix4:Ft,MaxEquation:CC,Mesh:si,MeshBasicMaterial:_u,MeshDepthMaterial:GR,MeshDistanceMaterial:$R,MeshLambertMaterial:aq,MeshMatcapMaterial:lq,MeshNormalMaterial:oq,MeshPhongMaterial:iq,MeshPhysicalMaterial:rq,MeshStandardMaterial:rk,MeshToonMaterial:sq,MinEquation:AC,MirroredRepeatWrapping:ov,MixOperation:q7,MultiplyBlending:MC,MultiplyOperation:Zv,NearestFilter:xr,NearestMipMapLinearFilter:Txe,NearestMipMapNearestFilter:Exe,NearestMipmapLinearFilter:fy,NearestMipmapNearestFilter:C1,NeverDepth:U7,NeverStencilFunc:Vxe,NoBlending:xl,NoColorSpace:Rxe,NoToneMapping:Wo,NormalAnimationBlendMode:Qb,NormalBlending:Id,NotEqualDepth:$7,NotEqualStencilFunc:Wxe,NumberKeyframeTrack:yv,Object3D:vn,ObjectLoader:pTe,ObjectSpaceNormalMap:x$,OctahedronBufferGeometry:_Me,OctahedronGeometry:Sm,OneFactor:k7,OneMinusDstAlphaFactor:O7,OneMinusDstColorFactor:j7,OneMinusSrcAlphaFactor:NR,OneMinusSrcColorFactor:D7,OrthographicCamera:$c,PCFShadowMap:Yb,PCFSoftShadowMap:hy,PMREMGenerator:eP,Path:fv,PerspectiveCamera:Sr,Plane:il,PlaneBufferGeometry:wMe,PlaneGeometry:_m,PlaneHelper:rMe,PointLight:yq,PointLightHelper:KTe,Points:W$,PointsMaterial:YR,PolarGridHelper:JTe,PolyhedronBufferGeometry:bMe,PolyhedronGeometry:Ul,PositionalAudio:ETe,PropertyBinding:pn,PropertyMixer:Tq,QuadraticBezierCurve:ZR,QuadraticBezierCurve3:ek,Quaternion:Di,QuaternionKeyframeTrack:Tm,QuaternionLinearInterpolant:fq,RED_GREEN_RGTC2_Format:XC,RED_RGTC1_Format:f$,REVISION:Kb,RGBADepthPacking:v$,RGBAFormat:as,RGBAIntegerFormat:d$,RGBA_ASTC_10x10_Format:$C,RGBA_ASTC_10x5_Format:HC,RGBA_ASTC_10x6_Format:WC,RGBA_ASTC_10x8_Format:GC,RGBA_ASTC_12x10_Format:qC,RGBA_ASTC_12x12_Format:KC,RGBA_ASTC_4x4_Format:LC,RGBA_ASTC_5x4_Format:OC,RGBA_ASTC_5x5_Format:FC,RGBA_ASTC_6x5_Format:jC,RGBA_ASTC_6x6_Format:VC,RGBA_ASTC_8x5_Format:UC,RGBA_ASTC_8x6_Format:zC,RGBA_ASTC_8x8_Format:BC,RGBA_BPTC_Format:dw,RGBA_ETC2_EAC_Format:DC,RGBA_PVRTC_2BPPV1_Format:kC,RGBA_PVRTC_4BPPV1_Format:RC,RGBA_S3TC_DXT1_Format:lw,RGBA_S3TC_DXT3_Format:cw,RGBA_S3TC_DXT5_Format:uw,RGB_ETC1_Format:h$,RGB_ETC2_Format:NC,RGB_PVRTC_2BPPV1_Format:IC,RGB_PVRTC_4BPPV1_Format:PC,RGB_S3TC_DXT1_Format:aw,RGFormat:c$,RGIntegerFormat:u$,RawShaderMaterial:nq,Ray:xm,Raycaster:Mq,RectAreaLight:_q,RedFormat:a$,RedIntegerFormat:l$,ReinhardToneMapping:X7,RepeatWrapping:sv,ReplaceStencilOp:Nxe,ReverseSubtractEquation:I7,RingBufferGeometry:SMe,RingGeometry:c0,SIGNED_RED_GREEN_RGTC2_Format:QC,SIGNED_RED_RGTC1_Format:YC,SRGBColorSpace:ko,Scene:I1,ShaderChunk:Bt,ShaderLib:Lo,ShaderMaterial:Da,ShadowMaterial:tq,Shape:Dd,ShapeBufferGeometry:EMe,ShapeGeometry:u0,ShapePath:oMe,ShapeUtils:Ia,ShortType:e$,Skeleton:sS,SkeletonHelper:qTe,SkinnedMesh:z$,Source:gd,Sphere:yh,SphereBufferGeometry:TMe,SphereGeometry:Em,Spherical:lP,SphericalHarmonics3:wq,SplineCurve:tk,SpotLight:gq,SpotLightHelper:$Te,Sprite:V$,SpriteMaterial:qR,SrcAlphaFactor:kR,SrcAlphaSaturateFactor:V7,SrcColorFactor:N7,StaticCopyUsage:Qxe,StaticDrawUsage:uv,StaticReadUsage:Kxe,StereoCamera:_Te,StreamCopyUsage:Zxe,StreamDrawUsage:qxe,StreamReadUsage:Xxe,StringKeyframeTrack:_h,SubtractEquation:P7,SubtractiveBlending:TC,TOUCH:rd,TangentSpaceNormalMap:xu,TetrahedronBufferGeometry:MMe,TetrahedronGeometry:d0,Texture:Yn,TextureLoader:cS,TorusBufferGeometry:AMe,TorusGeometry:h0,TorusKnotBufferGeometry:CMe,TorusKnotGeometry:f0,Triangle:ho,TriangleFanDrawMode:Ixe,TriangleStripDrawMode:Pxe,TrianglesDrawMode:Cxe,TubeBufferGeometry:PMe,TubeGeometry:p0,TwoPassDoubleSide:Sxe,UVMapping:Xb,Uint16BufferAttribute:BR,Uint32BufferAttribute:HR,Uint8BufferAttribute:L_e,Uint8ClampedBufferAttribute:O_e,Uniform:pk,UniformsGroup:UTe,UniformsLib:Ge,UniformsUtils:M$,UnsignedByteType:Dl,UnsignedInt248Type:Rd,UnsignedIntType:Pc,UnsignedShort4444Type:n$,UnsignedShort5551Type:r$,UnsignedShortType:OR,VSMShadowMap:fd,Vector2:Ie,Vector3:$,Vector4:En,VectorKeyframeTrack:vv,VideoTexture:EEe,WebGL1Renderer:F$,WebGL3DRenderTarget:E_e,WebGLArrayRenderTarget:S_e,WebGLCubeRenderTarget:C$,WebGLMultipleRenderTargets:T_e,WebGLRenderTarget:Qo,WebGLRenderer:tS,WebGLUtils:D$,WireframeGeometry:eq,WrapAroundEnding:cv,ZeroCurvatureEnding:pd,ZeroFactor:R7,ZeroSlopeEnding:md,ZeroStencilOp:kxe,_SRGBAFormat:P1,sRGBEncoding:On},Symbol.toStringTag,{value:"Module"}));var Cq={exports:{}},wh={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */wh.ConcurrentRoot=1;wh.ContinuousEventPriority=4;wh.DefaultEventPriority=16;wh.DiscreteEventPriority=1;wh.IdleEventPriority=536870912;wh.LegacyRoot=0;Cq.exports=wh;var qf=Cq.exports;function RMe(n){let e;const t=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const f=e;e=u?d:Object.assign({},e,d),t.forEach(g=>g(e,f))}},i=()=>e,s=(c,u=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=u(e);function g(){const v=u(e);if(!d(f,v)){const y=f;c(f=v,y)}}return t.add(g),()=>t.delete(g)},l={setState:r,getState:i,subscribe:(c,u,d)=>u||d?s(c,u,d):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const kMe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),_j=kMe?R.useEffect:R.useLayoutEffect;function NMe(n){const e=typeof n=="function"?RMe(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=R.useReducer(x=>x+1,0),o=e.getState(),a=R.useRef(o),l=R.useRef(r),c=R.useRef(i),u=R.useRef(!1),d=R.useRef();d.current===void 0&&(d.current=r(o));let f,g=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(f=r(o),g=!i(d.current,f)),_j(()=>{g&&(d.current=f),a.current=o,l.current=r,c.current=i,u.current=!1});const v=R.useRef(o);_j(()=>{const x=()=>{try{const w=e.getState(),S=l.current(w);c.current(d.current,S)||(a.current=w,d.current=S,s())}catch{u.current=!0,s()}},_=e.subscribe(x);return e.getState()!==v.current&&x(),_},[]);const y=g?f:d.current;return R.useDebugValue(y),y};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var Pq={exports:{}},ZT={exports:{}},eM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wj;function DMe(){return wj||(wj=1,function(n){function e(z,G){var q=z.length;z.push(G);e:for(;0<q;){var se=q-1>>>1,J=z[se];if(0<i(J,G))z[se]=G,z[q]=J,q=se;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var G=z[0],q=z.pop();if(q!==G){z[0]=q;e:for(var se=0,J=z.length,he=J>>>1;se<he;){var _e=2*(se+1)-1,re=z[_e],Y=_e+1,ae=z[Y];if(0>i(re,q))Y<J&&0>i(ae,re)?(z[se]=ae,z[Y]=q,se=Y):(z[se]=re,z[_e]=q,se=_e);else if(Y<J&&0>i(ae,q))z[se]=ae,z[Y]=q,se=Y;else break e}}return G}function i(z,G){var q=z.sortIndex-G.sortIndex;return q!==0?q:z.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,g=!1,v=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var G=t(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=z)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(c)}}function M(z){if(y=!1,S(z),!v)if(t(l)!==null)v=!0,ne(I);else{var G=t(c);G!==null&&oe(M,G.startTime-z)}}function I(z,G){v=!1,y&&(y=!1,_(T),T=-1),g=!0;var q=f;try{for(S(G),d=t(l);d!==null&&(!(d.expirationTime>G)||z&&!O());){var se=d.callback;if(typeof se=="function"){d.callback=null,f=d.priorityLevel;var J=se(d.expirationTime<=G);G=n.unstable_now(),typeof J=="function"?d.callback=J:d===t(l)&&r(l),S(G)}else r(l);d=t(l)}if(d!==null)var he=!0;else{var _e=t(c);_e!==null&&oe(M,_e.startTime-G),he=!1}return he}finally{d=null,f=q,g=!1}}var L=!1,P=null,T=-1,C=5,k=-1;function O(){return!(n.unstable_now()-k<C)}function U(){if(P!==null){var z=n.unstable_now();k=z;var G=!0;try{G=P(!0,z)}finally{G?V():(L=!1,P=null)}}else L=!1}var V;if(typeof w=="function")V=function(){w(U)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,Z=B.port2;B.port1.onmessage=U,V=function(){Z.postMessage(null)}}else V=function(){x(U,0)};function ne(z){P=z,L||(L=!0,V())}function oe(z,G){T=x(function(){z(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){v||g||(v=!0,ne(I))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(z){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var q=f;f=G;try{return z()}finally{f=q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var q=f;f=z;try{return G()}finally{f=q}},n.unstable_scheduleCallback=function(z,G,q){var se=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?se+q:se):q=se,z){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=q+J,z={id:u++,callback:G,priorityLevel:z,startTime:q,expirationTime:J,sortIndex:-1},q>se?(z.sortIndex=q,e(c,z),t(l)===null&&z===t(c)&&(y?(_(T),T=-1):y=!0,oe(M,q-se))):(z.sortIndex=J,e(l,z),v||g||(v=!0,ne(I))),z},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(z){var G=f;return function(){var q=f;f=G;try{return z.apply(this,arguments)}finally{f=q}}}}(eM)),eM}var bj;function LMe(){return bj||(bj=1,ZT.exports=DMe()),ZT.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OMe=function(e){var t={},r=R,i=LMe(),s=Object.assign;function o(h){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+h,E=1;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E]);return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),v=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),M=Symbol.for("react.offscreen"),I=Symbol.iterator;function L(h){return h===null||typeof h!="object"?null:(h=I&&h[I]||h["@@iterator"],typeof h=="function"?h:null)}function P(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case u:return"Fragment";case c:return"Portal";case f:return"Profiler";case d:return"StrictMode";case x:return"Suspense";case _:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case v:return(h.displayName||"Context")+".Consumer";case g:return(h._context.displayName||"Context")+".Provider";case y:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case w:return p=h.displayName||null,p!==null?p:P(h.type)||"Memo";case S:p=h._payload,h=h._init;try{return P(h(p))}catch{}}return null}function T(h){var p=h.type;switch(h.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=p.render,h=h.displayName||h.name||"",p.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(p);case 8:return p===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function C(h){var p=h,E=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,p.flags&4098&&(E=p.return),h=p.return;while(h)}return p.tag===3?E:null}function k(h){if(C(h)!==h)throw Error(o(188))}function O(h){var p=h.alternate;if(!p){if(p=C(h),p===null)throw Error(o(188));return p!==h?null:h}for(var E=h,A=p;;){var N=E.return;if(N===null)break;var j=N.alternate;if(j===null){if(A=N.return,A!==null){E=A;continue}break}if(N.child===j.child){for(j=N.child;j;){if(j===E)return k(N),h;if(j===A)return k(N),p;j=j.sibling}throw Error(o(188))}if(E.return!==A.return)E=N,A=j;else{for(var Q=!1,ue=N.child;ue;){if(ue===E){Q=!0,E=N,A=j;break}if(ue===A){Q=!0,A=N,E=j;break}ue=ue.sibling}if(!Q){for(ue=j.child;ue;){if(ue===E){Q=!0,E=j,A=N;break}if(ue===A){Q=!0,A=j,E=N;break}ue=ue.sibling}if(!Q)throw Error(o(189))}}if(E.alternate!==A)throw Error(o(190))}if(E.tag!==3)throw Error(o(188));return E.stateNode.current===E?h:p}function U(h){return h=O(h),h!==null?V(h):null}function V(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var p=V(h);if(p!==null)return p;h=h.sibling}return null}function B(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var p=B(h);if(p!==null)return p}h=h.sibling}return null}var Z=Array.isArray,ne=e.getPublicInstance,oe=e.getRootHostContext,z=e.getChildHostContext,G=e.prepareForCommit,q=e.resetAfterCommit,se=e.createInstance,J=e.appendInitialChild,he=e.finalizeInitialChildren,_e=e.prepareUpdate,re=e.shouldSetTextContent,Y=e.createTextInstance,ae=e.scheduleTimeout,Se=e.cancelTimeout,Re=e.noTimeout,Ae=e.isPrimaryRenderer,Te=e.supportsMutation,te=e.supportsPersistence,le=e.supportsHydration,we=e.getInstanceFromNode,Be=e.preparePortalMount,Fe=e.getCurrentEventPriority,Je=e.detachDeletedInstance,Ze=e.supportsMicrotasks,et=e.scheduleMicrotask,At=e.supportsTestSelectors,Ot=e.findFiberRoot,X=e.getBoundingRect,W=e.getTextContent,ye=e.isHiddenSubtree,Ve=e.matchAccessibilityRole,Oe=e.setFocusIfFocusable,je=e.setupIntersectionObserver,rt=e.appendChild,$e=e.appendChildToContainer,Ce=e.commitTextUpdate,ct=e.commitMount,Ye=e.commitUpdate,ht=e.insertBefore,dt=e.insertInContainerBefore,at=e.removeChild,ie=e.removeChildFromContainer,De=e.resetTextContent,Ke=e.hideInstance,ee=e.hideTextInstance,ve=e.unhideInstance,ke=e.unhideTextInstance,We=e.clearContainer,Qe=e.cloneInstance,jt=e.createContainerChildSet,Xt=e.appendChildToContainerChildSet,on=e.finalizeContainerChildren,Wn=e.replaceContainerChildren,Zt=e.cloneHiddenInstance,Gn=e.cloneHiddenTextInstance,hn=e.canHydrateInstance,bh=e.canHydrateTextInstance,Fa=e.canHydrateSuspenseInstance,na=e.isSuspenseInstancePending,K=e.isSuspenseInstanceFallback,me=e.registerSuspenseInstanceRetry,Ee=e.getNextHydratableSibling,pe=e.getFirstHydratableChild,Pe=e.getFirstHydratableChildWithinContainer,ft=e.getFirstHydratableChildWithinSuspenseInstance,Tt=e.hydrateInstance,Pt=e.hydrateTextInstance,It=e.hydrateSuspenseInstance,kt=e.getNextHydratableInstanceAfterSuspenseInstance,Ut=e.commitHydratedContainer,$t=e.commitHydratedSuspenseInstance,Nn=e.clearSuspenseBoundary,Dr=e.clearSuspenseBoundaryFromContainer,Qi=e.shouldDeleteUnhydratedTailInstances,Bs=e.didNotMatchHydratedContainerTextInstance,$n=e.didNotMatchHydratedTextInstance,Nt;function Hs(h){if(Nt===void 0)try{throw Error()}catch(E){var p=E.stack.trim().match(/\n( *(at )?)/);Nt=p&&p[1]||""}return`
`+Nt+h}var Dn=!1;function Xr(h,p){if(!h||Dn)return"";Dn=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(He){var A=He}Reflect.construct(h,[],p)}else{try{p.call()}catch(He){A=He}h.call(p.prototype)}else{try{throw Error()}catch(He){A=He}h()}}catch(He){if(He&&A&&typeof He.stack=="string"){for(var N=He.stack.split(`
`),j=A.stack.split(`
`),Q=N.length-1,ue=j.length-1;1<=Q&&0<=ue&&N[Q]!==j[ue];)ue--;for(;1<=Q&&0<=ue;Q--,ue--)if(N[Q]!==j[ue]){if(Q!==1||ue!==1)do if(Q--,ue--,0>ue||N[Q]!==j[ue]){var Me=`
`+N[Q].replace(" at new "," at ");return h.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",h.displayName)),Me}while(1<=Q&&0<=ue);break}}}finally{Dn=!1,Error.prepareStackTrace=E}return(h=h?h.displayName||h.name:"")?Hs(h):""}var Ws=Object.prototype.hasOwnProperty,ms=[],Gs=-1;function An(h){return{current:h}}function en(h){0>Gs||(h.current=ms[Gs],ms[Gs]=null,Gs--)}function fn(h,p){Gs++,ms[Gs]=h.current,h.current=p}var Ln={},qn=An(Ln),Lr=An(!1),gs=Ln;function zl(h,p){var E=h.type.contextTypes;if(!E)return Ln;var A=h.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===p)return A.__reactInternalMemoizedMaskedChildContext;var N={},j;for(j in E)N[j]=p[j];return A&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=p,h.__reactInternalMemoizedMaskedChildContext=N),N}function hi(h){return h=h.childContextTypes,h!=null}function Su(){en(Lr),en(qn)}function Mm(h,p,E){if(qn.current!==Ln)throw Error(o(168));fn(qn,p),fn(Lr,E)}function v0(h,p,E){var A=h.stateNode;if(p=p.childContextTypes,typeof A.getChildContext!="function")return E;A=A.getChildContext();for(var N in A)if(!(N in p))throw Error(o(108,T(h)||"Unknown",N));return s({},E,A)}function $s(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Ln,gs=qn.current,fn(qn,h),fn(Lr,Lr.current),!0}function qs(h,p,E){var A=h.stateNode;if(!A)throw Error(o(169));E?(h=v0(h,p,gs),A.__reactInternalMemoizedMergedChildContext=h,en(Lr),en(qn),fn(qn,h)):en(Lr),fn(Lr,E)}var fi=Math.clz32?Math.clz32:Cn,Sh=Math.log,x0=Math.LN2;function Cn(h){return h>>>=0,h===0?32:31-(Sh(h)/x0|0)|0}var ja=64,ra=4194304;function xo(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Eh(h,p){var E=h.pendingLanes;if(E===0)return 0;var A=0,N=h.suspendedLanes,j=h.pingedLanes,Q=E&268435455;if(Q!==0){var ue=Q&~N;ue!==0?A=xo(ue):(j&=Q,j!==0&&(A=xo(j)))}else Q=E&~N,Q!==0?A=xo(Q):j!==0&&(A=xo(j));if(A===0)return 0;if(p!==0&&p!==A&&!(p&N)&&(N=A&-A,j=p&-p,N>=j||N===16&&(j&4194240)!==0))return p;if(A&4&&(A|=E&16),p=h.entangledLanes,p!==0)for(h=h.entanglements,p&=A;0<p;)E=31-fi(p),N=1<<E,A|=h[E],p&=~N;return A}function _0(h,p){switch(h){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hS(h,p){for(var E=h.suspendedLanes,A=h.pingedLanes,N=h.expirationTimes,j=h.pendingLanes;0<j;){var Q=31-fi(j),ue=1<<Q,Me=N[Q];Me===-1?(!(ue&E)||ue&A)&&(N[Q]=_0(ue,p)):Me<=p&&(h.expiredLanes|=ue),j&=~ue}}function Am(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function Cm(h){for(var p=[],E=0;31>E;E++)p.push(h);return p}function Eu(h,p,E){h.pendingLanes|=p,p!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,p=31-fi(p),h[p]=E}function Tu(h,p){var E=h.pendingLanes&~p;h.pendingLanes=p,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=p,h.mutableReadLanes&=p,h.entangledLanes&=p,p=h.entanglements;var A=h.eventTimes;for(h=h.expirationTimes;0<E;){var N=31-fi(E),j=1<<N;p[N]=0,A[N]=-1,h[N]=-1,E&=~j}}function Ks(h,p){var E=h.entangledLanes|=p;for(h=h.entanglements;E;){var A=31-fi(E),N=1<<A;N&p|h[A]&p&&(h[A]|=p),E&=~N}}var an=0;function Pm(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var Th=i.unstable_scheduleCallback,Va=i.unstable_cancelCallback,fS=i.unstable_shouldYield,pS=i.unstable_requestPaint,Er=i.unstable_now,Ys=i.unstable_ImmediatePriority,mS=i.unstable_UserBlockingPriority,Im=i.unstable_NormalPriority,Mh=i.unstable_IdlePriority,Ua=null,ys=null;function Mu(h){if(ys&&typeof ys.onCommitFiberRoot=="function")try{ys.onCommitFiberRoot(Ua,h,void 0,(h.current.flags&128)===128)}catch{}}function Au(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var vs=typeof Object.is=="function"?Object.is:Au,xs=null,Pn=!1,Rm=!1;function w0(h){xs===null?xs=[h]:xs.push(h)}function b0(h){Pn=!0,w0(h)}function _s(){if(!Rm&&xs!==null){Rm=!0;var h=0,p=an;try{var E=xs;for(an=1;h<E.length;h++){var A=E[h];do A=A(!0);while(A!==null)}xs=null,Pn=!1}catch(N){throw xs!==null&&(xs=xs.slice(h+1)),Th(Ys,_s),N}finally{an=p,Rm=!1}}return null}var S0=a.ReactCurrentBatchConfig;function za(h,p){if(vs(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var E=Object.keys(h),A=Object.keys(p);if(E.length!==A.length)return!1;for(A=0;A<E.length;A++){var N=E[A];if(!Ws.call(p,N)||!vs(h[N],p[N]))return!1}return!0}function E0(h){switch(h.tag){case 5:return Hs(h.type);case 16:return Hs("Lazy");case 13:return Hs("Suspense");case 19:return Hs("SuspenseList");case 0:case 2:case 15:return h=Xr(h.type,!1),h;case 11:return h=Xr(h.type.render,!1),h;case 1:return h=Xr(h.type,!0),h;default:return""}}function hr(h,p){if(h&&h.defaultProps){p=s({},p),h=h.defaultProps;for(var E in h)p[E]===void 0&&(p[E]=h[E]);return p}return p}var Cu=An(null),Ah=null,Xs=null,Ch=null;function Pu(){Ch=Xs=Ah=null}function Iu(h,p,E){Ae?(fn(Cu,p._currentValue),p._currentValue=E):(fn(Cu,p._currentValue2),p._currentValue2=E)}function Ph(h){var p=Cu.current;en(Cu),Ae?h._currentValue=p:h._currentValue2=p}function Bl(h,p,E){for(;h!==null;){var A=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,A!==null&&(A.childLanes|=p)):A!==null&&(A.childLanes&p)!==p&&(A.childLanes|=p),h===E)break;h=h.return}}function Hl(h,p){Ah=h,Ch=Xs=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&p&&(Ss=!0),h.firstContext=null)}function Fi(h){var p=Ae?h._currentValue:h._currentValue2;if(Ch!==h)if(h={context:h,memoizedValue:p,next:null},Xs===null){if(Ah===null)throw Error(o(308));Xs=h,Ah.dependencies={lanes:0,firstContext:h}}else Xs=Xs.next=h;return p}var pi=null,_o=!1;function Ih(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rh(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function ws(h,p){return{eventTime:h,lane:p,tag:0,payload:null,callback:null,next:null}}function wo(h,p){var E=h.updateQueue;E!==null&&(E=E.shared,Cr!==null&&h.mode&1&&!(qt&2)?(h=E.interleaved,h===null?(p.next=p,pi===null?pi=[E]:pi.push(E)):(p.next=h.next,h.next=p),E.interleaved=p):(h=E.pending,h===null?p.next=p:(p.next=h.next,h.next=p),E.pending=p))}function Ba(h,p,E){if(p=p.updateQueue,p!==null&&(p=p.shared,(E&4194240)!==0)){var A=p.lanes;A&=h.pendingLanes,E|=A,p.lanes=E,Ks(h,E)}}function km(h,p){var E=h.updateQueue,A=h.alternate;if(A!==null&&(A=A.updateQueue,E===A)){var N=null,j=null;if(E=E.firstBaseUpdate,E!==null){do{var Q={eventTime:E.eventTime,lane:E.lane,tag:E.tag,payload:E.payload,callback:E.callback,next:null};j===null?N=j=Q:j=j.next=Q,E=E.next}while(E!==null);j===null?N=j=p:j=j.next=p}else N=j=p;E={baseState:A.baseState,firstBaseUpdate:N,lastBaseUpdate:j,shared:A.shared,effects:A.effects},h.updateQueue=E;return}h=E.lastBaseUpdate,h===null?E.firstBaseUpdate=p:h.next=p,E.lastBaseUpdate=p}function Ru(h,p,E,A){var N=h.updateQueue;_o=!1;var j=N.firstBaseUpdate,Q=N.lastBaseUpdate,ue=N.shared.pending;if(ue!==null){N.shared.pending=null;var Me=ue,He=Me.next;Me.next=null,Q===null?j=He:Q.next=He,Q=Me;var st=h.alternate;st!==null&&(st=st.updateQueue,ue=st.lastBaseUpdate,ue!==Q&&(ue===null?st.firstBaseUpdate=He:ue.next=He,st.lastBaseUpdate=Me))}if(j!==null){var Dt=N.baseState;Q=0,st=He=Me=null,ue=j;do{var xt=ue.lane,In=ue.eventTime;if((A&xt)===xt){st!==null&&(st=st.next={eventTime:In,lane:0,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null});e:{var mt=h,xi=ue;switch(xt=p,In=E,xi.tag){case 1:if(mt=xi.payload,typeof mt=="function"){Dt=mt.call(In,Dt,xt);break e}Dt=mt;break e;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=xi.payload,xt=typeof mt=="function"?mt.call(In,Dt,xt):mt,xt==null)break e;Dt=s({},Dt,xt);break e;case 2:_o=!0}}ue.callback!==null&&ue.lane!==0&&(h.flags|=64,xt=N.effects,xt===null?N.effects=[ue]:xt.push(ue))}else In={eventTime:In,lane:xt,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},st===null?(He=st=In,Me=Dt):st=st.next=In,Q|=xt;if(ue=ue.next,ue===null){if(ue=N.shared.pending,ue===null)break;xt=ue,ue=xt.next,xt.next=null,N.lastBaseUpdate=xt,N.shared.pending=null}}while(!0);if(st===null&&(Me=Dt),N.baseState=Me,N.firstBaseUpdate=He,N.lastBaseUpdate=st,p=N.shared.interleaved,p!==null){N=p;do Q|=N.lane,N=N.next;while(N!==p)}else j===null&&(N.shared.lanes=0);Uh|=Q,h.lanes=Q,h.memoizedState=Dt}}function ia(h,p,E){if(h=p.effects,p.effects=null,h!==null)for(p=0;p<h.length;p++){var A=h[p],N=A.callback;if(N!==null){if(A.callback=null,A=E,typeof N!="function")throw Error(o(191,N));N.call(A)}}}var Nm=new r.Component().refs;function kh(h,p,E,A){p=h.memoizedState,E=E(A,p),E=E==null?p:s({},p,E),h.memoizedState=E,h.lanes===0&&(h.updateQueue.baseState=E)}var ku={isMounted:function(h){return(h=h._reactInternals)?C(h)===h:!1},enqueueSetState:function(h,p,E){h=h._reactInternals;var A=Ui(),N=$l(h),j=ws(A,N);j.payload=p,E!=null&&(j.callback=E),wo(h,j),p=Zs(h,N,A),p!==null&&Ba(p,h,N)},enqueueReplaceState:function(h,p,E){h=h._reactInternals;var A=Ui(),N=$l(h),j=ws(A,N);j.tag=1,j.payload=p,E!=null&&(j.callback=E),wo(h,j),p=Zs(h,N,A),p!==null&&Ba(p,h,N)},enqueueForceUpdate:function(h,p){h=h._reactInternals;var E=Ui(),A=$l(h),N=ws(E,A);N.tag=2,p!=null&&(N.callback=p),wo(h,N),p=Zs(h,A,E),p!==null&&Ba(p,h,A)}};function Dm(h,p,E,A,N,j,Q){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(A,j,Q):p.prototype&&p.prototype.isPureReactComponent?!za(E,A)||!za(N,j):!0}function Nu(h,p,E){var A=!1,N=Ln,j=p.contextType;return typeof j=="object"&&j!==null?j=Fi(j):(N=hi(p)?gs:qn.current,A=p.contextTypes,j=(A=A!=null)?zl(h,N):Ln),p=new p(E,j),h.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=ku,h.stateNode=p,p._reactInternals=h,A&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=N,h.__reactInternalMemoizedMaskedChildContext=j),p}function mi(h,p,E,A){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(E,A),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(E,A),p.state!==h&&ku.enqueueReplaceState(p,p.state,null)}function Nh(h,p,E,A){var N=h.stateNode;N.props=E,N.state=h.memoizedState,N.refs=Nm,Ih(h);var j=p.contextType;typeof j=="object"&&j!==null?N.context=Fi(j):(j=hi(p)?gs:qn.current,N.context=zl(h,j)),N.state=h.memoizedState,j=p.getDerivedStateFromProps,typeof j=="function"&&(kh(h,p,j,E),N.state=h.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(p=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),p!==N.state&&ku.enqueueReplaceState(N,N.state,null),Ru(h,E,N,A),N.state=h.memoizedState),typeof N.componentDidMount=="function"&&(h.flags|=4194308)}var Ha=[],bs=0,b=null,D=0,F=[],H=0,fe=null,xe=1,ze="";function ln(h,p){Ha[bs++]=D,Ha[bs++]=b,b=h,D=p}function Tr(h,p,E){F[H++]=xe,F[H++]=ze,F[H++]=fe,fe=h;var A=xe;h=ze;var N=32-fi(A)-1;A&=~(1<<N),E+=1;var j=32-fi(p)+N;if(30<j){var Q=N-N%5;j=(A&(1<<Q)-1).toString(32),A>>=Q,N-=Q,xe=1<<32-fi(p)+N|E<<N|A,ze=j+h}else xe=1<<j|E<<N|A,ze=h}function tn(h){h.return!==null&&(ln(h,1),Tr(h,1,0))}function Mr(h){for(;h===b;)b=Ha[--bs],Ha[bs]=null,D=Ha[--bs],Ha[bs]=null;for(;h===fe;)fe=F[--H],F[H]=null,ze=F[--H],F[H]=null,xe=F[--H],F[H]=null}var xn=null,Ar=null,nn=!1,sa=!1,ji=null;function xk(h,p){var E=eo(5,null,null,0);E.elementType="DELETED",E.stateNode=p,E.return=h,p=h.deletions,p===null?(h.deletions=[E],h.flags|=16):p.push(E)}function _k(h,p){switch(h.tag){case 5:return p=hn(p,h.type,h.pendingProps),p!==null?(h.stateNode=p,xn=h,Ar=pe(p),!0):!1;case 6:return p=bh(p,h.pendingProps),p!==null?(h.stateNode=p,xn=h,Ar=null,!0):!1;case 13:if(p=Fa(p),p!==null){var E=fe!==null?{id:xe,overflow:ze}:null;return h.memoizedState={dehydrated:p,treeContext:E,retryLane:1073741824},E=eo(18,null,null,0),E.stateNode=p,E.return=h,h.child=E,xn=h,Ar=null,!0}return!1;default:return!1}}function gS(h){return(h.mode&1)!==0&&(h.flags&128)===0}function yS(h){if(nn){var p=Ar;if(p){var E=p;if(!_k(h,p)){if(gS(h))throw Error(o(418));p=Ee(E);var A=xn;p&&_k(h,p)?xk(A,E):(h.flags=h.flags&-4097|2,nn=!1,xn=h)}}else{if(gS(h))throw Error(o(418));h.flags=h.flags&-4097|2,nn=!1,xn=h}}}function wk(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;xn=h}function Lm(h){if(!le||h!==xn)return!1;if(!nn)return wk(h),nn=!0,!1;if(h.tag!==3&&(h.tag!==5||Qi(h.type)&&!re(h.type,h.memoizedProps))){var p=Ar;if(p){if(gS(h)){for(h=Ar;h;)h=Ee(h);throw Error(o(418))}for(;p;)xk(h,p),p=Ee(p)}}if(wk(h),h.tag===13){if(!le)throw Error(o(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));Ar=kt(h)}else Ar=xn?Ee(h.stateNode):null;return!0}function Dh(){le&&(Ar=xn=null,sa=nn=!1)}function vS(h){ji===null?ji=[h]:ji.push(h)}function Om(h,p,E){if(h=E.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(E._owner){if(E=E._owner,E){if(E.tag!==1)throw Error(o(309));var A=E.stateNode}if(!A)throw Error(o(147,h));var N=A,j=""+h;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===j?p.ref:(p=function(Q){var ue=N.refs;ue===Nm&&(ue=N.refs={}),Q===null?delete ue[j]:ue[j]=Q},p._stringRef=j,p)}if(typeof h!="string")throw Error(o(284));if(!E._owner)throw Error(o(290,h))}return h}function T0(h,p){throw h=Object.prototype.toString.call(p),Error(o(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h))}function bk(h){var p=h._init;return p(h._payload)}function Sk(h){function p(ge,de){if(h){var be=ge.deletions;be===null?(ge.deletions=[de],ge.flags|=16):be.push(de)}}function E(ge,de){if(!h)return null;for(;de!==null;)p(ge,de),de=de.sibling;return null}function A(ge,de){for(ge=new Map;de!==null;)de.key!==null?ge.set(de.key,de):ge.set(de.index,de),de=de.sibling;return ge}function N(ge,de){return ge=Kl(ge,de),ge.index=0,ge.sibling=null,ge}function j(ge,de,be){return ge.index=be,h?(be=ge.alternate,be!==null?(be=be.index,be<de?(ge.flags|=2,de):be):(ge.flags|=2,de)):(ge.flags|=1048576,de)}function Q(ge){return h&&ge.alternate===null&&(ge.flags|=2),ge}function ue(ge,de,be,Xe){return de===null||de.tag!==6?(de=tE(be,ge.mode,Xe),de.return=ge,de):(de=N(de,be),de.return=ge,de)}function Me(ge,de,be,Xe){var pt=be.type;return pt===u?st(ge,de,be.props.children,Xe,be.key):de!==null&&(de.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===S&&bk(pt)===de.type)?(Xe=N(de,be.props),Xe.ref=Om(ge,de,be),Xe.return=ge,Xe):(Xe=nx(be.type,be.key,be.props,null,ge.mode,Xe),Xe.ref=Om(ge,de,be),Xe.return=ge,Xe)}function He(ge,de,be,Xe){return de===null||de.tag!==4||de.stateNode.containerInfo!==be.containerInfo||de.stateNode.implementation!==be.implementation?(de=nE(be,ge.mode,Xe),de.return=ge,de):(de=N(de,be.children||[]),de.return=ge,de)}function st(ge,de,be,Xe,pt){return de===null||de.tag!==7?(de=Uu(be,ge.mode,Xe,pt),de.return=ge,de):(de=N(de,be),de.return=ge,de)}function Dt(ge,de,be){if(typeof de=="string"&&de!==""||typeof de=="number")return de=tE(""+de,ge.mode,be),de.return=ge,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case l:return be=nx(de.type,de.key,de.props,null,ge.mode,be),be.ref=Om(ge,null,de),be.return=ge,be;case c:return de=nE(de,ge.mode,be),de.return=ge,de;case S:var Xe=de._init;return Dt(ge,Xe(de._payload),be)}if(Z(de)||L(de))return de=Uu(de,ge.mode,be,null),de.return=ge,de;T0(ge,de)}return null}function xt(ge,de,be,Xe){var pt=de!==null?de.key:null;if(typeof be=="string"&&be!==""||typeof be=="number")return pt!==null?null:ue(ge,de,""+be,Xe);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case l:return be.key===pt?Me(ge,de,be,Xe):null;case c:return be.key===pt?He(ge,de,be,Xe):null;case S:return pt=be._init,xt(ge,de,pt(be._payload),Xe)}if(Z(be)||L(be))return pt!==null?null:st(ge,de,be,Xe,null);T0(ge,be)}return null}function In(ge,de,be,Xe,pt){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return ge=ge.get(be)||null,ue(de,ge,""+Xe,pt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case l:return ge=ge.get(Xe.key===null?be:Xe.key)||null,Me(de,ge,Xe,pt);case c:return ge=ge.get(Xe.key===null?be:Xe.key)||null,He(de,ge,Xe,pt);case S:var zt=Xe._init;return In(ge,de,be,zt(Xe._payload),pt)}if(Z(Xe)||L(Xe))return ge=ge.get(be)||null,st(de,ge,Xe,pt,null);T0(de,Xe)}return null}function mt(ge,de,be,Xe){for(var pt=null,zt=null,Lt=de,gn=de=0,Gr=null;Lt!==null&&gn<be.length;gn++){Lt.index>gn?(Gr=Lt,Lt=null):Gr=Lt.sibling;var yn=xt(ge,Lt,be[gn],Xe);if(yn===null){Lt===null&&(Lt=Gr);break}h&&Lt&&yn.alternate===null&&p(ge,Lt),de=j(yn,de,gn),zt===null?pt=yn:zt.sibling=yn,zt=yn,Lt=Gr}if(gn===be.length)return E(ge,Lt),nn&&ln(ge,gn),pt;if(Lt===null){for(;gn<be.length;gn++)Lt=Dt(ge,be[gn],Xe),Lt!==null&&(de=j(Lt,de,gn),zt===null?pt=Lt:zt.sibling=Lt,zt=Lt);return nn&&ln(ge,gn),pt}for(Lt=A(ge,Lt);gn<be.length;gn++)Gr=In(Lt,ge,gn,be[gn],Xe),Gr!==null&&(h&&Gr.alternate!==null&&Lt.delete(Gr.key===null?gn:Gr.key),de=j(Gr,de,gn),zt===null?pt=Gr:zt.sibling=Gr,zt=Gr);return h&&Lt.forEach(function(Yl){return p(ge,Yl)}),nn&&ln(ge,gn),pt}function xi(ge,de,be,Xe){var pt=L(be);if(typeof pt!="function")throw Error(o(150));if(be=pt.call(be),be==null)throw Error(o(151));for(var zt=pt=null,Lt=de,gn=de=0,Gr=null,yn=be.next();Lt!==null&&!yn.done;gn++,yn=be.next()){Lt.index>gn?(Gr=Lt,Lt=null):Gr=Lt.sibling;var Yl=xt(ge,Lt,yn.value,Xe);if(Yl===null){Lt===null&&(Lt=Gr);break}h&&Lt&&Yl.alternate===null&&p(ge,Lt),de=j(Yl,de,gn),zt===null?pt=Yl:zt.sibling=Yl,zt=Yl,Lt=Gr}if(yn.done)return E(ge,Lt),nn&&ln(ge,gn),pt;if(Lt===null){for(;!yn.done;gn++,yn=be.next())yn=Dt(ge,yn.value,Xe),yn!==null&&(de=j(yn,de,gn),zt===null?pt=yn:zt.sibling=yn,zt=yn);return nn&&ln(ge,gn),pt}for(Lt=A(ge,Lt);!yn.done;gn++,yn=be.next())yn=In(Lt,ge,gn,yn.value,Xe),yn!==null&&(h&&yn.alternate!==null&&Lt.delete(yn.key===null?gn:yn.key),de=j(yn,de,gn),zt===null?pt=yn:zt.sibling=yn,zt=yn);return h&&Lt.forEach(function(MK){return p(ge,MK)}),nn&&ln(ge,gn),pt}function to(ge,de,be,Xe){if(typeof be=="object"&&be!==null&&be.type===u&&be.key===null&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case l:e:{for(var pt=be.key,zt=de;zt!==null;){if(zt.key===pt){if(pt=be.type,pt===u){if(zt.tag===7){E(ge,zt.sibling),de=N(zt,be.props.children),de.return=ge,ge=de;break e}}else if(zt.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===S&&bk(pt)===zt.type){E(ge,zt.sibling),de=N(zt,be.props),de.ref=Om(ge,zt,be),de.return=ge,ge=de;break e}E(ge,zt);break}else p(ge,zt);zt=zt.sibling}be.type===u?(de=Uu(be.props.children,ge.mode,Xe,be.key),de.return=ge,ge=de):(Xe=nx(be.type,be.key,be.props,null,ge.mode,Xe),Xe.ref=Om(ge,de,be),Xe.return=ge,ge=Xe)}return Q(ge);case c:e:{for(zt=be.key;de!==null;){if(de.key===zt)if(de.tag===4&&de.stateNode.containerInfo===be.containerInfo&&de.stateNode.implementation===be.implementation){E(ge,de.sibling),de=N(de,be.children||[]),de.return=ge,ge=de;break e}else{E(ge,de);break}else p(ge,de);de=de.sibling}de=nE(be,ge.mode,Xe),de.return=ge,ge=de}return Q(ge);case S:return zt=be._init,to(ge,de,zt(be._payload),Xe)}if(Z(be))return mt(ge,de,be,Xe);if(L(be))return xi(ge,de,be,Xe);T0(ge,be)}return typeof be=="string"&&be!==""||typeof be=="number"?(be=""+be,de!==null&&de.tag===6?(E(ge,de.sibling),de=N(de,be),de.return=ge,ge=de):(E(ge,de),de=tE(be,ge.mode,Xe),de.return=ge,ge=de),Q(ge)):E(ge,de)}return to}var Lh=Sk(!0),Ek=Sk(!1),Fm={},Qs=An(Fm),jm=An(Fm),Oh=An(Fm);function oa(h){if(h===Fm)throw Error(o(174));return h}function xS(h,p){fn(Oh,p),fn(jm,h),fn(Qs,Fm),h=oe(p),en(Qs),fn(Qs,h)}function Fh(){en(Qs),en(jm),en(Oh)}function Tk(h){var p=oa(Oh.current),E=oa(Qs.current);p=z(E,h.type,p),E!==p&&(fn(jm,h),fn(Qs,p))}function _S(h){jm.current===h&&(en(Qs),en(jm))}var Xn=An(0);function M0(h){for(var p=h;p!==null;){if(p.tag===13){var E=p.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||na(E)||K(E)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var wS=[];function bS(){for(var h=0;h<wS.length;h++){var p=wS[h];Ae?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}wS.length=0}var A0=a.ReactCurrentDispatcher,Js=a.ReactCurrentBatchConfig,jh=0,ir=null,gi=null,Wr=null,C0=!1,Vm=!1,Um=0,Qq=0;function yi(){throw Error(o(321))}function SS(h,p){if(p===null)return!1;for(var E=0;E<p.length&&E<h.length;E++)if(!vs(h[E],p[E]))return!1;return!0}function ES(h,p,E,A,N,j){if(jh=j,ir=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,A0.current=h===null||h.memoizedState===null?tK:nK,h=E(A,N),Vm){j=0;do{if(Vm=!1,Um=0,25<=j)throw Error(o(301));j+=1,Wr=gi=null,p.updateQueue=null,A0.current=rK,h=E(A,N)}while(Vm)}if(A0.current=N0,p=gi!==null&&gi.next!==null,jh=0,Wr=gi=ir=null,C0=!1,p)throw Error(o(300));return h}function TS(){var h=Um!==0;return Um=0,h}function Wa(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wr===null?ir.memoizedState=Wr=h:Wr=Wr.next=h,Wr}function aa(){if(gi===null){var h=ir.alternate;h=h!==null?h.memoizedState:null}else h=gi.next;var p=Wr===null?ir.memoizedState:Wr.next;if(p!==null)Wr=p,gi=h;else{if(h===null)throw Error(o(310));gi=h,h={memoizedState:gi.memoizedState,baseState:gi.baseState,baseQueue:gi.baseQueue,queue:gi.queue,next:null},Wr===null?ir.memoizedState=Wr=h:Wr=Wr.next=h}return Wr}function Du(h,p){return typeof p=="function"?p(h):p}function P0(h){var p=aa(),E=p.queue;if(E===null)throw Error(o(311));E.lastRenderedReducer=h;var A=gi,N=A.baseQueue,j=E.pending;if(j!==null){if(N!==null){var Q=N.next;N.next=j.next,j.next=Q}A.baseQueue=N=j,E.pending=null}if(N!==null){j=N.next,A=A.baseState;var ue=Q=null,Me=null,He=j;do{var st=He.lane;if((jh&st)===st)Me!==null&&(Me=Me.next={lane:0,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null}),A=He.hasEagerState?He.eagerState:h(A,He.action);else{var Dt={lane:st,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null};Me===null?(ue=Me=Dt,Q=A):Me=Me.next=Dt,ir.lanes|=st,Uh|=st}He=He.next}while(He!==null&&He!==j);Me===null?Q=A:Me.next=ue,vs(A,p.memoizedState)||(Ss=!0),p.memoizedState=A,p.baseState=Q,p.baseQueue=Me,E.lastRenderedState=A}if(h=E.interleaved,h!==null){N=h;do j=N.lane,ir.lanes|=j,Uh|=j,N=N.next;while(N!==h)}else N===null&&(E.lanes=0);return[p.memoizedState,E.dispatch]}function I0(h){var p=aa(),E=p.queue;if(E===null)throw Error(o(311));E.lastRenderedReducer=h;var A=E.dispatch,N=E.pending,j=p.memoizedState;if(N!==null){E.pending=null;var Q=N=N.next;do j=h(j,Q.action),Q=Q.next;while(Q!==N);vs(j,p.memoizedState)||(Ss=!0),p.memoizedState=j,p.baseQueue===null&&(p.baseState=j),E.lastRenderedState=j}return[j,A]}function Mk(){}function Ak(h,p){var E=ir,A=aa(),N=p(),j=!vs(A.memoizedState,N);if(j&&(A.memoizedState=N,Ss=!0),A=A.queue,Bm(Ik.bind(null,E,A,h),[h]),A.getSnapshot!==p||j||Wr!==null&&Wr.memoizedState.tag&1){if(E.flags|=2048,zm(9,Pk.bind(null,E,A,N,p),void 0,null),Cr===null)throw Error(o(349));jh&30||Ck(E,p,N)}return N}function Ck(h,p,E){h.flags|=16384,h={getSnapshot:p,value:E},p=ir.updateQueue,p===null?(p={lastEffect:null,stores:null},ir.updateQueue=p,p.stores=[h]):(E=p.stores,E===null?p.stores=[h]:E.push(h))}function Pk(h,p,E,A){p.value=E,p.getSnapshot=A,Rk(p)&&Zs(h,1,-1)}function Ik(h,p,E){return E(function(){Rk(p)&&Zs(h,1,-1)})}function Rk(h){var p=h.getSnapshot;h=h.value;try{var E=p();return!vs(h,E)}catch{return!0}}function MS(h){var p=Wa();return typeof h=="function"&&(h=h()),p.memoizedState=p.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Du,lastRenderedState:h},p.queue=h,h=h.dispatch=eK.bind(null,ir,h),[p.memoizedState,h]}function zm(h,p,E,A){return h={tag:h,create:p,destroy:E,deps:A,next:null},p=ir.updateQueue,p===null?(p={lastEffect:null,stores:null},ir.updateQueue=p,p.lastEffect=h.next=h):(E=p.lastEffect,E===null?p.lastEffect=h.next=h:(A=E.next,E.next=h,h.next=A,p.lastEffect=h)),h}function kk(){return aa().memoizedState}function R0(h,p,E,A){var N=Wa();ir.flags|=h,N.memoizedState=zm(1|p,E,void 0,A===void 0?null:A)}function k0(h,p,E,A){var N=aa();A=A===void 0?null:A;var j=void 0;if(gi!==null){var Q=gi.memoizedState;if(j=Q.destroy,A!==null&&SS(A,Q.deps)){N.memoizedState=zm(p,E,j,A);return}}ir.flags|=h,N.memoizedState=zm(1|p,E,j,A)}function AS(h,p){return R0(8390656,8,h,p)}function Bm(h,p){return k0(2048,8,h,p)}function Nk(h,p){return k0(4,2,h,p)}function Dk(h,p){return k0(4,4,h,p)}function Lk(h,p){if(typeof p=="function")return h=h(),p(h),function(){p(null)};if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function Ok(h,p,E){return E=E!=null?E.concat([h]):null,k0(4,4,Lk.bind(null,p,h),E)}function CS(){}function Fk(h,p){var E=aa();p=p===void 0?null:p;var A=E.memoizedState;return A!==null&&p!==null&&SS(p,A[1])?A[0]:(E.memoizedState=[h,p],h)}function jk(h,p){var E=aa();p=p===void 0?null:p;var A=E.memoizedState;return A!==null&&p!==null&&SS(p,A[1])?A[0]:(h=h(),E.memoizedState=[h,p],h)}function Jq(h,p){var E=an;an=E!==0&&4>E?E:4,h(!0);var A=Js.transition;Js.transition={};try{h(!1),p()}finally{an=E,Js.transition=A}}function Vk(){return aa().memoizedState}function Zq(h,p,E){var A=$l(h);E={lane:A,action:E,hasEagerState:!1,eagerState:null,next:null},Uk(h)?zk(p,E):(Bk(h,p,E),E=Ui(),h=Zs(h,A,E),h!==null&&Hk(h,p,A))}function eK(h,p,E){var A=$l(h),N={lane:A,action:E,hasEagerState:!1,eagerState:null,next:null};if(Uk(h))zk(p,N);else{Bk(h,p,N);var j=h.alternate;if(h.lanes===0&&(j===null||j.lanes===0)&&(j=p.lastRenderedReducer,j!==null))try{var Q=p.lastRenderedState,ue=j(Q,E);if(N.hasEagerState=!0,N.eagerState=ue,vs(ue,Q))return}catch{}finally{}E=Ui(),h=Zs(h,A,E),h!==null&&Hk(h,p,A)}}function Uk(h){var p=h.alternate;return h===ir||p!==null&&p===ir}function zk(h,p){Vm=C0=!0;var E=h.pending;E===null?p.next=p:(p.next=E.next,E.next=p),h.pending=p}function Bk(h,p,E){Cr!==null&&h.mode&1&&!(qt&2)?(h=p.interleaved,h===null?(E.next=E,pi===null?pi=[p]:pi.push(p)):(E.next=h.next,h.next=E),p.interleaved=E):(h=p.pending,h===null?E.next=E:(E.next=h.next,h.next=E),p.pending=E)}function Hk(h,p,E){if(E&4194240){var A=p.lanes;A&=h.pendingLanes,E|=A,p.lanes=E,Ks(h,E)}}var N0={readContext:Fi,useCallback:yi,useContext:yi,useEffect:yi,useImperativeHandle:yi,useInsertionEffect:yi,useLayoutEffect:yi,useMemo:yi,useReducer:yi,useRef:yi,useState:yi,useDebugValue:yi,useDeferredValue:yi,useTransition:yi,useMutableSource:yi,useSyncExternalStore:yi,useId:yi,unstable_isNewReconciler:!1},tK={readContext:Fi,useCallback:function(h,p){return Wa().memoizedState=[h,p===void 0?null:p],h},useContext:Fi,useEffect:AS,useImperativeHandle:function(h,p,E){return E=E!=null?E.concat([h]):null,R0(4194308,4,Lk.bind(null,p,h),E)},useLayoutEffect:function(h,p){return R0(4194308,4,h,p)},useInsertionEffect:function(h,p){return R0(4,2,h,p)},useMemo:function(h,p){var E=Wa();return p=p===void 0?null:p,h=h(),E.memoizedState=[h,p],h},useReducer:function(h,p,E){var A=Wa();return p=E!==void 0?E(p):p,A.memoizedState=A.baseState=p,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:p},A.queue=h,h=h.dispatch=Zq.bind(null,ir,h),[A.memoizedState,h]},useRef:function(h){var p=Wa();return h={current:h},p.memoizedState=h},useState:MS,useDebugValue:CS,useDeferredValue:function(h){var p=MS(h),E=p[0],A=p[1];return AS(function(){var N=Js.transition;Js.transition={};try{A(h)}finally{Js.transition=N}},[h]),E},useTransition:function(){var h=MS(!1),p=h[0];return h=Jq.bind(null,h[1]),Wa().memoizedState=h,[p,h]},useMutableSource:function(){},useSyncExternalStore:function(h,p,E){var A=ir,N=Wa();if(nn){if(E===void 0)throw Error(o(407));E=E()}else{if(E=p(),Cr===null)throw Error(o(349));jh&30||Ck(A,p,E)}N.memoizedState=E;var j={value:E,getSnapshot:p};return N.queue=j,AS(Ik.bind(null,A,j,h),[h]),A.flags|=2048,zm(9,Pk.bind(null,A,j,E,p),void 0,null),E},useId:function(){var h=Wa(),p=Cr.identifierPrefix;if(nn){var E=ze,A=xe;E=(A&~(1<<32-fi(A)-1)).toString(32)+E,p=":"+p+"R"+E,E=Um++,0<E&&(p+="H"+E.toString(32)),p+=":"}else E=Qq++,p=":"+p+"r"+E.toString(32)+":";return h.memoizedState=p},unstable_isNewReconciler:!1},nK={readContext:Fi,useCallback:Fk,useContext:Fi,useEffect:Bm,useImperativeHandle:Ok,useInsertionEffect:Nk,useLayoutEffect:Dk,useMemo:jk,useReducer:P0,useRef:kk,useState:function(){return P0(Du)},useDebugValue:CS,useDeferredValue:function(h){var p=P0(Du),E=p[0],A=p[1];return Bm(function(){var N=Js.transition;Js.transition={};try{A(h)}finally{Js.transition=N}},[h]),E},useTransition:function(){var h=P0(Du)[0],p=aa().memoizedState;return[h,p]},useMutableSource:Mk,useSyncExternalStore:Ak,useId:Vk,unstable_isNewReconciler:!1},rK={readContext:Fi,useCallback:Fk,useContext:Fi,useEffect:Bm,useImperativeHandle:Ok,useInsertionEffect:Nk,useLayoutEffect:Dk,useMemo:jk,useReducer:I0,useRef:kk,useState:function(){return I0(Du)},useDebugValue:CS,useDeferredValue:function(h){var p=I0(Du),E=p[0],A=p[1];return Bm(function(){var N=Js.transition;Js.transition={};try{A(h)}finally{Js.transition=N}},[h]),E},useTransition:function(){var h=I0(Du)[0],p=aa().memoizedState;return[h,p]},useMutableSource:Mk,useSyncExternalStore:Ak,useId:Vk,unstable_isNewReconciler:!1};function PS(h,p){try{var E="",A=p;do E+=E0(A),A=A.return;while(A);var N=E}catch(j){N=`
Error generating stack: `+j.message+`
`+j.stack}return{value:h,source:p,stack:N}}function IS(h,p){try{console.error(p.value)}catch(E){setTimeout(function(){throw E})}}var iK=typeof WeakMap=="function"?WeakMap:Map;function Wk(h,p,E){E=ws(-1,E),E.tag=3,E.payload={element:null};var A=p.value;return E.callback=function(){Y0||(Y0=!0,KS=A),IS(h,p)},E}function Gk(h,p,E){E=ws(-1,E),E.tag=3;var A=h.type.getDerivedStateFromError;if(typeof A=="function"){var N=p.value;E.payload=function(){return A(N)},E.callback=function(){IS(h,p)}}var j=h.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(E.callback=function(){IS(h,p),typeof A!="function"&&(Wl===null?Wl=new Set([this]):Wl.add(this));var Q=p.stack;this.componentDidCatch(p.value,{componentStack:Q!==null?Q:""})}),E}function $k(h,p,E){var A=h.pingCache;if(A===null){A=h.pingCache=new iK;var N=new Set;A.set(p,N)}else N=A.get(p),N===void 0&&(N=new Set,A.set(p,N));N.has(E)||(N.add(E),h=vK.bind(null,h,p,E),p.then(h,h))}function qk(h){do{var p;if((p=h.tag===13)&&(p=h.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return h;h=h.return}while(h!==null);return null}function Kk(h,p,E,A,N){return h.mode&1?(h.flags|=65536,h.lanes=N,h):(h===p?h.flags|=65536:(h.flags|=128,E.flags|=131072,E.flags&=-52805,E.tag===1&&(E.alternate===null?E.tag=17:(p=ws(-1,1),p.tag=2,wo(E,p))),E.lanes|=1),h)}function la(h){h.flags|=4}function Yk(h,p){if(h!==null&&h.child===p.child)return!0;if(p.flags&16)return!1;for(h=p.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var Hm,Wm,D0,L0;if(Te)Hm=function(h,p){for(var E=p.child;E!==null;){if(E.tag===5||E.tag===6)J(h,E.stateNode);else if(E.tag!==4&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===p)break;for(;E.sibling===null;){if(E.return===null||E.return===p)return;E=E.return}E.sibling.return=E.return,E=E.sibling}},Wm=function(){},D0=function(h,p,E,A,N){if(h=h.memoizedProps,h!==A){var j=p.stateNode,Q=oa(Qs.current);E=_e(j,E,h,A,N,Q),(p.updateQueue=E)&&la(p)}},L0=function(h,p,E,A){E!==A&&la(p)};else if(te){Hm=function(h,p,E,A){for(var N=p.child;N!==null;){if(N.tag===5){var j=N.stateNode;E&&A&&(j=Zt(j,N.type,N.memoizedProps,N)),J(h,j)}else if(N.tag===6)j=N.stateNode,E&&A&&(j=Gn(j,N.memoizedProps,N)),J(h,j);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)j=N.child,j!==null&&(j.return=N),Hm(h,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===p)break;for(;N.sibling===null;){if(N.return===null||N.return===p)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};var Xk=function(h,p,E,A){for(var N=p.child;N!==null;){if(N.tag===5){var j=N.stateNode;E&&A&&(j=Zt(j,N.type,N.memoizedProps,N)),Xt(h,j)}else if(N.tag===6)j=N.stateNode,E&&A&&(j=Gn(j,N.memoizedProps,N)),Xt(h,j);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)j=N.child,j!==null&&(j.return=N),Xk(h,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===p)break;for(;N.sibling===null;){if(N.return===null||N.return===p)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};Wm=function(h,p){var E=p.stateNode;if(!Yk(h,p)){h=E.containerInfo;var A=jt(h);Xk(A,p,!1,!1),E.pendingChildren=A,la(p),on(h,A)}},D0=function(h,p,E,A,N){var j=h.stateNode,Q=h.memoizedProps;if((h=Yk(h,p))&&Q===A)p.stateNode=j;else{var ue=p.stateNode,Me=oa(Qs.current),He=null;Q!==A&&(He=_e(ue,E,Q,A,N,Me)),h&&He===null?p.stateNode=j:(j=Qe(j,He,E,Q,A,p,h,ue),he(j,E,A,N,Me)&&la(p),p.stateNode=j,h?la(p):Hm(j,p,!1,!1))}},L0=function(h,p,E,A){E!==A?(h=oa(Oh.current),E=oa(Qs.current),p.stateNode=Y(A,h,E,p),la(p)):p.stateNode=h.stateNode}}else Wm=function(){},D0=function(){},L0=function(){};function Gm(h,p){if(!nn)switch(h.tailMode){case"hidden":p=h.tail;for(var E=null;p!==null;)p.alternate!==null&&(E=p),p=p.sibling;E===null?h.tail=null:E.sibling=null;break;case"collapsed":E=h.tail;for(var A=null;E!==null;)E.alternate!==null&&(A=E),E=E.sibling;A===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:A.sibling=null}}function vi(h){var p=h.alternate!==null&&h.alternate.child===h.child,E=0,A=0;if(p)for(var N=h.child;N!==null;)E|=N.lanes|N.childLanes,A|=N.subtreeFlags&14680064,A|=N.flags&14680064,N.return=h,N=N.sibling;else for(N=h.child;N!==null;)E|=N.lanes|N.childLanes,A|=N.subtreeFlags,A|=N.flags,N.return=h,N=N.sibling;return h.subtreeFlags|=A,h.childLanes=E,p}function sK(h,p,E){var A=p.pendingProps;switch(Mr(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vi(p),null;case 1:return hi(p.type)&&Su(),vi(p),null;case 3:return A=p.stateNode,Fh(),en(Lr),en(qn),bS(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(h===null||h.child===null)&&(Lm(p)?la(p):h===null||h.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,ji!==null&&(QS(ji),ji=null))),Wm(h,p),vi(p),null;case 5:_S(p),E=oa(Oh.current);var N=p.type;if(h!==null&&p.stateNode!=null)D0(h,p,N,A,E),h.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!A){if(p.stateNode===null)throw Error(o(166));return vi(p),null}if(h=oa(Qs.current),Lm(p)){if(!le)throw Error(o(175));h=Tt(p.stateNode,p.type,p.memoizedProps,E,h,p,!sa),p.updateQueue=h,h!==null&&la(p)}else{var j=se(N,A,E,h,p);Hm(j,p,!1,!1),p.stateNode=j,he(j,N,A,E,h)&&la(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return vi(p),null;case 6:if(h&&p.stateNode!=null)L0(h,p,h.memoizedProps,A);else{if(typeof A!="string"&&p.stateNode===null)throw Error(o(166));if(h=oa(Oh.current),E=oa(Qs.current),Lm(p)){if(!le)throw Error(o(176));if(h=p.stateNode,A=p.memoizedProps,(E=Pt(h,A,p,!sa))&&(N=xn,N!==null))switch(j=(N.mode&1)!==0,N.tag){case 3:Bs(N.stateNode.containerInfo,h,A,j);break;case 5:$n(N.type,N.memoizedProps,N.stateNode,h,A,j)}E&&la(p)}else p.stateNode=Y(A,h,E,p)}return vi(p),null;case 13:if(en(Xn),A=p.memoizedState,nn&&Ar!==null&&p.mode&1&&!(p.flags&128)){for(h=Ar;h;)h=Ee(h);return Dh(),p.flags|=98560,p}if(A!==null&&A.dehydrated!==null){if(A=Lm(p),h===null){if(!A)throw Error(o(318));if(!le)throw Error(o(344));if(h=p.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));It(h,p)}else Dh(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;return vi(p),null}return ji!==null&&(QS(ji),ji=null),p.flags&128?(p.lanes=E,p):(A=A!==null,E=!1,h===null?Lm(p):E=h.memoizedState!==null,A&&!E&&(p.child.flags|=8192,p.mode&1&&(h===null||Xn.current&1?Or===0&&(Or=3):ZS())),p.updateQueue!==null&&(p.flags|=4),vi(p),null);case 4:return Fh(),Wm(h,p),h===null&&Be(p.stateNode.containerInfo),vi(p),null;case 10:return Ph(p.type._context),vi(p),null;case 17:return hi(p.type)&&Su(),vi(p),null;case 19:if(en(Xn),N=p.memoizedState,N===null)return vi(p),null;if(A=(p.flags&128)!==0,j=N.rendering,j===null)if(A)Gm(N,!1);else{if(Or!==0||h!==null&&h.flags&128)for(h=p.child;h!==null;){if(j=M0(h),j!==null){for(p.flags|=128,Gm(N,!1),h=j.updateQueue,h!==null&&(p.updateQueue=h,p.flags|=4),p.subtreeFlags=0,h=E,A=p.child;A!==null;)E=A,N=h,E.flags&=14680066,j=E.alternate,j===null?(E.childLanes=0,E.lanes=N,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=j.childLanes,E.lanes=j.lanes,E.child=j.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=j.memoizedProps,E.memoizedState=j.memoizedState,E.updateQueue=j.updateQueue,E.type=j.type,N=j.dependencies,E.dependencies=N===null?null:{lanes:N.lanes,firstContext:N.firstContext}),A=A.sibling;return fn(Xn,Xn.current&1|2),p.child}h=h.sibling}N.tail!==null&&Er()>qS&&(p.flags|=128,A=!0,Gm(N,!1),p.lanes=4194304)}else{if(!A)if(h=M0(j),h!==null){if(p.flags|=128,A=!0,h=h.updateQueue,h!==null&&(p.updateQueue=h,p.flags|=4),Gm(N,!0),N.tail===null&&N.tailMode==="hidden"&&!j.alternate&&!nn)return vi(p),null}else 2*Er()-N.renderingStartTime>qS&&E!==1073741824&&(p.flags|=128,A=!0,Gm(N,!1),p.lanes=4194304);N.isBackwards?(j.sibling=p.child,p.child=j):(h=N.last,h!==null?h.sibling=j:p.child=j,N.last=j)}return N.tail!==null?(p=N.tail,N.rendering=p,N.tail=p.sibling,N.renderingStartTime=Er(),p.sibling=null,h=Xn.current,fn(Xn,A?h&1|2:h&1),p):(vi(p),null);case 22:case 23:return JS(),A=p.memoizedState!==null,h!==null&&h.memoizedState!==null!==A&&(p.flags|=8192),A&&p.mode&1?Es&1073741824&&(vi(p),Te&&p.subtreeFlags&6&&(p.flags|=8192)):vi(p),null;case 24:return null;case 25:return null}throw Error(o(156,p.tag))}var oK=a.ReactCurrentOwner,Ss=!1;function Vi(h,p,E,A){p.child=h===null?Ek(p,null,E,A):Lh(p,h.child,E,A)}function Qk(h,p,E,A,N){E=E.render;var j=p.ref;return Hl(p,N),A=ES(h,p,E,A,j,N),E=TS(),h!==null&&!Ss?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~N,Ga(h,p,N)):(nn&&E&&tn(p),p.flags|=1,Vi(h,p,A,N),p.child)}function Jk(h,p,E,A,N){if(h===null){var j=E.type;return typeof j=="function"&&!eE(j)&&j.defaultProps===void 0&&E.compare===null&&E.defaultProps===void 0?(p.tag=15,p.type=j,Zk(h,p,j,A,N)):(h=nx(E.type,null,A,p,p.mode,N),h.ref=p.ref,h.return=p,p.child=h)}if(j=h.child,!(h.lanes&N)){var Q=j.memoizedProps;if(E=E.compare,E=E!==null?E:za,E(Q,A)&&h.ref===p.ref)return Ga(h,p,N)}return p.flags|=1,h=Kl(j,A),h.ref=p.ref,h.return=p,p.child=h}function Zk(h,p,E,A,N){if(h!==null&&za(h.memoizedProps,A)&&h.ref===p.ref)if(Ss=!1,(h.lanes&N)!==0)h.flags&131072&&(Ss=!0);else return p.lanes=h.lanes,Ga(h,p,N);return RS(h,p,E,A,N)}function eN(h,p,E){var A=p.pendingProps,N=A.children,j=h!==null?h.memoizedState:null;if(A.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null},fn(Vh,Es),Es|=E;else if(E&1073741824)p.memoizedState={baseLanes:0,cachePool:null},A=j!==null?j.baseLanes:E,fn(Vh,Es),Es|=A;else return h=j!==null?j.baseLanes|E:E,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:h,cachePool:null},p.updateQueue=null,fn(Vh,Es),Es|=h,null;else j!==null?(A=j.baseLanes|E,p.memoizedState=null):A=E,fn(Vh,Es),Es|=A;return Vi(h,p,N,E),p.child}function tN(h,p){var E=p.ref;(h===null&&E!==null||h!==null&&h.ref!==E)&&(p.flags|=512,p.flags|=2097152)}function RS(h,p,E,A,N){var j=hi(E)?gs:qn.current;return j=zl(p,j),Hl(p,N),E=ES(h,p,E,A,j,N),A=TS(),h!==null&&!Ss?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~N,Ga(h,p,N)):(nn&&A&&tn(p),p.flags|=1,Vi(h,p,E,N),p.child)}function nN(h,p,E,A,N){if(hi(E)){var j=!0;$s(p)}else j=!1;if(Hl(p,N),p.stateNode===null)h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),Nu(p,E,A),Nh(p,E,A,N),A=!0;else if(h===null){var Q=p.stateNode,ue=p.memoizedProps;Q.props=ue;var Me=Q.context,He=E.contextType;typeof He=="object"&&He!==null?He=Fi(He):(He=hi(E)?gs:qn.current,He=zl(p,He));var st=E.getDerivedStateFromProps,Dt=typeof st=="function"||typeof Q.getSnapshotBeforeUpdate=="function";Dt||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(ue!==A||Me!==He)&&mi(p,Q,A,He),_o=!1;var xt=p.memoizedState;Q.state=xt,Ru(p,A,Q,N),Me=p.memoizedState,ue!==A||xt!==Me||Lr.current||_o?(typeof st=="function"&&(kh(p,E,st,A),Me=p.memoizedState),(ue=_o||Dm(p,E,ue,A,xt,Me,He))?(Dt||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount()),typeof Q.componentDidMount=="function"&&(p.flags|=4194308)):(typeof Q.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=A,p.memoizedState=Me),Q.props=A,Q.state=Me,Q.context=He,A=ue):(typeof Q.componentDidMount=="function"&&(p.flags|=4194308),A=!1)}else{Q=p.stateNode,Rh(h,p),ue=p.memoizedProps,He=p.type===p.elementType?ue:hr(p.type,ue),Q.props=He,Dt=p.pendingProps,xt=Q.context,Me=E.contextType,typeof Me=="object"&&Me!==null?Me=Fi(Me):(Me=hi(E)?gs:qn.current,Me=zl(p,Me));var In=E.getDerivedStateFromProps;(st=typeof In=="function"||typeof Q.getSnapshotBeforeUpdate=="function")||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(ue!==Dt||xt!==Me)&&mi(p,Q,A,Me),_o=!1,xt=p.memoizedState,Q.state=xt,Ru(p,A,Q,N);var mt=p.memoizedState;ue!==Dt||xt!==mt||Lr.current||_o?(typeof In=="function"&&(kh(p,E,In,A),mt=p.memoizedState),(He=_o||Dm(p,E,He,A,xt,mt,Me)||!1)?(st||typeof Q.UNSAFE_componentWillUpdate!="function"&&typeof Q.componentWillUpdate!="function"||(typeof Q.componentWillUpdate=="function"&&Q.componentWillUpdate(A,mt,Me),typeof Q.UNSAFE_componentWillUpdate=="function"&&Q.UNSAFE_componentWillUpdate(A,mt,Me)),typeof Q.componentDidUpdate=="function"&&(p.flags|=4),typeof Q.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof Q.componentDidUpdate!="function"||ue===h.memoizedProps&&xt===h.memoizedState||(p.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||ue===h.memoizedProps&&xt===h.memoizedState||(p.flags|=1024),p.memoizedProps=A,p.memoizedState=mt),Q.props=A,Q.state=mt,Q.context=Me,A=He):(typeof Q.componentDidUpdate!="function"||ue===h.memoizedProps&&xt===h.memoizedState||(p.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||ue===h.memoizedProps&&xt===h.memoizedState||(p.flags|=1024),A=!1)}return kS(h,p,E,A,j,N)}function kS(h,p,E,A,N,j){tN(h,p);var Q=(p.flags&128)!==0;if(!A&&!Q)return N&&qs(p,E,!1),Ga(h,p,j);A=p.stateNode,oK.current=p;var ue=Q&&typeof E.getDerivedStateFromError!="function"?null:A.render();return p.flags|=1,h!==null&&Q?(p.child=Lh(p,h.child,null,j),p.child=Lh(p,null,ue,j)):Vi(h,p,ue,j),p.memoizedState=A.state,N&&qs(p,E,!0),p.child}function rN(h){var p=h.stateNode;p.pendingContext?Mm(h,p.pendingContext,p.pendingContext!==p.context):p.context&&Mm(h,p.context,!1),xS(h,p.containerInfo)}function iN(h,p,E,A,N){return Dh(),vS(N),p.flags|=256,Vi(h,p,E,A),p.child}var O0={dehydrated:null,treeContext:null,retryLane:0};function F0(h){return{baseLanes:h,cachePool:null}}function sN(h,p,E){var A=p.pendingProps,N=Xn.current,j=!1,Q=(p.flags&128)!==0,ue;if((ue=Q)||(ue=h!==null&&h.memoizedState===null?!1:(N&2)!==0),ue?(j=!0,p.flags&=-129):(h===null||h.memoizedState!==null)&&(N|=1),fn(Xn,N&1),h===null)return yS(p),h=p.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(p.mode&1?K(h)?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(N=A.children,h=A.fallback,j?(A=p.mode,j=p.child,N={mode:"hidden",children:N},!(A&1)&&j!==null?(j.childLanes=0,j.pendingProps=N):j=rx(N,A,0,null),h=Uu(h,A,E,null),j.return=p,h.return=p,j.sibling=h,p.child=j,p.child.memoizedState=F0(E),p.memoizedState=O0,h):NS(p,N));if(N=h.memoizedState,N!==null){if(ue=N.dehydrated,ue!==null){if(Q)return p.flags&256?(p.flags&=-257,j0(h,p,E,Error(o(422)))):p.memoizedState!==null?(p.child=h.child,p.flags|=128,null):(j=A.fallback,N=p.mode,A=rx({mode:"visible",children:A.children},N,0,null),j=Uu(j,N,E,null),j.flags|=2,A.return=p,j.return=p,A.sibling=j,p.child=A,p.mode&1&&Lh(p,h.child,null,E),p.child.memoizedState=F0(E),p.memoizedState=O0,j);if(!(p.mode&1))p=j0(h,p,E,null);else if(K(ue))p=j0(h,p,E,Error(o(419)));else if(A=(E&h.childLanes)!==0,Ss||A){if(A=Cr,A!==null){switch(E&-E){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}A=j&(A.suspendedLanes|E)?0:j,A!==0&&A!==N.retryLane&&(N.retryLane=A,Zs(h,A,-1))}ZS(),p=j0(h,p,E,Error(o(421)))}else na(ue)?(p.flags|=128,p.child=h.child,p=xK.bind(null,h),me(ue,p),p=null):(E=N.treeContext,le&&(Ar=ft(ue),xn=p,nn=!0,ji=null,sa=!1,E!==null&&(F[H++]=xe,F[H++]=ze,F[H++]=fe,xe=E.id,ze=E.overflow,fe=p)),p=NS(p,p.pendingProps.children),p.flags|=4096);return p}return j?(A=aN(h,p,A.children,A.fallback,E),j=p.child,N=h.child.memoizedState,j.memoizedState=N===null?F0(E):{baseLanes:N.baseLanes|E,cachePool:null},j.childLanes=h.childLanes&~E,p.memoizedState=O0,A):(E=oN(h,p,A.children,E),p.memoizedState=null,E)}return j?(A=aN(h,p,A.children,A.fallback,E),j=p.child,N=h.child.memoizedState,j.memoizedState=N===null?F0(E):{baseLanes:N.baseLanes|E,cachePool:null},j.childLanes=h.childLanes&~E,p.memoizedState=O0,A):(E=oN(h,p,A.children,E),p.memoizedState=null,E)}function NS(h,p){return p=rx({mode:"visible",children:p},h.mode,0,null),p.return=h,h.child=p}function oN(h,p,E,A){var N=h.child;return h=N.sibling,E=Kl(N,{mode:"visible",children:E}),!(p.mode&1)&&(E.lanes=A),E.return=p,E.sibling=null,h!==null&&(A=p.deletions,A===null?(p.deletions=[h],p.flags|=16):A.push(h)),p.child=E}function aN(h,p,E,A,N){var j=p.mode;h=h.child;var Q=h.sibling,ue={mode:"hidden",children:E};return!(j&1)&&p.child!==h?(E=p.child,E.childLanes=0,E.pendingProps=ue,p.deletions=null):(E=Kl(h,ue),E.subtreeFlags=h.subtreeFlags&14680064),Q!==null?A=Kl(Q,A):(A=Uu(A,j,N,null),A.flags|=2),A.return=p,E.return=p,E.sibling=A,p.child=E,A}function j0(h,p,E,A){return A!==null&&vS(A),Lh(p,h.child,null,E),h=NS(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function lN(h,p,E){h.lanes|=p;var A=h.alternate;A!==null&&(A.lanes|=p),Bl(h.return,p,E)}function DS(h,p,E,A,N){var j=h.memoizedState;j===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:A,tail:E,tailMode:N}:(j.isBackwards=p,j.rendering=null,j.renderingStartTime=0,j.last=A,j.tail=E,j.tailMode=N)}function cN(h,p,E){var A=p.pendingProps,N=A.revealOrder,j=A.tail;if(Vi(h,p,A.children,E),A=Xn.current,A&2)A=A&1|2,p.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&lN(h,E,p);else if(h.tag===19)lN(h,E,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}A&=1}if(fn(Xn,A),!(p.mode&1))p.memoizedState=null;else switch(N){case"forwards":for(E=p.child,N=null;E!==null;)h=E.alternate,h!==null&&M0(h)===null&&(N=E),E=E.sibling;E=N,E===null?(N=p.child,p.child=null):(N=E.sibling,E.sibling=null),DS(p,!1,N,E,j);break;case"backwards":for(E=null,N=p.child,p.child=null;N!==null;){if(h=N.alternate,h!==null&&M0(h)===null){p.child=N;break}h=N.sibling,N.sibling=E,E=N,N=h}DS(p,!0,E,null,j);break;case"together":DS(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Ga(h,p,E){if(h!==null&&(p.dependencies=h.dependencies),Uh|=p.lanes,!(E&p.childLanes))return null;if(h!==null&&p.child!==h.child)throw Error(o(153));if(p.child!==null){for(h=p.child,E=Kl(h,h.pendingProps),p.child=E,E.return=p;h.sibling!==null;)h=h.sibling,E=E.sibling=Kl(h,h.pendingProps),E.return=p;E.sibling=null}return p.child}function aK(h,p,E){switch(p.tag){case 3:rN(p),Dh();break;case 5:Tk(p);break;case 1:hi(p.type)&&$s(p);break;case 4:xS(p,p.stateNode.containerInfo);break;case 10:Iu(p,p.type._context,p.memoizedProps.value);break;case 13:var A=p.memoizedState;if(A!==null)return A.dehydrated!==null?(fn(Xn,Xn.current&1),p.flags|=128,null):E&p.child.childLanes?sN(h,p,E):(fn(Xn,Xn.current&1),h=Ga(h,p,E),h!==null?h.sibling:null);fn(Xn,Xn.current&1);break;case 19:if(A=(E&p.childLanes)!==0,h.flags&128){if(A)return cN(h,p,E);p.flags|=128}var N=p.memoizedState;if(N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),fn(Xn,Xn.current),A)break;return null;case 22:case 23:return p.lanes=0,eN(h,p,E)}return Ga(h,p,E)}function lK(h,p){switch(Mr(p),p.tag){case 1:return hi(p.type)&&Su(),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return Fh(),en(Lr),en(qn),bS(),h=p.flags,h&65536&&!(h&128)?(p.flags=h&-65537|128,p):null;case 5:return _S(p),null;case 13:if(en(Xn),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(o(340));Dh()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return en(Xn),null;case 4:return Fh(),null;case 10:return Ph(p.type._context),null;case 22:case 23:return JS(),null;case 24:return null;default:return null}}var V0=!1,Lu=!1,cK=typeof WeakSet=="function"?WeakSet:Set,qe=null;function U0(h,p){var E=h.ref;if(E!==null)if(typeof E=="function")try{E(null)}catch(A){es(h,p,A)}else E.current=null}function LS(h,p,E){try{E()}catch(A){es(h,p,A)}}var uN=!1;function uK(h,p){for(G(h.containerInfo),qe=p;qe!==null;)if(h=qe,p=h.child,(h.subtreeFlags&1028)!==0&&p!==null)p.return=h,qe=p;else for(;qe!==null;){h=qe;try{var E=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var A=E.memoizedProps,N=E.memoizedState,j=h.stateNode,Q=j.getSnapshotBeforeUpdate(h.elementType===h.type?A:hr(h.type,A),N);j.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:Te&&We(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ue){es(h,h.return,ue)}if(p=h.sibling,p!==null){p.return=h.return,qe=p;break}qe=h.return}return E=uN,uN=!1,E}function Ou(h,p,E){var A=p.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var N=A=A.next;do{if((N.tag&h)===h){var j=N.destroy;N.destroy=void 0,j!==void 0&&LS(p,E,j)}N=N.next}while(N!==A)}}function $m(h,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var E=p=p.next;do{if((E.tag&h)===h){var A=E.create;E.destroy=A()}E=E.next}while(E!==p)}}function OS(h){var p=h.ref;if(p!==null){var E=h.stateNode;switch(h.tag){case 5:h=ne(E);break;default:h=E}typeof p=="function"?p(h):p.current=h}}function dN(h,p,E){if(ys&&typeof ys.onCommitFiberUnmount=="function")try{ys.onCommitFiberUnmount(Ua,p)}catch{}switch(p.tag){case 0:case 11:case 14:case 15:if(h=p.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var A=h=h.next;do{var N=A,j=N.destroy;N=N.tag,j!==void 0&&(N&2||N&4)&&LS(p,E,j),A=A.next}while(A!==h)}break;case 1:if(U0(p,E),h=p.stateNode,typeof h.componentWillUnmount=="function")try{h.props=p.memoizedProps,h.state=p.memoizedState,h.componentWillUnmount()}catch(Q){es(p,E,Q)}break;case 5:U0(p,E);break;case 4:Te?yN(h,p,E):te&&te&&(p=p.stateNode.containerInfo,E=jt(p),Wn(p,E))}}function hN(h,p,E){for(var A=p;;)if(dN(h,A,E),A.child===null||Te&&A.tag===4){if(A===p)break;for(;A.sibling===null;){if(A.return===null||A.return===p)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else A.child.return=A,A=A.child}function fN(h){var p=h.alternate;p!==null&&(h.alternate=null,fN(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&Je(p)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function pN(h){return h.tag===5||h.tag===3||h.tag===4}function mN(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||pN(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function gN(h){if(Te){e:{for(var p=h.return;p!==null;){if(pN(p))break e;p=p.return}throw Error(o(160))}var E=p;switch(E.tag){case 5:p=E.stateNode,E.flags&32&&(De(p),E.flags&=-33),E=mN(h),jS(h,E,p);break;case 3:case 4:p=E.stateNode.containerInfo,E=mN(h),FS(h,E,p);break;default:throw Error(o(161))}}}function FS(h,p,E){var A=h.tag;if(A===5||A===6)h=h.stateNode,p?dt(E,h,p):$e(E,h);else if(A!==4&&(h=h.child,h!==null))for(FS(h,p,E),h=h.sibling;h!==null;)FS(h,p,E),h=h.sibling}function jS(h,p,E){var A=h.tag;if(A===5||A===6)h=h.stateNode,p?ht(E,h,p):rt(E,h);else if(A!==4&&(h=h.child,h!==null))for(jS(h,p,E),h=h.sibling;h!==null;)jS(h,p,E),h=h.sibling}function yN(h,p,E){for(var A=p,N=!1,j,Q;;){if(!N){N=A.return;e:for(;;){if(N===null)throw Error(o(160));switch(j=N.stateNode,N.tag){case 5:Q=!1;break e;case 3:j=j.containerInfo,Q=!0;break e;case 4:j=j.containerInfo,Q=!0;break e}N=N.return}N=!0}if(A.tag===5||A.tag===6)hN(h,A,E),Q?ie(j,A.stateNode):at(j,A.stateNode);else if(A.tag===18)Q?Dr(j,A.stateNode):Nn(j,A.stateNode);else if(A.tag===4){if(A.child!==null){j=A.stateNode.containerInfo,Q=!0,A.child.return=A,A=A.child;continue}}else if(dN(h,A,E),A.child!==null){A.child.return=A,A=A.child;continue}if(A===p)break;for(;A.sibling===null;){if(A.return===null||A.return===p)return;A=A.return,A.tag===4&&(N=!1)}A.sibling.return=A.return,A=A.sibling}}function VS(h,p){if(Te){switch(p.tag){case 0:case 11:case 14:case 15:Ou(3,p,p.return),$m(3,p),Ou(5,p,p.return);return;case 1:return;case 5:var E=p.stateNode;if(E!=null){var A=p.memoizedProps;h=h!==null?h.memoizedProps:A;var N=p.type,j=p.updateQueue;p.updateQueue=null,j!==null&&Ye(E,j,N,h,A,p)}return;case 6:if(p.stateNode===null)throw Error(o(162));E=p.memoizedProps,Ce(p.stateNode,h!==null?h.memoizedProps:E,E);return;case 3:le&&h!==null&&h.memoizedState.isDehydrated&&Ut(p.stateNode.containerInfo);return;case 12:return;case 13:z0(p);return;case 19:z0(p);return;case 17:return}throw Error(o(163))}switch(p.tag){case 0:case 11:case 14:case 15:Ou(3,p,p.return),$m(3,p),Ou(5,p,p.return);return;case 12:return;case 13:z0(p);return;case 19:z0(p);return;case 3:le&&h!==null&&h.memoizedState.isDehydrated&&Ut(p.stateNode.containerInfo);break;case 22:case 23:return}e:if(te){switch(p.tag){case 1:case 5:case 6:break e;case 3:case 4:p=p.stateNode,Wn(p.containerInfo,p.pendingChildren);break e}throw Error(o(163))}}function z0(h){var p=h.updateQueue;if(p!==null){h.updateQueue=null;var E=h.stateNode;E===null&&(E=h.stateNode=new cK),p.forEach(function(A){var N=_K.bind(null,h,A);E.has(A)||(E.add(A),A.then(N,N))})}}function dK(h,p){for(qe=p;qe!==null;){p=qe;var E=p.deletions;if(E!==null)for(var A=0;A<E.length;A++){var N=E[A];try{var j=h;Te?yN(j,N,p):hN(j,N,p);var Q=N.alternate;Q!==null&&(Q.return=null),N.return=null}catch(pt){es(N,p,pt)}}if(E=p.child,p.subtreeFlags&12854&&E!==null)E.return=p,qe=E;else for(;qe!==null;){p=qe;try{var ue=p.flags;if(ue&32&&Te&&De(p.stateNode),ue&512){var Me=p.alternate;if(Me!==null){var He=Me.ref;He!==null&&(typeof He=="function"?He(null):He.current=null)}}if(ue&8192)switch(p.tag){case 13:if(p.memoizedState!==null){var st=p.alternate;(st===null||st.memoizedState===null)&&($S=Er())}break;case 22:var Dt=p.memoizedState!==null,xt=p.alternate,In=xt!==null&&xt.memoizedState!==null;if(E=p,Te){e:if(A=E,N=Dt,j=null,Te)for(var mt=A;;){if(mt.tag===5){if(j===null){j=mt;var xi=mt.stateNode;N?Ke(xi):ve(mt.stateNode,mt.memoizedProps)}}else if(mt.tag===6){if(j===null){var to=mt.stateNode;N?ee(to):ke(to,mt.memoizedProps)}}else if((mt.tag!==22&&mt.tag!==23||mt.memoizedState===null||mt===A)&&mt.child!==null){mt.child.return=mt,mt=mt.child;continue}if(mt===A)break;for(;mt.sibling===null;){if(mt.return===null||mt.return===A)break e;j===mt&&(j=null),mt=mt.return}j===mt&&(j=null),mt.sibling.return=mt.return,mt=mt.sibling}}if(Dt&&!In&&E.mode&1){qe=E;for(var ge=E.child;ge!==null;){for(E=qe=ge;qe!==null;){A=qe;var de=A.child;switch(A.tag){case 0:case 11:case 14:case 15:Ou(4,A,A.return);break;case 1:U0(A,A.return);var be=A.stateNode;if(typeof be.componentWillUnmount=="function"){var Xe=A.return;try{be.props=A.memoizedProps,be.state=A.memoizedState,be.componentWillUnmount()}catch(pt){es(A,Xe,pt)}}break;case 5:U0(A,A.return);break;case 22:if(A.memoizedState!==null){_N(E);continue}}de!==null?(de.return=A,qe=de):_N(E)}ge=ge.sibling}}}switch(ue&4102){case 2:gN(p),p.flags&=-3;break;case 6:gN(p),p.flags&=-3,VS(p.alternate,p);break;case 4096:p.flags&=-4097;break;case 4100:p.flags&=-4097,VS(p.alternate,p);break;case 4:VS(p.alternate,p)}}catch(pt){es(p,p.return,pt)}if(E=p.sibling,E!==null){E.return=p.return,qe=E;break}qe=p.return}}}function hK(h,p,E){qe=h,vN(h)}function vN(h,p,E){for(var A=(h.mode&1)!==0;qe!==null;){var N=qe,j=N.child;if(N.tag===22&&A){var Q=N.memoizedState!==null||V0;if(!Q){var ue=N.alternate,Me=ue!==null&&ue.memoizedState!==null||Lu;ue=V0;var He=Lu;if(V0=Q,(Lu=Me)&&!He)for(qe=N;qe!==null;)Q=qe,Me=Q.child,Q.tag===22&&Q.memoizedState!==null?wN(N):Me!==null?(Me.return=Q,qe=Me):wN(N);for(;j!==null;)qe=j,vN(j),j=j.sibling;qe=N,V0=ue,Lu=He}xN(h)}else N.subtreeFlags&8772&&j!==null?(j.return=N,qe=j):xN(h)}}function xN(h){for(;qe!==null;){var p=qe;if(p.flags&8772){var E=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:Lu||$m(5,p);break;case 1:var A=p.stateNode;if(p.flags&4&&!Lu)if(E===null)A.componentDidMount();else{var N=p.elementType===p.type?E.memoizedProps:hr(p.type,E.memoizedProps);A.componentDidUpdate(N,E.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var j=p.updateQueue;j!==null&&ia(p,j,A);break;case 3:var Q=p.updateQueue;if(Q!==null){if(E=null,p.child!==null)switch(p.child.tag){case 5:E=ne(p.child.stateNode);break;case 1:E=p.child.stateNode}ia(p,Q,E)}break;case 5:var ue=p.stateNode;E===null&&p.flags&4&&ct(ue,p.type,p.memoizedProps,p);break;case 6:break;case 4:break;case 12:break;case 13:if(le&&p.memoizedState===null){var Me=p.alternate;if(Me!==null){var He=Me.memoizedState;if(He!==null){var st=He.dehydrated;st!==null&&$t(st)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Lu||p.flags&512&&OS(p)}catch(Dt){es(p,p.return,Dt)}}if(p===h){qe=null;break}if(E=p.sibling,E!==null){E.return=p.return,qe=E;break}qe=p.return}}function _N(h){for(;qe!==null;){var p=qe;if(p===h){qe=null;break}var E=p.sibling;if(E!==null){E.return=p.return,qe=E;break}qe=p.return}}function wN(h){for(;qe!==null;){var p=qe;try{switch(p.tag){case 0:case 11:case 15:var E=p.return;try{$m(4,p)}catch(Me){es(p,E,Me)}break;case 1:var A=p.stateNode;if(typeof A.componentDidMount=="function"){var N=p.return;try{A.componentDidMount()}catch(Me){es(p,N,Me)}}var j=p.return;try{OS(p)}catch(Me){es(p,j,Me)}break;case 5:var Q=p.return;try{OS(p)}catch(Me){es(p,Q,Me)}}}catch(Me){es(p,p.return,Me)}if(p===h){qe=null;break}var ue=p.sibling;if(ue!==null){ue.return=p.return,qe=ue;break}qe=p.return}}var B0=0,H0=1,W0=2,G0=3,$0=4;if(typeof Symbol=="function"&&Symbol.for){var qm=Symbol.for;B0=qm("selector.component"),H0=qm("selector.has_pseudo_class"),W0=qm("selector.role"),G0=qm("selector.test_id"),$0=qm("selector.text")}function US(h){var p=we(h);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(o(364));return p}if(h=Ot(h),h===null)throw Error(o(362));return h.stateNode.current}function zS(h,p){switch(p.$$typeof){case B0:if(h.type===p.value)return!0;break;case H0:e:{p=p.value,h=[h,0];for(var E=0;E<h.length;){var A=h[E++],N=h[E++],j=p[N];if(A.tag!==5||!ye(A)){for(;j!=null&&zS(A,j);)N++,j=p[N];if(N===p.length){p=!0;break e}else for(A=A.child;A!==null;)h.push(A,N),A=A.sibling}}p=!1}return p;case W0:if(h.tag===5&&Ve(h.stateNode,p.value))return!0;break;case $0:if((h.tag===5||h.tag===6)&&(h=W(h),h!==null&&0<=h.indexOf(p.value)))return!0;break;case G0:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function BS(h){switch(h.$$typeof){case B0:return"<"+(P(h.value)||"Unknown")+">";case H0:return":has("+(BS(h)||"")+")";case W0:return'[role="'+h.value+'"]';case $0:return'"'+h.value+'"';case G0:return'[data-testname="'+h.value+'"]';default:throw Error(o(365))}}function bN(h,p){var E=[];h=[h,0];for(var A=0;A<h.length;){var N=h[A++],j=h[A++],Q=p[j];if(N.tag!==5||!ye(N)){for(;Q!=null&&zS(N,Q);)j++,Q=p[j];if(j===p.length)E.push(N);else for(N=N.child;N!==null;)h.push(N,j),N=N.sibling}}return E}function HS(h,p){if(!At)throw Error(o(363));h=US(h),h=bN(h,p),p=[],h=Array.from(h);for(var E=0;E<h.length;){var A=h[E++];if(A.tag===5)ye(A)||p.push(A.stateNode);else for(A=A.child;A!==null;)h.push(A),A=A.sibling}return p}var fK=Math.ceil,q0=a.ReactCurrentDispatcher,WS=a.ReactCurrentOwner,fr=a.ReactCurrentBatchConfig,qt=0,Cr=null,Pr=null,Qr=0,Es=0,Vh=An(0),Or=0,Km=null,Uh=0,K0=0,GS=0,Ym=null,Ji=null,$S=0,qS=1/0;function zh(){qS=Er()+500}var Y0=!1,KS=null,Wl=null,X0=!1,Gl=null,Q0=0,Xm=0,YS=null,J0=-1,Z0=0;function Ui(){return qt&6?Er():J0!==-1?J0:J0=Er()}function $l(h){return h.mode&1?qt&2&&Qr!==0?Qr&-Qr:S0.transition!==null?(Z0===0&&(h=ja,ja<<=1,!(ja&4194240)&&(ja=64),Z0=h),Z0):(h=an,h!==0?h:Fe()):1}function Zs(h,p,E){if(50<Xm)throw Xm=0,YS=null,Error(o(185));var A=ex(h,p);return A===null?null:(Eu(A,p,E),(!(qt&2)||A!==Cr)&&(A===Cr&&(!(qt&2)&&(K0|=p),Or===4&&ql(A,Qr)),Zi(A,E),p===1&&qt===0&&!(h.mode&1)&&(zh(),Pn&&_s())),A)}function ex(h,p){h.lanes|=p;var E=h.alternate;for(E!==null&&(E.lanes|=p),E=h,h=h.return;h!==null;)h.childLanes|=p,E=h.alternate,E!==null&&(E.childLanes|=p),E=h,h=h.return;return E.tag===3?E.stateNode:null}function Zi(h,p){var E=h.callbackNode;hS(h,p);var A=Eh(h,h===Cr?Qr:0);if(A===0)E!==null&&Va(E),h.callbackNode=null,h.callbackPriority=0;else if(p=A&-A,h.callbackPriority!==p){if(E!=null&&Va(E),p===1)h.tag===0?b0(EN.bind(null,h)):w0(EN.bind(null,h)),Ze?et(function(){qt===0&&_s()}):Th(Ys,_s),E=null;else{switch(Pm(A)){case 1:E=Ys;break;case 4:E=mS;break;case 16:E=Im;break;case 536870912:E=Mh;break;default:E=Im}E=NN(E,SN.bind(null,h))}h.callbackPriority=p,h.callbackNode=E}}function SN(h,p){if(J0=-1,Z0=0,qt&6)throw Error(o(327));var E=h.callbackNode;if(Vu()&&h.callbackNode!==E)return null;var A=Eh(h,h===Cr?Qr:0);if(A===0)return null;if(A&30||A&h.expiredLanes||p)p=tx(h,A);else{p=A;var N=qt;qt|=2;var j=AN();(Cr!==h||Qr!==p)&&(zh(),Fu(h,p));do try{gK();break}catch(ue){MN(h,ue)}while(!0);Pu(),q0.current=j,qt=N,Pr!==null?p=0:(Cr=null,Qr=0,p=Or)}if(p!==0){if(p===2&&(N=Am(h),N!==0&&(A=N,p=XS(h,N))),p===1)throw E=Km,Fu(h,0),ql(h,A),Zi(h,Er()),E;if(p===6)ql(h,A);else{if(N=h.current.alternate,!(A&30)&&!pK(N)&&(p=tx(h,A),p===2&&(j=Am(h),j!==0&&(A=j,p=XS(h,j))),p===1))throw E=Km,Fu(h,0),ql(h,A),Zi(h,Er()),E;switch(h.finishedWork=N,h.finishedLanes=A,p){case 0:case 1:throw Error(o(345));case 2:ju(h,Ji);break;case 3:if(ql(h,A),(A&130023424)===A&&(p=$S+500-Er(),10<p)){if(Eh(h,0)!==0)break;if(N=h.suspendedLanes,(N&A)!==A){Ui(),h.pingedLanes|=h.suspendedLanes&N;break}h.timeoutHandle=ae(ju.bind(null,h,Ji),p);break}ju(h,Ji);break;case 4:if(ql(h,A),(A&4194240)===A)break;for(p=h.eventTimes,N=-1;0<A;){var Q=31-fi(A);j=1<<Q,Q=p[Q],Q>N&&(N=Q),A&=~j}if(A=N,A=Er()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*fK(A/1960))-A,10<A){h.timeoutHandle=ae(ju.bind(null,h,Ji),A);break}ju(h,Ji);break;case 5:ju(h,Ji);break;default:throw Error(o(329))}}}return Zi(h,Er()),h.callbackNode===E?SN.bind(null,h):null}function XS(h,p){var E=Ym;return h.current.memoizedState.isDehydrated&&(Fu(h,p).flags|=256),h=tx(h,p),h!==2&&(p=Ji,Ji=E,p!==null&&QS(p)),h}function QS(h){Ji===null?Ji=h:Ji.push.apply(Ji,h)}function pK(h){for(var p=h;;){if(p.flags&16384){var E=p.updateQueue;if(E!==null&&(E=E.stores,E!==null))for(var A=0;A<E.length;A++){var N=E[A],j=N.getSnapshot;N=N.value;try{if(!vs(j(),N))return!1}catch{return!1}}}if(E=p.child,p.subtreeFlags&16384&&E!==null)E.return=p,p=E;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function ql(h,p){for(p&=~GS,p&=~K0,h.suspendedLanes|=p,h.pingedLanes&=~p,h=h.expirationTimes;0<p;){var E=31-fi(p),A=1<<E;h[E]=-1,p&=~A}}function EN(h){if(qt&6)throw Error(o(327));Vu();var p=Eh(h,0);if(!(p&1))return Zi(h,Er()),null;var E=tx(h,p);if(h.tag!==0&&E===2){var A=Am(h);A!==0&&(p=A,E=XS(h,A))}if(E===1)throw E=Km,Fu(h,0),ql(h,p),Zi(h,Er()),E;if(E===6)throw Error(o(345));return h.finishedWork=h.current.alternate,h.finishedLanes=p,ju(h,Ji),Zi(h,Er()),null}function TN(h){Gl!==null&&Gl.tag===0&&!(qt&6)&&Vu();var p=qt;qt|=1;var E=fr.transition,A=an;try{if(fr.transition=null,an=1,h)return h()}finally{an=A,fr.transition=E,qt=p,!(qt&6)&&_s()}}function JS(){Es=Vh.current,en(Vh)}function Fu(h,p){h.finishedWork=null,h.finishedLanes=0;var E=h.timeoutHandle;if(E!==Re&&(h.timeoutHandle=Re,Se(E)),Pr!==null)for(E=Pr.return;E!==null;){var A=E;switch(Mr(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&Su();break;case 3:Fh(),en(Lr),en(qn),bS();break;case 5:_S(A);break;case 4:Fh();break;case 13:en(Xn);break;case 19:en(Xn);break;case 10:Ph(A.type._context);break;case 22:case 23:JS()}E=E.return}if(Cr=h,Pr=h=Kl(h.current,null),Qr=Es=p,Or=0,Km=null,GS=K0=Uh=0,Ji=Ym=null,pi!==null){for(p=0;p<pi.length;p++)if(E=pi[p],A=E.interleaved,A!==null){E.interleaved=null;var N=A.next,j=E.pending;if(j!==null){var Q=j.next;j.next=N,A.next=Q}E.pending=A}pi=null}return h}function MN(h,p){do{var E=Pr;try{if(Pu(),A0.current=N0,C0){for(var A=ir.memoizedState;A!==null;){var N=A.queue;N!==null&&(N.pending=null),A=A.next}C0=!1}if(jh=0,Wr=gi=ir=null,Vm=!1,Um=0,WS.current=null,E===null||E.return===null){Or=1,Km=p,Pr=null;break}e:{var j=h,Q=E.return,ue=E,Me=p;if(p=Qr,ue.flags|=32768,Me!==null&&typeof Me=="object"&&typeof Me.then=="function"){var He=Me,st=ue,Dt=st.tag;if(!(st.mode&1)&&(Dt===0||Dt===11||Dt===15)){var xt=st.alternate;xt?(st.updateQueue=xt.updateQueue,st.memoizedState=xt.memoizedState,st.lanes=xt.lanes):(st.updateQueue=null,st.memoizedState=null)}var In=qk(Q);if(In!==null){In.flags&=-257,Kk(In,Q,ue,j,p),In.mode&1&&$k(j,He,p),p=In,Me=He;var mt=p.updateQueue;if(mt===null){var xi=new Set;xi.add(Me),p.updateQueue=xi}else mt.add(Me);break e}else{if(!(p&1)){$k(j,He,p),ZS();break e}Me=Error(o(426))}}else if(nn&&ue.mode&1){var to=qk(Q);if(to!==null){!(to.flags&65536)&&(to.flags|=256),Kk(to,Q,ue,j,p),vS(Me);break e}}j=Me,Or!==4&&(Or=2),Ym===null?Ym=[j]:Ym.push(j),Me=PS(Me,ue),ue=Q;do{switch(ue.tag){case 3:ue.flags|=65536,p&=-p,ue.lanes|=p;var ge=Wk(ue,Me,p);km(ue,ge);break e;case 1:j=Me;var de=ue.type,be=ue.stateNode;if(!(ue.flags&128)&&(typeof de.getDerivedStateFromError=="function"||be!==null&&typeof be.componentDidCatch=="function"&&(Wl===null||!Wl.has(be)))){ue.flags|=65536,p&=-p,ue.lanes|=p;var Xe=Gk(ue,j,p);km(ue,Xe);break e}}ue=ue.return}while(ue!==null)}PN(E)}catch(pt){p=pt,Pr===E&&E!==null&&(Pr=E=E.return);continue}break}while(!0)}function AN(){var h=q0.current;return q0.current=N0,h===null?N0:h}function ZS(){(Or===0||Or===3||Or===2)&&(Or=4),Cr===null||!(Uh&268435455)&&!(K0&268435455)||ql(Cr,Qr)}function tx(h,p){var E=qt;qt|=2;var A=AN();Cr===h&&Qr===p||Fu(h,p);do try{mK();break}catch(N){MN(h,N)}while(!0);if(Pu(),qt=E,q0.current=A,Pr!==null)throw Error(o(261));return Cr=null,Qr=0,Or}function mK(){for(;Pr!==null;)CN(Pr)}function gK(){for(;Pr!==null&&!fS();)CN(Pr)}function CN(h){var p=kN(h.alternate,h,Es);h.memoizedProps=h.pendingProps,p===null?PN(h):Pr=p,WS.current=null}function PN(h){var p=h;do{var E=p.alternate;if(h=p.return,p.flags&32768){if(E=lK(E,p),E!==null){E.flags&=32767,Pr=E;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Or=6,Pr=null;return}}else if(E=sK(E,p,Es),E!==null){Pr=E;return}if(p=p.sibling,p!==null){Pr=p;return}Pr=p=h}while(p!==null);Or===0&&(Or=5)}function ju(h,p){var E=an,A=fr.transition;try{fr.transition=null,an=1,yK(h,p,E)}finally{fr.transition=A,an=E}return null}function yK(h,p,E){do Vu();while(Gl!==null);if(qt&6)throw Error(o(327));var A=h.finishedWork,N=h.finishedLanes;if(A===null)return null;if(h.finishedWork=null,h.finishedLanes=0,A===h.current)throw Error(o(177));h.callbackNode=null,h.callbackPriority=0;var j=A.lanes|A.childLanes;if(Tu(h,j),h===Cr&&(Pr=Cr=null,Qr=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||X0||(X0=!0,NN(Im,function(){return Vu(),null})),j=(A.flags&15990)!==0,A.subtreeFlags&15990||j){j=fr.transition,fr.transition=null;var Q=an;an=1;var ue=qt;qt|=4,WS.current=null,uK(h,A),dK(h,A),q(h.containerInfo),h.current=A,hK(A),pS(),qt=ue,an=Q,fr.transition=j}else h.current=A;if(X0&&(X0=!1,Gl=h,Q0=N),j=h.pendingLanes,j===0&&(Wl=null),Mu(A.stateNode),Zi(h,Er()),p!==null)for(E=h.onRecoverableError,A=0;A<p.length;A++)E(p[A]);if(Y0)throw Y0=!1,h=KS,KS=null,h;return Q0&1&&h.tag!==0&&Vu(),j=h.pendingLanes,j&1?h===YS?Xm++:(Xm=0,YS=h):Xm=0,_s(),null}function Vu(){if(Gl!==null){var h=Pm(Q0),p=fr.transition,E=an;try{if(fr.transition=null,an=16>h?16:h,Gl===null)var A=!1;else{if(h=Gl,Gl=null,Q0=0,qt&6)throw Error(o(331));var N=qt;for(qt|=4,qe=h.current;qe!==null;){var j=qe,Q=j.child;if(qe.flags&16){var ue=j.deletions;if(ue!==null){for(var Me=0;Me<ue.length;Me++){var He=ue[Me];for(qe=He;qe!==null;){var st=qe;switch(st.tag){case 0:case 11:case 15:Ou(8,st,j)}var Dt=st.child;if(Dt!==null)Dt.return=st,qe=Dt;else for(;qe!==null;){st=qe;var xt=st.sibling,In=st.return;if(fN(st),st===He){qe=null;break}if(xt!==null){xt.return=In,qe=xt;break}qe=In}}}var mt=j.alternate;if(mt!==null){var xi=mt.child;if(xi!==null){mt.child=null;do{var to=xi.sibling;xi.sibling=null,xi=to}while(xi!==null)}}qe=j}}if(j.subtreeFlags&2064&&Q!==null)Q.return=j,qe=Q;else e:for(;qe!==null;){if(j=qe,j.flags&2048)switch(j.tag){case 0:case 11:case 15:Ou(9,j,j.return)}var ge=j.sibling;if(ge!==null){ge.return=j.return,qe=ge;break e}qe=j.return}}var de=h.current;for(qe=de;qe!==null;){Q=qe;var be=Q.child;if(Q.subtreeFlags&2064&&be!==null)be.return=Q,qe=be;else e:for(Q=de;qe!==null;){if(ue=qe,ue.flags&2048)try{switch(ue.tag){case 0:case 11:case 15:$m(9,ue)}}catch(pt){es(ue,ue.return,pt)}if(ue===Q){qe=null;break e}var Xe=ue.sibling;if(Xe!==null){Xe.return=ue.return,qe=Xe;break e}qe=ue.return}}if(qt=N,_s(),ys&&typeof ys.onPostCommitFiberRoot=="function")try{ys.onPostCommitFiberRoot(Ua,h)}catch{}A=!0}return A}finally{an=E,fr.transition=p}}return!1}function IN(h,p,E){p=PS(E,p),p=Wk(h,p,1),wo(h,p),p=Ui(),h=ex(h,1),h!==null&&(Eu(h,1,p),Zi(h,p))}function es(h,p,E){if(h.tag===3)IN(h,h,E);else for(;p!==null;){if(p.tag===3){IN(p,h,E);break}else if(p.tag===1){var A=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(Wl===null||!Wl.has(A))){h=PS(E,h),h=Gk(p,h,1),wo(p,h),h=Ui(),p=ex(p,1),p!==null&&(Eu(p,1,h),Zi(p,h));break}}p=p.return}}function vK(h,p,E){var A=h.pingCache;A!==null&&A.delete(p),p=Ui(),h.pingedLanes|=h.suspendedLanes&E,Cr===h&&(Qr&E)===E&&(Or===4||Or===3&&(Qr&130023424)===Qr&&500>Er()-$S?Fu(h,0):GS|=E),Zi(h,p)}function RN(h,p){p===0&&(h.mode&1?(p=ra,ra<<=1,!(ra&130023424)&&(ra=4194304)):p=1);var E=Ui();h=ex(h,p),h!==null&&(Eu(h,p,E),Zi(h,E))}function xK(h){var p=h.memoizedState,E=0;p!==null&&(E=p.retryLane),RN(h,E)}function _K(h,p){var E=0;switch(h.tag){case 13:var A=h.stateNode,N=h.memoizedState;N!==null&&(E=N.retryLane);break;case 19:A=h.stateNode;break;default:throw Error(o(314))}A!==null&&A.delete(p),RN(h,E)}var kN;kN=function(h,p,E){if(h!==null)if(h.memoizedProps!==p.pendingProps||Lr.current)Ss=!0;else{if(!(h.lanes&E)&&!(p.flags&128))return Ss=!1,aK(h,p,E);Ss=!!(h.flags&131072)}else Ss=!1,nn&&p.flags&1048576&&Tr(p,D,p.index);switch(p.lanes=0,p.tag){case 2:var A=p.type;h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),h=p.pendingProps;var N=zl(p,qn.current);Hl(p,E),N=ES(null,p,A,h,N,E);var j=TS();return p.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,hi(A)?(j=!0,$s(p)):j=!1,p.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,Ih(p),N.updater=ku,p.stateNode=N,N._reactInternals=p,Nh(p,A,h,E),p=kS(null,p,A,!0,j,E)):(p.tag=0,nn&&j&&tn(p),Vi(null,p,N,E),p=p.child),p;case 16:A=p.elementType;e:{switch(h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),h=p.pendingProps,N=A._init,A=N(A._payload),p.type=A,N=p.tag=bK(A),h=hr(A,h),N){case 0:p=RS(null,p,A,h,E);break e;case 1:p=nN(null,p,A,h,E);break e;case 11:p=Qk(null,p,A,h,E);break e;case 14:p=Jk(null,p,A,hr(A.type,h),E);break e}throw Error(o(306,A,""))}return p;case 0:return A=p.type,N=p.pendingProps,N=p.elementType===A?N:hr(A,N),RS(h,p,A,N,E);case 1:return A=p.type,N=p.pendingProps,N=p.elementType===A?N:hr(A,N),nN(h,p,A,N,E);case 3:e:{if(rN(p),h===null)throw Error(o(387));A=p.pendingProps,j=p.memoizedState,N=j.element,Rh(h,p),Ru(p,A,null,E);var Q=p.memoizedState;if(A=Q.element,le&&j.isDehydrated)if(j={element:A,isDehydrated:!1,cache:Q.cache,transitions:Q.transitions},p.updateQueue.baseState=j,p.memoizedState=j,p.flags&256){N=Error(o(423)),p=iN(h,p,A,E,N);break e}else if(A!==N){N=Error(o(424)),p=iN(h,p,A,E,N);break e}else for(le&&(Ar=Pe(p.stateNode.containerInfo),xn=p,nn=!0,ji=null,sa=!1),E=Ek(p,null,A,E),p.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(Dh(),A===N){p=Ga(h,p,E);break e}Vi(h,p,A,E)}p=p.child}return p;case 5:return Tk(p),h===null&&yS(p),A=p.type,N=p.pendingProps,j=h!==null?h.memoizedProps:null,Q=N.children,re(A,N)?Q=null:j!==null&&re(A,j)&&(p.flags|=32),tN(h,p),Vi(h,p,Q,E),p.child;case 6:return h===null&&yS(p),null;case 13:return sN(h,p,E);case 4:return xS(p,p.stateNode.containerInfo),A=p.pendingProps,h===null?p.child=Lh(p,null,A,E):Vi(h,p,A,E),p.child;case 11:return A=p.type,N=p.pendingProps,N=p.elementType===A?N:hr(A,N),Qk(h,p,A,N,E);case 7:return Vi(h,p,p.pendingProps,E),p.child;case 8:return Vi(h,p,p.pendingProps.children,E),p.child;case 12:return Vi(h,p,p.pendingProps.children,E),p.child;case 10:e:{if(A=p.type._context,N=p.pendingProps,j=p.memoizedProps,Q=N.value,Iu(p,A,Q),j!==null)if(vs(j.value,Q)){if(j.children===N.children&&!Lr.current){p=Ga(h,p,E);break e}}else for(j=p.child,j!==null&&(j.return=p);j!==null;){var ue=j.dependencies;if(ue!==null){Q=j.child;for(var Me=ue.firstContext;Me!==null;){if(Me.context===A){if(j.tag===1){Me=ws(-1,E&-E),Me.tag=2;var He=j.updateQueue;if(He!==null){He=He.shared;var st=He.pending;st===null?Me.next=Me:(Me.next=st.next,st.next=Me),He.pending=Me}}j.lanes|=E,Me=j.alternate,Me!==null&&(Me.lanes|=E),Bl(j.return,E,p),ue.lanes|=E;break}Me=Me.next}}else if(j.tag===10)Q=j.type===p.type?null:j.child;else if(j.tag===18){if(Q=j.return,Q===null)throw Error(o(341));Q.lanes|=E,ue=Q.alternate,ue!==null&&(ue.lanes|=E),Bl(Q,E,p),Q=j.sibling}else Q=j.child;if(Q!==null)Q.return=j;else for(Q=j;Q!==null;){if(Q===p){Q=null;break}if(j=Q.sibling,j!==null){j.return=Q.return,Q=j;break}Q=Q.return}j=Q}Vi(h,p,N.children,E),p=p.child}return p;case 9:return N=p.type,A=p.pendingProps.children,Hl(p,E),N=Fi(N),A=A(N),p.flags|=1,Vi(h,p,A,E),p.child;case 14:return A=p.type,N=hr(A,p.pendingProps),N=hr(A.type,N),Jk(h,p,A,N,E);case 15:return Zk(h,p,p.type,p.pendingProps,E);case 17:return A=p.type,N=p.pendingProps,N=p.elementType===A?N:hr(A,N),h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),p.tag=1,hi(A)?(h=!0,$s(p)):h=!1,Hl(p,E),Nu(p,A,N),Nh(p,A,N,E),kS(null,p,A,!0,h,E);case 19:return cN(h,p,E);case 22:return eN(h,p,E)}throw Error(o(156,p.tag))};function NN(h,p){return Th(h,p)}function wK(h,p,E,A){this.tag=h,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function eo(h,p,E,A){return new wK(h,p,E,A)}function eE(h){return h=h.prototype,!(!h||!h.isReactComponent)}function bK(h){if(typeof h=="function")return eE(h)?1:0;if(h!=null){if(h=h.$$typeof,h===y)return 11;if(h===w)return 14}return 2}function Kl(h,p){var E=h.alternate;return E===null?(E=eo(h.tag,p,h.key,h.mode),E.elementType=h.elementType,E.type=h.type,E.stateNode=h.stateNode,E.alternate=h,h.alternate=E):(E.pendingProps=p,E.type=h.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=h.flags&14680064,E.childLanes=h.childLanes,E.lanes=h.lanes,E.child=h.child,E.memoizedProps=h.memoizedProps,E.memoizedState=h.memoizedState,E.updateQueue=h.updateQueue,p=h.dependencies,E.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},E.sibling=h.sibling,E.index=h.index,E.ref=h.ref,E}function nx(h,p,E,A,N,j){var Q=2;if(A=h,typeof h=="function")eE(h)&&(Q=1);else if(typeof h=="string")Q=5;else e:switch(h){case u:return Uu(E.children,N,j,p);case d:Q=8,N|=8;break;case f:return h=eo(12,E,p,N|2),h.elementType=f,h.lanes=j,h;case x:return h=eo(13,E,p,N),h.elementType=x,h.lanes=j,h;case _:return h=eo(19,E,p,N),h.elementType=_,h.lanes=j,h;case M:return rx(E,N,j,p);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case g:Q=10;break e;case v:Q=9;break e;case y:Q=11;break e;case w:Q=14;break e;case S:Q=16,A=null;break e}throw Error(o(130,h==null?h:typeof h,""))}return p=eo(Q,E,p,N),p.elementType=h,p.type=A,p.lanes=j,p}function Uu(h,p,E,A){return h=eo(7,h,A,p),h.lanes=E,h}function rx(h,p,E,A){return h=eo(22,h,A,p),h.elementType=M,h.lanes=E,h.stateNode={},h}function tE(h,p,E){return h=eo(6,h,null,p),h.lanes=E,h}function nE(h,p,E){return p=eo(4,h.children!==null?h.children:[],h.key,p),p.lanes=E,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}function SK(h,p,E,A,N){this.tag=p,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Re,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cm(0),this.expirationTimes=Cm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cm(0),this.identifierPrefix=A,this.onRecoverableError=N,le&&(this.mutableSourceEagerHydrationData=null)}function DN(h,p,E,A,N,j,Q,ue,Me){return h=new SK(h,p,E,ue,Me),p===1?(p=1,j===!0&&(p|=8)):p=0,j=eo(3,null,null,p),h.current=j,j.stateNode=h,j.memoizedState={element:A,isDehydrated:E,cache:null,transitions:null},Ih(j),h}function LN(h){if(!h)return Ln;h=h._reactInternals;e:{if(C(h)!==h||h.tag!==1)throw Error(o(170));var p=h;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(hi(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(o(171))}if(h.tag===1){var E=h.type;if(hi(E))return v0(h,E,p)}return p}function ON(h){var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(o(188)):(h=Object.keys(h).join(","),Error(o(268,h)));return h=U(p),h===null?null:h.stateNode}function FN(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var E=h.retryLane;h.retryLane=E!==0&&E<p?E:p}}function rE(h,p){FN(h,p),(h=h.alternate)&&FN(h,p)}function EK(h){return h=U(h),h===null?null:h.stateNode}function TK(){return null}return t.attemptContinuousHydration=function(h){if(h.tag===13){var p=Ui();Zs(h,134217728,p),rE(h,134217728)}},t.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var p=Ui(),E=$l(h);Zs(h,E,p),rE(h,E)}},t.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var p=h.stateNode;if(p.current.memoizedState.isDehydrated){var E=xo(p.pendingLanes);E!==0&&(Ks(p,E|1),Zi(p,Er()),!(qt&6)&&(zh(),_s()))}break;case 13:var A=Ui();TN(function(){return Zs(h,1,A)}),rE(h,1)}},t.batchedUpdates=function(h,p){var E=qt;qt|=1;try{return h(p)}finally{qt=E,qt===0&&(zh(),Pn&&_s())}},t.createComponentSelector=function(h){return{$$typeof:B0,value:h}},t.createContainer=function(h,p,E,A,N,j,Q){return DN(h,p,!1,null,E,A,N,j,Q)},t.createHasPseudoClassSelector=function(h){return{$$typeof:H0,value:h}},t.createHydrationContainer=function(h,p,E,A,N,j,Q,ue,Me){return h=DN(E,A,!0,h,N,j,Q,ue,Me),h.context=LN(null),E=h.current,A=Ui(),N=$l(E),j=ws(A,N),j.callback=p??null,wo(E,j),h.current.lanes=N,Eu(h,N,A),Zi(h,A),h},t.createPortal=function(h,p,E){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:A==null?null:""+A,children:h,containerInfo:p,implementation:E}},t.createRoleSelector=function(h){return{$$typeof:W0,value:h}},t.createTestNameSelector=function(h){return{$$typeof:G0,value:h}},t.createTextSelector=function(h){return{$$typeof:$0,value:h}},t.deferredUpdates=function(h){var p=an,E=fr.transition;try{return fr.transition=null,an=16,h()}finally{an=p,fr.transition=E}},t.discreteUpdates=function(h,p,E,A,N){var j=an,Q=fr.transition;try{return fr.transition=null,an=1,h(p,E,A,N)}finally{an=j,fr.transition=Q,qt===0&&zh()}},t.findAllNodes=HS,t.findBoundingRects=function(h,p){if(!At)throw Error(o(363));p=HS(h,p),h=[];for(var E=0;E<p.length;E++)h.push(X(p[E]));for(p=h.length-1;0<p;p--){E=h[p];for(var A=E.x,N=A+E.width,j=E.y,Q=j+E.height,ue=p-1;0<=ue;ue--)if(p!==ue){var Me=h[ue],He=Me.x,st=He+Me.width,Dt=Me.y,xt=Dt+Me.height;if(A>=He&&j>=Dt&&N<=st&&Q<=xt){h.splice(p,1);break}else if(A!==He||E.width!==Me.width||xt<j||Dt>Q){if(!(j!==Dt||E.height!==Me.height||st<A||He>N)){He>A&&(Me.width+=He-A,Me.x=A),st<N&&(Me.width=N-He),h.splice(p,1);break}}else{Dt>j&&(Me.height+=Dt-j,Me.y=j),xt<Q&&(Me.height=Q-Dt),h.splice(p,1);break}}}return h},t.findHostInstance=ON,t.findHostInstanceWithNoPortals=function(h){return h=O(h),h=h!==null?B(h):null,h===null?null:h.stateNode},t.findHostInstanceWithWarning=function(h){return ON(h)},t.flushControlled=function(h){var p=qt;qt|=1;var E=fr.transition,A=an;try{fr.transition=null,an=1,h()}finally{an=A,fr.transition=E,qt=p,qt===0&&(zh(),_s())}},t.flushPassiveEffects=Vu,t.flushSync=TN,t.focusWithin=function(h,p){if(!At)throw Error(o(363));for(h=US(h),p=bN(h,p),p=Array.from(p),h=0;h<p.length;){var E=p[h++];if(!ye(E)){if(E.tag===5&&Oe(E.stateNode))return!0;for(E=E.child;E!==null;)p.push(E),E=E.sibling}}return!1},t.getCurrentUpdatePriority=function(){return an},t.getFindAllNodesFailureDescription=function(h,p){if(!At)throw Error(o(363));var E=0,A=[];h=[US(h),0];for(var N=0;N<h.length;){var j=h[N++],Q=h[N++],ue=p[Q];if((j.tag!==5||!ye(j))&&(zS(j,ue)&&(A.push(BS(ue)),Q++,Q>E&&(E=Q)),Q<p.length))for(j=j.child;j!==null;)h.push(j,Q),j=j.sibling}if(E<p.length){for(h=[];E<p.length;E++)h.push(BS(p[E]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},t.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return ne(h.child.stateNode);default:return h.child.stateNode}},t.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:EK,findFiberByHostInstance:h.findFiberByHostInstance||TK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)h=!0;else{try{Ua=p.inject(h),ys=p}catch{}h=!!p.checkDCE}}return h},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(h,p,E,A){if(!At)throw Error(o(363));h=HS(h,p);var N=je(h,E,A).disconnect;return{disconnect:function(){N()}}},t.registerMutableSourceForHydration=function(h,p){var E=p._getVersion;E=E(p._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[p,E]:h.mutableSourceEagerHydrationData.push(p,E)},t.runWithPriority=function(h,p){var E=an;try{return an=h,p()}finally{an=E}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(h,p,E,A){var N=p.current,j=Ui(),Q=$l(N);return E=LN(E),p.context===null?p.context=E:p.pendingContext=E,p=ws(j,Q),p.payload={element:h},A=A===void 0?null:A,A!==null&&(p.callback=A),wo(N,p),h=Zs(N,Q,j),h!==null&&Ba(h,N,Q),Q},t};Pq.exports=OMe;var FMe=Pq.exports;const jMe=dP(FMe);var Iq={exports:{}},Rq={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(z,G){var q=z.length;z.push(G);e:for(;0<q;){var se=q-1>>>1,J=z[se];if(0<i(J,G))z[se]=G,z[q]=J,q=se;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var G=z[0],q=z.pop();if(q!==G){z[0]=q;e:for(var se=0,J=z.length,he=J>>>1;se<he;){var _e=2*(se+1)-1,re=z[_e],Y=_e+1,ae=z[Y];if(0>i(re,q))Y<J&&0>i(ae,re)?(z[se]=ae,z[Y]=q,se=Y):(z[se]=re,z[_e]=q,se=_e);else if(Y<J&&0>i(ae,q))z[se]=ae,z[Y]=q,se=Y;else break e}}return G}function i(z,G){var q=z.sortIndex-G.sortIndex;return q!==0?q:z.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,g=!1,v=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var G=t(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=z)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(c)}}function M(z){if(y=!1,S(z),!v)if(t(l)!==null)v=!0,ne(I);else{var G=t(c);G!==null&&oe(M,G.startTime-z)}}function I(z,G){v=!1,y&&(y=!1,_(T),T=-1),g=!0;var q=f;try{for(S(G),d=t(l);d!==null&&(!(d.expirationTime>G)||z&&!O());){var se=d.callback;if(typeof se=="function"){d.callback=null,f=d.priorityLevel;var J=se(d.expirationTime<=G);G=n.unstable_now(),typeof J=="function"?d.callback=J:d===t(l)&&r(l),S(G)}else r(l);d=t(l)}if(d!==null)var he=!0;else{var _e=t(c);_e!==null&&oe(M,_e.startTime-G),he=!1}return he}finally{d=null,f=q,g=!1}}var L=!1,P=null,T=-1,C=5,k=-1;function O(){return!(n.unstable_now()-k<C)}function U(){if(P!==null){var z=n.unstable_now();k=z;var G=!0;try{G=P(!0,z)}finally{G?V():(L=!1,P=null)}}else L=!1}var V;if(typeof w=="function")V=function(){w(U)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,Z=B.port2;B.port1.onmessage=U,V=function(){Z.postMessage(null)}}else V=function(){x(U,0)};function ne(z){P=z,L||(L=!0,V())}function oe(z,G){T=x(function(){z(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){v||g||(v=!0,ne(I))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(z){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var q=f;f=G;try{return z()}finally{f=q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var q=f;f=z;try{return G()}finally{f=q}},n.unstable_scheduleCallback=function(z,G,q){var se=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?se+q:se):q=se,z){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=q+J,z={id:u++,callback:G,priorityLevel:z,startTime:q,expirationTime:J,sortIndex:-1},q>se?(z.sortIndex=q,e(c,z),t(l)===null&&z===t(c)&&(y?(_(T),T=-1):y=!0,oe(M,q-se))):(z.sortIndex=J,e(l,z),v||g||(v=!0,ne(I))),z},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(z){var G=f;return function(){var q=f;f=G;try{return z.apply(this,arguments)}finally{f=q}}}})(Rq);Iq.exports=Rq;var Sj=Iq.exports;const VMe=n=>typeof n=="object"&&typeof n.then=="function",vd=[];function kq(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function Nq(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of vd)if(kq(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=vd.indexOf(i);s!==-1&&vd.splice(s,1)},promise:(VMe(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(vd.push(i),!t)throw i.promise}const UMe=(n,e,t)=>Nq(n,e,!1,t),zMe=(n,e,t)=>void Nq(n,e,!0,t),BMe=n=>{if(n===void 0||n.length===0)vd.splice(0,vd.length);else{const e=vd.find(t=>kq(n,t.keys,t.equal));e&&e.remove()}},mk={},HMe=n=>void Object.assign(mk,n);function WMe(n,e){function t(u,{args:d=[],attach:f,...g},v){let y=`${u[0].toUpperCase()}${u.slice(1)}`,x;if(u==="primitive"){if(g.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const _=g.object;x=bf(_,{type:u,root:v,attach:f,primitive:!0})}else{const _=mk[y];if(!_)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");x=bf(new _(...d),{type:u,root:v,attach:f,memoizedProps:{args:d}})}return x.__r3f.attach===void 0&&(x instanceof Wt?x.__r3f.attach="geometry":x instanceof di&&(x.__r3f.attach="material")),y!=="inject"&&rM(x,g),x}function r(u,d){let f=!1;if(d){var g,v;(g=d.__r3f)!=null&&g.attach?nM(u,d,d.__r3f.attach):d.isObject3D&&u.isObject3D&&(u.add(d),f=!0),f||(v=u.__r3f)==null||v.objects.push(d),d.__r3f||bf(d,{}),d.__r3f.parent=u,uP(d),Sf(d)}}function i(u,d,f){let g=!1;if(d){var v,y;if((v=d.__r3f)!=null&&v.attach)nM(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){d.parent=u,d.dispatchEvent({type:"added"});const x=u.children.filter(w=>w!==d),_=x.indexOf(f);u.children=[...x.slice(0,_),d,...x.slice(_)],g=!0}g||(y=u.__r3f)==null||y.objects.push(d),d.__r3f||bf(d,{}),d.__r3f.parent=u,uP(d),Sf(d)}}function s(u,d,f=!1){u&&[...u].forEach(g=>o(d,g,f))}function o(u,d,f){if(d){var g,v,y;if(d.__r3f&&(d.__r3f.parent=null),(g=u.__r3f)!=null&&g.objects&&(u.__r3f.objects=u.__r3f.objects.filter(M=>M!==d)),(v=d.__r3f)!=null&&v.attach)Cj(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){var x;u.remove(d),(x=d.__r3f)!=null&&x.root&&JMe(d.__r3f.root,d)}const w=(y=d.__r3f)==null?void 0:y.primitive,S=f===void 0?d.dispose!==null&&!w:f;if(!w){var _;s((_=d.__r3f)==null?void 0:_.objects,d,S),s(d.children,d,S)}delete d.__r3f,S&&d.dispose&&d.type!=="Scene"&&Sj.unstable_scheduleCallback(Sj.unstable_IdlePriority,()=>{try{d.dispose()}catch{}}),Sf(u)}}function a(u,d,f,g){var v;const y=(v=u.__r3f)==null?void 0:v.parent;if(!y)return;const x=t(d,f,u.__r3f.root);if(u.children){for(const _ of u.children)_.__r3f&&r(x,_);u.children=u.children.filter(_=>!_.__r3f)}u.__r3f.objects.forEach(_=>r(x,_)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(y,u),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),r(y,x),x.raycast&&x.__r3f.eventCount&&x.__r3f.root.getState().internal.interaction.push(x),[g,g.alternate].forEach(_=>{_!==null&&(_.stateNode=x,_.ref&&(typeof _.ref=="function"?_.ref(x):_.ref.current=x))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:jMe({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,d)=>{if(!d)return;const f=u.getState().scene;f.__r3f&&(f.__r3f.root=u,r(f,d))},removeChildFromContainer:(u,d)=>{d&&o(u.getState().scene,d)},insertInContainerBefore:(u,d,f)=>{if(!d||!f)return;const g=u.getState().scene;g.__r3f&&i(g,d,f)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var d;return!!((d=u==null?void 0:u.__r3f)!=null?d:{}).handlers},prepareUpdate(u,d,f,g){var v;if(((v=u==null?void 0:u.__r3f)!=null?v:{}).primitive&&g.object&&g.object!==u)return[!0];{const{args:x=[],children:_,...w}=g,{args:S=[],children:M,...I}=f;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((P,T)=>P!==S[T]))return[!0];const L=Uq(u,w,I,!0);return L.changes.length?[!1,L]:null}},commitUpdate(u,[d,f],g,v,y,x){d?a(u,g,y,x):rM(u,f)},commitMount(u,d,f,g){var v;const y=(v=u.__r3f)!=null?v:{};u.raycast&&y.handlers&&y.eventCount&&u.__r3f.root.getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>bf(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var d;const{attach:f,parent:g}=(d=u.__r3f)!=null?d:{};f&&g&&Cj(g,u,f),u.isObject3D&&(u.visible=!1),Sf(u)},unhideInstance(u,d){var f;const{attach:g,parent:v}=(f=u.__r3f)!=null?f:{};g&&v&&nM(v,u,g),(u.isObject3D&&d.visible==null||d.visible)&&(u.visible=!0),Sf(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():qf.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Un.fun(performance.now)?performance.now:Un.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Un.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Un.fun(clearTimeout)?clearTimeout:void 0}),applyProps:rM}}var Ej,Tj;const tM=n=>"colorSpace"in n||"outputColorSpace"in n,Dq=()=>{var n;return(n=mk.ColorManagement)!=null?n:null},Lq=n=>n&&n.isOrthographicCamera,GMe=n=>n&&n.hasOwnProperty("current"),g0=typeof window<"u"&&((Ej=window.document)!=null&&Ej.createElement||((Tj=window.navigator)==null?void 0:Tj.product)==="ReactNative")?R.useLayoutEffect:R.useEffect;function Oq(n){const e=R.useRef(n);return g0(()=>void(e.current=n),[n]),e}function $Me({set:n}){return g0(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}let Fq=class extends R.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}};Fq.getDerivedStateFromError=()=>({error:!0});const jq="__default",Mj=new Map,qMe=n=>n&&!!n.memoized&&!!n.changes;function Vq(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const _g=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},Un={obj:n=>n===Object(n)&&!Un.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Un.str(n)||Un.num(n))return n===e;const s=Un.obj(n);if(s&&r==="reference")return n===e;const o=Un.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!Un.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(Un.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function KMe(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function YMe(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function bf(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function cP(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const Aj=/-\d+$/;function nM(n,e,t){if(Un.str(t)){if(Aj.test(t)){const s=t.replace(Aj,""),{target:o,key:a}=cP(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=cP(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function Cj(n,e,t){var r,i;if(Un.str(t)){const{target:s,key:o}=cP(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function Uq(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){var u;const d=(u=n==null?void 0:n.__r3f)!=null?u:{},f=Object.entries(i),g=[];if(c){const y=Object.keys(l);for(let x=0;x<y.length;x++)i.hasOwnProperty(y[x])||f.unshift([y[x],jq+"remove"])}f.forEach(([y,x])=>{var _;if((_=n.__r3f)!=null&&_.primitive&&y==="object"||Un.equ(x,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return g.push([y,x,!0,[]]);let w=[];y.includes("-")&&(w=y.split("-")),g.push([y,x,!1,w]);for(const S in i){const M=i[S];S.startsWith(`${y}-`)&&g.push([S,M,!1,S.split("-")])}});const v={...i};return d.memoizedProps&&d.memoizedProps.args&&(v.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(v.attach=d.memoizedProps.attach),{memoized:v,changes:g}}function rM(n,e){var t,r,i;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:c}=qMe(e)?e:Uq(n,e),u=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let f=0;f<c.length;f++){let[g,v,y,x]=c[f];if(tM(n)){const M="srgb",I="srgb-linear";g==="encoding"?(g="colorSpace",v=v===3001?M:I):g==="outputEncoding"&&(g="outputColorSpace",v=v===3001?M:I)}let _=n,w=_[g];if(x.length&&(w=x.reduce((S,M)=>S[M],n),!(w&&w.set))){const[S,...M]=x.reverse();_=M.reverse().reduce((I,L)=>I[L],n),g=S}if(v===jq+"remove")if(_.constructor){let S=Mj.get(_.constructor);S||(S=new _.constructor,Mj.set(_.constructor,S)),v=S[g]}else v=0;if(y)v?s.handlers[g]=v:delete s.handlers[g],s.eventCount=Object.keys(s.handlers).length;else if(w&&w.set&&(w.copy||w instanceof Nd)){if(Array.isArray(v))w.fromArray?w.fromArray(v):w.set(...v);else if(w.copy&&v&&v.constructor&&w.constructor===v.constructor)w.copy(v);else if(v!==void 0){const S=w instanceof nt;!S&&w.setScalar?w.setScalar(v):w instanceof Nd&&v instanceof Nd?w.mask=v.mask:w.set(v),!Dq()&&!a.linear&&S&&w.convertSRGBToLinear()}}else if(_[g]=v,_[g]instanceof Yn&&_[g].format===as&&_[g].type===Dl){const S=_[g];tM(S)&&tM(a.gl)?S.colorSpace=a.gl.outputColorSpace:S.encoding=a.gl.outputEncoding}Sf(n)}if(s.parent&&a.internal&&n.raycast&&u!==s.eventCount){const f=a.internal.interaction.indexOf(n);f>-1&&a.internal.interaction.splice(f,1),s.eventCount&&a.internal.interaction.push(n)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(i=n.__r3f)!=null&&i.parent&&uP(n),n}function Sf(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function uP(n){n.onUpdate==null||n.onUpdate(n)}function XMe(n,e){n.manual||(Lq(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function T_(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function QMe(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return qf.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return qf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return qf.ContinuousEventPriority;default:return qf.DefaultEventPriority}}function zq(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function JMe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{zq(t.capturedMap,e,r,i)})}function ZMe(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],d=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+d*d))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var d;return(d=c.__r3f)==null?void 0:d.handlers["onPointer"+u]}))}function r(l,c){const u=n.getState(),d=new Set,f=[],g=c?c(u.internal.interaction):u.internal.interaction;for(let _=0;_<g.length;_++){const w=_g(g[_]);w&&(w.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function v(_){const w=_g(_);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var S;w.events.compute==null||w.events.compute(l,w,(S=w.previousRoot)==null?void 0:S.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(_,!0):[]}let y=g.flatMap(v).sort((_,w)=>{const S=_g(_.object),M=_g(w.object);return!S||!M?_.distance-w.distance:M.events.priority-S.events.priority||_.distance-w.distance}).filter(_=>{const w=T_(_);return d.has(w)?!1:(d.add(w),!0)});u.events.filter&&(y=u.events.filter(y,u));for(const _ of y){let w=_.object;for(;w;){var x;(x=w.__r3f)!=null&&x.eventCount&&f.push({..._,eventObject:w}),w=w.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let _ of u.internal.capturedMap.get(l.pointerId).values())d.has(T_(_.intersection))||f.push(_.intersection);return f}function i(l,c,u,d){const f=n.getState();if(l.length){const g={stopped:!1};for(const v of l){const y=_g(v.object)||f,{raycaster:x,pointer:_,camera:w,internal:S}=y,M=new $(_.x,_.y,0).unproject(w),I=k=>{var O,U;return(O=(U=S.capturedMap.get(k))==null?void 0:U.has(v.eventObject))!=null?O:!1},L=k=>{const O={intersection:v,target:c.target};S.capturedMap.has(k)?S.capturedMap.get(k).set(v.eventObject,O):S.capturedMap.set(k,new Map([[v.eventObject,O]])),c.target.setPointerCapture(k)},P=k=>{const O=S.capturedMap.get(k);O&&zq(S.capturedMap,v.eventObject,O,k)};let T={};for(let k in c){let O=c[k];typeof O!="function"&&(T[k]=O)}let C={...v,...T,pointer:_,intersections:l,stopped:g.stopped,delta:u,unprojectedPoint:M,ray:x.ray,camera:w,stopPropagation(){const k="pointerId"in c&&S.capturedMap.get(c.pointerId);if((!k||k.has(v.eventObject))&&(C.stopped=g.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(O=>O.eventObject===v.eventObject))){const O=l.slice(0,l.indexOf(v));s([...O,v])}},target:{hasPointerCapture:I,setPointerCapture:L,releasePointerCapture:P},currentTarget:{hasPointerCapture:I,setPointerCapture:L,releasePointerCapture:P},nativeEvent:c};if(d(C),g.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(d=>d.object===u.object&&d.index===u.index&&d.instanceId===u.instanceId)){const f=u.eventObject.__r3f,g=f==null?void 0:f.handlers;if(c.hovered.delete(T_(u)),f!=null&&f.eventCount){const v={...u,intersections:l};g.onPointerOut==null||g.onPointerOut(v),g.onPointerLeave==null||g.onPointerLeave(v)}}}function o(l,c){for(let u=0;u<c.length;u++){const d=c[u].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:d,internal:f}=n.getState();f.lastEvent.current=u;const g=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=r(u,g?t:void 0),_=v?e(u):0;l==="onPointerDown"&&(f.initialClick=[u.offsetX,u.offsetY],f.initialHits=x.map(S=>S.eventObject)),v&&!x.length&&_<=2&&(o(u,f.interaction),d&&d(u)),g&&s(x);function w(S){const M=S.eventObject,I=M.__r3f,L=I==null?void 0:I.handlers;if(I!=null&&I.eventCount)if(g){if(L.onPointerOver||L.onPointerEnter||L.onPointerOut||L.onPointerLeave){const P=T_(S),T=f.hovered.get(P);T?T.stopped&&S.stopPropagation():(f.hovered.set(P,S),L.onPointerOver==null||L.onPointerOver(S),L.onPointerEnter==null||L.onPointerEnter(S))}L.onPointerMove==null||L.onPointerMove(S)}else{const P=L[l];P?(!v||f.initialHits.includes(M))&&(o(u,f.interaction.filter(T=>!f.initialHits.includes(T))),P(S)):v&&f.initialHits.includes(M)&&o(u,f.interaction.filter(T=>!f.initialHits.includes(T)))}}i(x,u,_,w)}}return{handlePointer:a}}const Bq=n=>!!(n!=null&&n.render),Hq=R.createContext(null),eAe=(n,e)=>{const t=NMe((a,l)=>{const c=new $,u=new $,d=new $;function f(_=l().camera,w=u,S=l().size){const{width:M,height:I,top:L,left:P}=S,T=M/I;w instanceof $?d.copy(w):d.set(...w);const C=_.getWorldPosition(c).distanceTo(d);if(Lq(_))return{width:M/_.zoom,height:I/_.zoom,top:L,left:P,factor:1,distance:C,aspect:T};{const k=_.fov*Math.PI/180,O=2*Math.tan(k/2)*C,U=O*(M/I);return{width:U,height:O,top:L,left:P,factor:M/U,distance:C,aspect:T}}}let g;const v=_=>a(w=>({performance:{...w.performance,current:_}})),y=new Ie;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(_=1)=>n(l(),_),advance:(_,w)=>e(_,w,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new dk,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=l();g&&clearTimeout(g),_.performance.current!==_.performance.min&&v(_.performance.min),g=setTimeout(()=>v(l().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:f},setEvents:_=>a(w=>({...w,events:{...w.events,..._}})),setSize:(_,w,S,M,I)=>{const L=l().camera,P={width:_,height:w,top:M||0,left:I||0,updateStyle:S};a(T=>({size:P,viewport:{...T.viewport,...f(L,u,P)}}))},setDpr:_=>a(w=>{const S=Vq(_);return{viewport:{...w.viewport,dpr:S,initialDpr:w.viewport.initialDpr||S}}}),setFrameloop:(_="always")=>{const w=l().clock;w.stop(),w.elapsedTime=0,_!=="never"&&(w.start(),w.elapsedTime=0),a(()=>({frameloop:_}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:R.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(_,w,S)=>{const M=l().internal;return M.priority=M.priority+(w>0?1:0),M.subscribers.push({ref:_,priority:w,store:S}),M.subscribers=M.subscribers.sort((I,L)=>I.priority-L.priority),()=>{const I=l().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(w>0?1:0),I.subscribers=I.subscribers.filter(L=>L.ref!==_))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:d}=t.getState();if(l!==i||c.dpr!==s){var f;i=l,s=c.dpr,XMe(a,l),u.setPixelRatio(c.dpr);const g=(f=l.updateStyle)!=null?f:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,g)}a!==o&&(o=a,d(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let M_,tAe=new Set,nAe=new Set,rAe=new Set;function iM(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function wg(n,e){switch(n){case"before":return iM(tAe,e);case"after":return iM(nAe,e);case"tail":return iM(rAe,e)}}let sM,oM;function aM(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),sM=e.internal.subscribers,M_=0;M_<sM.length;M_++)oM=sM[M_],oM.ref.current(oM.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function iAe(n){let e=!1,t,r,i;function s(l){r=requestAnimationFrame(s),e=!0,t=0,wg("before",l);for(const u of n.values()){var c;i=u.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((c=i.gl.xr)!=null&&c.isPresenting)&&(t+=aM(l,i))}if(wg("after",l),t===0)return wg("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,c=1){var u;if(!l)return n.forEach(d=>o(d.store.getState()),c);(u=l.gl.xr)!=null&&u.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,u,d){if(c&&wg("before",l),u)aM(l,u,d);else for(const f of n.values())aM(l,f.store.getState());c&&wg("after",l)}return{loop:s,invalidate:o,advance:a}}function Wq(){const n=R.useContext(Hq);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function el(n=t=>t,e){return Wq()(n,e)}function sAe(n,e=0){const t=Wq(),r=t.getState().internal.subscribe,i=Oq(n);return g0(()=>r(i,e,t),[e,r,t]),null}function Gq(n,e){return function(t,...r){const i=new t;return n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,KMe(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message}`))))))}}function y0(n,e,t,r){const i=Array.isArray(e)?e:[e],s=UMe(Gq(t,r),[n,...i],{equal:Un.equ});return Array.isArray(e)?s:s[0]}y0.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return zMe(Gq(t),[n,...r])};y0.clear=function(n,e){const t=Array.isArray(e)?e:[e];return BMe([n,...t])};const em=new Map,{invalidate:Pj,advance:Ij}=iAe(em),{reconciler:R1,applyProps:pf}=WMe(em,QMe),mf={objects:"shallow",strict:!1},oAe=(n,e)=>{const t=typeof n=="function"?n(e):n;return Bq(t)?t:new tS({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function aAe(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:r,top:i,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:s}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function lAe(n){const e=em.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||eAe(Pj,Ij),o=t||R1.createContainer(s,qf.ConcurrentRoot,null,!1,null,"",i,null);e||em.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:d,size:f,scene:g,events:v,onCreated:y,shadows:x=!1,linear:_=!1,flat:w=!1,legacy:S=!1,orthographic:M=!1,frameloop:I="always",dpr:L=[1,2],performance:P,raycaster:T,camera:C,onPointerMissed:k}=u,O=s.getState(),U=O.gl;O.gl||O.set({gl:U=oAe(d,n)});let V=O.raycaster;V||O.set({raycaster:V=new Mq});const{params:B,...Z}=T||{};if(Un.equ(Z,V,mf)||pf(V,{...Z}),Un.equ(B,V.params,mf)||pf(V,{params:{...V.params,...B}}),!O.camera||O.camera===c&&!Un.equ(c,C,mf)){c=C;const J=C instanceof t0,he=J?C:M?new $c(0,0,0,0,.1,1e3):new Sr(75,0,.1,1e3);J||(he.position.z=5,C&&pf(he,C),!O.camera&&!(C!=null&&C.rotation)&&he.lookAt(0,0,0)),O.set({camera:he})}if(!O.scene){let J;g instanceof I1?J=g:(J=new I1,g&&pf(J,g)),O.set({scene:bf(J)})}if(!O.xr){var ne;const J=(re,Y)=>{const ae=s.getState();ae.frameloop!=="never"&&Ij(re,!0,ae,Y)},he=()=>{const re=s.getState();re.gl.xr.enabled=re.gl.xr.isPresenting,re.gl.xr.setAnimationLoop(re.gl.xr.isPresenting?J:null),re.gl.xr.isPresenting||Pj(re)},_e={connect(){const re=s.getState().gl;re.xr.addEventListener("sessionstart",he),re.xr.addEventListener("sessionend",he)},disconnect(){const re=s.getState().gl;re.xr.removeEventListener("sessionstart",he),re.xr.removeEventListener("sessionend",he)}};typeof((ne=U.xr)==null?void 0:ne.addEventListener)=="function"&&_e.connect(),O.set({xr:_e})}if(U.shadowMap){const J=U.shadowMap.enabled,he=U.shadowMap.type;if(U.shadowMap.enabled=!!x,Un.boo(x))U.shadowMap.type=hy;else if(Un.str(x)){var oe;const _e={basic:A7,percentage:Yb,soft:hy,variance:fd};U.shadowMap.type=(oe=_e[x])!=null?oe:hy}else Un.obj(x)&&Object.assign(U.shadowMap,x);(J!==U.shadowMap.enabled||he!==U.shadowMap.type)&&(U.shadowMap.needsUpdate=!0)}const z=Dq();z&&("enabled"in z?z.enabled=!S:"legacyMode"in z&&(z.legacyMode=S)),pf(U,{outputEncoding:_?3e3:3001,toneMapping:w?Wo:DR}),O.legacy!==S&&O.set(()=>({legacy:S})),O.linear!==_&&O.set(()=>({linear:_})),O.flat!==w&&O.set(()=>({flat:w})),d&&!Un.fun(d)&&!Bq(d)&&!Un.equ(d,U,mf)&&pf(U,d),v&&!O.events.handlers&&O.set({events:v(s)});const se=aAe(n,f);return Un.equ(se,O.size,mf)||O.setSize(se.width,se.height,se.updateStyle,se.top,se.left),L&&O.viewport.dpr!==Vq(L)&&O.setDpr(L),O.frameloop!==I&&O.setFrameloop(I),O.onPointerMissed||O.set({onPointerMissed:k}),P&&!Un.equ(P,O.performance,mf)&&O.set(J=>({performance:{...J.performance,...P}})),a=y,l=!0,this},render(u){return l||this.configure(),R1.updateContainer(R.createElement(cAe,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){$q(n)}}}function cAe({store:n,children:e,onCreated:t,rootElement:r}){return g0(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),R.createElement(Hq.Provider,{value:n},e)}function $q(n,e){const t=em.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),R1.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),YMe(i),em.delete(n)}catch{}},500)})}}R1.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:R.version});function wv(){return wv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wv.apply(null,arguments)}function Rj(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function uAe({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=R.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=R.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,u=R.useRef(!1);R.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[d,f,g]=R.useMemo(()=>{const _=()=>{if(!a.current.element)return;const{left:w,top:S,width:M,height:I,bottom:L,right:P,x:T,y:C}=a.current.element.getBoundingClientRect(),k={left:w,top:S,width:M,height:I,bottom:L,right:P,x:T,y:C};a.current.element instanceof HTMLElement&&r&&(k.height=a.current.element.offsetHeight,k.width=a.current.element.offsetWidth),Object.freeze(k),u.current&&!pAe(a.current.lastBounds,k)&&o(a.current.lastBounds=k)};return[_,c?Rj(_,c):_,l?Rj(_,l):_]},[o,r,l,c]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",g,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function y(){a.current.element&&(a.current.resizeObserver=new i(g),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(_=>_.addEventListener("scroll",g,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{g()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const x=_=>{!_||_===a.current.element||(v(),a.current.element=_,a.current.scrollContainers=qq(_),y())};return hAe(g,!!e),dAe(f),R.useEffect(()=>{v(),y()},[e,g,f]),R.useEffect(()=>v,[]),[x,s,d]}function dAe(n){R.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function hAe(n,e){R.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function qq(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...qq(n.parentElement)]}const fAe=["x","y","top","bottom","left","right","width","height"],pAe=(n,e)=>fAe.every(t=>n[t]===e[t]);var mAe=Object.defineProperty,gAe=Object.defineProperties,yAe=Object.getOwnPropertyDescriptors,kj=Object.getOwnPropertySymbols,vAe=Object.prototype.hasOwnProperty,xAe=Object.prototype.propertyIsEnumerable,Nj=(n,e,t)=>e in n?mAe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Dj=(n,e)=>{for(var t in e||(e={}))vAe.call(e,t)&&Nj(n,t,e[t]);if(kj)for(var t of kj(e))xAe.call(e,t)&&Nj(n,t,e[t]);return n},_Ae=(n,e)=>gAe(n,yAe(e)),Lj,Oj;typeof window<"u"&&((Lj=window.document)!=null&&Lj.createElement||((Oj=window.navigator)==null?void 0:Oj.product)==="ReactNative")?R.useLayoutEffect:R.useEffect;function Kq(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=Kq(r,e,t);if(i)return i;r=r.sibling}}function Yq(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const Fj=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=Fj;return}return Fj.apply(this,arguments)};const gk=Yq(R.createContext(null));class Xq extends R.Component{render(){return R.createElement(gk.Provider,{value:this._reactInternals},this.props.children)}}function wAe(){const n=R.useContext(gk);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=R.useId();return R.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=Kq(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function bAe(){const n=wAe(),[e]=R.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==gk&&!e.has(i)&&e.set(i,R.useContext(Yq(i)))}t=t.return}return e}function SAe(){const n=bAe();return R.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>R.createElement(e,null,R.createElement(t.Provider,_Ae(Dj({},r),{value:n.get(t)}))),e=>R.createElement(Xq,Dj({},e))),[n])}const lM={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function EAe(n){const{handlePointer:e}=ZMe(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(lM).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=lM[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=lM[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const TAe=R.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=EAe,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:d,legacy:f,orthographic:g,frameloop:v,dpr:y,performance:x,raycaster:_,camera:w,scene:S,onPointerMissed:M,onCreated:I,...L},P){R.useMemo(()=>HMe(IMe),[]);const T=SAe(),[C,k]=uAe({scroll:!0,debounce:{scroll:50,resize:0},...r}),O=R.useRef(null),U=R.useRef(null);R.useImperativeHandle(P,()=>O.current);const V=Oq(M),[B,Z]=R.useState(!1),[ne,oe]=R.useState(!1);if(B)throw B;if(ne)throw ne;const z=R.useRef(null);g0(()=>{const q=O.current;k.width>0&&k.height>0&&q&&(z.current||(z.current=lAe(q)),z.current.configure({gl:s,events:o,shadows:c,linear:u,flat:d,legacy:f,orthographic:g,frameloop:v,dpr:y,performance:x,raycaster:_,camera:w,scene:S,size:k,onPointerMissed:(...se)=>V.current==null?void 0:V.current(...se),onCreated:se=>{se.events.connect==null||se.events.connect(a?GMe(a)?a.current:a:U.current),l&&se.setEvents({compute:(J,he)=>{const _e=J[l+"X"],re=J[l+"Y"];he.pointer.set(_e/he.size.width*2-1,-(re/he.size.height)*2+1),he.raycaster.setFromCamera(he.pointer,he.camera)}}),I==null||I(se)}}),z.current.render(R.createElement(T,null,R.createElement(Fq,{set:oe},R.createElement(R.Suspense,{fallback:R.createElement($Me,{set:Z})},e)))))}),R.useEffect(()=>{const q=O.current;if(q)return()=>$q(q)},[]);const G=a?"none":"auto";return R.createElement("div",wv({ref:U,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:G,...i}},L),R.createElement("div",{ref:C,style:{width:"100%",height:"100%"}},R.createElement("canvas",{ref:O,style:{display:"block"}},t)))}),MAe=R.forwardRef(function(e,t){return R.createElement(Xq,null,R.createElement(TAe,wv({},e,{ref:t})))});var AAe=Object.defineProperty,CAe=(n,e,t)=>e in n?AAe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,PAe=(n,e,t)=>(CAe(n,e+"",t),t);class IAe{constructor(){PAe(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var RAe=Object.defineProperty,kAe=(n,e,t)=>e in n?RAe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_t=(n,e,t)=>(kAe(n,typeof e!="symbol"?e+"":e,t),t);const A_=new xm,jj=new il,NAe=Math.cos(70*(Math.PI/180)),Vj=(n,e)=>(n%e+e)%e;let DAe=class extends IAe{constructor(e,t){super(),_t(this,"object"),_t(this,"domElement"),_t(this,"enabled",!0),_t(this,"target",new $),_t(this,"minDistance",0),_t(this,"maxDistance",1/0),_t(this,"minZoom",0),_t(this,"maxZoom",1/0),_t(this,"minPolarAngle",0),_t(this,"maxPolarAngle",Math.PI),_t(this,"minAzimuthAngle",-1/0),_t(this,"maxAzimuthAngle",1/0),_t(this,"enableDamping",!1),_t(this,"dampingFactor",.05),_t(this,"enableZoom",!0),_t(this,"zoomSpeed",1),_t(this,"enableRotate",!0),_t(this,"rotateSpeed",1),_t(this,"enablePan",!0),_t(this,"panSpeed",1),_t(this,"screenSpacePanning",!0),_t(this,"keyPanSpeed",7),_t(this,"zoomToCursor",!1),_t(this,"autoRotate",!1),_t(this,"autoRotateSpeed",2),_t(this,"reverseOrbit",!1),_t(this,"reverseHorizontalOrbit",!1),_t(this,"reverseVerticalOrbit",!1),_t(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),_t(this,"mouseButtons",{LEFT:nd.ROTATE,MIDDLE:nd.DOLLY,RIGHT:nd.PAN}),_t(this,"touches",{ONE:rd.ROTATE,TWO:rd.DOLLY_PAN}),_t(this,"target0"),_t(this,"position0"),_t(this,"zoom0"),_t(this,"_domElementKeyEvents",null),_t(this,"getPolarAngle"),_t(this,"getAzimuthalAngle"),_t(this,"setPolarAngle"),_t(this,"setAzimuthalAngle"),_t(this,"getDistance"),_t(this,"getZoomScale"),_t(this,"listenToKeyEvents"),_t(this,"stopListenToKeyEvents"),_t(this,"saveState"),_t(this,"reset"),_t(this,"update"),_t(this,"connect"),_t(this,"dispose"),_t(this,"dollyIn"),_t(this,"dollyOut"),_t(this,"getScale"),_t(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=ie=>{let De=Vj(ie,2*Math.PI),Ke=u.phi;Ke<0&&(Ke+=2*Math.PI),De<0&&(De+=2*Math.PI);let ee=Math.abs(De-Ke);2*Math.PI-ee<ee&&(De<Ke?De+=2*Math.PI:Ke+=2*Math.PI),d.phi=De-Ke,r.update()},this.setAzimuthalAngle=ie=>{let De=Vj(ie,2*Math.PI),Ke=u.theta;Ke<0&&(Ke+=2*Math.PI),De<0&&(De+=2*Math.PI);let ee=Math.abs(De-Ke);2*Math.PI-ee<ee&&(De<Ke?De+=2*Math.PI:Ke+=2*Math.PI),d.theta=De-Ke,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=ie=>{ie.addEventListener("keydown",rt),this._domElementKeyEvents=ie},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",rt),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const ie=new $,De=new $(0,1,0),Ke=new Di().setFromUnitVectors(e.up,De),ee=Ke.clone().invert(),ve=new $,ke=new Di,We=2*Math.PI;return function(){const jt=r.object.position;Ke.setFromUnitVectors(e.up,De),ee.copy(Ke).invert(),ie.copy(jt).sub(r.target),ie.applyQuaternion(Ke),u.setFromVector3(ie),r.autoRotate&&l===a.NONE&&B(U()),r.enableDamping?(u.theta+=d.theta*r.dampingFactor,u.phi+=d.phi*r.dampingFactor):(u.theta+=d.theta,u.phi+=d.phi);let Xt=r.minAzimuthAngle,on=r.maxAzimuthAngle;isFinite(Xt)&&isFinite(on)&&(Xt<-Math.PI?Xt+=We:Xt>Math.PI&&(Xt-=We),on<-Math.PI?on+=We:on>Math.PI&&(on-=We),Xt<=on?u.theta=Math.max(Xt,Math.min(on,u.theta)):u.theta=u.theta>(Xt+on)/2?Math.max(Xt,u.theta):Math.min(on,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(g,r.dampingFactor):r.target.add(g),r.zoomToCursor&&C||r.object.isOrthographicCamera?u.radius=he(u.radius):u.radius=he(u.radius*f),ie.setFromSpherical(u),ie.applyQuaternion(ee),jt.copy(r.target).add(ie),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(d.theta*=1-r.dampingFactor,d.phi*=1-r.dampingFactor,g.multiplyScalar(1-r.dampingFactor)):(d.set(0,0,0),g.set(0,0,0));let Wn=!1;if(r.zoomToCursor&&C){let Zt=null;if(r.object instanceof Sr&&r.object.isPerspectiveCamera){const Gn=ie.length();Zt=he(Gn*f);const hn=Gn-Zt;r.object.position.addScaledVector(P,hn),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Gn=new $(T.x,T.y,0);Gn.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix(),Wn=!0;const hn=new $(T.x,T.y,0);hn.unproject(r.object),r.object.position.sub(hn).add(Gn),r.object.updateMatrixWorld(),Zt=ie.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Zt!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Zt).add(r.object.position):(A_.origin.copy(r.object.position),A_.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(A_.direction))<NAe?e.lookAt(r.target):(jj.setFromNormalAndCoplanarPoint(r.object.up,r.target),A_.intersectPlane(jj,r.target))))}else r.object instanceof $c&&r.object.isOrthographicCamera&&(Wn=f!==1,Wn&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix()));return f=1,C=!1,Wn||ve.distanceToSquared(r.object.position)>c||8*(1-ke.dot(r.object.quaternion))>c?(r.dispatchEvent(i),ve.copy(r.object.position),ke.copy(r.object.quaternion),Wn=!1,!0):!1}})(),this.connect=ie=>{r.domElement=ie,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",ct),r.domElement.addEventListener("pointerdown",X),r.domElement.addEventListener("pointercancel",ye),r.domElement.addEventListener("wheel",je)},this.dispose=()=>{var ie,De,Ke,ee,ve,ke;r.domElement&&(r.domElement.style.touchAction="auto"),(ie=r.domElement)==null||ie.removeEventListener("contextmenu",ct),(De=r.domElement)==null||De.removeEventListener("pointerdown",X),(Ke=r.domElement)==null||Ke.removeEventListener("pointercancel",ye),(ee=r.domElement)==null||ee.removeEventListener("wheel",je),(ve=r.domElement)==null||ve.ownerDocument.removeEventListener("pointermove",W),(ke=r.domElement)==null||ke.ownerDocument.removeEventListener("pointerup",ye),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",rt)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new lP,d=new lP;let f=1;const g=new $,v=new Ie,y=new Ie,x=new Ie,_=new Ie,w=new Ie,S=new Ie,M=new Ie,I=new Ie,L=new Ie,P=new $,T=new Ie;let C=!1;const k=[],O={};function U(){return 2*Math.PI/60/60*r.autoRotateSpeed}function V(){return Math.pow(.95,r.zoomSpeed)}function B(ie){r.reverseOrbit||r.reverseHorizontalOrbit?d.theta+=ie:d.theta-=ie}function Z(ie){r.reverseOrbit||r.reverseVerticalOrbit?d.phi+=ie:d.phi-=ie}const ne=(()=>{const ie=new $;return function(Ke,ee){ie.setFromMatrixColumn(ee,0),ie.multiplyScalar(-Ke),g.add(ie)}})(),oe=(()=>{const ie=new $;return function(Ke,ee){r.screenSpacePanning===!0?ie.setFromMatrixColumn(ee,1):(ie.setFromMatrixColumn(ee,0),ie.crossVectors(r.object.up,ie)),ie.multiplyScalar(Ke),g.add(ie)}})(),z=(()=>{const ie=new $;return function(Ke,ee){const ve=r.domElement;if(ve&&r.object instanceof Sr&&r.object.isPerspectiveCamera){const ke=r.object.position;ie.copy(ke).sub(r.target);let We=ie.length();We*=Math.tan(r.object.fov/2*Math.PI/180),ne(2*Ke*We/ve.clientHeight,r.object.matrix),oe(2*ee*We/ve.clientHeight,r.object.matrix)}else ve&&r.object instanceof $c&&r.object.isOrthographicCamera?(ne(Ke*(r.object.right-r.object.left)/r.object.zoom/ve.clientWidth,r.object.matrix),oe(ee*(r.object.top-r.object.bottom)/r.object.zoom/ve.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function G(ie){r.object instanceof Sr&&r.object.isPerspectiveCamera||r.object instanceof $c&&r.object.isOrthographicCamera?f=ie:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function q(ie){G(f/ie)}function se(ie){G(f*ie)}function J(ie){if(!r.zoomToCursor||!r.domElement)return;C=!0;const De=r.domElement.getBoundingClientRect(),Ke=ie.clientX-De.left,ee=ie.clientY-De.top,ve=De.width,ke=De.height;T.x=Ke/ve*2-1,T.y=-(ee/ke)*2+1,P.set(T.x,T.y,1).unproject(r.object).sub(r.object.position).normalize()}function he(ie){return Math.max(r.minDistance,Math.min(r.maxDistance,ie))}function _e(ie){v.set(ie.clientX,ie.clientY)}function re(ie){J(ie),M.set(ie.clientX,ie.clientY)}function Y(ie){_.set(ie.clientX,ie.clientY)}function ae(ie){y.set(ie.clientX,ie.clientY),x.subVectors(y,v).multiplyScalar(r.rotateSpeed);const De=r.domElement;De&&(B(2*Math.PI*x.x/De.clientHeight),Z(2*Math.PI*x.y/De.clientHeight)),v.copy(y),r.update()}function Se(ie){I.set(ie.clientX,ie.clientY),L.subVectors(I,M),L.y>0?q(V()):L.y<0&&se(V()),M.copy(I),r.update()}function Re(ie){w.set(ie.clientX,ie.clientY),S.subVectors(w,_).multiplyScalar(r.panSpeed),z(S.x,S.y),_.copy(w),r.update()}function Ae(ie){J(ie),ie.deltaY<0?se(V()):ie.deltaY>0&&q(V()),r.update()}function Te(ie){let De=!1;switch(ie.code){case r.keys.UP:z(0,r.keyPanSpeed),De=!0;break;case r.keys.BOTTOM:z(0,-r.keyPanSpeed),De=!0;break;case r.keys.LEFT:z(r.keyPanSpeed,0),De=!0;break;case r.keys.RIGHT:z(-r.keyPanSpeed,0),De=!0;break}De&&(ie.preventDefault(),r.update())}function te(){if(k.length==1)v.set(k[0].pageX,k[0].pageY);else{const ie=.5*(k[0].pageX+k[1].pageX),De=.5*(k[0].pageY+k[1].pageY);v.set(ie,De)}}function le(){if(k.length==1)_.set(k[0].pageX,k[0].pageY);else{const ie=.5*(k[0].pageX+k[1].pageX),De=.5*(k[0].pageY+k[1].pageY);_.set(ie,De)}}function we(){const ie=k[0].pageX-k[1].pageX,De=k[0].pageY-k[1].pageY,Ke=Math.sqrt(ie*ie+De*De);M.set(0,Ke)}function Be(){r.enableZoom&&we(),r.enablePan&&le()}function Fe(){r.enableZoom&&we(),r.enableRotate&&te()}function Je(ie){if(k.length==1)y.set(ie.pageX,ie.pageY);else{const Ke=at(ie),ee=.5*(ie.pageX+Ke.x),ve=.5*(ie.pageY+Ke.y);y.set(ee,ve)}x.subVectors(y,v).multiplyScalar(r.rotateSpeed);const De=r.domElement;De&&(B(2*Math.PI*x.x/De.clientHeight),Z(2*Math.PI*x.y/De.clientHeight)),v.copy(y)}function Ze(ie){if(k.length==1)w.set(ie.pageX,ie.pageY);else{const De=at(ie),Ke=.5*(ie.pageX+De.x),ee=.5*(ie.pageY+De.y);w.set(Ke,ee)}S.subVectors(w,_).multiplyScalar(r.panSpeed),z(S.x,S.y),_.copy(w)}function et(ie){const De=at(ie),Ke=ie.pageX-De.x,ee=ie.pageY-De.y,ve=Math.sqrt(Ke*Ke+ee*ee);I.set(0,ve),L.set(0,Math.pow(I.y/M.y,r.zoomSpeed)),q(L.y),M.copy(I)}function At(ie){r.enableZoom&&et(ie),r.enablePan&&Ze(ie)}function Ot(ie){r.enableZoom&&et(ie),r.enableRotate&&Je(ie)}function X(ie){var De,Ke;r.enabled!==!1&&(k.length===0&&((De=r.domElement)==null||De.ownerDocument.addEventListener("pointermove",W),(Ke=r.domElement)==null||Ke.ownerDocument.addEventListener("pointerup",ye)),Ye(ie),ie.pointerType==="touch"?$e(ie):Ve(ie))}function W(ie){r.enabled!==!1&&(ie.pointerType==="touch"?Ce(ie):Oe(ie))}function ye(ie){var De,Ke,ee;ht(ie),k.length===0&&((De=r.domElement)==null||De.releasePointerCapture(ie.pointerId),(Ke=r.domElement)==null||Ke.ownerDocument.removeEventListener("pointermove",W),(ee=r.domElement)==null||ee.ownerDocument.removeEventListener("pointerup",ye)),r.dispatchEvent(o),l=a.NONE}function Ve(ie){let De;switch(ie.button){case 0:De=r.mouseButtons.LEFT;break;case 1:De=r.mouseButtons.MIDDLE;break;case 2:De=r.mouseButtons.RIGHT;break;default:De=-1}switch(De){case nd.DOLLY:if(r.enableZoom===!1)return;re(ie),l=a.DOLLY;break;case nd.ROTATE:if(ie.ctrlKey||ie.metaKey||ie.shiftKey){if(r.enablePan===!1)return;Y(ie),l=a.PAN}else{if(r.enableRotate===!1)return;_e(ie),l=a.ROTATE}break;case nd.PAN:if(ie.ctrlKey||ie.metaKey||ie.shiftKey){if(r.enableRotate===!1)return;_e(ie),l=a.ROTATE}else{if(r.enablePan===!1)return;Y(ie),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Oe(ie){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;ae(ie);break;case a.DOLLY:if(r.enableZoom===!1)return;Se(ie);break;case a.PAN:if(r.enablePan===!1)return;Re(ie);break}}function je(ie){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(ie.preventDefault(),r.dispatchEvent(s),Ae(ie),r.dispatchEvent(o))}function rt(ie){r.enabled===!1||r.enablePan===!1||Te(ie)}function $e(ie){switch(dt(ie),k.length){case 1:switch(r.touches.ONE){case rd.ROTATE:if(r.enableRotate===!1)return;te(),l=a.TOUCH_ROTATE;break;case rd.PAN:if(r.enablePan===!1)return;le(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case rd.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Be(),l=a.TOUCH_DOLLY_PAN;break;case rd.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Fe(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Ce(ie){switch(dt(ie),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;Je(ie),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;Ze(ie),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;At(ie),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ot(ie),r.update();break;default:l=a.NONE}}function ct(ie){r.enabled!==!1&&ie.preventDefault()}function Ye(ie){k.push(ie)}function ht(ie){delete O[ie.pointerId];for(let De=0;De<k.length;De++)if(k[De].pointerId==ie.pointerId){k.splice(De,1);return}}function dt(ie){let De=O[ie.pointerId];De===void 0&&(De=new Ie,O[ie.pointerId]=De),De.set(ie.pageX,ie.pageY)}function at(ie){const De=ie.pointerId===k[0].pointerId?k[1]:k[0];return O[De.pointerId]}this.dollyIn=(ie=V())=>{se(ie),r.update()},this.dollyOut=(ie=V())=>{q(ie),r.update()},this.getScale=()=>f,this.setScale=ie=>{G(ie),r.update()},this.getZoomScale=()=>V(),t!==void 0&&this.connect(t),this.update()}};const cM=n=>n===Object(n)&&!Array.isArray(n)&&typeof n!="function";function yk(n,e){const t=el(s=>s.gl),r=y0(cS,cM(n)?Object.values(n):n);return R.useLayoutEffect(()=>{e==null||e(r)},[e]),R.useEffect(()=>{if("initTexture"in t){let s=[];Array.isArray(r)?s=r:r instanceof Yn?s=[r]:cM(r)&&(s=Object.values(r)),s.forEach(o=>{o instanceof Yn&&t.initTexture(o)})}},[t,r]),R.useMemo(()=>{if(cM(n)){const s={};let o=0;for(const a in n)s[a]=r[o++];return s}else return r},[n,r])}yk.preload=n=>y0.preload(cS,n);yk.clear=n=>y0.clear(cS,n);const LAe=R.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const d=el(L=>L.invalidate),f=el(L=>L.camera),g=el(L=>L.gl),v=el(L=>L.events),y=el(L=>L.setEvents),x=el(L=>L.set),_=el(L=>L.get),w=el(L=>L.performance),S=e||f,M=r||v.connected||g.domElement,I=R.useMemo(()=>new DAe(S),[S]);return sAe(()=>{I.enabled&&I.update()},-1),R.useEffect(()=>(s&&I.connect(s===!0?M:s),I.connect(M),()=>void I.dispose()),[s,M,t,I,d]),R.useEffect(()=>{const L=C=>{d(),t&&w.regress(),o&&o(C)},P=C=>{a&&a(C)},T=C=>{l&&l(C)};return I.addEventListener("change",L),I.addEventListener("start",P),I.addEventListener("end",T),()=>{I.removeEventListener("start",P),I.removeEventListener("end",T),I.removeEventListener("change",L)}},[o,a,l,I,d,y]),R.useEffect(()=>{if(n){const L=_().controls;return x({controls:I}),()=>x({controls:L})}},[n,I]),R.createElement("primitive",wv({ref:u,object:I,enableDamping:i},c))});function OAe({frontUrl:n,backUrl:e}){const t=yk([n,e]);return m.jsxs("group",{children:[m.jsxs("mesh",{children:[m.jsx("boxGeometry",{args:[3.4,2.2,.06]}),m.jsx("meshStandardMaterial",{attach:"material-0",color:"#e5e7eb"}),m.jsx("meshStandardMaterial",{attach:"material-1",color:"#e5e7eb"}),m.jsx("meshStandardMaterial",{attach:"material-2",color:"#e5e7eb"}),m.jsx("meshStandardMaterial",{attach:"material-3",color:"#e5e7eb"}),m.jsx("meshStandardMaterial",{attach:"material-4",map:t[0]}),m.jsx("meshStandardMaterial",{attach:"material-5",map:t[1]})]}),m.jsxs("mesh",{position:[0,0,.031],children:[" ",m.jsx("planeGeometry",{args:[3.4,2.2]}),m.jsx("meshBasicMaterial",{map:t[0],transparent:!0})]}),m.jsxs("mesh",{position:[0,0,-.031],rotation:[0,Math.PI,0],children:[" ",m.jsx("planeGeometry",{args:[3.4,2.2]}),m.jsx("meshBasicMaterial",{map:t[1],transparent:!0})]})]})}function FAe({frontUrl:n,backUrl:e}){return m.jsx(R.Suspense,{fallback:null,children:m.jsx(OAe,{frontUrl:n,backUrl:e})})}function jAe(){const[n,e]=R.useState({frontUrl:"",backUrl:"",fullName:""}),[,t]=Y1(),[r,i]=R.useState(!1);R.useEffect(()=>{const o=new URLSearchParams(window.location.search);return e({frontUrl:o.get("frontUrl")||"",backUrl:o.get("backUrl")||"",fullName:o.get("fullName")||""}),document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[]);const s=async()=>{i(!0);try{if(n.frontUrl){const a=await(await fetch(n.frontUrl)).blob(),l=window.URL.createObjectURL(a),c=document.createElement("a");c.href=l,c.download=`kartu-anggota-${n.fullName||"depan"}.png`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}if(n.backUrl){const a=await(await fetch(n.backUrl)).blob(),l=window.URL.createObjectURL(a),c=document.createElement("a");c.href=l,c.download=`kartu-anggota-${n.fullName||"belakang"}-belakang.png`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}}catch{alert("Gagal mengunduh kartu. Silakan coba lagi.")}i(!1)};return!n.frontUrl||!n.backUrl?m.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"URL kartu tidak valid."}):m.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:[m.jsxs("div",{className:"sticky top-0 flex flex-col sm:flex-row items-center justify-between gap-2 p-3 sm:p-4 bg-black/70 z-10 w-full",children:[m.jsxs("span",{className:"text-white font-bold text-base sm:text-lg text-center w-full sm:w-auto truncate",children:["3D Kartu Anggota: ",n.fullName]}),m.jsxs("div",{className:"flex gap-2 w-full sm:w-auto justify-center sm:justify-end",children:[m.jsxs(vt,{className:"bg-primary text-white w-full sm:w-auto",onClick:s,disabled:r,children:[m.jsx(f2,{className:"w-4 h-4 mr-2"}),r?"Mengunduh...":"Unduh Kartu Anggota Untuk Print"]}),m.jsx("button",{className:"text-white bg-gray-800 hover:bg-gray-700 rounded px-4 py-2 w-full sm:w-auto",onClick:()=>t("/kartu-anggota"),children:"Tutup"})]})]}),m.jsx("div",{className:"flex-1 min-h-0",children:m.jsx("div",{className:"w-full h-[60vh] sm:h-full",children:m.jsxs(MAe,{camera:{position:[0,0,6],fov:50},style:{width:"100vw",height:"100%",minHeight:320,maxHeight:"100vh",background:"black"},children:[m.jsx("ambientLight",{intensity:.7}),m.jsx("directionalLight",{position:[5,5,5],intensity:.7}),m.jsx(FAe,{frontUrl:n.frontUrl,backUrl:n.backUrl}),m.jsx(LAe,{enablePan:!1})]})})})]})}function VAe(){const[n]=Y1();return R.useEffect(()=>{window.scrollTo({top:0,behavior:"auto"})},[n]),null}function UAe(){R.useEffect(()=>{function n(t={}){const r=t&&t.element,i=r||document.body,s=["","",""];let o=window.innerWidth,a=window.innerHeight,l={x:o/2,y:o/2},c=[],u,d,f,g=[];const v=window.matchMedia("(prefers-reduced-motion: reduce)");v.onchange=()=>{v.matches?P():y()};function y(){if(v.matches)return!1;u=document.createElement("canvas"),d=u.getContext("2d"),u.style.top="0px",u.style.left="0px",u.style.pointerEvents="none",r?(u.style.position="absolute",i.appendChild(u),u.width=i.clientWidth,u.height=i.clientHeight):(u.style.position="fixed",document.body.appendChild(u),u.width=o,u.height=a),d&&(d.font="20px serif",d.textBaseline="middle",d.textAlign="center",s.forEach(C=>{if(!d)return;let k=d.measureText(C),O=document.createElement("canvas"),U=O.getContext("2d");O.width=k.width,O.height=(k.actualBoundingBoxAscent||20)*2,U&&(U.textAlign="center",U.font="20px serif",U.textBaseline="middle",U.fillText(C,O.width/2,k.actualBoundingBoxAscent||20),g.push(O))}),x(),L())}function x(){i.addEventListener("mousemove",S),i.addEventListener("touchmove",w,{passive:!0}),i.addEventListener("touchstart",w,{passive:!0}),window.addEventListener("resize",_)}function _(C){o=window.innerWidth,a=window.innerHeight,r?(u.width=i.clientWidth,u.height=i.clientHeight):(u.width=o,u.height=a)}function w(C){if(C.touches.length>0)for(let k=0;k<C.touches.length;k++)M(C.touches[k].clientX,C.touches[k].clientY,g[Math.floor(Math.random()*g.length)])}function S(C){if(r){const k=i.getBoundingClientRect();l.x=C.clientX-k.left,l.y=C.clientY-k.top}else l.x=C.clientX,l.y=C.clientY;M(l.x,l.y,g[Math.floor(Math.random()*g.length)])}function M(C,k,O){c.push(new T(C,k,O))}function I(){if(!(!d||c.length===0)){d.clearRect(0,0,o,a);for(let C=0;C<c.length;C++)c[C].update(d);for(let C=c.length-1;C>=0;C--)c[C].lifeSpan<0&&c.splice(C,1);c.length===0&&d&&d.clearRect(0,0,o,a)}}function L(){I(),f=requestAnimationFrame(L)}function P(){u&&u.parentNode&&u.parentNode.removeChild(u),cancelAnimationFrame(f),i.removeEventListener("mousemove",S),i.removeEventListener("touchmove",w),i.removeEventListener("touchstart",w),window.removeEventListener("resize",_)}class T{constructor(k,O,U){Bh(this,"position");Bh(this,"velocity");Bh(this,"lifeSpan");Bh(this,"initialLifeSpan");Bh(this,"canv");const V=Math.floor(Math.random()*60+80);this.initialLifeSpan=V,this.lifeSpan=V,this.velocity={x:(Math.random()<.5?-1:1)*(Math.random()/2),y:1+Math.random()},this.position={x:k,y:O},this.canv=U}update(k){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.x+=(Math.random()<.5?-1:1)*2/75,this.velocity.y-=Math.random()/300,this.lifeSpan--;const O=Math.max(this.lifeSpan/this.initialLifeSpan,0),V=2*this.lifeSpan*.0174533;k.save(),k.translate(this.position.x,this.position.y),k.rotate(V),k.drawImage(this.canv,-this.canv.width/2*O,-this.canv.height/2,this.canv.width*O,this.canv.height*O),k.rotate(-V),k.translate(-this.position.x,-this.position.y),k.restore()}}return y(),{destroy:P}}const e=n();return()=>e.destroy()},[])}function vk({url:n,label:e}){return m.jsxs("a",{href:n,download:!0,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-green-600 to-green-400 text-white font-semibold shadow hover:from-green-700 hover:to-green-500 transition mb-4",style:{textDecoration:"none"},children:[m.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5 5-5M12 15V3"})}),e]})}function zAe(){return m.jsxs("section",{className:"bg-white/90 rounded-2xl shadow-xl p-6 mb-4 text-gray-800",children:[m.jsx(vk,{url:"/panduan-survival.pdf",label:"Download Buku Panduan Survival"}),m.jsx("h2",{className:"text-2xl font-bold mb-3 text-green-800",children:"Panduan Survival Dasar"}),m.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-lg",children:[m.jsx("li",{children:"Tenang, jangan panik. Analisa situasi dan sumber daya sekitar."}),m.jsx("li",{children:"Cari sumber air bersih dan buat perlindungan (bivak/shelter)."}),m.jsx("li",{children:"Jaga suhu tubuh, hindari hipotermia/heatstroke."}),m.jsx("li",{children:"Gunakan api untuk sinyal, hangat, dan memasak."}),m.jsx("li",{children:"Manfaatkan alat survival: kompas, pisau, peluit, senter, dsb."}),m.jsx("li",{children:"Catat lokasi terakhir dan buat tanda jejak jika berpindah."})]})]})}function BAe(){const[n,e]=R.useState(0),[t,r]=R.useState(!1);function i(){r(!0),e(0)}function s(){e(o=>o+1)}return m.jsxs("section",{className:"bg-white/90 rounded-2xl shadow-xl p-6 mb-4 text-gray-800",children:[m.jsx(vk,{url:"/ppgd.pdf",label:"Download Buku PPGD"}),m.jsx("h2",{className:"text-2xl font-bold mb-3 text-green-800",children:"PPGD (Pertolongan Pertama Gawat Darurat)"}),m.jsxs("ol",{className:"list-decimal pl-5 space-y-2 mb-4 text-lg",children:[m.jsx("li",{children:"Pastikan keamanan lokasi sebelum menolong."}),m.jsx("li",{children:"Periksa respons korban: sadar/tidak, napas, denyut nadi."}),m.jsx("li",{children:"Lakukan RJP (Resusitasi Jantung Paru) jika perlu."}),m.jsx("li",{children:"Hentikan perdarahan, atasi syok, imobilisasi patah tulang."}),m.jsx("li",{children:"Gunakan alat P3K, jaga kebersihan luka."}),m.jsx("li",{children:"Segera cari bantuan medis jika kondisi berat."})]}),m.jsxs("div",{className:"bg-green-100 rounded-lg p-4 mb-2 shadow",children:[m.jsx("h3",{className:"font-semibold mb-2 text-green-700",children:"Simulasi RJP"}),t?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"mb-2",children:"Tekan tombol di bawah ini sebanyak 30x untuk simulasi kompresi dada!"}),m.jsxs("button",{className:"btn-nav mb-2",onClick:s,children:["Tekan Dada (",n,"/30)"]}),n>=30&&m.jsx("div",{className:"text-green-700 font-bold",children:"Simulasi selesai! Segera lakukan napas bantuan."})]}):m.jsx("button",{className:"btn-nav",onClick:i,children:"Mulai Simulasi RJP"})]})]})}function HAe(){const[n,e]=R.useState("Tidak tersedia");return Ht.useEffect(()=>{function t(r){if(r.absolute&&typeof r.alpha=="number"){const i=Math.round(r.alpha);e(`${i} (Utara: 0)`)}}return window.addEventListener("deviceorientationabsolute",t),window.addEventListener("deviceorientation",t),()=>{window.removeEventListener("deviceorientationabsolute",t),window.removeEventListener("deviceorientation",t)}},[]),m.jsxs("section",{className:"bg-white/90 rounded-2xl shadow-xl p-6 mb-4 text-gray-800",children:[m.jsx(vk,{url:"/navigasi-darat.pdf",label:"Download Buku Navigasi Darat"}),m.jsx("h2",{className:"text-2xl font-bold mb-3 text-green-800",children:"Navigasi Darat"}),m.jsxs("ul",{className:"list-disc pl-5 space-y-2 mb-4 text-lg",children:[m.jsx("li",{children:"Gunakan peta topografi dan kompas untuk orientasi."}),m.jsx("li",{children:"Kenali tanda alam: matahari, bintang, arah angin, vegetasi."}),m.jsx("li",{children:"Buat rencana perjalanan dan catat titik penting di jalur."}),m.jsx("li",{children:"Hindari berjalan sendirian, selalu informasikan posisi ke tim."}),m.jsx("li",{children:"Gunakan GPS jika tersedia, tapi tetap siapkan navigasi manual."})]}),m.jsxs("div",{className:"bg-green-100 rounded-lg p-4 shadow",children:[m.jsx("h3",{className:"font-semibold mb-2 text-green-700",children:"Simulasi Kompas"}),m.jsxs("div",{className:"text-lg",children:["Arah Utara: ",m.jsx("span",{className:"font-bold",children:n})]}),m.jsx("div",{className:"text-green-600 text-xs mt-2",children:"(Fitur ini hanya akurat di HP dengan sensor kompas)"})]})]})}function WAe(){const n=["Kompas","Bivak/Shelter","Peluit","Pisau","Senter/Headlamp","Makanan Cadangan","P3K","Botol Air","Jas Hujan","Tali Paracord","Pakaian Cadangan","Korek Api/Firestarter"],[e,t]=R.useState(()=>{const s=localStorage.getItem("survival_checklist");return s?JSON.parse(s):Array(n.length).fill(!1)});function r(s){const o=[...e];o[s]=!o[s],t(o),localStorage.setItem("survival_checklist",JSON.stringify(o))}function i(){const s=Array(n.length).fill(!1);t(s),localStorage.setItem("survival_checklist",JSON.stringify(s))}return m.jsxs("section",{className:"bg-white/90 rounded-2xl shadow-xl p-6 mb-4 text-gray-800",children:[m.jsx("h2",{className:"text-2xl font-bold mb-3 text-green-800",children:"Checklist Survival"}),m.jsx("ul",{className:"space-y-3",children:n.map((s,o)=>m.jsxs("li",{className:"flex items-center gap-3",children:[m.jsx("input",{type:"checkbox",id:s,checked:e[o],onChange:()=>r(o)}),m.jsx("label",{htmlFor:s,className:"text-lg select-none",children:s})]},s))}),m.jsx("button",{className:"btn-nav mt-4",onClick:i,children:"Reset Checklist"}),m.jsx("p",{className:"mt-2 text-green-200 text-sm",children:"Checklist tersimpan otomatis di perangkat Anda."})]})}function GAe(){const[n,e]=R.useState(!1),[t,r]=R.useState(""),[i,s]=R.useState(()=>{const _=localStorage.getItem("gps_track");return _?JSON.parse(_):[]}),[o,a]=R.useState(""),[l,c]=R.useState(()=>localStorage.getItem("gps_nama")||"");let u=Ht.useRef(null);function d(_){const w=JSON.parse(localStorage.getItem("gps_tracker")||"[]");w.push(_),localStorage.setItem("gps_tracker",JSON.stringify(w))}async function f(){if(!navigator.onLine)return;const _=JSON.parse(localStorage.getItem("gps_tracker")||"[]");if(!_.length)return;let w=!0;for(const S of _)try{await YA(ei(_n,"gps_tracker"),S)}catch{w=!1;break}w&&localStorage.removeItem("gps_tracker")}async function g(){if(!l)return;const _=xH(ei(_n,"gps_tracker"),_H("nama","==",l)),w=await ss(_);for(const S of w.docs)await Ng(S.ref)}function v(){e(!1),u.current&&(navigator.geolocation.clearWatch(u.current),u.current=null),s([]),localStorage.removeItem("gps_track"),localStorage.removeItem("gps_tracker"),g(),r("Pelacakan dimatikan dan data dihapus.")}function y(){if(l){if(!navigator.geolocation){r("Geolocation tidak didukung browser.");return}e(!0),r("Pelacakan aktif..."),u.current=navigator.geolocation.watchPosition(_=>{const w={lat:_.coords.latitude,lon:_.coords.longitude,time:new Date().toISOString(),nama:l,online:navigator.onLine};s(S=>{const M=[...S,w];return localStorage.setItem("gps_track",JSON.stringify(M)),M}),d(w),navigator.onLine&&f()},_=>r("Gagal mendapatkan lokasi: "+_.message),{enableHighAccuracy:!0,maximumAge:0,timeout:1e4})}}Ht.useEffect(()=>()=>{u.current&&navigator.geolocation.clearWatch(u.current)},[]);function x(){s([]),localStorage.removeItem("gps_track"),localStorage.removeItem("gps_tracker")}return Ht.useEffect(()=>{function _(){r(navigator.onLine?"Online":"Mode Offline: Menyimpan data lokal")}return window.addEventListener("online",_),window.addEventListener("offline",_),_(),()=>{window.removeEventListener("online",_),window.removeEventListener("offline",_)}},[]),m.jsxs("section",{className:"bg-white/90 rounded-2xl shadow-xl p-6 mb-4 text-gray-800",children:[m.jsx("h2",{className:"text-2xl font-bold mb-3 text-green-800",children:"Pelacak Lokasi GPS"}),l?null:m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block mb-2 text-green-800 font-semibold",children:"Masukkan Nama Anda:"}),m.jsx("input",{className:"px-3 py-2 rounded border border-green-400 focus:outline-none focus:ring-2 focus:ring-green-600 text-gray-900",value:o,onChange:_=>a(_.target.value),placeholder:"Nama Lengkap"}),m.jsx("button",{className:"btn-nav ml-2 mt-2",onClick:()=>{c(o),localStorage.setItem("gps_nama",o)},disabled:!o.trim(),children:"Simpan Nama"})]}),m.jsx("button",{className:"btn-nav mb-4",onClick:y,disabled:n||!l,children:"Aktifkan Pelacakan"}),m.jsx("button",{className:"btn-nav mb-4 ml-2",onClick:x,children:"Reset Data Lokasi"}),m.jsx("button",{className:"btn-nav mb-4 ml-2 bg-red-600 hover:bg-red-700",onClick:v,disabled:!n,children:"Matikan GPS"}),m.jsx("div",{className:"mb-2 text-green-700 text-sm",children:t}),m.jsx("div",{className:"overflow-x-auto bg-green-100 rounded-lg p-2 text-xs",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Waktu"}),m.jsx("th",{children:"Lat"}),m.jsx("th",{children:"Lon"}),m.jsx("th",{children:"Nama"}),m.jsx("th",{children:"Status"})]})}),m.jsx("tbody",{children:i.map((_,w)=>m.jsxs("tr",{children:[m.jsx("td",{children:_.time}),m.jsx("td",{children:_.lat}),m.jsx("td",{children:_.lon}),m.jsx("td",{children:_.nama||l}),m.jsx("td",{children:m.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold ${_.online?"bg-green-500 text-white":"bg-gray-400 text-white"}`,children:_.online?"Online":"Offline"})})]},w))})]})}),m.jsx("p",{className:"mt-2 text-green-700 text-xs",children:"Data lokasi tersimpan lokal & dikirim ke server jika online."})]})}function $Ae(){const[n,e]=R.useState("survival");return m.jsxs("div",{className:"min-h-screen bg-green-900 text-white flex flex-col font-sans",children:[m.jsxs("header",{className:"bg-green-800 py-4 px-4 text-center shadow-lg",children:[m.jsx("h1",{className:"text-2xl font-bold tracking-wide",children:"Offline Survival Mahapala Narotama"}),m.jsx("p",{className:"text-sm text-green-200",children:"Panduan survival, PPGD, navigasi, checklist, dan pelacak GPS. Bisa diakses offline!"})]}),m.jsxs("nav",{className:"flex flex-wrap justify-center gap-3 bg-green-950 py-3 px-2 sticky top-0 z-10",children:[m.jsx("button",{className:`btn-nav${n==="survival"?" bg-green-700":""}`,onClick:()=>e("survival"),children:"Panduan Survival"}),m.jsx("button",{className:`btn-nav${n==="ppgd"?" bg-green-700":""}`,onClick:()=>e("ppgd"),children:"PPGD"}),m.jsx("button",{className:`btn-nav${n==="navigasi"?" bg-green-700":""}`,onClick:()=>e("navigasi"),children:"Navigasi Darat"}),m.jsx("button",{className:`btn-nav${n==="checklist"?" bg-green-700":""}`,onClick:()=>e("checklist"),children:"Checklist Survival"}),m.jsx("button",{className:`btn-nav${n==="gps"?" bg-green-700":""}`,onClick:()=>e("gps"),children:"Pelacak GPS"})]}),m.jsxs("main",{className:"flex-1 w-full max-w-2xl mx-auto p-4",children:[n==="survival"&&m.jsx(zAe,{}),n==="ppgd"&&m.jsx(BAe,{}),n==="navigasi"&&m.jsx(HAe,{}),n==="checklist"&&m.jsx(WAe,{}),n==="gps"&&m.jsx(GAe,{})]}),m.jsxs("footer",{className:"text-center text-green-200 py-3 text-xs bg-green-950",children:[" ",new Date().getFullYear()," Mahapala Narotama"]}),m.jsx("style",{children:`
        body { background: #14532d; }
        .btn-nav {
          background: #166534;
          color: #fff;
          font-size: 1.1rem;
          border-radius: 0.5rem;
          padding: 0.7rem 1.2rem;
          font-weight: bold;
          box-shadow: 0 2px 8px #0002;
          border: none;
          margin: 0.2rem;
          transition: background 0.2s;
        }
        .btn-nav:active, .btn-nav:hover, .btn-nav.bg-green-700 {
          background: #22c55e;
          color: #14532d;
        }
        input[type=checkbox] {
          width: 1.3em; height: 1.3em;
        }
      `})]})}class qAe extends Ht.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?m.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 text-center p-8",children:[m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Terjadi Kesalahan"}),m.jsx("p",{className:"mb-4 text-gray-600",children:"Maaf, terjadi error pada aplikasi. Silakan refresh halaman atau coba lagi nanti."}),m.jsx("button",{className:"px-4 py-2 bg-primary text-white rounded",onClick:()=>window.location.reload(),children:"Refresh"})]}):this.props.children}}function KAe(){return UAe(),Ht.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js")},[]),m.jsx(qAe,{children:m.jsxs(ate,{children:[m.jsx(DZ,{}),m.jsx(VAe,{}),m.jsx(Mne,{children:m.jsxs(IQ,{children:[m.jsx(no,{path:"/offline",component:$Ae}),m.jsx(no,{path:"/",component:jve}),m.jsx(no,{path:"/kegiatan",component:y0e}),m.jsx(no,{path:"/pembelajaran",component:v0e}),m.jsx(no,{path:"/kartu-anggota",component:F0e}),m.jsx(no,{path:"/pendaftaran",component:j0e}),m.jsx(no,{path:"/galeri",component:V0e}),m.jsx(no,{path:"/admin",component:xxe}),m.jsx(no,{path:"/kegiatan/:id",component:_xe}),m.jsx(no,{path:"/kartu-anggota-detail",component:wxe}),m.jsx(no,{path:"/member-card-3d",component:jAe}),m.jsx(no,{component:cte})]})})]})})}async function YAe(n){if(!n.ok){const e=await n.text()||n.statusText;throw new Error(`${n.status}: ${e}`)}}const XAe=({on401:n})=>async({queryKey:e})=>{const t=await fetch(e[0],{credentials:"include"});return await YAe(t),await t.json()},QAe=new Eie({defaultOptions:{queries:{queryFn:XAe({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});a5(document.getElementById("root")).render(m.jsx(Pie,{client:QAe,children:m.jsx(KAe,{})}));
